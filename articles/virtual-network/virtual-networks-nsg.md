---
title: "Hálózati biztonsági csoportok az Azure-ban | Microsoft Docs"
description: "Ismerje meg, miként különítheti el és irányíthatja a forgalmat virtuális hálózatán belül a hálózati biztonsági csoportokra épülő Azure elosztott tűzfal használatával."
services: virtual-network
documentationcenter: na
author: jimdial
manager: timlt
editor: tysonn
ms.assetid: 20e850fc-6456-4b5f-9a3f-a8379b052bc9
ms.service: virtual-network
ms.devlang: na
ms.topic: get-started-article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 02/11/2016
ms.author: jdial
ms.openlocfilehash: fac6ee69b5f0377e0515ac9abeb28788cbef9b79
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 08/18/2017
---
# <a name="filter-network-traffic-with-network-security-groups"></a><span data-ttu-id="a490d-103">Hálózati forgalom szűrése hálózati biztonsági csoportokkal</span><span class="sxs-lookup"><span data-stu-id="a490d-103">Filter network traffic with network security groups</span></span>

<span data-ttu-id="a490d-104">A hálózati biztonsági csoport (NSG) egy biztonsági szabályokból álló listát tartalmaz, amelyek engedélyezik vagy megtagadják a hálózati forgalmat az Azure-alapú virtuális hálózatokhoz (VNet-ekhez) csatlakozó erőforrásoknak.</span><span class="sxs-lookup"><span data-stu-id="a490d-104">A network security group (NSG) contains a list of security rules that allow or deny network traffic to resources connected to Azure Virtual Networks (VNet).</span></span> <span data-ttu-id="a490d-105">Az NSG-k társíthatóak alhálózatokhoz, egyedi virtuális gépekhez (klasszikus) vagy virtuális gépekhez (Resource Manager) kapcsolt hálózati adapterekhez (NIC).</span><span class="sxs-lookup"><span data-stu-id="a490d-105">NSGs can be associated to subnets, individual VMs (classic), or individual network interfaces (NIC) attached to VMs (Resource Manager).</span></span> <span data-ttu-id="a490d-106">Ha az NSG-t hozzárendelik egy alhálózathoz, a szabályok érvényesek lesznek az alhálózathoz csatlakozó összes erőforrásra.</span><span class="sxs-lookup"><span data-stu-id="a490d-106">When an NSG is associated to a subnet, the rules apply to all resources connected to the subnet.</span></span> <span data-ttu-id="a490d-107">A forgalom tovább korlátozható egy NGS-t virtuális géphez vagy hálózati adapterhez társításával.</span><span class="sxs-lookup"><span data-stu-id="a490d-107">Traffic can further be restricted by also associating an NSG to a VM or NIC.</span></span>

> [!NOTE]
> <span data-ttu-id="a490d-108">Az Azure két különböző üzembe helyezési modellel rendelkezik az erőforrások létrehozásához és használatához: [Resource Manager és klasszikus](../resource-manager-deployment-model.md).</span><span class="sxs-lookup"><span data-stu-id="a490d-108">Azure has two different deployment models for creating and working with resources:  [Resource Manager and classic](../resource-manager-deployment-model.md).</span></span> <span data-ttu-id="a490d-109">A jelen cikk mindkét modell használatát bemutatja, de a Microsoft azt javasolja, hogy az új telepítések esetén a Resource Manager modellt használja.</span><span class="sxs-lookup"><span data-stu-id="a490d-109">This article covers using both models, but Microsoft recommends that most new deployments use the Resource Manager model.</span></span>

## <a name="nsg-resource"></a><span data-ttu-id="a490d-110">NSG-erőforrás</span><span class="sxs-lookup"><span data-stu-id="a490d-110">NSG resource</span></span>
<span data-ttu-id="a490d-111">Az NSG-k az alábbi tulajdonságokat tartalmazzák:</span><span class="sxs-lookup"><span data-stu-id="a490d-111">NSGs contain the following properties:</span></span>

| <span data-ttu-id="a490d-112">Tulajdonság</span><span class="sxs-lookup"><span data-stu-id="a490d-112">Property</span></span> | <span data-ttu-id="a490d-113">Leírás</span><span class="sxs-lookup"><span data-stu-id="a490d-113">Description</span></span> | <span data-ttu-id="a490d-114">Korlátozások</span><span class="sxs-lookup"><span data-stu-id="a490d-114">Constraints</span></span> | <span data-ttu-id="a490d-115">Megfontolandó szempontok</span><span class="sxs-lookup"><span data-stu-id="a490d-115">Considerations</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="a490d-116">Név</span><span class="sxs-lookup"><span data-stu-id="a490d-116">Name</span></span> |<span data-ttu-id="a490d-117">Az NSG neve</span><span class="sxs-lookup"><span data-stu-id="a490d-117">Name for the NSG</span></span> |<span data-ttu-id="a490d-118">Egyedinek kell lennie a régión belül.</span><span class="sxs-lookup"><span data-stu-id="a490d-118">Must be unique within the region.</span></span><br/><span data-ttu-id="a490d-119">Betűket, számokat, aláhúzásjeleket, pontokat és kötőjeleket tartalmazhat.</span><span class="sxs-lookup"><span data-stu-id="a490d-119">Can contain letters, numbers, underscores, periods, and hyphens.</span></span><br/><span data-ttu-id="a490d-120">Betűvel vagy számmal kell kezdődnie.</span><span class="sxs-lookup"><span data-stu-id="a490d-120">Must start with a letter or number.</span></span><br/><span data-ttu-id="a490d-121">Betűvel, számmal vagy aláhúzásjellel kell végződnie.</span><span class="sxs-lookup"><span data-stu-id="a490d-121">Must end with a letter, number, or underscore.</span></span><br/><span data-ttu-id="a490d-122">Nem lehet hosszabb 80 karakternél.</span><span class="sxs-lookup"><span data-stu-id="a490d-122">Cannot exceed 80 characters.</span></span> |<span data-ttu-id="a490d-123">Mivel előfordulhat, hogy több NSG-t kell létrehoznia, győződjön meg arról, hogy van egy elnevezési konvenciója, amellyel könnyedén azonosíthatja az NSG-k funkcióját.</span><span class="sxs-lookup"><span data-stu-id="a490d-123">Since you may need to create several NSGs, make sure you have a naming convention that makes it easy to identify the function of your NSGs.</span></span> |
| <span data-ttu-id="a490d-124">Régió</span><span class="sxs-lookup"><span data-stu-id="a490d-124">Region</span></span> |<span data-ttu-id="a490d-125">Az Azure-[régió](https://azure.microsoft.com/regions), ahol az NSG létrejön.</span><span class="sxs-lookup"><span data-stu-id="a490d-125">Azure [region](https://azure.microsoft.com/regions) where the NSG is created.</span></span> |<span data-ttu-id="a490d-126">Az NSG-ket csak az NSG-kkel megegyező régióban található erőforrásokra lehet alkalmazni.</span><span class="sxs-lookup"><span data-stu-id="a490d-126">NSGs can only be associated to resources within the same region as the NSG.</span></span> |<span data-ttu-id="a490d-127">A régiónként elérhető NSG-k számáról az [Azure korlátairól](../azure-subscription-service-limits.md#virtual-networking-limits-classic) szóló cikkben olvashat.</span><span class="sxs-lookup"><span data-stu-id="a490d-127">To learn about how many NSGs you can have per region, read the [Azure limits](../azure-subscription-service-limits.md#virtual-networking-limits-classic) article.</span></span>|
| <span data-ttu-id="a490d-128">Erőforráscsoport</span><span class="sxs-lookup"><span data-stu-id="a490d-128">Resource group</span></span> |<span data-ttu-id="a490d-129">Az [erőforráscsoport](../azure-resource-manager/resource-group-overview.md#resource-groups), amelyben az NSG található.</span><span class="sxs-lookup"><span data-stu-id="a490d-129">The [resource group](../azure-resource-manager/resource-group-overview.md#resource-groups) the NSG exists in.</span></span> |<span data-ttu-id="a490d-130">Az NSG-k egy adott erőforráscsoportban találhatók, azonban bármely erőforráscsoport erőforrásaihoz társíthatók, feltéve, hogy az erőforrás ugyanahhoz az Azure-régióhoz tartozik, mint az NSG.</span><span class="sxs-lookup"><span data-stu-id="a490d-130">Although an NSG exists in a resource group, it can be associated to resources in any resource group, as long as the resource is part of the same Azure region as the NSG.</span></span> |<span data-ttu-id="a490d-131">Az erőforráscsoportokkal több erőforrást kezelnek egyszerre, egy üzembe helyezési egységként.</span><span class="sxs-lookup"><span data-stu-id="a490d-131">Resource groups are used to manage multiple resources together, as a deployment unit.</span></span><br/><span data-ttu-id="a490d-132">Érdemes az NSG-ket egy csoportba tenni azokkal az erőforrásokkal, amelyekhez társítva vannak.</span><span class="sxs-lookup"><span data-stu-id="a490d-132">You may consider grouping the NSG with resources it is associated to.</span></span> |
| <span data-ttu-id="a490d-133">Szabályok</span><span class="sxs-lookup"><span data-stu-id="a490d-133">Rules</span></span> |<span data-ttu-id="a490d-134">Az engedélyezett vagy tiltott forgalmat meghatározó bejövő vagy kimenő szabályok.</span><span class="sxs-lookup"><span data-stu-id="a490d-134">Inbound or outbound rules that define what traffic is allowed or denied.</span></span> | |<span data-ttu-id="a490d-135">Lásd az [NSG-szabályokkal](#Nsg-rules) kapcsolatos részt ebben a cikkben.</span><span class="sxs-lookup"><span data-stu-id="a490d-135">See the [NSG rules](#Nsg-rules) section of this article.</span></span> |

> [!NOTE]
> <span data-ttu-id="a490d-136">A végpont-alapú ACL-ek és hálózati biztonsági csoportok nem támogatottak ugyanazon a virtuálisgép-példányon.</span><span class="sxs-lookup"><span data-stu-id="a490d-136">Endpoint-based ACLs and network security groups are not supported on the same VM instance.</span></span> <span data-ttu-id="a490d-137">Ha használni szeretne egy NSG-t, és már be van állítva egy végponti ACL, először el kell távolítani a végponti ACL-t.</span><span class="sxs-lookup"><span data-stu-id="a490d-137">If you want to use an NSG and have an endpoint ACL already in place, first remove the endpoint ACL.</span></span> <span data-ttu-id="a490d-138">Az ACL-ek eltávolításával kapcsolatban olvassa el [a hozzáférés-vezérlési listák a végpontoknál, a PowerShell-lel való kezelésével](virtual-networks-acl-powershell.md) kapcsolatos cikket.</span><span class="sxs-lookup"><span data-stu-id="a490d-138">To learn how to remove an ACL, read the [Managing Access Control Lists (ACLs) for Endpoints by using PowerShell](virtual-networks-acl-powershell.md) article.</span></span>
> 

### <a name="nsg-rules"></a><span data-ttu-id="a490d-139">NSG-szabályok</span><span class="sxs-lookup"><span data-stu-id="a490d-139">NSG rules</span></span>
<span data-ttu-id="a490d-140">Az NSG-szabályok az alábbi tulajdonságokat tartalmazzák:</span><span class="sxs-lookup"><span data-stu-id="a490d-140">NSG rules contain the following properties:</span></span>

| <span data-ttu-id="a490d-141">Tulajdonság</span><span class="sxs-lookup"><span data-stu-id="a490d-141">Property</span></span> | <span data-ttu-id="a490d-142">Leírás</span><span class="sxs-lookup"><span data-stu-id="a490d-142">Description</span></span> | <span data-ttu-id="a490d-143">Korlátozások</span><span class="sxs-lookup"><span data-stu-id="a490d-143">Constraints</span></span> | <span data-ttu-id="a490d-144">Megfontolások</span><span class="sxs-lookup"><span data-stu-id="a490d-144">Considerations</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="a490d-145">**Name (Név)**</span><span class="sxs-lookup"><span data-stu-id="a490d-145">**Name**</span></span> |<span data-ttu-id="a490d-146">A szabály neve.</span><span class="sxs-lookup"><span data-stu-id="a490d-146">Name for the rule.</span></span> |<span data-ttu-id="a490d-147">Egyedinek kell lennie a régión belül.</span><span class="sxs-lookup"><span data-stu-id="a490d-147">Must be unique within the region.</span></span><br/><span data-ttu-id="a490d-148">Betűket, számokat, aláhúzásjeleket, pontokat és kötőjeleket tartalmazhat.</span><span class="sxs-lookup"><span data-stu-id="a490d-148">Can contain letters, numbers, underscores, periods, and hyphens.</span></span><br/><span data-ttu-id="a490d-149">Betűvel vagy számmal kell kezdődnie.</span><span class="sxs-lookup"><span data-stu-id="a490d-149">Must start with a letter or number.</span></span><br/><span data-ttu-id="a490d-150">Betűvel, számmal vagy aláhúzásjellel kell végződnie.</span><span class="sxs-lookup"><span data-stu-id="a490d-150">Must end with a letter, number, or underscore.</span></span><br/><span data-ttu-id="a490d-151">Nem lehet hosszabb 80 karakternél.</span><span class="sxs-lookup"><span data-stu-id="a490d-151">Cannot exceed 80 characters.</span></span> |<span data-ttu-id="a490d-152">Egy NSG-n belül több szabály is lehet, ezért győződjön meg arról, hogy van egy elnevezési konvenciója, amellyel azonosíthatja a szabályok funkcióját.</span><span class="sxs-lookup"><span data-stu-id="a490d-152">You may have several rules within an NSG, so make sure you follow a naming convention that allows you to identify the function of your rule.</span></span> |
| <span data-ttu-id="a490d-153">**Protocol (Protokoll)**</span><span class="sxs-lookup"><span data-stu-id="a490d-153">**Protocol**</span></span> |<span data-ttu-id="a490d-154">A szabálynak megfelelő protokoll.</span><span class="sxs-lookup"><span data-stu-id="a490d-154">Protocol to match for the rule.</span></span> |<span data-ttu-id="a490d-155">TCP, UDP vagy *</span><span class="sxs-lookup"><span data-stu-id="a490d-155">TCP, UDP, or *</span></span> |<span data-ttu-id="a490d-156">A * protokollként történő használata tartalmazza az ICMP-t (csak a kiszolgálók közötti forgalom), valamint az UDP-t és a TCP-t, és csökkentheti a szükséges szabályok számát.</span><span class="sxs-lookup"><span data-stu-id="a490d-156">Using * as a protocol includes ICMP (East-West traffic only), as well as UDP and TCP, and may reduce the number of rules you need.</span></span><br/><span data-ttu-id="a490d-157">A * használata azonban túl széles körű lehet, ezért ügyeljen arra, hogy csak szükség esetén használja.</span><span class="sxs-lookup"><span data-stu-id="a490d-157">At the same time, using * might be too broad an approach, so it's recommended that you use * only when necessary.</span></span> |
| <span data-ttu-id="a490d-158">**Source port range (Forrásporttartomány)**</span><span class="sxs-lookup"><span data-stu-id="a490d-158">**Source port range**</span></span> |<span data-ttu-id="a490d-159">A szabálynak megfelelő forrásporttartomány.</span><span class="sxs-lookup"><span data-stu-id="a490d-159">Source port range to match for the rule.</span></span> |<span data-ttu-id="a490d-160">Egy portszám 1 és 65535 között, egy porttartomány (például 1–65535) vagy * (minden porthoz).</span><span class="sxs-lookup"><span data-stu-id="a490d-160">Single port number from 1 to 65535, port range (example: 1-65535), or * (for all ports).</span></span> |<span data-ttu-id="a490d-161">A forrásportok rövid élettartamúak is lehetnek.</span><span class="sxs-lookup"><span data-stu-id="a490d-161">Source ports could be ephemeral.</span></span> <span data-ttu-id="a490d-162">Ha az ügyfélprogram nem egy adott portot használ, a legtöbb esetben a * jelet használja.</span><span class="sxs-lookup"><span data-stu-id="a490d-162">Unless your client program is using a specific port, use * in most cases.</span></span><br/><span data-ttu-id="a490d-163">A lehető legtöbb esetben használjon porttartományokat, hogy ne legyen szükség több szabályra.</span><span class="sxs-lookup"><span data-stu-id="a490d-163">Try to use port ranges as much as possible to avoid the need for multiple rules.</span></span><br/><span data-ttu-id="a490d-164">Több portot vagy porttartományt nem lehet vesszővel csoportosítani.</span><span class="sxs-lookup"><span data-stu-id="a490d-164">Multiple ports or port ranges cannot be grouped by a comma.</span></span> |
| <span data-ttu-id="a490d-165">**Destination port range (Célporttartomány)**</span><span class="sxs-lookup"><span data-stu-id="a490d-165">**Destination port range**</span></span> |<span data-ttu-id="a490d-166">A szabálynak megfelelő célporttartomány.</span><span class="sxs-lookup"><span data-stu-id="a490d-166">Destination port range to match for the rule.</span></span> |<span data-ttu-id="a490d-167">Egy portszám 1 és 65535 között, egy porttartomány (pl. 1–65535) vagy \* (minden porthoz).</span><span class="sxs-lookup"><span data-stu-id="a490d-167">Single port number from 1 to 65535, port range (example: 1-65535), or \* (for all ports).</span></span> |<span data-ttu-id="a490d-168">A lehető legtöbb esetben használjon porttartományokat, hogy ne legyen szükség több szabályra.</span><span class="sxs-lookup"><span data-stu-id="a490d-168">Try to use port ranges as much as possible to avoid the need for multiple rules.</span></span><br/><span data-ttu-id="a490d-169">Több portot vagy porttartományt nem lehet vesszővel csoportosítani.</span><span class="sxs-lookup"><span data-stu-id="a490d-169">Multiple ports or port ranges cannot be grouped by a comma.</span></span> |
| <span data-ttu-id="a490d-170">**Source address prefix (Forráscímelőtag)**</span><span class="sxs-lookup"><span data-stu-id="a490d-170">**Source address prefix**</span></span> |<span data-ttu-id="a490d-171">A szabálynak megfelelő forráscím-előtag vagy címke.</span><span class="sxs-lookup"><span data-stu-id="a490d-171">Source address prefix or tag to match for the rule.</span></span> |<span data-ttu-id="a490d-172">Egy IP-cím (pl. 10.10.10.10), IP-alhálózat (pl. 192.168.1.0/24), [alapértelmezett címke](#default-tags) vagy * (minden címhez).</span><span class="sxs-lookup"><span data-stu-id="a490d-172">Single IP address (example: 10.10.10.10), IP subnet (example: 192.168.1.0/24), [default tag](#default-tags), or * (for all addresses).</span></span> |<span data-ttu-id="a490d-173">Érdemes lehet tartományokat, alapértelmezett címkéket és a * jelet használni a szabályok számának csökkentéséhez.</span><span class="sxs-lookup"><span data-stu-id="a490d-173">Consider using ranges, default tags, and * to reduce the number of rules.</span></span> |
| <span data-ttu-id="a490d-174">**Destination address prefix (Célcímelőtag)**</span><span class="sxs-lookup"><span data-stu-id="a490d-174">**Destination address prefix**</span></span> |<span data-ttu-id="a490d-175">A szabálynak megfelelő célcím-előtag vagy címke.</span><span class="sxs-lookup"><span data-stu-id="a490d-175">Destination address prefix or tag to match for the rule.</span></span> | <span data-ttu-id="a490d-176">Egy IP-cím (pl. 10.10.10.10), IP-alhálózat (pl. 192.168.1.0/24), [alapértelmezett címke](#default-tags) vagy * (minden címhez).</span><span class="sxs-lookup"><span data-stu-id="a490d-176">Single IP address (example: 10.10.10.10), IP subnet (example: 192.168.1.0/24), [default tag](#default-tags), or * (for all addresses).</span></span> |<span data-ttu-id="a490d-177">Érdemes lehet tartományokat, alapértelmezett címkéket és a * jelet használni a szabályok számának csökkentéséhez.</span><span class="sxs-lookup"><span data-stu-id="a490d-177">Consider using ranges, default tags, and * to reduce the number of rules.</span></span> |
| <span data-ttu-id="a490d-178">**Direction (Irány)**</span><span class="sxs-lookup"><span data-stu-id="a490d-178">**Direction**</span></span> |<span data-ttu-id="a490d-179">Az a forgalomirány, amely megfelel a szabálynak.</span><span class="sxs-lookup"><span data-stu-id="a490d-179">Direction of traffic to match for the rule.</span></span> |<span data-ttu-id="a490d-180">Bejövő vagy kimenő.</span><span class="sxs-lookup"><span data-stu-id="a490d-180">Inbound or outbound.</span></span> |<span data-ttu-id="a490d-181">A bejövő vagy kimenő szabályokat a rendszer külön dolgozza fel, az irány alapján.</span><span class="sxs-lookup"><span data-stu-id="a490d-181">Inbound and outbound rules are processed separately, based on direction.</span></span> |
| <span data-ttu-id="a490d-182">**Priority (Prioritás)**</span><span class="sxs-lookup"><span data-stu-id="a490d-182">**Priority**</span></span> |<span data-ttu-id="a490d-183">A szabályokat a rendszer prioritás szerinti sorrendben ellenőrzi.</span><span class="sxs-lookup"><span data-stu-id="a490d-183">Rules are checked in the order of priority.</span></span> <span data-ttu-id="a490d-184">Amint talál egy érvényes szabályt, nem vizsgálja, hogy a többi szabálynak megfelel-e a forgalom.</span><span class="sxs-lookup"><span data-stu-id="a490d-184">Once a rule applies, no more rules are tested for matching.</span></span> | <span data-ttu-id="a490d-185">100 és 4096 közötti szám.</span><span class="sxs-lookup"><span data-stu-id="a490d-185">Number between 100 and 4096.</span></span> | <span data-ttu-id="a490d-186">A prioritások meghatározásakor érdemes 100-as lépésközt használni, hogy a jövőben esetlegesen létrejövő új szabályoknak is legyen hely a meglévő szabályok között.</span><span class="sxs-lookup"><span data-stu-id="a490d-186">Consider creating rules jumping priorities by 100 for each rule to leave space for new rules you might create in the future.</span></span> |
| <span data-ttu-id="a490d-187">**Access (Hozzáférés)**</span><span class="sxs-lookup"><span data-stu-id="a490d-187">**Access**</span></span> |<span data-ttu-id="a490d-188">Az alkalmazandó hozzáférés típusa, ha a csomag megfelel a szabálynak.</span><span class="sxs-lookup"><span data-stu-id="a490d-188">Type of access to apply if the rule matches.</span></span> | <span data-ttu-id="a490d-189">Engedélyezés vagy megtagadás.</span><span class="sxs-lookup"><span data-stu-id="a490d-189">Allow or deny.</span></span> | <span data-ttu-id="a490d-190">Ne feledje, hogy ha egy csomag egyik szabálynak sem felel meg, akkor a rendszer eldobja a csomagot.</span><span class="sxs-lookup"><span data-stu-id="a490d-190">Keep in mind that if an allow rule is not found for a packet, the packet is dropped.</span></span> |

<span data-ttu-id="a490d-191">Az NSG-k két szabálykészletet tartalmaznak: bejövőt és kimenőt.</span><span class="sxs-lookup"><span data-stu-id="a490d-191">NSGs contain two sets of rules: Inbound and outbound.</span></span> <span data-ttu-id="a490d-192">A szabály prioritásának az egyes készleten belül kell egyedinek lennie.</span><span class="sxs-lookup"><span data-stu-id="a490d-192">The priority for a rule must be unique within each set.</span></span> 

![Az NSG-szabály feldolgozása](./media/virtual-network-nsg-overview/figure3.png) 

<span data-ttu-id="a490d-194">Az előző ábrán az NSG-szabályok feldolgozásának folyamata látható.</span><span class="sxs-lookup"><span data-stu-id="a490d-194">The previous picture shows how NSG rules are processed.</span></span>

### <a name="default-tags"></a><span data-ttu-id="a490d-195">Alapértelmezett címkék</span><span class="sxs-lookup"><span data-stu-id="a490d-195">Default Tags</span></span>
<span data-ttu-id="a490d-196">Az alapértelmezett címkék olyan rendszer által biztosított azonosítók, amelyek az IP-címek egy kategóriáját célozzák meg.</span><span class="sxs-lookup"><span data-stu-id="a490d-196">Default tags are system-provided identifiers to address a category of IP addresses.</span></span> <span data-ttu-id="a490d-197">Az alapértelmezett címkéket a szabályok tulajdonságainak **forráscím-előtagjában** és **célcím-előtagjában** lehet használni.</span><span class="sxs-lookup"><span data-stu-id="a490d-197">You can use default tags in the **source address prefix** and **destination address prefix** properties of any rule.</span></span> <span data-ttu-id="a490d-198">Háromféle alapértelmezett címkét lehet használni:</span><span class="sxs-lookup"><span data-stu-id="a490d-198">There are three default tags you can use:</span></span>

* <span data-ttu-id="a490d-199">**VirtualNetwork** (Resource Manager) (**VIRTUAL_NETWORK** klasszikus telepítéshez): Ez a címke tartalmazza a virtuális hálózat címterét (az Azure-ban meghatározott CIDR-tartományok), valamint az összes csatlakoztatott helyszíni címteret és a csatlakoztatott Azure virtuális hálózatokat (helyi hálózatokat).</span><span class="sxs-lookup"><span data-stu-id="a490d-199">**VirtualNetwork** (Resource Manager) (**VIRTUAL_NETWORK** for classic): This tag includes the virtual network address space (CIDR ranges defined in Azure), all connected on-premises address spaces, and connected Azure VNets (local networks).</span></span>
* <span data-ttu-id="a490d-200">**AzureLoadBalancer** (Resource Manager) (**AZURE_LOADBALANCER** klasszikus telepítéshez): Ez a címke az Azure infrastruktúra terheléselosztóját jelöli.</span><span class="sxs-lookup"><span data-stu-id="a490d-200">**AzureLoadBalancer** (Resource Manager) (**AZURE_LOADBALANCER** for classic): This tag denotes Azure’s infrastructure load balancer.</span></span> <span data-ttu-id="a490d-201">A címkét a rendszer lefordítja arra az Azure-adatközponti IP-címre, ahonnan az Azure állapot-mintavételei származnak.</span><span class="sxs-lookup"><span data-stu-id="a490d-201">The tag translates to an Azure datacenter IP where Azure’s health probes originate.</span></span>
* <span data-ttu-id="a490d-202">**Internet** (Resource Manager) (**INTERNET** klasszikus telepítéshez): Ez a címke azt az IP-címteret jelöli, amely a virtuális hálózaton kívül esik, és a nyilvános interneten érhető el.</span><span class="sxs-lookup"><span data-stu-id="a490d-202">**Internet** (Resource Manager) (**INTERNET** for classic): This tag denotes the IP address space that is outside the virtual network and reachable by public Internet.</span></span> <span data-ttu-id="a490d-203">A tartományba beletartozik az [Azure tulajdonában lévő nyilvános IP-címtér](https://www.microsoft.com/download/details.aspx?id=41653) is.</span><span class="sxs-lookup"><span data-stu-id="a490d-203">The range includes the [Azure owned public IP space](https://www.microsoft.com/download/details.aspx?id=41653).</span></span>

### <a name="default-rules"></a><span data-ttu-id="a490d-204">Alapértelmezett szabályok</span><span class="sxs-lookup"><span data-stu-id="a490d-204">Default rules</span></span>
<span data-ttu-id="a490d-205">Minden NSG tartalmaz egy alapértelmezett szabálykészletet.</span><span class="sxs-lookup"><span data-stu-id="a490d-205">All NSGs contain a set of default rules.</span></span> <span data-ttu-id="a490d-206">Az alapértelmezett szabályokat nem lehet törölni, de mivel a legalacsonyabb prioritást rendelték hozzájuk, a létrehozott szabályok felülbírálhatják azokat.</span><span class="sxs-lookup"><span data-stu-id="a490d-206">The default rules cannot be deleted, but because they are assigned the lowest priority, they can be overridden by the rules that you create.</span></span> 

<span data-ttu-id="a490d-207">Az alapértelmezett szabályok az alábbiak szerint engedélyezik és tiltják le a forgalmat:</span><span class="sxs-lookup"><span data-stu-id="a490d-207">The default rules allow and disallow traffic as follows:</span></span>
- <span data-ttu-id="a490d-208">**Virtuális hálózat:** A virtuális hálózatból kiinduló és oda érkező forgalom a bejövő és kimenő irányban is engedélyezve van.</span><span class="sxs-lookup"><span data-stu-id="a490d-208">**Virtual network:** Traffic originating and ending in a virtual network is allowed both in inbound and outbound directions.</span></span>
- <span data-ttu-id="a490d-209">**Internet:** A kimenő forgalom engedélyezett, de a bejövő forgalom le van tiltva.</span><span class="sxs-lookup"><span data-stu-id="a490d-209">**Internet:** Outbound traffic is allowed, but inbound traffic is blocked.</span></span>
- <span data-ttu-id="a490d-210">**Terheléselosztó:** Engedélyezi az Azure terheléselosztója számára, hogy megvizsgálja a virtuális gépek és a szerepkörpéldányok állapotát.</span><span class="sxs-lookup"><span data-stu-id="a490d-210">**Load balancer:** Allow Azure’s load balancer to probe the health of your VMs and role instances.</span></span> <span data-ttu-id="a490d-211">Ha nem terheléselosztásos készletet használ, ezt a szabályt felül lehet bírálni.</span><span class="sxs-lookup"><span data-stu-id="a490d-211">If you are not using a load balanced set you can override this rule.</span></span>

<span data-ttu-id="a490d-212">**Bejövő alapértelmezett szabályok**</span><span class="sxs-lookup"><span data-stu-id="a490d-212">**Inbound default rules**</span></span>

| <span data-ttu-id="a490d-213">Név</span><span class="sxs-lookup"><span data-stu-id="a490d-213">Name</span></span> | <span data-ttu-id="a490d-214">Prioritás</span><span class="sxs-lookup"><span data-stu-id="a490d-214">Priority</span></span> | <span data-ttu-id="a490d-215">Forrás IP-címe</span><span class="sxs-lookup"><span data-stu-id="a490d-215">Source IP</span></span> | <span data-ttu-id="a490d-216">Forrásport</span><span class="sxs-lookup"><span data-stu-id="a490d-216">Source Port</span></span> | <span data-ttu-id="a490d-217">Cél IP-címe</span><span class="sxs-lookup"><span data-stu-id="a490d-217">Destination IP</span></span> | <span data-ttu-id="a490d-218">Célport</span><span class="sxs-lookup"><span data-stu-id="a490d-218">Destination Port</span></span> | <span data-ttu-id="a490d-219">Protokoll</span><span class="sxs-lookup"><span data-stu-id="a490d-219">Protocol</span></span> | <span data-ttu-id="a490d-220">Hozzáférés</span><span class="sxs-lookup"><span data-stu-id="a490d-220">Access</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="a490d-221">AllowVNetInBound</span><span class="sxs-lookup"><span data-stu-id="a490d-221">AllowVNetInBound</span></span> |<span data-ttu-id="a490d-222">65000</span><span class="sxs-lookup"><span data-stu-id="a490d-222">65000</span></span> | <span data-ttu-id="a490d-223">VirtualNetwork</span><span class="sxs-lookup"><span data-stu-id="a490d-223">VirtualNetwork</span></span> | * | <span data-ttu-id="a490d-224">VirtualNetwork</span><span class="sxs-lookup"><span data-stu-id="a490d-224">VirtualNetwork</span></span> | * | * | <span data-ttu-id="a490d-225">Engedélyezés</span><span class="sxs-lookup"><span data-stu-id="a490d-225">Allow</span></span> |
| <span data-ttu-id="a490d-226">AllowAzureLoadBalancerInBound</span><span class="sxs-lookup"><span data-stu-id="a490d-226">AllowAzureLoadBalancerInBound</span></span> | <span data-ttu-id="a490d-227">65001</span><span class="sxs-lookup"><span data-stu-id="a490d-227">65001</span></span> | <span data-ttu-id="a490d-228">AzureLoadBalancer</span><span class="sxs-lookup"><span data-stu-id="a490d-228">AzureLoadBalancer</span></span> | * | * | * | * | <span data-ttu-id="a490d-229">Engedélyezés</span><span class="sxs-lookup"><span data-stu-id="a490d-229">Allow</span></span> |
| <span data-ttu-id="a490d-230">DenyAllInBound</span><span class="sxs-lookup"><span data-stu-id="a490d-230">DenyAllInBound</span></span> |<span data-ttu-id="a490d-231">65500</span><span class="sxs-lookup"><span data-stu-id="a490d-231">65500</span></span> | * | * | * | * | * | <span data-ttu-id="a490d-232">Megtagadás</span><span class="sxs-lookup"><span data-stu-id="a490d-232">Deny</span></span> |

<span data-ttu-id="a490d-233">**Kimenő alapértelmezett szabályok**</span><span class="sxs-lookup"><span data-stu-id="a490d-233">**Outbound default rules**</span></span>

| <span data-ttu-id="a490d-234">Név</span><span class="sxs-lookup"><span data-stu-id="a490d-234">Name</span></span> | <span data-ttu-id="a490d-235">Prioritás</span><span class="sxs-lookup"><span data-stu-id="a490d-235">Priority</span></span> | <span data-ttu-id="a490d-236">Forrás IP-címe</span><span class="sxs-lookup"><span data-stu-id="a490d-236">Source IP</span></span> | <span data-ttu-id="a490d-237">Forrásport</span><span class="sxs-lookup"><span data-stu-id="a490d-237">Source Port</span></span> | <span data-ttu-id="a490d-238">Cél IP-címe</span><span class="sxs-lookup"><span data-stu-id="a490d-238">Destination IP</span></span> | <span data-ttu-id="a490d-239">Célport</span><span class="sxs-lookup"><span data-stu-id="a490d-239">Destination Port</span></span> | <span data-ttu-id="a490d-240">Protokoll</span><span class="sxs-lookup"><span data-stu-id="a490d-240">Protocol</span></span> | <span data-ttu-id="a490d-241">Hozzáférés</span><span class="sxs-lookup"><span data-stu-id="a490d-241">Access</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="a490d-242">AllowVnetOutBound</span><span class="sxs-lookup"><span data-stu-id="a490d-242">AllowVnetOutBound</span></span> | <span data-ttu-id="a490d-243">65000</span><span class="sxs-lookup"><span data-stu-id="a490d-243">65000</span></span> | <span data-ttu-id="a490d-244">VirtualNetwork</span><span class="sxs-lookup"><span data-stu-id="a490d-244">VirtualNetwork</span></span> | * | <span data-ttu-id="a490d-245">VirtualNetwork</span><span class="sxs-lookup"><span data-stu-id="a490d-245">VirtualNetwork</span></span> | * | * | <span data-ttu-id="a490d-246">Engedélyezés</span><span class="sxs-lookup"><span data-stu-id="a490d-246">Allow</span></span> |
| <span data-ttu-id="a490d-247">AllowInternetOutBound</span><span class="sxs-lookup"><span data-stu-id="a490d-247">AllowInternetOutBound</span></span> | <span data-ttu-id="a490d-248">65001</span><span class="sxs-lookup"><span data-stu-id="a490d-248">65001</span></span> | * | * | <span data-ttu-id="a490d-249">Internet</span><span class="sxs-lookup"><span data-stu-id="a490d-249">Internet</span></span> | * | * | <span data-ttu-id="a490d-250">Engedélyezés</span><span class="sxs-lookup"><span data-stu-id="a490d-250">Allow</span></span> |
| <span data-ttu-id="a490d-251">DenyAllOutBound</span><span class="sxs-lookup"><span data-stu-id="a490d-251">DenyAllOutBound</span></span> | <span data-ttu-id="a490d-252">65500</span><span class="sxs-lookup"><span data-stu-id="a490d-252">65500</span></span> | * | * | * | * | * | <span data-ttu-id="a490d-253">Megtagadás</span><span class="sxs-lookup"><span data-stu-id="a490d-253">Deny</span></span> |

## <a name="associating-nsgs"></a><span data-ttu-id="a490d-254">Az NSG-k társítása</span><span class="sxs-lookup"><span data-stu-id="a490d-254">Associating NSGs</span></span>
<span data-ttu-id="a490d-255">Az NSG-ket virtuális gépekhez, hálózati adapterekhez és alhálózatokhoz is társíthatja attól függően, hogy milyen üzembe helyezési modellt használ, a következők szerint:</span><span class="sxs-lookup"><span data-stu-id="a490d-255">You can associate an NSG to VMs, NICs, and subnets, depending on the deployment model you are using, as follows:</span></span>

* <span data-ttu-id="a490d-256">**VM (csak klasszikus modell):** A biztonsági szabályok a virtuális gép teljes bejövő és kimenő forgalmára érvényesek.</span><span class="sxs-lookup"><span data-stu-id="a490d-256">**VM (classic only):** Security rules are applied to all traffic to/from the VM.</span></span> 
* <span data-ttu-id="a490d-257">**NIC (csak Resource Manager-alapú modell):** A biztonsági szabályok az NSG-hez társított hálózati adapter teljes bejövő és kimenő forgalmára érvényesek.</span><span class="sxs-lookup"><span data-stu-id="a490d-257">**NIC (Resource Manager only):** Security rules are applied to all traffic to/from the NIC the NSG is associated to.</span></span> <span data-ttu-id="a490d-258">Egy több hálózati adapterrel rendelkező virtuális gép esetében minden egyes hálózati adapterhez rendelhet eltérő NSG-t (vagy akár ugyanazt is).</span><span class="sxs-lookup"><span data-stu-id="a490d-258">In a multi-NIC VM, you can apply different (or the same) NSG to each NIC individually.</span></span> 
* <span data-ttu-id="a490d-259">**Alhálózat (Resource Manager-alapú és klasszikus modell):** A biztonsági szabályok az összes, a virtuális hálózathoz csatlakozó erőforrás teljes bejövő és kimenő forgalmára érvényesek.</span><span class="sxs-lookup"><span data-stu-id="a490d-259">**Subnet (Resource Manager and classic):** Security rules are applied to any traffic to/from any resources connected to the VNet.</span></span>

<span data-ttu-id="a490d-260">Különböző NSG-ket társíthat egy virtuális géphez (vagy hálózati adapterhez, a üzembe helyezési modelltől függően) és az alhálózathoz, amelyhez csatlakoztatva van egy hálózati adapter vagy egy virtuális gép.</span><span class="sxs-lookup"><span data-stu-id="a490d-260">You can associate different NSGs to a VM (or NIC, depending on the deployment model) and the subnet that a NIC or VM is connected to.</span></span> <span data-ttu-id="a490d-261">A rendszer a biztonsági szabályokat prioritás szerint alkalmazza a forgalomra az egyes NSG-kben, a következő sorrendben:</span><span class="sxs-lookup"><span data-stu-id="a490d-261">Security rules are applied to the traffic, by priority, in each NSG, in the following order:</span></span>

- <span data-ttu-id="a490d-262">**Bejövő forgalom**</span><span class="sxs-lookup"><span data-stu-id="a490d-262">**Inbound traffic**</span></span>

  1. <span data-ttu-id="a490d-263">**Alhálózatra alkalmazott NSG:** Ha egy alhálózati NSG rendelkezik a forgalom megtagadásához szükséges megfelelő szabállyal, a csomagot a rendszer elveti.</span><span class="sxs-lookup"><span data-stu-id="a490d-263">**NSG applied to subnet:** If a subnet NSG has a matching rule to deny traffic, the packet is dropped.</span></span>

  2. <span data-ttu-id="a490d-264">**Hálózati adapterre alkalmazott NSG** (Resource Manager-alapú modell) vagy virtuális gépre alkalmazott NSG (klasszikus modell): Ha a VM\hálózati adapter NSG-je rendelkezik a forgalom megtagadásához szükséges megfelelő szabállyal, a csomagot a rendszer elveti, még akkor is, ha az alhálózati NSG rendelkezik a forgalmat engedélyező megfelelő szabállyal.</span><span class="sxs-lookup"><span data-stu-id="a490d-264">**NSG applied to NIC** (Resource Manager) or VM (classic): If VM\NIC NSG has a matching rule that denies traffic, packets are dropped at the VM\NIC, even if a subnet NSG has a matching rule that allows traffic.</span></span>

- <span data-ttu-id="a490d-265">**Kimenő forgalom**</span><span class="sxs-lookup"><span data-stu-id="a490d-265">**Outbound traffic**</span></span>

  1. <span data-ttu-id="a490d-266">**Hálózati adapterre alkalmazott NSG** (Resource Manager-alapú modell) vagy virtuális gépre alkalmazott NSG (klasszikus modell): Ha a VM\hálózati adapter NSG-je rendelkezik a forgalom megtagadásához szükséges megfelelő szabállyal, a csomagot a rendszer elveti.</span><span class="sxs-lookup"><span data-stu-id="a490d-266">**NSG applied to NIC** (Resource Manager) or VM (classic): If a VM\NIC NSG has a matching rule that denies traffic, packets are dropped.</span></span>

  2. <span data-ttu-id="a490d-267">**Alhálózatra alkalmazott NSG**: Ha az alhálózati NSG rendelkezik a forgalom megtagadásához szükséges megfelelő szabállyal, a csomagot a rendszer elveti, még akkor is, ha egy VM\hálózati adapter NSG-je rendelkezik is a forgalmat engedélyező megfelelő szabállyal.</span><span class="sxs-lookup"><span data-stu-id="a490d-267">**NSG applied to subnet:** If a subnet NSG has a matching rule that denies traffic, packets are dropped, even if a VM\NIC NSG has a matching rule that allows traffic.</span></span>

> [!NOTE]
> <span data-ttu-id="a490d-268">Bár egy alhálózathoz, virtuális géphez vagy hálózati adapterhez csak egy NSG-t lehet társítani, ugyanazt az NSG-t korlátlan számú erőforráshoz hozzá lehet rendelni.</span><span class="sxs-lookup"><span data-stu-id="a490d-268">Although you can only associate a single NSG to a subnet, VM, or NIC; you can associate the same NSG to as many resources as you want.</span></span>
>

## <a name="implementation"></a><span data-ttu-id="a490d-269">Megvalósítás</span><span class="sxs-lookup"><span data-stu-id="a490d-269">Implementation</span></span>
<span data-ttu-id="a490d-270">Az NSG-ket a klasszikus és a Resource Manager-alapú üzemi modellel is meg lehet valósítani az alábbi eszközökkel:</span><span class="sxs-lookup"><span data-stu-id="a490d-270">You can implement NSGs in the Resource Manager or classic deployment models using the following tools:</span></span>

| <span data-ttu-id="a490d-271">Üzembe helyezési eszköz</span><span class="sxs-lookup"><span data-stu-id="a490d-271">Deployment tool</span></span> | <span data-ttu-id="a490d-272">Klasszikus</span><span class="sxs-lookup"><span data-stu-id="a490d-272">Classic</span></span> | <span data-ttu-id="a490d-273">Resource Manager</span><span class="sxs-lookup"><span data-stu-id="a490d-273">Resource Manager</span></span> |
| --- | --- | --- |
| <span data-ttu-id="a490d-274">Azure Portal</span><span class="sxs-lookup"><span data-stu-id="a490d-274">Azure portal</span></span>   | <span data-ttu-id="a490d-275">Igen</span><span class="sxs-lookup"><span data-stu-id="a490d-275">Yes</span></span> | [<span data-ttu-id="a490d-276">Igen</span><span class="sxs-lookup"><span data-stu-id="a490d-276">Yes</span></span>](virtual-networks-create-nsg-arm-pportal.md) |
| <span data-ttu-id="a490d-277">PowerShell</span><span class="sxs-lookup"><span data-stu-id="a490d-277">PowerShell</span></span>     | [<span data-ttu-id="a490d-278">Igen</span><span class="sxs-lookup"><span data-stu-id="a490d-278">Yes</span></span>](virtual-networks-create-nsg-classic-ps.md) | [<span data-ttu-id="a490d-279">Igen</span><span class="sxs-lookup"><span data-stu-id="a490d-279">Yes</span></span>](virtual-networks-create-nsg-arm-ps.md) |
| <span data-ttu-id="a490d-280">Azure CLI **V1**</span><span class="sxs-lookup"><span data-stu-id="a490d-280">Azure CLI **V1**</span></span>   | [<span data-ttu-id="a490d-281">Igen</span><span class="sxs-lookup"><span data-stu-id="a490d-281">Yes</span></span>](virtual-networks-create-nsg-classic-cli.md) | [<span data-ttu-id="a490d-282">Igen</span><span class="sxs-lookup"><span data-stu-id="a490d-282">Yes</span></span>](virtual-networks-create-nsg-cli-nodejs.md) |
| <span data-ttu-id="a490d-283">Azure CLI **V2**</span><span class="sxs-lookup"><span data-stu-id="a490d-283">Azure CLI **V2**</span></span>   | <span data-ttu-id="a490d-284">Nem</span><span class="sxs-lookup"><span data-stu-id="a490d-284">No</span></span> | [<span data-ttu-id="a490d-285">Igen</span><span class="sxs-lookup"><span data-stu-id="a490d-285">Yes</span></span>](virtual-networks-create-nsg-arm-cli.md) |
| <span data-ttu-id="a490d-286">Azure Resource Manager-sablon</span><span class="sxs-lookup"><span data-stu-id="a490d-286">Azure Resource Manager template</span></span>   | <span data-ttu-id="a490d-287">Nem</span><span class="sxs-lookup"><span data-stu-id="a490d-287">No</span></span>  | [<span data-ttu-id="a490d-288">Igen</span><span class="sxs-lookup"><span data-stu-id="a490d-288">Yes</span></span>](virtual-networks-create-nsg-arm-template.md) |

## <a name="planning"></a><span data-ttu-id="a490d-289">Tervezés</span><span class="sxs-lookup"><span data-stu-id="a490d-289">Planning</span></span>
<span data-ttu-id="a490d-290">Az NSG-k megvalósítása előtt válaszolnia kell az alábbi kérdésekre:</span><span class="sxs-lookup"><span data-stu-id="a490d-290">Before implementing NSGs, you need to answer the following questions:</span></span>

1. <span data-ttu-id="a490d-291">Milyen típusú erőforrások bejövő és kimenő forgalmát szeretné szűrni?</span><span class="sxs-lookup"><span data-stu-id="a490d-291">What types of resources do you want to filter traffic to or from?</span></span> <span data-ttu-id="a490d-292">Csatlakoztathat erőforrásokat, például hálózati adaptereket (Resource Manager-alapú modell), virtuális gépeket (klasszikus modell), felhőszolgáltatásokat, alkalmazásszolgáltatási környezeteket és virtuálisgép-méretezési csoportokat.</span><span class="sxs-lookup"><span data-stu-id="a490d-292">You can connect resources such as NICs (Resource Manager), VMs (classic), Cloud Services, Application Service Environments, and VM Scale Sets.</span></span> 
2. <span data-ttu-id="a490d-293">Az erőforrások, amelyek bejövő/kimenő forgalmát szűrni kívánja, meglévő virtuális hálózatok alhálózataihoz csatlakoznak?</span><span class="sxs-lookup"><span data-stu-id="a490d-293">Are the resources you want to filter traffic to/from connected to subnets in existing VNets?</span></span>

<span data-ttu-id="a490d-294">A hálózati biztonság Azure-ban történő megtervezésével kapcsolatos további információkért olvassa el [a felhőszolgáltatásokkal és a hálózati biztonsággal](../best-practices-network-security.md) kapcsolatos cikket.</span><span class="sxs-lookup"><span data-stu-id="a490d-294">For more information on planning for network security in Azure, read the [Cloud services and network security](../best-practices-network-security.md) article.</span></span> 

## <a name="design-considerations"></a><span data-ttu-id="a490d-295">Kialakítási szempontok</span><span class="sxs-lookup"><span data-stu-id="a490d-295">Design considerations</span></span>
<span data-ttu-id="a490d-296">Ha megválaszolta a [Tervezés](#Planning) szakasz kérdéseit, tekintse át az alábbiakat az NSG-k meghatározása előtt:</span><span class="sxs-lookup"><span data-stu-id="a490d-296">Once you know the answers to the questions in the [Planning](#Planning) section, review the following sections before defining your NSGs:</span></span>

### <a name="limits"></a><span data-ttu-id="a490d-297">Korlátok</span><span class="sxs-lookup"><span data-stu-id="a490d-297">Limits</span></span>
<span data-ttu-id="a490d-298">Előfizetésenként korlátozott számú NSG-t használhat és NSG-nként korlátozott számú szabályt.</span><span class="sxs-lookup"><span data-stu-id="a490d-298">There are limits to the number of NSGs you can have in a subscription and number of rules per NSG.</span></span> <span data-ttu-id="a490d-299">A korlátozásokkal kapcsolatos további információkért olvassa el az [Azure korlátairól](../azure-subscription-service-limits.md#networking-limits) szóló cikket.</span><span class="sxs-lookup"><span data-stu-id="a490d-299">To learn more about the limits, read the [Azure limits](../azure-subscription-service-limits.md#networking-limits) article.</span></span>

### <a name="vnet-and-subnet-design"></a><span data-ttu-id="a490d-300">VNet és alhálózat kialakítása</span><span class="sxs-lookup"><span data-stu-id="a490d-300">VNet and subnet design</span></span>
<span data-ttu-id="a490d-301">Mivel az NSG-ket alhálózatokra is lehet alkalmazni, minimalizálhatja az NSG-k számát azzal, hogy alhálózat szerint csoportosítja az erőforrásokat, és az alhálózatokra alkalmazza az NSG-ket.</span><span class="sxs-lookup"><span data-stu-id="a490d-301">Since NSGs can be applied to subnets, you can minimize the number of NSGs by grouping your resources by subnet, and applying NSGs to subnets.</span></span>  <span data-ttu-id="a490d-302">Ha úgy dönt, hogy NSG-ket alkalmaz az alhálózatokra, azt tapasztalhatja, hogy a meglévő VNetek és alhálózatok meghatározásánál nem vették figyelembe az NSG-ket.</span><span class="sxs-lookup"><span data-stu-id="a490d-302">If you decide to apply NSGs to subnets, you may find that existing VNets and subnets you have were not defined with NSGs in mind.</span></span> <span data-ttu-id="a490d-303">Előfordulhat, hogy az NSG-rendszer támogatásához új VNet-eket és alhálózatokat kell meghatároznia és új alhálózataihoz új erőforrásokat kell üzembe helyeznie.</span><span class="sxs-lookup"><span data-stu-id="a490d-303">You may need to define new VNets and subnets to support your NSG design and deploy your new resources to your new subnets.</span></span> <span data-ttu-id="a490d-304">Ezt követően meghatározhatja az áttelepítési stratégiát a meglévő erőforrások új alhálózatokra történő áthelyezésére.</span><span class="sxs-lookup"><span data-stu-id="a490d-304">You could then define a migration strategy to move existing resources to the new subnets.</span></span> 

### <a name="special-rules"></a><span data-ttu-id="a490d-305">Különleges szabályok</span><span class="sxs-lookup"><span data-stu-id="a490d-305">Special rules</span></span>
<span data-ttu-id="a490d-306">Ha letiltja a következő szabályok által engedélyezett forgalmat, infrastruktúrája nem tud majd kommunikálni alapvető Azure-szolgáltatásokkal:</span><span class="sxs-lookup"><span data-stu-id="a490d-306">If you block traffic allowed by the following rules, your infrastructure can't communicate with essential Azure services:</span></span>

* <span data-ttu-id="a490d-307">**A gazdacsomópont virtuális IP-címe:** A virtuális gazdagép IP-címe (168.63.129.16) biztosítja az olyan alapvető infrastruktúra szolgáltatásokat, mint a DHCP, a DNS és az állapotfigyelés.</span><span class="sxs-lookup"><span data-stu-id="a490d-307">**Virtual IP of the host node:** Basic infrastructure services such as DHCP, DNS, and health monitoring are provided through the virtualized host IP address 168.63.129.16.</span></span> <span data-ttu-id="a490d-308">Ez a nyilvános IP-cím a Microsofthoz tartozik, és minden régióban ezt a virtualizált IP-címet fogják használni erre a célra.</span><span class="sxs-lookup"><span data-stu-id="a490d-308">This public IP address belongs to Microsoft and is the only virtualized IP address used in all regions for this purpose.</span></span> <span data-ttu-id="a490d-309">Az IP-cím a virtuális gépet üzemeltető kiszolgálógép (gazdacsomópont) fizikai IP-címére van leképezve.</span><span class="sxs-lookup"><span data-stu-id="a490d-309">This IP address maps to the physical IP address of the server machine (host node) hosting the VM.</span></span> <span data-ttu-id="a490d-310">Ez a gazdacsomópont látja el a DHCP-továbbító, a rekurzív DNS-feloldó, valamint vizsgálati forrás szerepét a terheléselosztó és a gép állapotmintáihoz.</span><span class="sxs-lookup"><span data-stu-id="a490d-310">The host node acts as the DHCP relay, the DNS recursive resolver, and the probe source for the load balancer health probe and the machine health probe.</span></span> <span data-ttu-id="a490d-311">Az IP-címmel folytatott kommunikáció nem minősül támadásnak.</span><span class="sxs-lookup"><span data-stu-id="a490d-311">Communication to this IP address is not an attack.</span></span>
* <span data-ttu-id="a490d-312">**Licencelés (Kulcskezelő szolgáltatás):** A virtuális gépeken futó Windows-rendszerképeket licencelni kell.</span><span class="sxs-lookup"><span data-stu-id="a490d-312">**Licensing (Key Management Service):** Windows images running in VMs must be licensed.</span></span> <span data-ttu-id="a490d-313">A licenceléshez el kell küldeni egy licencelési kérelmet a Kulcskezelő szolgáltatás ilyen kérelmeket kezelő kiszolgálóinak.</span><span class="sxs-lookup"><span data-stu-id="a490d-313">To ensure licensing, a request is sent to the Key Management Service host servers that handle such queries.</span></span> <span data-ttu-id="a490d-314">A kérelmet az 1688-as kimenő porton küldi el a rendszer.</span><span class="sxs-lookup"><span data-stu-id="a490d-314">The request is made outbound through port 1688.</span></span>

### <a name="icmp-traffic"></a><span data-ttu-id="a490d-315">ICMP-forgalom</span><span class="sxs-lookup"><span data-stu-id="a490d-315">ICMP traffic</span></span>
<span data-ttu-id="a490d-316">A jelenlegi NSG-szabályok csak a *TCP* és az *UDP* protokollokat engedélyezik.</span><span class="sxs-lookup"><span data-stu-id="a490d-316">The current NSG rules only allow for protocols *TCP* or *UDP*.</span></span> <span data-ttu-id="a490d-317">Az *ICMP*-nek nincs külön címkéje.</span><span class="sxs-lookup"><span data-stu-id="a490d-317">There is not a specific tag for *ICMP*.</span></span> <span data-ttu-id="a490d-318">Azonban a virtuális hálózatokon belül az ICMP-forgalmat az AllowVNetInBound alapértelmezett szabály engedélyezi, amely engedélyezi a virtuális hálózaton belüli portok és protokollok minden bejövő és kimenő forgalmát.</span><span class="sxs-lookup"><span data-stu-id="a490d-318">However, ICMP traffic is allowed within a VNet by the AllowVNetInBound default rule, that allows traffic to and from any port and protocol within the VNet.</span></span>

### <a name="subnets"></a><span data-ttu-id="a490d-319">Alhálózatok</span><span class="sxs-lookup"><span data-stu-id="a490d-319">Subnets</span></span>
* <span data-ttu-id="a490d-320">Vegye figyelembe a számítási feladat által igényelt rétegek számát.</span><span class="sxs-lookup"><span data-stu-id="a490d-320">Consider the number of tiers your workload requires.</span></span> <span data-ttu-id="a490d-321">Minden réteget el lehet különíteni egy alhálózattal, amelyre alkalmazva van egy NSG.</span><span class="sxs-lookup"><span data-stu-id="a490d-321">Each tier can be isolated by using a subnet, with an NSG applied to the subnet.</span></span> 
* <span data-ttu-id="a490d-322">Ha meg kell valósítania egy alhálózatot egy VPN-átjáró vagy ExpressRoute-kapcsolatcsoport számára, **ne** alkalmazzon NSG-t arra az alhálózatra.</span><span class="sxs-lookup"><span data-stu-id="a490d-322">If you need to implement a subnet for a VPN gateway, or ExpressRoute circuit, do **not** apply an NSG to that subnet.</span></span> <span data-ttu-id="a490d-323">Ha mégis így tesz, virtuális hálózatok vagy létesítmények közötti kapcsolatok megszakadhatnak.</span><span class="sxs-lookup"><span data-stu-id="a490d-323">If you do so, cross-VNet or cross-premises connectivity may fail.</span></span> 
* <span data-ttu-id="a490d-324">Ha meg kell valósítania egy hálózati virtuális készüléket (NVA-t), csatlakoztassa az NVA-t a saját alhálózatához, és hozzon létre felhasználó által megadott útvonalakat (UDR) az NVA felé.</span><span class="sxs-lookup"><span data-stu-id="a490d-324">If you need to implement a network virtual appliance (NVA), connect the NVA to its own subnet and create user-defined routes (UDR) to and from the NVA.</span></span> <span data-ttu-id="a490d-325">Megvalósíthat egy alhálózatszintű NSG-t is az alhálózat be- és kifelé irányuló forgalmának szűrésére.</span><span class="sxs-lookup"><span data-stu-id="a490d-325">You can implement a subnet level NSG to filter traffic in and out of this subnet.</span></span> <span data-ttu-id="a490d-326">A felhasználó által megadott útvonalakkal (UDR-ekkel) kapcsolatban további információt a [felhasználó által megadott útvonalakkal](virtual-networks-udr-overview.md) kapcsolatos cikkben olvashat.</span><span class="sxs-lookup"><span data-stu-id="a490d-326">To learn more about UDRs, read the [User-defined routes](virtual-networks-udr-overview.md) article.</span></span>

### <a name="load-balancers"></a><span data-ttu-id="a490d-327">Terheléselosztók</span><span class="sxs-lookup"><span data-stu-id="a490d-327">Load balancers</span></span>
* <span data-ttu-id="a490d-328">Vegyük példaként a terheléselosztási és a hálózati címfordítási (NAT-) szabályokat a számítási feladatok által használt terheléselosztóknál.</span><span class="sxs-lookup"><span data-stu-id="a490d-328">Consider the load balancing and network address translation (NAT) rules for each load balancer used by each of your workloads.</span></span> <span data-ttu-id="a490d-329">A NAT-szabályok egy háttérkészlethez vannak kötve, amely hálózati adaptereket (Resource Manager-alapú modell) vagy virtuális gépeket/felhőszolgáltatásiszerepkör-példányokat (klasszikus modell) tartalmaz.</span><span class="sxs-lookup"><span data-stu-id="a490d-329">NAT rules are bound to a back-end pool that contains NICs (Resource Manager) or VMs/Cloud Services role instances (classic).</span></span> <span data-ttu-id="a490d-330">Érdemes létrehozni egy NSG-t minden egyes háttérkészlethez, így a terheléselosztókban csak a megvalósított szabályok által leképezett forgalom lesz engedélyezve.</span><span class="sxs-lookup"><span data-stu-id="a490d-330">Consider creating an NSG for each back-end pool, allowing only traffic mapped through the rules implemented in the load balancers.</span></span> <span data-ttu-id="a490d-331">Ha létrehoz egy-egy NSG-t minden háttérkészlet számára, azzal biztosítja, hogy a háttérkészletbe közvetlenül (nem a terheléselosztón keresztül) érkező forgalom is szűrve lesz.</span><span class="sxs-lookup"><span data-stu-id="a490d-331">Creating an NSG for each back-end pool guarantees that traffic coming to the back-end pool directly (rather than through the load balancer), is also filtered.</span></span>
* <span data-ttu-id="a490d-332">A klasszikus üzembe helyezés során végpontokat hoz létre, amelyek leképezik a terheléselosztón található portokat a virtuális gépekre vagy szerepkörpéldányokra.</span><span class="sxs-lookup"><span data-stu-id="a490d-332">In classic deployments, you create endpoints that map ports on a load balancer to ports on your VMs or role instances.</span></span> <span data-ttu-id="a490d-333">Emellett a Resource Managerrel létrehozhatja saját önálló, nyilvános terheléselosztóját.</span><span class="sxs-lookup"><span data-stu-id="a490d-333">You can also create your own individual public-facing load balancer through Resource Manager.</span></span> <span data-ttu-id="a490d-334">A bejövő forgalom célportja egyben a virtuális gép vagy szerepkörpéldány tényleges portja, nem a terheléselosztó által elérhetővé tett port.</span><span class="sxs-lookup"><span data-stu-id="a490d-334">The destination port for incoming traffic is the actual port in the VM or role instance, not the port exposed by a load balancer.</span></span> <span data-ttu-id="a490d-335">A forrásport és a virtuális géppel való kapcsolat címe az interneten található távoli számítógép portjával és címével egyezik, nem a terheléselosztó által elérhetővé tett port és cím.</span><span class="sxs-lookup"><span data-stu-id="a490d-335">The source port and address for the connection to the VM is a port and address on the remote computer in the Internet, not the port and address exposed by the load balancer.</span></span>
* <span data-ttu-id="a490d-336">Amikor azért hoz létre NSG-ket, hogy azok a belső terheléselosztón (ILB) keresztüli forgalmat szűrjék, az alkalmazott forrásport és címtartomány a forrásszámítógépről származik, nem a terheléselosztóról.</span><span class="sxs-lookup"><span data-stu-id="a490d-336">When you create NSGs to filter traffic coming through an internal load balancer (ILB), the source port and address range applied are  from the originating computer, not the load balancer.</span></span> <span data-ttu-id="a490d-337">A célport és a címtartomány nem a terheléselosztóhoz, hanem a célszámítógéphez tartozik.</span><span class="sxs-lookup"><span data-stu-id="a490d-337">The destination port and address range are those of the destination computer, not the load balancer.</span></span>

### <a name="other"></a><span data-ttu-id="a490d-338">Egyéb</span><span class="sxs-lookup"><span data-stu-id="a490d-338">Other</span></span>
* <span data-ttu-id="a490d-339">Végpontalapú hozzáférés-vezérlési listák (ACL-ek) és NSG-k használata nem támogatott ugyanazon a virtuálisgép-példányon.</span><span class="sxs-lookup"><span data-stu-id="a490d-339">Endpoint-based access control lists (ACL) and NSGs are not supported on the same VM instance.</span></span> <span data-ttu-id="a490d-340">Ha használni szeretne egy NSG-t, és már be van állítva egy végponti ACL, először el kell távolítani a végponti ACL-t.</span><span class="sxs-lookup"><span data-stu-id="a490d-340">If you want to use an NSG and have an endpoint ACL already in place, first remove the endpoint ACL.</span></span> <span data-ttu-id="a490d-341">Végponti ACL-ek eltávolításával kapcsolatos információkért tekintse meg a [végponti ACL-ek kezelésével](virtual-networks-acl-powershell.md) kapcsolatos cikket.</span><span class="sxs-lookup"><span data-stu-id="a490d-341">For information about how to remove an endpoint ACL, see the [Manage endpoint ACLs](virtual-networks-acl-powershell.md) article.</span></span>
* <span data-ttu-id="a490d-342">A Resource Managerben a hálózati adapterenkénti felügyelet (távoli elérés) lehetővé tételéhez használhat olyan NSG-t, amely több hálózati adapterrel rendelkező virtuális gép hálózati adapteréhez van hozzárendelve.</span><span class="sxs-lookup"><span data-stu-id="a490d-342">In Resource Manager, you can use an NSG associated to a NIC for VMs with multiple NICs to enable management (remote access) on a per NIC basis.</span></span> <span data-ttu-id="a490d-343">Ha minden hálózati adapterhez egyedi NSG-t társít, azzal lehetővé teszi a hálózati adaptereken keresztüli forgalom típusainak elkülönítését.</span><span class="sxs-lookup"><span data-stu-id="a490d-343">Associating unique NSGs to each NIC enables separation of traffic types across NICs.</span></span>
* <span data-ttu-id="a490d-344">A terheléselosztók használatához hasonlóan a más VNetekről érkező forgalom szűrésénél a távoli gép forráscímtartományát kell használni, nem a VNeteket összekötő átjárót.</span><span class="sxs-lookup"><span data-stu-id="a490d-344">Similar to the use of load balancers, when filtering traffic from other VNets, you must use the source address range of the remote computer, not the gateway connecting the VNets.</span></span>
* <span data-ttu-id="a490d-345">Számos Azure-szolgáltatást nem lehet csatlakoztatni virtuális hálózatokhoz.</span><span class="sxs-lookup"><span data-stu-id="a490d-345">Many Azure services cannot be connected to VNets.</span></span> <span data-ttu-id="a490d-346">Ha egy Azure-erőforrás nem csatlakozik virtuális hálózathoz, nem használhat NSG-t az erőforrás felé irányuló forgalom szűrésére.</span><span class="sxs-lookup"><span data-stu-id="a490d-346">If an Azure resource is not connected to a VNet, you cannot use an NSG to filter traffic to the resource.</span></span>  <span data-ttu-id="a490d-347">Olvassa el az Ön által használt szolgáltatások dokumentációját annak megállapítására, hogy lehet-e őket virtuális hálózatokhoz csatlakoztatni.</span><span class="sxs-lookup"><span data-stu-id="a490d-347">Read the documentation for the services you use to determine whether the service can be connected to a VNet.</span></span>

## <a name="sample-deployment"></a><span data-ttu-id="a490d-348">Üzembe helyezési minta</span><span class="sxs-lookup"><span data-stu-id="a490d-348">Sample deployment</span></span>
<span data-ttu-id="a490d-349">A cikkben leírtak alkalmazásának szemléltetéséhez tekintsük át egy kétszintű alkalmazás gyakori forgatókönyvét, amely az alábbi képen látható:</span><span class="sxs-lookup"><span data-stu-id="a490d-349">To illustrate the application of the information in this article, consider a common scenario of a two tier application shown in the following picture:</span></span>

![NSG-k](./media/virtual-network-nsg-overview/figure1.png)

<span data-ttu-id="a490d-351">Ahogyan az az ábrán látható, a *Web1* és a *Web2* virtuális gép a *FrontEnd* alhálózathoz csatlakozik, a *DB1* és a *DB2* virtuális gép pedig a *BackEnd* alhálózathoz.</span><span class="sxs-lookup"><span data-stu-id="a490d-351">As shown in the diagram, the *Web1* and *Web2* VMs are connected to the *FrontEnd* subnet, and the *DB1* and *DB2* VMs are connected to the *BackEnd* subnet.</span></span>  <span data-ttu-id="a490d-352">Mindkét alhálózat a *TestVNet* virtuális hálózat része.</span><span class="sxs-lookup"><span data-stu-id="a490d-352">Both subnets are part of the *TestVNet* VNet.</span></span> <span data-ttu-id="a490d-353">Minden egyes alkalmazás-összetevő egy virtuális hálózathoz csatlakozó Azure-beli virtuális gépen fut.</span><span class="sxs-lookup"><span data-stu-id="a490d-353">The application components each run within an Azure VM connected to a VNet.</span></span> <span data-ttu-id="a490d-354">A forgatókönyvre a következő követelmények vonatkoznak:</span><span class="sxs-lookup"><span data-stu-id="a490d-354">The scenario has the following requirements:</span></span>

1. <span data-ttu-id="a490d-355">A WEB és a DB kiszolgálók közötti forgalom elkülönítése.</span><span class="sxs-lookup"><span data-stu-id="a490d-355">Separation of traffic between the WEB and DB servers.</span></span>
2. <span data-ttu-id="a490d-356">A terheléselosztási szabályok a forgalmat a terheléselosztótól a 80-as porton található összes webkiszolgálóra továbbítják.</span><span class="sxs-lookup"><span data-stu-id="a490d-356">Load balancing rules forward traffic from the load balancer to all web servers on port 80.</span></span>
3. <span data-ttu-id="a490d-357">A terheléselosztási NAT-szabályok az 50001-es porton keresztül érkező forgalmat a 3389-es porton található WEB1 virtuális gépre irányítják.</span><span class="sxs-lookup"><span data-stu-id="a490d-357">Load balancer NAT rules forward traffic coming into the load balancer on port 50001 to port 3389 on the WEB1 VM.</span></span>
4. <span data-ttu-id="a490d-358">Az előtérbeli vagy a háttérbeli virtuális gép nem érhető el az internetről, kivéve a 2-es és 3-as követelmények esetében.</span><span class="sxs-lookup"><span data-stu-id="a490d-358">No access to the front-end or back-end VMs from the Internet, except requirements 2 and 3.</span></span>
5. <span data-ttu-id="a490d-359">Nincs kimenő internetelérés a WEB vagy a DB kiszolgálókról.</span><span class="sxs-lookup"><span data-stu-id="a490d-359">No outbound Internet access from the WEB or DB servers.</span></span>
6. <span data-ttu-id="a490d-360">A felhasználói réteg alhálózatáról engedélyezett bármely WEB kiszolgáló 3389-es portjának elérése.</span><span class="sxs-lookup"><span data-stu-id="a490d-360">Access from the FrontEnd subnet is allowed to port 3389 of any web server.</span></span>
7. <span data-ttu-id="a490d-361">A felhasználói réteg alhálózatáról engedélyezett bármely DB kiszolgáló 3389-es portjának elérése.</span><span class="sxs-lookup"><span data-stu-id="a490d-361">Access from the FrontEnd subnet is allowed to port 3389 of any DB server.</span></span>
8. <span data-ttu-id="a490d-362">A felhasználói réteg alhálózatáról engedélyezett az összes DB kiszolgáló 1433-as portjának elérése.</span><span class="sxs-lookup"><span data-stu-id="a490d-362">Access from the FrontEnd subnet is allowed to port 1433 of all DB servers.</span></span>
9. <span data-ttu-id="a490d-363">A felügyeleti forgalom (3389-es port) elkülönül az adatbázis-forgalomtól (1433) a DB kiszolgálók különböző hálózati adapterein.</span><span class="sxs-lookup"><span data-stu-id="a490d-363">Separation of management traffic (port 3389) and database traffic (1433) on different NICs in DB servers.</span></span>

<span data-ttu-id="a490d-364">A fent látható 1–6. követelmény (a 3. és a 4. kivételével) alhálózati területekre korlátozódik.</span><span class="sxs-lookup"><span data-stu-id="a490d-364">Requirements 1-6 (except requirements 3 and 4) are all confined to subnet spaces.</span></span> <span data-ttu-id="a490d-365">Az alábbi NSG-k felelnek meg az előbbi követelményeknek, a szükséges NSG-k számának minimalizálásával:</span><span class="sxs-lookup"><span data-stu-id="a490d-365">The following NSGs meet the previous requirements, while minimizing the number of NSGs required:</span></span>

### <a name="frontend"></a><span data-ttu-id="a490d-366">Előtér</span><span class="sxs-lookup"><span data-stu-id="a490d-366">FrontEnd</span></span>
<span data-ttu-id="a490d-367">**Bejövő szabályok**</span><span class="sxs-lookup"><span data-stu-id="a490d-367">**Inbound rules**</span></span>

| <span data-ttu-id="a490d-368">Szabály</span><span class="sxs-lookup"><span data-stu-id="a490d-368">Rule</span></span> | <span data-ttu-id="a490d-369">Hozzáférés</span><span class="sxs-lookup"><span data-stu-id="a490d-369">Access</span></span> | <span data-ttu-id="a490d-370">Prioritás</span><span class="sxs-lookup"><span data-stu-id="a490d-370">Priority</span></span> | <span data-ttu-id="a490d-371">Forráscímtartomány</span><span class="sxs-lookup"><span data-stu-id="a490d-371">Source address range</span></span> | <span data-ttu-id="a490d-372">Forrásport</span><span class="sxs-lookup"><span data-stu-id="a490d-372">Source port</span></span> | <span data-ttu-id="a490d-373">Célcímtartomány</span><span class="sxs-lookup"><span data-stu-id="a490d-373">Destination address range</span></span> | <span data-ttu-id="a490d-374">Célport</span><span class="sxs-lookup"><span data-stu-id="a490d-374">Destination port</span></span> | <span data-ttu-id="a490d-375">Protokoll</span><span class="sxs-lookup"><span data-stu-id="a490d-375">Protocol</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="a490d-376">Allow-Inbound-HTTP-Internet</span><span class="sxs-lookup"><span data-stu-id="a490d-376">Allow-Inbound-HTTP-Internet</span></span> | <span data-ttu-id="a490d-377">Engedélyezés</span><span class="sxs-lookup"><span data-stu-id="a490d-377">Allow</span></span> | <span data-ttu-id="a490d-378">100</span><span class="sxs-lookup"><span data-stu-id="a490d-378">100</span></span> | <span data-ttu-id="a490d-379">Internet</span><span class="sxs-lookup"><span data-stu-id="a490d-379">Internet</span></span> | * | * | <span data-ttu-id="a490d-380">80</span><span class="sxs-lookup"><span data-stu-id="a490d-380">80</span></span> | <span data-ttu-id="a490d-381">TCP</span><span class="sxs-lookup"><span data-stu-id="a490d-381">TCP</span></span> |
| <span data-ttu-id="a490d-382">Allow-Inbound-RDP-Internet</span><span class="sxs-lookup"><span data-stu-id="a490d-382">Allow-Inbound-RDP-Internet</span></span> | <span data-ttu-id="a490d-383">Engedélyezés</span><span class="sxs-lookup"><span data-stu-id="a490d-383">Allow</span></span> | <span data-ttu-id="a490d-384">200</span><span class="sxs-lookup"><span data-stu-id="a490d-384">200</span></span> | <span data-ttu-id="a490d-385">Internet</span><span class="sxs-lookup"><span data-stu-id="a490d-385">Internet</span></span> | * | * | <span data-ttu-id="a490d-386">3389</span><span class="sxs-lookup"><span data-stu-id="a490d-386">3389</span></span> | <span data-ttu-id="a490d-387">TCP</span><span class="sxs-lookup"><span data-stu-id="a490d-387">TCP</span></span> |
| <span data-ttu-id="a490d-388">Deny-Inbound-All</span><span class="sxs-lookup"><span data-stu-id="a490d-388">Deny-Inbound-All</span></span> | <span data-ttu-id="a490d-389">Megtagadás</span><span class="sxs-lookup"><span data-stu-id="a490d-389">Deny</span></span> | <span data-ttu-id="a490d-390">300</span><span class="sxs-lookup"><span data-stu-id="a490d-390">300</span></span> | <span data-ttu-id="a490d-391">Internet</span><span class="sxs-lookup"><span data-stu-id="a490d-391">Internet</span></span> | * | * | * | <span data-ttu-id="a490d-392">TCP</span><span class="sxs-lookup"><span data-stu-id="a490d-392">TCP</span></span> |

<span data-ttu-id="a490d-393">**Kimenő szabályok**</span><span class="sxs-lookup"><span data-stu-id="a490d-393">**Outbound rules**</span></span>

| <span data-ttu-id="a490d-394">Szabály</span><span class="sxs-lookup"><span data-stu-id="a490d-394">Rule</span></span> | <span data-ttu-id="a490d-395">Hozzáférés</span><span class="sxs-lookup"><span data-stu-id="a490d-395">Access</span></span> | <span data-ttu-id="a490d-396">Prioritás</span><span class="sxs-lookup"><span data-stu-id="a490d-396">Priority</span></span> | <span data-ttu-id="a490d-397">Forráscímtartomány</span><span class="sxs-lookup"><span data-stu-id="a490d-397">Source address range</span></span> | <span data-ttu-id="a490d-398">Forrásport</span><span class="sxs-lookup"><span data-stu-id="a490d-398">Source port</span></span> | <span data-ttu-id="a490d-399">Célcímtartomány</span><span class="sxs-lookup"><span data-stu-id="a490d-399">Destination address range</span></span> | <span data-ttu-id="a490d-400">Célport</span><span class="sxs-lookup"><span data-stu-id="a490d-400">Destination port</span></span> | <span data-ttu-id="a490d-401">Protokoll</span><span class="sxs-lookup"><span data-stu-id="a490d-401">Protocol</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="a490d-402">Deny-Internet-All</span><span class="sxs-lookup"><span data-stu-id="a490d-402">Deny-Internet-All</span></span> |<span data-ttu-id="a490d-403">Megtagadás</span><span class="sxs-lookup"><span data-stu-id="a490d-403">Deny</span></span> |<span data-ttu-id="a490d-404">100</span><span class="sxs-lookup"><span data-stu-id="a490d-404">100</span></span> | * | * | <span data-ttu-id="a490d-405">Internet</span><span class="sxs-lookup"><span data-stu-id="a490d-405">Internet</span></span> | * | * |

### <a name="backend"></a><span data-ttu-id="a490d-406">Háttér</span><span class="sxs-lookup"><span data-stu-id="a490d-406">BackEnd</span></span>
<span data-ttu-id="a490d-407">**Bejövő szabályok**</span><span class="sxs-lookup"><span data-stu-id="a490d-407">**Inbound rules**</span></span>

| <span data-ttu-id="a490d-408">Szabály</span><span class="sxs-lookup"><span data-stu-id="a490d-408">Rule</span></span> | <span data-ttu-id="a490d-409">Hozzáférés</span><span class="sxs-lookup"><span data-stu-id="a490d-409">Access</span></span> | <span data-ttu-id="a490d-410">Prioritás</span><span class="sxs-lookup"><span data-stu-id="a490d-410">Priority</span></span> | <span data-ttu-id="a490d-411">Forráscímtartomány</span><span class="sxs-lookup"><span data-stu-id="a490d-411">Source address range</span></span> | <span data-ttu-id="a490d-412">Forrásport</span><span class="sxs-lookup"><span data-stu-id="a490d-412">Source port</span></span> | <span data-ttu-id="a490d-413">Célcímtartomány</span><span class="sxs-lookup"><span data-stu-id="a490d-413">Destination address range</span></span> | <span data-ttu-id="a490d-414">Célport</span><span class="sxs-lookup"><span data-stu-id="a490d-414">Destination port</span></span> | <span data-ttu-id="a490d-415">Protokoll</span><span class="sxs-lookup"><span data-stu-id="a490d-415">Protocol</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="a490d-416">Deny-Internet-All</span><span class="sxs-lookup"><span data-stu-id="a490d-416">Deny-Internet-All</span></span> | <span data-ttu-id="a490d-417">Megtagadás</span><span class="sxs-lookup"><span data-stu-id="a490d-417">Deny</span></span> | <span data-ttu-id="a490d-418">100</span><span class="sxs-lookup"><span data-stu-id="a490d-418">100</span></span> | <span data-ttu-id="a490d-419">Internet</span><span class="sxs-lookup"><span data-stu-id="a490d-419">Internet</span></span> | * | * | * | * |

<span data-ttu-id="a490d-420">**Kimenő szabályok**</span><span class="sxs-lookup"><span data-stu-id="a490d-420">**Outbound rules**</span></span>

| <span data-ttu-id="a490d-421">Szabály</span><span class="sxs-lookup"><span data-stu-id="a490d-421">Rule</span></span> | <span data-ttu-id="a490d-422">Hozzáférés</span><span class="sxs-lookup"><span data-stu-id="a490d-422">Access</span></span> | <span data-ttu-id="a490d-423">Prioritás</span><span class="sxs-lookup"><span data-stu-id="a490d-423">Priority</span></span> | <span data-ttu-id="a490d-424">Forráscímtartomány</span><span class="sxs-lookup"><span data-stu-id="a490d-424">Source address range</span></span> | <span data-ttu-id="a490d-425">Forrásport</span><span class="sxs-lookup"><span data-stu-id="a490d-425">Source port</span></span> | <span data-ttu-id="a490d-426">Célcímtartomány</span><span class="sxs-lookup"><span data-stu-id="a490d-426">Destination address range</span></span> | <span data-ttu-id="a490d-427">Célport</span><span class="sxs-lookup"><span data-stu-id="a490d-427">Destination port</span></span> | <span data-ttu-id="a490d-428">Protokoll</span><span class="sxs-lookup"><span data-stu-id="a490d-428">Protocol</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="a490d-429">Deny-Internet-All</span><span class="sxs-lookup"><span data-stu-id="a490d-429">Deny-Internet-All</span></span> | <span data-ttu-id="a490d-430">Megtagadás</span><span class="sxs-lookup"><span data-stu-id="a490d-430">Deny</span></span> | <span data-ttu-id="a490d-431">100</span><span class="sxs-lookup"><span data-stu-id="a490d-431">100</span></span> | * | * | <span data-ttu-id="a490d-432">Internet</span><span class="sxs-lookup"><span data-stu-id="a490d-432">Internet</span></span> | * | * |

<span data-ttu-id="a490d-433">Az alábbi NSG-k jönnek létre, és a rendszer hálózati adapterekhez társítja őket a következő virtuális gépeken:</span><span class="sxs-lookup"><span data-stu-id="a490d-433">The following NSGs are created and associated to NICs in the following VMs:</span></span>

### <a name="web1"></a><span data-ttu-id="a490d-434">WEB1</span><span class="sxs-lookup"><span data-stu-id="a490d-434">WEB1</span></span>
<span data-ttu-id="a490d-435">**Bejövő szabályok**</span><span class="sxs-lookup"><span data-stu-id="a490d-435">**Inbound rules**</span></span>

| <span data-ttu-id="a490d-436">Szabály</span><span class="sxs-lookup"><span data-stu-id="a490d-436">Rule</span></span> | <span data-ttu-id="a490d-437">Hozzáférés</span><span class="sxs-lookup"><span data-stu-id="a490d-437">Access</span></span> | <span data-ttu-id="a490d-438">Prioritás</span><span class="sxs-lookup"><span data-stu-id="a490d-438">Priority</span></span> | <span data-ttu-id="a490d-439">Forráscímtartomány</span><span class="sxs-lookup"><span data-stu-id="a490d-439">Source address range</span></span> | <span data-ttu-id="a490d-440">Forrásport</span><span class="sxs-lookup"><span data-stu-id="a490d-440">Source port</span></span> | <span data-ttu-id="a490d-441">Célcímtartomány</span><span class="sxs-lookup"><span data-stu-id="a490d-441">Destination address range</span></span> | <span data-ttu-id="a490d-442">Célport</span><span class="sxs-lookup"><span data-stu-id="a490d-442">Destination port</span></span> | <span data-ttu-id="a490d-443">Protokoll</span><span class="sxs-lookup"><span data-stu-id="a490d-443">Protocol</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="a490d-444">Allow-Inbound-RDP-Internet</span><span class="sxs-lookup"><span data-stu-id="a490d-444">Allow-Inbound-RDP-Internet</span></span> | <span data-ttu-id="a490d-445">Engedélyezés</span><span class="sxs-lookup"><span data-stu-id="a490d-445">Allow</span></span> | <span data-ttu-id="a490d-446">100</span><span class="sxs-lookup"><span data-stu-id="a490d-446">100</span></span> | <span data-ttu-id="a490d-447">Internet</span><span class="sxs-lookup"><span data-stu-id="a490d-447">Internet</span></span> | * | * | <span data-ttu-id="a490d-448">3389</span><span class="sxs-lookup"><span data-stu-id="a490d-448">3389</span></span> | <span data-ttu-id="a490d-449">TCP</span><span class="sxs-lookup"><span data-stu-id="a490d-449">TCP</span></span> |
| <span data-ttu-id="a490d-450">Allow-Inbound-HTTP-Internet</span><span class="sxs-lookup"><span data-stu-id="a490d-450">Allow-Inbound-HTTP-Internet</span></span> | <span data-ttu-id="a490d-451">Engedélyezés</span><span class="sxs-lookup"><span data-stu-id="a490d-451">Allow</span></span> | <span data-ttu-id="a490d-452">200</span><span class="sxs-lookup"><span data-stu-id="a490d-452">200</span></span> | <span data-ttu-id="a490d-453">Internet</span><span class="sxs-lookup"><span data-stu-id="a490d-453">Internet</span></span> | * | * | <span data-ttu-id="a490d-454">80</span><span class="sxs-lookup"><span data-stu-id="a490d-454">80</span></span> | <span data-ttu-id="a490d-455">TCP</span><span class="sxs-lookup"><span data-stu-id="a490d-455">TCP</span></span> |

> [!NOTE]
> <span data-ttu-id="a490d-456">Az előbbi szabályok forráscímtartománya **Internet**, nem a terheléselosztó virtuális IP-címe.</span><span class="sxs-lookup"><span data-stu-id="a490d-456">The source address range for the previous rules is **Internet**, not the virtual IP address of for the load balancer.</span></span> <span data-ttu-id="a490d-457">A forrásport *, nem 500001.</span><span class="sxs-lookup"><span data-stu-id="a490d-457">The source port is *, not 500001.</span></span> <span data-ttu-id="a490d-458">A terheléselosztókra vonatkozó NAT-szabályok nem egyeznek meg az NSG biztonsági szabályaival.</span><span class="sxs-lookup"><span data-stu-id="a490d-458">NAT rules for load balancers are not the same as NSG security rules.</span></span> <span data-ttu-id="a490d-459">Az NSG biztonsági szabályai mindig a forgalom eredeti forrásához és végső célhelyéhez kapcsolódnak, **nem** a kettő között lévő terheléselosztóhoz.</span><span class="sxs-lookup"><span data-stu-id="a490d-459">NSG security rules are always related to the original source and final destination of traffic, **not** the load balancer between the two.</span></span> 
> 
> 

### <a name="web2"></a><span data-ttu-id="a490d-460">WEB2</span><span class="sxs-lookup"><span data-stu-id="a490d-460">WEB2</span></span>
<span data-ttu-id="a490d-461">**Bejövő szabályok**</span><span class="sxs-lookup"><span data-stu-id="a490d-461">**Inbound rules**</span></span>

| <span data-ttu-id="a490d-462">Szabály</span><span class="sxs-lookup"><span data-stu-id="a490d-462">Rule</span></span> | <span data-ttu-id="a490d-463">Hozzáférés</span><span class="sxs-lookup"><span data-stu-id="a490d-463">Access</span></span> | <span data-ttu-id="a490d-464">Prioritás</span><span class="sxs-lookup"><span data-stu-id="a490d-464">Priority</span></span> | <span data-ttu-id="a490d-465">Forráscímtartomány</span><span class="sxs-lookup"><span data-stu-id="a490d-465">Source address range</span></span> | <span data-ttu-id="a490d-466">Forrásport</span><span class="sxs-lookup"><span data-stu-id="a490d-466">Source port</span></span> | <span data-ttu-id="a490d-467">Célcímtartomány</span><span class="sxs-lookup"><span data-stu-id="a490d-467">Destination address range</span></span> | <span data-ttu-id="a490d-468">Célport</span><span class="sxs-lookup"><span data-stu-id="a490d-468">Destination port</span></span> | <span data-ttu-id="a490d-469">Protokoll</span><span class="sxs-lookup"><span data-stu-id="a490d-469">Protocol</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="a490d-470">Deny-Inbound-RDP-Internet</span><span class="sxs-lookup"><span data-stu-id="a490d-470">Deny-Inbound-RDP-Internet</span></span> | <span data-ttu-id="a490d-471">Megtagadás</span><span class="sxs-lookup"><span data-stu-id="a490d-471">Deny</span></span> | <span data-ttu-id="a490d-472">100</span><span class="sxs-lookup"><span data-stu-id="a490d-472">100</span></span> | <span data-ttu-id="a490d-473">Internet</span><span class="sxs-lookup"><span data-stu-id="a490d-473">Internet</span></span> | * | * | <span data-ttu-id="a490d-474">3389</span><span class="sxs-lookup"><span data-stu-id="a490d-474">3389</span></span> | <span data-ttu-id="a490d-475">TCP</span><span class="sxs-lookup"><span data-stu-id="a490d-475">TCP</span></span> |
| <span data-ttu-id="a490d-476">Allow-Inbound-HTTP-Internet</span><span class="sxs-lookup"><span data-stu-id="a490d-476">Allow-Inbound-HTTP-Internet</span></span> | <span data-ttu-id="a490d-477">Engedélyezés</span><span class="sxs-lookup"><span data-stu-id="a490d-477">Allow</span></span> | <span data-ttu-id="a490d-478">200</span><span class="sxs-lookup"><span data-stu-id="a490d-478">200</span></span> | <span data-ttu-id="a490d-479">Internet</span><span class="sxs-lookup"><span data-stu-id="a490d-479">Internet</span></span> | * | * | <span data-ttu-id="a490d-480">80</span><span class="sxs-lookup"><span data-stu-id="a490d-480">80</span></span> | <span data-ttu-id="a490d-481">TCP</span><span class="sxs-lookup"><span data-stu-id="a490d-481">TCP</span></span> |

### <a name="db-servers-management-nic"></a><span data-ttu-id="a490d-482">DB kiszolgálók (felügyeleti hálózati adapter)</span><span class="sxs-lookup"><span data-stu-id="a490d-482">DB servers (Management NIC)</span></span>
<span data-ttu-id="a490d-483">**Bejövő szabályok**</span><span class="sxs-lookup"><span data-stu-id="a490d-483">**Inbound rules**</span></span>

| <span data-ttu-id="a490d-484">Szabály</span><span class="sxs-lookup"><span data-stu-id="a490d-484">Rule</span></span> | <span data-ttu-id="a490d-485">Hozzáférés</span><span class="sxs-lookup"><span data-stu-id="a490d-485">Access</span></span> | <span data-ttu-id="a490d-486">Prioritás</span><span class="sxs-lookup"><span data-stu-id="a490d-486">Priority</span></span> | <span data-ttu-id="a490d-487">Forráscímtartomány</span><span class="sxs-lookup"><span data-stu-id="a490d-487">Source address range</span></span> | <span data-ttu-id="a490d-488">Forrásport</span><span class="sxs-lookup"><span data-stu-id="a490d-488">Source port</span></span> | <span data-ttu-id="a490d-489">Célcímtartomány</span><span class="sxs-lookup"><span data-stu-id="a490d-489">Destination address range</span></span> | <span data-ttu-id="a490d-490">Célport</span><span class="sxs-lookup"><span data-stu-id="a490d-490">Destination port</span></span> | <span data-ttu-id="a490d-491">Protokoll</span><span class="sxs-lookup"><span data-stu-id="a490d-491">Protocol</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="a490d-492">Allow-Inbound-RDP-Front-end</span><span class="sxs-lookup"><span data-stu-id="a490d-492">Allow-Inbound-RDP-Front-end</span></span> | <span data-ttu-id="a490d-493">Engedélyezés</span><span class="sxs-lookup"><span data-stu-id="a490d-493">Allow</span></span> | <span data-ttu-id="a490d-494">100</span><span class="sxs-lookup"><span data-stu-id="a490d-494">100</span></span> | <span data-ttu-id="a490d-495">192.168.1.0/24</span><span class="sxs-lookup"><span data-stu-id="a490d-495">192.168.1.0/24</span></span> | * | * | <span data-ttu-id="a490d-496">3389</span><span class="sxs-lookup"><span data-stu-id="a490d-496">3389</span></span> | <span data-ttu-id="a490d-497">TCP</span><span class="sxs-lookup"><span data-stu-id="a490d-497">TCP</span></span> |

### <a name="db-servers-database-traffic-nic"></a><span data-ttu-id="a490d-498">DB kiszolgálók (adatbázis-forgalmi hálózati adapter)</span><span class="sxs-lookup"><span data-stu-id="a490d-498">DB servers (Database traffic NIC)</span></span>
<span data-ttu-id="a490d-499">**Bejövő szabályok**</span><span class="sxs-lookup"><span data-stu-id="a490d-499">**Inbound rules**</span></span>

| <span data-ttu-id="a490d-500">Szabály</span><span class="sxs-lookup"><span data-stu-id="a490d-500">Rule</span></span> | <span data-ttu-id="a490d-501">Hozzáférés</span><span class="sxs-lookup"><span data-stu-id="a490d-501">Access</span></span> | <span data-ttu-id="a490d-502">Prioritás</span><span class="sxs-lookup"><span data-stu-id="a490d-502">Priority</span></span> | <span data-ttu-id="a490d-503">Forráscímtartomány</span><span class="sxs-lookup"><span data-stu-id="a490d-503">Source address range</span></span> | <span data-ttu-id="a490d-504">Forrásport</span><span class="sxs-lookup"><span data-stu-id="a490d-504">Source port</span></span> | <span data-ttu-id="a490d-505">Célcímtartomány</span><span class="sxs-lookup"><span data-stu-id="a490d-505">Destination address range</span></span> | <span data-ttu-id="a490d-506">Célport</span><span class="sxs-lookup"><span data-stu-id="a490d-506">Destination port</span></span> | <span data-ttu-id="a490d-507">Protokoll</span><span class="sxs-lookup"><span data-stu-id="a490d-507">Protocol</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="a490d-508">Allow-Inbound-SQL-Front-end</span><span class="sxs-lookup"><span data-stu-id="a490d-508">Allow-Inbound-SQL-Front-end</span></span> | <span data-ttu-id="a490d-509">Engedélyezés</span><span class="sxs-lookup"><span data-stu-id="a490d-509">Allow</span></span> | <span data-ttu-id="a490d-510">100</span><span class="sxs-lookup"><span data-stu-id="a490d-510">100</span></span> | <span data-ttu-id="a490d-511">192.168.1.0/24</span><span class="sxs-lookup"><span data-stu-id="a490d-511">192.168.1.0/24</span></span> | * | * | <span data-ttu-id="a490d-512">1433</span><span class="sxs-lookup"><span data-stu-id="a490d-512">1433</span></span> | <span data-ttu-id="a490d-513">TCP</span><span class="sxs-lookup"><span data-stu-id="a490d-513">TCP</span></span> |

<span data-ttu-id="a490d-514">Mivel néhány NSG önálló hálózati adapterhez van hozzárendelve, a szabályok a Resource Managerrel üzembe helyezett erőforrásokra érvényesek.</span><span class="sxs-lookup"><span data-stu-id="a490d-514">Since some of the NSGs are associated to individual NICs, the rules are for resources deployed through Resource Manager.</span></span> <span data-ttu-id="a490d-515">A szabályokat egyesíti a rendszer az alhálózat és a hálózati adapterek vonatkozásában, attól függően, hogyan vannak társítva.</span><span class="sxs-lookup"><span data-stu-id="a490d-515">Rules are combined for subnet and NIC, depending on how they are associated.</span></span> 

## <a name="next-steps"></a><span data-ttu-id="a490d-516">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="a490d-516">Next steps</span></span>
* <span data-ttu-id="a490d-517">[NSG-k üzembe helyezése a Resource Managerrel](virtual-networks-create-nsg-arm-pportal.md).</span><span class="sxs-lookup"><span data-stu-id="a490d-517">[Deploy NSGs (Resource Manager)](virtual-networks-create-nsg-arm-pportal.md).</span></span>
* <span data-ttu-id="a490d-518">[NSG-k telepítése a klasszikus modellel](virtual-networks-create-nsg-classic-ps.md).</span><span class="sxs-lookup"><span data-stu-id="a490d-518">[Deploy NSGs (classic)](virtual-networks-create-nsg-classic-ps.md).</span></span>
* <span data-ttu-id="a490d-519">[Manage NSG logs](virtual-network-nsg-manage-log.md) (NSG-naplók kezelése).</span><span class="sxs-lookup"><span data-stu-id="a490d-519">[Manage NSG logs](virtual-network-nsg-manage-log.md).</span></span>
* <span data-ttu-id="a490d-520">[NSG-k hibaelhárítása] (virtual-network-nsg-troubleshoot-portal.md)</span><span class="sxs-lookup"><span data-stu-id="a490d-520">[Troubleshoot NSGs] (virtual-network-nsg-troubleshoot-portal.md)</span></span>
