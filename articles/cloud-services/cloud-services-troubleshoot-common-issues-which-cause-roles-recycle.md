---
title: "A felhőalapú szolgáltatás szerepkörök újrahasznosítása általános okok |} Microsoft Docs"
description: "A felhőalapú szolgáltatás egyik szerepköre, hirtelen újraindul jelentős állásidőt okozhat. Az alábbiakban néhány gyakori problémákat, melyek a szerepkörök újrahasznosítását, amelyek segítségével csökkentheti az állásidőt."
services: cloud-services
documentationcenter: 
author: simonxjx
manager: felixwu
editor: 
tags: top-support-issue
ms.assetid: 533930d1-8035-4402-b16a-cf887b2c4f85
ms.service: cloud-services
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: tbd
ms.date: 7/26/2017
ms.author: v-six
ms.openlocfilehash: e55009c72b977ee4a30f6c71043bde483849f78f
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 08/29/2017
---
# <a name="common-issues-that-cause-roles-to-recycle"></a><span data-ttu-id="bee56-104">Gyakori hibák, melyek a szerepkörök újrahasznosítását okozzák</span><span class="sxs-lookup"><span data-stu-id="bee56-104">Common issues that cause roles to recycle</span></span>
<span data-ttu-id="bee56-105">Ez a cikk ismerteti az alkalmazástelepítéssel kapcsolatos problémák gyakori okai és hibaelhárítási tippek a problémák elhárításához.</span><span class="sxs-lookup"><span data-stu-id="bee56-105">This article discusses some of the common causes of deployment problems and provides troubleshooting tips to help you resolve these problems.</span></span> <span data-ttu-id="bee56-106">Arra utal, hogy probléma van az alkalmazás akkor, ha a szerepkör példánya nem indul el, vagy azt a inicializálása, foglalt és leállítása állapotok közötti ciklusok.</span><span class="sxs-lookup"><span data-stu-id="bee56-106">An indication that a problem exists with an application is when the role instance fails to start, or it cycles between the initializing, busy, and stopping states.</span></span>

[!INCLUDE [support-disclaimer](../../includes/support-disclaimer.md)]

## <a name="missing-runtime-dependencies"></a><span data-ttu-id="bee56-107">Hiányzó futásidejű függőségek</span><span class="sxs-lookup"><span data-stu-id="bee56-107">Missing runtime dependencies</span></span>
<span data-ttu-id="bee56-108">Ha az alkalmazás szerepet bármely szerelvény, amely nem része a .NET-keretrendszer vagy az Azure felügyelt kódtárára, explicit módon bele kell ezt a szerelvényt az alkalmazáscsomagot.</span><span class="sxs-lookup"><span data-stu-id="bee56-108">If a role in your application relies on any assembly that is not part of the .NET Framework or the Azure managed library, you must explicitly include that assembly in the application package.</span></span> <span data-ttu-id="bee56-109">Ne feledje, hogy más Microsoft-keretrendszer nem érhető el az Azure-on alapértelmezés szerint.</span><span class="sxs-lookup"><span data-stu-id="bee56-109">Keep in mind that other Microsoft frameworks are not available on Azure by default.</span></span> <span data-ttu-id="bee56-110">Ha a szerepkör ilyen keretrendszer támaszkodik, hozzá kell adnia az alkalmazáscsomag e szerelvényeket.</span><span class="sxs-lookup"><span data-stu-id="bee56-110">If your role relies on such a framework, you must add those assemblies to the application package.</span></span>

<span data-ttu-id="bee56-111">Mielőtt felépítéséhez és az alkalmazás becsomagolása, ellenőrizze a következőket:</span><span class="sxs-lookup"><span data-stu-id="bee56-111">Before you build and package your application, verify the following:</span></span>

* <span data-ttu-id="bee56-112">Ha a Visual studio segítségével, győződjön meg arról, a **másolása helyi** tulajdonsága **igaz** minden hivatkozott szerelvény a projekt, amely nem része az Azure SDK-t vagy a .NET-keretrendszer.</span><span class="sxs-lookup"><span data-stu-id="bee56-112">If using Visual studio, make sure the **Copy Local** property is set to **True** for each referenced assembly in your project that is not part of the Azure SDK or the .NET Framework.</span></span>
* <span data-ttu-id="bee56-113">Győződjön meg arról, hogy a web.config fájl nem hivatkozik a fordítási elemben nem használt szerelvényeket.</span><span class="sxs-lookup"><span data-stu-id="bee56-113">Make sure the web.config file does not reference any unused assemblies in the compilation element.</span></span>
* <span data-ttu-id="bee56-114">A **Build művelet** minden .cshtml fájl van állítva **tartalom**.</span><span class="sxs-lookup"><span data-stu-id="bee56-114">The **Build Action** of every .cshtml file is set to **Content**.</span></span> <span data-ttu-id="bee56-115">Ez biztosítja, hogy a fájlok megfelelően fog megjelenni a csomagot, és lehetővé teszi, hogy más hivatkozott fájlok megjelennek a csomag.</span><span class="sxs-lookup"><span data-stu-id="bee56-115">This ensures that the files will appear correctly in the package and enables other referenced files to appear in the package.</span></span>

## <a name="assembly-targets-wrong-platform"></a><span data-ttu-id="bee56-116">Szerelvény célok nem megfelelő platformon</span><span class="sxs-lookup"><span data-stu-id="bee56-116">Assembly targets wrong platform</span></span>
<span data-ttu-id="bee56-117">Azure egy 64 bites környezetben.</span><span class="sxs-lookup"><span data-stu-id="bee56-117">Azure is a 64-bit environment.</span></span> <span data-ttu-id="bee56-118">Emiatt Azure .NET-szerelvényt a 32 bites cél számára nem fog működni.</span><span class="sxs-lookup"><span data-stu-id="bee56-118">Therefore, .NET assemblies compiled for a 32-bit target won't work on Azure.</span></span>

## <a name="role-throws-unhandled-exceptions-while-initializing-or-stopping"></a><span data-ttu-id="bee56-119">Szerepkör nem kezelt kivételek inicializálása vagy leállítása közben jelez.</span><span class="sxs-lookup"><span data-stu-id="bee56-119">Role throws unhandled exceptions while initializing or stopping</span></span>
<span data-ttu-id="bee56-120">A módszerek által okozott kivételek a [RoleEntryPoint] osztály, amely tartalmazza a [OnStart], [OnStop], és [futtatása] módszereket, nem kezelt kivételek.</span><span class="sxs-lookup"><span data-stu-id="bee56-120">Any exceptions that are thrown by the methods of the [RoleEntryPoint] class, which includes the [OnStart], [OnStop], and [Run] methods, are unhandled exceptions.</span></span> <span data-ttu-id="bee56-121">Nem kezelt kivétel lép fel az alábbi módszerek egyikét, ha a szerepkör indul újra.</span><span class="sxs-lookup"><span data-stu-id="bee56-121">If an unhandled exception occurs in one of these methods, the role will recycle.</span></span> <span data-ttu-id="bee56-122">Ha ismételten újrahasznosítása a szerepkör, előfordulhat, hogy kell egy nem kezelt kivétel kiváltása minden alkalommal, amikor megkísérli elindítani.</span><span class="sxs-lookup"><span data-stu-id="bee56-122">If the role is recycling repeatedly, it may be throwing an unhandled exception each time it tries to start.</span></span>

## <a name="role-returns-from-run-method"></a><span data-ttu-id="bee56-123">Szerepkör vissza Run metódus</span><span class="sxs-lookup"><span data-stu-id="bee56-123">Role returns from Run method</span></span>
<span data-ttu-id="bee56-124">A [futtatása] metódus az célja, hogy határozatlan ideig futnak.</span><span class="sxs-lookup"><span data-stu-id="bee56-124">The [Run] method is intended to run indefinitely.</span></span> <span data-ttu-id="bee56-125">Ha a kód felülírja a [futtatása] metódust, akkor kell alvó határozatlan ideig.</span><span class="sxs-lookup"><span data-stu-id="bee56-125">If your code overrides the [Run] method, it should sleep indefinitely.</span></span> <span data-ttu-id="bee56-126">Ha a [futtatása] metódus ad vissza, a szerepkör újraindul.</span><span class="sxs-lookup"><span data-stu-id="bee56-126">If the [Run] method returns, the role recycles.</span></span>

## <a name="incorrect-diagnosticsconnectionstring-setting"></a><span data-ttu-id="bee56-127">Helytelen DiagnosticsConnectionString beállítása</span><span class="sxs-lookup"><span data-stu-id="bee56-127">Incorrect DiagnosticsConnectionString setting</span></span>
<span data-ttu-id="bee56-128">Ha az alkalmazás Azure Diagnostics használja, a szolgáltatás konfigurációs fájlban kell megadnia a `DiagnosticsConnectionString` konfigurációs beállítás.</span><span class="sxs-lookup"><span data-stu-id="bee56-128">If application uses Azure Diagnostics, your service configuration file must specify the `DiagnosticsConnectionString` configuration setting.</span></span> <span data-ttu-id="bee56-129">Ez a beállítás a tárfiók HTTPS-kapcsolat szabad megadni az Azure-ban.</span><span class="sxs-lookup"><span data-stu-id="bee56-129">This setting should specify an HTTPS connection to your storage account in Azure.</span></span>

<span data-ttu-id="bee56-130">Annak érdekében, hogy a `DiagnosticsConnectionString` beállítás helyességéről, csak az alkalmazáscsomag telepítheti az Azure-ba, ellenőrizze a következőket:</span><span class="sxs-lookup"><span data-stu-id="bee56-130">To ensure that your `DiagnosticsConnectionString` setting is correct before you deploy your application package to Azure, verify the following:</span></span>  

* <span data-ttu-id="bee56-131">A `DiagnosticsConnectionString` pontok beállítása az Azure-ban egy érvényes tárfiókot.</span><span class="sxs-lookup"><span data-stu-id="bee56-131">The `DiagnosticsConnectionString` setting points to a valid storage account in Azure.</span></span>  
  <span data-ttu-id="bee56-132">Alapértelmezés szerint ez a beállítás mutat az emulált tárfiókot, explicit módon kell változtatni ezt a beállítást, mielőtt a alkalmazáscsomag telepítése.</span><span class="sxs-lookup"><span data-stu-id="bee56-132">By default, this setting points to the emulated storage account, so you must explicitly change this setting before you deploy your application package.</span></span> <span data-ttu-id="bee56-133">Ha nem módosítja ezt a beállítást, a rendszer kivételt hoz létre, amikor a szerepkör példánya megkísérli a diagnosztikai figyelő elindítása.</span><span class="sxs-lookup"><span data-stu-id="bee56-133">If you do not change this setting, an exception is thrown when the role instance attempts to start the diagnostic monitor.</span></span> <span data-ttu-id="bee56-134">Ez a szerepkör példánya határozatlan ideig újrahasznosítása okozhatja.</span><span class="sxs-lookup"><span data-stu-id="bee56-134">This may cause the role instance to recycle indefinitely.</span></span>
* <span data-ttu-id="bee56-135">A kapcsolati karakterlánc szerepel a következő [formátum](../storage/common/storage-configure-connection-string.md).</span><span class="sxs-lookup"><span data-stu-id="bee56-135">The connection string is specified in the following [format](../storage/common/storage-configure-connection-string.md).</span></span> <span data-ttu-id="bee56-136">(A protokollt meg kell adni, HTTPS.) Cserélje le *MyAccountName* a tárfiók nevével és *MyAccountKey* a hozzáférési kulccsal:</span><span class="sxs-lookup"><span data-stu-id="bee56-136">(The protocol must be specified as HTTPS.) Replace *MyAccountName* with the name of your storage account, and *MyAccountKey* with your access key:</span></span>    

        DefaultEndpointsProtocol=https;AccountName=MyAccountName;AccountKey=MyAccountKey

  <span data-ttu-id="bee56-137">Ha az alkalmazás Azure-eszközök a Microsoft Visual Studio használatával fejleszt, a tulajdonságlapok segítségével értékre állítja.</span><span class="sxs-lookup"><span data-stu-id="bee56-137">If you are developing your application by using Azure Tools for Microsoft Visual Studio, you can use the property pages to set this value.</span></span>

## <a name="exported-certificate-does-not-include-private-key"></a><span data-ttu-id="bee56-138">Exportált tanúsítvány nem tartalmazza a titkos kulcs</span><span class="sxs-lookup"><span data-stu-id="bee56-138">Exported certificate does not include private key</span></span>
<span data-ttu-id="bee56-139">A webes szerepkör alatt SSL futtatásához győződjön meg arról, hogy saját exportált felügyeleti tanúsítványát tartalmazza a titkos kulcsot.</span><span class="sxs-lookup"><span data-stu-id="bee56-139">To run a web role under SSL, you must ensure that your exported management certificate includes the private key.</span></span> <span data-ttu-id="bee56-140">Ha használja a *Windows tanúsítványkezelő* exportálja a tanúsítványt, ügyeljen arra, hogy válassza ki **Igen** a a **a titkos kulcs exportálását választom** lehetőséget.</span><span class="sxs-lookup"><span data-stu-id="bee56-140">If you use the *Windows Certificate Manager* to export the certificate, be sure to select **Yes** for the **Export the private key** option.</span></span> <span data-ttu-id="bee56-141">A tanúsítványt a PFX-formátum, ami a jelenleg támogatott csak formátumot kell exportálni.</span><span class="sxs-lookup"><span data-stu-id="bee56-141">The certificate must be exported in the PFX format, which is the only format currently supported.</span></span>

## <a name="next-steps"></a><span data-ttu-id="bee56-142">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="bee56-142">Next steps</span></span>
<span data-ttu-id="bee56-143">További [cikkek hibaelhárítási](https://azure.microsoft.com/documentation/articles/?tag=top-support-issue&product=cloud-services) felhőszolgáltatásai számára.</span><span class="sxs-lookup"><span data-stu-id="bee56-143">View more [troubleshooting articles](https://azure.microsoft.com/documentation/articles/?tag=top-support-issue&product=cloud-services) for cloud services.</span></span>

<span data-ttu-id="bee56-144">Megtekintheti a további szerepkörök újrahasznosítása a következő forgatókönyvek [Kevin Williamson blog adatsorozat](http://blogs.msdn.com/b/kwill/archive/2013/08/09/windows-azure-paas-compute-diagnostics-data.aspx).</span><span class="sxs-lookup"><span data-stu-id="bee56-144">View more role recycling scenarios at [Kevin Williamson's blog series](http://blogs.msdn.com/b/kwill/archive/2013/08/09/windows-azure-paas-compute-diagnostics-data.aspx).</span></span>

[RoleEntryPoint]: https://msdn.microsoft.com/library/microsoft.windowsazure.serviceruntime.roleentrypoint.aspx
[OnStart]: https://msdn.microsoft.com/library/microsoft.windowsazure.serviceruntime.roleentrypoint.onstart.aspx
[OnStop]: https://msdn.microsoft.com/library/microsoft.windowsazure.serviceruntime.roleentrypoint.onstop.aspx
[futtatása]: https://msdn.microsoft.com/library/microsoft.windowsazure.serviceruntime.roleentrypoint.run.aspx
