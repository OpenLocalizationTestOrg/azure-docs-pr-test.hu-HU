---
title: "az Application Insights segítségével Felhőszolgáltatások aaaTroubleshoot |} Microsoft Docs"
description: "Ismerje meg, hogyan tootroubleshoot felhőszolgáltatás állít ki az Application Insights tooprocess Azure Diagnostics adatai alapján."
services: cloud-services
documentationcenter: .net
author: sbtron
manager: timlt
editor: tysonn
ms.assetid: e93f387b-ef29-4731-ae41-0676722accb6
ms.service: cloud-services
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 05/23/2017
ms.author: saurabh
ms.openlocfilehash: 972924d9e6d1fe33d5c19b006d482de52ffb0ef7
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/06/2017
---
# <a name="troubleshoot-cloud-services-using-application-insights"></a><span data-ttu-id="16cec-103">Hibaelhárítás az Application Insights segítségével Cloud Services</span><span class="sxs-lookup"><span data-stu-id="16cec-103">Troubleshoot Cloud Services using Application Insights</span></span>
<span data-ttu-id="16cec-104">A [Azure SDK 2.8](https://azure.microsoft.com/downloads/) Azure diagnostics bővítmény 1.5-ös, a küldhet Azure diagnosztikai adatokat a felhőalapú szolgáltatás, és közvetlenül tooApplication Insights.</span><span class="sxs-lookup"><span data-stu-id="16cec-104">With [Azure SDK 2.8](https://azure.microsoft.com/downloads/) and Azure diagnostics extension 1.5, you can send Azure Diagnostics data for your Cloud Service directly tooApplication Insights.</span></span> <span data-ttu-id="16cec-105">hello Azure Diagnostics által gyűjtött naplók&mdash;többek között az alkalmazásnaplók, a Windows eseménynaplóiban keresse meg, az ETW-naplók és a teljesítményszámlálók&mdash;tooApplication Insights küldhetők el.</span><span class="sxs-lookup"><span data-stu-id="16cec-105">hello logs collected by Azure Diagnostics&mdash;including application logs, Windows Event Logs, ETW Logs, and performance counters&mdash;can be sent tooApplication Insights.</span></span> <span data-ttu-id="16cec-106">Majd jelenítheti meg ezeket az információkat a hello Application Insights portál felhasználói felületén.</span><span class="sxs-lookup"><span data-stu-id="16cec-106">You can then visualize this information in hello Application Insights portal UI.</span></span> <span data-ttu-id="16cec-107">Használhatja hello Application Insights SDK tooget betekintést metrikák és a naplófájlokat, amelyek az alkalmazás, valamint hello rendszer- és infrastruktúra-szintű származó Azure Diagnostics származik.</span><span class="sxs-lookup"><span data-stu-id="16cec-107">You can then use hello Application Insights SDK tooget insights into metrics and logs that come from your application, as well as hello system and infrastructure-level data that comes from Azure Diagnostics.</span></span>

## <a name="configure-azure-diagnostics-toosend-data-tooapplication-insights"></a><span data-ttu-id="16cec-108">Azure Diagnostics toosend adatok tooApplication Insights konfigurálása</span><span class="sxs-lookup"><span data-stu-id="16cec-108">Configure Azure Diagnostics toosend data tooApplication Insights</span></span>
<span data-ttu-id="16cec-109">Kövesse a lépéseket tooset fel a felhőalapú szolgáltatás projekt toosend Azure diagnosztikai adatokat tooApplication Insights.</span><span class="sxs-lookup"><span data-stu-id="16cec-109">Follow these steps tooset up your cloud service project toosend Azure Diagnostics data tooApplication Insights.</span></span>

1. <span data-ttu-id="16cec-110">A Visual Studio Solution Explorerben kattintson a jobb gombbal egy szerepkört, és válassza ki **tulajdonságok** tooopen hello szerepkör Tervező.</span><span class="sxs-lookup"><span data-stu-id="16cec-110">In Visual Studio Solution Explorer, right-click a role and select **Properties** tooopen hello Role designer.</span></span>

    ![Solution Explorer szerepkör tulajdonságai][1]

2. <span data-ttu-id="16cec-112">A hello **diagnosztika** hello szerepkör designer, jelölje be hello szakasza **elküldeni a diagnosztikai adatok tooApplication Insights** lehetőséget.</span><span class="sxs-lookup"><span data-stu-id="16cec-112">In hello **Diagnostics** section of hello Role designer, select hello **Send diagnostics data tooApplication Insights** option.</span></span>

    ![Szerepkör designer küldjön diagnosztikai adatokat tooapplication insights][2]

3. <span data-ttu-id="16cec-114">Válassza ki hello Application Insights-erőforrást, amelyet toosend hello Azure diagnosztikai adatokat hello párbeszédpanelen ugrik fel.</span><span class="sxs-lookup"><span data-stu-id="16cec-114">In hello dialog box that pops up, select hello Application Insights resource that you want toosend hello Azure diagnostics data to.</span></span> <span data-ttu-id="16cec-115">hello párbeszédpanel lehetővé teszi egy meglévő Application Insights-erőforrást az előfizetésből tooselect vagy toomanually adja meg az Application Insights-erőforrás instrumentation kulcsa.</span><span class="sxs-lookup"><span data-stu-id="16cec-115">hello dialog box allows you tooselect an existing Application Insights resource from your subscription or toomanually specify an instrumentation key for an Application Insights resource.</span></span> <span data-ttu-id="16cec-116">Application Insights-erőforrás létrehozásával kapcsolatos további információkért lásd: [hozzon létre egy új Application Insights-erőforrást](../application-insights/app-insights-create-new-resource.md).</span><span class="sxs-lookup"><span data-stu-id="16cec-116">For more information on creating an Application Insights resource, see [Create a new Application Insights resource](../application-insights/app-insights-create-new-resource.md).</span></span>

    ![Válassza ki az application insights-erőforrás][3]

    <span data-ttu-id="16cec-118">Miután hozzáadta a hello Application Insights-erőforrást, hello instrumentation kulcs az adott erőforrás hello nevű szolgáltatás konfigurációs beállításként tárolási **APPINSIGHTS_INSTRUMENTATIONKEY**.</span><span class="sxs-lookup"><span data-stu-id="16cec-118">Once you have added hello Application Insights resource, hello instrumentation key for that resource is stored as a service configuration setting with hello name **APPINSIGHTS_INSTRUMENTATIONKEY**.</span></span> <span data-ttu-id="16cec-119">A konfigurációs beállítást, az egyes szolgáltatáskonfiguráció vagy a környezet módosíthatja.</span><span class="sxs-lookup"><span data-stu-id="16cec-119">You can change this configuration setting for each service configuration or environment.</span></span> <span data-ttu-id="16cec-120">toodo Igen, válasszon egy másik konfigurációs hello **szolgáltatáskonfiguráció** listában, és adja meg, hogy a konfiguráció új instrumentation kulcsot.</span><span class="sxs-lookup"><span data-stu-id="16cec-120">toodo so, select a different configuration from hello **Service Configuration** list and specify a new instrumentation key for that configuration.</span></span>

    ![Válassza ki a szolgáltatás konfigurációja][4]

    <span data-ttu-id="16cec-122">Hello **APPINSIGHTS_INSTRUMENTATIONKEY** konfigurációs beállítást használja a Visual Studio tooconfigure hello diagnosztika bővítmény erőforrásadatokkal hello megfelelő Application Insights közzététele során.</span><span class="sxs-lookup"><span data-stu-id="16cec-122">hello **APPINSIGHTS_INSTRUMENTATIONKEY** configuration setting is used by Visual Studio tooconfigure hello diagnostics extension with hello appropriate Application Insights resource information during publishing.</span></span> <span data-ttu-id="16cec-123">hello konfigurációs beállítás kényelmes módja a meghatározásának különböző szolgáltatáskonfiguráció különböző instrumentation kulcsokat.</span><span class="sxs-lookup"><span data-stu-id="16cec-123">hello configuration setting is a convenient way of defining different instrumentation keys for different service configurations.</span></span> <span data-ttu-id="16cec-124">Visual Studio meg fog beállítás fordítása, és helyezze be hello diagnosztikai bővítmény nyilvános konfigurációja során hello közzétételi folyamat.</span><span class="sxs-lookup"><span data-stu-id="16cec-124">Visual Studio will translate that setting and insert it into hello diagnostics extension public configuration during hello publish process.</span></span> <span data-ttu-id="16cec-125">toosimplify hello folyamatán hello diagnosztika bővítmény a PowerShell-lel, hello csomag kimenetét a Visual Studio hello nyilvános konfigurációs XML-kód hello megfelelő Application Insights instrumentation kulccsal is tartalmaz.</span><span class="sxs-lookup"><span data-stu-id="16cec-125">toosimplify hello process of configuring hello diagnostics extension with PowerShell, hello package output from Visual Studio also contains hello public configuration XML with hello appropriate Application Insights instrumentation key.</span></span> <span data-ttu-id="16cec-126">hello nyilvános konfigurációs fájljainak hello bővítmények mappában jönnek létre, és kövesse a hello mintát *PaaSDiagnostics.&lt; RoleName&gt;. PubConfig.xml*.</span><span class="sxs-lookup"><span data-stu-id="16cec-126">hello public config files are created in hello Extensions folder and follow hello pattern *PaaSDiagnostics.&lt;RoleName&gt;.PubConfig.xml*.</span></span> <span data-ttu-id="16cec-127">A PowerShell-alapú telepítések használhatja ezt a mintát toomap konfigurációs tooa szerepkörönként.</span><span class="sxs-lookup"><span data-stu-id="16cec-127">Any PowerShell-based deployments can use this pattern toomap each configuration tooa role.</span></span>

4) <span data-ttu-id="16cec-128">tooconfigure Azure diagnostics toosend hello Azure diagnostics ügynök tooApplication Insights által gyűjtött teljesítményszámlálók és a hiba szintű naplók engedélyezése hello **elküldeni a diagnosztikai adatok tooApplication Insights** lehetőséget.</span><span class="sxs-lookup"><span data-stu-id="16cec-128">tooconfigure Azure diagnostics toosend all performance counters and error-level logs collected by hello Azure diagnostics agent tooApplication Insights, enable hello **Send diagnostics data tooApplication Insights** option.</span></span> 

    <span data-ttu-id="16cec-129">Ha azt szeretné, hogy toofurther milyen adatok küldési tooApplication Insights, manuálisan kell szerkeszteni hello *diagnostics.wadcfgx* fájl az egyes szerepkörökhöz.</span><span class="sxs-lookup"><span data-stu-id="16cec-129">If you want toofurther configure what data is sent tooApplication Insights, you must manually edit hello *diagnostics.wadcfgx* file for each role.</span></span> <span data-ttu-id="16cec-130">Lásd: [konfigurálása Azure Diagnostics toosend adatok tooApplication Insights](#configure-azure-diagnostics-to-send-data-to-application-insights) hello konfigurációs manuális frissítésével kapcsolatos további toolearn.</span><span class="sxs-lookup"><span data-stu-id="16cec-130">See [Configure Azure Diagnostics toosend data tooApplication Insights](#configure-azure-diagnostics-to-send-data-to-application-insights) toolearn more about manually updating hello configuration.</span></span>

<span data-ttu-id="16cec-131">Ha hello felhőszolgáltatás konfigurált toosend Azure diagnosztikai adatokat tooapplication insights, ezután telepítheti azt tooAzure általában meggyőződött arról, hogy hello Azure diagnostics bővítmény engedélyezve van.</span><span class="sxs-lookup"><span data-stu-id="16cec-131">When hello cloud service is configured toosend Azure diagnostics data tooapplication insights, you can deploy it tooAzure normally, making sure hello Azure diagnostics extension is enabled.</span></span> <span data-ttu-id="16cec-132">További információkért lásd: [közzététele a felhőalapú szolgáltatás, a Visual Studio használatával](../vs-azure-tools-publishing-a-cloud-service.md).</span><span class="sxs-lookup"><span data-stu-id="16cec-132">For more information, see  [Publishing a Cloud Service using Visual Studio](../vs-azure-tools-publishing-a-cloud-service.md).</span></span>  

## <a name="viewing-azure-diagnostics-data-in-application-insights"></a><span data-ttu-id="16cec-133">Az Azure diagnosztikai adatainak megtekintése az Application Insights</span><span class="sxs-lookup"><span data-stu-id="16cec-133">Viewing Azure diagnostics data in Application Insights</span></span>
<span data-ttu-id="16cec-134">hello Azure diagnosztikai telemetriai adatokat jeleníti meg az Application Insights-erőforrás a felhőalapú szolgáltatás számára megadott hello.</span><span class="sxs-lookup"><span data-stu-id="16cec-134">hello Azure diagnostic telemetry shows up in hello Application Insights resource configured for your cloud service.</span></span>

<span data-ttu-id="16cec-135">Az Azure diagnostics napló képezi le tooApplication elemzések fogalmakat az alábbi módszerek:</span><span class="sxs-lookup"><span data-stu-id="16cec-135">Azure diagnostics log types map tooApplication Insights concepts in these ways:</span></span>

* <span data-ttu-id="16cec-136">Teljesítményszámlálók, egyéni metrikákat az Application Insightsban jelennek meg.</span><span class="sxs-lookup"><span data-stu-id="16cec-136">Performance counters are displayed as Custom Metrics in Application Insights.</span></span>
* <span data-ttu-id="16cec-137">Windows eseménynaplóiban keresse meg a nyomkövetési adatokat és az Application Insightsban egyéni események jelennek meg.</span><span class="sxs-lookup"><span data-stu-id="16cec-137">Windows Event Logs are shown as Traces and Custom Events in Application Insights.</span></span>
* <span data-ttu-id="16cec-138">Alkalmazás naplóit, ETW naplók és a diagnosztika infrastruktúra naplók jelennek meg az Application Insights nyomkövetési adatokat.</span><span class="sxs-lookup"><span data-stu-id="16cec-138">Application logs, ETW logs, and any Diagnostics Infrastructure logs are shown as Traces in Application Insights.</span></span>

<span data-ttu-id="16cec-139">az Application Insightsban Azure diagnosztikai adatainak tooview hello következő módokon:</span><span class="sxs-lookup"><span data-stu-id="16cec-139">tooview Azure diagnostics data in Application Insights, do one of hello following:</span></span>

* <span data-ttu-id="16cec-140">Használjon [metrikaböngésző](../application-insights/app-insights-metrics-explorer.md) toovisualize bármilyen egyéni teljesítményszámlálókat, vagy a Windows Eseménynapló eseményeinek különböző típusú száma.</span><span class="sxs-lookup"><span data-stu-id="16cec-140">Use [Metrics explorer](../application-insights/app-insights-metrics-explorer.md) toovisualize any custom performance counters or counts of different types of Windows Event Log events.</span></span>

    ![Egyéni metrikák a Metrikaböngészőben][5]

* <span data-ttu-id="16cec-142">Használjon [keresési](../application-insights/app-insights-diagnostic-search.md) toosearch hello nyomkövetési naplók Azure Diagnostics által küldött között.</span><span class="sxs-lookup"><span data-stu-id="16cec-142">Use [Search](../application-insights/app-insights-diagnostic-search.md) toosearch across hello  trace logs sent by Azure Diagnostics.</span></span> <span data-ttu-id="16cec-143">Például ha a nem kezelt kivételt okozott hello szerepkör toocrash és újrahasznosítását, hello kivétel kapcsolatos információkat jeleníti meg hello *alkalmazás* csatornája *Windows-Eseménynapló*.</span><span class="sxs-lookup"><span data-stu-id="16cec-143">For example, if an unhandled exception has caused hello role toocrash and recycle, information about hello exception shows up in hello *Application* channel of *Windows Event Log*.</span></span> <span data-ttu-id="16cec-144">Használja a keresési toolook hello Windows eseménynaplóban, és teljes Veremkivonat hello hello kivétel toohelp keresés hello problémának az oka hello beolvasása.</span><span class="sxs-lookup"><span data-stu-id="16cec-144">You can use search toolook at hello Windows Event Log error and get hello full stack trace for hello exception toohelp find hello cause of hello issue.</span></span>

    ![Keresési nyomkövetések][6]

## <a name="next-steps"></a><span data-ttu-id="16cec-146">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="16cec-146">Next Steps</span></span>
* <span data-ttu-id="16cec-147">[Adja hozzá a hello Application Insights SDK tooyour felhőszolgáltatás](../application-insights/app-insights-cloudservices.md) kérelmeket, kivételek, függőségeit és bármilyen egyéni telemetriai adat az alkalmazásról toosend adatait.</span><span class="sxs-lookup"><span data-stu-id="16cec-147">[Add hello Application Insights SDK tooyour cloud service](../application-insights/app-insights-cloudservices.md) toosend data about requests, exceptions, dependencies, and any custom telemetry from your application.</span></span> <span data-ttu-id="16cec-148">Hello Azure diagnosztikai adatokat, ezt az információt kaphat a az alkalmazás és a rendszer, amely teljes rálátást együtt az összes hello ugyanahhoz a Application Insights-erőforráshoz.</span><span class="sxs-lookup"><span data-stu-id="16cec-148">When combined with hello Azure Diagnostics data, this information you can get a complete view of your application and system, all in hello same Application Insight resource.</span></span>  

<!--Image references-->
[1]: ./media/cloud-services-dotnet-diagnostics-applicationinsights/solution-explorer-properties.png
[2]: ./media/cloud-services-dotnet-diagnostics-applicationinsights/role-designer-sendtoappinsights.png
[3]: ./media/cloud-services-dotnet-diagnostics-applicationinsights/select-appinsights-resource.png
[4]: ./media/cloud-services-dotnet-diagnostics-applicationinsights/role-designer-appinsights-serviceconfig.png
[5]: ./media/cloud-services-dotnet-diagnostics-applicationinsights/metrics-explorer-custom-metrics.png
[6]: ./media/cloud-services-dotnet-diagnostics-applicationinsights/search-windowseventlog-error.png
