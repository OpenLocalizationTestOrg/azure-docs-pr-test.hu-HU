---
title: "Hibaelhárítás az Application Insights segítségével Felhőszolgáltatások |} Microsoft Docs"
description: "Ismerje meg az Application Insights segítségével folyamat adataihoz az Azure Diagnostics cloud service kapcsolatos problémák elhárítása."
services: cloud-services
documentationcenter: .net
author: sbtron
manager: timlt
editor: tysonn
ms.assetid: e93f387b-ef29-4731-ae41-0676722accb6
ms.service: cloud-services
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 05/23/2017
ms.author: saurabh
ms.openlocfilehash: 4001ca908ff00b1a40829d687589080e9b07b18a
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 07/11/2017
---
# <a name="troubleshoot-cloud-services-using-application-insights"></a><span data-ttu-id="c832f-103">Hibaelhárítás az Application Insights segítségével Cloud Services</span><span class="sxs-lookup"><span data-stu-id="c832f-103">Troubleshoot Cloud Services using Application Insights</span></span>
<span data-ttu-id="c832f-104">A [Azure SDK 2.8](https://azure.microsoft.com/downloads/) és az Azure diagnostics-bővítmény 1.5-ös küldhet Azure diagnosztikai adatokat a felhőalapú szolgáltatás közvetlenül az Application Insights részére.</span><span class="sxs-lookup"><span data-stu-id="c832f-104">With [Azure SDK 2.8](https://azure.microsoft.com/downloads/) and Azure diagnostics extension 1.5, you can send Azure Diagnostics data for your Cloud Service directly to Application Insights.</span></span> <span data-ttu-id="c832f-105">A naplók Azure Diagnostics által gyűjtött&mdash;többek között az alkalmazásnaplók, a Windows eseménynaplóiban keresse meg, az ETW-naplók és a teljesítményszámlálók&mdash;Application Insights lehet küldeni.</span><span class="sxs-lookup"><span data-stu-id="c832f-105">The logs collected by Azure Diagnostics&mdash;including application logs, Windows Event Logs, ETW Logs, and performance counters&mdash;can be sent to Application Insights.</span></span> <span data-ttu-id="c832f-106">Majd jelenítheti meg az Application Insights portál felhasználói felületének ezt az információt.</span><span class="sxs-lookup"><span data-stu-id="c832f-106">You can then visualize this information in the Application Insights portal UI.</span></span> <span data-ttu-id="c832f-107">Az Application Insights SDK segítségével majd metrikák és az alkalmazás, valamint a rendszer- és infrastruktúra-szintű származó Azure Diagnostics érkező naplók beolvasása.</span><span class="sxs-lookup"><span data-stu-id="c832f-107">You can then use the Application Insights SDK to get insights into metrics and logs that come from your application, as well as the system and infrastructure-level data that comes from Azure Diagnostics.</span></span>

## <a name="configure-azure-diagnostics-to-send-data-to-application-insights"></a><span data-ttu-id="c832f-108">Azure diagnosztikai adatokat küldeni a Application Insights konfigurálása</span><span class="sxs-lookup"><span data-stu-id="c832f-108">Configure Azure Diagnostics to send data to Application Insights</span></span>
<span data-ttu-id="c832f-109">Kövesse az alábbi lépéseket a felhőszolgáltatás-projekt beállítása az Azure diagnosztikai adatokat küldeni a Application insights szolgáltatással.</span><span class="sxs-lookup"><span data-stu-id="c832f-109">Follow these steps to set up your cloud service project to send Azure Diagnostics data to Application Insights.</span></span>

1. <span data-ttu-id="c832f-110">A Visual Studio Solution Explorerben kattintson a jobb gombbal egy szerepkört, és válassza ki **tulajdonságok** a szerepkör-tervező megnyitása.</span><span class="sxs-lookup"><span data-stu-id="c832f-110">In Visual Studio Solution Explorer, right-click a role and select **Properties** to open the Role designer.</span></span>

    ![Solution Explorer szerepkör tulajdonságai][1]

2. <span data-ttu-id="c832f-112">Az a **diagnosztika** szakasz a szerepkör Designer, jelölje be a **diagnosztikai adatok küldése az Application Insights** lehetőséget.</span><span class="sxs-lookup"><span data-stu-id="c832f-112">In the **Diagnostics** section of the Role designer, select the **Send diagnostics data to Application Insights** option.</span></span>

    ![Szerepkör designer diagnosztikai adatok küldése az application insights][2]

3. <span data-ttu-id="c832f-114">Előugró párbeszédpanelen válassza ki az Application Insights-erőforrást, amelyet szeretne küldeni az Azure diagnosztikai adatokat.</span><span class="sxs-lookup"><span data-stu-id="c832f-114">In the dialog box that pops up, select the Application Insights resource that you want to send the Azure diagnostics data to.</span></span> <span data-ttu-id="c832f-115">A párbeszédpanel lehetővé teszi, hogy, hogy válassza ki egy meglévő Application Insights-erőforrást az előfizetésből, vagy adja meg manuálisan az Application Insights-erőforrás instrumentation kulcsa.</span><span class="sxs-lookup"><span data-stu-id="c832f-115">The dialog box allows you to select an existing Application Insights resource from your subscription or to manually specify an instrumentation key for an Application Insights resource.</span></span> <span data-ttu-id="c832f-116">Application Insights-erőforrás létrehozásával kapcsolatos további információkért lásd: [hozzon létre egy új Application Insights-erőforrást](../application-insights/app-insights-create-new-resource.md).</span><span class="sxs-lookup"><span data-stu-id="c832f-116">For more information on creating an Application Insights resource, see [Create a new Application Insights resource](../application-insights/app-insights-create-new-resource.md).</span></span>

    ![Válassza ki az application insights-erőforrás][3]

    <span data-ttu-id="c832f-118">Miután hozzáadta az Application Insights-erőforrást, a instrumentation kulcsot, az adott erőforrás tárolja a nevű szolgáltatás konfigurációs beállításként **APPINSIGHTS_INSTRUMENTATIONKEY**.</span><span class="sxs-lookup"><span data-stu-id="c832f-118">Once you have added the Application Insights resource, the instrumentation key for that resource is stored as a service configuration setting with the name **APPINSIGHTS_INSTRUMENTATIONKEY**.</span></span> <span data-ttu-id="c832f-119">A konfigurációs beállítást, az egyes szolgáltatáskonfiguráció vagy a környezet módosíthatja.</span><span class="sxs-lookup"><span data-stu-id="c832f-119">You can change this configuration setting for each service configuration or environment.</span></span> <span data-ttu-id="c832f-120">Ehhez az szükséges, válassza ki a különböző konfigurációt a **szolgáltatáskonfiguráció** listában, és adja meg, hogy a konfiguráció új instrumentation kulcsot.</span><span class="sxs-lookup"><span data-stu-id="c832f-120">To do so, select a different configuration from the **Service Configuration** list and specify a new instrumentation key for that configuration.</span></span>

    ![Válassza ki a szolgáltatás konfigurációja][4]

    <span data-ttu-id="c832f-122">A **APPINSIGHTS_INSTRUMENTATIONKEY** konfigurációs beállítás segítségével a Visual Studio Application Insights-erőforrás információkkal közzététele során a diagnosztika-kiterjesztés konfigurálása.</span><span class="sxs-lookup"><span data-stu-id="c832f-122">The **APPINSIGHTS_INSTRUMENTATIONKEY** configuration setting is used by Visual Studio to configure the diagnostics extension with the appropriate Application Insights resource information during publishing.</span></span> <span data-ttu-id="c832f-123">A konfigurációs beállítás kényelmes módja a meghatározásának különböző szolgáltatáskonfiguráció különböző instrumentation kulcsokat.</span><span class="sxs-lookup"><span data-stu-id="c832f-123">The configuration setting is a convenient way of defining different instrumentation keys for different service configurations.</span></span> <span data-ttu-id="c832f-124">Visual Studio fog beállítás fordítása, és helyezze be a diagnosztika bővítmény nyilvános konfigurációjának a közzététel során.</span><span class="sxs-lookup"><span data-stu-id="c832f-124">Visual Studio will translate that setting and insert it into the diagnostics extension public configuration during the publish process.</span></span> <span data-ttu-id="c832f-125">A diagnosztika bővítmény konfigurálása a PowerShell segítségével egyszerűbbé, hogy csomag kimenetét a Visual Studio Application Insights instrumentation megfelelő kulccsal rendelkező nyilvános konfigurációs XML-t is tartalmaz.</span><span class="sxs-lookup"><span data-stu-id="c832f-125">To simplify the process of configuring the diagnostics extension with PowerShell, the package output from Visual Studio also contains the public configuration XML with the appropriate Application Insights instrumentation key.</span></span> <span data-ttu-id="c832f-126">A nyilvános konfigurációs fájlok jönnek létre a bővítmények mappában, és kövesse a minta *PaaSDiagnostics.&lt; RoleName&gt;. PubConfig.xml*.</span><span class="sxs-lookup"><span data-stu-id="c832f-126">The public config files are created in the Extensions folder and follow the pattern *PaaSDiagnostics.&lt;RoleName&gt;.PubConfig.xml*.</span></span> <span data-ttu-id="c832f-127">A PowerShell-alapú telepítések ebben a mintában segítségével minden egyes konfigurációs hozzárendelése egy szerepkörhöz.</span><span class="sxs-lookup"><span data-stu-id="c832f-127">Any PowerShell-based deployments can use this pattern to map each configuration to a role.</span></span>

4) <span data-ttu-id="c832f-128">Az összes teljesítményszámlálók és az Application Insights az Azure diagnostics ügynök által gyűjtött hiba szintű naplókat küldeni az Azure diagnostics megadásához engedélyezze a **diagnosztikai adatok küldése az Application Insights** lehetőséget.</span><span class="sxs-lookup"><span data-stu-id="c832f-128">To configure Azure diagnostics to send all performance counters and error-level logs collected by the Azure diagnostics agent to Application Insights, enable the **Send diagnostics data to Application Insights** option.</span></span> 

    <span data-ttu-id="c832f-129">Ha azt szeretné, hogy mely adatokról további konfigurálásához az Application insights szolgáltatásnak elküldött, manuálisan módosítania kell a *diagnostics.wadcfgx* fájl az egyes szerepkörökhöz.</span><span class="sxs-lookup"><span data-stu-id="c832f-129">If you want to further configure what data is sent to Application Insights, you must manually edit the *diagnostics.wadcfgx* file for each role.</span></span> <span data-ttu-id="c832f-130">Lásd: [konfigurálása Azure diagnosztikai adatokat küldeni a Application Insights](#configure-azure-diagnostics-to-send-data-to-application-insights) tudhat meg többet az beállításainak manuális frissítése.</span><span class="sxs-lookup"><span data-stu-id="c832f-130">See [Configure Azure Diagnostics to send data to Application Insights](#configure-azure-diagnostics-to-send-data-to-application-insights) to learn more about manually updating the configuration.</span></span>

<span data-ttu-id="c832f-131">Ha a felhőszolgáltatás Azure diagnosztikai adatok küldése az application insights van konfigurálva, ezután telepítheti azt az Azure-bA általában meggyőződött arról, hogy az Azure diagnostics bővítmény pedig engedélyezve legyen.</span><span class="sxs-lookup"><span data-stu-id="c832f-131">When the cloud service is configured to send Azure diagnostics data to application insights, you can deploy it to Azure normally, making sure the Azure diagnostics extension is enabled.</span></span> <span data-ttu-id="c832f-132">További információkért lásd: [közzététele a felhőalapú szolgáltatás, a Visual Studio használatával](../vs-azure-tools-publishing-a-cloud-service.md).</span><span class="sxs-lookup"><span data-stu-id="c832f-132">For more information, see  [Publishing a Cloud Service using Visual Studio](../vs-azure-tools-publishing-a-cloud-service.md).</span></span>  

## <a name="viewing-azure-diagnostics-data-in-application-insights"></a><span data-ttu-id="c832f-133">Az Azure diagnosztikai adatainak megtekintése az Application Insights</span><span class="sxs-lookup"><span data-stu-id="c832f-133">Viewing Azure diagnostics data in Application Insights</span></span>
<span data-ttu-id="c832f-134">Az Azure diagnosztikai telemetriai megjelennek a felhőalapú szolgáltatás számára megadott Application Insights-erőforrást.</span><span class="sxs-lookup"><span data-stu-id="c832f-134">The Azure diagnostic telemetry shows up in the Application Insights resource configured for your cloud service.</span></span>

<span data-ttu-id="c832f-135">Az Azure diagnostics napló típusok leképezés Application insights szolgáltatással kapcsolatos fogalmak, az alábbi módszerek:</span><span class="sxs-lookup"><span data-stu-id="c832f-135">Azure diagnostics log types map to Application Insights concepts in these ways:</span></span>

* <span data-ttu-id="c832f-136">Teljesítményszámlálók, egyéni metrikákat az Application Insightsban jelennek meg.</span><span class="sxs-lookup"><span data-stu-id="c832f-136">Performance counters are displayed as Custom Metrics in Application Insights.</span></span>
* <span data-ttu-id="c832f-137">Windows eseménynaplóiban keresse meg a nyomkövetési adatokat és az Application Insightsban egyéni események jelennek meg.</span><span class="sxs-lookup"><span data-stu-id="c832f-137">Windows Event Logs are shown as Traces and Custom Events in Application Insights.</span></span>
* <span data-ttu-id="c832f-138">Alkalmazás naplóit, ETW naplók és a diagnosztika infrastruktúra naplók jelennek meg az Application Insights nyomkövetési adatokat.</span><span class="sxs-lookup"><span data-stu-id="c832f-138">Application logs, ETW logs, and any Diagnostics Infrastructure logs are shown as Traces in Application Insights.</span></span>

<span data-ttu-id="c832f-139">Az Application Insights Azure diagnosztikai adatainak megtekintéséhez tegye a következők egyikét:</span><span class="sxs-lookup"><span data-stu-id="c832f-139">To view Azure diagnostics data in Application Insights, do one of the following:</span></span>

* <span data-ttu-id="c832f-140">Használjon [metrikaböngésző](../application-insights/app-insights-metrics-explorer.md) bármilyen egyéni teljesítményszámlálóit vagy számát is különböző típusú Windows-Eseménynapló eseményeinek megjelenítéséhez.</span><span class="sxs-lookup"><span data-stu-id="c832f-140">Use [Metrics explorer](../application-insights/app-insights-metrics-explorer.md) to visualize any custom performance counters or counts of different types of Windows Event Log events.</span></span>

    ![Egyéni metrikák a Metrikaböngészőben][5]

* <span data-ttu-id="c832f-142">Használjon [keresési](../application-insights/app-insights-diagnostic-search.md) között az Azure Diagnostics által küldött nyomkövetési napló keresése.</span><span class="sxs-lookup"><span data-stu-id="c832f-142">Use [Search](../application-insights/app-insights-diagnostic-search.md) to search across the  trace logs sent by Azure Diagnostics.</span></span> <span data-ttu-id="c832f-143">Például, ha a nem kezelt kivételt okozott összeomlás, és hasznosítsa újra a szerepkör, információ a kivételről megjelennek a *alkalmazás* csatornája *Windows-Eseménynapló*.</span><span class="sxs-lookup"><span data-stu-id="c832f-143">For example, if an unhandled exception has caused the role to crash and recycle, information about the exception shows up in the *Application* channel of *Windows Event Log*.</span></span> <span data-ttu-id="c832f-144">Használhatja a Keresés a teljes Veremkivonat a kivételhez megtalálásához a probléma okát, és nézze meg a Windows eseménynaplóban.</span><span class="sxs-lookup"><span data-stu-id="c832f-144">You can use search to look at the Windows Event Log error and get the full stack trace for the exception to help find the cause of the issue.</span></span>

    ![Keresési nyomkövetések][6]

## <a name="next-steps"></a><span data-ttu-id="c832f-146">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="c832f-146">Next Steps</span></span>
* <span data-ttu-id="c832f-147">[Az Application Insights SDK hozzáadása a felhőalapú szolgáltatás](../application-insights/app-insights-cloudservices.md) kérelmek, kivételek, függőségeit és bármilyen egyéni telemetriai adatokat küldeni az alkalmazásból.</span><span class="sxs-lookup"><span data-stu-id="c832f-147">[Add the Application Insights SDK to your cloud service](../application-insights/app-insights-cloudservices.md) to send data about requests, exceptions, dependencies, and any custom telemetry from your application.</span></span> <span data-ttu-id="c832f-148">Az Azure diagnosztikai adatokat együtt, ezt az információt kaphat a teljes rálátást az alkalmazás és a rendszer, mind az azonos Application Insights-erőforrás.</span><span class="sxs-lookup"><span data-stu-id="c832f-148">When combined with the Azure Diagnostics data, this information you can get a complete view of your application and system, all in the same Application Insight resource.</span></span>  

<!--Image references-->
[1]: ./media/cloud-services-dotnet-diagnostics-applicationinsights/solution-explorer-properties.png
[2]: ./media/cloud-services-dotnet-diagnostics-applicationinsights/role-designer-sendtoappinsights.png
[3]: ./media/cloud-services-dotnet-diagnostics-applicationinsights/select-appinsights-resource.png
[4]: ./media/cloud-services-dotnet-diagnostics-applicationinsights/role-designer-appinsights-serviceconfig.png
[5]: ./media/cloud-services-dotnet-diagnostics-applicationinsights/metrics-explorer-custom-metrics.png
[6]: ./media/cloud-services-dotnet-diagnostics-applicationinsights/search-windowseventlog-error.png
