---
title: "egy felhőalapú szolgáltatás aaaHow tooupdate |} Microsoft Docs"
description: "Ismerje meg, hogy miként tooupdate felhőalapú szolgáltatásokat az Azure-ban. Ismerje meg, hogyan egy frissítés egy felhőalapú szolgáltatás halad tooensure rendelkezésre állását."
services: cloud-services
documentationcenter: 
author: Thraka
manager: timlt
editor: 
ms.assetid: c6a8b5e6-5c99-454c-9911-5c7ae8d1af63
ms.service: cloud-services
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 04/19/2017
ms.author: adegeo
ms.openlocfilehash: 7e4c8bd46e51a555b4309ea8927d120e8efcf0ea
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/06/2017
---
# <a name="how-tooupdate-a-cloud-service"></a><span data-ttu-id="7d5f9-104">Hogyan tooupdate egy felhőalapú szolgáltatás</span><span class="sxs-lookup"><span data-stu-id="7d5f9-104">How tooupdate a cloud service</span></span>

<span data-ttu-id="7d5f9-105">Frissítés egy felhőalapú szolgáltatás, beleértve a szerepkörök és a vendég operációs rendszer, akkor a három lépésben.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-105">Updating a cloud service, including both its roles and guest OS, is a three step process.</span></span> <span data-ttu-id="7d5f9-106">Első lépésként hello bináris fájljait és konfigurációs fájljait hello új felhőalapú szolgáltatás, vagy fel kell tölteni, operációs rendszer verziója.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-106">First, hello binaries and configuration files for hello new cloud service or OS version must be uploaded.</span></span> <span data-ttu-id="7d5f9-107">A következő Azure számítási és hálózati erőforrásokat hello felhőszolgáltatás hello új felhőalapú szolgáltatás verzió hello követelmények alapján foglalja le.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-107">Next, Azure reserves compute and network resources for hello cloud service based on hello requirements of hello new cloud service version.</span></span> <span data-ttu-id="7d5f9-108">Végül Azure hajtja végre a működés közbeni frissítés tooincrementally frissítés hello bérlői toohello új verziója vagy a vendég operációs rendszer, a rendelkezésre állás megőrzése mellett.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-108">Finally, Azure performs a rolling upgrade tooincrementally update hello tenant toohello new version or guest OS, while preserving your availability.</span></span> <span data-ttu-id="7d5f9-109">A cikk ismerteti ezen utolsó lépésében – működés közbeni frissítés hello hello részleteit.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-109">This article discusses hello details of this last step – hello rolling upgrade.</span></span>

## <a name="update-an-azure-service"></a><span data-ttu-id="7d5f9-110">Frissítés az Azure-szolgáltatások</span><span class="sxs-lookup"><span data-stu-id="7d5f9-110">Update an Azure Service</span></span>
<span data-ttu-id="7d5f9-111">Azure rendezi a szerepkörpéldányok frissítési tartományok (UD) nevű logikai csoportosítással.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-111">Azure organizes your role instances into logical groupings called upgrade domains (UD).</span></span> <span data-ttu-id="7d5f9-112">Frissítési tartományok (UD), amelyeket logikai szerepkörpéldányt beállítani, hogy a csoport frissítése.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-112">Upgrade domains (UD) are logical sets of role instances that are updated as a group.</span></span>  <span data-ttu-id="7d5f9-113">Az Azure töröl egy felhőalapú szolgáltatás egy UD egyszerre, így példányok más UDs toocontinue szolgál a forgalom.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-113">Azure updates a cloud service one UD at a time, which allows instances in other UDs toocontinue serving traffic.</span></span>

<span data-ttu-id="7d5f9-114">frissítési tartományok száma hello alapértelmezett érték 5.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-114">hello default number of upgrade domains is 5.</span></span> <span data-ttu-id="7d5f9-115">Hello upgradeDomainCount attribútum belefoglalja hello szolgáltatás definíciós fájl (.csdef) egy másik hány frissítési tartományt is megadhat.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-115">You can specify a different number of upgrade domains by including hello upgradeDomainCount attribute in hello service’s definition file (.csdef).</span></span> <span data-ttu-id="7d5f9-116">További információ a hello upgradeDomainCount attribútum: [webrole típusról séma](https://msdn.microsoft.com/library/azure/gg557553.aspx) vagy [WorkerRole séma](https://msdn.microsoft.com/library/azure/gg557552.aspx).</span><span class="sxs-lookup"><span data-stu-id="7d5f9-116">For more information about hello upgradeDomainCount attribute, see [WebRole Schema](https://msdn.microsoft.com/library/azure/gg557553.aspx) or [WorkerRole Schema](https://msdn.microsoft.com/library/azure/gg557552.aspx).</span></span>

<span data-ttu-id="7d5f9-117">A szolgáltatás egy vagy több szerepkör helybeni frissítést hajt végre, amikor Azure frissítések beállítása szerint toohello frissítési tartomány toowhich tartoznak szerepkörpéldányt beállítani.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-117">When you perform an in-place update of one or more roles in your service, Azure updates sets of role instances according toohello upgrade domain toowhich they belong.</span></span> <span data-ttu-id="7d5f9-118">Azure online – összes hello-példány a megadott frissítési tartomány – leállítása, frissítése, állapotba hozza őket a biztonsági frissítések telepítését a következő tartomány hello helyezi.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-118">Azure updates all of hello instances in a given upgrade domain – stopping them, updating them, bringing them back on-line – then moves onto hello next domain.</span></span> <span data-ttu-id="7d5f9-119">Az aktuális hello futtató csak hello példányait leállításával frissítési tartomány, Azure gondoskodik arról, hogy egy frissítés hello szolgáltatást futtató lehető legkisebb hatással toohello történik.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-119">By stopping only hello instances running in hello current upgrade domain, Azure makes sure that an update occurs with hello least possible impact toohello running service.</span></span> <span data-ttu-id="7d5f9-120">További információkért lásd: [hogyan hello frissítés halad](#howanupgradeproceeds) című cikkben.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-120">For more information, see [How hello update proceeds](#howanupgradeproceeds) later in this article.</span></span>

> [!NOTE]
> <span data-ttu-id="7d5f9-121">Miközben hello feltételek **frissítése** és **frissítése** némileg eltérő jelentése hello Azure környezetben, akkor felcserélhetők a hello folyamatokat és az ebben a dokumentumban hello szolgáltatások leírása.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-121">While hello terms **update** and **upgrade** have slightly different meaning in hello context Azure, they can be used interchangeably for hello processes and descriptions of hello features in this document.</span></span>
>
>

<span data-ttu-id="7d5f9-122">A szolgáltatás definiálnia kell egy adott szerepkör frissített toobe helyben állásidő nélkül szerepet legalább két példánya.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-122">Your service must define at least two instances of a role for that role toobe updated in-place without downtime.</span></span> <span data-ttu-id="7d5f9-123">Ha hello szolgáltatást egy szerepkörnek csak egy példánya, a szolgáltatás nem lehet hello helybeni frissítése befejeződött.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-123">If hello service consists of only one instance of one role, your service will be unavailable until hello in-place update has finished.</span></span>

<span data-ttu-id="7d5f9-124">Ez a témakör ismerteti a hello Azure frissítésével kapcsolatos információkat a következő:</span><span class="sxs-lookup"><span data-stu-id="7d5f9-124">This topic covers hello following information about Azure updates:</span></span>

* [<span data-ttu-id="7d5f9-125">A szolgáltatás módosítása engedélyezett frissítése közben</span><span class="sxs-lookup"><span data-stu-id="7d5f9-125">Allowed service changes during an update</span></span>](#AllowedChanges)
* [<span data-ttu-id="7d5f9-126">Hogyan egy frissítés előrehalad az</span><span class="sxs-lookup"><span data-stu-id="7d5f9-126">How an upgrade proceeds</span></span>](#howanupgradeproceeds)
* [<span data-ttu-id="7d5f9-127">Frissítés visszaállítása</span><span class="sxs-lookup"><span data-stu-id="7d5f9-127">Rollback of an update</span></span>](#RollbackofanUpdate)
* [<span data-ttu-id="7d5f9-128">Az egy folyamatban lévő telepítés több mutating művelet kezdeményezése</span><span class="sxs-lookup"><span data-stu-id="7d5f9-128">Initiating multiple mutating operations on an ongoing deployment</span></span>](#multiplemutatingoperations)
* [<span data-ttu-id="7d5f9-129">Kapcsolódó szerepkörök frissítési tartományok között</span><span class="sxs-lookup"><span data-stu-id="7d5f9-129">Distribution of roles across upgrade domains</span></span>](#distributiondfroles)

<a name="AllowedChanges"></a>

## <a name="allowed-service-changes-during-an-update"></a><span data-ttu-id="7d5f9-130">A szolgáltatás módosítása engedélyezett frissítése közben</span><span class="sxs-lookup"><span data-stu-id="7d5f9-130">Allowed service changes during an update</span></span>
<span data-ttu-id="7d5f9-131">hello következő táblázatban hello engedélyezett módosítások tooa szolgáltatás frissítése közben:</span><span class="sxs-lookup"><span data-stu-id="7d5f9-131">hello following table shows hello allowed changes tooa service during an update:</span></span>

| <span data-ttu-id="7d5f9-132">Engedélyezi a módosításokat, toohosting, szolgáltatások és szerepkörök</span><span class="sxs-lookup"><span data-stu-id="7d5f9-132">Changes permitted toohosting, services, and roles</span></span> | <span data-ttu-id="7d5f9-133">Frissítés helyben</span><span class="sxs-lookup"><span data-stu-id="7d5f9-133">In-place update</span></span> | <span data-ttu-id="7d5f9-134">Előkészített (virtuális IP-címcsere)</span><span class="sxs-lookup"><span data-stu-id="7d5f9-134">Staged (VIP swap)</span></span> | <span data-ttu-id="7d5f9-135">Törölje és hozza létre</span><span class="sxs-lookup"><span data-stu-id="7d5f9-135">Delete and re-deploy</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="7d5f9-136">Operációs rendszer verziója</span><span class="sxs-lookup"><span data-stu-id="7d5f9-136">Operating system version</span></span> |<span data-ttu-id="7d5f9-137">Igen</span><span class="sxs-lookup"><span data-stu-id="7d5f9-137">Yes</span></span> |<span data-ttu-id="7d5f9-138">Igen</span><span class="sxs-lookup"><span data-stu-id="7d5f9-138">Yes</span></span> |<span data-ttu-id="7d5f9-139">Igen</span><span class="sxs-lookup"><span data-stu-id="7d5f9-139">Yes</span></span> |
| <span data-ttu-id="7d5f9-140">.NET megbízhatósági szintjét.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-140">.NET trust level</span></span> |<span data-ttu-id="7d5f9-141">Igen</span><span class="sxs-lookup"><span data-stu-id="7d5f9-141">Yes</span></span> |<span data-ttu-id="7d5f9-142">Igen</span><span class="sxs-lookup"><span data-stu-id="7d5f9-142">Yes</span></span> |<span data-ttu-id="7d5f9-143">Igen</span><span class="sxs-lookup"><span data-stu-id="7d5f9-143">Yes</span></span> |
| <span data-ttu-id="7d5f9-144">Virtuálisgép-méret<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="7d5f9-144">Virtual machine size<sup>1</sup></span></span> |<span data-ttu-id="7d5f9-145">Igen<sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="7d5f9-145">Yes<sup>2</sup></span></span> |<span data-ttu-id="7d5f9-146">Igen</span><span class="sxs-lookup"><span data-stu-id="7d5f9-146">Yes</span></span> |<span data-ttu-id="7d5f9-147">Igen</span><span class="sxs-lookup"><span data-stu-id="7d5f9-147">Yes</span></span> |
| <span data-ttu-id="7d5f9-148">Helyi tárolási beállításai</span><span class="sxs-lookup"><span data-stu-id="7d5f9-148">Local storage settings</span></span> |<span data-ttu-id="7d5f9-149">Csak növelése<sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="7d5f9-149">Increase only<sup>2</sup></span></span> |<span data-ttu-id="7d5f9-150">Igen</span><span class="sxs-lookup"><span data-stu-id="7d5f9-150">Yes</span></span> |<span data-ttu-id="7d5f9-151">Igen</span><span class="sxs-lookup"><span data-stu-id="7d5f9-151">Yes</span></span> |
| <span data-ttu-id="7d5f9-152">Hozzáadása vagy eltávolítása a szerepkörök szolgáltatás</span><span class="sxs-lookup"><span data-stu-id="7d5f9-152">Add or remove roles in a service</span></span> |<span data-ttu-id="7d5f9-153">Igen</span><span class="sxs-lookup"><span data-stu-id="7d5f9-153">Yes</span></span> |<span data-ttu-id="7d5f9-154">Igen</span><span class="sxs-lookup"><span data-stu-id="7d5f9-154">Yes</span></span> |<span data-ttu-id="7d5f9-155">Igen</span><span class="sxs-lookup"><span data-stu-id="7d5f9-155">Yes</span></span> |
| <span data-ttu-id="7d5f9-156">Egy adott szerepkör példányainak száma</span><span class="sxs-lookup"><span data-stu-id="7d5f9-156">Number of instances of a particular role</span></span> |<span data-ttu-id="7d5f9-157">Igen</span><span class="sxs-lookup"><span data-stu-id="7d5f9-157">Yes</span></span> |<span data-ttu-id="7d5f9-158">Igen</span><span class="sxs-lookup"><span data-stu-id="7d5f9-158">Yes</span></span> |<span data-ttu-id="7d5f9-159">Igen</span><span class="sxs-lookup"><span data-stu-id="7d5f9-159">Yes</span></span> |
| <span data-ttu-id="7d5f9-160">Vagy a szolgáltatás végpontjainak típus</span><span class="sxs-lookup"><span data-stu-id="7d5f9-160">Number or type of endpoints for a service</span></span> |<span data-ttu-id="7d5f9-161">Igen<sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="7d5f9-161">Yes<sup>2</sup></span></span> |<span data-ttu-id="7d5f9-162">Nem</span><span class="sxs-lookup"><span data-stu-id="7d5f9-162">No</span></span> |<span data-ttu-id="7d5f9-163">Igen</span><span class="sxs-lookup"><span data-stu-id="7d5f9-163">Yes</span></span> |
| <span data-ttu-id="7d5f9-164">Neveit és értékeit a konfigurációs beállítások</span><span class="sxs-lookup"><span data-stu-id="7d5f9-164">Names and values of configuration settings</span></span> |<span data-ttu-id="7d5f9-165">Igen</span><span class="sxs-lookup"><span data-stu-id="7d5f9-165">Yes</span></span> |<span data-ttu-id="7d5f9-166">Igen</span><span class="sxs-lookup"><span data-stu-id="7d5f9-166">Yes</span></span> |<span data-ttu-id="7d5f9-167">Igen</span><span class="sxs-lookup"><span data-stu-id="7d5f9-167">Yes</span></span> |
| <span data-ttu-id="7d5f9-168">Értékek (de nem nevek) a konfigurációs beállítások</span><span class="sxs-lookup"><span data-stu-id="7d5f9-168">Values (but not names) of configuration settings</span></span> |<span data-ttu-id="7d5f9-169">Igen</span><span class="sxs-lookup"><span data-stu-id="7d5f9-169">Yes</span></span> |<span data-ttu-id="7d5f9-170">Igen</span><span class="sxs-lookup"><span data-stu-id="7d5f9-170">Yes</span></span> |<span data-ttu-id="7d5f9-171">Igen</span><span class="sxs-lookup"><span data-stu-id="7d5f9-171">Yes</span></span> |
| <span data-ttu-id="7d5f9-172">Hozzáadhat új tanúsítványokat</span><span class="sxs-lookup"><span data-stu-id="7d5f9-172">Add new certificates</span></span> |<span data-ttu-id="7d5f9-173">Igen</span><span class="sxs-lookup"><span data-stu-id="7d5f9-173">Yes</span></span> |<span data-ttu-id="7d5f9-174">Igen</span><span class="sxs-lookup"><span data-stu-id="7d5f9-174">Yes</span></span> |<span data-ttu-id="7d5f9-175">Igen</span><span class="sxs-lookup"><span data-stu-id="7d5f9-175">Yes</span></span> |
| <span data-ttu-id="7d5f9-176">Meglévő tanúsítványok módosítása</span><span class="sxs-lookup"><span data-stu-id="7d5f9-176">Change existing certificates</span></span> |<span data-ttu-id="7d5f9-177">Igen</span><span class="sxs-lookup"><span data-stu-id="7d5f9-177">Yes</span></span> |<span data-ttu-id="7d5f9-178">Igen</span><span class="sxs-lookup"><span data-stu-id="7d5f9-178">Yes</span></span> |<span data-ttu-id="7d5f9-179">Igen</span><span class="sxs-lookup"><span data-stu-id="7d5f9-179">Yes</span></span> |
| <span data-ttu-id="7d5f9-180">Új kód telepítése</span><span class="sxs-lookup"><span data-stu-id="7d5f9-180">Deploy new code</span></span> |<span data-ttu-id="7d5f9-181">Igen</span><span class="sxs-lookup"><span data-stu-id="7d5f9-181">Yes</span></span> |<span data-ttu-id="7d5f9-182">Igen</span><span class="sxs-lookup"><span data-stu-id="7d5f9-182">Yes</span></span> |<span data-ttu-id="7d5f9-183">Igen</span><span class="sxs-lookup"><span data-stu-id="7d5f9-183">Yes</span></span> |

<span data-ttu-id="7d5f9-184"><sup>1</sup> méretének módosítása korlátozott hello felhőszolgáltatás elérhető méretek toohello részhalmaza.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-184"><sup>1</sup> Size change limited toohello subset of sizes available for hello cloud service.</span></span>

<span data-ttu-id="7d5f9-185"><sup>2</sup> szükséges Azure SDK 1.5 vagy újabb verzió.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-185"><sup>2</sup> Requires Azure SDK 1.5 or later versions.</span></span>

> [!WARNING]
> <span data-ttu-id="7d5f9-186">Hello virtuális gép méretének módosítása törlődnek a helyi adatokat.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-186">Changing hello virtual machine size will destroy local data.</span></span>
>
>

<span data-ttu-id="7d5f9-187">a következő elemek hello frissítés közben nem támogatott:</span><span class="sxs-lookup"><span data-stu-id="7d5f9-187">hello following items are not supported during an update:</span></span>

* <span data-ttu-id="7d5f9-188">Egy szerepkör hello nevét módosítani.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-188">Changing hello name of a role.</span></span> <span data-ttu-id="7d5f9-189">Távolítsa el, és adja hozzá a következő új néven hello hello szerepkör.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-189">Remove and then add hello role with hello new name.</span></span>
* <span data-ttu-id="7d5f9-190">Hello frissítési tartományok számának módosításához.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-190">Changing of hello Upgrade Domain count.</span></span>
* <span data-ttu-id="7d5f9-191">A helyi erőforrások hello hello méretének csökkentése.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-191">Decreasing hello size of hello local resources.</span></span>

<span data-ttu-id="7d5f9-192">Ha más frissítések tooyour szolgáltatás definíciós, például a helyi erőforrás hello méretének csökkentése ehelyett végezze el a VIP-csere frissítése.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-192">If you are making other updates tooyour service's definition, such as decreasing hello size of local resource, you must perform a VIP swap update instead.</span></span> <span data-ttu-id="7d5f9-193">További információkért lásd: [felcserélése telepítési](https://msdn.microsoft.com/library/azure/ee460814.aspx).</span><span class="sxs-lookup"><span data-stu-id="7d5f9-193">For more information, see [Swap Deployment](https://msdn.microsoft.com/library/azure/ee460814.aspx).</span></span>

<a name="howanupgradeproceeds"></a>

## <a name="how-an-upgrade-proceeds"></a><span data-ttu-id="7d5f9-194">Hogyan egy frissítés előrehalad az</span><span class="sxs-lookup"><span data-stu-id="7d5f9-194">How an upgrade proceeds</span></span>
<span data-ttu-id="7d5f9-195">Eldöntheti, hogy kívánja-e tooupdate valamennyi hello szerepkörök a szolgáltatás és egyetlen szerepkör hello szolgáltatásban.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-195">You can decide whether you want tooupdate all of hello roles in your service or a single role in hello service.</span></span> <span data-ttu-id="7d5f9-196">Mindkét esetben minden frissítés alatt áll, és ugyanahhoz az első frissítési tartomány toohello szerepkör példányainak leállt, frissítése, és automatikusan visszaáll online állapotba.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-196">In either case, all instances of each role that is being upgraded and belong toohello first upgrade domain are stopped, upgraded, and brought back online.</span></span> <span data-ttu-id="7d5f9-197">Ha azok ismét online, hello hello második frissítési tartomány-példány leállt, frissítése, és kerül ismét online állapotba.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-197">Once they are back online, hello instances in hello second upgrade domain are stopped, upgraded, and brought back online.</span></span> <span data-ttu-id="7d5f9-198">Egy felhőalapú szolgáltatás lehet aktív egyszerre legfeljebb egy frissítés.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-198">A cloud service can have at most one upgrade active at a time.</span></span> <span data-ttu-id="7d5f9-199">hello frissítés mindig hello hello felhőalapú szolgáltatás legújabb verziója alapján történik.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-199">hello upgrade is always performed against hello latest version of hello cloud service.</span></span>

<span data-ttu-id="7d5f9-200">hello következő diagram azt ábrázolja, hogyan hello frissítés előrehalad, ha frissíti az összes hello szerepkörök hello szolgáltatásban:</span><span class="sxs-lookup"><span data-stu-id="7d5f9-200">hello following diagram illustrates how hello upgrade proceeds if you are upgrading all of hello roles in hello service:</span></span>

<span data-ttu-id="7d5f9-201">![Service frissítése](media/cloud-services-update-azure-service/IC345879.png "service frissítése")</span><span class="sxs-lookup"><span data-stu-id="7d5f9-201">![Upgrade service](media/cloud-services-update-azure-service/IC345879.png "Upgrade service")</span></span>

<span data-ttu-id="7d5f9-202">A következő diagram azt ábrázolja, hogyan lehet hello frissítés, hogy csak egy szerepkör frissíti:</span><span class="sxs-lookup"><span data-stu-id="7d5f9-202">This next diagram illustrates how hello update proceeds if you are upgrading only a single role:</span></span>

<span data-ttu-id="7d5f9-203">![Frissítési szerepkör](media/cloud-services-update-azure-service/IC345880.png "frissítési szerepkör")</span><span class="sxs-lookup"><span data-stu-id="7d5f9-203">![Upgrade role](media/cloud-services-update-azure-service/IC345880.png "Upgrade role")</span></span>  

<span data-ttu-id="7d5f9-204">Az automatikus frissítése közben hello Azure Fabric Controller rendszeresen kiértékeli hello cloud service toodetermine hello állapotát, amikor az biztonságos toowalk hello következő UD.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-204">During an automatic update, hello Azure Fabric Controller periodically evaluates hello health of hello cloud service toodetermine when it’s safe toowalk hello next UD.</span></span> <span data-ttu-id="7d5f9-205">Az állapot kiértékelésekor szerepkör alapon történik, és úgy ítéli meg, csak a példányok hello legújabb verzió (azaz példányok, amely már telefonon UDs).</span><span class="sxs-lookup"><span data-stu-id="7d5f9-205">This health evaluation is performed on a per-role basis and considers only instances in hello latest version (i.e. instances from UDs that have already been walked).</span></span> <span data-ttu-id="7d5f9-206">Ellenőrzi, hogy a szerepkörpéldányok, az egyes szerepkörökhöz minimális száma elérte a kielégítő terminál állapotba.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-206">It verifies that a minimum number of role instances, for each role, have achieved a satisfactory terminal state.</span></span>

### <a name="role-instance-start-timeout"></a><span data-ttu-id="7d5f9-207">Szerepkör példány Start időtúllépés</span><span class="sxs-lookup"><span data-stu-id="7d5f9-207">Role Instance Start Timeout</span></span>
<span data-ttu-id="7d5f9-208">hello Fabric Controller minden egyes szerepkör-példány tooreach elindítva állapotának 30 percet várakozik.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-208">hello Fabric Controller will wait 30 minutes for each role instance tooreach a Started state.</span></span> <span data-ttu-id="7d5f9-209">Ha hello időkorlát tartama eltelte után hello Fabric Controller továbbra is tovább szerepkörpéldányt toohello érdekében.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-209">If hello timeout duration elapses, hello Fabric Controller will continue walking toohello next role instance.</span></span>

### <a name="impact-toodrive-data-during-cloud-service-upgrades"></a><span data-ttu-id="7d5f9-210">A felhőalapú szolgáltatás frissítéskor toodrive adatait</span><span class="sxs-lookup"><span data-stu-id="7d5f9-210">Impact toodrive data during Cloud Service upgrades</span></span>

<span data-ttu-id="7d5f9-211">A szolgáltatás egy egypéldányos toomultiple példányokból frissítésekor a szolgáltatás kerül a hello frissítés végrehajtása miatt toohello módon Azure szolgáltatás frissítése közben.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-211">When upgrading a service from a single instance toomultiple instances your service will be brought down while hello upgrade is performed due toohello way Azure upgrades services.</span></span> <span data-ttu-id="7d5f9-212">hello szolgáltatás szolgáltatásiszint-szerződés garanciavállaló szolgáltatás rendelkezésre állása csak akkor, ha egynél több példánya telepített tooservices.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-212">hello service level agreement guaranteeing service availability only applies tooservices that are deployed with more than one instance.</span></span> <span data-ttu-id="7d5f9-213">hello alábbi lista ismerteti hogyan befolyásolják az egyes Azure-szolgáltatások frissítési forgatókönyv minden olyan meghajtó hello adatokat:</span><span class="sxs-lookup"><span data-stu-id="7d5f9-213">hello following list describes how hello data on each drive is affected by each Azure service upgrade scenario:</span></span>

|<span data-ttu-id="7d5f9-214">Forgatókönyv</span><span class="sxs-lookup"><span data-stu-id="7d5f9-214">Scenario</span></span>|<span data-ttu-id="7d5f9-215">C meghajtó</span><span class="sxs-lookup"><span data-stu-id="7d5f9-215">C Drive</span></span>|<span data-ttu-id="7d5f9-216">D meghajtó</span><span class="sxs-lookup"><span data-stu-id="7d5f9-216">D Drive</span></span>|<span data-ttu-id="7d5f9-217">E meghajtó</span><span class="sxs-lookup"><span data-stu-id="7d5f9-217">E Drive</span></span>|
|--------|-------|-------|-------|
|<span data-ttu-id="7d5f9-218">Virtuális gép újraindítása</span><span class="sxs-lookup"><span data-stu-id="7d5f9-218">VM reboot</span></span>|<span data-ttu-id="7d5f9-219">Megőrzi</span><span class="sxs-lookup"><span data-stu-id="7d5f9-219">Preserved</span></span>|<span data-ttu-id="7d5f9-220">Megőrzi</span><span class="sxs-lookup"><span data-stu-id="7d5f9-220">Preserved</span></span>|<span data-ttu-id="7d5f9-221">Megőrzi</span><span class="sxs-lookup"><span data-stu-id="7d5f9-221">Preserved</span></span>|
|<span data-ttu-id="7d5f9-222">Portál újraindítás</span><span class="sxs-lookup"><span data-stu-id="7d5f9-222">Portal reboot</span></span>|<span data-ttu-id="7d5f9-223">Megőrzi</span><span class="sxs-lookup"><span data-stu-id="7d5f9-223">Preserved</span></span>|<span data-ttu-id="7d5f9-224">Megőrzi</span><span class="sxs-lookup"><span data-stu-id="7d5f9-224">Preserved</span></span>|<span data-ttu-id="7d5f9-225">Megsemmisül</span><span class="sxs-lookup"><span data-stu-id="7d5f9-225">Destroyed</span></span>|
|<span data-ttu-id="7d5f9-226">Lemezkép-visszaállítási portál</span><span class="sxs-lookup"><span data-stu-id="7d5f9-226">Portal reimage</span></span>|<span data-ttu-id="7d5f9-227">Megőrzi</span><span class="sxs-lookup"><span data-stu-id="7d5f9-227">Preserved</span></span>|<span data-ttu-id="7d5f9-228">Megsemmisül</span><span class="sxs-lookup"><span data-stu-id="7d5f9-228">Destroyed</span></span>|<span data-ttu-id="7d5f9-229">Megsemmisül</span><span class="sxs-lookup"><span data-stu-id="7d5f9-229">Destroyed</span></span>|
|<span data-ttu-id="7d5f9-230">Frissítés helyben</span><span class="sxs-lookup"><span data-stu-id="7d5f9-230">In-Place Upgrade</span></span>|<span data-ttu-id="7d5f9-231">Megőrzi</span><span class="sxs-lookup"><span data-stu-id="7d5f9-231">Preserved</span></span>|<span data-ttu-id="7d5f9-232">Megőrzi</span><span class="sxs-lookup"><span data-stu-id="7d5f9-232">Preserved</span></span>|<span data-ttu-id="7d5f9-233">Megsemmisül</span><span class="sxs-lookup"><span data-stu-id="7d5f9-233">Destroyed</span></span>|
|<span data-ttu-id="7d5f9-234">Csomópont áttelepítése</span><span class="sxs-lookup"><span data-stu-id="7d5f9-234">Node migration</span></span>|<span data-ttu-id="7d5f9-235">Megsemmisül</span><span class="sxs-lookup"><span data-stu-id="7d5f9-235">Destroyed</span></span>|<span data-ttu-id="7d5f9-236">Megsemmisül</span><span class="sxs-lookup"><span data-stu-id="7d5f9-236">Destroyed</span></span>|<span data-ttu-id="7d5f9-237">Megsemmisül</span><span class="sxs-lookup"><span data-stu-id="7d5f9-237">Destroyed</span></span>|

<span data-ttu-id="7d5f9-238">Vegye figyelembe, hogy, a fenti listában hello, hello E: meghajtó hello szerepkör gyökérmeghajtóján jelöli, nem változtatható lehet.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-238">Note that, in hello above list, hello E: drive represents hello role’s root drive, and should not be hard-coded.</span></span> <span data-ttu-id="7d5f9-239">Ehelyett használja a hello **RoleRoot %** környezeti változó toorepresent hello meghajtó.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-239">Instead, use hello **%RoleRoot%** environment variable toorepresent hello drive.</span></span>

<span data-ttu-id="7d5f9-240">toominimize hello állásidő egy egypéldányos szolgáltatás frissítésekor központi telepítése egy új többpéldányos szolgáltatás toohello átmeneti kiszolgálón, és végezze el a virtuális IP-címcsere.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-240">toominimize hello downtime when upgrading a single-instance service, deploy a new multi-instance service toohello staging server and perform a VIP swap.</span></span>

<a name="RollbackofanUpdate"></a>

## <a name="rollback-of-an-update"></a><span data-ttu-id="7d5f9-241">Frissítés visszaállítása</span><span class="sxs-lookup"><span data-stu-id="7d5f9-241">Rollback of an update</span></span>
<span data-ttu-id="7d5f9-242">Azure services kezelése frissítés közben azáltal, hogy egy szolgáltatás, további műveleteket kezdeményezheti által hello Azure Fabric Controller hello kezdeti frissítési kérelem elfogadása után rugalmasságot biztosít.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-242">Azure provides flexibility in managing services during an update by letting you initiate additional operations on a service, after hello initial update request is accepted by hello Azure Fabric Controller.</span></span> <span data-ttu-id="7d5f9-243">Csak akkor hajtható végre a visszaállítást, ha egy frissítés (konfigurációváltozás), vagy frissítés hello **folyamatban** állapot hello üzemelő példányon.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-243">A rollback can only be performed when an update (configuration change) or upgrade is in hello **in progress** state on hello deployment.</span></span> <span data-ttu-id="7d5f9-244">Egy frissítést, illetve a mindaddig, amíg nincs hello szolgáltatást, amely még nem frissített toohello új verziója legalább egy példánya tekinthető a toobe folyamatban.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-244">An update or upgrade is considered toobe in-progress as long as there is at least one instance of hello service which has not yet been updated toohello new version.</span></span> <span data-ttu-id="7d5f9-245">tootest, hogy visszaállítás történt engedélyezett, ellenőrizze hello RollbackAllowed jelző, által visszaadott hello értékének [első központi telepítési](https://msdn.microsoft.com/library/azure/ee460804.aspx) és [felhőalapú szolgáltatás tulajdonságainak beolvasása](https://msdn.microsoft.com/library/azure/ee460806.aspx) műveletek, tootrue van beállítva.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-245">tootest whether a rollback is allowed, check hello value of hello RollbackAllowed flag, returned by [Get Deployment](https://msdn.microsoft.com/library/azure/ee460804.aspx) and [Get Cloud Service Properties](https://msdn.microsoft.com/library/azure/ee460806.aspx) operations, is set tootrue.</span></span>

> [!NOTE]
> <span data-ttu-id="7d5f9-246">A csak teszi logika toocall visszaállítási egy **helyben** frissítési vagy verziófrissítési, mert a VIP-csere frissítéseket tartalmaz, amely a szolgáltatás egy teljes futó példányát cseréje egy másik.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-246">It only makes sense toocall Rollback on an **in-place** update or upgrade because VIP swap upgrades involve replacing one entire running instance of your service with another.</span></span>
>
>

<span data-ttu-id="7d5f9-247">A folyamatban lévő frissítés visszaállításának követő hatások hello üzemelő példányon hello rendelkezik:</span><span class="sxs-lookup"><span data-stu-id="7d5f9-247">Rollback of an in-progress update has hello following effects on hello deployment:</span></span>

* <span data-ttu-id="7d5f9-248">Bármely szerepkörpéldányok, amelyen korábban még nem frissített vagy frissített toohello új verziója nem frissített vagy frissítve, mert azokat a példányokat már fut a célverzió hello hello szolgáltatást.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-248">Any role instances which had not yet been updated or upgraded toohello new version are not updated or upgraded, because those instances are already running hello target version of hello service.</span></span>
* <span data-ttu-id="7d5f9-249">A szerepkör példánya, amelyek már frissültek vagy frissített toohello hello szolgáltatás csomag új verziója (\*.cspkg) fájl vagy hello szolgáltatás konfigurációs (\*.cscfg) fájl (mind) visszatért toohello frissítés előtti verziója Ezeket a fájlokat.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-249">Any role instances which had already been updated or upgraded toohello new version of hello service package (\*.cspkg) file or hello service configuration (\*.cscfg) file (or both files) are reverted toohello pre-upgrade version of these files.</span></span>

<span data-ttu-id="7d5f9-250">Ez gyakorlatilag által biztosított hello a következő funkciókat:</span><span class="sxs-lookup"><span data-stu-id="7d5f9-250">This functionally is provided by hello following features:</span></span>

* <span data-ttu-id="7d5f9-251">Hello [visszaállítási módosítása vagy frissítése](https://msdn.microsoft.com/library/azure/hh403977.aspx) művelet, amely nem hívható meg a konfiguráció frissítése a (meghívásával indított [telepítési konfiguráció módosítása](https://msdn.microsoft.com/library/azure/ee460809.aspx)) vagy a verziófrissítésre (meghívásával indított [ Frissítés telepítési](https://msdn.microsoft.com/library/azure/ee460793.aspx)), amíg nincs legalább egy példány hello szolgáltatásban amely még nincs frissítve toohello új verziója.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-251">hello [Rollback Update Or Upgrade](https://msdn.microsoft.com/library/azure/hh403977.aspx) operation, which can be called on a configuration update (triggered by calling [Change Deployment Configuration](https://msdn.microsoft.com/library/azure/ee460809.aspx)) or an upgrade (triggered by calling [Upgrade Deployment](https://msdn.microsoft.com/library/azure/ee460793.aspx)) as long as there is at least one instance in hello service which has not yet been updated toohello new version.</span></span>
* <span data-ttu-id="7d5f9-252">Zárolt elem és hello RollbackAllowed elem, hello adott válasz törzsének hello részeként visszaküldött hello [első központi telepítési](https://msdn.microsoft.com/library/azure/ee460804.aspx) és [felhőalapú szolgáltatás tulajdonságainak beolvasása](https://msdn.microsoft.com/library/azure/ee460806.aspx) műveletek:</span><span class="sxs-lookup"><span data-stu-id="7d5f9-252">hello Locked element and hello RollbackAllowed element, which are returned as part of hello response body of hello [Get Deployment](https://msdn.microsoft.com/library/azure/ee460804.aspx) and [Get Cloud Service Properties](https://msdn.microsoft.com/library/azure/ee460806.aspx) operations:</span></span>

  1. <span data-ttu-id="7d5f9-253">hello zárolt elem lehetővé teszi toodetect mutating művelet a megadott központi telepítés keletkezett.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-253">hello Locked element allows you toodetect when a mutating operation can be invoked on a given deployment.</span></span>
  2. <span data-ttu-id="7d5f9-254">hello RollbackAllowed elem lehetővé teszi a toodetect, amikor hello [visszaállítás frissítés vagy frissítési](https://msdn.microsoft.com/library/azure/hh403977.aspx) művelet nem hívható meg egy adott központi telepítés a.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-254">hello RollbackAllowed element allows you toodetect when hello [Rollback Update Or Upgrade](https://msdn.microsoft.com/library/azure/hh403977.aspx) operation can be called on a given deployment.</span></span>

  <span data-ttu-id="7d5f9-255">A sorrend visszaállítás tooperform nincs toocheck hello zárolt, mind az RollbackAllowed elemek hello.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-255">In order tooperform a rollback, you do not have toocheck both hello Locked and hello RollbackAllowed elements.</span></span> <span data-ttu-id="7d5f9-256">Elegendő, ha tooconfirm, hogy RollbackAllowed tootrue van beállítva.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-256">It suffices tooconfirm that RollbackAllowed is set tootrue.</span></span> <span data-ttu-id="7d5f9-257">Ezek az elemek csak adott vissza, ha ezek a módszerek hívják hello kérelem fejléce túl állítsa be a "x-ms-version: 2011-10-01" vagy egy újabb verziója.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-257">These elements are only returned if these methods are invoked by using hello request header set too“x-ms-version: 2011-10-01” or a later version.</span></span> <span data-ttu-id="7d5f9-258">Versioning fejlécek kapcsolatos további információkért lásd: [Service Management Versioning](https://msdn.microsoft.com/library/azure/gg592580.aspx).</span><span class="sxs-lookup"><span data-stu-id="7d5f9-258">For more information about versioning headers, see [Service Management Versioning](https://msdn.microsoft.com/library/azure/gg592580.aspx).</span></span>

<span data-ttu-id="7d5f9-259">Vannak olyan helyzetek, ahol egy frissítést a visszaállítás vagy a frissítés nem támogatott, ezek a következők:</span><span class="sxs-lookup"><span data-stu-id="7d5f9-259">There are some situations where a rollback of an update or upgrade is not supported, these are as follows:</span></span>

* <span data-ttu-id="7d5f9-260">Helyi erőforrások - csökkenése Ha hello frissítés növekszik hello helyi erőforrások szerepkör hello Azure platform nem engedélyezi a visszaállítása.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-260">Reduction in local resources - If hello update increases hello local resources for a role hello Azure platform does not allow rolling back.</span></span>
* <span data-ttu-id="7d5f9-261">Sablonkérelem -, ha hello frissítés volt a művelet már nem lehet vertikális rendelkezik-e elegendő számítási kvóta toocomplete hello visszaállítási művelet.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-261">Quota limitations - If hello update was a scale down operation you may no longer have sufficient compute quota toocomplete hello rollback operation.</span></span> <span data-ttu-id="7d5f9-262">Minden Azure-előfizetésre vonatkozó kvóta hello mag, amely toothat előfizetéshez tartozó összes üzemeltetett szolgáltatás által igénybe vehető maximális számát megadó rendelkezik.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-262">Each Azure subscription has a quota associated with it that specifies hello maximum number of cores which can be consumed by all hosted services that belong toothat subscription.</span></span> <span data-ttu-id="7d5f9-263">A visszaállítás egy adott frissítés végrehajtása után kerülne az előfizetés keresztül kvóta, majd a visszaállítás nem engedélyezhető.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-263">If performing a rollback of a given update would put your subscription over quota then that a rollback will not be enabled.</span></span>
* <span data-ttu-id="7d5f9-264">Versenyhelyzet - Ha hello kezdeti frissítése befejeződött, a visszaállítás nincs lehetőség.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-264">Race condition - If hello initial update has completed, a rollback is not possible.</span></span>

<span data-ttu-id="7d5f9-265">Ha frissítési hello visszaállítási hasznosak lehetnek példa: Ha hello használ [frissítés telepítési](https://msdn.microsoft.com/library/azure/ee460793.aspx) manuális mód toocontrol hello sebesség, amellyel egy fő helybeni frissítés tooyour Azure üzemeltetett szolgáltatásban futó művelete megkezdődött.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-265">An example of when hello rollback of an update might be useful is if you are using hello [Upgrade Deployment](https://msdn.microsoft.com/library/azure/ee460793.aspx) operation in manual mode toocontrol hello rate at which a major in-place upgrade tooyour Azure hosted service is rolled out.</span></span>

<span data-ttu-id="7d5f9-266">Hello bevezetés hello frissítés alatt hívható [frissítés telepítési](https://msdn.microsoft.com/library/azure/ee460793.aspx) manuális üzemmódban és a frissítési tartományok toowalk megkezdéséhez.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-266">During hello rollout of hello upgrade you call [Upgrade Deployment](https://msdn.microsoft.com/library/azure/ee460793.aspx) in manual mode and begin toowalk upgrade domains.</span></span> <span data-ttu-id="7d5f9-267">Bármikor, ahogy figyeli hello frissítését, vegye figyelembe hello első frissítési tartományt, amely megvizsgálja az egyes szerepkörpéldányokat válaszol, ha hívása hello [visszaállítás frissítés vagy frissítési](https://msdn.microsoft.com/library/azure/hh403977.aspx) művelet hello üzemelő példányon, amely hagyja változatlanul hello példányok kellett még nincs frissítve, és volt-e a visszavonás-példányok toohello előző szolgáltatáscsomag és konfiguráció frissítése.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-267">If at some point, as you monitor hello upgrade, you note some role instances in hello first upgrade domains that you examine have become unresponsive, you can call hello [Rollback Update Or Upgrade](https://msdn.microsoft.com/library/azure/hh403977.aspx) operation on hello deployment, which will leave untouched hello instances which had not yet been upgraded and rollback instances which had been upgraded toohello previous service package and configuration.</span></span>

<a name="multiplemutatingoperations"></a>

## <a name="initiating-multiple-mutating-operations-on-an-ongoing-deployment"></a><span data-ttu-id="7d5f9-268">Az egy folyamatban lévő telepítés több mutating művelet kezdeményezése</span><span class="sxs-lookup"><span data-stu-id="7d5f9-268">Initiating multiple mutating operations on an ongoing deployment</span></span>
<span data-ttu-id="7d5f9-269">Bizonyos esetekben érdemes lehet tooinitiate több egyidejű mutating műveletek egy folyamatban lévő telepítés.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-269">In some cases you may want tooinitiate multiple simultaneous mutating operations on an ongoing deployment.</span></span> <span data-ttu-id="7d5f9-270">Például előfordulhat, hogy hajtsa végre a szolgáltatás frissítése és a szolgáltatásban, ez a frissítés van megkezdődött, amíg meg toomake néhány változás, például tooroll hello biztonsági frissítés, egy másik frissítés vagy hello is törli.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-270">For example, you may perform a service update and, while that update is being rolled out across your service, you want toomake some change, e.g. tooroll hello update back, apply a different update, or even delete hello deployment.</span></span> <span data-ttu-id="7d5f9-271">Egy esetet, ahol erre akkor lehet szükség, ha a szolgáltatás frissítése egy frissített szerepkör példány toorepeatedly összeomlási hatására buggy kódot tartalmazza.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-271">A case in which this might be necessary is if a service upgrade contains buggy code which causes an upgraded role instance toorepeatedly crash.</span></span> <span data-ttu-id="7d5f9-272">Ebben az esetben hello Azure Fabric Controller nem lesz képes toomake folyamatban van az alkalmazásában, amelyet frissíteni, mivel a példányok hello a frissített tartományban elegendő számú kifogástalan.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-272">In this case, hello Azure Fabric Controller will not be able toomake progress in applying that upgrade because an insufficient number of instances in hello upgraded domain are healthy.</span></span> <span data-ttu-id="7d5f9-273">Ebben az állapotban a hivatkozott tooas egy *elakadt a központi telepítési*.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-273">This state is referred tooas a *stuck deployment*.</span></span> <span data-ttu-id="7d5f9-274">Hello telepítési visszaállítása hello frissítés, vagy egy friss frissítés alkalmazása sikertelen egy hello tetején keresztül is követően.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-274">You can unstick hello deployment by rolling back hello update or applying a fresh update over top of hello failing one.</span></span>

<span data-ttu-id="7d5f9-275">Miután hello kezdeti kérés tooupdate vagy frissítési hello szolgáltatás hello Azure Fabric Controller kapott, elindíthatja a későbbi szótárból elemeinek módosítása műveletek.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-275">Once hello initial request tooupdate or upgrade hello service has been received by hello Azure Fabric Controller, you can start subsequent mutating operations.</span></span> <span data-ttu-id="7d5f9-276">Ez azt jelenti, hogy nincs a hello kezdeti művelet toocomplete toowait egy másik mutating művelet megkezdése előtt.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-276">That is, you do not have toowait for hello initial operation toocomplete before you can start another mutating operation.</span></span>

<span data-ttu-id="7d5f9-277">A második-frissítési művelet kezdeményezése, amíg hello első frissítés folyamatban lévő hasonló toohello visszaállítási művelet fogja elvégezni.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-277">Initiating a second update operation while hello first update is ongoing will perform similar toohello rollback operation.</span></span> <span data-ttu-id="7d5f9-278">Ha hello második frissítés automatikus üzemmódban, hello első frissítési tartomány azonnal frissíti, akkor esetleg nem kapcsolódik a hello több frissítési tartományt vezető tooinstances azonos időpontra történő.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-278">If hello second update is in automatic mode, hello first upgrade domain will be upgraded immediately, possibly leading tooinstances from multiple upgrade domains being offline at hello same point in time.</span></span>

<span data-ttu-id="7d5f9-279">hello szótárból elemeinek módosítása műveletek a következők: [telepítési konfiguráció módosítása](https://msdn.microsoft.com/library/azure/ee460809.aspx), [frissítés telepítési](https://msdn.microsoft.com/library/azure/ee460793.aspx), [központi telepítésének állapota](https://msdn.microsoft.com/library/azure/ee460808.aspx), [törlése Központi telepítési](https://msdn.microsoft.com/library/azure/ee460815.aspx), és [visszaállítási vagy Verziófrissítésekor](https://msdn.microsoft.com/library/azure/hh403977.aspx).</span><span class="sxs-lookup"><span data-stu-id="7d5f9-279">hello mutating operations are as follows: [Change Deployment Configuration](https://msdn.microsoft.com/library/azure/ee460809.aspx), [Upgrade Deployment](https://msdn.microsoft.com/library/azure/ee460793.aspx), [Update Deployment Status](https://msdn.microsoft.com/library/azure/ee460808.aspx), [Delete Deployment](https://msdn.microsoft.com/library/azure/ee460815.aspx), and [Rollback Update Or Upgrade](https://msdn.microsoft.com/library/azure/hh403977.aspx).</span></span>

<span data-ttu-id="7d5f9-280">Két műveletek [első központi telepítési](https://msdn.microsoft.com/library/azure/ee460804.aspx) és [felhőalapú szolgáltatás tulajdonságainak beolvasása](https://msdn.microsoft.com/library/azure/ee460806.aspx), térjen vissza a hello zárolt jelzőt, amely vizsgálni toodetermine is lehet, hogy mutating művelet a megadott központi telepítés is elindítható.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-280">Two operations, [Get Deployment](https://msdn.microsoft.com/library/azure/ee460804.aspx) and [Get Cloud Service Properties](https://msdn.microsoft.com/library/azure/ee460806.aspx), return hello Locked flag which can be examined toodetermine whether a mutating operation can be invoked on a given deployment.</span></span>

<span data-ttu-id="7d5f9-281">Az order toocall hello verzióban az alábbi módszerek hello zárolt jelző adja vissza, amely be kell kérelem fejléce túl "x-ms-version: 2011-10-01" vagy egy újabb verziója.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-281">In order toocall hello version of these methods which returns hello Locked flag, you must set request header too“x-ms-version: 2011-10-01” or a later.</span></span> <span data-ttu-id="7d5f9-282">Versioning fejlécek kapcsolatos további információkért lásd: [Service Management Versioning](https://msdn.microsoft.com/library/azure/gg592580.aspx).</span><span class="sxs-lookup"><span data-stu-id="7d5f9-282">For more information about versioning headers, see [Service Management Versioning](https://msdn.microsoft.com/library/azure/gg592580.aspx).</span></span>

<a name="distributiondfroles"></a>

## <a name="distribution-of-roles-across-upgrade-domains"></a><span data-ttu-id="7d5f9-283">Kapcsolódó szerepkörök frissítési tartományok között</span><span class="sxs-lookup"><span data-stu-id="7d5f9-283">Distribution of roles across upgrade domains</span></span>
<span data-ttu-id="7d5f9-284">Azure egyenletesen elosztja a szerepkör példánya beállítása a hello szolgáltatás definíciós (.csdef) fájl részeként konfigurálhatók frissítési tartományok száma.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-284">Azure distributes instances of a role evenly across a set number of upgrade domains, which can be configured as part of hello service definition (.csdef) file.</span></span> <span data-ttu-id="7d5f9-285">frissítési tartományok maximális száma hello 20 és hello alapértelmezett érték 5.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-285">hello max number of upgrade domains is 20 and hello default is 5.</span></span> <span data-ttu-id="7d5f9-286">További információ a hogyan toomodify hello a szolgáltatásdefiníciós fájlban: [Azure szolgáltatás definíciós séma (.csdef fájl)](cloud-services-model-and-package.md#csdef).</span><span class="sxs-lookup"><span data-stu-id="7d5f9-286">For more information about how toomodify hello service definition file, see [Azure Service Definition Schema (.csdef File)](cloud-services-model-and-package.md#csdef).</span></span>

<span data-ttu-id="7d5f9-287">Például ha a szerepkör tíz példánnyal rendelkezik, alapértelmezés szerint minden frissítési tartomány két példányait tartalmazza.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-287">For example, if your role has ten instances, by default each upgrade domain contains two instances.</span></span> <span data-ttu-id="7d5f9-288">Ha a szerepkör 14 példánnyal rendelkezik, majd négy hello frissítési tartományok három példányokat tartalmazhatják, és ötödik tartomány két tartalmazza.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-288">If your role has 14 instances, then four of hello upgrade domains contain three instances, and a fifth domain contains two.</span></span>

<span data-ttu-id="7d5f9-289">Frissítési tartományok azonosítják a nulla alapú indexét: hello első frissítési tartomány 0 Azonosítót tartalmaz, és a második frissítési tartomány hello Azonosítót 1, és így tovább.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-289">Upgrade domains are identified with a zero-based index: hello first upgrade domain has an ID of 0, and hello second upgrade domain has an ID of 1, and so on.</span></span>

<span data-ttu-id="7d5f9-290">hello következő ábra bemutatja hogyan két szerepköröket tartalmazza, mint szolgáltatás terjessze hello szolgáltatás két frissítési tartományt határoz meg.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-290">hello following diagram illustrates how a service than contains two roles are distributed when hello service defines two upgrade domains.</span></span> <span data-ttu-id="7d5f9-291">hello szolgáltatás fut hello webes szerepkör nyolc példánya és a feldolgozói szerepkör hello kilenc példányai.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-291">hello service is running eight instances of hello web role and nine instances of hello worker role.</span></span>

<span data-ttu-id="7d5f9-292">![A frissítési tartományok terjesztési](media/cloud-services-update-azure-service/IC345533.png "frissítési tartományok terjesztése")</span><span class="sxs-lookup"><span data-stu-id="7d5f9-292">![Distribution of Upgrade Domains](media/cloud-services-update-azure-service/IC345533.png "Distribution of Upgrade Domains")</span></span>

> [!NOTE]
> <span data-ttu-id="7d5f9-293">Vegye figyelembe, hogy az Azure vezérlők példányok frissítési tartományok közötti elosztását vezérli.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-293">Note that Azure controls how instances are allocated across upgrade domains.</span></span> <span data-ttu-id="7d5f9-294">Már nem lehetséges toospecify előfordulások toowhich tartomány foglal le.</span><span class="sxs-lookup"><span data-stu-id="7d5f9-294">It's not possible toospecify which instances are allocated toowhich domain.</span></span>
>
>

## <a name="next-steps"></a><span data-ttu-id="7d5f9-295">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="7d5f9-295">Next steps</span></span>
[<span data-ttu-id="7d5f9-296">TooManage Cloud Services</span><span class="sxs-lookup"><span data-stu-id="7d5f9-296">How tooManage Cloud Services</span></span>](cloud-services-how-to-manage.md)  
[<span data-ttu-id="7d5f9-297">TooMonitor Cloud Services</span><span class="sxs-lookup"><span data-stu-id="7d5f9-297">How tooMonitor Cloud Services</span></span>](cloud-services-how-to-monitor.md)  
[<span data-ttu-id="7d5f9-298">TooConfigure Cloud Services</span><span class="sxs-lookup"><span data-stu-id="7d5f9-298">How tooConfigure Cloud Services</span></span>](cloud-services-how-to-configure.md)  
