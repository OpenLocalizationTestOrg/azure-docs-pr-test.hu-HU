---
title: "felhőalapú szolgáltatás memóriafoglalási hiba aaaTroubleshooting |} Microsoft Docs"
description: "Hozzárendelési hibák elhárítása a Cloud Services telepítése során az Azure szolgáltatásban"
services: azure-service-management, cloud-services
documentationcenter: 
author: simonxjx
manager: felixwu
editor: 
tags: top-support-issue
ms.assetid: 529157eb-e4a1-4388-aa2b-09e8b923af74
ms.service: cloud-services
ms.workload: na
ms.tgt_pltfrm: ibiza
ms.devlang: na
ms.topic: article
ms.date: 7/26/2017
ms.author: v-six
ms.openlocfilehash: dfd5cc4663ccc6ed1b27ca9df579182737363b0e
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/06/2017
---
# <a name="troubleshooting-allocation-failure-when-you-deploy-cloud-services-in-azure"></a><span data-ttu-id="06be7-103">Hozzárendelési hibák elhárítása a Cloud Services telepítése során az Azure szolgáltatásban</span><span class="sxs-lookup"><span data-stu-id="06be7-103">Troubleshooting allocation failure when you deploy Cloud Services in Azure</span></span>
## <a name="summary"></a><span data-ttu-id="06be7-104">Összefoglalás</span><span class="sxs-lookup"><span data-stu-id="06be7-104">Summary</span></span>
<span data-ttu-id="06be7-105">Ha példányok tooa felhőalapú szolgáltatás telepítéséhez, vagy adja hozzá az új webes vagy feldolgozói szerepkör példányok, a Microsoft Azure számítási erőforrásokat foglal le.</span><span class="sxs-lookup"><span data-stu-id="06be7-105">When you deploy instances tooa Cloud Service or add new web or worker role instances, Microsoft Azure allocates compute resources.</span></span> <span data-ttu-id="06be7-106">Alkalmanként kaphat a hibák, ezen műveletek végrehajtásakor, még mielőtt hello Azure előfizetési korlátozásait.</span><span class="sxs-lookup"><span data-stu-id="06be7-106">You may occasionally receive errors when performing these operations even before you reach hello Azure subscription limits.</span></span> <span data-ttu-id="06be7-107">Ez a cikk ismerteti a hello okok egyes hello közös pufferallokációs hibák, és lehetséges javítási javasol.</span><span class="sxs-lookup"><span data-stu-id="06be7-107">This article explains hello causes of some of hello common allocation failures and suggests possible remediation.</span></span> <span data-ttu-id="06be7-108">hello információkat is lehetnek hasznosak, ha azt tervezi, hogy a szolgáltatások hello telepítését.</span><span class="sxs-lookup"><span data-stu-id="06be7-108">hello information may also be useful when you plan hello deployment of your services.</span></span>

[!INCLUDE [support-disclaimer](../../includes/support-disclaimer.md)]

### <a name="background--how-allocation-works"></a><span data-ttu-id="06be7-109">Háttér – foglalási működése</span><span class="sxs-lookup"><span data-stu-id="06be7-109">Background – How allocation works</span></span>
<span data-ttu-id="06be7-110">az Azure adatközpontjaiban hello kiszolgálók particionáltak csoportokba.</span><span class="sxs-lookup"><span data-stu-id="06be7-110">hello servers in Azure datacenters are partitioned into clusters.</span></span> <span data-ttu-id="06be7-111">Egy új felhőalapú szolgáltatás memóriafoglalási kérelem több fürt kísérlet történik.</span><span class="sxs-lookup"><span data-stu-id="06be7-111">A new cloud service allocation request is attempted in multiple clusters.</span></span> <span data-ttu-id="06be7-112">Ha hello első példány telepített tooa felhőalapú szolgáltatást (az átmeneti vagy üzemi), a felhőalapú szolgáltatás lekérdezi a rögzített tooa fürt.</span><span class="sxs-lookup"><span data-stu-id="06be7-112">When hello first instance is deployed tooa cloud service(in either staging or production), that cloud service gets pinned tooa cluster.</span></span> <span data-ttu-id="06be7-113">Bármely további központi telepítéseket hello felhőszolgáltatás fordul elő hello ugyanaz a fürt.</span><span class="sxs-lookup"><span data-stu-id="06be7-113">Any further deployments for hello cloud service will happen in hello same cluster.</span></span> <span data-ttu-id="06be7-114">Ebben a cikkben kifejezés toothis "rögzített tooa fürtként".</span><span class="sxs-lookup"><span data-stu-id="06be7-114">In this article, we'll refer toothis as "pinned tooa cluster".</span></span> <span data-ttu-id="06be7-115">Alább 1 diagram azt ábrázolja, hello kis-és egy normál foglalási, amely több fürtökben; kísérlet történik 2. ábrán látható, hello kis-és memóriakiosztást meg rögzített tooCluster 2 mert, ahol van hello a meglévő felhőalapú szolgáltatás CS_1 üzemelteti.</span><span class="sxs-lookup"><span data-stu-id="06be7-115">Diagram 1 below illustrates hello case of a normal allocation which is attempted in multiple clusters; Diagram 2 illustrates hello case of an allocation that's pinned tooCluster 2 because that's where hello existing Cloud Service CS_1 is hosted.</span></span>

![Foglalási diagramja](./media/cloud-services-allocation-failure/Allocation1.png)

### <a name="why-allocation-failure-happens"></a><span data-ttu-id="06be7-117">Miért memóriafoglalási hiba történik</span><span class="sxs-lookup"><span data-stu-id="06be7-117">Why allocation failure happens</span></span>
<span data-ttu-id="06be7-118">Ha egy memóriafoglalási kérelem rögzített tooa fürt, magasabb esély van a toofind szabad erőforrást sikertelenek lesznek, mivel hello elérhető erőforráskészlet korlátozott tooa fürt.</span><span class="sxs-lookup"><span data-stu-id="06be7-118">When an allocation request is pinned tooa cluster, there's a higher chance of failing toofind free resources since hello available resource pool is limited tooa cluster.</span></span> <span data-ttu-id="06be7-119">Továbbá ha a memóriafoglalási kérelem rögzített tooa fürt, de hello típus a kért erőforrás nem érhető el, hogy a fürt, a kérelem sikertelen lesz akkor is, ha hello fürt szabad erőforrás.</span><span class="sxs-lookup"><span data-stu-id="06be7-119">Furthermore, if your allocation request is pinned tooa cluster but hello type of resource you requested is not supported by that cluster, your request will fail even if hello cluster has free resource.</span></span> <span data-ttu-id="06be7-120">3. ábra alatt hello esetet, ahol egy rögzített foglalás sikertelen lesz, mivel hello csak jelölt fürtnek nincs szabad erőforrást mutatja be.</span><span class="sxs-lookup"><span data-stu-id="06be7-120">Diagram 3 below illustrates hello case where a pinned allocation fails because hello only candidate cluster does not have free resources.</span></span> <span data-ttu-id="06be7-121">4. ábrán látható, ahol egy rögzített foglalás sikertelen lesz, mivel nem támogatja a hello csak jelölt fürt hello eset hello a kért Virtuálisgép-méretet, annak ellenére, hogy a fürt hello ingyenes erőforrással rendelkezik.</span><span class="sxs-lookup"><span data-stu-id="06be7-121">Diagram 4 illustrates hello case where a pinned allocation fails because hello only candidate cluster does not support hello requested VM size, even though hello cluster has free resources.</span></span>

![Rögzített memóriafoglalási hiba](./media/cloud-services-allocation-failure/Allocation2.png)

## <a name="troubleshooting-allocation-failure-for-cloud-services"></a><span data-ttu-id="06be7-123">A felhőszolgáltatások észlelt lefoglalási hibák elhárítása</span><span class="sxs-lookup"><span data-stu-id="06be7-123">Troubleshooting allocation failure for cloud services</span></span>
### <a name="error-message"></a><span data-ttu-id="06be7-124">Hibaüzenet</span><span class="sxs-lookup"><span data-stu-id="06be7-124">Error Message</span></span>
<span data-ttu-id="06be7-125">A következő hibaüzenet hello jelenhetnek meg:</span><span class="sxs-lookup"><span data-stu-id="06be7-125">You may see hello following error message:</span></span>

    "Azure operation '{operation id}' failed with code Compute.ConstrainedAllocationFailed. Details: Allocation failed; unable toosatisfy constraints in request. hello requested new service deployment is bound tooan Affinity Group, or it targets a Virtual Network, or there is an existing deployment under this hosted service. Any of these conditions constrains hello new deployment toospecific Azure resources. Please retry later or try reducing hello VM size or number of role instances. Alternatively, if possible, remove hello aforementioned constraints or try deploying tooa different region."

### <a name="common-issues"></a><span data-ttu-id="06be7-126">Gyakori problémák</span><span class="sxs-lookup"><span data-stu-id="06be7-126">Common Issues</span></span>
<span data-ttu-id="06be7-127">Az alábbiakban hello közös foglalási forgatókönyvek, amelyek egy foglalási kérelem toobe rögzített tooa egyetlen fürthöz.</span><span class="sxs-lookup"><span data-stu-id="06be7-127">Here are hello common allocation scenarios that cause an allocation request toobe pinned tooa single cluster.</span></span>

* <span data-ttu-id="06be7-128">Tárolóhely - tooStaging telepítésekor egy felhőalapú szolgáltatás a központi telepítés van vagy tárolóhelye, majd hello teljes felhőszolgáltatás rögzített tooa adott fürt.</span><span class="sxs-lookup"><span data-stu-id="06be7-128">Deploying tooStaging Slot - If a cloud service has a deployment in either slot, then hello entire cloud service is pinned tooa specific cluster.</span></span>  <span data-ttu-id="06be7-129">Ez azt jelenti, hogy ha egy telepítés már létezik a hello éles webalkalmazásra, majd egy új átmeneti központi telepítés csak lehet hozzárendelni hello azonos fürtöt hello éles tárolóhelyre.</span><span class="sxs-lookup"><span data-stu-id="06be7-129">This means that if a deployment already exists in hello production slot, then a new staging deployment can only be allocated in hello same cluster as hello production slot.</span></span> <span data-ttu-id="06be7-130">Ha hello fürt közelít kapacitásának határához, hello kérelem sikertelen lehet.</span><span class="sxs-lookup"><span data-stu-id="06be7-130">If hello cluster is nearing capacity, hello request may fail.</span></span>
* <span data-ttu-id="06be7-131">Skálázás - hozzáadása új példányok tooan létező felhőalapú szolgáltatást kell rendelnie a hello azonos fürt.</span><span class="sxs-lookup"><span data-stu-id="06be7-131">Scaling - Adding new instances tooan existing cloud service must allocate in hello same cluster.</span></span>  <span data-ttu-id="06be7-132">Rövid skálázás kérelmek általában osztják, de nem minden esetben.</span><span class="sxs-lookup"><span data-stu-id="06be7-132">Small scaling requests can usually be allocated, but not always.</span></span> <span data-ttu-id="06be7-133">Ha hello fürt közelít kapacitásának határához, hello kérelem sikertelen lehet.</span><span class="sxs-lookup"><span data-stu-id="06be7-133">If hello cluster is nearing capacity, hello request may fail.</span></span>
* <span data-ttu-id="06be7-134">Affinitáscsoport - egy új központi telepítési tooan üres felhőszolgáltatás foglalhatók hello fabric az adott régióban, a fürt által kivéve, ha hello felhőszolgáltatás rögzített tooan affinitáscsoport.</span><span class="sxs-lookup"><span data-stu-id="06be7-134">Affinity Group - A new deployment tooan empty cloud service can be allocated by hello fabric in any cluster in that region, unless hello cloud service is pinned tooan affinity group.</span></span> <span data-ttu-id="06be7-135">Központi telepítések toohello ugyanabban az affinitáscsoportban kísérli meg a rendszer a hello ugyanabban a fürtben.</span><span class="sxs-lookup"><span data-stu-id="06be7-135">Deployments toohello same affinity group will be attempted on hello same cluster.</span></span> <span data-ttu-id="06be7-136">Ha hello fürt közelít kapacitásának határához, hello kérelem sikertelen lehet.</span><span class="sxs-lookup"><span data-stu-id="06be7-136">If hello cluster is nearing capacity, hello request may fail.</span></span>
* <span data-ttu-id="06be7-137">Affinitáscsoport vNet - régebbi virtuális hálózatok volt a feltételekhez tooaffinity csoportok régiókat helyett, és ezek a virtuális hálózatok felhőszolgáltatások rögzített toohello affinitáscsoport fürt.</span><span class="sxs-lookup"><span data-stu-id="06be7-137">Affinity Group vNet - Older Virtual Networks were tied tooaffinity groups instead of regions, and cloud services in these Virtual Networks would be pinned toohello affinity group cluster.</span></span> <span data-ttu-id="06be7-138">Központi telepítések toothis fajta virtuális hálózatot rögzítve hello fürtön kísérli meg a rendszer.</span><span class="sxs-lookup"><span data-stu-id="06be7-138">Deployments toothis type of virtual network will be attempted on hello pinned cluster.</span></span> <span data-ttu-id="06be7-139">Ha hello fürt közelít kapacitásának határához, hello kérelem sikertelen lehet.</span><span class="sxs-lookup"><span data-stu-id="06be7-139">If hello cluster is nearing capacity, hello request may fail.</span></span>

## <a name="solutions"></a><span data-ttu-id="06be7-140">Megoldások</span><span class="sxs-lookup"><span data-stu-id="06be7-140">Solutions</span></span>
1. <span data-ttu-id="06be7-141">Helyezze üzembe újra tooa új felhőszolgáltatás - Ez a megoldás valószínűleg toobe legtöbb sikeres megegyezik lehetővé teszi a hello platform toochoose összes fürtök az adott régióban.</span><span class="sxs-lookup"><span data-stu-id="06be7-141">Redeploy tooa new cloud service - This solution is likely toobe most successful as it allows hello platform toochoose from all clusters in that region.</span></span>

   * <span data-ttu-id="06be7-142">Hello munkaterhelés tooa új felhőalapú szolgáltatás üzembe helyezése</span><span class="sxs-lookup"><span data-stu-id="06be7-142">Deploy hello workload tooa new cloud service</span></span>  
   * <span data-ttu-id="06be7-143">Hello CNAME vagy A rekord toopoint forgalom toohello új felhőalapú szolgáltatás frissítése</span><span class="sxs-lookup"><span data-stu-id="06be7-143">Update hello CNAME or A record toopoint traffic toohello new cloud service</span></span>
   * <span data-ttu-id="06be7-144">Nulla forgalom toohello régi webhely állapotra vált, amennyiben törölheti hello régi felhőalapú szolgáltatás.</span><span class="sxs-lookup"><span data-stu-id="06be7-144">Once zero traffic is going toohello old site, you can delete hello old cloud service.</span></span> <span data-ttu-id="06be7-145">Ez a megoldás kell fel Önnek leállítása nélkül.</span><span class="sxs-lookup"><span data-stu-id="06be7-145">This solution should incur zero downtime.</span></span>
2. <span data-ttu-id="06be7-146">Üzemi és átmeneti üzembe helyezési ponti törölni – Ez a megoldás is megőrzi a meglévő DNS-nevével, de állásidő tooyour alkalmazást, akkor.</span><span class="sxs-lookup"><span data-stu-id="06be7-146">Delete both production and staging slots - This solution will preserve your existing DNS name, but will cause downtime tooyour application.</span></span>

   * <span data-ttu-id="06be7-147">Hello üzemi és átmeneti üzembe helyezési ponti egy meglévő felhőalapú szolgáltatás, így a hello felhőalapú szolgáltatás nem üres, törölje, majd</span><span class="sxs-lookup"><span data-stu-id="06be7-147">Delete hello production and staging slots of an existing cloud service so that hello cloud service is empty, and then</span></span>
   * <span data-ttu-id="06be7-148">Hozzon létre egy új központi telepítési hello létező felhőalapú szolgáltatást.</span><span class="sxs-lookup"><span data-stu-id="06be7-148">Create a new deployment in hello existing cloud service.</span></span> <span data-ttu-id="06be7-149">Minden fürtön hello régióban tooallocation újbóli kísérlet.</span><span class="sxs-lookup"><span data-stu-id="06be7-149">This will re-attempt tooallocation on all clusters in hello region.</span></span> <span data-ttu-id="06be7-150">Győződjön meg arról hello felhőalapú szolgáltatás nem kapcsolt tooan affinitáscsoport.</span><span class="sxs-lookup"><span data-stu-id="06be7-150">Ensure hello cloud service is not tied tooan affinity group.</span></span>
3. <span data-ttu-id="06be7-151">Fenntartott IP - Ez a megoldás megtartja a meglévő IP-cím, de állásidő tooyour alkalmazás okoz.</span><span class="sxs-lookup"><span data-stu-id="06be7-151">Reserved IP -  This solution will preserve your existing IP address, but will cause downtime tooyour application.</span></span>  

   * <span data-ttu-id="06be7-152">Hozzon létre egy foglalt IP-cím a meglévő telepítéshez Powershell használatával</span><span class="sxs-lookup"><span data-stu-id="06be7-152">Create a ReservedIP for your existing deployment using Powershell</span></span>

     ```
     New-AzureReservedIP -ReservedIPName {new reserved IP name} -Location {location} -ServiceName {existing service name}
     ```
   * <span data-ttu-id="06be7-153">Hajtsa végre a promptjai, így új foglalt IP-cím a hello szolgáltatás szolgáltatáskonfigurációs SÉMA hello meg arról, hogy toospecify #2.</span><span class="sxs-lookup"><span data-stu-id="06be7-153">Follow #2 from above, making sure toospecify hello new ReservedIP in hello service's CSCFG.</span></span>
4. <span data-ttu-id="06be7-154">Távolítsa el az új központi telepítéseknél - affinitáscsoport Affinitáscsoportok már nem támogatottak.</span><span class="sxs-lookup"><span data-stu-id="06be7-154">Remove affinity group for new deployments - Affinity Groups are no longer recommended.</span></span> <span data-ttu-id="06be7-155">Új felhőalapú szolgáltatás toodeploy #1 utasításai.</span><span class="sxs-lookup"><span data-stu-id="06be7-155">Follow steps for #1 above toodeploy a new cloud service.</span></span> <span data-ttu-id="06be7-156">Győződjön meg róla, felhőalapú szolgáltatás nem olyan affinitáscsoportban van.</span><span class="sxs-lookup"><span data-stu-id="06be7-156">Ensure cloud service is not in an affinity group.</span></span>
5. <span data-ttu-id="06be7-157">Átalakítás tooa regionális virtuális hálózat – lásd: [hogyan toomigrate az Affinitáscsoportok tooa regionális virtuális hálózatot (VNet)](../virtual-network/virtual-networks-migrate-to-regional-vnet.md).</span><span class="sxs-lookup"><span data-stu-id="06be7-157">Convert tooa Regional Virtual Network - See [How toomigrate from Affinity Groups tooa Regional Virtual Network (VNet)](../virtual-network/virtual-networks-migrate-to-regional-vnet.md).</span></span>
