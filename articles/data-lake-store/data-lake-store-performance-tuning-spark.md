---
title: "Data Lake Store Spark teljesítményének hangolása irányelveit aaaAzure |} Microsoft Docs"
description: "Az Azure Data Lake Store Spark teljesítményének hangolása irányelvek"
services: data-lake-store
documentationcenter: 
author: stewu
manager: amitkul
editor: stewu
ms.assetid: ebde7b9f-2e51-4d43-b7ab-566417221335
ms.service: data-lake-store
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 12/19/2016
ms.author: stewu
ms.openlocfilehash: da1d172e9cb1199ad95605ea1718e78559f79650
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/06/2017
---
# <a name="performance-tuning-guidance-for-spark-on-hdinsight-and-azure-data-lake-store"></a><span data-ttu-id="093a4-103">A Spark on HDInsight és az Azure Data Lake Store útmutatást teljesítményhangolása</span><span class="sxs-lookup"><span data-stu-id="093a4-103">Performance tuning guidance for Spark on HDInsight and Azure Data Lake Store</span></span>

<span data-ttu-id="093a4-104">Spark teljesítményének hangolása, úgy kell tooconsider hello számát, a fürtön futó alkalmazások.</span><span class="sxs-lookup"><span data-stu-id="093a4-104">When tuning performance on Spark, you need tooconsider hello number of apps that will be running on your cluster.</span></span>  <span data-ttu-id="093a4-105">Alapértelmezés szerint 4 futtatható egyidejűleg a HDI-fürtön lévő alkalmazások (Megjegyzés: hello alapértelmezett beállítás: tulajdonos toochange).</span><span class="sxs-lookup"><span data-stu-id="093a4-105">By default, you can run 4 apps concurrently on your HDI cluster (Note: hello default setting is subject toochange).</span></span>  <span data-ttu-id="093a4-106">Dönthet toouse kevesebb alkalmazások így hello alapértelmezett beállításainak felülbírálása és az alkalmazások több hello fürt használja.</span><span class="sxs-lookup"><span data-stu-id="093a4-106">You may decide toouse fewer apps so you can override hello default settings and use more of hello cluster for those apps.</span></span>  

## <a name="prerequisites"></a><span data-ttu-id="093a4-107">Előfeltételek</span><span class="sxs-lookup"><span data-stu-id="093a4-107">Prerequisites</span></span>

* <span data-ttu-id="093a4-108">**Azure-előfizetés**.</span><span class="sxs-lookup"><span data-stu-id="093a4-108">**An Azure subscription**.</span></span> <span data-ttu-id="093a4-109">Lásd: [Ingyenes Azure-fiók létrehozása](https://azure.microsoft.com/pricing/free-trial/).</span><span class="sxs-lookup"><span data-stu-id="093a4-109">See [Get Azure free trial](https://azure.microsoft.com/pricing/free-trial/).</span></span>
* <span data-ttu-id="093a4-110">**Egy Azure Data Lake Store-fiók**.</span><span class="sxs-lookup"><span data-stu-id="093a4-110">**An Azure Data Lake Store account**.</span></span> <span data-ttu-id="093a4-111">Útmutatást toocreate egy, lásd: [Ismerkedés az Azure Data Lake Store](data-lake-store-get-started-portal.md)</span><span class="sxs-lookup"><span data-stu-id="093a4-111">For instructions on how toocreate one, see [Get started with Azure Data Lake Store](data-lake-store-get-started-portal.md)</span></span>
* <span data-ttu-id="093a4-112">**Az Azure HDInsight-fürt** a Data Lake Store-fiók hozzáférési tooa.</span><span class="sxs-lookup"><span data-stu-id="093a4-112">**Azure HDInsight cluster** with access tooa Data Lake Store account.</span></span> <span data-ttu-id="093a4-113">Lásd: [HDInsight-fürtök létrehozása a Data Lake Store](data-lake-store-hdinsight-hadoop-use-portal.md).</span><span class="sxs-lookup"><span data-stu-id="093a4-113">See [Create an HDInsight cluster with Data Lake Store](data-lake-store-hdinsight-hadoop-use-portal.md).</span></span> <span data-ttu-id="093a4-114">Ellenőrizze, hogy engedélyezte a távoli asztal hello fürt.</span><span class="sxs-lookup"><span data-stu-id="093a4-114">Make sure you enable Remote Desktop for hello cluster.</span></span>
* <span data-ttu-id="093a4-115">**Spark-fürtön futó Azure Data Lake Store**.</span><span class="sxs-lookup"><span data-stu-id="093a4-115">**Running Spark cluster on Azure Data Lake Store**.</span></span>  <span data-ttu-id="093a4-116">További információkért lásd: [használata a HDInsight Spark fürt tooanalyze adatok Data Lake Store-ban](https://docs.microsoft.com/en-us/azure/hdinsight/hdinsight-apache-spark-use-with-data-lake-store)</span><span class="sxs-lookup"><span data-stu-id="093a4-116">For more information, see [Use HDInsight Spark cluster tooanalyze data in Data Lake Store](https://docs.microsoft.com/en-us/azure/hdinsight/hdinsight-apache-spark-use-with-data-lake-store)</span></span>
* <span data-ttu-id="093a4-117">**Teljesítményhangolás ADLS iránymutatást**.</span><span class="sxs-lookup"><span data-stu-id="093a4-117">**Performance tuning guidelines on ADLS**.</span></span>  <span data-ttu-id="093a4-118">Általános teljesítmény fogalmakat, lásd: [Data Lake Store teljesítmény hangolása útmutató](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-performance-tuning-guidance)</span><span class="sxs-lookup"><span data-stu-id="093a4-118">For general performance concepts, see [Data Lake Store Performance Tuning Guidance](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-performance-tuning-guidance)</span></span> 

## <a name="parameters"></a><span data-ttu-id="093a4-119">Paraméterek</span><span class="sxs-lookup"><span data-stu-id="093a4-119">Parameters</span></span>

<span data-ttu-id="093a4-120">Amikor Spark futó feladatok, az alábbiakban hello legfontosabb beállítások ADLS bennünket tooincrease teljesítményére lehet:</span><span class="sxs-lookup"><span data-stu-id="093a4-120">When running Spark jobs, here are hello most important settings that can be tuned tooincrease performance on ADLS:</span></span>

* <span data-ttu-id="093a4-121">**NUM-végrehajtója** -hello száma párhuzamos feladatokat hajt végre.</span><span class="sxs-lookup"><span data-stu-id="093a4-121">**Num-executors** - hello number of concurrent tasks that can be executed.</span></span>

* <span data-ttu-id="093a4-122">**Végrehajtó memóriában** -hello tooeach végrehajtó lefoglalt memória mennyiségét.</span><span class="sxs-lookup"><span data-stu-id="093a4-122">**Executor-memory** - hello amount of memory allocated tooeach executor.</span></span>

* <span data-ttu-id="093a4-123">**Végrehajtó-magok** -magok száma hello lefoglalt tooeach végrehajtó.</span><span class="sxs-lookup"><span data-stu-id="093a4-123">**Executor-cores** - hello number of cores allocated tooeach executor.</span></span>                     

<span data-ttu-id="093a4-124">**NUM-végrehajtója** Num-végrehajtója állítja hello párhuzamosan futó feladatok maximális számát.</span><span class="sxs-lookup"><span data-stu-id="093a4-124">**Num-executors** Num-executors will set hello maximum number of tasks that can run in parallel.</span></span>  <span data-ttu-id="093a4-125">hello tényleges száma párhuzamos futtatható tevékenységek hello memória és a fürt rendelkezésre álló Processzor-erőforrások korlátozódik.</span><span class="sxs-lookup"><span data-stu-id="093a4-125">hello actual number of tasks that can run in parallel is bounded by hello memory and CPU resources available in your cluster.</span></span>

<span data-ttu-id="093a4-126">**Végrehajtó memóriában** Ez az hello tooeach végrehajtó lefoglalt memória mennyiségét.</span><span class="sxs-lookup"><span data-stu-id="093a4-126">**Executor-memory** This is hello amount of memory that is being allocated tooeach executor.</span></span>  <span data-ttu-id="093a4-127">az egyes végrehajtó szükséges hello memória hello feladat függ.</span><span class="sxs-lookup"><span data-stu-id="093a4-127">hello memory needed for each executor is dependent on hello job.</span></span>  <span data-ttu-id="093a4-128">Összetett műveletek hello memória nagyobb toobe kell.</span><span class="sxs-lookup"><span data-stu-id="093a4-128">For complex operations, hello memory needs toobe higher.</span></span>  <span data-ttu-id="093a4-129">Egyszerű műveletek tartoznak, mint az olvasási és írási alacsonyabb lesz memóriára vonatkozó követelményeknek.</span><span class="sxs-lookup"><span data-stu-id="093a4-129">For simple operations like read and write, memory requirements will be lower.</span></span>  <span data-ttu-id="093a4-130">az egyes végrehajtó memória mennyisége hello Ambari tekintheti meg.</span><span class="sxs-lookup"><span data-stu-id="093a4-130">hello amount of memory for each executor can be viewed in Ambari.</span></span>  <span data-ttu-id="093a4-131">Az Ambari keresse meg a tooSpark, és hello Configs lapon.</span><span class="sxs-lookup"><span data-stu-id="093a4-131">In Ambari, navigate tooSpark and view hello Configs tab.</span></span>  

<span data-ttu-id="093a4-132">**Végrehajtó-magok** végrehajtó, amely megadja, hogy futtatható végrehajtó száma párhuzamos szálak száma hello használt magok hello mennyisége állít be.</span><span class="sxs-lookup"><span data-stu-id="093a4-132">**Executor-cores** This sets hello amount of cores used per executor, which determines hello number of parallel threads that can be run per executor.</span></span>  <span data-ttu-id="093a4-133">Például ha végrehajtó-magok = 2, majd minden egyes végrehajtó hello végrehajtó 2 párhuzamos feladatokat futtathat.</span><span class="sxs-lookup"><span data-stu-id="093a4-133">For example, if executor-cores = 2, then each executor can run 2 parallel tasks in hello executor.</span></span>  <span data-ttu-id="093a4-134">hello végrehajtó-mag szükséges fognak függeni hello feladat.</span><span class="sxs-lookup"><span data-stu-id="093a4-134">hello executor-cores needed will be dependent on hello job.</span></span>  <span data-ttu-id="093a4-135">Intenzív i/o-feladatok nem igényelnek nagy mennyiségű memória feladat, ezért minden végrehajtó kezelni tud a további párhuzamos tevékenységeket.</span><span class="sxs-lookup"><span data-stu-id="093a4-135">I/O heavy jobs do not require a large amount of memory per task so each executor can handle more parallel tasks.</span></span>

<span data-ttu-id="093a4-136">Alapértelmezés szerint két virtuális YARN magok megadva minden fizikai magok a HDInsight Spark futtatásakor.</span><span class="sxs-lookup"><span data-stu-id="093a4-136">By default, two virtual YARN cores are defined for each physical core when running Spark on HDInsight.</span></span>  <span data-ttu-id="093a4-137">Ez a szám concurrecy és a környezetben több szál való váltás egyensúlyt biztosít.</span><span class="sxs-lookup"><span data-stu-id="093a4-137">This number provides a good balance of concurrecy and amount of context switching from multiple threads.</span></span>  

## <a name="guidance"></a><span data-ttu-id="093a4-138">Útmutatás</span><span class="sxs-lookup"><span data-stu-id="093a4-138">Guidance</span></span>

<span data-ttu-id="093a4-139">Futtatásakor a Spark koncepción alapuló adatelemzési célokra toowork a Data Lake Store-adatokkal, azt javasoljuk, hogy a Data Lake Store hello legutóbbi HDInsight verzió tooget hello legjobb teljesítmény érdekében használjon.</span><span class="sxs-lookup"><span data-stu-id="093a4-139">While running Spark analytic workloads toowork with data in Data Lake Store, we recommend that you use hello most recent HDInsight version tooget hello best performance with Data Lake Store.</span></span> <span data-ttu-id="093a4-140">Ha a feladat több i/o-igényes, bizonyos paraméterek konfigurált tooimprove teljesítmény lehet.</span><span class="sxs-lookup"><span data-stu-id="093a4-140">When your job is more I/O intensive, then certain parameters can be configured tooimprove performance.</span></span>  <span data-ttu-id="093a4-141">Azure Data Lake Store egy kiválóan méretezhető tárolás platform, amely képes kezelni a magas teljesítmény.</span><span class="sxs-lookup"><span data-stu-id="093a4-141">Azure Data Lake Store is a highly scalable storage platform that can handle high throughput.</span></span>  <span data-ttu-id="093a4-142">Ha hello feladat főként olvasási vagy írási műveleteket, majd növelése az Azure Data Lake Store az i/o-tooand CONCURRENCY paraméterének értékét sikerült teljesítmény növelése érdekében.</span><span class="sxs-lookup"><span data-stu-id="093a4-142">If hello job mainly consists of read or writes, then increasing concurrency for I/O tooand from Azure Data Lake Store could increase performance.</span></span>

<span data-ttu-id="093a4-143">Nincsenek néhány általános módon tooincrease egyidejűségi i/o-igényes feladatok.</span><span class="sxs-lookup"><span data-stu-id="093a4-143">There are a few general ways tooincrease concurrency for I/O intensive jobs.</span></span>

<span data-ttu-id="093a4-144">**1. lépés: Annak ellenőrzése, hogy hány alkalmazások futnak, a fürt** – tudnia kell, beleértve az aktuális hello hello fürtön hány alkalmazások futnak.</span><span class="sxs-lookup"><span data-stu-id="093a4-144">**Step 1: Determine how many apps are running on your cluster** – You should know how many apps are running on hello cluster including hello current one.</span></span>  <span data-ttu-id="093a4-145">hello alapértelmezett értékeinek minden Spark beállítás feltételezi, hogy problémamentes-4 egyidejűleg futó alkalmazások.</span><span class="sxs-lookup"><span data-stu-id="093a4-145">hello default values for each Spark setting assumes that there are 4 apps running concurrently.</span></span>  <span data-ttu-id="093a4-146">Ezért csak akkor hello fürt minden alkalmazás elérhető 25 %-át.</span><span class="sxs-lookup"><span data-stu-id="093a4-146">Therefore, you will only have 25% of hello cluster available for each app.</span></span>  <span data-ttu-id="093a4-147">tooget jobb teljesítmény érdekében felülírhatja hello alapértelmezett végrehajtója hello számának módosítása.</span><span class="sxs-lookup"><span data-stu-id="093a4-147">tooget better performance, you can override hello defaults by changing hello number of executors.</span></span>  

<span data-ttu-id="093a4-148">**2. lépés: Állítsa be az executor-memória** – hello először thing tooset hello végrehajtó memóriában.</span><span class="sxs-lookup"><span data-stu-id="093a4-148">**Step 2: Set executor-memory** – hello first thing tooset is hello executor-memory.</span></span>  <span data-ttu-id="093a4-149">hello memória fogja, hogy-e folyamatban toorun hello feladat függ.</span><span class="sxs-lookup"><span data-stu-id="093a4-149">hello memory will be dependent on hello job that you are going toorun.</span></span>  <span data-ttu-id="093a4-150">Párhuzamossági növelheti, ha a végrehajtó kevesebb memória lefoglalásakor.</span><span class="sxs-lookup"><span data-stu-id="093a4-150">You can increase concurrency by allocating less memory per executor.</span></span>  <span data-ttu-id="093a4-151">Ha memória kivételek kívül a feladat futtatásakor, majd növelje a paraméter értéke hello.</span><span class="sxs-lookup"><span data-stu-id="093a4-151">If you see out of memory exceptions when you run your job, then you should increase hello value for this parameter.</span></span>  <span data-ttu-id="093a4-152">Egy alternatív az tooget további memória nagyobb mennyiségű memóriával rendelkező fürtnek használatával, vagy a fürt hello méretének növelését.</span><span class="sxs-lookup"><span data-stu-id="093a4-152">One alternative is tooget more memory by using a cluster that has higher amounts of memory or increasing hello size of your cluster.</span></span>  <span data-ttu-id="093a4-153">További memória lehetővé teszi több végrehajtója toobe használja, ami azt jelenti, hogy több egyidejű.</span><span class="sxs-lookup"><span data-stu-id="093a4-153">More memory will enable more executors toobe used, which means more concurrency.</span></span>

<span data-ttu-id="093a4-154">**3. lépés: Állítsa be az executor-magok** – i/o teljesítményigényű munkaterhelések kiszolgálásához, amelyek nem rendelkeznek összetett műveletek a helyes toostart végrehajtó-magok tooincrease hello száma párhuzamos tevékenységek maximális száma végrehajtó nagy számú esetén.</span><span class="sxs-lookup"><span data-stu-id="093a4-154">**Step 3: Set executor-cores** – For I/O intensive workloads that do not have complex operations, it’s good toostart with a high number of executor-cores tooincrease hello number of parallel tasks per executor.</span></span>  <span data-ttu-id="093a4-155">Remek kezdőpont végrehajtó-magok too4 beállítás.</span><span class="sxs-lookup"><span data-stu-id="093a4-155">Setting executor-cores too4 is a good start.</span></span>   

    executor-cores = 4
<span data-ttu-id="093a4-156">Hello végrehajtó-magok száma növelése Erre azért van szükség további párhuzamossági, különböző végrehajtó-magok kísérletezhet.</span><span class="sxs-lookup"><span data-stu-id="093a4-156">Increasing hello number of executor-cores will give you more parallelism so you can experiment with different executor-cores.</span></span>  <span data-ttu-id="093a4-157">Az összetettebb műveleteket, feladatok csökkentse hello végrehajtó magok számát.</span><span class="sxs-lookup"><span data-stu-id="093a4-157">For jobs that have more complex operations, you should reduce hello number of cores per executor.</span></span>  <span data-ttu-id="093a4-158">Ha végrehajtó-magok nagyobb, mint 4, majd szemétgyűjtés előfordulhat, hogy nem elég hatékony lesz és csökkentheti a teljesítményt.</span><span class="sxs-lookup"><span data-stu-id="093a4-158">If executor-cores is set higher than 4, then garbage collection may become inefficient and degrade performance.</span></span>

<span data-ttu-id="093a4-159">**4. lépés: Fürt YARN memóriamennyiség meghatározása** – ezt az információt az Ambari érhető el.</span><span class="sxs-lookup"><span data-stu-id="093a4-159">**Step 4: Determine amount of YARN memory in cluster** – This information is available in Ambari.</span></span>  <span data-ttu-id="093a4-160">Keresse meg a tooYARN és hello Configs lapon.  hello YARN memória ebben az ablakban jelenik meg.</span><span class="sxs-lookup"><span data-stu-id="093a4-160">Navigate tooYARN and view hello Configs tab.  hello YARN memory is displayed in this window.</span></span>  
<span data-ttu-id="093a4-161">Megjegyzés: amikor hello ablakban van, látható az is hello alapértelmezett YARN tároló mérete.</span><span class="sxs-lookup"><span data-stu-id="093a4-161">Note: while you are in hello window, you can also see hello default YARN container size.</span></span>  <span data-ttu-id="093a4-162">hello YARN tároló mérete van hello ugyanaz, mint a memória mennyisége végrehajtó paramétere.</span><span class="sxs-lookup"><span data-stu-id="093a4-162">hello YARN container size is hello same as memory per executor paramter.</span></span>

    Total YARN memory = nodes * YARN memory per node
<span data-ttu-id="093a4-163">**5. lépés: Num-végrehajtója kiszámítása**</span><span class="sxs-lookup"><span data-stu-id="093a4-163">**Step 5: Calculate num-executors**</span></span>

<span data-ttu-id="093a4-164">**Memória megkötés kiszámításához** -hello num-végrehajtója paraméter memória vagy CPU korlátozza.</span><span class="sxs-lookup"><span data-stu-id="093a4-164">**Calculate memory constraint** - hello num-executors parameter is constrained either by memory or by CPU.</span></span>  <span data-ttu-id="093a4-165">hello memória megkötés hello az alkalmazáshoz rendelkezésre álló YARN memória mennyisége határozza meg.</span><span class="sxs-lookup"><span data-stu-id="093a4-165">hello memory constraint is determined by hello amount of available YARN memory for your application.</span></span>  <span data-ttu-id="093a4-166">Teljes YARN memória érvénybe kell, és osztás, amely végrehajtó memóriában.</span><span class="sxs-lookup"><span data-stu-id="093a4-166">You should take total YARN memory and divide that by executor-memory.</span></span>  <span data-ttu-id="093a4-167">hello korlátozást kell deszerializálni méretezhető alkalmazások hello számát, azt az alkalmazások számának hello nullával toobe.</span><span class="sxs-lookup"><span data-stu-id="093a4-167">hello constraint needs toobe de-scaled for hello number of apps so we divide by hello number of apps.</span></span>

    Memory constraint = (total YARN memory / executor memory) / # of apps   
<span data-ttu-id="093a4-168">**CPU-korlátozás kiszámításához** -hello CPU-korlátozás, végrehajtó magok számát hello végzett teljes virtuális magok hello kiszámítása.</span><span class="sxs-lookup"><span data-stu-id="093a4-168">**Calculate CPU constraint** - hello CPU constraint is calculated as hello total virtual cores divided by hello number of cores per executor.</span></span>  <span data-ttu-id="093a4-169">Nincsenek minden fizikai magok virtuális 2 magos.</span><span class="sxs-lookup"><span data-stu-id="093a4-169">There are 2 virtual cores for each physical core.</span></span>  <span data-ttu-id="093a4-170">Hasonló toohello memória megkötés van osztási alkalmazások hello száma alapján.</span><span class="sxs-lookup"><span data-stu-id="093a4-170">Similar toohello memory constraint, we have divide by hello number of apps.</span></span>

    virtual cores = (nodes in cluster * # of physical cores in node * 2)
    CPU constraint = (total virtual cores / # of cores per executor) / # of apps
<span data-ttu-id="093a4-171">**Num-végrehajtója beállítása** – hello num-végrehajtója paraméter határozza meg véve hello legalább hello memória korlátozás és a hello CPU-korlátozás.</span><span class="sxs-lookup"><span data-stu-id="093a4-171">**Set num-executors** – hello num-executors parameter is determined by taking hello minimum of hello memory constraint and hello CPU constraint.</span></span> 

    num-executors = Min (total virtual Cores / # of cores per executor, available YARN memory / executor-memory)   
<span data-ttu-id="093a4-172">Ha egy nagyobb num-végrehajtója nem feltétlenül teljesítmény növelése.</span><span class="sxs-lookup"><span data-stu-id="093a4-172">Setting a higher number of num-executors does not necessarily increase performance.</span></span>  <span data-ttu-id="093a4-173">Vegye figyelembe, hogy további végrehajtója felveszi extra általános az egyes további végrehajtó, amely potenciálisan ronthatja a teljesítményt.</span><span class="sxs-lookup"><span data-stu-id="093a4-173">You should consider that adding more executors will add extra overhead for each additional executor, which can potentially degrade performance.</span></span>  <span data-ttu-id="093a4-174">NUM-végrehajtója hello fürterőforrások korlátozódik.</span><span class="sxs-lookup"><span data-stu-id="093a4-174">Num-executors is bounded by hello cluster resources.</span></span>    

## <a name="example-calculation"></a><span data-ttu-id="093a4-175">Példa kiszámítása</span><span class="sxs-lookup"><span data-stu-id="093a4-175">Example Calculation</span></span>

<span data-ttu-id="093a4-176">Tételezzük fel alkalmazásokat hello akár egy fog toorun futó 2 álló 8 D4v2 csomópont fürtökben-tal rendelkezik.</span><span class="sxs-lookup"><span data-stu-id="093a4-176">Let’s say you currently have a cluster composed of 8 D4v2 nodes that is running 2 apps including hello one you are going toorun.</span></span>  

<span data-ttu-id="093a4-177">**1. lépés: Annak ellenőrzése, hogy hány alkalmazások futnak, a fürt** –, hogy rendelkezik-e 2 ismeri a fürtben, beleértve az egyik toorun fog hello alkalmazásokat.</span><span class="sxs-lookup"><span data-stu-id="093a4-177">**Step 1: Determine how many apps are running on your cluster** – you know that you have 2 apps on your cluster, including hello one you are going toorun.</span></span>  

<span data-ttu-id="093a4-178">**2. lépés: Állítsa be az executor-memória** – ebben a példában azt határozza meg, hogy 6 GB memória végrehajtó intenzív i/o-feladat elegendő lesz-e.</span><span class="sxs-lookup"><span data-stu-id="093a4-178">**Step 2: Set executor-memory** – for this example, we determine that 6GB of executor-memory will be sufficient for I/O intensive job.</span></span>  

    executor-memory = 6GB
<span data-ttu-id="093a4-179">**3. lépés: Állítsa be az executor-magok** – mivel ez egy i/o-igényes feladat, azt állíthatja be az egyes végrehajtó too4 magok hello száma.</span><span class="sxs-lookup"><span data-stu-id="093a4-179">**Step 3: Set executor-cores** – Since this is an I/O intensive job, we can set hello number of cores for each executor too4.</span></span>  <span data-ttu-id="093a4-180">Magok száma végrehajtó toolarger beállítást, mint 4 szemétgyűjtési gyűjtemény problémákat okozhat.</span><span class="sxs-lookup"><span data-stu-id="093a4-180">Setting cores per executor toolarger than 4 may cause garbage collection problems.</span></span>  

    executor-cores = 4
<span data-ttu-id="093a4-181">**4. lépés: Fürt YARN memóriamennyiség meghatározása** – azt keresse meg a tooAmbari toofind ki, hogy minden D4v2 rendelkezik-e a YARN memória 25 GB.</span><span class="sxs-lookup"><span data-stu-id="093a4-181">**Step 4: Determine amount of YARN memory in cluster** – We navigate tooAmbari toofind out that each D4v2 has 25GB of YARN memory.</span></span>  <span data-ttu-id="093a4-182">Mivel nincsenek 8 csomópont, a rendszer megszorozza hello YARN memória 8.</span><span class="sxs-lookup"><span data-stu-id="093a4-182">Since there are 8 nodes, hello available YARN memory is multiplied by 8.</span></span>

    Total YARN memory = nodes * YARN memory* per node
    Total YARN memory = 8 nodes * 25GB = 200GB
<span data-ttu-id="093a4-183">**5. lépés: Kiszámításához num-végrehajtója** – hello num-végrehajtója paraméter határozza meg véve hello hello memória korlátozás és a hello CPU-korlátozás hello osztva a minimális száma Spark futó alkalmazásokra.</span><span class="sxs-lookup"><span data-stu-id="093a4-183">**Step 5: Calculate num-executors** – hello num-executors parameter is determined by taking hello minimum of hello memory constraint and hello CPU constraint divided by hello # of apps running on Spark.</span></span>    

<span data-ttu-id="093a4-184">**Memória megkötés kiszámításához** – hello memória megkötés számítása hello YARN memória összesen hello memória mennyisége végrehajtó hányadosa.</span><span class="sxs-lookup"><span data-stu-id="093a4-184">**Calculate memory constraint** – hello memory constraint is calculated as hello total YARN memory divided by hello memory per executor.</span></span>

    Memory constraint = (total YARN memory / executor memory) / # of apps   
    Memory constraint = (200GB / 6GB) / 2   
    Memory constraint = 16 (rounded)
<span data-ttu-id="093a4-185">**CPU-korlátozás kiszámításához** -hello CPU-korlátozás, teljes yarn magok hello végrehajtó magok száma osztva hello kiszámítása.</span><span class="sxs-lookup"><span data-stu-id="093a4-185">**Calculate CPU constraint** - hello CPU constraint is calculated as hello total yarn cores divided by hello number of cores per executor.</span></span>
    
    YARN cores = nodes in cluster * # of cores per node * 2   
    YARN cores = 8 nodes * 8 cores per D14 * 2 = 128
    CPU constraint = (total YARN cores / # of cores per executor) / # of apps
    CPU constraint = (128 / 4) / 2
    CPU constraint = 16
<span data-ttu-id="093a4-186">**Num-végrehajtója beállítása**</span><span class="sxs-lookup"><span data-stu-id="093a4-186">**Set num-executors**</span></span>

    num-executors = Min (memory constraint, CPU constraint)
    num-executors = Min (16, 16)
    num-executors = 16    

