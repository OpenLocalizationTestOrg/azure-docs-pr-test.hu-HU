---
title: "Titkosítás az Azure Data Lake Store-ban | Microsoft Docs"
description: "A titkosítás és a kulcsrotálás működésének megismerése az Azure Data Lake Store-ban"
services: data-lake-store
documentationcenter: 
author: yagupta
manager: 
editor: 
ms.assetid: 
ms.service: data-lake-store
ms.devlang: na
ms.topic: get-started-article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 4/14/2017
ms.author: yagupta
ms.openlocfilehash: 20444d368c568ee716ff242e33323b91ffd198eb
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 07/11/2017
---
# <a name="encryption-of-data-in-azure-data-lake-store"></a><span data-ttu-id="0c5fb-103">Az adatok titkosítása az Azure Data Lake Store-ban</span><span class="sxs-lookup"><span data-stu-id="0c5fb-103">Encryption of data in Azure Data Lake Store</span></span>

<span data-ttu-id="0c5fb-104">A titkosítás az Azure Data Lake Store-ban segíti az adatok védelmét, vállalati biztonsági szabályzatok implementálását és az előírt megfelelőségi követelmények teljesítését.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-104">Encryption in Azure Data Lake Store helps you protect your data, implement enterprise security policies, and meet regulatory compliance requirements.</span></span> <span data-ttu-id="0c5fb-105">Ez a cikk áttekintést nyújt a kialakításról, és ismerteti az implementálás egyes technikai aspektusait.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-105">This article provides an overview of the design, and discusses some of the technical aspects of implementation.</span></span>

<span data-ttu-id="0c5fb-106">A Data Lake Store az adatok titkosítását inaktív adatok és adatátvitel esetén egyaránt támogatja.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-106">Data Lake Store supports encryption of data both at rest and in transit.</span></span> <span data-ttu-id="0c5fb-107">Inaktív adatok esetén a Data Lake Store csak az alapértelmezés szerinti, átlátható titkosítást támogatja.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-107">For data at rest, Data Lake Store supports "on by default," transparent encryption.</span></span> <span data-ttu-id="0c5fb-108">Kicsit részletesebben kifejtve ez az alábbiakat jelenti:</span><span class="sxs-lookup"><span data-stu-id="0c5fb-108">Here is what these terms mean in a bit more detail:</span></span>

* <span data-ttu-id="0c5fb-109">**Alapértelmezés szerint bekapcsolva**: Új Data Lake Store-fiók létrehozásakor az alapértelmezés szerinti beállítás engedélyezi a titkosítást.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-109">**On by default**: When you create a new Data Lake Store account, the default setting enables encryption.</span></span> <span data-ttu-id="0c5fb-110">Ezután a Data Lake Store-ban tárolt adatokat a rendszer mindig titkosítja, mielőtt állandó adathordozón tárolná.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-110">Thereafter, data that is stored in Data Lake Store is always encrypted prior to storing on persistent media.</span></span> <span data-ttu-id="0c5fb-111">Minden adatnál ez lesz a viselkedés, és ez nem módosítható egy fiók létrehozása után.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-111">This is the behavior for all data, and it cannot be changed after an account is created.</span></span>
* <span data-ttu-id="0c5fb-112">**Transzparens**: A Data Lake Store automatikusan titkosítja az adatokat a tárolás előtt, és mindig visszafejti az adatokat lekérés előtt.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-112">**Transparent**: Data Lake Store automatically encrypts data prior to persisting, and decrypts data prior to retrieval.</span></span> <span data-ttu-id="0c5fb-113">A titkosítást egy rendszergazda konfigurálja és felügyeli a Data Lake Store szintjén.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-113">The encryption is configured and managed at the Data Lake Store level by an administrator.</span></span> <span data-ttu-id="0c5fb-114">Az adathozzáférési API-k nem módosulnak.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-114">No changes are made to the data access APIs.</span></span> <span data-ttu-id="0c5fb-115">Ezért a titkosítás miatt nincs szükség módosításokra a Data Lake Store-ral kommunikáló alkalmazásokban és szolgáltatásokban.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-115">Thus, no changes are required in applications and services that interact with Data Lake Store because of encryption.</span></span>

<span data-ttu-id="0c5fb-116">Az átvitt adatok (azaz a mozgásban lévő adatok) titkosítása is mindig a Data Lake Store-ban történik.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-116">Data in transit (also known as data in motion) is also always encrypted in Data Lake Store.</span></span> <span data-ttu-id="0c5fb-117">Amellett, hogy az adatok titkosítása az állandó adathordozón való tárolás előtt történik meg, az átvitt adatok is mindig titkosítva vannak HTTPS segítségével.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-117">In addition to encrypting data prior to storing to persistent media, the data is also always secured in transit by using HTTPS.</span></span> <span data-ttu-id="0c5fb-118">A HTTPS az egyetlen olyan protokoll, amely támogatott a Data Lake Store REST-felületeihez.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-118">HTTPS is the only protocol that is supported for the Data Lake Store REST interfaces.</span></span> <span data-ttu-id="0c5fb-119">Az alábbi ábra bemutatja, hogy a Data Lake Store hogyan titkosítja az adatokat.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-119">The following diagram shows how data becomes encrypted in Data Lake Store:</span></span>

![A Data Lake Store-ban végbemenő adattitkosítás ábrája](./media/data-lake-store-encryption/fig1.png)


## <a name="set-up-encryption-with-data-lake-store"></a><span data-ttu-id="0c5fb-121">Titkosítás beállítása a Data Lake Store-ral</span><span class="sxs-lookup"><span data-stu-id="0c5fb-121">Set up encryption with Data Lake Store</span></span>

<span data-ttu-id="0c5fb-122">A Data Lake Store titkosításának beállítása mindig a fiók létrehozása során történik, és alapértelmezés szerint minden esetben engedélyezve van.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-122">Encryption for Data Lake Store is set up during account creation, and it is always enabled by default.</span></span> <span data-ttu-id="0c5fb-123">A kulcsokat kezelheti saját maga, vagy hagyhatja, hogy a Data Lake Store kezelje őket Ön helyett (ez az alapértelmezett beállítás).</span><span class="sxs-lookup"><span data-stu-id="0c5fb-123">You can either manage the keys yourself, or allow Data Lake Store to manage them for you (this is the default).</span></span>

<span data-ttu-id="0c5fb-124">További részletekért lásd [az első lépéseket](https://docs.microsoft.com/azure/data-lake-store/data-lake-store-get-started-portal).</span><span class="sxs-lookup"><span data-stu-id="0c5fb-124">For more information, see [Getting started](https://docs.microsoft.com/azure/data-lake-store/data-lake-store-get-started-portal).</span></span>

## <a name="how-encryption-works-in-data-lake-store"></a><span data-ttu-id="0c5fb-125">A titkosítás működésének megismerése a Data Lake Store-ban</span><span class="sxs-lookup"><span data-stu-id="0c5fb-125">How encryption works in Data Lake Store</span></span>

<span data-ttu-id="0c5fb-126">A következőkben megismerheti a titkosítási főkulcsok kezelésének módját és a Data Lake Store-ban adattitkosításhoz használható három különböző kulcstípust.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-126">The following information covers how to manage master encryption keys, and it explains the three different types of keys you can use in data encryption for Data Lake Store.</span></span>

### <a name="master-encryption-keys"></a><span data-ttu-id="0c5fb-127">Titkosítási főkulcsok</span><span class="sxs-lookup"><span data-stu-id="0c5fb-127">Master encryption keys</span></span>

<span data-ttu-id="0c5fb-128">A Data Lake Store a titkosítási főkulcsok (Master Encryption Key, MEK) kezelését kétféle módon biztosítja.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-128">Data Lake Store provides two modes for management of master encryption keys (MEKs).</span></span> <span data-ttu-id="0c5fb-129">Jelen esetben azt feltételezzük, hogy a titkosítási főkulcs a legfelső szintű kulcs.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-129">For now, assume that the master encryption key is the top-level key.</span></span> <span data-ttu-id="0c5fb-130">A Data Lake Store-ban tárolt adatok visszafejtéséhez szükség van a titkosítási főkulcsra.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-130">Access to the master encryption key is required to decrypt any data stored in Data Lake Store.</span></span>

<span data-ttu-id="0c5fb-131">A titkosítási főkulcs kezelésének kétféle módja a következő:</span><span class="sxs-lookup"><span data-stu-id="0c5fb-131">The two modes for managing the master encryption key are as follows:</span></span>

*   <span data-ttu-id="0c5fb-132">Szolgáltatás által kezelt kulcsok</span><span class="sxs-lookup"><span data-stu-id="0c5fb-132">Service managed keys</span></span>
*   <span data-ttu-id="0c5fb-133">Felhasználó által kezelt kulcsok</span><span class="sxs-lookup"><span data-stu-id="0c5fb-133">Customer managed keys</span></span>

<span data-ttu-id="0c5fb-134">A titkosítási főkulcs mindkét mód esetében az Azure Key Vaultban van biztonságosan tárolva.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-134">In both modes, the master encryption key is secured by storing it in Azure Key Vault.</span></span> <span data-ttu-id="0c5fb-135">A Key Vault az Azure teljes körűen felügyelt, magas biztonsági szinten lévő szolgáltatása, amely biztosítja a titkosítási kulcsok védelmét.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-135">Key Vault is a fully managed, highly secure service on Azure that can be used to safeguard cryptographic keys.</span></span> <span data-ttu-id="0c5fb-136">További információkért lásd a [Key Vaultról](https://azure.microsoft.com/services/key-vault) szóló cikket.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-136">For more information, see [Key Vault](https://azure.microsoft.com/services/key-vault).</span></span>

<span data-ttu-id="0c5fb-137">Az alábbiakban röviden összehasonlítjuk a kétféle mód MEK-kezelési képességét.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-137">Here is a brief comparison of capabilities provided by the two modes of managing the MEKs.</span></span>

|  | <span data-ttu-id="0c5fb-138">Szolgáltatás által kezelt kulcsok</span><span class="sxs-lookup"><span data-stu-id="0c5fb-138">Service managed keys</span></span> | <span data-ttu-id="0c5fb-139">Felhasználó által kezelt kulcsok</span><span class="sxs-lookup"><span data-stu-id="0c5fb-139">Customer managed keys</span></span> |
| --- | --- | --- |
|<span data-ttu-id="0c5fb-140">Hogyan történik az adatok tárolása?</span><span class="sxs-lookup"><span data-stu-id="0c5fb-140">How is data stored?</span></span>|<span data-ttu-id="0c5fb-141">Mindig titkosítva a tárolást megelőzően.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-141">Always encrypted prior to being stored.</span></span>|<span data-ttu-id="0c5fb-142">Mindig titkosítva a tárolást megelőzően.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-142">Always encrypted prior to being stored.</span></span>|
|<span data-ttu-id="0c5fb-143">Hol történik a titkosítási főkulcs tárolása?</span><span class="sxs-lookup"><span data-stu-id="0c5fb-143">Where is the Master Encryption Key stored?</span></span>|<span data-ttu-id="0c5fb-144">Key Vault</span><span class="sxs-lookup"><span data-stu-id="0c5fb-144">Key Vault</span></span>|<span data-ttu-id="0c5fb-145">Key Vault</span><span class="sxs-lookup"><span data-stu-id="0c5fb-145">Key Vault</span></span>|
|<span data-ttu-id="0c5fb-146">Létezik-e titkosítatlanul, a Key Vaulton kívül tárolt titkosítási kulcs?</span><span class="sxs-lookup"><span data-stu-id="0c5fb-146">Are any encryption keys stored in the clear outside of Key Vault?</span></span> |<span data-ttu-id="0c5fb-147">Nem</span><span class="sxs-lookup"><span data-stu-id="0c5fb-147">No</span></span>|<span data-ttu-id="0c5fb-148">Nem</span><span class="sxs-lookup"><span data-stu-id="0c5fb-148">No</span></span>|
|<span data-ttu-id="0c5fb-149">Beolvasható a MEK a Key Vaultba?</span><span class="sxs-lookup"><span data-stu-id="0c5fb-149">Can the MEK be retrieved by Key Vault?</span></span>|<span data-ttu-id="0c5fb-150">Nem.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-150">No.</span></span> <span data-ttu-id="0c5fb-151">A MEK a Key Vaultban történő tárolása után kizárólag titkosításra és visszafejtésre használható.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-151">After the MEK is stored in Key Vault, it can only be used for encryption and decryption.</span></span>|<span data-ttu-id="0c5fb-152">Nem.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-152">No.</span></span> <span data-ttu-id="0c5fb-153">A MEK a Key Vaultban történő tárolása után kizárólag titkosításra és visszafejtésre használható.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-153">After the MEK is stored in Key Vault, it can only be used for encryption and decryption.</span></span>|
|<span data-ttu-id="0c5fb-154">Kié a Key Vault-példány és a titkosítási főkulcs?</span><span class="sxs-lookup"><span data-stu-id="0c5fb-154">Who owns the Key Vault instance and the MEK?</span></span>|<span data-ttu-id="0c5fb-155">A Data Lake Store szolgáltatás</span><span class="sxs-lookup"><span data-stu-id="0c5fb-155">The Data Lake Store service</span></span>|<span data-ttu-id="0c5fb-156">A Key Vault-példány az Öné, és az Ön Azure-előfizetéséhez tartozik.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-156">You own the Key Vault instance, which belongs in your own Azure subscription.</span></span> <span data-ttu-id="0c5fb-157">A Key Vaultban lévő MEK szoftver vagy hardver által felügyelt lehet.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-157">The MEK in Key Vault can be managed by software or hardware.</span></span>|
|<span data-ttu-id="0c5fb-158">Visszavonható a Data Lake Store szolgáltatáshoz tartozó MEK hozzáférése?</span><span class="sxs-lookup"><span data-stu-id="0c5fb-158">Can you revoke access to the MEK for the Data Lake Store service?</span></span>|<span data-ttu-id="0c5fb-159">Nem</span><span class="sxs-lookup"><span data-stu-id="0c5fb-159">No</span></span>|<span data-ttu-id="0c5fb-160">Igen.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-160">Yes.</span></span> <span data-ttu-id="0c5fb-161">Az ügyfelek kezelhetik a Key Vault hozzáférés-vezérlési listáit, és eltávolíthatják a Data Lake Store szolgáltatáshoz tartozó szolgáltatásidentitás hozzáférés-vezérlési bejegyzéseit.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-161">You can manage access control lists in Key Vault, and remove access control entries to the service identity for the Data Lake Store service.</span></span>|
|<span data-ttu-id="0c5fb-162">Törölhető véglegesen a titkosítási főkulcs?</span><span class="sxs-lookup"><span data-stu-id="0c5fb-162">Can you permanently delete the MEK?</span></span>|<span data-ttu-id="0c5fb-163">Nem</span><span class="sxs-lookup"><span data-stu-id="0c5fb-163">No</span></span>|<span data-ttu-id="0c5fb-164">Igen.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-164">Yes.</span></span> <span data-ttu-id="0c5fb-165">Ha az ügyfél törli a MEK-et a Key Vaultból, a Data Lake Store-fiók adatait senki nem tudja majd visszafejteni, még a Data Lake Store szolgáltatás sem.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-165">If you delete the MEK from Key Vault, the data in the Data Lake Store account cannot be decrypted by anyone, including the Data Lake Store service.</span></span> <br><br> <span data-ttu-id="0c5fb-166">Ha készült kifejezett biztonsági mentés a MEK-ről a Key Vaultból történő törlést megelőzően, akkor a kulcs, majd pedig az adatok visszaállíthatók.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-166">If you have explicitly backed up the MEK prior to deleting it from Key Vault, the MEK can be restored, and the data can then be recovered.</span></span> <span data-ttu-id="0c5fb-167">Ha azonban nem készült biztonsági mentés a MEK-ről a Key Vaultból történő törlést megelőzően, akkor a Data Lake Store-fiók adatait a továbbiakban soha nem lehet már visszafejteni.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-167">However, if you have not backed up the MEK prior to deleting it from Key Vault, the data in the Data Lake Store account can never be decrypted thereafter.</span></span>|


<span data-ttu-id="0c5fb-168">Ezen, a MEK kezelőjét és a Key Vault-példány elhelyezkedését illető eltérésen kívül a kialakítás a két mód esetében megegyezik.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-168">Aside from this difference of who manages the MEK and the Key Vault instance in which it resides, the rest of the design is the same for both modes.</span></span>

<span data-ttu-id="0c5fb-169">A titkosítási főkulcsok kezelési módjának megválasztásakor fontos szem előtt tartani a következőket:</span><span class="sxs-lookup"><span data-stu-id="0c5fb-169">It's important to remember the following when you choose the mode for the master encryption keys:</span></span>

*   <span data-ttu-id="0c5fb-170">A Data Lake Store-fiók létrehozásakor kiválaszthatja, hogy felhasználó által vagy a szolgáltatás által kezelt kulcsokat kíván-e használni.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-170">You can choose whether to use customer managed keys or service managed keys when you provision a Data Lake Store account.</span></span>
*   <span data-ttu-id="0c5fb-171">Ez a mód a Data Lake Store-fiókok üzembe helyezése után nem módosítható.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-171">After a Data Lake Store account is provisioned, the mode cannot be changed.</span></span>

### <a name="encryption-and-decryption-of-data"></a><span data-ttu-id="0c5fb-172">Adattitkosítás és -visszafejtés</span><span class="sxs-lookup"><span data-stu-id="0c5fb-172">Encryption and decryption of data</span></span>

<span data-ttu-id="0c5fb-173">Az adattitkosítás során háromféle kulcsot használunk.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-173">There are three types of keys that are used in the design of data encryption.</span></span> <span data-ttu-id="0c5fb-174">A következő táblázat az összefoglalást tartalmazza:</span><span class="sxs-lookup"><span data-stu-id="0c5fb-174">The following table provides a summary:</span></span>

| <span data-ttu-id="0c5fb-175">Kulcs</span><span class="sxs-lookup"><span data-stu-id="0c5fb-175">Key</span></span>                   | <span data-ttu-id="0c5fb-176">Rövidítés</span><span class="sxs-lookup"><span data-stu-id="0c5fb-176">Abbreviation</span></span> | <span data-ttu-id="0c5fb-177">Társítva ezzel:</span><span class="sxs-lookup"><span data-stu-id="0c5fb-177">Associated with</span></span> | <span data-ttu-id="0c5fb-178">Tárolási hely</span><span class="sxs-lookup"><span data-stu-id="0c5fb-178">Storage location</span></span>                             | <span data-ttu-id="0c5fb-179">Típus</span><span class="sxs-lookup"><span data-stu-id="0c5fb-179">Type</span></span>       | <span data-ttu-id="0c5fb-180">Megjegyzések</span><span class="sxs-lookup"><span data-stu-id="0c5fb-180">Notes</span></span>                                                                                                   |
|-----------------------|--------------|-----------------|----------------------------------------------|------------|---------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="0c5fb-181">Titkosítási főkulcs</span><span class="sxs-lookup"><span data-stu-id="0c5fb-181">Master Encryption Key</span></span> | <span data-ttu-id="0c5fb-182">MEK</span><span class="sxs-lookup"><span data-stu-id="0c5fb-182">MEK</span></span>          | <span data-ttu-id="0c5fb-183">Data Lake Store-fiók</span><span class="sxs-lookup"><span data-stu-id="0c5fb-183">A Data Lake Store account</span></span> | <span data-ttu-id="0c5fb-184">Key Vault</span><span class="sxs-lookup"><span data-stu-id="0c5fb-184">Key Vault</span></span>                              | <span data-ttu-id="0c5fb-185">Aszimmetrikus</span><span class="sxs-lookup"><span data-stu-id="0c5fb-185">Asymmetric</span></span> | <span data-ttu-id="0c5fb-186">Kezelheti a Data Lake Store, vagy Ön is.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-186">It can be managed by Data Lake Store or you.</span></span>                                                              |
| <span data-ttu-id="0c5fb-187">Adattitkosítási kulcs</span><span class="sxs-lookup"><span data-stu-id="0c5fb-187">Data Encryption Key</span></span>   | <span data-ttu-id="0c5fb-188">DEK</span><span class="sxs-lookup"><span data-stu-id="0c5fb-188">DEK</span></span>          | <span data-ttu-id="0c5fb-189">Data Lake Store-fiók</span><span class="sxs-lookup"><span data-stu-id="0c5fb-189">A Data Lake Store account</span></span> | <span data-ttu-id="0c5fb-190">Állandó tároló, a Data Lake Store szolgáltatás által kezelve</span><span class="sxs-lookup"><span data-stu-id="0c5fb-190">Persistent storage, managed by Data Lake Store service</span></span> | <span data-ttu-id="0c5fb-191">Szimmetrikus</span><span class="sxs-lookup"><span data-stu-id="0c5fb-191">Symmetric</span></span>  | <span data-ttu-id="0c5fb-192">A DEK titkosítását a MEK végzi.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-192">The DEK is encrypted by the MEK.</span></span> <span data-ttu-id="0c5fb-193">A szolgáltatás a titkosított DEK-et tárolja az állandó adathordozón.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-193">The encrypted DEK is what is stored on persistent media.</span></span> |
| <span data-ttu-id="0c5fb-194">Blokktitkosítási kulcs</span><span class="sxs-lookup"><span data-stu-id="0c5fb-194">Block Encryption Key</span></span>  | <span data-ttu-id="0c5fb-195">BEK</span><span class="sxs-lookup"><span data-stu-id="0c5fb-195">BEK</span></span>          | <span data-ttu-id="0c5fb-196">Egy adatblokk</span><span class="sxs-lookup"><span data-stu-id="0c5fb-196">A block of data</span></span> | <span data-ttu-id="0c5fb-197">None</span><span class="sxs-lookup"><span data-stu-id="0c5fb-197">None</span></span>                                         | <span data-ttu-id="0c5fb-198">Szimmetrikus</span><span class="sxs-lookup"><span data-stu-id="0c5fb-198">Symmetric</span></span>  | <span data-ttu-id="0c5fb-199">A blokktitkosítási kulcsot az adattitkosítási kulcsból és az adatblokkból származtatjuk.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-199">The BEK is derived from the DEK and the data block.</span></span>                                                      |

<span data-ttu-id="0c5fb-200">Az alapelveket a következő ábra mutatja be:</span><span class="sxs-lookup"><span data-stu-id="0c5fb-200">The following diagram illustrates these concepts:</span></span>

![Adattitkosítási kulcsok](./media/data-lake-store-encryption/fig2.png)

#### <a name="pseudo-algorithm-when-a-file-is-to-be-decrypted"></a><span data-ttu-id="0c5fb-202">A fájl visszafejtésekor használatos pszeudoalgoritmus:</span><span class="sxs-lookup"><span data-stu-id="0c5fb-202">Pseudo algorithm when a file is to be decrypted:</span></span>
1.  <span data-ttu-id="0c5fb-203">Ellenőrizze, hogy a Data Lake Store-fiók adattitkosítási kulcsa gyorsítótárazva van-e és használatra kész-e.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-203">Check if the DEK for the Data Lake Store account is cached and ready for use.</span></span>
    - <span data-ttu-id="0c5fb-204">Ha nem, olvassa ki a titkosított adattitkosítási kulcsot az állandó tárolóból, és visszafejtésre küldje el a Key Vaultba.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-204">If not, then read the encrypted DEK from persistent storage, and send it to Key Vault to be decrypted.</span></span> <span data-ttu-id="0c5fb-205">Gyorsítótárazza a visszafejtett adattitkosítási kulcsot.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-205">Cache the decrypted DEK in memory.</span></span> <span data-ttu-id="0c5fb-206">A fájl ezzel használatra kész.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-206">It is now ready to use.</span></span>
2.  <span data-ttu-id="0c5fb-207">A fájl minden adatblokkja esetében:</span><span class="sxs-lookup"><span data-stu-id="0c5fb-207">For every block of data in the file:</span></span>
    - <span data-ttu-id="0c5fb-208">Olvassa ki a titkosított adatblokkot az állandó tárolóból.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-208">Read the encrypted block of data from persistent storage.</span></span>
    - <span data-ttu-id="0c5fb-209">Hozza létre a blokktitkosítási kulcsot az adattitkosítási kulcsból és a titkosított adatblokkból.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-209">Generate the BEK from the DEK and the encrypted block of data.</span></span>
    - <span data-ttu-id="0c5fb-210">A blokktitkosítási kulcs használatával fejtse vissza az adatokat.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-210">Use the BEK to decrypt data.</span></span>


#### <a name="pseudo-algorithm-when-a-block-of-data-is-to-be-encrypted"></a><span data-ttu-id="0c5fb-211">Az adatblokk titkosításakor használatos pszeudoalgoritmus:</span><span class="sxs-lookup"><span data-stu-id="0c5fb-211">Pseudo algorithm when a block of data is to be encrypted:</span></span>
1.  <span data-ttu-id="0c5fb-212">Ellenőrizze, hogy a Data Lake Store-fiók adattitkosítási kulcsa gyorsítótárazva van-e és használatra kész-e.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-212">Check if the DEK for the Data Lake Store account is cached and ready for use.</span></span>
    - <span data-ttu-id="0c5fb-213">Ha nem, olvassa ki a titkosított adattitkosítási kulcsot az állandó tárolóból, és visszafejtésre küldje el a Key Vaultba.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-213">If not, then read the encrypted DEK from persistent storage, and send it to Key Vault to be decrypted.</span></span> <span data-ttu-id="0c5fb-214">Gyorsítótárazza a visszafejtett adattitkosítási kulcsot.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-214">Cache the decrypted DEK in memory.</span></span> <span data-ttu-id="0c5fb-215">A fájl ezzel használatra kész.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-215">It is now ready to use.</span></span>
2.  <span data-ttu-id="0c5fb-216">Hozzon létre egy egyedi blokktitkosítási kulcsot az adatblokk számára az adattitkosítási kulcsból.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-216">Generate a unique BEK for the block of data from the DEK.</span></span>
3.  <span data-ttu-id="0c5fb-217">AES-256 titkosítással végezze el a blokktitkosítási kulccsal ellátott adatblokk titkosítását.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-217">Encrypt the data block with the BEK, by using AES-256 encryption.</span></span>
4.  <span data-ttu-id="0c5fb-218">A titkosított adatblokk az állandó tárolóban lesz tárolva.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-218">Store the encrypted data block of data on persistent storage.</span></span>

> [!NOTE] 
> <span data-ttu-id="0c5fb-219">A titkosítatlan adattitkosítási kulcsot a rendszer a teljesítmény javítása érdekében egy rövid időre gyorsítótárazza a memóriában, és annak elteltével azonnal törli azt.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-219">For performance reasons, the DEK in the clear is cached in memory for a short time, and is immediately erased afterward.</span></span> <span data-ttu-id="0c5fb-220">Az állandó adathordozón a tárolás mindig a titkosítási főkulcs által titkosítva történik.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-220">On persistent media, it is always stored encrypted by the MEK.</span></span>

## <a name="key-rotation"></a><span data-ttu-id="0c5fb-221">Kulcsrotálás</span><span class="sxs-lookup"><span data-stu-id="0c5fb-221">Key rotation</span></span>

<span data-ttu-id="0c5fb-222">Felhasználó által kezelt kulcsok használata esetén a titkosítási főkulcs rotálható.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-222">When you are using customer-managed keys, you can rotate the MEK.</span></span> <span data-ttu-id="0c5fb-223">A Data Lake Store-fiók felhasználó által kezelt kulcsokkal történő beállításáért lásd [az első lépéseket](https://docs.microsoft.com/azure/data-lake-store/data-lake-store-get-started-portal).</span><span class="sxs-lookup"><span data-stu-id="0c5fb-223">To learn how to set up a Data Lake Store account with customer-managed keys, see [Getting started](https://docs.microsoft.com/azure/data-lake-store/data-lake-store-get-started-portal).</span></span>

### <a name="prerequisites"></a><span data-ttu-id="0c5fb-224">Előfeltételek</span><span class="sxs-lookup"><span data-stu-id="0c5fb-224">Prerequisites</span></span>

<span data-ttu-id="0c5fb-225">A Data Lake Store-fiók beállításánál a saját kulcsok használatát választotta.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-225">When you set up the Data Lake Store account, you have chosen to use your own keys.</span></span> <span data-ttu-id="0c5fb-226">A fiók létrehozása után ez a beállítás már nem módosítható.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-226">This option cannot be changed after the account has been created.</span></span> <span data-ttu-id="0c5fb-227">Az alábbi lépések során azt feltételezzük, hogy felhasználó által kezelt (tehát a Key Vaultból saját maga által kiválasztott) kulcsokat használ.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-227">The following steps assume that you are using customer-managed keys (that is, you have chosen your own keys from Key Vault).</span></span>

<span data-ttu-id="0c5fb-228">Vegye figyelembe, hogy az alapértelmezett titkosítási beállítások használatakor az adatok titkosítása mindig a Data Lake Store által kezelt kulcsokkal történik.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-228">Note that if you use the default options for encryption, your data is always encrypted by using keys managed by Data Lake Store.</span></span> <span data-ttu-id="0c5fb-229">Ez esetben nincs lehetőség a kulcsok rotálására, mivel azokat a Data Lake Store kezeli.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-229">In this option, you don't have the ability to rotate keys, as they are managed by Data Lake Store.</span></span>

### <a name="how-to-rotate-the-mek-in-data-lake-store"></a><span data-ttu-id="0c5fb-230">A titkosítási főkulcs rotálása a Data Lake Store-ban</span><span class="sxs-lookup"><span data-stu-id="0c5fb-230">How to rotate the MEK in Data Lake Store</span></span>

1. <span data-ttu-id="0c5fb-231">Jelentkezzen be az [Azure portálra](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="0c5fb-231">Sign in to the [Azure portal](https://portal.azure.com/).</span></span>
2. <span data-ttu-id="0c5fb-232">Nyissa meg a Data Lake Store-fiókhoz társított kulcsokat tároló Key Vaultot.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-232">Browse to the Key Vault instance that stores your keys associated with your Data Lake Store account.</span></span> <span data-ttu-id="0c5fb-233">Válassza a **Kulcsok** elemet.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-233">Select **Keys**.</span></span>

    ![Képernyőkép a Key Vaultról](./media/data-lake-store-encryption/keyvault.png)

3.  <span data-ttu-id="0c5fb-235">Válassza ki a Data Lake Store-fiókhoz társított kulcsot, és hozza létre annak egy új verzióját.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-235">Select the key associated with your Data Lake Store account, and create a new version of this key.</span></span> <span data-ttu-id="0c5fb-236">A Data Lake Store kizárólag az új kulcsverzióra történő kulcsrotálást támogatja.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-236">Note that Data Lake Store currently only supports key rotation to a new version of a key.</span></span> <span data-ttu-id="0c5fb-237">A más kulcsra történő kulcsrotálás nem támogatott.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-237">It doesn't support rotating to a different key.</span></span>

   ![Képernyőkép a Kulcsok ablakról, amelyen az Új verzió elem van kiemelve](./media/data-lake-store-encryption/keynewversion.png)

4.  <span data-ttu-id="0c5fb-239">Nyissa meg a Data Lake Store-tárfiókot, és válassza a **Titkosítás** elemet.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-239">Browse to the Data Lake Store storage account, and select **Encryption**.</span></span>

    ![Képernyőkép a Data Lake Store-tárfiók ablakról, amelyen a Titkosítás van kiemelve](./media/data-lake-store-encryption/select-encryption.png)

5.  <span data-ttu-id="0c5fb-241">Megjelenik egy tájékoztató üzenet arról, hogy a kulcs egy új verziója érhető el.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-241">A message notifies you that a new key version of the key is available.</span></span> <span data-ttu-id="0c5fb-242">A kulcs új verzióra történő frissítéséhez kattintson a **Kulcs rotálása** lehetőségre.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-242">Click **Rotate Key** to update the key to the new version.</span></span>

    ![Képernyőkép a Data Lake Store ablakról, amelyen az üzenet és a Kulcs rotálása van kiemelve](./media/data-lake-store-encryption/rotatekey.png)

<span data-ttu-id="0c5fb-244">Ez a művelet kevesebb mint két percet vehet igénybe, és a kulcsrotálás nem jár várt leállással.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-244">This operation should take less than two minutes, and there is no expected downtime due to key rotation.</span></span> <span data-ttu-id="0c5fb-245">A művelet befejezését követően a kulcs új verziója lesz használatban.</span><span class="sxs-lookup"><span data-stu-id="0c5fb-245">After the operation is complete, the new version of the key is in use.</span></span>
