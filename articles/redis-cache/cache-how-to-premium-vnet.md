---
title: "egy virtuális hálózatot egy prémium szintű Azure Redis Cache aaaConfigure |} Microsoft Docs"
description: "Megtudhatja, hogyan toocreate és kezelheti a Premium szint Azure Redis Cache példány virtuális hálózati támogatása"
services: redis-cache
documentationcenter: 
author: steved0x
manager: douge
editor: 
ms.assetid: 8b1e43a0-a70e-41e6-8994-0ac246d8bf7f
ms.service: cache
ms.workload: tbd
ms.tgt_pltfrm: cache-redis
ms.devlang: na
ms.topic: article
ms.date: 05/15/2017
ms.author: sdanie
ms.openlocfilehash: fab715f4d9365ee4c2f8b89d2e2e58768c25b671
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/06/2017
---
# <a name="how-tooconfigure-virtual-network-support-for-a-premium-azure-redis-cache"></a><span data-ttu-id="fb88c-103">Hogyan tooconfigure a virtuális hálózati egy prémium szintű Azure Redis Cache támogatása</span><span class="sxs-lookup"><span data-stu-id="fb88c-103">How tooconfigure Virtual Network Support for a Premium Azure Redis Cache</span></span>
<span data-ttu-id="fb88c-104">Azure Redis Cache rendelkezik másik gyorsítótármappa ajánlatokat, amelyek hello választott gyorsítótár mérete és a funkciót, beleértve a prémium réteg szolgáltatások, például a fürtszolgáltatás, az adatmegőrzésre és a virtuális hálózat támogatásának rugalmasságot biztosítanak.</span><span class="sxs-lookup"><span data-stu-id="fb88c-104">Azure Redis Cache has different cache offerings, which provide flexibility in hello choice of cache size and features, including Premium tier features such as clustering, persistence, and virtual network support.</span></span> <span data-ttu-id="fb88c-105">A virtuális hálózat egy magánhálózaton hello felhőben.</span><span class="sxs-lookup"><span data-stu-id="fb88c-105">A VNet is a private network in hello cloud.</span></span> <span data-ttu-id="fb88c-106">Egy Vnetet az Azure Redis Cache példány van beállítva, amikor nincs nyilvánosan megcímezhető, és csak a virtuális gépek és az alkalmazások hello virtuális hálózaton belül érhető el.</span><span class="sxs-lookup"><span data-stu-id="fb88c-106">When an Azure Redis Cache instance is configured with a VNet, it is not publicly addressable and can only be accessed from virtual machines and applications within hello VNet.</span></span> <span data-ttu-id="fb88c-107">Ez a cikk bemutatja, hogyan támogatják a virtuális hálózati tooconfigure a premium Azure Redis Cache példány.</span><span class="sxs-lookup"><span data-stu-id="fb88c-107">This article describes how tooconfigure virtual network support for a premium Azure Redis Cache instance.</span></span>

> [!NOTE]
> <span data-ttu-id="fb88c-108">Azure Redis Cache támogatja mindkét klasszikus és Resource Manager Vnetek.</span><span class="sxs-lookup"><span data-stu-id="fb88c-108">Azure Redis Cache supports both classic and Resource Manager VNets.</span></span>
> 
> 

<span data-ttu-id="fb88c-109">Más prémium gyorsítótár funkciókról további információért lásd: [bemutatása toohello Azure Redis Cache prémium szintjének](cache-premium-tier-intro.md).</span><span class="sxs-lookup"><span data-stu-id="fb88c-109">For information on other premium cache features, see [Introduction toohello Azure Redis Cache Premium tier](cache-premium-tier-intro.md).</span></span>

## <a name="why-vnet"></a><span data-ttu-id="fb88c-110">Miért virtuális hálózatot?</span><span class="sxs-lookup"><span data-stu-id="fb88c-110">Why VNet?</span></span>
<span data-ttu-id="fb88c-111">[Az Azure Virtual Network (VNet)](https://azure.microsoft.com/services/virtual-network/) telepítés biztosítja a fokozott biztonságot és az Azure Redis Cache, valamint a alhálózatok, hozzáférés-vezérlési házirendeket, elkülönítési és egyéb szolgáltatások toofurther korlátozhatja a hozzáférést.</span><span class="sxs-lookup"><span data-stu-id="fb88c-111">[Azure Virtual Network (VNet)](https://azure.microsoft.com/services/virtual-network/) deployment provides enhanced security and isolation for your Azure Redis Cache, as well as subnets, access control policies, and other features toofurther restrict access.</span></span>

## <a name="virtual-network-support"></a><span data-ttu-id="fb88c-112">Virtuális hálózati támogatása</span><span class="sxs-lookup"><span data-stu-id="fb88c-112">Virtual network support</span></span>
<span data-ttu-id="fb88c-113">Virtual Network (VNet) támogatása konfigurált hello **új Redis Cache** panel gyorsítótár létrehozása során.</span><span class="sxs-lookup"><span data-stu-id="fb88c-113">Virtual Network (VNet) support is configured on hello **New Redis Cache** blade during cache creation.</span></span> 

[!INCLUDE [redis-cache-create](../../includes/redis-cache-premium-create.md)]

<span data-ttu-id="fb88c-114">Miután kiválasztotta a prémium tarifacsomag, konfigurálhatja a virtuális hálózat, amely hello kiválasztásával Redis virtuális integráció azonos előfizetés és a gyorsítótár.</span><span class="sxs-lookup"><span data-stu-id="fb88c-114">Once you have selected a premium pricing tier, you can configure Redis VNet integration by selecting a VNet that is in hello same subscription and location as your cache.</span></span> <span data-ttu-id="fb88c-115">új virtuális hálózatot, toouse először hozza létre azt hello utasításait követve [hello Azure-portál virtuális hálózat létrehozása](../virtual-network/virtual-networks-create-vnet-arm-pportal.md) vagy [hozzon létre egy virtuális hálózat (klasszikus) hello Azure-portál használatával](../virtual-network/virtual-networks-create-vnet-classic-pportal.md) , és visszatér a toohello **Új Redis Cache** panel toocreate és a prémium szintű gyorsítótár konfigurálása.</span><span class="sxs-lookup"><span data-stu-id="fb88c-115">toouse a new VNet, create it first by following hello steps in [Create a virtual network using hello Azure portal](../virtual-network/virtual-networks-create-vnet-arm-pportal.md) or [Create a virtual network (classic) by using hello Azure portal](../virtual-network/virtual-networks-create-vnet-classic-pportal.md) and then return toohello **New Redis Cache** blade toocreate and configure your premium cache.</span></span>

<span data-ttu-id="fb88c-116">Kattintson az új gyorsítótár, a virtuális hálózat tooconfigure hello **virtuális hálózati** a hello **új Redis Cache** panelen, és jelölje be hello virtuális hálózat szükséges hello legördülő listából.</span><span class="sxs-lookup"><span data-stu-id="fb88c-116">tooconfigure hello VNet for your new cache, click **Virtual Network** on hello **New Redis Cache** blade, and select hello desired VNet from hello drop-down list.</span></span>

![Virtuális hálózat][redis-cache-vnet]

<span data-ttu-id="fb88c-118">Válassza ki a kívánt alhálózatot a hello hello **alhálózati** legördülő listában, és adja meg a szükséges hello **statikus IP-cím**.</span><span class="sxs-lookup"><span data-stu-id="fb88c-118">Select hello desired subnet from hello **Subnet** drop-down list, and specify hello desired **Static IP address**.</span></span> <span data-ttu-id="fb88c-119">Ha használja a klasszikus virtuális hálózat hello **statikus IP-cím** mező kitöltése nem kötelező, és ha nincs megadva, egy kijelölt hello alhálózatból választja.</span><span class="sxs-lookup"><span data-stu-id="fb88c-119">If you are using a classic VNet hello **Static IP address** field is optional, and if none is specified, one is chosen from hello selected subnet.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="fb88c-120">Az Azure Redis Cache tooa erőforrás-kezelő virtuális hálózat telepítésekor hello gyorsítótár, amely tartalmazza az Azure Redis Cache példány kívül más erőforrások dedikált alhálózat kell lennie.</span><span class="sxs-lookup"><span data-stu-id="fb88c-120">When deploying an Azure Redis Cache tooa Resource Manager VNet, hello cache must be in a dedicated subnet that contains no other resources except for Azure Redis Cache instances.</span></span> <span data-ttu-id="fb88c-121">Ha toodeploy tett kísérlet az Azure Redis Cache tooa más erőforrások, az hello telepítését tartalmazó erőforrás-kezelő virtuális hálózat tooa alhálózati sikertelen lesz.</span><span class="sxs-lookup"><span data-stu-id="fb88c-121">If an attempt is made toodeploy an Azure Redis Cache tooa Resource Manager VNet tooa subnet that contains other resources, hello deployment fails.</span></span>
> 
> 

![Virtuális hálózat][redis-cache-vnet-ip]

> [!IMPORTANT]
> <span data-ttu-id="fb88c-123">Azure fenntartja az egyes IP-címek minden alhálózaton belül, és ezeknél a címeknél nem használható.</span><span class="sxs-lookup"><span data-stu-id="fb88c-123">Azure reserves some IP addresses within each subnet, and these addresses can't be used.</span></span> <span data-ttu-id="fb88c-124">hello hello alhálózatok első és utolsó IP-címek számára fenntartott protokoll megfelelési, valamint három további címek az Azure-szolgáltatásokhoz használt.</span><span class="sxs-lookup"><span data-stu-id="fb88c-124">hello first and last IP addresses of hello subnets are reserved for protocol conformance, along with three more addresses used for Azure services.</span></span> <span data-ttu-id="fb88c-125">További információkért lásd: [vannak-e bármilyen korlátozás belül ezek alhálózatok IP-címeket használnak?](../virtual-network/virtual-networks-faq.md#are-there-any-restrictions-on-using-ip-addresses-within-these-subnets)</span><span class="sxs-lookup"><span data-stu-id="fb88c-125">For more information, see [Are there any restrictions on using IP addresses within these subnets?](../virtual-network/virtual-networks-faq.md#are-there-any-restrictions-on-using-ip-addresses-within-these-subnets)</span></span>
> 
> <span data-ttu-id="fb88c-126">Továbbá a hello Azure virtuális hálózat infrastruktúra által használt toohello IP-címek, a minden egyes Redis példány hello alhálózati használja a két IP-címek / shard és egy további IP-cím hello terheléselosztóhoz.</span><span class="sxs-lookup"><span data-stu-id="fb88c-126">In addition toohello IP addresses used by hello Azure VNET infrastructure, each Redis instance in hello subnet uses two IP addresses per shard and one additional IP address for hello load balancer.</span></span> <span data-ttu-id="fb88c-127">Egy nem fürtözött gyorsítótár toohave egy shard minősül.</span><span class="sxs-lookup"><span data-stu-id="fb88c-127">A non-clustered cache is considered toohave one shard.</span></span>
> 
> 

<span data-ttu-id="fb88c-128">Hello gyorsítótár létrehozása után megtekintheti kattintva hello VNet konfigurációja hello **virtuális hálózati** a hello **erőforrás menü**.</span><span class="sxs-lookup"><span data-stu-id="fb88c-128">After hello cache is created, you can view hello configuration for hello VNet by clicking **Virtual Network** from hello **Resource menu**.</span></span>

![Virtuális hálózat][redis-cache-vnet-info]

<span data-ttu-id="fb88c-130">tooconnect tooyour Azure Redis cache példány egy Vnetet használatakor hello kapcsolati karakterláncban adja meg a gyorsítótár hello állomásnevét, ahogy az alábbi példa hello:</span><span class="sxs-lookup"><span data-stu-id="fb88c-130">tooconnect tooyour Azure Redis cache instance when using a VNet, specify hello host name of your cache in hello connection string as shown in hello following example:</span></span>

    private static Lazy<ConnectionMultiplexer> lazyConnection = new Lazy<ConnectionMultiplexer>(() =>
    {
        return ConnectionMultiplexer.Connect("contoso5premium.redis.cache.windows.net,abortConnect=false,ssl=true,password=password");
    });

    public static ConnectionMultiplexer Connection
    {
        get
        {
            return lazyConnection.Value;
        }
    }

## <a name="azure-redis-cache-vnet-faq"></a><span data-ttu-id="fb88c-131">Azure Redis Cache VNet – gyakori kérdések</span><span class="sxs-lookup"><span data-stu-id="fb88c-131">Azure Redis Cache VNet FAQ</span></span>
<span data-ttu-id="fb88c-132">a következő lista hello hello Azure Redis Cache méretezésével kapcsolatos kérdések válaszok toocommonly tartalmazza.</span><span class="sxs-lookup"><span data-stu-id="fb88c-132">hello following list contains answers toocommonly asked questions about hello Azure Redis Cache scaling.</span></span>

* [<span data-ttu-id="fb88c-133">Mik azok a gyakori hiba a konfiguráció problémákat az Azure Redis Cache és Vnetekhez?</span><span class="sxs-lookup"><span data-stu-id="fb88c-133">What are some common misconfiguration issues with Azure Redis Cache and VNets?</span></span>](#what-are-some-common-misconfiguration-issues-with-azure-redis-cache-and-vnets)
* [<span data-ttu-id="fb88c-134">Hogyan ellenőrizhetem, hogy működik-e a gyorsítótár a VNETEN belül?</span><span class="sxs-lookup"><span data-stu-id="fb88c-134">How can I verify that my cache is working in a VNET?</span></span>](#how-can-i-verify-that-my-cache-is-working-in-a-vnet)
* [<span data-ttu-id="fb88c-135">Használható alapszintű vagy standard gyorsítótárával Vnetekhez?</span><span class="sxs-lookup"><span data-stu-id="fb88c-135">Can I use VNets with a standard or basic cache?</span></span>](#can-i-use-vnets-with-a-standard-or-basic-cache)
* [<span data-ttu-id="fb88c-136">Miért nem a Redis gyorsítótár létrehozása sikertelen lesz az egyes alhálózatok, de nem mások?</span><span class="sxs-lookup"><span data-stu-id="fb88c-136">Why does creating a Redis cache fail in some subnets but not others?</span></span>](#why-does-creating-a-redis-cache-fail-in-some-subnets-but-not-others)
* [<span data-ttu-id="fb88c-137">Mik azok a hello alhálózati kapcsolatos követelmények?</span><span class="sxs-lookup"><span data-stu-id="fb88c-137">What are hello subnet address space requirements?</span></span>](#what-are-the-subnet-address-space-requirements)
* [<span data-ttu-id="fb88c-138">Működnek-e minden gyorsítótár-funkciók egy VNETET a gyorsítótárhoz esetén?</span><span class="sxs-lookup"><span data-stu-id="fb88c-138">Do all cache features work when hosting a cache in a VNET?</span></span>](#do-all-cache-features-work-when-hosting-a-cache-in-a-vnet)

## <a name="what-are-some-common-misconfiguration-issues-with-azure-redis-cache-and-vnets"></a><span data-ttu-id="fb88c-139">Mik azok a gyakori hiba a konfiguráció problémákat az Azure Redis Cache és Vnetekhez?</span><span class="sxs-lookup"><span data-stu-id="fb88c-139">What are some common misconfiguration issues with Azure Redis Cache and VNets?</span></span>
<span data-ttu-id="fb88c-140">Azure Redis Cache a Vneten belül helyezkedik el, amikor a rendszer a következő táblák hello hello portokat használja.</span><span class="sxs-lookup"><span data-stu-id="fb88c-140">When Azure Redis Cache is hosted in a VNet, hello ports in hello following tables are used.</span></span> 

>[!IMPORTANT]
><span data-ttu-id="fb88c-141">Ha a következő táblák hello hello portjainak blokkolja, előfordulhat, hogy hello gyorsítótár nem működik megfelelően.</span><span class="sxs-lookup"><span data-stu-id="fb88c-141">If hello ports in hello following tables are blocked, hello cache may not function correctly.</span></span> <span data-ttu-id="fb88c-142">Rendelkezik egy vagy több ezeket a portokat blokkolva hello leggyakoribb helytelen konfiguráció probléma használata esetén egy Vnetet az Azure Redis Cache.</span><span class="sxs-lookup"><span data-stu-id="fb88c-142">Having one or more of these ports blocked is hello most common misconfiguration issue when using Azure Redis Cache in a VNet.</span></span>
> 
> 

- [<span data-ttu-id="fb88c-143">Kimenő portokra vonatkozó követelmények</span><span class="sxs-lookup"><span data-stu-id="fb88c-143">Outbound port requirements</span></span>](#outbound-port-requirements)
- [<span data-ttu-id="fb88c-144">Bejövő portokra vonatkozó követelmények</span><span class="sxs-lookup"><span data-stu-id="fb88c-144">Inbound port requirements</span></span>](#inbound-port-requirements)

### <a name="outbound-port-requirements"></a><span data-ttu-id="fb88c-145">Kimenő portokra vonatkozó követelmények</span><span class="sxs-lookup"><span data-stu-id="fb88c-145">Outbound port requirements</span></span>

<span data-ttu-id="fb88c-146">Nincsenek hét kimenő port.</span><span class="sxs-lookup"><span data-stu-id="fb88c-146">There are seven outbound port requirements.</span></span>

- <span data-ttu-id="fb88c-147">Ha szükséges, minden kimenő kapcsolatok toohello internet létrehozható egy ügyfélen keresztül helyszíni naplózási eszköz.</span><span class="sxs-lookup"><span data-stu-id="fb88c-147">If desired, all outbound connections toohello internet can be made through a client's on-premises auditing device.</span></span>
- <span data-ttu-id="fb88c-148">Három hello portok útvonal-forgalom tooAzure végpontok karbantartási Azure Storage és az Azure DNS-ben.</span><span class="sxs-lookup"><span data-stu-id="fb88c-148">Three of hello ports route traffic tooAzure endpoints servicing Azure Storage and Azure DNS.</span></span>
- <span data-ttu-id="fb88c-149">porttartományok fennmaradó hello és a belső Redis alhálózati kommunikációhoz.</span><span class="sxs-lookup"><span data-stu-id="fb88c-149">hello remaining port ranges and for internal Redis subnet communications.</span></span> <span data-ttu-id="fb88c-150">Nincs alhálózat NSG-szabályok a belső Redis alhálózati kommunikációhoz szükségesek.</span><span class="sxs-lookup"><span data-stu-id="fb88c-150">No subnet NSG rules are required for internal Redis subnet communications.</span></span>

| <span data-ttu-id="fb88c-151">Port(ok)</span><span class="sxs-lookup"><span data-stu-id="fb88c-151">Port(s)</span></span> | <span data-ttu-id="fb88c-152">Irány</span><span class="sxs-lookup"><span data-stu-id="fb88c-152">Direction</span></span> | <span data-ttu-id="fb88c-153">Átviteli protokoll</span><span class="sxs-lookup"><span data-stu-id="fb88c-153">Transport Protocol</span></span> | <span data-ttu-id="fb88c-154">Cél</span><span class="sxs-lookup"><span data-stu-id="fb88c-154">Purpose</span></span> | <span data-ttu-id="fb88c-155">Helyi IP</span><span class="sxs-lookup"><span data-stu-id="fb88c-155">Local IP</span></span> | <span data-ttu-id="fb88c-156">Távoli IP</span><span class="sxs-lookup"><span data-stu-id="fb88c-156">Remote IP</span></span> |
| --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="fb88c-157">80, 443</span><span class="sxs-lookup"><span data-stu-id="fb88c-157">80, 443</span></span> |<span data-ttu-id="fb88c-158">Kimenő</span><span class="sxs-lookup"><span data-stu-id="fb88c-158">Outbound</span></span> |<span data-ttu-id="fb88c-159">TCP</span><span class="sxs-lookup"><span data-stu-id="fb88c-159">TCP</span></span> |<span data-ttu-id="fb88c-160">Redis függőségek az Azure Storage/nyilvános kulcsokra épülő infrastruktúra (Internet)</span><span class="sxs-lookup"><span data-stu-id="fb88c-160">Redis dependencies on Azure Storage/PKI (Internet)</span></span> | <span data-ttu-id="fb88c-161">(Redis alhálózati)</span><span class="sxs-lookup"><span data-stu-id="fb88c-161">(Redis subnet)</span></span> |* |
| <span data-ttu-id="fb88c-162">53</span><span class="sxs-lookup"><span data-stu-id="fb88c-162">53</span></span> |<span data-ttu-id="fb88c-163">Kimenő</span><span class="sxs-lookup"><span data-stu-id="fb88c-163">Outbound</span></span> |<span data-ttu-id="fb88c-164">TCP/UDP</span><span class="sxs-lookup"><span data-stu-id="fb88c-164">TCP/UDP</span></span> |<span data-ttu-id="fb88c-165">A DNS-(Internet/VNet) függőségek redis</span><span class="sxs-lookup"><span data-stu-id="fb88c-165">Redis dependencies on DNS (Internet/VNet)</span></span> | <span data-ttu-id="fb88c-166">(Redis alhálózati)</span><span class="sxs-lookup"><span data-stu-id="fb88c-166">(Redis subnet)</span></span> |* |
| <span data-ttu-id="fb88c-167">8443</span><span class="sxs-lookup"><span data-stu-id="fb88c-167">8443</span></span> |<span data-ttu-id="fb88c-168">Kimenő</span><span class="sxs-lookup"><span data-stu-id="fb88c-168">Outbound</span></span> |<span data-ttu-id="fb88c-169">TCP</span><span class="sxs-lookup"><span data-stu-id="fb88c-169">TCP</span></span> |<span data-ttu-id="fb88c-170">Belső Redis-kommunikáció</span><span class="sxs-lookup"><span data-stu-id="fb88c-170">Internal communications for Redis</span></span> | <span data-ttu-id="fb88c-171">(Redis alhálózati)</span><span class="sxs-lookup"><span data-stu-id="fb88c-171">(Redis subnet)</span></span> | <span data-ttu-id="fb88c-172">(Redis alhálózati)</span><span class="sxs-lookup"><span data-stu-id="fb88c-172">(Redis subnet)</span></span> |
| <span data-ttu-id="fb88c-173">10221-10231</span><span class="sxs-lookup"><span data-stu-id="fb88c-173">10221-10231</span></span> |<span data-ttu-id="fb88c-174">Kimenő</span><span class="sxs-lookup"><span data-stu-id="fb88c-174">Outbound</span></span> |<span data-ttu-id="fb88c-175">TCP</span><span class="sxs-lookup"><span data-stu-id="fb88c-175">TCP</span></span> |<span data-ttu-id="fb88c-176">Belső Redis-kommunikáció</span><span class="sxs-lookup"><span data-stu-id="fb88c-176">Internal communications for Redis</span></span> | <span data-ttu-id="fb88c-177">(Redis alhálózati)</span><span class="sxs-lookup"><span data-stu-id="fb88c-177">(Redis subnet)</span></span> | <span data-ttu-id="fb88c-178">(Redis alhálózati)</span><span class="sxs-lookup"><span data-stu-id="fb88c-178">(Redis subnet)</span></span> |
| <span data-ttu-id="fb88c-179">20226</span><span class="sxs-lookup"><span data-stu-id="fb88c-179">20226</span></span> |<span data-ttu-id="fb88c-180">Kimenő</span><span class="sxs-lookup"><span data-stu-id="fb88c-180">Outbound</span></span> |<span data-ttu-id="fb88c-181">TCP</span><span class="sxs-lookup"><span data-stu-id="fb88c-181">TCP</span></span> |<span data-ttu-id="fb88c-182">Belső Redis-kommunikáció</span><span class="sxs-lookup"><span data-stu-id="fb88c-182">Internal communications for Redis</span></span> | <span data-ttu-id="fb88c-183">(Redis alhálózati)</span><span class="sxs-lookup"><span data-stu-id="fb88c-183">(Redis subnet)</span></span> |<span data-ttu-id="fb88c-184">(Redis alhálózati)</span><span class="sxs-lookup"><span data-stu-id="fb88c-184">(Redis subnet)</span></span> |
| <span data-ttu-id="fb88c-185">13000-13999</span><span class="sxs-lookup"><span data-stu-id="fb88c-185">13000-13999</span></span> |<span data-ttu-id="fb88c-186">Kimenő</span><span class="sxs-lookup"><span data-stu-id="fb88c-186">Outbound</span></span> |<span data-ttu-id="fb88c-187">TCP</span><span class="sxs-lookup"><span data-stu-id="fb88c-187">TCP</span></span> |<span data-ttu-id="fb88c-188">Belső Redis-kommunikáció</span><span class="sxs-lookup"><span data-stu-id="fb88c-188">Internal communications for Redis</span></span> | <span data-ttu-id="fb88c-189">(Redis alhálózati)</span><span class="sxs-lookup"><span data-stu-id="fb88c-189">(Redis subnet)</span></span> |<span data-ttu-id="fb88c-190">(Redis alhálózati)</span><span class="sxs-lookup"><span data-stu-id="fb88c-190">(Redis subnet)</span></span> |
| <span data-ttu-id="fb88c-191">15000-15999</span><span class="sxs-lookup"><span data-stu-id="fb88c-191">15000-15999</span></span> |<span data-ttu-id="fb88c-192">Kimenő</span><span class="sxs-lookup"><span data-stu-id="fb88c-192">Outbound</span></span> |<span data-ttu-id="fb88c-193">TCP</span><span class="sxs-lookup"><span data-stu-id="fb88c-193">TCP</span></span> |<span data-ttu-id="fb88c-194">Belső Redis-kommunikáció</span><span class="sxs-lookup"><span data-stu-id="fb88c-194">Internal communications for Redis</span></span> | <span data-ttu-id="fb88c-195">(Redis alhálózati)</span><span class="sxs-lookup"><span data-stu-id="fb88c-195">(Redis subnet)</span></span> |<span data-ttu-id="fb88c-196">(Redis alhálózati)</span><span class="sxs-lookup"><span data-stu-id="fb88c-196">(Redis subnet)</span></span> |


### <a name="inbound-port-requirements"></a><span data-ttu-id="fb88c-197">Bejövő portokra vonatkozó követelmények</span><span class="sxs-lookup"><span data-stu-id="fb88c-197">Inbound port requirements</span></span>

<span data-ttu-id="fb88c-198">Nincsenek nyolc bejövő port tartományon.</span><span class="sxs-lookup"><span data-stu-id="fb88c-198">There are eight inbound port range requirements.</span></span> <span data-ttu-id="fb88c-199">A bejövő kérések ezen tartományok használata vagy bejövő más hello üzemeltetett szolgáltatások ugyanazt a virtuális Hálózatot, vagy a belső toohello Redis alhálózati kommunikáció.</span><span class="sxs-lookup"><span data-stu-id="fb88c-199">Inbound requests in these ranges are either inbound from other services hosted in hello same VNET or internal toohello Redis subnet communications.</span></span>

| <span data-ttu-id="fb88c-200">Port(ok)</span><span class="sxs-lookup"><span data-stu-id="fb88c-200">Port(s)</span></span> | <span data-ttu-id="fb88c-201">Irány</span><span class="sxs-lookup"><span data-stu-id="fb88c-201">Direction</span></span> | <span data-ttu-id="fb88c-202">Átviteli protokoll</span><span class="sxs-lookup"><span data-stu-id="fb88c-202">Transport Protocol</span></span> | <span data-ttu-id="fb88c-203">Cél</span><span class="sxs-lookup"><span data-stu-id="fb88c-203">Purpose</span></span> | <span data-ttu-id="fb88c-204">Helyi IP</span><span class="sxs-lookup"><span data-stu-id="fb88c-204">Local IP</span></span> | <span data-ttu-id="fb88c-205">Távoli IP</span><span class="sxs-lookup"><span data-stu-id="fb88c-205">Remote IP</span></span> |
| --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="fb88c-206">6379, 6380</span><span class="sxs-lookup"><span data-stu-id="fb88c-206">6379, 6380</span></span> |<span data-ttu-id="fb88c-207">Bejövő</span><span class="sxs-lookup"><span data-stu-id="fb88c-207">Inbound</span></span> |<span data-ttu-id="fb88c-208">TCP</span><span class="sxs-lookup"><span data-stu-id="fb88c-208">TCP</span></span> |<span data-ttu-id="fb88c-209">Ügyfél-kommunikáció tooRedis, Azure terheléselosztás</span><span class="sxs-lookup"><span data-stu-id="fb88c-209">Client communication tooRedis, Azure load balancing</span></span> | <span data-ttu-id="fb88c-210">(Redis alhálózati)</span><span class="sxs-lookup"><span data-stu-id="fb88c-210">(Redis subnet)</span></span> |<span data-ttu-id="fb88c-211">Virtuális hálózat, az Azure terheléselosztó</span><span class="sxs-lookup"><span data-stu-id="fb88c-211">Virtual Network, Azure Load Balancer</span></span> |
| <span data-ttu-id="fb88c-212">8443</span><span class="sxs-lookup"><span data-stu-id="fb88c-212">8443</span></span> |<span data-ttu-id="fb88c-213">Bejövő</span><span class="sxs-lookup"><span data-stu-id="fb88c-213">Inbound</span></span> |<span data-ttu-id="fb88c-214">TCP</span><span class="sxs-lookup"><span data-stu-id="fb88c-214">TCP</span></span> |<span data-ttu-id="fb88c-215">Belső Redis-kommunikáció</span><span class="sxs-lookup"><span data-stu-id="fb88c-215">Internal communications for Redis</span></span> | <span data-ttu-id="fb88c-216">(Redis alhálózati)</span><span class="sxs-lookup"><span data-stu-id="fb88c-216">(Redis subnet)</span></span> |<span data-ttu-id="fb88c-217">(Redis alhálózati)</span><span class="sxs-lookup"><span data-stu-id="fb88c-217">(Redis subnet)</span></span> |
| <span data-ttu-id="fb88c-218">8500</span><span class="sxs-lookup"><span data-stu-id="fb88c-218">8500</span></span> |<span data-ttu-id="fb88c-219">Bejövő</span><span class="sxs-lookup"><span data-stu-id="fb88c-219">Inbound</span></span> |<span data-ttu-id="fb88c-220">TCP/UDP</span><span class="sxs-lookup"><span data-stu-id="fb88c-220">TCP/UDP</span></span> |<span data-ttu-id="fb88c-221">Az Azure terheléselosztás</span><span class="sxs-lookup"><span data-stu-id="fb88c-221">Azure load balancing</span></span> | <span data-ttu-id="fb88c-222">(Redis alhálózati)</span><span class="sxs-lookup"><span data-stu-id="fb88c-222">(Redis subnet)</span></span> |<span data-ttu-id="fb88c-223">Azure Load Balancer</span><span class="sxs-lookup"><span data-stu-id="fb88c-223">Azure Load Balancer</span></span> |
| <span data-ttu-id="fb88c-224">10221-10231</span><span class="sxs-lookup"><span data-stu-id="fb88c-224">10221-10231</span></span> |<span data-ttu-id="fb88c-225">Bejövő</span><span class="sxs-lookup"><span data-stu-id="fb88c-225">Inbound</span></span> |<span data-ttu-id="fb88c-226">TCP</span><span class="sxs-lookup"><span data-stu-id="fb88c-226">TCP</span></span> |<span data-ttu-id="fb88c-227">Belső Redis-kommunikáció</span><span class="sxs-lookup"><span data-stu-id="fb88c-227">Internal communications for Redis</span></span> | <span data-ttu-id="fb88c-228">(Redis alhálózati)</span><span class="sxs-lookup"><span data-stu-id="fb88c-228">(Redis subnet)</span></span> |<span data-ttu-id="fb88c-229">(Redis alhálózati), Azure Load Balancer</span><span class="sxs-lookup"><span data-stu-id="fb88c-229">(Redis subnet), Azure Load Balancer</span></span> |
| <span data-ttu-id="fb88c-230">13000-13999</span><span class="sxs-lookup"><span data-stu-id="fb88c-230">13000-13999</span></span> |<span data-ttu-id="fb88c-231">Bejövő</span><span class="sxs-lookup"><span data-stu-id="fb88c-231">Inbound</span></span> |<span data-ttu-id="fb88c-232">TCP</span><span class="sxs-lookup"><span data-stu-id="fb88c-232">TCP</span></span> |<span data-ttu-id="fb88c-233">Ügyfél-kommunikáció tooRedis fürtök, Azure terheléselosztás</span><span class="sxs-lookup"><span data-stu-id="fb88c-233">Client communication tooRedis Clusters, Azure load balancing</span></span> | <span data-ttu-id="fb88c-234">(Redis alhálózati)</span><span class="sxs-lookup"><span data-stu-id="fb88c-234">(Redis subnet)</span></span> |<span data-ttu-id="fb88c-235">Virtuális hálózat, az Azure terheléselosztó</span><span class="sxs-lookup"><span data-stu-id="fb88c-235">Virtual Network, Azure Load Balancer</span></span> |
| <span data-ttu-id="fb88c-236">15000-15999</span><span class="sxs-lookup"><span data-stu-id="fb88c-236">15000-15999</span></span> |<span data-ttu-id="fb88c-237">Bejövő</span><span class="sxs-lookup"><span data-stu-id="fb88c-237">Inbound</span></span> |<span data-ttu-id="fb88c-238">TCP</span><span class="sxs-lookup"><span data-stu-id="fb88c-238">TCP</span></span> |<span data-ttu-id="fb88c-239">Ügyfél-kommunikáció tooRedis fürtök, Azure terheléselosztás</span><span class="sxs-lookup"><span data-stu-id="fb88c-239">Client communication tooRedis Clusters, Azure load Balancing</span></span> | <span data-ttu-id="fb88c-240">(Redis alhálózati)</span><span class="sxs-lookup"><span data-stu-id="fb88c-240">(Redis subnet)</span></span> |<span data-ttu-id="fb88c-241">Virtuális hálózat, az Azure terheléselosztó</span><span class="sxs-lookup"><span data-stu-id="fb88c-241">Virtual Network, Azure Load Balancer</span></span> |
| <span data-ttu-id="fb88c-242">16001</span><span class="sxs-lookup"><span data-stu-id="fb88c-242">16001</span></span> |<span data-ttu-id="fb88c-243">Bejövő</span><span class="sxs-lookup"><span data-stu-id="fb88c-243">Inbound</span></span> |<span data-ttu-id="fb88c-244">TCP/UDP</span><span class="sxs-lookup"><span data-stu-id="fb88c-244">TCP/UDP</span></span> |<span data-ttu-id="fb88c-245">Az Azure terheléselosztás</span><span class="sxs-lookup"><span data-stu-id="fb88c-245">Azure load balancing</span></span> | <span data-ttu-id="fb88c-246">(Redis alhálózati)</span><span class="sxs-lookup"><span data-stu-id="fb88c-246">(Redis subnet)</span></span> |<span data-ttu-id="fb88c-247">Azure Load Balancer</span><span class="sxs-lookup"><span data-stu-id="fb88c-247">Azure Load Balancer</span></span> |
| <span data-ttu-id="fb88c-248">20226</span><span class="sxs-lookup"><span data-stu-id="fb88c-248">20226</span></span> |<span data-ttu-id="fb88c-249">Bejövő</span><span class="sxs-lookup"><span data-stu-id="fb88c-249">Inbound</span></span> |<span data-ttu-id="fb88c-250">TCP</span><span class="sxs-lookup"><span data-stu-id="fb88c-250">TCP</span></span> |<span data-ttu-id="fb88c-251">Belső Redis-kommunikáció</span><span class="sxs-lookup"><span data-stu-id="fb88c-251">Internal communications for Redis</span></span> | <span data-ttu-id="fb88c-252">(Redis alhálózati)</span><span class="sxs-lookup"><span data-stu-id="fb88c-252">(Redis subnet)</span></span> |<span data-ttu-id="fb88c-253">(Redis alhálózati)</span><span class="sxs-lookup"><span data-stu-id="fb88c-253">(Redis subnet)</span></span> |

### <a name="additional-vnet-network-connectivity-requirements"></a><span data-ttu-id="fb88c-254">További virtuális hálózat hálózati kapcsolat követelmények</span><span class="sxs-lookup"><span data-stu-id="fb88c-254">Additional VNET network connectivity requirements</span></span>

<span data-ttu-id="fb88c-255">Nincsenek hálózati kapcsolat az Azure Redis Cache, előfordulhat, hogy kezdetben jutott virtuális hálózatban.</span><span class="sxs-lookup"><span data-stu-id="fb88c-255">There are network connectivity requirements for Azure Redis Cache that may not be initially met in a virtual network.</span></span> <span data-ttu-id="fb88c-256">Azure Redis Cache szükséges összes hello a következő elemek toofunction megfelelően, ha a virtuális hálózaton belül.</span><span class="sxs-lookup"><span data-stu-id="fb88c-256">Azure Redis Cache requires all hello following items toofunction properly when used within a virtual network.</span></span>

* <span data-ttu-id="fb88c-257">Kimenő hálózati kapcsolat tooAzure tárolási végpontok világszerte.</span><span class="sxs-lookup"><span data-stu-id="fb88c-257">Outbound network connectivity tooAzure Storage endpoints worldwide.</span></span> <span data-ttu-id="fb88c-258">Ez magában foglalja a végpontok hello található hello Azure Redis Cache példány, valamint tárolási végpontok található, és ugyanabban a régióban **más** Azure-régiók.</span><span class="sxs-lookup"><span data-stu-id="fb88c-258">This includes endpoints located in hello same region as hello Azure Redis Cache instance, as well as storage endpoints located in **other** Azure regions.</span></span> <span data-ttu-id="fb88c-259">Azure Storage-végpontok oldja meg a következő DNS-tartományok hello: *table.core.windows.net*, *blob.core.windows.net*, *queue.core.windows.net*, és *file.core.windows.net*.</span><span class="sxs-lookup"><span data-stu-id="fb88c-259">Azure Storage endpoints resolve under hello following DNS domains: *table.core.windows.net*, *blob.core.windows.net*, *queue.core.windows.net*, and *file.core.windows.net*.</span></span> 
* <span data-ttu-id="fb88c-260">Kimenő hálózati kapcsolatra túl*ocsp.msocsp.com*, *mscrl.microsoft.com*, és *crl.microsoft.com*. Ez az összekapcsolhatóság szükséges toosupport SSL funkció.</span><span class="sxs-lookup"><span data-stu-id="fb88c-260">Outbound network connectivity too*ocsp.msocsp.com*, *mscrl.microsoft.com*, and *crl.microsoft.com*. This connectivity is needed toosupport SSL functionality.</span></span>
* <span data-ttu-id="fb88c-261">hello virtuális hálózat DNS-konfiguráció hello megoldásának hello végpontok képesnek kell lennie, és a tartományok említett hello korábbi pontok.</span><span class="sxs-lookup"><span data-stu-id="fb88c-261">hello DNS configuration for hello virtual network must be capable of resolving all of hello endpoints and domains mentioned in hello earlier points.</span></span> <span data-ttu-id="fb88c-262">A DNS-követelmények érheti el, egy érvényes DNS-infrastruktúra hello virtuális hálózat megmarad és konfigurált biztosításával.</span><span class="sxs-lookup"><span data-stu-id="fb88c-262">These DNS requirements can be met by ensuring a valid DNS infrastructure is configured and maintained for hello virtual network.</span></span>
* <span data-ttu-id="fb88c-263">Kimenő hálózati kapcsolat toohello Azure figyelési végpontok, amelyek alapján a következő DNS-tartományok hello feloldani a következő: shoebox2-black.shoebox2.metrics.nsatc.net, Észak-prod2.prod2.metrics.nsatc.net, azglobal-black.azglobal.metrics.nsatc.net, shoebox2-red.shoebox2.metrics.nsatc.net, kelet-prod2.prod2.metrics.nsatc.net, azglobal-red.azglobal.metrics.nsatc.net.</span><span class="sxs-lookup"><span data-stu-id="fb88c-263">Outbound network connectivity toohello following Azure Monitoring endpoints, which resolve under hello following DNS domains: shoebox2-black.shoebox2.metrics.nsatc.net, north-prod2.prod2.metrics.nsatc.net, azglobal-black.azglobal.metrics.nsatc.net, shoebox2-red.shoebox2.metrics.nsatc.net, east-prod2.prod2.metrics.nsatc.net, azglobal-red.azglobal.metrics.nsatc.net.</span></span>

### <a name="how-can-i-verify-that-my-cache-is-working-in-a-vnet"></a><span data-ttu-id="fb88c-264">Hogyan ellenőrizhetem, hogy működik-e a gyorsítótár a VNETEN belül?</span><span class="sxs-lookup"><span data-stu-id="fb88c-264">How can I verify that my cache is working in a VNET?</span></span>

>[!IMPORTANT]
><span data-ttu-id="fb88c-265">Ha egy virtuális hálózat alkotóelem tooan Azure Redis Cache példány, a gyorsítótár-ügyfeleknek kell lenniük a hello ugyanazt a virtuális Hálózatot, beleértve az alkalmazások tesztelése vagy diagnosztikai pingelés eszközök.</span><span class="sxs-lookup"><span data-stu-id="fb88c-265">When connecting tooan Azure Redis Cache instance that is hosted in a VNET, your cache clients must be in hello same VNET, including any test applications or diagnostic pinging tools.</span></span>
>
>

<span data-ttu-id="fb88c-266">Hello előző szakaszban leírtak szerint hello portokra vonatkozó követelmények konfigurálása után ellenőrizheti, hogy működik-e a gyorsítótár hello lépések elvégzésével.</span><span class="sxs-lookup"><span data-stu-id="fb88c-266">Once hello port requirements are configured as described in hello previous section, you can verify that your cache is working by performing hello following steps.</span></span>

- <span data-ttu-id="fb88c-267">[Újraindítás](cache-administration.md#reboot) összes hello gyorsítótár csomópontok.</span><span class="sxs-lookup"><span data-stu-id="fb88c-267">[Reboot](cache-administration.md#reboot) all of hello cache nodes.</span></span> <span data-ttu-id="fb88c-268">Ha az összes hello szükséges gyorsítótár-függőségeit nem érhető el (leírtak [portokra vonatkozó követelmények bejövő](cache-how-to-premium-vnet.md#inbound-port-requirements) és [kimenő portokra vonatkozó követelmények](cache-how-to-premium-vnet.md#outbound-port-requirements)), hello gyorsítótár sikeresen nem fogja tudni toorestart.</span><span class="sxs-lookup"><span data-stu-id="fb88c-268">If all of hello required cache dependencies can't be reached (as documented in [Inbound port requirements](cache-how-to-premium-vnet.md#inbound-port-requirements) and [Outbound port requirements](cache-how-to-premium-vnet.md#outbound-port-requirements)), hello cache won't be able toorestart successfully.</span></span>
- <span data-ttu-id="fb88c-269">Hello gyorsítótár-csomópontok (a hello gyorsítótár állapotát hello Azure-portál által jelentett) újraindítása, ha a következő tesztek hello végezheti el:</span><span class="sxs-lookup"><span data-stu-id="fb88c-269">Once hello cache nodes have restarted (as reported by hello cache status in hello Azure portal), you can perform hello following tests:</span></span>
  - <span data-ttu-id="fb88c-270">Pingelje hello gyorsítótár végpontjához (használja a portot 6380), a gép, amely hello belül ugyanazt a virtuális Hálózatot, hello gyorsítótár használata [tcping](https://www.elifulkerson.com/projects/tcping.php).</span><span class="sxs-lookup"><span data-stu-id="fb88c-270">ping hello cache endpoint (using port 6380) from a machine that is within hello same VNET as hello cache, using [tcping](https://www.elifulkerson.com/projects/tcping.php).</span></span> <span data-ttu-id="fb88c-271">Példa:</span><span class="sxs-lookup"><span data-stu-id="fb88c-271">For example:</span></span>
    
    `tcping.exe contosocache.redis.cache.windows.net 6380`
    
    <span data-ttu-id="fb88c-272">Ha hello `tcping` eszköz jelzi, hogy hello port meg nyitva, illetve hello gyorsítótár kapcsolat hello virtuális hálózaton lévő ügyfelek számára elérhető.</span><span class="sxs-lookup"><span data-stu-id="fb88c-272">If hello `tcping` tool reports that hello port is open, hello cache is available for connection from clients in hello VNET.</span></span>

  - <span data-ttu-id="fb88c-273">Egy másik módja tootest egy teszt gyorsítótárügyfél toocreate (amely lehet egy egyszerű konzolalkalmazást StackExchange.Redis használatával), amely toohello gyorsítótár csatlakozik, és hozzáadja, és néhány elemet lekéri hello gyorsítótárból.</span><span class="sxs-lookup"><span data-stu-id="fb88c-273">Another way tootest is toocreate a test cache client (which could be a simple console application using StackExchange.Redis) that connects toohello cache and adds and retrieves some items from hello cache.</span></span> <span data-ttu-id="fb88c-274">Ügyfél mintaalkalmazás hello alakzatot, amely a virtuális gép telepítése hello hello gyorsítótár, ugyanazt a virtuális Hálózatot, és futtassa azt tooverify kapcsolat toohello gyorsítótár.</span><span class="sxs-lookup"><span data-stu-id="fb88c-274">Install hello sample client application onto a VM that is in hello same VNET as hello cache and run it tooverify connectivity toohello cache.</span></span>


### <a name="can-i-use-vnets-with-a-standard-or-basic-cache"></a><span data-ttu-id="fb88c-275">Használható alapszintű vagy standard gyorsítótárával Vnetekhez?</span><span class="sxs-lookup"><span data-stu-id="fb88c-275">Can I use VNets with a standard or basic cache?</span></span>
<span data-ttu-id="fb88c-276">Vnetek csak prémium szintű gyorsítótárak használható.</span><span class="sxs-lookup"><span data-stu-id="fb88c-276">VNets can only be used with premium caches.</span></span>

### <a name="why-does-creating-a-redis-cache-fail-in-some-subnets-but-not-others"></a><span data-ttu-id="fb88c-277">Miért nem a Redis gyorsítótár létrehozása sikertelen lesz az egyes alhálózatok, de nem mások?</span><span class="sxs-lookup"><span data-stu-id="fb88c-277">Why does creating a Redis cache fail in some subnets but not others?</span></span>
<span data-ttu-id="fb88c-278">Ha telepít egy Azure Redis Cache tooa erőforrás-kezelő virtuális hálózatot, hello gyorsítótár nincs más erőforrástípus tartalmazó dedikált alhálózat kell lennie.</span><span class="sxs-lookup"><span data-stu-id="fb88c-278">If you are deploying an Azure Redis Cache tooa Resource Manager VNet, hello cache must be in a dedicated subnet that contains no other resource type.</span></span> <span data-ttu-id="fb88c-279">Ha toodeploy tett kísérlet az Azure Redis Cache tooa más erőforrások, az hello telepítését tartalmazó erőforrás-kezelő virtuális hálózat alhálózati sikertelen lesz.</span><span class="sxs-lookup"><span data-stu-id="fb88c-279">If an attempt is made toodeploy an Azure Redis Cache tooa Resource Manager VNet subnet that contains other resources, hello deployment fails.</span></span> <span data-ttu-id="fb88c-280">Egy új Redis gyorsítótár létrehozása előtt törölnie kell az hello meglévő erőforrásokat hello alhálózaton belül.</span><span class="sxs-lookup"><span data-stu-id="fb88c-280">You must delete hello existing resources inside hello subnet before you can create a new Redis cache.</span></span>

<span data-ttu-id="fb88c-281">Telepíthet több típust az erőforrások tooa klasszikus virtuális hálózatot, amíg meg vannak-e elegendő IP-címek érhető el.</span><span class="sxs-lookup"><span data-stu-id="fb88c-281">You can deploy multiple types of resources tooa classic VNet as long as you have enough IP addresses available.</span></span>

### <a name="what-are-hello-subnet-address-space-requirements"></a><span data-ttu-id="fb88c-282">Mik azok a hello alhálózati kapcsolatos követelmények?</span><span class="sxs-lookup"><span data-stu-id="fb88c-282">What are hello subnet address space requirements?</span></span>
<span data-ttu-id="fb88c-283">Azure fenntartja az egyes IP-címek minden alhálózaton belül, és ezeknél a címeknél nem használható.</span><span class="sxs-lookup"><span data-stu-id="fb88c-283">Azure reserves some IP addresses within each subnet, and these addresses can't be used.</span></span> <span data-ttu-id="fb88c-284">hello hello alhálózatok első és utolsó IP-címek számára fenntartott protokoll megfelelési, valamint három további címek az Azure-szolgáltatásokhoz használt.</span><span class="sxs-lookup"><span data-stu-id="fb88c-284">hello first and last IP addresses of hello subnets are reserved for protocol conformance, along with three more addresses used for Azure services.</span></span> <span data-ttu-id="fb88c-285">További információkért lásd: [vannak-e bármilyen korlátozás belül ezek alhálózatok IP-címeket használnak?](../virtual-network/virtual-networks-faq.md#are-there-any-restrictions-on-using-ip-addresses-within-these-subnets)</span><span class="sxs-lookup"><span data-stu-id="fb88c-285">For more information, see [Are there any restrictions on using IP addresses within these subnets?](../virtual-network/virtual-networks-faq.md#are-there-any-restrictions-on-using-ip-addresses-within-these-subnets)</span></span>

<span data-ttu-id="fb88c-286">Továbbá a hello Azure virtuális hálózat infrastruktúra által használt toohello IP-címek, a minden egyes Redis példány hello alhálózati használja a két IP-címek / shard és egy további IP-cím hello terheléselosztóhoz.</span><span class="sxs-lookup"><span data-stu-id="fb88c-286">In addition toohello IP addresses used by hello Azure VNET infrastructure, each Redis instance in hello subnet uses two IP addresses per shard and one additional IP address for hello load balancer.</span></span> <span data-ttu-id="fb88c-287">Egy nem fürtözött gyorsítótár toohave egy shard minősül.</span><span class="sxs-lookup"><span data-stu-id="fb88c-287">A non-clustered cache is considered toohave one shard.</span></span>

### <a name="do-all-cache-features-work-when-hosting-a-cache-in-a-vnet"></a><span data-ttu-id="fb88c-288">Működnek-e minden gyorsítótár-funkciók egy VNETET a gyorsítótárhoz esetén?</span><span class="sxs-lookup"><span data-stu-id="fb88c-288">Do all cache features work when hosting a cache in a VNET?</span></span>
<span data-ttu-id="fb88c-289">Ha a gyorsítótár egy virtuális hálózat része, csak a virtuális hálózat hello ügyfelek hello gyorsítótár férhet hozzá.</span><span class="sxs-lookup"><span data-stu-id="fb88c-289">When your cache is part of a VNET, only clients in hello VNET can access hello cache.</span></span> <span data-ttu-id="fb88c-290">Ennek eredményeképpen hello következő gyorsítótár-kezelési funkciók nem működnek most.</span><span class="sxs-lookup"><span data-stu-id="fb88c-290">As a result, hello following cache management features don't work at this time.</span></span>

* <span data-ttu-id="fb88c-291">Konzol redis - konzol Redis fut a helyi böngészőben, amely hello virtuális hálózaton kívül, mert tooyour gyorsítótár nem tud kapcsolódni.</span><span class="sxs-lookup"><span data-stu-id="fb88c-291">Redis Console - Because Redis Console runs in your local browser, which is outside hello VNET, it can't connect tooyour cache.</span></span>

## <a name="use-expressroute-with-azure-redis-cache"></a><span data-ttu-id="fb88c-292">Azure Redis gyorsítótár ExpressRoute használata</span><span class="sxs-lookup"><span data-stu-id="fb88c-292">Use ExpressRoute with Azure Redis Cache</span></span>
<span data-ttu-id="fb88c-293">Az ügyfelek kapcsolódhatnak egy [Azure ExpressRoute](https://azure.microsoft.com/services/expressroute/) áramkör tootheir virtuális hálózati infrastruktúra, így kiterjesztése a helyszíni hálózati tooAzure.</span><span class="sxs-lookup"><span data-stu-id="fb88c-293">Customers can connect an [Azure ExpressRoute](https://azure.microsoft.com/services/expressroute/) circuit tootheir virtual network infrastructure, thus extending their on-premises network tooAzure.</span></span> 

<span data-ttu-id="fb88c-294">Alapértelmezés szerint egy újonnan létrehozott ExpressRoute-kapcsolatcsoport nem végzi el a kényszerített bújtatás (az alapértelmezett útvonal hirdetmény 0.0.0.0/0) egy virtuális hálózaton.</span><span class="sxs-lookup"><span data-stu-id="fb88c-294">By default, a newly created ExpressRoute circuit does not perform forced tunneling (advertisement of a default route, 0.0.0.0/0) on a VNET.</span></span> <span data-ttu-id="fb88c-295">Ennek eredményeképpen kimenő internetkapcsolat közvetlenül a virtuális hálózat hello engedélyezett, és ügyfélalkalmazások képes tooconnect tooother Azure végpontok, beleértve az Azure Redis Cache.</span><span class="sxs-lookup"><span data-stu-id="fb88c-295">As a result, outbound Internet connectivity is allowed directly from hello VNET and client applications are able tooconnect tooother Azure endpoints including Azure Redis Cache.</span></span>

<span data-ttu-id="fb88c-296">Azonban ez a gyakori ügyfél-konfigurációs a kényszerített bújtatás toouse (az alapértelmezett útvonal hirdetése) amely arra kényszeríti a kimenő Internet forgalom tooinstead folyamata a helyszíni.</span><span class="sxs-lookup"><span data-stu-id="fb88c-296">However a common customer configuration is toouse forced tunneling (advertise a default route) which forces outbound Internet traffic tooinstead flow on-premises.</span></span> <span data-ttu-id="fb88c-297">A forgalom áramlását hello kimenő forgalom esetén megsérti Azure Redis Cache kapcsolatot, majd helyszíni blokkolva, például úgy, hogy hello Azure Redis Cache példány nem tud toocommunicate és annak függőségeit.</span><span class="sxs-lookup"><span data-stu-id="fb88c-297">This traffic flow breaks connectivity with Azure Redis Cache if hello outbound traffic is then blocked on-premises such that hello Azure Redis Cache instance is not able toocommunicate with its dependencies.</span></span>

<span data-ttu-id="fb88c-298">egy (vagy több) toodefine felhasználó által definiált útvonalak (udr-EK), amely tartalmazza az Azure Redis Cache hello hello alhálózaton hello megoldás.</span><span class="sxs-lookup"><span data-stu-id="fb88c-298">hello solution is toodefine one (or more) user-defined routes (UDRs) on hello subnet that contains hello Azure Redis Cache.</span></span> <span data-ttu-id="fb88c-299">Egy UDR hello alapértelmezett útvonal helyett szembeni szerződéses kötelezettségeket vonatkozó alhálózati útvonalakat határozza meg.</span><span class="sxs-lookup"><span data-stu-id="fb88c-299">A UDR defines subnet-specific routes that will be honored instead of hello default route.</span></span>

<span data-ttu-id="fb88c-300">Ha lehetséges a következő konfigurációs toouse hello ajánlott:</span><span class="sxs-lookup"><span data-stu-id="fb88c-300">If possible, it is recommended toouse hello following configuration:</span></span>

* <span data-ttu-id="fb88c-301">hello ExpressRoute konfigurációs hirdeti 0.0.0.0/0, és alapértelmezés szerint kényszerített bújtatja minden kimenő forgalom helyszíni.</span><span class="sxs-lookup"><span data-stu-id="fb88c-301">hello ExpressRoute configuration advertises 0.0.0.0/0 and by default force tunnels all outbound traffic on-premises.</span></span>
* <span data-ttu-id="fb88c-302">hello alkalmazott UDR toohello alhálózat hello Azure Redis Cache tartalmazó határoz meg egy TCP/IP-forgalom toohello működő útvonalat a 0.0.0.0/0 nyilvános internethez. például hello beállítása szerint a következő ugrás típusa too'Internet ".</span><span class="sxs-lookup"><span data-stu-id="fb88c-302">hello UDR applied toohello subnet containing hello Azure Redis Cache defines 0.0.0.0/0 with a working route for TCP/IP traffic toohello public internet; for example by setting hello next hop type too'Internet'.</span></span>

<span data-ttu-id="fb88c-303">hello kombinált hatását, hogy ezeket a lépéseket az, hogy a hello alhálózat-szintű UDR elsőbbséget élvez az ExpressRoute kényszerített bújtatás, biztosítva ezzel kimenő Internet-hozzáférést a hello Azure Redis Cache hello.</span><span class="sxs-lookup"><span data-stu-id="fb88c-303">hello combined effect of these steps is that hello subnet level UDR takes precedence over hello ExpressRoute forced tunneling, thus ensuring outbound Internet access from hello Azure Redis Cache.</span></span>

<span data-ttu-id="fb88c-304">ExpressRoute segítségével helyszíni alkalmazásból összekötő tooan Azure Redis Cache példány nincs egy tipikus használati eset tooperformance okok miatt (a legjobb teljesítmény érdekében az Azure Redis Cache ügyfelek kell hello hello Azure Redis Cache és ugyanabban a régióban).</span><span class="sxs-lookup"><span data-stu-id="fb88c-304">Connecting tooan Azure Redis Cache instance from an on-premises application using ExpressRoute is not a typical usage scenario due tooperformance reasons (for best performance Azure Redis Cache clients should be in hello same region as hello Azure Redis Cache).</span></span>

>[!IMPORTANT] 
><span data-ttu-id="fb88c-305">egy UDR definiált útvonalak hello **kell** elég konkrétan fogalmaz ahhoz tootake sorrend lehet bármely hello ExpressRoute-konfiguráció által hirdetett útvonalakat keresztül.</span><span class="sxs-lookup"><span data-stu-id="fb88c-305">hello routes defined in a UDR **must** be specific enough tootake precedence over any routes advertised by hello ExpressRoute configuration.</span></span> <span data-ttu-id="fb88c-306">hello alábbi példa hello széleskörű 0.0.0.0/0 címtartományt használja, és így potenciálisan véletlenül felülbírálhatja útvonal-hirdetéseinek pontosabb címtartományai használatával.</span><span class="sxs-lookup"><span data-stu-id="fb88c-306">hello following example uses hello broad 0.0.0.0/0 address range, and as such can potentially be accidentally overridden by route advertisements using more specific address ranges.</span></span>

>[!WARNING]  
><span data-ttu-id="fb88c-307">Azure Redis Cache ExpressRoute-konfigurációk használata nem támogatott, amelyek **helytelenül hello nyilvános társviszony-létesítési elérési toohello magánhálózati társviszony-létesítési elérési útvonalak határokon hirdetési**.</span><span class="sxs-lookup"><span data-stu-id="fb88c-307">Azure Redis Cache is not supported with ExpressRoute configurations that **incorrectly cross-advertise routes from hello public peering path toohello private peering path**.</span></span> <span data-ttu-id="fb88c-308">ExpressRoute konfigurációkat, amelyek rendelkeznek a nyilvános társviszony konfigurálva, a Microsoft Azure IP-címtartományok számos útvonal-hirdetéseinek kapni a Microsofttól.</span><span class="sxs-lookup"><span data-stu-id="fb88c-308">ExpressRoute configurations that have public peering configured, receive route advertisements from Microsoft for a large set of Microsoft Azure IP address ranges.</span></span> <span data-ttu-id="fb88c-309">Ha a címtartomány helytelenül határokon meghirdetett hello magánhálózati társviszony-létesítési elérési úton, hello eredménye, hogy minden kimenő hálózati csomagok hello Azure Redis Cache példány alhálózatból-e a kényszerített bújtatott helytelenül tooa az ügyfél helyszíni hálózat infrastruktúra.</span><span class="sxs-lookup"><span data-stu-id="fb88c-309">If these address ranges are incorrectly cross-advertised on hello private peering path, hello result is that all outbound network packets from hello Azure Redis Cache instance's subnet are incorrectly force-tunneled tooa customer's on-premises network infrastructure.</span></span> <span data-ttu-id="fb88c-310">A hálózati folyamata Azure Redis Cache megszakad.</span><span class="sxs-lookup"><span data-stu-id="fb88c-310">This network flow breaks Azure Redis Cache.</span></span> <span data-ttu-id="fb88c-311">hello megoldás toothis probléma a toostop cross-hirdetési útvonalak hello nyilvános társviszony-létesítési elérési toohello magánhálózati társviszony-létesítési elérési útról.</span><span class="sxs-lookup"><span data-stu-id="fb88c-311">hello solution toothis problem is toostop cross-advertising routes from hello public peering path toohello private peering path.</span></span>


<span data-ttu-id="fb88c-312">Háttér-információkat a felhasználó által definiált útvonalak érhető el ezen [áttekintése](../virtual-network/virtual-networks-udr-overview.md).</span><span class="sxs-lookup"><span data-stu-id="fb88c-312">Background information on user-defined routes is available in this [overview](../virtual-network/virtual-networks-udr-overview.md).</span></span>

<span data-ttu-id="fb88c-313">ExpressRoute kapcsolatos további információkért lásd: [ExpressRoute műszaki áttekintés](../expressroute/expressroute-introduction.md).</span><span class="sxs-lookup"><span data-stu-id="fb88c-313">For more information about ExpressRoute, see [ExpressRoute technical overview](../expressroute/expressroute-introduction.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="fb88c-314">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="fb88c-314">Next steps</span></span>
<span data-ttu-id="fb88c-315">Ismerje meg, hogyan több premium toouse gyorsítótár szolgáltatásokat.</span><span class="sxs-lookup"><span data-stu-id="fb88c-315">Learn how toouse more premium cache features.</span></span>

* [<span data-ttu-id="fb88c-316">Bevezetés toohello Azure Redis Cache prémium szintjének</span><span class="sxs-lookup"><span data-stu-id="fb88c-316">Introduction toohello Azure Redis Cache Premium tier</span></span>](cache-premium-tier-intro.md)

<!-- IMAGES -->

[redis-cache-vnet]: ./media/cache-how-to-premium-vnet/redis-cache-vnet.png

[redis-cache-vnet-ip]: ./media/cache-how-to-premium-vnet/redis-cache-vnet-ip.png

[redis-cache-vnet-info]: ./media/cache-how-to-premium-vnet/redis-cache-vnet-info.png

