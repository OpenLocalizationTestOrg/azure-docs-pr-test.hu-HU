---
title: "prémium szintű Azure Redis Cache aaaHow tooconfigure adatok megőrzését"
description: "Megtudhatja, hogyan tooconfigure és az adatmegőrzés a Premium szint Azure Redis Cache példány kezelése"
services: redis-cache
documentationcenter: 
author: steved0x
manager: douge
editor: 
ms.assetid: b01cf279-60a0-4711-8c5f-af22d9540d38
ms.service: cache
ms.workload: tbd
ms.tgt_pltfrm: cache-redis
ms.devlang: na
ms.topic: article
ms.date: 08/24/2017
ms.author: sdanie
ms.openlocfilehash: 62feb6f5522e0270487f045eb303bf852434143d
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/06/2017
---
# <a name="how-tooconfigure-data-persistence-for-a-premium-azure-redis-cache"></a><span data-ttu-id="c3cef-103">Hogyan tooconfigure adatok megőrzését egy prémium szintű Azure Redis Cache</span><span class="sxs-lookup"><span data-stu-id="c3cef-103">How tooconfigure data persistence for a Premium Azure Redis Cache</span></span>
<span data-ttu-id="c3cef-104">Azure Redis Cache-gyorsítótár mérete és a funkciót, beleértve a prémium réteg szolgáltatások, például a fürtszolgáltatás, az adatmegőrzésre és a virtuális hálózat támogatásának hello választott rugalmasságot biztosítanak, amelyek különböző gyorsítótár ajánlatok rendelkezik.</span><span class="sxs-lookup"><span data-stu-id="c3cef-104">Azure Redis Cache has different cache offerings which provide flexibility in hello choice of cache size and features, including Premium tier features such as clustering, persistence, and virtual network support.</span></span> <span data-ttu-id="c3cef-105">Ez a cikk ismerteti, hogyan tooconfigure adatmegőrzési a egy prémium szintű Azure Redis Cache-gyorsítótár példány.</span><span class="sxs-lookup"><span data-stu-id="c3cef-105">This article describes how tooconfigure persistence in a premium Azure Redis Cache instance.</span></span>

<span data-ttu-id="c3cef-106">Más prémium gyorsítótár funkciókról további információért lásd: [bemutatása toohello Azure Redis Cache prémium szintjének](cache-premium-tier-intro.md).</span><span class="sxs-lookup"><span data-stu-id="c3cef-106">For information on other premium cache features, see [Introduction toohello Azure Redis Cache Premium tier](cache-premium-tier-intro.md).</span></span>

## <a name="what-is-data-persistence"></a><span data-ttu-id="c3cef-107">Mi az adatmegőrzés?</span><span class="sxs-lookup"><span data-stu-id="c3cef-107">What is data persistence?</span></span>
<span data-ttu-id="c3cef-108">[Redis-adatmegőrzés](https://redis.io/topics/persistence) lehetővé teszi a Redis toopersist adataihoz.</span><span class="sxs-lookup"><span data-stu-id="c3cef-108">[Redis persistence](https://redis.io/topics/persistence) allows you toopersist data stored in Redis.</span></span> <span data-ttu-id="c3cef-109">Pillanatképek és hardver meghibásodása esetén is betölthet, az hello adatok biztonsági másolatát is.</span><span class="sxs-lookup"><span data-stu-id="c3cef-109">You can also take snapshots and back up hello data, which you can load in case of a hardware failure.</span></span> <span data-ttu-id="c3cef-110">Ez a nagyon nagy előnyös használhatóságát Basic vagy Standard csomagra, ahol az összes hello adatok a memóriában tárolja, és esetleges adatvesztés, ha a gyorsítótár-csomópontok nem működnek meghibásodása esetén is lehet.</span><span class="sxs-lookup"><span data-stu-id="c3cef-110">This is a huge advantage over Basic or Standard tier where all hello data is stored in memory and there can be potential data loss in case of a failure where Cache nodes are down.</span></span> 

<span data-ttu-id="c3cef-111">Azure Redis Cache Redis adatmegőrzési használatával a következő modellek hello kínálja:</span><span class="sxs-lookup"><span data-stu-id="c3cef-111">Azure Redis Cache offers Redis persistence using hello following models:</span></span>

* <span data-ttu-id="c3cef-112">**Rekordadatbázis adatmegőrzési** -amikor Rekordadatbázis (Redis-adatbázis) adatmegőrzési van konfigurálva, az Azure Redis Cache továbbra is fennáll, a bináris formátumú toodisk egy konfigurálható biztonsági mentési gyakoriság alapján a Redis hello Redis gyorsítótár pillanatképet.</span><span class="sxs-lookup"><span data-stu-id="c3cef-112">**RDB persistence** - When RDB (Redis database) persistence is configured, Azure Redis Cache persists a snapshot of hello Redis cache in a Redis binary format toodisk based on a configurable backup frequency.</span></span> <span data-ttu-id="c3cef-113">Ha egy katasztrofális esemény történik, amely letiltja a hello elsődleges és replika gyorsítótár, hello gyorsítótár újraépíti hello legutóbbi pillanatkép.</span><span class="sxs-lookup"><span data-stu-id="c3cef-113">If a catastrophic event occurs that disables both hello primary and replica cache, hello cache is reconstructed using hello most recent snapshot.</span></span> <span data-ttu-id="c3cef-114">További tudnivalók hello [előnyeit](https://redis.io/topics/persistence#rdb-advantages) és [hátrányai](https://redis.io/topics/persistence#rdb-disadvantages) Rekordadatbázis adatmegőrzési a.</span><span class="sxs-lookup"><span data-stu-id="c3cef-114">Learn more about hello [advantages](https://redis.io/topics/persistence#rdb-advantages) and [disadvantages](https://redis.io/topics/persistence#rdb-disadvantages) of RDB persistence.</span></span>
* <span data-ttu-id="c3cef-115">**AOF adatmegőrzési** -amikor AOF (hozzáfűzés egyetlen fájl) adatmegőrzési van konfigurálva, Azure Redis Cache minden írási művelet tooa napló mentett legalább egyszer másodpercenként be egy Azure Storage-fiókba menti.</span><span class="sxs-lookup"><span data-stu-id="c3cef-115">**AOF persistence** - When AOF (Append only file) persistence is configured, Azure Redis Cache saves every write operation tooa log that is saved at least once per second into an Azure Storage account.</span></span> <span data-ttu-id="c3cef-116">Ha egy katasztrofális esemény történik, amely letiltja a hello elsődleges és replika gyorsítótár, hello gyorsítótár újraépíti tárolt hello írási műveletek használatával.</span><span class="sxs-lookup"><span data-stu-id="c3cef-116">If a catastrophic event occurs that disables both hello primary and replica cache, hello cache is reconstructed using hello stored write operations.</span></span> <span data-ttu-id="c3cef-117">További tudnivalók hello [előnyeit](https://redis.io/topics/persistence#aof-advantages) és [hátrányai](https://redis.io/topics/persistence#aof-disadvantages) AOF adatmegőrzési a.</span><span class="sxs-lookup"><span data-stu-id="c3cef-117">Learn more about hello [advantages](https://redis.io/topics/persistence#aof-advantages) and [disadvantages](https://redis.io/topics/persistence#aof-disadvantages) of AOF persistence.</span></span>

<span data-ttu-id="c3cef-118">Adatmegőrzési van konfigurálva a hello **új Redis Cache** panel gyorsítótár létrehozása során, és a hello **erőforrás menü** meglévő prémium gyorsítótárazza.</span><span class="sxs-lookup"><span data-stu-id="c3cef-118">Persistence is configured from hello **New Redis Cache** blade during cache creation and on hello **Resource menu** for existing premium caches.</span></span>

[!INCLUDE [redis-cache-create](../../includes/redis-cache-premium-create.md)]

<span data-ttu-id="c3cef-119">A prémium tarifacsomag kijelölése után kattintson **Redis-adatmegőrzés**.</span><span class="sxs-lookup"><span data-stu-id="c3cef-119">Once a premium pricing tier is selected, click **Redis persistence**.</span></span>

![Redis-adatmegőrzés][redis-cache-persistence]

<span data-ttu-id="c3cef-121">hello hello a következő szakaszban található lépéseket ismerteti hogyan tooconfigure Redis adatmegőrzési az új premium-gyorsítótár.</span><span class="sxs-lookup"><span data-stu-id="c3cef-121">hello steps in hello next section describe how tooconfigure Redis persistence on your new premium cache.</span></span> <span data-ttu-id="c3cef-122">Miután beállította a Redis-adatmegőrzés, kattintson a **létrehozása** az új premium gyorsítótárazza a Redis-adatmegőrzés toocreate.</span><span class="sxs-lookup"><span data-stu-id="c3cef-122">Once Redis persistence is configured, click **Create** toocreate your new premium cache with Redis persistence.</span></span>

## <a name="enable-redis-persistence"></a><span data-ttu-id="c3cef-123">A Redis-adatmegőrzés engedélyezése</span><span class="sxs-lookup"><span data-stu-id="c3cef-123">Enable Redis persistence</span></span>

<span data-ttu-id="c3cef-124">Redis adatmegőrzési engedélyezve van a hello **Redis-adatmegőrzés** panelen válassza ki vagy **Rekordadatbázis** vagy **AOF** megőrzését.</span><span class="sxs-lookup"><span data-stu-id="c3cef-124">Redis persistence is enabled on hello **Redis data persistence** blade by choosing either **RDB** or **AOF** persistence.</span></span> <span data-ttu-id="c3cef-125">Ezen a panelen az új gyorsítótárakhoz érhető hello gyorsítótár létrehozási folyamata során hello előző szakaszban leírtak szerint.</span><span class="sxs-lookup"><span data-stu-id="c3cef-125">For new caches, this blade is accessed during hello cache creation process, as described in hello previous section.</span></span> <span data-ttu-id="c3cef-126">Meglévő gyorsítótárak hello **Redis-adatmegőrzés** panel elérése hello **erőforrás menü** a gyorsítótárhoz.</span><span class="sxs-lookup"><span data-stu-id="c3cef-126">For existing caches, hello **Redis data persistence** blade is accessed from hello **Resource menu** for your cache.</span></span>

![Redis beállítások][redis-cache-settings]


## <a name="configure-rdb-persistence"></a><span data-ttu-id="c3cef-128">Rekordadatbázis adatmegőrzési konfigurálása</span><span class="sxs-lookup"><span data-stu-id="c3cef-128">Configure RDB persistence</span></span>

<span data-ttu-id="c3cef-129">tooenable Rekordadatbázis adatmegőrzési, kattintson a **Rekordadatbázis**.</span><span class="sxs-lookup"><span data-stu-id="c3cef-129">tooenable RDB persistence, click **RDB**.</span></span> <span data-ttu-id="c3cef-130">Kattintson egy korábban engedélyezett prémium gyorsítótár toodisable Rekordadatbázis adatmegőrzési **letiltott**.</span><span class="sxs-lookup"><span data-stu-id="c3cef-130">toodisable RDB persistence on a previously enabled premium cache, click **Disabled**.</span></span>

![Redis Rekordadatbázis adatmegőrzési][redis-cache-rdb-persistence]

<span data-ttu-id="c3cef-132">tooconfigure hello biztonsági mentési időközt, jelölje be a **biztonsági mentési gyakoriság** hello legördülő listából.</span><span class="sxs-lookup"><span data-stu-id="c3cef-132">tooconfigure hello backup interval, select a **Backup Frequency** from hello drop-down list.</span></span> <span data-ttu-id="c3cef-133">Választható a **15 perc**, **30 perc**, **60 perc**, **6 óra**, **12 óra**, és **24 óra**.</span><span class="sxs-lookup"><span data-stu-id="c3cef-133">Choices include **15 Minutes**, **30 minutes**, **60 minutes**, **6 hours**, **12 hours**, and **24 hours**.</span></span> <span data-ttu-id="c3cef-134">Ezt az időközt elindítja számbavételi után hello korábbi biztonsági mentési művelet sikeresen befejeződött, és lejárta, amikor egy új biztonsági másolat lehet kezdeményezni.</span><span class="sxs-lookup"><span data-stu-id="c3cef-134">This interval starts counting down after hello previous backup operation successfully completes and when it elapses a new backup is initiated.</span></span>

<span data-ttu-id="c3cef-135">Kattintson a **Tárfiók** tooselect hello tárolási fiók toouse, majd válassza ki bármelyik hello **elsődleges kulcs** vagy **másodlagos kulcs** toouse a hello **tároló Kulcs** legördülő listán.</span><span class="sxs-lookup"><span data-stu-id="c3cef-135">Click **Storage Account** tooselect hello storage account toouse, and choose either hello **Primary key** or **Secondary key** toouse from hello **Storage Key** drop-down.</span></span> <span data-ttu-id="c3cef-136">Ki kell választania egy tárolási fiókot a hello hello gyorsítótárába, és ugyanabban a régióban és egy **prémium szintű Storage** fiók használata ajánlott, mivel a prémium szintű storage rendelkezik nagyobb átviteli sebességgel.</span><span class="sxs-lookup"><span data-stu-id="c3cef-136">You must choose a storage account in hello same region as hello cache, and a **Premium Storage** account is recommended because premium storage has higher throughput.</span></span> 

> [!IMPORTANT]
> <span data-ttu-id="c3cef-137">Ha újragenerálják hello kulcs adatmegőrzési fiókjához, módosítania kell a kívánt kulcsot hello hello **Biztonságitár-kulcs** legördülő listán.</span><span class="sxs-lookup"><span data-stu-id="c3cef-137">If hello storage key for your persistence account is regenerated, you must reconfigure hello desired key from hello **Storage Key** drop-down.</span></span>
> 
> 

<span data-ttu-id="c3cef-138">Kattintson a **OK** toosave hello adatmegőrzési konfigurációs.</span><span class="sxs-lookup"><span data-stu-id="c3cef-138">Click **OK** toosave hello persistence configuration.</span></span>

<span data-ttu-id="c3cef-139">hello következő biztonsági mentés (vagy az új gyorsítótárakhoz első biztonsági mentés) hello biztonsági mentési gyakoriság időtartam után indítható.</span><span class="sxs-lookup"><span data-stu-id="c3cef-139">hello next backup (or first backup for new caches) is initiated once hello backup frequency interval elapses.</span></span>

## <a name="configure-aof-persistence"></a><span data-ttu-id="c3cef-140">AOF adatmegőrzési konfigurálása</span><span class="sxs-lookup"><span data-stu-id="c3cef-140">Configure AOF persistence</span></span>

<span data-ttu-id="c3cef-141">tooenable AOF adatmegőrzési, kattintson a **AOF**.</span><span class="sxs-lookup"><span data-stu-id="c3cef-141">tooenable AOF persistence, click **AOF**.</span></span> <span data-ttu-id="c3cef-142">Kattintson egy korábban engedélyezett prémium gyorsítótár toodisable AOF adatmegőrzési **letiltott**.</span><span class="sxs-lookup"><span data-stu-id="c3cef-142">toodisable AOF persistence on a previously enabled premium cache, click **Disabled**.</span></span>

![Redis AOF adatmegőrzési][redis-cache-aof-persistence]

<span data-ttu-id="c3cef-144">tooconfigure AOF adatmegőrzési, adjon meg egy **első Tárfiók**.</span><span class="sxs-lookup"><span data-stu-id="c3cef-144">tooconfigure AOF persistence, specify a **First Storage Account**.</span></span> <span data-ttu-id="c3cef-145">Ezt a tárfiókot kell hello hello gyorsítótárába, és ugyanabban a régióban és egy **prémium szintű Storage** fiók használata ajánlott, mivel a prémium szintű storage rendelkezik nagyobb átviteli sebességgel.</span><span class="sxs-lookup"><span data-stu-id="c3cef-145">This storage account must be in hello same region as hello cache, and a **Premium Storage** account is recommended because premium storage has higher throughput.</span></span> <span data-ttu-id="c3cef-146">Konfigurálhatja egy további nevű tárfiók **második Tárfiók**.</span><span class="sxs-lookup"><span data-stu-id="c3cef-146">You can optionally configure an additional storage account named **Second Storage Account**.</span></span> <span data-ttu-id="c3cef-147">Ha egy másik tárolási fiókot van konfigurálva, hello írások toohello replika gyorsítótár írt toothis második tárfiók.</span><span class="sxs-lookup"><span data-stu-id="c3cef-147">If a second storage account is configured, hello writes toohello replica cache are written toothis second storage account.</span></span> <span data-ttu-id="c3cef-148">Minden egyes konfigurált tárfiók, válassza ki bármelyik hello **elsődleges kulcs** vagy **másodlagos kulcs** a hello toouse **Biztonságitár-kulcs** legördülő listán.</span><span class="sxs-lookup"><span data-stu-id="c3cef-148">For each configured storage account, choose either hello **Primary key** or **Secondary key** toouse from hello **Storage Key** drop-down.</span></span> 

> [!IMPORTANT]
> <span data-ttu-id="c3cef-149">Ha újragenerálják hello kulcs adatmegőrzési fiókjához, módosítania kell a kívánt kulcsot hello hello **Biztonságitár-kulcs** legördülő listán.</span><span class="sxs-lookup"><span data-stu-id="c3cef-149">If hello storage key for your persistence account is regenerated, you must reconfigure hello desired key from hello **Storage Key** drop-down.</span></span>
> 
> 

<span data-ttu-id="c3cef-150">AOF adatmegőrzési engedélyezve van, amikor az írási műveletek toohello gyorsítótár mentett toohello storage-fiók (vagy ha egy másik tárolási fiókot konfigurált fiókok).</span><span class="sxs-lookup"><span data-stu-id="c3cef-150">When AOF persistence is enabled, write operations toohello cache are saved toohello designated storage account (or accounts if you have configured a second storage account).</span></span> <span data-ttu-id="c3cef-151">A végzetes hibák hello esemény, hogy le mindkét vesz hello elsődleges és replika gyorsítótár hello tárolt AOF napló használt toorebuild hello gyorsítótár.</span><span class="sxs-lookup"><span data-stu-id="c3cef-151">In hello event of a catastrophic failure that takes down both hello primary and replica cache, hello stored AOF log is used toorebuild hello cache.</span></span>

## <a name="persistence-faq"></a><span data-ttu-id="c3cef-152">Adatmegőrzési – gyakori kérdések</span><span class="sxs-lookup"><span data-stu-id="c3cef-152">Persistence FAQ</span></span>
<span data-ttu-id="c3cef-153">hello alábbi lista válaszok toocommonly kérdések Azure Redis Cache adatmegőrzési kapcsolatban.</span><span class="sxs-lookup"><span data-stu-id="c3cef-153">hello following list contains answers toocommonly asked questions about Azure Redis Cache persistence.</span></span>

* [<span data-ttu-id="c3cef-154">A korábban létrehozott gyorsítótáron adatmegőrzés engedélyezése</span><span class="sxs-lookup"><span data-stu-id="c3cef-154">Can I enable persistence on a previously created cache?</span></span>](#can-i-enable-persistence-on-a-previously-created-cache)
* [<span data-ttu-id="c3cef-155">Engedélyezhető a hello AOF és Rekordadatbázis adatmegőrzési ugyanannyi időt vesz igénybe?</span><span class="sxs-lookup"><span data-stu-id="c3cef-155">Can I enable AOF and RDB persistence at hello same time?</span></span>](#can-i-enable-aof-and-rdb-persistence-at-the-same-time)
* [<span data-ttu-id="c3cef-156">Adatmegőrzési modellt kell választanom?</span><span class="sxs-lookup"><span data-stu-id="c3cef-156">Which persistence model should I choose?</span></span>](#which-persistence-model-should-i-choose)
* [<span data-ttu-id="c3cef-157">Mi történik, ha szeretnék rendelkezik méretezhető tooa különböző méretét, és egy biztonsági mentési művelet skálázás hello előtt végrehajtott helyreáll?</span><span class="sxs-lookup"><span data-stu-id="c3cef-157">What happens if I have scaled tooa different size and a backup is restored that was made before hello scaling operation?</span></span>](#what-happens-if-i-have-scaled-to-a-different-size-and-a-backup-is-restored-that-was-made-before-the-scaling-operation)


### <a name="rdb-persistence"></a><span data-ttu-id="c3cef-158">Rekordadatbázis adatmegőrzési</span><span class="sxs-lookup"><span data-stu-id="c3cef-158">RDB persistence</span></span>
* [<span data-ttu-id="c3cef-159">Módosíthatom hello Rekordadatbázis biztonsági mentés gyakoriságát, hello gyorsítótár létrehozása után?</span><span class="sxs-lookup"><span data-stu-id="c3cef-159">Can I change hello RDB backup frequency after I create hello cache?</span></span>](#can-i-change-the-rdb-backup-frequency-after-i-create-the-cache)
* [<span data-ttu-id="c3cef-160">Miért Ha egy Rekordadatbázis biztonsági mentési gyakoriság 60 perc több mint 60 perc között van biztonsági mentések?</span><span class="sxs-lookup"><span data-stu-id="c3cef-160">Why if I have an RDB backup frequency of 60 minutes there is more than 60 minutes between backups?</span></span>](#why-if-i-have-an-rdb-backup-frequency-of-60-minutes-there-is-more-than-60-minutes-between-backups)
* [<span data-ttu-id="c3cef-161">Toohello régi Rekordadatbázis biztonsági mentések mi történik, ha egy új biztonsági másolat legyen?</span><span class="sxs-lookup"><span data-stu-id="c3cef-161">What happens toohello old RDB backups when a new backup is made?</span></span>](#what-happens-to-the-old-rdb-backups-when-a-new-backup-is-made)

### <a name="aof-persistence"></a><span data-ttu-id="c3cef-162">AOF adatmegőrzési</span><span class="sxs-lookup"><span data-stu-id="c3cef-162">AOF persistence</span></span>
* [<span data-ttu-id="c3cef-163">Mikor kell használni egy másik tárolási fiókot?</span><span class="sxs-lookup"><span data-stu-id="c3cef-163">When should I use a second storage account?</span></span>](#when-should-i-use-a-second-storage-account)
* [<span data-ttu-id="c3cef-164">AOF adatmegőrzési hatása teljes, a késleltetés vagy a teljesítmény a gyorsítótár nem?</span><span class="sxs-lookup"><span data-stu-id="c3cef-164">Does AOF persistence affect throughout, latency, or performance of my cache?</span></span>](#does-aof-persistence-affect-throughout-latency-or-performance-of-my-cache)
* [<span data-ttu-id="c3cef-165">Hogyan távolíthatom hello második tárfiókot?</span><span class="sxs-lookup"><span data-stu-id="c3cef-165">How can I remove hello second storage account?</span></span>](#how-can-i-remove-the-second-storage-account)
* [<span data-ttu-id="c3cef-166">Mi az, hogy egy átdolgozás, és hogyan azt befolyásolja a gyorsítótár?</span><span class="sxs-lookup"><span data-stu-id="c3cef-166">What is a rewrite and how does it affect my cache?</span></span>](#what-is-a-rewrite-and-how-does-it-affect-my-cache)
* [<span data-ttu-id="c3cef-167">Mit kell várhatnak, amikor a gyorsítótár méretezést, AOF engedélyezve van?</span><span class="sxs-lookup"><span data-stu-id="c3cef-167">What should I expect when scaling a cache with AOF enabled?</span></span>](#what-should-i-expect-when-scaling-a-cache-with-aof-enabled)
* [<span data-ttu-id="c3cef-168">Hogyan vannak rendezve AOF adataimat storage?</span><span class="sxs-lookup"><span data-stu-id="c3cef-168">How is my AOF data organized in storage?</span></span>](#how-is-my-aof-data-organized-in-storage)


### <a name="can-i-enable-persistence-on-a-previously-created-cache"></a><span data-ttu-id="c3cef-169">A korábban létrehozott gyorsítótáron adatmegőrzés engedélyezése</span><span class="sxs-lookup"><span data-stu-id="c3cef-169">Can I enable persistence on a previously created cache?</span></span>
<span data-ttu-id="c3cef-170">Igen, a Redis-adatmegőrzés is konfigurálható gyorsítótár létrehozását, mind a meglévő prémium gyorsítótárak.</span><span class="sxs-lookup"><span data-stu-id="c3cef-170">Yes, Redis persistence can be configured both at cache creation and on existing premium caches.</span></span>

### <a name="can-i-enable-aof-and-rdb-persistence-at-hello-same-time"></a><span data-ttu-id="c3cef-171">Engedélyezhető a hello AOF és Rekordadatbázis adatmegőrzési ugyanannyi időt vesz igénybe?</span><span class="sxs-lookup"><span data-stu-id="c3cef-171">Can I enable AOF and RDB persistence at hello same time?</span></span>

<span data-ttu-id="c3cef-172">Nem, engedélyezheti a csak Rekordadatbázis vagy AOF, de egyszerre csak hello ugyanannyi időt vesz igénybe.</span><span class="sxs-lookup"><span data-stu-id="c3cef-172">No, you can enable only RDB or AOF, but not both at hello same time.</span></span>

### <a name="which-persistence-model-should-i-choose"></a><span data-ttu-id="c3cef-173">Adatmegőrzési modellt kell választanom?</span><span class="sxs-lookup"><span data-stu-id="c3cef-173">Which persistence model should I choose?</span></span>

<span data-ttu-id="c3cef-174">AOF adatmegőrzési menti minden írási tooa naplót, amely néhány hatással van a teljesítmény, Rekordadatbázis képest menti hello alapuló biztonsági mentések adatmegőrzési konfigurált biztonsági mentési időszakban, a teljesítményre gyakorolt minimális hatás mellett.</span><span class="sxs-lookup"><span data-stu-id="c3cef-174">AOF persistence saves every write tooa log, which has some impact on throughput, compared with RDB persistence which saves backups based on hello configured backup interval, with minimal impact on performance.</span></span> <span data-ttu-id="c3cef-175">AOF adatmegőrzési akkor válassza, ha elsődleges célja toominimize adatvesztés, és a teljesítmény csökkenése kezelheti a gyorsítótárhoz.</span><span class="sxs-lookup"><span data-stu-id="c3cef-175">Choose AOF persistence if your primary goal is toominimize data loss, and you can handle a decrease in throughput for your cache.</span></span> <span data-ttu-id="c3cef-176">Rekordadatbázis adatmegőrzési akkor válassza, ha a gyorsítótár toomaintain optimális átviteli kívánja, de továbbra is szeretné, hogy egy olyan mechanizmus az adat-helyreállítást.</span><span class="sxs-lookup"><span data-stu-id="c3cef-176">Choose RDB persistence if you wish toomaintain optimal throughput on your cache, but still want a mechanism for data recovery.</span></span>

* <span data-ttu-id="c3cef-177">További tudnivalók hello [előnyeit](https://redis.io/topics/persistence#rdb-advantages) és [hátrányai](https://redis.io/topics/persistence#rdb-disadvantages) Rekordadatbázis adatmegőrzési a.</span><span class="sxs-lookup"><span data-stu-id="c3cef-177">Learn more about hello [advantages](https://redis.io/topics/persistence#rdb-advantages) and [disadvantages](https://redis.io/topics/persistence#rdb-disadvantages) of RDB persistence.</span></span>
* <span data-ttu-id="c3cef-178">További tudnivalók hello [előnyeit](https://redis.io/topics/persistence#aof-advantages) és [hátrányai](https://redis.io/topics/persistence#aof-disadvantages) AOF adatmegőrzési a.</span><span class="sxs-lookup"><span data-stu-id="c3cef-178">Learn more about hello [advantages](https://redis.io/topics/persistence#aof-advantages) and [disadvantages](https://redis.io/topics/persistence#aof-disadvantages) of AOF persistence.</span></span>

<span data-ttu-id="c3cef-179">A teljesítményre AOF adatmegőrzési használata esetén további információkért lásd: [Does AOF adatmegőrzési hatása teljes, a késleltetés vagy a teljesítmény a gyorsítótár?](#does-aof-persistence-affect-throughout-latency-or-performance-of-my-cache)</span><span class="sxs-lookup"><span data-stu-id="c3cef-179">For more information on performance when using AOF persistence, see [Does AOF persistence affect throughout, latency, or performance of my cache?](#does-aof-persistence-affect-throughout-latency-or-performance-of-my-cache)</span></span>

### <a name="what-happens-if-i-have-scaled-tooa-different-size-and-a-backup-is-restored-that-was-made-before-hello-scaling-operation"></a><span data-ttu-id="c3cef-180">Mi történik, ha szeretnék rendelkezik méretezhető tooa különböző méretét, és egy biztonsági mentési művelet skálázás hello előtt végrehajtott helyreáll?</span><span class="sxs-lookup"><span data-stu-id="c3cef-180">What happens if I have scaled tooa different size and a backup is restored that was made before hello scaling operation?</span></span>

<span data-ttu-id="c3cef-181">A Rekordadatbázis és a AOF megőrzéséhez:</span><span class="sxs-lookup"><span data-stu-id="c3cef-181">For both RDB and AOF persistence:</span></span>

* <span data-ttu-id="c3cef-182">Ha nagyobb méretű tooa rendelkezik méretezhető, akkor ennek nincs hatása.</span><span class="sxs-lookup"><span data-stu-id="c3cef-182">If you have scaled tooa larger size, there is no impact.</span></span>
* <span data-ttu-id="c3cef-183">Ha Ön rendelkezik méretezhető tooa kisebb méretű, és van egy egyéni [adatbázisok](cache-configure.md#databases) beállítástól, amely érték nagyobb, mint hello [adatbázisok korlát](cache-configure.md#databases) az új méretéhez ezeket az adatbázisokat az adatok visszaállítása nem.</span><span class="sxs-lookup"><span data-stu-id="c3cef-183">If you have scaled tooa smaller size, and you have a custom [databases](cache-configure.md#databases) setting that is greater than hello [databases limit](cache-configure.md#databases) for your new size, data in those databases isn't restored.</span></span> <span data-ttu-id="c3cef-184">További információkért lásd: [a skálázás során érintett beállítás egyéni adatbázisok?](cache-how-to-scale.md#is-my-custom-databases-setting-affected-during-scaling)</span><span class="sxs-lookup"><span data-stu-id="c3cef-184">For more information, see [Is my custom databases setting affected during scaling?](cache-how-to-scale.md#is-my-custom-databases-setting-affected-during-scaling)</span></span>
* <span data-ttu-id="c3cef-185">Ha Ön rendelkezik méretezhető tooa kisebb méretet, és nincs elegendő hely a hello hello adatok hello utolsó biztonsági mentés, kulcsok alapján ki lesz zárva: hello visszaállítási folyamat során kisebb méretű toohold, általában használatával hello [allkeys-lru](http://redis.io/topics/lru-cache) kiürítés házirend.</span><span class="sxs-lookup"><span data-stu-id="c3cef-185">If you have scaled tooa smaller size, and there isn't enough room in hello smaller size toohold all of hello data from hello last backup, keys will be evicted during hello restore process, typically using hello [allkeys-lru](http://redis.io/topics/lru-cache) eviction policy.</span></span>

### <a name="can-i-change-hello-rdb-backup-frequency-after-i-create-hello-cache"></a><span data-ttu-id="c3cef-186">Módosíthatom hello Rekordadatbázis biztonsági mentés gyakoriságát, hello gyorsítótár létrehozása után?</span><span class="sxs-lookup"><span data-stu-id="c3cef-186">Can I change hello RDB backup frequency after I create hello cache?</span></span>
<span data-ttu-id="c3cef-187">Igen, módosíthatja a biztonsági mentési gyakorisága hello Rekordadatbázis adatmegőrzési a hello **Redis-adatmegőrzés** panelen.</span><span class="sxs-lookup"><span data-stu-id="c3cef-187">Yes, you can change hello backup frequency for RDB persistence on hello **Redis data persistence** blade.</span></span> <span data-ttu-id="c3cef-188">Útmutatásért lásd: [konfigurálása Redis adatmegőrzési](#configure-redis-persistence).</span><span class="sxs-lookup"><span data-stu-id="c3cef-188">For instructions, see [Configure Redis persistence](#configure-redis-persistence).</span></span>

### <a name="why-if-i-have-an-rdb-backup-frequency-of-60-minutes-there-is-more-than-60-minutes-between-backups"></a><span data-ttu-id="c3cef-189">Miért Ha egy Rekordadatbázis biztonsági mentési gyakoriság 60 perc több mint 60 perc között van biztonsági mentések?</span><span class="sxs-lookup"><span data-stu-id="c3cef-189">Why if I have an RDB backup frequency of 60 minutes there is more than 60 minutes between backups?</span></span>
<span data-ttu-id="c3cef-190">hello Rekordadatbázis adatmegőrzési biztonsági mentési gyakoriság időköz nem indul el, amíg hello korábbi biztonsági mentési folyamat sikeresen befejeződött.</span><span class="sxs-lookup"><span data-stu-id="c3cef-190">hello RDB persistence backup frequency interval does not start until hello previous backup process has completed successfully.</span></span> <span data-ttu-id="c3cef-191">Ha egy teljes biztonsági mentés 15 perc toosuccessfully tart hello biztonsági mentési gyakoriság érték 60 perc, hello következő biztonsági mentés nem elindítani hello követő 75 percen hello korábbi biztonsági mentés idején.</span><span class="sxs-lookup"><span data-stu-id="c3cef-191">If hello backup frequency is 60 minutes and it takes a backup process 15 minutes toosuccessfully complete, hello next backup won't start until 75 minutes after hello start time of hello previous backup.</span></span>

### <a name="what-happens-toohello-old-rdb-backups-when-a-new-backup-is-made"></a><span data-ttu-id="c3cef-192">Toohello régi Rekordadatbázis biztonsági mentések mi történik, ha egy új biztonsági másolat legyen?</span><span class="sxs-lookup"><span data-stu-id="c3cef-192">What happens toohello old RDB backups when a new backup is made?</span></span>
<span data-ttu-id="c3cef-193">Legutóbbi hello kivételével az összes Rekordadatbázis adatmegőrzési biztonsági automatikusan törlődnek.</span><span class="sxs-lookup"><span data-stu-id="c3cef-193">All RDB persistence backups except for hello most recent one are automatically deleted.</span></span> <span data-ttu-id="c3cef-194">Ez a törlés nem fordulhat elő, azonnal, de a régebbi biztonsági másolatok nem határozatlan ideig maradnak meg.</span><span class="sxs-lookup"><span data-stu-id="c3cef-194">This deletion may not happen immediately but older backups are not persisted indefinitely.</span></span>


### <a name="when-should-i-use-a-second-storage-account"></a><span data-ttu-id="c3cef-195">Mikor kell használni egy másik tárolási fiókot?</span><span class="sxs-lookup"><span data-stu-id="c3cef-195">When should I use a second storage account?</span></span>

<span data-ttu-id="c3cef-196">Ha úgy véli, magasabb, mint a hello gyorsítótáron várt műveletek van egy másik tárolási fiókot kell használatra AOF adatmegőrzési.</span><span class="sxs-lookup"><span data-stu-id="c3cef-196">You should use a second storage account for AOF persistence when you believe you have higher than expected set operations on hello cache.</span></span>  <span data-ttu-id="c3cef-197">Másodlagos tárfiók hello beállítása lehetővé teszi a gyorsítótár nem eléri a tárolási sávszélesség korlátja.</span><span class="sxs-lookup"><span data-stu-id="c3cef-197">Setting up hello secondary storage account helps ensure your cache doesn't reach storage bandwidth limits.</span></span>

### <a name="does-aof-persistence-affect-throughout-latency-or-performance-of-my-cache"></a><span data-ttu-id="c3cef-198">AOF adatmegőrzési hatása teljes, a késleltetés vagy a teljesítmény a gyorsítótár nem?</span><span class="sxs-lookup"><span data-stu-id="c3cef-198">Does AOF persistence affect throughout, latency, or performance of my cache?</span></span>

<span data-ttu-id="c3cef-199">AOF adatmegőrzési befolyásolja átviteli által körülbelül 15 – 20 % Ha hello gyorsítótár maximális terhelés alatt (Processzor- és kiszolgáló egyaránt betöltése 90 %-a).</span><span class="sxs-lookup"><span data-stu-id="c3cef-199">AOF persistence affects throughput by about 15% – 20% when hello cache is below maximum load (CPU and Server Load both under 90%).</span></span> <span data-ttu-id="c3cef-200">Nem szabadna késési problémák hello gyorsítótár esetén ezeken a határokon.</span><span class="sxs-lookup"><span data-stu-id="c3cef-200">There should not be latency issues when hello cache is within these limits.</span></span> <span data-ttu-id="c3cef-201">Azonban hello gyorsítótár eléri a működés felső korlátjának hamarabb rendelkező AOF engedélyezve van.</span><span class="sxs-lookup"><span data-stu-id="c3cef-201">However, hello cache will reach these limits sooner with AOF enabled.</span></span>

### <a name="how-can-i-remove-hello-second-storage-account"></a><span data-ttu-id="c3cef-202">Hogyan távolíthatom hello második tárfiókot?</span><span class="sxs-lookup"><span data-stu-id="c3cef-202">How can I remove hello second storage account?</span></span>

<span data-ttu-id="c3cef-203">Eltávolíthatja a hello AOF adatmegőrzési másodlagos tárfiók hello második tárfiók toobe hello azonos hello első tárolási fiók beállításával.</span><span class="sxs-lookup"><span data-stu-id="c3cef-203">You can remove hello AOF persistence secondary storage account by setting hello second storage account toobe hello same as hello first storage account.</span></span> <span data-ttu-id="c3cef-204">Útmutatásért lásd: [konfigurálása AOF adatmegőrzési](#configure-aof-persistence).</span><span class="sxs-lookup"><span data-stu-id="c3cef-204">For instructions, see [Configure AOF persistence](#configure-aof-persistence).</span></span>

### <a name="what-is-a-rewrite-and-how-does-it-affect-my-cache"></a><span data-ttu-id="c3cef-205">Mi az, hogy egy átdolgozás, és hogyan azt befolyásolja a gyorsítótár?</span><span class="sxs-lookup"><span data-stu-id="c3cef-205">What is a rewrite and how does it affect my cache?</span></span>

<span data-ttu-id="c3cef-206">Hello AOF fájl méretének elég nagy, akkor egy átdolgozás automatikusan hello gyorsítótár várólistájára.</span><span class="sxs-lookup"><span data-stu-id="c3cef-206">When hello AOF file becomes large enough, a rewrite is automatically queued on hello cache.</span></span> <span data-ttu-id="c3cef-207">hello átdolgozás átméretezi hello AOF fájl hello minimálisan szükséges műveletek toocreate hello aktuális adatkészlet szükséges.</span><span class="sxs-lookup"><span data-stu-id="c3cef-207">hello rewrite resizes hello AOF file with hello minimal set of operations needed toocreate hello current data set.</span></span> <span data-ttu-id="c3cef-208">Újraírások, során várható tooreach teljesítménykorlátok hamarabb különösen nagy adatkészletekkel meghatározásakor.</span><span class="sxs-lookup"><span data-stu-id="c3cef-208">During rewrites, expect tooreach performance limits sooner especially when dealing with large datasets.</span></span> <span data-ttu-id="c3cef-209">Újraírások elő kisebb gyakran hello AOF fájl nagyobb válik, de ha történik egy jelentős ideig eltarthat.</span><span class="sxs-lookup"><span data-stu-id="c3cef-209">Rewrites occur less often as hello AOF file becomes larger, but will take a significant amount of time when it happens.</span></span>

### <a name="what-should-i-expect-when-scaling-a-cache-with-aof-enabled"></a><span data-ttu-id="c3cef-210">Mit kell várhatnak, amikor a gyorsítótár méretezést, AOF engedélyezve van?</span><span class="sxs-lookup"><span data-stu-id="c3cef-210">What should I expect when scaling a cache with AOF enabled?</span></span>

<span data-ttu-id="c3cef-211">Ha hello AOF fájl a skálázás hello időpontjában jelentősen nagy, majd várt hello skálázási művelet tootake hosszabb a vártnál, mivel azt fogja betöltődnek hello fájl skálázás befejeződése után.</span><span class="sxs-lookup"><span data-stu-id="c3cef-211">If hello AOF file at hello time of scaling is significantly large, then expect hello scale operation tootake longer than expected since it will be reloading hello file after scaling has finished.</span></span>

<span data-ttu-id="c3cef-212">A méretezés további információkért lásd: [mi történik, ha szeretnék rendelkezik méretezhető tooa különböző méretét, és egy biztonsági mentési művelet skálázás hello előtt végrehajtott helyreáll?](#what-happens-if-i-have-scaled-to-a-different-size-and-a-backup-is-restored-that-was-made-before-the-scaling-operation)</span><span class="sxs-lookup"><span data-stu-id="c3cef-212">For more information on scaling, see [What happens if I have scaled tooa different size and a backup is restored that was made before hello scaling operation?](#what-happens-if-i-have-scaled-to-a-different-size-and-a-backup-is-restored-that-was-made-before-the-scaling-operation)</span></span>

### <a name="how-is-my-aof-data-organized-in-storage"></a><span data-ttu-id="c3cef-213">Hogyan vannak rendezve AOF adataimat storage?</span><span class="sxs-lookup"><span data-stu-id="c3cef-213">How is my AOF data organized in storage?</span></span>

<span data-ttu-id="c3cef-214">A AOF-fájlokban tárolt adatok több lapblobokat tooincrease teljesítményének hello adatok toostorage elmenti egy van felosztva.</span><span class="sxs-lookup"><span data-stu-id="c3cef-214">Data stored in AOF files is divided into multiple page blobs per node tooincrease performance of saving hello data toostorage.</span></span> <span data-ttu-id="c3cef-215">hello következő táblázatban láthatók az egyes tarifacsomagok hány lapblobokat használnak:</span><span class="sxs-lookup"><span data-stu-id="c3cef-215">hello following table displays how many page blobs are used for each pricing tier:</span></span>

| <span data-ttu-id="c3cef-216">Premium szintű csomag</span><span class="sxs-lookup"><span data-stu-id="c3cef-216">Premium tier</span></span> | <span data-ttu-id="c3cef-217">Blobok</span><span class="sxs-lookup"><span data-stu-id="c3cef-217">Blobs</span></span> |
|--------------|-------|
| <span data-ttu-id="c3cef-218">P1</span><span class="sxs-lookup"><span data-stu-id="c3cef-218">P1</span></span>           | <span data-ttu-id="c3cef-219">a shard / 4</span><span class="sxs-lookup"><span data-stu-id="c3cef-219">4 per shard</span></span>    |
| <span data-ttu-id="c3cef-220">P2</span><span class="sxs-lookup"><span data-stu-id="c3cef-220">P2</span></span>           | <span data-ttu-id="c3cef-221">a shard 8</span><span class="sxs-lookup"><span data-stu-id="c3cef-221">8 per shard</span></span>    |
| <span data-ttu-id="c3cef-222">P3</span><span class="sxs-lookup"><span data-stu-id="c3cef-222">P3</span></span>           | <span data-ttu-id="c3cef-223">a shard / 16</span><span class="sxs-lookup"><span data-stu-id="c3cef-223">16 per shard</span></span>   |
| <span data-ttu-id="c3cef-224">P4</span><span class="sxs-lookup"><span data-stu-id="c3cef-224">P4</span></span>           | <span data-ttu-id="c3cef-225">a shard 20</span><span class="sxs-lookup"><span data-stu-id="c3cef-225">20 per shard</span></span>   |

<span data-ttu-id="c3cef-226">Amikor a fürtszolgáltatás engedélyezve van, minden egyes shard hello gyorsítótárában saját rendelkezik a lapblobokat, hello előző táblázat szerint.</span><span class="sxs-lookup"><span data-stu-id="c3cef-226">When clustering is enabled, each shard in hello cache has its own set of page blobs, as indicated in hello previous table.</span></span> <span data-ttu-id="c3cef-227">Például három szilánkok P2 gyorsítótár az AOF fájl elosztása 24 lapblobokat (8 blobok / shard, a 3 szilánkok).</span><span class="sxs-lookup"><span data-stu-id="c3cef-227">For example, a P2 cache with three shards distributes its AOF file across 24 page blobs (8 blobs per shard, with 3 shards).</span></span>

<span data-ttu-id="c3cef-228">Egy átdolgozás után két készlet AOF fájlok tárolási szerepel.</span><span class="sxs-lookup"><span data-stu-id="c3cef-228">After a rewrite, two sets of AOF files exist in storage.</span></span> <span data-ttu-id="c3cef-229">Újraírások hello háttérben történik, és a hozzáfűző toohello első fájlkészlet, amíg set műveletek során hello átdolgozás toohello gyorsítótár küldött hozzáfűzése toohello másik készletben.</span><span class="sxs-lookup"><span data-stu-id="c3cef-229">Rewrites occur in hello background and append toohello first set of files, while set operations that are sent toohello cache during hello rewrite append toohello second set.</span></span> <span data-ttu-id="c3cef-230">A biztonsági mentés során hiba esetén újraírások ideiglenesen tárolja, de egy átdolgozás befejeződése után azonnal törlődik.</span><span class="sxs-lookup"><span data-stu-id="c3cef-230">A backup is temporarily stored during rewrites in case of failure, but is promptly deleted after a rewrite finishes.</span></span>


## <a name="next-steps"></a><span data-ttu-id="c3cef-231">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="c3cef-231">Next steps</span></span>
<span data-ttu-id="c3cef-232">Ismerje meg, hogyan több premium toouse gyorsítótár szolgáltatásokat.</span><span class="sxs-lookup"><span data-stu-id="c3cef-232">Learn how toouse more premium cache features.</span></span>

* [<span data-ttu-id="c3cef-233">Bevezetés toohello Azure Redis Cache prémium szintjének</span><span class="sxs-lookup"><span data-stu-id="c3cef-233">Introduction toohello Azure Redis Cache Premium tier</span></span>](cache-premium-tier-intro.md)

<!-- IMAGES -->

[redis-cache-premium-pricing-tier]: ./media/cache-how-to-premium-persistence/redis-cache-premium-pricing-tier.png

[redis-cache-persistence]: ./media/cache-how-to-premium-persistence/redis-cache-persistence.png

[redis-cache-rdb-persistence]: ./media/cache-how-to-premium-persistence/redis-cache-rdb-persistence.png

[redis-cache-aof-persistence]: ./media/cache-how-to-premium-persistence/redis-cache-aof-persistence.png

[redis-cache-settings]: ./media/cache-how-to-premium-persistence/redis-cache-settings.png
