---
title: "aaaAuthentication és az Azure App Service API Apps-engedélyezés |} Microsoft Docs"
description: "Hello hitelesítési és engedélyezési szolgáltatásokat biztosító Azure App Service API Apps megismerése."
services: app-service\api
documentationcenter: .net
author: alexkarcher-msft
manager: erikre
editor: 
ms.assetid: d620b53a-5a6f-41c9-84c7-f7ef5ff02ae7
ms.service: app-service-api
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/23/2016
ms.author: alkarche
ms.openlocfilehash: 6d26754b8b606ec232a74768787922ea80577c95
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/06/2017
---
# <a name="authentication-and-authorization-for-api-apps-in-azure-app-service"></a><span data-ttu-id="08386-103">Hitelesítési és engedélyezési API-alkalmazások az Azure App Service-ben</span><span class="sxs-lookup"><span data-stu-id="08386-103">Authentication and authorization for API Apps in Azure App Service</span></span>
## <a name="overview"></a><span data-ttu-id="08386-104">Áttekintés</span><span class="sxs-lookup"><span data-stu-id="08386-104">Overview</span></span>
> [!NOTE]
> <span data-ttu-id="08386-105">Ez a témakör lesz összevonva áttelepített tooa [App Service hitelesítés / engedélyezés](../app-service/app-service-authentication-overview.md) témakör, amely lefedi a webes, mobil és API-alkalmazások.</span><span class="sxs-lookup"><span data-stu-id="08386-105">This topic will be migrated tooa consolidated [App Service Authentication / Authorization](../app-service/app-service-authentication-overview.md) topic, which covers Web, Mobile, and API Apps.</span></span>
> 
> 

<span data-ttu-id="08386-106">Az Azure App Service biztosít, beépített hitelesítési és engedélyezési szolgáltatásokat, hogy megvalósítása [OAuth 2.0](#oauth) és [OpenID Connect](#oauth).</span><span class="sxs-lookup"><span data-stu-id="08386-106">Azure App Service offers built-in authentication and authorization services that implement [OAuth 2.0](#oauth) and [OpenID Connect](#oauth).</span></span> <span data-ttu-id="08386-107">Ez a cikk ismerteti a hello szolgáltatások és a lehetőségek állnak rendelkezésre az Azure App Service API-alkalmazások.</span><span class="sxs-lookup"><span data-stu-id="08386-107">This article describes hello services and options that are available for API Apps in Azure App Service.</span></span>

<span data-ttu-id="08386-108">a következő diagram hello App Service hitelesítés néhány főbb jellemzőit mutatja be:</span><span class="sxs-lookup"><span data-stu-id="08386-108">hello following diagram illustrates some key characteristics of App Service authentication:</span></span>

* <span data-ttu-id="08386-109">Az preprocesses bejövő API-kérelmek, ami azt jelenti, hogy bármilyen nyelven vagy keretrendszerben App Service által támogatott együttműködik.</span><span class="sxs-lookup"><span data-stu-id="08386-109">It preprocesses incoming API requests, which means it works with any language or framework supported by App Service.</span></span>
* <span data-ttu-id="08386-110">Ez lehetővé teszi az szeretné, hogy mennyi hitelesítés működik, akkor számos lehetőség közül választhat toodo az Ön saját kódját.</span><span class="sxs-lookup"><span data-stu-id="08386-110">It gives you several options for how much authentication work you want toodo in your own code.</span></span>
* <span data-ttu-id="08386-111">A végfelhasználói és a szolgáltatás fiók hitelesítési működik.</span><span class="sxs-lookup"><span data-stu-id="08386-111">It works for both end user and service account authentication.</span></span> 
* <span data-ttu-id="08386-112">Az öt identitás-szolgáltatóktól támogatja: Azure Active Directory, a Facebook, a Google, a Twitter és a Microsoft Account.</span><span class="sxs-lookup"><span data-stu-id="08386-112">It supports five identity providers: Azure Active Directory, Facebook, Google, Twitter, and Microsoft Account.</span></span>
* <span data-ttu-id="08386-113">Hogy működik a API-alkalmazások, a webalkalmazások és a Mobile Apps hello azonos.</span><span class="sxs-lookup"><span data-stu-id="08386-113">It works hello same for API Apps, Web Apps, and Mobile Apps.</span></span>

![](./media/app-service-api-authentication/api-apps-overview.png)

## <a name="language-agnostic"></a><span data-ttu-id="08386-114">Nyelvi független</span><span class="sxs-lookup"><span data-stu-id="08386-114">Language agnostic</span></span>
<span data-ttu-id="08386-115">App Service hitelesítés feldolgozása előtt kérelmek elérni az API-alkalmazás, amely bármilyen nyelven vagy keretrendszerben írt API-alkalmazások jelenti, hogy működik-e hello hitelesítési szolgáltatások történik.</span><span class="sxs-lookup"><span data-stu-id="08386-115">App Service authentication processing happens before requests reach your API app, which means that hello authentication features work for API apps written in any language or framework.</span></span>  <span data-ttu-id="08386-116">Az API-t az ASP.NET, Java, Node.js vagy bármely keretrendszer, amely támogatja az App Service alapulhatnak.</span><span class="sxs-lookup"><span data-stu-id="08386-116">Your API can be based on ASP.NET, Java, Node.js, or any framework that App Service supports.</span></span>

<span data-ttu-id="08386-117">App Service hello JSON webes jogkivonat (JWT) hello Authorization fejlécet HTTP-kérések továbbítja, és bármilyen nyelven vagy keretrendszerben írt kód lekérheti szükséges hello adatokat hello token.</span><span class="sxs-lookup"><span data-stu-id="08386-117">App Service passes on hello JSON web token (JWT) in hello Authorization header of an HTTP request, and code written in any language or framework can get hello information it needs from hello token.</span></span> <span data-ttu-id="08386-118">Emellett az App Service hozzáférést biztosít az egyszerűbb leggyakrabban használt toohello jogcímek úgy, hogy néhány speciális fejlécek, például hello következő:</span><span class="sxs-lookup"><span data-stu-id="08386-118">In addition, App Service gives you easier access toohello most commonly used claims by setting some special headers, such as hello following:</span></span>

* <span data-ttu-id="08386-119">X-MS-CLIENT-TAG-NEVE</span><span class="sxs-lookup"><span data-stu-id="08386-119">X-MS-CLIENT-PRINCIPAL-NAME</span></span>
* <span data-ttu-id="08386-120">AZ X-MS-CLIENT-EGYSZERŰ-ID</span><span class="sxs-lookup"><span data-stu-id="08386-120">X-MS-CLIENT-PRINCIPAL-ID</span></span>
* <span data-ttu-id="08386-121">X-MS-TOKEN-FACEBOOK-ACCESS-TOKEN</span><span class="sxs-lookup"><span data-stu-id="08386-121">X-MS-TOKEN-FACEBOOK-ACCESS-TOKEN</span></span>
* <span data-ttu-id="08386-122">X-MS-TOKEN-FACEBOOK-EXPIRES-ON</span><span class="sxs-lookup"><span data-stu-id="08386-122">X-MS-TOKEN-FACEBOOK-EXPIRES-ON</span></span>

<span data-ttu-id="08386-123">A .NET API-t használhatja hello `Authorize` attribútumot, és könnyen írhat minden részletre kiterjedő engedélyezési kód alapján jogcímeket mert jogcímek információk .NET-osztályok meg nem üres.</span><span class="sxs-lookup"><span data-stu-id="08386-123">In a .NET API, you can use hello `Authorize` attribute, and for fine-grained authorization you can easily write code based on claims because claims information is populated for you in .NET classes.</span></span>

## <a name="multiple-protection-options"></a><span data-ttu-id="08386-124">Több védelem beállításai</span><span class="sxs-lookup"><span data-stu-id="08386-124">Multiple protection options</span></span>
<span data-ttu-id="08386-125">App Service képes megakadályozni az anonim HTTP-kérelmek az API-alkalmazás elérése, adjon át minden kérésnél és érvényesíthet jogkivonatokat tünteti fel a kérelem, vagy azokat a művelet végrehajtása nélkül lehetővé teheti az összes kéréseken keresztüli:</span><span class="sxs-lookup"><span data-stu-id="08386-125">App Service can prevent anonymous HTTP requests from reaching your API app, it can pass on all requests and validate tokens for requests that include them, or it can let through all requests without taking any action on them:</span></span>

1. <span data-ttu-id="08386-126">Csak a hitelesített kérelmek tooreach az API-alkalmazás engedélyezése.</span><span class="sxs-lookup"><span data-stu-id="08386-126">Allow only authenticated requests tooreach your API app.</span></span>
   
    <span data-ttu-id="08386-127">Ha egy névtelen kérelem érkezik a böngészőből, az App Service átirányítja a tooa bejelentkezési oldal hello hitelesítésszolgáltató (az Azure ad-vel, Google, Twitter, stb.) az Ön által.</span><span class="sxs-lookup"><span data-stu-id="08386-127">If an anonymous request is received from a browser, App Service will redirect tooa logon page for hello authentication provider (Azure AD, Google, Twitter, etc.) that you choose.</span></span> 
   
    <span data-ttu-id="08386-128">Ezzel a beállítással nem kell toowrite bármely hitelesítési kód minden az alkalmazásban, és engedélyezési kód egyszerűsödött, mert az egyik legfontosabb jogcímek hello hello HTTP-fejlécek szerepelnek.</span><span class="sxs-lookup"><span data-stu-id="08386-128">With this option, you don't need toowrite any authentication code at all in your app, and authorization code is simplified because hello most important claims are provided in hello HTTP headers.</span></span>
2. <span data-ttu-id="08386-129">Engedélyezi az összes kérelem tooreach az API-alkalmazás, de hitelesített kérelmek ellenőrzése és adják át a hitelesítési adatokat a hello HTTP-fejlécekben.</span><span class="sxs-lookup"><span data-stu-id="08386-129">Allow all requests tooreach your API app, but validate authenticated requests and pass along authentication information in hello HTTP headers.</span></span>
   
    <span data-ttu-id="08386-130">Ez a beállítás lehetővé teszi nagyobb rugalmasságot biztosítanak a kezelési névtelen kérelem, de van toowrite kódja, ha azt szeretné, hogy a névtelen felhasználók tooprevent az API-t használja.</span><span class="sxs-lookup"><span data-stu-id="08386-130">This option gives you more flexibility in handling anonymous requests, but you have toowrite code if you want tooprevent anonymous users from using your API.</span></span> <span data-ttu-id="08386-131">Mivel a hello legnépszerűbb jogcímeket a HTTP-kérelmek fejléceinek hello átadott, engedélyezési kód olyan viszonylag egyszerű.</span><span class="sxs-lookup"><span data-stu-id="08386-131">Since hello most popular claims are passed in hello headers of HTTP requests, authorization code is relatively simple.</span></span>
3. <span data-ttu-id="08386-132">Minden kérelmek tooreach engedélyezése az API-t, műveletek végrehajtása nélkül hello kérésekben hitelesítési adatokat.</span><span class="sxs-lookup"><span data-stu-id="08386-132">Allow all requests tooreach your API, take no action on authentication information in hello requests.</span></span>
   
    <span data-ttu-id="08386-133">Ezt a beállítást hagyja hitelesítési és engedélyezési teljes mértékben be tooyour alkalmazáskód hello feladatait.</span><span class="sxs-lookup"><span data-stu-id="08386-133">This option leaves hello tasks of authentication and authorization entirely up tooyour application code.</span></span>

<span data-ttu-id="08386-134">A hello [Azure-portálon](https://portal.azure.com/), hello kívánt hello beállítást választja **hitelesítési / engedélyezési** panelen.</span><span class="sxs-lookup"><span data-stu-id="08386-134">In hello [Azure portal](https://portal.azure.com/), you select hello option you want on hello **Authentication / Authorization** blade.</span></span>

![](./media/app-service-api-authentication/authblade.png)

<span data-ttu-id="08386-135">1. és 2 beállítások, kapcsolja be **App Service hitelesítés**, és a hello **művelet tootake hitelesítetlen kérés esetén** legördülő listában válassza ki **jelentkezzen be** vagy **Kérés engedélyezése (intézkedés)**.</span><span class="sxs-lookup"><span data-stu-id="08386-135">For options 1 and 2, turn on **App Service Authentication**, and in hello **Action tootake when request is not authenticated** drop-down list choose **Log in** or **Allow request (no action)**.</span></span>  <span data-ttu-id="08386-136">Ha úgy dönt, **jelentkezzen be**, toochoose rendelkeznek egy hitelesítésszolgáltató, és konfigurálja a szolgáltatót.</span><span class="sxs-lookup"><span data-stu-id="08386-136">If you choose **Log in**, you have toochoose an authentication provider and configure that provider.</span></span>

![](./media/app-service-api-authentication/actiontotake.png)

<span data-ttu-id="08386-137">Részletes információ tooconfigure hitelesítési, lásd: [hogyan tooconfigure az App Service alkalmazás toouse Azure Active Directory bejelentkezési](../app-service-mobile/app-service-mobile-how-to-configure-active-directory-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="08386-137">For detailed information about how tooconfigure authentication, see [How tooconfigure your App Service application toouse Azure Active Directory login](../app-service-mobile/app-service-mobile-how-to-configure-active-directory-authentication.md).</span></span> <span data-ttu-id="08386-138">hello cikk vonatkozik tooAPI alkalmazások, valamint a mobile apps szolgáltatásban, és más hitelesítésszolgáltatókat kapcsolatok hello tooother cikkeket.</span><span class="sxs-lookup"><span data-stu-id="08386-138">hello article applies tooAPI apps as well as mobile apps, and it links tooother articles for hello other authentication providers.</span></span>

## <span data-ttu-id="08386-139"><a id="internal"></a>Szolgáltatás-fiók hitelesítése</span><span class="sxs-lookup"><span data-stu-id="08386-139"><a id="internal"></a> Service account authentication</span></span>
<span data-ttu-id="08386-140">App Service authentication működik, többek között az alkalmazásból egy API app tooanother API hívása belső forgatókönyvek.</span><span class="sxs-lookup"><span data-stu-id="08386-140">App Service authentication works for internal scenarios such as for calling from one API app tooanother API app.</span></span> <span data-ttu-id="08386-141">Ebben a forgatókönyvben azt szolgáltatáshitelesítést egy token helyett a felhasználó hitelesítő adatait a szolgáltatásfiók hitelesítő adataival.</span><span class="sxs-lookup"><span data-stu-id="08386-141">In this scenario you get a token by using credentials for a service account instead of end user credentials.</span></span> <span data-ttu-id="08386-142">A szolgáltatásfiók is van egy *szolgáltatás egyszerű* az Azure Active Directory és a hitelesítés ilyen fiókja is nevezik egy szolgáltatások közötti forgatókönyv.</span><span class="sxs-lookup"><span data-stu-id="08386-142">A service account is also known as a *service principal* in Azure Active Directory, and authentication using such an account is also known as a service-to-service scenario.</span></span> 

<span data-ttu-id="08386-143">Szolgáltatások közötti forgatókönyvek esetén hello nevű API-alkalmazás Azure Active Directory segítségével védeni, és adjon meg egy AAD szolgáltatás egyszerű engedélyezési jogkivonatot hello API app hívásakor.</span><span class="sxs-lookup"><span data-stu-id="08386-143">For service-to-service scenarios, protect hello called API app by using Azure Active Directory, and provide an AAD service principal authorization token when you call hello API app.</span></span> <span data-ttu-id="08386-144">Hello ügyfél-Azonosítót és titkos hello AAD-alkalmazást az ügyfél megadásával szolgáltatáshitelesítést egy token.</span><span class="sxs-lookup"><span data-stu-id="08386-144">You get a token by providing hello client ID and client secret from hello AAD application.</span></span> <span data-ttu-id="08386-145">Nincsenek speciális csak Azure-kód megadása kötelező, például hello Mobile Services Zumo token kezelésére használt toobe igaz.</span><span class="sxs-lookup"><span data-stu-id="08386-145">No special Azure-only code is required, such as used toobe true for handling hello Mobile Services Zumo token.</span></span> <span data-ttu-id="08386-146">Ezt a forgatókönyvet ASP.NET API-alkalmazások például hatálya alá hello oktatóanyag [szolgáltatás egyszerű hitelesítési API-alkalmazások](app-service-api-dotnet-service-principal-auth.md).</span><span class="sxs-lookup"><span data-stu-id="08386-146">An example of this scenario using ASP.NET API apps is covered by hello tutorial [Service principal authentication for API Apps](app-service-api-dotnet-service-principal-auth.md).</span></span>

<span data-ttu-id="08386-147">Ha egy szolgáltatások közötti forgatókönyv toohandle App Service hitelesítés nélkül, ügyféltanúsítványok vagy egyszerű hitelesítést is használhatja.</span><span class="sxs-lookup"><span data-stu-id="08386-147">If you want toohandle a service-to-service scenario without using App Service authentication, you can use client certificates or basic authentication.</span></span> <span data-ttu-id="08386-148">Az Azure-ban ügyfél tanúsítványokkal kapcsolatos további információkért lásd: [hogyan tooConfigure TLS kölcsönös hitelesítést a Web Apps](../app-service-web/app-service-web-configure-tls-mutual-auth.md).</span><span class="sxs-lookup"><span data-stu-id="08386-148">For information about client certificates in Azure, see [How tooConfigure TLS Mutual Authentication for Web Apps](../app-service-web/app-service-web-configure-tls-mutual-auth.md).</span></span> <span data-ttu-id="08386-149">Egyszerű hitelesítés az ASP.NET kapcsolatos információkért lásd: [hitelesítési szűrők ASP.NET Web API 2](http://www.asp.net/web-api/overview/security/authentication-filters).</span><span class="sxs-lookup"><span data-stu-id="08386-149">For information about basic authentication in ASP.NET, see [Authentication Filters in ASP.NET Web API 2](http://www.asp.net/web-api/overview/security/authentication-filters).</span></span>

<span data-ttu-id="08386-150">Szolgáltatás fiók hitelesítési egy App Service logic app tooan API-alkalmazást a rendszer egy különleges esetben a kifejtett [az App Service a Logic apps üzemeltetett egyéni API használata](../logic-apps/logic-apps-custom-hosted-api.md).</span><span class="sxs-lookup"><span data-stu-id="08386-150">Service account authentication from an App Service logic app tooan API app is a special case that is explained in [Using your custom API hosted on App Service with Logic apps](../logic-apps/logic-apps-custom-hosted-api.md).</span></span>

## <a name="mobile-client-authentication"></a><span data-ttu-id="08386-151">Mobileszköz ügyfél-hitelesítés</span><span class="sxs-lookup"><span data-stu-id="08386-151">Mobile client authentication</span></span>
<span data-ttu-id="08386-152">További információ toohandle hitelesítési mobilügyfelek, lásd: hello [mobilalkalmazások hitelesítéséről dokumentáció](../app-service-mobile/app-service-mobile-ios-get-started-users.md).</span><span class="sxs-lookup"><span data-stu-id="08386-152">For information about how toohandle authentication from mobile clients, see hello [documentation on authentication for mobile apps](../app-service-mobile/app-service-mobile-ios-get-started-users.md).</span></span> <span data-ttu-id="08386-153">App Service authentication hello működik ugyanúgy mobilalkalmazások és API-alkalmazások.</span><span class="sxs-lookup"><span data-stu-id="08386-153">App Service authentication works hello same way for mobile apps and API apps.</span></span>

## <a name="more-information"></a><span data-ttu-id="08386-154">További információ</span><span class="sxs-lookup"><span data-stu-id="08386-154">More information</span></span>
<span data-ttu-id="08386-155">Hitelesítési és engedélyezési az Azure App Service kapcsolatos további információkért tekintse meg a következő erőforrások hello:</span><span class="sxs-lookup"><span data-stu-id="08386-155">For more information about authentication and authorization in Azure App Service, see hello following resources:</span></span>

* [<span data-ttu-id="08386-156">Növekvő App Service hitelesítés / engedélyezés</span><span class="sxs-lookup"><span data-stu-id="08386-156">Expanding App Service authentication / authorization</span></span>](https://azure.microsoft.com/blog/announcing-app-service-authentication-authorization/)
* <span data-ttu-id="08386-157">[Hogyan tooconfigure az App Service alkalmazás toouse Azure Active Directory bejelentkezési](../app-service-mobile/app-service-mobile-how-to-configure-active-directory-authentication.md) (hivatkozásokat tartalmaz az egyéb hitelesítésszolgáltatókat hello oldal hello tetején.)</span><span class="sxs-lookup"><span data-stu-id="08386-157">[How tooconfigure your App Service application toouse Azure Active Directory login](../app-service-mobile/app-service-mobile-how-to-configure-active-directory-authentication.md) (Includes links for other authentication providers at hello top of hello page.)</span></span> 

<span data-ttu-id="08386-158">OAuth 2.0, az OpenID Connect és a JSON Web Tokens (JWT) kapcsolatos további információkért tekintse meg a következő erőforrások hello.</span><span class="sxs-lookup"><span data-stu-id="08386-158">For more information about OAuth 2.0, OpenID Connect, and JSON Web Tokens (JWT), see hello following resources.</span></span>

* [<span data-ttu-id="08386-159">Ismerkedés az OAuth 2.0</span><span class="sxs-lookup"><span data-stu-id="08386-159">Getting started with OAuth 2.0</span></span>](http://shop.oreilly.com/product/0636920021810.do "OAuth 2.0 első lépések") 
* [<span data-ttu-id="08386-160">Bevezetés tooOAuth2 OpenID Connectet, és JSON webes jogkivonatok (JWT) - Pluralsight működés során</span><span class="sxs-lookup"><span data-stu-id="08386-160">Introduction tooOAuth2, OpenID Connect and JSON Web Tokens (JWT) - Pluralsight Course</span></span>](http://www.pluralsight.com/courses/oauth2-json-web-tokens-openid-connect-introduction) 
* [<span data-ttu-id="08386-161">Kialakításához, és az ASP.NET - Pluralsight működés során több ügyfél számára a RESTful API védelme</span><span class="sxs-lookup"><span data-stu-id="08386-161">Building and Securing a RESTful API for Multiple Clients in ASP.NET - Pluralsight course</span></span>](http://www.pluralsight.com/courses/building-securing-restful-api-aspdotnet)

<span data-ttu-id="08386-162">Azure Active Directoryval kapcsolatos további információkért tekintse meg a következő erőforrások hello.</span><span class="sxs-lookup"><span data-stu-id="08386-162">For more information about Azure Active Directory, see hello following resources.</span></span>

* [<span data-ttu-id="08386-163">Az Azure AD-forgatókönyvek</span><span class="sxs-lookup"><span data-stu-id="08386-163">Azure AD scenarios</span></span>](http://aka.ms/aadscenarios)
* [<span data-ttu-id="08386-164">Az Azure AD fejlesztői útmutatója</span><span class="sxs-lookup"><span data-stu-id="08386-164">Azure AD developers' guide</span></span>](http://aka.ms/aaddev)
* [<span data-ttu-id="08386-165">Azure AD-minták</span><span class="sxs-lookup"><span data-stu-id="08386-165">Azure AD samples</span></span>](http://aka.ms/aadsamples)

## <a name="next-steps"></a><span data-ttu-id="08386-166">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="08386-166">Next steps</span></span>
<span data-ttu-id="08386-167">Ez a cikk az App Service API-alkalmazásokban használt hitelesítési és engedélyezési szolgáltatásokat szerint.</span><span class="sxs-lookup"><span data-stu-id="08386-167">This article has explained authentication and authorization features of App Service that you can use for API apps.</span></span> <span data-ttu-id="08386-168">hello következő oktatóanyagában hello első lépések sorozat bemutatja hogyan tooimplement [felhasználók hitelesítése az App Service API Apps](app-service-api-dotnet-user-principal-auth.md).</span><span class="sxs-lookup"><span data-stu-id="08386-168">hello next tutorial in hello getting started series shows how tooimplement [user authentication in App Service API Apps](app-service-api-dotnet-user-principal-auth.md).</span></span>

