---
title: "aaaFailover csoportok és aktív georeplikáció - Azure SQL Database |} Microsoft Docs"
description: "Aktív georeplikáció automatikus feladatátvételt csoportok lehetővé teszi az adatbázis bármely hello Azure adatközpontjaiban és a nem tervezett kimaradás esetén hello autoomatically feladatátvételi toosetup 4 replikái."
services: sql-database
documentationcenter: na
author: anosov1960
manager: jhubbard
editor: monicar
ms.assetid: 2a29f657-82fb-4283-9a83-e14a144bfd93
ms.service: sql-database
ms.custom: business continuity
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: NA
ms.date: 07/10/2017
ms.author: sashan
ms.openlocfilehash: 7a39af8505624c0f19c5abccff051af836b1f9bc
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/06/2017
---
# <a name="overview-failover-groups-and-active-geo-replication"></a><span data-ttu-id="76792-103">Áttekintés: Feladatátvételi csoportok és aktív georeplikáció</span><span class="sxs-lookup"><span data-stu-id="76792-103">Overview: Failover groups and active geo-replication</span></span>
<span data-ttu-id="76792-104">Aktív georeplikáció lehetővé teszi a hello másodlagos adatbázisok olvasható toofour tooconfigure ugyanazon vagy másik adatközpont-helyek (régió).</span><span class="sxs-lookup"><span data-stu-id="76792-104">Active geo-replication enables you tooconfigure up toofour readable secondary databases in hello same or different data center locations (regions).</span></span> <span data-ttu-id="76792-105">Másodlagos adatbázisok a lekérdezésre, és feladatátvételi hello esetben data center kimaradás vagy hello meggátoló tooconnect toohello elsődleges adatbázis érhetők el.</span><span class="sxs-lookup"><span data-stu-id="76792-105">Secondary databases are available for querying and for failover in hello case of a data center outage or hello inability tooconnect toohello primary database.</span></span> <span data-ttu-id="76792-106">hello kell kezdeményezni a feladatátvételt manuálisan hello alkalmazás hello felhasználó.</span><span class="sxs-lookup"><span data-stu-id="76792-106">hello failover must be initiated manually by hello application of hello user.</span></span> <span data-ttu-id="76792-107">A feladatátvétel után hello új elsődleges van egy másik kapcsolati végpontot.</span><span class="sxs-lookup"><span data-stu-id="76792-107">After failover, hello new primary has a different connection end-point.</span></span> 

> [!NOTE]
> <span data-ttu-id="76792-108">Aktív georeplikáció érhető el az összes olyan adatbázis összes szolgáltatásrétegekben minden régióban.</span><span class="sxs-lookup"><span data-stu-id="76792-108">Active geo-replication is available for all databases in all service tiers in all regions.</span></span>
>  

<span data-ttu-id="76792-109">Az Azure SQL adatbázis automatikus feladatátvételt csoportok (az előzetes verzió), egy SQL-adatbázis szolgáltatás tooautomatically kezelése georeplikáció kapcsolat, a kapcsolódási és a feladatátvételi méretekben.</span><span class="sxs-lookup"><span data-stu-id="76792-109">Azure SQL Database auto-failover groups (in-preview) is a SQL Database feature designed tooautomatically manage geo-replication relationship, connectivity, and failover at scale.</span></span> <span data-ttu-id="76792-110">Vele hello ügyfelek nyereség hello képességét tooautomatically hello másodlagos régióban több kapcsolódó adatbázisok helyreállítását követően katasztrofális regionális meghibásodásokkal vagy nem tervezett eseményeket, amelyek az SQL Database szolgáltatás hello teljes vagy részleges adatvesztéshez vezethet rendelkezésre állási hello elsődleges régióban.</span><span class="sxs-lookup"><span data-stu-id="76792-110">With it, hello customers gain hello ability tooautomatically recover multiple related databases in hello secondary region after catastrophic regional failures or other unplanned events that result in full or partial loss of hello SQL Database service’s availability in hello primary region.</span></span> <span data-ttu-id="76792-111">Emellett használhatnak hello olvasható másodlagos adatbázisok toooffload írásvédett munkaterhelések.</span><span class="sxs-lookup"><span data-stu-id="76792-111">Additionally, they can use hello readable secondary databases toooffload read-only workloads.</span></span>  <span data-ttu-id="76792-112">Mivel az automatikus feladatátvételt csoportok tartalmaz, amely több adatbázist kell ezeket konfigurálni hello elsődleges kiszolgálón.</span><span class="sxs-lookup"><span data-stu-id="76792-112">Because auto-failover groups involve multiple databases they must be configured on hello primary server.</span></span> <span data-ttu-id="76792-113">Elsődleges és másodlagos kiszolgálók kell hello ugyanahhoz az előfizetéshez.</span><span class="sxs-lookup"><span data-stu-id="76792-113">Both primary and secondary servers must be in hello same subscription.</span></span> <span data-ttu-id="76792-114">Automatikus feladatátvételt csoportok hello csoport tooonly egy másodlagos kiszolgáló egy másik régióban lévő összes adatbázis replikációs támogatja.</span><span class="sxs-lookup"><span data-stu-id="76792-114">Auto-failover groups support replication of all databases in hello group tooonly one secondary server in a different region.</span></span> <span data-ttu-id="76792-115">Aktív georeplikáció, automatikus feladatátvételt csoportok nélkül lehetővé teszi, hogy másolatot too4 másodlagos bármely régióban.</span><span class="sxs-lookup"><span data-stu-id="76792-115">Active geo-replication, without auto-failover groups, allows up too4 secondaries in any region.</span></span>

<span data-ttu-id="76792-116">Aktív georeplikáció használata és az elsődleges adatbázis OK, vagy egyszerűen offline állapotba kell toobe, a másodlagos adatbázisok feladatátvételi tooany is kezdeményezhető.</span><span class="sxs-lookup"><span data-stu-id="76792-116">If you are using active geo-replication and for any reason your primary database fails, or simply needs toobe taken offline, you can initiate failover tooany of your secondary databases.</span></span> <span data-ttu-id="76792-117">Aktivált tooone hello másodlagos adatbázisok esetén a feladatátvétel más másodlagos-e automatikusan csatolt toohello új elsődleges.</span><span class="sxs-lookup"><span data-stu-id="76792-117">When failover is activated tooone of hello secondary databases, all other secondaries are automatically linked toohello new primary.</span></span> <span data-ttu-id="76792-118">Automatikus feladatátvételt használata groups (a – előzetes verzió) toomanage adatbázis helyreállítása és bármely kimaradás, amely hatással van egy vagy több hello adatbázisok automatikus feladatátvétel hello csoport eredményezi.</span><span class="sxs-lookup"><span data-stu-id="76792-118">If you are using auto-failover groups (in-preview) toomanage database recovery and any outage that impacts one or several of hello databases in hello group results in automatic failover.</span></span> <span data-ttu-id="76792-119">Konfigurálhatja az alkalmazás igényeinek leginkább megfelelő hello automatikus feladatátvételt házirendet, vagy nem vesznek részt, és manuális-aktiválást használjon.</span><span class="sxs-lookup"><span data-stu-id="76792-119">You can configure hello auto-failover policy that best meets your application needs, or you can opt out and use manual activation.</span></span> <span data-ttu-id="76792-120">Emellett automatikus feladatátvételt csoportok (az előzetes verzió) adja meg az olvasási és írási, és csak olvasható figyelő végpontokat a továbbra is változatlan feladatátvételek során.</span><span class="sxs-lookup"><span data-stu-id="76792-120">In addition, auto-failover groups (in-preview) provide read-write and read-only listener end-points that remain unchanged during failovers.</span></span> <span data-ttu-id="76792-121">Akár manuális vagy automatikus feladatátvétel aktiválási, feladatátvevő összes másodlagos adatbázis a hello csoport tooprimary vált.</span><span class="sxs-lookup"><span data-stu-id="76792-121">Whether you use manual or automatic failover activation, failover switches all secondary databases in hello group tooprimary.</span></span> <span data-ttu-id="76792-122">Hello adatbázis feladatátvétel befejezését követően a hello DNS-rekord az automatikusan frissített tooredirect hello végpontjainak toohello új régió.</span><span class="sxs-lookup"><span data-stu-id="76792-122">After hello database failover is completed, hello DNS record is automatically updated tooredirect hello end-points toohello new region.</span></span>

<span data-ttu-id="76792-123">Kezelheti a replikációs és feladatátvételi egy önálló adatbázis vagy egy adatbázis-kiszolgálón vagy egy aktív georeplikációt használ a rugalmas készletben.</span><span class="sxs-lookup"><span data-stu-id="76792-123">You can manage replication and failover of an individual database or a set of databases on a server or in an elastic pool using active geo-replication.</span></span> <span data-ttu-id="76792-124">Megteheti, hogy használatával hello [Azure-portálon](sql-database-geo-replication-portal.md), [PowerShell](sql-database-geo-replication-powershell.md), [Transact-SQL](sql-database-geo-replication-transact-sql.md), vagy hello [REST API](https://msdn.microsoft.com/library/azure/mt163685.aspx).</span><span class="sxs-lookup"><span data-stu-id="76792-124">You can do that using hello [Azure portal](sql-database-geo-replication-portal.md), [PowerShell](sql-database-geo-replication-powershell.md), [Transact-SQL](sql-database-geo-replication-transact-sql.md), or hello [REST API](https://msdn.microsoft.com/library/azure/mt163685.aspx).</span></span> <span data-ttu-id="76792-125">A feladatátvétel után ellenőrizze a kiszolgáló és az adatbázis hello hitelesítési követelmények hello új elsődleges.</span><span class="sxs-lookup"><span data-stu-id="76792-125">After failover, ensure hello authentication requirements for your server and database are configured on hello new primary.</span></span> <span data-ttu-id="76792-126">További információkért lásd: [SQL-adatbázis biztonsági katasztrófa utáni helyreállítás után](sql-database-geo-replication-security-config.md).</span><span class="sxs-lookup"><span data-stu-id="76792-126">For details, see [SQL Database security after disaster recovery](sql-database-geo-replication-security-config.md).</span></span> <span data-ttu-id="76792-127">Ez vonatkozik, hogy mindkét tooactive georeplikáció és automatikus feladatátvételt csoportok (az előzetes verzió).</span><span class="sxs-lookup"><span data-stu-id="76792-127">This applies both tooactive geo-replication and auto-failover groups (in-preview).</span></span>

<span data-ttu-id="76792-128">Aktív georeplikáció használja hello [mindig a](https://docs.microsoft.com/sql/database-engine/availability-groups/windows/overview-of-always-on-availability-groups-sql-server) technológia az SQL Server tooasynchronously replikálja a véglegesített tranzakciókat hello elsődleges adatbázis tooa másodlagos adatbázison olvasás pillanatképe elkülönítéssel (RCSI).</span><span class="sxs-lookup"><span data-stu-id="76792-128">Active geo-replication leverages hello [Always On](https://docs.microsoft.com/sql/database-engine/availability-groups/windows/overview-of-always-on-availability-groups-sql-server) technology of SQL Server tooasynchronously replicate committed transactions on hello primary database tooa secondary database using read committed snapshot isolation (RCSI).</span></span> <span data-ttu-id="76792-129">Automatikus feladatátvételt csoportok hello csoport szemantikáját fölött aktív georeplikáció, de ugyanazon az aszinkron replikációs eljárás hello biztosítják.</span><span class="sxs-lookup"><span data-stu-id="76792-129">Auto-failover groups provide hello group semantics on top of active geo-replication but hello same asynchronous replication mechanism is used.</span></span> <span data-ttu-id="76792-130">Álljon, a hello másodlagos adatbázis némileg esetleg hello elsődleges adatbázis mögött, hello másodlagos adatok garantáltan toonever részleges tranzakciók rendelkezik.</span><span class="sxs-lookup"><span data-stu-id="76792-130">While at any given point, hello secondary database might be slightly behind hello primary database, hello secondary data is guaranteed toonever have partial transactions.</span></span> <span data-ttu-id="76792-131">Határokon területi redundanciát lehetővé teszi, hogy az egész adatközpont vagy természeti katasztrófa, katasztrofális emberi hibákat vagy rosszindulatú tevékenységéért által okozott adatközpontban részei egy állandó adatvesztést alkalmazások tooquickly helyreállítása.</span><span class="sxs-lookup"><span data-stu-id="76792-131">Cross-region redundancy enables applications tooquickly recover from a permanent loss of an entire datacenter or parts of a datacenter caused by natural disasters, catastrophic human errors, or malicious acts.</span></span> <span data-ttu-id="76792-132">hello RPO adatokat található [üzleti folytonosság – áttekintés](sql-database-business-continuity.md).</span><span class="sxs-lookup"><span data-stu-id="76792-132">hello specific RPO data can be found at [Overview of Business Continuity](sql-database-business-continuity.md).</span></span>

<span data-ttu-id="76792-133">hello alábbi ábrán is látható példáját mutatja be aktív georeplikáció konfigurált a hello északi középső Régiójában régióban elsődleges és másodlagos régióban hello déli középső Régiójában.</span><span class="sxs-lookup"><span data-stu-id="76792-133">hello following figure shows an example of active geo-replication configured with a primary in hello North Central US region and secondary in hello South Central US region.</span></span>

![a georeplikáció kapcsolat](./media/sql-database-active-geo-replication/geo-replication-relationship.png)

<span data-ttu-id="76792-135">Mivel hello másodlagos adatbázisok olvasható, a használt toooffload írásvédett munkaterhelésekkel, például jelentéskészítéssel feladatok is lehetnek.</span><span class="sxs-lookup"><span data-stu-id="76792-135">Because hello secondary databases are readable, they can be used toooffload read-only workloads such as reporting jobs.</span></span> <span data-ttu-id="76792-136">Ha az aktív georeplikációt használ, a rendszer lehetséges toocreate hello másodlagos adatbázis hello ugyanabban a régióban, hello elsődleges, de nem növeli a hello alkalmazás rugalmasság toocatastrophic hibák.</span><span class="sxs-lookup"><span data-stu-id="76792-136">If you are using active geo-replication, it is possible toocreate hello secondary database in hello same region with hello primary, but it does not increase hello application's resilience toocatastrophic failures.</span></span> <span data-ttu-id="76792-137">Ha az automatikus feladatátvételt csoportokat (az előzetes verzió) használ, a másodlagos adatbázisnak mindig létrejön egy másik régióban.</span><span class="sxs-lookup"><span data-stu-id="76792-137">If you are using auto-failover groups (in-preview), your secondary database is always created in a different region.</span></span>

<span data-ttu-id="76792-138">Ezenkívül a következő forgatókönyvek hello toodisaster helyreállítási aktív georeplikáció használhatók:</span><span class="sxs-lookup"><span data-stu-id="76792-138">In addition toodisaster recovery active geo-replication can be used in hello following scenarios:</span></span>

* <span data-ttu-id="76792-139">**Adatbázis-áttelepítési**: használhatja az egyik kiszolgáló tooanother online adatbázis aktív georeplikációt toomigrate minimális állásidővel.</span><span class="sxs-lookup"><span data-stu-id="76792-139">**Database migration**: You can use active geo-replication toomigrate a database from one server tooanother online with minimum downtime.</span></span>
* <span data-ttu-id="76792-140">**Alkalmazásfrissítések**: alkalmazás frissítése során sikertelen hátsó másolatként egy extra másodlagos is létrehozhat.</span><span class="sxs-lookup"><span data-stu-id="76792-140">**Application upgrades**: You can create an extra secondary as a fail back copy during application upgrades.</span></span>

<span data-ttu-id="76792-141">tooachieve valódi üzleti folytonossági, adatbázis-redundancia adatközpont között hozzáadása csak hello megoldás részét képezi.</span><span class="sxs-lookup"><span data-stu-id="76792-141">tooachieve real business continuity, adding database redundancy between datacenters is only part of hello solution.</span></span> <span data-ttu-id="76792-142">Helyreállítás egy alkalmazás (szolgáltatás)-végpontok után végzetes hiba hello szolgáltatást alkotó összetevők és a függő szolgáltatás sem szükséges.</span><span class="sxs-lookup"><span data-stu-id="76792-142">Recovering an application (service) end-to-end after a catastrophic failure requires recovery of all components that constitute hello service and any dependent services.</span></span> <span data-ttu-id="76792-143">Ezen összetevők közé hello ügyfélszoftver (például egy egyéni JavaScript böngésző), az előtér-webkiszolgálók, a tároló és a DNS.</span><span class="sxs-lookup"><span data-stu-id="76792-143">Examples of these components include hello client software (for example, a browser with a custom JavaScript), web front ends, storage, and DNS.</span></span> <span data-ttu-id="76792-144">Nagyon fontos, hogy az összes összetevő rugalmas toohello azonos hibákat észlel és belül hello helyreállítási idő célkitűzése (RTO) az alkalmazás elérhetővé válnak.</span><span class="sxs-lookup"><span data-stu-id="76792-144">It is critical that all components are resilient toohello same failures and become available within hello recovery time objective (RTO) of your application.</span></span> <span data-ttu-id="76792-145">Ezért kell tooidentify minden függő szolgáltatás és hello garanciák és képességeket biztosítanak.</span><span class="sxs-lookup"><span data-stu-id="76792-145">Therefore, you need tooidentify all dependent services and understand hello guarantees and capabilities they provide.</span></span> <span data-ttu-id="76792-146">Ezt követően, amely során a szolgáltatás funkciók hello hello szolgáltatás, amelytől feladatátvételi tooensure megfelelő lépéseket kell végrehajtania.</span><span class="sxs-lookup"><span data-stu-id="76792-146">Then, you must take adequate steps tooensure that your service functions during hello failover of hello services on which it depends.</span></span> <span data-ttu-id="76792-147">Vész-helyreállítási megoldások tervezésével kapcsolatos további információkért lásd: [felhőalapú megoldások kialakítása vész-helyreállítási használatával aktív georeplikáció](sql-database-designing-cloud-solutions-for-disaster-recovery.md).</span><span class="sxs-lookup"><span data-stu-id="76792-147">For more information about designing solutions for disaster recovery, see [Designing Cloud Solutions for Disaster Recovery Using active geo-replication](sql-database-designing-cloud-solutions-for-disaster-recovery.md).</span></span>

## <a name="active-geo-replication-capabilities"></a><span data-ttu-id="76792-148">Aktív georeplikáció képességek</span><span class="sxs-lookup"><span data-stu-id="76792-148">Active geo-replication capabilities</span></span>
<span data-ttu-id="76792-149">hello aktív georeplikáció szolgáltatás a következő alapvető képességeit hello biztosít:</span><span class="sxs-lookup"><span data-stu-id="76792-149">hello active geo-replication feature provides hello following essential capabilities:</span></span>
* <span data-ttu-id="76792-150">**Automatikus aszinkron replikáció**: csak létrehozhat egy másodlagos adatbázis tooan meglévő adatbázis hozzáadásával.</span><span class="sxs-lookup"><span data-stu-id="76792-150">**Automatic Asynchronous Replication**: You can only create a secondary database by adding tooan existing database.</span></span> <span data-ttu-id="76792-151">bármely Azure SQL adatbázis-kiszolgáló másodlagos hello hozhatók létre.</span><span class="sxs-lookup"><span data-stu-id="76792-151">hello secondary can be created in any Azure SQL Database server.</span></span> <span data-ttu-id="76792-152">Létrehozása után hello másodlagos adatbázis feltöltődik a másolt hello elsődleges adatbázisból hello adatokra.</span><span class="sxs-lookup"><span data-stu-id="76792-152">Once created, hello secondary database is populated with hello data copied from hello primary database.</span></span> <span data-ttu-id="76792-153">Ez a folyamat összehangolása néven ismert.</span><span class="sxs-lookup"><span data-stu-id="76792-153">This process is known as seeding.</span></span> <span data-ttu-id="76792-154">Miután másodlagos adatbázis létrehozták, és a rendezés, toohello elsődleges adatbázis aszinkron módon van frissítések automatikusan replikált toohello másodlagos adatbázis.</span><span class="sxs-lookup"><span data-stu-id="76792-154">After secondary database has been created and seeded, updates toohello primary database are asynchronously replicated toohello secondary database automatically.</span></span> <span data-ttu-id="76792-155">Aszinkron replikáció, az azt jelenti, hogy tranzakciók vannak véglegesítve lett az elsődleges adatbázis hello még nem replikált toohello másodlagos adatbázis.</span><span class="sxs-lookup"><span data-stu-id="76792-155">Asynchronous replication means that transactions are committed on hello primary database before they are replicated toohello secondary database.</span></span> 
* <span data-ttu-id="76792-156">**Másodlagos adatbázisok olvasható**: egy alkalmazás is elérhető egy másodlagos adatbázis csak olvasható műveletekbe hello azonos vagy különböző rendszerbiztonsági hello elsődleges adatbázis eléréséhez használt.</span><span class="sxs-lookup"><span data-stu-id="76792-156">**Readable secondary databases**: An application can access a secondary database for read-only operations using hello same or different security principals used for accessing hello primary database.</span></span> <span data-ttu-id="76792-157">hello másodlagos adatbázisok fog működni a pillanatkép-Elkülönítés mód tooensure hello frissítések az elsődleges hello (napló ismétlés) nem replikáció végrehajtva a következő másodlagos hello lekérdezések.</span><span class="sxs-lookup"><span data-stu-id="76792-157">hello secondary databases operate in snapshot isolation mode tooensure replication of hello updates of hello primary (log replay) is not delayed by queries executed on hello secondary.</span></span>

   > [!NOTE]
   > <span data-ttu-id="76792-158">hello napló ismétlési késik hello másodlagos adatbázison, ha nincsenek a séma frissítése az elsődleges, másodlagos adatbázis hello séma zárolását igénylő hello fogadja.</span><span class="sxs-lookup"><span data-stu-id="76792-158">hello log replay is delayed on hello secondary database if there are schema updates that it is receiving from hello Primary that require a schema lock on hello secondary database.</span></span> 
   > 

* <span data-ttu-id="76792-159">**Több olvasható másodlagos adatbázis**: két vagy több másodlagos adatbázist növelni a redundanciát és hello elsődleges adatbázis és az alkalmazás adatvédelmi szintet.</span><span class="sxs-lookup"><span data-stu-id="76792-159">**Multiple readable secondaries**: Two or more secondary databases increase redundancy and level of protection for hello primary database and application.</span></span> <span data-ttu-id="76792-160">Ha több másodlagos adatbázist, hello alkalmazás akkor is védett még akkor is, ha egy másodlagos adatbázisok hello meghibásodik.</span><span class="sxs-lookup"><span data-stu-id="76792-160">If multiple secondary databases exist, hello application remains protected even if one of hello secondary databases fails.</span></span> <span data-ttu-id="76792-161">Ha csak egy másodlagos adatbázist, és nem sikerül, a hello alkalmazás fel van fedve toohigher kockázatot jelent, amíg egy új másodlagos adatbázis nincs létrehozva.</span><span class="sxs-lookup"><span data-stu-id="76792-161">If there is only one secondary database, and it fails, hello application is exposed toohigher risk until a new secondary database is created.</span></span>

   > [!NOTE]
   > <span data-ttu-id="76792-162">Aktív georeplikáció toobuild globálisan elosztott alkalmazást használ, és kell tooprovide olvasási hozzáférési toodata a 4-nél több régióban, ha egy másodlagos (Ez a folyamat láncolás) másodlagos hozhat létre.</span><span class="sxs-lookup"><span data-stu-id="76792-162">If you are using active geo-replication toobuild a globally distributed application and need tooprovide read-only access toodata in more than 4 regions, you can create secondary of a secondary (a process known as chaining).</span></span> <span data-ttu-id="76792-163">Így az adatbázis-replikáció gyakorlatilag korlátlan méretezési érhető el.</span><span class="sxs-lookup"><span data-stu-id="76792-163">This way you can achieve virtually unlimited scale of database replication.</span></span> <span data-ttu-id="76792-164">Ezenkívül láncolás csökkenti hello hello elsődleges adatbázis-replikáció.</span><span class="sxs-lookup"><span data-stu-id="76792-164">In addition, chaining reduces hello overhead of replication from hello primary database.</span></span> <span data-ttu-id="76792-165">hello kompromisszum hello megnövekedett replikációs késés hello levél szélső másodlagos adatbázisok.</span><span class="sxs-lookup"><span data-stu-id="76792-165">hello trade-off is hello increased replication lag on hello leaf-most secondary databases.</span></span> <span data-ttu-id="76792-166">.</span><span class="sxs-lookup"><span data-stu-id="76792-166">.</span></span> 
   >

* <span data-ttu-id="76792-167">**Az adatbázisok rugalmas készlethez támogatási**: aktív georeplikáció a rugalmas készletben bármely adatbázis konfigurálhatók.</span><span class="sxs-lookup"><span data-stu-id="76792-167">**Support of elastic pool databases**: Active geo-replication can be configured for any database in any elastic pool.</span></span> <span data-ttu-id="76792-168">hello másodlagos adatbázis lehet egy másik rugalmas készletben.</span><span class="sxs-lookup"><span data-stu-id="76792-168">hello secondary database can be in another elastic pool.</span></span> <span data-ttu-id="76792-169">Az rendszeres adatbázisok másodlagos hello rugalmas készletek legyen, és ez fordítva is igaz, ha hello szolgáltatásszintek hello azonos.</span><span class="sxs-lookup"><span data-stu-id="76792-169">For regular databases, hello secondary can be an elastic pool and vice versa as long as hello service tiers are hello same.</span></span> 
* <span data-ttu-id="76792-170">**Hello másodlagos adatbázis konfigurálható teljesítményszintjének**: egy másodlagos adatbázis hozhatók létre mint hello alacsonyabb teljesítményszintre elsődleges.</span><span class="sxs-lookup"><span data-stu-id="76792-170">**Configurable performance level of hello secondary database**: A secondary database can be created with lower performance level than hello primary.</span></span> <span data-ttu-id="76792-171">Elsődleges és másodlagos adatbázisok a következők szükséges toohave hello ugyanazt a szolgáltatási rétegben.</span><span class="sxs-lookup"><span data-stu-id="76792-171">Both primary and secondary databases are required toohave hello same service tier.</span></span> <span data-ttu-id="76792-172">Ezt a beállítást nem ajánlott az alkalmazások magas adatbázis írási tevékenység, mert hello megnövekedett replikációs késés jelentős adatvesztés kockázatát hello növeli a feladatátvétel után.</span><span class="sxs-lookup"><span data-stu-id="76792-172">This option is not recommended for applications with high database write activity because hello increased replication lag increases hello risk of substantial data loss after a failover.</span></span> <span data-ttu-id="76792-173">Ezenkívül Miután feladatátvételi hello alkalmazás teljesítményre csak új hello elsődleges frissített tooa nagyobb teljesítményt szint van.</span><span class="sxs-lookup"><span data-stu-id="76792-173">In addition, after failover hello application’s performance is impacted until hello new primary is upgraded tooa higher performance level.</span></span> <span data-ttu-id="76792-174">hello napló IO százalékos diagram Azure-portál biztosít egy jó módszer tooestimate hello minimális teljesítményszintjének hello másodlagos, amely szükséges toosustain hello replikációs terhelés.</span><span class="sxs-lookup"><span data-stu-id="76792-174">hello log IO percentage chart on Azure portal provides a good way tooestimate hello minimal performance level of hello secondary that is required toosustain hello replication load.</span></span> <span data-ttu-id="76792-175">Például, ha az elsődleges adatbázis P6 (1000 DTU), és a naplót IO százalék 50 % hello másodlagos kell toobe legalább P4 (500 DTU).</span><span class="sxs-lookup"><span data-stu-id="76792-175">For example, if your Primary database is P6 (1000 DTU) and its log IO percent is 50% hello secondary needs toobe at least P4 (500 DTU).</span></span> <span data-ttu-id="76792-176">Kérheti is le hello napló IO adatok [sys.resource_stats](https://msdn.microsoft.com/library/dn269979.aspx) vagy [sys.dm_db_resource_stats](https://msdn.microsoft.com/library/dn800981.aspx) adatbázis-nézetek.</span><span class="sxs-lookup"><span data-stu-id="76792-176">You can also retrieve hello log IO data using [sys.resource_stats](https://msdn.microsoft.com/library/dn269979.aspx) or [sys.dm_db_resource_stats](https://msdn.microsoft.com/library/dn800981.aspx) database views.</span></span>  <span data-ttu-id="76792-177">Hello SQL-adatbázisa teljesítményszintjeit további információkért lásd: [SQL Database beállításai és teljesítménye](sql-database-service-tiers.md).</span><span class="sxs-lookup"><span data-stu-id="76792-177">For more information on hello SQL Database performance levels, see [SQL Database options and performance](sql-database-service-tiers.md).</span></span> 
* <span data-ttu-id="76792-178">**Felhasználó által szabályozott feladatátvétel és a feladat-visszavétel**: egy másodlagos adatbázis explicit módon lehet kapcsolt toohello elsődleges szerepkör hello alkalmazás vagy hello felhasználó bármikor.</span><span class="sxs-lookup"><span data-stu-id="76792-178">**User-controlled failover and failback**: A secondary database can explicitly be switched toohello primary role at any time by hello application or hello user.</span></span> <span data-ttu-id="76792-179">Egy valódi kimaradás hello során "nem tervezett" beállítást kell használni, amely azonnal elősegíthető egy másodlagos toobe hello elsődleges.</span><span class="sxs-lookup"><span data-stu-id="76792-179">During a real outage hello “unplanned” option should be used, which immediately promotes a secondary toobe hello primary.</span></span> <span data-ttu-id="76792-180">Amikor hello sikertelen elsődleges állítja helyre, és elérhető újra, hello rendszer automatikusan jelek hello elsődleges, másodlagos helyre, és érdekében, hogy az új elsődleges hello naprakész.</span><span class="sxs-lookup"><span data-stu-id="76792-180">When hello failed primary recovers and is available again, hello system automatically marks hello recovered primary as a secondary and bring it up-to-date with hello new primary.</span></span> <span data-ttu-id="76792-181">Lejáró replikációs jellege aszinkron toohello kisebb mennyiségű adatot elvesznek, nem tervezett feladatátvételek során Ha egy elsődleges sikertelen hello legutóbbi módosítások toohello másodlagos replikálás előtt.</span><span class="sxs-lookup"><span data-stu-id="76792-181">Due toohello asynchronous nature of replication, a small amount of data can be lost during unplanned failovers if a primary fails before it replicates hello most recent changes toohello secondary.</span></span> <span data-ttu-id="76792-182">Ha több másodlagos adatbázist az elsődleges átadja, hello rendszer automatikusan újrakonfigurálja hello replikációs kapcsolat, és hivatkozások hello újonnan fennmaradó másodlagos toohello elsődleges előléptetett felhasználói beavatkozás nélkül.</span><span class="sxs-lookup"><span data-stu-id="76792-182">When a primary with multiple secondaries fails over, hello system automatically reconfigures hello replication relationships and links hello remaining secondaries toohello newly promoted primary without requiring any user intervention.</span></span> <span data-ttu-id="76792-183">Miután hello kimaradás hello feladatátvételi okozó elhárítására, kívánatos tooreturn hello alkalmazás toohello elsődleges régió lehet.</span><span class="sxs-lookup"><span data-stu-id="76792-183">After hello outage that caused hello failover is mitigated, it may be desirable tooreturn hello application toohello primary region.</span></span> <span data-ttu-id="76792-184">hogy hello feladatátvételi parancsot kell hívható hello toodo "tervezett" lehetőséget.</span><span class="sxs-lookup"><span data-stu-id="76792-184">toodo that, hello failover command should be invoked with hello “planned” option.</span></span> 
* <span data-ttu-id="76792-185">**Hitelesítő adatok és a tűzfalszabályok szinkronban tartja**: javasoljuk [adatbázis-tűzfalszabályok](sql-database-firewall-configure.md) georeplikált adatbázisok, ezek a szabályok lehessen replikálni hello adatbázis tooensure minden másodlagos adatbázisok olyan hello elsődleges hello tűzfal szabályai.</span><span class="sxs-lookup"><span data-stu-id="76792-185">**Keeping credentials and firewall rules in sync**: We recommend using [database firewall rules](sql-database-firewall-configure.md) for geo-replicated databases so these rules can be replicated with hello database tooensure all secondary databases have hello same firewall rules as hello primary.</span></span> <span data-ttu-id="76792-186">Ez a megközelítés hello szükségtelenné teszi az ügyfelek toomanually konfigurálása és karbantartása a tűzfalszabályok mind az elsődleges és másodlagos adatbázisok hello futtató kiszolgálókon.</span><span class="sxs-lookup"><span data-stu-id="76792-186">This approach eliminates hello need for customers toomanually configure and maintain firewall rules on servers hosting both hello primary and secondary databases.</span></span> <span data-ttu-id="76792-187">Ehhez hasonlóan használatával [tartalmazott adatbázis-felhasználók](sql-database-manage-logins.md) adatok hozzáférést biztosítja mind az elsődleges, mind a másodlagos adatbázisok mindig azonos felhasználó hitelesítő adatait, így a feladatátvétel során nincs szolgáltatások hello bejelentkezések a esedékes toomismatches és jelszavak.</span><span class="sxs-lookup"><span data-stu-id="76792-187">Similarly, using [contained database users](sql-database-manage-logins.md) for data access ensures both primary and secondary databases always have hello same user credentials so during a failover, there is no disruptions due toomismatches with logins and passwords.</span></span> <span data-ttu-id="76792-188">Hello hozzáadása a [Azure Active Directory](../active-directory/active-directory-whatis.md), ügyfelek kezelhető a felhasználói hozzáférés tooboth elsődleges és másodlagos adatbázisok és hello kiküszöbölése szükséges teljesen kezelése az adatbázis-felhasználó hitelesítő adatait.</span><span class="sxs-lookup"><span data-stu-id="76792-188">With hello addition of [Azure Active Directory](../active-directory/active-directory-whatis.md), customers can manage user access tooboth primary and secondary databases and eliminating hello need for managing credentials in databases altogether.</span></span>

## <a name="auto-failover-group-capabilities"></a><span data-ttu-id="76792-189">Automatikus feladatátvételt csoport képességek</span><span class="sxs-lookup"><span data-stu-id="76792-189">Auto-failover group capabilities</span></span>

<span data-ttu-id="76792-190">Automatikus feladatátvételt csoportok szolgáltatása egy hatékony elvonása, aktív georeplikáció szintű replikációs csoport és az automatikus feladatátvételre.</span><span class="sxs-lookup"><span data-stu-id="76792-190">Auto-failover groups feature provides a powerful abstraction of active geo-replication by supporting group level replication and automatic failover.</span></span> <span data-ttu-id="76792-191">Emellett eltávolítja a hello szükségességét toochange hello SQL kapcsolati karakterláncot a feladatátvételt követően hello további figyelő végpontokat megadásával.</span><span class="sxs-lookup"><span data-stu-id="76792-191">In addition, it removes hello necessity toochange hello SQL connection string after failover by providing hello additional listener end-points.</span></span> 

* <span data-ttu-id="76792-192">**Feladatátvételi csoport**: egy vagy több feladatátvételi csoportok hozhatók létre különböző régiókban (elsődleges és másodlagos kiszolgálók) két kiszolgáló között.</span><span class="sxs-lookup"><span data-stu-id="76792-192">**Failover group**: One or many failover groups can be created between two servers in different regions (primary and secondary servers).</span></span> <span data-ttu-id="76792-193">Minden egyes csoport tartalmazhat egy vagy több adatbázis helyreállított egységként abban az esetben, ha minden egyes elsődleges adatbázisát tooan kívül az elsődleges régióban hello miatt elérhetetlenné válik.</span><span class="sxs-lookup"><span data-stu-id="76792-193">Each group can include one or several databases that are recovered as a unit in case all or some primary databases become unavailable due tooan outage in hello primary region.</span></span>  
* <span data-ttu-id="76792-194">**Elsődleges kiszolgáló**: üzemeltető kiszolgáló hello hello feladatátvételi csoport elsődleges adatbázisoknál.</span><span class="sxs-lookup"><span data-stu-id="76792-194">**Primary server**: A server that hosts hello primary databases in hello failover group.</span></span>
* <span data-ttu-id="76792-195">**Másodlagos kiszolgáló**: A másodlagos adatbázisok hello hello feladatátvételi csoport üzemeltető kiszolgálón.</span><span class="sxs-lookup"><span data-stu-id="76792-195">**Secondary server**: A server that hosts hello secondary databases in hello failover group.</span></span> <span data-ttu-id="76792-196">hello másodlagos kiszolgáló hello nem lehet ugyanabban a régióban hello elsődleges kiszolgálóként.</span><span class="sxs-lookup"><span data-stu-id="76792-196">hello secondary server cannot be in hello same region as hello primary server.</span></span>
* <span data-ttu-id="76792-197">**Hozzáadását adatbázisok toofailover csoport**: helyezze egy kiszolgálót több adatbázis, vagy belül egy rugalmas készlet hello be azonos feladatátvételi csoport.</span><span class="sxs-lookup"><span data-stu-id="76792-197">**Adding databases toofailover group**: You can put several databases within a server or within an elastic pool into hello same failover group.</span></span> <span data-ttu-id="76792-198">Ha egy önálló adatbázis toohello csoportot ad hozzá, automatikusan létrehoz egy másodlagos adatbázis használatával hello edition és a teljesítmény ugyanazon a szinten.</span><span class="sxs-lookup"><span data-stu-id="76792-198">If you add a standalone database toohello group, it automatically creates a secondary database using hello same edition and performance level.</span></span> <span data-ttu-id="76792-199">Hello elsődleges adatbázis esetén a rugalmas készletekben található másodlagos hello automatikusan létrejön az hello rugalmas készlet hello az azonos név.</span><span class="sxs-lookup"><span data-stu-id="76792-199">If hello primary database is in an elastic pool, hello secondary is automatically created in hello elastic pool with hello same name.</span></span> <span data-ttu-id="76792-200">Ha egy adatbázist, amely már rendelkezik egy másodlagos adatbázis hello másodlagos kiszolgáló, a georeplikáció hello csoport örökli.</span><span class="sxs-lookup"><span data-stu-id="76792-200">If you add a database that already has a secondary database in hello secondary server, that geo-replication is inherited by hello group.</span></span>

   > [!NOTE]
   > <span data-ttu-id="76792-201">Egy adatbázis, amely már rendelkezik egy másodlagos adatbázis-kiszolgálók nem hello feladatátvételi csoport részét képező felvételekor hello másodlagos kiszolgáló egy új másodlagos jön létre.</span><span class="sxs-lookup"><span data-stu-id="76792-201">When adding a database that already has a secondary database in a server that is not part of hello failover group, a new secondary is created in hello secondary server.</span></span> 
   >

* <span data-ttu-id="76792-202">**Feladatátvételi csoport olvasási és írási figyelő**: A DNS CNAME rekord jöttek létre,  **&lt;feladatátvételi csoportnév&gt;. database.windows.net** toohello aktuális elsődleges kiszolgáló URL-címe mutat.</span><span class="sxs-lookup"><span data-stu-id="76792-202">**Failover group read-write listener**: A DNS CNAME record formed as **&lt;failover-group-name&gt;.database.windows.net** that points toohello current primary server URL.</span></span> <span data-ttu-id="76792-203">Lehetővé teszi hello írható-olvasható SQL alkalmazások tootransparently toohello elsődleges adatbázis csatlakozzon újra, ha hello elsődleges vált, a feladatátvételt követően.</span><span class="sxs-lookup"><span data-stu-id="76792-203">It allows hello read-write SQL applications tootransparently reconnect toohello primary database when hello primary changes after failover.</span></span> 
* <span data-ttu-id="76792-204">**Feladatátvételi csoport olvasási figyelő**: A DNS CNAME rekord jöttek létre,  **&lt;feladatátvételi csoportnév&gt;. secondary.database.windows.net** toohello másodlagos kiszolgáló URL-mutat.</span><span class="sxs-lookup"><span data-stu-id="76792-204">**Failover group read-only listener**: A DNS CNAME record formed as **&lt;failover-group-name&gt;.secondary.database.windows.net** that points toohello secondary server’s URL.</span></span> <span data-ttu-id="76792-205">Lehetővé teszi hello írásvédett tootransparently Csatlakozás SQL alkalmazások toohello másodlagos adatbázis hello segítségével megadott terheléselosztási szabályok.</span><span class="sxs-lookup"><span data-stu-id="76792-205">It allows hello read-only SQL applications tootransparently connect toohello secondary database using hello specified load-balancing rules.</span></span> <span data-ttu-id="76792-206">Opcionálisan megadhatja, ha azt szeretné, hello írásvédett forgalom toobe automatikusan-e irányítva toohello elsődleges kiszolgáló Ha hello másodlagos kiszolgáló nem érhető el.</span><span class="sxs-lookup"><span data-stu-id="76792-206">Optionally you can specify if you want hello read-only traffic toobe automatically re-directed toohello primary server when hello secondary server is not available.</span></span>
* <span data-ttu-id="76792-207">**Automatikus feladatátvétel házirend**: alapértelmezés szerint az Automatikus feladatátvétel házirendjével hello feladatátvételi csoport van konfigurálva.</span><span class="sxs-lookup"><span data-stu-id="76792-207">**Automatic failover policy**: By default, hello failover group is configured with an automatic failover policy.</span></span> <span data-ttu-id="76792-208">hello rendszer eseményindítók feladatátvételi, amint hello hiba lép fel.</span><span class="sxs-lookup"><span data-stu-id="76792-208">hello system triggers failover as soon as hello failure is detected.</span></span> <span data-ttu-id="76792-209">Ha azt szeretné, hogy toocontrol hello feladatátvételi munkafolyamat hello alkalmazásból, kikapcsolhatja automatikus feladatátvételre.</span><span class="sxs-lookup"><span data-stu-id="76792-209">If you want toocontrol hello failover workflow from hello application, you can turn off automatic failover.</span></span> 
* <span data-ttu-id="76792-210">**Kézi feladatátvételre**: feladatátvételi manuálisan is kezdeményezhető, tetszőleges időpontban, függetlenül attól, hello automatikus feladatátvétel konfigurálása.</span><span class="sxs-lookup"><span data-stu-id="76792-210">**Manual failover**: You can initiate failover manually at any time regardless of hello automatic failover configuration.</span></span> <span data-ttu-id="76792-211">Automatikus feladatátvétel házirend nem konfigurált kézi feladatátvételre akkor hello feladatátvételi csoport szükséges toorecover adatbázisoknál.</span><span class="sxs-lookup"><span data-stu-id="76792-211">If automatic failover policy is not configured manual failover is required toorecover databases in hello failover group.</span></span> <span data-ttu-id="76792-212">A kényszerített vagy rövid feladatátvételt (a teljes adatszinkronizálás) is kezdeményezhető.</span><span class="sxs-lookup"><span data-stu-id="76792-212">You can initiate forced or friendly failover (with full data synchronization).</span></span> <span data-ttu-id="76792-213">Ez utóbbi hello használt toorelocate hello aktív kiszolgáló toohello elsődleges régió lehet.</span><span class="sxs-lookup"><span data-stu-id="76792-213">hello latter could be used toorelocate hello active server toohello primary region.</span></span> <span data-ttu-id="76792-214">Amikor befejeződött a feladatátvétel hello DNS-rekordok automatikusan frissített tooensure kapcsolat toohello megfelelő kiszolgálót.</span><span class="sxs-lookup"><span data-stu-id="76792-214">When failover is completed hello DNS records are automatically updated tooensure connectivity toohello correct server.</span></span>
* <span data-ttu-id="76792-215">**Türelmi időszak adatvesztéssel**: mert hello elsődleges és másodlagos adatbázis-kel vannak szinkronizálva aszinkron replikáció hello feladatátvételi adatvesztést eredményezhet.</span><span class="sxs-lookup"><span data-stu-id="76792-215">**Grace period with data loss**: Because hello primary and secondary databases are synchronized using asynchronous replication hello failover may result in data loss.</span></span> <span data-ttu-id="76792-216">Az alkalmazás tolerancia toodata adatvesztés hello automatikus feladatátvétel házirend tooreflect szabhatja testre.</span><span class="sxs-lookup"><span data-stu-id="76792-216">You can customize hello automatic failover policy tooreflect your application’s tolerance toodata loss.</span></span> <span data-ttu-id="76792-217">Konfigurálásával **GracePeriodWithDataLossHours**, szabályozhatja, hogy mennyi ideig hello rendszer vár, amely valószínűleg tooresult adatvesztés hello feladatátvétel kezdeményezése előtt.</span><span class="sxs-lookup"><span data-stu-id="76792-217">By configuring **GracePeriodWithDataLossHours**, you can control how long hello system waits before initiating hello failover that is likely tooresult data loss.</span></span> 

   > [!NOTE]
   > <span data-ttu-id="76792-218">Amikor rendszer azt észleli, hogy továbbra is online-e hello csoport hello adatbázisok (például hello kimaradás csak érintett hello szolgáltatás vezérlő vezérlősík), azonnal aktiválja hello feladatátvétel függetlenül hello érték teljes adatszinkronizálás (rövid feladatátvétel) által beállított **GracePeriodWithDataLossHours**.</span><span class="sxs-lookup"><span data-stu-id="76792-218">When system detects that hello databases in hello group are still online (for example, hello outage only impacted hello service control plane), it immediately activates hello failover with full data synchronization (friendly failover) regardless of hello value set by **GracePeriodWithDataLossHours**.</span></span> <span data-ttu-id="76792-219">Ez a viselkedés garantálja, hogy nincs-e adatvesztés nélküli hello helyreállítás során.</span><span class="sxs-lookup"><span data-stu-id="76792-219">This behavior ensures that there is no data loss during hello recovery.</span></span> <span data-ttu-id="76792-220">hello türelmi időszak lép életbe, csak akkor, ha a rövid feladatátvétel során nem lehetséges.</span><span class="sxs-lookup"><span data-stu-id="76792-220">hello grace period takes effect only when a friendly failover is not possible.</span></span> <span data-ttu-id="76792-221">Ha hello kimaradás elhárítására hello türelmi időszak lejárta előtt, hello feladatátvételi nincs aktiválva.</span><span class="sxs-lookup"><span data-stu-id="76792-221">If hello outage is mitigated before hello grace period expires, hello failover is not activated.</span></span>
   >

* <span data-ttu-id="76792-222">**Több feladatátvételi csoport**: beállíthatja a hello több feladatátvételi csoport ugyanarra a feladatátvételek kiszolgálók toocontrol hello méretezésének két.</span><span class="sxs-lookup"><span data-stu-id="76792-222">**Multiple failover groups**: You can configure multiple failover groups for hello same pair of servers toocontrol hello scale of failovers.</span></span> <span data-ttu-id="76792-223">Minden csoport külön átvétele.</span><span class="sxs-lookup"><span data-stu-id="76792-223">Each group fails over independently.</span></span> <span data-ttu-id="76792-224">A több-bérlős-alkalmazás rugalmas készletek használja, ha a funkció toomix elsődleges és másodlagos adatbázisok mindegyik készlet használhatja.</span><span class="sxs-lookup"><span data-stu-id="76792-224">If your multi-tenant application uses elastic pools, you can use this capability toomix primary and secondary databases in each pool.</span></span> <span data-ttu-id="76792-225">Ily módon csökkentheti egy kimaradás tooonly hello hatását hello bérlők felét.</span><span class="sxs-lookup"><span data-stu-id="76792-225">This way you can reduce hello impact of an outage tooonly half of hello tenants.</span></span>

## <a name="best-practices-of-building-highly-available-service"></a><span data-ttu-id="76792-226">Ajánlott eljárások a magas rendelkezésre állású szolgáltatás létrehozása</span><span class="sxs-lookup"><span data-stu-id="76792-226">Best practices of building highly available service</span></span>

<span data-ttu-id="76792-227">egy magas rendelkezésre állású szolgáltatás által használt Azure SQL adatbázis hello ügyfelek toobuild kell kövesse az alábbi irányelveket:</span><span class="sxs-lookup"><span data-stu-id="76792-227">toobuild a highly available service that uses Azure SQL database hello customers should follow these guidelines:</span></span>
- <span data-ttu-id="76792-228">**Használjon feladatátvételi csoport**: egy vagy több feladatátvételi csoportok hozhatók létre különböző régiókban (elsődleges és másodlagos kiszolgálók) két kiszolgáló között.</span><span class="sxs-lookup"><span data-stu-id="76792-228">**Use failover group**: One or many failover groups can be created between two servers in different regions (primary and secondary servers).</span></span> <span data-ttu-id="76792-229">Minden egyes csoport tartalmazhat egy vagy több adatbázis helyreállított egységként abban az esetben, ha minden egyes elsődleges adatbázisát tooan kívül az elsődleges régióban hello miatt elérhetetlenné válik.</span><span class="sxs-lookup"><span data-stu-id="76792-229">Each group can include one or several databases that are recovered as a unit in case all or some primary databases become unavailable due tooan outage in hello primary region.</span></span> <span data-ttu-id="76792-230">hello feladatátvételi csoport hello ugyanaz, mint hello elsődleges célja szolgáltatás geo-másodlagos adatbázis hoz létre.</span><span class="sxs-lookup"><span data-stu-id="76792-230">hello failover group creates geo-secondary database with hello same service objective as hello primary.</span></span> <span data-ttu-id="76792-231">Ha ad hozzá egy meglévő georeplikáció kapcsolat toohello feladatátvételi csoport győződjön meg arról, hogy hello földrajzi-másodlagos van konfigurálva, szolgáltatásiszint-célkitűzés szolgáltatás azonos hello hello elsődleges.</span><span class="sxs-lookup"><span data-stu-id="76792-231">If you add an existing geo-replication relationship toohello failover group make sure hello geo-secondary is configured with hello same service level objective as hello primary.</span></span>
- <span data-ttu-id="76792-232">**Olvasási és írási figyelő használja az OLTP-munkaterhelés**: OLTP műveletek használata végrehajtása során  **&lt;feladatátvételi csoportnév&gt;. database.windows.net** módon lesz hello URL-címe és hello kapcsolatok automatikusan irányított toohello elsődleges.</span><span class="sxs-lookup"><span data-stu-id="76792-232">**Use read-write listener for OLTP workload**: When performing OLTP operations use **&lt;failover-group-name&gt;.database.windows.net** as hello server URL and hello connections will be automatically directed toohello primary.</span></span> <span data-ttu-id="76792-233">Az URL-cím nem változik hello feladatátvételt követően.</span><span class="sxs-lookup"><span data-stu-id="76792-233">This URL will not change after hello failover.</span></span>  
<span data-ttu-id="76792-234">Megjegyzés: hello feladatátvételi magában foglalja a DNS-rekordja, ezért a hello ügyfélkapcsolatok során átirányított toohello új hello ügyfél után csak elsődleges DNS-gyorsítótár frissítése hello frissítése.</span><span class="sxs-lookup"><span data-stu-id="76792-234">Note hello failover involves updating hello DNS record so hello client connections will be redirected toohello new primary only after hello client DNS cache is refreshed.</span></span>
- <span data-ttu-id="76792-235">**Használja a csak olvasható figyelő csak olvasható munkaterhelés**: Ha egy logikailag elkülönített írásvédett munkaterhelés, amely az adatok hibatűrő toocertain elavulási, hello másodlagos adatbázis hello alkalmazásban használhatja.</span><span class="sxs-lookup"><span data-stu-id="76792-235">**Use read-only listener for read-only workload**: If you have a logically isolated read-only workload that is tolerant toocertain staleness of data, you can use hello secondary database in hello application.</span></span> <span data-ttu-id="76792-236">Csak olvasható munkamenetek használható  **&lt;feladatátvételi csoportnév&gt;. secondary.database.windows.net** , hello URL-címe és hello kapcsolat lesz automatikusan irányított toohello másodlagos.</span><span class="sxs-lookup"><span data-stu-id="76792-236">For read-only sessions use **&lt;failover-group-name&gt;.secondary.database.windows.net** as hello server URL and hello connection will be automatically directed toohello secondary.</span></span> <span data-ttu-id="76792-237">Javasolt továbbá jelző olvassa el a cél a kapcsolat-karakterláncban **ApplicationIntent = ReadOnly**.</span><span class="sxs-lookup"><span data-stu-id="76792-237">It is also recommended that you indicate in connection string read intent by using **ApplicationIntent=ReadOnly**.</span></span> 
- <span data-ttu-id="76792-238">**Elő kell készíteni a teljesítmény romlását**: SQL feladatátvételi döntési nem függ össze hello rest hello alkalmazás vagy többi használt szolgáltatások.</span><span class="sxs-lookup"><span data-stu-id="76792-238">**Be prepared for perf degradation**: SQL failover decision is independent from hello rest of hello application or other services used.</span></span> <span data-ttu-id="76792-239">hello alkalmazás "keverhetők" néhány egy régió tartozik, és néhány más összetevőkkel.</span><span class="sxs-lookup"><span data-stu-id="76792-239">hello application may be “mixed” with some components in one region and some in another.</span></span> <span data-ttu-id="76792-240">tooavoid hello teljesítménycsökkenést, győződjön meg arról hello redundáns alkalmazástelepítés hello vész-Helyreállítási régióban, és kövesse az ebben a cikkben hello irányelveket.</span><span class="sxs-lookup"><span data-stu-id="76792-240">tooavoid hello degradation, ensure hello redundant application deployment in hello DR region and follow hello guidelines in this article.</span></span>  
<span data-ttu-id="76792-241">Megjegyzés: hello alkalmazás hello vész-Helyreállítási régióban nem rendelkezik toouse egy másik kapcsolati karakterláncot.</span><span class="sxs-lookup"><span data-stu-id="76792-241">Note hello application in hello DR region does not have toouse a different connection string.</span></span>  
- <span data-ttu-id="76792-242">**Készítse elő a adatvesztés**: kimaradás észlelhető, ha az SQL automatikusan elindítja a írható-olvasható feladatátvételi ha nulla adatok elvesztését toohello ajánlott az ismeretek.</span><span class="sxs-lookup"><span data-stu-id="76792-242">**Prepare for data loss**: If an outage is detected, SQL automatically triggers read-write failover if there is zero data loss toohello best of our knowledge.</span></span> <span data-ttu-id="76792-243">Ellenkező esetben megvárja, Ön által megadott hello időtartam **GracePeriodWithDataLossHours**.</span><span class="sxs-lookup"><span data-stu-id="76792-243">Otherwise, it waits for hello period you specified by **GracePeriodWithDataLossHours**.</span></span> <span data-ttu-id="76792-244">Ha a megadott **GracePeriodWithDataLossHours**, elő kell készíteni a adatvesztés.</span><span class="sxs-lookup"><span data-stu-id="76792-244">If you specified **GracePeriodWithDataLossHours**, be prepared for data loss.</span></span> <span data-ttu-id="76792-245">Általában során kimaradások, Azure rendelkezésre állási előtérbe.</span><span class="sxs-lookup"><span data-stu-id="76792-245">In general, during outages, Azure favors availability.</span></span> <span data-ttu-id="76792-246">Ha Ön az adatveszteség, győződjön meg arról, hogy tooset **GracePeriodWithDataLossHours** tooa megfelelően nagy számát, például 24 óra.</span><span class="sxs-lookup"><span data-stu-id="76792-246">If you cannot afford data loss, make sure tooset **GracePeriodWithDataLossHours** tooa sufficiently large number, such as 24 hours.</span></span> 


## <a name="upgrading-or-downgrading-a-primary-database"></a><span data-ttu-id="76792-247">Frissítés vagy alacsonyabb verziójúra változtatása az elsődleges adatbázis</span><span class="sxs-lookup"><span data-stu-id="76792-247">Upgrading or downgrading a primary database</span></span>
<span data-ttu-id="76792-248">Frissítse, vagy egy elsődleges adatbázis tooa különböző teljesítményszintet visszaminősítését (hello belül ugyanazt a szolgáltatási réteg) bármely másodlagos adatbázisok leválasztása nélkül.</span><span class="sxs-lookup"><span data-stu-id="76792-248">You can upgrade or downgrade a primary database tooa different performance level (within hello same service tier) without disconnecting any secondary databases.</span></span> <span data-ttu-id="76792-249">Frissítésekor, azt javasoljuk, hogy először hello másodlagos adatbázis frissítése, és frissítse a hello elsődleges.</span><span class="sxs-lookup"><span data-stu-id="76792-249">When upgrading, we recommend that you upgrade hello secondary database first, and then upgrade hello primary.</span></span> <span data-ttu-id="76792-250">Amikor alacsonyabb verziójúra változtatása, hello sorrend megfordításához: hello elsődleges először megállapításában, és hello másodlagos majd használni.</span><span class="sxs-lookup"><span data-stu-id="76792-250">When downgrading, reverse hello order: downgrade hello primary first, and then downgrade hello secondary.</span></span> <span data-ttu-id="76792-251">Frissítésekor vagy visszaminősítését hello adatbázis tooa különböző szolgáltatási rétegben Ez a javaslat van kényszerítve.</span><span class="sxs-lookup"><span data-stu-id="76792-251">When you upgrade or downgrade hello database tooa different service tier this recommendation is enforced.</span></span> 

> [!NOTE]
> <span data-ttu-id="76792-252">Hello feladatátvételi csoport konfigurációjának részeként létrehozott másodlagos adatbázis esetén nem javasolt toodowngrade hello másodlagos adatbázishoz.</span><span class="sxs-lookup"><span data-stu-id="76792-252">If you created secondary database as part of hello failover group configuration it is not recommended toodowngrade hello secondary database.</span></span> <span data-ttu-id="76792-253">Ez a tooensure az adatréteg van elegendő kapacitása tooprocess a normál munkaterhelését feladatátvételi aktiválása után.</span><span class="sxs-lookup"><span data-stu-id="76792-253">This is tooensure your data tier has sufficient capacity tooprocess your regular workload after failover is activated.</span></span> 
>

## <a name="preventing-hello-loss-of-critical-data"></a><span data-ttu-id="76792-254">Kritikus hello adatvesztés megakadályozása</span><span class="sxs-lookup"><span data-stu-id="76792-254">Preventing hello loss of critical data</span></span>
<span data-ttu-id="76792-255">Lejáró toohello nagy késleltetésű nagy kiterjedésű hálózatok a folyamatos másolás egy aszinkron replikációs mechanizmust alkalmaz.</span><span class="sxs-lookup"><span data-stu-id="76792-255">Due toohello high latency of wide area networks, continuous copy uses an asynchronous replication mechanism.</span></span> <span data-ttu-id="76792-256">Aszinkron replikáció révén adatvesztést elkerülhetetlen, ha hiba történik.</span><span class="sxs-lookup"><span data-stu-id="76792-256">Asynchronous replication makes some data loss unavoidable if a failure occurs.</span></span> <span data-ttu-id="76792-257">Egyes alkalmazások azonban adatvesztés nélküli lehet szükség.</span><span class="sxs-lookup"><span data-stu-id="76792-257">However, some applications may require no data loss.</span></span> <span data-ttu-id="76792-258">tooprotect a kritikus frissítések, az alkalmazásfejlesztő meghívhatja hello [sp_wait_for_database_copy_sync](https://msdn.microsoft.com/library/dn467644.aspx) rendszer eljárás után azonnal hello tranzakció véglegesítésekor.</span><span class="sxs-lookup"><span data-stu-id="76792-258">tooprotect these critical updates, an application developer can call hello [sp_wait_for_database_copy_sync](https://msdn.microsoft.com/library/dn467644.aspx) system procedure immediately after committing hello transaction.</span></span> <span data-ttu-id="76792-259">Hívása **sp_wait_for_database_copy_sync** szál hívja, amíg el nem hello utolsó véglegesített tranzakció blokkok hello továbbított toohello másodlagos adatbázishoz.</span><span class="sxs-lookup"><span data-stu-id="76792-259">Calling **sp_wait_for_database_copy_sync** blocks hello calling thread until hello last committed transaction has been transmitted toohello secondary database.</span></span> <span data-ttu-id="76792-260">Azonban ez nem vár továbbított hello tranzakciók toobe visszajátszani és véglegesítve lett a másodlagos hello.</span><span class="sxs-lookup"><span data-stu-id="76792-260">However, it does not wait for hello transmitted transactions toobe replayed and committed on hello secondary.</span></span> <span data-ttu-id="76792-261">**az sp_wait_for_database_copy_sync** hatókörön belüli tooa adott folyamatos másolás hivatkozás.</span><span class="sxs-lookup"><span data-stu-id="76792-261">**sp_wait_for_database_copy_sync** is scoped tooa specific continuous copy link.</span></span> <span data-ttu-id="76792-262">Bármely felhasználó hello kapcsolat jogok toohello elsődleges adatbázissal hívhatják ezt az eljárást.</span><span class="sxs-lookup"><span data-stu-id="76792-262">Any user with hello connection rights toohello primary database can call this procedure.</span></span>

> [!NOTE]
> <span data-ttu-id="76792-263">**az sp_wait_for_database_copy_sync** adatvesztés megakadályozza a feladatátvételt követően, de nem garantálják a teljes szinkronizálás az olvasási hozzáférést.</span><span class="sxs-lookup"><span data-stu-id="76792-263">**sp_wait_for_database_copy_sync** will prevent data loss after failover, but it will not guarantee full synchronization for read access.</span></span> <span data-ttu-id="76792-264">hello által okozott késleltetés egy **sp_wait_for_database_copy_sync** eljáráshívás jelentős lehet, és hello hívás hello időpontban hello tranzakciós napló mérete hello függ.</span><span class="sxs-lookup"><span data-stu-id="76792-264">hello delay caused by a **sp_wait_for_database_copy_sync** procedure call can be significant and depends on hello size of hello transaction log at hello time of hello call.</span></span> 
> 

## <a name="programmatically-managing-failover-groups-and-active-geo-replication"></a><span data-ttu-id="76792-265">Programozott módon a feladatátvételi csoportok és aktív georeplikáció kezelése</span><span class="sxs-lookup"><span data-stu-id="76792-265">Programmatically managing failover groups and active geo-replication</span></span>
<span data-ttu-id="76792-266">Korábban bemutatott automatikus feladatátvételt csoportok (az előzetes verzió) és az aktív georeplikáció is kezelhetők programozott módon, Azure PowerShell és hello REST API-t.</span><span class="sxs-lookup"><span data-stu-id="76792-266">As discussed previously, auto-failover groups (in-preview) and active geo-replication can also be managed programmatically using Azure PowerShell and hello REST API.</span></span> <span data-ttu-id="76792-267">a következő táblák hello hello készlete használható parancsok ismertetik.</span><span class="sxs-lookup"><span data-stu-id="76792-267">hello following tables describe hello set of commands available.</span></span>

<span data-ttu-id="76792-268">**Az Azure Resource Manager API és a szerepkör alapú biztonsági**: aktív georeplikáció magában foglalja a kezelése, beleértve a hello Azure Resource Manager API-készlet [Azure SQL Database REST API](https://docs.microsoft.com/rest/api/sql/) és [Azure PowerShell-parancsmagok](https://docs.microsoft.com/powershell/azure/overview).</span><span class="sxs-lookup"><span data-stu-id="76792-268">**Azure Resource Manager API and role-based security**: Active geo-replication includes a set of Azure Resource Manager APIs for management, including hello [Azure SQL Database REST API](https://docs.microsoft.com/rest/api/sql/) and [Azure PowerShell cmdlets](https://docs.microsoft.com/powershell/azure/overview).</span></span> <span data-ttu-id="76792-269">Ezen API-k kötelező erőforráscsoportok hello használata és szerepköralapú biztonsági (RBAC) támogatja.</span><span class="sxs-lookup"><span data-stu-id="76792-269">These APIs require hello use of resource groups and support role-based security (RBAC).</span></span> <span data-ttu-id="76792-270">Hogyan érik el tooimplement szerepkörök további információkért lásd: [átruházásához hozzáférés-vezérlés](../active-directory/role-based-access-control-what-is.md).</span><span class="sxs-lookup"><span data-stu-id="76792-270">For more information on how tooimplement access roles, see [Azure Role-Based Access Control](../active-directory/role-based-access-control-what-is.md).</span></span>

> [!NOTE]
> <span data-ttu-id="76792-271">Számos új szolgáltatást nyújt aktív georeplikáció esetén támogatottak használatával [Azure Resource Manager](../azure-resource-manager/resource-group-overview.md) alapú [Azure SQL REST API](https://msdn.microsoft.com/library/azure/mt163571.aspx) és [Azure SQL Database PowerShell parancsmagjait](https://msdn.microsoft.com/library/azure/mt574084.aspx).</span><span class="sxs-lookup"><span data-stu-id="76792-271">Many new features of active geo-replication are only supported using [Azure Resource Manager](../azure-resource-manager/resource-group-overview.md) based [Azure SQL REST API](https://msdn.microsoft.com/library/azure/mt163571.aspx) and [Azure SQL Database PowerShell cmdlets](https://msdn.microsoft.com/library/azure/mt574084.aspx).</span></span> <span data-ttu-id="76792-272">Hello [REST API-t (klasszikus)](https://msdn.microsoft.com/library/azure/dn505719.aspx) és [Azure SQL Database (classic) parancsmagjai](https://msdn.microsoft.com/library/azure/dn546723.aspx) használata támogatott a visszamenőleges kompatibilitás érdekében használatával hello Azure Resource Manager-alapú API-k használata ajánlott.</span><span class="sxs-lookup"><span data-stu-id="76792-272">hello [(classic) REST API](https://msdn.microsoft.com/library/azure/dn505719.aspx) and [Azure SQL Database (classic) cmdlets](https://msdn.microsoft.com/library/azure/dn546723.aspx) are supported for backward compatibility so using hello Azure Resource Manager-based APIs are recommended.</span></span> 
> 

## <a name="manage-sql-database-failover-using-using-transact-sql"></a><span data-ttu-id="76792-273">SQL adatbázis feladatátvétel használatával felügyelt Transact-SQL használatával</span><span class="sxs-lookup"><span data-stu-id="76792-273">Manage SQL database failover using using Transact-SQL</span></span>

| <span data-ttu-id="76792-274">Parancs</span><span class="sxs-lookup"><span data-stu-id="76792-274">Command</span></span> | <span data-ttu-id="76792-275">Leírás</span><span class="sxs-lookup"><span data-stu-id="76792-275">Description</span></span> |
| --- | --- |
| [<span data-ttu-id="76792-276">Az ALTER DATABASE (Azure SQL Database)</span><span class="sxs-lookup"><span data-stu-id="76792-276">ALTER DATABASE (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt574871.aspx) |<span data-ttu-id="76792-277">Meglévő adatbázis másodlagos ON SERVER hozzáadása argumentum toocreate egy másodlagos adatbázis használja, és elindítja a adatreplikáció</span><span class="sxs-lookup"><span data-stu-id="76792-277">Use ADD SECONDARY ON SERVER argument toocreate a secondary database for an existing database and starts data replication</span></span> |
| [<span data-ttu-id="76792-278">Az ALTER DATABASE (Azure SQL Database)</span><span class="sxs-lookup"><span data-stu-id="76792-278">ALTER DATABASE (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt574871.aspx) |<span data-ttu-id="76792-279">Használjon FELADATÁTVÉTELI vagy FORCE_FAILOVER_ALLOW_DATA_LOSS tooswitch egy másodlagos adatbázis toobe elsődleges tooinitiate feladatátvétel</span><span class="sxs-lookup"><span data-stu-id="76792-279">Use FAILOVER or FORCE_FAILOVER_ALLOW_DATA_LOSS tooswitch a secondary database toobe primary tooinitiate failover</span></span> |
| [<span data-ttu-id="76792-280">Az ALTER DATABASE (Azure SQL Database)</span><span class="sxs-lookup"><span data-stu-id="76792-280">ALTER DATABASE (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt574871.aspx) |<span data-ttu-id="76792-281">Egy SQL-adatbázis és a hello megadott másodlagos adatbázis replikálása másodlagos ON SERVER eltávolítása tooterminate használja.</span><span class="sxs-lookup"><span data-stu-id="76792-281">Use REMOVE SECONDARY ON SERVER tooterminate a data replication between a SQL Database and hello specified secondary database.</span></span> |
| [<span data-ttu-id="76792-282">sys.geo_replication_links (az Azure SQL Database)</span><span class="sxs-lookup"><span data-stu-id="76792-282">sys.geo_replication_links (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt575501.aspx) |<span data-ttu-id="76792-283">Az összes meglévő replikációs hivatkozások az egyes adatbázisok hello Azure SQL Database logikai kiszolgáló információt ad vissza.</span><span class="sxs-lookup"><span data-stu-id="76792-283">Returns information about all existing replication links for each database on hello Azure SQL Database logical server.</span></span> |
| [<span data-ttu-id="76792-284">sys.dm_geo_replication_link_status (az Azure SQL Database)</span><span class="sxs-lookup"><span data-stu-id="76792-284">sys.dm_geo_replication_link_status (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt575504.aspx) |<span data-ttu-id="76792-285">Lekérdezi hello utolsó replikációs időpontja, utolsó replikációs késés és egyéb hello replikációs hivatkozás a megadott SQL-adatbázis adatait.</span><span class="sxs-lookup"><span data-stu-id="76792-285">Gets hello last replication time, last replication lag, and other information about hello replication link for a given SQL database.</span></span> |
| [<span data-ttu-id="76792-286">sys.dm_operation_status (az Azure SQL Database)</span><span class="sxs-lookup"><span data-stu-id="76792-286">sys.dm_operation_status (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/dn270022.aspx) |<span data-ttu-id="76792-287">Az összes adatbázis-műveleteket, köztük a hello replikációs hivatkozások állapotának hello hello állapotát jeleníti meg.</span><span class="sxs-lookup"><span data-stu-id="76792-287">Shows hello status for all database operations including hello status of hello replication links.</span></span> |
| [<span data-ttu-id="76792-288">az sp_wait_for_database_copy_sync (az Azure SQL Database)</span><span class="sxs-lookup"><span data-stu-id="76792-288">sp_wait_for_database_copy_sync (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/dn467644.aspx) |<span data-ttu-id="76792-289">hello alkalmazás toowait azt eredményezi, amíg a végrehajtott tranzakciók replikációja és hello aktív másodlagos adatbázis nyugtázni.</span><span class="sxs-lookup"><span data-stu-id="76792-289">causes hello application toowait until all committed transactions are replicated and acknowledged by hello active secondary database.</span></span> |
|  | |

## <a name="manage-sql-database-failover-using-using-powershell"></a><span data-ttu-id="76792-290">SQL adatbázis feladatátvétel használatával felügyelt PowerShell használatával</span><span class="sxs-lookup"><span data-stu-id="76792-290">Manage SQL database failover using using PowerShell</span></span>

| <span data-ttu-id="76792-291">Parancsmag</span><span class="sxs-lookup"><span data-stu-id="76792-291">Cmdlet</span></span> | <span data-ttu-id="76792-292">Leírás</span><span class="sxs-lookup"><span data-stu-id="76792-292">Description</span></span> |
| --- | --- |
| [<span data-ttu-id="76792-293">Get-AzureRmSqlDatabase</span><span class="sxs-lookup"><span data-stu-id="76792-293">Get-AzureRmSqlDatabase</span></span>](/powershell/module/azurerm.sql/get-azurermsqldatabase) |<span data-ttu-id="76792-294">Egy vagy több adatbázis lekérdezi.</span><span class="sxs-lookup"><span data-stu-id="76792-294">Gets one or more databases.</span></span> |
| [<span data-ttu-id="76792-295">Új AzureRmSqlDatabaseSecondary</span><span class="sxs-lookup"><span data-stu-id="76792-295">New-AzureRmSqlDatabaseSecondary</span></span>](/powershell/module/azurerm.sql/new-azurermsqldatabasesecondary) |<span data-ttu-id="76792-296">Létrehoz egy meglévő adatbázis másodlagos adatbázist, és elindítja a adatreplikáció.</span><span class="sxs-lookup"><span data-stu-id="76792-296">Creates a secondary database for an existing database and starts data replication.</span></span> |
| [<span data-ttu-id="76792-297">Set-AzureRmSqlDatabaseSecondary</span><span class="sxs-lookup"><span data-stu-id="76792-297">Set-AzureRmSqlDatabaseSecondary</span></span>](/powershell/module/azurerm.sql/set-azurermsqldatabasesecondary) |<span data-ttu-id="76792-298">A másodlagos adatbázis toobe elsődleges tooinitiate feladatátvételt vált.</span><span class="sxs-lookup"><span data-stu-id="76792-298">Switches a secondary database toobe primary tooinitiate failover.</span></span> |
| [<span data-ttu-id="76792-299">Remove-AzureRmSqlDatabaseSecondary</span><span class="sxs-lookup"><span data-stu-id="76792-299">Remove-AzureRmSqlDatabaseSecondary</span></span>](/powershell/module/azurerm.sql/remove-azurermsqldatabasesecondary) |<span data-ttu-id="76792-300">Egy SQL-adatbázis és a megadott másodlagos adatbázis hello közötti adatreplikáció leáll.</span><span class="sxs-lookup"><span data-stu-id="76792-300">Terminates data replication between a SQL Database and hello specified secondary database.</span></span> |
| [<span data-ttu-id="76792-301">Get-AzureRmSqlDatabaseReplicationLink</span><span class="sxs-lookup"><span data-stu-id="76792-301">Get-AzureRmSqlDatabaseReplicationLink</span></span>](/powershell/module/azurerm.sql/get-azurermsqldatabasereplicationlink) |<span data-ttu-id="76792-302">Lekérdezi a hello földrajzi-replikációs hivatkozások az Azure SQL Database és egy erőforráscsoport vagy SQL Server között.</span><span class="sxs-lookup"><span data-stu-id="76792-302">Gets hello geo-replication links between an Azure SQL Database and a resource group or SQL Server.</span></span> |
| [<span data-ttu-id="76792-303">Új AzureRmSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="76792-303">New-AzureRmSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/set-azurermsqldatabasefailovergroup) |   <span data-ttu-id="76792-304">Ez a parancs létrehoz egy feladatátvételi csoport, és regisztrálja azt az elsődleges és másodlagos kiszolgálók</span><span class="sxs-lookup"><span data-stu-id="76792-304">This command creates a failover group and registers it on both primary and secondary servers</span></span>|
| [<span data-ttu-id="76792-305">Remove-AzureRmSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="76792-305">Remove-AzureRmSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/remove-azurermsqldatabasefailovergroup) | <span data-ttu-id="76792-306">Hello feladatátvételi csoport eltávolítása hello kiszolgáló és az összes másodlagos adatbázisok szereplő hello csoport törlése</span><span class="sxs-lookup"><span data-stu-id="76792-306">Removes hello failover group from hello server and deletes all secondary databases included hello group</span></span> |
| [<span data-ttu-id="76792-307">Get-AzureRmSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="76792-307">Get-AzureRmSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/get-azurermsqldatabasefailovergroup) | <span data-ttu-id="76792-308">Lekéri a hello feladatátvételi csoport konfigurálása</span><span class="sxs-lookup"><span data-stu-id="76792-308">Retrieves hello failover group configuration</span></span> |
| [<span data-ttu-id="76792-309">Set-AzureRmSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="76792-309">Set-AzureRmSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/set-azurermsqldatabasefailovergroup) |   <span data-ttu-id="76792-310">Módosítja a hello konfigurációt hello feladatátvételi csoport</span><span class="sxs-lookup"><span data-stu-id="76792-310">Modifies hello configuration of hello failover group</span></span> |
| [<span data-ttu-id="76792-311">Kapcsoló-AzureRMSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="76792-311">Switch-AzureRMSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/switch-azurermsqldatabasefailovergroup) | <span data-ttu-id="76792-312">Hello feladatátvételi csoport toohello másodlagos kiszolgáló eseményindítók feladatainak átvétele</span><span class="sxs-lookup"><span data-stu-id="76792-312">Triggers failover of hello failover group toohello secondary server</span></span> |
|  | |

> [!IMPORTANT]
> <span data-ttu-id="76792-313">Mintaparancsfájlok, lásd: [konfigurálása és a feladatátvétel egy önálló adatbázis aktív georeplikációt használ](scripts/sql-database-setup-geodr-and-failover-database-powershell.md), [konfigurálása és a feladatátvétel egy készletezett adatbázis aktív georeplikációt használ](scripts/sql-database-setup-geodr-and-failover-pool-powershell.md), és a [konfigurálása és a feladatátvétel egy feladatátvételi csoport egyetlen-adatbázis (előzetes verzió)] (parancsfájlok/sql-database-setup-geodr-failover-database-failover-csoportok-powershell.md.</span><span class="sxs-lookup"><span data-stu-id="76792-313">For sample scripts, see [Configure and failover a single database using active geo-replication](scripts/sql-database-setup-geodr-and-failover-database-powershell.md), [Configure and failover a pooled database using active geo-replication](scripts/sql-database-setup-geodr-and-failover-pool-powershell.md), and  [Configure and failover a failover group for a single database (preview)](scripts/sql-database-setup-geodr-failover-database-failover-group-powershell.md.</span></span>
>

## <a name="manage-sql-database-failover-using-hello-rest-api"></a><span data-ttu-id="76792-314">SQL-adatbázis feladatátvételi hello REST API használatával kezelése</span><span class="sxs-lookup"><span data-stu-id="76792-314">Manage SQL database failover using hello REST API</span></span>
| <span data-ttu-id="76792-315">API</span><span class="sxs-lookup"><span data-stu-id="76792-315">API</span></span> | <span data-ttu-id="76792-316">Leírás</span><span class="sxs-lookup"><span data-stu-id="76792-316">Description</span></span> |
| --- | --- |
| [<span data-ttu-id="76792-317">Hozzon létre vagy az adatbázis frissítése (createMode = visszaállítása)</span><span class="sxs-lookup"><span data-stu-id="76792-317">Create or Update Database (createMode=Restore)</span></span>](/rest/api/sql/Databases/CreateOrUpdate) |<span data-ttu-id="76792-318">Hoz, frissítéseket, vagy egy elsődleges vagy másodlagos adatbázis visszaállítása.</span><span class="sxs-lookup"><span data-stu-id="76792-318">Creates, updates, or restores a primary or a secondary database.</span></span> |
| [<span data-ttu-id="76792-319">Get létrehozása, vagy az adatbázis állapotának frissítése</span><span class="sxs-lookup"><span data-stu-id="76792-319">Get Create or Update Database Status</span></span>](/rest/api/sql/Databases/CreateOrUpdate) |<span data-ttu-id="76792-320">A létrehozási művelet során értéket ad vissza a hello állapota.</span><span class="sxs-lookup"><span data-stu-id="76792-320">Returns hello status during a create operation.</span></span> |
| [<span data-ttu-id="76792-321">Állítsa be a másodlagos adatbázist az elsődleges (tervezett feladatátvétel)</span><span class="sxs-lookup"><span data-stu-id="76792-321">Set Secondary Database as Primary (Planned Failover)</span></span>](https://docs.microsoft.com/rest/api/sql/replicationlinkss#ReplicationLinks_Failover) |<span data-ttu-id="76792-322">Melyik adatbázis-replikát az elsődleges adatbázisból hello jelenlegi elsődleges másodpéldányt feladatátvételét által beállítása.</span><span class="sxs-lookup"><span data-stu-id="76792-322">Sets which replica database is primary by failing over from hello current primary replica database.</span></span> |
| [<span data-ttu-id="76792-323">Állítsa be a másodlagos adatbázist az elsődleges (a nem tervezett feladatátvétel)</span><span class="sxs-lookup"><span data-stu-id="76792-323">Set Secondary Database as Primary (Unplanned Failover)</span></span>](https://docs.microsoft.com/rest/api/sql/replicationlinks#ReplicationLinks_FailoverAllowDataLoss) |<span data-ttu-id="76792-324">Melyik adatbázis-replikát az elsődleges adatbázisból hello jelenlegi elsődleges másodpéldányt feladatátvételét által beállítása.</span><span class="sxs-lookup"><span data-stu-id="76792-324">Sets which replica database is primary by failing over from hello current primary replica database.</span></span> <span data-ttu-id="76792-325">Ez a művelet adatvesztést eredményezhet.</span><span class="sxs-lookup"><span data-stu-id="76792-325">This operation might result in data loss.</span></span> |
| [<span data-ttu-id="76792-326">Replikációs hivatkozás beszerzése</span><span class="sxs-lookup"><span data-stu-id="76792-326">Get Replication Link</span></span>](/rest/api/sql/replicationlinks/get) |<span data-ttu-id="76792-327">Lekéri egy adott replikációs hivatkozás egy georeplikáció partneri kapcsolat áll fenn az adott SQL-adatbázis.</span><span class="sxs-lookup"><span data-stu-id="76792-327">Gets a specific replication link for a given SQL database in a geo-replication partnership.</span></span> <span data-ttu-id="76792-328">Lekérdezi a hello információ látható hello sys.geo_replication_links katalógusnézet használatával derítheti ki.</span><span class="sxs-lookup"><span data-stu-id="76792-328">It retrieves hello information visible in hello sys.geo_replication_links catalog view.</span></span> |
| [<span data-ttu-id="76792-329">Replikációs hivatkozások - adatbázis által listája</span><span class="sxs-lookup"><span data-stu-id="76792-329">Replication Links - List By Database</span></span>](/rest/api/sql/replicationlinks/listbydatabase) | <span data-ttu-id="76792-330">Lekérdezi az összes replikációs hivatkozás a georeplikáció együttműködve adott SQL-adatbázis.</span><span class="sxs-lookup"><span data-stu-id="76792-330">Gets all replication links for a given SQL database in a geo-replication partnership.</span></span> <span data-ttu-id="76792-331">Lekérdezi a hello információ látható hello sys.geo_replication_links katalógusnézet használatával derítheti ki.</span><span class="sxs-lookup"><span data-stu-id="76792-331">It retrieves hello information visible in hello sys.geo_replication_links catalog view.</span></span> |
| [<span data-ttu-id="76792-332">Replikációs hivatkozás törlése</span><span class="sxs-lookup"><span data-stu-id="76792-332">Delete Replication Link</span></span>](/rest/api/sql/databases/delete) | <span data-ttu-id="76792-333">Egy adatbázis-replikációs hivatkozást törli.</span><span class="sxs-lookup"><span data-stu-id="76792-333">Deletes a database replication link.</span></span> <span data-ttu-id="76792-334">Nem hajtható végre, a feladatátvétel során.</span><span class="sxs-lookup"><span data-stu-id="76792-334">Cannot be done during failover.</span></span> |
| <span data-ttu-id="76792-335">[Hozzon létre vagy feladatátvételi csoport] / rest/api/sql/failovergroups/createorupdate)</span><span class="sxs-lookup"><span data-stu-id="76792-335">[Create or Update Failover Group]/rest/api/sql/failovergroups/createorupdate)</span></span> | <span data-ttu-id="76792-336">Létrehozza vagy frissíti egy feladatátvételi csoport</span><span class="sxs-lookup"><span data-stu-id="76792-336">Creates or updates a failover group</span></span> |
| [<span data-ttu-id="76792-337">Feladatátvételi csoport törlése</span><span class="sxs-lookup"><span data-stu-id="76792-337">Delete Failover Group</span></span>](/rest/api/sql/failovergroups/delete) | <span data-ttu-id="76792-338">Hello feladatátvételi csoport eltávolítása hello kiszolgáló</span><span class="sxs-lookup"><span data-stu-id="76792-338">Removes hello failover group from hello server</span></span> |
| [<span data-ttu-id="76792-339">A feladatátvétel (tervezett)</span><span class="sxs-lookup"><span data-stu-id="76792-339">Failover (Planned)</span></span>](/rest/api/sql/failovergroups/failover) | <span data-ttu-id="76792-340">Feladatátadás hello aktuális elsődleges kiszolgáló toothis kiszolgálóhoz.</span><span class="sxs-lookup"><span data-stu-id="76792-340">Fails over from hello current primary server toothis server.</span></span> |
| [<span data-ttu-id="76792-341">Kényszerített feladatátvételi adatvesztés engedélyezése</span><span class="sxs-lookup"><span data-stu-id="76792-341">Force Failover Allow Data Loss</span></span>](/rest/api/sql/failovergroups/forcefailoverallowdataloss) |<span data-ttu-id="76792-342">a jelenlegi elsődleges kiszolgáló toothis kiszolgálóról hello ails keresztül.</span><span class="sxs-lookup"><span data-stu-id="76792-342">ails over from hello current primary server toothis server.</span></span> <span data-ttu-id="76792-343">Ez a művelet adatvesztést eredményezhet.</span><span class="sxs-lookup"><span data-stu-id="76792-343">This operation might result in data loss.</span></span> |
| [<span data-ttu-id="76792-344">Get feladatátvételi csoport</span><span class="sxs-lookup"><span data-stu-id="76792-344">Get Failover Group</span></span>](/rest/api/sql/failovergroups/get) | <span data-ttu-id="76792-345">Egy feladatátvételi csoport lekérése.</span><span class="sxs-lookup"><span data-stu-id="76792-345">Gets a failover group.</span></span> |
| [<span data-ttu-id="76792-346">Listázza a csoportokat feladatátvételi kiszolgáló</span><span class="sxs-lookup"><span data-stu-id="76792-346">List Failover Groups By Server</span></span>](/rest/api/sql/failovergroups/listbyserver) | <span data-ttu-id="76792-347">A Server hello feladatátvételi csoportok listája.</span><span class="sxs-lookup"><span data-stu-id="76792-347">Lists hello failover groups in a server.</span></span> |
| [<span data-ttu-id="76792-348">Frissítés feladatátvételi csoport</span><span class="sxs-lookup"><span data-stu-id="76792-348">Update Failover Group</span></span>](/rest/api/sql/failovergroups/update) | <span data-ttu-id="76792-349">Egy feladatátvételi csoport frissíti.</span><span class="sxs-lookup"><span data-stu-id="76792-349">Updates a failover group.</span></span> |
|  | |

## <a name="next-steps"></a><span data-ttu-id="76792-350">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="76792-350">Next steps</span></span>
* <span data-ttu-id="76792-351">Mintaparancsfájlok lásd:</span><span class="sxs-lookup"><span data-stu-id="76792-351">For sample scripts, see:</span></span>
   - [<span data-ttu-id="76792-352">Konfigurálja és feladatátvételi egy önálló adatbázis aktív georeplikációt használ</span><span class="sxs-lookup"><span data-stu-id="76792-352">Configure and failover a single database using active geo-replication</span></span>](scripts/sql-database-setup-geodr-and-failover-database-powershell.md)
   - [<span data-ttu-id="76792-353">Konfigurálja és feladatátvételi egy készletezett adatbázis aktív georeplikációt használ</span><span class="sxs-lookup"><span data-stu-id="76792-353">Configure and failover a pooled database using active geo-replication</span></span>](scripts/sql-database-setup-geodr-and-failover-pool-powershell.md)
   - [<span data-ttu-id="76792-354">Konfigurálja és a feladatátvételi feladatátvételi csoport számára egy adatbázist (előzetes verzió)</span><span class="sxs-lookup"><span data-stu-id="76792-354">Configure and failover a failover group for a single database (preview)</span></span>](scripts/sql-database-setup-geodr-failover-database-failover-group-powershell.md)
* <span data-ttu-id="76792-355">Egy üzleti folytonosság – áttekintés és forgatókönyvek: [üzleti folytonosság – áttekintés](sql-database-business-continuity.md)</span><span class="sxs-lookup"><span data-stu-id="76792-355">For a business continuity overview and scenarios, see [Business continuity overview](sql-database-business-continuity.md)</span></span>
* <span data-ttu-id="76792-356">tudnivalók Azure SQL adatbázis automatikus biztonsági mentés, toolearn lásd: [SQL-adatbázis biztonsági mentések automatikus](sql-database-automated-backups.md).</span><span class="sxs-lookup"><span data-stu-id="76792-356">toolearn about Azure SQL Database automated backups, see [SQL Database automated backups](sql-database-automated-backups.md).</span></span>
* <span data-ttu-id="76792-357">toolearn a helyreállításhoz, az automatikus biztonsági mentés használatával kapcsolatban lásd: [adatbázis visszaállítása biztonsági másolatból hello szolgáltatás által kezdeményezett](sql-database-recovery-using-backups.md).</span><span class="sxs-lookup"><span data-stu-id="76792-357">toolearn about using automated backups for recovery, see [Restore a database from hello service-initiated backups](sql-database-recovery-using-backups.md).</span></span>
* <span data-ttu-id="76792-358">egy új elsődleges kiszolgáló és -adatbázis hitelesítési követelményeivel kapcsolatos toolearn lásd [SQL-adatbázis biztonsági katasztrófa utáni helyreállítás után](sql-database-geo-replication-security-config.md).</span><span class="sxs-lookup"><span data-stu-id="76792-358">toolearn about authentication requirements for a new primary server and database, see [SQL Database security after disaster recovery](sql-database-geo-replication-security-config.md).</span></span>

