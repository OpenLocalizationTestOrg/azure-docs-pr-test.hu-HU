---
title: "sok Azure SQL-adatbázisoknál a több-bérlős SaaS-alkalmazás teljesítményének aaaMonitor |} Microsoft Docs"
description: "Megfigyelés és kezelés adatbázisok és tárolókészletekben: hello Azure SQL adatbázis Wingtip SaaS-alkalmazás teljesítménye"
keywords: "sql database-oktatóanyag"
services: sql-database
documentationcenter: 
author: stevestein
manager: craigg
editor: 
ms.assetid: 
ms.service: sql-database
ms.custom: scale out apps
ms.workload: data-management
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/26/2017
ms.author: sstein
ms.openlocfilehash: f0d7ba456c485b7de249a56abac3cf4be3857285
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/06/2017
---
# <a name="monitor-performance-of-hello-wingtip-saas-application"></a><span data-ttu-id="94ecf-104">Hello Wingtip SaaS-alkalmazás teljesítményének figyelése</span><span class="sxs-lookup"><span data-stu-id="94ecf-104">Monitor performance of hello Wingtip SaaS application</span></span>

<span data-ttu-id="94ecf-105">Ebben az oktatóanyagban használt SaaS-alkalmazásokhoz több alapvető teljesítményt felügyeleti lehetőségeket írja.</span><span class="sxs-lookup"><span data-stu-id="94ecf-105">In this tutorial, several key performance management scenarios used in SaaS applications are explored.</span></span> <span data-ttu-id="94ecf-106">Az egy betöltési generátor toosimulate tevékenység közötti minden bérlő, hello beépített figyelési és riasztási szolgáltatásokat az SQL Database és a rugalmas készletek egy.</span><span class="sxs-lookup"><span data-stu-id="94ecf-106">Using a load generator toosimulate activity across all tenant databases, hello built-in monitoring and alerting features of SQL Database and elastic pools are demonstrated.</span></span>

<span data-ttu-id="94ecf-107">hello Wingtip SaaS-alkalmazás egyetlen-bérlő adatok modellt használ, ahol az egyes helyszínekkel (bérlői) rendelkezik a saját adatbázis.</span><span class="sxs-lookup"><span data-stu-id="94ecf-107">hello Wingtip SaaS app uses a single-tenant data model, where each venue (tenant) has their own database.</span></span> <span data-ttu-id="94ecf-108">Sok Szolgáltatottszoftver-alkalmazáshoz, például a hello bérlői munkaterhelés mintája, előre nem látható és szórványos várható.</span><span class="sxs-lookup"><span data-stu-id="94ecf-108">Like many SaaS applications, hello anticipated tenant workload pattern is unpredictable and sporadic.</span></span> <span data-ttu-id="94ecf-109">Ez a gyakorlatban azt jelenti, hogy a jegyeladásokra bármikor sor kerülhet.</span><span class="sxs-lookup"><span data-stu-id="94ecf-109">In other words, ticket sales may occur at any time.</span></span> <span data-ttu-id="94ecf-110">a tipikus adatbázis használati mód, bérlő adatbázisok vannak telepítve, a rugalmas adatbáziskészletek előnyeit tootake.</span><span class="sxs-lookup"><span data-stu-id="94ecf-110">tootake advantage of this typical database usage pattern, tenant databases are deployed into elastic database pools.</span></span> <span data-ttu-id="94ecf-111">Rugalmas készletek optimalizálhatja megoldás hello költségének erőforrások számos adatbázis közti megosztását.</span><span class="sxs-lookup"><span data-stu-id="94ecf-111">Elastic pools optimize hello cost of a solution by sharing resources across many databases.</span></span> <span data-ttu-id="94ecf-112">Az ilyen típusú mintát fontos toomonitor adatbázis és a készlet Erőforrás kihasználtsága tooensure betöltő ésszerűen elosztott terhelésű készletek között.</span><span class="sxs-lookup"><span data-stu-id="94ecf-112">With this type of pattern, it's important toomonitor database and pool resource usage tooensure that loads are reasonably balanced across pools.</span></span> <span data-ttu-id="94ecf-113">Szükség tooensure, az egyes adatbázisok rendelkezik-e a megfelelő erőforrásokat, és hogy készletek nem elérte-e a [eDTU](sql-database-what-is-a-dtu.md) korlátok.</span><span class="sxs-lookup"><span data-stu-id="94ecf-113">You also need tooensure that individual databases have adequate resources, and that pools are not hitting their [eDTU](sql-database-what-is-a-dtu.md) limits.</span></span> <span data-ttu-id="94ecf-114">Ez az oktatóanyag módon toomonitor felderíti és kezelése, adatbázisok és -készletek, és hogyan tootake javítási műveletek a válasz toovariations terheléseknél engedélyezett.</span><span class="sxs-lookup"><span data-stu-id="94ecf-114">This tutorial explores ways toomonitor and manage databases and pools, and how tootake corrective action in response toovariations in workload.</span></span>

<span data-ttu-id="94ecf-115">Ezen oktatóanyag segítségével megtanulhatja a következőket:</span><span class="sxs-lookup"><span data-stu-id="94ecf-115">In this tutorial you learn how to:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="94ecf-116">A megadott terheléselosztási generátor futtatásával hello bérlői adatbázisok használati szimulálása</span><span class="sxs-lookup"><span data-stu-id="94ecf-116">Simulate usage on hello tenant databases by running a provided load generator</span></span>
> * <span data-ttu-id="94ecf-117">A figyelő hello bérlői adatbázisok azok megfelelnek a terhelés toohello növekedése</span><span class="sxs-lookup"><span data-stu-id="94ecf-117">Monitor hello tenant databases as they respond toohello increase in load</span></span>
> * <span data-ttu-id="94ecf-118">Vertikális felskálázás hello válasz toohello nagyobb adatbázis-terhelésnek a rugalmas készlet</span><span class="sxs-lookup"><span data-stu-id="94ecf-118">Scale up hello Elastic pool in response toohello increased database load</span></span>
> * <span data-ttu-id="94ecf-119">Egy második rugalmas készlet tooload egyenleg adatbázis tevékenység kiépítése</span><span class="sxs-lookup"><span data-stu-id="94ecf-119">Provision a second Elastic pool tooload balance database activity</span></span>


<span data-ttu-id="94ecf-120">Ebben az oktatóanyagban a következő előfeltételek győződjön meg arról, hogy hello elvégzése toocomplete:</span><span class="sxs-lookup"><span data-stu-id="94ecf-120">toocomplete this tutorial, make sure hello following prerequisites are completed:</span></span>

* <span data-ttu-id="94ecf-121">hello Wingtip SaaS-alkalmazás telepítve van.</span><span class="sxs-lookup"><span data-stu-id="94ecf-121">hello Wingtip SaaS app is deployed.</span></span> <span data-ttu-id="94ecf-122">toodeploy öt percen belül, lásd: [központi telepítése és felfedezése hello Wingtip SaaS-alkalmazáshoz](sql-database-saas-tutorial.md)</span><span class="sxs-lookup"><span data-stu-id="94ecf-122">toodeploy in less than five minutes, see [Deploy and explore hello Wingtip SaaS application](sql-database-saas-tutorial.md)</span></span>
* <span data-ttu-id="94ecf-123">Az Azure PowerShell telepítve van.</span><span class="sxs-lookup"><span data-stu-id="94ecf-123">Azure PowerShell is installed.</span></span> <span data-ttu-id="94ecf-124">A részletekért lásd: [Ismerkedés az Azure PowerShell-lel](https://docs.microsoft.com/powershell/azure/get-started-azureps)</span><span class="sxs-lookup"><span data-stu-id="94ecf-124">For details, see [Getting started with Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps)</span></span>

## <a name="introduction-toosaas-performance-management-patterns"></a><span data-ttu-id="94ecf-125">Bevezetés tooSaaS teljesítmény felügyeleti minták</span><span class="sxs-lookup"><span data-stu-id="94ecf-125">Introduction tooSaaS performance management patterns</span></span>

<span data-ttu-id="94ecf-126">Adatbázis teljesítményének felügyelete áll fordítás és teljesítményadatok elemzése és majd reagál toothis adatok az alkalmazás megfelelő válaszidő paraméterek toomaintain beállításával.</span><span class="sxs-lookup"><span data-stu-id="94ecf-126">Managing database performance consists of compiling and analyzing performance data, and then reacting toothis data by adjusting parameters toomaintain an acceptable response time for your application.</span></span> <span data-ttu-id="94ecf-127">Esetén több bérlő, a rugalmas adatbáziskészletek egy költséghatékony tooprovide és kezelheti az erőforrásokat egy előre nem látható munkaterhelések adatbázisok csoportja számára.</span><span class="sxs-lookup"><span data-stu-id="94ecf-127">When hosting multiple tenants, Elastic database pools are a cost-effective way tooprovide and manage resources for a group of databases with unpredictable workloads.</span></span> <span data-ttu-id="94ecf-128">Bizonyos számításifeladat-mintáknál már akár két S3-adatbázist is előnyös lehet készletben kezelni.</span><span class="sxs-lookup"><span data-stu-id="94ecf-128">With certain workload patterns, as few as two S3 databases can benefit from being managed in a pool.</span></span>

![média](./media/sql-database-saas-tutorial-performance-monitoring/app-diagram.png)

<span data-ttu-id="94ecf-130">Címkészletekkel és IP-készletek, hello adatbázisok figyelt tooensure addig maradnak a teljesítmény elfogadható tartományait belül kell lennie.</span><span class="sxs-lookup"><span data-stu-id="94ecf-130">Pools, and hello databases in pools, should be monitored tooensure they stay within acceptable ranges of performance.</span></span> <span data-ttu-id="94ecf-131">Hangolja hello alkalmazáskészlet konfigurációs toomeet hello hello összesített munkaterhelés igényeihez annak biztosítására, hogy hello Edtu hello megfelelő összes adatbázis teljes munkaterhelés.</span><span class="sxs-lookup"><span data-stu-id="94ecf-131">Tune hello pool configuration toomeet hello needs of hello aggregate workload of all databases, ensuring that hello pool eDTUs are appropriate for hello overall workload.</span></span> <span data-ttu-id="94ecf-132">Igazítása hello adatbázisonkénti minimális és adatbázis-maximális eDTU értékek tooappropriate specifikus követelményeit.</span><span class="sxs-lookup"><span data-stu-id="94ecf-132">Adjust hello per-database min and per-database max eDTU values tooappropriate values for your specific application requirements.</span></span>

### <a name="performance-management-strategies"></a><span data-ttu-id="94ecf-133">Teljesítménykezelési stratégiák</span><span class="sxs-lookup"><span data-stu-id="94ecf-133">Performance management strategies</span></span>

* <span data-ttu-id="94ecf-134">tooavoid toomanually figyelemmel kísérheti a teljesítményt, hogy a leghatékonyabb túl**riasztások beállítását, amelyek indul el, ha az adatbázisok és a készletek kóbor kívül normál tartományok**.</span><span class="sxs-lookup"><span data-stu-id="94ecf-134">tooavoid having toomanually monitor performance, it’s most effective too**set alerts that trigger when databases or pools stray out of normal ranges**.</span></span>
* <span data-ttu-id="94ecf-135">a összesített teljesítményszintjének hello egy alkalmazáskészlet toorespond tooshort-kifejezés ingadozását hello **készlet edtu-k szint is méretezhető felfelé vagy lefelé**.</span><span class="sxs-lookup"><span data-stu-id="94ecf-135">toorespond tooshort-term fluctuations in hello aggregate performance level of a pool, hello **pool eDTU level can be scaled up or down**.</span></span> <span data-ttu-id="94ecf-136">Rendszeres vagy előre jelezhető alapon történik a értékingadozásait **hello készlet skálázás automatikusan ütemezett toooccur lehet**.</span><span class="sxs-lookup"><span data-stu-id="94ecf-136">If this fluctuation occurs on a regular or predictable basis, **scaling hello pool can be scheduled toooccur automatically**.</span></span> <span data-ttu-id="94ecf-137">Beállítható például a vertikális leskálázás, amikor előre láthatóan kevés lesz a számítási feladat, például éjjelente vagy a hétvégi napokon.</span><span class="sxs-lookup"><span data-stu-id="94ecf-137">For example, scale down when you know your workload is light, maybe overnight, or during weekends.</span></span>
* <span data-ttu-id="94ecf-138">toorespond toolonger-kifejezés ingadozását, vagy a hello adatbázisok száma **egyedi adatbázisok anélkül áthelyezhetők más készletekbe**.</span><span class="sxs-lookup"><span data-stu-id="94ecf-138">toorespond toolonger-term fluctuations, or changes in hello number of databases, **individual databases can be moved into other pools**.</span></span>
* <span data-ttu-id="94ecf-139">toorespond tooshort kifejezés növekedése *egyedi* adatbázis-terhelésnek **egyes adatbázisok készlet veszi, és az egyes teljesítményszintet hozzárendelt**.</span><span class="sxs-lookup"><span data-stu-id="94ecf-139">toorespond tooshort term increases in *individual* database load **individual databases can be taken out of a pool and assigned an individual performance level**.</span></span> <span data-ttu-id="94ecf-140">Miután hello terhelés csökken, hello adatbázis majd adhatók vissza toohello készlet.</span><span class="sxs-lookup"><span data-stu-id="94ecf-140">Once hello load is reduced, hello database can then be returned toohello pool.</span></span> <span data-ttu-id="94ecf-141">Ha ez ismert előre, adatbázisok áthelyezhető pre-emptively tooensure hello adatbázis mindenhol kell hello erőforrások és tooavoid hatás más adatbázisok hello készletben.</span><span class="sxs-lookup"><span data-stu-id="94ecf-141">When this is known in advance, databases can be moved pre-emptively tooensure hello database always has hello resources it needs, and tooavoid impact on other databases in hello pool.</span></span> <span data-ttu-id="94ecf-142">Ha ezt a követelményt előre jelezhető, például egy helyszínére a sürgős jegy értékesítési népszerű esemény tapasztal, majd a felügyeleti jelenség integrálhatják hello alkalmazás.</span><span class="sxs-lookup"><span data-stu-id="94ecf-142">If this requirement is predictable, such as a venue experiencing a rush of ticket sales for a popular event, then this management behavior can be integrated into hello application.</span></span>

<span data-ttu-id="94ecf-143">Hello [Azure-portálon](https://portal.azure.com) biztosít, beépített figyelést és riasztást küld a legtöbb erőforrást.</span><span class="sxs-lookup"><span data-stu-id="94ecf-143">hello [Azure portal](https://portal.azure.com) provides built-in monitoring and alerting on most resources.</span></span> <span data-ttu-id="94ecf-144">Az SQL Database esetében a figyelés és riasztás rendelkezésre áll az adatbázisokhoz és a készletekhez.</span><span class="sxs-lookup"><span data-stu-id="94ecf-144">For SQL Database, monitoring and alerting is available on databases and pools.</span></span> <span data-ttu-id="94ecf-145">A figyelés és riasztás beépített erőforrás-specifikus,, így a kényelmes toouse a kis mennyiségű erőforrást, de nem nem nagyon hasznos, ha sok erőforrást.</span><span class="sxs-lookup"><span data-stu-id="94ecf-145">This built-in monitoring and alerting is resource-specific, so it's convenient toouse for small numbers of resources, but is not very convenient when working with many resources.</span></span>

<span data-ttu-id="94ecf-146">Nagy mennyiségű forgatókönyvek, ahol sok reources dolgozunk [Naplóelemzés (OMS)](sql-database-saas-tutorial-log-analytics.md) is használható.</span><span class="sxs-lookup"><span data-stu-id="94ecf-146">For high-volume scenarios where you're working with many reources, [Log Analytics (OMS)](sql-database-saas-tutorial-log-analytics.md) can be used.</span></span> <span data-ttu-id="94ecf-147">Ez a külön Azure szolgáltatás, amely analytics kibocsátott diagnosztikai naplók és a naplóelemzési munkaterület összegyűjtött telemetrikus keresztül.</span><span class="sxs-lookup"><span data-stu-id="94ecf-147">This is a separate Azure service that provides analytics over emitted diagnostic logs and telemetry gathered in a log analytics workspace.</span></span> <span data-ttu-id="94ecf-148">A Naplóelemzési sok szolgáltatásokból gyűjthet és használt tooquery kell és állíthatók be riasztások.</span><span class="sxs-lookup"><span data-stu-id="94ecf-148">Log Analytics can collect telemetry from many services and be used tooquery and set alerts.</span></span>

## <a name="get-hello-wingtip-application-source-code-and-scripts"></a><span data-ttu-id="94ecf-149">Hello Wingtip alkalmazás forráskódjához és parancsfájlok</span><span class="sxs-lookup"><span data-stu-id="94ecf-149">Get hello Wingtip application source code and scripts</span></span>

<span data-ttu-id="94ecf-150">hello Wingtip Szolgáltatottszoftver-parancsfájlok és az alkalmazás forráskódjához találhatók hello [WingtipSaaS](https://github.com/Microsoft/WingtipSaaS) github-tárház.</span><span class="sxs-lookup"><span data-stu-id="94ecf-150">hello Wingtip SaaS scripts and application source code are available in hello [WingtipSaaS](https://github.com/Microsoft/WingtipSaaS) github repo.</span></span> <span data-ttu-id="94ecf-151">[Lépések toodownload hello Wingtip SaaS parancsfájlok](sql-database-wtp-overview.md#download-and-unblock-the-wingtip-saas-scripts).</span><span class="sxs-lookup"><span data-stu-id="94ecf-151">[Steps toodownload hello Wingtip SaaS scripts](sql-database-wtp-overview.md#download-and-unblock-the-wingtip-saas-scripts).</span></span>

## <a name="provision-additional-tenants"></a><span data-ttu-id="94ecf-152">További bérlők kiépítése</span><span class="sxs-lookup"><span data-stu-id="94ecf-152">Provision additional tenants</span></span>

<span data-ttu-id="94ecf-153">Készletek lehetnek csak két S3 adatbázisok költséghatékony, hello további-adatbázisok, amelyek a hello készlet hello költséghatékonyabb hatás átlagolási hello válik.</span><span class="sxs-lookup"><span data-stu-id="94ecf-153">While pools can be cost-effective with just two S3 databases, hello more databases that are in hello pool hello more cost-effective hello averaging effect becomes.</span></span> <span data-ttu-id="94ecf-154">Annak érdekében, hogy a teljesítményfigyelés és -kezelés nagy léptékben való használatát kellőképpen szemléltetni lehessen, jelen oktatóanyaghoz legalább 20 üzembe helyezett adatbázis szükséges.</span><span class="sxs-lookup"><span data-stu-id="94ecf-154">For a good understanding of how performance monitoring and management works at scale, this tutorial requires you have at least 20 databases deployed.</span></span>

<span data-ttu-id="94ecf-155">Ha már megtörtént egy kötegelt bérlő előzetes oktatóanyag, hagyja ki toohello [szimulálás használati összes bérlői adatbázisok](#simulate-usage-on-all-tenant-databases) szakasz.</span><span class="sxs-lookup"><span data-stu-id="94ecf-155">If you already provisioned a batch of tenants in a prior tutorial, skip toohello [Simulate usage on all tenant databases](#simulate-usage-on-all-tenant-databases) section.</span></span>

1. <span data-ttu-id="94ecf-156">Nyissa meg... \\Tanulási modulok\\Teljesítményfigyelő és felügyeleti\\*bemutató-PerformanceMonitoringAndManagement.ps1* a hello *PowerShell ISE*.</span><span class="sxs-lookup"><span data-stu-id="94ecf-156">Open …\\Learning Modules\\Performance Monitoring and Management\\*Demo-PerformanceMonitoringAndManagement.ps1* in hello *PowerShell ISE*.</span></span> <span data-ttu-id="94ecf-157">Tartsa ezt a szkriptet nyitva, mivel az oktatóanyag során több különböző forgatókönyvet is futtatnia kell majd.</span><span class="sxs-lookup"><span data-stu-id="94ecf-157">Keep this script open as you'll run several scenarios during this tutorial.</span></span>
1. <span data-ttu-id="94ecf-158">Válassza a **$DemoScenario** = **1**, **Bérlők kötegelt kiépítése** lehetőséget.</span><span class="sxs-lookup"><span data-stu-id="94ecf-158">Set **$DemoScenario** = **1**, **Provision a batch of tenants**</span></span>
1. <span data-ttu-id="94ecf-159">Nyomja le az **F5** toorun hello parancsfájl.</span><span class="sxs-lookup"><span data-stu-id="94ecf-159">Press **F5** toorun hello script.</span></span>

<span data-ttu-id="94ecf-160">hello parancsfájl telepíti 17 bérlők kisebb, mint öt perc múlva.</span><span class="sxs-lookup"><span data-stu-id="94ecf-160">hello script will deploy 17 tenants in less than five minutes.</span></span>

<span data-ttu-id="94ecf-161">Hello *New-TenantBatch* parancsfájl használ egy beágyazott vagy csatolt [erőforrás-kezelő](../azure-resource-manager/index.md) sablonokat, hozzon létre egy kötegelt bérlő, amely alapértelmezés szerint hello adatbázis másolja **basetenantdb** hello katalógus server toocreate hello új bérlő adatbázisokon, majd regisztrálja ezek hello katalógusban, és végül hello bérlő neve és helyszínére típusú inicializál.</span><span class="sxs-lookup"><span data-stu-id="94ecf-161">hello *New-TenantBatch* script uses a nested or linked set of [Resource Manager](../azure-resource-manager/index.md) templates that create a batch of tenants, which by default copies hello database **basetenantdb** on hello catalog server toocreate hello new tenant databases, then registers these in hello catalog, and finally initializes them with hello tenant name and venue type.</span></span> <span data-ttu-id="94ecf-162">Ez megfelel hello módon hello app látja el egy új bérlőt.</span><span class="sxs-lookup"><span data-stu-id="94ecf-162">This is consistent with hello way hello app provisions a new tenant.</span></span> <span data-ttu-id="94ecf-163">Minden módosítás el túl*basetenantdb* alkalmazott tooany vannak kiépítve azt követően, új bérlők számára.</span><span class="sxs-lookup"><span data-stu-id="94ecf-163">Any changes made too*basetenantdb* are applied tooany new tenants provisioned thereafter.</span></span> <span data-ttu-id="94ecf-164">Lásd: hello [séma felügyeleti oktatóanyag](sql-database-saas-tutorial-schema-management.md) toosee hogyan változik toomake séma túl*meglévő* adatbázisok bérlői (beleértve hello *basetenantdb* adatbázis).</span><span class="sxs-lookup"><span data-stu-id="94ecf-164">See hello [Schema Management tutorial](sql-database-saas-tutorial-schema-management.md) toosee how toomake schema changes too*existing* tenant databases (including hello *basetenantdb* database).</span></span>

## <a name="simulate-usage-on-all-tenant-databases"></a><span data-ttu-id="94ecf-165">Az összes bérlői adatbázis használatának szimulálása</span><span class="sxs-lookup"><span data-stu-id="94ecf-165">Simulate usage on all tenant databases</span></span>

<span data-ttu-id="94ecf-166">Hello *bemutató-PerformanceMonitoringAndManagement.ps1* parancsfájl, feltéve, hogy a munkaterhelés futtatott összes bérlői adatbázis szimulálja.</span><span class="sxs-lookup"><span data-stu-id="94ecf-166">hello *Demo-PerformanceMonitoringAndManagement.ps1* script is provided that simulates a workload running against all tenant databases.</span></span> <span data-ttu-id="94ecf-167">hello terhelés generálta egy hello rendelkezésre álló terheléselosztási forgatókönyv:</span><span class="sxs-lookup"><span data-stu-id="94ecf-167">hello load is generated using one of hello available load scenarios:</span></span>

| <span data-ttu-id="94ecf-168">Bemutató</span><span class="sxs-lookup"><span data-stu-id="94ecf-168">Demo</span></span> | <span data-ttu-id="94ecf-169">Forgatókönyv</span><span class="sxs-lookup"><span data-stu-id="94ecf-169">Scenario</span></span> |
|:--|:--|
| <span data-ttu-id="94ecf-170">2</span><span class="sxs-lookup"><span data-stu-id="94ecf-170">2</span></span> | <span data-ttu-id="94ecf-171">Normál intenzitású terhelés létrehozása (kb. 40 DTU)</span><span class="sxs-lookup"><span data-stu-id="94ecf-171">Generate normal intensity load (approx. 40 DTU)</span></span> |
| <span data-ttu-id="94ecf-172">3</span><span class="sxs-lookup"><span data-stu-id="94ecf-172">3</span></span> | <span data-ttu-id="94ecf-173">Terhelés létrehozása adatbázisonkénti hosszabb és gyakoribb adatlöketekkel</span><span class="sxs-lookup"><span data-stu-id="94ecf-173">Generate load with longer and more frequent bursts per database</span></span>|
| <span data-ttu-id="94ecf-174">4</span><span class="sxs-lookup"><span data-stu-id="94ecf-174">4</span></span> | <span data-ttu-id="94ecf-175">Terhelés létrehozása adatbázisonkénti magasabb DTU-löketekkel (kb. 80 DTU)</span><span class="sxs-lookup"><span data-stu-id="94ecf-175">Generate load with higher DTU bursts per database (approx. 80 DTU)</span></span>|
| <span data-ttu-id="94ecf-176">5</span><span class="sxs-lookup"><span data-stu-id="94ecf-176">5</span></span> | <span data-ttu-id="94ecf-177">Normál terhelés létrehozása, valamint magasabb terhelés létrehozása egyetlen bérlő számára (kb. 95 DTU)</span><span class="sxs-lookup"><span data-stu-id="94ecf-177">Generate a normal load plus a high load on a single tenant (approx. 95 DTU)</span></span>|
| <span data-ttu-id="94ecf-178">6</span><span class="sxs-lookup"><span data-stu-id="94ecf-178">6</span></span> | <span data-ttu-id="94ecf-179">Kiegyensúlyozatlan terhelés létrehozása több készlet számára</span><span class="sxs-lookup"><span data-stu-id="94ecf-179">Generate unbalanced load across multiple pools</span></span>|

<span data-ttu-id="94ecf-180">hello terhelés generátor vonatkozik egy *szintetikus* csak CPU-terhelés tooevery bérlői adatbázis.</span><span class="sxs-lookup"><span data-stu-id="94ecf-180">hello load generator applies a *synthetic* CPU-only load tooevery tenant database.</span></span> <span data-ttu-id="94ecf-181">hello generátor elindít egy feladatot az egyes bérlői adatbázis, amely meghívja a tárolt eljárás rendszeres időközönként, amely hello terhelés hoz létre.</span><span class="sxs-lookup"><span data-stu-id="94ecf-181">hello generator starts a job for each tenant database, which calls a stored procedure periodically that generates hello load.</span></span> <span data-ttu-id="94ecf-182">hello terhelési szintek (edtu-k) időtartama és intervallumok változnak, előre nem látható bérlői tevékenységeket szimulálva összes adatbázis között.</span><span class="sxs-lookup"><span data-stu-id="94ecf-182">hello load levels (in eDTUs), duration, and intervals are varied across all databases, simulating unpredictable tenant activity.</span></span>

1. <span data-ttu-id="94ecf-183">Nyissa meg... \\Tanulási modulok\\Teljesítményfigyelő és felügyeleti\\*bemutató-PerformanceMonitoringAndManagement.ps1* a hello *PowerShell ISE*.</span><span class="sxs-lookup"><span data-stu-id="94ecf-183">Open …\\Learning Modules\\Performance Monitoring and Management\\*Demo-PerformanceMonitoringAndManagement.ps1* in hello *PowerShell ISE*.</span></span> <span data-ttu-id="94ecf-184">Tartsa ezt a szkriptet nyitva, mivel az oktatóanyag során több különböző forgatókönyvet is futtatnia kell majd.</span><span class="sxs-lookup"><span data-stu-id="94ecf-184">Keep this script open as you'll run several scenarios during this tutorial.</span></span>
1. <span data-ttu-id="94ecf-185">Állítsa be **$DemoScenario** = **2**, *Generate normál intenzitásának terhelés*.</span><span class="sxs-lookup"><span data-stu-id="94ecf-185">Set **$DemoScenario** = **2**, *Generate normal intensity load*.</span></span>
1. <span data-ttu-id="94ecf-186">Nyomja le az **F5** tooapply a terhelés tooall a bérlő adatbázisok.</span><span class="sxs-lookup"><span data-stu-id="94ecf-186">Press **F5** tooapply a load tooall your tenant databases.</span></span>

<span data-ttu-id="94ecf-187">Wingtip egy SaaS-alkalmazás, és egy SaaS-alkalmazás hello valós terhelése jellemzően szórványos és előre nem látható.</span><span class="sxs-lookup"><span data-stu-id="94ecf-187">Wingtip is a SaaS app, and hello real-world load on a SaaS app is typically sporadic and unpredictable.</span></span> <span data-ttu-id="94ecf-188">toosimulate ez hello terhelés generátor előállított egy véletlenszerű terheléselosztási pontjain egyetlen bérlő számára.</span><span class="sxs-lookup"><span data-stu-id="94ecf-188">toosimulate this, hello load generator produces a randomized load distributed across all tenants.</span></span> <span data-ttu-id="94ecf-189">Több percig hello terhelés mintát tooemerge, így futtatása hello terhelés generátor 3-5 percet, mielőtt megpróbálná toomonitor hello betöltése a következő részekben hello van szükség.</span><span class="sxs-lookup"><span data-stu-id="94ecf-189">Several minutes are needed for hello load pattern tooemerge, so run hello load generator for 3-5 minutes before attempting toomonitor hello load in hello following sections.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="94ecf-190">hello terhelés generátor feladatok sorozataként fut a helyi PowerShell-munkamenetben.</span><span class="sxs-lookup"><span data-stu-id="94ecf-190">hello load generator is running as a series of jobs in your local PowerShell session.</span></span> <span data-ttu-id="94ecf-191">Tartsa hello *bemutató-PerformanceMonitoringAndManagement.ps1* lapon nyissa meg!</span><span class="sxs-lookup"><span data-stu-id="94ecf-191">Keep hello *Demo-PerformanceMonitoringAndManagement.ps1* tab open!</span></span> <span data-ttu-id="94ecf-192">Ha hello lap bezárásához, vagy a gép felfüggesztése, hello terhelés generátor leáll.</span><span class="sxs-lookup"><span data-stu-id="94ecf-192">If you close hello tab, or suspend your machine, hello load generator stops.</span></span> <span data-ttu-id="94ecf-193">hello terhelés generátor marad a *feladat meghívása* állapotba, ahol hoz létre új tenantokat hello generátor végrehajtásának megkezdése után törlődnek terhelése.</span><span class="sxs-lookup"><span data-stu-id="94ecf-193">hello load generator remains in a *job-invoking* state where it generates load on any new tenants that are provisioned after hello generator is started.</span></span> <span data-ttu-id="94ecf-194">Használjon *Ctrl-C* toostop új feladatokat és kilépési hello parancsfájl meghívását.</span><span class="sxs-lookup"><span data-stu-id="94ecf-194">Use *Ctrl-C* toostop invoking new jobs and exit hello script.</span></span> <span data-ttu-id="94ecf-195">hello terhelés generátor továbbra is toorun, de csak a meglévő bérlők számára.</span><span class="sxs-lookup"><span data-stu-id="94ecf-195">hello load generator will continue toorun, but only on existing tenants.</span></span>

## <a name="monitor-resource-usage-using-hello-azure-portal"></a><span data-ttu-id="94ecf-196">A figyelő Erőforrás kihasználtsága hello Azure-portál használatával</span><span class="sxs-lookup"><span data-stu-id="94ecf-196">Monitor resource usage using hello Azure portal</span></span>

<span data-ttu-id="94ecf-197">toomonitor hello Erőforrás kihasználtsága hello származó eredmények betöltése vonatkozik, nyissa meg a hello bérlői adatbázisokat tartalmazó hello portál toohello készlet:</span><span class="sxs-lookup"><span data-stu-id="94ecf-197">toomonitor hello resource usage that results from hello load being applied, open hello portal toohello pool containing hello tenant databases:</span></span>

1. <span data-ttu-id="94ecf-198">Nyissa meg hello [Azure-portálon](https://portal.azure.com) , és keresse meg a toohello *tenants1 -&lt;felhasználói&gt;*  kiszolgáló.</span><span class="sxs-lookup"><span data-stu-id="94ecf-198">Open hello [Azure portal](https://portal.azure.com) and browse toohello *tenants1-&lt;USER&gt;* server.</span></span>
1. <span data-ttu-id="94ecf-199">Görgessen lefelé, keresse meg a rugalmas készleteket, és kattintson a **Pool1** készletre.</span><span class="sxs-lookup"><span data-stu-id="94ecf-199">Scroll down and locate elastic pools and click **Pool1**.</span></span> <span data-ttu-id="94ecf-200">Ez a készlet eddig létrehozott összes hello bérlői adatbázisokat tartalmazza.</span><span class="sxs-lookup"><span data-stu-id="94ecf-200">This pool contains all hello tenant databases created so far.</span></span>

<span data-ttu-id="94ecf-201">Tekintse át az hello **rugalmas készlet figyelése** és **rugalmas adatbázis-figyelési** diagramokat.</span><span class="sxs-lookup"><span data-stu-id="94ecf-201">Observe hello **Elastic pool monitoring** and **Elastic database monitoring** charts.</span></span>

<span data-ttu-id="94ecf-202">hello készlet erőforrás-használat hello összesített adatbázis kihasználtsági hello készletben tárolt összes adatbázisra érvényes.</span><span class="sxs-lookup"><span data-stu-id="94ecf-202">hello pool's resource utilization is hello aggregate database utilization for all databases in hello pool.</span></span> <span data-ttu-id="94ecf-203">hello adatbázis diagram hello öt hottest adatbázisokat jeleníti meg:</span><span class="sxs-lookup"><span data-stu-id="94ecf-203">hello database chart shows hello five hottest databases:</span></span>

![](./media/sql-database-saas-tutorial-performance-monitoring/pool1.png)

<span data-ttu-id="94ecf-204">Nincsenek további adatbázisok hello készlet túl hello legjobb öt, hello készlet kihasználtsági jeleníti meg, amelyek nem kerülnek hello felső öt adatbázisok diagram tevékenység.</span><span class="sxs-lookup"><span data-stu-id="94ecf-204">Because there are additional databases in hello pool beyond hello top five, hello pool utilization shows activity that is not reflected in hello top five databases chart.</span></span> <span data-ttu-id="94ecf-205">További információért kattintson **adatbázis erőforrás-használat**:</span><span class="sxs-lookup"><span data-stu-id="94ecf-205">For additional details, click **Database Resource Utilization**:</span></span>

![](./media/sql-database-saas-tutorial-performance-monitoring/database-utilization.png)


## <a name="set-performance-alerts-on-hello-pool"></a><span data-ttu-id="94ecf-206">Állítson be hello címkészlet teljesítményével kapcsolatos riasztások</span><span class="sxs-lookup"><span data-stu-id="94ecf-206">Set performance alerts on hello pool</span></span>

<span data-ttu-id="94ecf-207">Állítson be egy riasztást, amely elindítja a hello címkészlet \>75 %-os kihasználtsága az alábbiak szerint:</span><span class="sxs-lookup"><span data-stu-id="94ecf-207">Set an alert on hello pool that triggers on \>75% utilization as follows:</span></span>

1. <span data-ttu-id="94ecf-208">Nyissa meg *Pool1* (a hello *tenants1 -\<felhasználói\>*  kiszolgáló) a hello [Azure-portálon](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="94ecf-208">Open *Pool1* (on hello *tenants1-\<user\>* server) in hello [Azure portal](https://portal.azure.com).</span></span>
1. <span data-ttu-id="94ecf-209">Kattintson a **Riasztási szabályok** elemre, majd a **+ Riasztás hozzáadása** gombra:</span><span class="sxs-lookup"><span data-stu-id="94ecf-209">Click **Alert Rules**, and then click **+ Add alert**:</span></span>

   ![riasztás hozzáadása](media/sql-database-saas-tutorial-performance-monitoring/add-alert.png)

1. <span data-ttu-id="94ecf-211">Adjon meg egy nevet, például: **Magas DTU**.</span><span class="sxs-lookup"><span data-stu-id="94ecf-211">Provide a name, such as **High DTU**,</span></span>
1. <span data-ttu-id="94ecf-212">Állítsa be a következő értékek hello:</span><span class="sxs-lookup"><span data-stu-id="94ecf-212">Set hello following values:</span></span>
   * <span data-ttu-id="94ecf-213">**Metrika = eDTU százalékos értéke**</span><span class="sxs-lookup"><span data-stu-id="94ecf-213">**Metric = eDTU percentage**</span></span>
   * <span data-ttu-id="94ecf-214">**Feltétel = nagyobb, mint**.</span><span class="sxs-lookup"><span data-stu-id="94ecf-214">**Condition = greater than**.</span></span>
   * <span data-ttu-id="94ecf-215">**Küszöbérték = 75**.</span><span class="sxs-lookup"><span data-stu-id="94ecf-215">**Threshold = 75**.</span></span>
   * <span data-ttu-id="94ecf-216">**Elmúlt 30 perc alatt hello időszak =**.</span><span class="sxs-lookup"><span data-stu-id="94ecf-216">**Period = Over hello last 30 minutes**.</span></span>
1. <span data-ttu-id="94ecf-217">Adja hozzá az e-mail cím toohello *további rendszergazda email(s)* mezőbe, majd kattintson a **OK**.</span><span class="sxs-lookup"><span data-stu-id="94ecf-217">Add an email address toohello *Additional administrator email(s)* box and click **OK**.</span></span>

   ![riasztás beállítása](media/sql-database-saas-tutorial-performance-monitoring/alert-rule.png)


## <a name="scale-up-a-busy-pool"></a><span data-ttu-id="94ecf-219">Foglalt készlet vertikális felskálázása</span><span class="sxs-lookup"><span data-stu-id="94ecf-219">Scale up a busy pool</span></span>

<span data-ttu-id="94ecf-220">Ha hello összesített terhelés növekszik, hogy ki hello készlet maxes, és eléri a 100 %-os edtu-k készlet toohello ponton, majd egyes adatbázis teljesítménye érintett, potenciálisan lelassulnak, ami lekérdezés válaszidők hello készletben tárolt összes adatbázisra érvényes.</span><span class="sxs-lookup"><span data-stu-id="94ecf-220">If hello aggregate load level increases on a pool toohello point that it maxes out hello pool and reaches 100% eDTU usage, then individual database performance is affected, potentially slowing query response times for all databases in hello pool.</span></span>

<span data-ttu-id="94ecf-221">**Rövid távú**, vertikális felskálázásával hello készlet tooprovide további erőforrások, vagy távolítsa el adatbázisok hello készletből (helyezni őket tooother-készletek, vagy hello készlet tooa önálló szolgáltatásréteg kívül).</span><span class="sxs-lookup"><span data-stu-id="94ecf-221">**Short term**, consider scaling up hello pool tooprovide additional resources, or removing databases from hello pool (moving them tooother pools, or out of hello pool tooa stand-alone service tier).</span></span>

<span data-ttu-id="94ecf-222">**Hosszabb távon**, a lekérdezések optimalizálja, vagy index használati tooimprove adatbázis teljesítménye.</span><span class="sxs-lookup"><span data-stu-id="94ecf-222">**Longer term**, consider optimizing queries or index usage tooimprove database performance.</span></span> <span data-ttu-id="94ecf-223">Attól függően, hogy hello alkalmazás érzékenységi tooperformance állít ki a bevált gyakorlat tooscale készlet mentése előtt 100 %-os edtu-k.</span><span class="sxs-lookup"><span data-stu-id="94ecf-223">Depending on hello application's sensitivity tooperformance issues its best practice tooscale a pool up before it reaches 100% eDTU usage.</span></span> <span data-ttu-id="94ecf-224">Használjon egy riasztási toowarn meg előre.</span><span class="sxs-lookup"><span data-stu-id="94ecf-224">Use an alert toowarn you in advance.</span></span>

<span data-ttu-id="94ecf-225">Egy foglalt készlet által növekvő hello terhelés hello készítő által előállított szimulálhatja.</span><span class="sxs-lookup"><span data-stu-id="94ecf-225">You can simulate a busy pool by increasing hello load produced by hello generator.</span></span> <span data-ttu-id="94ecf-226">Ami hello adatbázisok tooburst gyakrabban, és hosszabb, növekvő hello összesített terhelést hello készlet hello követelmények az egyes adatbázisok hello módosítása nélkül.</span><span class="sxs-lookup"><span data-stu-id="94ecf-226">Causing hello databases tooburst more frequently, and for longer, increasing hello aggregate load on hello pool without changing hello requirements of hello individual databases.</span></span> <span data-ttu-id="94ecf-227">Hello készlet vertikális felskálázásával könnyen történik hello portálon vagy a PowerShell.</span><span class="sxs-lookup"><span data-stu-id="94ecf-227">Scaling up hello pool is easily done in hello portal or from PowerShell.</span></span> <span data-ttu-id="94ecf-228">Ebben a gyakorlatban hello portált használja.</span><span class="sxs-lookup"><span data-stu-id="94ecf-228">This exercise uses hello portal.</span></span>

1. <span data-ttu-id="94ecf-229">Állítsa be *$DemoScenario* = **3**, _hosszabb és gyakoribb felszakadásáig adatbázisonként Generate terheléssel_ tooincrease hello intenzitása hello összesített terhelése hello készlet minden egyes adatbázis által megkövetelt hello csúcsterhelés módosítása nélkül.</span><span class="sxs-lookup"><span data-stu-id="94ecf-229">Set *$DemoScenario* = **3**, _Generate load with longer and more frequent bursts per database_ tooincrease hello intensity of hello aggregate load on hello pool without changing hello peak load required by each database.</span></span>
1. <span data-ttu-id="94ecf-230">Nyomja le az **F5** tooapply a terhelés tooall a bérlő adatbázisok.</span><span class="sxs-lookup"><span data-stu-id="94ecf-230">Press **F5** tooapply a load tooall your tenant databases.</span></span>

1. <span data-ttu-id="94ecf-231">Nyissa meg túl**Pool1** a hello Azure-portálon.</span><span class="sxs-lookup"><span data-stu-id="94ecf-231">Go too**Pool1** in hello Azure portal.</span></span>

<span data-ttu-id="94ecf-232">A figyelő hello készlet edtu-k hello felső diagram nőtt.</span><span class="sxs-lookup"><span data-stu-id="94ecf-232">Monitor hello increased pool eDTU usage on hello upper chart.</span></span> <span data-ttu-id="94ecf-233">Hello új magasabb terhelés tookick, néhány percet vesz igénybe, de gyorsan megtekintheti az hello készlet toohit maximális kihasználtsági start, és mivel hello terhelést az új mintát hello steadies, gyorsan tömbparaméter-típust használ hello készlet.</span><span class="sxs-lookup"><span data-stu-id="94ecf-233">It takes a few minutes for hello new higher load tookick in, but you should quickly see hello pool start toohit max utilization, and as hello load steadies into hello new pattern, it rapidly overloads hello pool.</span></span>

1. <span data-ttu-id="94ecf-234">hello készlet mentése tooscale kattintson **készlet beállítása** hello hello tetején **Pool1** lap.</span><span class="sxs-lookup"><span data-stu-id="94ecf-234">tooscale up hello pool, click **Configure pool** at hello top of hello **Pool1** page.</span></span>
1. <span data-ttu-id="94ecf-235">Hello beállítása **készlet edtu értékének** beállítás túl**100**.</span><span class="sxs-lookup"><span data-stu-id="94ecf-235">Adjust hello **Pool eDTU** setting too**100**.</span></span> <span data-ttu-id="94ecf-236">Hello készlet edtu értékének változtatja hello adatbázis-beállítások (amely továbbra is 50 edtu-k adatbázisonkénti maximális értéke).</span><span class="sxs-lookup"><span data-stu-id="94ecf-236">Changing hello pool eDTU does not change hello per-database settings (which is still 50 eDTU max per database).</span></span> <span data-ttu-id="94ecf-237">Hello hello jobb oldalán láthatja a hello adatbázis-beállítások **készlet beállítása** lap.</span><span class="sxs-lookup"><span data-stu-id="94ecf-237">You can see hello per-database settings on hello right side of hello **Configure pool** page.</span></span>
1. <span data-ttu-id="94ecf-238">Kattintson a **mentése** toosubmit hello kérelem tooscale hello készlet.</span><span class="sxs-lookup"><span data-stu-id="94ecf-238">Click **Save** toosubmit hello request tooscale hello pool.</span></span>

<span data-ttu-id="94ecf-239">Lépjen vissza túl**Pool1** > **áttekintése** tooview hello diagramok figyelését.</span><span class="sxs-lookup"><span data-stu-id="94ecf-239">Go back too**Pool1** > **Overview** tooview hello monitoring charts.</span></span> <span data-ttu-id="94ecf-240">Hello hatása hello készlet biztosítson több erőforrást (bár néhány adatbázisok és a véletlenszerű betöltése nem mindig könnyen toosee kétséget amíg nem futtat egy kis ideig) figyelése</span><span class="sxs-lookup"><span data-stu-id="94ecf-240">Monitor hello effect of providing hello pool with more resources (although with few databases and a randomized load it’s not always easy toosee conclusively until you run for some time).</span></span> <span data-ttu-id="94ecf-241">Amíg nézi hello diagramokon szerepel szem előtt, hogy 100 %-os felső hello a diagram most 100 edtu-k jelöli, amíg alacsonyabb diagram 100 %-os hello hello, továbbra is 50 edtu-k adatbázisonkénti maximális értéke továbbra is 50 edtu-k.</span><span class="sxs-lookup"><span data-stu-id="94ecf-241">While you are looking at hello charts bear in mind that 100% on hello upper chart now represents 100 eDTUs, while on hello lower chart 100% is still 50 eDTUs as hello per-database max is still 50 eDTUs.</span></span>

<span data-ttu-id="94ecf-242">Adatbázisok maradnak, online és a teljes elérhető hello folyamat során.</span><span class="sxs-lookup"><span data-stu-id="94ecf-242">Databases remain online and fully available throughout hello process.</span></span> <span data-ttu-id="94ecf-243">Hello: utolsó néhány percet, az egyes adatbázisok engedélyezték a hello új készlet edtu-ra, készen áll a toobe minden aktív kapcsolatok nem működik.</span><span class="sxs-lookup"><span data-stu-id="94ecf-243">At hello last moment as each database is ready toobe enabled with hello new pool eDTU, any active connections are broken.</span></span> <span data-ttu-id="94ecf-244">Alkalmazáskód kell mindig írható eldobott tooretry kapcsolatokat, és így újra fognak csatlakozni, toohello adatbázis hello kiterjesztett készletben.</span><span class="sxs-lookup"><span data-stu-id="94ecf-244">Application code should always be written tooretry dropped connections, and so will reconnect toohello database in hello scaled-up pool.</span></span>

## <a name="load-balance-between-pools"></a><span data-ttu-id="94ecf-245">Készletek közötti terheléselosztás</span><span class="sxs-lookup"><span data-stu-id="94ecf-245">Load balance between pools</span></span>

<span data-ttu-id="94ecf-246">Egy alternatív tooscaling mentése hello készlet, hozzon létre egy második címkészletet, és adatbázisok áthelyezi toobalance hello betöltése hello között két rendelkezik.</span><span class="sxs-lookup"><span data-stu-id="94ecf-246">As an alternative tooscaling up hello pool, create a second pool and move databases into it toobalance hello load between hello two pools.</span></span> <span data-ttu-id="94ecf-247">a hello új készlet létrehozása a kell toodo először hello hello ugyanarra a kiszolgálóra.</span><span class="sxs-lookup"><span data-stu-id="94ecf-247">toodo this hello new pool must be created on hello same server as hello first.</span></span>

1. <span data-ttu-id="94ecf-248">A hello [Azure-portálon](https://portal.azure.com), nyissa meg hello **tenants1 -&lt;felhasználói&gt;**  kiszolgáló.</span><span class="sxs-lookup"><span data-stu-id="94ecf-248">In hello [Azure portal](https://portal.azure.com), open hello **tenants1-&lt;USER&gt;** server.</span></span>
1. <span data-ttu-id="94ecf-249">Kattintson a **+ új készletet** toocreate egy készlet aktuális hello-kiszolgálón.</span><span class="sxs-lookup"><span data-stu-id="94ecf-249">Click **+ New pool** toocreate a pool on hello current server.</span></span>
1. <span data-ttu-id="94ecf-250">A hello **rugalmas adatbáziskészlet** sablont:</span><span class="sxs-lookup"><span data-stu-id="94ecf-250">On hello **Elastic database pool** template:</span></span>

    1. <span data-ttu-id="94ecf-251">Állítsa be **neve** túl*Pool2*.</span><span class="sxs-lookup"><span data-stu-id="94ecf-251">Set **Name** too*Pool2*.</span></span>
    1. <span data-ttu-id="94ecf-252">IP-címek, hello hagyja **szabványos készlet**.</span><span class="sxs-lookup"><span data-stu-id="94ecf-252">Leave hello pricing tier as **Standard Pool**.</span></span>
    1. <span data-ttu-id="94ecf-253">Kattintson a **Készlet beállítása** elemre.</span><span class="sxs-lookup"><span data-stu-id="94ecf-253">Click **Configure pool**,</span></span>
    1. <span data-ttu-id="94ecf-254">Állítsa be **készlet edtu értékének** túl*50 eDTU*.</span><span class="sxs-lookup"><span data-stu-id="94ecf-254">Set **Pool eDTU** too*50 eDTU*.</span></span>
    1. <span data-ttu-id="94ecf-255">Kattintson a **adatbázisok hozzáadása** toosee túl felvehető hello kiszolgálón az adatbázisok listája*Pool2*.</span><span class="sxs-lookup"><span data-stu-id="94ecf-255">Click **Add databases** toosee a list of databases on hello server that can be added too*Pool2*.</span></span>
    1. <span data-ttu-id="94ecf-256">Válasszon ki minden 10 adatbázisok toomove ezek toohello új készletet, és kattintson **válasszon**.</span><span class="sxs-lookup"><span data-stu-id="94ecf-256">Select any 10 databases toomove these toohello new pool, and then click **Select**.</span></span> <span data-ttu-id="94ecf-257">Ha már futott hello terhelés generátor, hello szolgáltatást már tudja, hogy a teljesítmény profil egy hello alapértelmezett 50 eDTU méreténél nagyobb készletet igényel, és azt javasolja, hogy egy 100 eDTU-beállítás kezdve.</span><span class="sxs-lookup"><span data-stu-id="94ecf-257">If you've been running hello load generator, hello service already knows that your performance profile requires a larger pool than hello default 50 eDTU size and recommends starting with a 100 eDTU setting.</span></span>

    ![A javaslat](media/sql-database-saas-tutorial-performance-monitoring/configure-pool.png)

    1. <span data-ttu-id="94ecf-259">Ebben az oktatóanyagban hagyja hello alapértelmezett 50 edtu-k, és kattintson a **válasszon** újra.</span><span class="sxs-lookup"><span data-stu-id="94ecf-259">For this tutorial, leave hello default at 50 eDTUs, and click **Select** again.</span></span>
    1. <span data-ttu-id="94ecf-260">Válassza ki **OK** toocreate hello új készletet és toomove hello szövegrészt adatbázisokat kiválasztva bele.</span><span class="sxs-lookup"><span data-stu-id="94ecf-260">Select **OK** toocreate hello new pool and toomove hello selected databases into it.</span></span>

<span data-ttu-id="94ecf-261">Hello készlet létrehozása és hello adatbázisok áthelyezése néhány percet vesz igénybe.</span><span class="sxs-lookup"><span data-stu-id="94ecf-261">Creating hello pool and moving hello databases takes a few minutes.</span></span> <span data-ttu-id="94ecf-262">Adatbázisok áthelyezése maradjanak az online és elérhető-e teljes mértékben amíg hello utolsó néhány percet, mivel ekkor a nyitott kapcsolatokat be van zárva.</span><span class="sxs-lookup"><span data-stu-id="94ecf-262">As databases are moved they remain online and fully accessible until hello very last moment, at which point any open connections are closed.</span></span> <span data-ttu-id="94ecf-263">Mindaddig, amíg még néhány újrapróbálkozási logika, az ügyfelek majd toohello adatbázis hello új készletben fog csatlakozni.</span><span class="sxs-lookup"><span data-stu-id="94ecf-263">As long as you have some retry logic, clients will then connect toohello database in hello new pool.</span></span>

<span data-ttu-id="94ecf-264">Keresse meg a túl**Pool2** (a hello *tenants1* kiszolgáló) tooopen készlet hello és figyelemmel kísérni a teljesítményét.</span><span class="sxs-lookup"><span data-stu-id="94ecf-264">Browse too**Pool2** (on hello *tenants1* server) tooopen hello pool and monitor its performance.</span></span> <span data-ttu-id="94ecf-265">Ha nem látja, várjon, amíg hello új alkalmazáskészlet toocomplete kiépítését.</span><span class="sxs-lookup"><span data-stu-id="94ecf-265">If you don't see it, wait for provisioning of hello new pool toocomplete.</span></span>

<span data-ttu-id="94ecf-266">Most már megtekintheti, hogy az erőforrás-használat *Pool1* csökkent, és hogy *Pool2* hasonlóan most betöltve.</span><span class="sxs-lookup"><span data-stu-id="94ecf-266">You now see that resource usage on *Pool1* has dropped and that *Pool2* is now similarly loaded.</span></span>

## <a name="manage-performance-of-a-single-database"></a><span data-ttu-id="94ecf-267">Egy önálló adatbázis teljesítményének kezelése</span><span class="sxs-lookup"><span data-stu-id="94ecf-267">Manage performance of a single database</span></span>

<span data-ttu-id="94ecf-268">Ha egy önálló adatbázis egy alkalmazáskészlet a tartós nagy terhelés, attól függően, hogy a tárolókészlet konfigurációját hello, előfordulhat, hogy az egyes toodominate hello erőforrások hello készletben, és hatással lehet más adatbázisok.</span><span class="sxs-lookup"><span data-stu-id="94ecf-268">If a single database in a pool experiences a sustained high load, depending on hello pool configuration, it may tend toodominate hello resources in hello pool and impact other databases.</span></span> <span data-ttu-id="94ecf-269">Ha hello tevékenység valószínűleg toocontinue egy kis ideig, hello adatbázis is lehet ideiglenesen hello készlet kívül.</span><span class="sxs-lookup"><span data-stu-id="94ecf-269">If hello activity is likely toocontinue for some time, hello database can be temporarily moved out of hello pool.</span></span> <span data-ttu-id="94ecf-270">Ez lehetővé teszi, hogy hello adatbázis toohave hello van szüksége, és korlátozása, akkor a hello más adatbázisok további erőforrásokat.</span><span class="sxs-lookup"><span data-stu-id="94ecf-270">This allows hello database toohave hello extra resources it needs, and isolates it from hello other databases.</span></span>

<span data-ttu-id="94ecf-271">Ebben a gyakorlatban a nagy terhelés tapasztal, amikor a jegyek nyissa meg a népszerű energiaoptimalizálást egyszerre céljából Contoso energiaoptimalizálást egyszerre Hall hello hatásának szimulálja.</span><span class="sxs-lookup"><span data-stu-id="94ecf-271">This exercise simulates hello effect of Contoso Concert Hall experiencing a high load when tickets go on sale for a popular concert.</span></span>

1. <span data-ttu-id="94ecf-272">Nyissa meg hello... \\ *Bemutató-PerformanceMonitoringAndManagement.ps1* parancsfájl.</span><span class="sxs-lookup"><span data-stu-id="94ecf-272">Open hello …\\*Demo-PerformanceMonitoringAndManagement.ps1* script.</span></span>
1. <span data-ttu-id="94ecf-273">Állítsa be a **$DemoScenario = 5, Normál terhelés létrehozása, valamint magasabb terhelés létrehozása egyetlen bérlő számára (kb. 95 DTU)** értéket.</span><span class="sxs-lookup"><span data-stu-id="94ecf-273">Set **$DemoScenario = 5, Generate a normal load plus a high load on a single tenant (approx. 95 DTU).**</span></span>
1. <span data-ttu-id="94ecf-274">Állítsa be a **$SingleTenantDatabaseName = contosoconcerthall**értéket.</span><span class="sxs-lookup"><span data-stu-id="94ecf-274">Set **$SingleTenantDatabaseName = contosoconcerthall**</span></span>
1. <span data-ttu-id="94ecf-275">Végrehajtás hello parancsfájl használatával **F5**.</span><span class="sxs-lookup"><span data-stu-id="94ecf-275">Execute hello script using **F5**.</span></span>


1. <span data-ttu-id="94ecf-276">A hello [Azure-portálon](https://portal.azure.com) nyissa meg a **Pool1**.</span><span class="sxs-lookup"><span data-stu-id="94ecf-276">In hello [Azure portal](https://portal.azure.com) open **Pool1**.</span></span>
1. <span data-ttu-id="94ecf-277">Vizsgálja meg a hello **rugalmas készlet figyelése** diagram, és keresse meg növelni hello készlet edtu-k használata.</span><span class="sxs-lookup"><span data-stu-id="94ecf-277">Inspect hello **Elastic pool monitoring** chart and look for hello increased pool eDTU usage.</span></span> <span data-ttu-id="94ecf-278">Egy-két percen, miután hello nagyobb terheléshez a tookick kell kezdődnie, és gyorsan megtekintheti az, hogy hello készlet találatok kihasználtsága 100 %.</span><span class="sxs-lookup"><span data-stu-id="94ecf-278">After a minute or two, hello higher load should start tookick in, and you should quickly see that hello pool hits 100% utilization.</span></span>
1. <span data-ttu-id="94ecf-279">Vizsgálja meg a hello **rugalmas adatbázis-figyelési** megjelenítési megjelenítheti az hello hottest adatbázisok hello az elmúlt egy órában.</span><span class="sxs-lookup"><span data-stu-id="94ecf-279">Inspect hello **Elastic database monitoring** display which shows hello hottest databases in hello past hour.</span></span> <span data-ttu-id="94ecf-280">Hello *contosoconcerthall* adatbázis hamarosan megjelenjen-e rendelkezésre álló hello öt hottest adatbázisok.</span><span class="sxs-lookup"><span data-stu-id="94ecf-280">hello *contosoconcerthall* database should soon appear as one of hello five hottest databases.</span></span>
1. <span data-ttu-id="94ecf-281">**Kattintson a hello rugalmas adatbázis figyelési** **diagram** és hello nyílik **adatbázis erőforrás-használat** lap, ahol figyelheti hello adatbázisok bármelyikét.</span><span class="sxs-lookup"><span data-stu-id="94ecf-281">**Click on hello Elastic database monitoring** **chart** and it opens hello **Database Resource Utilization** page where you can monitor any of hello databases.</span></span> <span data-ttu-id="94ecf-282">Ez lehetővé elszigetelése hello hello megjelenítése *contosoconcerthall* adatbázis.</span><span class="sxs-lookup"><span data-stu-id="94ecf-282">This lets you isolate hello display for hello *contosoconcerthall* database.</span></span>
1. <span data-ttu-id="94ecf-283">Az adatbázisok hello listából kattintson **contosoconcerthall**.</span><span class="sxs-lookup"><span data-stu-id="94ecf-283">From hello list of databases, click **contosoconcerthall**.</span></span>
1. <span data-ttu-id="94ecf-284">Kattintson a **(skála dtu-k) Tarifacsomagot** tooopen hello **konfigurálása a** lap egy önálló teljesítményszintet hello adatbázis beállítására.</span><span class="sxs-lookup"><span data-stu-id="94ecf-284">Click **Pricing Tier (scale DTUs)** tooopen hello **Configure performance** page where you can set a stand-alone performance level for hello database.</span></span>
1. <span data-ttu-id="94ecf-285">Kattintson a hello **szabványos** lap tooopen hello skálázási beállításai a hello Standard csomagra.</span><span class="sxs-lookup"><span data-stu-id="94ecf-285">Click on hello **Standard** tab tooopen hello scale options in hello Standard tier.</span></span>
1. <span data-ttu-id="94ecf-286">Csúsztassa be a hello **DTU csúszkát** tooright tooselect **100** dtu-inak száma.</span><span class="sxs-lookup"><span data-stu-id="94ecf-286">Slide hello **DTU slider** tooright tooselect **100** DTUs.</span></span> <span data-ttu-id="94ecf-287">Megjegyzés: Ez megfelel a szolgáltatási cél toohello, **S3**.</span><span class="sxs-lookup"><span data-stu-id="94ecf-287">Note this corresponds toohello service objective, **S3**.</span></span>
1. <span data-ttu-id="94ecf-288">Kattintson a **alkalmaz** toomove hello adatbázis hello készlet kívül, és tegye a *Standard S3* adatbázis.</span><span class="sxs-lookup"><span data-stu-id="94ecf-288">Click **Apply** toomove hello database out of hello pool and make it a *Standard S3* database.</span></span>
1. <span data-ttu-id="94ecf-289">Skálázás után végezze el, a figyelő hello hatással hello contosoconcerthall adatbázis és Pool1 hello rugalmas készlet és az adatbázis panelen.</span><span class="sxs-lookup"><span data-stu-id="94ecf-289">Once scaling is complete, monitor hello effect on hello contosoconcerthall database and Pool1 on hello elastic pool and database blades.</span></span>

<span data-ttu-id="94ecf-290">Ha nagy terhelés hello hello contosoconcerthall adatbázis enyhül juttassa vissza az toohello készlet tooreduce költségeit.</span><span class="sxs-lookup"><span data-stu-id="94ecf-290">Once hello high load on hello contosoconcerthall database subsides you should promptly return it toohello pool tooreduce its cost.</span></span> <span data-ttu-id="94ecf-291">Ha a nem egyértelmű, hogy történjen amikor, beállíthat egy riasztás hello adatbázison, amely akkor indul el, amikor hello adatbázis-alá csökken a DTU-használatát maximális hello készletében.</span><span class="sxs-lookup"><span data-stu-id="94ecf-291">If it’s unclear when that will happen you could set an alert on hello database that will trigger when its DTU usage drops below hello per-database max on hello pool.</span></span> <span data-ttu-id="94ecf-292">Egy adatbázis készletbe történő áthelyezésének menetét az 5. gyakorlat írja le.</span><span class="sxs-lookup"><span data-stu-id="94ecf-292">Moving a database into a pool is described in exercise 5.</span></span>

## <a name="other-performance-management-patterns"></a><span data-ttu-id="94ecf-293">Egyéb teljesítménykezelési minták</span><span class="sxs-lookup"><span data-stu-id="94ecf-293">Other Performance Management Patterns</span></span>

<span data-ttu-id="94ecf-294">**Preemptív skálázás** hello gyakorlatban fenti ahol megismerte hogyan tooscale egy elkülönített adatbázist, akkor tudtak melyik adatbázis toolook számára.</span><span class="sxs-lookup"><span data-stu-id="94ecf-294">**Pre-emptive scaling** In hello exercise above where you explored how tooscale an isolated database, you knew which database toolook for.</span></span> <span data-ttu-id="94ecf-295">Ha a Contoso energiaoptimalizálást egyszerre Hall hello felügyeleti kellett hello közelgő jegy értékesítési Wingtips, hello adatbázis sikerült kikerült hello készlet pre-emptively.</span><span class="sxs-lookup"><span data-stu-id="94ecf-295">If hello management of Contoso Concert Hall had informed Wingtips of hello impending ticket sale, hello database could have been moved out of hello pool pre-emptively.</span></span> <span data-ttu-id="94ecf-296">Ellenkező esetben azt lenne valószínűleg szükség hello készlet vagy hello adatbázis toospot riasztást mi zajlik.</span><span class="sxs-lookup"><span data-stu-id="94ecf-296">Otherwise, it would likely have required an alert on hello pool or hello database toospot what was happening.</span></span> <span data-ttu-id="94ecf-297">Általában csak akkor érdemes a hello a toolearn más bérlők hello készlet panaszos csökkent teljesítményt.</span><span class="sxs-lookup"><span data-stu-id="94ecf-297">You wouldn’t want toolearn about this from hello other tenants in hello pool complaining of degraded performance.</span></span> <span data-ttu-id="94ecf-298">És ha hello bérlői képes előre jelezni, mennyi ideig van szükségük további erőforrásokat hozzon létre egy Azure Automation runbook toomove hello adatbázist kívül hello készlet majd vissza a megadott ütemezés szerint.</span><span class="sxs-lookup"><span data-stu-id="94ecf-298">And if hello tenant can predict how long they will need additional resources you can set up an Azure Automation runbook toomove hello database out of hello pool and then back in again on a defined schedule.</span></span>

<span data-ttu-id="94ecf-299">**Bérlői önkiszolgáló skálázás** mivel a skálázás feladat könnyen hello management API szolgáltatáson keresztül, egyszerűen létrehozhatja hello képességét tooscale bérlői adatbázisok a bérlő számára is elérhető alkalmazásba, és a Szolgáltatottszoftver-szolgáltatásban szolgáltatásként ajánlja.</span><span class="sxs-lookup"><span data-stu-id="94ecf-299">**Tenant self-service scaling** Because scaling is a task easily called via hello management API, you can easily build hello ability tooscale tenant databases into your tenant-facing application, and offer it as a feature of your SaaS service.</span></span> <span data-ttu-id="94ecf-300">Például hogy a bérlők skálázás fel és le lehet, hogy közvetlenül kapcsolódó self-administer tootheir számlázási!</span><span class="sxs-lookup"><span data-stu-id="94ecf-300">For example, let tenants self-administer scaling up and down, perhaps linked directly tootheir billing!</span></span>

<span data-ttu-id="94ecf-301">**Egy készlet felfelé és lefelé méretezést tesz egy ütemezés toomatch használati minták**</span><span class="sxs-lookup"><span data-stu-id="94ecf-301">**Scaling a pool up and down on a schedule toomatch usage patterns**</span></span>

<span data-ttu-id="94ecf-302">Összesített bérlők követi, kiszámítható használati minták, ahol használható Azure Automation tooscale készlet felfelé és lefelé ütemezés szerint.</span><span class="sxs-lookup"><span data-stu-id="94ecf-302">Where aggregate tenant usage follows predictable usage patterns, you can use Azure Automation tooscale a pool up and down on a schedule.</span></span> <span data-ttu-id="94ecf-303">Például egy készletet hétköznapokon este 6 után leskálázhat, reggel 6 előtt pedig felskálázhat, ha tudja, hogy a két időpont között csökken az erőforrásigény.</span><span class="sxs-lookup"><span data-stu-id="94ecf-303">For example, scale a pool down after 6pm and up again before 6am on weekdays when you know there is a drop in resource requirements.</span></span>



## <a name="next-steps"></a><span data-ttu-id="94ecf-304">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="94ecf-304">Next steps</span></span>

<span data-ttu-id="94ecf-305">Ezen oktatóanyag segítségével megtanulhatja a következőket:</span><span class="sxs-lookup"><span data-stu-id="94ecf-305">In this tutorial you learn how to:</span></span>

> [!div class="checklist"]
> * <span data-ttu-id="94ecf-306">A megadott terheléselosztási generátor futtatásával hello bérlői adatbázisok használati szimulálása</span><span class="sxs-lookup"><span data-stu-id="94ecf-306">Simulate usage on hello tenant databases by running a provided load generator</span></span>
> * <span data-ttu-id="94ecf-307">A figyelő hello bérlői adatbázisok azok megfelelnek a terhelés toohello növekedése</span><span class="sxs-lookup"><span data-stu-id="94ecf-307">Monitor hello tenant databases as they respond toohello increase in load</span></span>
> * <span data-ttu-id="94ecf-308">Vertikális felskálázás hello válasz toohello nagyobb adatbázis-terhelésnek a rugalmas készlet</span><span class="sxs-lookup"><span data-stu-id="94ecf-308">Scale up hello Elastic pool in response toohello increased database load</span></span>
> * <span data-ttu-id="94ecf-309">Egy második rugalmas készlet tooload egyenleg hello adatbázis tevékenység kiépítése</span><span class="sxs-lookup"><span data-stu-id="94ecf-309">Provision a second Elastic pool tooload balance hello database activity</span></span>

[<span data-ttu-id="94ecf-310">Egyetlen bérlő visszaállítása – oktatóanyag</span><span class="sxs-lookup"><span data-stu-id="94ecf-310">Restore a single tenant tutorial</span></span>](sql-database-saas-tutorial-restore-single-tenant.md)


## <a name="additional-resources"></a><span data-ttu-id="94ecf-311">További források</span><span class="sxs-lookup"><span data-stu-id="94ecf-311">Additional resources</span></span>

* <span data-ttu-id="94ecf-312">További [oktatóprogramot kínál, amelyek épül hello Wingtip SaaS-alkalmazás központi telepítése](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)</span><span class="sxs-lookup"><span data-stu-id="94ecf-312">Additional [tutorials that build upon hello Wingtip SaaS application deployment](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)</span></span>
* [<span data-ttu-id="94ecf-313">Rugalmas SQL-készletek</span><span class="sxs-lookup"><span data-stu-id="94ecf-313">SQL Elastic pools</span></span>](sql-database-elastic-pool.md)
* [<span data-ttu-id="94ecf-314">Azure Automation</span><span class="sxs-lookup"><span data-stu-id="94ecf-314">Azure automation</span></span>](../automation/automation-intro.md)
* <span data-ttu-id="94ecf-315">[Log Analytics](sql-database-saas-tutorial-log-analytics.md) – A Log Analytics beállítását és használatát ismertető oktatóanyag</span><span class="sxs-lookup"><span data-stu-id="94ecf-315">[Log Analytics](sql-database-saas-tutorial-log-analytics.md) - Setting up and using Log Analytics tutorial</span></span>
