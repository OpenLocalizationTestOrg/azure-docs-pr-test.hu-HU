---
title: "aaaAzure SQL-adatbázis teljesítményének hangolása útmutató |} Microsoft Docs"
description: "Ez a cikk segítségével meghatározhatja, hogy melyik szolgáltatás réteg toochoose az alkalmazáshoz. Azt is javasolja módon tootune az alkalmazás tooget hello a legtöbbet tudja kihozni az Azure SQL Database."
services: sql-database
documentationcenter: na
author: CarlRabeler
manager: jhubbard
editor: 
ms.assetid: dd8d95fa-24b2-4233-b3f1-8e8952a7a22b
ms.service: sql-database
ms.custom: monitor & tune
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-management
ms.date: 02/09/2017
ms.author: carlrab
ms.openlocfilehash: 2699f755391e94ab488ac1e6acedd30f8aec4488
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/06/2017
---
# <a name="tuning-performance-in-azure-sql-database"></a><span data-ttu-id="2f662-104">Az Azure SQL-adatbázis teljesítményének hangolása</span><span class="sxs-lookup"><span data-stu-id="2f662-104">Tuning performance in Azure SQL Database</span></span>

<span data-ttu-id="2f662-105">Az Azure SQL Database is tartalmaz [javaslatok](sql-database-advisor.md) , hogy az adatbázis teljesítményét tooimprove is használhatja, vagy hagyhatja, hogy az Azure SQL Database [tooyour alkalmazás automatikusan igazítja](sql-database-automatic-tuning.md) és a módosítások alkalmazásához a számítási feladatok teljesítményére, amely javítja.</span><span class="sxs-lookup"><span data-stu-id="2f662-105">Azure SQL Database provides [recommendations](sql-database-advisor.md) that you can use tooimprove performance of your database, or you can let Azure SQL Database [automatically adapt tooyour application](sql-database-automatic-tuning.md) and apply changes that will improve performance of your workload.</span></span>

<span data-ttu-id="2f662-106">Az Ön nem rendelkezik megfelelő javaslatokkal és teljesítménnyel kapcsolatos problémák továbbra is fennáll, használhatja a következő módszerek tooimprove teljesítményének hello:</span><span class="sxs-lookup"><span data-stu-id="2f662-106">In you don't have any applicable recommendations, and you still have performance issues, you might use hello following methods tooimprove performances:</span></span>
1. <span data-ttu-id="2f662-107">Növelje [szolgáltatásszintek](sql-database-service-tiers.md) , és adja meg a további erőforrások tooyour adatbázis.</span><span class="sxs-lookup"><span data-stu-id="2f662-107">Increase [service tiers](sql-database-service-tiers.md) and provide more resources tooyour database.</span></span>
2. <span data-ttu-id="2f662-108">Az alkalmazás hangolás, és alkalmazni, néhány ajánlott eljárás, amely növelheti a teljesítményt.</span><span class="sxs-lookup"><span data-stu-id="2f662-108">Tune your application and apply some best practices that can improve performance.</span></span> 
3. <span data-ttu-id="2f662-109">Hello adatbázis hangolására indexek és a lekérdezések toomore hatékonyan dolgozni adatokkal történő módosításával.</span><span class="sxs-lookup"><span data-stu-id="2f662-109">Tune hello database by changing indexes and queries toomore efficiently work with data.</span></span>

<span data-ttu-id="2f662-110">Ezek a kézi módszert, mert szüksége toodecide mi [szolgáltatásszintek](sql-database-service-tiers.md) kellene kiválasztania vagy toorewrite alkalmazás vagy az adatbázis-kód szükséges, és deply hello módosításokat.</span><span class="sxs-lookup"><span data-stu-id="2f662-110">These are manual methods because you need toodecide what [service tiers](sql-database-service-tiers.md) you would choose or you would need toorewrite application or database code and deply hello changes.</span></span>

## <a name="increasing-performance-tier-of-your-database"></a><span data-ttu-id="2f662-111">Az adatbázis teljesítményének szintjének növelése</span><span class="sxs-lookup"><span data-stu-id="2f662-111">Increasing performance tier of your database</span></span>

<span data-ttu-id="2f662-112">Az Azure SQL Database kínál négy [szolgáltatásszintek](sql-database-service-tiers.md) , amelyek közül választhat: Basic, Standard, Premium és prémium RS (teljesítményének mérése történik az adatbázis-átviteli egységek, vagy [dtu-k](sql-database-what-is-a-dtu.md).</span><span class="sxs-lookup"><span data-stu-id="2f662-112">Azure SQL Database offers four [service tiers](sql-database-service-tiers.md) that you can choose from: Basic, Standard, Premium, and Premium RS (performance is measured in database throughput units, or [DTUs](sql-database-what-is-a-dtu.md).</span></span> <span data-ttu-id="2f662-113">Egyes szolgáltatásszinteken szigorúan elkülöníti hello erőforrásokat, hogy használható-e az SQL-adatbázis, és biztosítja, hogy a szolgáltatási szint kiszámítható teljesítményt.</span><span class="sxs-lookup"><span data-stu-id="2f662-113">Each service tier strictly isolates hello resources that your SQL database can use, and guarantees predictable performance for that service level.</span></span> <span data-ttu-id="2f662-114">Ez a cikk útmutatást, amelyek segítségével válassza ki az alkalmazás hello szolgáltatási rétegben fel.</span><span class="sxs-lookup"><span data-stu-id="2f662-114">In this article, we offer guidance that can help you choose hello service tier for your application.</span></span> <span data-ttu-id="2f662-115">Azt is ismertetik, hogy az alkalmazás tooget hello a legtöbbet tudja kihozni az Azure SQL Database észlelheti.</span><span class="sxs-lookup"><span data-stu-id="2f662-115">We also discuss ways that you can tune your application tooget hello most from Azure SQL Database.</span></span>

> [!NOTE]
> <span data-ttu-id="2f662-116">Ez a cikk foglalkozik, a teljesítmény útmutatást az önálló adatbázisok Azure SQL-adatbázisban.</span><span class="sxs-lookup"><span data-stu-id="2f662-116">This article focuses on performance guidance for single databases in Azure SQL Database.</span></span> <span data-ttu-id="2f662-117">Teljesítmény útmutató kapcsolódó tooelastic-készletek: [rugalmas készletek ára és teljesítménye szempontjai](sql-database-elastic-pool-guidance.md).</span><span class="sxs-lookup"><span data-stu-id="2f662-117">For performance guidance related tooelastic pools, see [Price and performance considerations for elastic pools](sql-database-elastic-pool-guidance.md).</span></span> <span data-ttu-id="2f662-118">Vegye figyelembe azonban, hogy ez a cikk toodatabases rugalmas készlethez javaslatait hangolása hello számos, és alkalmazhatunk hasonló teljesítmény előnyök.</span><span class="sxs-lookup"><span data-stu-id="2f662-118">Note, though, that you can apply many of hello tuning recommendations in this article toodatabases in an elastic pool, and get similar performance benefits.</span></span>
> 

* <span data-ttu-id="2f662-119">**Alapszintű**: hello alapszintű service réteg ajánlatokat a megfelelő teljesítmény kiszámíthatóságot az egyes adatbázisok, akár óráig óra.</span><span class="sxs-lookup"><span data-stu-id="2f662-119">**Basic**: hello Basic service tier offers good performance predictability for each database, hour over hour.</span></span> <span data-ttu-id="2f662-120">Egy alapszintű adatbázis elegendő erőforrással támogatják a több egyidejű kérelmet nem rendelkező kisméretű adatbázisban a megfelelő teljesítmény.</span><span class="sxs-lookup"><span data-stu-id="2f662-120">In a Basic database, sufficient resources support good performance in a small database that doesn't have multiple concurrent requests.</span></span> <span data-ttu-id="2f662-121">Ha alapszintű szolgáltatásréteg szeretné használni a tipikus használati esetek a következők:</span><span class="sxs-lookup"><span data-stu-id="2f662-121">Typical use cases when you would use Basic service tier are:</span></span>
  * <span data-ttu-id="2f662-122">**Ön éppen használatának megkezdéséhez az Azure SQL Database**.</span><span class="sxs-lookup"><span data-stu-id="2f662-122">**You're just getting started with Azure SQL Database**.</span></span> <span data-ttu-id="2f662-123">Alkalmazások, amelyek a fejlesztési gyakran nagy teljesítményű szintek nem szükséges.</span><span class="sxs-lookup"><span data-stu-id="2f662-123">Applications that are in development often don't need high-performance levels.</span></span> <span data-ttu-id="2f662-124">Alapszintű adatbázisok adatbázis fejlesztési vagy tesztelési, egy alacsony ár ponton ideális környezetben futnak.</span><span class="sxs-lookup"><span data-stu-id="2f662-124">Basic databases are an ideal environment for database development or testing, at a low price point.</span></span>
  * <span data-ttu-id="2f662-125">**Egyetlen felhasználó van egy adatbázis**.</span><span class="sxs-lookup"><span data-stu-id="2f662-125">**You have a database with a single user**.</span></span> <span data-ttu-id="2f662-126">Alkalmazásokat, amelyek általában egy-egy felhasználóhoz társítása egy adatbázis nem rendelkezik magas egyidejűségi és teljesítménybeli követelményeit.</span><span class="sxs-lookup"><span data-stu-id="2f662-126">Applications that associate a single user with a database typically don’t have high concurrency and performance requirements.</span></span> <span data-ttu-id="2f662-127">Ezeket az alkalmazásokat a hello alapvető szolgáltatásszint-zel.</span><span class="sxs-lookup"><span data-stu-id="2f662-127">These applications are candidates for hello Basic service tier.</span></span>
* <span data-ttu-id="2f662-128">**Standard**: hello szabványos szolgáltatásréteg kínál javítja a teljesítményt, kiszámíthatóságot és adatbázisok esetén, amelyek több egyidejű kérés, például a munkacsoport és webalkalmazások kiváló teljesítményt nyújt.</span><span class="sxs-lookup"><span data-stu-id="2f662-128">**Standard**: hello Standard service tier offers improved performance predictability and provides good performance for databases that have multiple concurrent requests, like workgroup and web applications.</span></span> <span data-ttu-id="2f662-129">Ha úgy dönt, a Standard service réteg adatbázis, az adatbázis-alkalmazás, kiszámítható teljesítményt alapján méretét percben percben.</span><span class="sxs-lookup"><span data-stu-id="2f662-129">When you choose a Standard service tier database, you can size your database application based on predictable performance, minute over minute.</span></span>
  * <span data-ttu-id="2f662-130">**Az adatbázis még több egyidejű kérelmet**.</span><span class="sxs-lookup"><span data-stu-id="2f662-130">**Your database has multiple concurrent requests**.</span></span> <span data-ttu-id="2f662-131">Alkalmazások, amelyeket a szolgáltatás több felhasználó általában egyszerre kell magasabb teljesítményszintet.</span><span class="sxs-lookup"><span data-stu-id="2f662-131">Applications that service more than one user at a time usually need higher performance levels.</span></span> <span data-ttu-id="2f662-132">Például munkacsoportokhoz vagy webalkalmazásokhoz az alkalmazásokat, amelyek alacsony toomedium IO forgalom követelményeinek támogatása több egyidejű lekérdezések esetén hello szabványos szolgáltatási réteg esetén használható jól az.</span><span class="sxs-lookup"><span data-stu-id="2f662-132">For example, workgroup or web applications that have low toomedium IO traffic requirements supporting multiple concurrent queries are good candidates for hello Standard service tier.</span></span>
* <span data-ttu-id="2f662-133">**Prémium szintű**: hello prémium szolgáltatásszintet kiszámítható teljesítményt biztosít, az egyes Premium adatbázisok második keresztül.</span><span class="sxs-lookup"><span data-stu-id="2f662-133">**Premium**: hello Premium service tier provides predictable performance, second over second, for each Premium database.</span></span> <span data-ttu-id="2f662-134">Ha úgy dönt, hogy hello prémium szolgáltatásszintet, az adatbázis-alkalmazás az adatbázishoz tartozó hello csúcsterhelés alapján méretét.</span><span class="sxs-lookup"><span data-stu-id="2f662-134">When you choose hello Premium service tier, you can size your database application based on hello peak load for that database.</span></span> <span data-ttu-id="2f662-135">hello terv teljesítmény variancia azt okozhatja kis lekérdezések tootake hosszabb, mint a késésre érzékeny műveletek várt esetekben eltávolítja.</span><span class="sxs-lookup"><span data-stu-id="2f662-135">hello plan removes cases in which performance variance can cause small queries tootake longer than expected in latency-sensitive operations.</span></span> <span data-ttu-id="2f662-136">Ez a modell jelentősen egyszerűsítheti hello fejlesztési és a termék érvényesítési ciklusok toomake erős utasítások csúcs erőforrásigényeivel, a teljesítmény variancia vagy a lekérdezés-késleltetés igénylő alkalmazásokhoz.</span><span class="sxs-lookup"><span data-stu-id="2f662-136">This model can greatly simplify hello development and product validation cycles for applications that need toomake strong statements about peak resource needs, performance variance, or query latency.</span></span> <span data-ttu-id="2f662-137">Prémium szintű szolgáltatási réteg használata legtöbbször egy vagy több, a következő jellemzőkkel rendelkezik:</span><span class="sxs-lookup"><span data-stu-id="2f662-137">Most Premium service tier use cases have one or more of these characteristics:</span></span>
  * <span data-ttu-id="2f662-138">**Magas csúcsterhelés**.</span><span class="sxs-lookup"><span data-stu-id="2f662-138">**High peak load**.</span></span> <span data-ttu-id="2f662-139">Az alkalmazás jelentős Processzor, a memória vagy a bemeneti/kimeneti (I/O) toocomplete egy dedikált, nagy teljesítményű szintet igényel, a műveleteket.</span><span class="sxs-lookup"><span data-stu-id="2f662-139">An application that requires substantial CPU, memory, or input/output (I/O) toocomplete its operations requires a dedicated, high-performance level.</span></span> <span data-ttu-id="2f662-140">Például egy adatbázis-művelet tooconsume ismert több processzormag hosszú ideig hello prémium szolgáltatásszintet jelöltségét ellenőrző.</span><span class="sxs-lookup"><span data-stu-id="2f662-140">For example, a database operation known tooconsume several CPU cores for an extended time is a candidate for hello Premium service tier.</span></span>
  * <span data-ttu-id="2f662-141">**Sok egyidejű kérés**.</span><span class="sxs-lookup"><span data-stu-id="2f662-141">**Many concurrent requests**.</span></span> <span data-ttu-id="2f662-142">Egyes adatbázis-alkalmazások például szolgáltatás sok egyidejű kérés, amikor a szolgáltató egy webhely, amely rendelkezik egy nagy forgalma.</span><span class="sxs-lookup"><span data-stu-id="2f662-142">Some database applications service many concurrent requests, for example, when serving a website that has a high traffic volume.</span></span> <span data-ttu-id="2f662-143">Basic és Standard szolgáltatásszintek egyidejű kérelmek / adatbázis hello számának korlátozása.</span><span class="sxs-lookup"><span data-stu-id="2f662-143">Basic and Standard service tiers limit hello number of concurrent requests per database.</span></span> <span data-ttu-id="2f662-144">Több kapcsolatot igénylő alkalmazások toochoose egy megfelelő foglalási méret toohandle hello kérelmek maximális számát szükséges lenne szükség.</span><span class="sxs-lookup"><span data-stu-id="2f662-144">Applications that require more connections would need toochoose an appropriate reservation size toohandle hello maximum number of needed requests.</span></span>
  * <span data-ttu-id="2f662-145">**Kis késés**.</span><span class="sxs-lookup"><span data-stu-id="2f662-145">**Low latency**.</span></span> <span data-ttu-id="2f662-146">Egyes alkalmazások tooguarantee hello adatbázis válaszára minimális idő van szükség.</span><span class="sxs-lookup"><span data-stu-id="2f662-146">Some applications need tooguarantee a response from hello database in minimal time.</span></span> <span data-ttu-id="2f662-147">Egy adott tárolt eljárás hívása esetén, egy szélesebb körű felhasználói művelet részeként, lehetséges, hogy egy követelmény toohave egy adott hívás visszatérési legfeljebb 20 ezredmásodpercben, 99 százalékához kiindulási hello idő.</span><span class="sxs-lookup"><span data-stu-id="2f662-147">If a specific stored procedure is called as part of a broader customer operation, you might have a requirement toohave a return from that call in no more than 20 milliseconds, 99 percent of hello time.</span></span> <span data-ttu-id="2f662-148">Ilyen típusú alkalmazás számos előnyt biztosít az hello prémium szolgáltatásszintet érhető el róla, hogy hello szükséges számítástechnikai power toomake.</span><span class="sxs-lookup"><span data-stu-id="2f662-148">This type of application benefits from hello Premium service tier, toomake sure that hello required computing power is available.</span></span>
* <span data-ttu-id="2f662-149">**Prémium szintű RS**: prémium RS réteg hello célja az IO-igényes munkaterhelések nem igénylő hello legmagasabb rendelkezésre állását garantálja.</span><span class="sxs-lookup"><span data-stu-id="2f662-149">**Premium RS**: hello Premium RS tier is designed for IO-intensive workloads that do not require hello highest availability guarantees.</span></span> <span data-ttu-id="2f662-150">Például nagy teljesítményű munkaterhelések, vagy egy analitikai munkaterhelés, ahol hello adatbázis nincs rekord hello rendszer tesztelése.</span><span class="sxs-lookup"><span data-stu-id="2f662-150">Examples include testing high-performance workloads, or an analytical workload where hello database is not hello system of record.</span></span>

<span data-ttu-id="2f662-151">hello szolgáltatási szint, amelyekre szüksége van az SQL-adatbázis hello csúcs Adatbetöltési követelményeinek minden erőforrás dimenzió függ.</span><span class="sxs-lookup"><span data-stu-id="2f662-151">hello service level that you need for your SQL database depends on hello peak load requirements for each resource dimension.</span></span> <span data-ttu-id="2f662-152">Egyes alkalmazások egyetlen trivial méretű használata, de más erőforrások jelentős követelmények vonatkoznak.</span><span class="sxs-lookup"><span data-stu-id="2f662-152">Some applications use a trivial amount of a single resource, but have significant requirements for other resources.</span></span>

### <a name="service-tier-capabilities-and-limits"></a><span data-ttu-id="2f662-153">Szolgáltatás szolgáltatásszintek lehetőségei és korlátai</span><span class="sxs-lookup"><span data-stu-id="2f662-153">Service tier capabilities and limits</span></span>

<span data-ttu-id="2f662-154">: Az egyes szolgáltatásszinteken be hello teljesítményszint szükséges, így csak a szükséges kapacitást hello hello rugalmasságot toopay kell.</span><span class="sxs-lookup"><span data-stu-id="2f662-154">At each service tier, you set hello performance level, so you have hello flexibility toopay only for hello capacity you need.</span></span> <span data-ttu-id="2f662-155">Is [a kapacitás](sql-database-service-tiers.md), felfelé vagy lefelé, mint a munkaterhelési változások.</span><span class="sxs-lookup"><span data-stu-id="2f662-155">You can [adjust capacity](sql-database-service-tiers.md), up or down, as workload changes.</span></span> <span data-ttu-id="2f662-156">Például ha hello vissza-iskolai bevásárlási időszak alatt az adatbázisban munkaterhelés magas, növelheti hello teljesítményszintet hello adatbázis beállított ideje, július szeptember keresztül.</span><span class="sxs-lookup"><span data-stu-id="2f662-156">For example, if your database workload is high during hello back-to-school shopping season, you might increase hello performance level for hello database for a set time, July through September.</span></span> <span data-ttu-id="2f662-157">A maximális időszak végén csökkentheti.</span><span class="sxs-lookup"><span data-stu-id="2f662-157">You can reduce it when your peak season ends.</span></span> <span data-ttu-id="2f662-158">Minimalizálhatja a felhő környezet toohello szezonalitás értékének üzleti optimalizálásával fizet.</span><span class="sxs-lookup"><span data-stu-id="2f662-158">You can minimize what you pay by optimizing your cloud environment toohello seasonality of your business.</span></span> <span data-ttu-id="2f662-159">Ez a modell szoftver termék kiadási ciklusok esetén is működik.</span><span class="sxs-lookup"><span data-stu-id="2f662-159">This model also works well for software product release cycles.</span></span> <span data-ttu-id="2f662-160">A teszt csoport kapacitás foglal le, amíg a teszt futtatása, és a kapacitás majd engedje a tesztelés befejezése.</span><span class="sxs-lookup"><span data-stu-id="2f662-160">A test team might allocate capacity while it does test runs, and then release that capacity when they finish testing.</span></span> <span data-ttu-id="2f662-161">A kapacitás kérelem modellben kell fizetnie kapacitás szükség lenne rá, és előfordulhat, hogy ritkán használt dedikált erőforrások kell.</span><span class="sxs-lookup"><span data-stu-id="2f662-161">In a capacity request model, you pay for capacity as you need it, and avoid spending on dedicated resources that you might rarely use.</span></span>

### <a name="why-service-tiers"></a><span data-ttu-id="2f662-162">Miért szolgáltatásszintek?</span><span class="sxs-lookup"><span data-stu-id="2f662-162">Why service tiers?</span></span>
<span data-ttu-id="2f662-163">Bár egyes adatbázis munkaterhelések eltérőek lehetnek, hello szolgáltatásszintek célja tooprovide teljesítmény kiszámíthatóságot teljesítmény különböző szinteken.</span><span class="sxs-lookup"><span data-stu-id="2f662-163">Although each database workload can differ, hello purpose of service tiers is tooprovide performance predictability at various performance levels.</span></span> <span data-ttu-id="2f662-164">Nagy méretű adatbázist erőforrás-követelményekkel rendelkező ügyfelek a több dedikált számítógépes környezetekben is működik.</span><span class="sxs-lookup"><span data-stu-id="2f662-164">Customers with large-scale database resource requirements can work in a more dedicated computing environment.</span></span>

## <a name="tune-your-application"></a><span data-ttu-id="2f662-165">Az alkalmazás hangolása</span><span class="sxs-lookup"><span data-stu-id="2f662-165">Tune your application</span></span>
<span data-ttu-id="2f662-166">A hagyományos helyszínen SQL Server a kezdeti kapacitástervezés hello folyamat gyakran elkülönül egy alkalmazást éles környezetben futó hello folyamat.</span><span class="sxs-lookup"><span data-stu-id="2f662-166">In traditional on-premises SQL Server, hello process of initial capacity planning often is separated from hello process of running an application in production.</span></span> <span data-ttu-id="2f662-167">Először hardver- és termék licencet vásárolt, és ezt követően teljesítményhangolás történik.</span><span class="sxs-lookup"><span data-stu-id="2f662-167">Hardware and product licenses are purchased first, and performance tuning is done afterward.</span></span> <span data-ttu-id="2f662-168">Azure SQL Database használata esetén a rendszer az alkalmazás fut, és azt hangolása egy jó ötlet toointerweave hello folyamat.</span><span class="sxs-lookup"><span data-stu-id="2f662-168">When you use Azure SQL Database, it's a good idea toointerweave hello process of running an application and tuning it.</span></span> <span data-ttu-id="2f662-169">Az igény szerinti kapacitást fizető hello modelljében észlelheti a az alkalmazás toouse hello minimális szükséges erőforrásokat, a jövőbeli növekedésre tervek az alkalmazás, amelyek gyakran helytelen Találgatások alapján hardveren elhelyezésétől helyett.</span><span class="sxs-lookup"><span data-stu-id="2f662-169">With hello model of paying for capacity on demand, you can tune your application toouse hello minimum resources needed now, instead of overprovisioning on hardware based on guesses of future growth plans for an application, which often are incorrect.</span></span> <span data-ttu-id="2f662-170">Egyes ügyfelek előfordulhat, hogy nem tootune kérelmet és helyette kiválasztható toooverprovision hardver-erőforrások.</span><span class="sxs-lookup"><span data-stu-id="2f662-170">Some customers might choose not tootune an application, and instead choose toooverprovision hardware resources.</span></span> <span data-ttu-id="2f662-171">Ez a megközelítés előfordulhat, hogy lehet hasznos, ha nem szeretné, hogy toochange a kulcsfontosságú alkalmazások foglalt időszakon belül.</span><span class="sxs-lookup"><span data-stu-id="2f662-171">This approach might be a good idea if you don't want toochange a key application during a busy period.</span></span> <span data-ttu-id="2f662-172">De, egy alkalmazás hangolása érdekében minimalizálhatja erőforrás-követelmények és alacsonyabb havi számla hello szolgáltatási szinteket az Azure SQL Database használatakor.</span><span class="sxs-lookup"><span data-stu-id="2f662-172">But, tuning an application can minimize resource requirements and lower monthly bills when you use hello service tiers in Azure SQL Database.</span></span>

### <a name="application-characteristics"></a><span data-ttu-id="2f662-173">Alkalmazás jellemzői</span><span class="sxs-lookup"><span data-stu-id="2f662-173">Application characteristics</span></span>
<span data-ttu-id="2f662-174">Annak ellenére, hogy az Azure SQL Database szolgáltatási szinteket tervezett tooimprove teljesítmény stabilitás és kiszámíthatóságot az alkalmazáshoz, néhány ajánlott eljárás segítségével finomhangolhatják a az alkalmazás toobetter előnyeit hello erőforrásokat érhet el egy teljesítményszint szükséges.</span><span class="sxs-lookup"><span data-stu-id="2f662-174">Although Azure SQL Database service tiers are designed tooimprove performance stability and predictability for an application, some best practices can help you tune your application toobetter take advantage of hello resources at a performance level.</span></span> <span data-ttu-id="2f662-175">Jóllehet számos alkalmazás teljesítménynövekedéshez, egyszerűen tooa váltás magasabb teljesítményszintre vagy szolgáltatás réteg, néhány további, a szolgáltatás magasabb szintű toobenefit hangolása alkalmazások szükséges.</span><span class="sxs-lookup"><span data-stu-id="2f662-175">Although many applications have significant performance gains simply by switching tooa higher performance level or service tier, some applications need additional tuning toobenefit from a higher level of service.</span></span> <span data-ttu-id="2f662-176">A nagyobb teljesítmény elérése érdekében fontolja meg a további alkalmazás hangolása alkalmazásokat, amelyek a következő jellemzőkkel rendelkezik:</span><span class="sxs-lookup"><span data-stu-id="2f662-176">For increased performance, consider additional application tuning for applications that have these characteristics:</span></span>

* <span data-ttu-id="2f662-177">**Az alkalmazásokat, amelyek teljesítménycsökkenést "chatty" viselkedés miatt**.</span><span class="sxs-lookup"><span data-stu-id="2f662-177">**Applications that have slow performance because of "chatty" behavior**.</span></span> <span data-ttu-id="2f662-178">Chatty alkalmazások, amelyek bizalmas toonetwork késése túl sok adatelérési műveletek ellenőrizze.</span><span class="sxs-lookup"><span data-stu-id="2f662-178">Chatty applications make excessive data access operations that are sensitive toonetwork latency.</span></span> <span data-ttu-id="2f662-179">Szükség lehet toomodify az ilyen típusú alkalmazások tooreduce hello száma data access műveletek toohello SQL-adatbázis.</span><span class="sxs-lookup"><span data-stu-id="2f662-179">You might need toomodify these kinds of applications tooreduce hello number of data access operations toohello SQL database.</span></span> <span data-ttu-id="2f662-180">Például az alkalmazások teljesítményének javíthatja technikák alkalmi lekérdezések kötegelés vagy áthelyezése hello lekérdezi toostored eljárások segítségével.</span><span class="sxs-lookup"><span data-stu-id="2f662-180">For example, you might improve application performance by using techniques like batching ad-hoc queries or moving hello queries toostored procedures.</span></span> <span data-ttu-id="2f662-181">További információkért lásd: [Batch-lekérdezések](#batch-queries).</span><span class="sxs-lookup"><span data-stu-id="2f662-181">For more information, see [Batch queries](#batch-queries).</span></span>
* <span data-ttu-id="2f662-182">**Egy számításigényes munkaterhelést, amely által egy teljes egyetlen számítógépen nem támogatott az adatbázisok**.</span><span class="sxs-lookup"><span data-stu-id="2f662-182">**Databases with an intensive workload that can't be supported by an entire single machine**.</span></span> <span data-ttu-id="2f662-183">Adatbázisok, amelyek mérete meghaladja a legmagasabb prémium teljesítményszintet hello hello erőforrásainak előnye származhat hello munkaterhelés kiterjesztése.</span><span class="sxs-lookup"><span data-stu-id="2f662-183">Databases that exceed hello resources of hello highest Premium performance level might benefit from scaling out hello workload.</span></span> <span data-ttu-id="2f662-184">További információkért lásd: [adatbázisok közötti horizontális](#cross-database-sharding) és [működési particionálás](#functional-partitioning).</span><span class="sxs-lookup"><span data-stu-id="2f662-184">For more information, see [Cross-database sharding](#cross-database-sharding) and [Functional partitioning](#functional-partitioning).</span></span>
* <span data-ttu-id="2f662-185">**Az alkalmazásokat, amelyek optimálisnál lekérdezések**.</span><span class="sxs-lookup"><span data-stu-id="2f662-185">**Applications that have suboptimal queries**.</span></span> <span data-ttu-id="2f662-186">Alkalmazások, különösen a hello az adatelérési réteg, rosszul hangolt lekérdezések, előfordulhat, hogy nem tudják igénybe venni egy magasabb teljesítményszintre.</span><span class="sxs-lookup"><span data-stu-id="2f662-186">Applications, especially those in hello data access layer, that have poorly tuned queries might not benefit from a higher performance level.</span></span> <span data-ttu-id="2f662-187">Ez magában foglalja a lekérdezések, amely nem rendelkezik a WHERE záradék, a hiányzó indexek vagy statisztika elavult.</span><span class="sxs-lookup"><span data-stu-id="2f662-187">This includes queries that lack a WHERE clause, have missing indexes, or have outdated statistics.</span></span> <span data-ttu-id="2f662-188">Ezek az alkalmazások ki a normál lekérdezési teljesítményének hangolása módszerek előnyeit.</span><span class="sxs-lookup"><span data-stu-id="2f662-188">These applications benefit from standard query performance-tuning techniques.</span></span> <span data-ttu-id="2f662-189">További információkért lásd: [hiányzó indexek](#identifying-and-adding-missing-indexes) és [hangolása és leképezésére lekérdezése](#query-tuning-and-hinting).</span><span class="sxs-lookup"><span data-stu-id="2f662-189">For more information, see [Missing indexes](#identifying-and-adding-missing-indexes) and [Query tuning and hinting](#query-tuning-and-hinting).</span></span>
* <span data-ttu-id="2f662-190">**Az alkalmazásokat, amelyek optimálisnál adatok hozzáférési tervezési**.</span><span class="sxs-lookup"><span data-stu-id="2f662-190">**Applications that have suboptimal data access design**.</span></span> <span data-ttu-id="2f662-191">Az alkalmazásokat, amelyek rejlő adatok hozzáférési párhuzamossági problémák, például deadlocking, előfordulhat, hogy nem tudják igénybe venni egy magasabb teljesítményszintre.</span><span class="sxs-lookup"><span data-stu-id="2f662-191">Applications that have inherent data access concurrency issues, for example deadlocking, might not benefit from a higher performance level.</span></span> <span data-ttu-id="2f662-192">Érdemes csökkenteni az adatváltások elleni hello Azure SQL Database által hello ügyféloldali gyorsítótárazási adatok hello szolgáltatás Azure gyorsítótárazása az vagy egy másik gyorsítótárazási technológiát.</span><span class="sxs-lookup"><span data-stu-id="2f662-192">Consider reducing round trips against hello Azure SQL Database by caching data on hello client side with hello Azure Caching service or another caching technology.</span></span> <span data-ttu-id="2f662-193">Lásd: [alkalmazás réteg gyorsítótárazás](#application-tier-caching).</span><span class="sxs-lookup"><span data-stu-id="2f662-193">See [Application tier caching](#application-tier-caching).</span></span>

## <a name="tune-your-database"></a><span data-ttu-id="2f662-194">Az adatbázis hangolása</span><span class="sxs-lookup"><span data-stu-id="2f662-194">Tune your database</span></span>
<span data-ttu-id="2f662-195">Ebben a szakaszban úgy tekintünk, hogy tootune Azure SQL Database toogain hello legjobb teljesítmény érdekében használjon az alkalmazáshoz, és futtassa hello legalacsonyabb szintű lehetséges teljesítményének néhány technikák is.</span><span class="sxs-lookup"><span data-stu-id="2f662-195">In this section, we look at some techniques that you can use tootune Azure SQL Database toogain hello best performance for your application and run it at hello lowest possible performance level.</span></span> <span data-ttu-id="2f662-196">Néhány, az alábbi eljárások egyezik, ajánlott eljárások hangolása hagyományos SQL Server, de más adott tooAzure SQL-adatbázis.</span><span class="sxs-lookup"><span data-stu-id="2f662-196">Some of these techniques match traditional SQL Server tuning best practices, but others are specific tooAzure SQL Database.</span></span> <span data-ttu-id="2f662-197">Bizonyos esetekben megvizsgálja egy adatbázis toofind területek toofurther hangolási hello felhasznált erőforrásokat, és a hagyományos SQL Server technikák toowork az Azure SQL Database kiterjesztése.</span><span class="sxs-lookup"><span data-stu-id="2f662-197">In some cases, you can examine hello consumed resources for a database toofind areas toofurther tune and extend traditional SQL Server techniques toowork in Azure SQL Database.</span></span>

### <a name="identify-performance-issues-using-azure-portal"></a><span data-ttu-id="2f662-198">Azure-portál használatával teljesítményproblémák azonosítása</span><span class="sxs-lookup"><span data-stu-id="2f662-198">Identify performance issues using Azure portal</span></span>
<span data-ttu-id="2f662-199">hello Azure-portálon az eszközök a következő hello segítségével elemezheti és hárítsa el az SQL database teljesítménnyel kapcsolatos problémák:</span><span class="sxs-lookup"><span data-stu-id="2f662-199">hello following tools in hello Azure portal can help you analyze and fix performance issues with your SQL database:</span></span>

* [<span data-ttu-id="2f662-200">Lekérdezési terheléselemző</span><span class="sxs-lookup"><span data-stu-id="2f662-200">Query Performance Insight</span></span>](sql-database-query-performance.md)
* [<span data-ttu-id="2f662-201">SQL Database Advisor</span><span class="sxs-lookup"><span data-stu-id="2f662-201">SQL Database Advisor</span></span>](sql-database-advisor.md)

<span data-ttu-id="2f662-202">hello Azure portálon találhat további információt mindkét eszköz, és hogyan toouse őket.</span><span class="sxs-lookup"><span data-stu-id="2f662-202">hello Azure portal has more information about both of these tools and how toouse them.</span></span> <span data-ttu-id="2f662-203">tooefficiently diagnosztizálhatja és problémák megoldása, ajánlott hello eszközök hello Azure-portálon az első meg.</span><span class="sxs-lookup"><span data-stu-id="2f662-203">tooefficiently diagnose and correct problems, we recommend that you first try hello tools in hello Azure portal.</span></span> <span data-ttu-id="2f662-204">Azt javasoljuk, hogy használja-e, amely arról lesz szó ezt követően a hiányzó indexek és bizonyos esetekben a lekérdezés hangolási módszerek hangolása hello manuális.</span><span class="sxs-lookup"><span data-stu-id="2f662-204">We recommend that you use hello manual tuning approaches that we discuss next, for missing indexes and query tuning, in special cases.</span></span>

<span data-ttu-id="2f662-205">További információ az Azure SQL Database problémákat azonosítása a [teljesítményfigyelés](sql-database-single-database-monitor.md) cikk.</span><span class="sxs-lookup"><span data-stu-id="2f662-205">Find more information about identifying issues in Azure SQL Database on [performance monitoring](sql-database-single-database-monitor.md) article.</span></span>

### <a name="identifying-and-adding-missing-indexes"></a><span data-ttu-id="2f662-206">Azonosítja és a hiányzó indexek hozzáadása</span><span class="sxs-lookup"><span data-stu-id="2f662-206">Identifying and adding missing indexes</span></span>
<span data-ttu-id="2f662-207">Az OLTP adatbázis teljesítményének gyakori probléma toohello fizikai adatbázis tervezési vonatkozik.</span><span class="sxs-lookup"><span data-stu-id="2f662-207">A common problem in OLTP database performance relates toohello physical database design.</span></span> <span data-ttu-id="2f662-208">Gyakran adatbázis-sémák tervezhetők meg és tesztelése (vagy a terhelés vagy adatmennyiség) léptékű nélkül.</span><span class="sxs-lookup"><span data-stu-id="2f662-208">Often, database schemas are designed and shipped without testing at scale (either in load or in data volume).</span></span> <span data-ttu-id="2f662-209">Sajnos lekérdezéstervet hello teljesítményének előfordulhat, hogy elfogadható kis méretű, de jelentősen csökkentheti a termelési szint az adatkötetek alatt.</span><span class="sxs-lookup"><span data-stu-id="2f662-209">Unfortunately, hello performance of a query plan might be acceptable on a small scale but degrade substantially under production-level data volumes.</span></span> <span data-ttu-id="2f662-210">hello leggyakoribb probléma forrása megfelelő indexek toosatisfy szűrők és egyéb korlátozások lekérdezésben hello hiánya.</span><span class="sxs-lookup"><span data-stu-id="2f662-210">hello most common source of this issue is hello lack of appropriate indexes toosatisfy filters or other restrictions in a query.</span></span> <span data-ttu-id="2f662-211">Gyakran hiányzó indexek jegyzékfájlokat táblázatként vizsgálata, ha egy index seek volt elegendő.</span><span class="sxs-lookup"><span data-stu-id="2f662-211">Often, missing indexes manifests as a table scan when an index seek could suffice.</span></span>

<span data-ttu-id="2f662-212">Ebben a példában hello kijelölt lekérdezésterv a vizsgálat használja, ha a keresés elegendő lenne:</span><span class="sxs-lookup"><span data-stu-id="2f662-212">In this example, hello selected query plan uses a scan when a seek would suffice:</span></span>

    DROP TABLE dbo.missingindex;
    CREATE TABLE dbo.missingindex (col1 INT IDENTITY PRIMARY KEY, col2 INT);
    DECLARE @a int = 0;
    SET NOCOUNT ON;
    BEGIN TRANSACTION
    WHILE @a < 20000
    BEGIN
        INSERT INTO dbo.missingindex(col2) VALUES (@a);
        SET @a += 1;
    END
    COMMIT TRANSACTION;
    GO
    SELECT m1.col1
    FROM dbo.missingindex m1 INNER JOIN dbo.missingindex m2 ON(m1.col1=m2.col1)
    WHERE m1.col2 = 4;

![A hiányzó indexek lekérdezéstervet](./media/sql-database-performance-guidance/query_plan_missing_indexes.png)

<span data-ttu-id="2f662-214">Az Azure SQL Database segítségével, keresése és a javítás közös hiányzó index feltételek.</span><span class="sxs-lookup"><span data-stu-id="2f662-214">Azure SQL Database can help you find and fix common missing index conditions.</span></span> <span data-ttu-id="2f662-215">Tekintse meg az Azure SQL Database beépített dinamikus felügyeleti nézetek index jelentősen csökkenne meg hello becsült költség toorun lekérdezés lekérdezés fordítások.</span><span class="sxs-lookup"><span data-stu-id="2f662-215">DMVs that are built into Azure SQL Database look at query compilations in which an index would significantly reduce hello estimated cost toorun a query.</span></span> <span data-ttu-id="2f662-216">Lekérdezés végrehajtása során SQL-adatbázis nyomon követi, milyen gyakran minden lekérdezésterv végrehajtja a rendszer, és nyomon követi hello becsült lekérdezésterv és hello hello közötti résnek kezdőlapja egy ahol már létezett, hogy az index.</span><span class="sxs-lookup"><span data-stu-id="2f662-216">During query execution, SQL Database tracks how often each query plan is executed, and tracks hello estimated gap between hello executing query plan and hello imagined one where that index existed.</span></span> <span data-ttu-id="2f662-217">A dinamikus felügyeleti nézetek tooquickly becslés milyen módosításokat tooyour fizikai adatbázis tervezési javíthatja az adatbázis és a valós alkalmazások és szolgáltatások teljes munkaterhelés költségét is használhatja.</span><span class="sxs-lookup"><span data-stu-id="2f662-217">You can use these DMVs tooquickly guess which changes tooyour physical database design might improve overall workload cost for a database and its real workload.</span></span>

<span data-ttu-id="2f662-218">A lekérdezés tooevaluate lehetőségeket kínál a hiányzó indexek használhatja:</span><span class="sxs-lookup"><span data-stu-id="2f662-218">You can use this query tooevaluate potential missing indexes:</span></span>

    SELECT CONVERT (varchar, getdate(), 126) AS runtime,
        mig.index_group_handle, mid.index_handle,
        CONVERT (decimal (28,1), migs.avg_total_user_cost * migs.avg_user_impact *
                (migs.user_seeks + migs.user_scans)) AS improvement_measure,
        'CREATE INDEX missing_index_' + CONVERT (varchar, mig.index_group_handle) + '_' +
                  CONVERT (varchar, mid.index_handle) + ' ON ' + mid.statement + '
                  (' + ISNULL (mid.equality_columns,'')
                  + CASE WHEN mid.equality_columns IS NOT NULL
                              AND mid.inequality_columns IS NOT NULL
                         THEN ',' ELSE '' END + ISNULL (mid.inequality_columns, '')
                  + ')'
                  + ISNULL (' INCLUDE (' + mid.included_columns + ')', '') AS create_index_statement,
        migs.*,
        mid.database_id,
        mid.[object_id]
    FROM sys.dm_db_missing_index_groups AS mig
    INNER JOIN sys.dm_db_missing_index_group_stats AS migs
        ON migs.group_handle = mig.index_group_handle
    INNER JOIN sys.dm_db_missing_index_details AS mid
        ON mig.index_handle = mid.index_handle
    ORDER BY migs.avg_total_user_cost * migs.avg_user_impact * (migs.user_seeks + migs.user_scans) DESC

<span data-ttu-id="2f662-219">Ebben a példában hello lekérdezés eredményezett, ez a javaslat:</span><span class="sxs-lookup"><span data-stu-id="2f662-219">In this example, hello query resulted in this suggestion:</span></span>

    CREATE INDEX missing_index_5006_5005 ON [dbo].[missingindex] ([col2])  

<span data-ttu-id="2f662-220">Létrehozását követően, hogy ugyanazon SELECT utasítás szerzi másik csomagot, amely használ, a keresés nem egy vizsgálatot, és végrehajtja hatékonyabban hello terv:</span><span class="sxs-lookup"><span data-stu-id="2f662-220">After it's created, that same SELECT statement picks a different plan, which uses a seek instead of a scan, and then executes hello plan more efficiently:</span></span>

![Javított indexű lekérdezéstervet](./media/sql-database-performance-guidance/query_plan_corrected_indexes.png)

<span data-ttu-id="2f662-222">hello kulcs insight adott hello egy megosztott i/o-kapacitás, a hagyományos rendszer korlátozottabb, mint az egy dedikált kiszolgálói számítógép.</span><span class="sxs-lookup"><span data-stu-id="2f662-222">hello key insight is that hello I/O capacity of a shared, commodity system is more limited than that of a dedicated server machine.</span></span> <span data-ttu-id="2f662-223">Nincs a prémium minimalizálja a szükségtelen i/o tootake legjobban hello rendszerben az egyes teljesítményszintjének hello Azure SQL Database szolgáltatási szinteket hello DTU.</span><span class="sxs-lookup"><span data-stu-id="2f662-223">There's a premium on minimizing unnecessary I/O tootake maximum advantage of hello system in hello DTU of each performance level of hello Azure SQL Database service tiers.</span></span> <span data-ttu-id="2f662-224">Megfelelő fizikai adatbázis tervezési döntések ütköznek azokkal is jelentősen javítása egyéni lekérdezések hello késését, javításához hello átviteli sebességgel egyidejű kérelmek skálázási egység kezeli, illetve hello költségek szükséges toosatisfy hello lekérdezés minimalizálása érdekében.</span><span class="sxs-lookup"><span data-stu-id="2f662-224">Appropriate physical database design choices can significantly improve hello latency for individual queries, improve hello throughput of concurrent requests handled per scale unit, and minimize hello costs required toosatisfy hello query.</span></span> <span data-ttu-id="2f662-225">Hiányzó index dinamikus felügyeleti nézetek hello kapcsolatos további információkért lásd: [sys.dm_db_missing_index_details](https://msdn.microsoft.com/library/ms345434.aspx).</span><span class="sxs-lookup"><span data-stu-id="2f662-225">For more information about hello missing index DMVs, see [sys.dm_db_missing_index_details](https://msdn.microsoft.com/library/ms345434.aspx).</span></span>

### <a name="query-tuning-and-hinting"></a><span data-ttu-id="2f662-226">Lekérdezés hangolása és leképezésére</span><span class="sxs-lookup"><span data-stu-id="2f662-226">Query tuning and hinting</span></span>
<span data-ttu-id="2f662-227">az Azure SQL Database hello lekérdezésoptimalizáló hasonló toohello hagyományos SQL Server lekérdezésoptimalizáló.</span><span class="sxs-lookup"><span data-stu-id="2f662-227">hello query optimizer in Azure SQL Database is similar toohello traditional SQL Server query optimizer.</span></span> <span data-ttu-id="2f662-228">A legtöbb hello gyakorlati tanácsok a lekérdezések és hello lekérdezésoptimalizáló modell korlátozásai is mintafelismerési ismertetése hello hangolása tooAzure SQL-adatbázis alkalmazni.</span><span class="sxs-lookup"><span data-stu-id="2f662-228">Most of hello best practices for tuning queries and understanding hello reasoning model limitations for hello query optimizer also apply tooAzure SQL Database.</span></span> <span data-ttu-id="2f662-229">Ha az Azure SQL Database lekérdezések hangolás kaphat hello további előnye, hogy csökkenti a összesített erőforrás iránti igények kielégítése érdekében.</span><span class="sxs-lookup"><span data-stu-id="2f662-229">If you tune queries in Azure SQL Database, you might get hello additional benefit of reducing aggregate resource demands.</span></span> <span data-ttu-id="2f662-230">Az alkalmazás képes toorun mint untuned egyenértékű alacsonyabb költségekkel lehet, mert azt egy alacsonyabb teljesítményszintre futtatható.</span><span class="sxs-lookup"><span data-stu-id="2f662-230">Your application might be able toorun at a lower cost than an untuned equivalent because it can run at a lower performance level.</span></span>

<span data-ttu-id="2f662-231">Példa, amely az SQL Server általános, és amely akkor is érvényes SQL-adatbázis tooAzure, hogy hogyan hello lekérdezési paraméterek optimalizáló "bitaláírásait".</span><span class="sxs-lookup"><span data-stu-id="2f662-231">An example that is common in SQL Server and which also applies tooAzure SQL Database is how hello query optimizer "sniffs" parameters.</span></span> <span data-ttu-id="2f662-232">Fordításkor hello lekérdezésoptimalizáló hello aktuális értéke, amely egy paraméter toodetermine kiértékeli, hogy hozhat létre a több optimális készíteni.</span><span class="sxs-lookup"><span data-stu-id="2f662-232">During compilation, hello query optimizer evaluates hello current value of a parameter toodetermine whether it can generate a more optimal query plan.</span></span> <span data-ttu-id="2f662-233">Bár ezt a stratégiát gyakran vezethet, amely jelentősen gyorsabb, mint a ismert paraméterértékek nélkül lefordított tervek tooa lekérdezésterv, jelenleg működik imperfectly mind az SQL Server és az Azure SQL-adatbázis.</span><span class="sxs-lookup"><span data-stu-id="2f662-233">Although this strategy often can lead tooa query plan that is significantly faster than a plan compiled without known parameter values, currently it works imperfectly both in SQL Server and in Azure SQL Database.</span></span> <span data-ttu-id="2f662-234">Néha a hello paraméter nem felszippantásra, és néha hello paraméter felszippantásra van, de hello előállított terv az optimálisnál gyengébb hello paraméterértékeket a munkaterhelés a teljes készlete esetében.</span><span class="sxs-lookup"><span data-stu-id="2f662-234">Sometimes hello parameter is not sniffed, and sometimes hello parameter is sniffed but hello generated plan is suboptimal for hello full set of parameter values in a workload.</span></span> <span data-ttu-id="2f662-235">Microsoft tartalmaz lekérdezésmutatók (irányelvek) több szándékosan megadhatja a célt és bírálja felül a paraméter elemzés hello alapértelmezett viselkedését.</span><span class="sxs-lookup"><span data-stu-id="2f662-235">Microsoft includes query hints (directives) so that you can specify intent more deliberately and override hello default behavior of parameter sniffing.</span></span> <span data-ttu-id="2f662-236">Gyakran például használatakor megoldhatja esetekben, ahol hello alapértelmezett SQL Server vagy az Azure SQL Database viselkedés hiányos egy adott ügyfélhez munkaterhelés számára.</span><span class="sxs-lookup"><span data-stu-id="2f662-236">Often, if you use hints, you can fix cases in which hello default SQL Server or Azure SQL Database behavior is imperfect for a specific customer workload.</span></span>

<span data-ttu-id="2f662-237">hello következő példa bemutatja, hogyan hozhat létre hello lekérdezésfeldolgozó egy tervet, amely optimálisnál, mind a teljesítmény- és erőforrás-követelményei.</span><span class="sxs-lookup"><span data-stu-id="2f662-237">hello next example demonstrates how hello query processor can generate a plan that is suboptimal both for performance and resource requirements.</span></span> <span data-ttu-id="2f662-238">Ez a példa is mutatja, hogy a lekérdezés emlékeztető használatakor csökkentése érdekében lekérdezés futtatása idő és erőforrás-követelményei az SQL-adatbázis:</span><span class="sxs-lookup"><span data-stu-id="2f662-238">This example also shows that if you use a query hint, you can reduce query run time and resource requirements for your SQL database:</span></span>

    DROP TABLE psptest1;
    CREATE TABLE psptest1(col1 int primary key identity, col2 int, col3 binary(200));

    DECLARE @a int = 0;
    SET NOCOUNT ON;
    BEGIN TRANSACTION
    WHILE @a < 20000
    BEGIN
        INSERT INTO psptest1(col2) values (1);
        INSERT INTO psptest1(col2) values (@a);
        SET @a += 1;
    END
    COMMIT TRANSACTION
    CREATE INDEX i1 on psptest1(col2);
    GO

    CREATE PROCEDURE psp1 (@param1 int)
    AS
    BEGIN
        INSERT INTO t1 SELECT * FROM psptest1
        WHERE col2 = @param1
        ORDER BY col2;
    END
    GO

    CREATE PROCEDURE psp2 (@param2 int)
    AS
    BEGIN
        INSERT INTO t1 SELECT * FROM psptest1 WHERE col2 = @param2
        ORDER BY col2
        OPTION (OPTIMIZE FOR (@param2 UNKNOWN))
    END
    GO

    CREATE TABLE t1 (col1 int primary key, col2 int, col3 binary(200));
    GO

<span data-ttu-id="2f662-239">hello beállítási kód táblázatot hoz létre, amely rendelkezik válik egyenetlenné adatok terjesztési.</span><span class="sxs-lookup"><span data-stu-id="2f662-239">hello setup code creates a table that has skewed data distribution.</span></span> <span data-ttu-id="2f662-240">hello optimális lekérdezési eltér a terv alapján mely paraméter van kiválasztva.</span><span class="sxs-lookup"><span data-stu-id="2f662-240">hello optimal query plan differs based on which parameter is selected.</span></span> <span data-ttu-id="2f662-241">Sajnos gyorsítótárazásának hello terv nem mindig fordítsa újra hello lekérdezés hello leggyakoribb paraméter értéke alapján.</span><span class="sxs-lookup"><span data-stu-id="2f662-241">Unfortunately, hello plan caching behavior doesn't always recompile hello query based on hello most common parameter value.</span></span> <span data-ttu-id="2f662-242">Igen akkor lehet egy optimálisnál terv toobe a gyorsítótárban, és sok értéket, akkor is, ha egy másik csomagot lehet, hogy jobb terv választás átlagosan használt a.</span><span class="sxs-lookup"><span data-stu-id="2f662-242">So, it's possible for a suboptimal plan toobe cached and used for many values, even when a different plan might be a better plan choice on average.</span></span> <span data-ttu-id="2f662-243">Ezután hello lekérdezésterv hoz létre két tárolt eljárások, amelyek azonos, azzal a különbséggel, hogy egy speciális lekérdezés javaslat.</span><span class="sxs-lookup"><span data-stu-id="2f662-243">Then hello query plan creates two stored procedures that are identical, except that one has a special query hint.</span></span>

<span data-ttu-id="2f662-244">**A példában 1. rész**</span><span class="sxs-lookup"><span data-stu-id="2f662-244">**Example, part 1**</span></span>

    -- Prime Procedure Cache with scan plan
    EXEC psp1 @param1=1;
    TRUNCATE TABLE t1;

    -- Iterate multiple times tooshow hello performance difference
    DECLARE @i int = 0;
    WHILE @i < 1000
    BEGIN
        EXEC psp1 @param1=2;
        TRUNCATE TABLE t1;
        SET @i += 1;
    END

<span data-ttu-id="2f662-245">**Példa, 2. rész**</span><span class="sxs-lookup"><span data-stu-id="2f662-245">**Example, part 2**</span></span>

<span data-ttu-id="2f662-246">(Javasoljuk, várjon legalább 10 percig hello példa, 2. lépés megkezdése előtt, hogy hello eredmények különbözőek a telemetriai adatok eredő hello.)</span><span class="sxs-lookup"><span data-stu-id="2f662-246">(We recommend that you wait at least 10 minutes before you begin part 2 of hello example, so that hello results are distinct in hello resulting telemetry data.)</span></span>

    EXEC psp2 @param2=1;
    TRUNCATE TABLE t1;

    DECLARE @i int = 0;
    WHILE @i < 1000
    BEGIN
        EXEC psp2 @param2=2;
        TRUNCATE TABLE t1;
        SET @i += 1;
    END

<span data-ttu-id="2f662-247">Ebben a példában részét képező összes megpróbál egy paraméteres insert utasítás toorun 1000 alkalommal (toogenerate egy megfelelő terhelés toouse vizsgálati adatok készletként).</span><span class="sxs-lookup"><span data-stu-id="2f662-247">Each part of this example attempts toorun a parameterized insert statement 1,000 times (toogenerate a sufficient load toouse as a test data set).</span></span> <span data-ttu-id="2f662-248">Végrehajtja a tárolt eljárások, hello lekérdezésfeldolgozó megvizsgálja a hello paraméterérték átadott toohello eljárás során az első fordítási (paraméter "elemzés").</span><span class="sxs-lookup"><span data-stu-id="2f662-248">When it executes stored procedures, hello query processor examines hello parameter value that is passed toohello procedure during its first compilation (parameter "sniffing").</span></span> <span data-ttu-id="2f662-249">hello processzor hello eredményül kapott terv gyorsítótárazza, és használja azt a későbbi indítások, még akkor is, ha hello paraméter értéke eltérő.</span><span class="sxs-lookup"><span data-stu-id="2f662-249">hello processor caches hello resulting plan and uses it for later invocations, even if hello parameter value is different.</span></span> <span data-ttu-id="2f662-250">hello optimális terv minden esetben előfordulhat, hogy nem használható.</span><span class="sxs-lookup"><span data-stu-id="2f662-250">hello optimal plan might not be used in all cases.</span></span> <span data-ttu-id="2f662-251">Néha kell tooguide hello optimalizáló toopick egy tervet, amely a, amikor először fordították hello lekérdezés hello adott esetben helyett hello átlagos esetet jobb.</span><span class="sxs-lookup"><span data-stu-id="2f662-251">Sometimes you need tooguide hello optimizer toopick a plan that is better for hello average case rather than hello specific case from when hello query was first compiled.</span></span> <span data-ttu-id="2f662-252">Ebben a példában hello kezdeti terv, hogy az olvasások az összes sort toofind minden egyező hello paraméter értéke "ellenőrzés" terv állít elő:</span><span class="sxs-lookup"><span data-stu-id="2f662-252">In this example, hello initial plan generates a "scan" plan that reads all rows toofind each value that matches hello parameter:</span></span>

![A vizsgálati csomag használatával hangolása lekérdezése](./media/sql-database-performance-guidance/query_tuning_1.png)

<span data-ttu-id="2f662-254">Hello eljárás hajtja hello érték 1, mert a hello eredményül kapott terv lett optimális hello érték 1, de nem optimálisnál értéket minden más helyen hello táblában.</span><span class="sxs-lookup"><span data-stu-id="2f662-254">Because we executed hello procedure by using hello value 1, hello resulting plan was optimal for hello value 1 but was suboptimal for all other values in hello table.</span></span> <span data-ttu-id="2f662-255">hello eredmény valószínűleg nem mi alapvetően szükség, ha egyes megtervezése véletlenszerűen, mert hello terv lassabban hajt végre, és több erőforrást toopick.</span><span class="sxs-lookup"><span data-stu-id="2f662-255">hello result likely isn't what you would want if you were toopick each plan randomly, because hello plan performs more slowly and uses more resources.</span></span>

<span data-ttu-id="2f662-256">Hello vizsgálat futtatásakor `SET STATISTICS IO` túl beállítása`ON`, ebben a példában a logikai vizsgálat munkahelyi hello hello háttérben történik.</span><span class="sxs-lookup"><span data-stu-id="2f662-256">If you run hello test with `SET STATISTICS IO` set too`ON`, hello logical scan work in this example is done behind hello scenes.</span></span> <span data-ttu-id="2f662-257">Láthatja, hogy vannak-e (ez nem hatékony, ha hello átlagos eset tooreturn csak egyetlen sor) hello terv által végzett 1,148 olvasások:</span><span class="sxs-lookup"><span data-stu-id="2f662-257">You can see that there are 1,148 reads done by hello plan (which is inefficient, if hello average case is tooreturn just one row):</span></span>

![A logikai vizsgálat használatával hangolása lekérdezése](./media/sql-database-performance-guidance/query_tuning_2.png)

<span data-ttu-id="2f662-259">hello példa második része hello hello fordítás során lekérdezés mutató tootell hello optimalizáló toouse egy adott értéket használja.</span><span class="sxs-lookup"><span data-stu-id="2f662-259">hello second part of hello example uses a query hint tootell hello optimizer toouse a specific value during hello compilation process.</span></span> <span data-ttu-id="2f662-260">Ebben az esetben kényszerül hello lekérdezés processzor tooignore hello átadott érték hello paraméterként, és ehelyett tooassume `UNKNOWN`.</span><span class="sxs-lookup"><span data-stu-id="2f662-260">In this case, it forces hello query processor tooignore hello value that is passed as hello parameter, and instead tooassume `UNKNOWN`.</span></span> <span data-ttu-id="2f662-261">Tooa érték hello átlagos gyakorisága (figyelmen kívül hagyva döntés) hello tábla utal.</span><span class="sxs-lookup"><span data-stu-id="2f662-261">This refers tooa value that has hello average frequency in hello table (ignoring skew).</span></span> <span data-ttu-id="2f662-262">hello eredményül kapott terv egy keresési-alapú tervet készíteni, amely gyorsabb és kevesebb erőforrást használ, átlagosan hello terv az ebben a példában 1. rész:</span><span class="sxs-lookup"><span data-stu-id="2f662-262">hello resulting plan is a seek-based plan that is faster and uses fewer resources, on average, than hello plan in part 1 of this example:</span></span>

![Lekérdezés lekérdezés mutató használatával hangolása](./media/sql-database-performance-guidance/query_tuning_3.png)

<span data-ttu-id="2f662-264">Megtekintheti a hello hello hatása **sys.resource_stats** tábla (késik hello teszt tölti fel amikor hello adatok hello tábla végrehajtása hello idő).</span><span class="sxs-lookup"><span data-stu-id="2f662-264">You can see hello effect in hello **sys.resource_stats** table (there is a delay from hello time that you execute hello test and when hello data populates hello table).</span></span> <span data-ttu-id="2f662-265">Ez például 1. rész hello 22:25:00 időszak során futtatni, és 2. rész 22:35:00 végre.</span><span class="sxs-lookup"><span data-stu-id="2f662-265">For this example, part 1 executed during hello 22:25:00 time window, and part 2 executed at 22:35:00.</span></span> <span data-ttu-id="2f662-266">hello korábbi időkerete használt további erőforrások, mint (miatt terv hatékonyságát fejlesztései) későbbire hello időablakban.</span><span class="sxs-lookup"><span data-stu-id="2f662-266">hello earlier time window used more resources in that time window than hello later one (because of plan efficiency improvements).</span></span>

    SELECT TOP 1000 *
    FROM sys.resource_stats
    WHERE database_name = 'resource1'
    ORDER BY start_time DESC

![Lekérdezés eredménye. példa hangolási.](./media/sql-database-performance-guidance/query_tuning_4.png)

> [!NOTE]
> <span data-ttu-id="2f662-268">Bár ebben a példában hello kötet szándékosan kis, optimálisnál paraméterek hello hatása lehet jelentős, különösen a nagyobb méretű adatbázisokhoz.</span><span class="sxs-lookup"><span data-stu-id="2f662-268">Although hello volume in this example is intentionally small, hello effect of suboptimal parameters can be substantial, especially on larger databases.</span></span> <span data-ttu-id="2f662-269">hello különbség szélsőséges esetben gyors esetekben másodpercig és lassú adódó óra közötti lehet.</span><span class="sxs-lookup"><span data-stu-id="2f662-269">hello difference, in extreme cases, can be between seconds for fast cases and hours for slow cases.</span></span>
> 
> 

<span data-ttu-id="2f662-270">Ellenőrizheti **sys.resource_stats** toodetermine e hello erőforrás vizsgálat erőforrást használ, több vagy kevesebb mint egy másik tesztelése.</span><span class="sxs-lookup"><span data-stu-id="2f662-270">You can examine **sys.resource_stats** toodetermine whether hello resource for a test uses more or fewer resources than another test.</span></span> <span data-ttu-id="2f662-271">Adatok összehasonlításakor külön hello időzítési tesztet hajt végre, hogy azok nem a hello hello azonos 5 perces ablakában **sys.resource_stats** nézet.</span><span class="sxs-lookup"><span data-stu-id="2f662-271">When you compare data, separate hello timing of tests so that they are not in hello same 5-minute window in hello **sys.resource_stats** view.</span></span> <span data-ttu-id="2f662-272">hello hello a gyakorlatban célja toominimize hello teljes használt erőforrásokat, és nem toominimize hello csúcs erőforrásokat.</span><span class="sxs-lookup"><span data-stu-id="2f662-272">hello goal of hello exercise is toominimize hello total amount of resources used, and not toominimize hello peak resources.</span></span> <span data-ttu-id="2f662-273">Általában olyan kódrészletek, késésének optimalizálása is csökkenti hálózatierőforrás-fogyasztás.</span><span class="sxs-lookup"><span data-stu-id="2f662-273">Generally, optimizing a piece of code for latency also reduces resource consumption.</span></span> <span data-ttu-id="2f662-274">Győződjön meg arról, hogy hello módosítások tooan alkalmazása szükséges, és hogy hello módosítások nem negatívan befolyásoló hello felhasználói élmény mások, akik esetleg használja a lekérdezésmutatók hello alkalmazásban.</span><span class="sxs-lookup"><span data-stu-id="2f662-274">Make sure that hello changes you make tooan application are necessary, and that hello changes don't negatively affect hello customer experience for someone who might be using query hints in hello application.</span></span>

<span data-ttu-id="2f662-275">Ha egy munkaterhelés lekérdezések ismétlődő készlete, gyakran logika toocapture és az a terv a választott hello optimalizálási érvényesíteni, mert azt meghajtók hello minimális erőforrás mérete egység szükséges toohost hello adatbázis.</span><span class="sxs-lookup"><span data-stu-id="2f662-275">If a workload has a set of repeating queries, often it makes sense toocapture and validate hello optimality of your plan choices because it drives hello minimum resource size unit required toohost hello database.</span></span> <span data-ttu-id="2f662-276">Után érvényesíti, időnként újra a hello csomagok toohelp, győződjön meg arról, hogy azok rendelkeznek csökkent.</span><span class="sxs-lookup"><span data-stu-id="2f662-276">After you validate it, occasionally reexamine hello plans toohelp you make sure that they have not degraded.</span></span> <span data-ttu-id="2f662-277">További tudnivalók [mutatók (Transact-SQL) lekérdezés](https://msdn.microsoft.com/library/ms181714.aspx).</span><span class="sxs-lookup"><span data-stu-id="2f662-277">You can learn more about [query hints (Transact-SQL)](https://msdn.microsoft.com/library/ms181714.aspx).</span></span>

### <a name="cross-database-sharding"></a><span data-ttu-id="2f662-278">Adatbázisok közötti horizontális</span><span class="sxs-lookup"><span data-stu-id="2f662-278">Cross-database sharding</span></span>
<span data-ttu-id="2f662-279">Mivel az Azure SQL Database fut, a hagyományos hardvereken, hello kapacitáskorlátait egyetlen adatbázis alacsonyabb, mint a hagyományos helyszíni SQL Server telepítése a rendszer.</span><span class="sxs-lookup"><span data-stu-id="2f662-279">Because Azure SQL Database runs on commodity hardware, hello capacity limits for a single database are lower than for a traditional on-premises SQL Server installation.</span></span> <span data-ttu-id="2f662-280">Egyes ügyfelek felhasználhatja a horizontális technikák toospread Helyadatbázis-műveletekhez több adatbázis hello műveletek nem férnek el az Azure SQL Database egy önálló adatbázis hello határain belül.</span><span class="sxs-lookup"><span data-stu-id="2f662-280">Some customers use sharding techniques toospread database operations over multiple databases when hello operations don't fit inside hello limits of a single database in Azure SQL Database.</span></span> <span data-ttu-id="2f662-281">A legtöbb felhasználói horizontális technikák az Azure SQL Database-e az adatok egy dimenziót osztani több adatbázis.</span><span class="sxs-lookup"><span data-stu-id="2f662-281">Most customers who use sharding techniques in Azure SQL Database split their data on a single dimension across multiple databases.</span></span> <span data-ttu-id="2f662-282">Ez a megközelítés van szüksége, hogy a OLTP-alkalmazások gyakran hajtsa végre az tooonly egy sor- vagy tooa kis csoport hello séma sorok vonatkozó tranzakciók toounderstand.</span><span class="sxs-lookup"><span data-stu-id="2f662-282">For this approach, you need toounderstand that OLTP applications often perform transactions that apply tooonly one row or tooa small group of rows in hello schema.</span></span>

> [!NOTE]
> <span data-ttu-id="2f662-283">SQL-adatbázis most már biztosít egy könyvtár tooassist a horizontális.</span><span class="sxs-lookup"><span data-stu-id="2f662-283">SQL Database now provides a library tooassist with sharding.</span></span> <span data-ttu-id="2f662-284">További információkért lásd: [Elastic Database ügyféloldali kódtárának ismertetése](sql-database-elastic-database-client-library.md).</span><span class="sxs-lookup"><span data-stu-id="2f662-284">For more information, see [Elastic Database client library overview](sql-database-elastic-database-client-library.md).</span></span>
> 
> 

<span data-ttu-id="2f662-285">Például ha egy adatbázis ügyfél neve, a sorrendje, illetve a rendelés részleteit (például az SQL Server alkalmazáshoz tartozó hagyományos példa Northwind adatbázist hello), akkor lehetett ossza fel ezeket az adatokat több adatbázis rendelkező hello csoportosításával kapcsolódó order és rendelés részletei információ.</span><span class="sxs-lookup"><span data-stu-id="2f662-285">For example, if a database has customer name, order, and order details (like hello traditional example Northwind database that ships with SQL Server), you could split this data into multiple databases by grouping a customer with hello related order and order detail information.</span></span> <span data-ttu-id="2f662-286">Garantálható, hogy hello ügyféladatok egyetlen adatbázisban marad.</span><span class="sxs-lookup"><span data-stu-id="2f662-286">You can guarantee that hello customer's data stays in a single database.</span></span> <span data-ttu-id="2f662-287">hello alkalmazás szeretné-e osztani különböző ügyfelektől adatbázisok, hatékonyan terjednek hello terhelés több adatbázis között.</span><span class="sxs-lookup"><span data-stu-id="2f662-287">hello application would split different customers across databases, effectively spreading hello load across multiple databases.</span></span> <span data-ttu-id="2f662-288">Horizontális, az ügyfelek nem csak elkerülése érdekében hello adatbázis maximális méretkorlátot, de az Azure SQL Database is képes a munkaterheléseket, amelyek jelentősen nagyobb, mint hello határértékeinek hello különböző teljesítményszintek, mindaddig, amíg minden egyes adatbázis hogyan illeszkedik a DTU.</span><span class="sxs-lookup"><span data-stu-id="2f662-288">With sharding, customers not only can avoid hello maximum database size limit, but Azure SQL Database also can process workloads that are significantly larger than hello limits of hello different performance levels, as long as each individual database fits into its DTU.</span></span>

<span data-ttu-id="2f662-289">Bár az adatbázis horizontális nem csökkenthető a megoldás hello összesített erőforrás-kapacitást, hatékonyan van elosztva több adatbázis nagyon nagy megoldások támogatása.</span><span class="sxs-lookup"><span data-stu-id="2f662-289">Although database sharding doesn't reduce hello aggregate resource capacity for a solution, it's highly effective at supporting very large solutions that are spread over multiple databases.</span></span> <span data-ttu-id="2f662-290">Az egyes adatbázisok egy szint toosupport nagyon nagy méretű, magas erőforrás-követelmények "hatékony" adatbázisokkal más-más teljesítménybeli parancs.</span><span class="sxs-lookup"><span data-stu-id="2f662-290">Each database can run at a different performance level toosupport very large, "effective" databases with high resource requirements.</span></span>

### <a name="functional-partitioning"></a><span data-ttu-id="2f662-291">Funkcionális particionálás</span><span class="sxs-lookup"><span data-stu-id="2f662-291">Functional partitioning</span></span>
<span data-ttu-id="2f662-292">SQL Server-felhasználók gyakran egyesítése egyetlen adatbázisban számos funkciót.</span><span class="sxs-lookup"><span data-stu-id="2f662-292">SQL Server users often combine many functions in a single database.</span></span> <span data-ttu-id="2f662-293">Például ha egy alkalmazás az áruházbeli logika toomanage leltárban, hogy az adatbázis lehet készlet megrendelések, tárolt eljárások és indexelt vagy materializált nézetek, amely a hónap végi jelentéskészítéshez követési társított logikát.</span><span class="sxs-lookup"><span data-stu-id="2f662-293">For example, if an application has logic toomanage inventory for a store, that database might have logic associated with inventory, tracking purchase orders, stored procedures, and indexed or materialized views that manage end-of-month reporting.</span></span> <span data-ttu-id="2f662-294">Ezzel a módszerrel teszi, hogy könnyebben tooadminister hello adatbázis műveletek, például a biztonsági másolat, de Ön toosize hello hardver toohandle hello csúcsterhelés között az alkalmazás összes funkciójának is igényel.</span><span class="sxs-lookup"><span data-stu-id="2f662-294">This technique makes it easier tooadminister hello database for operations like backup, but it also requires you toosize hello hardware toohandle hello peak load across all functions of an application.</span></span>

<span data-ttu-id="2f662-295">Az Azure SQL Database kibővített architektúrák használatára, ha egy jó ötlet toosplit a különböző funkciók egy másik adatbázisba alkalmazás is.</span><span class="sxs-lookup"><span data-stu-id="2f662-295">If you use a scale-out architecture in Azure SQL Database, it's a good idea toosplit different functions of an application into different databases.</span></span> <span data-ttu-id="2f662-296">Ez a módszer segítségével minden alkalmazás egymástól függetlenül méretezi.</span><span class="sxs-lookup"><span data-stu-id="2f662-296">By using this technique, each application scales independently.</span></span> <span data-ttu-id="2f662-297">Egy alkalmazás válik busier (és hello adatbázis növekszik terhelése hello), a hello rendszergazda megadhatja az egyes függvények független teljesítményszintet hello alkalmazásban.</span><span class="sxs-lookup"><span data-stu-id="2f662-297">As an application becomes busier (and hello load on hello database increases), hello administrator can choose independent performance levels for each function in hello application.</span></span> <span data-ttu-id="2f662-298">Hello a határt, ezzel az architektúrával alkalmazás lehet nagyobb, mint egy hagyományos egyetlen gép kezelni tud, mert több számítógép között megoszlik hello betöltése.</span><span class="sxs-lookup"><span data-stu-id="2f662-298">At hello limit, with this architecture, an application can be larger than a single commodity machine can handle because hello load is spread across multiple machines.</span></span>

### <a name="batch-queries"></a><span data-ttu-id="2f662-299">Kötegelt lekérdezések</span><span class="sxs-lookup"><span data-stu-id="2f662-299">Batch queries</span></span>
<span data-ttu-id="2f662-300">A nagy mennyiségű adatok elérő alkalmazások esetében gyakori, az ad hoc kérdez le, válaszidő jelentős mennyiségű töltött hello alkalmazás réteg és hello Azure SQL adatbázis-rétegből közötti hálózati kommunikáció.</span><span class="sxs-lookup"><span data-stu-id="2f662-300">For applications that access data by using high-volume, frequent, ad hoc querying, a substantial amount of response time is spent on network communication between hello application tier and hello Azure SQL Database tier.</span></span> <span data-ttu-id="2f662-301">Akkor is, ha mindkét hello alkalmazás és az Azure SQL Database van hello ugyanabban az adatközpontban, közötti hello két hello hálózati késés előfordulhat, hogy nagyítható, adatelérési műveletek nagy száma.</span><span class="sxs-lookup"><span data-stu-id="2f662-301">Even when both hello application and Azure SQL Database are in hello same data center, hello network latency between hello two might be magnified by a large number of data access operations.</span></span> <span data-ttu-id="2f662-302">tooreduce hello hálózati kerek hello adatok utazás közben hozzáférési műveleteket, érdemes lehet hello beállítás tooeither kötegelt hello ad hoc lekérdezéseket vagy toocompile tárolt eljárásként őket.</span><span class="sxs-lookup"><span data-stu-id="2f662-302">tooreduce hello network round trips for hello data access operations, consider using hello option tooeither batch hello ad hoc queries, or toocompile them as stored procedures.</span></span> <span data-ttu-id="2f662-303">Kötegelt hello ad hoc lekérdezéseket, ha több lekérdezés egy egyetlen út tooAzure SQL-adatbázis egy nagy köteg elküldheti.</span><span class="sxs-lookup"><span data-stu-id="2f662-303">If you batch hello ad hoc queries, you can send multiple queries as one large batch in a single trip tooAzure SQL Database.</span></span> <span data-ttu-id="2f662-304">Ha ad hoc lekérdezéseket egy tárolt eljárás lefordításához el lehet érni hello ugyanaz, mintha azokat kötegelt vezethet.</span><span class="sxs-lookup"><span data-stu-id="2f662-304">If you compile ad hoc queries in a stored procedure, you could achieve hello same result as if you batch them.</span></span> <span data-ttu-id="2f662-305">Az eljárás tárolt eljárással is biztosít, akkor hello hello veszélyét annak, hogy az Azure SQL Database hello terveket gyorsítótárazás, hogy használhassa a hello növelésével járó előnyök újra tárolja.</span><span class="sxs-lookup"><span data-stu-id="2f662-305">Using a stored procedure also gives you hello benefit of increasing hello chances of caching hello query plans in Azure SQL Database so you can use hello stored procedure again.</span></span>

<span data-ttu-id="2f662-306">Egyes alkalmazások írási igényű.</span><span class="sxs-lookup"><span data-stu-id="2f662-306">Some applications are write-intensive.</span></span> <span data-ttu-id="2f662-307">Egyes esetekben hello teljes i/o egy adatbázis terhelését csökkentik annak eldöntéséhez, hogy hogyan toobatch együtt írja.</span><span class="sxs-lookup"><span data-stu-id="2f662-307">Sometimes you can reduce hello total I/O load on a database by considering how toobatch writes together.</span></span> <span data-ttu-id="2f662-308">Ez általában más dolga, mint az explicit tranzakciók helyett a tárolt eljárások és alkalmi kötegek automatikus véglegesítésű tranzakciók.</span><span class="sxs-lookup"><span data-stu-id="2f662-308">Often, this is as simple as using explicit transactions instead of auto-commit transactions in stored procedures and ad hoc batches.</span></span> <span data-ttu-id="2f662-309">Különböző módszereket használhat értékelése, lásd: [Azure SQL adatbázis-alkalmazások technikák kötegelés](https://msdn.microsoft.com/library/windowsazure/dn132615.aspx).</span><span class="sxs-lookup"><span data-stu-id="2f662-309">For an evaluation of different techniques you can use, see [Batching techniques for SQL Database applications in Azure](https://msdn.microsoft.com/library/windowsazure/dn132615.aspx).</span></span> <span data-ttu-id="2f662-310">A saját munkaterhelés toofind hello jobb modelljét kötegelés kísérletezhet.</span><span class="sxs-lookup"><span data-stu-id="2f662-310">Experiment with your own workload toofind hello right model for batching.</span></span> <span data-ttu-id="2f662-311">Különböző tranzakciós konzisztencia biztosítja, amelyek egy modell lehet, hogy toounderstand némileg lehet.</span><span class="sxs-lookup"><span data-stu-id="2f662-311">Be sure toounderstand that a model might have slightly different transactional consistency guarantees.</span></span> <span data-ttu-id="2f662-312">Hello jobb munkaterhelés erőforrás használata a lehető legkevesebb keresése szükséges konzisztencia és a teljesítmény kompromisszumot alakítson ki a megfelelő kombinációja hello keresése.</span><span class="sxs-lookup"><span data-stu-id="2f662-312">Finding hello right workload that minimizes resource use requires finding hello right combination of consistency and performance trade-offs.</span></span>

### <a name="application-tier-caching"></a><span data-ttu-id="2f662-313">Alkalmazás szintű gyorsítótárazása</span><span class="sxs-lookup"><span data-stu-id="2f662-313">Application-tier caching</span></span>
<span data-ttu-id="2f662-314">Egyes adatbázis-alkalmazások olvasási műveleteket munkaterhelésekkel rendelkeznek.</span><span class="sxs-lookup"><span data-stu-id="2f662-314">Some database applications have read-heavy workloads.</span></span> <span data-ttu-id="2f662-315">Rétegek gyorsítótárazás csökkentheti a hello adatbázis hello terhelését, és potenciálisan csökkentheti a hello teljesítmény szint szükséges toosupport adatbázis Azure SQL Database segítségével.</span><span class="sxs-lookup"><span data-stu-id="2f662-315">Caching layers might reduce hello load on hello database and might potentially reduce hello performance level required toosupport a database by using Azure SQL Database.</span></span> <span data-ttu-id="2f662-316">A [Azure Redis Cache](https://azure.microsoft.com/services/cache/), ha egy olvasási műveleteket végez, olvasható hello adatok egyszer (vagy lehet, hogy minden alkalmazás szintű machine konfigurációjától függően), majd helyezze el az adatok kívül az SQL-adatbázis.</span><span class="sxs-lookup"><span data-stu-id="2f662-316">With [Azure Redis Cache](https://azure.microsoft.com/services/cache/), if you have a read-heavy workload, you can read hello data once (or perhaps once per application-tier machine, depending on how it is configured), and then store that data outside your SQL database.</span></span> <span data-ttu-id="2f662-317">Ez a módszer tooreduce adatbázis terhelést (Processzor- és olvasási i/o-), de nincs hatással lévő tranzakciós konzisztencia, mivel előfordulhat, hogy a hello adatokat olvas be hello gyorsítótár nincs szinkronban a hello adatbázis hello adatait.</span><span class="sxs-lookup"><span data-stu-id="2f662-317">This is a way tooreduce database load (CPU and read I/O), but there is an effect on transactional consistency because hello data being read from hello cache might be out of sync with hello data in hello database.</span></span> <span data-ttu-id="2f662-318">Bár számos alkalmazás bizonyos fokú inkonzisztenciát elfogadható, hogy igaz nem munkaterhelések.</span><span class="sxs-lookup"><span data-stu-id="2f662-318">Although in many applications some level of inconsistency is acceptable, that's not true for all workloads.</span></span> <span data-ttu-id="2f662-319">Egy alkalmazás szintű gyorsítótárazási stratégia megvalósítása előtt, teljes mértékben ismernie kell bármely alkalmazás követelményeinek.</span><span class="sxs-lookup"><span data-stu-id="2f662-319">You should fully understand any application requirements before you implement an application-tier caching strategy.</span></span>

## <a name="next-steps"></a><span data-ttu-id="2f662-320">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="2f662-320">Next steps</span></span>
* <span data-ttu-id="2f662-321">Szolgáltatásrétegeiben használt funkciókkal kapcsolatos további információkért lásd: [SQL Database beállításai és teljesítménye](sql-database-service-tiers.md)</span><span class="sxs-lookup"><span data-stu-id="2f662-321">For more information about service tiers, see [SQL Database options and performance](sql-database-service-tiers.md)</span></span>
* <span data-ttu-id="2f662-322">További információ a rugalmas készletek: [Mi az Azure rugalmas készletek?](sql-database-elastic-pool.md)</span><span class="sxs-lookup"><span data-stu-id="2f662-322">For more information about elastic pools, see [What is an Azure elastic pool?](sql-database-elastic-pool.md)</span></span>
* <span data-ttu-id="2f662-323">Teljesítmény és a rugalmas készletek kapcsolatos információkért lásd: [amikor tooconsider rugalmas készletek](sql-database-elastic-pool-guidance.md)</span><span class="sxs-lookup"><span data-stu-id="2f662-323">For information about performance and elastic pools, see [When tooconsider an elastic pool](sql-database-elastic-pool-guidance.md)</span></span>

