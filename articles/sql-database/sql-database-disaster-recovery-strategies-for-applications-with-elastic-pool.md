---
title: "Vész-helyreállítási megoldások – az Azure SQL Database kialakítása |} Microsoft Docs"
description: "Útmutató a felhőalapú megoldás vész-helyreállítási terv válassza ki a megfelelő feladatátvételi mintát."
services: sql-database
documentationcenter: 
author: anosov1960
manager: jhubbard
editor: monicar
ms.assetid: 2db99057-0c79-4fb0-a7f1-d1c057ec787f
ms.service: sql-database
ms.custom: business continuity
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 04/07/2017
ms.author: sashan;carlrab
ms.openlocfilehash: 4f5131fdd2ca83e7a0a2f986a2fa1e3551814c6e
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 07/11/2017
---
# <a name="disaster-recovery-strategies-for-applications-using-sql-database-elastic-pools"></a><span data-ttu-id="29843-103">Vész helyreállítási stratégiát az SQL Database rugalmas készleteket használó alkalmazások</span><span class="sxs-lookup"><span data-stu-id="29843-103">Disaster recovery strategies for applications using SQL Database elastic pools</span></span>
<span data-ttu-id="29843-104">Az évek azt megtanulhatta, győződjön meg arról, hogy felhőszolgáltatások nem biztos és katasztrofális incidensek olyan esetben fordulhat elő.</span><span class="sxs-lookup"><span data-stu-id="29843-104">Over the years we have learned that cloud services are not foolproof and catastrophic incidents happen.</span></span> <span data-ttu-id="29843-105">SQL-adatbázis ezeket az incidensek előfordulásakor az üzletmenet folytonosságát, az alkalmazás így különböző képességeket biztosít.</span><span class="sxs-lookup"><span data-stu-id="29843-105">SQL Database provides several capabilities to provide for the business continuity of your application when these incidents occur.</span></span> <span data-ttu-id="29843-106">[Rugalmas készletek](sql-database-elastic-pool.md) és az önálló adatbázisok támogatja a vész-helyreállítási funkciók azonos típusú.</span><span class="sxs-lookup"><span data-stu-id="29843-106">[Elastic pools](sql-database-elastic-pool.md) and single databases support the same kind of disaster recovery capabilities.</span></span> <span data-ttu-id="29843-107">Ez a cikk ismerteti a több vész-Helyreállítási stratégiát, a rugalmas készletbe, amely kihasználja ezeket az SQL-adatbázis üzleti folytonosságot biztosító szolgáltatásokat.</span><span class="sxs-lookup"><span data-stu-id="29843-107">This article describes several DR strategies for elastic pools that leverage these SQL Database business continuity features.</span></span>

<span data-ttu-id="29843-108">Ez a cikk a következő kanonikus SaaS ISV-alkalmazás mintát használ:</span><span class="sxs-lookup"><span data-stu-id="29843-108">This article uses the following canonical SaaS ISV application pattern:</span></span>

<span data-ttu-id="29843-109"><i>A modern felhőalapú webalkalmazás minden végfelhasználó látja el egy SQL-adatbázis. Az ISV sok ügyfél rendelkezik, és ezért a sok más néven a bérlői adatbázisok használja. Mivel a bérlői adatbázisok általában előre nem látható tevékenység mintázatok, az ISV költségeket, az adatbázis nagyon kiszámíthatóbbá teszi hosszú időn keresztül rugalmas készlethez használ. A rugalmas készlet is leegyszerűsíti teljesítmény kezelését, ha a felhasználói tevékenység napra. A bérlői adatbázisok mellett az alkalmazás is használó adatbázisok a kezelheti a felhasználói profilokat, biztonsági gyűjtése a használati minták stb. Az egyes bérlők rendelkezésre állását ne befolyásolja az alkalmazás rendelkezésre állásának teljes. Azonban a rendelkezésre állás és a felügyeleti adatbázisok teljesítménye fontos a az alkalmazás függvény, és ha a felügyeleti adatbázisok offline offline állapotban-e a teljes alkalmazás.</i></span><span class="sxs-lookup"><span data-stu-id="29843-109"><i>A modern cloud-based web application provisions one SQL database for each end user. The ISV has many customers and therefore uses many databases, known as tenant databases. Because the tenant databases typically have unpredictable activity patterns, the ISV uses an elastic pool to make the database cost very predictable over extended periods of time. The elastic pool also simplifies the performance management when the user activity spikes. In addition to the tenant databases the application also uses several databases to manage user profiles, security, collect usage patterns etc. Availability of the individual tenants does not impact the application’s availability as whole. However, the availability and performance of management databases is critical for the application’s function and if the management databases are offline the entire application is offline.</i></span></span>  

<span data-ttu-id="29843-110">A cikk ismerteti a lehetőségeket rendelkező szigorú rendelkezésre állási követelmények bizalmas indítási alkalmazások költség számos vész-Helyreállítási stratégiát.</span><span class="sxs-lookup"><span data-stu-id="29843-110">This article discusses DR strategies covering a range of scenarios from cost sensitive startup applications to ones with stringent availability requirements.</span></span>

## <a name="scenario-1-cost-sensitive-startup"></a><span data-ttu-id="29843-111">1. forgatókönyv.</span><span class="sxs-lookup"><span data-stu-id="29843-111">Scenario 1.</span></span> <span data-ttu-id="29843-112">Költség-és nagybetűket indítása</span><span class="sxs-lookup"><span data-stu-id="29843-112">Cost sensitive startup</span></span>
<span data-ttu-id="29843-113"><i>I indítási üzleti vagyok, és rendkívül vagyok költség-és nagybetűket.  Egyszerűbb telepítés és az alkalmazás felügyelete szempontjából szeretnék, és egy korlátozott SLA-t az egyes ügyfelek is van. Azonban mivel a teljes soha nem offline állapotban, győződjön meg arról, hogy az alkalmazás kívánt.</i></span><span class="sxs-lookup"><span data-stu-id="29843-113"><i>I am a startup business and am extremely cost sensitive.  I want to simplify deployment and management of the application and I can have a limited SLA for individual customers. But I want to ensure the application as a whole is never offline.</i></span></span>

<span data-ttu-id="29843-114">Az egyszerűség kedvéért követelmény teljesítéséhez összes bérlői adatbázis üzembe helyezés egy rugalmas készlet a kiválasztott Azure-régióban, és felügyeleti adatbázisok önálló adatbázisok georeplikált szerint telepítheti.</span><span class="sxs-lookup"><span data-stu-id="29843-114">To satisfy the simplicity requirement, deploy all tenant databases into one elastic pool in the Azure region of your choice and deploy management databases as geo-replicated single databases.</span></span> <span data-ttu-id="29843-115">A bérlő vész-helyreállítási használja a georedundáns helyreállítás, amely minden további költség nélkül.</span><span class="sxs-lookup"><span data-stu-id="29843-115">For the disaster recovery of tenants, use geo-restore, which comes at no additional cost.</span></span> <span data-ttu-id="29843-116">Ahhoz, hogy a felügyeleti adatbázisok rendelkezésre állását, földrajzi-replikálja őket egy másik régióba egy automatikus feladatátvételi csoport (az előzetes verzió) (1. lépés).</span><span class="sxs-lookup"><span data-stu-id="29843-116">To ensure the availability of the management databases, geo-replicate them to another region using an auto-failover group (in-preview) (step 1).</span></span> <span data-ttu-id="29843-117">A teljes költség, a másodlagos adatbázisok a vészhelyreállítási konfigurációban ebben a forgatókönyvben a folyamatban lévő költségét megegyezik.</span><span class="sxs-lookup"><span data-stu-id="29843-117">The ongoing cost of the disaster recovery configuration in this scenario is equal to the total cost of the secondary databases.</span></span> <span data-ttu-id="29843-118">Ez a konfiguráció a következő diagramon látható.</span><span class="sxs-lookup"><span data-stu-id="29843-118">This configuration is illustrated on the next diagram.</span></span>

![1. ábra](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-1.png)

<span data-ttu-id="29843-120">Nem tervezett kimaradás esetén az elsődleges régióban, a helyreállítási lépéseket kapcsolja a hálózatra az alkalmazás által a következő ábra mutatja.</span><span class="sxs-lookup"><span data-stu-id="29843-120">If an outage occurs in the primary region, the recovery steps to bring your application online are illustrated by the next diagram.</span></span>

* <span data-ttu-id="29843-121">A feladatátvételi csoport felügyeleti-adatbázisnak a vész-Helyreállítási régió automatikus feladatátvételt kezdeményez.</span><span class="sxs-lookup"><span data-stu-id="29843-121">The failover group initiates automatic failover of the management database to the DR region.</span></span> <span data-ttu-id="29843-122">Az alkalmazás automatikusan újra létrehozza az új elsődleges és minden új fiókok és a bérlői adatbázisok a vész-Helyreállítási régióban jönnek létre.</span><span class="sxs-lookup"><span data-stu-id="29843-122">The application is automatically reconnected to the new primary and all new accounts and tenant databases are created in the DR region.</span></span> <span data-ttu-id="29843-123">A meglévő ügyfeleknek tekintse meg az adatok átmenetileg nem érhető el.</span><span class="sxs-lookup"><span data-stu-id="29843-123">The existing customers see their data temporarily unavailable.</span></span>
* <span data-ttu-id="29843-124">A rugalmas készlet létrehozása az eredeti készlet (2) azonos konfigurációjú.</span><span class="sxs-lookup"><span data-stu-id="29843-124">Create the elastic pool with the same configuration as the original pool (2).</span></span>
* <span data-ttu-id="29843-125">Georedundáns helyreállítás segítségével készítsen másolatot a bérlő adatbázisok (3).</span><span class="sxs-lookup"><span data-stu-id="29843-125">Use geo-restore to create copies of the tenant databases (3).</span></span> <span data-ttu-id="29843-126">Vegye figyelembe a végfelhasználói kapcsolatok által az egyes visszaállítások váltanak, vagy néhány más alkalmazás-specifikus prioritás sémát használja.</span><span class="sxs-lookup"><span data-stu-id="29843-126">You can consider triggering the individual restores by the end-user connections or use some other application-specific priority scheme.</span></span>


<span data-ttu-id="29843-127">Ezen a ponton az alkalmazás újra online állapotba kerül a vész-Helyreállítási régióban, de néhány ügyfél tapasztalhat a késleltetés, az adatok elérése közben.</span><span class="sxs-lookup"><span data-stu-id="29843-127">At this point your application is back online in the DR region, but some customers experience delay when accessing their data.</span></span>

![2. ábra](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-2.png)

<span data-ttu-id="29843-129">A leállás ideiglenes volt, akkor lehetséges, hogy az elsődleges régióban helyreállíthatók az Azure-ban, előtt a vész-Helyreállítási régióban összes adatbázis visszaállítása befejeződött.</span><span class="sxs-lookup"><span data-stu-id="29843-129">If the outage was temporary, it is possible that the primary region is recovered by Azure before all the database restores are complete in the DR region.</span></span> <span data-ttu-id="29843-130">Ebben az esetben levezényelni helyezze át az alkalmazást az elsődleges régióban.</span><span class="sxs-lookup"><span data-stu-id="29843-130">In this case, orchestrate moving the application back to the primary region.</span></span> <span data-ttu-id="29843-131">A folyamat végrehajtja a következő diagramon ábrázolt műveleteket.</span><span class="sxs-lookup"><span data-stu-id="29843-131">The process takes the steps illustrated on the next diagram.</span></span>

* <span data-ttu-id="29843-132">Összes függőben lévő georedundáns helyreállítás kérelem megszakítása.</span><span class="sxs-lookup"><span data-stu-id="29843-132">Cancel all outstanding geo-restore requests.</span></span>   
* <span data-ttu-id="29843-133">Feladatok átadása a felügyeleti adatbázisokat az elsődleges régióban (5).</span><span class="sxs-lookup"><span data-stu-id="29843-133">Fail over the management databases to the primary region (5).</span></span> <span data-ttu-id="29843-134">A régió helyreállítása után a régi elsődleges automatikusan váltak másodlagos.</span><span class="sxs-lookup"><span data-stu-id="29843-134">After the region’s recovery, the old primaries have automatically become secondaries.</span></span> <span data-ttu-id="29843-135">Most vált a szerepkörök újra.</span><span class="sxs-lookup"><span data-stu-id="29843-135">Now they switch roles again.</span></span> 
* <span data-ttu-id="29843-136">Módosítsa az alkalmazás kapcsolati karakterláncot mutathat vissza az elsődleges régióban.</span><span class="sxs-lookup"><span data-stu-id="29843-136">Change the application's connection string to point back to the primary region.</span></span> <span data-ttu-id="29843-137">Most már minden új fiókokat és a bérlői adatbázisok az elsődleges régióban jönnek létre.</span><span class="sxs-lookup"><span data-stu-id="29843-137">Now all new accounts and tenant databases are created in the primary region.</span></span> <span data-ttu-id="29843-138">Egyes meglévő ügyfelek tekintse meg az adatok átmenetileg nem érhető el.</span><span class="sxs-lookup"><span data-stu-id="29843-138">Some existing customers see their data temporarily unavailable.</span></span>   
* <span data-ttu-id="29843-139">Állítsa be az összes adatbázis a vész-Helyreállítási készlet csak olvasható annak érdekében, hogy ezeket nem lehet módosítani a vész-Helyreállítási régióban (6).</span><span class="sxs-lookup"><span data-stu-id="29843-139">Set all databases in the DR pool to read-only to ensure they cannot be modified in the DR region (6).</span></span> 
* <span data-ttu-id="29843-140">Az egyes adatbázisok a vész-Helyreállítási készlet, amely a helyreállítás óta megváltozott nevezze át vagy törölje a megfelelő adatbázisokat az elsődleges készletben (7).</span><span class="sxs-lookup"><span data-stu-id="29843-140">For each database in the DR pool that has changed since the recovery, rename or delete the corresponding databases in the primary pool (7).</span></span> 
* <span data-ttu-id="29843-141">Másolja a frissített adatbázisok a vész-Helyreállítási készlet az elsődleges készlet (8).</span><span class="sxs-lookup"><span data-stu-id="29843-141">Copy the updated databases from the DR pool to the primary pool (8).</span></span> 
* <span data-ttu-id="29843-142">Törli a vész-Helyreállítási készletet (9)</span><span class="sxs-lookup"><span data-stu-id="29843-142">Delete the DR pool (9)</span></span>

<span data-ttu-id="29843-143">Ezen a ponton az alkalmazás érhető el az összes bérlői érhető el a készletben lévő adatbázisok elsődleges elsődleges régióban.</span><span class="sxs-lookup"><span data-stu-id="29843-143">At this point your application is online in the primary region with all tenant databases available in the primary pool.</span></span>

![3. ábra](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-3.png)

<span data-ttu-id="29843-145">A kulcs **előnyeit** ezt a stratégiát az adatredundanciát réteg alacsony folyamatban lévő költsége.</span><span class="sxs-lookup"><span data-stu-id="29843-145">The key **benefit** of this strategy is low ongoing cost for data tier redundancy.</span></span> <span data-ttu-id="29843-146">Biztonsági mentések automatikusan készül az SQL Database szolgáltatás nincs alkalmazás átdolgozás és minden további költség nélkül.</span><span class="sxs-lookup"><span data-stu-id="29843-146">Backups are taken automatically by the SQL Database service with no application rewrite and at no additional cost.</span></span>  <span data-ttu-id="29843-147">A költsége van szükség, csak akkor, ha a rugalmas adatbázis visszaállítását végzi.</span><span class="sxs-lookup"><span data-stu-id="29843-147">The cost is incurred only when the elastic databases are restored.</span></span> <span data-ttu-id="29843-148">A **kompromisszum** , hogy a teljes helyreállítás összes bérlői adatbázis jelentős időt vesz igénybe.</span><span class="sxs-lookup"><span data-stu-id="29843-148">The **trade-off** is that the complete recovery of all tenant databases takes significant time.</span></span> <span data-ttu-id="29843-149">Mennyi ideig attól függ, az összes indítja el a vész-Helyreállítási régióban visszaállítások száma és a bérlői adatbázis teljes mérete.</span><span class="sxs-lookup"><span data-stu-id="29843-149">The length of time depends on the total number of restores you initiate in the DR region and overall size of the tenant databases.</span></span> <span data-ttu-id="29843-150">Akkor is, ha az egyes bérlők számára visszaállítások keresztül mások helyezi előtérbe, akkor az összes a más visszaállítások kezdeményezett ugyanabban a régióban, a szolgáltatás arbitrates és azelőtt gyorsítja fel a meglévő ügyfeleknek adatbázisok gyakorolt teljes hatás minimalizálása érdekében verseng.</span><span class="sxs-lookup"><span data-stu-id="29843-150">Even if you prioritize some tenants' restores over others, you are competing with all the other restores that are initiated in the same region as the service arbitrates and throttles to minimize the overall impact on the existing customers' databases.</span></span> <span data-ttu-id="29843-151">Emellett a bérlő adatbázisok helyreállítási nem tudja elindítani, amíg a vész-Helyreállítási régióban új rugalmas készlet jön létre.</span><span class="sxs-lookup"><span data-stu-id="29843-151">In addition, the recovery of the tenant databases cannot start until the new elastic pool in the DR region is created.</span></span>

## <a name="scenario-2-mature-application-with-tiered-service"></a><span data-ttu-id="29843-152">2. forgatókönyv.</span><span class="sxs-lookup"><span data-stu-id="29843-152">Scenario 2.</span></span> <span data-ttu-id="29843-153">Érett alkalmazás rétegzett szolgáltatással</span><span class="sxs-lookup"><span data-stu-id="29843-153">Mature application with tiered service</span></span>
<span data-ttu-id="29843-154"><i>Én vagyok a rétegzett szolgáltatási ajánlatok és különböző SLA-k próba felhasználók és az ügyfelek fizető érett SaaS-alkalmazáshoz. A próba ügyfelek van lehetőség szerint a költségek csökkentése. Próbaverziós felhasználók is igénybe vehet az állásidőt, de annak valószínűsége csökkenteni szeretnék. A fizető vevők leállási esetén a felhőszolgáltató közötti átviteléhez kockázata. Győződjön meg arról, hogy fizető kívánt, az ügyfelek képesek mindig hozzáférjenek az adataikhoz.</i></span><span class="sxs-lookup"><span data-stu-id="29843-154"><i>I am a mature SaaS application with tiered service offers and different SLAs for trial customers and for paying customers. For the trial customers, I have to reduce the cost as much as possible. Trial customers can take downtime but I want to reduce its likelihood. For the paying customers, any downtime is a flight risk. So I want to make sure that paying customers are always able to access their data.</i></span></span> 

<span data-ttu-id="29843-155">Ez a forgatókönyv támogatása érdekében a próbabérlőket eltérő, külön fizetős bérlők által külön rugalmas készletek üzembe őket.</span><span class="sxs-lookup"><span data-stu-id="29843-155">To support this scenario, separate the trial tenants from paid tenants by putting them into separate elastic pools.</span></span> <span data-ttu-id="29843-156">A próba alacsonyabb eDTU-bérlők és az alacsonyabb SLA-t és a hosszabb helyreállítási idő rendelkeznek.</span><span class="sxs-lookup"><span data-stu-id="29843-156">The trial customers have lower eDTU per tenant and lower SLA with a longer recovery time.</span></span> <span data-ttu-id="29843-157">A fizető vevők egy magasabb eDTU-bérlő és a magasabb SLA-t a készletben vannak.</span><span class="sxs-lookup"><span data-stu-id="29843-157">The paying customers are in a pool with higher eDTU per tenant and a higher SLA.</span></span> <span data-ttu-id="29843-158">A legalacsonyabb helyreállításkor biztosításához a fizető vevők bérlői adatbázisok a következők georeplikált.</span><span class="sxs-lookup"><span data-stu-id="29843-158">To guarantee the lowest recovery time, the paying customers' tenant databases are geo-replicated.</span></span> <span data-ttu-id="29843-159">Ez a konfiguráció a következő diagramon látható.</span><span class="sxs-lookup"><span data-stu-id="29843-159">This configuration is illustrated on the next diagram.</span></span> 

![4. ábra](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-4.png)

<span data-ttu-id="29843-161">Az első forgatókönyv, mint a felügyeleti adatbázisok aktívak üzembe helyezését, hogy használni egy georeplikált adatbázist (1) az.</span><span class="sxs-lookup"><span data-stu-id="29843-161">As in the first scenario, the management databases are quite active so you use a single geo-replicated database for it (1).</span></span> <span data-ttu-id="29843-162">Ez biztosítja a kiszámítható teljesítmény új ügyfél-előfizetések, a profil frissítések és az egyéb felügyeleti műveleteket.</span><span class="sxs-lookup"><span data-stu-id="29843-162">This ensures the predictable performance for new customer subscriptions, profile updates, and other management operations.</span></span> <span data-ttu-id="29843-163">A régió, amelyben eredményezi a felügyeleti adatbázis található az elsődleges régióban, a régiót, amelyben a másodlagos felügyeleti adatbázis található pedig a vész-Helyreállítási régióban.</span><span class="sxs-lookup"><span data-stu-id="29843-163">The region in which the primaries of the management databases reside is the primary region and the region in which the secondaries of the management databases reside is the DR region.</span></span>

<span data-ttu-id="29843-164">A fizető vevők bérlői adatbázisok aktív adatbázisok van a "fizetős" tárolókészletben az elsődleges régióban kiépítve.</span><span class="sxs-lookup"><span data-stu-id="29843-164">The paying customers’ tenant databases have active databases in the “paid” pool provisioned in the primary region.</span></span> <span data-ttu-id="29843-165">Ezzel a névvel, a vész-Helyreállítási régióban másodlagos készlet kiépítéséhez.</span><span class="sxs-lookup"><span data-stu-id="29843-165">Provision a secondary pool with the same name in the DR region.</span></span> <span data-ttu-id="29843-166">Mindegyik bérlő georeplikált másodlagos készletéhez (2).</span><span class="sxs-lookup"><span data-stu-id="29843-166">Each tenant is geo-replicated to the secondary pool (2).</span></span> <span data-ttu-id="29843-167">Ez lehetővé teszi, hogy a gyors helyreállításának összes bérlői adatbázis feladatátvétel használatával.</span><span class="sxs-lookup"><span data-stu-id="29843-167">This enables quick recovery of all tenant databases using failover.</span></span> 

<span data-ttu-id="29843-168">Nem tervezett kimaradás esetén az elsődleges régióban, az alkalmazás online állapotba a helyreállítási lépéseket mutatja be a következő diagram:</span><span class="sxs-lookup"><span data-stu-id="29843-168">If an outage occurs in the primary region, the recovery steps to bring your application online are illustrated in the next diagram:</span></span>

![5. ábra](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-5.png)

* <span data-ttu-id="29843-170">A vész-Helyreállítási régióban (3) a felügyeleti adatbázisok azonnal feladatátvételt.</span><span class="sxs-lookup"><span data-stu-id="29843-170">Immediately fail over the management databases to the DR region (3).</span></span>
* <span data-ttu-id="29843-171">Módosítsa az alkalmazás kapcsolati karakterláncot a vész-Helyreállítási régió mutassanak.</span><span class="sxs-lookup"><span data-stu-id="29843-171">Change the application’s connection string to point to the DR region.</span></span> <span data-ttu-id="29843-172">Most már minden új fiókokat és a bérlői adatbázisok a vész-Helyreállítási régióban jönnek létre.</span><span class="sxs-lookup"><span data-stu-id="29843-172">Now all new accounts and tenant databases are created in the DR region.</span></span> <span data-ttu-id="29843-173">A meglévő próba felhasználók tekintse meg az adatok átmenetileg nem érhető el.</span><span class="sxs-lookup"><span data-stu-id="29843-173">The existing trial customers see their data temporarily unavailable.</span></span>
* <span data-ttu-id="29843-174">Feladatok átadása a fizetős bérlő adatbázisokat a készlethez, a vész-Helyreállítási régióban azonnal visszaállítása a rendelkezésre állásuk (4).</span><span class="sxs-lookup"><span data-stu-id="29843-174">Fail over the paid tenant's databases to the pool in the DR region to immediately restore their availability (4).</span></span> <span data-ttu-id="29843-175">Mivel a feladatátvételt a gyors metaadatok szint módosítása, fontolja meg az optimalizálás, ahol az egyes feladatátvételek lépésüket az igény szerinti a végfelhasználói kapcsolatok.</span><span class="sxs-lookup"><span data-stu-id="29843-175">Since the failover is a quick metadata level change, consider an optimization where the individual failovers are triggered on demand by the end-user connections.</span></span> 
* <span data-ttu-id="29843-176">Ha a másodlagos készlet edtu-k mérete alacsonyabb, mint az elsődleges volt, mert a másodlagos adatbázisok csak a módosítási napló feldolgozása, miközben a másodlagos adatbázisok voltak kapacitás szükséges, azonnal növelje a készlet kapacitásának most már egyetlen bérlő számára [5], a teljes munkaterhelés befogadásához.</span><span class="sxs-lookup"><span data-stu-id="29843-176">If your secondary pool eDTU size was lower than the primary because the secondary databases only required the capacity to process the change logs while they were secondaries, immediately increase the pool capacity now to accommodate the full workload of all tenants (5).</span></span> 
* <span data-ttu-id="29843-177">Hozzon létre új rugalmas készlet ugyanazt a nevet és a próbaverziós felhasználók adatbázisok (6) a vész-Helyreállítási régióban azonos konfigurációval.</span><span class="sxs-lookup"><span data-stu-id="29843-177">Create the new elastic pool with the same name and the same configuration in the DR region for the trial customers' databases (6).</span></span> 
* <span data-ttu-id="29843-178">A próba felhasználók készlet létrehozása után a georedundáns helyreállítás használatával állítsa vissza az egyes próbabérlet adatbázisokat az új készletbe (7).</span><span class="sxs-lookup"><span data-stu-id="29843-178">Once the trial customers’ pool is created, use geo-restore to restore the individual trial tenant databases into the new pool (7).</span></span> <span data-ttu-id="29843-179">Vegye figyelembe, a végfelhasználói kapcsolatok által az egyes visszaállítások váltanak, vagy néhány más alkalmazás-specifikus prioritás sémát használja.</span><span class="sxs-lookup"><span data-stu-id="29843-179">Consider triggering the individual restores by the end-user connections or use some other application-specific priority scheme.</span></span>

<span data-ttu-id="29843-180">Ezen a ponton az alkalmazás újra online állapotba a vész-Helyreállítási régióban.</span><span class="sxs-lookup"><span data-stu-id="29843-180">At this point your application is back online in the DR region.</span></span> <span data-ttu-id="29843-181">Minden fizető vevők férhetnek hozzá az adataikhoz rendelkezik, amíg a próba ügyfél tapasztalhat késleltetés az adatok elérése közben.</span><span class="sxs-lookup"><span data-stu-id="29843-181">All paying customers have access to their data while the trial customers experience delay when accessing their data.</span></span>

<span data-ttu-id="29843-182">Ha az elsődleges régióban Azure hasznosítják *után* visszaállította az alkalmazás a vész-Helyreállítási régióban folytathatja az alkalmazás futtatása az adott régióban, vagy beállíthatja úgy, hogy visszaadják feladataikat az elsődleges régióban.</span><span class="sxs-lookup"><span data-stu-id="29843-182">When the primary region is recovered by Azure *after* you have restored the application in the DR region you can continue running the application in that region or you can decide to fail back to the primary region.</span></span> <span data-ttu-id="29843-183">Ha az elsődleges régióban állítja helyre a rendszer *előtt* a feladatátvétel befejeződött, javasoljuk, hogy visszavétele azonnal.</span><span class="sxs-lookup"><span data-stu-id="29843-183">If the primary region is recovered *before* the failover process is completed, consider failing back right away.</span></span> <span data-ttu-id="29843-184">A feladat-visszavétel fogadja el a következő ábra szemlélteti a lépéseket:</span><span class="sxs-lookup"><span data-stu-id="29843-184">The failback takes the steps illustrated in the next diagram:</span></span> 

![6. ábra](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-6.png)

* <span data-ttu-id="29843-186">Összes függőben lévő georedundáns helyreállítás kérelem megszakítása.</span><span class="sxs-lookup"><span data-stu-id="29843-186">Cancel all outstanding geo-restore requests.</span></span>   
* <span data-ttu-id="29843-187">Feladatok átadása a felügyeleti adatbázisok (8).</span><span class="sxs-lookup"><span data-stu-id="29843-187">Fail over the management databases (8).</span></span> <span data-ttu-id="29843-188">A régió helyreállítása után a régi elsődleges automatikusan a másodlagos válik.</span><span class="sxs-lookup"><span data-stu-id="29843-188">After the region’s recovery, the old primary automatically become the secondary.</span></span> <span data-ttu-id="29843-189">Most újra lesz az elsődleges.</span><span class="sxs-lookup"><span data-stu-id="29843-189">Now it becomes the primary again.</span></span>  
* <span data-ttu-id="29843-190">Feladatok átadása a fizetős bérlői adatbázisok (9).</span><span class="sxs-lookup"><span data-stu-id="29843-190">Fail over the paid tenant databases (9).</span></span> <span data-ttu-id="29843-191">Hasonlóképpen a régió helyreállítása után a régi elsődleges automatikusan vált a másodlagos adatbázis.</span><span class="sxs-lookup"><span data-stu-id="29843-191">Similarly, after the region’s recovery, the old primaries automatically become the secondaries.</span></span> <span data-ttu-id="29843-192">Most ismét válnának eredményezi.</span><span class="sxs-lookup"><span data-stu-id="29843-192">Now they become the primaries again.</span></span> 
* <span data-ttu-id="29843-193">Állítsa be a visszaállított próba adatbázisok, amely, a vész-Helyreállítási régióban csak olvasható (10).</span><span class="sxs-lookup"><span data-stu-id="29843-193">Set the restored trial databases that have changed in the DR region to read-only (10).</span></span>
* <span data-ttu-id="29843-194">Az egyes adatbázisok helyreállítási óta megváltoztak a próbaverziós felhasználók DR-készletben nevezze át vagy törölje a megfelelő adatbázist a próbaverziós felhasználók elsődleges készletben (11).</span><span class="sxs-lookup"><span data-stu-id="29843-194">For each database in the trial customers DR pool that changed since the recovery, rename or delete the corresponding database in the trial customers primary pool (11).</span></span> 
* <span data-ttu-id="29843-195">Másolja a frissített adatbázisok a vész-Helyreállítási készlet az elsődleges készlet (12).</span><span class="sxs-lookup"><span data-stu-id="29843-195">Copy the updated databases from the DR pool to the primary pool (12).</span></span> 
* <span data-ttu-id="29843-196">[13] DR-készlet törlése</span><span class="sxs-lookup"><span data-stu-id="29843-196">Delete the DR pool (13)</span></span> 

> [!NOTE]
> <span data-ttu-id="29843-197">A feladatátvételi művelet aszinkron.</span><span class="sxs-lookup"><span data-stu-id="29843-197">The failover operation is asynchronous.</span></span> <span data-ttu-id="29843-198">A helyreállítási idő minimalizálása érdekében fontos, hogy a bérlő adatbázisok feladatátvételi parancs legalább 20 adatbázisok kötegekben hajtható végre.</span><span class="sxs-lookup"><span data-stu-id="29843-198">To minimize the recovery time it is important that you execute the tenant databases' failover command in batches of at least 20 databases.</span></span> 
> 
> 

<span data-ttu-id="29843-199">A kulcs **előnyeit** ezt a stratégiát arra, hogy a fizető vevők biztosít a legmagasabb szolgáltatásiszint-szerződést.</span><span class="sxs-lookup"><span data-stu-id="29843-199">The key **benefit** of this strategy is that it provides the highest SLA for the paying customers.</span></span> <span data-ttu-id="29843-200">Emellett biztosítja azt, hogy az új kísérletek feloldja-e, amint a vész-Helyreállítási próbakészletben jön létre.</span><span class="sxs-lookup"><span data-stu-id="29843-200">It also guarantees that the new trials are unblocked as soon as the trial DR pool is created.</span></span> <span data-ttu-id="29843-201">A **kompromisszum** ügyfelek fizetős, hogy a telepítő növeli a teljes költség, a bérlő adatbázisok által a másodlagos DR-készletben költségét.</span><span class="sxs-lookup"><span data-stu-id="29843-201">The **trade-off** is that this setup increases the total cost of the tenant databases by the cost of the secondary DR pool for paid customers.</span></span> <span data-ttu-id="29843-202">Ezenkívül-e a másodlagos készlet különböző méretű, a fizető vevők alacsonyabb teljesítmény tapasztalható feladatátvételt követően a készlet frissítése a vész-Helyreállítási régióban befejeződéséig.</span><span class="sxs-lookup"><span data-stu-id="29843-202">In addition, if the secondary pool has a different size, the paying customers experience lower performance after failover until the pool upgrade in the DR region is completed.</span></span> 

## <a name="scenario-3-geographically-distributed-application-with-tiered-service"></a><span data-ttu-id="29843-203">3. forgatókönyv.</span><span class="sxs-lookup"><span data-stu-id="29843-203">Scenario 3.</span></span> <span data-ttu-id="29843-204">Földrajzilag elosztott alkalmazás rétegzett szolgáltatással</span><span class="sxs-lookup"><span data-stu-id="29843-204">Geographically distributed application with tiered service</span></span>
<span data-ttu-id="29843-205"><i>A rétegzett szolgáltatási ajánlatok érett SaaS-alkalmazás van. Szeretnék rendkívül agresszív SLA nyújtsanak a fizetős ügyfeleknek, és minimálisra csökkenthetők a járulékos hatással lehet az, ha valamilyen okból kimaradás fordul elő, mert még rövid megszakítás ügyfél kapcsolatos okozhat. Nagyon fontos, hogy a fizető vevők mindig is hozzáférjenek az adataikhoz. A próbaverzió szabad és a próbaidőszak alatt nem ajánlott a szolgáltatásiszint-szerződésben garantált.</i></span><span class="sxs-lookup"><span data-stu-id="29843-205"><i>I have a mature SaaS application with tiered service offers. I want to offer a very aggressive SLA to my paid customers and minimize the risk of impact when outages occur because even brief interruption can cause customer dissatisfaction. It is critical that the paying customers can always access their data. The trials are free and an SLA is not offered during the trial period. </i></span></span> 

<span data-ttu-id="29843-206">A forgatókönyv támogatása érdekében használjon három különálló rugalmas készletek.</span><span class="sxs-lookup"><span data-stu-id="29843-206">To support this scenario, use three separate elastic pools.</span></span> <span data-ttu-id="29843-207">A magas edtu-k adatbázisonkénti magában foglalja a fizetős ügyfelek bérlői adatbázisok két különböző régiókban két egyenlő méretű rendelkezik kiépítéséhez.</span><span class="sxs-lookup"><span data-stu-id="29843-207">Provision two equal size pools with high eDTUs per database in two different regions to contain the paid customers' tenant databases.</span></span> <span data-ttu-id="29843-208">A próbabérlőket tartalmazó harmadik készlet lehet alacsonyabb edtu-k adatbázisonkénti és építhető ki a két régiók egyikéhez sem.</span><span class="sxs-lookup"><span data-stu-id="29843-208">The third pool containing the trial tenants can have lower eDTUs per database and be provisioned in one of the two regions.</span></span>

<span data-ttu-id="29843-209">A legalacsonyabb helyreállítás ideje alatt kimaradások biztosításához a fizető vevők bérlői adatbázisok a következők georeplikált 50 %-a két régió elsődleges adatbázis.</span><span class="sxs-lookup"><span data-stu-id="29843-209">To guarantee the lowest recovery time during outages, the paying customers' tenant databases are geo-replicated with 50% of the primary databases in each of the two regions.</span></span> <span data-ttu-id="29843-210">Hasonlóképpen minden egyes régió van 50 %-a másodlagos adatbázisok.</span><span class="sxs-lookup"><span data-stu-id="29843-210">Similarly, each region has 50% of the secondary databases.</span></span> <span data-ttu-id="29843-211">Ezzel a módszerrel a régió nem érhető el, ha a fizetős ügyfelek adatbázisok csak 50 %-át érintett és kell feladatátadáshoz használhat.</span><span class="sxs-lookup"><span data-stu-id="29843-211">This way, if a region is offline, only 50% of the paid customers' databases are impacted and have to fail over.</span></span> <span data-ttu-id="29843-212">Az egyéb adatbázisok változatlanok maradnak.</span><span class="sxs-lookup"><span data-stu-id="29843-212">The other databases remain intact.</span></span> <span data-ttu-id="29843-213">Ez a konfiguráció a következő ábrán látható:</span><span class="sxs-lookup"><span data-stu-id="29843-213">This configuration is illustrated in the following diagram:</span></span>

![4. ábra](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-7.png)

<span data-ttu-id="29843-215">Mivel az előző esetben a felügyeleti adatbázisok aktívak meglehetősen úgy állítsa be ezeket georeplikált az önálló adatbázisok (1).</span><span class="sxs-lookup"><span data-stu-id="29843-215">As in the previous scenarios, the management databases are quite active so configure them as single geo-replicated databases (1).</span></span> <span data-ttu-id="29843-216">Ez biztosítja az új ügyfél kiszámítható teljesítmény, előfizetések, a profil frissítések és az egyéb felügyeleti műveleteket.</span><span class="sxs-lookup"><span data-stu-id="29843-216">This ensures the predictable performance of the new customer subscriptions, profile updates and other management operations.</span></span> <span data-ttu-id="29843-217">A régió az elsődleges régióban, a felügyeleti adatbázisok és a régió B használt felügyeleti adatbázisok helyreállításához.</span><span class="sxs-lookup"><span data-stu-id="29843-217">Region A is the primary region for the management databases and the region B is used for recovery of the management databases.</span></span>

<span data-ttu-id="29843-218">A fizető vevők bérlői adatbázisok georeplikált is, de az elsődleges és másodlagos elosztva terület A és B (2) a régióban.</span><span class="sxs-lookup"><span data-stu-id="29843-218">The paying customers’ tenant databases are also geo-replicated but with primaries and secondaries split between region A and region B (2).</span></span> <span data-ttu-id="29843-219">Ezzel a módszerrel a bérlő elsődleges adatbázisok, a kimaradást okozó negatív hatással is átveheti a többi régiónál és elérhetővé válnak.</span><span class="sxs-lookup"><span data-stu-id="29843-219">This way, the tenant primary databases impacted by the outage can fail over to the other region and become available.</span></span> <span data-ttu-id="29843-220">A másik fele a bérlő adatbázisok nem kell minden érintett.</span><span class="sxs-lookup"><span data-stu-id="29843-220">The other half of the tenant databases are not be impacted at all.</span></span> 

<span data-ttu-id="29843-221">A következő diagram azt ábrázolja, a helyreállítási lépésekkel régióban A. nem tervezett kimaradás esetén</span><span class="sxs-lookup"><span data-stu-id="29843-221">The next diagram illustrates the recovery steps to take if  an outage occurs in region A.</span></span>

![5. ábra](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-8.png)

* <span data-ttu-id="29843-223">Azonnal feladatátvételt a B régióban (3) a felügyeleti adatbázisok.</span><span class="sxs-lookup"><span data-stu-id="29843-223">Immediately fail over the management databases to region B (3).</span></span>
* <span data-ttu-id="29843-224">Módosítsa az alkalmazás kapcsolati karakterláncot, hogy az új fiókokat és a bérlői adatbázisok B régióban jönnek létre, és a meglévő bérlő adatbázisok találhatók van, valamint a felügyeleti adatbázisok régióban B. Módosítsa a felügyeleti adatbázisok mutasson.</span><span class="sxs-lookup"><span data-stu-id="29843-224">Change the application’s connection string to point to the management databases in region B. Modify the management databases to make sure the new accounts and tenant databases are created in region B and the existing tenant databases are found there as well.</span></span> <span data-ttu-id="29843-225">A meglévő próba felhasználók tekintse meg az adatok átmenetileg nem érhető el.</span><span class="sxs-lookup"><span data-stu-id="29843-225">The existing trial customers see their data temporarily unavailable.</span></span>
* <span data-ttu-id="29843-226">Feladatok átadása a fizetős bérlő adatbázisok készlethez régióban B azonnal visszaállítása a rendelkezésre állásuk (4) 2.</span><span class="sxs-lookup"><span data-stu-id="29843-226">Fail over the paid tenant's databases to pool 2 in region B to immediately restore their availability (4).</span></span> <span data-ttu-id="29843-227">Mivel a feladatátvételt a gyors metaadatok szint módosítása, akkor fontolja meg az optimalizálás, ahol az egyes feladatátvételek lépésüket az igény szerinti a végfelhasználói kapcsolatok.</span><span class="sxs-lookup"><span data-stu-id="29843-227">Since the failover is a quick metadata level change, you may consider an optimization where the individual failovers are triggered on demand by the end-user connections.</span></span> 
* <span data-ttu-id="29843-228">Most óta készlet 2 csak az elsődleges adatbázist, az alkalmazáskészlet növeli a teljes munkaterhelés tartalmaz, és azonnal növelheti a eDTU méretét (5).</span><span class="sxs-lookup"><span data-stu-id="29843-228">Since now pool 2 contains only primary databases, the total workload in the pool increases and can immediately increase its eDTU size (5).</span></span> 
* <span data-ttu-id="29843-229">Hozzon létre új rugalmas készlet neve és a próbaverziós felhasználók adatbázisok (6) a B régióban azonos konfigurációval.</span><span class="sxs-lookup"><span data-stu-id="29843-229">Create the new elastic pool with the same name and the same configuration in the region B for the trial customers' databases (6).</span></span> 
* <span data-ttu-id="29843-230">A készlet létrehozása után a georedundáns helyreállítás használatával állítsa vissza az egyes próbabérlet adatbázist (7) készletbe.</span><span class="sxs-lookup"><span data-stu-id="29843-230">Once the pool is created use geo-restore to restore the individual trial tenant database into the pool (7).</span></span> <span data-ttu-id="29843-231">Vegye figyelembe a végfelhasználói kapcsolatok által az egyes visszaállítások váltanak, vagy néhány más alkalmazás-specifikus prioritás sémát használja.</span><span class="sxs-lookup"><span data-stu-id="29843-231">You can consider triggering the individual restores by the end-user connections or use some other application-specific priority scheme.</span></span>

> [!NOTE]
> <span data-ttu-id="29843-232">A feladatátvételi művelet aszinkron.</span><span class="sxs-lookup"><span data-stu-id="29843-232">The failover operation is asynchronous.</span></span> <span data-ttu-id="29843-233">A helyreállítási idő minimalizálása érdekében fontos, hogy a bérlő adatbázisok feladatátvételi parancs legalább 20 adatbázisok kötegekben hajtható végre.</span><span class="sxs-lookup"><span data-stu-id="29843-233">To minimize the recovery time, it is important that you execute the tenant databases' failover command in batches of at least 20 databases.</span></span> 
> 

<span data-ttu-id="29843-234">Ezen a ponton az alkalmazás újra online állapotba kerül régióban a b kiszolgálóra. Minden fizető vevők férhetnek hozzá az adataikhoz rendelkezik, amíg a próba ügyfél tapasztalhat késleltetés az adatok elérése közben.</span><span class="sxs-lookup"><span data-stu-id="29843-234">At this point your application is back online in region B. All paying customers have access to their data while the trial customers experience delay when accessing their data.</span></span>

<span data-ttu-id="29843-235">A régió helyreállításakor el kell döntenie, ha a próbaverziós felhasználók vagy a feladat-visszavétel használja a próbaverziós felhasználók régióban A. régió B használni kívánt Egy feltétel lehet módosítható, mert a helyreállítási próbabérlet-adatbázisok %.</span><span class="sxs-lookup"><span data-stu-id="29843-235">When region A is recovered you need to decide if you want to use region B for trial customers or failback to using the trial customers pool in region A. One criteria could be the % of trial tenant databases modified since the recovery.</span></span> <span data-ttu-id="29843-236">Függetlenül attól, hogy döntést kell újra egyensúlyba kell hoznia a fizetős bérlők között két rendelkezik.</span><span class="sxs-lookup"><span data-stu-id="29843-236">Regardless of that decision, you need to re-balance the paid tenants between two pools.</span></span> <span data-ttu-id="29843-237">a következő ábra a folyamatát mutatja be, amikor a próbabérlet adatbázisok visszaadják feladataikat A. régió</span><span class="sxs-lookup"><span data-stu-id="29843-237">the next diagram illustrates the process when the trial tenant databases fail back to region A.</span></span>  

![6. ábra](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-9.png)

* <span data-ttu-id="29843-239">Megszakítja a vész-Helyreállítási próbakészletbe tartozó összes függőben lévő georedundáns helyreállítás kérelem.</span><span class="sxs-lookup"><span data-stu-id="29843-239">Cancel all outstanding geo-restore requests to trial DR pool.</span></span>   
* <span data-ttu-id="29843-240">Feladatok átadása a felügyeleti adatbázisban (8).</span><span class="sxs-lookup"><span data-stu-id="29843-240">Fail over the management database (8).</span></span> <span data-ttu-id="29843-241">A régió helyreállítása után a régi elsődleges automatikusan a másodlagos inaktívvá vált.</span><span class="sxs-lookup"><span data-stu-id="29843-241">After the region’s recovery, the old primary automatically became the secondary.</span></span> <span data-ttu-id="29843-242">Most újra lesz az elsődleges.</span><span class="sxs-lookup"><span data-stu-id="29843-242">Now it becomes the primary again.</span></span>  
* <span data-ttu-id="29843-243">Válassza ki, melyik fizetős bérlői adatbázisok visszaadják feladataikat készlet 1 – kezdeményezési feladatátvételt a másodlagos adatbázis (9).</span><span class="sxs-lookup"><span data-stu-id="29843-243">Select which paid tenant databases fail back to pool 1 and initiate failover to their secondaries (9).</span></span> <span data-ttu-id="29843-244">A régió helyreállítását követően 1 alkalmazáskészletben lévő összes adatbázis automatikusan másodlagos inaktívvá vált.</span><span class="sxs-lookup"><span data-stu-id="29843-244">After the region’s recovery, all databases in pool 1 automatically became secondaries.</span></span> <span data-ttu-id="29843-245">Most 50 %-át őket elsődleges ismét válik.</span><span class="sxs-lookup"><span data-stu-id="29843-245">Now 50% of them become primaries again.</span></span> 
* <span data-ttu-id="29843-246">Az eredeti edtu-k (10) 2-készlet méretének csökkentése.</span><span class="sxs-lookup"><span data-stu-id="29843-246">Reduce the size of pool 2 to the original eDTU (10).</span></span>
* <span data-ttu-id="29843-247">Készlet összes B régióban próba adatbázisok visszaállítani, csak olvasható (11).</span><span class="sxs-lookup"><span data-stu-id="29843-247">Set all restored trial databases in the region B to read-only (11).</span></span>
* <span data-ttu-id="29843-248">Az egyes adatbázisok a próba DR-készletben a helyreállítási óta megváltozott nevezze át vagy törölje a megfelelő adatbázist az elsődleges próbakészletben (12).</span><span class="sxs-lookup"><span data-stu-id="29843-248">For each database in the trial DR pool that has changed since the recovery, rename or delete the corresponding database in the trial primary pool (12).</span></span> 
* <span data-ttu-id="29843-249">Másolja a frissített adatbázisok a vész-Helyreállítási készlet az elsődleges készlet (13).</span><span class="sxs-lookup"><span data-stu-id="29843-249">Copy the updated databases from the DR pool to the primary pool (13).</span></span> 
* <span data-ttu-id="29843-250">[14] DR-készlet törlése</span><span class="sxs-lookup"><span data-stu-id="29843-250">Delete the DR pool (14)</span></span> 

<span data-ttu-id="29843-251">A kulcs **előnyöket** e stratégia vannak:</span><span class="sxs-lookup"><span data-stu-id="29843-251">The key **benefits** of this strategy are:</span></span>

* <span data-ttu-id="29843-252">Támogatja a legtöbb agresszív SLA-t a fizető vevők, biztos lehet benne, hogy nem tervezett kimaradás nem befolyásolja a több mint 50 %-a bérlői adatbázisok.</span><span class="sxs-lookup"><span data-stu-id="29843-252">It supports the most aggressive SLA for the paying customers because it ensures that an outage cannot impact more than 50% of the tenant databases.</span></span> 
* <span data-ttu-id="29843-253">Ez garantálja, hogy az új kísérletek feloldja-e, amint az eljárást vész-Helyreállítási készlet jön létre, a helyreállítás során.</span><span class="sxs-lookup"><span data-stu-id="29843-253">It guarantees that the new trials are unblocked as soon as the trail DR pool is created during the recovery.</span></span> 
* <span data-ttu-id="29843-254">Ez lehetővé teszi, hogy a tárolókészlet-kapacitást, 50 %-készlet 1 másodlagos adatbázisok hatékonyabb kihasználását, és készlet 2 garantáltan kevésbé aktív, mint az elsődleges adatbázis.</span><span class="sxs-lookup"><span data-stu-id="29843-254">It allows more efficient use of the pool capacity as 50% of secondary databases in pool 1 and pool 2 are guaranteed to be less active than the primary databases.</span></span>

<span data-ttu-id="29843-255">A fő **kompromisszumot** vannak:</span><span class="sxs-lookup"><span data-stu-id="29843-255">The main **trade-offs** are:</span></span>

* <span data-ttu-id="29843-256">A CRUD műveletek az felügyeleti adatbázisokhoz kisebb késést biztosít azon végfelhasználók számára, a végfelhasználók számára, az elsődleges felügyeleti adatbázis elleni végrehajtás régió B csatlakozik a régióban, mint A kapcsolat van.</span><span class="sxs-lookup"><span data-stu-id="29843-256">The CRUD operations against the management databases have lower latency for the end users connected to region A than for the end users connected to region B as they are executed against the primary of the management databases.</span></span>
* <span data-ttu-id="29843-257">A felügyeleti adatbázisban összetettebb kialakítása igényel.</span><span class="sxs-lookup"><span data-stu-id="29843-257">It requires more complex design of the management database.</span></span> <span data-ttu-id="29843-258">Például minden bérlő rekord tartalmazza-e a location kódcímke, módosítani kell a feladatátvételi és a feladat-visszavétel során.</span><span class="sxs-lookup"><span data-stu-id="29843-258">For example, each tenant record has a location tag that needs to be changed during failover and failback.</span></span>  
* <span data-ttu-id="29843-259">A fizető vevők szokásosnál alacsonyabb teljesítményt tapasztalhat, a készlet frissítés régióban B befejeződéséig.</span><span class="sxs-lookup"><span data-stu-id="29843-259">The paying customers may experience lower performance than usual until the pool upgrade in region B is completed.</span></span> 

## <a name="summary"></a><span data-ttu-id="29843-260">Összefoglalás</span><span class="sxs-lookup"><span data-stu-id="29843-260">Summary</span></span>
<span data-ttu-id="29843-261">Ez a cikk foglalkozik a több-bérlős Szolgáltatottszoftver-ISV alkalmazás által használt adatbázis-rétegből vész-helyreállítási stratégiái.</span><span class="sxs-lookup"><span data-stu-id="29843-261">This article focuses on the disaster recovery strategies for the database tier used by a SaaS ISV multi-tenant application.</span></span> <span data-ttu-id="29843-262">Stratégia van annak megfelelően kell elvégezni az alkalmazás, például az üzleti modell, az SLA-t szeretne nyújtsanak az ügyfeleknek, a költségvetési megkötés stb. Minden ismertetett stratégia előnyei és kompromisszum összegzi, így sikerült tájékozott döntést.</span><span class="sxs-lookup"><span data-stu-id="29843-262">The strategy you choose is based on the needs of the application, such as the business model, the SLA you want to offer to your customers, budget constraint etc. Each described strategy outlines the benefits and trade-off so you could make an informed decision.</span></span> <span data-ttu-id="29843-263">Valószínűleg az adott alkalmazás emellett egyéb Azure összetevőket tartalmazza.</span><span class="sxs-lookup"><span data-stu-id="29843-263">Also, your specific application likely includes other Azure components.</span></span> <span data-ttu-id="29843-264">Ezért tekintse át az üzleti folytonossági útmutatást és levezényelni a visszaállítást az adatbázis-rétegből velük.</span><span class="sxs-lookup"><span data-stu-id="29843-264">So you review their business continuity guidance and orchestrate the recovery of the database tier with them.</span></span> <span data-ttu-id="29843-265">Helyreállítás az adatbázis-alkalmazások az Azure-ban kezelésével kapcsolatos további tudnivalókért tekintse meg [Designing vész-helyreállítási megoldások](sql-database-designing-cloud-solutions-for-disaster-recovery.md).</span><span class="sxs-lookup"><span data-stu-id="29843-265">To learn more about managing recovery of database applications in Azure, refer to [Designing cloud solutions for disaster recovery](sql-database-designing-cloud-solutions-for-disaster-recovery.md).</span></span>  

## <a name="next-steps"></a><span data-ttu-id="29843-266">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="29843-266">Next steps</span></span>
* <span data-ttu-id="29843-267">További tudnivalók az Azure SQL adatbázis automatikus biztonsági mentés című [SQL-adatbázis biztonsági mentések automatikus](sql-database-automated-backups.md).</span><span class="sxs-lookup"><span data-stu-id="29843-267">To learn about Azure SQL Database automated backups, see [SQL Database automated backups](sql-database-automated-backups.md).</span></span>
* <span data-ttu-id="29843-268">Egy üzleti folytonosság – áttekintés és forgatókönyvek: [üzleti folytonosság – áttekintés](sql-database-business-continuity.md).</span><span class="sxs-lookup"><span data-stu-id="29843-268">For a business continuity overview and scenarios, see [Business continuity overview](sql-database-business-continuity.md).</span></span>
* <span data-ttu-id="29843-269">A helyreállítás automatikus biztonsági mentés használatával kapcsolatos további tudnivalókért lásd: [adatbázis visszaállítása a szolgáltatás által kezdeményezett biztonsági másolatból](sql-database-recovery-using-backups.md).</span><span class="sxs-lookup"><span data-stu-id="29843-269">To learn about using automated backups for recovery, see [restore a database from the service-initiated backups](sql-database-recovery-using-backups.md).</span></span>
* <span data-ttu-id="29843-270">Gyorsabb helyreállítási beállításokkal kapcsolatos további tudnivalókért lásd: [aktív georeplikáció](sql-database-geo-replication-overview.md).</span><span class="sxs-lookup"><span data-stu-id="29843-270">To learn about faster recovery options, see [active geo-replication](sql-database-geo-replication-overview.md).</span></span>
* <span data-ttu-id="29843-271">Automatikus biztonsági mentés az Archiválás használatával kapcsolatos további tudnivalókért lásd: [adatbázis másolása](sql-database-copy.md).</span><span class="sxs-lookup"><span data-stu-id="29843-271">To learn about using automated backups for archiving, see [database copy](sql-database-copy.md).</span></span>

