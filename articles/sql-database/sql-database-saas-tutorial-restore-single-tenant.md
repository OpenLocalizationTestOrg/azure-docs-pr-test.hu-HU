---
title: "egy Azure SQL Database adatbázist egy több-bérlős alkalmazásban aaaRestore |} Microsoft Docs"
description: "Ismerje meg, hogyan toorestore egyetlen bérlők SQL adatbázis véletlenül az adatok törlése után"
keywords: "sql database-oktatóanyag"
services: sql-database
documentationcenter: 
author: stevestein
manager: jhubbard
editor: 
ms.assetid: 
ms.service: sql-database
ms.custom: scale out apps
ms.workload: data-management
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/10/2017
ms.author: billgib;sstein
ms.openlocfilehash: 8507ecec2424c135f1859b88ebf2bb4e17538a58
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/06/2017
---
# <a name="restore-a-wingtip-saas-tenants-sql-database"></a><span data-ttu-id="3e39f-104">Bérlők Wingtip SaaS SQL-adatbázis visszaállítása</span><span class="sxs-lookup"><span data-stu-id="3e39f-104">Restore a Wingtip SaaS tenants SQL database</span></span>

<span data-ttu-id="3e39f-105">hello Wingtip SaaS-alkalmazás épül, ahol az egyes bérlők rendelkezik saját adatbázis egy adatbázis-/-bérlős modell használatával.</span><span class="sxs-lookup"><span data-stu-id="3e39f-105">hello Wingtip SaaS app is built using a database-per-tenant model, where each tenant has their own database.</span></span> <span data-ttu-id="3e39f-106">Ez a modell hello előnyei egyike, hogy az egyszerű toorestore egy egybérlős adatai elkülönítve a többi bérlő befolyásolása nélkül.</span><span class="sxs-lookup"><span data-stu-id="3e39f-106">One of hello benefits of this model is that it is easy toorestore a single tenant’s data in isolation without impacting other tenants.</span></span>

<span data-ttu-id="3e39f-107">Ebben az oktatóanyagban elsajátíthatja, két adatok helyreállítási minták:</span><span class="sxs-lookup"><span data-stu-id="3e39f-107">In this tutorial you learn two data recovery patterns:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="3e39f-108">Egy párhuzamos adatbázisba (párhuzamos-) adatbázis visszaállítása</span><span class="sxs-lookup"><span data-stu-id="3e39f-108">Restore a database into a parallel database (side-by-side)</span></span>
> * <span data-ttu-id="3e39f-109">Egy helyen adatbázis visszaállítása</span><span class="sxs-lookup"><span data-stu-id="3e39f-109">Restore a database in place</span></span>


|||
|:--|:--|
| <span data-ttu-id="3e39f-110">**Bérlői tooa előzetes pont visszaállítása időpontra, egy párhuzamos adatbázisba**</span><span class="sxs-lookup"><span data-stu-id="3e39f-110">**Restore tenant tooa prior point in time, into a parallel database**</span></span> | <span data-ttu-id="3e39f-111">Ebben a mintában is használható a hello bérlő tekintse át, a naplózás, a megfelelőségi, stb. hello eredeti adatbázis online és változatlan marad.</span><span class="sxs-lookup"><span data-stu-id="3e39f-111">This pattern can be used by hello tenant for review, auditing, compliance, etc. hello original database remains online and unchanged.</span></span> |
| <span data-ttu-id="3e39f-112">**Bérlői helyben visszaállítása**</span><span class="sxs-lookup"><span data-stu-id="3e39f-112">**Restore tenant in-place**</span></span> | <span data-ttu-id="3e39f-113">Ebben a mintában általánosan használt toorecover egy bérlő tooa előzetes pontot jelöl, miután a bérlő véletlenül törli az adatokat.</span><span class="sxs-lookup"><span data-stu-id="3e39f-113">This pattern is typically used toorecover a tenant tooa prior point in time, after a tenant accidentally deletes data.</span></span> <span data-ttu-id="3e39f-114">hello eredeti adatbázis offline állapotba, és a visszaállított adatbázis hello helyére.</span><span class="sxs-lookup"><span data-stu-id="3e39f-114">hello original database is taken offline, and replaced with hello restored database.</span></span> |
|||

<span data-ttu-id="3e39f-115">Ebben az oktatóanyagban a következő előfeltételek győződjön meg arról, hogy hello elvégzése toocomplete:</span><span class="sxs-lookup"><span data-stu-id="3e39f-115">toocomplete this tutorial, make sure hello following prerequisites are completed:</span></span>

* <span data-ttu-id="3e39f-116">hello Wingtip SaaS-alkalmazás telepítve van.</span><span class="sxs-lookup"><span data-stu-id="3e39f-116">hello Wingtip SaaS app is deployed.</span></span> <span data-ttu-id="3e39f-117">toodeploy öt percen belül, lásd: [központi telepítése és felfedezése hello Wingtip SaaS-alkalmazáshoz](sql-database-saas-tutorial.md)</span><span class="sxs-lookup"><span data-stu-id="3e39f-117">toodeploy in less than five minutes, see [Deploy and explore hello Wingtip SaaS application](sql-database-saas-tutorial.md)</span></span>
* <span data-ttu-id="3e39f-118">Az Azure PowerShell telepítve van.</span><span class="sxs-lookup"><span data-stu-id="3e39f-118">Azure PowerShell is installed.</span></span> <span data-ttu-id="3e39f-119">A részletekért lásd: [Ismerkedés az Azure PowerShell-lel](https://docs.microsoft.com/powershell/azure/get-started-azureps)</span><span class="sxs-lookup"><span data-stu-id="3e39f-119">For details, see [Getting started with Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps)</span></span>

## <a name="introduction-toohello-saas-tenant-restore-pattern"></a><span data-ttu-id="3e39f-120">Bevezetés toohello SaaS bérlői visszaállítási minta</span><span class="sxs-lookup"><span data-stu-id="3e39f-120">Introduction toohello SaaS tenant restore pattern</span></span>

<span data-ttu-id="3e39f-121">Hello bérlő mintát visszaállításához nincsenek egy adott bérlő adatok visszaállításához két egyszerű mintát.</span><span class="sxs-lookup"><span data-stu-id="3e39f-121">For hello tenant restore pattern, there are two simple patterns for restoring an individual tenant's data.</span></span> <span data-ttu-id="3e39f-122">Bérlői adatbázisok el különítve egymástól, mert egy bérlő visszaállítása nem hatást gyakorol semmilyen más bérlővel adatokat.</span><span class="sxs-lookup"><span data-stu-id="3e39f-122">Because tenant databases are isolated from each other, restoring one tenant has no impact on any other tenant's data.</span></span>

<span data-ttu-id="3e39f-123">Hello első mintában új adatbázisba visszaállítani adatait.</span><span class="sxs-lookup"><span data-stu-id="3e39f-123">In hello first pattern, data is restored into a new database.</span></span> <span data-ttu-id="3e39f-124">hello bérlői majd kap toothis adatbázist a termelési adatokkal együtt.</span><span class="sxs-lookup"><span data-stu-id="3e39f-124">hello tenant is then given access toothis database alongside their production data.</span></span> <span data-ttu-id="3e39f-125">Ebben a mintában lehetővé teszi, hogy a egy Bérlői rendszergazda tooreview hello vissza adatokat, és esetleg azt tooselectively felülírja a jelenlegi adatértékekkel.</span><span class="sxs-lookup"><span data-stu-id="3e39f-125">This pattern allows a tenant admin tooreview hello restored data and potentially use it tooselectively overwrite current data values.</span></span> <span data-ttu-id="3e39f-126">Már fel toohello SaaS app Tervező toodetermine milyen kifinomult hello adat-helyreállítási beállítások kell lennie.</span><span class="sxs-lookup"><span data-stu-id="3e39f-126">It's up toohello SaaS app designer toodetermine just how sophisticated hello data recovery options should be.</span></span> <span data-ttu-id="3e39f-127">Egyszerűen alatt álló adatokat képes tooreview hello állapotba, amelyben egy időben minden egyes esetekben szükséges lehet.</span><span class="sxs-lookup"><span data-stu-id="3e39f-127">Simply being able tooreview data in hello state it was in at a given point in time may be all that is required in some scenarios.</span></span> <span data-ttu-id="3e39f-128">Ha hello adatbázis használ [georeplikáció](sql-database-geo-replication-overview.md), javasoljuk, hogy hello szükséges az adatok másolása vissza hello másolási hello eredeti adatbázisba.</span><span class="sxs-lookup"><span data-stu-id="3e39f-128">If hello database uses [geo-replication](sql-database-geo-replication-overview.md), we recommend copying hello required data from hello restored copy into hello original database.</span></span> <span data-ttu-id="3e39f-129">Ha lecseréli a hello eredeti adatbázis visszaállítása hello adatbázissal, meg kell tooreconfigure, majd szinkronizálja újra a georeplikáció.</span><span class="sxs-lookup"><span data-stu-id="3e39f-129">If you replace hello original database with hello restored database, you need tooreconfigure and resynchronize geo-replication.</span></span>

<span data-ttu-id="3e39f-130">Hello második mintát, amely azt feltételezi, hogy hello bérlőre szenvedett elvesztése vagy sérülése, adatok, a hello bérlői éles adatbázis visszaállítása korábbi pont tooa időben.</span><span class="sxs-lookup"><span data-stu-id="3e39f-130">In hello second pattern, which assumes that hello tenant has suffered a loss or corruption of data, hello tenant’s production database is restored tooa prior point in time.</span></span> <span data-ttu-id="3e39f-131">Hely mintában hello visszaállítás egy korábbi hello bérlői offline állapotba egy rövid ideig hello adatbázis visszaállítása, és automatikusan visszaáll online állapotba.</span><span class="sxs-lookup"><span data-stu-id="3e39f-131">In hello restore in place pattern, hello tenant is taken offline for a brief time while hello database is restored and brought back online.</span></span> <span data-ttu-id="3e39f-132">hello eredeti adatbázis törlődik, de továbbra is visszaállíthatók a Ha toogo hátsó tooan kell időben is korábbi állapotba.</span><span class="sxs-lookup"><span data-stu-id="3e39f-132">hello original database is deleted, but can still be restored from if you need toogo back tooan even earlier point in time.</span></span> <span data-ttu-id="3e39f-133">Ez a minta egy változata névre történő átnevezése volt hello adatbázis helyett a törlés, bár átnevezési hello adatbázis nincs további adatbiztonsági előnyösebb kínál.</span><span class="sxs-lookup"><span data-stu-id="3e39f-133">A variation of this pattern could rename hello database instead of deleting it, although renaming hello database offers no additional advantage in terms of data security.</span></span>

## <a name="get-hello-wingtip-application-scripts"></a><span data-ttu-id="3e39f-134">Hello Wingtip alkalmazás parancsfájlok beolvasása</span><span class="sxs-lookup"><span data-stu-id="3e39f-134">Get hello Wingtip application scripts</span></span>

<span data-ttu-id="3e39f-135">hello Wingtip Szolgáltatottszoftver-parancsfájlok és az alkalmazás forráskódjához találhatók hello [WingtipSaaS](https://github.com/Microsoft/WingtipSaaS) github-tárház.</span><span class="sxs-lookup"><span data-stu-id="3e39f-135">hello Wingtip SaaS scripts and application source code are available in hello [WingtipSaaS](https://github.com/Microsoft/WingtipSaaS) github repo.</span></span> <span data-ttu-id="3e39f-136">[Lépések toodownload hello Wingtip SaaS parancsfájlok](sql-database-wtp-overview.md#download-and-unblock-the-wingtip-saas-scripts).</span><span class="sxs-lookup"><span data-stu-id="3e39f-136">[Steps toodownload hello Wingtip SaaS scripts](sql-database-wtp-overview.md#download-and-unblock-the-wingtip-saas-scripts).</span></span>

## <a name="simulate-a-tenant-accidentally-deleting-data"></a><span data-ttu-id="3e39f-137">A bérlő véletlenül törli az adatok szimulálása</span><span class="sxs-lookup"><span data-stu-id="3e39f-137">Simulate a tenant accidentally deleting data</span></span>

<span data-ttu-id="3e39f-138">toodemonstrate helyreállítási forgatókönyvekben kell túl*véletlenül* hello bérlői adatbázisok közül az egyik adatokat törli.</span><span class="sxs-lookup"><span data-stu-id="3e39f-138">toodemonstrate these recovery scenarios, we need too*accidentally* delete some data in one of hello tenant databases.</span></span> <span data-ttu-id="3e39f-139">Rekordot törölheti, amíg a hivatkozási integritás megsértésének hello következő lépésben állítja be hello bemutató toonot beolvasása blokkolja!</span><span class="sxs-lookup"><span data-stu-id="3e39f-139">While you can delete any record, hello next step sets up hello demo toonot get blocked by referential integrity violations!</span></span> <span data-ttu-id="3e39f-140">Bővíti Ezenkívül egyes jegy beszerzési adatokat is használhatja a hello *Wingtip SaaS Analytics oktatóanyagok*.</span><span class="sxs-lookup"><span data-stu-id="3e39f-140">It also adds some ticket purchase data you can use later in hello *Wingtip SaaS Analytics tutorials*.</span></span>

<span data-ttu-id="3e39f-141">Hello jegy generátor parancsfájl futtatása, és hozzon létre további adatokat.</span><span class="sxs-lookup"><span data-stu-id="3e39f-141">Run hello ticket generator script and create additional data.</span></span> <span data-ttu-id="3e39f-142">hello jegy generátor szándékosan nem vásárolja meg a jegyektől az egyes bérlők utolsó eseményekhez.</span><span class="sxs-lookup"><span data-stu-id="3e39f-142">hello ticket generator intentionally does not purchase tickets for each tenants last event.</span></span>

1. <span data-ttu-id="3e39f-143">Nyissa meg... \\Tanulási modulok\\segédprogramok\\*bemutató-TicketGenerator.ps1* a hello *PowerShell ISE*</span><span class="sxs-lookup"><span data-stu-id="3e39f-143">Open ...\\Learning Modules\\Utilities\\*Demo-TicketGenerator.ps1* in hello *PowerShell ISE*</span></span>
1. <span data-ttu-id="3e39f-144">Nyomja le az **F5** toorun parancsfájl hello és ügyfelek készítése és értékesítési adatokat jegyet.</span><span class="sxs-lookup"><span data-stu-id="3e39f-144">Press **F5** toorun hello script and generate customers and ticket sales data.</span></span>


### <a name="open-hello-events-app-tooreview-hello-current-events"></a><span data-ttu-id="3e39f-145">Nyissa meg a hello események app tooreview hello aktuális események</span><span class="sxs-lookup"><span data-stu-id="3e39f-145">Open hello Events app tooreview hello current events</span></span>

1. <span data-ttu-id="3e39f-146">Nyissa meg hello *események Hub* (http://events.wtp.&lt; felhasználói&gt;. trafficmanager.net), majd **Contoso energiaoptimalizálást egyszerre Hall**:</span><span class="sxs-lookup"><span data-stu-id="3e39f-146">Open hello *Events Hub* (http://events.wtp.&lt;user&gt;.trafficmanager.net) and click **Contoso Concert Hall**:</span></span>

   ![eseményközpont](media/sql-database-saas-tutorial-restore-single-tenant/events-hub.png)

1. <span data-ttu-id="3e39f-148">Görgessen események hello listáját, és jegyezze fel az utolsó esemény hello hello listában:</span><span class="sxs-lookup"><span data-stu-id="3e39f-148">Scroll hello list of events and make a note of hello last event in hello list:</span></span>

   ![utolsó esemény](media/sql-database-saas-tutorial-restore-single-tenant/last-event.png)


### <a name="run-hello-demo-scenario-tooaccidentally-delete-hello-last-event"></a><span data-ttu-id="3e39f-150">Futtassa a hello bemutató forgatókönyvet tooaccidentally delete hello utolsó esemény</span><span class="sxs-lookup"><span data-stu-id="3e39f-150">Run hello demo scenario tooaccidentally delete hello last event</span></span>

1. <span data-ttu-id="3e39f-151">Nyissa meg... \\Tanulási modulok\\az üzletmenet folytonossága és vészhelyreállítás\\RestoreTenant\\*bemutató-RestoreTenant.ps1* a hello *PowerShell ISE*, és a set hello a következő értéket:</span><span class="sxs-lookup"><span data-stu-id="3e39f-151">Open ...\\Learning Modules\\Business Continuity and Disaster Recovery\\RestoreTenant\\*Demo-RestoreTenant.ps1* in hello *PowerShell ISE*, and set hello following value:</span></span>
   * <span data-ttu-id="3e39f-152">**$DemoScenario** = **1**, túl beállíthatja**1** -jegy értékesítés nélküli események törlése.</span><span class="sxs-lookup"><span data-stu-id="3e39f-152">**$DemoScenario** = **1**, Set too**1** - Delete events with no ticket sales.</span></span>
1. <span data-ttu-id="3e39f-153">Nyomja le az **F5** toorun parancsfájl hello és hello utolsó esemény törlése.</span><span class="sxs-lookup"><span data-stu-id="3e39f-153">Press **F5** toorun hello script and delete hello last event.</span></span> <span data-ttu-id="3e39f-154">Egy megerősítő üzenet hasonló toohello következő kell megjelennie:</span><span class="sxs-lookup"><span data-stu-id="3e39f-154">You should see a confirmation message similar toohello following:</span></span>

   ```Console
   Deleting unsold events from Contoso Concert Hall ...
   Deleted event 'Seriously Strauss' from Contoso Concert Hall venue.
   ```

1. <span data-ttu-id="3e39f-155">Megnyílik a hello Contoso események lapot.</span><span class="sxs-lookup"><span data-stu-id="3e39f-155">hello Contoso events page opens.</span></span> <span data-ttu-id="3e39f-156">Görgessen lefelé, és győződjön meg arról hello esemény már nem.</span><span class="sxs-lookup"><span data-stu-id="3e39f-156">Scroll down and verify hello event is gone.</span></span> <span data-ttu-id="3e39f-157">Ha hello esemény továbbra is a hello listában, kattintson a frissítés, és győződjön meg arról eltűnt.</span><span class="sxs-lookup"><span data-stu-id="3e39f-157">If hello event is still in hello list, click refresh and verify it is gone.</span></span>

   ![utolsó esemény](media/sql-database-saas-tutorial-restore-single-tenant/last-event-deleted.png)


## <a name="restore-a-tenant-database-in-parallel-with-hello-production-database"></a><span data-ttu-id="3e39f-159">Hello éles adatbázis párhuzamosan bérlői adatbázis visszaállítása</span><span class="sxs-lookup"><span data-stu-id="3e39f-159">Restore a tenant database in parallel with hello production database</span></span>

<span data-ttu-id="3e39f-160">Ebben a gyakorlatban hello Contoso energiaoptimalizálást egyszerre Hall adatbázis tooa pont visszaállítása előtti hello esemény törölve lett.</span><span class="sxs-lookup"><span data-stu-id="3e39f-160">This exercise restores hello Contoso Concert Hall database tooa point in time before hello event was deleted.</span></span> <span data-ttu-id="3e39f-161">Hello esemény hello előző lépésekben törlését követően szeretné, hogy toorecover, és törölni hello adatok megtekintéséhez.</span><span class="sxs-lookup"><span data-stu-id="3e39f-161">After hello event is deleted in hello previous steps, you want toorecover and see hello deleted data.</span></span> <span data-ttu-id="3e39f-162">Nem kell toorestore az éles adatbázis törlése hello rekorddal, de más üzleti okokból kell toorecover hello régi adatbázis tooaccess hello régi adatokat.</span><span class="sxs-lookup"><span data-stu-id="3e39f-162">You don't need toorestore your production database with hello deleted record, but you need toorecover hello old database tooaccess hello old data for other business reasons.</span></span>

 <span data-ttu-id="3e39f-163">Hello *visszaállítási-TenantInParallel.ps1* parancsfájl adatbázis és a párhuzamos katalógusbejegyzés mindkét nevű hoz létre egy párhuzamos bérlői *ContosoConcertHall\_régi*.</span><span class="sxs-lookup"><span data-stu-id="3e39f-163">hello *Restore-TenantInParallel.ps1* script creates a parallel tenant database, and a parallel catalog entry both named *ContosoConcertHall\_old*.</span></span> <span data-ttu-id="3e39f-164">Ebben a mintában a visszaállítás olyan kisebb adatvesztés helyreállítás vagy megfelelőségi és naplózási helyreállítási forgatókönyveit.</span><span class="sxs-lookup"><span data-stu-id="3e39f-164">This pattern of restore is best suited for recovering from a minor data loss or for compliance and auditing recovery scenarios.</span></span> <span data-ttu-id="3e39f-165">Egyúttal hello használata esetén az ajánlott megközelítést alkalmazva [georeplikáció](sql-database-geo-replication-overview.md).</span><span class="sxs-lookup"><span data-stu-id="3e39f-165">It is also hello recommended approach when you are using [geo-replication](sql-database-geo-replication-overview.md).</span></span>

1. <span data-ttu-id="3e39f-166">Teljes hello [véletlenül törli az adatokat a felhasználó szimulálása](#simulate-a-tenant-accidentally-deleting-data) szakasz.</span><span class="sxs-lookup"><span data-stu-id="3e39f-166">Complete hello [simulate a user accidentally deleting data](#simulate-a-tenant-accidentally-deleting-data) section.</span></span>
1. <span data-ttu-id="3e39f-167">Nyissa meg... \\Tanulási modulok\\az üzletmenet folytonossága és vészhelyreállítás\\RestoreTenant\\_bemutató-RestoreTenant.ps1_ a hello *PowerShell ISE*.</span><span class="sxs-lookup"><span data-stu-id="3e39f-167">Open ...\\Learning Modules\\Business Continuity and Disaster Recovery\\RestoreTenant\\_Demo-RestoreTenant.ps1_ in hello *PowerShell ISE*.</span></span>
1. <span data-ttu-id="3e39f-168">Állítsa be **$DemoScenario** = **2**, állítsa ezt túl**2** túl*párhuzamos visszaállítási bérlői*.</span><span class="sxs-lookup"><span data-stu-id="3e39f-168">Set **$DemoScenario** = **2**, Set this too**2** too*Restore tenant in parallel*.</span></span>
1. <span data-ttu-id="3e39f-169">Nyomja le az **F5** toorun hello parancsfájl.</span><span class="sxs-lookup"><span data-stu-id="3e39f-169">Press **F5** toorun hello script.</span></span>

<span data-ttu-id="3e39f-170">hello parancsfájl hello bérlői adatbázis (tooa párhuzamos adatbázis) tooa pont visszaállítja az időben hello előző szakaszban hello esemény törlése előtt.</span><span class="sxs-lookup"><span data-stu-id="3e39f-170">hello script restores hello tenant database (tooa parallel database) tooa point in time before you deleted hello event in hello previous section.</span></span> <span data-ttu-id="3e39f-171">Ez létrehoz egy második adatbázist, eltávolítja a meglévő katalógus metaadatokat, hogy létezik az adatbázisban, és hozzáadja hello adatbázis toohello katalógust a hello *ContosoConcertHall\_régi* bejegyzés.</span><span class="sxs-lookup"><span data-stu-id="3e39f-171">It creates a second database, removes any existing catalog metadata that exists in this database, and adds hello database toohello catalog under hello *ContosoConcertHall\_old* entry.</span></span>

<span data-ttu-id="3e39f-172">hello bemutató-parancsfájl hello események lapot a böngészőben nyílik meg.</span><span class="sxs-lookup"><span data-stu-id="3e39f-172">hello demo script opens hello events page in your browser.</span></span> <span data-ttu-id="3e39f-173">Megjegyzés: a hello URL-CÍMRŐL: ```http://events.wtp.&lt;user&gt;.trafficmanager.net/contosoconcerthall_old``` , hogy ez látható hello visszaállított adatbázis ahol *_old* toohello neve kerül.</span><span class="sxs-lookup"><span data-stu-id="3e39f-173">Note from hello URL: ```http://events.wtp.&lt;user&gt;.trafficmanager.net/contosoconcerthall_old``` that this is showing data from hello restored database where *_old* is added toohello name.</span></span>

<span data-ttu-id="3e39f-174">Görgessen hello felsorolt események hello böngésző tooconfirm, amely az előző szakaszban hello törölt esemény hello vissza lett állítva.</span><span class="sxs-lookup"><span data-stu-id="3e39f-174">Scroll hello events listed in hello browser tooconfirm that hello event deleted in hello previous section has been restored.</span></span>

<span data-ttu-id="3e39f-175">Vegye figyelembe a exposing vissza hello bérlőre, egy további bérlői, a saját események app toobrowse jegyek valószínű toobe hogyan kellene megadnia egy bérlő access toorestored adatokat, de működik tooeasily bemutatják hello visszaállítási mintát.</span><span class="sxs-lookup"><span data-stu-id="3e39f-175">Note that exposing hello restored tenant as an additional tenant, with its own Events app toobrowse tickets, is unlikely toobe how you would provide a tenant access toorestored data, but serves tooeasily illustrate hello restore pattern.</span></span>

<span data-ttu-id="3e39f-176">A valóságban ugyanúgy valószínűleg csak tartsa meg a visszaállított adatbázis számára meghatározott ideig.</span><span class="sxs-lookup"><span data-stu-id="3e39f-176">In reality, you would probably only retain this restored database for a defined period.</span></span> <span data-ttu-id="3e39f-177">Vissza hello bérlői bejegyzés törlése után a hívó hello befejezte *Remove-RestoredTenant.ps1* parancsfájl.</span><span class="sxs-lookup"><span data-stu-id="3e39f-177">You can delete hello restored tenant entry once you are finished by calling hello *Remove-RestoredTenant.ps1* script.</span></span>

1. <span data-ttu-id="3e39f-178">Állítsa be **$DemoScenario** túl**4** tooselect hello *vissza eltávolítása bérlői* forgatókönyv.</span><span class="sxs-lookup"><span data-stu-id="3e39f-178">Set **$DemoScenario** too**4** tooselect hello *remove restored tenant* scenario.</span></span>
1. <span data-ttu-id="3e39f-179">**Végrehajtás** **használatával** **F5**</span><span class="sxs-lookup"><span data-stu-id="3e39f-179">**Execute** **using** **F5**</span></span>
1. <span data-ttu-id="3e39f-180">Hello *ContosoConcertHall\_régi* bejegyzés törlődik a hello katalógusból.</span><span class="sxs-lookup"><span data-stu-id="3e39f-180">hello *ContosoConcertHall\_old* entry is now deleted from hello catalog.</span></span> <span data-ttu-id="3e39f-181">Lépjen tovább, és zárja be a hello események lapot ennél a bérlőnél a böngészőben.</span><span class="sxs-lookup"><span data-stu-id="3e39f-181">Go ahead and close hello events page for this tenant in your browser.</span></span>


## <a name="restore-a-tenant-in-place-replacing-hello-existing-tenant-database"></a><span data-ttu-id="3e39f-182">A bérlő helyen, cseréje hello meglévő bérlő adatbázis visszaállítása</span><span class="sxs-lookup"><span data-stu-id="3e39f-182">Restore a tenant in place, replacing hello existing tenant database</span></span>

<span data-ttu-id="3e39f-183">Ebben a gyakorlatban hello Contoso energiaoptimalizálást egyszerre Hall bérlői tooa pont visszaállítása előtti hello esemény törölve lett.</span><span class="sxs-lookup"><span data-stu-id="3e39f-183">This exercise restores hello Contoso Concert Hall tenant tooa point in time before hello event was deleted.</span></span> <span data-ttu-id="3e39f-184">Hello *visszaállítási-TenantInPlace* parancsfájl adatbázisát állítja vissza a hello aktuális bérlőhöz adatbázis tooa új időben tooa korábbi időpontra mutat, és törli az eredeti adatbázis hello.</span><span class="sxs-lookup"><span data-stu-id="3e39f-184">hello *Restore-TenantInPlace* script restores hello current tenant database tooa new database pointing tooa previous point in time, and deletes hello original database.</span></span> <span data-ttu-id="3e39f-185">Ebben a mintában a visszaállítás olyan a bérlő hello jelentős adatvesztés lehet súlyos adatsérülés helyreállva tooaccommodate lenne.</span><span class="sxs-lookup"><span data-stu-id="3e39f-185">This pattern of restore is best suited for recovering from serious data corruption as there may be significant data loss that hello tenant would have tooaccommodate.</span></span>

1. <span data-ttu-id="3e39f-186">Nyissa meg **bemutató-RestoreTenant.ps1** a PowerShell ISE fájl</span><span class="sxs-lookup"><span data-stu-id="3e39f-186">Open **Demo-RestoreTenant.ps1** file in PowerShell ISE</span></span>
1. <span data-ttu-id="3e39f-187">Állítsa be **$DemoScenario** túl**5** tooselect hello *állítsa vissza a bérlő helye forgatókönyvben*.</span><span class="sxs-lookup"><span data-stu-id="3e39f-187">Set **$DemoScenario** too**5** tooselect hello *restore tenant in place scenario*.</span></span>
1. <span data-ttu-id="3e39f-188">Végrehajtás használatával **F5**.</span><span class="sxs-lookup"><span data-stu-id="3e39f-188">Execute using **F5**.</span></span>

<span data-ttu-id="3e39f-189">hello parancsfájl visszaállítja hello bérlői adatbázis tooa pont öt perc elteltével hello esemény törölve lett.</span><span class="sxs-lookup"><span data-stu-id="3e39f-189">hello script restores hello tenant database tooa point five minutes before hello event was deleted.</span></span> <span data-ttu-id="3e39f-190">Ennek érdekében első bérlői offline így további hello Contoso energiaoptimalizálást egyszerre Hall véve frissíti toohello adatokat.</span><span class="sxs-lookup"><span data-stu-id="3e39f-190">It does this by first taking hello Contoso Concert Hall tenant offline so there are no further updates toohello data.</span></span> <span data-ttu-id="3e39f-191">Egy párhuzamos adatbázis visszaállítása hello visszaállítási pont által létrehozott és nevű, majd az időbélyegzőnek tooensure hello adatbázis neve nem ütköznek a hello meglévő bérlő adatbázis nevét.</span><span class="sxs-lookup"><span data-stu-id="3e39f-191">Then, a parallel database is created by restoring from hello restore point and named with a timestamp tooensure hello database name does not conflict with hello existing tenant database name.</span></span> <span data-ttu-id="3e39f-192">A következő hello régi bérlői adatbázis törlődik, és a visszaállított adatbázis hello átnevezett toohello eredeti adatbázis neve.</span><span class="sxs-lookup"><span data-stu-id="3e39f-192">Next, hello old tenant database is deleted, and hello restored database is renamed toohello original database name.</span></span> <span data-ttu-id="3e39f-193">Végezetül a Contoso energiaoptimalizálást egyszerre Hall kerüléséig online tooallow vissza toohello hello app adatbázist.</span><span class="sxs-lookup"><span data-stu-id="3e39f-193">Finally, Contoso Concert Hall is brought online tooallow hello app access toohello restored database.</span></span>

<span data-ttu-id="3e39f-194">Sikeresen visszaállította hello adatbázis tooa pont előtti hello esemény törölve lett.</span><span class="sxs-lookup"><span data-stu-id="3e39f-194">You successfully restored hello database tooa point in time before hello event was deleted.</span></span> <span data-ttu-id="3e39f-195">hello események lap nyílik, ezért ellenőrizze hello utolsó esemény vissza lett állítva.</span><span class="sxs-lookup"><span data-stu-id="3e39f-195">hello Events page opens, so confirm hello last event has been restored.</span></span>


## <a name="next-steps"></a><span data-ttu-id="3e39f-196">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="3e39f-196">Next steps</span></span>

<span data-ttu-id="3e39f-197">Ez az oktatóanyag bemutatta, hogyan végezheti el az alábbi műveleteket:</span><span class="sxs-lookup"><span data-stu-id="3e39f-197">In this tutorial, you learned how to:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="3e39f-198">Egy párhuzamos adatbázisba (párhuzamos-) adatbázis visszaállítása</span><span class="sxs-lookup"><span data-stu-id="3e39f-198">Restore a database into a parallel database (side-by-side)</span></span>
> * <span data-ttu-id="3e39f-199">Egy helyen adatbázis visszaállítása</span><span class="sxs-lookup"><span data-stu-id="3e39f-199">Restore a database in place</span></span>

[<span data-ttu-id="3e39f-200">Bérlői adatbázisséma kezelése</span><span class="sxs-lookup"><span data-stu-id="3e39f-200">Manage tenant database schema</span></span>](sql-database-saas-tutorial-schema-management.md)

## <a name="additional-resources"></a><span data-ttu-id="3e39f-201">További források</span><span class="sxs-lookup"><span data-stu-id="3e39f-201">Additional resources</span></span>

* <span data-ttu-id="3e39f-202">További [oktatóprogramot kínál, amelyek hello Wingtip SaaS-alkalmazás épül](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)</span><span class="sxs-lookup"><span data-stu-id="3e39f-202">Additional [tutorials that build upon hello Wingtip SaaS application](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)</span></span>
* [<span data-ttu-id="3e39f-203">Az Azure SQL Database üzletmenet áttekintése</span><span class="sxs-lookup"><span data-stu-id="3e39f-203">Overview of business continuity with Azure SQL Database</span></span>](sql-database-business-continuity.md)
* [<span data-ttu-id="3e39f-204">További tudnivalók az SQL-adatbázis biztonsági mentése</span><span class="sxs-lookup"><span data-stu-id="3e39f-204">Learn about SQL Database backups</span></span>](sql-database-automated-backups.md)
