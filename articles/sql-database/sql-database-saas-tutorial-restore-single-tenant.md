---
title: "Egy több-bérlős alkalmazást az Azure SQL-adatbázis visszaállítása |} Microsoft Docs"
description: "Megtudhatja, hogyan egyetlen bérlők SQL-adatbázis visszaállítása után véletlenül az adatok törlése"
keywords: "sql database-oktatóanyag"
services: sql-database
documentationcenter: 
author: stevestein
manager: jhubbard
editor: 
ms.assetid: 
ms.service: sql-database
ms.custom: scale out apps
ms.workload: data-management
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/10/2017
ms.author: billgib;sstein
ms.openlocfilehash: 547851972f13ec69a8f65d01290874ad7d07f192
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 07/11/2017
---
# <a name="restore-a-wingtip-saas-tenants-sql-database"></a><span data-ttu-id="15058-104">Bérlők Wingtip SaaS SQL-adatbázis visszaállítása</span><span class="sxs-lookup"><span data-stu-id="15058-104">Restore a Wingtip SaaS tenants SQL database</span></span>

<span data-ttu-id="15058-105">A Wingtip SaaS-alkalmazás épül, ahol az egyes bérlők rendelkezik saját adatbázis egy adatbázis-/-bérlős modell használatával.</span><span class="sxs-lookup"><span data-stu-id="15058-105">The Wingtip SaaS app is built using a database-per-tenant model, where each tenant has their own database.</span></span> <span data-ttu-id="15058-106">Ez a modell előnye, hogy a rendszer egyszerű önmagában egy egybérlős adatok helyreállítását a többi bérlő befolyásolása nélkül.</span><span class="sxs-lookup"><span data-stu-id="15058-106">One of the benefits of this model is that it is easy to restore a single tenant’s data in isolation without impacting other tenants.</span></span>

<span data-ttu-id="15058-107">Ebben az oktatóanyagban elsajátíthatja, két adatok helyreállítási minták:</span><span class="sxs-lookup"><span data-stu-id="15058-107">In this tutorial you learn two data recovery patterns:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="15058-108">Egy párhuzamos adatbázisba (párhuzamos-) adatbázis visszaállítása</span><span class="sxs-lookup"><span data-stu-id="15058-108">Restore a database into a parallel database (side-by-side)</span></span>
> * <span data-ttu-id="15058-109">Egy helyen adatbázis visszaállítása</span><span class="sxs-lookup"><span data-stu-id="15058-109">Restore a database in place</span></span>


|||
|:--|:--|
| <span data-ttu-id="15058-110">**Visszaállítása bérlői egy korábbi időpontra, egy párhuzamos adatbázisba**</span><span class="sxs-lookup"><span data-stu-id="15058-110">**Restore tenant to a prior point in time, into a parallel database**</span></span> | <span data-ttu-id="15058-111">Ebben a mintában a bérlő által használható felülvizsgálati naplózás esetén a megfelelőségi stb. Az eredeti adatbázis online állapotú, és változatlan marad.</span><span class="sxs-lookup"><span data-stu-id="15058-111">This pattern can be used by the tenant for review, auditing, compliance, etc. The original database remains online and unchanged.</span></span> |
| <span data-ttu-id="15058-112">**Bérlői helyben visszaállítása**</span><span class="sxs-lookup"><span data-stu-id="15058-112">**Restore tenant in-place**</span></span> | <span data-ttu-id="15058-113">Ebben a mintában a bérlő előzetes pontra visszaállíthatja a idő, miután a bérlő véletlenül törli az adatokat általában használatos.</span><span class="sxs-lookup"><span data-stu-id="15058-113">This pattern is typically used to recover a tenant to a prior point in time, after a tenant accidentally deletes data.</span></span> <span data-ttu-id="15058-114">Az eredeti adatbázist offline állapotba, és a visszaállított adatbázis helyett.</span><span class="sxs-lookup"><span data-stu-id="15058-114">The original database is taken offline, and replaced with the restored database.</span></span> |
|||

<span data-ttu-id="15058-115">Az oktatóanyag teljesítéséhez meg kell felelnie az alábbi előfeltételeknek:</span><span class="sxs-lookup"><span data-stu-id="15058-115">To complete this tutorial, make sure the following prerequisites are completed:</span></span>

* <span data-ttu-id="15058-116">A Wingtip SaaS-alkalmazás telepítve van.</span><span class="sxs-lookup"><span data-stu-id="15058-116">The Wingtip SaaS app is deployed.</span></span> <span data-ttu-id="15058-117">Kevesebb mint öt perc alatt telepítéséhez lásd: [központi telepítése és vizsgálja meg a Wingtip SaaS-alkalmazáshoz](sql-database-saas-tutorial.md)</span><span class="sxs-lookup"><span data-stu-id="15058-117">To deploy in less than five minutes, see [Deploy and explore the Wingtip SaaS application](sql-database-saas-tutorial.md)</span></span>
* <span data-ttu-id="15058-118">Az Azure PowerShell telepítve van.</span><span class="sxs-lookup"><span data-stu-id="15058-118">Azure PowerShell is installed.</span></span> <span data-ttu-id="15058-119">A részletekért lásd: [Ismerkedés az Azure PowerShell-lel](https://docs.microsoft.com/powershell/azure/get-started-azureps)</span><span class="sxs-lookup"><span data-stu-id="15058-119">For details, see [Getting started with Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps)</span></span>

## <a name="introduction-to-the-saas-tenant-restore-pattern"></a><span data-ttu-id="15058-120">A Szolgáltatottszoftver-bérlői visszaállítási mintát bemutatása</span><span class="sxs-lookup"><span data-stu-id="15058-120">Introduction to the SaaS tenant restore pattern</span></span>

<span data-ttu-id="15058-121">A bérlői visszaállítási mintát nincsenek egy adott bérlő adatok visszaállításához két egyszerű mintát.</span><span class="sxs-lookup"><span data-stu-id="15058-121">For the tenant restore pattern, there are two simple patterns for restoring an individual tenant's data.</span></span> <span data-ttu-id="15058-122">Bérlői adatbázisok el különítve egymástól, mert egy bérlő visszaállítása nem hatást gyakorol semmilyen más bérlővel adatokat.</span><span class="sxs-lookup"><span data-stu-id="15058-122">Because tenant databases are isolated from each other, restoring one tenant has no impact on any other tenant's data.</span></span>

<span data-ttu-id="15058-123">Az első mintában új adatbázisba visszaállítani adatait.</span><span class="sxs-lookup"><span data-stu-id="15058-123">In the first pattern, data is restored into a new database.</span></span> <span data-ttu-id="15058-124">A bérlő majd hozzáférése ehhez az adatbázishoz a termelési adatokkal együtt.</span><span class="sxs-lookup"><span data-stu-id="15058-124">The tenant is then given access to this database alongside their production data.</span></span> <span data-ttu-id="15058-125">Ebben a mintában lehetővé teszi, hogy a bérlői rendszergazda tekintse át az adatok és potenciálisan szelektív felülírja az aktuális adatok értékek használhatók.</span><span class="sxs-lookup"><span data-stu-id="15058-125">This pattern allows a tenant admin to review the restored data and potentially use it to selectively overwrite current data values.</span></span> <span data-ttu-id="15058-126">A Szolgáltatottszoftver-app Designer annak meghatározásához, hogy milyen kifinomult kell lennie az adat-helyreállítási beállítások van.</span><span class="sxs-lookup"><span data-stu-id="15058-126">It's up to the SaaS app designer to determine just how sophisticated the data recovery options should be.</span></span> <span data-ttu-id="15058-127">Egyszerűen igényt tekintse át az állapotba, az adott időben adatokat minden egyes esetekben szükséges lehet.</span><span class="sxs-lookup"><span data-stu-id="15058-127">Simply being able to review data in the state it was in at a given point in time may be all that is required in some scenarios.</span></span> <span data-ttu-id="15058-128">Ha az adatbázis használ [georeplikáció](sql-database-geo-replication-overview.md), javasoljuk, hogy a szükséges adatok másolását a visszaállított másolja át a az eredeti adatbázist.</span><span class="sxs-lookup"><span data-stu-id="15058-128">If the database uses [geo-replication](sql-database-geo-replication-overview.md), we recommend copying the required data from the restored copy into the original database.</span></span> <span data-ttu-id="15058-129">Ha az eredeti adatbázis cserélje a visszaállított adatbázis, kell konfigurálnia, majd szinkronizálja újra a georeplikáció.</span><span class="sxs-lookup"><span data-stu-id="15058-129">If you replace the original database with the restored database, you need to reconfigure and resynchronize geo-replication.</span></span>

<span data-ttu-id="15058-130">A második mintát, amely azt feltételezi, hogy a bérlő szenvedett elvesztése vagy sérülése, adatok, az a bérlő éles adatbázis visszaállítása van egy korábbi pontra idő.</span><span class="sxs-lookup"><span data-stu-id="15058-130">In the second pattern, which assumes that the tenant has suffered a loss or corruption of data, the tenant’s production database is restored to a prior point in time.</span></span> <span data-ttu-id="15058-131">A visszaállítási helyre mintában a bérlő offline állapotba egy rövid ideig, amíg az adatbázis visszaállítása, és újra online állapotba.</span><span class="sxs-lookup"><span data-stu-id="15058-131">In the restore in place pattern, the tenant is taken offline for a brief time while the database is restored and brought back online.</span></span> <span data-ttu-id="15058-132">Az eredeti adatbázist törölték, de továbbra is visszaállíthatók a ha kell térni a még régebbi pontként időben.</span><span class="sxs-lookup"><span data-stu-id="15058-132">The original database is deleted, but can still be restored from if you need to go back to an even earlier point in time.</span></span> <span data-ttu-id="15058-133">Ez a minta egy változata névre történő átnevezése volt az adatbázis törlése helyett, bár az adatbázis átnevezése nem további adatbiztonsági előnyösebb kínál.</span><span class="sxs-lookup"><span data-stu-id="15058-133">A variation of this pattern could rename the database instead of deleting it, although renaming the database offers no additional advantage in terms of data security.</span></span>

## <a name="get-the-wingtip-application-scripts"></a><span data-ttu-id="15058-134">A Wingtip alkalmazásszkriptek beolvasása</span><span class="sxs-lookup"><span data-stu-id="15058-134">Get the Wingtip application scripts</span></span>

<span data-ttu-id="15058-135">A Wingtip Szolgáltatottszoftver-parancsfájlok és az alkalmazás forráskódjához érhetők el a [WingtipSaaS](https://github.com/Microsoft/WingtipSaaS) github-tárház.</span><span class="sxs-lookup"><span data-stu-id="15058-135">The Wingtip SaaS scripts and application source code are available in the [WingtipSaaS](https://github.com/Microsoft/WingtipSaaS) github repo.</span></span> <span data-ttu-id="15058-136">[Töltse le a Wingtip Szolgáltatottszoftver-parancsfájlok lépéseket](sql-database-wtp-overview.md#download-and-unblock-the-wingtip-saas-scripts).</span><span class="sxs-lookup"><span data-stu-id="15058-136">[Steps to download the Wingtip SaaS scripts](sql-database-wtp-overview.md#download-and-unblock-the-wingtip-saas-scripts).</span></span>

## <a name="simulate-a-tenant-accidentally-deleting-data"></a><span data-ttu-id="15058-137">A bérlő véletlenül törli az adatok szimulálása</span><span class="sxs-lookup"><span data-stu-id="15058-137">Simulate a tenant accidentally deleting data</span></span>

<span data-ttu-id="15058-138">Helyreállítási forgatókönyvekben bemutatásához, szeretnénk *véletlenül* törlése egy bérlő adatbázis bizonyos adatai.</span><span class="sxs-lookup"><span data-stu-id="15058-138">To demonstrate these recovery scenarios, we need to *accidentally* delete some data in one of the tenant databases.</span></span> <span data-ttu-id="15058-139">Rekordot törölheti, amíg a következő lépésben beállítja a bemutató hogy nem blokkolja lekérni a hivatkozási integritás megsértésének!</span><span class="sxs-lookup"><span data-stu-id="15058-139">While you can delete any record, the next step sets up the demo to not get blocked by referential integrity violations!</span></span> <span data-ttu-id="15058-140">Bővíti Ezenkívül egyes jegy beszerzési adatokat később is használhatja a *Wingtip SaaS Analytics oktatóanyagok*.</span><span class="sxs-lookup"><span data-stu-id="15058-140">It also adds some ticket purchase data you can use later in the *Wingtip SaaS Analytics tutorials*.</span></span>

<span data-ttu-id="15058-141">A jegy generátor parancsprogrammal, és hozzon létre további adatokat.</span><span class="sxs-lookup"><span data-stu-id="15058-141">Run the ticket generator script and create additional data.</span></span> <span data-ttu-id="15058-142">A jegy generátor szándékosan nem vásárolja meg a jegyektől az egyes bérlők utolsó eseményekhez.</span><span class="sxs-lookup"><span data-stu-id="15058-142">The ticket generator intentionally does not purchase tickets for each tenants last event.</span></span>

1. <span data-ttu-id="15058-143">Nyissa meg... \\Tanulási modulok\\segédprogramok\\*bemutató-TicketGenerator.ps1* a a *PowerShell ISE*</span><span class="sxs-lookup"><span data-stu-id="15058-143">Open ...\\Learning Modules\\Utilities\\*Demo-TicketGenerator.ps1* in the *PowerShell ISE*</span></span>
1. <span data-ttu-id="15058-144">Nyomja le az **F5** futtassa a parancsfájlt és ügyfelek készítése és értékesítési adatokat jegyet.</span><span class="sxs-lookup"><span data-stu-id="15058-144">Press **F5** to run the script and generate customers and ticket sales data.</span></span>


### <a name="open-the-events-app-to-review-the-current-events"></a><span data-ttu-id="15058-145">Nyissa meg az események alkalmazásnak, hogy tekintse át a jelenlegi eseményeket</span><span class="sxs-lookup"><span data-stu-id="15058-145">Open the Events app to review the current events</span></span>

1. <span data-ttu-id="15058-146">Nyissa meg a *események Hub* (http://events.wtp.&lt; felhasználói&gt;. trafficmanager.net), majd **Contoso energiaoptimalizálást egyszerre Hall**:</span><span class="sxs-lookup"><span data-stu-id="15058-146">Open the *Events Hub* (http://events.wtp.&lt;user&gt;.trafficmanager.net) and click **Contoso Concert Hall**:</span></span>

   ![eseményközpont](media/sql-database-saas-tutorial-restore-single-tenant/events-hub.png)

1. <span data-ttu-id="15058-148">Görgessen az események listájának, és jegyezze fel az utolsó esemény a listában:</span><span class="sxs-lookup"><span data-stu-id="15058-148">Scroll the list of events and make a note of the last event in the list:</span></span>

   ![utolsó esemény](media/sql-database-saas-tutorial-restore-single-tenant/last-event.png)


### <a name="run-the-demo-scenario-to-accidentally-delete-the-last-event"></a><span data-ttu-id="15058-150">Futtassa a bemutató forgatókönyvet véletlenül törli a legutóbbi esemény</span><span class="sxs-lookup"><span data-stu-id="15058-150">Run the demo scenario to accidentally delete the last event</span></span>

1. <span data-ttu-id="15058-151">Nyissa meg... \\Tanulási modulok\\az üzletmenet folytonossága és vészhelyreállítás\\RestoreTenant\\*bemutató-RestoreTenant.ps1* a a *PowerShell ISE*, és a következő értéket:</span><span class="sxs-lookup"><span data-stu-id="15058-151">Open ...\\Learning Modules\\Business Continuity and Disaster Recovery\\RestoreTenant\\*Demo-RestoreTenant.ps1* in the *PowerShell ISE*, and set the following value:</span></span>
   * <span data-ttu-id="15058-152">**$DemoScenario** = **1**, beállítása **1** -jegy értékesítés nélküli események törlése.</span><span class="sxs-lookup"><span data-stu-id="15058-152">**$DemoScenario** = **1**, Set to **1** - Delete events with no ticket sales.</span></span>
1. <span data-ttu-id="15058-153">Nyomja le az **F5** futtassa a parancsfájlt, és az utolsó esemény törlése.</span><span class="sxs-lookup"><span data-stu-id="15058-153">Press **F5** to run the script and delete the last event.</span></span> <span data-ttu-id="15058-154">Megjelenik egy megerősítő üzenetet a következőhöz hasonló:</span><span class="sxs-lookup"><span data-stu-id="15058-154">You should see a confirmation message similar to the following:</span></span>

   ```Console
   Deleting unsold events from Contoso Concert Hall ...
   Deleted event 'Seriously Strauss' from Contoso Concert Hall venue.
   ```

1. <span data-ttu-id="15058-155">A Contoso események lap nyílik meg.</span><span class="sxs-lookup"><span data-stu-id="15058-155">The Contoso events page opens.</span></span> <span data-ttu-id="15058-156">Görgessen lefelé, és győződjön meg arról az esemény már nem.</span><span class="sxs-lookup"><span data-stu-id="15058-156">Scroll down and verify the event is gone.</span></span> <span data-ttu-id="15058-157">Ha az esemény továbbra is szerepel a listában, kattintson a frissítés és győződjön meg arról eltűnt.</span><span class="sxs-lookup"><span data-stu-id="15058-157">If the event is still in the list, click refresh and verify it is gone.</span></span>

   ![utolsó esemény](media/sql-database-saas-tutorial-restore-single-tenant/last-event-deleted.png)


## <a name="restore-a-tenant-database-in-parallel-with-the-production-database"></a><span data-ttu-id="15058-159">Az éles adatbázis párhuzamosan bérlői adatbázis visszaállítása</span><span class="sxs-lookup"><span data-stu-id="15058-159">Restore a tenant database in parallel with the production database</span></span>

<span data-ttu-id="15058-160">Ebben a gyakorlatban adatbázisát állítja vissza a Contoso energiaoptimalizálást egyszerre Hall pontra előtti az esemény törölve lett.</span><span class="sxs-lookup"><span data-stu-id="15058-160">This exercise restores the Contoso Concert Hall database to a point in time before the event was deleted.</span></span> <span data-ttu-id="15058-161">Az esemény az előző lépésben törlését követően szeretné helyreállítani, és tekintse meg a törölt adatokat.</span><span class="sxs-lookup"><span data-stu-id="15058-161">After the event is deleted in the previous steps, you want to recover and see the deleted data.</span></span> <span data-ttu-id="15058-162">Nem kell visszaállítani a törölt bejegyzés az éles adatbázis, de kell állítani a régi adatbázis más üzleti okokból a régi adatok eléréséhez.</span><span class="sxs-lookup"><span data-stu-id="15058-162">You don't need to restore your production database with the deleted record, but you need to recover the old database to access the old data for other business reasons.</span></span>

 <span data-ttu-id="15058-163">A *visszaállítási-TenantInParallel.ps1* parancsfájl adatbázis és a párhuzamos katalógusbejegyzés mindkét nevű hoz létre egy párhuzamos bérlői *ContosoConcertHall\_régi*.</span><span class="sxs-lookup"><span data-stu-id="15058-163">The *Restore-TenantInParallel.ps1* script creates a parallel tenant database, and a parallel catalog entry both named *ContosoConcertHall\_old*.</span></span> <span data-ttu-id="15058-164">Ebben a mintában a visszaállítás olyan kisebb adatvesztés helyreállítás vagy megfelelőségi és naplózási helyreállítási forgatókönyveit.</span><span class="sxs-lookup"><span data-stu-id="15058-164">This pattern of restore is best suited for recovering from a minor data loss or for compliance and auditing recovery scenarios.</span></span> <span data-ttu-id="15058-165">Ez egyben az ajánlott módszer használata esetén [georeplikáció](sql-database-geo-replication-overview.md).</span><span class="sxs-lookup"><span data-stu-id="15058-165">It is also the recommended approach when you are using [geo-replication](sql-database-geo-replication-overview.md).</span></span>

1. <span data-ttu-id="15058-166">Fejezze be a [véletlenül törli az adatokat a felhasználó szimulálása](#simulate-a-tenant-accidentally-deleting-data) szakasz.</span><span class="sxs-lookup"><span data-stu-id="15058-166">Complete the [simulate a user accidentally deleting data](#simulate-a-tenant-accidentally-deleting-data) section.</span></span>
1. <span data-ttu-id="15058-167">Nyissa meg... \\Tanulási modulok\\az üzletmenet folytonossága és vészhelyreállítás\\RestoreTenant\\_bemutató-RestoreTenant.ps1_ a a *PowerShell ISE*.</span><span class="sxs-lookup"><span data-stu-id="15058-167">Open ...\\Learning Modules\\Business Continuity and Disaster Recovery\\RestoreTenant\\_Demo-RestoreTenant.ps1_ in the *PowerShell ISE*.</span></span>
1. <span data-ttu-id="15058-168">Állítsa be **$DemoScenario** = **2**, állítsa ezt a beállítást **2** való *párhuzamos visszaállítási bérlői*.</span><span class="sxs-lookup"><span data-stu-id="15058-168">Set **$DemoScenario** = **2**, Set this to **2** to *Restore tenant in parallel*.</span></span>
1. <span data-ttu-id="15058-169">A szkript futtatásához nyomja le az **F5** billentyűt.</span><span class="sxs-lookup"><span data-stu-id="15058-169">Press **F5** to run the script.</span></span>

<span data-ttu-id="15058-170">A parancsfájl adatbázisát állítja vissza a bérlő (a párhuzamos adatbázis) pontra időben az előző szakaszban esemény törlése előtt.</span><span class="sxs-lookup"><span data-stu-id="15058-170">The script restores the tenant database (to a parallel database) to a point in time before you deleted the event in the previous section.</span></span> <span data-ttu-id="15058-171">Ez létrehoz egy második adatbázist, eltávolítja a meglévő katalógus metaadatokat, hogy létezik az adatbázisban, és az adatbázis hozzáadása a katalógus a *ContosoConcertHall\_régi* bejegyzés.</span><span class="sxs-lookup"><span data-stu-id="15058-171">It creates a second database, removes any existing catalog metadata that exists in this database, and adds the database to the catalog under the *ContosoConcertHall\_old* entry.</span></span>

<span data-ttu-id="15058-172">A bemutató-parancsfájl az események lapot a böngészőben nyílik meg.</span><span class="sxs-lookup"><span data-stu-id="15058-172">The demo script opens the events page in your browser.</span></span> <span data-ttu-id="15058-173">Megjegyzés: az URL-címről: ```http://events.wtp.&lt;user&gt;.trafficmanager.net/contosoconcerthall_old``` , hogy ez látható a visszaállított adatbázis ahol *_old* hozzáadódik a neve.</span><span class="sxs-lookup"><span data-stu-id="15058-173">Note from the URL: ```http://events.wtp.&lt;user&gt;.trafficmanager.net/contosoconcerthall_old``` that this is showing data from the restored database where *_old* is added to the name.</span></span>

<span data-ttu-id="15058-174">Görgessen a böngészőt annak ellenőrzéséhez, hogy visszaállította az esemény törölve az előző szakaszban felsorolt események.</span><span class="sxs-lookup"><span data-stu-id="15058-174">Scroll the events listed in the browser to confirm that the event deleted in the previous section has been restored.</span></span>

<span data-ttu-id="15058-175">Vegye figyelembe, hogy, egy további bérlői, keresse meg a jegyektől, hogy a saját események alkalmazással nem valószínű, hogy hogyan szeretné biztosít egy bérlői hozzáférést kell, hogy csökkenjen a visszaállított bérlő visszaállította az adatokat, de könnyen mutatja be a visszaállítási mintát szolgál.</span><span class="sxs-lookup"><span data-stu-id="15058-175">Note that exposing the restored tenant as an additional tenant, with its own Events app to browse tickets, is unlikely to be how you would provide a tenant access to restored data, but serves to easily illustrate the restore pattern.</span></span>

<span data-ttu-id="15058-176">A valóságban ugyanúgy valószínűleg csak tartsa meg a visszaállított adatbázis számára meghatározott ideig.</span><span class="sxs-lookup"><span data-stu-id="15058-176">In reality, you would probably only retain this restored database for a defined period.</span></span> <span data-ttu-id="15058-177">A visszaállított bérlői bejegyzés törlése után meghívásával elkészült a *Remove-RestoredTenant.ps1* parancsfájl.</span><span class="sxs-lookup"><span data-stu-id="15058-177">You can delete the restored tenant entry once you are finished by calling the *Remove-RestoredTenant.ps1* script.</span></span>

1. <span data-ttu-id="15058-178">Állítsa be **$DemoScenario** való **4** jelölje be a *vissza eltávolítása bérlői* forgatókönyv.</span><span class="sxs-lookup"><span data-stu-id="15058-178">Set **$DemoScenario** to **4** to select the *remove restored tenant* scenario.</span></span>
1. <span data-ttu-id="15058-179">**Végrehajtás** **használatával** **F5**</span><span class="sxs-lookup"><span data-stu-id="15058-179">**Execute** **using** **F5**</span></span>
1. <span data-ttu-id="15058-180">A *ContosoConcertHall\_régi* bejegyzés törlődik a katalógusból.</span><span class="sxs-lookup"><span data-stu-id="15058-180">The *ContosoConcertHall\_old* entry is now deleted from the catalog.</span></span> <span data-ttu-id="15058-181">Lépjen tovább, és zárja be az események lapról ennél a bérlőnél a böngészőben.</span><span class="sxs-lookup"><span data-stu-id="15058-181">Go ahead and close the events page for this tenant in your browser.</span></span>


## <a name="restore-a-tenant-in-place-replacing-the-existing-tenant-database"></a><span data-ttu-id="15058-182">A bérlő helyen, a mag cseréje a meglévő bérlő adatbázis visszaállítása</span><span class="sxs-lookup"><span data-stu-id="15058-182">Restore a tenant in place, replacing the existing tenant database</span></span>

<span data-ttu-id="15058-183">Ebben a gyakorlatban a Contoso energiaoptimalizálást egyszerre Hall bérlő visszaállítja az a pont előtti az esemény törölve lett.</span><span class="sxs-lookup"><span data-stu-id="15058-183">This exercise restores the Contoso Concert Hall tenant to a point in time before the event was deleted.</span></span> <span data-ttu-id="15058-184">A *visszaállítási-TenantInPlace* parancsfájl az aktuális bérlőhöz adatbázis visszaállítja az mutat egy korábbi időpontra időben új adatbázist, és törli az eredeti adatbázist.</span><span class="sxs-lookup"><span data-stu-id="15058-184">The *Restore-TenantInPlace* script restores the current tenant database to a new database pointing to a previous point in time, and deletes the original database.</span></span> <span data-ttu-id="15058-185">Ebben a mintában a visszaállítás olyan helyreállítására súlyos adatsérülés, mivel előfordulhat, hogy a bérlő olyan jelentős adatvesztés.</span><span class="sxs-lookup"><span data-stu-id="15058-185">This pattern of restore is best suited for recovering from serious data corruption as there may be significant data loss that the tenant would have to accommodate.</span></span>

1. <span data-ttu-id="15058-186">Nyissa meg **bemutató-RestoreTenant.ps1** a PowerShell ISE fájl</span><span class="sxs-lookup"><span data-stu-id="15058-186">Open **Demo-RestoreTenant.ps1** file in PowerShell ISE</span></span>
1. <span data-ttu-id="15058-187">Állítsa be **$DemoScenario** való **5** jelölje be a *állítsa vissza a bérlő helye forgatókönyvben*.</span><span class="sxs-lookup"><span data-stu-id="15058-187">Set **$DemoScenario** to **5** to select the *restore tenant in place scenario*.</span></span>
1. <span data-ttu-id="15058-188">Végrehajtás használatával **F5**.</span><span class="sxs-lookup"><span data-stu-id="15058-188">Execute using **F5**.</span></span>

<span data-ttu-id="15058-189">A parancsfájl adatbázisát állítja vissza a bérlő pontra öt perc elteltével az esemény törölve lett.</span><span class="sxs-lookup"><span data-stu-id="15058-189">The script restores the tenant database to a point five minutes before the event was deleted.</span></span> <span data-ttu-id="15058-190">Ennek érdekében első véve a Contoso energiaoptimalizálást egyszerre Hall bérlő offline, így nincsenek további frissítések az adatokhoz.</span><span class="sxs-lookup"><span data-stu-id="15058-190">It does this by first taking the Contoso Concert Hall tenant offline so there are no further updates to the data.</span></span> <span data-ttu-id="15058-191">Ezt követően egy párhuzamos adatbázis hozta létre a visszaállítási pontról visszaállítása és annak érdekében, hogy az adatbázis neve nem ütközik a meglévő adatbázis bérlő nevét az időbélyegzőnek nevű.</span><span class="sxs-lookup"><span data-stu-id="15058-191">Then, a parallel database is created by restoring from the restore point and named with a timestamp to ensure the database name does not conflict with the existing tenant database name.</span></span> <span data-ttu-id="15058-192">Ezután a régi bérlői adatbázisa törlődik, és a visszaállított adatbázis átnevezése az eredeti adatbázis neve.</span><span class="sxs-lookup"><span data-stu-id="15058-192">Next, the old tenant database is deleted, and the restored database is renamed to the original database name.</span></span> <span data-ttu-id="15058-193">Végezetül Contoso energiaoptimalizálást egyszerre Hall online állapotba a visszaállított adatbázis alkalmazás hozzá.</span><span class="sxs-lookup"><span data-stu-id="15058-193">Finally, Contoso Concert Hall is brought online to allow the app access to the restored database.</span></span>

<span data-ttu-id="15058-194">Sikeresen visszaállította a az adatbázis pontra előtti az esemény törölve lett.</span><span class="sxs-lookup"><span data-stu-id="15058-194">You successfully restored the database to a point in time before the event was deleted.</span></span> <span data-ttu-id="15058-195">Az események lap megnyílik, ezért győződjön meg róla, az utolsó esemény vissza lett állítva.</span><span class="sxs-lookup"><span data-stu-id="15058-195">The Events page opens, so confirm the last event has been restored.</span></span>


## <a name="next-steps"></a><span data-ttu-id="15058-196">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="15058-196">Next steps</span></span>

<span data-ttu-id="15058-197">Ez az oktatóanyag bemutatta, hogyan végezheti el az alábbi műveleteket:</span><span class="sxs-lookup"><span data-stu-id="15058-197">In this tutorial, you learned how to:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="15058-198">Egy párhuzamos adatbázisba (párhuzamos-) adatbázis visszaállítása</span><span class="sxs-lookup"><span data-stu-id="15058-198">Restore a database into a parallel database (side-by-side)</span></span>
> * <span data-ttu-id="15058-199">Egy helyen adatbázis visszaállítása</span><span class="sxs-lookup"><span data-stu-id="15058-199">Restore a database in place</span></span>

[<span data-ttu-id="15058-200">Bérlői adatbázisséma kezelése</span><span class="sxs-lookup"><span data-stu-id="15058-200">Manage tenant database schema</span></span>](sql-database-saas-tutorial-schema-management.md)

## <a name="additional-resources"></a><span data-ttu-id="15058-201">További források</span><span class="sxs-lookup"><span data-stu-id="15058-201">Additional resources</span></span>

* <span data-ttu-id="15058-202">További [oktatóprogramot kínál, amelyek a Wingtip SaaS-alkalmazás épül](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)</span><span class="sxs-lookup"><span data-stu-id="15058-202">Additional [tutorials that build upon the Wingtip SaaS application](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)</span></span>
* [<span data-ttu-id="15058-203">Az Azure SQL Database üzletmenet áttekintése</span><span class="sxs-lookup"><span data-stu-id="15058-203">Overview of business continuity with Azure SQL Database</span></span>](sql-database-business-continuity.md)
* [<span data-ttu-id="15058-204">További tudnivalók az SQL-adatbázis biztonsági mentése</span><span class="sxs-lookup"><span data-stu-id="15058-204">Learn about SQL Database backups</span></span>](sql-database-automated-backups.md)
