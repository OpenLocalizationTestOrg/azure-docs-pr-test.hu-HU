---
title: "aaaAzure SQL Database rugalmas lekérdezési áttekintése |} Microsoft Docs"
description: "Hello rugalmas lekérdezési szolgáltatás áttekintése"
services: sql-database
documentationcenter: 
manager: jhubbard
author: MladjoA
ms.assetid: a8bf0e2c-bc74-44d0-9b1e-bcc9a6aa2e33
ms.service: sql-database
ms.custom: scale out apps
ms.workload: sql-database
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 04/27/2016
ms.author: mlandzic
ms.openlocfilehash: db17f551882cfcae0da67fdda12708baeb6db81c
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/06/2017
---
# <a name="azure-sql-database-elastic-query-overview-preview"></a><span data-ttu-id="a78d3-103">Az Azure SQL Database rugalmas lekérdezési áttekintése (előzetes verzió)</span><span class="sxs-lookup"><span data-stu-id="a78d3-103">Azure SQL Database elastic query overview (preview)</span></span>
<span data-ttu-id="a78d3-104">hello rugalmas lekérdezés (az előzetes verzió) funkciójával toorun kiterjedő több adatbázis az Azure SQL Database Transact-SQL lekérdezés.</span><span class="sxs-lookup"><span data-stu-id="a78d3-104">hello elastic query feature (in preview) enables you toorun a Transact-SQL query that spans multiple databases in Azure SQL Database.</span></span> <span data-ttu-id="a78d3-105">Lehetővé teszi tooperform közötti adatbázis-lekérdezések tooaccess távoli táblákat és tooconnect Microsoft és harmadik féltől származó eszközök (az Excel, Power BI, Tableau, stb.) tooquery több adatbázisból adatok rétegek között.</span><span class="sxs-lookup"><span data-stu-id="a78d3-105">It allows you tooperform cross-database queries tooaccess remote tables, and tooconnect Microsoft and third party tools (Excel, PowerBI, Tableau, etc.) tooquery across data tiers with multiple databases.</span></span> <span data-ttu-id="a78d3-106">Ezzel a szolgáltatással horizontális felskálázás lekérdezések toolarge adat szintet az SQL-adatbázis és az üzleti intelligenciával jelentések hello eredményeinek képi megjelenítése.</span><span class="sxs-lookup"><span data-stu-id="a78d3-106">Using this feature, you can scale out queries toolarge data tiers in SQL Database and visualize hello results in business intelligence (BI) reports.</span></span>


## <a name="why-use-elastic-queries"></a><span data-ttu-id="a78d3-107">Rugalmas lekérdezések miért érdemes használni?</span><span class="sxs-lookup"><span data-stu-id="a78d3-107">Why use elastic queries?</span></span>

<span data-ttu-id="a78d3-108">**Azure SQL Database**</span><span class="sxs-lookup"><span data-stu-id="a78d3-108">**Azure SQL Database**</span></span>

<span data-ttu-id="a78d3-109">A lekérdezés teljesen a T-SQL Azure SQL-adatbázisok között.</span><span class="sxs-lookup"><span data-stu-id="a78d3-109">Query across Azure SQL databases completely in T-SQL.</span></span> <span data-ttu-id="a78d3-110">Ez lehetővé teszi a távoli adatbázis lekérdezése csak olvasható.</span><span class="sxs-lookup"><span data-stu-id="a78d3-110">This allows for read-only querying of remote databases.</span></span> <span data-ttu-id="a78d3-111">Ez lehetővé teszi a beállítás a meglévő helyszíni SQL Server ügyfelek toomigrate három és négy part nevek vagy csatolt kiszolgáló tooSQL DB használatával.</span><span class="sxs-lookup"><span data-stu-id="a78d3-111">This provides an option for current on-premises SQL Server customers toomigrate applications using three- and four-part names or linked server tooSQL DB.</span></span>

<span data-ttu-id="a78d3-112">**Standard csomagban érhető el**</span><span class="sxs-lookup"><span data-stu-id="a78d3-112">**Available on standard tier**</span></span>

<span data-ttu-id="a78d3-113">Rugalmas lekérdezési hello szabványos teljesítményszinttel hozzáadása toohello prémium szintű teljesítmény réteg támogatott.</span><span class="sxs-lookup"><span data-stu-id="a78d3-113">Elastic query is supported on hello Standard performance tier in addition toohello Premium performance tier.</span></span> <span data-ttu-id="a78d3-114">Című rész hello az előzetes verzió korlátozásai alatt a teljesítmény alacsonyabb rétegek teljesítményének korlátozásai.</span><span class="sxs-lookup"><span data-stu-id="a78d3-114">See hello section on Preview Limitations below on performance limitations for lower performance tiers.</span></span>

<span data-ttu-id="a78d3-115">**Leküldéses tooremote adatbázisok**</span><span class="sxs-lookup"><span data-stu-id="a78d3-115">**Push tooremote databases**</span></span>

<span data-ttu-id="a78d3-116">Rugalmas lekérdezések most tolható paraméterek toohello távoli adatbázisai végrehajtásra.</span><span class="sxs-lookup"><span data-stu-id="a78d3-116">Elastic queries can now push SQL parameters toohello remote databases for execution.</span></span>

<span data-ttu-id="a78d3-117">**A tárolt eljárás végrehajtása**</span><span class="sxs-lookup"><span data-stu-id="a78d3-117">**Stored procedure execution**</span></span>

<span data-ttu-id="a78d3-118">Távoli tárolt eljárás hívások vagy a távoli függvények használatával hajtható végre [sp\_hajtható végre \_távoli](https://msdn.microsoft.com/library/mt703714).</span><span class="sxs-lookup"><span data-stu-id="a78d3-118">Execute remote stored procedure calls or remote functions using [sp\_execute \_remote](https://msdn.microsoft.com/library/mt703714).</span></span>

<span data-ttu-id="a78d3-119">**Rugalmasság**</span><span class="sxs-lookup"><span data-stu-id="a78d3-119">**Flexibility**</span></span>

<span data-ttu-id="a78d3-120">Rugalmas lekérdezéssel külső táblák most jelentheti tooremote táblák különböző séma vagy tábla neve.</span><span class="sxs-lookup"><span data-stu-id="a78d3-120">External tables with elastic query can now refer tooremote tables with a different schema or table name.</span></span>

## <a name="elastic-query-scenarios"></a><span data-ttu-id="a78d3-121">Rugalmas lekérdezési forgatókönyvek</span><span class="sxs-lookup"><span data-stu-id="a78d3-121">Elastic query scenarios</span></span>

<span data-ttu-id="a78d3-122">hello célja toofacilitate forgatókönyvek, ahol több adatbázis hozzájárul az egyetlen teljes eredmény sorok lekérdezése.</span><span class="sxs-lookup"><span data-stu-id="a78d3-122">hello goal is toofacilitate querying scenarios where multiple databases contribute rows into a single overall result.</span></span> <span data-ttu-id="a78d3-123">hello lekérdezés vagy összeállítható hello felhasználó vagy alkalmazás közvetlenül vagy közvetve eszközökkel, amelyek csatlakoztatott toohello adatbázis.</span><span class="sxs-lookup"><span data-stu-id="a78d3-123">hello query can either be composed by hello user or application directly, or indirectly through tools that are connected toohello database.</span></span> <span data-ttu-id="a78d3-124">Ez különösen fontos jelentések, kereskedelmi BI vagy adatok-integrációs eszközök használatával létrehozásakor – vagy bármilyen alkalmazás, és nem módosítható.</span><span class="sxs-lookup"><span data-stu-id="a78d3-124">This is especially useful when creating reports, using commercial BI or data integration tools—or any application that cannot be changed.</span></span> <span data-ttu-id="a78d3-125">Rugalmas lekérdezéshez lekérheti az eszközök, például az Excel, a Power BI, a Tableau vagy a Cognos hello ismerős SQL Server csatlakozási élmény több adatbázis között.</span><span class="sxs-lookup"><span data-stu-id="a78d3-125">With an elastic query, you can query across several databases using hello familiar SQL Server connectivity experience in tools such as Excel, PowerBI, Tableau, or Cognos.</span></span>
<span data-ttu-id="a78d3-126">Egy rugalmas lekérdezés lehetővé teszi, hogy mennyire egyszerű a hozzáférés tooan teljes gyűjteményt az adatbázisok SQL Server Management Studio vagy Visual Studio által kibocsátott lekérdezések keresztül, és megkönnyíti a kereszt-adatbázis lekérdezése az Entity Framework vagy más ORM környezetekben.</span><span class="sxs-lookup"><span data-stu-id="a78d3-126">An elastic query allows easy access tooan entire collection of databases through queries issued by SQL Server Management Studio or Visual Studio, and facilitates cross-database querying from Entity Framework or other ORM environments.</span></span> <span data-ttu-id="a78d3-127">1. ábra mutatja egy olyan forgatókönyvet, ahol egy meglévő felhőbeli alkalmazás (hello használó [elastic database ügyféloldali kódtárának](sql-database-elastic-database-client-library.md)) réteg a kiterjesztett adatok épít, és egy rugalmas lekérdezési adatbázisok közötti jelentéskészítéshez használt.</span><span class="sxs-lookup"><span data-stu-id="a78d3-127">Figure 1 shows a scenario where an existing cloud application (which uses hello [elastic database client library](sql-database-elastic-database-client-library.md)) builds on a scaled-out data tier, and an elastic query is used for cross-database reporting.</span></span>

<span data-ttu-id="a78d3-128">**1. ábra** kiterjesztett adatszinten használt rugalmas lekérdezés</span><span class="sxs-lookup"><span data-stu-id="a78d3-128">**Figure 1** Elastic query used on scaled-out data tier</span></span>

![A kiterjesztett adatszinten rugalmas lekérdezés][1]

<span data-ttu-id="a78d3-130">Rugalmas lekérdezés forgatókönyvet a következő topológiákat hello jellemző:</span><span class="sxs-lookup"><span data-stu-id="a78d3-130">Customer scenarios for elastic query are characterized by hello following topologies:</span></span>

* <span data-ttu-id="a78d3-131">**A vertikális particionálás - adatbázisok közötti lekérdezések** (1. topológia): hello adatok particionálása függőleges egy adatrétegbeli adatbázisok számú között.</span><span class="sxs-lookup"><span data-stu-id="a78d3-131">**Vertical partitioning - Cross-database queries** (Topology 1): hello data is partitioned vertically between a number of databases in a data tier.</span></span> <span data-ttu-id="a78d3-132">A táblák más-más részhalmazához általában a különböző adatbázisokhoz elhelyezve.</span><span class="sxs-lookup"><span data-stu-id="a78d3-132">Typically, different sets of tables reside on different databases.</span></span> <span data-ttu-id="a78d3-133">Ez azt jelenti, hogy adott hello sémája nem egyezik meg a különböző adatbázisokhoz.</span><span class="sxs-lookup"><span data-stu-id="a78d3-133">That means that hello schema is different on different databases.</span></span> <span data-ttu-id="a78d3-134">Például a készlet összes tábla esetén egy adatbázis míg nyilvántartási kapcsolatos összes táblázatot egy második adatbázison.</span><span class="sxs-lookup"><span data-stu-id="a78d3-134">For instance, all tables for inventory are on one database while all accounting-related tables are on a second database.</span></span> <span data-ttu-id="a78d3-135">A topológia gyakori alkalmazási esetei szükséges egy tooquery között vagy toocompile jelentések adatbázisok táblái között.</span><span class="sxs-lookup"><span data-stu-id="a78d3-135">Common use cases with this topology require one tooquery across or toocompile reports across tables in several databases.</span></span>
* <span data-ttu-id="a78d3-136">**Vízszintes particionálására - horizontális** (topológia 2): adatok particionálása vízszintesen réteg toodistribute sorok méretezett kimenő adatok között.</span><span class="sxs-lookup"><span data-stu-id="a78d3-136">**Horizontal Partitioning - Sharding** (Topology 2): Data is partitioned horizontally toodistribute rows across a scaled out data tier.</span></span> <span data-ttu-id="a78d3-137">Ezzel a megközelítéssel hello séma megegyezik a programban részt vevő összes adatbázis.</span><span class="sxs-lookup"><span data-stu-id="a78d3-137">With this approach, hello schema is identical on all participating databases.</span></span> <span data-ttu-id="a78d3-138">Ez a megközelítés "horizontális" néven is ismert.</span><span class="sxs-lookup"><span data-stu-id="a78d3-138">This approach is also called “sharding”.</span></span> <span data-ttu-id="a78d3-139">Horizontális hajtható végre, és (1) hello rugalmas adatbázis eszközök tárak vagy (2) önkiszolgáló-horizontális használatával kezelhetők.</span><span class="sxs-lookup"><span data-stu-id="a78d3-139">Sharding can be performed and managed using (1) hello elastic database tools libraries or (2) self-sharding.</span></span> <span data-ttu-id="a78d3-140">Egy rugalmas lekérdezési használt tooquery vagy fordítási jelentések számos szilánkok között.</span><span class="sxs-lookup"><span data-stu-id="a78d3-140">An elastic query is used tooquery or compile reports across many shards.</span></span>

> [!NOTE]
> <span data-ttu-id="a78d3-141">Rugalmas lekérdezési működik a legjobban az alkalmi jelentéskészítési forgatókönyvekhez, ahol hello adatrétegbeli hello feldolgozási többsége elvégezhető.</span><span class="sxs-lookup"><span data-stu-id="a78d3-141">Elastic query works best for occasional reporting scenarios where most of hello processing can be performed on hello data tier.</span></span> <span data-ttu-id="a78d3-142">Jelentéskészítési munkaterhelést vagy adatraktározási forgatókönyvekben összetettebb lekérdezések esetében is érdemes lehet [Azure SQL Data Warehouse](https://azure.microsoft.com/services/sql-data-warehouse/).</span><span class="sxs-lookup"><span data-stu-id="a78d3-142">For heavy reporting workloads or data warehousing scenarios with more complex queries, also consider using [Azure SQL Data Warehouse](https://azure.microsoft.com/services/sql-data-warehouse/).</span></span>
>  

## <a name="vertical-partitioning---cross-database-queries"></a><span data-ttu-id="a78d3-143">A vertikális particionálás - közötti adatbázis-lekérdezések</span><span class="sxs-lookup"><span data-stu-id="a78d3-143">Vertical partitioning - cross-database queries</span></span>

<span data-ttu-id="a78d3-144">toobegin kódolási, lásd: [első lépések (a vertikális particionálás) közötti adatbázis-lekérdezés](sql-database-elastic-query-getting-started-vertical.md).</span><span class="sxs-lookup"><span data-stu-id="a78d3-144">toobegin coding, see [Getting started with cross-database query (vertical partitioning)](sql-database-elastic-query-getting-started-vertical.md).</span></span>

<span data-ttu-id="a78d3-145">Egy rugalmas lekérdezés lehet használt toomake adatokat egy SQL-adatbázis elérhető tooother SQL-adatbázisban található.</span><span class="sxs-lookup"><span data-stu-id="a78d3-145">An elastic query can be used toomake data located in a SQL database available tooother SQL databases.</span></span> <span data-ttu-id="a78d3-146">Ez lehetővé teszi egy adatbázis toorefer tootables lekérdezéseket bármely más távoli SQL-adatbázisban.</span><span class="sxs-lookup"><span data-stu-id="a78d3-146">This allows queries from one database toorefer tootables in any other remote SQL database.</span></span> <span data-ttu-id="a78d3-147">hello első lépése az toodefine egy külső adatforrásból a minden egyes távoli adatbázishoz.</span><span class="sxs-lookup"><span data-stu-id="a78d3-147">hello first step is toodefine an external data source for each remote database.</span></span> <span data-ttu-id="a78d3-148">hello külső adatforrás van definiálva, amelyből el kívánja toogain hozzáférés tootables hello távoli adatbázis található hello helyi adatbázisban.</span><span class="sxs-lookup"><span data-stu-id="a78d3-148">hello external data source is defined in hello local database from which you want toogain access tootables located on hello remote database.</span></span> <span data-ttu-id="a78d3-149">Nem módosult a távoli adatbázis hello szükségesek.</span><span class="sxs-lookup"><span data-stu-id="a78d3-149">No changes are necessary on hello remote database.</span></span> <span data-ttu-id="a78d3-150">A tipikus függőleges particionálási forgatókönyveket, amelyekben a különböző adatbázisokhoz rendelkeznek különböző sémákat rugalmas lekérdezések lehetnek használt tooimplement gyakori alkalmazási esetekben, például a hozzáférés tooreference és adatbázisok közötti lekérdezése.</span><span class="sxs-lookup"><span data-stu-id="a78d3-150">For typical vertical partitioning scenarios where different databases have different schemas, elastic queries can be used tooimplement common use cases such as access tooreference data and cross-database querying.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="a78d3-151">Az ALTER ANY külső ADATFORRÁS engedéllyel kell rendelkeznie.</span><span class="sxs-lookup"><span data-stu-id="a78d3-151">You must possess ALTER ANY EXTERNAL DATA SOURCE permission.</span></span> <span data-ttu-id="a78d3-152">Ez az engedély megtalálható hello ALTER DATABASE engedéllyel.</span><span class="sxs-lookup"><span data-stu-id="a78d3-152">This permission is included with hello ALTER DATABASE permission.</span></span> <span data-ttu-id="a78d3-153">Az ALTER ANY külső ADATFORRÁS-engedélyek az alapul szolgáló adatforrás szükséges toorefer toohello is.</span><span class="sxs-lookup"><span data-stu-id="a78d3-153">ALTER ANY EXTERNAL DATA SOURCE permissions are needed toorefer toohello underlying data source.</span></span>
>

<span data-ttu-id="a78d3-154">**Referenciaadatok**: hello topológia hivatkozás adatok felügyeletére használható.</span><span class="sxs-lookup"><span data-stu-id="a78d3-154">**Reference data**: hello topology is used for reference data management.</span></span> <span data-ttu-id="a78d3-155">Hello az alábbi ábra a referenciaadatok két tábla (T1 és T2) továbbra is egy dedikált adatbázison.</span><span class="sxs-lookup"><span data-stu-id="a78d3-155">In hello figure below, two tables (T1 and T2) with reference data are kept on a dedicated database.</span></span> <span data-ttu-id="a78d3-156">Rugalmas lekérdezéssel, érhetők el a T1 és T2 táblák távolról más adatbázisból származó hello ábrán látható módon.</span><span class="sxs-lookup"><span data-stu-id="a78d3-156">Using an elastic query, you can now access tables T1 and T2 remotely from other databases, as shown in hello figure.</span></span> <span data-ttu-id="a78d3-157">Ha referencia táblákat kis vagy távoli referencia táblába lekérdezések 1 topológiájának használata szelektív predikátumok rendelkezik.</span><span class="sxs-lookup"><span data-stu-id="a78d3-157">Use topology 1 if reference tables are small or remote queries into reference table have selective predicates.</span></span>

<span data-ttu-id="a78d3-158">**2. ábra** vertikális particionálás - rugalmas lekérdezési tooquery referenciaadatok használatával</span><span class="sxs-lookup"><span data-stu-id="a78d3-158">**Figure 2** Vertical partitioning - Using elastic query tooquery reference data</span></span>

![Vertikális particionálás - rugalmas lekérdezési tooquery referenciaadatok használatával][3]

<span data-ttu-id="a78d3-160">**Adatbázisok közötti lekérdezése**: rugalmas lekérdezések lehetővé teszik a használati esetek igénylő számos SQL-adatbázisok közötti lekérdezése.</span><span class="sxs-lookup"><span data-stu-id="a78d3-160">**Cross-database querying**: Elastic queries enable use cases that require querying across several SQL databases.</span></span> <span data-ttu-id="a78d3-161">3. ábrán látható négy különböző adatbázist: CRM-hez, a szoftverleltár, a HR és a termékek.</span><span class="sxs-lookup"><span data-stu-id="a78d3-161">Figure 3 shows four different databases: CRM, Inventory, HR and Products.</span></span> <span data-ttu-id="a78d3-162">Hello adatbázisok közül az egyik végzett lekérdezések is kell elérhető tooone, vagy minden más adatbázisok hello.</span><span class="sxs-lookup"><span data-stu-id="a78d3-162">Queries performed in one of hello databases also need access tooone or all hello other databases.</span></span> <span data-ttu-id="a78d3-163">Rugalmas lekérdezéssel, beállíthatja az adatbázis ebben az esetben egyes hello négy adatbázisok néhány egyszerű DDL-utasításokban futtatásával.</span><span class="sxs-lookup"><span data-stu-id="a78d3-163">Using an elastic query, you can configure your database for this case by running a few simple DDL statements on each of hello four databases.</span></span> <span data-ttu-id="a78d3-164">Ez egyszeri konfigurálás után hozzáférést tooa távoli tábla egyszerűen tooa helyi táblára hivatkozik, a T-SQL-lekérdezések, illetve a BI-eszközökkel.</span><span class="sxs-lookup"><span data-stu-id="a78d3-164">After this one-time configuration, access tooa remote table is as simple as referring tooa local table from your T-SQL queries or from your BI tools.</span></span> <span data-ttu-id="a78d3-165">Ezt a módszert akkor ajánlott, ha a távoli lekérdezéseknél hello nem eredményeket nagy.</span><span class="sxs-lookup"><span data-stu-id="a78d3-165">This approach is recommended if hello remote queries do not return large results.</span></span>

<span data-ttu-id="a78d3-166">**3. ábra** vertikális particionálás - különböző adatbázisok közötti rugalmas lekérdezési tooquery használatával</span><span class="sxs-lookup"><span data-stu-id="a78d3-166">**Figure 3** Vertical partitioning - Using elastic query tooquery across various databases</span></span>

![Vertikális particionálás - különböző adatbázisok közötti rugalmas lekérdezési tooquery használatával][4]

<span data-ttu-id="a78d3-168">hello lépések konfigurálása a hozzáférés tooa táblában található hello a távoli SQL-adatbázisok azonos igénylő függőleges particionálási forgatókönyvek rugalmas adatbázis-lekérdezéseinek séma:</span><span class="sxs-lookup"><span data-stu-id="a78d3-168">hello following steps configure elastic database queries for vertical partitioning scenarios that require access tooa table located on remote SQL databases with hello same schema:</span></span>

* <span data-ttu-id="a78d3-169">[Hozzon létre FŐKULCS](https://msdn.microsoft.com/library/ms174382.aspx) mymasterkey</span><span class="sxs-lookup"><span data-stu-id="a78d3-169">[CREATE MASTER KEY](https://msdn.microsoft.com/library/ms174382.aspx) mymasterkey</span></span>
* <span data-ttu-id="a78d3-170">[CREATE DATABASE SCOPED CREDENTIAL](https://msdn.microsoft.com/library/mt270260.aspx) mycredential</span><span class="sxs-lookup"><span data-stu-id="a78d3-170">[CREATE DATABASE SCOPED CREDENTIAL](https://msdn.microsoft.com/library/mt270260.aspx) mycredential</span></span>
* <span data-ttu-id="a78d3-171">[KÜLSŐ ADATFORRÁS létrehozása/DROP](https://msdn.microsoft.com/library/dn935022.aspx) mydatasource típusú **RDBMS**</span><span class="sxs-lookup"><span data-stu-id="a78d3-171">[CREATE/DROP EXTERNAL DATA SOURCE](https://msdn.microsoft.com/library/dn935022.aspx) mydatasource of type **RDBMS**</span></span>
* <span data-ttu-id="a78d3-172">[A külső tábla létrehozása/DROP](https://msdn.microsoft.com/library/dn935021.aspx) táblanév</span><span class="sxs-lookup"><span data-stu-id="a78d3-172">[CREATE/DROP EXTERNAL TABLE](https://msdn.microsoft.com/library/dn935021.aspx) mytable</span></span>

<span data-ttu-id="a78d3-173">Miután hello DDL-utasításokban, hello távoli tábla "mytable", mintha egy helyi táblára érheti el.</span><span class="sxs-lookup"><span data-stu-id="a78d3-173">After running hello DDL statements, you can access hello remote table “mytable” as though it were a local table.</span></span> <span data-ttu-id="a78d3-174">Az Azure SQL Database automatikusan kapcsolat toohello távoli adatbázis megnyitása, feldolgozza a kérést a távoli adatbázis hello és hello eredményeket ad vissza.</span><span class="sxs-lookup"><span data-stu-id="a78d3-174">Azure SQL Database automatically opens a connection toohello remote database, processes your request on hello remote database, and returns hello results.</span></span>

## <a name="horizontal-partitioning---sharding"></a><span data-ttu-id="a78d3-175">Vízszintes particionálás - horizontális</span><span class="sxs-lookup"><span data-stu-id="a78d3-175">Horizontal partitioning - sharding</span></span>
<span data-ttu-id="a78d3-176">A jelentéskészítési feladatok keresztül a szilánkos, azaz, vízszintesen particionálva, rugalmas lekérdezési tooperform adatszinten szükség van egy [rugalmas adatbázis shard térkép](sql-database-elastic-scale-shard-map-management.md) toorepresent hello adatbázisok hello adatok réteg.</span><span class="sxs-lookup"><span data-stu-id="a78d3-176">Using elastic query tooperform reporting tasks over a sharded, i.e., horizontally partitioned, data tier requires an [elastic database shard map](sql-database-elastic-scale-shard-map-management.md) toorepresent hello databases of hello data tier .</span></span> <span data-ttu-id="a78d3-177">Általában csak egyetlen shard térképre használatban van ebben a forgatókönyvben, és rugalmas lekérdezési lehetőségeket (átjárócsomópont) dedikált adatbázis lekérdezések jelentéskészítéshez hello belépési pontként szolgál.</span><span class="sxs-lookup"><span data-stu-id="a78d3-177">Typically, only a single shard map is used in this scenario and a dedicated database with elastic query capabilities (head node) serves as hello entry point for reporting queries.</span></span> <span data-ttu-id="a78d3-178">Csak a dedikált adatbázis hozzáférés toohello shard térkép kell.</span><span class="sxs-lookup"><span data-stu-id="a78d3-178">Only this dedicated database needs access toohello shard map.</span></span> <span data-ttu-id="a78d3-179">4. ábra szemlélteti, ez a topológia és hello rugalmas lekérdezési adatbázis és a shard hozzárendelése és konfigurációja.</span><span class="sxs-lookup"><span data-stu-id="a78d3-179">Figure 4 illustrates this topology and its configuration with hello elastic query database and shard map.</span></span> <span data-ttu-id="a78d3-180">hello adatrétegbeli hello adatbázisok lehet bármely Azure SQL Database verzióját vagy kiadását.</span><span class="sxs-lookup"><span data-stu-id="a78d3-180">hello databases in hello data tier can be of any Azure SQL Database version or edition.</span></span> <span data-ttu-id="a78d3-181">Hello elastic database ügyféloldali kódtár és shard maps létrehozásával kapcsolatos további információkért lásd: [Shard térkép felügyeleti](sql-database-elastic-scale-shard-map-management.md).</span><span class="sxs-lookup"><span data-stu-id="a78d3-181">For more information about hello elastic database client library and creating shard maps, see [Shard map management](sql-database-elastic-scale-shard-map-management.md).</span></span>

<span data-ttu-id="a78d3-182">**4. ábra** vízszintes particionálás - rugalmas lekérdezéssel felett horizontálisan skálázott adatok rétegek jelentéskészítéshez</span><span class="sxs-lookup"><span data-stu-id="a78d3-182">**Figure 4** Horizontal partitioning - Using elastic query for reporting over sharded data tiers</span></span>

![Vízszintes particionálás - rugalmas lekérdezéssel felett horizontálisan skálázott adatok rétegek jelentéskészítéshez][5]

> [!NOTE]
> <span data-ttu-id="a78d3-184">A rugalmas adatbázis lekérdezése (átjárócsomópont) lehet külön adatbázis, vagy hello lehet ugyanaz a gazdagépek hello shard térkép adatbázis.</span><span class="sxs-lookup"><span data-stu-id="a78d3-184">Elastic Query Database (head node) can be separate database, or it can be hello same database that hosts hello shard map.</span></span> <span data-ttu-id="a78d3-185">Bármilyen konfiguráció választja, győződjön meg arról, hogy az adatbázis szolgáltatás- és rétegű ez elég magas toohandle hello várható időtartam bejelentkezés/lekérdezésekre vonatkozó kérelmek.</span><span class="sxs-lookup"><span data-stu-id="a78d3-185">Whatever configuration you choose, make sure that service and performance tier of that database is high enough toohandle hello expected  amount of login/query requests.</span></span>

<span data-ttu-id="a78d3-186">hello lépések konfigurálja a vízszintes particionálási igénylő forgatókönyvek hozzáférés tooa set tábla található rugalmas adatbázis-lekérdezéseinek (általában) több távoli SQL-adatbázisok:</span><span class="sxs-lookup"><span data-stu-id="a78d3-186">hello following steps configure elastic database queries for horizontal partitioning scenarios that require access tooa set of table that are located on (typically) several remote SQL databases:</span></span>

* <span data-ttu-id="a78d3-187">[Hozzon létre FŐKULCS](https://msdn.microsoft.com/library/ms174382.aspx) mymasterkey</span><span class="sxs-lookup"><span data-stu-id="a78d3-187">[CREATE MASTER KEY](https://msdn.microsoft.com/library/ms174382.aspx) mymasterkey</span></span>
* <span data-ttu-id="a78d3-188">[CREATE DATABASE SCOPED CREDENTIAL](https://msdn.microsoft.com/library/mt270260.aspx) mycredential</span><span class="sxs-lookup"><span data-stu-id="a78d3-188">[CREATE DATABASE SCOPED CREDENTIAL](https://msdn.microsoft.com/library/mt270260.aspx) mycredential</span></span>
* <span data-ttu-id="a78d3-189">Hozzon létre egy [shard térkép](sql-database-elastic-scale-shard-map-management.md) képviselő az adatréteg hello elastic database ügyféloldali kódtár segítségével.</span><span class="sxs-lookup"><span data-stu-id="a78d3-189">Create a [shard map](sql-database-elastic-scale-shard-map-management.md) representing your data tier using hello elastic database client library.</span></span>   
* <span data-ttu-id="a78d3-190">[KÜLSŐ ADATFORRÁS létrehozása/DROP](https://msdn.microsoft.com/library/dn935022.aspx) típusú mydatasource **SHARD_MAP_MANAGER**</span><span class="sxs-lookup"><span data-stu-id="a78d3-190">[CREATE/DROP EXTERNAL DATA SOURCE](https://msdn.microsoft.com/library/dn935022.aspx) mydatasource of type **SHARD_MAP_MANAGER**</span></span>
* <span data-ttu-id="a78d3-191">[A külső tábla létrehozása/DROP](https://msdn.microsoft.com/library/dn935021.aspx) táblanév</span><span class="sxs-lookup"><span data-stu-id="a78d3-191">[CREATE/DROP EXTERNAL TABLE](https://msdn.microsoft.com/library/dn935021.aspx) mytable</span></span>

<span data-ttu-id="a78d3-192">Miután elvégezte ezeket a lépéseket, érheti el hello vízszintesen particionált tábla "mytable", mintha egy helyi táblára.</span><span class="sxs-lookup"><span data-stu-id="a78d3-192">Once you have performed these steps, you can access hello horizontally partitioned table “mytable” as though it were a local table.</span></span> <span data-ttu-id="a78d3-193">Az Azure SQL Database automatikusan megnyílik több párhuzamos kapcsolatok toohello távoli adatbázis hello táblák fizikailag tároló, a távoli adatbázis hello hello kérelmeket dolgozza fel, és hello eredményeket ad vissza.</span><span class="sxs-lookup"><span data-stu-id="a78d3-193">Azure SQL Database automatically opens multiple parallel connections toohello remote databases where hello tables are physically stored, processes hello requests on hello remote databases, and returns hello results.</span></span>
<span data-ttu-id="a78d3-194">További információ a hello vízszintes particionálási forgatókönyv találhatók a szükséges hello lépéseket [vízszintes particionálására rugalmas lekérdezési](sql-database-elastic-query-horizontal-partitioning.md).</span><span class="sxs-lookup"><span data-stu-id="a78d3-194">More information on hello steps required for hello horizontal partitioning scenario can be found in [elastic query for horizontal partitioning](sql-database-elastic-query-horizontal-partitioning.md).</span></span>

<span data-ttu-id="a78d3-195">toobegin kódolási, lásd: [Ismerkedés a vízszintes particionálására (horizontális) rugalmas lekérdezési](sql-database-elastic-query-getting-started.md).</span><span class="sxs-lookup"><span data-stu-id="a78d3-195">toobegin coding, see [Getting started with elastic query for horizontal partitioning (sharding)](sql-database-elastic-query-getting-started.md).</span></span>

## <a name="t-sql-querying"></a><span data-ttu-id="a78d3-196">T-SQL-lekérdezés</span><span class="sxs-lookup"><span data-stu-id="a78d3-196">T-SQL querying</span></span>
<span data-ttu-id="a78d3-197">Miután meghatározta a külső adatforrások és a külső táblák, használhatja rendszeres SQL Server kapcsolati karakterláncok tooconnect toohello adatbázisok ahol definiálva a a külső táblák.</span><span class="sxs-lookup"><span data-stu-id="a78d3-197">Once you have defined your external data sources and your external tables, you can use regular SQL Server connection strings tooconnect toohello databases where you defined your external tables.</span></span> <span data-ttu-id="a78d3-198">Ezt követően futtathatja T-SQL-utasítások a külső táblákon végrehajtott a kapcsolat az alábbiakban leírt hello korlátozásokkal.</span><span class="sxs-lookup"><span data-stu-id="a78d3-198">You can then run T-SQL statements over your external tables on that connection with hello limitations outlined below.</span></span> <span data-ttu-id="a78d3-199">További információt és példákat a T-SQL-lekérdezések találhatók hello dokumentáció témakörök a [vízszintes particionálás](sql-database-elastic-query-horizontal-partitioning.md) és [vertikális particionálás](sql-database-elastic-query-vertical-partitioning.md).</span><span class="sxs-lookup"><span data-stu-id="a78d3-199">You can find more information and examples of T-SQL queries in hello documentation topics for [horizontal partitioning](sql-database-elastic-query-horizontal-partitioning.md) and [vertical partitioning](sql-database-elastic-query-vertical-partitioning.md).</span></span>

## <a name="connectivity-for-tools"></a><span data-ttu-id="a78d3-200">Eszközök kapcsolattal</span><span class="sxs-lookup"><span data-stu-id="a78d3-200">Connectivity for tools</span></span>
<span data-ttu-id="a78d3-201">Rendszeres SQL Server kapcsolati karakterláncok tooconnect is használhatja, az alkalmazások és BI vagy adatok integrációs eszközök toodatabases, amelyek külső táblákon.</span><span class="sxs-lookup"><span data-stu-id="a78d3-201">You can use regular SQL Server connection strings tooconnect your applications and BI or data integration tools toodatabases that have external tables.</span></span> <span data-ttu-id="a78d3-202">Győződjön meg arról, hogy az SQL Server támogatja-e az eszköz adatforrásként.</span><span class="sxs-lookup"><span data-stu-id="a78d3-202">Make sure that SQL Server is supported as a data source for your tool.</span></span> <span data-ttu-id="a78d3-203">Miután csatlakozott, tekintse meg a toohello rugalmas lekérdezési adatbázis és a hello külső tábla az adatbázis, ahogy kellene tennie bármely egyéb SQL Server adatbázis csatlakozni, toowith az eszköz.</span><span class="sxs-lookup"><span data-stu-id="a78d3-203">Once connected, refer toohello elastic query database and hello external tables in that database just like you would do with any other SQL Server database that you connect toowith your tool.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="a78d3-204">Hitelesítés az Azure Active Directoryval rugalmas lekérdezési jelenleg nem támogatott.</span><span class="sxs-lookup"><span data-stu-id="a78d3-204">Authentication using Azure Active Directory with elastic queries is not currently supported.</span></span>
> 
> 

## <a name="cost"></a><span data-ttu-id="a78d3-205">Költségek</span><span class="sxs-lookup"><span data-stu-id="a78d3-205">Cost</span></span>
<span data-ttu-id="a78d3-206">Rugalmas lekérdezési szerepel, az Azure SQL Database adatbázisok hello költségét.</span><span class="sxs-lookup"><span data-stu-id="a78d3-206">Elastic query is included into hello cost of Azure SQL Database databases.</span></span> <span data-ttu-id="a78d3-207">Vegye figyelembe, hogy a távoli adatbázisokhoz belül hol áll egy másik adatközpont, mint a Rugalmas lekérdezési végpont hello topológiák támogatottak, de a távoli adatbázisokhoz adatforgalommal regular van szó, [Azure díjszabás](https://azure.microsoft.com/pricing/details/data-transfers/).</span><span class="sxs-lookup"><span data-stu-id="a78d3-207">Note that topologies where your remote databases are in a different data center than hello elastic query endpoint are supported, but data egress from remote databases are charged regular [Azure rates](https://azure.microsoft.com/pricing/details/data-transfers/).</span></span>

## <a name="preview-limitations"></a><span data-ttu-id="a78d3-208">Előzetes verzió korlátozásai</span><span class="sxs-lookup"><span data-stu-id="a78d3-208">Preview limitations</span></span>
* <span data-ttu-id="a78d3-209">Az első rugalmas lekérdezés futtatása is eltarthat, tooa hello szabványos teljesítmény-rétegen néhány percig.</span><span class="sxs-lookup"><span data-stu-id="a78d3-209">Running your first elastic query can take up tooa few minutes on hello Standard performance tier.</span></span> <span data-ttu-id="a78d3-210">Most szükség tooload hello rugalmas lekérdezési funkcionalitás; teljesítmény betöltése növeli a magasabb teljesítmény rétegekkel.</span><span class="sxs-lookup"><span data-stu-id="a78d3-210">This time is necessary tooload hello elastic query functionality; loading performance improves with higher performance tiers.</span></span>
* <span data-ttu-id="a78d3-211">A külső adatforrások vagy a külső táblákhoz az SSMS vagy az SSDT Scripting még nem támogatott.</span><span class="sxs-lookup"><span data-stu-id="a78d3-211">Scripting of external data sources or external tables from SSMS or SSDT is not yet supported.</span></span>
* <span data-ttu-id="a78d3-212">Importálási/exportálási az SQL DB egyelőre nem támogatják a külső adatforrások és a külső táblákra.</span><span class="sxs-lookup"><span data-stu-id="a78d3-212">Import/Export for SQL DB does not yet support external data sources and external tables.</span></span> <span data-ttu-id="a78d3-213">Ha toouse Import/Export van szüksége, dobható el, ezek az objektumok exportálása előtt, és ezután hozza létre őket importálása után.</span><span class="sxs-lookup"><span data-stu-id="a78d3-213">If you need toouse Import/Export, drop these objects before exporting and then re-create them after importing.</span></span>
* <span data-ttu-id="a78d3-214">Rugalmas lekérdezés csak jelenleg csak olvasási hozzáféréssel tooexternal táblákat.</span><span class="sxs-lookup"><span data-stu-id="a78d3-214">Elastic query currently only supports read-only access tooexternal tables.</span></span> <span data-ttu-id="a78d3-215">Azonban használhatja teljes T-SQL funkciókat hello adatbázison ahol hello külső tábla meg van adva.</span><span class="sxs-lookup"><span data-stu-id="a78d3-215">You can, however, use full T-SQL functionality on hello database where hello external table is defined.</span></span> <span data-ttu-id="a78d3-216">Ez akkor lehet hasznos, például az ideiglenes eredmények megőrzése használ, például VÁLASSZA < column_list > < local_table > azokat, vagy toodefine tárolt eljárások hello rugalmas adatbázis lekérdezése tooexternal táblák vonatkoznak.</span><span class="sxs-lookup"><span data-stu-id="a78d3-216">This can be useful to, e.g., persist temporary results using, e.g., SELECT <column_list> INTO <local_table>, or toodefine stored procedures on hello elastic query database which refer tooexternal tables.</span></span>
* <span data-ttu-id="a78d3-217">Típus: nvarchar(max), kivéve a LOB-típusok nem támogatottak a külső tábla definíciókat.</span><span class="sxs-lookup"><span data-stu-id="a78d3-217">Except for nvarchar(max), LOB types are not supported in external table definitions.</span></span> <span data-ttu-id="a78d3-218">Megoldás hozhat létre hello távoli adatbázis hello LOB típusú adat típus: nvarchar(max) kerül egy nézet, a külső tábla megadása helyett hello alaptábla hello nézet keresztül és majd típussá hello eredeti LOB típusú újra üzembe a lekérdezésekben.</span><span class="sxs-lookup"><span data-stu-id="a78d3-218">As a workaround, you can create a view on hello remote database that casts hello LOB type into nvarchar(max), define your external table over hello view instead of hello base table and then cast it back into hello original LOB type in your queries.</span></span>
* <span data-ttu-id="a78d3-219">A külső táblákon végrehajtott oszlop statisztikai adatainak jelenleg nem támogatottak.</span><span class="sxs-lookup"><span data-stu-id="a78d3-219">Column statistics over external tables are currently not supported.</span></span> <span data-ttu-id="a78d3-220">Táblák statisztika támogatottak, de manuálisan létrehozott toobe kell.</span><span class="sxs-lookup"><span data-stu-id="a78d3-220">Tables statistics are supported, but need toobe created manually.</span></span>

## <a name="feedback"></a><span data-ttu-id="a78d3-221">Visszajelzés</span><span class="sxs-lookup"><span data-stu-id="a78d3-221">Feedback</span></span>
<span data-ttu-id="a78d3-222">Ossza meg a felhasználói élmény kapcsolatos visszajelzéseket rugalmas lekérdezési betartásának vizsgálatára disqus-beszélgetésben teheti az alábbi, hello MSDN fórumain, vagy a Stackoverflow.</span><span class="sxs-lookup"><span data-stu-id="a78d3-222">Please share feedback on your experience with elastic queries with us on Disqus below, hello MSDN forums, or on Stackoverflow.</span></span> <span data-ttu-id="a78d3-223">Azt is hello szolgáltatást (hibák, nyers szélén, a szolgáltatás hézagok) visszajelzést különböző.</span><span class="sxs-lookup"><span data-stu-id="a78d3-223">We are interested in all kinds of feedback about hello service (defects, rough edges, feature gaps).</span></span>

## <a name="next-steps"></a><span data-ttu-id="a78d3-224">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="a78d3-224">Next steps</span></span>

* <span data-ttu-id="a78d3-225">Függőleges particionálási oktatóanyagért lásd a [első lépések (a vertikális particionálás) közötti adatbázis-lekérdezés](sql-database-elastic-query-getting-started-vertical.md).</span><span class="sxs-lookup"><span data-stu-id="a78d3-225">For a vertical partitioning tutorial, see [Getting started with cross-database query (vertical partitioning)](sql-database-elastic-query-getting-started-vertical.md).</span></span>
* <span data-ttu-id="a78d3-226">A szintaxis és a minta lekérdezések függőleges particionált adatok, lásd: [adatok lekérdezése függőleges particionálva)](sql-database-elastic-query-vertical-partitioning.md)</span><span class="sxs-lookup"><span data-stu-id="a78d3-226">For syntax and sample queries for vertically partitioned data, see [Querying vertically partitioned data)](sql-database-elastic-query-vertical-partitioning.md)</span></span>
* <span data-ttu-id="a78d3-227">Vízszintes particionálás (horizontális) oktatóanyagért lásd a [Ismerkedés a vízszintes particionálására (horizontális) rugalmas lekérdezési](sql-database-elastic-query-getting-started.md).</span><span class="sxs-lookup"><span data-stu-id="a78d3-227">For a horizontal partitioning (sharding) tutorial, see [Getting started with elastic query for horizontal partitioning (sharding)](sql-database-elastic-query-getting-started.md).</span></span>
* <span data-ttu-id="a78d3-228">A szintaxis és a minta lekérdezések vízszintesen particionált adatok, lásd: [adatok vízszintesen lekérdezése particionálva)](sql-database-elastic-query-horizontal-partitioning.md)</span><span class="sxs-lookup"><span data-stu-id="a78d3-228">For syntax and sample queries for horizontally partitioned data, see [Querying horizontally partitioned data)](sql-database-elastic-query-horizontal-partitioning.md)</span></span>
* <span data-ttu-id="a78d3-229">Lásd: [sp\_hajtható végre \_távoli](https://msdn.microsoft.com/library/mt703714) tárolt eljárás, amely végrehajtja a Transact-SQL-utasítás egy egyetlen távoli Azure SQL Database vagy az adatbázisok egy vízszintes particionálási sémát a szilánkok szolgál.</span><span class="sxs-lookup"><span data-stu-id="a78d3-229">See [sp\_execute \_remote](https://msdn.microsoft.com/library/mt703714) for a stored procedure that executes a Transact-SQL statement on a single remote Azure SQL Database or set of databases serving as shards in a horizontal partitioning scheme.</span></span>

<!--Image references-->
[1]: ./media/sql-database-elastic-query-overview/overview.png
[2]: ./media/sql-database-elastic-query-overview/topology1.png
[3]: ./media/sql-database-elastic-query-overview/vertpartrrefdata.png
[4]: ./media/sql-database-elastic-query-overview/verticalpartitioning.png
[5]: ./media/sql-database-elastic-query-overview/horizontalpartitioning.png

<!--anchors-->
