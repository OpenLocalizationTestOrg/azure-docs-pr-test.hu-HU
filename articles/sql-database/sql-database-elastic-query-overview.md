---
title: "Az Azure SQL Database rugalmas lekérdezési áttekintése |} Microsoft Docs"
description: "A Rugalmas lekérdezési szolgáltatás áttekintése"
services: sql-database
documentationcenter: 
manager: jhubbard
author: MladjoA
ms.assetid: a8bf0e2c-bc74-44d0-9b1e-bcc9a6aa2e33
ms.service: sql-database
ms.custom: scale out apps
ms.workload: sql-database
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 04/27/2016
ms.author: mlandzic
ms.openlocfilehash: 9b3151248a1d036117bbdc9af03a98dff71ca535
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 08/18/2017
---
# <a name="azure-sql-database-elastic-query-overview-preview"></a><span data-ttu-id="2f871-103">Az Azure SQL Database rugalmas lekérdezési áttekintése (előzetes verzió)</span><span class="sxs-lookup"><span data-stu-id="2f871-103">Azure SQL Database elastic query overview (preview)</span></span>
<span data-ttu-id="2f871-104">A rugalmas lekérdezés (az előzetes verzió) funkciójával is több adatbázis az Azure SQL Database Transact-SQL-lekérdezés futtatható.</span><span class="sxs-lookup"><span data-stu-id="2f871-104">The elastic query feature (in preview) enables you to run a Transact-SQL query that spans multiple databases in Azure SQL Database.</span></span> <span data-ttu-id="2f871-105">Lehetővé teszi a távoli táblákat elérő és a csatlakozás a Microsoft és harmadik féltől származó eszközök (az Excel, Power BI, Tableau, stb.) az adatok rétegek több adatbázisból átfogó lekérdezése közötti adatbázis-lekérdezések végrehajtásához.</span><span class="sxs-lookup"><span data-stu-id="2f871-105">It allows you to perform cross-database queries to access remote tables, and to connect Microsoft and third party tools (Excel, PowerBI, Tableau, etc.) to query across data tiers with multiple databases.</span></span> <span data-ttu-id="2f871-106">Ezzel a szolgáltatással horizontális felskálázás lekérdezések nagy adat szintet az SQL-adatbázis és az üzleti intelligenciával jelentések eredményeinek képi megjelenítése.</span><span class="sxs-lookup"><span data-stu-id="2f871-106">Using this feature, you can scale out queries to large data tiers in SQL Database and visualize the results in business intelligence (BI) reports.</span></span>


## <a name="why-use-elastic-queries"></a><span data-ttu-id="2f871-107">Rugalmas lekérdezések miért érdemes használni?</span><span class="sxs-lookup"><span data-stu-id="2f871-107">Why use elastic queries?</span></span>

<span data-ttu-id="2f871-108">**Azure SQL Database**</span><span class="sxs-lookup"><span data-stu-id="2f871-108">**Azure SQL Database**</span></span>

<span data-ttu-id="2f871-109">A lekérdezés teljesen a T-SQL Azure SQL-adatbázisok között.</span><span class="sxs-lookup"><span data-stu-id="2f871-109">Query across Azure SQL databases completely in T-SQL.</span></span> <span data-ttu-id="2f871-110">Ez lehetővé teszi a távoli adatbázis lekérdezése csak olvasható.</span><span class="sxs-lookup"><span data-stu-id="2f871-110">This allows for read-only querying of remote databases.</span></span> <span data-ttu-id="2f871-111">Ez lehetővé teszi a jelenlegi helyszíni SQL Server ügyfelek három és négy part nevek vagy csatolt kiszolgáló az SQL-Adatbázist használó alkalmazások áttelepítéséhez.</span><span class="sxs-lookup"><span data-stu-id="2f871-111">This provides an option for current on-premises SQL Server customers to migrate applications using three- and four-part names or linked server to SQL DB.</span></span>

<span data-ttu-id="2f871-112">**Standard csomagban érhető el**</span><span class="sxs-lookup"><span data-stu-id="2f871-112">**Available on standard tier**</span></span>

<span data-ttu-id="2f871-113">Rugalmas lekérdezés használata támogatott a szabványos teljesítmény-rétegen a prémium szintű teljesítményszintet mellett.</span><span class="sxs-lookup"><span data-stu-id="2f871-113">Elastic query is supported on the Standard performance tier in addition to the Premium performance tier.</span></span> <span data-ttu-id="2f871-114">Lásd az alábbi előzetes verzió korlátozásai alacsonyabb teljesítményt rétegek teljesítményének korlátozásai.</span><span class="sxs-lookup"><span data-stu-id="2f871-114">See the section on Preview Limitations below on performance limitations for lower performance tiers.</span></span>

<span data-ttu-id="2f871-115">**Távoli adatbázis leküldése**</span><span class="sxs-lookup"><span data-stu-id="2f871-115">**Push to remote databases**</span></span>

<span data-ttu-id="2f871-116">Rugalmas lekérdezések most tolható SQL-paraméterek a távoli adatbázisokhoz végrehajtásra.</span><span class="sxs-lookup"><span data-stu-id="2f871-116">Elastic queries can now push SQL parameters to the remote databases for execution.</span></span>

<span data-ttu-id="2f871-117">**A tárolt eljárás végrehajtása**</span><span class="sxs-lookup"><span data-stu-id="2f871-117">**Stored procedure execution**</span></span>

<span data-ttu-id="2f871-118">Távoli tárolt eljárás hívások vagy a távoli függvények használatával hajtható végre [sp\_hajtható végre \_távoli](https://msdn.microsoft.com/library/mt703714).</span><span class="sxs-lookup"><span data-stu-id="2f871-118">Execute remote stored procedure calls or remote functions using [sp\_execute \_remote](https://msdn.microsoft.com/library/mt703714).</span></span>

<span data-ttu-id="2f871-119">**Rugalmasság**</span><span class="sxs-lookup"><span data-stu-id="2f871-119">**Flexibility**</span></span>

<span data-ttu-id="2f871-120">Rugalmas lekérdezéssel külső táblák most jelentheti a távoli táblák különböző séma vagy tábla neve.</span><span class="sxs-lookup"><span data-stu-id="2f871-120">External tables with elastic query can now refer to remote tables with a different schema or table name.</span></span>

## <a name="elastic-query-scenarios"></a><span data-ttu-id="2f871-121">Rugalmas lekérdezési forgatókönyvek</span><span class="sxs-lookup"><span data-stu-id="2f871-121">Elastic query scenarios</span></span>

<span data-ttu-id="2f871-122">A cél, hogy amennyiben több adatbázis hozzájárul az egyetlen teljes eredmény sorok lekérdező forgatókönyvek megkönnyítése.</span><span class="sxs-lookup"><span data-stu-id="2f871-122">The goal is to facilitate querying scenarios where multiple databases contribute rows into a single overall result.</span></span> <span data-ttu-id="2f871-123">A lekérdezés vagy a felhasználó vagy alkalmazás közvetlenül vagy közvetve útján az adatbázis csatlakozó eszközök állíthatók össze.</span><span class="sxs-lookup"><span data-stu-id="2f871-123">The query can either be composed by the user or application directly, or indirectly through tools that are connected to the database.</span></span> <span data-ttu-id="2f871-124">Ez különösen fontos jelentések, kereskedelmi BI vagy adatok-integrációs eszközök használatával létrehozásakor – vagy bármilyen alkalmazás, és nem módosítható.</span><span class="sxs-lookup"><span data-stu-id="2f871-124">This is especially useful when creating reports, using commercial BI or data integration tools—or any application that cannot be changed.</span></span> <span data-ttu-id="2f871-125">Rugalmas lekérdezéshez lekérheti az eszközök, például az Excel, a Power BI, a Tableau vagy a Cognos a megszokott SQL Server kapcsolódási élményt több adatbázis között.</span><span class="sxs-lookup"><span data-stu-id="2f871-125">With an elastic query, you can query across several databases using the familiar SQL Server connectivity experience in tools such as Excel, PowerBI, Tableau, or Cognos.</span></span>
<span data-ttu-id="2f871-126">Egy rugalmas lekérdezés lehetővé teszi egy teljes gyűjteményhez az adatbázisok SQL Server Management Studio vagy Visual Studio által kibocsátott lekérdezések használatával egyszerűen hozzáférhetnek, és megkönnyíti a kereszt-adatbázis lekérdezése az Entity Framework vagy más ORM környezetekben.</span><span class="sxs-lookup"><span data-stu-id="2f871-126">An elastic query allows easy access to an entire collection of databases through queries issued by SQL Server Management Studio or Visual Studio, and facilitates cross-database querying from Entity Framework or other ORM environments.</span></span> <span data-ttu-id="2f871-127">1. ábra mutatja egy olyan forgatókönyvet, ahol egy meglévő felhőbeli alkalmazás (használó a [elastic database ügyféloldali kódtárának](sql-database-elastic-database-client-library.md)) réteg a kiterjesztett adatok épít, és egy rugalmas lekérdezési adatbázisok közötti jelentéskészítéshez használt.</span><span class="sxs-lookup"><span data-stu-id="2f871-127">Figure 1 shows a scenario where an existing cloud application (which uses the [elastic database client library](sql-database-elastic-database-client-library.md)) builds on a scaled-out data tier, and an elastic query is used for cross-database reporting.</span></span>

<span data-ttu-id="2f871-128">**1. ábra** kiterjesztett adatszinten használt rugalmas lekérdezés</span><span class="sxs-lookup"><span data-stu-id="2f871-128">**Figure 1** Elastic query used on scaled-out data tier</span></span>

![A kiterjesztett adatszinten rugalmas lekérdezés][1]

<span data-ttu-id="2f871-130">Az alábbi topológiák jellemző rugalmas lekérdezés forgatókönyvet:</span><span class="sxs-lookup"><span data-stu-id="2f871-130">Customer scenarios for elastic query are characterized by the following topologies:</span></span>

* <span data-ttu-id="2f871-131">**A vertikális particionálás - adatbázisok közötti lekérdezések** (1. topológia): az adatok particionálása függőleges egy adatrétegbeli adatbázisok számú között.</span><span class="sxs-lookup"><span data-stu-id="2f871-131">**Vertical partitioning - Cross-database queries** (Topology 1): The data is partitioned vertically between a number of databases in a data tier.</span></span> <span data-ttu-id="2f871-132">A táblák más-más részhalmazához általában a különböző adatbázisokhoz elhelyezve.</span><span class="sxs-lookup"><span data-stu-id="2f871-132">Typically, different sets of tables reside on different databases.</span></span> <span data-ttu-id="2f871-133">Ez azt jelenti, hogy a séma nem egyezik, a különböző adatbázisokhoz.</span><span class="sxs-lookup"><span data-stu-id="2f871-133">That means that the schema is different on different databases.</span></span> <span data-ttu-id="2f871-134">Például a készlet összes tábla esetén egy adatbázis míg nyilvántartási kapcsolatos összes táblázatot egy második adatbázison.</span><span class="sxs-lookup"><span data-stu-id="2f871-134">For instance, all tables for inventory are on one database while all accounting-related tables are on a second database.</span></span> <span data-ttu-id="2f871-135">Ez a topológia gyakori alkalmazási esetekben szükséges átfogó lekérdezése vagy jelentések fordítási adatbázisok táblái között.</span><span class="sxs-lookup"><span data-stu-id="2f871-135">Common use cases with this topology require one to query across or to compile reports across tables in several databases.</span></span>
* <span data-ttu-id="2f871-136">**Vízszintes particionálására - horizontális** (topológia 2): adatok particionálása vízszintesen szét a sorok méretezett kimenő adatok réteg.</span><span class="sxs-lookup"><span data-stu-id="2f871-136">**Horizontal Partitioning - Sharding** (Topology 2): Data is partitioned horizontally to distribute rows across a scaled out data tier.</span></span> <span data-ttu-id="2f871-137">Ezt a módszert használja a séma megegyezik a programban részt vevő összes adatbázisra.</span><span class="sxs-lookup"><span data-stu-id="2f871-137">With this approach, the schema is identical on all participating databases.</span></span> <span data-ttu-id="2f871-138">Ez a megközelítés "horizontális" néven is ismert.</span><span class="sxs-lookup"><span data-stu-id="2f871-138">This approach is also called “sharding”.</span></span> <span data-ttu-id="2f871-139">Horizontális hajtható végre, és felügyelt használata (1) a rugalmas adatbázis eszközöket, könyvtárakat vagy (2) a önkiszolgáló-horizontális skálázási.</span><span class="sxs-lookup"><span data-stu-id="2f871-139">Sharding can be performed and managed using (1) the elastic database tools libraries or (2) self-sharding.</span></span> <span data-ttu-id="2f871-140">Egy rugalmas lekérdezés segítségével lekérdezése vagy fordítsa le a jelentések számos szilánkok között.</span><span class="sxs-lookup"><span data-stu-id="2f871-140">An elastic query is used to query or compile reports across many shards.</span></span>

> [!NOTE]
> <span data-ttu-id="2f871-141">Rugalmas lekérdezési működik a legjobban az alkalmi jelentéskészítési forgatókönyvekhez, ahol a feldolgozás része az adatréteg hajtható végre.</span><span class="sxs-lookup"><span data-stu-id="2f871-141">Elastic query works best for occasional reporting scenarios where most of the processing can be performed on the data tier.</span></span> <span data-ttu-id="2f871-142">Jelentéskészítési munkaterhelést vagy adatraktározási forgatókönyvekben összetettebb lekérdezések esetében is érdemes lehet [Azure SQL Data Warehouse](https://azure.microsoft.com/services/sql-data-warehouse/).</span><span class="sxs-lookup"><span data-stu-id="2f871-142">For heavy reporting workloads or data warehousing scenarios with more complex queries, also consider using [Azure SQL Data Warehouse](https://azure.microsoft.com/services/sql-data-warehouse/).</span></span>
>  

## <a name="vertical-partitioning---cross-database-queries"></a><span data-ttu-id="2f871-143">A vertikális particionálás - közötti adatbázis-lekérdezések</span><span class="sxs-lookup"><span data-stu-id="2f871-143">Vertical partitioning - cross-database queries</span></span>

<span data-ttu-id="2f871-144">A kódolási megkezdéséhez tekintse meg [első lépések (a vertikális particionálás) közötti adatbázis-lekérdezés](sql-database-elastic-query-getting-started-vertical.md).</span><span class="sxs-lookup"><span data-stu-id="2f871-144">To begin coding, see [Getting started with cross-database query (vertical partitioning)](sql-database-elastic-query-getting-started-vertical.md).</span></span>

<span data-ttu-id="2f871-145">Egy rugalmas lekérdezést, hogy más SQL-adatbázisok számára elérhető SQL-adatbázisban található adatok használható.</span><span class="sxs-lookup"><span data-stu-id="2f871-145">An elastic query can be used to make data located in a SQL database available to other SQL databases.</span></span> <span data-ttu-id="2f871-146">Ez lehetővé teszi, hogy a lekérdezések bármely távoli SQL adatbázis tábláit hivatkozik egy adatbázisból.</span><span class="sxs-lookup"><span data-stu-id="2f871-146">This allows queries from one database to refer to tables in any other remote SQL database.</span></span> <span data-ttu-id="2f871-147">Az első lépés célja az egyes távoli adatbázisok külső adatforrás meghatározása.</span><span class="sxs-lookup"><span data-stu-id="2f871-147">The first step is to define an external data source for each remote database.</span></span> <span data-ttu-id="2f871-148">A külső adatforrást, amelyből el kívánja a távoli adatbázis lévő táblák eléréséhez a helyi adatbázisban van definiálva.</span><span class="sxs-lookup"><span data-stu-id="2f871-148">The external data source is defined in the local database from which you want to gain access to tables located on the remote database.</span></span> <span data-ttu-id="2f871-149">Nem szükségesek a távoli adatbázishoz.</span><span class="sxs-lookup"><span data-stu-id="2f871-149">No changes are necessary on the remote database.</span></span> <span data-ttu-id="2f871-150">A tipikus függőleges particionálási forgatókönyveket, amelyekben a különböző adatbázisokhoz rendelkeznek különböző sémákat rugalmas lekérdezések segítségével gyakori alkalmazási esetekben, például a referencia-adatokhoz való hozzáférés megvalósításához és adatbázisok közötti lekérdezése.</span><span class="sxs-lookup"><span data-stu-id="2f871-150">For typical vertical partitioning scenarios where different databases have different schemas, elastic queries can be used to implement common use cases such as access to reference data and cross-database querying.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="2f871-151">Az ALTER ANY külső ADATFORRÁS engedéllyel kell rendelkeznie.</span><span class="sxs-lookup"><span data-stu-id="2f871-151">You must possess ALTER ANY EXTERNAL DATA SOURCE permission.</span></span> <span data-ttu-id="2f871-152">Ez az engedély megtalálható az ALTER DATABASE engedéllyel.</span><span class="sxs-lookup"><span data-stu-id="2f871-152">This permission is included with the ALTER DATABASE permission.</span></span> <span data-ttu-id="2f871-153">Az ALTER ANY külső ADATFORRÁS engedélyekre van szükség az alapul szolgáló adatforrásban hivatkozik.</span><span class="sxs-lookup"><span data-stu-id="2f871-153">ALTER ANY EXTERNAL DATA SOURCE permissions are needed to refer to the underlying data source.</span></span>
>

<span data-ttu-id="2f871-154">**Referenciaadatok**: A topológia hivatkozás adatok felügyeletére használható.</span><span class="sxs-lookup"><span data-stu-id="2f871-154">**Reference data**: The topology is used for reference data management.</span></span> <span data-ttu-id="2f871-155">Az alábbi ábrán két tábla (T1 és T2) referenciaadatokkal egy dedikált adatbázis tárolja.</span><span class="sxs-lookup"><span data-stu-id="2f871-155">In the figure below, two tables (T1 and T2) with reference data are kept on a dedicated database.</span></span> <span data-ttu-id="2f871-156">Rugalmas lekérdezéssel, érhetők el a T1 és T2 táblák távolról más adatbázisból származó az ábrán látható módon.</span><span class="sxs-lookup"><span data-stu-id="2f871-156">Using an elastic query, you can now access tables T1 and T2 remotely from other databases, as shown in the figure.</span></span> <span data-ttu-id="2f871-157">Ha referencia táblákat kis vagy távoli referencia táblába lekérdezések 1 topológiájának használata szelektív predikátumok rendelkezik.</span><span class="sxs-lookup"><span data-stu-id="2f871-157">Use topology 1 if reference tables are small or remote queries into reference table have selective predicates.</span></span>

<span data-ttu-id="2f871-158">**2. ábra** vertikális particionálás - rugalmas lekérdezés a lekérdezés referenciaadatok használatával</span><span class="sxs-lookup"><span data-stu-id="2f871-158">**Figure 2** Vertical partitioning - Using elastic query to query reference data</span></span>

![Vertikális particionálás - rugalmas lekérdezés a lekérdezés referenciaadatok használatával][3]

<span data-ttu-id="2f871-160">**Adatbázisok közötti lekérdezése**: rugalmas lekérdezések lehetővé teszik a használati esetek igénylő számos SQL-adatbázisok közötti lekérdezése.</span><span class="sxs-lookup"><span data-stu-id="2f871-160">**Cross-database querying**: Elastic queries enable use cases that require querying across several SQL databases.</span></span> <span data-ttu-id="2f871-161">3. ábrán látható négy különböző adatbázist: CRM-hez, a szoftverleltár, a HR és a termékek.</span><span class="sxs-lookup"><span data-stu-id="2f871-161">Figure 3 shows four different databases: CRM, Inventory, HR and Products.</span></span> <span data-ttu-id="2f871-162">Egy adatbázis végzett lekérdezések kell egyet vagy mind a más adatbázisok eléréséhez.</span><span class="sxs-lookup"><span data-stu-id="2f871-162">Queries performed in one of the databases also need access to one or all the other databases.</span></span> <span data-ttu-id="2f871-163">Rugalmas lekérdezéssel, konfigurálhatja az adatbázis ebben az esetben néhány egyszerű DDL-utasításokban fut a négy adatbázisok mindegyike esetében.</span><span class="sxs-lookup"><span data-stu-id="2f871-163">Using an elastic query, you can configure your database for this case by running a few simple DDL statements on each of the four databases.</span></span> <span data-ttu-id="2f871-164">Ez egyszeri konfigurálás után egy távoli táblájához való hozzáférés más dolga, mint a T-SQL-lekérdezések, illetve az Üzletiintelligencia-eszközök egy helyi táblára hivatkozik.</span><span class="sxs-lookup"><span data-stu-id="2f871-164">After this one-time configuration, access to a remote table is as simple as referring to a local table from your T-SQL queries or from your BI tools.</span></span> <span data-ttu-id="2f871-165">Ezt a módszert akkor ajánlott, ha a távoli lekérdezéseknél nem eredményeket nagy.</span><span class="sxs-lookup"><span data-stu-id="2f871-165">This approach is recommended if the remote queries do not return large results.</span></span>

<span data-ttu-id="2f871-166">**3. ábra** vertikális particionálás - különböző adatbázisok közötti rugalmas lekérdezés a lekérdezés használata</span><span class="sxs-lookup"><span data-stu-id="2f871-166">**Figure 3** Vertical partitioning - Using elastic query to query across various databases</span></span>

![Vertikális particionálás - különböző adatbázisok közötti rugalmas lekérdezés a lekérdezés használata][4]

<span data-ttu-id="2f871-168">Az alábbi lépéseket a függőleges particionálási forgatókönyvek, amelyek az ugyanazon sémával távoli SQL-adatbázisok található táblázat hozzáférést igényelnek a rugalmas adatbázis-lekérdezéseinek konfigurálása:</span><span class="sxs-lookup"><span data-stu-id="2f871-168">The following steps configure elastic database queries for vertical partitioning scenarios that require access to a table located on remote SQL databases with the same schema:</span></span>

* <span data-ttu-id="2f871-169">[Hozzon létre FŐKULCS](https://msdn.microsoft.com/library/ms174382.aspx) mymasterkey</span><span class="sxs-lookup"><span data-stu-id="2f871-169">[CREATE MASTER KEY](https://msdn.microsoft.com/library/ms174382.aspx) mymasterkey</span></span>
* <span data-ttu-id="2f871-170">[CREATE DATABASE SCOPED CREDENTIAL](https://msdn.microsoft.com/library/mt270260.aspx) mycredential</span><span class="sxs-lookup"><span data-stu-id="2f871-170">[CREATE DATABASE SCOPED CREDENTIAL](https://msdn.microsoft.com/library/mt270260.aspx) mycredential</span></span>
* <span data-ttu-id="2f871-171">[KÜLSŐ ADATFORRÁS létrehozása/DROP](https://msdn.microsoft.com/library/dn935022.aspx) mydatasource típusú **RDBMS**</span><span class="sxs-lookup"><span data-stu-id="2f871-171">[CREATE/DROP EXTERNAL DATA SOURCE](https://msdn.microsoft.com/library/dn935022.aspx) mydatasource of type **RDBMS**</span></span>
* <span data-ttu-id="2f871-172">[A külső tábla létrehozása/DROP](https://msdn.microsoft.com/library/dn935021.aspx) táblanév</span><span class="sxs-lookup"><span data-stu-id="2f871-172">[CREATE/DROP EXTERNAL TABLE](https://msdn.microsoft.com/library/dn935021.aspx) mytable</span></span>

<span data-ttu-id="2f871-173">Miután a DDL-utasításokban, a "mytable" távoli tábla, mintha egy helyi táblára érheti el.</span><span class="sxs-lookup"><span data-stu-id="2f871-173">After running the DDL statements, you can access the remote table “mytable” as though it were a local table.</span></span> <span data-ttu-id="2f871-174">Az Azure SQL Database automatikusan megnyitja a kapcsolatot a távoli adatbázissal, feldolgozza a kérést a távoli adatbázishoz, és az eredményeket ad vissza.</span><span class="sxs-lookup"><span data-stu-id="2f871-174">Azure SQL Database automatically opens a connection to the remote database, processes your request on the remote database, and returns the results.</span></span>

## <a name="horizontal-partitioning---sharding"></a><span data-ttu-id="2f871-175">Vízszintes particionálás - horizontális</span><span class="sxs-lookup"><span data-stu-id="2f871-175">Horizontal partitioning - sharding</span></span>
<span data-ttu-id="2f871-176">A Rugalmas lekérdezési vízszintesen, azaz particionálva, a szilánkos keresztül jelentéskészítési feladatok elvégzéséhez adatszinten szükség van egy [rugalmas adatbázis shard térkép](sql-database-elastic-scale-shard-map-management.md) képviseli az adatréteg adatbázisait.</span><span class="sxs-lookup"><span data-stu-id="2f871-176">Using elastic query to perform reporting tasks over a sharded, i.e., horizontally partitioned, data tier requires an [elastic database shard map](sql-database-elastic-scale-shard-map-management.md) to represent the databases of the data tier .</span></span> <span data-ttu-id="2f871-177">Általában csak egyetlen shard térképre használatban van ebben a forgatókönyvben, és rugalmas lekérdezési lehetőségeket (átjárócsomópont) dedikált adatbázis lekérdezések jelentéskészítéshez belépési pontként szolgál.</span><span class="sxs-lookup"><span data-stu-id="2f871-177">Typically, only a single shard map is used in this scenario and a dedicated database with elastic query capabilities (head node) serves as the entry point for reporting queries.</span></span> <span data-ttu-id="2f871-178">Csak a dedikált adatbázis a shard térkép hozzáférésre van szüksége.</span><span class="sxs-lookup"><span data-stu-id="2f871-178">Only this dedicated database needs access to the shard map.</span></span> <span data-ttu-id="2f871-179">4. ábra szemlélteti, ez a topológia és a Rugalmas lekérdezési adatbázis és a shard hozzárendelése és konfigurációja.</span><span class="sxs-lookup"><span data-stu-id="2f871-179">Figure 4 illustrates this topology and its configuration with the elastic query database and shard map.</span></span> <span data-ttu-id="2f871-180">Az adatbázisok az adatréteg lehet bármely Azure SQL Database verzióját vagy kiadását.</span><span class="sxs-lookup"><span data-stu-id="2f871-180">The databases in the data tier can be of any Azure SQL Database version or edition.</span></span> <span data-ttu-id="2f871-181">A rugalmas adatbázis ügyféloldali kódtár és shard maps létrehozásával kapcsolatos további információkért lásd: [Shard térkép felügyeleti](sql-database-elastic-scale-shard-map-management.md).</span><span class="sxs-lookup"><span data-stu-id="2f871-181">For more information about the elastic database client library and creating shard maps, see [Shard map management](sql-database-elastic-scale-shard-map-management.md).</span></span>

<span data-ttu-id="2f871-182">**4. ábra** vízszintes particionálás - rugalmas lekérdezéssel felett horizontálisan skálázott adatok rétegek jelentéskészítéshez</span><span class="sxs-lookup"><span data-stu-id="2f871-182">**Figure 4** Horizontal partitioning - Using elastic query for reporting over sharded data tiers</span></span>

![Vízszintes particionálás - rugalmas lekérdezéssel felett horizontálisan skálázott adatok rétegek jelentéskészítéshez][5]

> [!NOTE]
> <span data-ttu-id="2f871-184">A rugalmas adatbázis lekérdezése (átjárócsomópont) lehet külön adatbázis, vagy ugyanazt az adatbázist, amelyen a shard leképezés.</span><span class="sxs-lookup"><span data-stu-id="2f871-184">Elastic Query Database (head node) can be separate database, or it can be the same database that hosts the shard map.</span></span> <span data-ttu-id="2f871-185">Bármilyen konfiguráció választja, győződjön meg arról, hogy az adatbázis szolgáltatás- és rétegű elég nagy a bejelentkezési/lekérdezésekre vonatkozó kérelmek várható mennyisége kezelésére.</span><span class="sxs-lookup"><span data-stu-id="2f871-185">Whatever configuration you choose, make sure that service and performance tier of that database is high enough to handle the expected  amount of login/query requests.</span></span>

<span data-ttu-id="2f871-186">Az alábbi lépéseket a vízszintes particionálási forgatókönyvek tábla hozzáférést igénylő található rugalmas adatbázis-lekérdezéseinek (általában) több távoli SQL-adatbázisok konfigurálása:</span><span class="sxs-lookup"><span data-stu-id="2f871-186">The following steps configure elastic database queries for horizontal partitioning scenarios that require access to a set of table that are located on (typically) several remote SQL databases:</span></span>

* <span data-ttu-id="2f871-187">[Hozzon létre FŐKULCS](https://msdn.microsoft.com/library/ms174382.aspx) mymasterkey</span><span class="sxs-lookup"><span data-stu-id="2f871-187">[CREATE MASTER KEY](https://msdn.microsoft.com/library/ms174382.aspx) mymasterkey</span></span>
* <span data-ttu-id="2f871-188">[CREATE DATABASE SCOPED CREDENTIAL](https://msdn.microsoft.com/library/mt270260.aspx) mycredential</span><span class="sxs-lookup"><span data-stu-id="2f871-188">[CREATE DATABASE SCOPED CREDENTIAL](https://msdn.microsoft.com/library/mt270260.aspx) mycredential</span></span>
* <span data-ttu-id="2f871-189">Hozzon létre egy [shard térkép](sql-database-elastic-scale-shard-map-management.md) képviselő az adatréteg a rugalmas adatbázis ügyféloldali kódtár segítségével.</span><span class="sxs-lookup"><span data-stu-id="2f871-189">Create a [shard map](sql-database-elastic-scale-shard-map-management.md) representing your data tier using the elastic database client library.</span></span>   
* <span data-ttu-id="2f871-190">[KÜLSŐ ADATFORRÁS létrehozása/DROP](https://msdn.microsoft.com/library/dn935022.aspx) típusú mydatasource **SHARD_MAP_MANAGER**</span><span class="sxs-lookup"><span data-stu-id="2f871-190">[CREATE/DROP EXTERNAL DATA SOURCE](https://msdn.microsoft.com/library/dn935022.aspx) mydatasource of type **SHARD_MAP_MANAGER**</span></span>
* <span data-ttu-id="2f871-191">[A külső tábla létrehozása/DROP](https://msdn.microsoft.com/library/dn935021.aspx) táblanév</span><span class="sxs-lookup"><span data-stu-id="2f871-191">[CREATE/DROP EXTERNAL TABLE](https://msdn.microsoft.com/library/dn935021.aspx) mytable</span></span>

<span data-ttu-id="2f871-192">Miután elvégezte ezeket a lépéseket, érheti el a "mytable" vízszintes particionált tábla, mintha egy helyi táblára.</span><span class="sxs-lookup"><span data-stu-id="2f871-192">Once you have performed these steps, you can access the horizontally partitioned table “mytable” as though it were a local table.</span></span> <span data-ttu-id="2f871-193">Az Azure SQL Database automatikusan megnyílik több párhuzamos kapcsolatokat a táblák fizikailag tároló a távoli adatbázisokhoz, feldolgozza a kérelmeket a távoli adatbázisokhoz, és az eredményeket ad vissza.</span><span class="sxs-lookup"><span data-stu-id="2f871-193">Azure SQL Database automatically opens multiple parallel connections to the remote databases where the tables are physically stored, processes the requests on the remote databases, and returns the results.</span></span>
<span data-ttu-id="2f871-194">További információ a a vízszintes particionálási forgatókönyv találhatók a szükséges lépéseket [vízszintes particionálására rugalmas lekérdezési](sql-database-elastic-query-horizontal-partitioning.md).</span><span class="sxs-lookup"><span data-stu-id="2f871-194">More information on the steps required for the horizontal partitioning scenario can be found in [elastic query for horizontal partitioning](sql-database-elastic-query-horizontal-partitioning.md).</span></span>

<span data-ttu-id="2f871-195">A kódolási megkezdéséhez tekintse meg [Ismerkedés a vízszintes particionálására (horizontális) rugalmas lekérdezési](sql-database-elastic-query-getting-started.md).</span><span class="sxs-lookup"><span data-stu-id="2f871-195">To begin coding, see [Getting started with elastic query for horizontal partitioning (sharding)](sql-database-elastic-query-getting-started.md).</span></span>

## <a name="t-sql-querying"></a><span data-ttu-id="2f871-196">T-SQL-lekérdezés</span><span class="sxs-lookup"><span data-stu-id="2f871-196">T-SQL querying</span></span>
<span data-ttu-id="2f871-197">Miután meghatározta a külső adatforrások és a külső táblák, rendszeres SQL Server kapcsolati karakterláncok segítségével csatlakozzon az adatbázishoz, ahol definiálva a a külső táblákra.</span><span class="sxs-lookup"><span data-stu-id="2f871-197">Once you have defined your external data sources and your external tables, you can use regular SQL Server connection strings to connect to the databases where you defined your external tables.</span></span> <span data-ttu-id="2f871-198">Ezt követően futtathatja T-SQL-utasítások a külső táblákon végrehajtott a kapcsolat az alábbiakban leírt korlátozásokkal.</span><span class="sxs-lookup"><span data-stu-id="2f871-198">You can then run T-SQL statements over your external tables on that connection with the limitations outlined below.</span></span> <span data-ttu-id="2f871-199">További információt és példákat a T-SQL-lekérdezések megtalálhatja a dokumentáció témaköröket [vízszintes particionálás](sql-database-elastic-query-horizontal-partitioning.md) és [vertikális particionálás](sql-database-elastic-query-vertical-partitioning.md).</span><span class="sxs-lookup"><span data-stu-id="2f871-199">You can find more information and examples of T-SQL queries in the documentation topics for [horizontal partitioning](sql-database-elastic-query-horizontal-partitioning.md) and [vertical partitioning](sql-database-elastic-query-vertical-partitioning.md).</span></span>

## <a name="connectivity-for-tools"></a><span data-ttu-id="2f871-200">Eszközök kapcsolattal</span><span class="sxs-lookup"><span data-stu-id="2f871-200">Connectivity for tools</span></span>
<span data-ttu-id="2f871-201">Rendszeres SQL Server kapcsolati karakterláncok használhatja az alkalmazásokat és BI vagy adatok integrációs eszközök adatbázisok esetén, amelyek külső táblákon való kapcsolódáshoz.</span><span class="sxs-lookup"><span data-stu-id="2f871-201">You can use regular SQL Server connection strings to connect your applications and BI or data integration tools to databases that have external tables.</span></span> <span data-ttu-id="2f871-202">Győződjön meg arról, hogy az SQL Server támogatja-e az eszköz adatforrásként.</span><span class="sxs-lookup"><span data-stu-id="2f871-202">Make sure that SQL Server is supported as a data source for your tool.</span></span> <span data-ttu-id="2f871-203">Miután csatlakozott, tekintse meg a lekérdezés rugalmas adatbázis és a külső táblákhoz az adatbázis ugyanúgy, mint bármely más SQL Server adatbázis, amely az eszköz csatlakozhat kellene tennie.</span><span class="sxs-lookup"><span data-stu-id="2f871-203">Once connected, refer to the elastic query database and the external tables in that database just like you would do with any other SQL Server database that you connect to with your tool.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="2f871-204">Hitelesítés az Azure Active Directoryval rugalmas lekérdezési jelenleg nem támogatott.</span><span class="sxs-lookup"><span data-stu-id="2f871-204">Authentication using Azure Active Directory with elastic queries is not currently supported.</span></span>
> 
> 

## <a name="cost"></a><span data-ttu-id="2f871-205">Költségek</span><span class="sxs-lookup"><span data-stu-id="2f871-205">Cost</span></span>
<span data-ttu-id="2f871-206">Rugalmas lekérdezési szerepel, az Azure SQL Database adatbázisok költségét.</span><span class="sxs-lookup"><span data-stu-id="2f871-206">Elastic query is included into the cost of Azure SQL Database databases.</span></span> <span data-ttu-id="2f871-207">Vegye figyelembe, hogy a távoli adatbázisok esetén egy másik adatközpont, mint a Rugalmas lekérdezési végpont topológiák támogatottak, de távoli adatbázisokból adatforgalommal regular van szó, [Azure díjszabás](https://azure.microsoft.com/pricing/details/data-transfers/).</span><span class="sxs-lookup"><span data-stu-id="2f871-207">Note that topologies where your remote databases are in a different data center than the elastic query endpoint are supported, but data egress from remote databases are charged regular [Azure rates](https://azure.microsoft.com/pricing/details/data-transfers/).</span></span>

## <a name="preview-limitations"></a><span data-ttu-id="2f871-208">Előzetes verzió korlátozásai</span><span class="sxs-lookup"><span data-stu-id="2f871-208">Preview limitations</span></span>
* <span data-ttu-id="2f871-209">Az első rugalmas lekérdezés futtatása is eltarthat néhány percig, amíg a szabványos teljesítmény-rétegen.</span><span class="sxs-lookup"><span data-stu-id="2f871-209">Running your first elastic query can take up to a few minutes on the Standard performance tier.</span></span> <span data-ttu-id="2f871-210">Ez a Rugalmas lekérdezési funkcionalitás; betöltéséhez szükséges ideje teljesítmény betöltése növeli a magasabb teljesítmény rétegekkel.</span><span class="sxs-lookup"><span data-stu-id="2f871-210">This time is necessary to load the elastic query functionality; loading performance improves with higher performance tiers.</span></span>
* <span data-ttu-id="2f871-211">A külső adatforrások vagy a külső táblákhoz az SSMS vagy az SSDT Scripting még nem támogatott.</span><span class="sxs-lookup"><span data-stu-id="2f871-211">Scripting of external data sources or external tables from SSMS or SSDT is not yet supported.</span></span>
* <span data-ttu-id="2f871-212">Importálási/exportálási az SQL DB egyelőre nem támogatják a külső adatforrások és a külső táblákra.</span><span class="sxs-lookup"><span data-stu-id="2f871-212">Import/Export for SQL DB does not yet support external data sources and external tables.</span></span> <span data-ttu-id="2f871-213">Importálási/exportálási használni kell, ha dobható el, ezek az objektumok exportálása előtt, és ezután hozza létre őket importálása után.</span><span class="sxs-lookup"><span data-stu-id="2f871-213">If you need to use Import/Export, drop these objects before exporting and then re-create them after importing.</span></span>
* <span data-ttu-id="2f871-214">Rugalmas lekérdezés jelenleg csak támogatja a külső táblákra csak olvasási hozzáféréssel.</span><span class="sxs-lookup"><span data-stu-id="2f871-214">Elastic query currently only supports read-only access to external tables.</span></span> <span data-ttu-id="2f871-215">Azonban használhatja teljes T-SQL funkciókat az adatbázis ahol a külső tábla meg van adva.</span><span class="sxs-lookup"><span data-stu-id="2f871-215">You can, however, use full T-SQL functionality on the database where the external table is defined.</span></span> <span data-ttu-id="2f871-216">Ez akkor lehet hasznos, pl. ideiglenes eredményeket, pl. maradnak, válassza ki a < column_list > a < local_table >, illetve tárolt eljárások adja meg a lekérdezés rugalmas adatbázis, amely tekintse meg a külső táblákra.</span><span class="sxs-lookup"><span data-stu-id="2f871-216">This can be useful to, e.g., persist temporary results using, e.g., SELECT <column_list> INTO <local_table>, or to define stored procedures on the elastic query database which refer to external tables.</span></span>
* <span data-ttu-id="2f871-217">Típus: nvarchar(max), kivéve a LOB-típusok nem támogatottak a külső tábla definíciókat.</span><span class="sxs-lookup"><span data-stu-id="2f871-217">Except for nvarchar(max), LOB types are not supported in external table definitions.</span></span> <span data-ttu-id="2f871-218">Megoldás hozhat létre a távoli adatbázis, amely a LOB típusú, típus: nvarchar(max) adat kerül egy nézet, a külső tábla megadása helyett az alaptábla nézet keresztül és majd típussá be az eredeti LOB-típust a lekérdezésekben.</span><span class="sxs-lookup"><span data-stu-id="2f871-218">As a workaround, you can create a view on the remote database that casts the LOB type into nvarchar(max), define your external table over the view instead of the base table and then cast it back into the original LOB type in your queries.</span></span>
* <span data-ttu-id="2f871-219">A külső táblákon végrehajtott oszlop statisztikai adatainak jelenleg nem támogatottak.</span><span class="sxs-lookup"><span data-stu-id="2f871-219">Column statistics over external tables are currently not supported.</span></span> <span data-ttu-id="2f871-220">Táblák statisztika támogatottak, de manuálisan kell létrehozni.</span><span class="sxs-lookup"><span data-stu-id="2f871-220">Tables statistics are supported, but need to be created manually.</span></span>

## <a name="feedback"></a><span data-ttu-id="2f871-221">Visszajelzés</span><span class="sxs-lookup"><span data-stu-id="2f871-221">Feedback</span></span>
<span data-ttu-id="2f871-222">Ossza meg a felhasználói élmény kapcsolatos visszajelzéseket rugalmas lekérdezési betartásának vizsgálatára disqus-beszélgetésben teheti az alábbi, az MSDN fórumain vagy Stackoverflow.</span><span class="sxs-lookup"><span data-stu-id="2f871-222">Please share feedback on your experience with elastic queries with us on Disqus below, the MSDN forums, or on Stackoverflow.</span></span> <span data-ttu-id="2f871-223">Folyamatban, a szolgáltatás (hibák, nyers szélén, a szolgáltatás hézagok) visszajelzést különböző érdekelt.</span><span class="sxs-lookup"><span data-stu-id="2f871-223">We are interested in all kinds of feedback about the service (defects, rough edges, feature gaps).</span></span>

## <a name="next-steps"></a><span data-ttu-id="2f871-224">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="2f871-224">Next steps</span></span>

* <span data-ttu-id="2f871-225">Függőleges particionálási oktatóanyagért lásd a [első lépések (a vertikális particionálás) közötti adatbázis-lekérdezés](sql-database-elastic-query-getting-started-vertical.md).</span><span class="sxs-lookup"><span data-stu-id="2f871-225">For a vertical partitioning tutorial, see [Getting started with cross-database query (vertical partitioning)](sql-database-elastic-query-getting-started-vertical.md).</span></span>
* <span data-ttu-id="2f871-226">A szintaxis és a minta lekérdezések függőleges particionált adatok, lásd: [adatok lekérdezése függőleges particionálva)](sql-database-elastic-query-vertical-partitioning.md)</span><span class="sxs-lookup"><span data-stu-id="2f871-226">For syntax and sample queries for vertically partitioned data, see [Querying vertically partitioned data)](sql-database-elastic-query-vertical-partitioning.md)</span></span>
* <span data-ttu-id="2f871-227">Vízszintes particionálás (horizontális) oktatóanyagért lásd a [Ismerkedés a vízszintes particionálására (horizontális) rugalmas lekérdezési](sql-database-elastic-query-getting-started.md).</span><span class="sxs-lookup"><span data-stu-id="2f871-227">For a horizontal partitioning (sharding) tutorial, see [Getting started with elastic query for horizontal partitioning (sharding)](sql-database-elastic-query-getting-started.md).</span></span>
* <span data-ttu-id="2f871-228">A szintaxis és a minta lekérdezések vízszintesen particionált adatok, lásd: [adatok vízszintesen lekérdezése particionálva)](sql-database-elastic-query-horizontal-partitioning.md)</span><span class="sxs-lookup"><span data-stu-id="2f871-228">For syntax and sample queries for horizontally partitioned data, see [Querying horizontally partitioned data)](sql-database-elastic-query-horizontal-partitioning.md)</span></span>
* <span data-ttu-id="2f871-229">Lásd: [sp\_hajtható végre \_távoli](https://msdn.microsoft.com/library/mt703714) tárolt eljárás, amely végrehajtja a Transact-SQL-utasítás egy egyetlen távoli Azure SQL Database vagy az adatbázisok egy vízszintes particionálási sémát a szilánkok szolgál.</span><span class="sxs-lookup"><span data-stu-id="2f871-229">See [sp\_execute \_remote](https://msdn.microsoft.com/library/mt703714) for a stored procedure that executes a Transact-SQL statement on a single remote Azure SQL Database or set of databases serving as shards in a horizontal partitioning scheme.</span></span>

<!--Image references-->
[1]: ./media/sql-database-elastic-query-overview/overview.png
[2]: ./media/sql-database-elastic-query-overview/topology1.png
[3]: ./media/sql-database-elastic-query-overview/vertpartrrefdata.png
[4]: ./media/sql-database-elastic-query-overview/verticalpartitioning.png
[5]: ./media/sql-database-elastic-query-overview/horizontalpartitioning.png

<!--anchors-->
