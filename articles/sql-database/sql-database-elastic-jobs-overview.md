---
title: "Kiterjesztett felhő adatbázisok kezelése |} Microsoft Docs"
description: "Mutatja be a rugalmas adatbázis-feladat szolgáltatás"
metakeywords: azure sql database elastic databases
services: sql-database
documentationcenter: 
manager: jhubbard
author: ddove
ms.assetid: 6fa47cf2-1162-4534-a206-6e2d95b78580
ms.service: sql-database
ms.custom: scale out apps
ms.workload: sql-database
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 10/24/2016
ms.author: ddove
ms.openlocfilehash: 8e84562115a866c0df5e0dee6c7f66c036a74737
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 07/11/2017
---
# <a name="managing-scaled-out-cloud-databases"></a><span data-ttu-id="0ff20-103">Kiterjesztett felhő adatbázisok kezelése</span><span class="sxs-lookup"><span data-stu-id="0ff20-103">Managing scaled-out cloud databases</span></span>
<span data-ttu-id="0ff20-104">Kiterjesztett szilánkos adatbázisok, kezelheti a **rugalmas adatbázis-feladatok** (előzetes verzió) funkciója lehetővé teszi megbízhatóan között egy csoportot az adatbázisok, beleértve a Transact-SQL (T-SQL) parancsprogram végrehajtása:</span><span class="sxs-lookup"><span data-stu-id="0ff20-104">To manage scaled-out sharded databases, the **Elastic Database jobs** feature (preview) enables you to reliably execute a Transact-SQL (T-SQL) script across a group of databases, including:</span></span>

* <span data-ttu-id="0ff20-105">(az alábbiakban ismertetett) adatbázisok egyénileg definiált gyűjteménye</span><span class="sxs-lookup"><span data-stu-id="0ff20-105">a custom-defined collection of databases (explained below)</span></span>
* <span data-ttu-id="0ff20-106">az összes adatbázis egy [rugalmas készlet](sql-database-elastic-pool.md)</span><span class="sxs-lookup"><span data-stu-id="0ff20-106">all databases in an [elastic pool](sql-database-elastic-pool.md)</span></span>
* <span data-ttu-id="0ff20-107">a shard készletének (használatával létrehozott [Elastic Database ügyféloldali kódtárának](sql-database-elastic-database-client-library.md)).</span><span class="sxs-lookup"><span data-stu-id="0ff20-107">a shard set (created using [Elastic Database client library](sql-database-elastic-database-client-library.md)).</span></span> 

## <a name="documentation"></a><span data-ttu-id="0ff20-108">Dokumentáció</span><span class="sxs-lookup"><span data-stu-id="0ff20-108">Documentation</span></span>
* <span data-ttu-id="0ff20-109">[A rugalmas adatbázis-feladat összetevők telepítéséhez](sql-database-elastic-jobs-service-installation.md).</span><span class="sxs-lookup"><span data-stu-id="0ff20-109">[Install the Elastic Database job components](sql-database-elastic-jobs-service-installation.md).</span></span> 
* <span data-ttu-id="0ff20-110">[Ismerkedés a rugalmas feladatok](sql-database-elastic-jobs-getting-started.md).</span><span class="sxs-lookup"><span data-stu-id="0ff20-110">[Get started with Elastic Database jobs](sql-database-elastic-jobs-getting-started.md).</span></span>
* <span data-ttu-id="0ff20-111">[PowerShell-lel feladatok létrehozásához és kezeléséhez](sql-database-elastic-jobs-powershell.md).</span><span class="sxs-lookup"><span data-stu-id="0ff20-111">[Create and manage jobs using PowerShell](sql-database-elastic-jobs-powershell.md).</span></span>
* [<span data-ttu-id="0ff20-112">Létrehozásához és kezeléséhez kimenő Azure SQL-adatbázisok méretezése</span><span class="sxs-lookup"><span data-stu-id="0ff20-112">Create and manage scaled out Azure SQL Databases</span></span>](sql-database-elastic-jobs-getting-started.md)

<span data-ttu-id="0ff20-113">**Rugalmas adatbázis-feladatok** jelenleg egy ügyfél által szolgáltatott, Azure Cloud Service, amely lehetővé teszi az ad hoc és ütemezett felügyeleti feladatokat, melyekhez nevezzük végrehajtása **feladatok**.</span><span class="sxs-lookup"><span data-stu-id="0ff20-113">**Elastic Database jobs** is currently a customer-hosted Azure Cloud Service that enables the execution of ad-hoc and scheduled administrative tasks, which are called **jobs**.</span></span> <span data-ttu-id="0ff20-114">A feladatok könnyen, és megbízhatóan kezelése az Azure SQL-adatbázisok nagy mennyiségű felügyeleti műveletek elvégzéséhez Transact-SQL-parancsfájlok futtatásával.</span><span class="sxs-lookup"><span data-stu-id="0ff20-114">With jobs, you can easily and reliably manage large groups of Azure SQL Databases by running Transact-SQL scripts to perform administrative operations.</span></span> 

![Rugalmas feladat szolgáltatás][1]

## <a name="why-use-jobs"></a><span data-ttu-id="0ff20-116">Miért érdemes használni a feladatokat?</span><span class="sxs-lookup"><span data-stu-id="0ff20-116">Why use jobs?</span></span>
<span data-ttu-id="0ff20-117">**Kezelés**</span><span class="sxs-lookup"><span data-stu-id="0ff20-117">**Manage**</span></span>

<span data-ttu-id="0ff20-118">Egyszerűen tegye sémamódosítások, hitelesítő adatok kezelése, hivatkozás adatfrissítések, teljesítményadat-gyűjtés vagy bérlő (ügyfél) telemetriai adatok gyűjtése.</span><span class="sxs-lookup"><span data-stu-id="0ff20-118">Easily do schema changes, credentials management, reference data updates, performance data collection or tenant (customer) telemetry collection.</span></span>

<span data-ttu-id="0ff20-119">**Jelentések**</span><span class="sxs-lookup"><span data-stu-id="0ff20-119">**Reports**</span></span>

<span data-ttu-id="0ff20-120">Egy Azure SQL-adatbázisok gyűjteményét egyetlen táblát összesített adatokat.</span><span class="sxs-lookup"><span data-stu-id="0ff20-120">Aggregate data from a collection of Azure SQL Databases into a single destination table.</span></span>

<span data-ttu-id="0ff20-121">**Terhelés csökkentése**</span><span class="sxs-lookup"><span data-stu-id="0ff20-121">**Reduce overhead**</span></span>

<span data-ttu-id="0ff20-122">Alapesetben az egyes adatbázis-egymástól függetlenül ahhoz, hogy a Transact-SQL-utasítások futtatása vagy más felügyeleti feladatok kell csatlakoztatni.</span><span class="sxs-lookup"><span data-stu-id="0ff20-122">Normally, you must connect to each database independently in order to run Transact-SQL statements or perform other administrative tasks.</span></span> <span data-ttu-id="0ff20-123">Egy feladat kezeli a feladat a célcsoportban minden adatbázis történő bejelentkezéshez.</span><span class="sxs-lookup"><span data-stu-id="0ff20-123">A job handles the task of logging in to each database in the target group.</span></span> <span data-ttu-id="0ff20-124">Akkor is meghatározását, karbantartása és megőrizni a Transact-SQL-parancsfájlok használatával hajtható végre, az Azure SQL-adatbázisok csoport között.</span><span class="sxs-lookup"><span data-stu-id="0ff20-124">You also define, maintain and persist Transact-SQL scripts to be executed across a group of Azure SQL Databases.</span></span>

<span data-ttu-id="0ff20-125">**Nyilvántartás**</span><span class="sxs-lookup"><span data-stu-id="0ff20-125">**Accounting**</span></span>

<span data-ttu-id="0ff20-126">Feladatok futtassa a parancsfájlt, és az egyes adatbázisok végrehajtási állapot.</span><span class="sxs-lookup"><span data-stu-id="0ff20-126">Jobs run the script and log the status of execution for each database.</span></span> <span data-ttu-id="0ff20-127">Hiba esetén is kap automatikus próbálkozzon újra.</span><span class="sxs-lookup"><span data-stu-id="0ff20-127">You also get automatic retry when failures occur.</span></span>

<span data-ttu-id="0ff20-128">**Rugalmasság**</span><span class="sxs-lookup"><span data-stu-id="0ff20-128">**Flexibility**</span></span>

<span data-ttu-id="0ff20-129">Azure SQL-adatbázisok egyéni csoportot, és fut egy feladat ütemezésének meghatározását.</span><span class="sxs-lookup"><span data-stu-id="0ff20-129">Define custom groups of Azure SQL Databases, and define schedules for running a job.</span></span>

> [!NOTE]
> <span data-ttu-id="0ff20-130">Az Azure-portálon SQL Azure rugalmas készletek korlátozott funkciók csak korlátozott készlete áll rendelkezésre.</span><span class="sxs-lookup"><span data-stu-id="0ff20-130">In the Azure portal, only a reduced set of functions limited to SQL Azure elastic pools is available.</span></span> <span data-ttu-id="0ff20-131">A PowerShell API-k segítségével hozzáférés a teljes aktuális funkciót.</span><span class="sxs-lookup"><span data-stu-id="0ff20-131">Use the PowerShell APIs to access the full set of current functionality.</span></span>
> 
> 

## <a name="applications"></a><span data-ttu-id="0ff20-132">Alkalmazások</span><span class="sxs-lookup"><span data-stu-id="0ff20-132">Applications</span></span>
* <span data-ttu-id="0ff20-133">Felügyeleti feladatok, például egy új séma telepítését.</span><span class="sxs-lookup"><span data-stu-id="0ff20-133">Perform administrative tasks, such as deploying a new schema.</span></span>
* <span data-ttu-id="0ff20-134">Hivatkozás adatok-termékinformációk közös frissítése összes adatbázis között.</span><span class="sxs-lookup"><span data-stu-id="0ff20-134">Update reference data-product information common across all databases.</span></span> <span data-ttu-id="0ff20-135">Vagy az ütemezések automatikus frissítések minden hétköznap, óra múlva.</span><span class="sxs-lookup"><span data-stu-id="0ff20-135">Or schedules automatic updates every weekday, after hours.</span></span>
* <span data-ttu-id="0ff20-136">Lekérdezés teljesítmény javítása érdekében indexek újraépítése.</span><span class="sxs-lookup"><span data-stu-id="0ff20-136">Rebuild indexes to improve query performance.</span></span> <span data-ttu-id="0ff20-137">A újraépítése beállítható úgy, hogy hajtható végre közötti ismétlődő módon, adatbázisok gyűjteménye, mint végezze alacsony forgalmú időszakban.</span><span class="sxs-lookup"><span data-stu-id="0ff20-137">The rebuilding can be configured to execute across a collection of databases on a recurring basis, such as during off-peak hours.</span></span>
* <span data-ttu-id="0ff20-138">Gyűjtése lekérdezés eredményeit az adatbázisok közül egy központi táblába folyamatos jelleggel.</span><span class="sxs-lookup"><span data-stu-id="0ff20-138">Collect query results from a set of databases into a central table on an on-going basis.</span></span> <span data-ttu-id="0ff20-139">Teljesítmény-lekérdezések lehetnek folyamatosan végre és konfigurált eseményindító további feladatokat hajthatnak végre.</span><span class="sxs-lookup"><span data-stu-id="0ff20-139">Performance queries can be continually executed and configured to trigger additional tasks to be executed.</span></span>
* <span data-ttu-id="0ff20-140">Hajtsa végre a hosszabb futó adatfeldolgozási lekérdezéseket elvégzése nagyobb az adatbázisok, például a telemetriai ügyfél gyűjteménye.</span><span class="sxs-lookup"><span data-stu-id="0ff20-140">Execute longer running data processing queries across a large set of databases, for example the collection of customer telemetry.</span></span> <span data-ttu-id="0ff20-141">Eredmények további elemzés céljára egyetlen céltáblába történő összegyűjtése.</span><span class="sxs-lookup"><span data-stu-id="0ff20-141">Results are collected into a single destination table for further analysis.</span></span>

## <a name="elastic-database-jobs-end-to-end"></a><span data-ttu-id="0ff20-142">Rugalmas adatbázis-feladatok: végpont</span><span class="sxs-lookup"><span data-stu-id="0ff20-142">Elastic Database jobs: end-to-end</span></span>
1. <span data-ttu-id="0ff20-143">Telepítse a **rugalmas adatbázis-feladatok** összetevőket.</span><span class="sxs-lookup"><span data-stu-id="0ff20-143">Install the **Elastic Database jobs** components.</span></span> <span data-ttu-id="0ff20-144">További információkért lásd: [rugalmas adatbázis telepítése feladatok](sql-database-elastic-jobs-service-installation.md).</span><span class="sxs-lookup"><span data-stu-id="0ff20-144">For more information, see [Installing Elastic Database jobs](sql-database-elastic-jobs-service-installation.md).</span></span> <span data-ttu-id="0ff20-145">Ha a telepítés sikertelen lesz, lásd: [eltávolítása](sql-database-elastic-jobs-uninstall.md).</span><span class="sxs-lookup"><span data-stu-id="0ff20-145">If the installation fails, see [how to uninstall](sql-database-elastic-jobs-uninstall.md).</span></span>
2. <span data-ttu-id="0ff20-146">A PowerShell API-k használatával további funkciókat, például az adatbázis egyénileg definiált gyűjtemények, ütemezések hozzáadása és/vagy adatgyűjtési eredmények beállítása létrehozásáról hozzáférhetnek.</span><span class="sxs-lookup"><span data-stu-id="0ff20-146">Use the PowerShell APIs to access more functionality, for example creating custom-defined database collections, adding schedules and/or gathering results sets.</span></span> <span data-ttu-id="0ff20-147">Egyszerű telepítés és a feladatok végrehajtásának korlátozódik létrehozása/figyelésére használni a portált egy **rugalmas készlet**.</span><span class="sxs-lookup"><span data-stu-id="0ff20-147">Use the portal for simple installation and creation/monitoring of jobs limited to execution against a **elastic pool**.</span></span> 
3. <span data-ttu-id="0ff20-148">A feladat-végrehajtás titkosított hitelesítő adatok létrehozása és [vegye fel a felhasználó (vagy a szerepkör) a csoportban lévő egyes adatbázisok](sql-database-security-overview.md).</span><span class="sxs-lookup"><span data-stu-id="0ff20-148">Create encrypted credentials for job execution and [add the user (or role) to each database in the group](sql-database-security-overview.md).</span></span>
4. <span data-ttu-id="0ff20-149">Hozzon létre egy idempotent T-SQL-parancsfájl, amely a csoport minden adatbázison futtatható.</span><span class="sxs-lookup"><span data-stu-id="0ff20-149">Create an idempotent T-SQL script that can be run against every database in the group.</span></span> 
5. <span data-ttu-id="0ff20-150">Kövesse az alábbi lépéseket az Azure portál használatával feladatok létrehozására: [létrehozása és a rugalmas adatbázis-feladatok kezelése](sql-database-elastic-jobs-create-and-manage.md).</span><span class="sxs-lookup"><span data-stu-id="0ff20-150">Follow these steps to create jobs using the Azure portal: [Creating and managing Elastic Database jobs](sql-database-elastic-jobs-create-and-manage.md).</span></span> 
6. <span data-ttu-id="0ff20-151">Vagy a PowerShell-parancsfájlok használata: [létrehozása a PowerShell (előzetes verzió) használatával SQL Database rugalmas adatbázis-feladatok kezelése és](sql-database-elastic-jobs-powershell.md).</span><span class="sxs-lookup"><span data-stu-id="0ff20-151">Or use PowerShell scripts: [Create and manage a SQL Database elastic database jobs using PowerShell (preview)](sql-database-elastic-jobs-powershell.md).</span></span>

## <a name="idempotent-scripts"></a><span data-ttu-id="0ff20-152">Az Idempotent parancsfájlok</span><span class="sxs-lookup"><span data-stu-id="0ff20-152">Idempotent scripts</span></span>
<span data-ttu-id="0ff20-153">A parancsfájlok kell [idempotent](https://en.wikipedia.org/wiki/Idempotence).</span><span class="sxs-lookup"><span data-stu-id="0ff20-153">The scripts must be [idempotent](https://en.wikipedia.org/wiki/Idempotence).</span></span> <span data-ttu-id="0ff20-154">Egyszerű fogalmazva "idempotent" azt jelenti, hogy a parancsfájl sikeres, és újra fut, ha ugyanazt az eredményt következik be.</span><span class="sxs-lookup"><span data-stu-id="0ff20-154">In simple terms, "idempotent" means that if the script succeeds, and it is run again, the same result occurs.</span></span> <span data-ttu-id="0ff20-155">Átmeneti hálózati probléma miatt sikertelenek lehetnek a parancsfájl.</span><span class="sxs-lookup"><span data-stu-id="0ff20-155">A script may fail due to transient network issues.</span></span> <span data-ttu-id="0ff20-156">Ebben az esetben a feladat automatikusan megpróbálja a parancsfájl futtatása előtt desisting előre definiált ennyiszer.</span><span class="sxs-lookup"><span data-stu-id="0ff20-156">In that case, the job will automatically retry running the script a preset number of times before desisting.</span></span> <span data-ttu-id="0ff20-157">Az idempotent parancsfájl ugyanazt az eredményt rendelkezik, akkor is, ha korábban már sikeresen futott kétszer.</span><span class="sxs-lookup"><span data-stu-id="0ff20-157">An idempotent script has the same result even if has been successfully run twice.</span></span> 

<span data-ttu-id="0ff20-158">Egy egyszerű tactic, hogy azt létrehozása előtt egy objektum létezését teszteléséhez.</span><span class="sxs-lookup"><span data-stu-id="0ff20-158">A simple tactic is to test for the existence of an object before creating it.</span></span>  

    IF NOT EXIST (some_object)
    -- Create the object 
    -- If it exists, drop the object before recreating it.

<span data-ttu-id="0ff20-159">Ehhez hasonlóan a parancsfájl sikeresen végrehajtható legyen a logikailag teszteléséhez képesnek kell lennie, és azokat a feltételeket elleni talál.</span><span class="sxs-lookup"><span data-stu-id="0ff20-159">Similarly, a script must be able to execute successfully by logically testing for and countering any conditions it finds.</span></span>

## <a name="failures-and-logs"></a><span data-ttu-id="0ff20-160">Hibák és a naplókat</span><span class="sxs-lookup"><span data-stu-id="0ff20-160">Failures and logs</span></span>
<span data-ttu-id="0ff20-161">Ha több próbálkozást követően a parancsfájl futása sikertelen, a feladat naplózza a hibát, és továbbra is fennáll.</span><span class="sxs-lookup"><span data-stu-id="0ff20-161">If a script fails after multiple attempts, the job logs the error and continues.</span></span> <span data-ttu-id="0ff20-162">A feladat befejeződését követően (azaz a csoportban lévő összes adatbázisokhoz futtató), ellenőrizheti a sikertelen bejelentkezési kísérletek listáját.</span><span class="sxs-lookup"><span data-stu-id="0ff20-162">After a job ends (meaning a run against all databases in the group), you can check its list of failed attempts.</span></span> <span data-ttu-id="0ff20-163">A naplók hibás parancsfájlok hibakeresése részletekkel szolgálnak.</span><span class="sxs-lookup"><span data-stu-id="0ff20-163">The logs provide details to debug faulty scripts.</span></span> 

## <a name="group-types-and-creation"></a><span data-ttu-id="0ff20-164">Csoport típusok és létrehozása</span><span class="sxs-lookup"><span data-stu-id="0ff20-164">Group types and creation</span></span>
<span data-ttu-id="0ff20-165">A csoportok két fő típusba sorolhatók:</span><span class="sxs-lookup"><span data-stu-id="0ff20-165">There are two kinds of groups:</span></span> 

1. <span data-ttu-id="0ff20-166">A shard beállítása</span><span class="sxs-lookup"><span data-stu-id="0ff20-166">Shard sets</span></span>
2. <span data-ttu-id="0ff20-167">Egyéni csoportok</span><span class="sxs-lookup"><span data-stu-id="0ff20-167">Custom groups</span></span>

<span data-ttu-id="0ff20-168">A shard set csoportok használatával hozhatók létre a [skálázáshoz rugalmas adatbáziseszközöket](sql-database-elastic-scale-introduction.md).</span><span class="sxs-lookup"><span data-stu-id="0ff20-168">Shard set groups are created using the [Elastic Database tools](sql-database-elastic-scale-introduction.md).</span></span> <span data-ttu-id="0ff20-169">A szilánkok set csoport létrehozásakor adatbázisok hozzáadásakor vagy eltávolításakor automatikusan a csoportból.</span><span class="sxs-lookup"><span data-stu-id="0ff20-169">When you create a shard set group, databases are added or removed from the group automatically.</span></span> <span data-ttu-id="0ff20-170">Például egy új shard lesz automatikusan a csoportban található a szilánkcímtárban leképezés hozzáadásakor.</span><span class="sxs-lookup"><span data-stu-id="0ff20-170">For example, a new shard will be automatically in the group when you add it to the shard map.</span></span> <span data-ttu-id="0ff20-171">Egy feladat futtathatja a csoporton.</span><span class="sxs-lookup"><span data-stu-id="0ff20-171">A job can then be run against the group.</span></span>

<span data-ttu-id="0ff20-172">Egyéni, másrészt, szigorúan történik.</span><span class="sxs-lookup"><span data-stu-id="0ff20-172">Custom groups, on the other hand, are rigidly defined.</span></span> <span data-ttu-id="0ff20-173">Meg kell explicit módon adja hozzá, vagy távolítsa el az adatbázisok egyéni csoportokból.</span><span class="sxs-lookup"><span data-stu-id="0ff20-173">You must explicitly add or remove databases from custom groups.</span></span> <span data-ttu-id="0ff20-174">Ha egy adatbázist a csoport megszakad, a feladat megpróbálja futtassa a parancsfájlt az adatbázis végleges hibát eredményez.</span><span class="sxs-lookup"><span data-stu-id="0ff20-174">If a database in the group is dropped, the job will attempt to run the script against the database resulting in an eventual failure.</span></span> <span data-ttu-id="0ff20-175">Jelenleg az Azure portál használatával létrehozott csoportok olyan egyéni csoportok.</span><span class="sxs-lookup"><span data-stu-id="0ff20-175">Groups created using the Azure portal currently are custom groups.</span></span> 

## <a name="components-and-pricing"></a><span data-ttu-id="0ff20-176">Összetevők és az árképzés terén</span><span class="sxs-lookup"><span data-stu-id="0ff20-176">Components and pricing</span></span>
<span data-ttu-id="0ff20-177">A következő összetevők működnek együtt az Azure felhőalapú szolgáltatás, amely lehetővé teszi az alkalmi felügyeleti feladatok végrehajtásának létrehozásához.</span><span class="sxs-lookup"><span data-stu-id="0ff20-177">The following components work together to create an Azure Cloud service that enables ad-hoc execution of administrative jobs.</span></span> <span data-ttu-id="0ff20-178">Az összetevők telepítése és konfigurálása automatikusan történik az előfizetés a telepítés során.</span><span class="sxs-lookup"><span data-stu-id="0ff20-178">The components are installed and configured automatically during setup, in your subscription.</span></span> <span data-ttu-id="0ff20-179">A szolgáltatások összes rendelkeznek az automatikusan létrehozott névvel azonosíthatók.</span><span class="sxs-lookup"><span data-stu-id="0ff20-179">You can identify the services as they all have the same auto-generated name.</span></span> <span data-ttu-id="0ff20-180">A név egyedi, és az előtag "edj" követően 21 véletlenszerűen létrehozott karaktereket tartalmaz.</span><span class="sxs-lookup"><span data-stu-id="0ff20-180">The name is unique, and consists of the prefix "edj" followed by 21 randomly generated characters.</span></span>

* <span data-ttu-id="0ff20-181">**Azure Cloud Service**: rugalmas adatbázis-feladatok (előzetes verzió) ügyfél-kiszolgálón futó Azure felhő alapú szolgáltatásként végrehajtani a kért feladat végrehajtásának kerül.</span><span class="sxs-lookup"><span data-stu-id="0ff20-181">**Azure Cloud Service**: elastic database jobs (preview) is delivered as a customer-hosted Azure Cloud service to perform execution of the requested tasks.</span></span> <span data-ttu-id="0ff20-182">A portálról a szolgáltatás telepített és megtalálható a Microsoft Azure-előfizetése.</span><span class="sxs-lookup"><span data-stu-id="0ff20-182">From the portal, the service is deployed and hosted in your Microsoft Azure subscription.</span></span> <span data-ttu-id="0ff20-183">Az alapértelmezett telepített szolgáltatás fut, a legalább két feldolgozói szerepkörök magas rendelkezésre állásra.</span><span class="sxs-lookup"><span data-stu-id="0ff20-183">The default deployed service runs with the minimum of two worker roles for high availability.</span></span> <span data-ttu-id="0ff20-184">Minden egyes feldolgozói szerepkör (ElasticDatabaseJobWorker) alapértelmezett mérete a A0 példánya fut.</span><span class="sxs-lookup"><span data-stu-id="0ff20-184">The default size of each worker role (ElasticDatabaseJobWorker) runs on an A0 instance.</span></span> <span data-ttu-id="0ff20-185">Díjszabási, lásd: [árképzési felhőszolgáltatások](https://azure.microsoft.com/pricing/details/cloud-services/).</span><span class="sxs-lookup"><span data-stu-id="0ff20-185">For pricing, see [Cloud services pricing](https://azure.microsoft.com/pricing/details/cloud-services/).</span></span> 
* <span data-ttu-id="0ff20-186">**Az Azure SQL Database**: A szolgáltatás használja az Azure SQL Database néven a **feladatvezérlő adatbázishoz** az összes feladat metaadatok tárolására.</span><span class="sxs-lookup"><span data-stu-id="0ff20-186">**Azure SQL Database**: The service uses an Azure SQL Database known as the **control database** to store all of the job metadata.</span></span> <span data-ttu-id="0ff20-187">Az alapértelmezett szolgáltatási réteg egy S0.</span><span class="sxs-lookup"><span data-stu-id="0ff20-187">The default service tier is a S0.</span></span> <span data-ttu-id="0ff20-188">Díjszabási, lásd: [SQL Database – díjszabás](https://azure.microsoft.com/pricing/details/sql-database/).</span><span class="sxs-lookup"><span data-stu-id="0ff20-188">For pricing, see [SQL Database Pricing](https://azure.microsoft.com/pricing/details/sql-database/).</span></span>
* <span data-ttu-id="0ff20-189">**Az Azure Service Bus**: az Azure Service Bus van az Azure Cloud Service belül a munka összehangolását.</span><span class="sxs-lookup"><span data-stu-id="0ff20-189">**Azure Service Bus**: An Azure Service Bus is for coordination of the work within the Azure Cloud Service.</span></span> <span data-ttu-id="0ff20-190">Lásd: [Service Bus árképzési](https://azure.microsoft.com/pricing/details/service-bus/).</span><span class="sxs-lookup"><span data-stu-id="0ff20-190">See [Service Bus Pricing](https://azure.microsoft.com/pricing/details/service-bus/).</span></span>
* <span data-ttu-id="0ff20-191">**Az Azure Storage**: az Azure Storage-fiók fogja tárolni a diagnosztikai kimenetet arra az esetre, ha probléma van szükség, további hibakeresési naplózás (lásd: [diagnosztika engedélyezésével az Azure Cloud Services és a virtuális gépek](../cloud-services/cloud-services-dotnet-diagnostics.md)).</span><span class="sxs-lookup"><span data-stu-id="0ff20-191">**Azure Storage**: An Azure Storage account is used to store diagnostic output logging in the event that an issue requires further debugging (see [Enabling Diagnostics in Azure Cloud Services and Virtual Machines](../cloud-services/cloud-services-dotnet-diagnostics.md)).</span></span> <span data-ttu-id="0ff20-192">Díjszabási, lásd: [Azure Storage szolgáltatás díjszabása](https://azure.microsoft.com/pricing/details/storage/).</span><span class="sxs-lookup"><span data-stu-id="0ff20-192">For pricing, see [Azure Storage Pricing](https://azure.microsoft.com/pricing/details/storage/).</span></span>

## <a name="how-elastic-database-jobs-work"></a><span data-ttu-id="0ff20-193">A rugalmas adatbázis-feladatok működése</span><span class="sxs-lookup"><span data-stu-id="0ff20-193">How Elastic Database jobs work</span></span>
1. <span data-ttu-id="0ff20-194">Egy Azure SQL Database jelöl ki egy **feladatvezérlő adatbázishoz** amely tárolja az összes metaadat-adatainak és állapotának adatokat.</span><span class="sxs-lookup"><span data-stu-id="0ff20-194">An Azure SQL Database is designated a **control database** which stores all meta-data and state data.</span></span>
2. <span data-ttu-id="0ff20-195">A feladatvezérlő adatbázishoz hozzáfér a **szolgáltatás feladat** indítsa el, és nyomon követéséhez a feladatok végrehajtásához.</span><span class="sxs-lookup"><span data-stu-id="0ff20-195">The control database is accessed by the **job service** to launch and track jobs to execute.</span></span>
3. <span data-ttu-id="0ff20-196">Két különböző szerepkörök kommunikálnak a feladatvezérlő adatbázishoz:</span><span class="sxs-lookup"><span data-stu-id="0ff20-196">Two different roles communicate with the control database:</span></span> 
   * <span data-ttu-id="0ff20-197">Tartományvezérlő: Meghatározza, hogy milyen típusú feladatok feladatokat végrehajtani a kért feladat, és az ismételt próbálkozás sikertelen feladatok hozzon létre új feladat feladatok kell.</span><span class="sxs-lookup"><span data-stu-id="0ff20-197">Controller: Determines which jobs require tasks to perform the requested job, and retries failed jobs by creating new job tasks.</span></span>
   * <span data-ttu-id="0ff20-198">Feladat a feladat a végrehajtás: A feladat feladatokat végzi.</span><span class="sxs-lookup"><span data-stu-id="0ff20-198">Job Task Execution: Carries out the job tasks.</span></span>

### <a name="job-task-types"></a><span data-ttu-id="0ff20-199">Feladattípusok feladat</span><span class="sxs-lookup"><span data-stu-id="0ff20-199">Job task types</span></span>
<span data-ttu-id="0ff20-200">Több feladat feladatokat hajthat végre feladatok végrehajtásának típusa van:</span><span class="sxs-lookup"><span data-stu-id="0ff20-200">There are multiple types of job tasks that carry out execution of jobs:</span></span>

* <span data-ttu-id="0ff20-201">ShardMapRefresh: Lekérdezi a shard térkép szilánkok használt összes adatbázist meghatározásához</span><span class="sxs-lookup"><span data-stu-id="0ff20-201">ShardMapRefresh: Queries the shard map to determine all the databases used as shards</span></span>
* <span data-ttu-id="0ff20-202">ScriptSplit: Felosztja a parancsfájl kötegek "Ugrás" kimutatásait között</span><span class="sxs-lookup"><span data-stu-id="0ff20-202">ScriptSplit: Splits the script across ‘GO’ statements into batches</span></span>
* <span data-ttu-id="0ff20-203">ExpandJob: Gyermek feladatok létrehozása az egyes adatbázisok a feladatból, amelynek célpontja adatbázisok csoportja</span><span class="sxs-lookup"><span data-stu-id="0ff20-203">ExpandJob: Creates child jobs for each database from a job that targets a group of databases</span></span>
* <span data-ttu-id="0ff20-204">ScriptExecution: Végrehajtja a megadott hitelesítő adatok használatával egy adott adatbázison parancsfájl</span><span class="sxs-lookup"><span data-stu-id="0ff20-204">ScriptExecution: Executes a script against a particular database using defined credentials</span></span>
* <span data-ttu-id="0ff20-205">Dacpac: Egy DACPAC vonatkozik egy adott adatbázis adott hitelesítő adatok használatával</span><span class="sxs-lookup"><span data-stu-id="0ff20-205">Dacpac: Applies a DACPAC to a particular database using particular credentials</span></span>

## <a name="end-to-end-job-execution-work-flow"></a><span data-ttu-id="0ff20-206">Végpontok közötti feladat-végrehajtási-munkafolyamat</span><span class="sxs-lookup"><span data-stu-id="0ff20-206">End-to-end job execution work-flow</span></span>
1. <span data-ttu-id="0ff20-207">A portál vagy a PowerShell API használatával, a feladatok bekerülnek a **feladatvezérlő adatbázishoz**.</span><span class="sxs-lookup"><span data-stu-id="0ff20-207">Using either the Portal or the PowerShell API, a job is inserted into the  **control database**.</span></span> <span data-ttu-id="0ff20-208">A feladat a megadott hitelesítő adatok használatával adatbázisok csoportja elleni Transact-SQL parancsfájl végrehajtását kéri.</span><span class="sxs-lookup"><span data-stu-id="0ff20-208">The job requests execution of a Transact-SQL script against a group of databases using specific credentials.</span></span>
2. <span data-ttu-id="0ff20-209">A vezérlő azonosítja az új projektbe.</span><span class="sxs-lookup"><span data-stu-id="0ff20-209">The controller identifies the new job.</span></span> <span data-ttu-id="0ff20-210">Feladat feladatok létrehozása és hajtotta végre a parancsfájl felosztása és a csoporthoz tartozó adatbázisok frissítéséhez.</span><span class="sxs-lookup"><span data-stu-id="0ff20-210">Job tasks are created and executed to split the script and to refresh the group’s databases.</span></span> <span data-ttu-id="0ff20-211">Végül egy új feladatot létrehozni és bontsa ki a feladatot, és hozzon létre feladatokat, ahol minden gyermek feladat van megadva, a csoportban lévő egyes adatbázison a Transact-SQL parancsfájl végrehajtása az új gyermek végrehajtani.</span><span class="sxs-lookup"><span data-stu-id="0ff20-211">Lastly, a new job is created and executed to expand the job and create new child jobs where each child job is specified to execute the Transact-SQL script against an individual database in the group.</span></span>
3. <span data-ttu-id="0ff20-212">A vezérlő azonosítja a létrehozott gyermek feladatok.</span><span class="sxs-lookup"><span data-stu-id="0ff20-212">The controller identifies the created child jobs.</span></span> <span data-ttu-id="0ff20-213">Minden feladat a vezérlő hoz létre, és elindítja egy feladatot az adatbázis futtassa a parancsfájlt.</span><span class="sxs-lookup"><span data-stu-id="0ff20-213">For each job, the controller creates and triggers a job task to execute the script against a database.</span></span> 
4. <span data-ttu-id="0ff20-214">Feladataival feladat befejezése után a vezérlő frissíti a feladat kész állapotba.</span><span class="sxs-lookup"><span data-stu-id="0ff20-214">After all job tasks have completed, the controller updates the jobs to a completed state.</span></span> 
   <span data-ttu-id="0ff20-215">Feladat végrehajtása során bármikor a PowerShell API segítségével megtekintheti a feladat végrehajtása aktuális állapotát.</span><span class="sxs-lookup"><span data-stu-id="0ff20-215">At any point during job execution, the PowerShell API can be used to view the current state of job execution.</span></span> <span data-ttu-id="0ff20-216">Az összes idő a PowerShell API-k által visszaadott UTC formátumban vannak megadva.</span><span class="sxs-lookup"><span data-stu-id="0ff20-216">All times returned by the PowerShell APIs are represented in UTC.</span></span> <span data-ttu-id="0ff20-217">Ha szükséges, a lemondási kérelmet leállíthat feladatot is kezdeményezhető.</span><span class="sxs-lookup"><span data-stu-id="0ff20-217">If desired, a cancellation request can be initiated to stop a job.</span></span> 

## <a name="next-steps"></a><span data-ttu-id="0ff20-218">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="0ff20-218">Next steps</span></span>
<span data-ttu-id="0ff20-219">[Az összetevők telepítéséhez](sql-database-elastic-jobs-service-installation.md), majd [létrehozása és hozzáadása a napló az egyes adatbázis-adatbázisok csoport](sql-database-manage-logins.md).</span><span class="sxs-lookup"><span data-stu-id="0ff20-219">[Install the components](sql-database-elastic-jobs-service-installation.md), then [create and add a log in to each database in the group of databases](sql-database-manage-logins.md).</span></span> <span data-ttu-id="0ff20-220">Feladat létrehozása és kezelése további ismertetése: [rugalmas adatbázis-feladatok létrehozását és kezelését](sql-database-elastic-jobs-create-and-manage.md).</span><span class="sxs-lookup"><span data-stu-id="0ff20-220">To further understand job creation and management, see [creating and managing elastic database jobs](sql-database-elastic-jobs-create-and-manage.md).</span></span> <span data-ttu-id="0ff20-221">Lásd még: [Ismerkedés a rugalmas feladatok](sql-database-elastic-jobs-getting-started.md).</span><span class="sxs-lookup"><span data-stu-id="0ff20-221">See also [Getting started with Elastic Database jobs](sql-database-elastic-jobs-getting-started.md).</span></span>

[!INCLUDE [elastic-scale-include](../../includes/elastic-scale-include.md)]

<!--Image references-->
[1]: ./media/sql-database-elastic-jobs-overview/elastic-jobs.png
<!--anchors-->


