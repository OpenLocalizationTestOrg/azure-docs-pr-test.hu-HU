---
title: "Az Azure SQL adatbázis tűzfalszabályainak |} Microsoft Docs"
description: "Ismerje meg, hogyan konfigurálhat egy SQL Database-tűzfalat a hozzáférések kezelése céljából kiszolgálói és adatbázisszintű tűzfalszabályokkal."
keywords: "adatbázistűzfal"
services: sql-database
documentationcenter: 
author: BYHAM
manager: jhubbard
editor: cgronlun
tags: 
ms.assetid: ac57f84c-35c3-4975-9903-241c8059011e
ms.service: sql-database
ms.custom: security
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-management
ms.date: 04/10/2017
ms.author: rickbyh
ms.openlocfilehash: 583c91376418d20d34db17d57d3fa14a1e71cd3b
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 07/11/2017
---
# <a name="azure-sql-database-server-level-and-database-level-firewall-rules"></a><span data-ttu-id="50f4a-104">Az Azure SQL Database kiszolgáló- és adatbázis tűzfalszabályok</span><span class="sxs-lookup"><span data-stu-id="50f4a-104">Azure SQL Database server-level and database-level firewall rules</span></span> 

<span data-ttu-id="50f4a-105">A Microsoft Azure SQL Database egy relációs adatbázis-szolgáltatást nyújt az Azure és egyéb internetalapú alkalmazások számára.</span><span class="sxs-lookup"><span data-stu-id="50f4a-105">Microsoft Azure SQL Database provides a relational database service for Azure and other Internet-based applications.</span></span> <span data-ttu-id="50f4a-106">Az adatok védelme érdekében a tűzfalak mindaddig megakadályozzák az adatbázis-kiszolgáló elérését, amíg meg nem adja, hogy mely számítógépek rendelkeznek ehhez engedéllyel.</span><span class="sxs-lookup"><span data-stu-id="50f4a-106">To help protect your data, firewalls prevent all access to your database server until you specify which computers have permission.</span></span> <span data-ttu-id="50f4a-107">A tűzfal biztosítja az adatbázisokhoz való hozzáférést az egyes kérések kiindulási IP-címe alapján.</span><span class="sxs-lookup"><span data-stu-id="50f4a-107">The firewall grants access to databases based on the originating IP address of each request.</span></span>

## <a name="overview"></a><span data-ttu-id="50f4a-108">Áttekintés</span><span class="sxs-lookup"><span data-stu-id="50f4a-108">Overview</span></span>

<span data-ttu-id="50f4a-109">Kezdetben a tűzfal az Azure SQL Server összes Transact-SQL-hozzáférését blokkolja.</span><span class="sxs-lookup"><span data-stu-id="50f4a-109">Initially, all Transact-SQL access to your Azure SQL server is blocked by the firewall.</span></span> <span data-ttu-id="50f4a-110">Az Azure SQL server használatának megkezdéséhez meg kell adnia egy vagy több kiszolgálószintű tűzfalszabályt, amely engedélyezi az Azure SQL-kiszolgáló eléréséhez.</span><span class="sxs-lookup"><span data-stu-id="50f4a-110">To begin using your Azure SQL server, you must specify one or more server-level firewall rules that enable access to your Azure SQL server.</span></span> <span data-ttu-id="50f4a-111">A tűzfalszabályok segítségével adja meg, hogy az internet felől mely IP-címtartományok engedélyezettek, valamint hogy az Azure-alkalmazások megpróbálhatnak-e csatlakozni az Azure SQL Serverhez.</span><span class="sxs-lookup"><span data-stu-id="50f4a-111">Use the firewall rules to specify which IP address ranges from the Internet are allowed, and whether Azure applications can attempt to connect to your Azure SQL server.</span></span>

<span data-ttu-id="50f4a-112">Ha az Azure SQL Serveren csak egyetlen adatbázishoz szeretne hozzáférést biztosítani, akkor az adott adatbázishoz egy adatbázisszintű szabályt kell létrehoznia.</span><span class="sxs-lookup"><span data-stu-id="50f4a-112">To selectively grant access to just one of the databases in your Azure SQL server, you must create a database-level rule for the required database.</span></span> <span data-ttu-id="50f4a-113">Adjon meg egy olyan IP-címtartományt az adatbázis tűzfalszabályához, amely a kiszolgálószintű tűzfalszabályban megadott IP-címtartományon kívül van, és ügyeljen arra, hogy az ügyfél IP-címe az adatbázisszintű szabályban megadott tartományon belülre essen.</span><span class="sxs-lookup"><span data-stu-id="50f4a-113">Specify an IP address range for the database firewall rule that is beyond the IP address range specified in the server-level firewall rule, and ensure that the IP address of the client falls in the range specified in the database-level rule.</span></span>

<span data-ttu-id="50f4a-114">Az internetről és az Azure-ból érkező kapcsolódási kísérleteknek először át kell jutniuk a tűzfalon, mielőtt elérnék az Azure SQL Servert vagy az SQL Database-t, ahogyan az a következő ábrán látható:</span><span class="sxs-lookup"><span data-stu-id="50f4a-114">Connection attempts from the Internet and Azure must first pass through the firewall before they can reach your Azure SQL server or SQL Database, as shown in the following diagram:</span></span>

   ![A tűzfal-konfigurációt bemutató ábra.][1]

* <span data-ttu-id="50f4a-116">**Kiszolgálószintű tűzfalszabályok:** Ezek a szabályok hozzáférést biztosítanak az ügyfelek számára a teljes Azure SQL Serverhez, azaz az egyazon logikai kiszolgálón található összes adatbázishoz.</span><span class="sxs-lookup"><span data-stu-id="50f4a-116">**Server-level firewall rules:** These rules enable clients to access your entire Azure SQL server, that is, all the databases within the same logical server.</span></span> <span data-ttu-id="50f4a-117">Ezek a szabályok a **fő** adatbázisban vannak tárolva.</span><span class="sxs-lookup"><span data-stu-id="50f4a-117">These rules are stored in the **master** database.</span></span> <span data-ttu-id="50f4a-118">A kiszolgálószintű tűzfalszabályok a portálon vagy Transact-SQL utasításokkal konfigurálhatók.</span><span class="sxs-lookup"><span data-stu-id="50f4a-118">Server-level firewall rules can be configured by using the portal or by using Transact-SQL statements.</span></span> <span data-ttu-id="50f4a-119">Az Azure Portal vagy a PowerShell használatával csak az előfizetés tulajdonosa vagy az előfizetés közreműködői hozhatnak létre kiszolgálószintű tűzfalszabályokat.</span><span class="sxs-lookup"><span data-stu-id="50f4a-119">To create server-level firewall rules using the Azure portal or PowerShell, you must be the subscription owner or a subscription contributor.</span></span> <span data-ttu-id="50f4a-120">Ha kiszolgálószintű tűzfalszabályt kíván létrehozni a Transact-SQL használatával, akkor kiszolgálószintű fő bejelentkezőként vagy az Azure Active Directory rendszergazdájaként kell csatlakoznia az SQL Database-példányhoz (ez egyben azt is jelenti, hogy először kiszolgálószintű tűzfalszabályt kell létrehoznia egy Azure-szintű engedélyekkel rendelkező felhasználóval).</span><span class="sxs-lookup"><span data-stu-id="50f4a-120">To create a server-level firewall rule using Transact-SQL, you must connect to the SQL Database instance as the server-level principal login or the Azure Active Directory administrator (which means that a server-level firewall rule must first be created by a user with Azure-level permissions).</span></span>
* <span data-ttu-id="50f4a-121">**Adatbázis-adatbázisszintű tűzfalszabályok:** ezek a szabályok engedélyezi az ügyfelek bizonyos (biztonságos) adatbázisok belül az azonos logikai kiszolgáló eléréséhez.</span><span class="sxs-lookup"><span data-stu-id="50f4a-121">**Database-level firewall rules:** These rules enable clients to access certain (secure) databases within the same logical server.</span></span> <span data-ttu-id="50f4a-122">Hozhatja létre ezeket a szabályokat az egyes adatbázisok (beleértve a **fő** database0) és az egyes adatbázisok tárolódnak.</span><span class="sxs-lookup"><span data-stu-id="50f4a-122">You can create these rules for each database (including the **master** database0) and they are stored in the individual databases.</span></span> <span data-ttu-id="50f4a-123">Adatbázis-szintű tűzfalszabályok csak akkor lehet Transact-SQL-utasítások segítségével konfigurált csak az első kiszolgálószintű tűzfal konfigurálása után.</span><span class="sxs-lookup"><span data-stu-id="50f4a-123">Database-level firewall rules can only be configured by using Transact-SQL statements and only after you have configured the first server-level firewall.</span></span> <span data-ttu-id="50f4a-124">Ha egy olyan IP-címtartományt ad meg az adatbázisszintű tűzfalszabályban, amely kívül esik a kiszolgálószintű tűzfalszabályban megadott tartományon, akkor csak az adatbázisszinten megadott tartományba eső IP-címekkel rendelkező ügyfelek érhetik el az adatbázist.</span><span class="sxs-lookup"><span data-stu-id="50f4a-124">If you specify an IP address range in the database-level firewall rule that is outside the range specified in the server-level firewall rule, only those clients that have IP addresses in the database-level range can access the database.</span></span> <span data-ttu-id="50f4a-125">Egy adatbázishoz legfeljebb 128 adatbázisszintű tűzfalszabály adható meg.</span><span class="sxs-lookup"><span data-stu-id="50f4a-125">You can have a maximum of 128 database-level firewall rules for a database.</span></span> <span data-ttu-id="50f4a-126">Adatbázis-szintű tűzfalszabályok fő- és felhasználói adatbázisok csak hozható létre és kezelhetők a Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="50f4a-126">Database-level firewall rules for master and user databases can only be created and managed through Transact-SQL.</span></span> <span data-ttu-id="50f4a-127">Az adatbázis-szintű tűzfalszabályok beállítása további információkért lásd: a példa későbbi részében a következő cikket, és tekintse meg [sp_set_database_firewall_rule (Azure SQL-adatbázisok)](https://msdn.microsoft.com/library/dn270010.aspx).</span><span class="sxs-lookup"><span data-stu-id="50f4a-127">For more information on configuring database-level firewall rules, see the example later in this article and see [sp_set_database_firewall_rule (Azure SQL Databases)](https://msdn.microsoft.com/library/dn270010.aspx).</span></span>

<span data-ttu-id="50f4a-128">**Javaslat:** A Microsoft a biztonság és az adatbázis hordozhatóságának fokozása érdekében adatbázisszintű tűzfalszabályok használatát javasolja, amikor erre lehetőség van.</span><span class="sxs-lookup"><span data-stu-id="50f4a-128">**Recommendation:** Microsoft recommends using database-level firewall rules whenever possible to enhance security and to make your database more portable.</span></span> <span data-ttu-id="50f4a-129">Kiszolgálószintű tűzfalszabályokat használhat a rendszergazdákra vonatkozóan, vagy ha több, azonos hozzáférési követelményt támasztó adatbázissal rendelkezik, és nem szeretne időt tölteni az egyes adatbázisok egyenként való konfigurálásával.</span><span class="sxs-lookup"><span data-stu-id="50f4a-129">Use server-level firewall rules for administrators and when you have many databases that have the same access requirements and you don't want to spend time configuring each database individually.</span></span>

> [!Note]
> <span data-ttu-id="50f4a-130">Az üzletmenet folytonossága és a hordozható adatbázisok közötti kapcsolatról [a vészhelyreállítás hitelesítési követelményeit](sql-database-geo-replication-security-config.md)ismertető cikkből tájékozódhat.</span><span class="sxs-lookup"><span data-stu-id="50f4a-130">For information about portable databases in the context of business continuity, see [Authentication requirements for disaster recovery](sql-database-geo-replication-security-config.md).</span></span>
>

### <a name="connecting-from-the-internet"></a><span data-ttu-id="50f4a-131">Csatlakozás az internetről</span><span class="sxs-lookup"><span data-stu-id="50f4a-131">Connecting from the Internet</span></span>

<span data-ttu-id="50f4a-132">Amikor egy számítógép megpróbál csatlakozni az adatbázis-kiszolgálóhoz az internetről, a tűzfal először az adatbázisszintű tűzfalszabályoknak megfelelően ellenőrzi a kérés eredeti IP-címét, a kapcsolati kérésben szereplő adatbázisra vonatkozóan:</span><span class="sxs-lookup"><span data-stu-id="50f4a-132">When a computer attempts to connect to your database server from the Internet, the firewall first checks the originating IP address of the request against the database-level firewall rules, for the database that the connection is requesting:</span></span>

* <span data-ttu-id="50f4a-133">Ha a kérés IP-címe a adatbázisszintű tűzfalszabályokban megadott tartományok egyikében található, a tűzfal engedélyezi a csatlakozást a szabályt tartalmazó SQL-adatbázishoz.</span><span class="sxs-lookup"><span data-stu-id="50f4a-133">If the IP address of the request is within one of the ranges specified in the database-level firewall rules, the connection is granted to the SQL Database that contains the rule.</span></span>
* <span data-ttu-id="50f4a-134">Ha a kérés IP-címe nem található meg az adatbázisszintű tűzfalszabályokban megadott tartományok egyikében sem, a tűzfal ellenőrzi a kiszolgálószintű tűzfalszabályokat.</span><span class="sxs-lookup"><span data-stu-id="50f4a-134">If the IP address of the request is not within one of the ranges specified in the database-level firewall rule, the server-level firewall rules are checked.</span></span> <span data-ttu-id="50f4a-135">Ha a kérés IP-címe a kiszolgálószintű tűzfalszabályokban megadott tartományok egyikében található, a tűzfal engedélyezi a csatlakozást.</span><span class="sxs-lookup"><span data-stu-id="50f4a-135">If the IP address of the request is within one of the ranges specified in the server-level firewall rules, the connection is granted.</span></span> <span data-ttu-id="50f4a-136">A kiszolgálószintű tűzfalszabályok az összes SQL-adatbázisra érvényesek az Azure SQL Serveren.</span><span class="sxs-lookup"><span data-stu-id="50f4a-136">Server-level firewall rules apply to all SQL databases on the Azure SQL server.</span></span>  
* <span data-ttu-id="50f4a-137">Ha az IP-cím, a kérelem nem az adatbázis-szintjére, vagy a kiszolgálószintű tűzfalszabály megadott tartományok belül van, a kapcsolódási kérelem sikertelen lesz.</span><span class="sxs-lookup"><span data-stu-id="50f4a-137">If the IP address of the request is not within the ranges specified in any of the database-level or server-level firewall rules, the connection request fails.</span></span>

> [!NOTE]
> <span data-ttu-id="50f4a-138">Ha a helyi számítógépről szeretné elérni az Azure SQL Database-t, akkor ellenőrizze, hogy a hálózaton és a helyi számítógépen lévő tűzfal engedélyezi-e a kimenő kommunikációt az 1433-as TCP-porton keresztül.</span><span class="sxs-lookup"><span data-stu-id="50f4a-138">To access Azure SQL Database from your local computer, ensure the firewall on your network and local computer allows outgoing communication on TCP port 1433.</span></span>
> 

### <a name="connecting-from-azure"></a><span data-ttu-id="50f4a-139">Csatlakozás az Azure-ból</span><span class="sxs-lookup"><span data-stu-id="50f4a-139">Connecting from Azure</span></span>
<span data-ttu-id="50f4a-140">Annak engedélyezéséhez, hogy az Azure-alkalmazások csatlakozhassanak az Azure SQL Serverhez, engedélyezni kell az Azure-kapcsolatokat.</span><span class="sxs-lookup"><span data-stu-id="50f4a-140">To allow applications from Azure to connect to your Azure SQL server, Azure connections must be enabled.</span></span> <span data-ttu-id="50f4a-141">Amikor egy Azure-alkalmazás megkísérel csatlakozni az adatbázis-kiszolgálóhoz, a tűzfal ellenőrzi, hogy az Azure-kapcsolatok engedélyezve vannak-e.</span><span class="sxs-lookup"><span data-stu-id="50f4a-141">When an application from Azure attempts to connect to your database server, the firewall verifies that Azure connections are allowed.</span></span> <span data-ttu-id="50f4a-142">A 0.0.0.0 kezdő- és zárócímet tartalmazó tűzfalbeállítás jelzi, hogy ezek a kapcsolatok engedélyezettek.</span><span class="sxs-lookup"><span data-stu-id="50f4a-142">A firewall setting with starting and ending address equal to 0.0.0.0 indicates these connections are allowed.</span></span> <span data-ttu-id="50f4a-143">Ha a csatlakozási kísérlet nem engedélyezett, a kérés nem éri el az Azure SQL Database-kiszolgálót.</span><span class="sxs-lookup"><span data-stu-id="50f4a-143">If the connection attempt is not allowed, the request does not reach the Azure SQL Database server.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="50f4a-144">Ez a beállítás konfigurálja a tűzfalat arra, hogy engedélyezzen minden, az Azure felől érkező kapcsolatot, beleértve a más ügyfelek előfizetéseiből érkező kapcsolatokat is.</span><span class="sxs-lookup"><span data-stu-id="50f4a-144">This option configures the firewall to allow all connections from Azure including connections from the subscriptions of other customers.</span></span> <span data-ttu-id="50f4a-145">Ezen beállítás kiválasztásakor győződjön meg arról, hogy a bejelentkezési és felhasználói engedélyei a hozzáféréseket az arra jogosult felhasználókra korlátozzák.</span><span class="sxs-lookup"><span data-stu-id="50f4a-145">When selecting this option, make sure your login and user permissions limit access to only authorized users.</span></span>
> 

## <a name="creating-and-managing-firewall-rules"></a><span data-ttu-id="50f4a-146">Tűzfal-szabályok létrehozását és kezelését</span><span class="sxs-lookup"><span data-stu-id="50f4a-146">Creating and managing firewall rules</span></span>
<span data-ttu-id="50f4a-147">Az első kiszolgálószintű tűzfal beállítás segítségével hozhatók létre a [Azure-portálon](https://portal.azure.com/) vagy programozott módon [Azure PowerShell](https://msdn.microsoft.com/library/azure/dn546724.aspx), [Azure CLI](/cli/azure/sql/server/firewall-rule#create), vagy a [REST API](https://msdn.microsoft.com/library/azure/dn505712.aspx).</span><span class="sxs-lookup"><span data-stu-id="50f4a-147">The first server-level firewall setting can be created using the [Azure portal](https://portal.azure.com/) or programmatically using [Azure PowerShell](https://msdn.microsoft.com/library/azure/dn546724.aspx), [Azure CLI](/cli/azure/sql/server/firewall-rule#create), or the [REST API](https://msdn.microsoft.com/library/azure/dn505712.aspx).</span></span> <span data-ttu-id="50f4a-148">A további kiszolgálószintű tűzfalszabályok ugyanezekkel a módszerekkel, vagy a Transact-SQL-lel hozhatók létre és kezelhetők.</span><span class="sxs-lookup"><span data-stu-id="50f4a-148">Subsequent server-level firewall rules can be created and managed using these methods, and through Transact-SQL.</span></span> 

> [!IMPORTANT]
> <span data-ttu-id="50f4a-149">Adatbázis-szintű tűzfalszabályok csak hozhatók létre, és a Transact-SQL használatával kezelhetők.</span><span class="sxs-lookup"><span data-stu-id="50f4a-149">Database-level firewall rules can only be created and managed using Transact-SQL.</span></span> 
>

<span data-ttu-id="50f4a-150">A teljesítmény javítása érdekében a kiszolgálószintű tűzfalszabályokat átmenetileg adatbázisszinten is gyorsítótárazza a rendszer.</span><span class="sxs-lookup"><span data-stu-id="50f4a-150">To improve performance, server-level firewall rules are temporarily cached at the database level.</span></span> <span data-ttu-id="50f4a-151">A gyorsítótár frissítésével kapcsolatban lásd: [DBCC FLUSHAUTHCACHE](https://msdn.microsoft.com/library/mt627793.aspx).</span><span class="sxs-lookup"><span data-stu-id="50f4a-151">To refresh the cache, see [DBCC FLUSHAUTHCACHE](https://msdn.microsoft.com/library/mt627793.aspx).</span></span> 

> [!TIP]
> <span data-ttu-id="50f4a-152">Használhat [SQL Database Auditing](sql-database-auditing.md) kiszolgáló- és adatbázis tűzfal naplózása.</span><span class="sxs-lookup"><span data-stu-id="50f4a-152">You can use [SQL Database Auditing](sql-database-auditing.md) to audit server-level and database-level firewall changes.</span></span>
>

### <a name="azure-portal"></a><span data-ttu-id="50f4a-153">Azure Portal</span><span class="sxs-lookup"><span data-stu-id="50f4a-153">Azure portal</span></span>

<span data-ttu-id="50f4a-154">Egy kiszolgálószintű tűzfalszabályt beállítani az Azure portálon, vagy lépjen a – áttekintés oldalra az Azure SQL database vagy az Áttekintés lap az Azure Database logikai kiszolgáló.</span><span class="sxs-lookup"><span data-stu-id="50f4a-154">To set a server-level firewall rule in the Azure portal, you can either go to the Overview page for your Azure SQL database or the Overview page for your Azure Database logical server.</span></span>

> [!TIP]
> <span data-ttu-id="50f4a-155">Az oktatóanyagok esetén lásd: [hozzon létre egy Azure portál használatával DB](sql-database-get-started-portal.md).</span><span class="sxs-lookup"><span data-stu-id="50f4a-155">For a tutorial, see [Create a DB using the Azure portal](sql-database-get-started-portal.md).</span></span>
>

<span data-ttu-id="50f4a-156">**Az adatbázis – áttekintés oldalra**</span><span class="sxs-lookup"><span data-stu-id="50f4a-156">**From database overview page**</span></span>

1. <span data-ttu-id="50f4a-157">Az adatbázis – áttekintés oldalra egy kiszolgálószintű tűzfalszabályt beállításához kattintson **kiszolgáló tűzfalának beállítása** az eszköztáron a következő ábrán látható módon: A **tűzfalbeállítások** az SQL Database-kiszolgálóhoz tartozó lapon nyílik meg.</span><span class="sxs-lookup"><span data-stu-id="50f4a-157">To set a server-level firewall rule from the database overview page, click **Set server firewall** on the toolbar as shown in the following image: The **Firewall settings** page for the SQL Database server opens.</span></span>

      ![kiszolgálói tűzfalszabály](./media/sql-database-get-started-portal/server-firewall-rule.png) 

2. <span data-ttu-id="50f4a-159">Kattintson a **ügyfél IP-cím hozzáadása** annak a számítógépnek az IP-cím hozzáadása az eszköztáron jelenleg használ, és kattintson a **mentése**.</span><span class="sxs-lookup"><span data-stu-id="50f4a-159">Click **Add client IP** on the toolbar to add the IP address of the computer you are currently using and then click **Save**.</span></span> <span data-ttu-id="50f4a-160">A rendszer létrehoz egy kiszolgálószintű tűzfalszabályt az aktuális IP-címhez.</span><span class="sxs-lookup"><span data-stu-id="50f4a-160">A server-level firewall rule is created for your current IP address.</span></span>

      ![kiszolgálótűzfal-szabály beállítása](./media/sql-database-get-started-portal/server-firewall-rule-set.png) 

<span data-ttu-id="50f4a-162">**A kiszolgáló – áttekintés oldalra**</span><span class="sxs-lookup"><span data-stu-id="50f4a-162">**From server overview page**</span></span>

<span data-ttu-id="50f4a-163">A kiszolgálóhoz tartozó – Áttekintés lapon nyit meg, hogy bemutatja a kiszolgáló teljesen minősített neve (például **mynewserver20170403.database.windows.net**) és további konfigurációs lehetőségeket.</span><span class="sxs-lookup"><span data-stu-id="50f4a-163">The overview page for your server opens, showing you the fully qualified server name (such as **mynewserver20170403.database.windows.net**) and provides options for further configuration.</span></span>

1. <span data-ttu-id="50f4a-164">A kiszolgáló – Áttekintés lap egy kiszolgálószintű szabály beállításához kattintson **tűzfal** a beállítások, amint az az alábbi ábrán a bal oldali menüben:</span><span class="sxs-lookup"><span data-stu-id="50f4a-164">To set a server-level rule from server overview page, click **Firewall** in the left-hand menu under Settings as showed in the following image:</span></span> 

     ![a logikai kiszolgáló – áttekintés](./media/sql-database-migrate-your-sql-server-database/logical-server-overview.png)

2. <span data-ttu-id="50f4a-166">Kattintson a **ügyfél IP-cím hozzáadása** annak a számítógépnek az IP-cím hozzáadása az eszköztáron jelenleg használ, és kattintson a **mentése**.</span><span class="sxs-lookup"><span data-stu-id="50f4a-166">Click **Add client IP** on the toolbar to add the IP address of the computer you are currently using and then click **Save**.</span></span> <span data-ttu-id="50f4a-167">A rendszer létrehoz egy kiszolgálószintű tűzfalszabályt az aktuális IP-címhez.</span><span class="sxs-lookup"><span data-stu-id="50f4a-167">A server-level firewall rule is created for your current IP address.</span></span>

     ![kiszolgálótűzfal-szabály beállítása](./media/sql-database-migrate-your-sql-server-database/server-firewall-rule-set.png)

### <a name="transact-sql"></a><span data-ttu-id="50f4a-169">Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="50f4a-169">Transact-SQL</span></span>
| <span data-ttu-id="50f4a-170">Katalógusnézet vagy tárolt eljárás</span><span class="sxs-lookup"><span data-stu-id="50f4a-170">Catalog View or Stored Procedure</span></span> | <span data-ttu-id="50f4a-171">Szint</span><span class="sxs-lookup"><span data-stu-id="50f4a-171">Level</span></span> | <span data-ttu-id="50f4a-172">Leírás</span><span class="sxs-lookup"><span data-stu-id="50f4a-172">Description</span></span> |
| --- | --- | --- |
| [<span data-ttu-id="50f4a-173">sys.firewall_rules</span><span class="sxs-lookup"><span data-stu-id="50f4a-173">sys.firewall_rules</span></span>](https://msdn.microsoft.com/library/dn269980.aspx) |<span data-ttu-id="50f4a-174">Kiszolgáló</span><span class="sxs-lookup"><span data-stu-id="50f4a-174">Server</span></span> |<span data-ttu-id="50f4a-175">Az aktuális kiszolgálószintű tűzfalszabályok megjelenítése</span><span class="sxs-lookup"><span data-stu-id="50f4a-175">Displays the current server-level firewall rules</span></span> |
| [<span data-ttu-id="50f4a-176">sp_set_firewall_rule</span><span class="sxs-lookup"><span data-stu-id="50f4a-176">sp_set_firewall_rule</span></span>](https://msdn.microsoft.com/library/dn270017.aspx) |<span data-ttu-id="50f4a-177">Kiszolgáló</span><span class="sxs-lookup"><span data-stu-id="50f4a-177">Server</span></span> |<span data-ttu-id="50f4a-178">Kiszolgálószintű tűzfalszabályok létrehozása vagy frissítése</span><span class="sxs-lookup"><span data-stu-id="50f4a-178">Creates or updates server-level firewall rules</span></span> |
| [<span data-ttu-id="50f4a-179">sp_delete_firewall_rule</span><span class="sxs-lookup"><span data-stu-id="50f4a-179">sp_delete_firewall_rule</span></span>](https://msdn.microsoft.com/library/dn270024.aspx) |<span data-ttu-id="50f4a-180">Kiszolgáló</span><span class="sxs-lookup"><span data-stu-id="50f4a-180">Server</span></span> |<span data-ttu-id="50f4a-181">Kiszolgálószintű tűzfalszabályok eltávolítása</span><span class="sxs-lookup"><span data-stu-id="50f4a-181">Removes server-level firewall rules</span></span> |
| [<span data-ttu-id="50f4a-182">sys.database_firewall_rules</span><span class="sxs-lookup"><span data-stu-id="50f4a-182">sys.database_firewall_rules</span></span>](https://msdn.microsoft.com/library/dn269982.aspx) |<span data-ttu-id="50f4a-183">Adatbázis</span><span class="sxs-lookup"><span data-stu-id="50f4a-183">Database</span></span> |<span data-ttu-id="50f4a-184">Az aktuális adatbázisszintű tűzfalszabályok megjelenítése</span><span class="sxs-lookup"><span data-stu-id="50f4a-184">Displays the current database-level firewall rules</span></span> |
| [<span data-ttu-id="50f4a-185">sp_set_database_firewall_rule</span><span class="sxs-lookup"><span data-stu-id="50f4a-185">sp_set_database_firewall_rule</span></span>](https://msdn.microsoft.com/library/dn270010.aspx) |<span data-ttu-id="50f4a-186">Adatbázis</span><span class="sxs-lookup"><span data-stu-id="50f4a-186">Database</span></span> |<span data-ttu-id="50f4a-187">Adatbázisszintű tűzfalszabályok létrehozása vagy frissítése</span><span class="sxs-lookup"><span data-stu-id="50f4a-187">Creates or updates the database-level firewall rules</span></span> |
| [<span data-ttu-id="50f4a-188">sp_delete_database_firewall_rule</span><span class="sxs-lookup"><span data-stu-id="50f4a-188">sp_delete_database_firewall_rule</span></span>](https://msdn.microsoft.com/library/dn270030.aspx) |<span data-ttu-id="50f4a-189">Adatbázisok</span><span class="sxs-lookup"><span data-stu-id="50f4a-189">Databases</span></span> |<span data-ttu-id="50f4a-190">Adatbázisszintű tűzfalszabályok eltávolítása</span><span class="sxs-lookup"><span data-stu-id="50f4a-190">Removes database-level firewall rules</span></span> |


<span data-ttu-id="50f4a-191">Az alábbi példák tekintse át a meglévő szabályokat, egy adott IP-címek a kiszolgálóra Contoso engedélyezése és tűzfalszabály törlése:</span><span class="sxs-lookup"><span data-stu-id="50f4a-191">The following examples review the existing rules, enable a range of IP addresses on the server Contoso, and deletes a firewall rule:</span></span>
   
```sql
SELECT * FROM sys.firewall_rules ORDER BY name;
```
  
<span data-ttu-id="50f4a-192">Ezután adjon hozzá egy tűzfalszabályt.</span><span class="sxs-lookup"><span data-stu-id="50f4a-192">Next, add a firewall rule.</span></span>
   
```sql
EXECUTE sp_set_firewall_rule @name = N'ContosoFirewallRule',
   @start_ip_address = '192.168.1.1', @end_ip_address = '192.168.1.10'
```

<span data-ttu-id="50f4a-193">Kiszolgálószintű tűzfalszabály törléséhez futtassa az sp_delete_firewall_rule tárolt eljárást.</span><span class="sxs-lookup"><span data-stu-id="50f4a-193">To delete a server-level firewall rule, execute the sp_delete_firewall_rule stored procedure.</span></span> <span data-ttu-id="50f4a-194">Az alábbi példában a szabály ContosoFirewallRule nevű törlése:</span><span class="sxs-lookup"><span data-stu-id="50f4a-194">The following example deletes the rule named ContosoFirewallRule:</span></span>
   
```sql
EXECUTE sp_delete_firewall_rule @name = N'ContosoFirewallRule'
```   

### <a name="azure-powershell"></a><span data-ttu-id="50f4a-195">Azure PowerShell</span><span class="sxs-lookup"><span data-stu-id="50f4a-195">Azure PowerShell</span></span>
| <span data-ttu-id="50f4a-196">Parancsmag</span><span class="sxs-lookup"><span data-stu-id="50f4a-196">Cmdlet</span></span> | <span data-ttu-id="50f4a-197">Szint</span><span class="sxs-lookup"><span data-stu-id="50f4a-197">Level</span></span> | <span data-ttu-id="50f4a-198">Leírás</span><span class="sxs-lookup"><span data-stu-id="50f4a-198">Description</span></span> |
| --- | --- | --- |
| [<span data-ttu-id="50f4a-199">Get-AzureSqlDatabaseServerFirewallRule</span><span class="sxs-lookup"><span data-stu-id="50f4a-199">Get-AzureSqlDatabaseServerFirewallRule</span></span>](https://msdn.microsoft.com/library/azure/dn546731.aspx) |<span data-ttu-id="50f4a-200">Kiszolgáló</span><span class="sxs-lookup"><span data-stu-id="50f4a-200">Server</span></span> |<span data-ttu-id="50f4a-201">Az aktuális kiszolgálószintű tűzfalszabályokat adja vissza</span><span class="sxs-lookup"><span data-stu-id="50f4a-201">Returns the current server-level firewall rules</span></span> |
| [<span data-ttu-id="50f4a-202">New-AzureSqlDatabaseServerFirewallRule</span><span class="sxs-lookup"><span data-stu-id="50f4a-202">New-AzureSqlDatabaseServerFirewallRule</span></span>](https://msdn.microsoft.com/library/azure/dn546724.aspx) |<span data-ttu-id="50f4a-203">Kiszolgáló</span><span class="sxs-lookup"><span data-stu-id="50f4a-203">Server</span></span> |<span data-ttu-id="50f4a-204">Új kiszolgálószintű tűzfalszabály létrehozása</span><span class="sxs-lookup"><span data-stu-id="50f4a-204">Creates a new server-level firewall rule</span></span> |
| [<span data-ttu-id="50f4a-205">Set-AzureSqlDatabaseServerFirewallRule</span><span class="sxs-lookup"><span data-stu-id="50f4a-205">Set-AzureSqlDatabaseServerFirewallRule</span></span>](https://msdn.microsoft.com/library/azure/dn546739.aspx) |<span data-ttu-id="50f4a-206">Kiszolgáló</span><span class="sxs-lookup"><span data-stu-id="50f4a-206">Server</span></span> |<span data-ttu-id="50f4a-207">Meglévő kiszolgálószintű tűzfalszabály tulajdonságainak frissítése</span><span class="sxs-lookup"><span data-stu-id="50f4a-207">Updates the properties of an existing server-level firewall rule</span></span> |
| [<span data-ttu-id="50f4a-208">Remove-AzureSqlDatabaseServerFirewallRule</span><span class="sxs-lookup"><span data-stu-id="50f4a-208">Remove-AzureSqlDatabaseServerFirewallRule</span></span>](https://msdn.microsoft.com/library/azure/dn546727.aspx) |<span data-ttu-id="50f4a-209">Kiszolgáló</span><span class="sxs-lookup"><span data-stu-id="50f4a-209">Server</span></span> |<span data-ttu-id="50f4a-210">Kiszolgálószintű tűzfalszabályok eltávolítása</span><span class="sxs-lookup"><span data-stu-id="50f4a-210">Removes server-level firewall rules</span></span> |


<span data-ttu-id="50f4a-211">Az alábbi mintakód egy kiszolgálószintű tűzfalszabályt PowerShell használatával:</span><span class="sxs-lookup"><span data-stu-id="50f4a-211">The following example sets a server-level firewall rule using PowerShell:</span></span>

```powershell
New-AzureRmSqlServerFirewallRule -ResourceGroupName "myResourceGroup" `
    -ServerName $servername `
    -FirewallRuleName "AllowSome" -StartIpAddress "0.0.0.0" -EndIpAddress "0.0.0.0"
```

> [!TIP]
> <span data-ttu-id="50f4a-212">PowerShell az adott környezetben a gyors, tekintse meg a [létrehozása DB - PowerShell](sql-database-get-started-powershell.md) és [hozzon létre egy adatbázist, és a PowerShell használatával tűzfalszabályok konfigurálása](scripts/sql-database-create-and-configure-database-powershell.md)</span><span class="sxs-lookup"><span data-stu-id="50f4a-212">For PowerShell examples in the context of a quick start, see [Create DB - PowerShell](sql-database-get-started-powershell.md) and [Create a single database and configure a firewall rule using PowerShell](scripts/sql-database-create-and-configure-database-powershell.md)</span></span>
>

### <a name="azure-cli"></a><span data-ttu-id="50f4a-213">Azure CLI</span><span class="sxs-lookup"><span data-stu-id="50f4a-213">Azure CLI</span></span>
| <span data-ttu-id="50f4a-214">Parancsmag</span><span class="sxs-lookup"><span data-stu-id="50f4a-214">Cmdlet</span></span> | <span data-ttu-id="50f4a-215">Szint</span><span class="sxs-lookup"><span data-stu-id="50f4a-215">Level</span></span> | <span data-ttu-id="50f4a-216">Leírás</span><span class="sxs-lookup"><span data-stu-id="50f4a-216">Description</span></span> |
| --- | --- | --- |
| [<span data-ttu-id="50f4a-217">az sql server tűzfal létrehozása</span><span class="sxs-lookup"><span data-stu-id="50f4a-217">az sql server firewall create</span></span>](/cli/azure/sql/server/firewall-rule#create) | <span data-ttu-id="50f4a-218">Engedélyezi a kiszolgálón lévő összes SQL-adatbázis elérését a megadott IP-címtartomány egy tűzfalszabályt hoz létre.</span><span class="sxs-lookup"><span data-stu-id="50f4a-218">Creates a firewall rule to allow access to all SQL Databases on the server from the entered IP address range.</span></span>|
| [<span data-ttu-id="50f4a-219">az sql server tűzfal törlése</span><span class="sxs-lookup"><span data-stu-id="50f4a-219">az sql server firewall delete</span></span>](/cli/azure/sql/server/firewall-rule#delete)| <span data-ttu-id="50f4a-220">Törli a tűzfalszabályt.</span><span class="sxs-lookup"><span data-stu-id="50f4a-220">Deletes a firewall rule.</span></span>|
| [<span data-ttu-id="50f4a-221">az sql server tűzfal listájára</span><span class="sxs-lookup"><span data-stu-id="50f4a-221">az sql server firewall list</span></span>](/cli/azure/sql/server/firewall-rule#list)| <span data-ttu-id="50f4a-222">A tűzfal-szabályokat sorolja fel.</span><span class="sxs-lookup"><span data-stu-id="50f4a-222">Lists the firewall rules.</span></span>|
| [<span data-ttu-id="50f4a-223">az sql server tűzfalszabály megjelenítése</span><span class="sxs-lookup"><span data-stu-id="50f4a-223">az sql server firewall rule show</span></span>](/cli/azure/sql/server/firewall-rule#show)| <span data-ttu-id="50f4a-224">Egy tűzfalszabály részleteit jeleníti meg.</span><span class="sxs-lookup"><span data-stu-id="50f4a-224">Shows the details of a firewall rule.</span></span>|
| [<span data-ttu-id="50f4a-225">frissítés az sql server tűzfal szabály AX</span><span class="sxs-lookup"><span data-stu-id="50f4a-225">ax sql server firewall rule update</span></span>](/cli/azure/sql/server/firewall-rule#update)| <span data-ttu-id="50f4a-226">Egy tűzfalszabály frissíti.</span><span class="sxs-lookup"><span data-stu-id="50f4a-226">Updates a firewall rule.</span></span>

<span data-ttu-id="50f4a-227">Az alábbi mintakód egy kiszolgálószintű tűzfalszabályt, az Azure parancssori felület használatával:</span><span class="sxs-lookup"><span data-stu-id="50f4a-227">The following example sets a server-level firewall rule using the Azure CLI:</span></span> 

```azurecli-interactive
az sql server firewall-rule create --resource-group myResourceGroup --server $servername \
    -n AllowYourIp --start-ip-address 0.0.0.0 --end-ip-address 0.0.0.0
```

> [!TIP]
> <span data-ttu-id="50f4a-228">Például egy Azure CLI-t az adott környezetben a gyors üzembe helyezési, lásd: [létrehozása KCSA - Azure CLI](sql-database-get-started-cli.md) és [egy önálló adatbázis létrehozása és konfigurálása egy tűzfalszabályt, az Azure parancssori felület használatával](scripts/sql-database-create-and-configure-database-cli.md)</span><span class="sxs-lookup"><span data-stu-id="50f4a-228">For an Azure CLI example in the context of a quick start, see [Create DDB - Azure CLI](sql-database-get-started-cli.md) and [Create a single database and configure a firewall rule using the Azure CLI](scripts/sql-database-create-and-configure-database-cli.md)</span></span>
>

### <a name="rest-api"></a><span data-ttu-id="50f4a-229">REST API</span><span class="sxs-lookup"><span data-stu-id="50f4a-229">REST API</span></span>
| <span data-ttu-id="50f4a-230">API</span><span class="sxs-lookup"><span data-stu-id="50f4a-230">API</span></span> | <span data-ttu-id="50f4a-231">Szint</span><span class="sxs-lookup"><span data-stu-id="50f4a-231">Level</span></span> | <span data-ttu-id="50f4a-232">Leírás</span><span class="sxs-lookup"><span data-stu-id="50f4a-232">Description</span></span> |
| --- | --- | --- |
| [<span data-ttu-id="50f4a-233">List Firewall Rules</span><span class="sxs-lookup"><span data-stu-id="50f4a-233">List Firewall Rules</span></span>](https://msdn.microsoft.com/library/azure/dn505715.aspx) |<span data-ttu-id="50f4a-234">Kiszolgáló</span><span class="sxs-lookup"><span data-stu-id="50f4a-234">Server</span></span> |<span data-ttu-id="50f4a-235">Az aktuális kiszolgálószintű tűzfalszabályok megjelenítése</span><span class="sxs-lookup"><span data-stu-id="50f4a-235">Displays the current server-level firewall rules</span></span> |
| [<span data-ttu-id="50f4a-236">Create Firewall Rule</span><span class="sxs-lookup"><span data-stu-id="50f4a-236">Create Firewall Rule</span></span>](https://msdn.microsoft.com/library/azure/dn505712.aspx) |<span data-ttu-id="50f4a-237">Kiszolgáló</span><span class="sxs-lookup"><span data-stu-id="50f4a-237">Server</span></span> |<span data-ttu-id="50f4a-238">Kiszolgálószintű tűzfalszabályok létrehozása vagy frissítése</span><span class="sxs-lookup"><span data-stu-id="50f4a-238">Creates or updates server-level firewall rules</span></span> |
| [<span data-ttu-id="50f4a-239">Set Firewall Rule</span><span class="sxs-lookup"><span data-stu-id="50f4a-239">Set Firewall Rule</span></span>](https://msdn.microsoft.com/library/azure/dn505707.aspx) |<span data-ttu-id="50f4a-240">Kiszolgáló</span><span class="sxs-lookup"><span data-stu-id="50f4a-240">Server</span></span> |<span data-ttu-id="50f4a-241">Meglévő kiszolgálószintű tűzfalszabály tulajdonságainak frissítése</span><span class="sxs-lookup"><span data-stu-id="50f4a-241">Updates the properties of an existing server-level firewall rule</span></span> |
| [<span data-ttu-id="50f4a-242">Delete Firewall Rule</span><span class="sxs-lookup"><span data-stu-id="50f4a-242">Delete Firewall Rule</span></span>](https://msdn.microsoft.com/library/azure/dn505706.aspx) |<span data-ttu-id="50f4a-243">Kiszolgáló</span><span class="sxs-lookup"><span data-stu-id="50f4a-243">Server</span></span> |<span data-ttu-id="50f4a-244">Kiszolgálószintű tűzfalszabályok eltávolítása</span><span class="sxs-lookup"><span data-stu-id="50f4a-244">Removes server-level firewall rules</span></span> |

## <a name="server-level-firewall-rule-versus-a-database-level-firewall-rule"></a><span data-ttu-id="50f4a-245">Kiszolgálószintű tűzfalszabályt és egy adatbázis-adatbázisszintű tűzfalszabály</span><span class="sxs-lookup"><span data-stu-id="50f4a-245">Server-level firewall rule versus a database-level firewall rule</span></span>
<span data-ttu-id="50f4a-246">Q.</span><span class="sxs-lookup"><span data-stu-id="50f4a-246">Q.</span></span> <span data-ttu-id="50f4a-247">Egy adatbázis felhasználói kell teljesen különíteni az egy másik adatbázis?</span><span class="sxs-lookup"><span data-stu-id="50f4a-247">Should users of one database be fully isolated from another database?</span></span>   
  <span data-ttu-id="50f4a-248">Ha igen, hozzáférést adatbázis szintű tűzfalszabályok használatával.</span><span class="sxs-lookup"><span data-stu-id="50f4a-248">If yes, grant access using database-level firewall rules.</span></span> <span data-ttu-id="50f4a-249">Ezzel elkerülhető használatával kiszolgálószintű tűzfal-szabályok, amelyek lehetővé teszik az összes adatbázisra, a védelmekkel mélységének csökkentése a tűzfalon a hozzáférést.</span><span class="sxs-lookup"><span data-stu-id="50f4a-249">This avoids using server-level firewall rules, which permit access through the firewall to all databases, reducing the depth of your defenses.</span></span>   
 
<span data-ttu-id="50f4a-250">Q.</span><span class="sxs-lookup"><span data-stu-id="50f4a-250">Q.</span></span> <span data-ttu-id="50f4a-251">Az IP-címen a felhasználói hozzáférést igényelnek az összes adatbázis?</span><span class="sxs-lookup"><span data-stu-id="50f4a-251">Do users at the IP address’s need access to all databases?</span></span>   
  <span data-ttu-id="50f4a-252">Kiszolgálószintű tűzfal-szabályok használatával konfigurálnia kell a tűzfalszabályok száma csökkenthető.</span><span class="sxs-lookup"><span data-stu-id="50f4a-252">Use server-level firewall rules to reduce the number of times you must configure firewall rules.</span></span>   

<span data-ttu-id="50f4a-253">Q.</span><span class="sxs-lookup"><span data-stu-id="50f4a-253">Q.</span></span> <span data-ttu-id="50f4a-254">Személyt vagy csapatot a tűzfal-szabályok konfigurálása rendelkezik az Azure-portálon, a PowerShell vagy a REST API-en keresztüli hozzáférés?</span><span class="sxs-lookup"><span data-stu-id="50f4a-254">Does the person or team configuring the firewall rules only have access through the Azure portal, PowerShell, or the REST API?</span></span>   
  <span data-ttu-id="50f4a-255">Kiszolgálószintű tűzfal-szabályokat kell használnia.</span><span class="sxs-lookup"><span data-stu-id="50f4a-255">You must use server-level firewall rules.</span></span> <span data-ttu-id="50f4a-256">Adatbázis-szintű tűzfalszabályok csak Transact-SQL használatával konfigurálható.</span><span class="sxs-lookup"><span data-stu-id="50f4a-256">Database-level firewall rules can only be configured using Transact-SQL.</span></span>  

<span data-ttu-id="50f4a-257">Q.</span><span class="sxs-lookup"><span data-stu-id="50f4a-257">Q.</span></span> <span data-ttu-id="50f4a-258">Van személyt vagy csapatot a tűzfalszabályok beállítása magas szintű engedéllyel rendelkezik az adatbázis szintjén tiltani?</span><span class="sxs-lookup"><span data-stu-id="50f4a-258">Is the person or team configuring the firewall rules prohibited from having high-level permission at the database level?</span></span>   
  <span data-ttu-id="50f4a-259">Kiszolgálószintű tűzfal-szabályok használata.</span><span class="sxs-lookup"><span data-stu-id="50f4a-259">Use server-level firewall rules.</span></span> <span data-ttu-id="50f4a-260">Felhasználó számára legalább használatával Transact-SQL-adatbázis szintű tűzfalszabályok beállítása `CONTROL DATABASE` engedéllyel az adatbázis szintjén.</span><span class="sxs-lookup"><span data-stu-id="50f4a-260">Configuring database-level firewall rules using Transact-SQL, requires at least `CONTROL DATABASE` permission at the database level.</span></span>  

<span data-ttu-id="50f4a-261">Q.</span><span class="sxs-lookup"><span data-stu-id="50f4a-261">Q.</span></span> <span data-ttu-id="50f4a-262">Központilag kezelése tűzfalszabályok számos személyt vagy csapatot konfigurálásához, vagy a tűzfalszabályok naplózás van (akár 100 egység) adatbázisok?</span><span class="sxs-lookup"><span data-stu-id="50f4a-262">Is the person or team configuring or auditing the firewall rules, centrally managing firewall rules for many (perhaps 100s) of databases?</span></span>   
  <span data-ttu-id="50f4a-263">Ez a beállítás attól függ, a szükségleteinek és környezet.</span><span class="sxs-lookup"><span data-stu-id="50f4a-263">This selection depends upon your needs and environment.</span></span> <span data-ttu-id="50f4a-264">Előfordulhat, hogy a kiszolgálószintű tűzfal-szabályok beállítása egyszerűbb, de scripting szabályok szinten konfigurálható az adatbázis.</span><span class="sxs-lookup"><span data-stu-id="50f4a-264">Server-level firewall rules might be easier to configure, but scripting can configure rules at the database-level.</span></span> <span data-ttu-id="50f4a-265">Akkor is, ha a kiszolgálószintű tűzfal-szabályokat használ, szükség lehet az adatbázis-tűzfalszabályok, hogy megtudja, naplózási és a felhasználók `CONTROL` engedéllyel az adatbázishoz a létrehozott adatbázis szintű tűzfalszabályokat.</span><span class="sxs-lookup"><span data-stu-id="50f4a-265">And even if you use server-level firewall rules, you might need to audit the database-firewall rules, to see if users with `CONTROL` permission on the database have created database-level firewall rules.</span></span>   

<span data-ttu-id="50f4a-266">Q.</span><span class="sxs-lookup"><span data-stu-id="50f4a-266">Q.</span></span> <span data-ttu-id="50f4a-267">Mindkét kiszolgáló- és adatbázis tűzfalszabályok vegyesen használata</span><span class="sxs-lookup"><span data-stu-id="50f4a-267">Can I use a mix of both server-level and database-level firewall rules?</span></span>   
  <span data-ttu-id="50f4a-268">Igen.</span><span class="sxs-lookup"><span data-stu-id="50f4a-268">Yes.</span></span> <span data-ttu-id="50f4a-269">Egyes felhasználók, rendszergazdák például módosítania kell kiszolgálószintű tűzfal-szabályokat.</span><span class="sxs-lookup"><span data-stu-id="50f4a-269">Some users, such as administrators might need server-level firewall rules.</span></span> <span data-ttu-id="50f4a-270">Más felhasználók, például egy adatbázis-alkalmazás felhasználói adatbázis-szintű tűzfalszabályok módosítania kell.</span><span class="sxs-lookup"><span data-stu-id="50f4a-270">Other users, such as users of a database application, might need database-level firewall rules.</span></span>   

## <a name="troubleshooting-the-database-firewall"></a><span data-ttu-id="50f4a-271">Az adatbázistűzfal hibaelhárítása</span><span class="sxs-lookup"><span data-stu-id="50f4a-271">Troubleshooting the database firewall</span></span>
<span data-ttu-id="50f4a-272">A következő szempontokat vegye figyelembe, ha a Microsoft Azure SQL Database szolgáltatáshoz való hozzáférése nem a várt módon működik:</span><span class="sxs-lookup"><span data-stu-id="50f4a-272">Consider the following points when access to the Microsoft Azure SQL Database service does not behave as you expect:</span></span>

* <span data-ttu-id="50f4a-273">**Helyi tűzfal konfigurációja:** Mielőtt a számítógépe hozzáférne az Azure SQL Database szolgáltatáshoz, lehet, hogy létre kell hoznia egy tűzfalkivételt a számítógépén az 1433-as TCP-port számára.</span><span class="sxs-lookup"><span data-stu-id="50f4a-273">**Local firewall configuration:** Before your computer can access Azure SQL Database, you may need to create a firewall exception on your computer for TCP port 1433.</span></span> <span data-ttu-id="50f4a-274">Ha az Azure-felhő határain belül létesít kapcsolatokat, előfordulhat, hogy további portokat is meg kell nyitnia.</span><span class="sxs-lookup"><span data-stu-id="50f4a-274">If you are making connections inside the Azure cloud boundary, you may have to open additional ports.</span></span> <span data-ttu-id="50f4a-275">További információkért lásd: a **SQL-adatbázis: kívül és belül** szakasza [kívüli ADO.NET 4.5 és az SQL-adatbázis 1433-as portokon](sql-database-develop-direct-route-ports-adonet-v12.md).</span><span class="sxs-lookup"><span data-stu-id="50f4a-275">For more information, see the **SQL Database: Outside vs inside** section of [Ports beyond 1433 for ADO.NET 4.5 and SQL Database](sql-database-develop-direct-route-ports-adonet-v12.md).</span></span>
* <span data-ttu-id="50f4a-276">**Hálózati címfordítás (NAT):** A NAT miatt a számítógépe által az Azure SQL Database szolgáltatáshoz való csatlakozáshoz használt IP-cím eltérhet a számítógép IP-konfigurációs beállításai között megjelenő IP-címtől.</span><span class="sxs-lookup"><span data-stu-id="50f4a-276">**Network address translation (NAT):** Due to NAT, the IP address used by your computer to connect to Azure SQL Database may be different than the IP address shown in your computer IP configuration settings.</span></span> <span data-ttu-id="50f4a-277">A számítógép által az Azure-hoz való csatlakozáshoz használt IP-cím megtekintéséhez jelentkezzen be a portálra, és lépjen az adatbázist futtató kiszolgáló **Konfigurálás** lapjára.</span><span class="sxs-lookup"><span data-stu-id="50f4a-277">To view the IP address your computer is using to connect to Azure, log in to the portal and navigate to the **Configure** tab on the server that hosts your database.</span></span> <span data-ttu-id="50f4a-278">Az **Engedélyezett IP-címek** szakasz alatt jelenik meg az **Ügyfél aktuális IP-címe**.</span><span class="sxs-lookup"><span data-stu-id="50f4a-278">Under the **Allowed IP Addresses** section, the **Current Client IP Address** is displayed.</span></span> <span data-ttu-id="50f4a-279">Kattintson a **Hozzáadás** lehetőségre az **Engedélyezett IP-címek** között, ha szeretné engedélyezni a számítógép számára a kiszolgáló elérését.</span><span class="sxs-lookup"><span data-stu-id="50f4a-279">Click **Add** to the **Allowed IP Addresses** to allow this computer to access the server.</span></span>
* <span data-ttu-id="50f4a-280">**Az engedélyezési lista módosításai még nem léptek érvénybe:** Az Azure SQL Database tűzfalkonfigurációján végzett módosítások érvénybe lépéséig akár öt perc is eltelhet.</span><span class="sxs-lookup"><span data-stu-id="50f4a-280">**Changes to the allow list have not taken effect yet:** There may be as much as a five-minute delay for changes to the Azure SQL Database firewall configuration to take effect.</span></span>
* <span data-ttu-id="50f4a-281">**A bejelentkezés nem engedélyezett, vagy helytelen jelszó lett használva:** Ha egy bejelentkezés nem rendelkezik engedélyekkel az Azure SQL Database-kiszolgálón, vagy a használt jelszó érvénytelen, akkor a rendszer megtagadja az Azure SQL Database-kiszolgálóhoz való csatlakozást.</span><span class="sxs-lookup"><span data-stu-id="50f4a-281">**The login is not authorized or an incorrect password was used:** If a login does not have permissions on the Azure SQL Database server or the password used is incorrect, the connection to the Azure SQL Database server is denied.</span></span> <span data-ttu-id="50f4a-282">Egy tűzfalbeállítás létrehozása lehetővé teszi az ügyfelek számára a kiszolgálóhoz való csatlakozás megkísérlését, azonban minden egyes ügyfélnek meg kell adnia a szükséges biztonsági hitelesítő adatokat.</span><span class="sxs-lookup"><span data-stu-id="50f4a-282">Creating a firewall setting only provides clients with an opportunity to attempt connecting to your server; each client must provide the necessary security credentials.</span></span> <span data-ttu-id="50f4a-283">A bejelentkezések előkészítésével kapcsolatos további információkért lásd az adatbázisok, bejelentkezések és felhasználók Azure SQL Database-ben történő kezelésével foglalkozó cikket.</span><span class="sxs-lookup"><span data-stu-id="50f4a-283">For more information about preparing logins, see Managing Databases, Logins, and Users in Azure SQL Database.</span></span>
* <span data-ttu-id="50f4a-284">**Dinamikus IP-cím**: Ha az internetkapcsolata dinamikus IP-címkezeléssel rendelkezik, és problémákat okoz a tűzfalon való átjutás, próbálja ki a következő megoldások valamelyikét:</span><span class="sxs-lookup"><span data-stu-id="50f4a-284">**Dynamic IP address:** If you have an Internet connection with dynamic IP addressing and you are having trouble getting through the firewall, you could try one of the following solutions:</span></span>
  
  * <span data-ttu-id="50f4a-285">Kérje el az internetszolgáltatójától az Azure SQL Database-kiszolgáló eléréséhez használt ügyfélszámítógépeihez társított IP-címtartományt, majd adja meg ezt az IP-címtartományt egy tűzfalszabályként.</span><span class="sxs-lookup"><span data-stu-id="50f4a-285">Ask your Internet Service Provider (ISP) for the IP address range assigned to your client computers that access the Azure SQL Database server, and then add the IP address range as a firewall rule.</span></span>
  * <span data-ttu-id="50f4a-286">Állítson be statikus IP-címeket az ügyfélszámítógépei számára, majd adja meg az IP-címeket tűzfalszabályokként.</span><span class="sxs-lookup"><span data-stu-id="50f4a-286">Get static IP addressing instead for your client computers, and then add the IP addresses as firewall rules.</span></span>

## <a name="next-steps"></a><span data-ttu-id="50f4a-287">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="50f4a-287">Next steps</span></span>

- <span data-ttu-id="50f4a-288">Az adatbázis és a kiszolgálószintű tűzfalszabály létrehozása a gyors üzembe helyezési, lásd: [hozzon létre egy Azure SQL-adatbázis](sql-database-get-started-portal.md).</span><span class="sxs-lookup"><span data-stu-id="50f4a-288">For a quick start on creating a database and a server-level firewall rule, see [Create an Azure SQL database](sql-database-get-started-portal.md).</span></span>
- <span data-ttu-id="50f4a-289">Ha nyílt forráskódú vagy külső alkalmazásokból szeretne kapcsolódni az Azure SQL Database-hez, lásd az [SQL Database gyors üzembe helyezési ügyfélkódmintáival](https://msdn.microsoft.com/library/azure/ee336282.aspx) foglalkozó cikket.</span><span class="sxs-lookup"><span data-stu-id="50f4a-289">For help in connecting to an Azure SQL database from open source or third-party applications, see [Client quick-start code samples to SQL Database](https://msdn.microsoft.com/library/azure/ee336282.aspx).</span></span>
- <span data-ttu-id="50f4a-290">Kapcsolatban további portok megnyitásához szükséges információk, a **SQL-adatbázis: kívül és belül** szakasza [portok túl az 1433-as ADO.NET 4.5 és az SQL-adatbázis](sql-database-develop-direct-route-ports-adonet-v12.md)</span><span class="sxs-lookup"><span data-stu-id="50f4a-290">For information on additional ports that you may need to open, see the **SQL Database: Outside vs inside** section of [Ports beyond 1433 for ADO.NET 4.5 and SQL Database](sql-database-develop-direct-route-ports-adonet-v12.md)</span></span>
- <span data-ttu-id="50f4a-291">Az Azure SQL Database biztonsági áttekintését lásd: [biztonságossá tétele az adatbázis](sql-database-security-overview.md)</span><span class="sxs-lookup"><span data-stu-id="50f4a-291">For an overview of Azure SQL Database security, see [Securing your database](sql-database-security-overview.md)</span></span>

<!--Image references-->
[1]: ./media/sql-database-firewall-configure/sqldb-firewall-1.png
