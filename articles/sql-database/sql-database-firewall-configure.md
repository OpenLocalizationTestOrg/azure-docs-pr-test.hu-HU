---
title: "SQL Database tűzfalszabályai aaaAzure |} Microsoft Docs"
description: "Ismerje meg, hogyan tooconfigure SQL adatbázis-kiszolgáló- és adatbázis tűzfal-szabályok toomanage hozzáféréssel rendelkező tűzfal."
keywords: "adatbázistűzfal"
services: sql-database
documentationcenter: 
author: BYHAM
manager: jhubbard
editor: cgronlun
tags: 
ms.assetid: ac57f84c-35c3-4975-9903-241c8059011e
ms.service: sql-database
ms.custom: security
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-management
ms.date: 04/10/2017
ms.author: rickbyh
ms.openlocfilehash: 6a8cdf629d0d0e55421a5e9f9b894a21371be568
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/06/2017
---
# <a name="azure-sql-database-server-level-and-database-level-firewall-rules"></a><span data-ttu-id="48d6f-104">Az Azure SQL Database kiszolgáló- és adatbázis tűzfalszabályok</span><span class="sxs-lookup"><span data-stu-id="48d6f-104">Azure SQL Database server-level and database-level firewall rules</span></span> 

<span data-ttu-id="48d6f-105">A Microsoft Azure SQL Database egy relációs adatbázis-szolgáltatást nyújt az Azure és egyéb internetalapú alkalmazások számára.</span><span class="sxs-lookup"><span data-stu-id="48d6f-105">Microsoft Azure SQL Database provides a relational database service for Azure and other Internet-based applications.</span></span> <span data-ttu-id="48d6f-106">az adatok védelméhez toohelp, tűzfalak tooyour adatbázis-kiszolgáló minden hozzáférés tiltása, amíg megadhatja, hogy mely számítógépek rendelkeznek engedéllyel.</span><span class="sxs-lookup"><span data-stu-id="48d6f-106">toohelp protect your data, firewalls prevent all access tooyour database server until you specify which computers have permission.</span></span> <span data-ttu-id="48d6f-107">hello tűzfal engedélyezi a hozzáférést toodatabases származó IP-cím az egyes kérelmek hello alapján.</span><span class="sxs-lookup"><span data-stu-id="48d6f-107">hello firewall grants access toodatabases based on hello originating IP address of each request.</span></span>

## <a name="overview"></a><span data-ttu-id="48d6f-108">Áttekintés</span><span class="sxs-lookup"><span data-stu-id="48d6f-108">Overview</span></span>

<span data-ttu-id="48d6f-109">Kezdetben minden Transact-SQL hozzáférés tooyour Azure SQL server hello tűzfal blokkolja.</span><span class="sxs-lookup"><span data-stu-id="48d6f-109">Initially, all Transact-SQL access tooyour Azure SQL server is blocked by hello firewall.</span></span> <span data-ttu-id="48d6f-110">az Azure SQL server használatával toobegin meg kell adnia egy vagy több kiszolgálószintű tűzfalszabályt, amely engedélyezi hozzáférés tooyour Azure SQL-kiszolgálót.</span><span class="sxs-lookup"><span data-stu-id="48d6f-110">toobegin using your Azure SQL server, you must specify one or more server-level firewall rules that enable access tooyour Azure SQL server.</span></span> <span data-ttu-id="48d6f-111">Hello tűzfal szabályok toospecify mely IP-címtartományt, az Internet engedélyezettek hello használja, és hogy az Azure-alkalmazások megpróbálhatnak tooconnect tooyour Azure SQL server.</span><span class="sxs-lookup"><span data-stu-id="48d6f-111">Use hello firewall rules toospecify which IP address ranges from hello Internet are allowed, and whether Azure applications can attempt tooconnect tooyour Azure SQL server.</span></span>

<span data-ttu-id="48d6f-112">tooselectively grant hozzáférés toojust hello adatbázisokat az Azure SQL Server egyik, hello szükséges adatbázis adatbázis-szintű szabályt kell létrehoznia.</span><span class="sxs-lookup"><span data-stu-id="48d6f-112">tooselectively grant access toojust one of hello databases in your Azure SQL server, you must create a database-level rule for hello required database.</span></span> <span data-ttu-id="48d6f-113">Adjon meg egy IP-címtartomány a hello adatbázishoz tartozó tűzfalszabály, amely hello IP-címtartományt megadott hello kiszolgálószintű tűzfalszabályt, és győződjön meg arról, hogy hello ügyfél IP-címe hello hello adatbázis szintű szabályban megadott hello közé esik-e.</span><span class="sxs-lookup"><span data-stu-id="48d6f-113">Specify an IP address range for hello database firewall rule that is beyond hello IP address range specified in hello server-level firewall rule, and ensure that hello IP address of hello client falls in hello range specified in hello database-level rule.</span></span>

<span data-ttu-id="48d6f-114">A kapcsolódási kísérletek hello Internet és Azure kell először telnie hello tűzfalon keresztül érik az Azure SQL server vagy SQL-adatbázis, ahogy az ábra a következő hello:</span><span class="sxs-lookup"><span data-stu-id="48d6f-114">Connection attempts from hello Internet and Azure must first pass through hello firewall before they can reach your Azure SQL server or SQL Database, as shown in hello following diagram:</span></span>

   ![A tűzfal-konfigurációt bemutató ábra.][1]

* <span data-ttu-id="48d6f-116">**Kiszolgálószintű tűzfal-szabályokat:** ezek a szabályok engedélyezése az ügyfelek tooaccess a teljes Azure SQL server, ez azt jelenti, hogy az összes hello adatbázis belül hello azonos logikai kiszolgáló.</span><span class="sxs-lookup"><span data-stu-id="48d6f-116">**Server-level firewall rules:** These rules enable clients tooaccess your entire Azure SQL server, that is, all hello databases within hello same logical server.</span></span> <span data-ttu-id="48d6f-117">Ezek a szabályok be vannak tárolva hello **fő** adatbázis.</span><span class="sxs-lookup"><span data-stu-id="48d6f-117">These rules are stored in hello **master** database.</span></span> <span data-ttu-id="48d6f-118">Kiszolgálószintű tűzfal-szabályokat hello portál használatával, vagy a Transact-SQL-utasítások segítségével konfigurálható.</span><span class="sxs-lookup"><span data-stu-id="48d6f-118">Server-level firewall rules can be configured by using hello portal or by using Transact-SQL statements.</span></span> <span data-ttu-id="48d6f-119">hello Azure-portálon vagy a PowerShell használatával toocreate kiszolgálószintű tűzfal szabályokat, a hello előfizetés tulajdonosa vagy egy előfizetés közreműködői kell lennie.</span><span class="sxs-lookup"><span data-stu-id="48d6f-119">toocreate server-level firewall rules using hello Azure portal or PowerShell, you must be hello subscription owner or a subscription contributor.</span></span> <span data-ttu-id="48d6f-120">toocreate egy kiszolgálószintű tűzfalszabályt Transact-SQL használatával, csatlakoznia kell SQL Database-példányt toohello hello kiszolgálószintű fő bejelentkezéssel vagy hello Azure Active Directory-rendszergazda (ami azt jelenti, hogy egy kiszolgálószintű tűzfalszabályt először létre kell hozni a felhasználó Azure-szintű engedélyekkel).</span><span class="sxs-lookup"><span data-stu-id="48d6f-120">toocreate a server-level firewall rule using Transact-SQL, you must connect toohello SQL Database instance as hello server-level principal login or hello Azure Active Directory administrator (which means that a server-level firewall rule must first be created by a user with Azure-level permissions).</span></span>
* <span data-ttu-id="48d6f-121">**Adatbázis-adatbázisszintű tűzfalszabályok:** ezek a szabályok engedélyezése az ügyfelek tooaccess bizonyos (biztonságos) adatbázisok hello belül azonos logikai kiszolgáló.</span><span class="sxs-lookup"><span data-stu-id="48d6f-121">**Database-level firewall rules:** These rules enable clients tooaccess certain (secure) databases within hello same logical server.</span></span> <span data-ttu-id="48d6f-122">Hozhatja létre ezeket a szabályokat az egyes adatbázisok (beleértve a hello **fő** database0) és tárolásuk hello egyes adatbázisokat.</span><span class="sxs-lookup"><span data-stu-id="48d6f-122">You can create these rules for each database (including hello **master** database0) and they are stored in hello individual databases.</span></span> <span data-ttu-id="48d6f-123">Adatbázis-szintű tűzfalszabályok csak Transact-SQL-utasítások segítségével konfigurálhatja, és csak a beállítása után hello első kiszolgálószintű tűzfal.</span><span class="sxs-lookup"><span data-stu-id="48d6f-123">Database-level firewall rules can only be configured by using Transact-SQL statements and only after you have configured hello first server-level firewall.</span></span> <span data-ttu-id="48d6f-124">Ha az IP-címtartományok hello adatbázis-adatbázisszintű tűzfalszabály, amely megadott hello kiszolgálószintű tűzfalszabály külső hello tartomány ad meg, csak ezek az ügyfelek IP-címmel rendelkező hello adatbázis szintű tartományban hozzáférhessen hello adatbázishoz.</span><span class="sxs-lookup"><span data-stu-id="48d6f-124">If you specify an IP address range in hello database-level firewall rule that is outside hello range specified in hello server-level firewall rule, only those clients that have IP addresses in hello database-level range can access hello database.</span></span> <span data-ttu-id="48d6f-125">Egy adatbázishoz legfeljebb 128 adatbázisszintű tűzfalszabály adható meg.</span><span class="sxs-lookup"><span data-stu-id="48d6f-125">You can have a maximum of 128 database-level firewall rules for a database.</span></span> <span data-ttu-id="48d6f-126">Adatbázis-szintű tűzfalszabályok fő- és felhasználói adatbázisok csak hozható létre és kezelhetők a Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="48d6f-126">Database-level firewall rules for master and user databases can only be created and managed through Transact-SQL.</span></span> <span data-ttu-id="48d6f-127">Az adatbázis-szintű tűzfalszabályok beállítása további információkért lásd: hello példa későbbi részében a következő cikket, és tekintse meg [sp_set_database_firewall_rule (Azure SQL-adatbázisok)](https://msdn.microsoft.com/library/dn270010.aspx).</span><span class="sxs-lookup"><span data-stu-id="48d6f-127">For more information on configuring database-level firewall rules, see hello example later in this article and see [sp_set_database_firewall_rule (Azure SQL Databases)](https://msdn.microsoft.com/library/dn270010.aspx).</span></span>

<span data-ttu-id="48d6f-128">**Javaslat:** Microsoft azt javasolja, hogy adatbázis-szintű tűzfalszabályok segítségével amikor csak lehetséges tooenhance biztonsági és toomake az adatbázis több hordozható.</span><span class="sxs-lookup"><span data-stu-id="48d6f-128">**Recommendation:** Microsoft recommends using database-level firewall rules whenever possible tooenhance security and toomake your database more portable.</span></span> <span data-ttu-id="48d6f-129">Kiszolgálószintű tűzfal-szabályok használata a rendszergazdák számára, és ha sok adatbázis, amely rendelkezik hello ugyanazt a hozzáférési követelményeket, és nem szeretné, minden adatbázisnak külön-külön konfigurálása toospend idő.</span><span class="sxs-lookup"><span data-stu-id="48d6f-129">Use server-level firewall rules for administrators and when you have many databases that have hello same access requirements and you don't want toospend time configuring each database individually.</span></span>

> [!Note]
> <span data-ttu-id="48d6f-130">Az üzletmenet folytonossága hello környezetben hordozható adatbázisokkal kapcsolatos információk: [hitelesítésének követelményei a vész-helyreállítási](sql-database-geo-replication-security-config.md).</span><span class="sxs-lookup"><span data-stu-id="48d6f-130">For information about portable databases in hello context of business continuity, see [Authentication requirements for disaster recovery](sql-database-geo-replication-security-config.md).</span></span>
>

### <a name="connecting-from-hello-internet"></a><span data-ttu-id="48d6f-131">A hello Internet csatlakoztatása</span><span class="sxs-lookup"><span data-stu-id="48d6f-131">Connecting from hello Internet</span></span>

<span data-ttu-id="48d6f-132">Amikor egy számítógép megpróbál tooconnect tooyour adatbázis-kiszolgálójának hello Internet, hello tűzfal először ellenőrzi hello származó hello adatbázis szintű adatbázisra vonatkozó tűzfalszabályok, hello hello kapcsolatot igénylő hello kérelmet IP-címe:</span><span class="sxs-lookup"><span data-stu-id="48d6f-132">When a computer attempts tooconnect tooyour database server from hello Internet, hello firewall first checks hello originating IP address of hello request against hello database-level firewall rules, for hello database that hello connection is requesting:</span></span>

* <span data-ttu-id="48d6f-133">Ha hello IP-cím hello kérelem hello adatbázis szintű tűzfalszabályok megadott hello tartományok egyikébe esik, hello kapcsolat toohello hello szabályt tartalmazó SQL-adatbázis kapnak.</span><span class="sxs-lookup"><span data-stu-id="48d6f-133">If hello IP address of hello request is within one of hello ranges specified in hello database-level firewall rules, hello connection is granted toohello SQL Database that contains hello rule.</span></span>
* <span data-ttu-id="48d6f-134">Ha hello IP-cím hello kérelem nem hello adatbázis-adatbázisszintű tűzfalszabály megadott hello tartományok egyikébe esik, hello kiszolgálószintű tűzfal-szabályokat a rendszer ellenőrzi.</span><span class="sxs-lookup"><span data-stu-id="48d6f-134">If hello IP address of hello request is not within one of hello ranges specified in hello database-level firewall rule, hello server-level firewall rules are checked.</span></span> <span data-ttu-id="48d6f-135">Ha hello IP-cím hello kérelem hello kiszolgálószintű tűzfal szabályokban megadott hello tartományok egyikébe esik, hello kapcsolat kapnak.</span><span class="sxs-lookup"><span data-stu-id="48d6f-135">If hello IP address of hello request is within one of hello ranges specified in hello server-level firewall rules, hello connection is granted.</span></span> <span data-ttu-id="48d6f-136">Kiszolgálószintű tűzfal-szabályokat alkalmazni tooall SQL-adatbázisok hello Azure SQL-kiszolgálón.</span><span class="sxs-lookup"><span data-stu-id="48d6f-136">Server-level firewall rules apply tooall SQL databases on hello Azure SQL server.</span></span>  
* <span data-ttu-id="48d6f-137">Ha hello IP-cím hello kérelem nincs belül hello tartományok hello adatbázis szintű valamelyikében vagy megadott kiszolgálószintű tűzfal-szabályok, hello kapcsolódási kérelem sikertelen lesz.</span><span class="sxs-lookup"><span data-stu-id="48d6f-137">If hello IP address of hello request is not within hello ranges specified in any of hello database-level or server-level firewall rules, hello connection request fails.</span></span>

> [!NOTE]
> <span data-ttu-id="48d6f-138">az Azure SQL Database tooaccess a helyi számítógépen, győződjön meg arról, a hálózati és a helyi számítógép hello tűzfala lehetővé teszi, hogy a 1433-as TCP-port kimenő kommunikációra.</span><span class="sxs-lookup"><span data-stu-id="48d6f-138">tooaccess Azure SQL Database from your local computer, ensure hello firewall on your network and local computer allows outgoing communication on TCP port 1433.</span></span>
> 

### <a name="connecting-from-azure"></a><span data-ttu-id="48d6f-139">Csatlakozás az Azure-ból</span><span class="sxs-lookup"><span data-stu-id="48d6f-139">Connecting from Azure</span></span>
<span data-ttu-id="48d6f-140">az Azure tooconnect tooyour Azure SQL server Azure-kapcsolatok tooallow alkalmazások engedélyezve kell lennie.</span><span class="sxs-lookup"><span data-stu-id="48d6f-140">tooallow applications from Azure tooconnect tooyour Azure SQL server, Azure connections must be enabled.</span></span> <span data-ttu-id="48d6f-141">Amikor egy alkalmazás az Azure-ból próbál tooconnect tooyour adatbázis-kiszolgáló, a hello tűzfal ellenőrzi, hogy az Azure-kapcsolatok engedélyezve legyenek-e.</span><span class="sxs-lookup"><span data-stu-id="48d6f-141">When an application from Azure attempts tooconnect tooyour database server, hello firewall verifies that Azure connections are allowed.</span></span> <span data-ttu-id="48d6f-142">A tűzfal beállítása a kezdő és záró cím egyenlő too0.0.0.0 azt jelzi, hogy ezek a kapcsolatok számára engedélyezett.</span><span class="sxs-lookup"><span data-stu-id="48d6f-142">A firewall setting with starting and ending address equal too0.0.0.0 indicates these connections are allowed.</span></span> <span data-ttu-id="48d6f-143">Hello kapcsolódási kísérlet nem engedélyezett, ha a hello kérelem nem éri el hello Azure SQL Database-kiszolgálóhoz.</span><span class="sxs-lookup"><span data-stu-id="48d6f-143">If hello connection attempt is not allowed, hello request does not reach hello Azure SQL Database server.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="48d6f-144">Ez a beállítás állítja be a hello tűzfal tooallow más ügyfelek hello előfizetések az Azure többek között a következőket kapcsolatoktól összes kapcsolatokat.</span><span class="sxs-lookup"><span data-stu-id="48d6f-144">This option configures hello firewall tooallow all connections from Azure including connections from hello subscriptions of other customers.</span></span> <span data-ttu-id="48d6f-145">Ha ezzel a beállítással, a bejelentkezési győződjön meg arról, valamint a felhasználói engedélyek korlátozása hozzáférés tooonly engedéllyel rendelkező felhasználók.</span><span class="sxs-lookup"><span data-stu-id="48d6f-145">When selecting this option, make sure your login and user permissions limit access tooonly authorized users.</span></span>
> 

## <a name="creating-and-managing-firewall-rules"></a><span data-ttu-id="48d6f-146">Tűzfal-szabályok létrehozását és kezelését</span><span class="sxs-lookup"><span data-stu-id="48d6f-146">Creating and managing firewall rules</span></span>
<span data-ttu-id="48d6f-147">hello első kiszolgálószintű tűzfal beállítás hello segítségével hozhatók létre [Azure-portálon](https://portal.azure.com/) vagy programozott módon [Azure PowerShell](https://msdn.microsoft.com/library/azure/dn546724.aspx), [Azure CLI](/cli/azure/sql/server/firewall-rule#create), vagy hello [REST API-t](https://msdn.microsoft.com/library/azure/dn505712.aspx).</span><span class="sxs-lookup"><span data-stu-id="48d6f-147">hello first server-level firewall setting can be created using hello [Azure portal](https://portal.azure.com/) or programmatically using [Azure PowerShell](https://msdn.microsoft.com/library/azure/dn546724.aspx), [Azure CLI](/cli/azure/sql/server/firewall-rule#create), or hello [REST API](https://msdn.microsoft.com/library/azure/dn505712.aspx).</span></span> <span data-ttu-id="48d6f-148">A további kiszolgálószintű tűzfalszabályok ugyanezekkel a módszerekkel, vagy a Transact-SQL-lel hozhatók létre és kezelhetők.</span><span class="sxs-lookup"><span data-stu-id="48d6f-148">Subsequent server-level firewall rules can be created and managed using these methods, and through Transact-SQL.</span></span> 

> [!IMPORTANT]
> <span data-ttu-id="48d6f-149">Adatbázis-szintű tűzfalszabályok csak hozhatók létre, és a Transact-SQL használatával kezelhetők.</span><span class="sxs-lookup"><span data-stu-id="48d6f-149">Database-level firewall rules can only be created and managed using Transact-SQL.</span></span> 
>

<span data-ttu-id="48d6f-150">tooimprove teljesítmény, a kiszolgálószintű tűzfal szabályok ideiglenesen gyorsítótárba kerüljenek-e hello adatbázis szintjén.</span><span class="sxs-lookup"><span data-stu-id="48d6f-150">tooimprove performance, server-level firewall rules are temporarily cached at hello database level.</span></span> <span data-ttu-id="48d6f-151">toorefresh hello gyorsítótár, lásd: [DBCC FLUSHAUTHCACHE](https://msdn.microsoft.com/library/mt627793.aspx).</span><span class="sxs-lookup"><span data-stu-id="48d6f-151">toorefresh hello cache, see [DBCC FLUSHAUTHCACHE](https://msdn.microsoft.com/library/mt627793.aspx).</span></span> 

> [!TIP]
> <span data-ttu-id="48d6f-152">Használhat [SQL Database Auditing](sql-database-auditing.md) tooaudit kiszolgáló- és adatbázis tűzfal módosításokat.</span><span class="sxs-lookup"><span data-stu-id="48d6f-152">You can use [SQL Database Auditing](sql-database-auditing.md) tooaudit server-level and database-level firewall changes.</span></span>
>

### <a name="azure-portal"></a><span data-ttu-id="48d6f-153">Azure Portal</span><span class="sxs-lookup"><span data-stu-id="48d6f-153">Azure portal</span></span>

<span data-ttu-id="48d6f-154">tooset egy kiszolgálószintű tűzfalszabályt hello Azure-portálon, vagy lépjen toohello – áttekintés oldalra Azure SQL adatbázis vagy hello áttekintése lapon a Azure Database logikai kiszolgáló.</span><span class="sxs-lookup"><span data-stu-id="48d6f-154">tooset a server-level firewall rule in hello Azure portal, you can either go toohello Overview page for your Azure SQL database or hello Overview page for your Azure Database logical server.</span></span>

> [!TIP]
> <span data-ttu-id="48d6f-155">Az oktatóanyagok esetén lásd: [Azure-portálon hozzon létre egy DB használatával hello](sql-database-get-started-portal.md).</span><span class="sxs-lookup"><span data-stu-id="48d6f-155">For a tutorial, see [Create a DB using hello Azure portal](sql-database-get-started-portal.md).</span></span>
>

<span data-ttu-id="48d6f-156">**Az adatbázis – áttekintés oldalra**</span><span class="sxs-lookup"><span data-stu-id="48d6f-156">**From database overview page**</span></span>

1. <span data-ttu-id="48d6f-157">tooset egy kiszolgálószintű tűzfalszabályt hello adatbázis – áttekintés lapon kattintson a **kiszolgáló tűzfalának beállítása** hello eszköztáron látható hello kép a következő módon: hello **tűzfalbeállítások** hello SQL lapja Megnyílik az adatbázis-kiszolgáló.</span><span class="sxs-lookup"><span data-stu-id="48d6f-157">tooset a server-level firewall rule from hello database overview page, click **Set server firewall** on hello toolbar as shown in hello following image: hello **Firewall settings** page for hello SQL Database server opens.</span></span>

      ![kiszolgálói tűzfalszabály](./media/sql-database-get-started-portal/server-firewall-rule.png) 

2. <span data-ttu-id="48d6f-159">Kattintson a **ügyfél IP-cím hozzáadása** hello eszköztár tooadd hello IP-cím hello számítógép jelenleg használ, és kattintson a **mentése**.</span><span class="sxs-lookup"><span data-stu-id="48d6f-159">Click **Add client IP** on hello toolbar tooadd hello IP address of hello computer you are currently using and then click **Save**.</span></span> <span data-ttu-id="48d6f-160">A rendszer létrehoz egy kiszolgálószintű tűzfalszabályt az aktuális IP-címhez.</span><span class="sxs-lookup"><span data-stu-id="48d6f-160">A server-level firewall rule is created for your current IP address.</span></span>

      ![kiszolgálótűzfal-szabály beállítása](./media/sql-database-get-started-portal/server-firewall-rule-set.png) 

<span data-ttu-id="48d6f-162">**A kiszolgáló – áttekintés oldalra**</span><span class="sxs-lookup"><span data-stu-id="48d6f-162">**From server overview page**</span></span>

<span data-ttu-id="48d6f-163">hello áttekintő lapjára jut a kiszolgáló megnyílik, teljes mértékben hello megjelenítő minősített kiszolgáló neve (például **mynewserver20170403.database.windows.net**) és további konfigurációs lehetőségeket.</span><span class="sxs-lookup"><span data-stu-id="48d6f-163">hello overview page for your server opens, showing you hello fully qualified server name (such as **mynewserver20170403.database.windows.net**) and provides options for further configuration.</span></span>

1. <span data-ttu-id="48d6f-164">tooset egy kiszolgálószintű szabály áttekintése lapon kattintson a **tűzfal** hello bal oldali menüben a beállítások, amint az a következő kép hello:</span><span class="sxs-lookup"><span data-stu-id="48d6f-164">tooset a server-level rule from server overview page, click **Firewall** in hello left-hand menu under Settings as showed in hello following image:</span></span> 

     ![a logikai kiszolgáló – áttekintés](./media/sql-database-migrate-your-sql-server-database/logical-server-overview.png)

2. <span data-ttu-id="48d6f-166">Kattintson a **ügyfél IP-cím hozzáadása** hello eszköztár tooadd hello IP-cím hello számítógép jelenleg használ, és kattintson a **mentése**.</span><span class="sxs-lookup"><span data-stu-id="48d6f-166">Click **Add client IP** on hello toolbar tooadd hello IP address of hello computer you are currently using and then click **Save**.</span></span> <span data-ttu-id="48d6f-167">A rendszer létrehoz egy kiszolgálószintű tűzfalszabályt az aktuális IP-címhez.</span><span class="sxs-lookup"><span data-stu-id="48d6f-167">A server-level firewall rule is created for your current IP address.</span></span>

     ![kiszolgálótűzfal-szabály beállítása](./media/sql-database-migrate-your-sql-server-database/server-firewall-rule-set.png)

### <a name="transact-sql"></a><span data-ttu-id="48d6f-169">Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="48d6f-169">Transact-SQL</span></span>
| <span data-ttu-id="48d6f-170">Katalógusnézet vagy tárolt eljárás</span><span class="sxs-lookup"><span data-stu-id="48d6f-170">Catalog View or Stored Procedure</span></span> | <span data-ttu-id="48d6f-171">Szint</span><span class="sxs-lookup"><span data-stu-id="48d6f-171">Level</span></span> | <span data-ttu-id="48d6f-172">Leírás</span><span class="sxs-lookup"><span data-stu-id="48d6f-172">Description</span></span> |
| --- | --- | --- |
| [<span data-ttu-id="48d6f-173">sys.firewall_rules</span><span class="sxs-lookup"><span data-stu-id="48d6f-173">sys.firewall_rules</span></span>](https://msdn.microsoft.com/library/dn269980.aspx) |<span data-ttu-id="48d6f-174">Kiszolgáló</span><span class="sxs-lookup"><span data-stu-id="48d6f-174">Server</span></span> |<span data-ttu-id="48d6f-175">Megjeleníti az aktuális kiszolgálószintű tűzfal-szabályokat hello</span><span class="sxs-lookup"><span data-stu-id="48d6f-175">Displays hello current server-level firewall rules</span></span> |
| [<span data-ttu-id="48d6f-176">sp_set_firewall_rule</span><span class="sxs-lookup"><span data-stu-id="48d6f-176">sp_set_firewall_rule</span></span>](https://msdn.microsoft.com/library/dn270017.aspx) |<span data-ttu-id="48d6f-177">Kiszolgáló</span><span class="sxs-lookup"><span data-stu-id="48d6f-177">Server</span></span> |<span data-ttu-id="48d6f-178">Kiszolgálószintű tűzfalszabályok létrehozása vagy frissítése</span><span class="sxs-lookup"><span data-stu-id="48d6f-178">Creates or updates server-level firewall rules</span></span> |
| [<span data-ttu-id="48d6f-179">sp_delete_firewall_rule</span><span class="sxs-lookup"><span data-stu-id="48d6f-179">sp_delete_firewall_rule</span></span>](https://msdn.microsoft.com/library/dn270024.aspx) |<span data-ttu-id="48d6f-180">Kiszolgáló</span><span class="sxs-lookup"><span data-stu-id="48d6f-180">Server</span></span> |<span data-ttu-id="48d6f-181">Kiszolgálószintű tűzfalszabályok eltávolítása</span><span class="sxs-lookup"><span data-stu-id="48d6f-181">Removes server-level firewall rules</span></span> |
| [<span data-ttu-id="48d6f-182">sys.database_firewall_rules</span><span class="sxs-lookup"><span data-stu-id="48d6f-182">sys.database_firewall_rules</span></span>](https://msdn.microsoft.com/library/dn269982.aspx) |<span data-ttu-id="48d6f-183">Adatbázis</span><span class="sxs-lookup"><span data-stu-id="48d6f-183">Database</span></span> |<span data-ttu-id="48d6f-184">Megjeleníti a hello aktuális adatbázis szintű tűzfalszabályok</span><span class="sxs-lookup"><span data-stu-id="48d6f-184">Displays hello current database-level firewall rules</span></span> |
| [<span data-ttu-id="48d6f-185">sp_set_database_firewall_rule</span><span class="sxs-lookup"><span data-stu-id="48d6f-185">sp_set_database_firewall_rule</span></span>](https://msdn.microsoft.com/library/dn270010.aspx) |<span data-ttu-id="48d6f-186">Adatbázis</span><span class="sxs-lookup"><span data-stu-id="48d6f-186">Database</span></span> |<span data-ttu-id="48d6f-187">Létrehozza vagy frissíti az adatbázis-szintű tűzfalszabályok hello</span><span class="sxs-lookup"><span data-stu-id="48d6f-187">Creates or updates hello database-level firewall rules</span></span> |
| [<span data-ttu-id="48d6f-188">sp_delete_database_firewall_rule</span><span class="sxs-lookup"><span data-stu-id="48d6f-188">sp_delete_database_firewall_rule</span></span>](https://msdn.microsoft.com/library/dn270030.aspx) |<span data-ttu-id="48d6f-189">Adatbázisok</span><span class="sxs-lookup"><span data-stu-id="48d6f-189">Databases</span></span> |<span data-ttu-id="48d6f-190">Adatbázisszintű tűzfalszabályok eltávolítása</span><span class="sxs-lookup"><span data-stu-id="48d6f-190">Removes database-level firewall rules</span></span> |


<span data-ttu-id="48d6f-191">hello alábbi példák tekintse át a meglévő szabályok hello hello kiszolgálóra Contoso egy adott IP-címek engedélyezése és a tűzfalszabály törlése:</span><span class="sxs-lookup"><span data-stu-id="48d6f-191">hello following examples review hello existing rules, enable a range of IP addresses on hello server Contoso, and deletes a firewall rule:</span></span>
   
```sql
SELECT * FROM sys.firewall_rules ORDER BY name;
```
  
<span data-ttu-id="48d6f-192">Ezután adjon hozzá egy tűzfalszabályt.</span><span class="sxs-lookup"><span data-stu-id="48d6f-192">Next, add a firewall rule.</span></span>
   
```sql
EXECUTE sp_set_firewall_rule @name = N'ContosoFirewallRule',
   @start_ip_address = '192.168.1.1', @end_ip_address = '192.168.1.10'
```

<span data-ttu-id="48d6f-193">egy kiszolgálószintű tűzfalszabályt toodelete hello sp_delete_firewall_rule tárolt eljárás végrehajtása.</span><span class="sxs-lookup"><span data-stu-id="48d6f-193">toodelete a server-level firewall rule, execute hello sp_delete_firewall_rule stored procedure.</span></span> <span data-ttu-id="48d6f-194">hello alábbi példa hello szabály törlése ContosoFirewallRule nevű:</span><span class="sxs-lookup"><span data-stu-id="48d6f-194">hello following example deletes hello rule named ContosoFirewallRule:</span></span>
   
```sql
EXECUTE sp_delete_firewall_rule @name = N'ContosoFirewallRule'
```   

### <a name="azure-powershell"></a><span data-ttu-id="48d6f-195">Azure PowerShell</span><span class="sxs-lookup"><span data-stu-id="48d6f-195">Azure PowerShell</span></span>
| <span data-ttu-id="48d6f-196">Parancsmag</span><span class="sxs-lookup"><span data-stu-id="48d6f-196">Cmdlet</span></span> | <span data-ttu-id="48d6f-197">Szint</span><span class="sxs-lookup"><span data-stu-id="48d6f-197">Level</span></span> | <span data-ttu-id="48d6f-198">Leírás</span><span class="sxs-lookup"><span data-stu-id="48d6f-198">Description</span></span> |
| --- | --- | --- |
| [<span data-ttu-id="48d6f-199">Get-AzureSqlDatabaseServerFirewallRule</span><span class="sxs-lookup"><span data-stu-id="48d6f-199">Get-AzureSqlDatabaseServerFirewallRule</span></span>](https://msdn.microsoft.com/library/azure/dn546731.aspx) |<span data-ttu-id="48d6f-200">Kiszolgáló</span><span class="sxs-lookup"><span data-stu-id="48d6f-200">Server</span></span> |<span data-ttu-id="48d6f-201">Hello aktuális kiszolgálószintű tűzfal-szabályokat adja vissza</span><span class="sxs-lookup"><span data-stu-id="48d6f-201">Returns hello current server-level firewall rules</span></span> |
| [<span data-ttu-id="48d6f-202">New-AzureSqlDatabaseServerFirewallRule</span><span class="sxs-lookup"><span data-stu-id="48d6f-202">New-AzureSqlDatabaseServerFirewallRule</span></span>](https://msdn.microsoft.com/library/azure/dn546724.aspx) |<span data-ttu-id="48d6f-203">Kiszolgáló</span><span class="sxs-lookup"><span data-stu-id="48d6f-203">Server</span></span> |<span data-ttu-id="48d6f-204">Új kiszolgálószintű tűzfalszabály létrehozása</span><span class="sxs-lookup"><span data-stu-id="48d6f-204">Creates a new server-level firewall rule</span></span> |
| [<span data-ttu-id="48d6f-205">Set-AzureSqlDatabaseServerFirewallRule</span><span class="sxs-lookup"><span data-stu-id="48d6f-205">Set-AzureSqlDatabaseServerFirewallRule</span></span>](https://msdn.microsoft.com/library/azure/dn546739.aspx) |<span data-ttu-id="48d6f-206">Kiszolgáló</span><span class="sxs-lookup"><span data-stu-id="48d6f-206">Server</span></span> |<span data-ttu-id="48d6f-207">Meglévő kiszolgálószintű tűzfalszabály hello tulajdonságainak frissítése</span><span class="sxs-lookup"><span data-stu-id="48d6f-207">Updates hello properties of an existing server-level firewall rule</span></span> |
| [<span data-ttu-id="48d6f-208">Remove-AzureSqlDatabaseServerFirewallRule</span><span class="sxs-lookup"><span data-stu-id="48d6f-208">Remove-AzureSqlDatabaseServerFirewallRule</span></span>](https://msdn.microsoft.com/library/azure/dn546727.aspx) |<span data-ttu-id="48d6f-209">Kiszolgáló</span><span class="sxs-lookup"><span data-stu-id="48d6f-209">Server</span></span> |<span data-ttu-id="48d6f-210">Kiszolgálószintű tűzfalszabályok eltávolítása</span><span class="sxs-lookup"><span data-stu-id="48d6f-210">Removes server-level firewall rules</span></span> |


<span data-ttu-id="48d6f-211">a következő példa hello beállítja egy kiszolgálószintű tűzfalszabályt PowerShell használatával:</span><span class="sxs-lookup"><span data-stu-id="48d6f-211">hello following example sets a server-level firewall rule using PowerShell:</span></span>

```powershell
New-AzureRmSqlServerFirewallRule -ResourceGroupName "myResourceGroup" `
    -ServerName $servername `
    -FirewallRuleName "AllowSome" -StartIpAddress "0.0.0.0" -EndIpAddress "0.0.0.0"
```

> [!TIP]
> <span data-ttu-id="48d6f-212">PowerShell hello környezetben a gyors, tekintse meg a [létrehozása DB - PowerShell](sql-database-get-started-powershell.md) és [hozzon létre egy adatbázist, és a PowerShell használatával tűzfalszabályok konfigurálása](scripts/sql-database-create-and-configure-database-powershell.md)</span><span class="sxs-lookup"><span data-stu-id="48d6f-212">For PowerShell examples in hello context of a quick start, see [Create DB - PowerShell](sql-database-get-started-powershell.md) and [Create a single database and configure a firewall rule using PowerShell](scripts/sql-database-create-and-configure-database-powershell.md)</span></span>
>

### <a name="azure-cli"></a><span data-ttu-id="48d6f-213">Azure CLI</span><span class="sxs-lookup"><span data-stu-id="48d6f-213">Azure CLI</span></span>
| <span data-ttu-id="48d6f-214">Parancsmag</span><span class="sxs-lookup"><span data-stu-id="48d6f-214">Cmdlet</span></span> | <span data-ttu-id="48d6f-215">Szint</span><span class="sxs-lookup"><span data-stu-id="48d6f-215">Level</span></span> | <span data-ttu-id="48d6f-216">Leírás</span><span class="sxs-lookup"><span data-stu-id="48d6f-216">Description</span></span> |
| --- | --- | --- |
| [<span data-ttu-id="48d6f-217">az sql server tűzfal létrehozása</span><span class="sxs-lookup"><span data-stu-id="48d6f-217">az sql server firewall create</span></span>](/cli/azure/sql/server/firewall-rule#create) | <span data-ttu-id="48d6f-218">Létrehoz egy tűzfal szabály tooallow hozzáférés tooall SQL-adatbázisok hello megadott IP-címtartomány a hello kiszolgálóján.</span><span class="sxs-lookup"><span data-stu-id="48d6f-218">Creates a firewall rule tooallow access tooall SQL Databases on hello server from hello entered IP address range.</span></span>|
| [<span data-ttu-id="48d6f-219">az sql server tűzfal törlése</span><span class="sxs-lookup"><span data-stu-id="48d6f-219">az sql server firewall delete</span></span>](/cli/azure/sql/server/firewall-rule#delete)| <span data-ttu-id="48d6f-220">Törli a tűzfalszabályt.</span><span class="sxs-lookup"><span data-stu-id="48d6f-220">Deletes a firewall rule.</span></span>|
| [<span data-ttu-id="48d6f-221">az sql server tűzfal listájára</span><span class="sxs-lookup"><span data-stu-id="48d6f-221">az sql server firewall list</span></span>](/cli/azure/sql/server/firewall-rule#list)| <span data-ttu-id="48d6f-222">Hello tűzfal-szabályokat sorolja fel.</span><span class="sxs-lookup"><span data-stu-id="48d6f-222">Lists hello firewall rules.</span></span>|
| [<span data-ttu-id="48d6f-223">az sql server tűzfalszabály megjelenítése</span><span class="sxs-lookup"><span data-stu-id="48d6f-223">az sql server firewall rule show</span></span>](/cli/azure/sql/server/firewall-rule#show)| <span data-ttu-id="48d6f-224">Egy tűzfalszabály hello részleteit jeleníti meg.</span><span class="sxs-lookup"><span data-stu-id="48d6f-224">Shows hello details of a firewall rule.</span></span>|
| [<span data-ttu-id="48d6f-225">frissítés az sql server tűzfal szabály AX</span><span class="sxs-lookup"><span data-stu-id="48d6f-225">ax sql server firewall rule update</span></span>](/cli/azure/sql/server/firewall-rule#update)| <span data-ttu-id="48d6f-226">Egy tűzfalszabály frissíti.</span><span class="sxs-lookup"><span data-stu-id="48d6f-226">Updates a firewall rule.</span></span>

<span data-ttu-id="48d6f-227">a következő példa hello beállítja egy kiszolgálószintű tűzfalszabályt hello Azure parancssori felület használatával:</span><span class="sxs-lookup"><span data-stu-id="48d6f-227">hello following example sets a server-level firewall rule using hello Azure CLI:</span></span> 

```azurecli-interactive
az sql server firewall-rule create --resource-group myResourceGroup --server $servername \
    -n AllowYourIp --start-ip-address 0.0.0.0 --end-ip-address 0.0.0.0
```

> [!TIP]
> <span data-ttu-id="48d6f-228">Például egy Azure CLI hello környezetben gyors, lásd: [létrehozása KCSA - Azure CLI](sql-database-get-started-cli.md) és [egy önálló adatbázis létrehozása és konfigurálása a tűzfalszabályok hello Azure parancssori felület használatával](scripts/sql-database-create-and-configure-database-cli.md)</span><span class="sxs-lookup"><span data-stu-id="48d6f-228">For an Azure CLI example in hello context of a quick start, see [Create DDB - Azure CLI](sql-database-get-started-cli.md) and [Create a single database and configure a firewall rule using hello Azure CLI](scripts/sql-database-create-and-configure-database-cli.md)</span></span>
>

### <a name="rest-api"></a><span data-ttu-id="48d6f-229">REST API</span><span class="sxs-lookup"><span data-stu-id="48d6f-229">REST API</span></span>
| <span data-ttu-id="48d6f-230">API</span><span class="sxs-lookup"><span data-stu-id="48d6f-230">API</span></span> | <span data-ttu-id="48d6f-231">Szint</span><span class="sxs-lookup"><span data-stu-id="48d6f-231">Level</span></span> | <span data-ttu-id="48d6f-232">Leírás</span><span class="sxs-lookup"><span data-stu-id="48d6f-232">Description</span></span> |
| --- | --- | --- |
| [<span data-ttu-id="48d6f-233">List Firewall Rules</span><span class="sxs-lookup"><span data-stu-id="48d6f-233">List Firewall Rules</span></span>](https://msdn.microsoft.com/library/azure/dn505715.aspx) |<span data-ttu-id="48d6f-234">Kiszolgáló</span><span class="sxs-lookup"><span data-stu-id="48d6f-234">Server</span></span> |<span data-ttu-id="48d6f-235">Megjeleníti az aktuális kiszolgálószintű tűzfal-szabályokat hello</span><span class="sxs-lookup"><span data-stu-id="48d6f-235">Displays hello current server-level firewall rules</span></span> |
| [<span data-ttu-id="48d6f-236">Create Firewall Rule</span><span class="sxs-lookup"><span data-stu-id="48d6f-236">Create Firewall Rule</span></span>](https://msdn.microsoft.com/library/azure/dn505712.aspx) |<span data-ttu-id="48d6f-237">Kiszolgáló</span><span class="sxs-lookup"><span data-stu-id="48d6f-237">Server</span></span> |<span data-ttu-id="48d6f-238">Kiszolgálószintű tűzfalszabályok létrehozása vagy frissítése</span><span class="sxs-lookup"><span data-stu-id="48d6f-238">Creates or updates server-level firewall rules</span></span> |
| [<span data-ttu-id="48d6f-239">Set Firewall Rule</span><span class="sxs-lookup"><span data-stu-id="48d6f-239">Set Firewall Rule</span></span>](https://msdn.microsoft.com/library/azure/dn505707.aspx) |<span data-ttu-id="48d6f-240">Kiszolgáló</span><span class="sxs-lookup"><span data-stu-id="48d6f-240">Server</span></span> |<span data-ttu-id="48d6f-241">Meglévő kiszolgálószintű tűzfalszabály hello tulajdonságainak frissítése</span><span class="sxs-lookup"><span data-stu-id="48d6f-241">Updates hello properties of an existing server-level firewall rule</span></span> |
| [<span data-ttu-id="48d6f-242">Tűzfalszabály törlése</span><span class="sxs-lookup"><span data-stu-id="48d6f-242">Delete Firewall Rule</span></span>](https://msdn.microsoft.com/library/azure/dn505706.aspx) |<span data-ttu-id="48d6f-243">Kiszolgáló</span><span class="sxs-lookup"><span data-stu-id="48d6f-243">Server</span></span> |<span data-ttu-id="48d6f-244">Kiszolgálószintű tűzfalszabályok eltávolítása</span><span class="sxs-lookup"><span data-stu-id="48d6f-244">Removes server-level firewall rules</span></span> |

## <a name="server-level-firewall-rule-versus-a-database-level-firewall-rule"></a><span data-ttu-id="48d6f-245">Kiszolgálószintű tűzfalszabályt és egy adatbázis-adatbázisszintű tűzfalszabály</span><span class="sxs-lookup"><span data-stu-id="48d6f-245">Server-level firewall rule versus a database-level firewall rule</span></span>
<span data-ttu-id="48d6f-246">Q.</span><span class="sxs-lookup"><span data-stu-id="48d6f-246">Q.</span></span> <span data-ttu-id="48d6f-247">Egy adatbázis felhasználói kell teljesen különíteni az egy másik adatbázis?</span><span class="sxs-lookup"><span data-stu-id="48d6f-247">Should users of one database be fully isolated from another database?</span></span>   
  <span data-ttu-id="48d6f-248">Ha igen, hozzáférést adatbázis szintű tűzfalszabályok használatával.</span><span class="sxs-lookup"><span data-stu-id="48d6f-248">If yes, grant access using database-level firewall rules.</span></span> <span data-ttu-id="48d6f-249">Ezzel elkerülhető a kiszolgálószintű tűzfal-szabályok, amelyek lehetővé teszik a hozzáférést hello tűzfalon keresztül tooall adatbázisok, csökkenti a védelmekkel hello mélysége használatával.</span><span class="sxs-lookup"><span data-stu-id="48d6f-249">This avoids using server-level firewall rules, which permit access through hello firewall tooall databases, reducing hello depth of your defenses.</span></span>   
 
<span data-ttu-id="48d6f-250">Q.</span><span class="sxs-lookup"><span data-stu-id="48d6f-250">Q.</span></span> <span data-ttu-id="48d6f-251">Hajtsa végre az hello IP-cím felhasználói kell adatbázisához tooall?</span><span class="sxs-lookup"><span data-stu-id="48d6f-251">Do users at hello IP address’s need access tooall databases?</span></span>   
  <span data-ttu-id="48d6f-252">Használja a kiszolgálószintű tűzfal szabályok tooreduce hello ennyiszer tűzfalszabályokat kell konfigurálnia.</span><span class="sxs-lookup"><span data-stu-id="48d6f-252">Use server-level firewall rules tooreduce hello number of times you must configure firewall rules.</span></span>   

<span data-ttu-id="48d6f-253">Q.</span><span class="sxs-lookup"><span data-stu-id="48d6f-253">Q.</span></span> <span data-ttu-id="48d6f-254">Hello személyt vagy csapatot csak a hello tűzfalszabályok beállítása rendelkezik hello Azure-portálon PowerShell, vagy a REST API hello keresztül hozzáférést?</span><span class="sxs-lookup"><span data-stu-id="48d6f-254">Does hello person or team configuring hello firewall rules only have access through hello Azure portal, PowerShell, or hello REST API?</span></span>   
  <span data-ttu-id="48d6f-255">Kiszolgálószintű tűzfal-szabályokat kell használnia.</span><span class="sxs-lookup"><span data-stu-id="48d6f-255">You must use server-level firewall rules.</span></span> <span data-ttu-id="48d6f-256">Adatbázis-szintű tűzfalszabályok csak Transact-SQL használatával konfigurálható.</span><span class="sxs-lookup"><span data-stu-id="48d6f-256">Database-level firewall rules can only be configured using Transact-SQL.</span></span>  

<span data-ttu-id="48d6f-257">Q.</span><span class="sxs-lookup"><span data-stu-id="48d6f-257">Q.</span></span> <span data-ttu-id="48d6f-258">Hello személyt vagy csapatot hello tűzfalszabályok beállítása tiltott hello adatbázis szintjén magas szintű engedéllyel rendelkezik?</span><span class="sxs-lookup"><span data-stu-id="48d6f-258">Is hello person or team configuring hello firewall rules prohibited from having high-level permission at hello database level?</span></span>   
  <span data-ttu-id="48d6f-259">Kiszolgálószintű tűzfal-szabályok használata.</span><span class="sxs-lookup"><span data-stu-id="48d6f-259">Use server-level firewall rules.</span></span> <span data-ttu-id="48d6f-260">Felhasználó számára legalább használatával Transact-SQL-adatbázis szintű tűzfalszabályok beállítása `CONTROL DATABASE` engedély hello adatbázis szintjén.</span><span class="sxs-lookup"><span data-stu-id="48d6f-260">Configuring database-level firewall rules using Transact-SQL, requires at least `CONTROL DATABASE` permission at hello database level.</span></span>  

<span data-ttu-id="48d6f-261">Q.</span><span class="sxs-lookup"><span data-stu-id="48d6f-261">Q.</span></span> <span data-ttu-id="48d6f-262">Hello személyt vagy csapatot konfigurálásához, vagy a naplózás hello tűzfalszabályok, központilag kezelése tűzfalszabályok számos van (akár 100 egység) adatbázisok?</span><span class="sxs-lookup"><span data-stu-id="48d6f-262">Is hello person or team configuring or auditing hello firewall rules, centrally managing firewall rules for many (perhaps 100s) of databases?</span></span>   
  <span data-ttu-id="48d6f-263">Ez a beállítás attól függ, a szükségleteinek és környezet.</span><span class="sxs-lookup"><span data-stu-id="48d6f-263">This selection depends upon your needs and environment.</span></span> <span data-ttu-id="48d6f-264">Kiszolgálószintű tűzfal-szabályokat lehet, hogy könnyebben tooconfigure, de a parancsfájl-kezelési szabályok konfigurálható hello adatbázis szintű.</span><span class="sxs-lookup"><span data-stu-id="48d6f-264">Server-level firewall rules might be easier tooconfigure, but scripting can configure rules at hello database-level.</span></span> <span data-ttu-id="48d6f-265">És akkor is, ha a kiszolgálószintű tűzfal-szabályokat használ, tooaudit hello adatbázis-tűzfalszabályok, toosee akkor, ha a felhasználók `CONTROL` engedéllyel rendelkezik a hello adatbázis adatbázis-szintű tűzfalszabályok hozott létre.</span><span class="sxs-lookup"><span data-stu-id="48d6f-265">And even if you use server-level firewall rules, you might need tooaudit hello database-firewall rules, toosee if users with `CONTROL` permission on hello database have created database-level firewall rules.</span></span>   

<span data-ttu-id="48d6f-266">Q.</span><span class="sxs-lookup"><span data-stu-id="48d6f-266">Q.</span></span> <span data-ttu-id="48d6f-267">Mindkét kiszolgáló- és adatbázis tűzfalszabályok vegyesen használata</span><span class="sxs-lookup"><span data-stu-id="48d6f-267">Can I use a mix of both server-level and database-level firewall rules?</span></span>   
  <span data-ttu-id="48d6f-268">Igen.</span><span class="sxs-lookup"><span data-stu-id="48d6f-268">Yes.</span></span> <span data-ttu-id="48d6f-269">Egyes felhasználók, rendszergazdák például módosítania kell kiszolgálószintű tűzfal-szabályokat.</span><span class="sxs-lookup"><span data-stu-id="48d6f-269">Some users, such as administrators might need server-level firewall rules.</span></span> <span data-ttu-id="48d6f-270">Más felhasználók, például egy adatbázis-alkalmazás felhasználói adatbázis-szintű tűzfalszabályok módosítania kell.</span><span class="sxs-lookup"><span data-stu-id="48d6f-270">Other users, such as users of a database application, might need database-level firewall rules.</span></span>   

## <a name="troubleshooting-hello-database-firewall"></a><span data-ttu-id="48d6f-271">Hello adatbázis tűzfal hibaelhárítása</span><span class="sxs-lookup"><span data-stu-id="48d6f-271">Troubleshooting hello database firewall</span></span>
<span data-ttu-id="48d6f-272">Vegye figyelembe a következő pontokat, amikor hozzáférési toohello Microsoft Azure SQL Database szolgáltatás nem a várt módon működnek várt hello:</span><span class="sxs-lookup"><span data-stu-id="48d6f-272">Consider hello following points when access toohello Microsoft Azure SQL Database service does not behave as you expect:</span></span>

* <span data-ttu-id="48d6f-273">**Helyi tűzfal konfigurációját:** a számítógép hozzáférhessen az Azure SQL Database, szükség lehet olyan érvényes tűzfalkivétel toocreate az 1433-as TCP-port a számítógépen.</span><span class="sxs-lookup"><span data-stu-id="48d6f-273">**Local firewall configuration:** Before your computer can access Azure SQL Database, you may need toocreate a firewall exception on your computer for TCP port 1433.</span></span> <span data-ttu-id="48d6f-274">Ha kapcsolatok belül hello Azure felhőben határt, előfordulhat, hogy tooopen további portokat.</span><span class="sxs-lookup"><span data-stu-id="48d6f-274">If you are making connections inside hello Azure cloud boundary, you may have tooopen additional ports.</span></span> <span data-ttu-id="48d6f-275">További információkért lásd: hello **SQL-adatbázis: kívül és belül** szakasza [kívüli ADO.NET 4.5 és az SQL-adatbázis 1433-as portokon](sql-database-develop-direct-route-ports-adonet-v12.md).</span><span class="sxs-lookup"><span data-stu-id="48d6f-275">For more information, see hello **SQL Database: Outside vs inside** section of [Ports beyond 1433 for ADO.NET 4.5 and SQL Database](sql-database-develop-direct-route-ports-adonet-v12.md).</span></span>
* <span data-ttu-id="48d6f-276">**Hálózati címfordítás (NAT):** kellő tooNAT, a számítógép tooconnect tooAzure SQL-adatbázis hello IP-cím látható a számítógép IP-konfigurációs beállítások eltérhetnek által használt hello IP-cím.</span><span class="sxs-lookup"><span data-stu-id="48d6f-276">**Network address translation (NAT):** Due tooNAT, hello IP address used by your computer tooconnect tooAzure SQL Database may be different than hello IP address shown in your computer IP configuration settings.</span></span> <span data-ttu-id="48d6f-277">a számítógép tooview hello IP-cím tooconnect tooAzure használva toohello portal-e jelentkezni, és keresse meg a toohello **konfigurálása** az adatbázist üzemeltető kiszolgálón hello lapon.</span><span class="sxs-lookup"><span data-stu-id="48d6f-277">tooview hello IP address your computer is using tooconnect tooAzure, log in toohello portal and navigate toohello **Configure** tab on hello server that hosts your database.</span></span> <span data-ttu-id="48d6f-278">A hello **engedélyezett IP-címek** című szakaszba hello **aktuális ügyfél IP-cím** jelenik meg.</span><span class="sxs-lookup"><span data-stu-id="48d6f-278">Under hello **Allowed IP Addresses** section, hello **Current Client IP Address** is displayed.</span></span> <span data-ttu-id="48d6f-279">Kattintson a **Hozzáadás** toohello **engedélyezett IP-címek** tooallow a számítógép tooaccess hello kiszolgáló.</span><span class="sxs-lookup"><span data-stu-id="48d6f-279">Click **Add** toohello **Allowed IP Addresses** tooallow this computer tooaccess hello server.</span></span>
* <span data-ttu-id="48d6f-280">**Módosítások toohello engedélyezési lista rendelkezik még nincsenek érvényben:** lehet, mint amennyit egy 5 perces késleltetést használ az toohello Azure SQL Database tűzfal konfigurációs tootake hatás változik.</span><span class="sxs-lookup"><span data-stu-id="48d6f-280">**Changes toohello allow list have not taken effect yet:** There may be as much as a five-minute delay for changes toohello Azure SQL Database firewall configuration tootake effect.</span></span>
* <span data-ttu-id="48d6f-281">**hello bejelentkezési nincs engedélyezve, vagy helytelen jelszót használt:** Ha egy bejelentkezési azonosító nem rendelkezik engedélyekkel hello Azure SQL adatbázis-kiszolgálón, vagy hello használt jelszó nem megfelelő, hello kapcsolat toohello Azure SQL adatbázis-kiszolgáló megtagadva.</span><span class="sxs-lookup"><span data-stu-id="48d6f-281">**hello login is not authorized or an incorrect password was used:** If a login does not have permissions on hello Azure SQL Database server or hello password used is incorrect, hello connection toohello Azure SQL Database server is denied.</span></span> <span data-ttu-id="48d6f-282">Csak egy tűzfal-beállítás létrehozásához biztosít az ügyfelek számára egy lehetőség tooattempt tooyour server; kapcsolódás minden ügyfél hello szükséges biztonsági adatokat kell megadni.</span><span class="sxs-lookup"><span data-stu-id="48d6f-282">Creating a firewall setting only provides clients with an opportunity tooattempt connecting tooyour server; each client must provide hello necessary security credentials.</span></span> <span data-ttu-id="48d6f-283">A bejelentkezések előkészítésével kapcsolatos további információkért lásd az adatbázisok, bejelentkezések és felhasználók Azure SQL Database-ben történő kezelésével foglalkozó cikket.</span><span class="sxs-lookup"><span data-stu-id="48d6f-283">For more information about preparing logins, see Managing Databases, Logins, and Users in Azure SQL Database.</span></span>
* <span data-ttu-id="48d6f-284">**Dinamikus IP-cím:** Ha az internethez, a dinamikus IP-címzést és tapasztal hello tűzfalon keresztül történt, próbálkozzon a következő megoldások hello egyikét:</span><span class="sxs-lookup"><span data-stu-id="48d6f-284">**Dynamic IP address:** If you have an Internet connection with dynamic IP addressing and you are having trouble getting through hello firewall, you could try one of hello following solutions:</span></span>
  
  * <span data-ttu-id="48d6f-285">Kérje meg az internetszolgáltató (ISP) hello IP-címtartomány hozzárendelt tooyour ügyfélszámítógépek számára, hogy hozzáférési hello Azure SQL Database-kiszolgálóhoz, és adja hozzá a hello IP-címtartomány tűzfal szabály.</span><span class="sxs-lookup"><span data-stu-id="48d6f-285">Ask your Internet Service Provider (ISP) for hello IP address range assigned tooyour client computers that access hello Azure SQL Database server, and then add hello IP address range as a firewall rule.</span></span>
  * <span data-ttu-id="48d6f-286">Első statikus IP-címzés helyette az ügyfélszámítógépek számára, és adja hozzá a hello IP-címek, tűzfal-szabályokat.</span><span class="sxs-lookup"><span data-stu-id="48d6f-286">Get static IP addressing instead for your client computers, and then add hello IP addresses as firewall rules.</span></span>

## <a name="next-steps"></a><span data-ttu-id="48d6f-287">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="48d6f-287">Next steps</span></span>

- <span data-ttu-id="48d6f-288">Az adatbázis és a kiszolgálószintű tűzfalszabály létrehozása a gyors üzembe helyezési, lásd: [hozzon létre egy Azure SQL-adatbázis](sql-database-get-started-portal.md).</span><span class="sxs-lookup"><span data-stu-id="48d6f-288">For a quick start on creating a database and a server-level firewall rule, see [Create an Azure SQL database](sql-database-get-started-portal.md).</span></span>
- <span data-ttu-id="48d6f-289">Az összekötő tooan Azure SQL-adatbázis nyílt forráskódú vagy harmadik féltől származó alkalmazások útmutatásért lásd: [gyors üzembe helyezési Ügyfélkód minták tooSQL adatbázis](https://msdn.microsoft.com/library/azure/ee336282.aspx).</span><span class="sxs-lookup"><span data-stu-id="48d6f-289">For help in connecting tooan Azure SQL database from open source or third-party applications, see [Client quick-start code samples tooSQL Database](https://msdn.microsoft.com/library/azure/ee336282.aspx).</span></span>
- <span data-ttu-id="48d6f-290">Hogy szükség lehet a tooopen portokon további információ: hello **SQL-adatbázis: kívül és belül** szakasza [portok túl az 1433-as ADO.NET 4.5 és az SQL-adatbázis](sql-database-develop-direct-route-ports-adonet-v12.md)</span><span class="sxs-lookup"><span data-stu-id="48d6f-290">For information on additional ports that you may need tooopen, see hello **SQL Database: Outside vs inside** section of [Ports beyond 1433 for ADO.NET 4.5 and SQL Database](sql-database-develop-direct-route-ports-adonet-v12.md)</span></span>
- <span data-ttu-id="48d6f-291">Az Azure SQL Database biztonsági áttekintését lásd: [biztonságossá tétele az adatbázis](sql-database-security-overview.md)</span><span class="sxs-lookup"><span data-stu-id="48d6f-291">For an overview of Azure SQL Database security, see [Securing your database](sql-database-security-overview.md)</span></span>

<!--Image references-->
[1]: ./media/sql-database-firewall-configure/sqldb-firewall-1.png
