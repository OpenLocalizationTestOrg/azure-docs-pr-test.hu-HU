---
title: "egy több-bérlős alkalmazásban aaaManage Azure SQL Database séma |} Microsoft Docs"
description: "Több bérlő sémájának kezelése Azure SQL Database-t használó több-bérlős alkalmazásban"
keywords: "sql database-oktatóanyag"
services: sql-database
documentationcenter: 
author: stevestein
manager: jhubbard
editor: 
ms.assetid: 
ms.service: sql-database
ms.custom: scale out apps
ms.workload: data-management
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/28/2017
ms.author: billgib; sstein
ms.openlocfilehash: ea946e556808dabd60dd39cb8173d0512d4bddec
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/06/2017
---
# <a name="manage-schema-for-multiple-tenants-in-hello-wingtip-saas-application"></a><span data-ttu-id="9aef1-104">A több bérlő hello Wingtip SaaS-alkalmazás a séma kezelése</span><span class="sxs-lookup"><span data-stu-id="9aef1-104">Manage schema for multiple tenants in hello Wingtip SaaS application</span></span>

<span data-ttu-id="9aef1-105">Hello [első Wingtip Szolgáltatottszoftver-oktatóanyag](sql-database-saas-tutorial.md) bemutatja, hogyan hello app egy bérlő adatbázis létesítéséhez és hello katalógus regisztrálásához.</span><span class="sxs-lookup"><span data-stu-id="9aef1-105">hello [first Wingtip SaaS tutorial](sql-database-saas-tutorial.md) shows how hello app can provision a tenant database and register it in hello catalog.</span></span> <span data-ttu-id="9aef1-106">Bármely alkalmazás, például a Wingtip SaaS-alkalmazás változik, adott idő alatt, és esetenként hello módosítások toohello adatbázis szükséges.</span><span class="sxs-lookup"><span data-stu-id="9aef1-106">Like any application, hello Wingtip SaaS app will evolve over time, and at times will require changes toohello database.</span></span> <span data-ttu-id="9aef1-107">Változások a következők lehetnek új vagy módosított séma, új vagy módosított referenciaadatok és rutin adatbázis karbantartási feladatok tooensure optimális alkalmazás teljesítménye.</span><span class="sxs-lookup"><span data-stu-id="9aef1-107">Changes may include new or changed schema, new or changed reference data, and routine database maintenance tasks tooensure optimal app performance.</span></span> <span data-ttu-id="9aef1-108">Egy SaaS-alkalmazáshoz ezek a változások kell egy bérlő adatbázisok potenciálisan nagy járműflotta összehangolt módon telepített toobe.</span><span class="sxs-lookup"><span data-stu-id="9aef1-108">With a SaaS application, these changes need toobe deployed in a coordinated manner across a potentially massive fleet of tenant databases.</span></span> <span data-ttu-id="9aef1-109">Ezek a módosítások toobe a jövőbeni bérlői adatbázisok, toobe szóló hello létesítésének folyamatát kell használnia kell.</span><span class="sxs-lookup"><span data-stu-id="9aef1-109">For these changes toobe in future tenant databases, they need toobe incorporated into hello provisioning process.</span></span>

<span data-ttu-id="9aef1-110">Ez az oktatóanyag ismerteti, két forgatókönyv - hivatkozás adatok frissítéseinek telepítéséhez az összes bérlőre vonatkozó és index hello retuning hello hivatkozási adatokat tartalmazó tábla.</span><span class="sxs-lookup"><span data-stu-id="9aef1-110">This tutorial explores two scenarios - deploying reference data updates for all tenants, and retuning an index on hello table containing hello reference data.</span></span> <span data-ttu-id="9aef1-111">Hello [rugalmas feladatok](sql-database-elastic-jobs-overview.md) szolgáltatás összes bérlők és hello ezeket a műveleteket használt tooexecute van *arany* bérlői adatbázis, amely sablonként szolgál, az új adatbázisokat.</span><span class="sxs-lookup"><span data-stu-id="9aef1-111">hello [Elastic jobs](sql-database-elastic-jobs-overview.md) feature is used tooexecute these operations across all tenants, and hello *golden* tenant database that is used as a template for new databases.</span></span>

<span data-ttu-id="9aef1-112">Ezen oktatóanyag segítségével megtanulhatja a következőket:</span><span class="sxs-lookup"><span data-stu-id="9aef1-112">In this tutorial you learn how to:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="9aef1-113">Feladat-fiók létrehozása</span><span class="sxs-lookup"><span data-stu-id="9aef1-113">Create a job account</span></span>
> * <span data-ttu-id="9aef1-114">Több bérlő átfogó lekérdezése</span><span class="sxs-lookup"><span data-stu-id="9aef1-114">Query across multiple tenants</span></span>
> * <span data-ttu-id="9aef1-115">Az összes bérlői adatbázis adatainak frissítése</span><span class="sxs-lookup"><span data-stu-id="9aef1-115">Update data in all tenant databases</span></span>
> * <span data-ttu-id="9aef1-116">Index létrehozása a táblához az összes bérlői adatbázisban</span><span class="sxs-lookup"><span data-stu-id="9aef1-116">Create an index on a table in all tenant databases</span></span>


<span data-ttu-id="9aef1-117">Ez az oktatóanyag, győződjön meg arról, hogy hello a következő előfeltételek teljesülését toocomplete:</span><span class="sxs-lookup"><span data-stu-id="9aef1-117">toocomplete this tutorial, make sure hello following prerequisites are met:</span></span>

* <span data-ttu-id="9aef1-118">hello Wingtip SaaS-alkalmazás telepítve van.</span><span class="sxs-lookup"><span data-stu-id="9aef1-118">hello Wingtip SaaS app is deployed.</span></span> <span data-ttu-id="9aef1-119">toodeploy öt percen belül, lásd: [központi telepítése és felfedezése hello Wingtip SaaS-alkalmazáshoz](sql-database-saas-tutorial.md)</span><span class="sxs-lookup"><span data-stu-id="9aef1-119">toodeploy in less than five minutes, see [Deploy and explore hello Wingtip SaaS application](sql-database-saas-tutorial.md)</span></span>
* <span data-ttu-id="9aef1-120">Az Azure PowerShell telepítve van.</span><span class="sxs-lookup"><span data-stu-id="9aef1-120">Azure PowerShell is installed.</span></span> <span data-ttu-id="9aef1-121">A részletekért lásd: [Ismerkedés az Azure PowerShell-lel](https://docs.microsoft.com/powershell/azure/get-started-azureps)</span><span class="sxs-lookup"><span data-stu-id="9aef1-121">For details, see [Getting started with Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps)</span></span>
* <span data-ttu-id="9aef1-122">hello legújabb verziója az SQL Server Management Studio (SSMS) van telepítve.</span><span class="sxs-lookup"><span data-stu-id="9aef1-122">hello latest version of SQL Server Management Studio (SSMS) is installed.</span></span> [<span data-ttu-id="9aef1-123">Az SSMS letöltése és telepítése</span><span class="sxs-lookup"><span data-stu-id="9aef1-123">Download and Install SSMS</span></span>](https://docs.microsoft.com/sql/ssms/download-sql-server-management-studio-ssms)

<span data-ttu-id="9aef1-124">*Ez az oktatóanyag hello SQL adatbázis-szolgáltatás, amely egy korlátozott előzetes verziójú (a rugalmas adatbázis-feladatok) funkcióit használja. Ha ez az oktatóanyag kívánja toodo, adja meg az előfizetés-azonosítóval tooSaaSFeedback@microsoft.com témát = a rugalmas feladatok megtekintése. Hogy az előfizetés engedélyezve van, megerősítés megjelenése után [töltse le és telepítse a hello legújabb kiadás előtti feladatok parancsmagok](https://github.com/jaredmoo/azure-powershell/releases). Ez az előnézet korlátozva, így forduljon SaaSFeedback@microsoft.com kapcsolatos kérdésekre, vagy a támogatási szolgálathoz.*</span><span class="sxs-lookup"><span data-stu-id="9aef1-124">*This tutorial uses features of hello SQL Database service that are in a limited preview (Elastic Database jobs). If you wish toodo this tutorial, provide your subscription id tooSaaSFeedback@microsoft.com with subject=Elastic Jobs Preview. After you receive confirmation that your subscription has been enabled, [download and install hello latest pre-release jobs cmdlets](https://github.com/jaredmoo/azure-powershell/releases). This preview is limited, so contact SaaSFeedback@microsoft.com for related questions or support.*</span></span>


## <a name="introduction-toosaas-schema-management-patterns"></a><span data-ttu-id="9aef1-125">Bevezetés tooSaaS séma felügyeleti minták</span><span class="sxs-lookup"><span data-stu-id="9aef1-125">Introduction tooSaaS Schema Management patterns</span></span>

<span data-ttu-id="9aef1-126">hello adatbázisonként egybérlős SaaS mintát hello adatok elkülönítési eredmények az sokféleképpen előnyeit, de: hello ugyanannyi időt vesz igénybe a hello nagyobb fokú összetettségével karbantartása és kezelésének számos más adatbázis vezet be.</span><span class="sxs-lookup"><span data-stu-id="9aef1-126">hello single tenant per database SaaS pattern benefits in many ways from hello data isolation that results, but at hello same time introduces hello additional complexity of maintaining and managing many databases.</span></span> <span data-ttu-id="9aef1-127">[Rugalmas feladat](sql-database-elastic-jobs-overview.md) elősegíti a felügyeleti és hello SQL adatrétegbeli kezelése.</span><span class="sxs-lookup"><span data-stu-id="9aef1-127">[Elastic Jobs](sql-database-elastic-jobs-overview.md) facilitates administration and management of hello SQL data tier.</span></span> <span data-ttu-id="9aef1-128">Feladatok lehetővé teszik a toosecurely és megbízhatóan, független a felhasználói interakcióktól vagy bemenettől, (T-SQL-parancsfájlok) feladatokat futtathat adatbázisok csoportja.</span><span class="sxs-lookup"><span data-stu-id="9aef1-128">Jobs enable you toosecurely and reliably, run tasks (T-SQL scripts) independent of user interaction or input, against a group of databases.</span></span> <span data-ttu-id="9aef1-129">Ez a módszer az alkalmazás összes bérlők között használt toodeploy séma és a közös hivatkozás adatváltozásokat lehet.</span><span class="sxs-lookup"><span data-stu-id="9aef1-129">This method can be used toodeploy schema and common reference data changes across all tenants in an application.</span></span> <span data-ttu-id="9aef1-130">Rugalmas feladat is lehet használt toomaintain egy *arany* hello adatbázis másolatát használt toocreate új bérlők mindenhol hello legutóbbi séma és a referencia-adatokat biztosítva.</span><span class="sxs-lookup"><span data-stu-id="9aef1-130">Elastic Jobs can also be used toomaintain a *golden* copy of hello database used toocreate new tenants, ensuring it always has hello latest schema and reference data.</span></span>

![képernyő](media/sql-database-saas-tutorial-schema-management/schema-management.png)


## <a name="elastic-jobs-limited-preview"></a><span data-ttu-id="9aef1-132">Az Elastic Jobs korlátozott előzetes verziója</span><span class="sxs-lookup"><span data-stu-id="9aef1-132">Elastic Jobs limited preview</span></span>

<span data-ttu-id="9aef1-133">Megjelent az Elastic Jobs új verziója, amely most az Azure SQL Database integrált funkciója (nincs szükség hozzá további szolgáltatásokra vagy összetevőkre).</span><span class="sxs-lookup"><span data-stu-id="9aef1-133">There is a new version of Elastic Jobs that is now an integrated feature of Azure SQL Database (that requires no additional services or components).</span></span> <span data-ttu-id="9aef1-134">Ez Elastic Jobs-nak ez az új verziója jelenleg korlátozott előzetes verzió.</span><span class="sxs-lookup"><span data-stu-id="9aef1-134">This new version of Elastic Jobs is currently in limited preview.</span></span> <span data-ttu-id="9aef1-135">A korlátozott előzetes jelenleg támogatja a PowerShell toocreate feladat fiókok és a T-SQL toocreate és feladatok kezelése.</span><span class="sxs-lookup"><span data-stu-id="9aef1-135">This limited preview currently supports PowerShell toocreate job accounts, and T-SQL toocreate and manage jobs.</span></span>

> [!NOTE]
> <span data-ttu-id="9aef1-136">*Ez az oktatóanyag hello SQL adatbázis-szolgáltatás, amely egy korlátozott előzetes verziójú (a rugalmas adatbázis-feladatok) funkcióit használja. Ha ez az oktatóanyag kívánja toodo, adja meg az előfizetés-azonosítóval tooSaaSFeedback@microsoft.com témát = a rugalmas feladatok megtekintése. Hogy az előfizetés engedélyezve van, megerősítés megjelenése után [töltse le és telepítse a hello legújabb kiadás előtti feladatok parancsmagok](https://github.com/jaredmoo/azure-powershell/releases). Ez az előnézet korlátozva, így forduljon SaaSFeedback@microsoft.com kapcsolatos kérdésekre, vagy a támogatási szolgálathoz.*</span><span class="sxs-lookup"><span data-stu-id="9aef1-136">*This tutorial uses features of hello SQL Database service that are in a limited preview (Elastic Database jobs). If you wish toodo this tutorial, provide your subscription id tooSaaSFeedback@microsoft.com with subject=Elastic Jobs Preview. After you receive confirmation that your subscription has been enabled, [download and install hello latest pre-release jobs cmdlets](https://github.com/jaredmoo/azure-powershell/releases). This preview is limited, so contact SaaSFeedback@microsoft.com for related questions or support.*</span></span>

## <a name="get-hello-wingtip-application-scripts"></a><span data-ttu-id="9aef1-137">Hello Wingtip alkalmazás parancsfájlok beolvasása</span><span class="sxs-lookup"><span data-stu-id="9aef1-137">Get hello Wingtip application scripts</span></span>

<span data-ttu-id="9aef1-138">hello Wingtip Szolgáltatottszoftver-parancsfájlok és az alkalmazás forráskódjához találhatók hello [WingtipSaaS](https://github.com/Microsoft/WingtipSaaS) github-tárház.</span><span class="sxs-lookup"><span data-stu-id="9aef1-138">hello Wingtip SaaS scripts and application source code are available in hello [WingtipSaaS](https://github.com/Microsoft/WingtipSaaS) github repo.</span></span> <span data-ttu-id="9aef1-139">[Lépések toodownload hello Wingtip SaaS parancsfájlok](sql-database-wtp-overview.md#download-and-unblock-the-wingtip-saas-scripts).</span><span class="sxs-lookup"><span data-stu-id="9aef1-139">[Steps toodownload hello Wingtip SaaS scripts](sql-database-wtp-overview.md#download-and-unblock-the-wingtip-saas-scripts).</span></span>

## <a name="create-a-job-account-database-and-new-job-account"></a><span data-ttu-id="9aef1-140">Feladatfiók-adatbázis és új feladatfiók létrehozása</span><span class="sxs-lookup"><span data-stu-id="9aef1-140">Create a job account database and new job account</span></span>

<span data-ttu-id="9aef1-141">Ez az oktatóanyag szükséges PowerShell toocreate hello feladat fiók adatbázis és a feladat a fiókot használja.</span><span class="sxs-lookup"><span data-stu-id="9aef1-141">This tutorial requires you use PowerShell toocreate hello job account database and job account.</span></span> <span data-ttu-id="9aef1-142">Például MSDB és az SQL Agent a rugalmas feladatok egy Azure SQL adatbázis-toostore feladatdefiníciók, feladat állapota és előzményei.</span><span class="sxs-lookup"><span data-stu-id="9aef1-142">Like MSDB and SQL Agent, Elastic Jobs uses an Azure SQL database toostore job definitions, job status, and history.</span></span> <span data-ttu-id="9aef1-143">Hello feladat-fiók létrehozása után hozzon létre, és figyelheti a feladat azonnal.</span><span class="sxs-lookup"><span data-stu-id="9aef1-143">Once hello job account is created, you can create and monitor jobs immediately.</span></span>

1. <span data-ttu-id="9aef1-144">Nyissa meg... \\Tanulási modulok\\séma felügyeleti\\*bemutató-SchemaManagement.ps1* a hello **PowerShell ISE**.</span><span class="sxs-lookup"><span data-stu-id="9aef1-144">Open …\\Learning Modules\\Schema Management\\*Demo-SchemaManagement.ps1* in hello **PowerShell ISE**.</span></span>
1. <span data-ttu-id="9aef1-145">Nyomja le az **F5** toorun hello parancsfájl.</span><span class="sxs-lookup"><span data-stu-id="9aef1-145">Press **F5** toorun hello script.</span></span>

<span data-ttu-id="9aef1-146">Hello *bemutató-SchemaManagement.ps1* parancsfájl hívások hello *telepítés-SchemaManagement.ps1* toocreate parancsfájl egy *S2* nevű adatbázis **jobaccount** hello katalógus kiszolgálón.</span><span class="sxs-lookup"><span data-stu-id="9aef1-146">hello *Demo-SchemaManagement.ps1* script calls hello *Deploy-SchemaManagement.ps1* script toocreate an *S2* database named **jobaccount** on hello catalog server.</span></span> <span data-ttu-id="9aef1-147">Ezután hello feladat fiók hello jobaccount adatbázis típusra vonatkozó hívásként paraméter toohello feladat fiók létrehozását hoz létre.</span><span class="sxs-lookup"><span data-stu-id="9aef1-147">It then creates hello job account, passing hello jobaccount database as a parameter toohello job account creation call.</span></span>

## <a name="create-a-job-toodeploy-new-reference-data-tooall-tenants"></a><span data-ttu-id="9aef1-148">Hozzon létre egy feladatot toodeploy új hivatkozás adatok tooall bérlők</span><span class="sxs-lookup"><span data-stu-id="9aef1-148">Create a job toodeploy new reference data tooall tenants</span></span>

<span data-ttu-id="9aef1-149">Az egyes bérlői adatbázisok, amelyek meghatározzák az eseményeket, amelyek egy helyszínére, üzemeltetett hello típusú helyszínére típusok készletét tartalmazza.</span><span class="sxs-lookup"><span data-stu-id="9aef1-149">Each tenant database includes a set of venue types that define hello kind of events that are hosted at a venue.</span></span> <span data-ttu-id="9aef1-150">Ebben a gyakorlatban telepít egy frissítési tooall hello bérlői adatbázisok tooadd két további helyszínére típusok: *Motorkerékpárja Racing* és *úszó Club*.</span><span class="sxs-lookup"><span data-stu-id="9aef1-150">In this exercise, you deploy an update tooall hello tenant databases tooadd two additional venue types: *Motorcycle Racing* and *Swimming Club*.</span></span> <span data-ttu-id="9aef1-151">Helyszínére típusaival hello bérlői események alkalmazás látható toohello háttérkép felelnek meg.</span><span class="sxs-lookup"><span data-stu-id="9aef1-151">These venue types correspond toohello background image you see in hello tenant events app.</span></span>

<span data-ttu-id="9aef1-152">Hello helyszínére típus legördülő menüjében kattintson, és ellenőrizze, hogy csak 10 helyszínére típus lehetőségek érhetők el, és kifejezetten adott Motorkerékpárja Racing és az "Úszó Club" nem tartoznak hello listában.</span><span class="sxs-lookup"><span data-stu-id="9aef1-152">Click hello Venue Type drop down menu and validate that only 10 venue type options are available, and specifically that ‘Motorcycle Racing’ and ‘Swimming Club’ are not included in hello list.</span></span>

<span data-ttu-id="9aef1-153">Most hozzon létre egy feladat tooupdate hello *VenueTypes* tábla összes hello bérlői adatbázisokban, és adja hozzá a hello új helyszínére típusokat.</span><span class="sxs-lookup"><span data-stu-id="9aef1-153">Now let’s create a job tooupdate hello *VenueTypes* table in all hello tenant databases and add hello new venue types.</span></span>

<span data-ttu-id="9aef1-154">toocreate egy új feladatot, azt használata a feladatok rendszer tárolt eljárások hello feladat fiók létrehozásakor hello jobaccount adatbázisban létrehozni.</span><span class="sxs-lookup"><span data-stu-id="9aef1-154">toocreate a new job, we use a set of jobs system stored procedures created in hello jobaccount database when hello job account was created.</span></span>

1. <span data-ttu-id="9aef1-155">Nyissa meg a szolgáltatáshoz az SSMS és toohello katalóguskiszolgáló csatlakozzon: katalógus -\<felhasználói\>. database.windows.net kiszolgáló</span><span class="sxs-lookup"><span data-stu-id="9aef1-155">Open SSMS and connect toohello catalog server: catalog-\<user\>.database.windows.net server</span></span>
1. <span data-ttu-id="9aef1-156">Toohello bérlői kiszolgáló is csatlakozhat: tenants1 -\<felhasználói\>. database.windows.net</span><span class="sxs-lookup"><span data-stu-id="9aef1-156">Also connect toohello tenant server: tenants1-\<user\>.database.windows.net</span></span>
1. <span data-ttu-id="9aef1-157">Keresse meg a toohello *contosoconcerthall* hello adatbázis *tenants1* kiszolgáló és a lekérdezés hello *VenueTypes* tábla tooconfirm, amely *Motorkerékpárja Racing*  és *úszó Club* **nem** hello eredménylistában.</span><span class="sxs-lookup"><span data-stu-id="9aef1-157">Browse toohello *contosoconcerthall* database on hello *tenants1* server and query hello *VenueTypes* table tooconfirm that *Motorcycle Racing* and *Swimming Club* **are not** in hello results list.</span></span>
1. <span data-ttu-id="9aef1-158">Nyissa meg hello fájl... \\Tanulási modulok\\séma felügyeleti\\DeployReferenceData.sql</span><span class="sxs-lookup"><span data-stu-id="9aef1-158">Open hello file …\\Learning Modules\\Schema Management\\DeployReferenceData.sql</span></span>
1. <span data-ttu-id="9aef1-159">Hello utasítás módosítása: beállítása @wtpUser = &lt;felhasználói&gt; és helyettesítse hello Wingtip alkalmazás telepítésekor használt hello felhasználói érték</span><span class="sxs-lookup"><span data-stu-id="9aef1-159">Modify hello statement: SET @wtpUser = &lt;user&gt; and substitute hello User value used when you deployed hello Wingtip app</span></span>
1. <span data-ttu-id="9aef1-160">Győződjön meg arról, csatlakoztatott toohello jobaccount adatbázis, és nyomja le az **F5** hello parancsfájl futtatásához</span><span class="sxs-lookup"><span data-stu-id="9aef1-160">Ensure you are connected toohello jobaccount database and press **F5** to run hello script</span></span>

* <span data-ttu-id="9aef1-161">**SP\_hozzáadása\_cél\_csoport** hoz létre a hello célcsoport neve DemoServerGroup, igazolnia kell, hogy tooadd cél tagok most.</span><span class="sxs-lookup"><span data-stu-id="9aef1-161">**sp\_add\_target\_group** creates hello target group name DemoServerGroup, now we need tooadd target members.</span></span>
* <span data-ttu-id="9aef1-162">**SP\_hozzáadása\_cél\_csoport\_tag** ad hozzá egy *server* céloz tag típusa, amely úgy ítéli meg, hogy a kiszolgálón (Megjegyzés: Ez a hello tenants1-belüliösszesadatbázis&lt; Felhasználói&gt; hello bérlői adatbázisokat tartalmazó kiszolgáló) időpontban feladat végrehajtási fel kell venni hello feladat hello második hozzáadásával egy *adatbázis* tag céltípust, kifejezetten hello "arany" adatbázis () basetenantdb), amely a katalógus - helyezkedik el&lt;felhasználói&gt; kiszolgáló, és végül egy másik *adatbázis* csoport tag típusa tooinclude hello adhocanalytics céladatbázis egy újabb oktatóanyagban használt.</span><span class="sxs-lookup"><span data-stu-id="9aef1-162">**sp\_add\_target\_group\_member** adds a *server* target member type, which deems all databases within that server (note this is hello tenants1-&lt;User&gt; server containing hello tenant databases) at time of job execution should be included in hello job, hello second is adding a *database* target member type, specifically hello ‘golden’ database (basetenantdb) that resides on catalog-&lt;User&gt; server, and lastly another *database* target group member type tooinclude hello adhocanalytics database that is used in a later tutorial.</span></span>
* <span data-ttu-id="9aef1-163">Az **sp\_add\_job** létrehoz egy „Referenciaadat-telepítés” nevű feladatot</span><span class="sxs-lookup"><span data-stu-id="9aef1-163">**sp\_add\_job** creates a job called “Reference Data Deployment”</span></span>
* <span data-ttu-id="9aef1-164">**SP\_hozzáadása\_feladatlépés használja** hoz létre a T-SQL parancsot szöveg tooupdate hello referenciatábla, VenueTypes tartalmazó hello feladat lépésének</span><span class="sxs-lookup"><span data-stu-id="9aef1-164">**sp\_add\_jobstep** creates hello job step containing T-SQL command text tooupdate hello reference table, VenueTypes</span></span>
* <span data-ttu-id="9aef1-165">hello fennmaradó nézetek hello parancsfájl megjelenítése hello objektumok és a figyelő feladat végrehajtása hello megléte.</span><span class="sxs-lookup"><span data-stu-id="9aef1-165">hello remaining views in hello script display hello existence of hello objects and monitor job execution.</span></span> <span data-ttu-id="9aef1-166">Használja a lekérdezések tooreview hello állapotértéket hello **életciklus** amikor hello feladat sikeresen befejezte az összes bérlői és hello két további adatbázisait hello összefoglaló táblázatot tartalmazó oszlop toodetermine.</span><span class="sxs-lookup"><span data-stu-id="9aef1-166">Use these queries tooreview hello status value in hello **lifecycle** column toodetermine when hello job has successfully finished on all tenant databases and hello two additional databases containing hello reference table.</span></span>

1. <span data-ttu-id="9aef1-167">A szolgáltatáshoz az SSMS, keresse meg a toohello *contosoconcerthall* hello adatbázis *tenants1* kiszolgáló és a lekérdezés hello *VenueTypes* tábla tooconfirm, amely *Motorkerékpárja Racing* és *úszó Club* **vannak** most a hello eredmények listájában.</span><span class="sxs-lookup"><span data-stu-id="9aef1-167">In SSMS, browse toohello *contosoconcerthall* database on hello *tenants1* server and query hello *VenueTypes* table tooconfirm that *Motorcycle Racing* and *Swimming Club* **are** now in hello results list.</span></span>


## <a name="create-a-job-toomanage-hello-reference-table-index"></a><span data-ttu-id="9aef1-168">Egy feladat toomanage hello hivatkozás tábla index létrehozása</span><span class="sxs-lookup"><span data-stu-id="9aef1-168">Create a job toomanage hello reference table index</span></span>

<span data-ttu-id="9aef1-169">Hasonló toohello előző gyakorlat, ebben a gyakorlatban létrehoz egy feladat toorebuild hello index hello hivatkozás tábla elsődleges kulcsa, egy tipikus adatbázis felügyeleti műveletet a rendszergazda egy nagy méretű adatok betöltése után előfordulhat, hogy végre egy táblába.</span><span class="sxs-lookup"><span data-stu-id="9aef1-169">Similar toohello previous exercise, this exercise creates a job toorebuild hello index on hello reference table primary key, a typical database management operation an administrator might perform after a large data load into a table.</span></span>

<span data-ttu-id="9aef1-170">Hozzon létre egy feladatot, hello segítségével azonos feladatok "rendszer" tárolt eljárás.</span><span class="sxs-lookup"><span data-stu-id="9aef1-170">Create a job using hello same jobs 'system' stored procedures.</span></span>

1. <span data-ttu-id="9aef1-171">Nyissa meg a szolgáltatáshoz az SSMS, és csatlakozzon toohello katalógus -&lt;felhasználói&gt;. database.windows.net kiszolgáló</span><span class="sxs-lookup"><span data-stu-id="9aef1-171">Open SSMS and connect toohello catalog-&lt;User&gt;.database.windows.net server</span></span>
1. <span data-ttu-id="9aef1-172">Nyissa meg hello fájl... \\Tanulási modulok\\séma felügyeleti\\OnlineReindex.sql</span><span class="sxs-lookup"><span data-stu-id="9aef1-172">Open hello file …\\Learning Modules\\Schema Management\\OnlineReindex.sql</span></span>
1. <span data-ttu-id="9aef1-173">Kattintson a jobb gombbal, válassza ki a kapcsolat, csatlakozás toohello katalógus -&lt;felhasználói&gt;. database.windows.net kiszolgáló, ha még nincs csatlakoztatva</span><span class="sxs-lookup"><span data-stu-id="9aef1-173">Right click, select Connection, and connect toohello catalog-&lt;User&gt;.database.windows.net server, if not already connected</span></span>
1. <span data-ttu-id="9aef1-174">Győződjön meg arról, csatlakoztatott toohello jobaccount adatbázis, és nyomja le az F5 toorun hello parancsfájl</span><span class="sxs-lookup"><span data-stu-id="9aef1-174">Ensure you are connected toohello jobaccount database and press F5 toorun hello script</span></span>

* <span data-ttu-id="9aef1-175">Az sp\_add\_job létrehoz egy „Online Reindex PK\_\_VenueTyp\_\_265E44FD7FD4C885” nevű új feladatot</span><span class="sxs-lookup"><span data-stu-id="9aef1-175">sp\_add\_job creates a new job called “Online Reindex PK\_\_VenueTyp\_\_265E44FD7FD4C885”</span></span>
* <span data-ttu-id="9aef1-176">SP\_hozzáadása\_feladatlépés használja hello feladat lépésének T-SQL parancsot szöveges tooupdate hello indexet tartalmazó hoz létre.</span><span class="sxs-lookup"><span data-stu-id="9aef1-176">sp\_add\_jobstep creates hello job step containing T-SQL command text tooupdate hello index</span></span>




## <a name="next-steps"></a><span data-ttu-id="9aef1-177">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="9aef1-177">Next steps</span></span>

<span data-ttu-id="9aef1-178">Ez az oktatóanyag bemutatta, hogyan végezheti el az alábbi műveleteket:</span><span class="sxs-lookup"><span data-stu-id="9aef1-178">In this tutorial you learned how to:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="9aef1-179">Hozzon létre egy feladat fiók tooquery több bérlő között</span><span class="sxs-lookup"><span data-stu-id="9aef1-179">Create a job account tooquery across multiple tenants</span></span>
> * <span data-ttu-id="9aef1-180">Az összes bérlői adatbázis adatainak frissítése</span><span class="sxs-lookup"><span data-stu-id="9aef1-180">Update data in all tenant databases</span></span>
> * <span data-ttu-id="9aef1-181">Index létrehozása a táblához az összes bérlői adatbázisban</span><span class="sxs-lookup"><span data-stu-id="9aef1-181">Create an index on a table in all tenant databases</span></span>

[<span data-ttu-id="9aef1-182">Oktatóanyag alkalmi elemzéshez</span><span class="sxs-lookup"><span data-stu-id="9aef1-182">Ad-hoc analytics tutorial</span></span>](sql-database-saas-tutorial-adhoc-analytics.md)


## <a name="additional-resources"></a><span data-ttu-id="9aef1-183">További források</span><span class="sxs-lookup"><span data-stu-id="9aef1-183">Additional resources</span></span>

* [<span data-ttu-id="9aef1-184">További oktatóprogramot kínál, amelyek épül hello Wingtip SaaS-alkalmazás központi telepítése</span><span class="sxs-lookup"><span data-stu-id="9aef1-184">Additional tutorials that build upon hello Wingtip SaaS application deployment</span></span>](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)
* [<span data-ttu-id="9aef1-185">Kiterjesztett felhőalapú adatbázisok kezelése</span><span class="sxs-lookup"><span data-stu-id="9aef1-185">Managing scaled-out cloud databases</span></span>](sql-database-elastic-jobs-overview.md)
* [<span data-ttu-id="9aef1-186">Horizontálisan felskálázott felhőalapú adatbázisok létrehozása és kezelése</span><span class="sxs-lookup"><span data-stu-id="9aef1-186">Create and manage scaled-out cloud databases</span></span>](sql-database-elastic-jobs-create-and-manage.md)
