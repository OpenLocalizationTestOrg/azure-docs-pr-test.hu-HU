---
title: "Azure SQL Database használata magas rendelkezésre állású szolgáltatás aaaDesign |} Microsoft Docs"
description: "További tudnivalók az Azure SQL Database használata magas rendelkezésre állású szolgáltatások alkalmazás tervét."
keywords: "a felhő vész-helyreállítási, a vész-helyreállítási megoldások, az alkalmazás az adatok biztonsági mentése, a georeplikáció, üzleti folytonossági tervezése"
services: sql-database
documentationcenter: 
author: anosov1960
manager: jhubbard
editor: monicar
ms.assetid: e8a346ac-dd08-41e7-9685-46cebca04582
ms.service: sql-database
ms.custom: business continuity
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: data-management
ms.date: 04/21/2017
ms.author: sashan
ms.openlocfilehash: 815f754ba7014cd8a1108a2d84c2a8f71d7030a5
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/06/2017
---
# <a name="designing-highly-available-services-using-azure-sql-database"></a><span data-ttu-id="5f203-104">Azure SQL Database használata magas rendelkezésre állású szolgáltatások tervezése</span><span class="sxs-lookup"><span data-stu-id="5f203-104">Designing highly available services using Azure SQL Database</span></span>

<span data-ttu-id="5f203-105">Összeállításakor, és az Azure SQL Database-magas rendelkezésre állású szolgáltatások telepítése, használata [feladatátvételi csoportok és aktív georeplikáció](sql-database-geo-replication-overview.md) tooprovide rugalmasság tooregional hibák és katasztrofális kimaradások és engedélyezése gyors helyreállítás toohello másodlagos adatbázisok.</span><span class="sxs-lookup"><span data-stu-id="5f203-105">When building and deploying highly available services on Azure SQL Database, you use [failover groups and active geo-replication](sql-database-geo-replication-overview.md) tooprovide resilience tooregional failures and catastrophic outages and enable fast recovery toohello secondary databases.</span></span> <span data-ttu-id="5f203-106">A cikk általános alkalmazás-minták összpontosít, valamint ismerteti a hello előnyei és az egyes beállítások attól függően, hogy hello alkalmazás üzembe helyezés feltételeit, hello szolgáltatásiszint-szerződés rendszerre kompromisszumot forgalom késleltetés és a költségeket.</span><span class="sxs-lookup"><span data-stu-id="5f203-106">This article focuses on common application patterns and discusses hello benefits and trade-offs of each option depending on hello application deployment requirements, hello service level agreement you are targeting, traffic latency, and costs.</span></span> <span data-ttu-id="5f203-107">Aktív georeplikáció a rugalmas készletek kapcsolatos információkért lásd: [rugalmas készlet vész-helyreállítási stratégiák](sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool.md).</span><span class="sxs-lookup"><span data-stu-id="5f203-107">For information about active geo-replication with Elastic Pools, see [Elastic Pool disaster recovery strategies](sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool.md).</span></span>

## <a name="design-pattern-1-active-passive-deployment-for-cloud-disaster-recovery-with-a-co-located-database"></a><span data-ttu-id="5f203-108">1 a kialakítási mintában: aktív-passzív telepítési felhő vész-helyreállítási egy közös elhelyezésű adatbázis</span><span class="sxs-lookup"><span data-stu-id="5f203-108">Design pattern 1: Active-passive deployment for cloud disaster recovery with a co-located database</span></span>
<span data-ttu-id="5f203-109">Ez a beállítás bizonyul a legalkalmasabbnak alkalmazásokhoz a következő jellemzőkkel hello:</span><span class="sxs-lookup"><span data-stu-id="5f203-109">This option is best suited for applications with hello following characteristics:</span></span>

* <span data-ttu-id="5f203-110">Egy Azure-régió aktív példány</span><span class="sxs-lookup"><span data-stu-id="5f203-110">Active instance in a single Azure region</span></span>
* <span data-ttu-id="5f203-111">Olvasási és írási (RW) hozzáférési toodata erős függőség</span><span class="sxs-lookup"><span data-stu-id="5f203-111">Strong dependency on read-write (RW) access toodata</span></span>
* <span data-ttu-id="5f203-112">Kereszt-régió kapcsolat hello webalkalmazás és hello adatbázis között nincs elfogadható miatt toolatency és a forgalom költség</span><span class="sxs-lookup"><span data-stu-id="5f203-112">Cross-region connectivity between hello web application and hello database is not acceptable due toolatency and traffic cost</span></span>    

<span data-ttu-id="5f203-113">Ebben az esetben hello alkalmazás üzembe helyezési topológia regionális katasztrófák kezelésére, amikor az összes alkalmazás-összetevők érintett, és toofailover egységként kell megfelelően lett optimalizálva.</span><span class="sxs-lookup"><span data-stu-id="5f203-113">In this case, hello application deployment topology is optimized for handling regional disasters when all application components are impacted and need toofailover as a unit.</span></span> <span data-ttu-id="5f203-114">A földrajzi redundancia céljából hello úgy az alkalmazáslogikát és hello adatbázis replikált tooanother régió azonban nem használhatók hello alkalmazás munkaterhelés hello rendeltetésszerű.</span><span class="sxs-lookup"><span data-stu-id="5f203-114">For geographic redundancy, hello application logic and hello database are replicated tooanother region but they are not used for hello application workload under hello normal conditions.</span></span> <span data-ttu-id="5f203-115">hello alkalmazás hello másodlagos régióban konfigurált toouse SQL kapcsolódási karakterlánc toohello másodlagos adatbázis kell lennie.</span><span class="sxs-lookup"><span data-stu-id="5f203-115">hello application in hello secondary region should be configured toouse a SQL connection string toohello secondary database.</span></span> <span data-ttu-id="5f203-116">A TRAFFIC manager van beállítva toouse [feladatátvételi útválasztási módszer](../traffic-manager/traffic-manager-configure-failover-routing-method.md).</span><span class="sxs-lookup"><span data-stu-id="5f203-116">Traffic manager is set up toouse [failover routing method](../traffic-manager/traffic-manager-configure-failover-routing-method.md).</span></span>  

> [!NOTE]
> <span data-ttu-id="5f203-117">[Az Azure traffic manager](../traffic-manager/traffic-manager-overview.md) használja a rendszer keresztül ez a cikk csak illusztrációs célokat szolgálnak.</span><span class="sxs-lookup"><span data-stu-id="5f203-117">[Azure traffic manager](../traffic-manager/traffic-manager-overview.md) is used throughout this article for illustration purposes only.</span></span> <span data-ttu-id="5f203-118">Minden terheléselosztási megoldás, amely támogatja a feladatátvételi útválasztási módszer használható.</span><span class="sxs-lookup"><span data-stu-id="5f203-118">You can use any load-balancing solution that supports failover routing method.</span></span>    
>

<span data-ttu-id="5f203-119">a következő diagram hello ebben a konfigurációban, nem tervezett kimaradás előtt jeleníti meg.</span><span class="sxs-lookup"><span data-stu-id="5f203-119">hello following diagram shows this configuration before an outage.</span></span>

![SQL-adatbázis georeplikáció konfigurációs.](./media/sql-database-designing-cloud-solutions-for-disaster-recovery/pattern1-1.png)

<span data-ttu-id="5f203-122">Hello elsődleges régióban kimaradás után hello SQL Database szolgáltatás észleli, hogy hello az elsődleges adatbázis nem elérhető, és indítás, feladatátvétel toohello másodlagos adatbázis hello paraméterek hello automatikus feladatátvétel házirend alapján.</span><span class="sxs-lookup"><span data-stu-id="5f203-122">After an outage in hello primary region, hello SQL Database service detects that hello primary database is not accessible and trigger a failover toohello secondary database based on hello parameters of hello automatic failover policy.</span></span> <span data-ttu-id="5f203-123">Attól függően, hogy az alkalmazás SLA-t megadhatja, hogy tooconfigure türelmi időszak hello kimaradás hello észlelése és hello feladatátvételi magát.</span><span class="sxs-lookup"><span data-stu-id="5f203-123">Depending on your application SLA, you can decide tooconfigure a grace period between hello detection of hello outage and hello failover itself.</span></span> <span data-ttu-id="5f203-124">A türelmi időszak beállítása csökkenti az adatok elvesztését toohello esetekben, amikor hello kimaradás katasztrofális, és rendelkezésre állási hello régióban gyorsan visszaállítására hello kockázatát.</span><span class="sxs-lookup"><span data-stu-id="5f203-124">Configuring a grace period reduces hello risk of data loss toohello cases where hello outage is catastrophic and availability in hello region cannot be quickly restored.</span></span> <span data-ttu-id="5f203-125">Ha hello végpont feladatátvétel előtt hello feladatátvételi csoport eseményindítók hello hello adatbázis feladatátvétel hello a traffic manager által kezdeményezett, hello webes alkalmazás nem képes tooreconnect toohello adatbázis.</span><span class="sxs-lookup"><span data-stu-id="5f203-125">If hello endpoint failover is initiated by hello traffic manager before hello failover group triggers hello failover of hello database, hello web application is not able tooreconnect toohello database.</span></span> <span data-ttu-id="5f203-126">hello alkalmazás kísérlet tooreconnect automatikusan sikeres, amint hello adatbázis feladatátvétel befejezését.</span><span class="sxs-lookup"><span data-stu-id="5f203-126">hello application’s attempt tooreconnect automatically succeeds as soon as hello database failover completes.</span></span> 

> [!NOTE]
> <span data-ttu-id="5f203-127">tooachieve teljesen koordinált feladatátvételi hello alkalmazás és a hello adatbázisok, inkább megtervezi a saját figyelési módszert és kézi feladatátvételre hello webes alkalmazás végpontok és hello adatbázisok használatát.</span><span class="sxs-lookup"><span data-stu-id="5f203-127">tooachieve fully coordinated failover of hello application and hello databases, you should devise your own monitoring method and use manual failover of hello web application endpoints and hello databases.</span></span>
>

<span data-ttu-id="5f203-128">Hello alkalmazási végpontok és hello adatbázis hello feladatátvétele után hello alkalmazás újraindul hello régióban B hello felhasználói kérelmek feldolgozásához, és mert hello elsődleges adatbázis most maradnak hello adatbázis együtt B. régió Ebben a forgatókönyvben mutatja be a következő diagram hello.</span><span class="sxs-lookup"><span data-stu-id="5f203-128">After hello failover of both hello application’s endpoints and hello database completes, hello application will re-start processing hello user requests in hello region B and will remain co-located with hello database because hello primary database is now in region B. This scenario is illustrated in hello following diagram.</span></span> <span data-ttu-id="5f203-129">Az összes diagramokon folytonos vonal jelzi az aktív kapcsolatok, pontozott vonal jelzi felfüggesztett kapcsolatok és leállítási jelet művelet eseményindítók jelzi.</span><span class="sxs-lookup"><span data-stu-id="5f203-129">In all diagrams, solid lines indicate active connections, dotted lines indicate suspended connections, and stop signs indicate action triggers.</span></span>

![Georeplikáció: Feladatátvételi toosecondary adatbázis.](./media/sql-database-designing-cloud-solutions-for-disaster-recovery/pattern1-2.png)

<span data-ttu-id="5f203-132">Ha kimaradás hello másodlagos régióban, hello replikációs hivatkozás hello elsődleges és másodlagos adatbázis hello között fel van függesztve, de van hello feladatátvételi nem indulnak el, mert hello elsődleges adatbázis nem változik.</span><span class="sxs-lookup"><span data-stu-id="5f203-132">If an outage happens in hello secondary region, hello replication link between hello primary and hello secondary database is suspended but hello failover is not triggered because hello primary database is not impacted.</span></span> <span data-ttu-id="5f203-133">hello alkalmazás rendelkezésre állásának ebben az esetben nem változik, de hello alkalmazás működik kitett, és ezért nagyobb a veszélye esetben mindkét régió sikertelen egymás után.</span><span class="sxs-lookup"><span data-stu-id="5f203-133">hello application's availability is not changed in this case, but hello application operates exposed and therefore at higher risk in case both regions fail in succession.</span></span>

> [!NOTE]
> <span data-ttu-id="5f203-134">A vész-helyreállítási ajánlott alkalmazás központi telepítési korlátozott tootwo régiók hello-konfiguráció.</span><span class="sxs-lookup"><span data-stu-id="5f203-134">For disaster recovery we recommend hello configuration with application deployment limited tootwo regions.</span></span> <span data-ttu-id="5f203-135">Ez azért, mert a legtöbb hello Azure földrajzi kell csak két régióban.</span><span class="sxs-lookup"><span data-stu-id="5f203-135">This is because most of hello Azure geographies have only two regions.</span></span> <span data-ttu-id="5f203-136">Ez a konfiguráció számára nem nyújt védelmet az alkalmazás mindkét régió egyidejű katasztrofális hibája esetén.</span><span class="sxs-lookup"><span data-stu-id="5f203-136">This configuration will not protect your application from a simultaneous catastrophic failure of both regions.</span></span>  <span data-ttu-id="5f203-137">Ilyen hiba valószínű esetben helyreállíthatja az adatbázisokat egy harmadik régiót használva [georedundáns helyreállítás művelet](sql-database-disaster-recovery.md#recover-using-geo-restore).</span><span class="sxs-lookup"><span data-stu-id="5f203-137">In an unlikely event of such a failure, you can recover your databases in a third region using [geo-restore operation](sql-database-disaster-recovery.md#recover-using-geo-restore).</span></span>
>

<span data-ttu-id="5f203-138">Miután hello kimaradás elhárítására, hello másodlagos adatbázis a rendszer automatikusan újra szinkronizálja hello elsődleges.</span><span class="sxs-lookup"><span data-stu-id="5f203-138">Once hello outage is mitigated, hello secondary database will automatically re-synchronize with hello primary.</span></span> <span data-ttu-id="5f203-139">A szinkronizálás során elsődleges hello teljesítményének sikerült némileg negatív hatással lehet attól függően, hogy hello adatmennyiséget, amelyet a toobe szinkronizálva.</span><span class="sxs-lookup"><span data-stu-id="5f203-139">During synchronization, performance of hello primary could be slightly impacted depending on hello amount of data that needs toobe synchronized.</span></span> <span data-ttu-id="5f203-140">hello következő diagram azt ábrázolja kimaradás hello másodlagos régióban.</span><span class="sxs-lookup"><span data-stu-id="5f203-140">hello following diagram illustrates an outage in hello secondary region.</span></span>

![Másodlagos adatbázis elsődleges szinkronizálva.](./media/sql-database-designing-cloud-solutions-for-disaster-recovery/pattern1-3.png)

<span data-ttu-id="5f203-143">hello kulcs **előnyeit** ebben a kialakítási mintában a rendszer:</span><span class="sxs-lookup"><span data-stu-id="5f203-143">hello key **advantages** of this design pattern are:</span></span>

* <span data-ttu-id="5f203-144">hello ugyanarra a webes alkalmazásra telepített tooboth régiók régióspecifikus beállításra, és további logikát tooreact toohello feladatátvételi nélkül.</span><span class="sxs-lookup"><span data-stu-id="5f203-144">hello same web application is deployed tooboth regions without any region-specific configuration and no additional logic tooreact toohello failover.</span></span> 
* <span data-ttu-id="5f203-145">hello alkalmazások teljesítménye nincs hatással a feladatátvételi hello webalkalmazásként való kezelése és hello adatbázis mindig közös elhelyezésű.</span><span class="sxs-lookup"><span data-stu-id="5f203-145">hello application's performance is not impacted by failover as hello web application and hello database are always co-located.</span></span>

<span data-ttu-id="5f203-146">fő hello **kompromisszumot** , hogy hello redundáns alkalmazás hello másodlagos régióban példány csak a vész-helyreállítási használatos.</span><span class="sxs-lookup"><span data-stu-id="5f203-146">hello main **tradeoff** is that hello redundant application instance in hello secondary region is only used for disaster recovery.</span></span>

## <a name="design-pattern-2-active-active-deployment-for-application-load-balancing"></a><span data-ttu-id="5f203-147">A kialakításban 2: aktív-aktív központi telepítés alkalmazás terheléselosztás</span><span class="sxs-lookup"><span data-stu-id="5f203-147">Design pattern 2: Active-active deployment for application load balancing</span></span>
<span data-ttu-id="5f203-148">A felhő vész helyreállítási lehetőség alkalmazásokhoz legmegfelelőbb hello a következő jellemzőkkel:</span><span class="sxs-lookup"><span data-stu-id="5f203-148">This cloud disaster recovery option is best suited for applications with hello following characteristics:</span></span>

* <span data-ttu-id="5f203-149">Adatbázis magas aránya toowrites olvassa be</span><span class="sxs-lookup"><span data-stu-id="5f203-149">High ratio of database reads toowrites</span></span>
* <span data-ttu-id="5f203-150">Adatbázis olvasási késése lényegesebb hello végfelhasználói élmény, mint hello írási késése</span><span class="sxs-lookup"><span data-stu-id="5f203-150">Database read latency is more critical for hello end-user experience than hello write latency</span></span> 
* <span data-ttu-id="5f203-151">Csak olvasható logika elkülöníthető írható-olvasható logika különböző kapcsolati karakterlánc használatával</span><span class="sxs-lookup"><span data-stu-id="5f203-151">Read-only logic can be separated from read-write logic by using a different connection string</span></span>
* <span data-ttu-id="5f203-152">Csak olvasható logika nem függ a teljes szinkronizálás folyik hello legújabb frissítéseinek adatok</span><span class="sxs-lookup"><span data-stu-id="5f203-152">Read-only logic does not depend on data being fully synchronized with hello latest updates</span></span>  

<span data-ttu-id="5f203-153">Ha az alkalmazások a következő jellemzőkkel rendelkezik, terheléselosztásának hello végfelhasználói kapcsolatok különböző régiókban több alkalmazáspéldányt jelentősen növelheti hello általános végfelhasználói élmény.</span><span class="sxs-lookup"><span data-stu-id="5f203-153">If your applications have these characteristics, load balancing hello end-user connections across multiple application instances in different regions can substantially improve hello overall end-user experience.</span></span> <span data-ttu-id="5f203-154">Két hello régiók szerint hello vész-Helyreállítási pár kell kiválasztani, és hello feladatátvételi csoport e régiók hello adatbázisok tartalmaznia kell.</span><span class="sxs-lookup"><span data-stu-id="5f203-154">Two of hello regions should be selected as hello DR pair and hello failover group should include hello databases in these regions.</span></span> <span data-ttu-id="5f203-155">tooimplement terheléselosztás, minden egyes régió hello alkalmazás aktív példányának hello feladatátvételi csoport hello írható-olvasható (RW) kapcsolódó logika toohello írható-olvasható figyelő végponttal kell rendelkeznie.</span><span class="sxs-lookup"><span data-stu-id="5f203-155">tooimplement load-balancing, each region should have an active instance of hello application with hello read-write (RW) logic connected toohello read-write listener endpoint of hello failover group.</span></span> <span data-ttu-id="5f203-156">Ez garantálja, hogy a feladatátvétel hello automatikusan indul el, ha hello elsődleges adatbázis kimaradás van hatással.</span><span class="sxs-lookup"><span data-stu-id="5f203-156">It will guarantee that hello failover will be automatically initiated if hello primary database is impacted by an outage.</span></span> <span data-ttu-id="5f203-157">hello csak olvasható (RO) lévő logika hello webalkalmazás közvetlenül az adott régióban toohello adatbázis csatlakoznia.</span><span class="sxs-lookup"><span data-stu-id="5f203-157">hello read-only logic (RO) in hello web application should connect directly toohello database in that region.</span></span> <span data-ttu-id="5f203-158">A TRAFFIC manager toouse kell beállítani [teljesítmény útválasztási](../traffic-manager/traffic-manager-configure-performance-routing-method.md) rendelkező [végpont figyelési](../traffic-manager/traffic-manager-monitoring.md) minden egyes alkalmazás-példány engedélyezve van.</span><span class="sxs-lookup"><span data-stu-id="5f203-158">Traffic manager should be set up toouse [performance routing](../traffic-manager/traffic-manager-configure-performance-routing-method.md) with [end-point monitoring](../traffic-manager/traffic-manager-monitoring.md) enabled for each application instance.</span></span>

<span data-ttu-id="5f203-159">Mint #1 mintát érdemes lehet hasonló figyelési kérelem telepítése.</span><span class="sxs-lookup"><span data-stu-id="5f203-159">As in pattern #1, you should consider deploying a similar monitoring application.</span></span> <span data-ttu-id="5f203-160">De eltérően #1 mintában alkalmazás hello nem hello végpont feladatátvételi kiváltásáért felelős.</span><span class="sxs-lookup"><span data-stu-id="5f203-160">But unlike pattern #1, hello monitoring application will not be responsible for triggering hello end-point failover.</span></span>

> [!NOTE]
> <span data-ttu-id="5f203-161">Amíg ez a minta egynél több másodlagos adatbázist használ, csak másodlagos régióban b. hello a feladatátvételre használni, és hello feladatátvételi csoport részének kell lennie.</span><span class="sxs-lookup"><span data-stu-id="5f203-161">While this pattern uses more than one secondary database, only hello secondary in Region B  would be used for failover and should be part of hello failover group.</span></span>
>

<span data-ttu-id="5f203-162">A TRAFFIC manager teljesítmény útválasztási toodirect hello felhasználói kapcsolatok toohello alkalmazás példány legközelebbi toohello felhasználó földrajzi helye kell konfigurálni.</span><span class="sxs-lookup"><span data-stu-id="5f203-162">Traffic manager should be configured for performance routing toodirect hello user connections toohello application instance closest toohello user's geographic location.</span></span> <span data-ttu-id="5f203-163">a következő diagram hello ebben a konfigurációban, nem tervezett kimaradás előtt mutatja be.</span><span class="sxs-lookup"><span data-stu-id="5f203-163">hello following diagram illustrates this configuration before an outage.</span></span>

![Nincs leállás: teljesítmény útválasztási toonearest alkalmazás.](./media/sql-database-designing-cloud-solutions-for-disaster-recovery/pattern2-1.png)

<span data-ttu-id="5f203-166">Ha egy adatbázis leállás hello régióban A észlel, hello feladatátvételi csoport automatikusan indít el hello elsődleges adatbázis a terület A toohello másodlagos régióban b feladatainak átvétele Hello írható-olvasható figyelő végpont tooregion B, írható-olvasható kapcsolatok hello webalkalmazásban hatása nem lesz automatikusan frissíti.</span><span class="sxs-lookup"><span data-stu-id="5f203-166">If a database outage is detected in hello region A, hello failover group will automatically initiate failover of hello primary database in region A toohello secondary in region B. It will also automatically update hello read-write listener endpoint tooregion B so read-write connections in hello web application will not be impacted.</span></span> <span data-ttu-id="5f203-167">hello a traffic manager amelyeket kihagy a hello útvonaltábla hello offline végpontja, de továbbra is útválasztási hello végfelhasználói forgalom toohello további online példányai.</span><span class="sxs-lookup"><span data-stu-id="5f203-167">hello traffic manager will exclude hello offline end-point from hello routing table but will continue routing hello end-user traffic toohello remaining online instances.</span></span> <span data-ttu-id="5f203-168">hello írásvédett SQL kapcsolati karakterláncok nem befolyásolja a hello toohello adatbázis mindig mutatnak, ugyanabban a régióban.</span><span class="sxs-lookup"><span data-stu-id="5f203-168">hello read-only SQL connection strings will not be impacted as they always point toohello database in hello same region.</span></span> 

<span data-ttu-id="5f203-169">hello a következő ábra azt mutatja be, új konfigurációs hello hello feladatátvételt követően.</span><span class="sxs-lookup"><span data-stu-id="5f203-169">hello following diagram illustrates hello new configuration after hello failover.</span></span>

![Konfigurációs feladatátvételt követően.](./media/sql-database-designing-cloud-solutions-for-disaster-recovery/pattern2-2.png)

<span data-ttu-id="5f203-172">Egy másodlagos régióban hello kimaradás esetén hello a traffic manager automatikusan eltávolítja hello offline végpontot az adott régióban hello útválasztási táblázathoz.</span><span class="sxs-lookup"><span data-stu-id="5f203-172">In case of an outage in one of hello secondary regions, hello traffic manager will automatically remove hello offline end-point in that region from hello routing table.</span></span> <span data-ttu-id="5f203-173">hello replikációs csatorna toohello másodlagos adatbázis az adott régióban fel lesz függesztve.</span><span class="sxs-lookup"><span data-stu-id="5f203-173">hello replication channel toohello secondary database in that region will be suspended.</span></span> <span data-ttu-id="5f203-174">Hello fennmaradó régiók további felhasználói forgalom beolvasása ebben a forgatókönyvben, mert hello alkalmazások teljesítménye érintett hello kimaradás során.</span><span class="sxs-lookup"><span data-stu-id="5f203-174">Because hello remaining regions get additional user traffic in this scenario, hello application's performance will be impacted during hello outage.</span></span> <span data-ttu-id="5f203-175">Hello kimaradás elhárítására, miután hello hello érintett régióban másodlagos adatbázis azonnal szinkronizálja az elsődleges hello.</span><span class="sxs-lookup"><span data-stu-id="5f203-175">Once hello outage is mitigated, hello secondary database in hello impacted region will be immediately synchronized with hello primary.</span></span> <span data-ttu-id="5f203-176">Hello során elsődleges hello szinkronizálás teljesítményének sikerült némileg negatív hatással lehet attól függően, hogy hello adatmennyiséget, amelyet a toobe szinkronizálva.</span><span class="sxs-lookup"><span data-stu-id="5f203-176">During hello synchronization performance of hello primary could be slightly impacted depending on hello amount of data that needs toobe synchronized.</span></span> <span data-ttu-id="5f203-177">a következő diagram hello régióban b kimaradás mutatja be.</span><span class="sxs-lookup"><span data-stu-id="5f203-177">hello following diagram illustrates an outage in region B.</span></span>

![Ezen kívül az másodlagos régióba.](./media/sql-database-designing-cloud-solutions-for-disaster-recovery/pattern2-3.png)

<span data-ttu-id="5f203-180">hello kulcs **előny** Ez a kialakítás minta az, hogy hello alkalmazás munkaterhelés méretezheti több másodlagos adatbázist tooachieve hello végfelhasználói optimális teljesítménye között.</span><span class="sxs-lookup"><span data-stu-id="5f203-180">hello key **advantage** of this design pattern is that you can scale hello application workload across multiple secondaries tooachieve hello optimal end-user performance.</span></span> <span data-ttu-id="5f203-181">Hello **mellékhatásokkal** ezt a beállítást a rendszer:</span><span class="sxs-lookup"><span data-stu-id="5f203-181">hello **tradeoffs** of this option are:</span></span>

* <span data-ttu-id="5f203-182">Olvasási és írási kapcsolatok hello alkalmazáspéldányok és az adatbázis közötti rendelkeznek, különböző késést és költség</span><span class="sxs-lookup"><span data-stu-id="5f203-182">Read-write connections between hello application instances and database have varying latency and cost</span></span>
* <span data-ttu-id="5f203-183">Alkalmazás teljesítményre hello kimaradás során</span><span class="sxs-lookup"><span data-stu-id="5f203-183">Application performance is impacted during hello outage</span></span>

> [!NOTE]
> <span data-ttu-id="5f203-184">A hasonló megközelítést használható toooffload kifejezetten munkaterhelések esetén, mint jelentéskészítési feladatok, a business intelligence eszközök vagy a biztonsági másolatok.</span><span class="sxs-lookup"><span data-stu-id="5f203-184">A similar approach can be used toooffload specialized workloads such as reporting jobs, business intelligence tools, or backups.</span></span> <span data-ttu-id="5f203-185">Általában az ilyen terhelések jelentős adatbázis erőforrások kihasználásához ezért javasoljuk, hogy jelöljön ki egy hello másodlagos adatbázisok számukra a hello teljesítmény szintű egyező toohello várható terhelési.</span><span class="sxs-lookup"><span data-stu-id="5f203-185">Typically, these workloads consume significant database resources therefore it is recommended that you designate one of hello secondary databases for them with hello performance level matched toohello anticipated workload.</span></span>
>

## <a name="design-pattern-3-active-passive-deployment-for-data-preservation"></a><span data-ttu-id="5f203-186">A kialakításban 3: aktív-passzív telepítési az adatok megőrzése</span><span class="sxs-lookup"><span data-stu-id="5f203-186">Design pattern 3: Active-passive deployment for data preservation</span></span>
<span data-ttu-id="5f203-187">Ez a beállítás bizonyul a legalkalmasabbnak alkalmazásokhoz a következő jellemzőkkel hello:</span><span class="sxs-lookup"><span data-stu-id="5f203-187">This option is best suited for applications with hello following characteristics:</span></span>

* <span data-ttu-id="5f203-188">Az adatvesztés nagy üzleti áll.</span><span class="sxs-lookup"><span data-stu-id="5f203-188">Any data loss is high business risk.</span></span> <span data-ttu-id="5f203-189">hello adatbázis feladatátvételi csak használható utolsó lehetőségként katasztrofális hello kimaradás esetén.</span><span class="sxs-lookup"><span data-stu-id="5f203-189">hello database failover can only be used as a last resort if hello outage is catastrophic.</span></span>
* <span data-ttu-id="5f203-190">hello alkalmazás műveletek csak olvasható és írható-olvasható módot támogat, és egy ideig működhet "csak olvasható módban".</span><span class="sxs-lookup"><span data-stu-id="5f203-190">hello application supports read-only and read-write modes of operations and can operate in "read-only mode" for a period of time.</span></span>

<span data-ttu-id="5f203-191">Ebben a mintában hello alkalmazás csak tooread vált, időtúllépési hibák hello írható-olvasható kapcsolatok indításakor.</span><span class="sxs-lookup"><span data-stu-id="5f203-191">In this pattern, hello application switches tooread-only mode when hello read-write connections start getting time-out errors.</span></span> <span data-ttu-id="5f203-192">Webalkalmazás hello telepített tooboth régiók és a csatlakozási toohello írható-olvasható figyelő végpont és a különböző csatlakozási toohello írásvédett figyelő végpont tartalmazza.</span><span class="sxs-lookup"><span data-stu-id="5f203-192">hello Web Application is deployed tooboth regions and include a connection toohello read-write listener endpoint and different connection toohello read-only listener endpoint.</span></span> <span data-ttu-id="5f203-193">hello a Traffic manager toouse kell beállítani [feladatátvételi útválasztási](../traffic-manager/traffic-manager-configure-failover-routing-method.md) rendelkező [végpont figyelési](../traffic-manager/traffic-manager-monitoring.md) hello alkalmazás végpont minden régióban engedélyezve van.</span><span class="sxs-lookup"><span data-stu-id="5f203-193">hello Traffic manager should be set up toouse [failover routing](../traffic-manager/traffic-manager-configure-failover-routing-method.md) with [end-point monitoring](../traffic-manager/traffic-manager-monitoring.md) enabled for hello application endpoint in each region.</span></span>

<span data-ttu-id="5f203-194">a következő diagram hello ebben a konfigurációban, nem tervezett kimaradás előtt mutatja be.</span><span class="sxs-lookup"><span data-stu-id="5f203-194">hello following diagram illustrates this configuration before an outage.</span></span>

![Aktív-passzív telepítési feladatátvétel előtt.](./media/sql-database-designing-cloud-solutions-for-disaster-recovery/pattern3-1.png)

<span data-ttu-id="5f203-197">Amikor hello a traffic manager azt észleli, hogy a kapcsolat hibája tooregion A, automatikusan vált felhasználói forgalom toohello alkalmazáspéldány régióban a b kiszolgálóra. Ebben a mintában fontos, hogy állítsa hello türelmi időszak adatok elvesztését tooa elég magas érték, például 24 óra.</span><span class="sxs-lookup"><span data-stu-id="5f203-197">When hello traffic manager detects a connectivity failure tooregion A, it automatically switches user traffic toohello application instance in region B. With this pattern, it is important that you set hello grace period with data loss tooa sufficiently high value, e.g. 24 hours.</span></span> <span data-ttu-id="5f203-198">Biztosítja, hogy adatvesztés megakadályozta, ha hello kimaradás elhárítására adott időn belül.</span><span class="sxs-lookup"><span data-stu-id="5f203-198">It will ensure that data loss is prevented if hello outage is mitigated within that time.</span></span> <span data-ttu-id="5f203-199">Webes alkalmazás hello régióban B hello aktiválásakor hello olvasási és írási műveletek indul sikertelenek lesznek.</span><span class="sxs-lookup"><span data-stu-id="5f203-199">When hello Web application in hello region B is activated hello read-write operations will start failing.</span></span> <span data-ttu-id="5f203-200">Ezen a ponton akkor át kell váltania toohello írásvédett módban.</span><span class="sxs-lookup"><span data-stu-id="5f203-200">At that point, it should switch toohello read-only mode.</span></span> <span data-ttu-id="5f203-201">Ez a mód hello kérelmek lesz automatikusan irányított toohello másodlagos adatbázis.</span><span class="sxs-lookup"><span data-stu-id="5f203-201">In this mode hello requests will be automatically routed toohello secondary database.</span></span> <span data-ttu-id="5f203-202">Hello esetében egy végzetes hiba hello Leállás nem szüntethető hello türelmi időszakon belül, és hello feladatátvételi csoport hello feladatátvételt indít.</span><span class="sxs-lookup"><span data-stu-id="5f203-202">In hello case of a catastrophic failure hello outage will not be mitigated within hello grace period and hello failover group will trigger hello failover.</span></span> <span data-ttu-id="5f203-203">Adott hello után írható-olvasható figyelő is elérhető lesz, és hello hívások tooit leáll sikertelenek lesznek.</span><span class="sxs-lookup"><span data-stu-id="5f203-203">After that hello read-write listener will become available and hello calls tooit will stop failing.</span></span> <span data-ttu-id="5f203-204">Ezt hello a következő ábra szemlélteti.</span><span class="sxs-lookup"><span data-stu-id="5f203-204">This is illustrated by hello following diagram.</span></span>

![Kimaradás: Alkalmazás csak olvasható módban.](./media/sql-database-designing-cloud-solutions-for-disaster-recovery/pattern3-2.png)

<span data-ttu-id="5f203-207">Hello kívül az elsődleges régióban hello elhárítására hello türelmi időszakon belül, a traffic manager érzékeli hello helyreállítása a kapcsolat elsődleges régióban hello és felhasználói forgalom hátsó toohello alkalmazáspéldány régióban A. vált Adott alkalmazáspéldány után folytatja működését, és hello elsődleges adatbázis használatával régióban A. írható-olvasható módban működik</span><span class="sxs-lookup"><span data-stu-id="5f203-207">If hello outage in hello primary region is mitigated within hello grace period, traffic manager detects hello restoration of connectivity in hello primary region and switches user traffic back toohello application instance in region A. That application instance resumes and operates in read-write mode using hello primary database in region A.</span></span>

<span data-ttu-id="5f203-208">Hello régióban B kimaradás esetén hello a traffic manager hello alkalmazás végpont hello hibát észlel terület B és hello feladatátvételi csoport kapcsolók hello írásvédett figyelő tooregion A. A leállás nem befolyásolja a hello végfelhasználói élményt, de hello elsődleges adatbázis elérhetővé tehető hello kimaradás során.</span><span class="sxs-lookup"><span data-stu-id="5f203-208">In case of an outage in hello region B, hello traffic manager detects hello failure of hello application end-point in region B and hello failover group switches hello read-only listener tooregion A. This outage does not impact hello end-user experience but hello primary database will be exposed during hello outage.</span></span> <span data-ttu-id="5f203-209">Ezt hello a következő ábra szemlélteti.</span><span class="sxs-lookup"><span data-stu-id="5f203-209">This is illustrated by hello following diagram.</span></span>

![Kimaradás: Másodlagos adatbázishoz.](./media/sql-database-designing-cloud-solutions-for-disaster-recovery/pattern3-3.png)

<span data-ttu-id="5f203-212">Hello kimaradás elhárítására, miután hello másodlagos adatbázis azonnal szinkronizálva hello elsődleges és hello írásvédett figyelő kapcsolt hátsó toohello másodlagos adatbázis régióban a b kiszolgálóra. A szinkronizálás során elsődleges hello teljesítményének sikerült némileg negatív hatással lehet attól függően, hogy hello adatmennyiséget, amelyet a toobe szinkronizálva.</span><span class="sxs-lookup"><span data-stu-id="5f203-212">Once hello outage is mitigated, hello secondary database is immediately synchronized with hello primary and hello read-only listener is switched back toohello secondary database in region B. During synchronization performance of hello primary could be slightly impacted depending on hello amount of data that needs toobe synchronized.</span></span>

<span data-ttu-id="5f203-213">Ebben a kialakításban van több **előnyeit**:</span><span class="sxs-lookup"><span data-stu-id="5f203-213">This design pattern has several **advantages**:</span></span>

* <span data-ttu-id="5f203-214">Adatvesztés Ezzel elkerülheti hello átmeneti kimaradásainak során.</span><span class="sxs-lookup"><span data-stu-id="5f203-214">It avoids data loss during hello temporary outages.</span></span>
* <span data-ttu-id="5f203-215">Állásidő csak milyen gyorsan a traffic manager észleli hello csatlakozási hiba, amely konfigurálható függ.</span><span class="sxs-lookup"><span data-stu-id="5f203-215">Downtime depends only on how quickly traffic manager detects hello connectivity failure, which is configurable.</span></span>

<span data-ttu-id="5f203-216">Hello **kompromisszumot** van:</span><span class="sxs-lookup"><span data-stu-id="5f203-216">hello **tradeoff** is:</span></span>

* <span data-ttu-id="5f203-217">Alkalmazás képes toooperate kell lennie, csak olvasható módban.</span><span class="sxs-lookup"><span data-stu-id="5f203-217">Application must be able toooperate in read-only mode.</span></span>

> [!NOTE]
> <span data-ttu-id="5f203-218">Állandó szolgáltatáskimaradás hello régióban esetén manuálisan aktiválásakor adatbázis feladatátvétel és fogadja el a hello adatvesztés.</span><span class="sxs-lookup"><span data-stu-id="5f203-218">In case of a permanent service outage in hello region, you manually activate database failover and accept hello data loss.</span></span> <span data-ttu-id="5f203-219">az olvasási és írási hozzáférése toohello database hello másodlagos régióban hello alkalmazás fognak működni.</span><span class="sxs-lookup"><span data-stu-id="5f203-219">hello application will be functional in hello secondary region with read-write access toohello database.</span></span>
>

## <a name="business-continuity-planning-choose-an-application-design-for-cloud-disaster-recovery"></a><span data-ttu-id="5f203-220">Üzleti folytonosság tervezési: Válasszon egy alkalmazás tervét felhő katasztrófa utáni helyreállítás</span><span class="sxs-lookup"><span data-stu-id="5f203-220">Business continuity planning: Choose an application design for cloud disaster recovery</span></span>
<span data-ttu-id="5f203-221">Egyes adott felhőalapú vész-helyreállítási stratégiát kombinálhatja, vagy ezek a kialakítási minták toobest igazodhat hello az alkalmazás igényeinek megfelelően bővítheti.</span><span class="sxs-lookup"><span data-stu-id="5f203-221">Your specific cloud disaster recovery strategy can combine or extend these design patterns toobest meet hello needs of your application.</span></span>  <span data-ttu-id="5f203-222">A korábban említett hello stratégia hello SLA-t szeretné toooffer tooyour ügyfelei és alkalmazás üzembe helyezési topológia hello alapul.</span><span class="sxs-lookup"><span data-stu-id="5f203-222">As mentioned earlier, hello strategy you choose is based on hello SLA you want toooffer tooyour customers and hello application deployment topology.</span></span> <span data-ttu-id="5f203-223">toohelp útmutató döntés, hello a következő táblázat összehasonlítja hello döntések hello becsült adatok elvesztése vagy a helyreállítási időkorlát (RPO) és a becsült helyreállítási idő (Beszúrása) alapján.</span><span class="sxs-lookup"><span data-stu-id="5f203-223">toohelp guide your decision, hello following table compares hello choices based on hello estimated data loss or recovery point objective (RPO) and estimated recovery time (ERT).</span></span>

| <span data-ttu-id="5f203-224">Minta</span><span class="sxs-lookup"><span data-stu-id="5f203-224">Pattern</span></span> | <span data-ttu-id="5f203-225">A HELYREÁLLÍTÁSI IDŐKORLÁT</span><span class="sxs-lookup"><span data-stu-id="5f203-225">RPO</span></span> | <span data-ttu-id="5f203-226">BESZÚRÁSA</span><span class="sxs-lookup"><span data-stu-id="5f203-226">ERT</span></span> |
|:--- |:--- |:--- |
| <span data-ttu-id="5f203-227">Aktív-passzív telepítési közös elhelyezésű adatbázis-hozzáférést katasztrófa utáni helyreállítás</span><span class="sxs-lookup"><span data-stu-id="5f203-227">Active-passive deployment for disaster recovery with co-located database access</span></span> |<span data-ttu-id="5f203-228">Olvasási és írási hozzáférése < 5 másodperc</span><span class="sxs-lookup"><span data-stu-id="5f203-228">Read-write access < 5 sec</span></span> |<span data-ttu-id="5f203-229">Hiba észlelése időpontja + a DNS-élettartam</span><span class="sxs-lookup"><span data-stu-id="5f203-229">Failure detection time + DNS TTL</span></span> |
| <span data-ttu-id="5f203-230">Aktív-aktív központi telepítés alkalmazás terheléselosztás</span><span class="sxs-lookup"><span data-stu-id="5f203-230">Active-active deployment for application load balancing</span></span> |<span data-ttu-id="5f203-231">Olvasási és írási hozzáférése < 5 másodperc</span><span class="sxs-lookup"><span data-stu-id="5f203-231">Read-write access < 5 sec</span></span> |<span data-ttu-id="5f203-232">Hiba észlelése időpontja + a DNS-élettartam</span><span class="sxs-lookup"><span data-stu-id="5f203-232">Failure detection time + DNS TTL</span></span> |
| <span data-ttu-id="5f203-233">Aktív-passzív telepítési az adatok megőrzése</span><span class="sxs-lookup"><span data-stu-id="5f203-233">Active-passive deployment for data preservation</span></span> |<span data-ttu-id="5f203-234">Csak olvasási hozzáféréssel < 5 másodperc</span><span class="sxs-lookup"><span data-stu-id="5f203-234">Read-only access < 5 sec</span></span> | <span data-ttu-id="5f203-235">Csak olvasási hozzáféréssel = 0</span><span class="sxs-lookup"><span data-stu-id="5f203-235">Read-only access = 0</span></span> |
||<span data-ttu-id="5f203-236">Olvasási és írási hozzáférése = nulla</span><span class="sxs-lookup"><span data-stu-id="5f203-236">Read-write access = zero</span></span> | <span data-ttu-id="5f203-237">Olvasási és írási hozzáférése = hiba észlelés ideje + adatvesztéssel türelmi időszak</span><span class="sxs-lookup"><span data-stu-id="5f203-237">Read-write access = Failure detection time + grace period with data loss</span></span> |
|||

## <a name="next-steps"></a><span data-ttu-id="5f203-238">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="5f203-238">Next steps</span></span>
* <span data-ttu-id="5f203-239">tudnivalók Azure SQL adatbázis automatikus biztonsági mentés, toolearn lásd: [SQL-adatbázis automatikus biztonsági mentés](sql-database-automated-backups.md)</span><span class="sxs-lookup"><span data-stu-id="5f203-239">toolearn about Azure SQL Database automated backups, see [SQL Database automated backups](sql-database-automated-backups.md)</span></span>
* <span data-ttu-id="5f203-240">Egy üzleti folytonosság – áttekintés és forgatókönyvek: [üzleti folytonosság – áttekintés](sql-database-business-continuity.md)</span><span class="sxs-lookup"><span data-stu-id="5f203-240">For a business continuity overview and scenarios, see [Business continuity overview](sql-database-business-continuity.md)</span></span>
* <span data-ttu-id="5f203-241">toolearn a helyreállításhoz, az automatikus biztonsági mentés használatával kapcsolatban lásd: [adatbázis visszaállítása biztonsági másolatból hello szolgáltatás által kezdeményezett](sql-database-recovery-using-backups.md)</span><span class="sxs-lookup"><span data-stu-id="5f203-241">toolearn about using automated backups for recovery, see [restore a database from hello service-initiated backups](sql-database-recovery-using-backups.md)</span></span>
* <span data-ttu-id="5f203-242">toolearn gyorsabb helyreállítási beállításokkal kapcsolatban lásd: [aktív georeplikáció](sql-database-geo-replication-overview.md)</span><span class="sxs-lookup"><span data-stu-id="5f203-242">toolearn about faster recovery options, see [active geo-replication](sql-database-geo-replication-overview.md)</span></span>  
* <span data-ttu-id="5f203-243">toolearn tartalmaznak, az automatikus biztonsági mentés használatával kapcsolatban lásd: [adatbázis másolása](sql-database-copy.md)</span><span class="sxs-lookup"><span data-stu-id="5f203-243">toolearn about using automated backups for archiving, see [database copy](sql-database-copy.md)</span></span>
* <span data-ttu-id="5f203-244">Aktív georeplikáció a rugalmas készletek kapcsolatos információkért lásd: [rugalmas készlet vész-helyreállítási stratégiák](sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool.md).</span><span class="sxs-lookup"><span data-stu-id="5f203-244">For information about active geo-replication with Elastic Pools, see [Elastic Pool disaster recovery strategies](sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool.md).</span></span>
