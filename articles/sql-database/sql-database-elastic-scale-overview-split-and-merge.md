---
title: "kiterjesztett felhő adatbázisok közötti aaaMoving adatok |} Microsoft Docs"
description: "Ismerteti, hogyan toomanipulate szilánkok és rugalmas használata önálló üzemeltetett szolgáltatáson keresztül move data adatbázis API-k."
services: sql-database
documentationcenter: 
manager: jhubbard
author: ddove
ms.assetid: 204fd902-0397-4185-985a-dea3ed7c7d9f
ms.service: sql-database
ms.custom: scale out apps
ms.workload: sql-database
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 10/24/2016
ms.author: ddove
ms.openlocfilehash: 629dee06e22609e9b61edf93ba5c38d997132d8c
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/06/2017
---
# <a name="moving-data-between-scaled-out-cloud-databases"></a><span data-ttu-id="8f77c-103">Adatok mozgatása kiterjesztett felhőalapú adatbázisok között</span><span class="sxs-lookup"><span data-stu-id="8f77c-103">Moving data between scaled-out cloud databases</span></span>
<span data-ttu-id="8f77c-104">Ha egy szoftver szolgáltatás fejlesztőként, és hirtelen az alkalmazás megy keresztül rengeteg igény szerinti, tooaccommodate hello növekedési kell.</span><span class="sxs-lookup"><span data-stu-id="8f77c-104">If you are a Software as a Service developer, and suddenly your app undergoes tremendous demand, you need tooaccommodate hello growth.</span></span> <span data-ttu-id="8f77c-105">Így adhat meg további adatbázisok (szilánkok).</span><span class="sxs-lookup"><span data-stu-id="8f77c-105">So you add more databases (shards).</span></span> <span data-ttu-id="8f77c-106">Hogyan hello adatok toohello új adatbázisok újraterjeszteni a hello adatintegritás megszakítása nélkül</span><span class="sxs-lookup"><span data-stu-id="8f77c-106">How do you redistribute hello data toohello new databases without disrupting hello data integrity?</span></span> <span data-ttu-id="8f77c-107">Használjon hello **vegyes egyesítéses eszköz** toomove adatokat korlátozott adatbázis toohello új adatbázis.</span><span class="sxs-lookup"><span data-stu-id="8f77c-107">Use hello **split-merge tool** toomove data from constrained databases toohello new databases.</span></span>  

<span data-ttu-id="8f77c-108">hello vegyes egyesítéses eszköz fut egy Azure webes.</span><span class="sxs-lookup"><span data-stu-id="8f77c-108">hello split-merge tool runs as an Azure web service.</span></span> <span data-ttu-id="8f77c-109">Egy rendszergazda vagy a fejlesztői használ hello eszköz toomove shardlets (a shard adatait) között a különböző adatbázisokhoz (szilánkok).</span><span class="sxs-lookup"><span data-stu-id="8f77c-109">An administrator or developer uses hello tool toomove shardlets (data from a shard) between different databases (shards).</span></span> <span data-ttu-id="8f77c-110">hello eszköz shard felügyeleti toomaintain hello szolgáltatás metaadat adatbázist használ, és ellenőrizze a konzisztens leképezéseket.</span><span class="sxs-lookup"><span data-stu-id="8f77c-110">hello tool uses shard map management toomaintain hello service metadata database, and ensure consistent mappings.</span></span>

![Áttekintés][1]

## <a name="download"></a><span data-ttu-id="8f77c-112">Letöltés</span><span class="sxs-lookup"><span data-stu-id="8f77c-112">Download</span></span>
[<span data-ttu-id="8f77c-113">Microsoft.Azure.SqlDatabase.ElasticScale.Service.SplitMerge</span><span class="sxs-lookup"><span data-stu-id="8f77c-113">Microsoft.Azure.SqlDatabase.ElasticScale.Service.SplitMerge</span></span>](http://www.nuget.org/packages/Microsoft.Azure.SqlDatabase.ElasticScale.Service.SplitMerge/)

## <a name="documentation"></a><span data-ttu-id="8f77c-114">Dokumentáció</span><span class="sxs-lookup"><span data-stu-id="8f77c-114">Documentation</span></span>
1. [<span data-ttu-id="8f77c-115">A rugalmas adatbázis vegyes egyesítéses eszköz oktatóanyag</span><span class="sxs-lookup"><span data-stu-id="8f77c-115">Elastic database Split-Merge tool tutorial</span></span>](sql-database-elastic-scale-configure-deploy-split-and-merge.md)
2. [<span data-ttu-id="8f77c-116">Vegyes egyesítéses biztonsági konfiguráció</span><span class="sxs-lookup"><span data-stu-id="8f77c-116">Split-Merge security configuration</span></span>](sql-database-elastic-scale-split-merge-security-configuration.md)
3. [<span data-ttu-id="8f77c-117">Vegyes egyesítéses biztonsági megfontolások</span><span class="sxs-lookup"><span data-stu-id="8f77c-117">Split-merge security considerations</span></span>](sql-database-elastic-scale-split-merge-security-configuration.md)
4. [<span data-ttu-id="8f77c-118">A szilánkleképezés kezelése</span><span class="sxs-lookup"><span data-stu-id="8f77c-118">Shard map management</span></span>](sql-database-elastic-scale-shard-map-management.md)
5. [<span data-ttu-id="8f77c-119">Telepítse át a meglévő adatbázisok tooscale kimenő</span><span class="sxs-lookup"><span data-stu-id="8f77c-119">Migrate existing databases tooscale-out</span></span>](sql-database-elastic-convert-to-use-elastic-tools.md)
6. [<span data-ttu-id="8f77c-120">A rugalmas adatbázis-eszközök</span><span class="sxs-lookup"><span data-stu-id="8f77c-120">Elastic database tools</span></span>](sql-database-elastic-scale-introduction.md)
7. [<span data-ttu-id="8f77c-121">A rugalmas adatbázis eszközök szószedet</span><span class="sxs-lookup"><span data-stu-id="8f77c-121">Elastic Database tools glossary</span></span>](sql-database-elastic-scale-glossary.md)

## <a name="why-use-hello-split-merge-tool"></a><span data-ttu-id="8f77c-122">Hello vegyes egyesítéses eszköz miért érdemes használni?</span><span class="sxs-lookup"><span data-stu-id="8f77c-122">Why use hello split-merge tool?</span></span>
<span data-ttu-id="8f77c-123">**Rugalmasság**</span><span class="sxs-lookup"><span data-stu-id="8f77c-123">**Flexibility**</span></span>

<span data-ttu-id="8f77c-124">Alkalmazásokat kell toostretch rugalmasan túl egy Azure SQL Database-adatbázis hello határain.</span><span class="sxs-lookup"><span data-stu-id="8f77c-124">Applications need toostretch flexibly beyond hello limits of a single Azure SQL DB database.</span></span> <span data-ttu-id="8f77c-125">Szükséges toonew adatbázisok sértetlenségének megtartásával hello eszköz toomove adatokat használják.</span><span class="sxs-lookup"><span data-stu-id="8f77c-125">Use hello tool toomove data as needed toonew databases while retaining integrity.</span></span>

<span data-ttu-id="8f77c-126">**Vegyes toogrow**</span><span class="sxs-lookup"><span data-stu-id="8f77c-126">**Split toogrow**</span></span> 

<span data-ttu-id="8f77c-127">Általános tooincrease szükséges kapacitás toohandle robbanásszerűen növekedett.</span><span class="sxs-lookup"><span data-stu-id="8f77c-127">You need tooincrease overall capacity toohandle explosive growth.</span></span> <span data-ttu-id="8f77c-128">toodo tehát horizontális hello adatok és szétosztása Növekményesen további adatbázisok között, amíg kapacitásigények teljesülnek hozzon létre további kapacitást.</span><span class="sxs-lookup"><span data-stu-id="8f77c-128">toodo so, create additional capacity by sharding hello data and by distributing it across incrementally more databases until capacity needs are fulfilled.</span></span> <span data-ttu-id="8f77c-129">Ez az a legjobb példa hello "vágási" funkció.</span><span class="sxs-lookup"><span data-stu-id="8f77c-129">This is a prime example of hello ‘split’ feature.</span></span> 

<span data-ttu-id="8f77c-130">**Tooshrink egyesítése**</span><span class="sxs-lookup"><span data-stu-id="8f77c-130">**Merge tooshrink**</span></span>

<span data-ttu-id="8f77c-131">Kapacitás toohello egy üzleti határozza jellege miatt kell zsugorítani.</span><span class="sxs-lookup"><span data-stu-id="8f77c-131">Capacity needs shrink due toohello seasonal nature of a business.</span></span> <span data-ttu-id="8f77c-132">hello eszköz segítségével csökkentheti tartja toofewer méretezési egység, ha üzleti lelassul.</span><span class="sxs-lookup"><span data-stu-id="8f77c-132">hello tool lets you scale down toofewer scale units when business slows.</span></span> <span data-ttu-id="8f77c-133">hello "merge" szolgáltatása hello rugalmas bővítést vegyes egyesítéses szolgáltatás tartalmazza ezt a követelményt.</span><span class="sxs-lookup"><span data-stu-id="8f77c-133">hello ‘merge’ feature in hello Elastic Scale split-merge Service covers this requirement.</span></span> 

<span data-ttu-id="8f77c-134">**Shardlets mozgatásával elérési pontokhoz való kezelése**</span><span class="sxs-lookup"><span data-stu-id="8f77c-134">**Manage hotspots by moving shardlets**</span></span>

<span data-ttu-id="8f77c-135">Az adatbázisonként több bérlő shardlets tooshards hello elosztása az egyes szilánkok vezethet toocapacity szűk keresztmetszeteket.</span><span class="sxs-lookup"><span data-stu-id="8f77c-135">With multiple tenants per database, hello allocation of shardlets tooshards can lead toocapacity bottlenecks on some shards.</span></span> <span data-ttu-id="8f77c-136">Ehhez az újbóli hozzárendelésének shardlets vagy foglalt shardlets toonew vagy kevesebb túlterhelt szilánkok áthelyezése.</span><span class="sxs-lookup"><span data-stu-id="8f77c-136">This requires re-allocating shardlets or moving busy shardlets toonew or less utilized shards.</span></span> 

## <a name="concepts--key-features"></a><span data-ttu-id="8f77c-137">Alapfogalmak és a legfontosabb jellemzők</span><span class="sxs-lookup"><span data-stu-id="8f77c-137">Concepts & key features</span></span>
<span data-ttu-id="8f77c-138">**Ügyfél által üzemeltetett szolgáltatások**</span><span class="sxs-lookup"><span data-stu-id="8f77c-138">**Customer-hosted services**</span></span>

<span data-ttu-id="8f77c-139">hello vegyes egyesítéses kerülnek az ügyfél által szolgáltatott szolgáltatásként.</span><span class="sxs-lookup"><span data-stu-id="8f77c-139">hello split-merge is delivered as a customer-hosted service.</span></span> <span data-ttu-id="8f77c-140">Telepíti, és a Microsoft Azure-előfizetés hello futtatására.</span><span class="sxs-lookup"><span data-stu-id="8f77c-140">You must deploy and host hello service in your Microsoft Azure subscription.</span></span> <span data-ttu-id="8f77c-141">hello letöltése a NuGet csomag egy konfigurációs sablon toocomplete hello információkat az adott telepítéshez.</span><span class="sxs-lookup"><span data-stu-id="8f77c-141">hello package you download from NuGet contains a configuration template toocomplete with hello information for your specific deployment.</span></span> <span data-ttu-id="8f77c-142">Lásd: hello [vegyes egyesítéses oktatóanyag](sql-database-elastic-scale-configure-deploy-split-and-merge.md) részleteiről.</span><span class="sxs-lookup"><span data-stu-id="8f77c-142">See hello [split-merge tutorial](sql-database-elastic-scale-configure-deploy-split-and-merge.md) for details.</span></span> <span data-ttu-id="8f77c-143">Hello szolgáltatás fut az Azure-előfizetéssel, mivel szabályozhatja, és konfigurálhatja a hello szolgáltatást a legtöbb biztonsági funkcióit.</span><span class="sxs-lookup"><span data-stu-id="8f77c-143">Since hello service runs in your Azure subscription, you can control and configure most security aspects of hello service.</span></span> <span data-ttu-id="8f77c-144">hello alapértelmezett sablon tartalmazza a hello beállítások tooconfigure SSL, a tanúsítvány alapú ügyfél-hitelesítéshez, a titkosítás a tárolt hitelesítő adatok, esetlegesen korán DoS és az IP-korlátozásokat.</span><span class="sxs-lookup"><span data-stu-id="8f77c-144">hello default template includes hello options tooconfigure SSL, certificate-based client authentication, encryption for stored credentials, DoS guarding and IP restrictions.</span></span> <span data-ttu-id="8f77c-145">Található hello további információk biztonsági szempontjait a dokumentum a következő hello [vegyes egyesítéses biztonsági konfiguráció](sql-database-elastic-scale-split-merge-security-configuration.md).</span><span class="sxs-lookup"><span data-stu-id="8f77c-145">You can find more information on hello security aspects in hello following document [split-merge security configuration](sql-database-elastic-scale-split-merge-security-configuration.md).</span></span>

<span data-ttu-id="8f77c-146">hello alapértelmezett szolgáltatás fut egy worker és egy webes szerepkör telepítése.</span><span class="sxs-lookup"><span data-stu-id="8f77c-146">hello default deployed service runs with one worker and one web role.</span></span> <span data-ttu-id="8f77c-147">Azure Cloud Services használ minden egyes hello A1 Virtuálisgép-méretet.</span><span class="sxs-lookup"><span data-stu-id="8f77c-147">Each uses hello A1 VM size in Azure Cloud Services.</span></span> <span data-ttu-id="8f77c-148">Míg ezek a beállítások nem módosítható, ha hello csomag telepítése, akkor a hello (keresztül hello Azure-portál) fut a felhőalapú szolgáltatás, a sikeres telepítés után sikerült módosítani.</span><span class="sxs-lookup"><span data-stu-id="8f77c-148">While you cannot modify these settings when deploying hello package, you could change them after a successful deployment in hello running cloud service, (through hello Azure portal).</span></span> <span data-ttu-id="8f77c-149">Vegye figyelembe, hogy hello feldolgozói szerepkör nem konfigurálható több mint egy egypéldányos technikai okokból.</span><span class="sxs-lookup"><span data-stu-id="8f77c-149">Note that hello worker role must not be configured for more than a single instance for technical reasons.</span></span> 

<span data-ttu-id="8f77c-150">**A shard térkép integráció**</span><span class="sxs-lookup"><span data-stu-id="8f77c-150">**Shard map integration**</span></span>

<span data-ttu-id="8f77c-151">hello vegyes egyesítéses szolgáltatás hello shard térkép hello alkalmazás kommunikál.</span><span class="sxs-lookup"><span data-stu-id="8f77c-151">hello split-merge service interacts with hello shard map of hello application.</span></span> <span data-ttu-id="8f77c-152">Használatakor hello vegyes egyesítéses szolgáltatás toosplit vagy egyesítés tartományok vagy toomove shardlets közötti szilánkok hello szolgáltatás szolgáltatás hello shard térkép toodate fel automatikusan.</span><span class="sxs-lookup"><span data-stu-id="8f77c-152">When using hello split-merge service toosplit or merge ranges or toomove shardlets between shards, hello service automatically keeps hello shard map up toodate.</span></span> <span data-ttu-id="8f77c-153">toodo tehát hello szolgáltatás toohello shard manager adatbázist hello alkalmazás kapcsolódik-e, és tárolja a tartományok hozzárendelések vegyes/egyesítési/move kérelmek állapotát.</span><span class="sxs-lookup"><span data-stu-id="8f77c-153">toodo so, hello service connects toohello shard map manager database of hello application and maintains ranges and mappings as split/merge/move requests progress.</span></span> <span data-ttu-id="8f77c-154">Ez biztosítja, hogy hello shard térkép mindig megadja egy naprakész nézetben amikor vegyes-merge műveletek fog.</span><span class="sxs-lookup"><span data-stu-id="8f77c-154">This ensures that hello shard map always presents an up-to-date view when split-merge operations are going on.</span></span> <span data-ttu-id="8f77c-155">Szétválasztásához lemezegyesítési és -shardlet mozgási műveletek egy tranzakcióköteghez shardlets áthelyezése hello forrás shard toohello cél shard alapján történik.</span><span class="sxs-lookup"><span data-stu-id="8f77c-155">Split, merge and shardlet movement operations are implemented by moving a batch of shardlets from hello source shard toohello target shard.</span></span> <span data-ttu-id="8f77c-156">Hello shardlet adatátviteli művelet hello shardlets tulajdonos toohello aktuális köteg során megjelölve offline állapotúként hello shard leképezés, és nem állnak rendelkezésre adatok függő útválasztási kapcsolatot hello **OpenConnectionForKey** API.</span><span class="sxs-lookup"><span data-stu-id="8f77c-156">During hello shardlet movement operation hello shardlets subject toohello current batch are marked as offline in hello shard map and are unavailable for data-dependent routing connections using hello **OpenConnectionForKey** API.</span></span> 

<span data-ttu-id="8f77c-157">**Egységes shardlet kapcsolatok**</span><span class="sxs-lookup"><span data-stu-id="8f77c-157">**Consistent shardlet connections**</span></span>

<span data-ttu-id="8f77c-158">Adatátvitel egy új tranzakcióköteghez shardlets indításakor bármely shard térképét adatok függő útválasztási kapcsolatok toohello shard tárolni hello shardlet elejtett és az azt követő kapcsolatok hello shard leképezés API-k toohello ezek shardlets le vannak tiltva közben hello adatátvitelt jelölik a rendelés tooavoid inkonzisztenciát folyamatban van.</span><span class="sxs-lookup"><span data-stu-id="8f77c-158">When data movement starts for a new batch of shardlets, any shard-map provided data-dependent routing connections toohello shard storing hello shardlet are killed and subsequent connections from hello shard map APIs toohello these shardlets are blocked while hello data movement is in progress in order tooavoid inconsistencies.</span></span> <span data-ttu-id="8f77c-159">Kapcsolatok tooother shardlets hello ugyanazt a shard is beolvasása leállítása, de akkor sikeres, újra meg azonnal az újra gombra.</span><span class="sxs-lookup"><span data-stu-id="8f77c-159">Connections tooother shardlets on hello same shard will also get killed, but will succeed again immediately on retry.</span></span> <span data-ttu-id="8f77c-160">Miután hello kötegelt helyezik át, hello shardlets hello cél shard újra online megjelölve, és hello forrásadatok hello forrás shard törlődik.</span><span class="sxs-lookup"><span data-stu-id="8f77c-160">Once hello batch is moved, hello shardlets are marked online again for hello target shard and hello source data is removed from hello source shard.</span></span> <span data-ttu-id="8f77c-161">hello szolgáltatás végighalad ezeket a lépéseket minden kötegnél, amíg az összes shardlets át lett helyezve.</span><span class="sxs-lookup"><span data-stu-id="8f77c-161">hello service goes through these steps for every batch until all shardlets have been moved.</span></span> <span data-ttu-id="8f77c-162">Ez vezet tooseveral kapcsolódási kill műveleteket hello hello teljes vegyes/egyesítési/áthelyezési művelet során.</span><span class="sxs-lookup"><span data-stu-id="8f77c-162">This will lead tooseveral connection kill operations during hello course of hello complete split/merge/move operation.</span></span>  

<span data-ttu-id="8f77c-163">**Shardlet rendelkezésre állásának kezelése**</span><span class="sxs-lookup"><span data-stu-id="8f77c-163">**Managing shardlet availability**</span></span>

<span data-ttu-id="8f77c-164">Elérhetetlensége tooone köteg shardlets hello hatókörének korlátozása hello kapcsolat leállítása végleges, tehát a jelenlegi köteg toohello shardlets kapcsolatban a fentiekben ismertetett módon korlátozza egyszerre.</span><span class="sxs-lookup"><span data-stu-id="8f77c-164">Limiting hello connection killing toohello current batch of shardlets as discussed above restricts hello scope of unavailability tooone batch of shardlets at a time.</span></span> <span data-ttu-id="8f77c-165">Ez az előnyben részesített keresztül megközelítés ahol hello teljes shard marad a shardlets offline hello egy megosztott vagy egyesítési művelet során.</span><span class="sxs-lookup"><span data-stu-id="8f77c-165">This is preferred over an approach where hello complete shard would remain offline for all its shardlets during hello course of a split or merge operation.</span></span> <span data-ttu-id="8f77c-166">hello egyszerre, különböző shardlets toomove hello értékként megadott köteg mérete egy konfigurációs paraméter.</span><span class="sxs-lookup"><span data-stu-id="8f77c-166">hello size of a batch, defined as hello number of distinct shardlets toomove at a time, is a configuration parameter.</span></span> <span data-ttu-id="8f77c-167">Minden felosztása és merge művelethez hello alkalmazás rendelkezésre állásának és teljesítményének igényeinek lehet meghatározni.</span><span class="sxs-lookup"><span data-stu-id="8f77c-167">It can be defined for each split and merge operation depending on hello application’s availability and performance needs.</span></span> <span data-ttu-id="8f77c-168">Előfordulhat, hogy zárás alatt áll hello shard leképezés hello tartományba nagyobb, mint a megadott hello kötegmérete.</span><span class="sxs-lookup"><span data-stu-id="8f77c-168">Note that hello range that is being locked in hello shard map may be larger than hello batch size specified.</span></span> <span data-ttu-id="8f77c-169">Ennek az az oka hello szolgáltatást úgy, hogy hello tényleges hello adatok értékeit horizontális körülbelül megegyezzen hello kötegméret szerzi meg hello tartomány méretét.</span><span class="sxs-lookup"><span data-stu-id="8f77c-169">This is because hello service picks hello range size such that hello actual number of sharding key values in hello data approximately matches hello batch size.</span></span> <span data-ttu-id="8f77c-170">Ez a fontos tooremember különösen ritkán megadott horizontális skálázási kulcsok.</span><span class="sxs-lookup"><span data-stu-id="8f77c-170">This is important tooremember in particular for sparsely populated sharding keys.</span></span> 

<span data-ttu-id="8f77c-171">**Metaadat-tároló**</span><span class="sxs-lookup"><span data-stu-id="8f77c-171">**Metadata storage**</span></span>

<span data-ttu-id="8f77c-172">hello vegyes egyesítéses szolgáltatás használ egy adatbázis toomaintain azok állapotát és tookeep naplózza a kérelem feldolgozása során.</span><span class="sxs-lookup"><span data-stu-id="8f77c-172">hello split-merge service uses a database toomaintain its status and tookeep logs during request processing.</span></span> <span data-ttu-id="8f77c-173">hello felhasználói hozza létre ezt az adatbázist az előfizetését és hello kapcsolati karakterláncát azt hello szolgáltatás központi telepítése a hello konfigurációs fájlban.</span><span class="sxs-lookup"><span data-stu-id="8f77c-173">hello user creates this database in their subscription and provides hello connection string for it in hello configuration file for hello service deployment.</span></span> <span data-ttu-id="8f77c-174">Hello felhasználó szervezete rendszergazdákat is kapcsolódhatnak toothis adatbázis tooreview kérelem folyamatát és tooinvestigate részletes leírása a lehetséges hibákat.</span><span class="sxs-lookup"><span data-stu-id="8f77c-174">Administrators from hello user’s organization can also connect toothis database tooreview request progress and tooinvestigate detailed information regarding potential failures.</span></span>

<span data-ttu-id="8f77c-175">**Horizontális-figyelése**</span><span class="sxs-lookup"><span data-stu-id="8f77c-175">**Sharding-awareness**</span></span>

<span data-ttu-id="8f77c-176">hello vegyes egyesítéses szolgáltatás (1) szilánkos táblák, (2) hivatkozás táblázatok, illetve (3) normál közötti különbséget tesz.</span><span class="sxs-lookup"><span data-stu-id="8f77c-176">hello split-merge service differentiates between (1) sharded tables, (2) reference tables, and (3) normal tables.</span></span> <span data-ttu-id="8f77c-177">vegyes/egyesítési/áthelyezés hello szemantikáját függ használt hello tábla hello típusú, és az alábbiak szerint definiáltuk:</span><span class="sxs-lookup"><span data-stu-id="8f77c-177">hello semantics of a split/merge/move operation depend on hello type of hello table used and are defined as follows:</span></span> 

* <span data-ttu-id="8f77c-178">**Horizontálisan skálázott táblák**: vegyes, egyesítési és áthelyezési műveletek shardlets áthelyezése forrás tootarget szilánkcímtárban.</span><span class="sxs-lookup"><span data-stu-id="8f77c-178">**Sharded tables**: Split, merge, and move operations move shardlets from source tootarget shard.</span></span> <span data-ttu-id="8f77c-179">Hello sikeres befejezése után a teljes kérte, ezek shardlets már nincs jelen hello forrás.</span><span class="sxs-lookup"><span data-stu-id="8f77c-179">After successful completion of hello overall request, those shardlets are no longer present on hello source.</span></span> <span data-ttu-id="8f77c-180">Vegye figyelembe, hogy hello célként megadott táblákhoz a hello cél shard tooexist, és nem tartalmazhat hello cél tartomány előzetes tooprocessing hello működési adatokat.</span><span class="sxs-lookup"><span data-stu-id="8f77c-180">Note that hello target tables need tooexist on hello target shard and must not contain data in hello target range prior tooprocessing of hello operation.</span></span> 
* <span data-ttu-id="8f77c-181">**Táblák hivatkozhat**: hivatkozási táblák, hello valószínűségét, egyesíteni, és helyezze át a műveletek hello adatokat másolni hello forrás toohello cél szilánkcímtárban.</span><span class="sxs-lookup"><span data-stu-id="8f77c-181">**Reference tables**: For reference tables, hello split, merge and move operations copy hello data from hello source toohello target shard.</span></span> <span data-ttu-id="8f77c-182">Vegye figyelembe azonban, hogy nem végez módosítást újrapróbálkozásoknak hello cél shard egy adott táblához tartozó, ha bármely sor már létezik ebben a táblázatban hello célponton.</span><span class="sxs-lookup"><span data-stu-id="8f77c-182">Note, however, that no changes occur on hello target shard for a given table if any row is already present in this table on hello target.</span></span> <span data-ttu-id="8f77c-183">hello táblához toobe bármely hivatkozás tábla másolási művelet tooget feldolgozott üres.</span><span class="sxs-lookup"><span data-stu-id="8f77c-183">hello table has toobe empty for any reference table copy operation tooget processed.</span></span>
* <span data-ttu-id="8f77c-184">**Más táblák**: más táblák lehet jelen hello forrás- vagy egy megosztott és az egyesítési művelet hello célját.</span><span class="sxs-lookup"><span data-stu-id="8f77c-184">**Other Tables**: Other tables can be present on either hello source or hello target of a split and merge operation.</span></span> <span data-ttu-id="8f77c-185">hello vegyes egyesítéses szolgáltatás parancsában ezek a táblázatok adatmozgás vagy másolási műveleteket.</span><span class="sxs-lookup"><span data-stu-id="8f77c-185">hello split-merge service disregards these tables for any data movement or copy operations.</span></span> <span data-ttu-id="8f77c-186">Vegye figyelembe azonban, hogy azok zavarhatja a megkötések esetén ezeket a műveleteket.</span><span class="sxs-lookup"><span data-stu-id="8f77c-186">Note, however, that they can interfere with these operations in case of constraints.</span></span>

<span data-ttu-id="8f77c-187">hivatkozás szilánkos táblák és hello információkat szolgáltatja hello **SchemaInfo** hello shard térképen API-k.</span><span class="sxs-lookup"><span data-stu-id="8f77c-187">hello information on reference vs. sharded tables is provided by hello **SchemaInfo** APIs on hello shard map.</span></span> <span data-ttu-id="8f77c-188">a következő példa hello hello ezeket egy adott shard térkép manager objektum smm API-használatát mutatja be:</span><span class="sxs-lookup"><span data-stu-id="8f77c-188">hello following example illustrates hello use of these APIs on a given shard map manager object smm:</span></span> 

    // Create hello schema annotations 
    SchemaInfo schemaInfo = new SchemaInfo(); 

    // Reference tables 
    schemaInfo.Add(new ReferenceTableInfo("dbo", "region")); 
    schemaInfo.Add(new ReferenceTableInfo("dbo", "nation")); 

    // Sharded tables 
    schemaInfo.Add(new ShardedTableInfo("dbo", "customer", "C_CUSTKEY")); 
    schemaInfo.Add(new ShardedTableInfo("dbo", "orders", "O_CUSTKEY")); 

    // Publish 
    smm.GetSchemaInfoCollection().Add(Configuration.ShardMapName, schemaInfo); 

<span data-ttu-id="8f77c-189">hello táblák "region" és "számára" hivatkozási táblák is meg van adva, és a felosztott/egyesítési/move műveletekkel másolja.</span><span class="sxs-lookup"><span data-stu-id="8f77c-189">hello tables ‘region’ and ‘nation’ are defined as reference tables and will be copied with split/merge/move operations.</span></span> <span data-ttu-id="8f77c-190">"ügyfél" és "rendelések" pedig meg van adva szilánkos táblákat.</span><span class="sxs-lookup"><span data-stu-id="8f77c-190">‘customer’ and ‘orders’ in turn are defined as sharded tables.</span></span> <span data-ttu-id="8f77c-191">C_CUSTKEY és O_CUSTKEY hello horizontális kulcsaként szolgál.</span><span class="sxs-lookup"><span data-stu-id="8f77c-191">C_CUSTKEY and O_CUSTKEY serve as hello sharding key.</span></span> 

<span data-ttu-id="8f77c-192">**A hivatkozási integritás**</span><span class="sxs-lookup"><span data-stu-id="8f77c-192">**Referential Integrity**</span></span>

<span data-ttu-id="8f77c-193">hello vegyes egyesítéses szolgáltatás a táblák közötti függőségek elemzésével, és használja az elsődleges kulcs külső kulcsok kapcsolatai toostage hello műveletek a referencia-táblák és -shardlets áthelyezését.</span><span class="sxs-lookup"><span data-stu-id="8f77c-193">hello split-merge service analyzes dependencies between tables and uses foreign key-primary key relationships toostage hello operations for moving reference tables and shardlets.</span></span> <span data-ttu-id="8f77c-194">Általában referencia táblák másolása először az függőségi sorrend, majd shardlets belül minden kötegelt függősége sorrendben kerülnek.</span><span class="sxs-lookup"><span data-stu-id="8f77c-194">In general, reference tables are copied first in dependency order, then shardlets are copied in order of their dependencies within each batch.</span></span> <span data-ttu-id="8f77c-195">Erre akkor szükség, így FK-PK korlátozza a hello cél shard hello új adatok érkeznek, figyelembe véve a vannak.</span><span class="sxs-lookup"><span data-stu-id="8f77c-195">This is necessary so that FK-PK constraints on hello target shard are honored as hello new data arrives.</span></span> 

<span data-ttu-id="8f77c-196">**A shard térkép konzisztencia és végleges befejezése**</span><span class="sxs-lookup"><span data-stu-id="8f77c-196">**Shard Map Consistency and Eventual Completion**</span></span>

<span data-ttu-id="8f77c-197">A hibák hello jelenlétét hello vegyes egyesítéses szolgáltatás bármely leállás után folytatja a műveletek, és célja toocomplete bármely, a folyamatban lévő kérések.</span><span class="sxs-lookup"><span data-stu-id="8f77c-197">In hello presence of failures, hello split-merge service resumes operations after any outage and aims toocomplete any in progress requests.</span></span> <span data-ttu-id="8f77c-198">Azonban lehetnek helyreállíthatatlan olyan helyzetekben, például amikor hello cél shard elveszett vagy sérült javíthatók.</span><span class="sxs-lookup"><span data-stu-id="8f77c-198">However, there may be unrecoverable situations, e.g., when hello target shard is lost or compromised beyond repair.</span></span> <span data-ttu-id="8f77c-199">Ilyen körülmények néhány shardlets toobe áthelyezése volt amelyeknek továbbra is tooreside a hello forrás szilánkcímtárban.</span><span class="sxs-lookup"><span data-stu-id="8f77c-199">Under those circumstances, some shardlets that were supposed toobe moved may continue tooreside on hello source shard.</span></span> <span data-ttu-id="8f77c-200">hello szolgáltatást biztosítja, hogy shardlet leképezéseket csak frissítése után hello szükséges adatok sikeresen másolt toohello cél.</span><span class="sxs-lookup"><span data-stu-id="8f77c-200">hello service ensures that shardlet mappings are only updated after hello necessary data has been successfully copied toohello target.</span></span> <span data-ttu-id="8f77c-201">Shardlets csak törlődnek hello forrás, miután minden az adatok másolni toohello cél és hello megfelelő leképezések frissítése sikeresen megtörtént.</span><span class="sxs-lookup"><span data-stu-id="8f77c-201">Shardlets are only deleted on hello source once all their data has been copied toohello target and hello corresponding mappings have been updated successfully.</span></span> <span data-ttu-id="8f77c-202">hello törlési művelet során hello tartomány már online hello cél shard hello háttérben történik.</span><span class="sxs-lookup"><span data-stu-id="8f77c-202">hello deletion operation happens in hello background while hello range is already online on hello target shard.</span></span> <span data-ttu-id="8f77c-203">hello vegyes egyesítéses szolgáltatás mindig biztosítja hello megfeleltetéseket tárolt hello shard leképezés helyességét.</span><span class="sxs-lookup"><span data-stu-id="8f77c-203">hello split-merge service always ensures correctness of hello mappings stored in hello shard map.</span></span>

## <a name="hello-split-merge-user-interface"></a><span data-ttu-id="8f77c-204">hello vegyes egyesítéses felhasználói felülete</span><span class="sxs-lookup"><span data-stu-id="8f77c-204">hello split-merge user interface</span></span>
<span data-ttu-id="8f77c-205">hello vegyes egyesítéses service-csomag magában foglalja a feldolgozói szerepkör és a webes szerepkör.</span><span class="sxs-lookup"><span data-stu-id="8f77c-205">hello split-merge service package includes a worker role and a web role.</span></span> <span data-ttu-id="8f77c-206">hello webes szerepkör használt toosubmit vegyes-egyesítési kérelem interaktív módon.</span><span class="sxs-lookup"><span data-stu-id="8f77c-206">hello web role is used toosubmit split-merge requests in an interactive way.</span></span> <span data-ttu-id="8f77c-207">hello hello felhasználói felület fő összetevői a következők:</span><span class="sxs-lookup"><span data-stu-id="8f77c-207">hello main components of hello user interface are as follows:</span></span>

* <span data-ttu-id="8f77c-208">Művelet típusa: hello művelet típus, amely a hello típusú hello szolgáltatást a kérelem által végrehajtott művelet a megfelelő választógombra kattintva.</span><span class="sxs-lookup"><span data-stu-id="8f77c-208">Operation Type: hello operation type is a radio button that controls hello kind of operation performed by hello service for this request.</span></span> <span data-ttu-id="8f77c-209">Hello vegyes választhat, egyesítése, és helyezze át a forgatókönyveket.</span><span class="sxs-lookup"><span data-stu-id="8f77c-209">You can choose between hello split, merge and move scenarios.</span></span> <span data-ttu-id="8f77c-210">Szakítsa meg a korábban elküldött műveletet is.</span><span class="sxs-lookup"><span data-stu-id="8f77c-210">You can also cancel a previously submitted operation.</span></span> <span data-ttu-id="8f77c-211">Vegyes használata, egyesítése és a tartomány shard maps áthelyezések.</span><span class="sxs-lookup"><span data-stu-id="8f77c-211">You can use split, merge and move requests for range shard maps.</span></span> <span data-ttu-id="8f77c-212">Lista shard csak a támogatási áthelyezési műveletek képezi le.</span><span class="sxs-lookup"><span data-stu-id="8f77c-212">List shard maps only support move operations.</span></span>
* <span data-ttu-id="8f77c-213">A shard térkép: hello következő szakaszában kérelem paraméterek borítóján információ hello shard térkép és hello adatbázis-üzemeltetési a shard térképre.</span><span class="sxs-lookup"><span data-stu-id="8f77c-213">Shard Map: hello next section of request parameters cover information about hello shard map and hello database hosting your shard map.</span></span> <span data-ttu-id="8f77c-214">Különösen tooprovide hello nevét hello Azure SQL adatbázis-kiszolgáló és adatbázis-üzemeltetési hello shardmap van szüksége, hitelesítő adatok tooconnect toohello shard adatbázis rendelve, és végül hello hello shard leképezés neve.</span><span class="sxs-lookup"><span data-stu-id="8f77c-214">In particular, you need tooprovide hello name of hello Azure SQL Database server and database hosting hello shardmap, credentials tooconnect toohello shard map database, and finally hello name of hello shard map.</span></span> <span data-ttu-id="8f77c-215">Hello művelet jelenleg csak egyetlen halmazába hitelesítő adatokat fogad el.</span><span class="sxs-lookup"><span data-stu-id="8f77c-215">Currently, hello operation only accepts a single set of credentials.</span></span> <span data-ttu-id="8f77c-216">Ezeket a hitelesítő adatokat kell toohave megfelelő engedélyekkel tooperform toohello shard térkép, valamint a felhasználói adatok toohello hello szilánkok változik.</span><span class="sxs-lookup"><span data-stu-id="8f77c-216">These credentials need toohave sufficient permissions tooperform changes toohello shard map as well as toohello user data on hello shards.</span></span>
* <span data-ttu-id="8f77c-217">Forrástartományt (ossza fel, és egyesíti az): egy vegyes és az egyesítési művelet feldolgozza a alacsony és magas kulcsok a tartományt.</span><span class="sxs-lookup"><span data-stu-id="8f77c-217">Source Range (split and merge): A split and merge operation processes a range using its low and high key.</span></span> <span data-ttu-id="8f77c-218">egy unbounded magas kulcsérték, ellenőrzés művelet toospecify hello "felső kulcs maximális" jelölőnégyzetet, és hello magas kulcs mezőt hagyja üresen.</span><span class="sxs-lookup"><span data-stu-id="8f77c-218">toospecify an operation with an unbounded high key value, check hello “High key is max” check box and leave hello high key field empty.</span></span> <span data-ttu-id="8f77c-219">hello tartomány kulcsértékei megadott tegye nem szükséges tooprecisely egyezik, a leképezési és a határok shard képezze.</span><span class="sxs-lookup"><span data-stu-id="8f77c-219">hello range key values that you specify do not need tooprecisely match a mapping and its boundaries in your shard map.</span></span> <span data-ttu-id="8f77c-220">Ha nem ad meg tartományt határokat minden hello szolgáltatást fog következtet hello legközelebbi tartomány meg automatikusan.</span><span class="sxs-lookup"><span data-stu-id="8f77c-220">If you do not specify any range boundaries at all hello service will infer hello closest range for you automatically.</span></span> <span data-ttu-id="8f77c-221">Egy adott shard leképezés hello GetMappings.ps1 PowerShell parancsfájl tooretrieve hello aktuális hozzárendelések is használhatja.</span><span class="sxs-lookup"><span data-stu-id="8f77c-221">You can use hello GetMappings.ps1 PowerShell script tooretrieve hello current mappings in a given shard map.</span></span>
* <span data-ttu-id="8f77c-222">Megosztott adatforrás viselkedés (vegyes): A felosztás műveleteket, adja meg a hello pont toosplit hello forrástartományt.</span><span class="sxs-lookup"><span data-stu-id="8f77c-222">Split Source Behavior (split): For split operations, define hello point toosplit hello source range.</span></span> <span data-ttu-id="8f77c-223">Ehhez, adja meg a kívánt hello vágási toooccur hello horizontális kulcs.</span><span class="sxs-lookup"><span data-stu-id="8f77c-223">You do this by providing hello sharding key where you want hello split toooccur.</span></span> <span data-ttu-id="8f77c-224">Használjon hello megfelelő választógombra kattintva adja meg, hogy hello (kivéve a hello ossza fel a kulcs) tartomány toomove alsó részén hello, vagy hogy szeretné-e hello felső rész toomove (hello megosztott kulcsot is beleértve).</span><span class="sxs-lookup"><span data-stu-id="8f77c-224">Use hello radio button specify whether you want hello lower part of hello range (excluding hello split key) toomove, or whether you want hello upper part toomove (including hello split key).</span></span>
* <span data-ttu-id="8f77c-225">Forrás-Shardlet (lépés): helyezze át a műveletek eltérnek vegyes, vagy nincs szükségük a tartomány toodescribe hello forrás összevonhatja a műveletek.</span><span class="sxs-lookup"><span data-stu-id="8f77c-225">Source Shardlet (move): Move operations are different from split or merge operations as they do not require a range toodescribe hello source.</span></span> <span data-ttu-id="8f77c-226">Áthelyezési forrást egyszerűen azonosíthatók hello horizontális kulcsérték toomove megtervezni.</span><span class="sxs-lookup"><span data-stu-id="8f77c-226">A source for move is simply identified by hello sharding key value that you plan toomove.</span></span>
* <span data-ttu-id="8f77c-227">Cél Shard (vegyes): Miután hello adatok megadása a felosztás művelet hello forrás, ahová hello adatok toobe másolt tooby olyan hello Azure SQL adatbázis-kiszolgálót és adatbázist, hello cél toodefine kell.</span><span class="sxs-lookup"><span data-stu-id="8f77c-227">Target Shard (split): Once you have provided hello information on hello source of your split operation, you need toodefine where you want hello data toobe copied tooby providing hello Azure SQL Db server and database name for hello target.</span></span>
* <span data-ttu-id="8f77c-228">Cél tartományon (egyesítés): egyesítési műveletek áthelyezése shardlets tooan meglévő szilánkcímtárban.</span><span class="sxs-lookup"><span data-stu-id="8f77c-228">Target Range (merge): Merge operations move shardlets tooan existing shard.</span></span> <span data-ttu-id="8f77c-229">Hello meglévő shard hello tartományhatárokon hello meglévő tartomány toomerge a kívánt megadásával azonosította.</span><span class="sxs-lookup"><span data-stu-id="8f77c-229">You identify hello existing shard by providing hello range boundaries of hello existing range that you want toomerge with.</span></span>
* <span data-ttu-id="8f77c-230">Köteg mérete: hello kötegelt méretét szabályozza, hogy a rendszer kapcsolat nélküli munka hello adatátvitel során egyszerre shardlets száma hello.</span><span class="sxs-lookup"><span data-stu-id="8f77c-230">Batch Size: hello batch size controls hello number of shardlets that will go offline at a time during hello data movement.</span></span> <span data-ttu-id="8f77c-231">Egész szám azt, ahol ugyanúgy használhatók a kisebb értékek shardlets az érzékeny toolong idõszakok esetén.</span><span class="sxs-lookup"><span data-stu-id="8f77c-231">This is an integer value where you can use smaller values when you are sensitive toolong periods of downtime for shardlets.</span></span> <span data-ttu-id="8f77c-232">A nagyobb értékek növeli, amely egy adott shardlet hello ideje offline de javíthatja a teljesítményt.</span><span class="sxs-lookup"><span data-stu-id="8f77c-232">Larger values will increase hello time that a given shardlet is offline but may improve performance.</span></span>
* <span data-ttu-id="8f77c-233">Művelet azonosítója (Mégse): Ha egy folyamatban lévő műveletet, amely már nem szükséges, megszakíthatja hello művelet azáltal, hogy a művelet azonosítója ebben a mezőben.</span><span class="sxs-lookup"><span data-stu-id="8f77c-233">Operation Id (Cancel): If you have an ongoing operation that is no longer needed, you can cancel hello operation by providing its operation ID in this field.</span></span> <span data-ttu-id="8f77c-234">Hello kérelem állapot tábla kérhetnek le hello Műveletazonosító (lásd a szakasz 8.1) vagy a hello kimenet hello webböngészőben, ahol hello kérés elküldése megtörtént.</span><span class="sxs-lookup"><span data-stu-id="8f77c-234">You can retrieve hello operation ID from hello request status table (see Section 8.1) or from hello output in hello web browser where you submitted hello request.</span></span>

## <a name="requirements-and-limitations"></a><span data-ttu-id="8f77c-235">Követelmények és korlátozások</span><span class="sxs-lookup"><span data-stu-id="8f77c-235">Requirements and Limitations</span></span>
<span data-ttu-id="8f77c-236">hello hello vegyes egyesítéses szolgáltatás jelenlegi implementációja tulajdonos toohello a következő követelmények és korlátozások:</span><span class="sxs-lookup"><span data-stu-id="8f77c-236">hello current implementation of hello split-merge service is subject toohello following requirements and limitations:</span></span> 

* <span data-ttu-id="8f77c-237">hello szilánkok tooexist kell, és hello shard leképezés egy vegyes-merge műveletet a szilánkok elvégzése előtt regisztrálni.</span><span class="sxs-lookup"><span data-stu-id="8f77c-237">hello shards need tooexist and be registered in hello shard map before a split-merge operation on these shards can be performed.</span></span> 
* <span data-ttu-id="8f77c-238">hello szolgáltatás hozta létre a táblák vagy bármely más adatbázis-objektumok automatikusan műveletei részeként.</span><span class="sxs-lookup"><span data-stu-id="8f77c-238">hello service does not create tables or any other database objects automatically as part of its operations.</span></span> <span data-ttu-id="8f77c-239">Ez azt jelenti, hogy a séma összes szilánkos táblák hello és táblák hivatkozik a hello cél shard előzetes tooany vegyes/egyesítési/áthelyezési művelet tooexist kell.</span><span class="sxs-lookup"><span data-stu-id="8f77c-239">This means that hello schema for all sharded tables and reference tables need tooexist on hello target shard prior tooany split/merge/move operation.</span></span> <span data-ttu-id="8f77c-240">Horizontálisan skálázott táblák különösen is szükséges toobe üres, ha az új shardlets nem osztott/egyesítési/áthelyezés által hozzáadott toobe hello közé.</span><span class="sxs-lookup"><span data-stu-id="8f77c-240">Sharded tables in particular are required toobe empty in hello range where new shardlets are toobe added by a split/merge/move operation.</span></span> <span data-ttu-id="8f77c-241">Ellenkező esetben hello művelet sikertelen lesz hello cél shard hello kezdeti konzisztencia-ellenőrzést.</span><span class="sxs-lookup"><span data-stu-id="8f77c-241">Otherwise, hello operation will fail hello initial consistency check on hello target shard.</span></span> <span data-ttu-id="8f77c-242">Is vegye figyelembe, hogy a referenciaadatok csak másolja, ha hello összefoglaló táblázat üres, és, hogy vannak-e nem konzisztencia biztosítja, hogy a legutóbb tooother egyidejű írási műveletek hello hivatkozási táblák.</span><span class="sxs-lookup"><span data-stu-id="8f77c-242">Also note that reference data is only copied if hello reference table is empty and that there are no consistency guarantees with regard tooother concurrent write operations on hello reference tables.</span></span> <span data-ttu-id="8f77c-243">Ezt azért ajánljuk: vegyes/egyesítési műveletek futtatásakor más írási műveletek módosításokat toohello hivatkozási táblák.</span><span class="sxs-lookup"><span data-stu-id="8f77c-243">We recommend this: when running split/merge operations, no other write operations make changes toohello reference tables.</span></span>
* <span data-ttu-id="8f77c-244">hello szolgáltatás sor azonosító egy egyedi index vagy a kulcs, amely tartalmazza az hello horizontális kulcs tooimprove teljesítménye és megbízhatósága a nagy shardlets létesíti támaszkodik.</span><span class="sxs-lookup"><span data-stu-id="8f77c-244">hello service relies on row identity established by a unique index or key that includes hello sharding key tooimprove performance and reliability for large shardlets.</span></span> <span data-ttu-id="8f77c-245">Ez lehetővé teszi, hogy hello szolgáltatás toomove adatainak még pontosabban részletességű értéknél csak hello horizontális kulcs.</span><span class="sxs-lookup"><span data-stu-id="8f77c-245">This allows hello service toomove data at an even finer granularity than just hello sharding key value.</span></span> <span data-ttu-id="8f77c-246">Ezzel a megoldással tooreduce hello maximális mennyisége naplóterület és zárolásokat, amelyek szükségesek hello művelet során.</span><span class="sxs-lookup"><span data-stu-id="8f77c-246">This helps tooreduce hello maximum amount of log space and locks that are required during hello operation.</span></span> <span data-ttu-id="8f77c-247">Érdemes létrehozni egy egyedi index vagy egy elsődleges kulcs, beleértve a hello horizontális kulcs egy adott táblán, ha azt szeretné, hogy toouse adott táblához vegyes/egyesítési/move kérelmek.</span><span class="sxs-lookup"><span data-stu-id="8f77c-247">Consider creating a unique index or a primary key including hello sharding key on a given table if you want toouse that table with split/merge/move requests.</span></span> <span data-ttu-id="8f77c-248">A megfelelő teljesítmény érdekében hello horizontális kulcs hello kezdő oszlop hello kulcs vagy hello index kell lennie.</span><span class="sxs-lookup"><span data-stu-id="8f77c-248">For performance reasons, hello sharding key should be hello leading column in hello key or hello index.</span></span>
* <span data-ttu-id="8f77c-249">Hello során végzett kérésfeldolgozással néhány shardlet adatok jelen, mind a hello forrás- és hello cél shard lehet.</span><span class="sxs-lookup"><span data-stu-id="8f77c-249">During hello course of request processing, some shardlet data may be present both on hello source and hello target shard.</span></span> <span data-ttu-id="8f77c-250">Ez a szükséges tooprotect-hibákkal szemben hello shardlet mozgás során.</span><span class="sxs-lookup"><span data-stu-id="8f77c-250">This is necessary tooprotect against failures during hello shardlet movement.</span></span> <span data-ttu-id="8f77c-251">hello vegyes egyesítéses a hello shard térkép integrációja biztosítja, hogy a kapcsolatok keresztül hello függő útválasztási API-k használatával végzett hello **OpenConnectionForKey** hello shard térképen metódus nem látható minden inkonzisztens köztes állapotok.</span><span class="sxs-lookup"><span data-stu-id="8f77c-251">hello integration of split-merge with hello shard map ensures that connections through hello data dependent routing APIs using hello **OpenConnectionForKey** method on hello shard map do not see any inconsistent intermediate states.</span></span> <span data-ttu-id="8f77c-252">Azonban ha csatlakozó toohello forrás- vagy hello cél szilánkok hello használata nélkül **OpenConnectionForKey** metódus, köztes inkonzisztens állapotok visszatéréskor jelenik vegyes/egyesítési/move kérelmek fog.</span><span class="sxs-lookup"><span data-stu-id="8f77c-252">However, when connecting toohello source or hello target shards without using hello **OpenConnectionForKey** method, inconsistent intermediate states might be visible when split/merge/move requests are going on.</span></span> <span data-ttu-id="8f77c-253">Ezek a kapcsolatok részleges vagy ismétlődő eredmények hello időzítés vagy hello shard hello kapcsolat függően előfordulhat, hogy megjelenítése.</span><span class="sxs-lookup"><span data-stu-id="8f77c-253">These connections may show partial or duplicate results depending on hello timing or hello shard underlying hello connection.</span></span> <span data-ttu-id="8f77c-254">Ez a korlátozás jelenleg magában foglalja a rugalmas bővítést több-Shard-lekérdezések által létrehozott hello kapcsolatok.</span><span class="sxs-lookup"><span data-stu-id="8f77c-254">This limitation currently includes hello connections made by Elastic Scale Multi-Shard-Queries.</span></span>
* <span data-ttu-id="8f77c-255">nem kell osztani hello metaadatokat tároló adatbázis hello vegyes egyesítéses szolgáltatás különböző szerepkörök között.</span><span class="sxs-lookup"><span data-stu-id="8f77c-255">hello metadata database for hello split-merge service must not be shared between different roles.</span></span> <span data-ttu-id="8f77c-256">Például a tesztelési futtató hello vegyes egyesítéses szolgáltatás egyik szerepköre kell toopoint tooa különböző metaadatokat tároló adatbázis hello éles szerepkörnél.</span><span class="sxs-lookup"><span data-stu-id="8f77c-256">For example, a role of hello split-merge service running in staging needs toopoint tooa different metadata database than hello production role.</span></span>

## <a name="billing"></a><span data-ttu-id="8f77c-257">Számlázás</span><span class="sxs-lookup"><span data-stu-id="8f77c-257">Billing</span></span>
<span data-ttu-id="8f77c-258">hello vegyes egyesítéses szolgáltatás fut, felhőalapú szolgáltatásként a Microsoft Azure-előfizetést.</span><span class="sxs-lookup"><span data-stu-id="8f77c-258">hello split-merge service runs as a cloud service in your Microsoft Azure subscription.</span></span> <span data-ttu-id="8f77c-259">Ezért a felhőalapú szolgáltatások hello szolgáltatás tooyour példánya alkalmazni.</span><span class="sxs-lookup"><span data-stu-id="8f77c-259">Therefore charges for cloud services apply tooyour instance of hello service.</span></span> <span data-ttu-id="8f77c-260">Kivéve, ha gyakran műveleteket hajt végre vegyes/egyesítési/áthelyezésére, javasoljuk a felosztás egyesítéses felhőszolgáltatás törlése.</span><span class="sxs-lookup"><span data-stu-id="8f77c-260">Unless you frequently perform split/merge/move operations, we recommend you delete your split-merge cloud service.</span></span> <span data-ttu-id="8f77c-261">Menti a futó költségeit vagy felhő szolgáltatáspéldány telepített.</span><span class="sxs-lookup"><span data-stu-id="8f77c-261">That saves costs for running or deployed cloud service instances.</span></span> <span data-ttu-id="8f77c-262">Hozza létre újra, és indítsa el a könnyen futtatható konfiguráció tooperform van szüksége vágási vagy egyesítési műveletek.</span><span class="sxs-lookup"><span data-stu-id="8f77c-262">You can re-deploy and start your readily runnable configuration whenever you need tooperform split or merge operations.</span></span> 

## <a name="monitoring"></a><span data-ttu-id="8f77c-263">Figyelés</span><span class="sxs-lookup"><span data-stu-id="8f77c-263">Monitoring</span></span>
### <a name="status-tables"></a><span data-ttu-id="8f77c-264">Állapot táblák</span><span class="sxs-lookup"><span data-stu-id="8f77c-264">Status tables</span></span>
<span data-ttu-id="8f77c-265">hello vegyes egyesítéses szolgáltatást biztosít hello **RequestStatus** hello metaadatokat tároló adatbázis befejeződött, és a folyamatban lévő kérelmek figyeléséhez.</span><span class="sxs-lookup"><span data-stu-id="8f77c-265">hello split-merge Service provides hello **RequestStatus** table in hello metadata store database for monitoring of completed and ongoing requests.</span></span> <span data-ttu-id="8f77c-266">hello táblázat minden egyes vegyes-egyesítési kérelem töltött hello vegyes egyesítéses szolgáltatás elküldött toothis példánya egy sort.</span><span class="sxs-lookup"><span data-stu-id="8f77c-266">hello table lists a row for each split-merge request that has been submitted toothis instance of hello split-merge service.</span></span> <span data-ttu-id="8f77c-267">A következő információkat az egyes kérelmek hello biztosít:</span><span class="sxs-lookup"><span data-stu-id="8f77c-267">It gives hello following information for each request:</span></span>

* <span data-ttu-id="8f77c-268">**Timestamp típusú**: hello hello kérelem bekapcsolásakor dátumát és időpontját.</span><span class="sxs-lookup"><span data-stu-id="8f77c-268">**Timestamp**: hello time and date when hello request was started.</span></span>
* <span data-ttu-id="8f77c-269">**OperationID azonosítójú**: A GUID, amely egyedileg azonosítja a hello kérelem.</span><span class="sxs-lookup"><span data-stu-id="8f77c-269">**OperationId**: A GUID that uniquely identifies hello request.</span></span> <span data-ttu-id="8f77c-270">A kérelem is használt toocancel hello művelet, amíg még mindig folyamatban.</span><span class="sxs-lookup"><span data-stu-id="8f77c-270">This request can also be used toocancel hello operation while it is still ongoing.</span></span>
* <span data-ttu-id="8f77c-271">**Állapot**: hello hello kérés jelenlegi állapotában.</span><span class="sxs-lookup"><span data-stu-id="8f77c-271">**Status**: hello current state of hello request.</span></span> <span data-ttu-id="8f77c-272">A folyamatban lévő kérések is felsorolja hello a mely hello kérelme, mert az aktuális fázisban.</span><span class="sxs-lookup"><span data-stu-id="8f77c-272">For ongoing requests, it also lists hello current phase in which hello request is.</span></span>
* <span data-ttu-id="8f77c-273">**CancelRequest**: A jelzőt, amely azt jelzi, hogy hello kérelem visszavonásra került.</span><span class="sxs-lookup"><span data-stu-id="8f77c-273">**CancelRequest**: A flag that indicates whether hello request has been cancelled.</span></span>
* <span data-ttu-id="8f77c-274">**Folyamatban lévő**: A százalékos becsült feldolgozottsági hello a művelethez.</span><span class="sxs-lookup"><span data-stu-id="8f77c-274">**Progress**: A percentage estimate of completion for hello operation.</span></span> <span data-ttu-id="8f77c-275">50 érték azt jelzi, hogy-e a hello művelet körülbelül 50 % kész.</span><span class="sxs-lookup"><span data-stu-id="8f77c-275">A value of 50 indicates that hello operation is approximately 50% complete.</span></span>
* <span data-ttu-id="8f77c-276">**Részletek**: az XML-érték, amely egy részletesebb jelentést.</span><span class="sxs-lookup"><span data-stu-id="8f77c-276">**Details**: An XML value that provides a more detailed progress report.</span></span> <span data-ttu-id="8f77c-277">Állapotjelentés hello beállítása a sorok másolja át a forrás tootarget rendszeresen frissül.</span><span class="sxs-lookup"><span data-stu-id="8f77c-277">hello progress report is periodically updated as sets of rows are copied from source tootarget.</span></span> <span data-ttu-id="8f77c-278">Hibák vagy kivételek esetén ebben az oszlopban hello a hibával kapcsolatos részletes adatokat is tartalmaz.</span><span class="sxs-lookup"><span data-stu-id="8f77c-278">In case of failures or exceptions, this column also includes more detailed information about hello failure.</span></span>

### <a name="azure-diagnostics"></a><span data-ttu-id="8f77c-279">Azure Diagnostics</span><span class="sxs-lookup"><span data-stu-id="8f77c-279">Azure Diagnostics</span></span>
<span data-ttu-id="8f77c-280">hello vegyes egyesítéses szolgáltatás figyelési és diagnosztika Azure SDK 2.5 alapján Azure Diagnostics használja.</span><span class="sxs-lookup"><span data-stu-id="8f77c-280">hello split-merge service uses Azure Diagnostics based on Azure SDK 2.5 for monitoring and diagnostics.</span></span> <span data-ttu-id="8f77c-281">Hello diagnosztikai konfigurációja szabályozhatja az itt leírtak szerint: [diagnosztika engedélyezésével az Azure Cloud Services és a virtuális gépek](../cloud-services/cloud-services-dotnet-diagnostics.md).</span><span class="sxs-lookup"><span data-stu-id="8f77c-281">You control hello diagnostics configuration as explained here: [Enabling Diagnostics in Azure Cloud Services and Virtual Machines](../cloud-services/cloud-services-dotnet-diagnostics.md).</span></span> <span data-ttu-id="8f77c-282">hello letöltött csomag tartalmazza a két diagnosztikai konfiguráció - egy hello webes szerepkör, egy hello feldolgozói szerepkör esetében.</span><span class="sxs-lookup"><span data-stu-id="8f77c-282">hello download package includes two diagnostics configurations - one for hello web role and one for hello worker role.</span></span> <span data-ttu-id="8f77c-283">Ezen diagnosztika konfigurációk hello szolgáltatás követve hello a [Cloud Service Fundamentals a Microsoft Azure-ban](https://code.msdn.microsoft.com/windowsazure/Cloud-Service-Fundamentals-4ca72649).</span><span class="sxs-lookup"><span data-stu-id="8f77c-283">These diagnostics configurations for hello service follow hello guidance from [Cloud Service Fundamentals in Microsoft Azure](https://code.msdn.microsoft.com/windowsazure/Cloud-Service-Fundamentals-4ca72649).</span></span> <span data-ttu-id="8f77c-284">Ez magában foglalja a hello definíciók toolog teljesítményszámlálók, a IIS naplókat, a Windows eseménynaplóiban keresse meg és a felosztott egyesítéses alkalmazás eseménynaplóiban.</span><span class="sxs-lookup"><span data-stu-id="8f77c-284">It includes hello definitions toolog Performance Counters, IIS logs, Windows Event Logs, and split-merge application event logs.</span></span> 

## <a name="deploy-diagnostics"></a><span data-ttu-id="8f77c-285">Diagnosztika telepítése</span><span class="sxs-lookup"><span data-stu-id="8f77c-285">Deploy Diagnostics</span></span>
<span data-ttu-id="8f77c-286">tooenable figyelési és -diagnosztika hello diagnosztikai konfiguráció hello hello NuGet-csomagot, futtassa a következő parancsokat az Azure PowerShell hello által biztosított webes és feldolgozói szerepkörök:</span><span class="sxs-lookup"><span data-stu-id="8f77c-286">tooenable monitoring and diagnostics using hello diagnostic configuration for hello web and worker roles provided by hello NuGet package, run hello following commands using Azure PowerShell:</span></span> 

    $storage_name = "<YourAzureStorageAccount>" 

    $key = "<YourAzureStorageAccountKey" 

    $storageContext = New-AzureStorageContext -StorageAccountName $storage_name -StorageAccountKey $key  


    $config_path = "<YourFilePath>\SplitMergeWebContent.diagnostics.xml" 

    $service_name = "<YourCloudServiceName>" 

    Set-AzureServiceDiagnosticsExtension -StorageContext $storageContext -DiagnosticsConfigurationPath $config_path -ServiceName $service_name -Slot Production -Role "SplitMergeWeb" 


    $config_path = "<YourFilePath>\SplitMergeWorkerContent.diagnostics.xml" 

    $service_name = "<YourCloudServiceName>" 

    Set-AzureServiceDiagnosticsExtension -StorageContext $storageContext -DiagnosticsConfigurationPath $config_path -ServiceName $service_name -Slot Production -Role "SplitMergeWorker" 

<span data-ttu-id="8f77c-287">Kapcsolatos további tájékoztatásért található tooconfigure és központi telepítése a diagnosztikai beállítások itt: [diagnosztika engedélyezésével az Azure Cloud Services és a virtuális gépek](../cloud-services/cloud-services-dotnet-diagnostics.md).</span><span class="sxs-lookup"><span data-stu-id="8f77c-287">You can find more information on how tooconfigure and deploy diagnostics settings here: [Enabling Diagnostics in Azure Cloud Services and Virtual Machines](../cloud-services/cloud-services-dotnet-diagnostics.md).</span></span> 

## <a name="retrieve-diagnostics"></a><span data-ttu-id="8f77c-288">Diagnosztika beolvasása</span><span class="sxs-lookup"><span data-stu-id="8f77c-288">Retrieve diagnostics</span></span>
<span data-ttu-id="8f77c-289">A diagnosztika könnyen elérhető hello hello Server Explorer fa Azure része a Visual Studio Server Explorer hello.</span><span class="sxs-lookup"><span data-stu-id="8f77c-289">You can easily access your diagnostics from hello Visual Studio Server Explorer in hello Azure part of hello Server Explorer tree.</span></span> <span data-ttu-id="8f77c-290">Nyissa meg a Visual Studio példánya, és hello menüsávon kattintson a nézet, és a Server Explorer.</span><span class="sxs-lookup"><span data-stu-id="8f77c-290">Open a Visual Studio instance, and in hello menu bar click View, and Server Explorer.</span></span> <span data-ttu-id="8f77c-291">Kattintson a hello Azure ikon tooconnect tooyour Azure-előfizetés.</span><span class="sxs-lookup"><span data-stu-id="8f77c-291">Click hello Azure icon tooconnect tooyour Azure subscription.</span></span> <span data-ttu-id="8f77c-292">Keresse meg tooAzure -> tároló -> <your storage account> -> táblák WADLogsTable ->.</span><span class="sxs-lookup"><span data-stu-id="8f77c-292">Then navigate tooAzure -> Storage -> <your storage account> -> Tables -> WADLogsTable.</span></span> <span data-ttu-id="8f77c-293">További információkért lásd: [tárolási erőforrások keresse meg a Server Explorer](http://msdn.microsoft.com/library/azure/ff683677.aspx).</span><span class="sxs-lookup"><span data-stu-id="8f77c-293">For more information, see [Browsing Storage Resources with Server Explorer](http://msdn.microsoft.com/library/azure/ff683677.aspx).</span></span> 

![WADLogsTable][2]

<span data-ttu-id="8f77c-295">hello hello a fenti ábrán kiemelt WADLogsTable hello tartalmaz részletes hello vegyes egyesítéses szolgáltatás alkalmazásnaplóban származó események.</span><span class="sxs-lookup"><span data-stu-id="8f77c-295">hello WADLogsTable highlighted in hello figure above contains hello detailed events from hello split-merge service’s application log.</span></span> <span data-ttu-id="8f77c-296">Vegye figyelembe, hogy a letöltött hello hello használható alapértelmezett konfigurációt csomag éles környezet részesíti előnyben.</span><span class="sxs-lookup"><span data-stu-id="8f77c-296">Note that hello default configuration of hello downloaded package is geared towards a production deployment.</span></span> <span data-ttu-id="8f77c-297">Ezért, amellyel naplókat, valamint a számlálók kikerülnek hello szolgáltatáspéldány hello időköz, nagy (5 perc).</span><span class="sxs-lookup"><span data-stu-id="8f77c-297">Therefore hello interval at which logs and counters are pulled from hello service instances is large (5 minutes).</span></span> <span data-ttu-id="8f77c-298">Teszt és fejlesztési alacsonyabb hello hello web vagy hello feldolgozói szerepkör tooyour hello diagnosztikai beállítások módosításával időköz.</span><span class="sxs-lookup"><span data-stu-id="8f77c-298">For test and development, lower hello interval by adjusting hello diagnostics settings of hello web or hello worker role tooyour needs.</span></span> <span data-ttu-id="8f77c-299">Kattintson a jobb gombbal a Visual Studio Server Explorer (lásd fent) hello hello szerepkör, és adja meg az átviteli időszak hello hello párbeszédpanelen hello diagnosztika konfigurációs beállítások:</span><span class="sxs-lookup"><span data-stu-id="8f77c-299">Right-click on hello role in hello Visual Studio Server Explorer (see above) and then adjust hello Transfer Period in hello dialog for hello Diagnostics configuration settings:</span></span> 

![Konfiguráció][3]

## <a name="performance"></a><span data-ttu-id="8f77c-301">Teljesítmény</span><span class="sxs-lookup"><span data-stu-id="8f77c-301">Performance</span></span>
<span data-ttu-id="8f77c-302">Jobb teljesítmény általában toobe elvárás hello nagyobb, a további performant szolgáltatási szinteket az Azure SQL-adatbázis.</span><span class="sxs-lookup"><span data-stu-id="8f77c-302">In general, better performance is toobe expected from hello higher, more performant service tiers in Azure SQL Database.</span></span> <span data-ttu-id="8f77c-303">Hello magasabb szolgáltatásszintek magasabb IO-, Processzor- és memória helylefoglalását hello tömeges másolás előnyeit, és törölje a felosztott egyesítéses szolgáltatás által használt hello műveletek.</span><span class="sxs-lookup"><span data-stu-id="8f77c-303">Higher IO, CPU and memory allocations for hello higher service tiers benefit hello bulk copy and delete operations that hello split-merge service uses.</span></span> <span data-ttu-id="8f77c-304">Éppen ezért növelése hello szolgáltatási szintjei csak ezeket az adatbázisokat egy meghatározott, korlátozott ideig.</span><span class="sxs-lookup"><span data-stu-id="8f77c-304">For that reason, increase hello service tier just for those databases for a defined, limited period of time.</span></span>

<span data-ttu-id="8f77c-305">hello szolgáltatás is érvényesítési lekérdezések a normál műveletek részeként hajtja végre.</span><span class="sxs-lookup"><span data-stu-id="8f77c-305">hello service also performs validation queries as part of its normal operations.</span></span> <span data-ttu-id="8f77c-306">A következő érvényesítési lekérdezések hello cél tartomány adatai váratlan jelenléte keressen, és győződjön meg arról, hogy a vegyes/egyesítési/áthelyezési művelet elindítja a konzisztens.</span><span class="sxs-lookup"><span data-stu-id="8f77c-306">These validation queries check for unexpected presence of data in hello target range and ensure that any split/merge/move operation starts from a consistent state.</span></span> <span data-ttu-id="8f77c-307">Ezeket a lekérdezéseket az összes működik olyan nagy távolságú horizontális kulcstartományokkal hello hatókör hello művelet és hello kérelem definíciója részeként hello köteg mérete határozza meg.</span><span class="sxs-lookup"><span data-stu-id="8f77c-307">These queries all work over sharding key ranges defined by hello scope of hello operation and hello batch size provided as part of hello request definition.</span></span> <span data-ttu-id="8f77c-308">Ezeket a lekérdezéseket legjobb végre, ha az index jelen, hello horizontális kulccsal rendelkezik, mint a kezdő oszlop hello.</span><span class="sxs-lookup"><span data-stu-id="8f77c-308">These queries perform best when an index is present that has hello sharding key as hello leading column.</span></span> 

<span data-ttu-id="8f77c-309">Ezenkívül hello horizontális kulccsal hello kezdő oszlop egyediségének tulajdonság lehetővé teszi a hello szolgáltatás toouse optimalizált megközelítés, amely korlátozza az erőforrás-felhasználás naplózási hely- és memória szempontjából.</span><span class="sxs-lookup"><span data-stu-id="8f77c-309">In addition, a uniqueness property with hello sharding key as hello leading column will allow hello service toouse an optimized approach that limits resource consumption in terms of log space and memory.</span></span> <span data-ttu-id="8f77c-310">Ez egyediségi tulajdonság szükséges toomove nagy adatmennyiség (általában felett 1GB).</span><span class="sxs-lookup"><span data-stu-id="8f77c-310">This uniqueness property is required toomove large data sizes (typically above 1GB).</span></span> 

## <a name="how-tooupgrade"></a><span data-ttu-id="8f77c-311">Hogyan tooupgrade</span><span class="sxs-lookup"><span data-stu-id="8f77c-311">How tooupgrade</span></span>
1. <span data-ttu-id="8f77c-312">Hello kövesse [vegyes egyesítéses szolgáltatás telepítése](sql-database-elastic-scale-configure-deploy-split-and-merge.md).</span><span class="sxs-lookup"><span data-stu-id="8f77c-312">Follow hello steps in [Deploy a split-merge service](sql-database-elastic-scale-configure-deploy-split-and-merge.md).</span></span>
2. <span data-ttu-id="8f77c-313">A felhőalapú szolgáltatás konfigurációs fájlja a felosztás egyesítéses telepítési tooreflect hello új konfigurációs paraméterek módosítása.</span><span class="sxs-lookup"><span data-stu-id="8f77c-313">Change your cloud service configuration file for your split-merge deployment tooreflect hello new configuration parameters.</span></span> <span data-ttu-id="8f77c-314">Egy új kötelező paraméter a titkosításhoz használt hello tanúsítvány hello adatait.</span><span class="sxs-lookup"><span data-stu-id="8f77c-314">A new required parameter is hello information about hello certificate used for encryption.</span></span> <span data-ttu-id="8f77c-315">Egy egyszerű módot toodo toocompare hello új konfigurációs sablon fájl hello le a meglévő konfigurációt ellen.</span><span class="sxs-lookup"><span data-stu-id="8f77c-315">An easy way toodo this is toocompare hello new configuration template file from hello download against your existing configuration.</span></span> <span data-ttu-id="8f77c-316">Ellenőrizze, hogy hello webes és feldolgozói szerepkör hello "DataEncryptionPrimaryCertificateThumbprint" és "DataEncryptionPrimary" hello-beállítások.</span><span class="sxs-lookup"><span data-stu-id="8f77c-316">Make sure you add hello settings for “DataEncryptionPrimaryCertificateThumbprint” and “DataEncryptionPrimary” for both hello web and hello worker role.</span></span>
3. <span data-ttu-id="8f77c-317">Hello frissítés tooAzure telepítés megkezdése előtt győződjön meg arról, hogy az összes jelenleg futó vegyes merge műveletet végzett.</span><span class="sxs-lookup"><span data-stu-id="8f77c-317">Before deploying hello update tooAzure, ensure that all currently running split-merge operations have finished.</span></span> <span data-ttu-id="8f77c-318">Könnyen ehhez hello RequestStatus és PendingWorkflows táblák hello vegyes egyesítéses metaadatokat tároló adatbázis a folyamatban lévő kérelmek lekérdezésével.</span><span class="sxs-lookup"><span data-stu-id="8f77c-318">You can easily do this by querying hello RequestStatus and PendingWorkflows tables in hello split-merge metadata database for ongoing requests.</span></span>
4. <span data-ttu-id="8f77c-319">A meglévő felhőalapú szolgáltatás az üzemelő példány frissítése vegyes-egyesítése az Azure-előfizetéshez hello új csomag és a frissített konfigurációs fájlt.</span><span class="sxs-lookup"><span data-stu-id="8f77c-319">Update your existing cloud service deployment for split-merge in your Azure subscription with hello new package and your updated service configuration file.</span></span>

<span data-ttu-id="8f77c-320">Vegyes egyesítéses tooupgrade tooprovision egy új metaadatokat tároló adatbázis nem szükséges.</span><span class="sxs-lookup"><span data-stu-id="8f77c-320">You do not need tooprovision a new metadata database for split-merge tooupgrade.</span></span> <span data-ttu-id="8f77c-321">hello új verziója automatikusan frissíti a meglévő metaadatok adatbázis toohello új verziója.</span><span class="sxs-lookup"><span data-stu-id="8f77c-321">hello new version will automatically upgrade your existing metadata database toohello new version.</span></span> 

## <a name="best-practices--troubleshooting"></a><span data-ttu-id="8f77c-322">Ajánlott eljárások és hibaelhárítás</span><span class="sxs-lookup"><span data-stu-id="8f77c-322">Best practices & troubleshooting</span></span>
* <span data-ttu-id="8f77c-323">Adja meg egy tesztelési bérlőn, valamint a legfontosabb vegyes/egyesítési/áthelyezési műveletek hello tesztbérlővel megadásával több szilánkok között.</span><span class="sxs-lookup"><span data-stu-id="8f77c-323">Define a test tenant and exercise your most important split/merge/move operations with hello test tenant across several shards.</span></span> <span data-ttu-id="8f77c-324">Győződjön meg arról, hogy minden helyesen van definiálva a shard képezze, hogy hello műveletek sérti vonatkozó megkötések vagy a külső kulcsokat.</span><span class="sxs-lookup"><span data-stu-id="8f77c-324">Ensure that all metadata is defined correctly in your shard map and that hello operations do not violate constraints or foreign keys.</span></span>
* <span data-ttu-id="8f77c-325">Tartsa hello tesztelési bérlői adatméret hello adatok maximális mérete a legnagyobb bérlő fent nem áll kapcsolatban adatméret tooensure kapcsolatos hiba lépett fel.</span><span class="sxs-lookup"><span data-stu-id="8f77c-325">Keep hello test tenant data size above hello maximum data size of your largest tenant tooensure you are not encountering data size related issues.</span></span> <span data-ttu-id="8f77c-326">Ezzel a megoldással egy felső határa felmérheti a hello időt toomove egy egybérlős körül.</span><span class="sxs-lookup"><span data-stu-id="8f77c-326">This helps you assess an upper bound on hello time it takes toomove a single tenant around.</span></span> 
* <span data-ttu-id="8f77c-327">Győződjön meg arról, hogy a séma lehetővé teszi a törlést.</span><span class="sxs-lookup"><span data-stu-id="8f77c-327">Make sure that your schema allows deletions.</span></span> <span data-ttu-id="8f77c-328">hello vegyes egyesítéses szolgáltatáshoz hello képességét tooremove hello forrás shard adatait hello adatok sikeresen másolt toohello cél követően.</span><span class="sxs-lookup"><span data-stu-id="8f77c-328">hello split-merge service requires hello ability tooremove data from hello source shard once hello data has been successfully copied toohello target.</span></span> <span data-ttu-id="8f77c-329">Például **triggerek törlése** megakadályozhatja, hogy a hello szolgáltatás hello forrás hello adatok törlése és a műveletek toofail.</span><span class="sxs-lookup"><span data-stu-id="8f77c-329">For example, **delete triggers** can prevent hello service from deleting hello data on hello source and may cause operations toofail.</span></span>
* <span data-ttu-id="8f77c-330">hello horizontális kulcs hello kezdő oszlop lehet az Ön elsődleges kulcs vagy egyedi index definícióját.</span><span class="sxs-lookup"><span data-stu-id="8f77c-330">hello sharding key should be hello leading column in your primary key or unique index definition.</span></span> <span data-ttu-id="8f77c-331">Hello legjobb teljesítményt hello megosztott vagy egyesítés érvényesítési lekérdezések, ezzel biztosítható és hello tényleges mozgás és törlési műveletek horizontális kulcstartományokkal mindig működésbe, amelyek.</span><span class="sxs-lookup"><span data-stu-id="8f77c-331">That ensures hello best performance for hello split or merge validation queries, and for hello actual data movement and deletion operations which always operate on sharding key ranges.</span></span>
* <span data-ttu-id="8f77c-332">A felosztott egyesítéses szolgáltatás az adatbázisokat tároló hello régió és az adatok Center elhelyezésének engedélyezése.</span><span class="sxs-lookup"><span data-stu-id="8f77c-332">Collocate your split-merge service in hello region and data center where your databases reside.</span></span> 

[!INCLUDE [elastic-scale-include](../../includes/elastic-scale-include.md)]

<!--Anchors-->
<!--Image references-->
[1]:./media/sql-database-elastic-scale-overview-split-and-merge/split-merge-overview.png
[2]:./media/sql-database-elastic-scale-overview-split-and-merge/diagnostics.png
[3]:./media/sql-database-elastic-scale-overview-split-and-merge/diagnostics-config.png

