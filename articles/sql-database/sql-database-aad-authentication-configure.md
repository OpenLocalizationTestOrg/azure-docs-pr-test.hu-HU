---
title: "Azure Active Directory-hitelesítés - SQL konfigurálása |} Microsoft Docs"
description: "Megtudhatja, hogyan Csatlakozás SQL Database és az SQL Data Warehouse Azure Active Directory-hitelesítés használatával."
services: sql-database
documentationcenter: 
author: BYHAM
manager: jhubbard
editor: 
tags: 
ms.assetid: 7e2508a1-347e-4f15-b060-d46602c5ce7e
ms.service: sql-database
ms.custom: security
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-management
ms.date: 07/10/2017
ms.author: rickbyh
ms.openlocfilehash: 61a52813769891aa63373437e9300d4f8f47fab2
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 08/18/2017
---
# <a name="configure-and-manage-azure-active-directory-authentication-with-sql-database-or-sql-data-warehouse"></a><span data-ttu-id="c3a75-103">Konfigurálhatja és kezelheti az Azure Active Directory-hitelesítés az SQL Database vagy az SQL Data Warehouse</span><span class="sxs-lookup"><span data-stu-id="c3a75-103">Configure and manage Azure Active Directory authentication with SQL Database or SQL Data Warehouse</span></span>

<span data-ttu-id="c3a75-104">Ez a cikk bemutatja, létrehozása és feltöltése az Azure AD és az Azure AD az Azure SQL Database és az SQL Data Warehouse majd használni.</span><span class="sxs-lookup"><span data-stu-id="c3a75-104">This article shows you how to create and populate Azure AD, and then use Azure AD with Azure SQL Database and SQL Data Warehouse.</span></span> <span data-ttu-id="c3a75-105">Megtudhatja, [Azure Active Directory-hitelesítéssel](sql-database-aad-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="c3a75-105">For an overview, see [Azure Active Directory Authentication](sql-database-aad-authentication.md).</span></span>

>  [!NOTE]  
>  <span data-ttu-id="c3a75-106">Egy Azure virtuális Gépen futó SQL Server nem támogatott a Kapcsolódás egy Azure Active Directory-fiókkal.</span><span class="sxs-lookup"><span data-stu-id="c3a75-106">Connecting to SQL Server running on an Azure VM is not supported using an Azure Active Directory account.</span></span> <span data-ttu-id="c3a75-107">A tartomány Active Directory-fiókot használni.</span><span class="sxs-lookup"><span data-stu-id="c3a75-107">Use a domain Active Directory account instead.</span></span>

## <a name="create-and-populate-an-azure-ad"></a><span data-ttu-id="c3a75-108">Létrehozása és feltöltése az Azure AD</span><span class="sxs-lookup"><span data-stu-id="c3a75-108">Create and populate an Azure AD</span></span>
<span data-ttu-id="c3a75-109">Hozzon létre egy Azure AD és a felhasználókat és csoportokat.</span><span class="sxs-lookup"><span data-stu-id="c3a75-109">Create an Azure AD and populate it with users and groups.</span></span> <span data-ttu-id="c3a75-110">Az Azure AD a kezdeti tartomány az Azure AD által kezelt tartomány lehet.</span><span class="sxs-lookup"><span data-stu-id="c3a75-110">Azure AD can be the initial domain Azure AD managed domain.</span></span> <span data-ttu-id="c3a75-111">Az Azure AD egy a helyszíni Active Directory tartományi szolgáltatások, amelyek össze van vonva az Azure AD-val is lehet.</span><span class="sxs-lookup"><span data-stu-id="c3a75-111">Azure AD can also be an on-premises Active Directory Domain Services that is federated with the Azure AD.</span></span>

<span data-ttu-id="c3a75-112">További információk a következő témakörökben találhatók: [Helyszíni identitások integrálása az Azure Active Directoryval](../active-directory/active-directory-aadconnect.md), [Saját tartománynév hozzáadása az Azure AD-hez](../active-directory/active-directory-add-domain.md), [A Microsoft Azure mostantól támogatja a Windows Server Active Directoryval való összevonást](https://azure.microsoft.com/blog/2012/11/28/windows-azure-now-supports-federation-with-windows-server-active-directory/), [Az Azure AD-címtár felügyelete](https://msdn.microsoft.com/library/azure/hh967611.aspx), [Az Azure AD kezelése Windows PowerShell használatával](/powershell/azure/overview?view=azureadps-2.0) és [Hibrid identitás – szükséges portok és protokollok](../active-directory/active-directory-aadconnect-ports.md).</span><span class="sxs-lookup"><span data-stu-id="c3a75-112">For more information, see [Integrating your on-premises identities with Azure Active Directory](../active-directory/active-directory-aadconnect.md), [Add your own domain name to Azure AD](../active-directory/active-directory-add-domain.md), [Microsoft Azure now supports federation with Windows Server Active Directory](https://azure.microsoft.com/blog/2012/11/28/windows-azure-now-supports-federation-with-windows-server-active-directory/), [Administering your Azure AD directory](https://msdn.microsoft.com/library/azure/hh967611.aspx), [Manage Azure AD using Windows PowerShell](/powershell/azure/overview?view=azureadps-2.0), and [Hybrid Identity Required Ports and Protocols](../active-directory/active-directory-aadconnect-ports.md).</span></span>

## <a name="optional-associate-or-change-the-active-directory-that-is-currently-associated-with-your-azure-subscription"></a><span data-ttu-id="c3a75-113">Választható lehetőség: Hozzárendelése vagy az active directory jelenleg az Azure-előfizetéshez társított módosítása</span><span class="sxs-lookup"><span data-stu-id="c3a75-113">Optional: Associate or change the active directory that is currently associated with your Azure Subscription</span></span>
<span data-ttu-id="c3a75-114">Az adatbázis társítja a szervezet Azure AD-címtárral, hajtsa végre a könyvtár egy megbízható könyvtárat az Azure-előfizetés az adatbázis tárolásához.</span><span class="sxs-lookup"><span data-stu-id="c3a75-114">To associate your database with the Azure AD directory for your organization, make the directory a trusted directory for the Azure subscription hosting the database.</span></span> <span data-ttu-id="c3a75-115">További információkért lásd: [How Azure subscriptions are associated with Azure AD?](https://msdn.microsoft.com/library/azure/dn629581.aspx) (Hogyan kapcsolódnak az Azure-előfizetések az Azure AD-hoz?).</span><span class="sxs-lookup"><span data-stu-id="c3a75-115">For more information, see [How Azure subscriptions are associated with Azure AD](https://msdn.microsoft.com/library/azure/dn629581.aspx).</span></span>

<span data-ttu-id="c3a75-116">**További információ:** minden Azure-előfizetéshez az Azure AD-példányban megbízhatósági kapcsolatban áll.</span><span class="sxs-lookup"><span data-stu-id="c3a75-116">**Additional information:** Every Azure subscription has a trust relationship with an Azure AD instance.</span></span> <span data-ttu-id="c3a75-117">Ez azt jelenti, hogy megbízik ebben a címtárban a felhasználók, szolgáltatások és eszközök hitelesítéséhez.</span><span class="sxs-lookup"><span data-stu-id="c3a75-117">This means that it trusts that directory to authenticate users, services, and devices.</span></span> <span data-ttu-id="c3a75-118">Több előfizetés is megbízhat ugyanabban a címtárban, de egy előfizetés csak egy címtárban bízhat meg.</span><span class="sxs-lookup"><span data-stu-id="c3a75-118">Multiple subscriptions can trust the same directory, but a subscription trusts only one directory.</span></span> <span data-ttu-id="c3a75-119">Láthatja, melyik címtárban bízik meg az előfizetése a **beállítások** lapot [https://manage.windowsazure.com/](https://manage.windowsazure.com/).</span><span class="sxs-lookup"><span data-stu-id="c3a75-119">You can see which directory is trusted by your subscription under the **Settings** tab at [https://manage.windowsazure.com/](https://manage.windowsazure.com/).</span></span> <span data-ttu-id="c3a75-120">Ez az előfizetés és a címtár közötti bizalmi kapcsolat nem olyan, mint ami az előfizetés és az Azure összes többi erőforrása (webhelyek, adatbázisok stb.) között áll fenn, amelyek inkább az előfizetések gyermekerőforrásainak számítanak.</span><span class="sxs-lookup"><span data-stu-id="c3a75-120">This trust relationship that a subscription has with a directory is unlike the relationship that a subscription has with all other resources in Azure (websites, databases, and so on), which are more like child resources of a subscription.</span></span> <span data-ttu-id="c3a75-121">Ha egy előfizetés lejár, akkor az előfizetéssel társított ilyen egyéb erőforrások hozzáférése is lejár.</span><span class="sxs-lookup"><span data-stu-id="c3a75-121">If a subscription expires, then access to those other resources associated with the subscription also stops.</span></span> <span data-ttu-id="c3a75-122">De a címtár az Azure-ban elérhető marad, és más előfizetéseket társíthat ezzel a címtárral, és folytathatja a címtár felhasználóinak kezelését.</span><span class="sxs-lookup"><span data-stu-id="c3a75-122">But the directory remains in Azure, and you can associate another subscription with that directory and continue to manage the directory users.</span></span> <span data-ttu-id="c3a75-123">Erőforrások kapcsolatos további információkért lásd: [az az Azure-erőforrások hozzáférésének megismerése](https://msdn.microsoft.com/library/azure/dn584083.aspx).</span><span class="sxs-lookup"><span data-stu-id="c3a75-123">For more information about resources, see [Understanding resource access in Azure](https://msdn.microsoft.com/library/azure/dn584083.aspx).</span></span>

<span data-ttu-id="c3a75-124">A következő eljárások bemutatják az adott előfizetéshez tartozó könyvtárat szeretne váltani.</span><span class="sxs-lookup"><span data-stu-id="c3a75-124">The following procedures show you how to change the associated directory for a given subscription.</span></span>
1. <span data-ttu-id="c3a75-125">Csatlakozás a [klasszikus Azure portál](https://manage.windowsazure.com/) Azure-előfizetési rendszergazda segítségével.</span><span class="sxs-lookup"><span data-stu-id="c3a75-125">Connect to your [Azure Classic Portal](https://manage.windowsazure.com/) by using an Azure subscription administrator.</span></span>
2. <span data-ttu-id="c3a75-126">Válassza ki a bal oldali szalagcím **beállítások**.</span><span class="sxs-lookup"><span data-stu-id="c3a75-126">On the left banner, select **SETTINGS**.</span></span>
3. <span data-ttu-id="c3a75-127">Az előfizetések a Beállítások képernyő jelenik meg.</span><span class="sxs-lookup"><span data-stu-id="c3a75-127">Your subscriptions appear in the settings screen.</span></span> <span data-ttu-id="c3a75-128">Ha nem jelenik meg a kívánt előfizetés, kattintson a **előfizetések** a lap tetején legördülő listán a **szűrő által DIRECTORY** mezőbe, és válassza ki azt a címtárat, amely tartalmazza az előfizetések, és kattintson **ALKALMAZ**.</span><span class="sxs-lookup"><span data-stu-id="c3a75-128">If the desired subscription does not appear, click **Subscriptions** at the top, drop down the **FILTER BY DIRECTORY** box and select the directory that contains your subscriptions, and then click **APPLY**.</span></span>
   
    ![Válassza ki az előfizetést][4]
4. <span data-ttu-id="c3a75-130">Az a **beállítások** területen kattintson az előfizetéshez, majd **könyvtár szerkesztése** az oldal alján.</span><span class="sxs-lookup"><span data-stu-id="c3a75-130">In the **settings** area, click your subscription, and then click  **EDIT DIRECTORY** at the bottom of the page.</span></span>
   
    ![ad-beállítások-portálon][5]
5. <span data-ttu-id="c3a75-132">Az a **könyvtár szerkesztése** mezőben, válassza ki az Azure Active Directory, az SQL Server vagy az SQL Data Warehouse társított, majd kattintson a nyílra a Tovább gombra.</span><span class="sxs-lookup"><span data-stu-id="c3a75-132">In the **EDIT DIRECTORY** box, select the Azure Active Directory that is associated with your SQL Server or SQL Data Warehouse, and then click the arrow for next.</span></span>
   
    ![Edit directory jelölje ki][6]
6. <span data-ttu-id="c3a75-134">Az a **megerősítése** directory leképezési párbeszédpanelen ellenőrizze, hogy "**összes társrendszergazdák törlődni fog.**"</span><span class="sxs-lookup"><span data-stu-id="c3a75-134">In the **CONFIRM** directory Mapping dialog box, confirm that "**All co-administrators will be removed.**"</span></span>
   
    ![Edit directory megerősítése][7]
7. <span data-ttu-id="c3a75-136">Kattintson a töltse be újra a portálon.</span><span class="sxs-lookup"><span data-stu-id="c3a75-136">Click the check to reload the portal.</span></span>

   > [!NOTE]
   > <span data-ttu-id="c3a75-137">Ha a könyvtár hozzáférési társrendszergazdák, az Azure Active Directory-felhasználók és csoportok, módosításához és könyvtár biztonsági erőforrás-felhasználókat törlődnek, és már nem rendelkeznek hozzáféréssel az előfizetés vagy az erőforrások.</span><span class="sxs-lookup"><span data-stu-id="c3a75-137">When you change the directory, access to all co-administrators, Azure AD users and groups, and directory-backed resource users are removed and they no longer have access to this subscription or its resources.</span></span> <span data-ttu-id="c3a75-138">Csak, szolgáltatás-rendszergazdaként, konfigurálja a hozzáférést a rendszerbiztonsági tagoknak az új könyvtár alapján.</span><span class="sxs-lookup"><span data-stu-id="c3a75-138">Only you, as a service administrator, can configure access for principals based on the new directory.</span></span> <span data-ttu-id="c3a75-139">Ez a változás jelentős mennyiségű időt propagálódik az összes erőforrást is igénybe vehet.</span><span class="sxs-lookup"><span data-stu-id="c3a75-139">This change might take a substantial amount of time to propagate to all resources.</span></span> <span data-ttu-id="c3a75-140">Is módosítása a könyvtárban, az Azure AD-rendszergazda módosította SQL Database és az SQL Data Warehouse és minden meglévő Azure Active Directory-felhasználók adatbázis-hozzáférés letiltása.</span><span class="sxs-lookup"><span data-stu-id="c3a75-140">Changing the directory, also changes the Azure AD administrator for SQL Database and SQL Data Warehouse and disallow database access for any existing Azure AD users.</span></span> <span data-ttu-id="c3a75-141">Az Azure AD admin kell lennie (alább leírtak) alaphelyzetbe állítása és az új Azure AD-felhasználók kell létrehozni.</span><span class="sxs-lookup"><span data-stu-id="c3a75-141">The Azure AD admin must be reset (as described below) and new Azure AD users must be created.</span></span>
   >  

## <a name="create-an-azure-ad-administrator-for-azure-sql-server"></a><span data-ttu-id="c3a75-142">Az Azure AD-rendszergazda Azure SQL-kiszolgáló létrehozása</span><span class="sxs-lookup"><span data-stu-id="c3a75-142">Create an Azure AD administrator for Azure SQL server</span></span>
<span data-ttu-id="c3a75-143">Minden Azure SQL-kiszolgáló (amely egy SQL Database vagy az SQL Data Warehouse) kezdődik-e egy önálló kiszolgáló-rendszergazdai fiók, amely a teljes Azure SQL-kiszolgáló rendszergazdájához.</span><span class="sxs-lookup"><span data-stu-id="c3a75-143">Each Azure SQL server (which hosts a SQL Database or SQL Data Warehouse) starts with a single server administrator account that is the administrator of the entire Azure SQL server.</span></span> <span data-ttu-id="c3a75-144">A második SQL kiszolgáló rendszergazdája kell létrehozni, amely egy Azure AD-fiókot.</span><span class="sxs-lookup"><span data-stu-id="c3a75-144">A second SQL Server administrator must be created, that is an Azure AD account.</span></span> <span data-ttu-id="c3a75-145">Ez egyszerű tartalmazott adatbázis-felhasználó a master adatbázisban jön létre.</span><span class="sxs-lookup"><span data-stu-id="c3a75-145">This principal is created as a contained database user in the master database.</span></span> <span data-ttu-id="c3a75-146">A rendszergazdáknak, a kiszolgáló rendszergazdai fiók sem tagja a **db_owner** minden felhasználói szerepkör adatbázisából, és adja meg az egyes felhasználói az adatbázisban, mint a **dbo** felhasználó.</span><span class="sxs-lookup"><span data-stu-id="c3a75-146">As administrators, the server administrator accounts are members of the **db_owner** role in every user database, and enter each user database as the **dbo** user.</span></span> <span data-ttu-id="c3a75-147">A kiszolgáló rendszergazdai fiókokkal kapcsolatos további információkért lásd: [kezelése adatbázisok és bejelentkezések az Azure SQL Database](sql-database-manage-logins.md).</span><span class="sxs-lookup"><span data-stu-id="c3a75-147">For more information about the server administrator accounts, see [Managing Databases and Logins in Azure SQL Database](sql-database-manage-logins.md).</span></span>

<span data-ttu-id="c3a75-148">Az Azure Active Directoryval a georeplikációt, amikor az Azure Active Directory rendszergazdája úgy kell beállítani, az elsődleges és másodlagos kiszolgálók.</span><span class="sxs-lookup"><span data-stu-id="c3a75-148">When using Azure Active Directory with geo-replication, the Azure Active Directory administrator must be configured for both the primary and the secondary servers.</span></span> <span data-ttu-id="c3a75-149">Ha a kiszolgáló nem rendelkezik egy Azure Active Directory-rendszergazda, a Azure Active Directory bejelentkezési és a felhasználók fogadni a "nem lehet csatlakozni" kiszolgálóhiba.</span><span class="sxs-lookup"><span data-stu-id="c3a75-149">If a server does not have an Azure Active Directory administrator, then Azure Active Directory logins and users receive a "Cannot connect" to server error.</span></span>

> [!NOTE]
> <span data-ttu-id="c3a75-150">A felhasználók, amelyek nem az Azure AD-fiókot (beleértve az Azure SQL server rendszergazdai fiók) alapuló, az Azure AD-alapú felhasználók nem hozható létre, mert nem rendelkeznek engedéllyel az Azure AD-val javasolt adatbázis felhasználóinak.</span><span class="sxs-lookup"><span data-stu-id="c3a75-150">Users that are not based on an Azure AD account (including the Azure SQL server administrator account), cannot create Azure AD-based users, because they do not have permission to validate proposed database users with the Azure AD.</span></span>
> 

## <a name="provision-an-azure-active-directory-administrator-for-your-azure-sql-server"></a><span data-ttu-id="c3a75-151">Az Azure SQL server Azure Active Directory-rendszergazda kiépítése</span><span class="sxs-lookup"><span data-stu-id="c3a75-151">Provision an Azure Active Directory administrator for your Azure SQL server</span></span>

<span data-ttu-id="c3a75-152">Az alábbi két módszer megjelenítése kiépítése az Azure portálon, és a PowerShell használatával az Azure SQL server Azure Active Directory-rendszergazda.</span><span class="sxs-lookup"><span data-stu-id="c3a75-152">The following two procedures show you how to provision an Azure Active Directory administrator for your Azure SQL server in the Azure portal and by using PowerShell.</span></span>

### <a name="azure-portal"></a><span data-ttu-id="c3a75-153">Azure Portal</span><span class="sxs-lookup"><span data-stu-id="c3a75-153">Azure portal</span></span>
1. <span data-ttu-id="c3a75-154">Az a [Azure-portálon](https://portal.azure.com/), jobb felső sarokban, kattintson a legördülő listán lehetséges aktív könyvtárainak listáját a kapcsolatot.</span><span class="sxs-lookup"><span data-stu-id="c3a75-154">In the [Azure portal](https://portal.azure.com/), in the upper-right corner, click your connection to drop down a list of possible Active Directories.</span></span> <span data-ttu-id="c3a75-155">Válassza ki a megfelelő Active Directory az Azure AD alapértelmezés szerint.</span><span class="sxs-lookup"><span data-stu-id="c3a75-155">Choose the correct Active Directory as the default Azure AD.</span></span> <span data-ttu-id="c3a75-156">Ez a lépés az előfizetés társítását, és az Active Directory kapcsolatokhoz meggyőződött arról, hogy, hogy ugyanahhoz az előfizetéshez nem használja mindkét Azure SQL server az Azure AD és az SQL Server.</span><span class="sxs-lookup"><span data-stu-id="c3a75-156">This step links the subscription association with Active Directory with Azure SQL server making sure that the same subscription is used for both Azure AD and SQL Server.</span></span> <span data-ttu-id="c3a75-157">(Az Azure SQL-kiszolgáló is szolgáltató vagy az Azure SQL Database vagy az Azure SQL Data Warehouse.)</span><span class="sxs-lookup"><span data-stu-id="c3a75-157">(The Azure SQL server can be hosting either Azure SQL Database or Azure SQL Data Warehouse.)</span></span>   
    <span data-ttu-id="c3a75-158">![Válasszon ad][8]</span><span class="sxs-lookup"><span data-stu-id="c3a75-158">![choose-ad][8]</span></span>   
    
2. <span data-ttu-id="c3a75-159">Válassza ki a bal oldali szalagcím **SQL Server-kiszolgálók**, jelölje be a **SQL server**, majd a a **SQL Server** panelen kattintson **Active Directory-rendszergazda**.</span><span class="sxs-lookup"><span data-stu-id="c3a75-159">In the left banner select **SQL servers**, select your **SQL server**, and then in the **SQL Server** blade, click **Active Directory admin**.</span></span>   
3. <span data-ttu-id="c3a75-160">Az a **Active Directory-rendszergazda** panelen kattintson a **-rendszergazda beállítása**.</span><span class="sxs-lookup"><span data-stu-id="c3a75-160">In the **Active Directory admin** blade, click **Set admin**.</span></span>   
    <span data-ttu-id="c3a75-161">![az active directory kiválasztása](./media/sql-database-aad-authentication/select-active-directory.png)</span><span class="sxs-lookup"><span data-stu-id="c3a75-161">![select active directory](./media/sql-database-aad-authentication/select-active-directory.png)</span></span>  
    
4. <span data-ttu-id="c3a75-162">Az a **adja hozzá a rendszergazda** panelen keresse meg a felhasználót, válassza ki a felhasználó vagy csoport rendszergazdának lennie, és kattintson a **válasszon**.</span><span class="sxs-lookup"><span data-stu-id="c3a75-162">In the **Add admin** blade, search for a user, select the user or group to be an administrator, and then click **Select**.</span></span> <span data-ttu-id="c3a75-163">(Az Active Directory felügyeleti panelt jeleníti meg minden tagok és Active Directory-csoport.</span><span class="sxs-lookup"><span data-stu-id="c3a75-163">(The Active Directory admin blade shows all members and groups of your Active Directory.</span></span> <span data-ttu-id="c3a75-164">Felhasználók vagy csoportok használhatók, nem állítható be, mert nem támogatják az Azure AD rendszergazdai szerepkörrel.</span><span class="sxs-lookup"><span data-stu-id="c3a75-164">Users or groups that are grayed out cannot be selected because they are not supported as Azure AD administrators.</span></span> <span data-ttu-id="c3a75-165">(Lásd a támogatott rendszergazdái a **az Azure AD-funkciókat és korlátozások** szakasza [Azure Active Directory hitelesítés használata a hitelesítés és az SQL Database vagy az SQL Data Warehouse](sql-database-aad-authentication.md).) Szerepköralapú hozzáférés-vezérlést (RBAC) csak a portál vonatkozik, és az SQL Server nem propagálja.</span><span class="sxs-lookup"><span data-stu-id="c3a75-165">(See the list of supported admins in the **Azure AD Features and Limitations** section of [Use Azure Active Directory Authentication for authentication with SQL Database or SQL Data Warehouse](sql-database-aad-authentication.md).) Role-based access control (RBAC) applies only to the portal and is not propagated to SQL Server.</span></span>   
    <span data-ttu-id="c3a75-166">![Válassza ki a rendszergazda](./media/sql-database-aad-authentication/select-admin.png)</span><span class="sxs-lookup"><span data-stu-id="c3a75-166">![select admin](./media/sql-database-aad-authentication/select-admin.png)</span></span>  
    
5. <span data-ttu-id="c3a75-167">Felső részén a **Active Directory-rendszergazda** panelen kattintson a **mentése**.</span><span class="sxs-lookup"><span data-stu-id="c3a75-167">At the top of the **Active Directory admin** blade, click **SAVE**.</span></span>   
    <span data-ttu-id="c3a75-168">![Mentse admin](./media/sql-database-aad-authentication/save-admin.png)</span><span class="sxs-lookup"><span data-stu-id="c3a75-168">![save admin](./media/sql-database-aad-authentication/save-admin.png)</span></span>   

<span data-ttu-id="c3a75-169">A rendszergazda folyamatát több percig is eltarthat.</span><span class="sxs-lookup"><span data-stu-id="c3a75-169">The process of changing the administrator may take several minutes.</span></span> <span data-ttu-id="c3a75-170">Ezt követően megjelenik az új rendszergazda a **Active Directory-rendszergazda** mezőbe.</span><span class="sxs-lookup"><span data-stu-id="c3a75-170">Then the new administrator appears in the **Active Directory admin** box.</span></span>

   > [!NOTE]
   > <span data-ttu-id="c3a75-171">Az Azure AD admin beállításakor az új felügyeleti neve (felhasználó vagy csoport) nem már megtalálható a virtuális master adatbázis SQL Server hitelesítési felhasználóként.</span><span class="sxs-lookup"><span data-stu-id="c3a75-171">When setting up the Azure AD admin, the new admin name (user or group) cannot already be present in the virtual master database as a SQL Server authentication user.</span></span> <span data-ttu-id="c3a75-172">Ha jelen van, az Azure AD rendszergazdai telepítés sikertelen lesz; visszaállítása a létrehozása és, amely jelzi, hogy az ilyen rendszergazda (név) már létezik.</span><span class="sxs-lookup"><span data-stu-id="c3a75-172">If present, the Azure AD admin setup will fail; rolling back its creation and indicating that such an admin (name) already exists.</span></span> <span data-ttu-id="c3a75-173">Mivel az ilyen egy SQL Server-hitelesítés felhasználó nem része az Azure AD, bármely annak érdekében, hogy csatlakozzon a kiszolgálóhoz, az Azure AD-hitelesítéssel sikertelen lesz.</span><span class="sxs-lookup"><span data-stu-id="c3a75-173">Since such a SQL Server authentication user is not part of the Azure AD, any effort to connect to the server using Azure AD authentication fails.</span></span>
   > 


<span data-ttu-id="c3a75-174">Később eltávolítja a rendszergazda tetején a **Active Directory-rendszergazda** panelen kattintson a **távolítsa el a felügyeleti**, és kattintson a **mentése**.</span><span class="sxs-lookup"><span data-stu-id="c3a75-174">To later remove an Admin, at the top of the **Active Directory admin** blade, click **Remove admin**, and then click **Save**.</span></span>

### <a name="powershell"></a><span data-ttu-id="c3a75-175">PowerShell</span><span class="sxs-lookup"><span data-stu-id="c3a75-175">PowerShell</span></span>
<span data-ttu-id="c3a75-176">PowerShell-parancsmagok futtatásához szükség van telepítve és fut az Azure PowerShell.</span><span class="sxs-lookup"><span data-stu-id="c3a75-176">To run PowerShell cmdlets, you need to have Azure PowerShell installed and running.</span></span> <span data-ttu-id="c3a75-177">Részletes információk: [Az Azure PowerShell telepítése és konfigurálása](/powershell/azure/overview).</span><span class="sxs-lookup"><span data-stu-id="c3a75-177">For detailed information, see [How to install and configure Azure PowerShell](/powershell/azure/overview).</span></span>

<span data-ttu-id="c3a75-178">Az Azure AD rendszergazdai kiépíthetők, hajtsa végre a következő Azure PowerShell-parancsokat:</span><span class="sxs-lookup"><span data-stu-id="c3a75-178">To provision an Azure AD admin, execute the following Azure PowerShell commands:</span></span>

* <span data-ttu-id="c3a75-179">Add-AzureRmAccount</span><span class="sxs-lookup"><span data-stu-id="c3a75-179">Add-AzureRmAccount</span></span>
* <span data-ttu-id="c3a75-180">SELECT-AzureRmSubscription</span><span class="sxs-lookup"><span data-stu-id="c3a75-180">Select-AzureRmSubscription</span></span>

<span data-ttu-id="c3a75-181">Parancsmagok segítségével telepíteni és kezelni a Azure AD rendszergazdai:</span><span class="sxs-lookup"><span data-stu-id="c3a75-181">Cmdlets used to provision and manage Azure AD admin:</span></span>

| <span data-ttu-id="c3a75-182">Parancsmag neve</span><span class="sxs-lookup"><span data-stu-id="c3a75-182">Cmdlet name</span></span> | <span data-ttu-id="c3a75-183">Leírás</span><span class="sxs-lookup"><span data-stu-id="c3a75-183">Description</span></span> |
| --- | --- |
| [<span data-ttu-id="c3a75-184">Set-AzureRmSqlServerActiveDirectoryAdministrator</span><span class="sxs-lookup"><span data-stu-id="c3a75-184">Set-AzureRmSqlServerActiveDirectoryAdministrator</span></span>](/powershell/module/azurerm.sql/set-azurermsqlserveractivedirectoryadministrator) |<span data-ttu-id="c3a75-185">Azure Active Directory-rendszergazda Azure SQL server vagy az Azure SQL Data Warehouse kiépítése.</span><span class="sxs-lookup"><span data-stu-id="c3a75-185">Provisions an Azure Active Directory administrator for Azure SQL server or Azure SQL Data Warehouse.</span></span> <span data-ttu-id="c3a75-186">(Kell lennie az aktuális előfizetésben.)</span><span class="sxs-lookup"><span data-stu-id="c3a75-186">(Must be from the current subscription.)</span></span> |
| [<span data-ttu-id="c3a75-187">Remove-AzureRmSqlServerActiveDirectoryAdministrator</span><span class="sxs-lookup"><span data-stu-id="c3a75-187">Remove-AzureRmSqlServerActiveDirectoryAdministrator</span></span>](/powershell/module/azurerm.sql/remove-azurermsqlserveractivedirectoryadministrator) |<span data-ttu-id="c3a75-188">Eltávolítja az Azure Active Directory-rendszergazda Azure SQL server vagy az Azure SQL Data warehouse-bA.</span><span class="sxs-lookup"><span data-stu-id="c3a75-188">Removes an Azure Active Directory administrator for Azure SQL server or Azure SQL Data Warehouse.</span></span> |
| [<span data-ttu-id="c3a75-189">Get-AzureRmSqlServerActiveDirectoryAdministrator</span><span class="sxs-lookup"><span data-stu-id="c3a75-189">Get-AzureRmSqlServerActiveDirectoryAdministrator</span></span>](/powershell/module/azurerm.sql/get-azurermsqlserveractivedirectoryadministrator) |<span data-ttu-id="c3a75-190">Egy Azure Active Directory-rendszergazda az Azure SQL server vagy az Azure SQL Data Warehouse jelenleg konfigurált információt ad vissza.</span><span class="sxs-lookup"><span data-stu-id="c3a75-190">Returns information about an Azure Active Directory administrator currently configured for the Azure SQL server or Azure SQL Data Warehouse.</span></span> |

<span data-ttu-id="c3a75-191">További részleteket az egyes parancsok, például a get-help PowerShell parancs segítségével ``get-help Set-AzureRmSqlServerActiveDirectoryAdministrator``.</span><span class="sxs-lookup"><span data-stu-id="c3a75-191">Use PowerShell command get-help to see more details for each of these commands, for example ``get-help Set-AzureRmSqlServerActiveDirectoryAdministrator``.</span></span>

<span data-ttu-id="c3a75-192">Az alábbi parancsfájl egy Azure AD felügyeleti csoport neve rendelkezések **DBA_Group** (objektumazonosító: `40b79501-b343-44ed-9ce7-da4c8cc7353f`) számára a **demo_server** server nevű erőforráscsoportban **csoport – 23**:</span><span class="sxs-lookup"><span data-stu-id="c3a75-192">The following script provisions an Azure AD administrator group named **DBA_Group** (object id `40b79501-b343-44ed-9ce7-da4c8cc7353f`) for the **demo_server** server in a resource group named **Group-23**:</span></span>

```
Set-AzureRmSqlServerActiveDirectoryAdministrator -ResourceGroupName "Group-23"
-ServerName "demo_server" -DisplayName "DBA_Group"
```

<span data-ttu-id="c3a75-193">A **DisplayName** bemeneti paramétert fogad el, vagy az Azure Active Directory megjelenítendő nevét, vagy az egyszerű felhasználónév.</span><span class="sxs-lookup"><span data-stu-id="c3a75-193">The **DisplayName** input parameter accepts either the Azure AD display name or the User Principal Name.</span></span> <span data-ttu-id="c3a75-194">Például ``DisplayName="John Smith"`` és ``DisplayName="johns@contoso.com"``.</span><span class="sxs-lookup"><span data-stu-id="c3a75-194">For example, ``DisplayName="John Smith"`` and ``DisplayName="johns@contoso.com"``.</span></span> <span data-ttu-id="c3a75-195">Az Azure AD-csoportok csak az Azure AD megjelenített név támogatott.</span><span class="sxs-lookup"><span data-stu-id="c3a75-195">For Azure AD groups only the Azure AD display name is supported.</span></span>

> [!NOTE]
> <span data-ttu-id="c3a75-196">Az Azure PowerShell-paranccsal ```Set-AzureRmSqlServerActiveDirectoryAdministrator``` nem akadályozza meg a felhasználók nem támogatott az Azure AD-rendszergazdái kiosztásakor.</span><span class="sxs-lookup"><span data-stu-id="c3a75-196">The Azure PowerShell  command ```Set-AzureRmSqlServerActiveDirectoryAdministrator``` does not prevent you from provisioning Azure AD admins for unsupported users.</span></span> <span data-ttu-id="c3a75-197">Egy nem támogatott felhasználói telepíthető, de nem tud kapcsolódni egy adatbázis.</span><span class="sxs-lookup"><span data-stu-id="c3a75-197">An unsupported user can be provisioned, but can not connect to a database.</span></span> 
> 

<span data-ttu-id="c3a75-198">Az alábbi példa használja az opcionális **ObjectID**:</span><span class="sxs-lookup"><span data-stu-id="c3a75-198">The following example uses the optional **ObjectID**:</span></span>

```
Set-AzureRmSqlServerActiveDirectoryAdministrator -ResourceGroupName "Group-23"
-ServerName "demo_server" -DisplayName "DBA_Group" -ObjectId "40b79501-b343-44ed-9ce7-da4c8cc7353f"
```

> [!NOTE]
> <span data-ttu-id="c3a75-199">Az Azure AD **ObjectID** megadása kötelező, ha a **DisplayName** eleme nem egyedi.</span><span class="sxs-lookup"><span data-stu-id="c3a75-199">The Azure AD **ObjectID** is required when the **DisplayName** is not unique.</span></span> <span data-ttu-id="c3a75-200">Beolvasni a **ObjectID** és **DisplayName** értékeket, az Active Directory a szakaszban a klasszikus Azure portálon, és egy felhasználó vagy csoport tulajdonságainak megtekintése.</span><span class="sxs-lookup"><span data-stu-id="c3a75-200">To retrieve the **ObjectID** and **DisplayName** values, use the Active Directory section of Azure Classic Portal, and view the properties of a user or group.</span></span>
> 

<span data-ttu-id="c3a75-201">Az alábbi példában az aktuális információt ad vissza az Azure SQL server az Azure AD admin:</span><span class="sxs-lookup"><span data-stu-id="c3a75-201">The following example returns information about the current Azure AD admin for Azure SQL server:</span></span>

```
Get-AzureRmSqlServerActiveDirectoryAdministrator -ResourceGroupName "Group-23" -ServerName "demo_server" | Format-List
```

<span data-ttu-id="c3a75-202">Az alábbi példa az Azure AD-rendszergazdaként eltávolítja:</span><span class="sxs-lookup"><span data-stu-id="c3a75-202">The following example removes an Azure AD administrator:</span></span>

```
Remove-AzureRmSqlServerActiveDirectoryAdministrator -ResourceGroupName "Group-23" -ServerName "demo_server"
```

<span data-ttu-id="c3a75-203">Egy Azure Active Directory-rendszergazda a REST API-k használatával is kiépíthetők.</span><span class="sxs-lookup"><span data-stu-id="c3a75-203">You can also provision an Azure Active Directory Administrator by using the REST APIs.</span></span> <span data-ttu-id="c3a75-204">További információkért lásd: [az Azure SQL-adatbázisok Azure SQL-adatbázisok műveletek műveletek és a Service Management REST API-referencia](https://msdn.microsoft.com/library/azure/dn505719.aspx)</span><span class="sxs-lookup"><span data-stu-id="c3a75-204">For more information, see [Service Management REST API Reference and Operations for Azure SQL Databases Operations for Azure SQL Databases](https://msdn.microsoft.com/library/azure/dn505719.aspx)</span></span>

### <a name="cli"></a><span data-ttu-id="c3a75-205">parancssori felület</span><span class="sxs-lookup"><span data-stu-id="c3a75-205">CLI</span></span>  
<span data-ttu-id="c3a75-206">Az Azure AD-rendszergazda a következő parancsok parancssori felület meghívásával is kiépíthetők:</span><span class="sxs-lookup"><span data-stu-id="c3a75-206">You can also provision an Azure AD admin by calling the following CLI commands:</span></span>
| <span data-ttu-id="c3a75-207">Parancs</span><span class="sxs-lookup"><span data-stu-id="c3a75-207">Command</span></span> | <span data-ttu-id="c3a75-208">Leírás</span><span class="sxs-lookup"><span data-stu-id="c3a75-208">Description</span></span> |
| --- | --- |
|[<span data-ttu-id="c3a75-209">az sql server ad-rendszergazda létrehozása</span><span class="sxs-lookup"><span data-stu-id="c3a75-209">az sql server ad-admin create</span></span>](https://docs.microsoft.com/cli/azure/sql/server/ad-admin#create) |<span data-ttu-id="c3a75-210">Azure Active Directory-rendszergazda Azure SQL server vagy az Azure SQL Data Warehouse kiépítése.</span><span class="sxs-lookup"><span data-stu-id="c3a75-210">Provisions an Azure Active Directory administrator for Azure SQL server or Azure SQL Data Warehouse.</span></span> <span data-ttu-id="c3a75-211">(Kell lennie az aktuális előfizetésben.)</span><span class="sxs-lookup"><span data-stu-id="c3a75-211">(Must be from the current subscription.)</span></span> |
|[<span data-ttu-id="c3a75-212">az sql server ad-rendszergazda törlése</span><span class="sxs-lookup"><span data-stu-id="c3a75-212">az sql server ad-admin delete</span></span>](https://docs.microsoft.com/cli/azure/sql/server/ad-admin#delete) |<span data-ttu-id="c3a75-213">Eltávolítja az Azure Active Directory-rendszergazda Azure SQL server vagy az Azure SQL Data warehouse-bA.</span><span class="sxs-lookup"><span data-stu-id="c3a75-213">Removes an Azure Active Directory administrator for Azure SQL server or Azure SQL Data Warehouse.</span></span> |
|[<span data-ttu-id="c3a75-214">az sql server ad-rendszergazda listája</span><span class="sxs-lookup"><span data-stu-id="c3a75-214">az sql server ad-admin list</span></span>](https://docs.microsoft.com/cli/azure/sql/server/ad-admin#list) |<span data-ttu-id="c3a75-215">Egy Azure Active Directory-rendszergazda az Azure SQL server vagy az Azure SQL Data Warehouse jelenleg konfigurált információt ad vissza.</span><span class="sxs-lookup"><span data-stu-id="c3a75-215">Returns information about an Azure Active Directory administrator currently configured for the Azure SQL server or Azure SQL Data Warehouse.</span></span> |
|[<span data-ttu-id="c3a75-216">az sql server ad-rendszergazda frissítése</span><span class="sxs-lookup"><span data-stu-id="c3a75-216">az sql server ad-admin update</span></span>](https://docs.microsoft.com/cli/azure/sql/server/ad-admin#update) |<span data-ttu-id="c3a75-217">Az Active Directory-rendszergazda az Azure SQL server vagy az Azure SQL Data Warehouse frissíti.</span><span class="sxs-lookup"><span data-stu-id="c3a75-217">Updates the Active Directory administrator for an Azure SQL server or Azure SQL Data Warehouse.</span></span> |

<span data-ttu-id="c3a75-218">Parancssori felület parancsait kapcsolatos további információkért lásd: [SQL - az sql](https://docs.microsoft.com/cli/azure/sql/server).</span><span class="sxs-lookup"><span data-stu-id="c3a75-218">For more information about CLI commands, see [SQL - az sql](https://docs.microsoft.com/cli/azure/sql/server).</span></span>  


## <a name="configure-your-client-computers"></a><span data-ttu-id="c3a75-219">Állítsa be az ügyfélszámítógépen</span><span class="sxs-lookup"><span data-stu-id="c3a75-219">Configure your client computers</span></span>
<span data-ttu-id="c3a75-220">Az összes ügyfélszámítógépre, amelyről alkalmazás vagy felhasználó kapcsolódni az Azure SQL Database vagy az Azure SQL Data Warehouse az Azure AD identitásokkal, telepítenie kell a következő szoftvereket:</span><span class="sxs-lookup"><span data-stu-id="c3a75-220">On all client machines, from which your applications or users connect to Azure SQL Database or Azure SQL Data Warehouse using Azure AD identities, you must install the following software:</span></span>

* <span data-ttu-id="c3a75-221">.NET-keretrendszer 4.6-os vagy újabb a [https://msdn.microsoft.com/library/5a4x27ek.aspx](https://msdn.microsoft.com/library/5a4x27ek.aspx).</span><span class="sxs-lookup"><span data-stu-id="c3a75-221">.NET Framework 4.6 or later from [https://msdn.microsoft.com/library/5a4x27ek.aspx](https://msdn.microsoft.com/library/5a4x27ek.aspx).</span></span>
* <span data-ttu-id="c3a75-222">Az Azure Active Directory hitelesítési tár SQL Serverhez (**ADALSQL. DLL**) több nyelven is elérhető (x86 és amd64) a letöltőközpontján [Microsoft Active Directory Authentication Library Microsoft SQL Server](http://www.microsoft.com/download/details.aspx?id=48742).</span><span class="sxs-lookup"><span data-stu-id="c3a75-222">Azure Active Directory Authentication Library for SQL Server (**ADALSQL.DLL**) is available in multiple languages (both x86 and amd64) from the download center at [Microsoft Active Directory Authentication Library for Microsoft SQL Server](http://www.microsoft.com/download/details.aspx?id=48742).</span></span>

<span data-ttu-id="c3a75-223">E követelményeknek szerint:</span><span class="sxs-lookup"><span data-stu-id="c3a75-223">You can meet these requirements by:</span></span>

* <span data-ttu-id="c3a75-224">Telepítése vagy [SQL Server 2016 Management Studio](https://msdn.microsoft.com/library/mt238290.aspx) vagy [SQL Server Data Tools a Visual Studio 2015](https://msdn.microsoft.com/library/mt204009.aspx) megfelel-e a .NET-keretrendszer 4.6 követelménynek.</span><span class="sxs-lookup"><span data-stu-id="c3a75-224">Installing either [SQL Server 2016 Management Studio](https://msdn.microsoft.com/library/mt238290.aspx) or [SQL Server Data Tools for Visual Studio 2015](https://msdn.microsoft.com/library/mt204009.aspx) meets the .NET Framework 4.6 requirement.</span></span>
* <span data-ttu-id="c3a75-225">SSMS telepíti a x86 verziójának **ADALSQL. DLL**.</span><span class="sxs-lookup"><span data-stu-id="c3a75-225">SSMS installs the x86 version of **ADALSQL.DLL**.</span></span>
* <span data-ttu-id="c3a75-226">Az SSDT AMD64-es verzióját telepíti **ADALSQL. DLL**.</span><span class="sxs-lookup"><span data-stu-id="c3a75-226">SSDT installs the amd64 version of **ADALSQL.DLL**.</span></span>
* <span data-ttu-id="c3a75-227">A legújabb Visual Studio [Visual Studio letöltések](https://www.visualstudio.com/downloads/download-visual-studio-vs) megfelel-e a .NET-keretrendszer 4.6 követelménynek, de nem telepíti a szükséges AMD64-es verziójának **ADALSQL. DLL**.</span><span class="sxs-lookup"><span data-stu-id="c3a75-227">The latest Visual Studio from [Visual Studio Downloads](https://www.visualstudio.com/downloads/download-visual-studio-vs) meets the .NET Framework 4.6 requirement, but does not install the required amd64 version of **ADALSQL.DLL**.</span></span>

## <a name="create-contained-database-users-in-your-database-mapped-to-azure-ad-identities"></a><span data-ttu-id="c3a75-228">Tartalmazott adatbázis-felhasználók létrehozása az Azure AD-identitások leképezve az adatbázisban</span><span class="sxs-lookup"><span data-stu-id="c3a75-228">Create contained database users in your database mapped to Azure AD identities</span></span>

<span data-ttu-id="c3a75-229">Az Azure Active Directory-hitelesítés használatakor a felhasználóknak adatbázis tartalmazott adatbázis-felhasználók hozhatók létre.</span><span class="sxs-lookup"><span data-stu-id="c3a75-229">Azure Active Directory authentication requires database users to be created as contained database users.</span></span> <span data-ttu-id="c3a75-230">Az Azure AD identity alapján tartalmazott adatbázis-felhasználó az adatbázis-felhasználó nem rendelkezik a master adatbázisban, és amely az Azure AD-címtár társított az adatbázis egyik identitása van leképezve.</span><span class="sxs-lookup"><span data-stu-id="c3a75-230">A contained database user based on an Azure AD identity, is a database user that does not have a login in the master database, and which maps to an identity in the Azure AD directory that is associated with the database.</span></span> <span data-ttu-id="c3a75-231">Az Azure AD identity vagy az egyéni felhasználói fiókot, vagy a csoport lehet.</span><span class="sxs-lookup"><span data-stu-id="c3a75-231">The Azure AD identity can be either an individual user account or a group.</span></span> <span data-ttu-id="c3a75-232">További információ a tartalmazott adatbázis-felhasználók: [tartalmazott adatbázis-felhasználók – hogy a saját adatbázis hordozható](https://msdn.microsoft.com/library/ff929188.aspx).</span><span class="sxs-lookup"><span data-stu-id="c3a75-232">For more information about contained database users, see [Contained Database Users- Making Your Database Portable](https://msdn.microsoft.com/library/ff929188.aspx).</span></span>

> [!NOTE]
> <span data-ttu-id="c3a75-233">Adatbázis-felhasználók (kivéve a rendszergazdák) portal nem hozható létre.</span><span class="sxs-lookup"><span data-stu-id="c3a75-233">Database users (with the exception of administrators) cannot be created using portal.</span></span> <span data-ttu-id="c3a75-234">Az RBAC-szerepkörök nem vonatkoznak az SQL Server, SQL-adatbázis vagy az SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="c3a75-234">RBAC roles are not propagated to SQL Server, SQL Database, or SQL Data Warehouse.</span></span> <span data-ttu-id="c3a75-235">Az Azure RBAC-szerepkörök Azure-erőforrások kezelésére használt, és nem vonatkoznak az adatbázis-engedélyek.</span><span class="sxs-lookup"><span data-stu-id="c3a75-235">Azure RBAC roles are used for managing Azure Resources, and do not apply to database permissions.</span></span> <span data-ttu-id="c3a75-236">Például a **SQL Server közreműködői** szerepkör hozzáférést az SQL Database vagy az SQL Data Warehouse való csatlakozáshoz.</span><span class="sxs-lookup"><span data-stu-id="c3a75-236">For example, the **SQL Server Contributor** role does not grant access to connect to the SQL Database or SQL Data Warehouse.</span></span> <span data-ttu-id="c3a75-237">A hozzáférési engedélyt kell adni, közvetlenül a Transact-SQL-utasítások segítségével adatbázisban.</span><span class="sxs-lookup"><span data-stu-id="c3a75-237">The access permission must be granted directly in the database using Transact-SQL statements.</span></span>
>

<span data-ttu-id="c3a75-238">Hozzon létre egy Azure AD-alapú tartalmazott adatbázis-felhasználó (nem a kiszolgáló rendszergazdája, amely az adatbázis tulajdonosa), csatlakozás az Azure AD identity adatbázishoz rendelkező felhasználóként legalább a **bármely felhasználó ALTER** engedéllyel.</span><span class="sxs-lookup"><span data-stu-id="c3a75-238">To create an Azure AD-based contained database user (other than the server administrator that owns the database), connect to the database with an Azure AD identity, as a user with at least the **ALTER ANY USER** permission.</span></span> <span data-ttu-id="c3a75-239">Kövesse a következő Transact-SQL-szintaxis:</span><span class="sxs-lookup"><span data-stu-id="c3a75-239">Then use the following Transact-SQL syntax:</span></span>

```
CREATE USER <Azure_AD_principal_name> FROM EXTERNAL PROVIDER;
```

<span data-ttu-id="c3a75-240">*Azure_AD_principal_name* lehet a felhasználó egyszerű felhasználóneve, az Azure AD-felhasználó vagy egy Azure AD-csoport nevét.</span><span class="sxs-lookup"><span data-stu-id="c3a75-240">*Azure_AD_principal_name* can be the user principal name of an Azure AD user or the display name for an Azure AD group.</span></span>

<span data-ttu-id="c3a75-241">**Példák:** tartalmazott adatbázist hozhat létre az Azure AD közti felhasználói összevont vagy kezelt tartományi felhasználói:</span><span class="sxs-lookup"><span data-stu-id="c3a75-241">**Examples:** To create a contained database user representing an Azure AD federated or managed domain user:</span></span>
```
CREATE USER [bob@contoso.com] FROM EXTERNAL PROVIDER;
CREATE USER [alice@fabrikam.onmicrosoft.com] FROM EXTERNAL PROVIDER;
```

<span data-ttu-id="c3a75-242">Hozzon létre egy Azure AD közti vagy tartományi csoport összevont tartalmazott adatbázis-felhasználó, adja meg a biztonsági csoport megjelenítendő nevét:</span><span class="sxs-lookup"><span data-stu-id="c3a75-242">To create a contained database user representing an Azure AD or federated domain group, provide the display name of a security group:</span></span>
```
CREATE USER [ICU Nurses] FROM EXTERNAL PROVIDER;
```

<span data-ttu-id="c3a75-243">Egy alkalmazás, amely összeköti az Azure AD token használatával képviselő tartalmazott adatbázis-felhasználó létrehozása:</span><span class="sxs-lookup"><span data-stu-id="c3a75-243">To create a contained database user representing an application that connects using an Azure AD token:</span></span>

```
CREATE USER [appName] FROM EXTERNAL PROVIDER;
```

>  [!TIP]
>  <span data-ttu-id="c3a75-244">A felhasználó egy Azure Active Directory, nem az Azure Active Directory, az Azure-előfizetéshez társított nem tud közvetlenül létrehozni.</span><span class="sxs-lookup"><span data-stu-id="c3a75-244">You cannot directly create a user from an Azure Active Directory other than the Azure Active Directory that is associated with your Azure subscription.</span></span> <span data-ttu-id="c3a75-245">Azonban más aktív könyvtárak, amelyek a társított Active Directoryban (más néven a külső felhasználók) importált felhasználók tagjai is hozzáadhatók az Active Directory-csoporthoz az Active Directory-bérlőnél.</span><span class="sxs-lookup"><span data-stu-id="c3a75-245">However, members of other Active Directories that are imported users in the associated Active Directory (known as external users) can be added to an Active Directory group in the tenant Active Directory.</span></span> <span data-ttu-id="c3a75-246">Hozzon létre egy tartalmazott adatbázis-felhasználót, hogy AD-csoport, a a felhasználók a külső Active Directoryból férhet hozzá az SQL-adatbázis.</span><span class="sxs-lookup"><span data-stu-id="c3a75-246">By creating a contained database user for that AD group, the users from the external Active Directory can gain access to SQL Database.</span></span>   

<span data-ttu-id="c3a75-247">Tartalmazott létrehozásával kapcsolatos további információért adatbázis-felhasználók Azure Active Directory identitások alapján című [felhasználó létrehozása (Transact-SQL)](http://msdn.microsoft.com/library/ms173463.aspx).</span><span class="sxs-lookup"><span data-stu-id="c3a75-247">For more information about creating contained database users based on Azure Active Directory identities, see [CREATE USER (Transact-SQL)](http://msdn.microsoft.com/library/ms173463.aspx).</span></span>

> [!NOTE]
> <span data-ttu-id="c3a75-248">Az Azure Active Directory-rendszergazda az Azure SQL server eltávolítása megakadályozza, hogy az Azure AD hitelesítési munkamenetből a kiszolgálóhoz való kapcsolódás.</span><span class="sxs-lookup"><span data-stu-id="c3a75-248">Removing the Azure Active Directory administrator for Azure SQL server prevents any Azure AD authentication user from connecting to the server.</span></span> <span data-ttu-id="c3a75-249">Ha szükséges, nem használható az Azure Active Directory-felhasználók manuálisan SQL adatbázis-rendszergazda általi törölhetők.</span><span class="sxs-lookup"><span data-stu-id="c3a75-249">If necessary, unusable Azure AD users can be dropped manually by a SQL Database administrator.</span></span>   

>  [!NOTE]
>  <span data-ttu-id="c3a75-250">Ha megjelenik egy **kapcsolat időkorlátja lejárt**, szükség lehet beállítani a `TransparentNetworkIPResolution` paraméter false értékre a kapcsolati karakterlánc.</span><span class="sxs-lookup"><span data-stu-id="c3a75-250">If you receive a **Connection Timeout Expired**, you may need to set the `TransparentNetworkIPResolution` parameter of the connection string to false.</span></span> <span data-ttu-id="c3a75-251">További információkért lásd: [kapcsolat időtúllépési problémát .NET-keretrendszer 4.6.1 - TransparentNetworkIPResolution](https://blogs.msdn.microsoft.com/dataaccesstechnologies/2016/05/07/connection-timeout-issue-with-net-framework-4-6-1-transparentnetworkipresolution/).</span><span class="sxs-lookup"><span data-stu-id="c3a75-251">For more information, see [Connection timeout issue with .NET Framework 4.6.1 - TransparentNetworkIPResolution](https://blogs.msdn.microsoft.com/dataaccesstechnologies/2016/05/07/connection-timeout-issue-with-net-framework-4-6-1-transparentnetworkipresolution/).</span></span>   

   
<span data-ttu-id="c3a75-252">Amikor létrehoz egy adatbázis-felhasználó, az, hogy a felhasználó megkapja a **CONNECT** engedéllyel és csatlakozni tud-e, hogy az adatbázis tagjaként a **nyilvános** szerepkör.</span><span class="sxs-lookup"><span data-stu-id="c3a75-252">When you create a database user, that user receives the **CONNECT** permission and can connect to that database as a member of the **PUBLIC** role.</span></span> <span data-ttu-id="c3a75-253">Kezdetben elérhetővé válik a felhasználó csak engedélyek a számára megadott engedélyeket a **nyilvános** szerepkör, illetve engedéllyel a megadott Windows-csoportnak sem tagja.</span><span class="sxs-lookup"><span data-stu-id="c3a75-253">Initially the only permissions available to the user are any permissions granted to the **PUBLIC** role, or any permissions granted to any Windows groups that they are a member of.</span></span> <span data-ttu-id="c3a75-254">Miután kiépítése az Azure AD-alapú tartalmazott adatbázis-felhasználó, a felhasználó további engedélyek megadásához, ugyanúgy, engedélyezi a felhasználók bármilyen más típusú.</span><span class="sxs-lookup"><span data-stu-id="c3a75-254">Once you provision an Azure AD-based contained database user, you can grant the user additional permissions, the same way as you grant permission to any other type of user.</span></span> <span data-ttu-id="c3a75-255">Általában megadni az engedélyeket az adatbázis-szerepkörök, és felhasználók hozzáadása szerepkörökhöz.</span><span class="sxs-lookup"><span data-stu-id="c3a75-255">Typically grant permissions to database roles, and add users to roles.</span></span> <span data-ttu-id="c3a75-256">További információkért lásd: [Database Engine engedély alapjai](http://social.technet.microsoft.com/wiki/contents/articles/4433.database-engine-permission-basics.aspx).</span><span class="sxs-lookup"><span data-stu-id="c3a75-256">For more information, see [Database Engine Permission Basics](http://social.technet.microsoft.com/wiki/contents/articles/4433.database-engine-permission-basics.aspx).</span></span> <span data-ttu-id="c3a75-257">További információ a speciális SQL adatbázis-szerepkörök: [kezelése adatbázisok és bejelentkezések az Azure SQL Database](sql-database-manage-logins.md).</span><span class="sxs-lookup"><span data-stu-id="c3a75-257">For more information about special SQL Database roles, see [Managing Databases and Logins in Azure SQL Database](sql-database-manage-logins.md).</span></span>
<span data-ttu-id="c3a75-258">Összevont tartományt importált kezelése tartományába kell használni a felügyelt tartomány identitása.</span><span class="sxs-lookup"><span data-stu-id="c3a75-258">A federated domain user that is imported into a manage domain, must use the managed domain identity.</span></span>

> [!NOTE]
> <span data-ttu-id="c3a75-259">Az Azure Active Directory-felhasználók jelöli az adatbázis metaadatai típusú E (EXTERNAL_USER) és a csoportok X (EXTERNAL_GROUPS) típus.</span><span class="sxs-lookup"><span data-stu-id="c3a75-259">Azure AD users are marked in the database metadata with type E (EXTERNAL_USER) and for groups with type X (EXTERNAL_GROUPS).</span></span> <span data-ttu-id="c3a75-260">További információkért lásd: [sys.database_principals](https://msdn.microsoft.com/library/ms187328.aspx).</span><span class="sxs-lookup"><span data-stu-id="c3a75-260">For more information, see [sys.database_principals](https://msdn.microsoft.com/library/ms187328.aspx).</span></span> 
>

## <a name="connect-to-the-user-database-or-data-warehouse-by-using-ssms-or-ssdt"></a><span data-ttu-id="c3a75-261">Csatlakozás a felhasználói adatbázis vagy a data warehouse szolgáltatáshoz az SSMS vagy az SSDT használatával</span><span class="sxs-lookup"><span data-stu-id="c3a75-261">Connect to the user database or data warehouse by using SSMS or SSDT</span></span>  
<span data-ttu-id="c3a75-262">Győződjön meg róla, az Azure AD-rendszergazda helyesen van beállítva, csatlakozzon a **fő** adatbázis, az Azure AD rendszergazdai fiók használatával.</span><span class="sxs-lookup"><span data-stu-id="c3a75-262">To confirm the Azure AD administrator is properly set up, connect to the **master** database using the Azure AD administrator account.</span></span>
<span data-ttu-id="c3a75-263">Kiépítéséhez az Azure AD-alapú tartalmazott adatbázis-felhasználó (nem a kiszolgáló rendszergazdája, amely az adatbázis tulajdonosa), az adatbázis egy Azure AD-identitás, amely hozzáféréssel rendelkezik az adatbázishoz csatlakozni.</span><span class="sxs-lookup"><span data-stu-id="c3a75-263">To provision an Azure AD-based contained database user (other than the server administrator that owns the database), connect to the database with an Azure AD identity that has access to the database.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="c3a75-264">Az Azure Active Directory-hitelesítés támogatásának érhető [SQL Server 2016 Management Studio](https://msdn.microsoft.com/library/mt238290.aspx) és [SQL Server Data Tools](https://msdn.microsoft.com/library/mt204009.aspx) a Visual Studio 2015-öt.</span><span class="sxs-lookup"><span data-stu-id="c3a75-264">Support for Azure Active Directory authentication is available with [SQL Server 2016 Management Studio](https://msdn.microsoft.com/library/mt238290.aspx) and [SQL Server Data Tools](https://msdn.microsoft.com/library/mt204009.aspx) in Visual Studio 2015.</span></span> <span data-ttu-id="c3a75-265">SSMS megjelenésével 2016 augusztusától is támogatja az Active Directory univerzális hitelesítést, amely lehetővé teszi a rendszergazdák számára, hogy a többtényezős hitelesítést használ a telefonhívás, szöveges üzenetet, intelligens kártyák PIN-kód és az értesítést a mobilalkalmazásban.</span><span class="sxs-lookup"><span data-stu-id="c3a75-265">The August 2016 release of SSMS also includes support for Active Directory Universal Authentication, which allows administrators to require Multi-Factor Authentication using a phone call, text message, smart cards with pin, or mobile app notification.</span></span>
 
## <a name="using-an-azure-ad-identity-to-connect-using-ssms-or-ssdt"></a><span data-ttu-id="c3a75-266">Az Azure AD identity használatával csatlakozni a szolgáltatáshoz az SSMS vagy az SSDT segítségével</span><span class="sxs-lookup"><span data-stu-id="c3a75-266">Using an Azure AD identity to connect using SSMS or SSDT</span></span>  

<span data-ttu-id="c3a75-267">A következő eljárások megmutatják, hogyan egy SQL Server Management Studio vagy SQL Server adatbázis-eszközt használ az Azure AD-identitás SQL-adatbázishoz való kapcsolódáshoz.</span><span class="sxs-lookup"><span data-stu-id="c3a75-267">The following procedures show you how to connect to a SQL database with an Azure AD identity using SQL Server Management Studio or SQL Server Database Tools.</span></span>

### <a name="active-directory-integrated-authentication"></a><span data-ttu-id="c3a75-268">Active Directory integrált hitelesítést</span><span class="sxs-lookup"><span data-stu-id="c3a75-268">Active Directory integrated authentication</span></span>

<span data-ttu-id="c3a75-269">Ezt a módszert akkor használja, ha a Windows összevont tartományhoz az Azure Active Directory hitelesítő adatokkal van bejelentkezve.</span><span class="sxs-lookup"><span data-stu-id="c3a75-269">Use this method if you are logged in to Windows using your Azure Active Directory credentials from a federated domain.</span></span>

1. <span data-ttu-id="c3a75-270">Indítsa el a Management Studio vagy az eszközök és a a **kapcsolódás a kiszolgálóhoz** (vagy **kapcsolódás az adatbázismotorhoz**) párbeszédpanelen a **hitelesítési** mezőben válassza **Active Directory - integrált**.</span><span class="sxs-lookup"><span data-stu-id="c3a75-270">Start Management Studio or Data Tools and in the **Connect to Server** (or **Connect to Database Engine**) dialog box, in the **Authentication** box, select **Active Directory - Integrated**.</span></span> <span data-ttu-id="c3a75-271">Nem kell jelszót van szükség, vagy megadható, mert a meglévő hitelesítő adatok számára jelenik meg a kapcsolathoz.</span><span class="sxs-lookup"><span data-stu-id="c3a75-271">No password is needed or can be entered because your existing credentials will be presented for the connection.</span></span>   

    ![AD integrált hitelesítés kiválasztása][11]
2. <span data-ttu-id="c3a75-273">Kattintson a **beállítások** gombra, majd a a **kapcsolat tulajdonságai** lap a **Kapcsolódás adatbázis** mezőjébe írja be a nevet a felhasználói adatbázis, amelyhez csatlakozni kíván.</span><span class="sxs-lookup"><span data-stu-id="c3a75-273">Click the **Options** button, and on the **Connection Properties** page, in the **Connect to database** box, type the name of the user database you want to connect to.</span></span> <span data-ttu-id="c3a75-274">(A **AD tartomány neve vagy a bérlői azonosító**"beállítás csak a támogatott **univerzális MFA kapcsolattal rendelkező** beállítások, ellenkező esetben azt szürkén jelenik meg.)</span><span class="sxs-lookup"><span data-stu-id="c3a75-274">(The **AD domain name or tenant ID**” option is only supported for **Universal with MFA connection** options, otherwise it is greyed out.)</span></span>  

    ![Válassza ki az adatbázis neve][13]

## <a name="active-directory-password-authentication"></a><span data-ttu-id="c3a75-276">Active Directory jelszavas hitelesítést</span><span class="sxs-lookup"><span data-stu-id="c3a75-276">Active Directory password authentication</span></span>

<span data-ttu-id="c3a75-277">Ezt a módszert használja, ha összekapcsolása egy Azure AD egyszerű felhasználónév használata az Azure AD tartományi kezelése.</span><span class="sxs-lookup"><span data-stu-id="c3a75-277">Use this method when connecting with an Azure AD principal name using the Azure AD managed domain.</span></span> <span data-ttu-id="c3a75-278">Is használhatja az összevont fiók, például amikor működik-e távolról a tartományhoz való hozzáférés nélkül.</span><span class="sxs-lookup"><span data-stu-id="c3a75-278">You can also use it for federated account without access to the domain, for example when working remotely.</span></span>

<span data-ttu-id="c3a75-279">Ezt a módszert használja, ha Windows hitelesítő adatok használatával, amely nincs összevonva a Azure-tartomány van bejelentkezve, vagy ha az Azure AD-alapú hitelesítés az Azure AD használatával az eredeti vagy az ügyfél tartomány alapján.</span><span class="sxs-lookup"><span data-stu-id="c3a75-279">Use this method if you are logged in to Windows using credentials from a domain that is not federated with Azure, or when using Azure AD authentication using Azure AD based on the initial or the client domain.</span></span>

1. <span data-ttu-id="c3a75-280">Indítsa el a Management Studio vagy az eszközök és a a **kapcsolódás a kiszolgálóhoz** (vagy **kapcsolódás az adatbázismotorhoz**) párbeszédpanelen a **hitelesítési** mezőben válassza **Active Directory - jelszó**.</span><span class="sxs-lookup"><span data-stu-id="c3a75-280">Start Management Studio or Data Tools and in the **Connect to Server** (or **Connect to Database Engine**) dialog box, in the **Authentication** box, select **Active Directory - Password**.</span></span>
2. <span data-ttu-id="c3a75-281">Az a **felhasználónév** mezőbe írja be az Azure Active Directory felhasználó formátumban  **username@domain.com** . Ennek az az Azure Active Directory-fiók kell lennie, vagy az Azure Active Directory összevonni az olyan tartományi fiók.</span><span class="sxs-lookup"><span data-stu-id="c3a75-281">In the **User name** box, type your Azure Active Directory user name in the format **username@domain.com**. This must be an account from the Azure Active Directory or an account from a domain federate with the Azure Active Directory.</span></span>
3. <span data-ttu-id="c3a75-282">Az a **jelszó** mezőben adja meg a felhasználó jelszavát az Azure Active Directory-fiókkal vagy tartományi fiók összevont.</span><span class="sxs-lookup"><span data-stu-id="c3a75-282">In the **Password** box, type your user password for the Azure Active Directory account or federated domain account.</span></span>

    ![Válassza ki az AD-jelszó-hitelesítés][12]
4. <span data-ttu-id="c3a75-284">Kattintson a **beállítások** gombra, majd a a **kapcsolat tulajdonságai** lap a **Kapcsolódás adatbázis** mezőjébe írja be a nevet a felhasználói adatbázis, amelyhez csatlakozni kíván.</span><span class="sxs-lookup"><span data-stu-id="c3a75-284">Click the **Options** button, and on the **Connection Properties** page, in the **Connect to database** box, type the name of the user database you want to connect to.</span></span> <span data-ttu-id="c3a75-285">(Lásd az előző beállítás a képet.)</span><span class="sxs-lookup"><span data-stu-id="c3a75-285">(See the graphic in the previous option.)</span></span>

## <a name="using-an-azure-ad-identity-to-connect-from-a-client-application"></a><span data-ttu-id="c3a75-286">Az Azure AD identity a a ügyfélalkalmazás csatlakozáshoz</span><span class="sxs-lookup"><span data-stu-id="c3a75-286">Using an Azure AD identity to connect from a client application</span></span>

<span data-ttu-id="c3a75-287">A következő eljárások bemutatják a ügyfélalkalmazás egy Azure AD identity SQL Database adatbázishoz való kapcsolódáshoz.</span><span class="sxs-lookup"><span data-stu-id="c3a75-287">The following procedures show you how to connect to a SQL database with an Azure AD identity from a client application.</span></span>

###  <a name="active-directory-integrated-authentication"></a><span data-ttu-id="c3a75-288">Active Directory integrált hitelesítést</span><span class="sxs-lookup"><span data-stu-id="c3a75-288">Active Directory integrated authentication</span></span>

<span data-ttu-id="c3a75-289">Integrált Windows-hitelesítés használatára, a tartomány Active Directory kell összevont, az Azure Active Directoryban.</span><span class="sxs-lookup"><span data-stu-id="c3a75-289">To use integrated Windows authentication, your domain’s Active Directory must be federated with Azure Active Directory.</span></span> <span data-ttu-id="c3a75-290">Az adatbázishoz való kapcsolódás az ügyfélalkalmazást (vagy egy szolgáltatás) a felhasználó tartományi hitelesítő adatok a tartományhoz csatlakoztatott számítógépen kell futnia.</span><span class="sxs-lookup"><span data-stu-id="c3a75-290">Your client application (or a service) connecting to the database must be running on a domain-joined machine under a user’s domain credentials.</span></span>

<span data-ttu-id="c3a75-291">Adatbázishoz való kapcsolódáshoz a beépített hitelesítéssel és az Azure AD identity, adatbázis-kapcsolati karakterláncot a hitelesítési kulcsszót Active Directory integrált értékre kell állítani.</span><span class="sxs-lookup"><span data-stu-id="c3a75-291">To connect to a database using integrated authentication and an Azure AD identity, the Authentication keyword in the database connection string must be set to Active Directory Integrated.</span></span> <span data-ttu-id="c3a75-292">A következő C# kódminta ADO .NET használja.</span><span class="sxs-lookup"><span data-stu-id="c3a75-292">The following C# code sample uses ADO .NET.</span></span>

```
string ConnectionString =
@"Data Source=n9lxnyuzhv.database.windows.net; Authentication=Active Directory Integrated; Initial Catalog=testdb;";
SqlConnection conn = new SqlConnection(ConnectionString);
conn.Open();
```

<span data-ttu-id="c3a75-293">A kapcsolati karakterlánc kulcsszó ``Integrated Security=True`` nem támogatott az Azure SQL-adatbázishoz szeretne csatlakozni.</span><span class="sxs-lookup"><span data-stu-id="c3a75-293">The connection string keyword ``Integrated Security=True`` is not supported for connecting to Azure SQL Database.</span></span> <span data-ttu-id="c3a75-294">Ha egy ODBC-kapcsolat, akkor távolítsa el a szóközöket, és állítsa be a "ActiveDirectoryIntegrated" hitelesítési.</span><span class="sxs-lookup"><span data-stu-id="c3a75-294">When making an ODBC connection, you will need to remove spaces and set Authentication to 'ActiveDirectoryIntegrated'.</span></span>

### <a name="active-directory-password-authentication"></a><span data-ttu-id="c3a75-295">Active Directory jelszavas hitelesítést</span><span class="sxs-lookup"><span data-stu-id="c3a75-295">Active Directory password authentication</span></span>

<span data-ttu-id="c3a75-296">Adatbázishoz való kapcsolódáshoz a beépített hitelesítéssel és az Azure AD identity, a hitelesítési kulcsszó Active Directory-jelszó értékre kell állítani.</span><span class="sxs-lookup"><span data-stu-id="c3a75-296">To connect to a database using integrated authentication and an Azure AD identity, the Authentication keyword must be set to Active Directory Password.</span></span> <span data-ttu-id="c3a75-297">A kapcsolati karakterláncnak tartalmaznia kell a felhasználói azonosító vagy UID és a jelszó/PWD kulcsszavak és az értékeket.</span><span class="sxs-lookup"><span data-stu-id="c3a75-297">The connection string must contain User ID/UID and Password/PWD keywords and values.</span></span> <span data-ttu-id="c3a75-298">A következő C# kódminta ADO .NET használja.</span><span class="sxs-lookup"><span data-stu-id="c3a75-298">The following C# code sample uses ADO .NET.</span></span>

```
string ConnectionString =
@"Data Source=n9lxnyuzhv.database.windows.net; Authentication=Active Directory Password; Initial Catalog=testdb;  UID=bob@contoso.onmicrosoft.com; PWD=MyPassWord!";
SqlConnection conn = new SqlConnection(ConnectionString);
conn.Open();
```

<span data-ttu-id="c3a75-299">További tudnivalók az Azure AD hitelesítési módszerek használatával a rendelkezésre álló bemutató mintakódok [GitHub bemutató az Azure AD hitelesítési](https://github.com/Microsoft/sql-server-samples/tree/master/samples/features/security/azure-active-directory-auth).</span><span class="sxs-lookup"><span data-stu-id="c3a75-299">Learn more about Azure AD authentication methods using the demo code samples available at [Azure AD Authentication GitHub Demo](https://github.com/Microsoft/sql-server-samples/tree/master/samples/features/security/azure-active-directory-auth).</span></span>

## <a name="azure-ad-token"></a><span data-ttu-id="c3a75-300">Az Azure AD-jogkivonat</span><span class="sxs-lookup"><span data-stu-id="c3a75-300">Azure AD token</span></span>
<span data-ttu-id="c3a75-301">Ez a hitelesítési módszer lehetővé teszi, hogy a középső rétegbeli szolgáltatásokhoz való csatlakozáshoz az Azure SQL Database vagy az Azure SQL Data Warehouse jogkivonat beszerzése az Azure Active Directory (AAD).</span><span class="sxs-lookup"><span data-stu-id="c3a75-301">This authentication method allows middle-tier services to connect to Azure SQL Database or Azure SQL Data Warehouse by obtaining a token from Azure Active Directory (AAD).</span></span> <span data-ttu-id="c3a75-302">Ez lehetővé teszi a kifinomult forgatókönyvek például a tanúsítvány alapú hitelesítés.</span><span class="sxs-lookup"><span data-stu-id="c3a75-302">It enables sophisticated scenarios including certificate-based authentication.</span></span> <span data-ttu-id="c3a75-303">Hajtsa végre az Azure AD-tokent használó hitelesítés használatára négy alapvető lépéseket:</span><span class="sxs-lookup"><span data-stu-id="c3a75-303">You must complete four basic steps to use Azure AD token authentication:</span></span>

1. <span data-ttu-id="c3a75-304">Az alkalmazás regisztrálása az Azure Active Directoryban, és az ügyfél-azonosító lekérése a kódot.</span><span class="sxs-lookup"><span data-stu-id="c3a75-304">Register your application with Azure Active Directory and get the client id for your code.</span></span> 
2. <span data-ttu-id="c3a75-305">Hozzon létre egy adatbázis-felhasználó, az alkalmazás jelző.</span><span class="sxs-lookup"><span data-stu-id="c3a75-305">Create a database user representing the application.</span></span> <span data-ttu-id="c3a75-306">(A korábbi 6. lépés befejeződött.)</span><span class="sxs-lookup"><span data-stu-id="c3a75-306">(Completed earlier in step 6.)</span></span>
3. <span data-ttu-id="c3a75-307">Hozzon létre egy tanúsítványt az ügyfél számítógépen fut a az alkalmazás.</span><span class="sxs-lookup"><span data-stu-id="c3a75-307">Create a certificate on the client computer runs the application.</span></span>
4. <span data-ttu-id="c3a75-308">A tanúsítvány hozzáadása az alkalmazáshoz kulcsként.</span><span class="sxs-lookup"><span data-stu-id="c3a75-308">Add the certificate as a key for your application.</span></span>

<span data-ttu-id="c3a75-309">A minta kapcsolati karakterlánc:</span><span class="sxs-lookup"><span data-stu-id="c3a75-309">Sample connection string:</span></span>

```
string ConnectionString =@"Data Source=n9lxnyuzhv.database.windows.net; Initial Catalog=testdb;"
SqlConnection conn = new SqlConnection(ConnectionString);
connection.AccessToken = "Your JWT token"
conn.Open();
```

<span data-ttu-id="c3a75-310">További információkért lásd: [SQL Server biztonsági Blog](https://blogs.msdn.microsoft.com/sqlsecurity/2016/02/09/token-based-authentication-support-for-azure-sql-db-using-azure-ad-auth/).</span><span class="sxs-lookup"><span data-stu-id="c3a75-310">For more information, see [SQL Server Security Blog](https://blogs.msdn.microsoft.com/sqlsecurity/2016/02/09/token-based-authentication-support-for-azure-sql-db-using-azure-ad-auth/).</span></span>

### <a name="sqlcmd"></a><span data-ttu-id="c3a75-311">sqlcmd</span><span class="sxs-lookup"><span data-stu-id="c3a75-311">sqlcmd</span></span>

<span data-ttu-id="c3a75-312">A következő utasításokat csatlakozni az Sqlcmd használatával, amely elérhető a 13.1 verzióját használja a [letöltőközpontból](http://go.microsoft.com/fwlink/?LinkID=825643).</span><span class="sxs-lookup"><span data-stu-id="c3a75-312">The following statements, connect using version 13.1 of sqlcmd, which is available from the [Download Center](http://go.microsoft.com/fwlink/?LinkID=825643).</span></span>

```
sqlcmd -S Target_DB_or_DW.testsrv.database.windows.net  -G  
sqlcmd -S Target_DB_or_DW.testsrv.database.windows.net -U bob@contoso.com -P MyAADPassword -G -l 30
```

## <a name="next-steps"></a><span data-ttu-id="c3a75-313">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="c3a75-313">Next steps</span></span>
- <span data-ttu-id="c3a75-314">Az SQL Database hozzáféréseinek és felügyeletének áttekintéséről az [SQL Database-hozzáférés és -felügyelet](sql-database-control-access.md) részben olvashat.</span><span class="sxs-lookup"><span data-stu-id="c3a75-314">For an overview of access and control in SQL Database, see [SQL Database access and control](sql-database-control-access.md).</span></span>
- <span data-ttu-id="c3a75-315">Az SQL Database bejelentkezéseinek, felhasználóinak és adatbázis-szerepköreinek áttekintését a [Bejelentkezések, felhasználók és adatbázis-szerepkörök](sql-database-manage-logins.md) részben találja.</span><span class="sxs-lookup"><span data-stu-id="c3a75-315">For an overview of logins, users, and database roles in SQL Database, see [Logins, users, and database roles](sql-database-manage-logins.md).</span></span>
- <span data-ttu-id="c3a75-316">További információ az adatbázis résztvevőivel kapcsolatban: [Résztvevők](https://msdn.microsoft.com/library/ms181127.aspx).</span><span class="sxs-lookup"><span data-stu-id="c3a75-316">For more information about database principals, see [Principals](https://msdn.microsoft.com/library/ms181127.aspx).</span></span>
- <span data-ttu-id="c3a75-317">További információ az adatbázis-szerepkörökkel kapcsolatban: [Adatbázis-szerepkörök](https://msdn.microsoft.com/library/ms189121.aspx).</span><span class="sxs-lookup"><span data-stu-id="c3a75-317">For more information about database roles, see [Database roles](https://msdn.microsoft.com/library/ms189121.aspx).</span></span>
- <span data-ttu-id="c3a75-318">További információ az SQL Database tűzfalszabályaival kapcsolatban: [SQL Database tűzfalszabályok](sql-database-firewall-configure.md).</span><span class="sxs-lookup"><span data-stu-id="c3a75-318">For more information about firewall rules in SQL Database, see [SQL Database firewall rules](sql-database-firewall-configure.md).</span></span>

<!--Image references-->

[1]: ./media/sql-database-aad-authentication/1aad-auth-diagram.png
[2]: ./media/sql-database-aad-authentication/2subscription-relationship.png
[3]: ./media/sql-database-aad-authentication/3admin-structure.png
[4]: ./media/sql-database-aad-authentication/4select-subscription.png
[5]: ./media/sql-database-aad-authentication/5ad-settings-portal.png
[6]: ./media/sql-database-aad-authentication/6edit-directory-select.png
[7]: ./media/sql-database-aad-authentication/7edit-directory-confirm.png
[8]: ./media/sql-database-aad-authentication/8choose-ad.png
[10]: ./media/sql-database-aad-authentication/10choose-admin.png
[11]: ./media/sql-database-aad-authentication/active-directory-integrated.png
[12]: ./media/sql-database-aad-authentication/12connect-using-pw-auth2.png
[13]: ./media/sql-database-aad-authentication/13connect-to-db2.png

