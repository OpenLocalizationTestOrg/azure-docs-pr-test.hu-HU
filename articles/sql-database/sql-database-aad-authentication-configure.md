---
title: "aaaConfigure Azure Active Directory-hitelesítés - SQL |} Microsoft Docs"
description: "Megtudhatja, hogyan tooconnect tooSQL adatbázis és az SQL Data Warehouse Azure Active Directory-hitelesítés használatával."
services: sql-database
documentationcenter: 
author: BYHAM
manager: jhubbard
editor: 
tags: 
ms.assetid: 7e2508a1-347e-4f15-b060-d46602c5ce7e
ms.service: sql-database
ms.custom: security
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-management
ms.date: 07/10/2017
ms.author: rickbyh
ms.openlocfilehash: d6222da0b840f96d4bcfbc02964dc7c54d5ea1ee
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/06/2017
---
# <a name="configure-and-manage-azure-active-directory-authentication-with-sql-database-or-sql-data-warehouse"></a><span data-ttu-id="e0fa1-103">Konfigurálhatja és kezelheti az Azure Active Directory-hitelesítés az SQL Database vagy az SQL Data Warehouse</span><span class="sxs-lookup"><span data-stu-id="e0fa1-103">Configure and manage Azure Active Directory authentication with SQL Database or SQL Data Warehouse</span></span>

<span data-ttu-id="e0fa1-104">Ez a cikk bemutatja, hogyan toocreate feltöltése az Azure AD és az Azure AD az Azure SQL Database és az SQL Data Warehouse majd használni.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-104">This article shows you how toocreate and populate Azure AD, and then use Azure AD with Azure SQL Database and SQL Data Warehouse.</span></span> <span data-ttu-id="e0fa1-105">Megtudhatja, [Azure Active Directory-hitelesítéssel](sql-database-aad-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="e0fa1-105">For an overview, see [Azure Active Directory Authentication](sql-database-aad-authentication.md).</span></span>

>  [!NOTE]  
>  <span data-ttu-id="e0fa1-106">Csatlakozás tooSQL-kiszolgáló egy Azure virtuális gépen nem támogatott az Azure Active Directory-fiókkal.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-106">Connecting tooSQL Server running on an Azure VM is not supported using an Azure Active Directory account.</span></span> <span data-ttu-id="e0fa1-107">A tartomány Active Directory-fiókot használni.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-107">Use a domain Active Directory account instead.</span></span>

## <a name="create-and-populate-an-azure-ad"></a><span data-ttu-id="e0fa1-108">Létrehozása és feltöltése az Azure AD</span><span class="sxs-lookup"><span data-stu-id="e0fa1-108">Create and populate an Azure AD</span></span>
<span data-ttu-id="e0fa1-109">Hozzon létre egy Azure AD és a felhasználókat és csoportokat.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-109">Create an Azure AD and populate it with users and groups.</span></span> <span data-ttu-id="e0fa1-110">Az Azure AD hello kezdeti tartomány az Azure AD által kezelt tartomány lehet.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-110">Azure AD can be hello initial domain Azure AD managed domain.</span></span> <span data-ttu-id="e0fa1-111">Az Azure AD egy a helyszíni Active Directory tartományi szolgáltatások, amelyek össze van vonva az Azure AD hello is lehet.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-111">Azure AD can also be an on-premises Active Directory Domain Services that is federated with hello Azure AD.</span></span>

<span data-ttu-id="e0fa1-112">További információkért lásd: [a helyszíni identitások integrálása az Azure Active Directoryval](../active-directory/active-directory-aadconnect.md), [adja hozzá a saját tartomány neve tooAzure AD](../active-directory/active-directory-add-domain.md), [Microsoft Azure mostantól támogatja az összevonási Windows Server Active Directory](https://azure.microsoft.com/blog/2012/11/28/windows-azure-now-supports-federation-with-windows-server-active-directory/), [az Azure AD-címtár felügyelete](https://msdn.microsoft.com/library/azure/hh967611.aspx), [kezelése Windows PowerShell használatával az Azure AD](/powershell/azure/overview?view=azureadps-2.0), és [hibrid identitás Szükséges portok és protokollok](../active-directory/active-directory-aadconnect-ports.md).</span><span class="sxs-lookup"><span data-stu-id="e0fa1-112">For more information, see [Integrating your on-premises identities with Azure Active Directory](../active-directory/active-directory-aadconnect.md), [Add your own domain name tooAzure AD](../active-directory/active-directory-add-domain.md), [Microsoft Azure now supports federation with Windows Server Active Directory](https://azure.microsoft.com/blog/2012/11/28/windows-azure-now-supports-federation-with-windows-server-active-directory/), [Administering your Azure AD directory](https://msdn.microsoft.com/library/azure/hh967611.aspx), [Manage Azure AD using Windows PowerShell](/powershell/azure/overview?view=azureadps-2.0), and [Hybrid Identity Required Ports and Protocols](../active-directory/active-directory-aadconnect-ports.md).</span></span>

## <a name="optional-associate-or-change-hello-active-directory-that-is-currently-associated-with-your-azure-subscription"></a><span data-ttu-id="e0fa1-113">Választható lehetőség: Hozzárendelése vagy hello active directory jelenleg az Azure-előfizetéshez társított módosítása</span><span class="sxs-lookup"><span data-stu-id="e0fa1-113">Optional: Associate or change hello active directory that is currently associated with your Azure Subscription</span></span>
<span data-ttu-id="e0fa1-114">tooassociate hello Azure Active Directory a szervezeténél, az adatbázis ellenőrizze hello directory megbízható könyvtárat hello Azure-előfizetés üzemeltetési hello adatbázis számára.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-114">tooassociate your database with hello Azure AD directory for your organization, make hello directory a trusted directory for hello Azure subscription hosting hello database.</span></span> <span data-ttu-id="e0fa1-115">További információkért lásd: [How Azure subscriptions are associated with Azure AD?](https://msdn.microsoft.com/library/azure/dn629581.aspx) (Hogyan kapcsolódnak az Azure-előfizetések az Azure AD-hoz?).</span><span class="sxs-lookup"><span data-stu-id="e0fa1-115">For more information, see [How Azure subscriptions are associated with Azure AD](https://msdn.microsoft.com/library/azure/dn629581.aspx).</span></span>

<span data-ttu-id="e0fa1-116">**További információ:** minden Azure-előfizetéshez az Azure AD-példányban megbízhatósági kapcsolatban áll.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-116">**Additional information:** Every Azure subscription has a trust relationship with an Azure AD instance.</span></span> <span data-ttu-id="e0fa1-117">Ez azt jelenti, hogy megbízik, hogy directory tooauthenticate felhasználók, szolgáltatások és eszközök.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-117">This means that it trusts that directory tooauthenticate users, services, and devices.</span></span> <span data-ttu-id="e0fa1-118">Több előfizetés is megbízhat hello ugyanabban a könyvtárban, de egy előfizetéshez csak egy címtárban bízhat.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-118">Multiple subscriptions can trust hello same directory, but a subscription trusts only one directory.</span></span> <span data-ttu-id="e0fa1-119">Láthatja, melyik címtárban bízik meg az előfizetése hello **beállítások** lapot [https://manage.windowsazure.com/](https://manage.windowsazure.com/).</span><span class="sxs-lookup"><span data-stu-id="e0fa1-119">You can see which directory is trusted by your subscription under hello **Settings** tab at [https://manage.windowsazure.com/](https://manage.windowsazure.com/).</span></span> <span data-ttu-id="e0fa1-120">A bizalmi kapcsolat, amely egy előfizetés tartozik egy könyvtárat eltérően előfizetéssel rendelkező összes többi erőforrása (webhelyek, adatbázisok és így tovább), Azure előfizetés, mint amelyek hello kapcsolat van.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-120">This trust relationship that a subscription has with a directory is unlike hello relationship that a subscription has with all other resources in Azure (websites, databases, and so on), which are more like child resources of a subscription.</span></span> <span data-ttu-id="e0fa1-121">Ha egy előfizetés lejár, majd elérni toothose más hello előfizetéshez társított erőforrásokat is leáll.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-121">If a subscription expires, then access toothose other resources associated with hello subscription also stops.</span></span> <span data-ttu-id="e0fa1-122">De hello címtár az Azure-ban marad, és más előfizetéseket társíthat a könyvtárhoz, és továbbra is toomanage hello directory-felhasználók.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-122">But hello directory remains in Azure, and you can associate another subscription with that directory and continue toomanage hello directory users.</span></span> <span data-ttu-id="e0fa1-123">Erőforrások kapcsolatos további információkért lásd: [az az Azure-erőforrások hozzáférésének megismerése](https://msdn.microsoft.com/library/azure/dn584083.aspx).</span><span class="sxs-lookup"><span data-stu-id="e0fa1-123">For more information about resources, see [Understanding resource access in Azure](https://msdn.microsoft.com/library/azure/dn584083.aspx).</span></span>

<span data-ttu-id="e0fa1-124">hello következő eljárások bemutatják, hogyan toochange hello kapcsolódó egy adott előfizetéshez tartozó.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-124">hello following procedures show you how toochange hello associated directory for a given subscription.</span></span>
1. <span data-ttu-id="e0fa1-125">Csatlakozás tooyour [klasszikus Azure portál](https://manage.windowsazure.com/) Azure-előfizetési rendszergazda segítségével.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-125">Connect tooyour [Azure Classic Portal](https://manage.windowsazure.com/) by using an Azure subscription administrator.</span></span>
2. <span data-ttu-id="e0fa1-126">Hello bal szalagcím, válassza ki a **beállítások**.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-126">On hello left banner, select **SETTINGS**.</span></span>
3. <span data-ttu-id="e0fa1-127">Az előfizetések hello beállítások képernyő jelenik meg.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-127">Your subscriptions appear in hello settings screen.</span></span> <span data-ttu-id="e0fa1-128">Ha hello szükségeskonfiguráció-előfizetés nem jelenik meg, kattintson a **előfizetések** hello felső legördülő listán hello **szűrő által DIRECTORY** mezőbe, és válassza ki, amely tartalmazza az előfizetések hello könyvtárat, majd kattintson **ALKALMAZ**.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-128">If hello desired subscription does not appear, click **Subscriptions** at hello top, drop down hello **FILTER BY DIRECTORY** box and select hello directory that contains your subscriptions, and then click **APPLY**.</span></span>
   
    ![Válassza ki az előfizetést][4]
4. <span data-ttu-id="e0fa1-130">A hello **beállítások** területen kattintson az előfizetéshez, majd **könyvtár szerkesztése** hello lap hello alján.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-130">In hello **settings** area, click your subscription, and then click  **EDIT DIRECTORY** at hello bottom of hello page.</span></span>
   
    ![ad-beállítások-portálon][5]
5. <span data-ttu-id="e0fa1-132">A hello **könyvtár szerkesztése** mezőben, válassza ki a hello Azure Active Directoryban, amely az SQL Server vagy az SQL Data Warehouse van társítva, majd kattintson a Tovább nyílra hello.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-132">In hello **EDIT DIRECTORY** box, select hello Azure Active Directory that is associated with your SQL Server or SQL Data Warehouse, and then click hello arrow for next.</span></span>
   
    ![Edit directory jelölje ki][6]
6. <span data-ttu-id="e0fa1-134">A hello **megerősítése** directory leképezési párbeszédpanelen ellenőrizze, hogy "**összes társrendszergazdák törlődni fog.**"</span><span class="sxs-lookup"><span data-stu-id="e0fa1-134">In hello **CONFIRM** directory Mapping dialog box, confirm that "**All co-administrators will be removed.**"</span></span>
   
    ![Edit directory megerősítése][7]
7. <span data-ttu-id="e0fa1-136">Kattintson a hello ellenőrzés tooreload hello portálon.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-136">Click hello check tooreload hello portal.</span></span>

   > [!NOTE]
   > <span data-ttu-id="e0fa1-137">Ha hello könyvtár, tooall közös rendszergazdák, az Azure Active Directory-felhasználók és csoportok, módosíthatja és könyvtár biztonsági erőforrás-felhasználókat törlődnek, és már nem rendelkezik hozzáféréssel toothis előfizetés vagy az erőforrások.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-137">When you change hello directory, access tooall co-administrators, Azure AD users and groups, and directory-backed resource users are removed and they no longer have access toothis subscription or its resources.</span></span> <span data-ttu-id="e0fa1-138">Csak, szolgáltatás-rendszergazdaként, konfigurálja a hozzáférést a rendszerbiztonsági tagoknak hello új könyvtár alapján.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-138">Only you, as a service administrator, can configure access for principals based on hello new directory.</span></span> <span data-ttu-id="e0fa1-139">Ez a változás jelentős mennyiségű időt toopropagate tooall erőforrásokat is igénybe vehet.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-139">This change might take a substantial amount of time toopropagate tooall resources.</span></span> <span data-ttu-id="e0fa1-140">Hello directory módosítása, is módosítások SQL-adatbázis és az SQL Data Warehouse hello Azure AD-rendszergazda és a meglévő Azure Active Directory-felhasználók adatbázis-hozzáférés letiltása.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-140">Changing hello directory, also changes hello Azure AD administrator for SQL Database and SQL Data Warehouse and disallow database access for any existing Azure AD users.</span></span> <span data-ttu-id="e0fa1-141">az Azure AD Üdvözöljük a rendszergazdákat kell lennie (alább leírtak) alaphelyzetbe állítása és az új Azure AD-felhasználók kell létrehozni.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-141">hello Azure AD admin must be reset (as described below) and new Azure AD users must be created.</span></span>
   >  

## <a name="create-an-azure-ad-administrator-for-azure-sql-server"></a><span data-ttu-id="e0fa1-142">Az Azure AD-rendszergazda Azure SQL-kiszolgáló létrehozása</span><span class="sxs-lookup"><span data-stu-id="e0fa1-142">Create an Azure AD administrator for Azure SQL server</span></span>
<span data-ttu-id="e0fa1-143">Minden Azure SQL-kiszolgáló (amely egy SQL Database vagy az SQL Data Warehouse) egy önálló kiszolgáló-rendszergazdai fiók hello teljes Azure SQL server rendszergazdájának hello kezdődik.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-143">Each Azure SQL server (which hosts a SQL Database or SQL Data Warehouse) starts with a single server administrator account that is hello administrator of hello entire Azure SQL server.</span></span> <span data-ttu-id="e0fa1-144">A második SQL kiszolgáló rendszergazdája kell létrehozni, amely egy Azure AD-fiókot.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-144">A second SQL Server administrator must be created, that is an Azure AD account.</span></span> <span data-ttu-id="e0fa1-145">Tartalmazott adatbázis-felhasználó rendszerbiztonsági hello master adatbázisban jön létre.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-145">This principal is created as a contained database user in hello master database.</span></span> <span data-ttu-id="e0fa1-146">A rendszergazdáknak, hello server-rendszergazdai fiók tagjai hello **db_owner** minden felhasználói szerepkör adatbázisából, és adjon meg minden egyes felhasználói adatbázis hello **dbo** felhasználó.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-146">As administrators, hello server administrator accounts are members of hello **db_owner** role in every user database, and enter each user database as hello **dbo** user.</span></span> <span data-ttu-id="e0fa1-147">Hello kiszolgáló rendszergazdai fiókokkal kapcsolatos további információkért lásd: [kezelése adatbázisok és bejelentkezések az Azure SQL Database](sql-database-manage-logins.md).</span><span class="sxs-lookup"><span data-stu-id="e0fa1-147">For more information about hello server administrator accounts, see [Managing Databases and Logins in Azure SQL Database](sql-database-manage-logins.md).</span></span>

<span data-ttu-id="e0fa1-148">Ha az Azure Active Directoryval a georeplikációt, hello Azure Active Directory-rendszergazda hello elsődleges és másodlagos kiszolgálók hello kell konfigurálni.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-148">When using Azure Active Directory with geo-replication, hello Azure Active Directory administrator must be configured for both hello primary and hello secondary servers.</span></span> <span data-ttu-id="e0fa1-149">Ha a kiszolgáló nem rendelkezik egy Azure Active Directory-rendszergazda, majd Azure Active Directory bejelentkezési és a felhasználók "Nem lehet csatlakozni" tooserver hibaüzenetet kap.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-149">If a server does not have an Azure Active Directory administrator, then Azure Active Directory logins and users receive a "Cannot connect" tooserver error.</span></span>

> [!NOTE]
> <span data-ttu-id="e0fa1-150">Az Azure AD-fiókot (beleértve a hello Azure SQL server-rendszergazdai fiók), nem alapuló felhasználók nem hozható létre az Azure AD-alapú felhasználók, mert nem rendelkeznek engedéllyel toovalidate hello Azure AD az adatbázis-felhasználók javasolt.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-150">Users that are not based on an Azure AD account (including hello Azure SQL server administrator account), cannot create Azure AD-based users, because they do not have permission toovalidate proposed database users with hello Azure AD.</span></span>
> 

## <a name="provision-an-azure-active-directory-administrator-for-your-azure-sql-server"></a><span data-ttu-id="e0fa1-151">Az Azure SQL server Azure Active Directory-rendszergazda kiépítése</span><span class="sxs-lookup"><span data-stu-id="e0fa1-151">Provision an Azure Active Directory administrator for your Azure SQL server</span></span>

<span data-ttu-id="e0fa1-152">a következő két eljárás hello mutatja be az Azure SQL server hello Azure-portálon, és a PowerShell használatával Azure Active Directory-rendszergazda tooprovision.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-152">hello following two procedures show you how tooprovision an Azure Active Directory administrator for your Azure SQL server in hello Azure portal and by using PowerShell.</span></span>

### <a name="azure-portal"></a><span data-ttu-id="e0fa1-153">Azure Portal</span><span class="sxs-lookup"><span data-stu-id="e0fa1-153">Azure portal</span></span>
1. <span data-ttu-id="e0fa1-154">A hello [Azure-portálon](https://portal.azure.com/), a hello jobb felső sarkában, ha a kapcsolat toodrop vonatkozó esetleges aktív könyvtárainak listáját.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-154">In hello [Azure portal](https://portal.azure.com/), in hello upper-right corner, click your connection toodrop down a list of possible Active Directories.</span></span> <span data-ttu-id="e0fa1-155">Válassza ki a hello javítsa ki az Active Directory az Azure AD hello alapértelmezettként.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-155">Choose hello correct Active Directory as hello default Azure AD.</span></span> <span data-ttu-id="e0fa1-156">E lépés hivatkozások hello előfizetés hozzárendelését a Active Directory Azure SQL-kiszolgálóval, annak biztosítása, hogy hello ugyanahhoz az előfizetéshez szolgál, mind az Azure AD és az SQL Server.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-156">This step links hello subscription association with Active Directory with Azure SQL server making sure that hello same subscription is used for both Azure AD and SQL Server.</span></span> <span data-ttu-id="e0fa1-157">(hello Azure SQL-kiszolgálót is szolgáltató vagy az Azure SQL Database vagy az Azure SQL Data Warehouse.)</span><span class="sxs-lookup"><span data-stu-id="e0fa1-157">(hello Azure SQL server can be hosting either Azure SQL Database or Azure SQL Data Warehouse.)</span></span>   
    <span data-ttu-id="e0fa1-158">![Válasszon ad][8]</span><span class="sxs-lookup"><span data-stu-id="e0fa1-158">![choose-ad][8]</span></span>   
    
2. <span data-ttu-id="e0fa1-159">Hello balra szalagcím válassza ki a **SQL Server-kiszolgálók**, jelölje be a **SQL server**, majd a hello **SQL Server** panelen kattintson **Active Directory-rendszergazda**.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-159">In hello left banner select **SQL servers**, select your **SQL server**, and then in hello **SQL Server** blade, click **Active Directory admin**.</span></span>   
3. <span data-ttu-id="e0fa1-160">A hello **Active Directory-rendszergazda** panelen kattintson a **-rendszergazda beállítása**.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-160">In hello **Active Directory admin** blade, click **Set admin**.</span></span>   
    <span data-ttu-id="e0fa1-161">![az active directory kiválasztása](./media/sql-database-aad-authentication/select-active-directory.png)</span><span class="sxs-lookup"><span data-stu-id="e0fa1-161">![select active directory](./media/sql-database-aad-authentication/select-active-directory.png)</span></span>  
    
4. <span data-ttu-id="e0fa1-162">A hello **adja hozzá a rendszergazda** panelen keresse meg a felhasználó, jelölje be hello felhasználó vagy csoport toobe rendszergazdaként, és kattintson a **válasszon**.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-162">In hello **Add admin** blade, search for a user, select hello user or group toobe an administrator, and then click **Select**.</span></span> <span data-ttu-id="e0fa1-163">(hello Active Directory felügyeleti panelt jeleníti meg minden tagok és Active Directory-csoport.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-163">(hello Active Directory admin blade shows all members and groups of your Active Directory.</span></span> <span data-ttu-id="e0fa1-164">Felhasználók vagy csoportok használhatók, nem állítható be, mert nem támogatják az Azure AD rendszergazdai szerepkörrel.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-164">Users or groups that are grayed out cannot be selected because they are not supported as Azure AD administrators.</span></span> <span data-ttu-id="e0fa1-165">(A hello támogatott rendszergazdák hello tartalmazó lista **az Azure AD-funkciókat és korlátozások** szakasza [Azure Active Directory hitelesítés használata a hitelesítés és az SQL Database vagy az SQL Data Warehouse](sql-database-aad-authentication.md).) Szerepköralapú hozzáférés-vezérlést (RBAC) csak toohello portál vonatkozik, és nincs propagált tooSQL kiszolgáló.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-165">(See hello list of supported admins in hello **Azure AD Features and Limitations** section of [Use Azure Active Directory Authentication for authentication with SQL Database or SQL Data Warehouse](sql-database-aad-authentication.md).) Role-based access control (RBAC) applies only toohello portal and is not propagated tooSQL Server.</span></span>   
    <span data-ttu-id="e0fa1-166">![Válassza ki a rendszergazda](./media/sql-database-aad-authentication/select-admin.png)</span><span class="sxs-lookup"><span data-stu-id="e0fa1-166">![select admin](./media/sql-database-aad-authentication/select-admin.png)</span></span>  
    
5. <span data-ttu-id="e0fa1-167">Hello hello tetején **Active Directory-rendszergazda** panelen kattintson a **mentése**.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-167">At hello top of hello **Active Directory admin** blade, click **SAVE**.</span></span>   
    <span data-ttu-id="e0fa1-168">![Mentse admin](./media/sql-database-aad-authentication/save-admin.png)</span><span class="sxs-lookup"><span data-stu-id="e0fa1-168">![save admin](./media/sql-database-aad-authentication/save-admin.png)</span></span>   

<span data-ttu-id="e0fa1-169">hello folyamatát hello rendszergazda eltarthat néhány percig.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-169">hello process of changing hello administrator may take several minutes.</span></span> <span data-ttu-id="e0fa1-170">Új rendszergazda hello hello jelenik meg, majd **Active Directory-rendszergazda** mezőbe.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-170">Then hello new administrator appears in hello **Active Directory admin** box.</span></span>

   > [!NOTE]
   > <span data-ttu-id="e0fa1-171">Az Azure AD Üdvözöljük a rendszergazdákat beállításakor hello új felügyeleti neve (felhasználó vagy csoport) nem már megtalálható hello virtuális master adatbázis SQL Server hitelesítési felhasználóként.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-171">When setting up hello Azure AD admin, hello new admin name (user or group) cannot already be present in hello virtual master database as a SQL Server authentication user.</span></span> <span data-ttu-id="e0fa1-172">Ha van ilyen, a hello Azure AD rendszergazdai telepítés sikertelen lesz; visszaállítása a létrehozása és, amely jelzi, hogy az ilyen rendszergazda (név) már létezik.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-172">If present, hello Azure AD admin setup will fail; rolling back its creation and indicating that such an admin (name) already exists.</span></span> <span data-ttu-id="e0fa1-173">Mivel ilyen egy SQL Server-hitelesítés felhasználói része nem hello Azure AD, bármely elérhető tooconnect toohello kiszolgáló használata az Azure AD-alapú hitelesítés sikertelen lesz.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-173">Since such a SQL Server authentication user is not part of hello Azure AD, any effort tooconnect toohello server using Azure AD authentication fails.</span></span>
   > 


<span data-ttu-id="e0fa1-174">toolater hello hello tetején, hogy egy rendszergazda eltávolítása **Active Directory-rendszergazda** panelen kattintson a **távolítsa el a felügyeleti**, és kattintson a **mentése**.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-174">toolater remove an Admin, at hello top of hello **Active Directory admin** blade, click **Remove admin**, and then click **Save**.</span></span>

### <a name="powershell"></a><span data-ttu-id="e0fa1-175">PowerShell</span><span class="sxs-lookup"><span data-stu-id="e0fa1-175">PowerShell</span></span>
<span data-ttu-id="e0fa1-176">toorun PowerShell-parancsmagok, meg kell toohave Azure PowerShell telepítése és futtatása.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-176">toorun PowerShell cmdlets, you need toohave Azure PowerShell installed and running.</span></span> <span data-ttu-id="e0fa1-177">Részletes információkért lásd: [hogyan tooinstall és konfigurálja az Azure Powershellt](/powershell/azure/overview).</span><span class="sxs-lookup"><span data-stu-id="e0fa1-177">For detailed information, see [How tooinstall and configure Azure PowerShell](/powershell/azure/overview).</span></span>

<span data-ttu-id="e0fa1-178">az Azure AD rendszergazdai tooprovision hello Azure PowerShell-parancsok a következő hajtható végre:</span><span class="sxs-lookup"><span data-stu-id="e0fa1-178">tooprovision an Azure AD admin, execute hello following Azure PowerShell commands:</span></span>

* <span data-ttu-id="e0fa1-179">Add-AzureRmAccount</span><span class="sxs-lookup"><span data-stu-id="e0fa1-179">Add-AzureRmAccount</span></span>
* <span data-ttu-id="e0fa1-180">SELECT-AzureRmSubscription</span><span class="sxs-lookup"><span data-stu-id="e0fa1-180">Select-AzureRmSubscription</span></span>

<span data-ttu-id="e0fa1-181">Parancsmagok tooprovision használt, és az Azure AD admin kezelése:</span><span class="sxs-lookup"><span data-stu-id="e0fa1-181">Cmdlets used tooprovision and manage Azure AD admin:</span></span>

| <span data-ttu-id="e0fa1-182">Parancsmag neve</span><span class="sxs-lookup"><span data-stu-id="e0fa1-182">Cmdlet name</span></span> | <span data-ttu-id="e0fa1-183">Leírás</span><span class="sxs-lookup"><span data-stu-id="e0fa1-183">Description</span></span> |
| --- | --- |
| [<span data-ttu-id="e0fa1-184">Set-AzureRmSqlServerActiveDirectoryAdministrator</span><span class="sxs-lookup"><span data-stu-id="e0fa1-184">Set-AzureRmSqlServerActiveDirectoryAdministrator</span></span>](/powershell/module/azurerm.sql/set-azurermsqlserveractivedirectoryadministrator) |<span data-ttu-id="e0fa1-185">Azure Active Directory-rendszergazda Azure SQL server vagy az Azure SQL Data Warehouse kiépítése.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-185">Provisions an Azure Active Directory administrator for Azure SQL server or Azure SQL Data Warehouse.</span></span> <span data-ttu-id="e0fa1-186">(Kell lennie a jelenlegi előfizetés hello.)</span><span class="sxs-lookup"><span data-stu-id="e0fa1-186">(Must be from hello current subscription.)</span></span> |
| [<span data-ttu-id="e0fa1-187">Remove-AzureRmSqlServerActiveDirectoryAdministrator</span><span class="sxs-lookup"><span data-stu-id="e0fa1-187">Remove-AzureRmSqlServerActiveDirectoryAdministrator</span></span>](/powershell/module/azurerm.sql/remove-azurermsqlserveractivedirectoryadministrator) |<span data-ttu-id="e0fa1-188">Eltávolítja az Azure Active Directory-rendszergazda Azure SQL server vagy az Azure SQL Data warehouse-bA.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-188">Removes an Azure Active Directory administrator for Azure SQL server or Azure SQL Data Warehouse.</span></span> |
| [<span data-ttu-id="e0fa1-189">Get-AzureRmSqlServerActiveDirectoryAdministrator</span><span class="sxs-lookup"><span data-stu-id="e0fa1-189">Get-AzureRmSqlServerActiveDirectoryAdministrator</span></span>](/powershell/module/azurerm.sql/get-azurermsqlserveractivedirectoryadministrator) |<span data-ttu-id="e0fa1-190">A jelenleg konfigurált hello Azure SQL server vagy az Azure SQL Data Warehouse Azure Active Directory-rendszergazda információt ad vissza.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-190">Returns information about an Azure Active Directory administrator currently configured for hello Azure SQL server or Azure SQL Data Warehouse.</span></span> |

<span data-ttu-id="e0fa1-191">Használhatja a PowerShell-parancs get-help toosee több adatai ezen parancsok mindegyike például ``get-help Set-AzureRmSqlServerActiveDirectoryAdministrator``.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-191">Use PowerShell command get-help toosee more details for each of these commands, for example ``get-help Set-AzureRmSqlServerActiveDirectoryAdministrator``.</span></span>

<span data-ttu-id="e0fa1-192">parancsfájl kiosztja az Azure AD felügyeleti csoport neve a következő hello **DBA_Group** (objektumazonosító: `40b79501-b343-44ed-9ce7-da4c8cc7353f`) a hello **demo_server** nevű erőforráscsoportban server **csoport – 23** :</span><span class="sxs-lookup"><span data-stu-id="e0fa1-192">hello following script provisions an Azure AD administrator group named **DBA_Group** (object id `40b79501-b343-44ed-9ce7-da4c8cc7353f`) for hello **demo_server** server in a resource group named **Group-23**:</span></span>

```
Set-AzureRmSqlServerActiveDirectoryAdministrator -ResourceGroupName "Group-23"
-ServerName "demo_server" -DisplayName "DBA_Group"
```

<span data-ttu-id="e0fa1-193">Hello **DisplayName** bemeneti paraméter fogad el, vagy az Azure AD hello megjelenített név, vagy hello egyszerű felhasználónév.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-193">hello **DisplayName** input parameter accepts either hello Azure AD display name or hello User Principal Name.</span></span> <span data-ttu-id="e0fa1-194">Például ``DisplayName="John Smith"`` és ``DisplayName="johns@contoso.com"``.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-194">For example, ``DisplayName="John Smith"`` and ``DisplayName="johns@contoso.com"``.</span></span> <span data-ttu-id="e0fa1-195">Csak az Azure AD-csoportok hello Azure AD megjelenített név támogatott.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-195">For Azure AD groups only hello Azure AD display name is supported.</span></span>

> [!NOTE]
> <span data-ttu-id="e0fa1-196">hello Azure PowerShell-paranccsal ```Set-AzureRmSqlServerActiveDirectoryAdministrator``` nem akadályozza meg a felhasználók nem támogatott az Azure AD-rendszergazdái kiosztásakor.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-196">hello Azure PowerShell  command ```Set-AzureRmSqlServerActiveDirectoryAdministrator``` does not prevent you from provisioning Azure AD admins for unsupported users.</span></span> <span data-ttu-id="e0fa1-197">Egy nem támogatott felhasználói telepíthető, de nem lehet csatlakozni a tooa adatbázis.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-197">An unsupported user can be provisioned, but can not connect tooa database.</span></span> 
> 

<span data-ttu-id="e0fa1-198">hello alábbi példában választható hello **ObjectID**:</span><span class="sxs-lookup"><span data-stu-id="e0fa1-198">hello following example uses hello optional **ObjectID**:</span></span>

```
Set-AzureRmSqlServerActiveDirectoryAdministrator -ResourceGroupName "Group-23"
-ServerName "demo_server" -DisplayName "DBA_Group" -ObjectId "40b79501-b343-44ed-9ce7-da4c8cc7353f"
```

> [!NOTE]
> <span data-ttu-id="e0fa1-199">az Azure AD hello **ObjectID** szükség, amikor hello **DisplayName** eleme nem egyedi.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-199">hello Azure AD **ObjectID** is required when hello **DisplayName** is not unique.</span></span> <span data-ttu-id="e0fa1-200">tooretrieve hello **ObjectID** és **DisplayName** értékek, hello Active Directory szakaszban a klasszikus Azure portálon, és egy felhasználó vagy csoport hello tulajdonságainak megtekintése.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-200">tooretrieve hello **ObjectID** and **DisplayName** values, use hello Active Directory section of Azure Classic Portal, and view hello properties of a user or group.</span></span>
> 

<span data-ttu-id="e0fa1-201">a következő példa hello Azure SQL-kiszolgáló aktuális az Azure AD Üdvözöljük a rendszergazdákat információt ad vissza:</span><span class="sxs-lookup"><span data-stu-id="e0fa1-201">hello following example returns information about hello current Azure AD admin for Azure SQL server:</span></span>

```
Get-AzureRmSqlServerActiveDirectoryAdministrator -ResourceGroupName "Group-23" -ServerName "demo_server" | Format-List
```

<span data-ttu-id="e0fa1-202">a következő példa hello Azure AD-rendszergazdaként eltávolítja:</span><span class="sxs-lookup"><span data-stu-id="e0fa1-202">hello following example removes an Azure AD administrator:</span></span>

```
Remove-AzureRmSqlServerActiveDirectoryAdministrator -ResourceGroupName "Group-23" -ServerName "demo_server"
```

<span data-ttu-id="e0fa1-203">Egy Azure Active Directory rendszergazdai hello REST API-k használatával is kiépíthetők.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-203">You can also provision an Azure Active Directory Administrator by using hello REST APIs.</span></span> <span data-ttu-id="e0fa1-204">További információkért lásd: [az Azure SQL-adatbázisok Azure SQL-adatbázisok műveletek műveletek és a Service Management REST API-referencia](https://msdn.microsoft.com/library/azure/dn505719.aspx)</span><span class="sxs-lookup"><span data-stu-id="e0fa1-204">For more information, see [Service Management REST API Reference and Operations for Azure SQL Databases Operations for Azure SQL Databases](https://msdn.microsoft.com/library/azure/dn505719.aspx)</span></span>

### <a name="cli"></a><span data-ttu-id="e0fa1-205">parancssori felület</span><span class="sxs-lookup"><span data-stu-id="e0fa1-205">CLI</span></span>  
<span data-ttu-id="e0fa1-206">Az Azure AD-rendszergazda által a következő parancssori felület parancsait hívó hello is kiépíthetők:</span><span class="sxs-lookup"><span data-stu-id="e0fa1-206">You can also provision an Azure AD admin by calling hello following CLI commands:</span></span>
| <span data-ttu-id="e0fa1-207">Parancs</span><span class="sxs-lookup"><span data-stu-id="e0fa1-207">Command</span></span> | <span data-ttu-id="e0fa1-208">Leírás</span><span class="sxs-lookup"><span data-stu-id="e0fa1-208">Description</span></span> |
| --- | --- |
|[<span data-ttu-id="e0fa1-209">az sql server ad-rendszergazda létrehozása</span><span class="sxs-lookup"><span data-stu-id="e0fa1-209">az sql server ad-admin create</span></span>](https://docs.microsoft.com/cli/azure/sql/server/ad-admin#create) |<span data-ttu-id="e0fa1-210">Azure Active Directory-rendszergazda Azure SQL server vagy az Azure SQL Data Warehouse kiépítése.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-210">Provisions an Azure Active Directory administrator for Azure SQL server or Azure SQL Data Warehouse.</span></span> <span data-ttu-id="e0fa1-211">(Kell lennie a jelenlegi előfizetés hello.)</span><span class="sxs-lookup"><span data-stu-id="e0fa1-211">(Must be from hello current subscription.)</span></span> |
|[<span data-ttu-id="e0fa1-212">az sql server ad-rendszergazda törlése</span><span class="sxs-lookup"><span data-stu-id="e0fa1-212">az sql server ad-admin delete</span></span>](https://docs.microsoft.com/cli/azure/sql/server/ad-admin#delete) |<span data-ttu-id="e0fa1-213">Eltávolítja az Azure Active Directory-rendszergazda Azure SQL server vagy az Azure SQL Data warehouse-bA.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-213">Removes an Azure Active Directory administrator for Azure SQL server or Azure SQL Data Warehouse.</span></span> |
|[<span data-ttu-id="e0fa1-214">az sql server ad-rendszergazda listája</span><span class="sxs-lookup"><span data-stu-id="e0fa1-214">az sql server ad-admin list</span></span>](https://docs.microsoft.com/cli/azure/sql/server/ad-admin#list) |<span data-ttu-id="e0fa1-215">A jelenleg konfigurált hello Azure SQL server vagy az Azure SQL Data Warehouse Azure Active Directory-rendszergazda információt ad vissza.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-215">Returns information about an Azure Active Directory administrator currently configured for hello Azure SQL server or Azure SQL Data Warehouse.</span></span> |
|[<span data-ttu-id="e0fa1-216">az sql server ad-rendszergazda frissítése</span><span class="sxs-lookup"><span data-stu-id="e0fa1-216">az sql server ad-admin update</span></span>](https://docs.microsoft.com/cli/azure/sql/server/ad-admin#update) |<span data-ttu-id="e0fa1-217">Hello Active Directory-rendszergazda az Azure SQL server vagy az Azure SQL Data Warehouse frissíti.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-217">Updates hello Active Directory administrator for an Azure SQL server or Azure SQL Data Warehouse.</span></span> |

<span data-ttu-id="e0fa1-218">Parancssori felület parancsait kapcsolatos további információkért lásd: [SQL - az sql](https://docs.microsoft.com/cli/azure/sql/server).</span><span class="sxs-lookup"><span data-stu-id="e0fa1-218">For more information about CLI commands, see [SQL - az sql](https://docs.microsoft.com/cli/azure/sql/server).</span></span>  


## <a name="configure-your-client-computers"></a><span data-ttu-id="e0fa1-219">Állítsa be az ügyfélszámítógépen</span><span class="sxs-lookup"><span data-stu-id="e0fa1-219">Configure your client computers</span></span>
<span data-ttu-id="e0fa1-220">Az összes ügyfélszámítógépre, amelyről alkalmazás vagy felhasználó csatlakozás tooAzure SQL Database vagy az Azure SQL Data Warehouse az Azure AD identitásokkal, telepítenie kell a következő szoftver hello:</span><span class="sxs-lookup"><span data-stu-id="e0fa1-220">On all client machines, from which your applications or users connect tooAzure SQL Database or Azure SQL Data Warehouse using Azure AD identities, you must install hello following software:</span></span>

* <span data-ttu-id="e0fa1-221">.NET-keretrendszer 4.6-os vagy újabb a [https://msdn.microsoft.com/library/5a4x27ek.aspx](https://msdn.microsoft.com/library/5a4x27ek.aspx).</span><span class="sxs-lookup"><span data-stu-id="e0fa1-221">.NET Framework 4.6 or later from [https://msdn.microsoft.com/library/5a4x27ek.aspx](https://msdn.microsoft.com/library/5a4x27ek.aspx).</span></span>
* <span data-ttu-id="e0fa1-222">Az Azure Active Directory hitelesítési tár SQL Serverhez (**ADALSQL. DLL**) több nyelven is elérhető (x86 és amd64) hello letöltőközpontján [Microsoft Active Directory Authentication Library Microsoft SQL Server](http://www.microsoft.com/download/details.aspx?id=48742).</span><span class="sxs-lookup"><span data-stu-id="e0fa1-222">Azure Active Directory Authentication Library for SQL Server (**ADALSQL.DLL**) is available in multiple languages (both x86 and amd64) from hello download center at [Microsoft Active Directory Authentication Library for Microsoft SQL Server](http://www.microsoft.com/download/details.aspx?id=48742).</span></span>

<span data-ttu-id="e0fa1-223">E követelményeknek szerint:</span><span class="sxs-lookup"><span data-stu-id="e0fa1-223">You can meet these requirements by:</span></span>

* <span data-ttu-id="e0fa1-224">Telepítése vagy [SQL Server 2016 Management Studio](https://msdn.microsoft.com/library/mt238290.aspx) vagy [SQL Server Data Tools a Visual Studio 2015](https://msdn.microsoft.com/library/mt204009.aspx) megfelel-e a .NET-keretrendszer 4.6 követelmény hello.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-224">Installing either [SQL Server 2016 Management Studio](https://msdn.microsoft.com/library/mt238290.aspx) or [SQL Server Data Tools for Visual Studio 2015](https://msdn.microsoft.com/library/mt204009.aspx) meets hello .NET Framework 4.6 requirement.</span></span>
* <span data-ttu-id="e0fa1-225">SSMS hello x86 verzióját telepíti **ADALSQL. DLL**.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-225">SSMS installs hello x86 version of **ADALSQL.DLL**.</span></span>
* <span data-ttu-id="e0fa1-226">Az SSDT hello AMD64-es verzióját telepíti **ADALSQL. DLL**.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-226">SSDT installs hello amd64 version of **ADALSQL.DLL**.</span></span>
* <span data-ttu-id="e0fa1-227">hello a legújabb Visual Studio [Visual Studio letöltések](https://www.visualstudio.com/downloads/download-visual-studio-vs) megfelel-e a .NET-keretrendszer 4.6 hello követelménynek, de nem telepíti az hello szükséges AMD64-es verziójának **ADALSQL. DLL**.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-227">hello latest Visual Studio from [Visual Studio Downloads](https://www.visualstudio.com/downloads/download-visual-studio-vs) meets hello .NET Framework 4.6 requirement, but does not install hello required amd64 version of **ADALSQL.DLL**.</span></span>

## <a name="create-contained-database-users-in-your-database-mapped-tooazure-ad-identities"></a><span data-ttu-id="e0fa1-228">Felhasználók létrehozása a tartalmazott adatbázis az adatbázis leképezve tooAzure AD identitások</span><span class="sxs-lookup"><span data-stu-id="e0fa1-228">Create contained database users in your database mapped tooAzure AD identities</span></span>

<span data-ttu-id="e0fa1-229">Az Azure Active Directory-hitelesítés szükséges adatbázis felhasználók toobe tartalmazott adatbázis-felhasználók létre.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-229">Azure Active Directory authentication requires database users toobe created as contained database users.</span></span> <span data-ttu-id="e0fa1-230">Az Azure AD identity alapján tartalmazott adatbázis-felhasználó az adatbázis-felhasználó, amely nem rendelkezik olyan bejelentkezési hello master adatbázisban, és melyik maps tooan identitása az Azure AD-címtár hello adatbázis társított hello.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-230">A contained database user based on an Azure AD identity, is a database user that does not have a login in hello master database, and which maps tooan identity in hello Azure AD directory that is associated with hello database.</span></span> <span data-ttu-id="e0fa1-231">az Azure AD identity hello vagy az egyéni felhasználói fiókot, vagy a csoport lehet.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-231">hello Azure AD identity can be either an individual user account or a group.</span></span> <span data-ttu-id="e0fa1-232">További információ a tartalmazott adatbázis-felhasználók: [tartalmazott adatbázis-felhasználók – hogy a saját adatbázis hordozható](https://msdn.microsoft.com/library/ff929188.aspx).</span><span class="sxs-lookup"><span data-stu-id="e0fa1-232">For more information about contained database users, see [Contained Database Users- Making Your Database Portable](https://msdn.microsoft.com/library/ff929188.aspx).</span></span>

> [!NOTE]
> <span data-ttu-id="e0fa1-233">Adatbázis-felhasználók (kivétellel hello rendszergazdák) portal nem hozható létre.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-233">Database users (with hello exception of administrators) cannot be created using portal.</span></span> <span data-ttu-id="e0fa1-234">Az RBAC-szerepkörök nem kiszolgáló, az SQL Database vagy az SQL Data Warehouse propagált tooSQL.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-234">RBAC roles are not propagated tooSQL Server, SQL Database, or SQL Data Warehouse.</span></span> <span data-ttu-id="e0fa1-235">Az Azure RBAC-szerepkörök Azure-erőforrások kezelésére használt, és toodatabase engedélyek alkalmazásának kihagyása.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-235">Azure RBAC roles are used for managing Azure Resources, and do not apply toodatabase permissions.</span></span> <span data-ttu-id="e0fa1-236">Például hello **SQL Server közreműködői** szerepkör nem biztosít hozzáférést tooconnect toohello SQL Database vagy az SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-236">For example, hello **SQL Server Contributor** role does not grant access tooconnect toohello SQL Database or SQL Data Warehouse.</span></span> <span data-ttu-id="e0fa1-237">közvetlenül a Transact-SQL-utasítások segítségével hello adatbázis hello hozzáférési engedélyt kell adni.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-237">hello access permission must be granted directly in hello database using Transact-SQL statements.</span></span>
>

<span data-ttu-id="e0fa1-238">az Azure AD-alapú tartalmazott adatbázis (nem hello kiszolgálói rendszergazda felhasználók hello adatbázis birtokló), toohello adatbázis kapcsolódás az Azure AD identitással rendelkező felhasználóként toocreate legalább hello **bármely felhasználó ALTER** engedéllyel.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-238">toocreate an Azure AD-based contained database user (other than hello server administrator that owns hello database), connect toohello database with an Azure AD identity, as a user with at least hello **ALTER ANY USER** permission.</span></span> <span data-ttu-id="e0fa1-239">Kövesse a következő Transact-SQL-szintaxis hello:</span><span class="sxs-lookup"><span data-stu-id="e0fa1-239">Then use hello following Transact-SQL syntax:</span></span>

```
CREATE USER <Azure_AD_principal_name> FROM EXTERNAL PROVIDER;
```

<span data-ttu-id="e0fa1-240">*Azure_AD_principal_name* hello egyszerű felhasználónevéhez az Azure AD felhasználói vagy hello megjelenített névbe egy Azure AD-csoport lehet.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-240">*Azure_AD_principal_name* can be hello user principal name of an Azure AD user or hello display name for an Azure AD group.</span></span>

<span data-ttu-id="e0fa1-241">**Példák:** toocreate az Azure AD közti tartalmazott adatbázis-felhasználó összevont vagy kezelt tartományi felhasználói:</span><span class="sxs-lookup"><span data-stu-id="e0fa1-241">**Examples:** toocreate a contained database user representing an Azure AD federated or managed domain user:</span></span>
```
CREATE USER [bob@contoso.com] FROM EXTERNAL PROVIDER;
CREATE USER [alice@fabrikam.onmicrosoft.com] FROM EXTERNAL PROVIDER;
```

<span data-ttu-id="e0fa1-242">toocreate tartalmazott adatbázis-felhasználó az Azure AD közti vagy összevont tartományi csoport, adja meg egy biztonsági csoport hello megjelenített neve:</span><span class="sxs-lookup"><span data-stu-id="e0fa1-242">toocreate a contained database user representing an Azure AD or federated domain group, provide hello display name of a security group:</span></span>
```
CREATE USER [ICU Nurses] FROM EXTERNAL PROVIDER;
```

<span data-ttu-id="e0fa1-243">egy alkalmazás, amely összeköti az Azure AD token használatával képviselő tartalmazott adatbázis-felhasználó toocreate:</span><span class="sxs-lookup"><span data-stu-id="e0fa1-243">toocreate a contained database user representing an application that connects using an Azure AD token:</span></span>

```
CREATE USER [appName] FROM EXTERNAL PROVIDER;
```

>  [!TIP]
>  <span data-ttu-id="e0fa1-244">A felhasználó közvetlenül az Azure Active Directory eltérő hello Azure Active Directory, az Azure-előfizetéshez társított nem készíteni.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-244">You cannot directly create a user from an Azure Active Directory other than hello Azure Active Directory that is associated with your Azure subscription.</span></span> <span data-ttu-id="e0fa1-245">Azonban más aktív könyvtárakat a hello az importált felhasználók tagjai társított Active Directory (külső felhasználók úgynevezett) felveheti tooan Active Directory-csoport hello bérlői Active Directory.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-245">However, members of other Active Directories that are imported users in hello associated Active Directory (known as external users) can be added tooan Active Directory group in hello tenant Active Directory.</span></span> <span data-ttu-id="e0fa1-246">Hozzon létre egy tartalmazott adatbázis-felhasználót, hogy AD-csoport, hello hello felhasználók külső Active Directory kaphatnak a hozzáférési tooSQL adatbázis.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-246">By creating a contained database user for that AD group, hello users from hello external Active Directory can gain access tooSQL Database.</span></span>   

<span data-ttu-id="e0fa1-247">Tartalmazott létrehozásával kapcsolatos további információért adatbázis-felhasználók Azure Active Directory identitások alapján című [felhasználó létrehozása (Transact-SQL)](http://msdn.microsoft.com/library/ms173463.aspx).</span><span class="sxs-lookup"><span data-stu-id="e0fa1-247">For more information about creating contained database users based on Azure Active Directory identities, see [CREATE USER (Transact-SQL)](http://msdn.microsoft.com/library/ms173463.aspx).</span></span>

> [!NOTE]
> <span data-ttu-id="e0fa1-248">Az Azure SQL server eltávolításakor hello Azure Active Directory rendszergazdája megakadályozza, hogy az Azure AD hitelesítési munkamenetből toohello kiszolgálóhoz csatlakozó.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-248">Removing hello Azure Active Directory administrator for Azure SQL server prevents any Azure AD authentication user from connecting toohello server.</span></span> <span data-ttu-id="e0fa1-249">Ha szükséges, nem használható az Azure Active Directory-felhasználók manuálisan SQL adatbázis-rendszergazda általi törölhetők.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-249">If necessary, unusable Azure AD users can be dropped manually by a SQL Database administrator.</span></span>   

>  [!NOTE]
>  <span data-ttu-id="e0fa1-250">Ha megjelenik egy **kapcsolat időkorlátja lejárt**, szükség lehet a tooset hello `TransparentNetworkIPResolution` hello kapcsolati karakterlánc toofalse paramétere.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-250">If you receive a **Connection Timeout Expired**, you may need tooset hello `TransparentNetworkIPResolution` parameter of hello connection string toofalse.</span></span> <span data-ttu-id="e0fa1-251">További információkért lásd: [kapcsolat időtúllépési problémát .NET-keretrendszer 4.6.1 - TransparentNetworkIPResolution](https://blogs.msdn.microsoft.com/dataaccesstechnologies/2016/05/07/connection-timeout-issue-with-net-framework-4-6-1-transparentnetworkipresolution/).</span><span class="sxs-lookup"><span data-stu-id="e0fa1-251">For more information, see [Connection timeout issue with .NET Framework 4.6.1 - TransparentNetworkIPResolution](https://blogs.msdn.microsoft.com/dataaccesstechnologies/2016/05/07/connection-timeout-issue-with-net-framework-4-6-1-transparentnetworkipresolution/).</span></span>   

   
<span data-ttu-id="e0fa1-252">Amikor létrehoz egy adatbázis-felhasználó, a felhasználó kap-e a hello **CONNECT** engedély és csatlakozni tud toothat adatbázis hello tagjaként **nyilvános** szerepkör.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-252">When you create a database user, that user receives hello **CONNECT** permission and can connect toothat database as a member of hello **PUBLIC** role.</span></span> <span data-ttu-id="e0fa1-253">Csak a rendelkezésre álló toohello felhasználói bármely engedélyek toohello engedélyek kezdetben hello **nyilvános** szerepkör, vagy azokat az engedélyeket megadta tooany Windows-csoportok tagjai legyenek.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-253">Initially hello only permissions available toohello user are any permissions granted toohello **PUBLIC** role, or any permissions granted tooany Windows groups that they are a member of.</span></span> <span data-ttu-id="e0fa1-254">Miután kiépíteni az Azure AD-alapú tartalmazott adatbázis-felhasználó, hello felhasználói további engedélyek megadásához hello ugyanaz, mint adjon engedélye tooany felhasználó más típusú.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-254">Once you provision an Azure AD-based contained database user, you can grant hello user additional permissions, hello same way as you grant permission tooany other type of user.</span></span> <span data-ttu-id="e0fa1-255">Általában engedélyeket toodatabase szerepköröket, és adja hozzá a felhasználók tooroles.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-255">Typically grant permissions toodatabase roles, and add users tooroles.</span></span> <span data-ttu-id="e0fa1-256">További információkért lásd: [Database Engine engedély alapjai](http://social.technet.microsoft.com/wiki/contents/articles/4433.database-engine-permission-basics.aspx).</span><span class="sxs-lookup"><span data-stu-id="e0fa1-256">For more information, see [Database Engine Permission Basics](http://social.technet.microsoft.com/wiki/contents/articles/4433.database-engine-permission-basics.aspx).</span></span> <span data-ttu-id="e0fa1-257">További információ a speciális SQL adatbázis-szerepkörök: [kezelése adatbázisok és bejelentkezések az Azure SQL Database](sql-database-manage-logins.md).</span><span class="sxs-lookup"><span data-stu-id="e0fa1-257">For more information about special SQL Database roles, see [Managing Databases and Logins in Azure SQL Database](sql-database-manage-logins.md).</span></span>
<span data-ttu-id="e0fa1-258">A kezelés tartományába importált összevont tartományi felhasználó hello felügyelt tartomány identitása kell használnia.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-258">A federated domain user that is imported into a manage domain, must use hello managed domain identity.</span></span>

> [!NOTE]
> <span data-ttu-id="e0fa1-259">Az Azure Active Directory-felhasználók jelöli az adatbázis-metaadatok hello típusú E (EXTERNAL_USER) és a csoportok X (EXTERNAL_GROUPS) típus.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-259">Azure AD users are marked in hello database metadata with type E (EXTERNAL_USER) and for groups with type X (EXTERNAL_GROUPS).</span></span> <span data-ttu-id="e0fa1-260">További információkért lásd: [sys.database_principals](https://msdn.microsoft.com/library/ms187328.aspx).</span><span class="sxs-lookup"><span data-stu-id="e0fa1-260">For more information, see [sys.database_principals](https://msdn.microsoft.com/library/ms187328.aspx).</span></span> 
>

## <a name="connect-toohello-user-database-or-data-warehouse-by-using-ssms-or-ssdt"></a><span data-ttu-id="e0fa1-261">Csatlakozás toohello felhasználói adatbázis vagy adatraktár SSMS vagy az SSDT használatával</span><span class="sxs-lookup"><span data-stu-id="e0fa1-261">Connect toohello user database or data warehouse by using SSMS or SSDT</span></span>  
<span data-ttu-id="e0fa1-262">tooconfirm hello Azure AD rendszergazdai helyesen van beállítva, a csatlakozás toohello **fő** adatbázis hello Azure AD rendszergazdai fiók használatával.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-262">tooconfirm hello Azure AD administrator is properly set up, connect toohello **master** database using hello Azure AD administrator account.</span></span>
<span data-ttu-id="e0fa1-263">tooprovision egy Azure AD-alapú tartalmazott adatbázis (nem hello kiszolgálói rendszergazda felhasználók hello adatbázis birtokló), csatlakozás toohello adatbázis egy Azure AD identitás, amely rendelkezik hozzáférési toohello adatbázis.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-263">tooprovision an Azure AD-based contained database user (other than hello server administrator that owns hello database), connect toohello database with an Azure AD identity that has access toohello database.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="e0fa1-264">Az Azure Active Directory-hitelesítés támogatásának érhető [SQL Server 2016 Management Studio](https://msdn.microsoft.com/library/mt238290.aspx) és [SQL Server Data Tools](https://msdn.microsoft.com/library/mt204009.aspx) a Visual Studio 2015-öt.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-264">Support for Azure Active Directory authentication is available with [SQL Server 2016 Management Studio](https://msdn.microsoft.com/library/mt238290.aspx) and [SQL Server Data Tools](https://msdn.microsoft.com/library/mt204009.aspx) in Visual Studio 2015.</span></span> <span data-ttu-id="e0fa1-265">2016 augusztusától kiadás az SSMS hello is támogatja az Active Directory univerzális hitelesítést, amely lehetővé teszi a rendszergazdák toorequire multi-factor Authentication használatával telefonhívással, szöveges üzenetet, az intelligens kártyák PIN-kódot, vagy a mobilalkalmazáson keresztüli értesítések.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-265">hello August 2016 release of SSMS also includes support for Active Directory Universal Authentication, which allows administrators toorequire Multi-Factor Authentication using a phone call, text message, smart cards with pin, or mobile app notification.</span></span>
 
## <a name="using-an-azure-ad-identity-tooconnect-using-ssms-or-ssdt"></a><span data-ttu-id="e0fa1-266">Az Azure AD identity tooconnect SSMS vagy az SSDT használatával</span><span class="sxs-lookup"><span data-stu-id="e0fa1-266">Using an Azure AD identity tooconnect using SSMS or SSDT</span></span>  

<span data-ttu-id="e0fa1-267">hello a következő eljárások bemutatják, hogyan tooconnect tooa SQL-adatbázis egy SQL Server Management Studio vagy SQL Server adatbázis-eszközt használ az Azure AD-identitás.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-267">hello following procedures show you how tooconnect tooa SQL database with an Azure AD identity using SQL Server Management Studio or SQL Server Database Tools.</span></span>

### <a name="active-directory-integrated-authentication"></a><span data-ttu-id="e0fa1-268">Active Directory integrált hitelesítést</span><span class="sxs-lookup"><span data-stu-id="e0fa1-268">Active Directory integrated authentication</span></span>

<span data-ttu-id="e0fa1-269">Ezt a módszert használja, ha tooWindows összevont tartományhoz az Azure Active Directory hitelesítő adatokkal van bejelentkezve.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-269">Use this method if you are logged in tooWindows using your Azure Active Directory credentials from a federated domain.</span></span>

1. <span data-ttu-id="e0fa1-270">Indítsa el a Management Studio vagy az eszközök és hello **tooServer csatlakozás** (vagy **tooDatabase motor csatlakozás**) párbeszédpanelen a hello **hitelesítési** Jelöljeki**Active Directory - integrált**.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-270">Start Management Studio or Data Tools and in hello **Connect tooServer** (or **Connect tooDatabase Engine**) dialog box, in hello **Authentication** box, select **Active Directory - Integrated**.</span></span> <span data-ttu-id="e0fa1-271">Nem kell jelszót van szükség, vagy megadható, mert a meglévő hitelesítő adatok számára jelenik meg a hello kapcsolat.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-271">No password is needed or can be entered because your existing credentials will be presented for hello connection.</span></span>   

    ![AD integrált hitelesítés kiválasztása][11]
2. <span data-ttu-id="e0fa1-273">Hello kattintson **beállítások** gombra, és a hello **kapcsolat tulajdonságai** lap hello **toodatabase csatlakozás** mezőbe, írja be a hello nevet hello felhasználói adatbázis tooconnect kívánt a.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-273">Click hello **Options** button, and on hello **Connection Properties** page, in hello **Connect toodatabase** box, type hello name of hello user database you want tooconnect to.</span></span> <span data-ttu-id="e0fa1-274">(hello **AD tartomány neve vagy a bérlői azonosító**"beállítás csak a támogatott **univerzális MFA kapcsolattal rendelkező** beállítások, ellenkező esetben azt szürkén jelenik meg.)</span><span class="sxs-lookup"><span data-stu-id="e0fa1-274">(hello **AD domain name or tenant ID**” option is only supported for **Universal with MFA connection** options, otherwise it is greyed out.)</span></span>  

    ![Válassza ki a hello adatbázis neve][13]

## <a name="active-directory-password-authentication"></a><span data-ttu-id="e0fa1-276">Active Directory jelszavas hitelesítést</span><span class="sxs-lookup"><span data-stu-id="e0fa1-276">Active Directory password authentication</span></span>

<span data-ttu-id="e0fa1-277">Ezt a módszert használja, egy Azure AD egyszerű felhasználónév használata az Azure AD hello összekapcsolása felügyelt tartomány.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-277">Use this method when connecting with an Azure AD principal name using hello Azure AD managed domain.</span></span> <span data-ttu-id="e0fa1-278">Is használhatja az összevont fiók hozzáférési toohello tartomány, például amikor távolról használata nélkül.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-278">You can also use it for federated account without access toohello domain, for example when working remotely.</span></span>

<span data-ttu-id="e0fa1-279">Ezt a módszert használja, ha tooWindows egy nem összevont Azure-ral tartományi hitelesítő adatokkal van bejelentkezve, vagy az Azure AD használatával használata esetén az Azure AD kezdeti hello alapján, vagy hello ügyfél tartomány.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-279">Use this method if you are logged in tooWindows using credentials from a domain that is not federated with Azure, or when using Azure AD authentication using Azure AD based on hello initial or hello client domain.</span></span>

1. <span data-ttu-id="e0fa1-280">Indítsa el a Management Studio vagy az eszközök és hello **tooServer csatlakozás** (vagy **tooDatabase motor csatlakozás**) párbeszédpanelen a hello **hitelesítési** Jelöljeki**Active Directory - jelszó**.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-280">Start Management Studio or Data Tools and in hello **Connect tooServer** (or **Connect tooDatabase Engine**) dialog box, in hello **Authentication** box, select **Active Directory - Password**.</span></span>
2. <span data-ttu-id="e0fa1-281">A hello **felhasználónév** hello formátumban írja be az Azure Active Directory felhasználónév  **username@domain.com** . Ez az hello Azure Active Directory-fiók vagy hello Azure Active Directory összevonni az olyan tartományi fiók.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-281">In hello **User name** box, type your Azure Active Directory user name in hello format **username@domain.com**. This must be an account from hello Azure Active Directory or an account from a domain federate with hello Azure Active Directory.</span></span>
3. <span data-ttu-id="e0fa1-282">A hello **jelszó** mezőben adja meg a felhasználói jelszó hello Azure Active Directory-fiókkal vagy tartományi fiók összevont.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-282">In hello **Password** box, type your user password for hello Azure Active Directory account or federated domain account.</span></span>

    ![Válassza ki az AD-jelszó-hitelesítés][12]
4. <span data-ttu-id="e0fa1-284">Hello kattintson **beállítások** gombra, és a hello **kapcsolat tulajdonságai** lap hello **toodatabase csatlakozás** mezőbe, írja be a hello nevet hello felhasználói adatbázis tooconnect kívánt a.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-284">Click hello **Options** button, and on hello **Connection Properties** page, in hello **Connect toodatabase** box, type hello name of hello user database you want tooconnect to.</span></span> <span data-ttu-id="e0fa1-285">(Lásd az előző beállítás hello hello ábra.)</span><span class="sxs-lookup"><span data-stu-id="e0fa1-285">(See hello graphic in hello previous option.)</span></span>

## <a name="using-an-azure-ad-identity-tooconnect-from-a-client-application"></a><span data-ttu-id="e0fa1-286">Az Azure AD identity tooconnect a ügyfélalkalmazás használata</span><span class="sxs-lookup"><span data-stu-id="e0fa1-286">Using an Azure AD identity tooconnect from a client application</span></span>

<span data-ttu-id="e0fa1-287">hello a következő eljárások bemutatják, hogyan tooconnect tooa SQL adatbázis-e a ügyfélalkalmazás Azure AD identitással.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-287">hello following procedures show you how tooconnect tooa SQL database with an Azure AD identity from a client application.</span></span>

###  <a name="active-directory-integrated-authentication"></a><span data-ttu-id="e0fa1-288">Active Directory integrált hitelesítést</span><span class="sxs-lookup"><span data-stu-id="e0fa1-288">Active Directory integrated authentication</span></span>

<span data-ttu-id="e0fa1-289">toouse integrált Windows-hitelesítés, a tartomány Active Directory Azure Active Directoryval összevont kell lennie.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-289">toouse integrated Windows authentication, your domain’s Active Directory must be federated with Azure Active Directory.</span></span> <span data-ttu-id="e0fa1-290">Csatlakozás toohello adatbázis az ügyfélalkalmazást (vagy egy szolgáltatás) a felhasználó tartományi hitelesítő adatok a tartományhoz csatlakoztatott számítógépen kell futnia.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-290">Your client application (or a service) connecting toohello database must be running on a domain-joined machine under a user’s domain credentials.</span></span>

<span data-ttu-id="e0fa1-291">hitelesítés és az Azure AD identity tooconnect tooa adatbázis használatával integrált, tooActive Directory integrált hello hitelesítési kulcsszót hello adatbázis-kapcsolati karakterláncot kell beállítani.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-291">tooconnect tooa database using integrated authentication and an Azure AD identity, hello Authentication keyword in hello database connection string must be set tooActive Directory Integrated.</span></span> <span data-ttu-id="e0fa1-292">hello alábbi C# kódminta használ ADO .NET.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-292">hello following C# code sample uses ADO .NET.</span></span>

```
string ConnectionString =
@"Data Source=n9lxnyuzhv.database.windows.net; Authentication=Active Directory Integrated; Initial Catalog=testdb;";
SqlConnection conn = new SqlConnection(ConnectionString);
conn.Open();
```

<span data-ttu-id="e0fa1-293">kapcsolati karakterlánc kulcsszó hello ``Integrated Security=True`` tooAzure SQL-adatbázis csatlakoztatása nem támogatott.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-293">hello connection string keyword ``Integrated Security=True`` is not supported for connecting tooAzure SQL Database.</span></span> <span data-ttu-id="e0fa1-294">Ha egy ODBC-kapcsolat, először tooremove szóközt kell, állítsa be a hitelesítési too'ActiveDirectoryIntegrated ".</span><span class="sxs-lookup"><span data-stu-id="e0fa1-294">When making an ODBC connection, you will need tooremove spaces and set Authentication too'ActiveDirectoryIntegrated'.</span></span>

### <a name="active-directory-password-authentication"></a><span data-ttu-id="e0fa1-295">Active Directory jelszavas hitelesítést</span><span class="sxs-lookup"><span data-stu-id="e0fa1-295">Active Directory password authentication</span></span>

<span data-ttu-id="e0fa1-296">hitelesítés és az Azure AD identity tooconnect tooa adatbázis használatával integrált, hello hitelesítési kulcsszó tooActive könyvtárhoz tartozó jelszóval kell beállítani.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-296">tooconnect tooa database using integrated authentication and an Azure AD identity, hello Authentication keyword must be set tooActive Directory Password.</span></span> <span data-ttu-id="e0fa1-297">hello kapcsolati karakterláncnak tartalmaznia kell a felhasználói azonosító vagy UID és a jelszó/PWD kulcsszavak és az értékeket.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-297">hello connection string must contain User ID/UID and Password/PWD keywords and values.</span></span> <span data-ttu-id="e0fa1-298">hello alábbi C# kódminta használ ADO .NET.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-298">hello following C# code sample uses ADO .NET.</span></span>

```
string ConnectionString =
@"Data Source=n9lxnyuzhv.database.windows.net; Authentication=Active Directory Password; Initial Catalog=testdb;  UID=bob@contoso.onmicrosoft.com; PWD=MyPassWord!";
SqlConnection conn = new SqlConnection(ConnectionString);
conn.Open();
```

<span data-ttu-id="e0fa1-299">További tudnivalók az Azure AD hitelesítési módszerek használatával hello bemutató mintakódok elérhető [GitHub bemutató az Azure AD hitelesítési](https://github.com/Microsoft/sql-server-samples/tree/master/samples/features/security/azure-active-directory-auth).</span><span class="sxs-lookup"><span data-stu-id="e0fa1-299">Learn more about Azure AD authentication methods using hello demo code samples available at [Azure AD Authentication GitHub Demo](https://github.com/Microsoft/sql-server-samples/tree/master/samples/features/security/azure-active-directory-auth).</span></span>

## <a name="azure-ad-token"></a><span data-ttu-id="e0fa1-300">Az Azure AD-jogkivonat</span><span class="sxs-lookup"><span data-stu-id="e0fa1-300">Azure AD token</span></span>
<span data-ttu-id="e0fa1-301">Ez a hitelesítési módszer középső rétegbeli szolgáltatások tooconnect tooAzure SQL Database vagy az Azure SQL Data Warehouse lehetővé teszi a jogkivonat beszerzése az Azure Active Directory (AAD).</span><span class="sxs-lookup"><span data-stu-id="e0fa1-301">This authentication method allows middle-tier services tooconnect tooAzure SQL Database or Azure SQL Data Warehouse by obtaining a token from Azure Active Directory (AAD).</span></span> <span data-ttu-id="e0fa1-302">Ez lehetővé teszi a kifinomult forgatókönyvek például a tanúsítvány alapú hitelesítés.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-302">It enables sophisticated scenarios including certificate-based authentication.</span></span> <span data-ttu-id="e0fa1-303">Négy alapvető lépéseket toouse az Azure AD jogkivonat hitelesítési kell elvégeznie:</span><span class="sxs-lookup"><span data-stu-id="e0fa1-303">You must complete four basic steps toouse Azure AD token authentication:</span></span>

1. <span data-ttu-id="e0fa1-304">Az alkalmazás regisztrálása az Azure Active Directoryban, és hello ügyfél-azonosító lekérése a kódot.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-304">Register your application with Azure Active Directory and get hello client id for your code.</span></span> 
2. <span data-ttu-id="e0fa1-305">Hozzon létre egy adatbázis felhasználói képviselő hello alkalmazást.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-305">Create a database user representing hello application.</span></span> <span data-ttu-id="e0fa1-306">(A korábbi 6. lépés befejeződött.)</span><span class="sxs-lookup"><span data-stu-id="e0fa1-306">(Completed earlier in step 6.)</span></span>
3. <span data-ttu-id="e0fa1-307">Hozzon létre egy tanúsítványt a hello ügyfél számítógép futtatása hello alkalmazás.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-307">Create a certificate on hello client computer runs hello application.</span></span>
4. <span data-ttu-id="e0fa1-308">Hello tanúsítvány hozzáadása az alkalmazáshoz kulcsként.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-308">Add hello certificate as a key for your application.</span></span>

<span data-ttu-id="e0fa1-309">A minta kapcsolati karakterlánc:</span><span class="sxs-lookup"><span data-stu-id="e0fa1-309">Sample connection string:</span></span>

```
string ConnectionString =@"Data Source=n9lxnyuzhv.database.windows.net; Initial Catalog=testdb;"
SqlConnection conn = new SqlConnection(ConnectionString);
connection.AccessToken = "Your JWT token"
conn.Open();
```

<span data-ttu-id="e0fa1-310">További információkért lásd: [SQL Server biztonsági Blog](https://blogs.msdn.microsoft.com/sqlsecurity/2016/02/09/token-based-authentication-support-for-azure-sql-db-using-azure-ad-auth/).</span><span class="sxs-lookup"><span data-stu-id="e0fa1-310">For more information, see [SQL Server Security Blog](https://blogs.msdn.microsoft.com/sqlsecurity/2016/02/09/token-based-authentication-support-for-azure-sql-db-using-azure-ad-auth/).</span></span>

### <a name="sqlcmd"></a><span data-ttu-id="e0fa1-311">sqlcmd</span><span class="sxs-lookup"><span data-stu-id="e0fa1-311">sqlcmd</span></span>

<span data-ttu-id="e0fa1-312">hello utasításokat követve, csatlakozni az Sqlcmd használatával, amely elérhető a hello 13.1 verzióját használja [letöltőközpontból](http://go.microsoft.com/fwlink/?LinkID=825643).</span><span class="sxs-lookup"><span data-stu-id="e0fa1-312">hello following statements, connect using version 13.1 of sqlcmd, which is available from hello [Download Center](http://go.microsoft.com/fwlink/?LinkID=825643).</span></span>

```
sqlcmd -S Target_DB_or_DW.testsrv.database.windows.net  -G  
sqlcmd -S Target_DB_or_DW.testsrv.database.windows.net -U bob@contoso.com -P MyAADPassword -G -l 30
```

## <a name="next-steps"></a><span data-ttu-id="e0fa1-313">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="e0fa1-313">Next steps</span></span>
- <span data-ttu-id="e0fa1-314">Az SQL Database hozzáféréseinek és felügyeletének áttekintéséről az [SQL Database-hozzáférés és -felügyelet](sql-database-control-access.md) részben olvashat.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-314">For an overview of access and control in SQL Database, see [SQL Database access and control](sql-database-control-access.md).</span></span>
- <span data-ttu-id="e0fa1-315">Az SQL Database bejelentkezéseinek, felhasználóinak és adatbázis-szerepköreinek áttekintését a [Bejelentkezések, felhasználók és adatbázis-szerepkörök](sql-database-manage-logins.md) részben találja.</span><span class="sxs-lookup"><span data-stu-id="e0fa1-315">For an overview of logins, users, and database roles in SQL Database, see [Logins, users, and database roles](sql-database-manage-logins.md).</span></span>
- <span data-ttu-id="e0fa1-316">További információ az adatbázis résztvevőivel kapcsolatban: [Résztvevők](https://msdn.microsoft.com/library/ms181127.aspx).</span><span class="sxs-lookup"><span data-stu-id="e0fa1-316">For more information about database principals, see [Principals](https://msdn.microsoft.com/library/ms181127.aspx).</span></span>
- <span data-ttu-id="e0fa1-317">További információ az adatbázis-szerepkörökkel kapcsolatban: [Adatbázis-szerepkörök](https://msdn.microsoft.com/library/ms189121.aspx).</span><span class="sxs-lookup"><span data-stu-id="e0fa1-317">For more information about database roles, see [Database roles](https://msdn.microsoft.com/library/ms189121.aspx).</span></span>
- <span data-ttu-id="e0fa1-318">További információ az SQL Database tűzfalszabályaival kapcsolatban: [SQL Database tűzfalszabályok](sql-database-firewall-configure.md).</span><span class="sxs-lookup"><span data-stu-id="e0fa1-318">For more information about firewall rules in SQL Database, see [SQL Database firewall rules](sql-database-firewall-configure.md).</span></span>

<!--Image references-->

[1]: ./media/sql-database-aad-authentication/1aad-auth-diagram.png
[2]: ./media/sql-database-aad-authentication/2subscription-relationship.png
[3]: ./media/sql-database-aad-authentication/3admin-structure.png
[4]: ./media/sql-database-aad-authentication/4select-subscription.png
[5]: ./media/sql-database-aad-authentication/5ad-settings-portal.png
[6]: ./media/sql-database-aad-authentication/6edit-directory-select.png
[7]: ./media/sql-database-aad-authentication/7edit-directory-confirm.png
[8]: ./media/sql-database-aad-authentication/8choose-ad.png
[10]: ./media/sql-database-aad-authentication/10choose-admin.png
[11]: ./media/sql-database-aad-authentication/active-directory-integrated.png
[12]: ./media/sql-database-aad-authentication/12connect-using-pw-auth2.png
[13]: ./media/sql-database-aad-authentication/13connect-to-db2.png

