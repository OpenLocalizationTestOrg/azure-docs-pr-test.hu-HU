---
title: "Hálózat az Azure App Service-környezetek megfontolások"
description: "Ismerteti a ASE hálózati forgalom és az NSG-ket és a mértékéig udr-EK beállítása"
services: app-service
documentationcenter: na
author: ccompy
manager: stefsch
ms.assetid: 955a4d84-94ca-418d-aa79-b57a5eb8cb85
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/08/2017
ms.author: ccompy
ms.openlocfilehash: 3be0d7a202ff53f5532fd7169a50a04cfaf88832
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 08/29/2017
---
# <a name="networking-considerations-for-an-app-service-environment"></a><span data-ttu-id="06d8a-103">App Service-környezet hálózati szempontjai</span><span class="sxs-lookup"><span data-stu-id="06d8a-103">Networking considerations for an App Service environment</span></span> #

## <a name="overview"></a><span data-ttu-id="06d8a-104">Áttekintés</span><span class="sxs-lookup"><span data-stu-id="06d8a-104">Overview</span></span> ##

 <span data-ttu-id="06d8a-105">Azure [App Service Environment-környezet] [ Intro] egy alhálózatba az Azure virtuális hálózatban (VNet) az Azure App Service üzemelő példány.</span><span class="sxs-lookup"><span data-stu-id="06d8a-105">Azure [App Service Environment][Intro] is a deployment of Azure App Service into a subnet in your Azure virtual network (VNet).</span></span> <span data-ttu-id="06d8a-106">Nincsenek App Service-környezet (ASE) két központi telepítési típusokat:</span><span class="sxs-lookup"><span data-stu-id="06d8a-106">There are two deployment types for an App Service environment (ASE):</span></span>

- <span data-ttu-id="06d8a-107">**Külső ASE**: elérhetővé teszi a ASE által kezelt alkalmazások az internetről elérhető IP-címet.</span><span class="sxs-lookup"><span data-stu-id="06d8a-107">**External ASE**: Exposes the ASE-hosted apps on an internet-accessible IP address.</span></span> <span data-ttu-id="06d8a-108">További információkért lásd: [hozzon létre egy külső ASE][MakeExternalASE].</span><span class="sxs-lookup"><span data-stu-id="06d8a-108">For more information, see [Create an External ASE][MakeExternalASE].</span></span>
- <span data-ttu-id="06d8a-109">**ILB ASE**: IP-címet a virtuális hálózaton belül a ASE által üzemeltetett alkalmazások közzététele.</span><span class="sxs-lookup"><span data-stu-id="06d8a-109">**ILB ASE**: Exposes the ASE-hosted apps on an IP address inside your VNet.</span></span> <span data-ttu-id="06d8a-110">A belső végpont nem a belső terheléselosztók (ILB), ezért azt egy ILB ASE hívják.</span><span class="sxs-lookup"><span data-stu-id="06d8a-110">The internal endpoint is an internal load balancer (ILB), which is why it's called an ILB ASE.</span></span> <span data-ttu-id="06d8a-111">További információkért lásd: [létrehozása és használata egy ILB ASE][MakeILBASE].</span><span class="sxs-lookup"><span data-stu-id="06d8a-111">For more information, see [Create and use an ILB ASE][MakeILBASE].</span></span>

<span data-ttu-id="06d8a-112">Most már két verziója van App Service Environment-környezet: ASEv1 és ASEv2.</span><span class="sxs-lookup"><span data-stu-id="06d8a-112">There are now two versions of App Service Environment: ASEv1 and ASEv2.</span></span> <span data-ttu-id="06d8a-113">A ASEv1 információkért lásd: [Bevezetés az App Service Environment-környezet v1][ASEv1Intro].</span><span class="sxs-lookup"><span data-stu-id="06d8a-113">For information on ASEv1, see [Introduction to App Service Environment v1][ASEv1Intro].</span></span> <span data-ttu-id="06d8a-114">ASEv1 klasszikus vagy erőforrás-kezelő VNet is telepíthető.</span><span class="sxs-lookup"><span data-stu-id="06d8a-114">ASEv1 can be deployed in a classic or Resource Manager VNet.</span></span> <span data-ttu-id="06d8a-115">ASEv2 csak egy erőforrás-kezelő virtuális hálózaton történő telepíthetők.</span><span class="sxs-lookup"><span data-stu-id="06d8a-115">ASEv2 can only be deployed into a Resource Manager VNet.</span></span>

<span data-ttu-id="06d8a-116">Egy ASE összes hívásait az interneten keresztül a ASE hozzárendelt virtuális IP-címhez a VNet hagyja.</span><span class="sxs-lookup"><span data-stu-id="06d8a-116">All calls from an ASE that go to the internet leave the VNet through a VIP assigned for the ASE.</span></span> <span data-ttu-id="06d8a-117">A nyilvános IP-címe a VIP majd a ASE összes hívásait az interneten a forrás IP-címe.</span><span class="sxs-lookup"><span data-stu-id="06d8a-117">The public IP of this VIP is then the source IP for all calls from the ASE that go to the internet.</span></span> <span data-ttu-id="06d8a-118">Ha az alkalmazásokat a ASE hívások erőforrásokhoz a virtuális hálózat vagy VPN-en keresztül, a forrás IP-címe az az IP-cím az alhálózat, a ASE által használt egyik.</span><span class="sxs-lookup"><span data-stu-id="06d8a-118">If the apps in your ASE make calls to resources in your VNet or across a VPN, the source IP is one of the IPs in the subnet used by your ASE.</span></span> <span data-ttu-id="06d8a-119">Mivel a ASE a Vneten belül, azt is elérhető erőforrások további konfiguráció nélkül a Vneten belül.</span><span class="sxs-lookup"><span data-stu-id="06d8a-119">Because the ASE is within the VNet, it can also access resources within the VNet without any additional configuration.</span></span> <span data-ttu-id="06d8a-120">Ha a virtuális hálózat a helyszíni hálózathoz csatlakozik, a ASE alkalmazások is erőforrásokhoz való hozzáférés van.</span><span class="sxs-lookup"><span data-stu-id="06d8a-120">If the VNet is connected to your on-premises network, apps in your ASE also have access to resources there.</span></span> <span data-ttu-id="06d8a-121">Nem kell konfigurálni a ASE vagy az alkalmazás minden további.</span><span class="sxs-lookup"><span data-stu-id="06d8a-121">You don't need to configure the ASE or your app any further.</span></span>

![Külső ASE][1] 

<span data-ttu-id="06d8a-123">Ha egy külső ASE, a nyilvános VIP egyben a végpont a feloldható ASE alkalmazásai:</span><span class="sxs-lookup"><span data-stu-id="06d8a-123">If you have an External ASE, the public VIP is also the endpoint that your ASE apps resolve to for:</span></span>

* <span data-ttu-id="06d8a-124">A HTTP/S</span><span class="sxs-lookup"><span data-stu-id="06d8a-124">HTTP/S.</span></span> 
* <span data-ttu-id="06d8a-125">FTP/MP.</span><span class="sxs-lookup"><span data-stu-id="06d8a-125">FTP/S.</span></span> 
* <span data-ttu-id="06d8a-126">A webes telepítése.</span><span class="sxs-lookup"><span data-stu-id="06d8a-126">Web deployment.</span></span>
* <span data-ttu-id="06d8a-127">Távoli hibakeresés.</span><span class="sxs-lookup"><span data-stu-id="06d8a-127">Remote debugging.</span></span>

![ILB ASE][2]

<span data-ttu-id="06d8a-129">Ha egy ILB ASE, a ILB IP-címe a HTTP/S, az FTP/S, a webes telepítési és a távoli hibakeresés végpontja.</span><span class="sxs-lookup"><span data-stu-id="06d8a-129">If you have an ILB ASE, the IP address of the ILB is the endpoint for HTTP/S, FTP/S, web deployment, and remote debugging.</span></span>

<span data-ttu-id="06d8a-130">A normál alkalmazás-hozzáférési portok a következők:</span><span class="sxs-lookup"><span data-stu-id="06d8a-130">The normal app access ports are:</span></span>

| <span data-ttu-id="06d8a-131">Használat</span><span class="sxs-lookup"><span data-stu-id="06d8a-131">Use</span></span> | <span data-ttu-id="06d8a-132">A</span><span class="sxs-lookup"><span data-stu-id="06d8a-132">From</span></span> | <span data-ttu-id="06d8a-133">–</span><span class="sxs-lookup"><span data-stu-id="06d8a-133">To</span></span> |
|----------|---------|-------------|
|  <span data-ttu-id="06d8a-134">A HTTP/HTTPS</span><span class="sxs-lookup"><span data-stu-id="06d8a-134">HTTP/HTTPS</span></span>  | <span data-ttu-id="06d8a-135">Felhasználó által konfigurálható</span><span class="sxs-lookup"><span data-stu-id="06d8a-135">User configurable</span></span> |  <span data-ttu-id="06d8a-136">80, 443</span><span class="sxs-lookup"><span data-stu-id="06d8a-136">80, 443</span></span> |
|  <span data-ttu-id="06d8a-137">FTP/FTPS</span><span class="sxs-lookup"><span data-stu-id="06d8a-137">FTP/FTPS</span></span>    | <span data-ttu-id="06d8a-138">Felhasználó által konfigurálható</span><span class="sxs-lookup"><span data-stu-id="06d8a-138">User configurable</span></span> |  <span data-ttu-id="06d8a-139">21, 990, 10001-10020</span><span class="sxs-lookup"><span data-stu-id="06d8a-139">21, 990, 10001-10020</span></span> |
|  <span data-ttu-id="06d8a-140">A Visual Studio távoli hibakeresés</span><span class="sxs-lookup"><span data-stu-id="06d8a-140">Visual Studio remote debugging</span></span>  |  <span data-ttu-id="06d8a-141">Felhasználó által konfigurálható</span><span class="sxs-lookup"><span data-stu-id="06d8a-141">User configurable</span></span> |  <span data-ttu-id="06d8a-142">4016, 4018, 4020, 4022</span><span class="sxs-lookup"><span data-stu-id="06d8a-142">4016, 4018, 4020, 4022</span></span> |

<span data-ttu-id="06d8a-143">Ez érvényét veszti, ha egy külső ASE vagy egy ILB ASE.</span><span class="sxs-lookup"><span data-stu-id="06d8a-143">This is true if you're on an External ASE or on an ILB ASE.</span></span> <span data-ttu-id="06d8a-144">Ha a számítógép egy külső ASE, ezeket a portokat, a nyilvános VIP kattint.</span><span class="sxs-lookup"><span data-stu-id="06d8a-144">If you're on an External ASE, you hit those ports on the public VIP.</span></span> <span data-ttu-id="06d8a-145">Ha a számítógép egy ILB ASE, ezeket a portokat a Példánynak a kattint.</span><span class="sxs-lookup"><span data-stu-id="06d8a-145">If you're on an ILB ASE, you hit those ports on the ILB.</span></span> <span data-ttu-id="06d8a-146">Ha zárolását a 443-as porton, néhány funkció, a portálon hatással lehet.</span><span class="sxs-lookup"><span data-stu-id="06d8a-146">If you lock down port 443, there can be an effect on some features exposed in the portal.</span></span> <span data-ttu-id="06d8a-147">További információkért lásd: [Portal függőségek](#portaldep).</span><span class="sxs-lookup"><span data-stu-id="06d8a-147">For more information, see [Portal dependencies](#portaldep).</span></span>

## <a name="ase-dependencies"></a><span data-ttu-id="06d8a-148">ASE függőségek</span><span class="sxs-lookup"><span data-stu-id="06d8a-148">ASE dependencies</span></span> ##

<span data-ttu-id="06d8a-149">Egy ASE befelé függőség:</span><span class="sxs-lookup"><span data-stu-id="06d8a-149">An ASE inbound access dependency is:</span></span>

| <span data-ttu-id="06d8a-150">Használat</span><span class="sxs-lookup"><span data-stu-id="06d8a-150">Use</span></span> | <span data-ttu-id="06d8a-151">A</span><span class="sxs-lookup"><span data-stu-id="06d8a-151">From</span></span> | <span data-ttu-id="06d8a-152">–</span><span class="sxs-lookup"><span data-stu-id="06d8a-152">To</span></span> |
|-----|------|----|
| <span data-ttu-id="06d8a-153">Kezelés</span><span class="sxs-lookup"><span data-stu-id="06d8a-153">Management</span></span> | <span data-ttu-id="06d8a-154">App Service management címek</span><span class="sxs-lookup"><span data-stu-id="06d8a-154">App Service management addresses</span></span> | <span data-ttu-id="06d8a-155">ASE alhálózati: 454, 455</span><span class="sxs-lookup"><span data-stu-id="06d8a-155">ASE subnet: 454, 455</span></span> |
|  <span data-ttu-id="06d8a-156">Belső kommunikációs ASE</span><span class="sxs-lookup"><span data-stu-id="06d8a-156">ASE internal communication</span></span> | <span data-ttu-id="06d8a-157">ASE alhálózati: minden port</span><span class="sxs-lookup"><span data-stu-id="06d8a-157">ASE subnet: All ports</span></span> | <span data-ttu-id="06d8a-158">ASE alhálózati: minden port</span><span class="sxs-lookup"><span data-stu-id="06d8a-158">ASE subnet: All ports</span></span>
|  <span data-ttu-id="06d8a-159">Engedélyezi az Azure terheléselosztó bejövő</span><span class="sxs-lookup"><span data-stu-id="06d8a-159">Allow Azure load balancer inbound</span></span> | <span data-ttu-id="06d8a-160">Az Azure terheléselosztó</span><span class="sxs-lookup"><span data-stu-id="06d8a-160">Azure load balancer</span></span> | <span data-ttu-id="06d8a-161">ASE alhálózati: minden port</span><span class="sxs-lookup"><span data-stu-id="06d8a-161">ASE subnet: All ports</span></span>
|  <span data-ttu-id="06d8a-162">IP-címek hozzárendelt alkalmazás</span><span class="sxs-lookup"><span data-stu-id="06d8a-162">App assigned IP addresses</span></span> | <span data-ttu-id="06d8a-163">Címek hozzárendelt alkalmazás</span><span class="sxs-lookup"><span data-stu-id="06d8a-163">App assigned addresses</span></span> | <span data-ttu-id="06d8a-164">ASE alhálózati: minden port</span><span class="sxs-lookup"><span data-stu-id="06d8a-164">ASE subnet: All ports</span></span>

<span data-ttu-id="06d8a-165">A bejövő forgalom biztosít a parancs és a rendszer figyelése mellett ASE irányítását.</span><span class="sxs-lookup"><span data-stu-id="06d8a-165">The inbound traffic provides command and control of the ASE in addition to system monitoring.</span></span> <span data-ttu-id="06d8a-166">Az ilyen típusú adatforgalom a forrás IP-címek jelennek meg a [ASE felügyeleti címek] [ ASEManagement] dokumentum.</span><span class="sxs-lookup"><span data-stu-id="06d8a-166">The source IPs for this traffic are listed in the [ASE Management addresses][ASEManagement] document.</span></span> <span data-ttu-id="06d8a-167">A hálózati biztonsági beállításokat kell engedélyezi a hozzáférést a 454 és a 455 portokat összes IP-címekről.</span><span class="sxs-lookup"><span data-stu-id="06d8a-167">The network security configuration needs to allow access from all IPs on ports 454 and 455.</span></span>

<span data-ttu-id="06d8a-168">A belső összetevő használt sok port ASE alhálózaton belüli kommunikációhoz és azok módosíthatja.</span><span class="sxs-lookup"><span data-stu-id="06d8a-168">Within the ASE subnet there are many ports used for internal component communication and they can change.</span></span>  <span data-ttu-id="06d8a-169">Ehhez minden port ASE az alhálózaton az ASE alhálózatból elérhetőnek kell lennie.</span><span class="sxs-lookup"><span data-stu-id="06d8a-169">This requires all of the ports in the ASE subnet to be accessible from the ASE subnet.</span></span> 

<span data-ttu-id="06d8a-170">Az Azure load balancer és a ASE alhálózati közötti kommunikációhoz a minimális portok nyitva kell lennie a 454, 455 és 16001.</span><span class="sxs-lookup"><span data-stu-id="06d8a-170">For the communication between the Azure load balancer and the ASE subnet the minimum ports that need to be open are 454, 455 and 16001.</span></span> <span data-ttu-id="06d8a-171">A 16001 port használatban van a terheléselosztó és a ASE közötti megtartása életben adatforgalomhoz.</span><span class="sxs-lookup"><span data-stu-id="06d8a-171">The 16001 port is used for keep alive traffic between the load balancer and the ASE.</span></span> <span data-ttu-id="06d8a-172">Ha egy ILB ASE használ, akkor csak a 454, 455, 16001 le forgalom zárolhatja portok.</span><span class="sxs-lookup"><span data-stu-id="06d8a-172">If you are using an ILB ASE then you can lock traffic down to just the 454, 455, 16001 ports.</span></span>  <span data-ttu-id="06d8a-173">Ha egy külső ASE használ akkor kell figyelembe venni a normál alkalmazás-hozzáférési portok.</span><span class="sxs-lookup"><span data-stu-id="06d8a-173">If you are using an External ASE then you need to take into account the normal app access ports.</span></span>  <span data-ttu-id="06d8a-174">Hozzárendelt alkalmazás címek használata szüksége nyissa meg az összes porton.</span><span class="sxs-lookup"><span data-stu-id="06d8a-174">If you are using app assigned addresses you need to open it to all ports.</span></span>  <span data-ttu-id="06d8a-175">Amikor egy cím hozzá van rendelve egy adott alkalmazást, majd a terheléselosztó nem ismert az előzetesen HTTP és HTTPS-forgalmat küldeni a ASE portok fogja használni.</span><span class="sxs-lookup"><span data-stu-id="06d8a-175">When an address is assigned to a specific app, then the load balancer will use ports that are not known of in advance to send HTTP and HTTPS traffic to the ASE.</span></span>

<span data-ttu-id="06d8a-176">Alkalmazás-kezelési forgalom engedélyezése a az alkalmazások ASE az alhálózathoz hozzárendelt IP-címekről kell IP-címek használata.</span><span class="sxs-lookup"><span data-stu-id="06d8a-176">If you are using app assigned IP addresses you need to allow traffic from the IPs assigned to your apps to the ASE subnet.</span></span>

<span data-ttu-id="06d8a-177">A kimenő hozzáférés érdekében egy ASE több külső rendszer függ.</span><span class="sxs-lookup"><span data-stu-id="06d8a-177">For outbound access, an ASE depends on multiple external systems.</span></span> <span data-ttu-id="06d8a-178">E rendszer függőségek rendelkező DNS-nevek, és nem feleltethetők meg az IP-címek készletét.</span><span class="sxs-lookup"><span data-stu-id="06d8a-178">Those system dependencies are defined with DNS names and don't map to a fixed set of IP addresses.</span></span> <span data-ttu-id="06d8a-179">Ebből kifolyólag a ASE portok számos minden külső IP-címek a ASE alhálózatból kimenő hozzáférésre van szüksége.</span><span class="sxs-lookup"><span data-stu-id="06d8a-179">Thus, the ASE requires outbound access from the ASE subnet to all external IPs across a variety of ports.</span></span> <span data-ttu-id="06d8a-180">Egy ASE a következő kimenő függőségekkel rendelkezik:</span><span class="sxs-lookup"><span data-stu-id="06d8a-180">An ASE has the following outbound dependencies:</span></span>

| <span data-ttu-id="06d8a-181">Használat</span><span class="sxs-lookup"><span data-stu-id="06d8a-181">Use</span></span> | <span data-ttu-id="06d8a-182">A</span><span class="sxs-lookup"><span data-stu-id="06d8a-182">From</span></span> | <span data-ttu-id="06d8a-183">–</span><span class="sxs-lookup"><span data-stu-id="06d8a-183">To</span></span> |
|-----|------|----|
| <span data-ttu-id="06d8a-184">Azure Storage</span><span class="sxs-lookup"><span data-stu-id="06d8a-184">Azure Storage</span></span> | <span data-ttu-id="06d8a-185">ASE alhálózati</span><span class="sxs-lookup"><span data-stu-id="06d8a-185">ASE subnet</span></span> | <span data-ttu-id="06d8a-186">TABLE.Core.Windows.NET, blob.core.windows.net, queue.core.windows.net, file.core.windows.net: 80-as, a 443-as, a 445-ös (445-ös csak szükséges ASEv1.)</span><span class="sxs-lookup"><span data-stu-id="06d8a-186">table.core.windows.net, blob.core.windows.net, queue.core.windows.net, file.core.windows.net: 80, 443, 445 (445 is only needed for ASEv1.)</span></span> |
| <span data-ttu-id="06d8a-187">Azure SQL Database</span><span class="sxs-lookup"><span data-stu-id="06d8a-187">Azure SQL Database</span></span> | <span data-ttu-id="06d8a-188">ASE alhálózati</span><span class="sxs-lookup"><span data-stu-id="06d8a-188">ASE subnet</span></span> | <span data-ttu-id="06d8a-189">Database.Windows.NET: 1433-as számú 11000-11999, 14000-14999 (további információkért lásd: [SQL Database 12-es port használati](../../sql-database/sql-database-develop-direct-route-ports-adonet-v12.md).)</span><span class="sxs-lookup"><span data-stu-id="06d8a-189">database.windows.net: 1433, 11000-11999, 14000-14999 (For more information, see [SQL Database V12 port usage](../../sql-database/sql-database-develop-direct-route-ports-adonet-v12.md).)</span></span>|
| <span data-ttu-id="06d8a-190">Azure felügyelet</span><span class="sxs-lookup"><span data-stu-id="06d8a-190">Azure management</span></span> | <span data-ttu-id="06d8a-191">ASE alhálózati</span><span class="sxs-lookup"><span data-stu-id="06d8a-191">ASE subnet</span></span> | <span data-ttu-id="06d8a-192">Management.Core.Windows.NET, management.azure.com: 443</span><span class="sxs-lookup"><span data-stu-id="06d8a-192">management.core.windows.net, management.azure.com: 443</span></span> 
| <span data-ttu-id="06d8a-193">SSL-tanúsítvány ellenőrzése</span><span class="sxs-lookup"><span data-stu-id="06d8a-193">SSL certificate verification</span></span> |  <span data-ttu-id="06d8a-194">ASE alhálózati</span><span class="sxs-lookup"><span data-stu-id="06d8a-194">ASE subnet</span></span>            |  <span data-ttu-id="06d8a-195">OCSP.msocsp.com, mscrl.microsoft.com, crl.microsoft.com: 443</span><span class="sxs-lookup"><span data-stu-id="06d8a-195">ocsp.msocsp.com, mscrl.microsoft.com, crl.microsoft.com: 443</span></span>
| <span data-ttu-id="06d8a-196">Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="06d8a-196">Azure Active Directory</span></span>        | <span data-ttu-id="06d8a-197">ASE alhálózati</span><span class="sxs-lookup"><span data-stu-id="06d8a-197">ASE subnet</span></span>            |  <span data-ttu-id="06d8a-198">Internet: 443</span><span class="sxs-lookup"><span data-stu-id="06d8a-198">Internet: 443</span></span>
| <span data-ttu-id="06d8a-199">Az alkalmazásszolgáltatási management</span><span class="sxs-lookup"><span data-stu-id="06d8a-199">App Service management</span></span>        | <span data-ttu-id="06d8a-200">ASE alhálózati</span><span class="sxs-lookup"><span data-stu-id="06d8a-200">ASE subnet</span></span>            |  <span data-ttu-id="06d8a-201">Internet: 443</span><span class="sxs-lookup"><span data-stu-id="06d8a-201">Internet: 443</span></span>
| <span data-ttu-id="06d8a-202">Azure DNS</span><span class="sxs-lookup"><span data-stu-id="06d8a-202">Azure DNS</span></span>                     | <span data-ttu-id="06d8a-203">ASE alhálózati</span><span class="sxs-lookup"><span data-stu-id="06d8a-203">ASE subnet</span></span>            |  <span data-ttu-id="06d8a-204">Internet: 53</span><span class="sxs-lookup"><span data-stu-id="06d8a-204">Internet: 53</span></span>
| <span data-ttu-id="06d8a-205">Belső kommunikációs ASE</span><span class="sxs-lookup"><span data-stu-id="06d8a-205">ASE internal communication</span></span>    | <span data-ttu-id="06d8a-206">ASE alhálózati: minden port</span><span class="sxs-lookup"><span data-stu-id="06d8a-206">ASE subnet: All ports</span></span> |  <span data-ttu-id="06d8a-207">ASE alhálózati: minden port</span><span class="sxs-lookup"><span data-stu-id="06d8a-207">ASE subnet: All ports</span></span>

<span data-ttu-id="06d8a-208">Ha a ASE elveszítette a hozzáférését ezeket a függőségeket, a rendszer nem működik.</span><span class="sxs-lookup"><span data-stu-id="06d8a-208">If the ASE loses access to these dependencies, it stops working.</span></span> <span data-ttu-id="06d8a-209">Ebben az esetben elég hosszú a ASE fel van függesztve.</span><span class="sxs-lookup"><span data-stu-id="06d8a-209">When that happens long enough, the ASE is suspended.</span></span>

### <a name="customer-dns"></a><span data-ttu-id="06d8a-210">Ügyfél DNS</span><span class="sxs-lookup"><span data-stu-id="06d8a-210">Customer DNS</span></span> ###

<span data-ttu-id="06d8a-211">Ha a virtuális hálózat DNS-ügyfél által megadott kiszolgáló van konfigurálva, a bérlők munkaterheléseihez használhatja.</span><span class="sxs-lookup"><span data-stu-id="06d8a-211">If the VNet is configured with a customer-defined DNS server, the tenant workloads use it.</span></span> <span data-ttu-id="06d8a-212">A ASE továbbra is felügyelet céljából Azure DNS-sel való kommunikációhoz szükséges.</span><span class="sxs-lookup"><span data-stu-id="06d8a-212">The ASE still needs to communicate with Azure DNS for management purposes.</span></span> 

<span data-ttu-id="06d8a-213">Ha a virtuális hálózat DNS, a másik oldalon az egy VPN-ügyfél van beállítva, a DNS-kiszolgáló az alhálózatot, amely tartalmazza a ASE elérhetőnek kell lennie.</span><span class="sxs-lookup"><span data-stu-id="06d8a-213">If the VNet is configured with a customer DNS on the other side of a VPN, the DNS server must be reachable from the subnet that contains the ASE.</span></span>

<a name="portaldep"></a>

## <a name="portal-dependencies"></a><span data-ttu-id="06d8a-214">Portál függőségek</span><span class="sxs-lookup"><span data-stu-id="06d8a-214">Portal dependencies</span></span> ##

<span data-ttu-id="06d8a-215">A ASE működési függőségek kívül a portál élmény kapcsolatos néhány további elemek.</span><span class="sxs-lookup"><span data-stu-id="06d8a-215">In addition to the ASE functional dependencies, there are a few extra items related to the portal experience.</span></span> <span data-ttu-id="06d8a-216">Néhány olyan funkciója, az Azure-portálon való közvetlen hozzáférés függő _SCM hely_.</span><span class="sxs-lookup"><span data-stu-id="06d8a-216">Some of the capabilities in the Azure portal depend on direct access to _SCM site_.</span></span> <span data-ttu-id="06d8a-217">Minden az Azure App Service-alkalmazást a két URL-címek vannak.</span><span class="sxs-lookup"><span data-stu-id="06d8a-217">For every app in Azure App Service, there are two URLs.</span></span> <span data-ttu-id="06d8a-218">Az első URL-címe, az alkalmazás eléréséhez.</span><span class="sxs-lookup"><span data-stu-id="06d8a-218">The first URL is to access your app.</span></span> <span data-ttu-id="06d8a-219">A második URL-je néven is ismert SCM webhely eléréséhez a _Kudu konzol_.</span><span class="sxs-lookup"><span data-stu-id="06d8a-219">The second URL is to access the SCM site, which is also called the _Kudu console_.</span></span> <span data-ttu-id="06d8a-220">Az SCM helyet használó szolgáltatások a következők:</span><span class="sxs-lookup"><span data-stu-id="06d8a-220">Features that use the SCM site include:</span></span>

-   <span data-ttu-id="06d8a-221">Webes feladatok</span><span class="sxs-lookup"><span data-stu-id="06d8a-221">Web jobs</span></span>
-   <span data-ttu-id="06d8a-222">Functions</span><span class="sxs-lookup"><span data-stu-id="06d8a-222">Functions</span></span>
-   <span data-ttu-id="06d8a-223">Adatfolyam-napló</span><span class="sxs-lookup"><span data-stu-id="06d8a-223">Log streaming</span></span>
-   <span data-ttu-id="06d8a-224">Kudu</span><span class="sxs-lookup"><span data-stu-id="06d8a-224">Kudu</span></span>
-   <span data-ttu-id="06d8a-225">Bővítmények</span><span class="sxs-lookup"><span data-stu-id="06d8a-225">Extensions</span></span>
-   <span data-ttu-id="06d8a-226">Process Explorer</span><span class="sxs-lookup"><span data-stu-id="06d8a-226">Process Explorer</span></span>
-   <span data-ttu-id="06d8a-227">Konzol</span><span class="sxs-lookup"><span data-stu-id="06d8a-227">Console</span></span>

<span data-ttu-id="06d8a-228">Egy ILB ASE használatakor az SCM-hely nem található a virtuális hálózaton kívülről hozzáférhető internet.</span><span class="sxs-lookup"><span data-stu-id="06d8a-228">When you use an ILB ASE, the SCM site isn't internet accessible from outside the VNet.</span></span> <span data-ttu-id="06d8a-229">Ha az alkalmazás egy ILB ASE üzemelteti, bizonyos funkciók nem működnek a portálról.</span><span class="sxs-lookup"><span data-stu-id="06d8a-229">When your app is hosted on an ILB ASE, some capabilities will not work from the portal.</span></span>  

<span data-ttu-id="06d8a-230">Ezekre a képességekre, amelyek az SCM hely számos érhető el közvetlenül a Kudu konzolon.</span><span class="sxs-lookup"><span data-stu-id="06d8a-230">Many of those capabilities that depend upon the SCM site are also available directly in the Kudu console.</span></span> <span data-ttu-id="06d8a-231">A portál használata helyett közvetlenül is elérheti.</span><span class="sxs-lookup"><span data-stu-id="06d8a-231">You can connect to it directly rather than by using the portal.</span></span> <span data-ttu-id="06d8a-232">Ha az app Service-Példánynak környezetben, a közzétételi hitelesítő adatok használatával jelentkezzen be.</span><span class="sxs-lookup"><span data-stu-id="06d8a-232">If your app is hosted in an ILB ASE, use your publishing credentials to sign in.</span></span> <span data-ttu-id="06d8a-233">Egy alkalmazás-Példánynak környezetben üzemeltetett SCM webhely eléréséhez az URL-cím formátuma a következő:</span><span class="sxs-lookup"><span data-stu-id="06d8a-233">The URL to access the SCM site of an app hosted in an ILB ASE has the following format:</span></span> 

```
<appname>.scm.<domain name the ILB ASE was created with> 
```

<span data-ttu-id="06d8a-234">A tartománynév esetén a ILB ASE *contoso.net* és az alkalmazás neve *testapp*, az alkalmazás elérése *testapp.contoso.net*.</span><span class="sxs-lookup"><span data-stu-id="06d8a-234">If your ILB ASE is the domain name *contoso.net* and your app name is *testapp*, the app is reached at *testapp.contoso.net*.</span></span> <span data-ttu-id="06d8a-235">Az SCM-helyet, amely vele együtt áthelyeződik éri el a *testapp.scm.contoso.net*.</span><span class="sxs-lookup"><span data-stu-id="06d8a-235">The SCM site that goes with it is reached at *testapp.scm.contoso.net*.</span></span>

### <a name="functions-and-web-jobs"></a><span data-ttu-id="06d8a-236">Függvények és a webes feladatok</span><span class="sxs-lookup"><span data-stu-id="06d8a-236">Functions and Web jobs</span></span> ###

<span data-ttu-id="06d8a-237">Függvények és a webes feladatok az SCM hely függ, de akkor is, ha az alkalmazások-Példánynak környezetben, feltéve, hogy a böngésző el lehet-e érni az SCM hely a portál használata támogatott.</span><span class="sxs-lookup"><span data-stu-id="06d8a-237">Both Functions and Web jobs depend on the SCM site but are supported for use in the portal, even if your apps are in an ILB ASE, so long as your browser can reach the SCM site.</span></span>  <span data-ttu-id="06d8a-238">Ha önaláírt tanúsítványt használ a ILB mértékéig, szüksége lesz ahhoz, hogy a böngészőt, hogy a tanúsítvány megbízható.</span><span class="sxs-lookup"><span data-stu-id="06d8a-238">If you are using a self-signed certificate with your ILB ASE, you will need to enable your browser to trust that certificate.</span></span>  <span data-ttu-id="06d8a-239">Az Internet Explorer és a peremhálózati, amely azt jelenti, hogy a tanúsítvány-nak kell lennie a számítógép megbízható tárolja.</span><span class="sxs-lookup"><span data-stu-id="06d8a-239">For IE and Edge that means the certificate has to be in the computer trust store.</span></span>  <span data-ttu-id="06d8a-240">Ha Chrome használja majd, amely azt jelenti, hogy elfogadott a böngészőben a tanúsítvány korábban által a vélhetően elérés közvetlenül az scm-hely.</span><span class="sxs-lookup"><span data-stu-id="06d8a-240">If you are using Chrome then that means you accepted the certificate in the browser earlier by presumably hitting the scm site directly.</span></span>  <span data-ttu-id="06d8a-241">A legjobb megoldás, hogy a böngésző lánc megbízhatósági egy kereskedelmi tanúsítványt használja.</span><span class="sxs-lookup"><span data-stu-id="06d8a-241">The best solution is to use a commercial certificate that is in the browser chain of trust.</span></span>  

## <a name="ase-ip-addresses"></a><span data-ttu-id="06d8a-242">ASE IP-címek</span><span class="sxs-lookup"><span data-stu-id="06d8a-242">ASE IP addresses</span></span> ##

<span data-ttu-id="06d8a-243">Egy ASE ismernie néhány IP-címmel rendelkezik.</span><span class="sxs-lookup"><span data-stu-id="06d8a-243">An ASE has a few IP addresses to be aware of.</span></span> <span data-ttu-id="06d8a-244">Ezek a következők:</span><span class="sxs-lookup"><span data-stu-id="06d8a-244">They are:</span></span>

- <span data-ttu-id="06d8a-245">**Nyilvános bejövő IP-cím**: app Service-külső környezetben, és felügyeleti forgalom egy külső ASE és egy ILB ASE is használatos.</span><span class="sxs-lookup"><span data-stu-id="06d8a-245">**Public inbound IP address**: Used for app traffic in an External ASE, and management traffic in both an External ASE and an ILB ASE.</span></span>
- <span data-ttu-id="06d8a-246">**Kimenő nyilvános IP-cím**: az "feladó" IP-cím kimenő kapcsolatok a ASE a, amely hagyja, a virtuális hálózat, amely VPN le nem útválasztásos használt.</span><span class="sxs-lookup"><span data-stu-id="06d8a-246">**Outbound public IP**: Used as the "from" IP for outbound connections from the ASE that leave the VNet, which aren't routed down a VPN.</span></span>
- <span data-ttu-id="06d8a-247">**ILB IP-cím**: Ha egy ILB ASE használja.</span><span class="sxs-lookup"><span data-stu-id="06d8a-247">**ILB IP address**: If you use an ILB ASE.</span></span>
- <span data-ttu-id="06d8a-248">**Alkalmazás által hozzárendelt IP-alapú SSL-címek**: csak akkor lehetséges, egy külső mértékéig és IP-alapú SSL be van állítva.</span><span class="sxs-lookup"><span data-stu-id="06d8a-248">**App-assigned IP-based SSL addresses**: Only possible with an External ASE and when IP-based SSL is configured.</span></span>

<span data-ttu-id="06d8a-249">A következő IP-címek láthatók egyszerűen egy ASEv2 az Azure-portálon a ASE felhasználói felületen.</span><span class="sxs-lookup"><span data-stu-id="06d8a-249">All these IP addresses are easily visible in an ASEv2 in the Azure portal from the ASE UI.</span></span> <span data-ttu-id="06d8a-250">Ha egy ILB ASE, az IP-Címek használhatók a ILB szerepel.</span><span class="sxs-lookup"><span data-stu-id="06d8a-250">If you have an ILB ASE, the IP for the ILB is listed.</span></span>

![IP-címek][3]

### <a name="app-assigned-ip-addresses"></a><span data-ttu-id="06d8a-252">Alkalmazás által hozzárendelt IP-címek</span><span class="sxs-lookup"><span data-stu-id="06d8a-252">App-assigned IP addresses</span></span> ###

<span data-ttu-id="06d8a-253">Egy külső mértékéig IP-címek rendelhet az egyes alkalmazásokhoz.</span><span class="sxs-lookup"><span data-stu-id="06d8a-253">With an External ASE, you can assign IP addresses to individual apps.</span></span> <span data-ttu-id="06d8a-254">Nem hajthatja végre, amely egy ILB mértékéig.</span><span class="sxs-lookup"><span data-stu-id="06d8a-254">You can't do that with an ILB ASE.</span></span> <span data-ttu-id="06d8a-255">Az alkalmazásnak a saját IP-cím konfigurálásával kapcsolatos további információkért lásd: [egy meglévő egyéni SSL-tanúsítvány kötését az Azure-webalkalmazásokban](../../app-service-web/app-service-web-tutorial-custom-ssl.md).</span><span class="sxs-lookup"><span data-stu-id="06d8a-255">For more information on how to configure your app to have its own IP address, see [Bind an existing custom SSL certificate to Azure web apps](../../app-service-web/app-service-web-tutorial-custom-ssl.md).</span></span>

<span data-ttu-id="06d8a-256">Ha egy alkalmazás a saját IP-alapú SSL-címmel rendelkezik, a ASE fenntartja két portok leképezése az IP-címet.</span><span class="sxs-lookup"><span data-stu-id="06d8a-256">When an app has its own IP-based SSL address, the ASE reserves two ports to map to that IP address.</span></span> <span data-ttu-id="06d8a-257">Egy port a HTTP-forgalom, és az egyéb portot a HTTPS-hez.</span><span class="sxs-lookup"><span data-stu-id="06d8a-257">One port is for HTTP traffic, and the other port is for HTTPS.</span></span> <span data-ttu-id="06d8a-258">Ezeket a portokat a ASE felhasználói felületén, az IP-címek szakaszban találhatók.</span><span class="sxs-lookup"><span data-stu-id="06d8a-258">Those ports are listed in the ASE UI in the IP addresses section.</span></span> <span data-ttu-id="06d8a-259">Forgalom kell elérni ezeket a portokat a a VIP vagy azok nem érhetők el.</span><span class="sxs-lookup"><span data-stu-id="06d8a-259">Traffic must be able to reach those ports from the VIP or the apps are inaccessible.</span></span> <span data-ttu-id="06d8a-260">Ez a követelmény fontos, hogy ne feledje, hogy a hálózati biztonsági csoportokkal (NSG-k) konfigurálásakor.</span><span class="sxs-lookup"><span data-stu-id="06d8a-260">This requirement is important to remember when you configure Network Security Groups (NSGs).</span></span>

## <a name="network-security-groups"></a><span data-ttu-id="06d8a-261">Network Security Groups (Hálózati biztonsági csoportok)</span><span class="sxs-lookup"><span data-stu-id="06d8a-261">Network Security Groups</span></span> ##

<span data-ttu-id="06d8a-262">[Hálózati biztonsági csoportok] [ NSGs] lehetővé teszik a hálózati hozzáférést egy Vneten belül.</span><span class="sxs-lookup"><span data-stu-id="06d8a-262">[Network Security Groups][NSGs] provide the ability to control network access within a VNet.</span></span> <span data-ttu-id="06d8a-263">A portál használata esetén nincs egy implicit Megtagadás szabály minden visszautasítja a legalacsonyabb prioritással.</span><span class="sxs-lookup"><span data-stu-id="06d8a-263">When you use the portal, there's an implicit deny rule at the lowest priority to deny everything.</span></span> <span data-ttu-id="06d8a-264">Állít össze vannak a szabályokat.</span><span class="sxs-lookup"><span data-stu-id="06d8a-264">What you build are your allow rules.</span></span>

<span data-ttu-id="06d8a-265">-Környezetben nincs a virtuális gépek üzemeltetni a ASE magát a hozzáférést.</span><span class="sxs-lookup"><span data-stu-id="06d8a-265">In an ASE, you don't have access to the VMs used to host the ASE itself.</span></span> <span data-ttu-id="06d8a-266">Is a Microsoft által kezelt előfizetést.</span><span class="sxs-lookup"><span data-stu-id="06d8a-266">They're in a Microsoft-managed subscription.</span></span> <span data-ttu-id="06d8a-267">Ha azt szeretné, az alkalmazások a ASE való hozzáférésének korlátozásához, állítsa be az NSG-k ASE az alhálózaton.</span><span class="sxs-lookup"><span data-stu-id="06d8a-267">If you want to restrict access to the apps on the ASE, set NSGs on the ASE subnet.</span></span> <span data-ttu-id="06d8a-268">Ennek során a ASE függőségek alapos figyelmet fordítania.</span><span class="sxs-lookup"><span data-stu-id="06d8a-268">In doing so, pay careful attention to the ASE dependencies.</span></span> <span data-ttu-id="06d8a-269">Ha letiltja az összes függőséget, az ASE működése leáll.</span><span class="sxs-lookup"><span data-stu-id="06d8a-269">If you block any dependencies, the ASE stops working.</span></span>

<span data-ttu-id="06d8a-270">Az NSG-k az Azure portálon keresztül vagy a PowerShell segítségével konfigurálható.</span><span class="sxs-lookup"><span data-stu-id="06d8a-270">NSGs can be configured through the Azure portal or via PowerShell.</span></span> <span data-ttu-id="06d8a-271">Itt tartalmazza az Azure-portálon.</span><span class="sxs-lookup"><span data-stu-id="06d8a-271">The information here shows the Azure portal.</span></span> <span data-ttu-id="06d8a-272">Létrehozásához és kezeléséhez az NSG-ket a portálon, a legfelső szintű erőforrásként **hálózati**.</span><span class="sxs-lookup"><span data-stu-id="06d8a-272">You create and manage NSGs in the portal as a top-level resource under **Networking**.</span></span>

<span data-ttu-id="06d8a-273">A bejövő és kimenő követelmények figyelembe kell venni, amikor az NSG-ket az NSG-ket ebben a példában látható módon hasonlóan kell kinéznie.</span><span class="sxs-lookup"><span data-stu-id="06d8a-273">When the inbound and outbound requirements are taken into account, the NSGs should look similar to the NSGs shown in this example.</span></span> <span data-ttu-id="06d8a-274">A virtuális hálózat címtartomány _192.168.250.0/16_, és az alhálózatot, amely a ASE _192.168.251.128/25_.</span><span class="sxs-lookup"><span data-stu-id="06d8a-274">The VNet address range is _192.168.250.0/16_, and the subnet that the ASE is in is _192.168.251.128/25_.</span></span>

<span data-ttu-id="06d8a-275">A függvény ASE első két bejövő követelményei ebben a példában a lista tetején látható.</span><span class="sxs-lookup"><span data-stu-id="06d8a-275">The first two inbound requirements for the ASE to function are shown at the top of the list in this example.</span></span> <span data-ttu-id="06d8a-276">Ezek ASE és felügyeletét teszi lehetővé maga kommunikálni ASE engedélyezése.</span><span class="sxs-lookup"><span data-stu-id="06d8a-276">They enable ASE management and allow the ASE to communicate with itself.</span></span> <span data-ttu-id="06d8a-277">A többi bejegyzés összes bérlői konfigurálható és képesek felügyelni a hálózati hozzáférést a ASE állomásokon tárolt alkalmazásokhoz.</span><span class="sxs-lookup"><span data-stu-id="06d8a-277">The other entries are all tenant configurable and can govern network access to the ASE-hosted applications.</span></span> 

![Bejövő biztonsági szabályok][4]

<span data-ttu-id="06d8a-279">Alapértelmezett szabály lehetővé teszi, hogy az IP-címek a ASE alhálózati felvegye a Vneten belül.</span><span class="sxs-lookup"><span data-stu-id="06d8a-279">A default rule enables the IPs in the VNet to talk to the ASE subnet.</span></span> <span data-ttu-id="06d8a-280">Egy másik alapértelmezett szabály lehetővé teszi, hogy a terheléselosztó, más néven a nyilvános VIP, a mértékéig kommunikációhoz.</span><span class="sxs-lookup"><span data-stu-id="06d8a-280">Another default rule enables the load balancer, also known as the public VIP, to communicate with the ASE.</span></span> <span data-ttu-id="06d8a-281">Az alapértelmezett szabályok megtekintéséhez válasszon **alapértelmezett szabályok** mellett a **Hozzáadás** ikonra.</span><span class="sxs-lookup"><span data-stu-id="06d8a-281">To see the default rules, select **Default rules** next to the **Add** icon.</span></span> <span data-ttu-id="06d8a-282">Ha a Megtagadás, minden más szabály, miután az NSG-szabályok látható, hogy akadályozza meg a forgalmat a VIP és a ASE között.</span><span class="sxs-lookup"><span data-stu-id="06d8a-282">If you put a deny everything else rule after the NSG rules shown, you prevent traffic between the VIP and the ASE.</span></span> <span data-ttu-id="06d8a-283">A virtuális hálózaton belül érkező forgalom elkerülése érdekében adja hozzá a saját szabály, amely engedélyezi a bejövő.</span><span class="sxs-lookup"><span data-stu-id="06d8a-283">To prevent traffic coming from inside the VNet, add your own rule to allow inbound.</span></span> <span data-ttu-id="06d8a-284">A forrás AzureLoadBalancer egyenlőnek használata a cél **bármely** és egy porttartomány  **\*** .</span><span class="sxs-lookup"><span data-stu-id="06d8a-284">Use a source equal to AzureLoadBalancer with a destination of **Any** and a port range of **\***.</span></span> <span data-ttu-id="06d8a-285">Az NSG-szabály ASE van alkalmazva, mert nem kell a cél adott lehet.</span><span class="sxs-lookup"><span data-stu-id="06d8a-285">Because the NSG rule is applied to the ASE subnet, you don't need to be specific in the destination.</span></span>

<span data-ttu-id="06d8a-286">Ha az alkalmazáshoz rendelt IP-címet, győződjön meg arról, hogy a portok nyitva tartása.</span><span class="sxs-lookup"><span data-stu-id="06d8a-286">If you assigned an IP address to your app, make sure you keep the ports open.</span></span> <span data-ttu-id="06d8a-287">A portok megtekintéséhez válasszon **App Service Environment-környezet** > **IP-címek**.</span><span class="sxs-lookup"><span data-stu-id="06d8a-287">To see the ports, select **App Service Environment** > **IP addresses**.</span></span>  

<span data-ttu-id="06d8a-288">A következő kimenő szabályok látható elemeinek van szükség, az utolsó elem kivételével.</span><span class="sxs-lookup"><span data-stu-id="06d8a-288">All the items shown in the following outbound rules are needed, except for the last item.</span></span> <span data-ttu-id="06d8a-289">Az ebben a cikkben észleltek ASE függőségek való hálózati hozzáférés lehetővé teszik.</span><span class="sxs-lookup"><span data-stu-id="06d8a-289">They enable network access to the ASE dependencies that were noted earlier in this article.</span></span> <span data-ttu-id="06d8a-290">Ha letiltja az e valamelyiket, a ASE működése leáll.</span><span class="sxs-lookup"><span data-stu-id="06d8a-290">If you block any of them, your ASE stops working.</span></span> <span data-ttu-id="06d8a-291">A lista utolsó elemének lehetővé teszi, hogy a ASE kommunikálni a Vneten található más erőforrásokat.</span><span class="sxs-lookup"><span data-stu-id="06d8a-291">The last item in the list enables your ASE to communicate with other resources in your VNet.</span></span>

![Kimenő biztonsági szabályok][5]

<span data-ttu-id="06d8a-293">Az NSG-k meghatározása után rendelje hozzá őket az alhálózatot, amely a ASE a.</span><span class="sxs-lookup"><span data-stu-id="06d8a-293">After your NSGs are defined, assign them to the subnet that your ASE is on.</span></span> <span data-ttu-id="06d8a-294">Ha nem emlékszik a ASE virtuális hálózat vagy az alhálózat, megtekintheti a ASE felügyeleti portálról.</span><span class="sxs-lookup"><span data-stu-id="06d8a-294">If you don’t remember the ASE VNet or subnet, you can see it from the ASE management portal.</span></span> <span data-ttu-id="06d8a-295">Az NSG-t rendel az alhálózat, nyissa meg a felhasználói felület alhálózathoz, és válassza ki az NSG-t.</span><span class="sxs-lookup"><span data-stu-id="06d8a-295">To assign the NSG to your subnet, go to the subnet UI and select the NSG.</span></span>

## <a name="routes"></a><span data-ttu-id="06d8a-296">Útvonalak</span><span class="sxs-lookup"><span data-stu-id="06d8a-296">Routes</span></span> ##

<span data-ttu-id="06d8a-297">Útvonalak váltak problémássá leggyakrabban a virtuális hálózat az Azure ExpressRoute konfigurálásakor.</span><span class="sxs-lookup"><span data-stu-id="06d8a-297">Routes become problematic most commonly when you configure your VNet with Azure ExpressRoute.</span></span> <span data-ttu-id="06d8a-298">Az útvonalak a Vneten belül három típusa van:</span><span class="sxs-lookup"><span data-stu-id="06d8a-298">There are three types of routes in a VNet:</span></span>

-   <span data-ttu-id="06d8a-299">Rendszerútvonalak</span><span class="sxs-lookup"><span data-stu-id="06d8a-299">System routes</span></span>
-   <span data-ttu-id="06d8a-300">BGP-útvonalak</span><span class="sxs-lookup"><span data-stu-id="06d8a-300">BGP routes</span></span>
-   <span data-ttu-id="06d8a-301">Felhasználó által definiált útvonalak (udr-EK)</span><span class="sxs-lookup"><span data-stu-id="06d8a-301">User-defined routes (UDRs)</span></span>

<span data-ttu-id="06d8a-302">BGP-útvonalakat a rendszer útvonalak bírálja felül.</span><span class="sxs-lookup"><span data-stu-id="06d8a-302">BGP routes override system routes.</span></span> <span data-ttu-id="06d8a-303">Udr-EK bírálja felül a BGP-útvonalakat.</span><span class="sxs-lookup"><span data-stu-id="06d8a-303">UDRs override BGP routes.</span></span> <span data-ttu-id="06d8a-304">Az Azure virtuális hálózataihoz útvonalakkal kapcsolatban további információkért lásd: [felhasználó által definiált útvonalak áttekintése][UDRs].</span><span class="sxs-lookup"><span data-stu-id="06d8a-304">For more information about routes in Azure virtual networks, see [User-defined routes overview][UDRs].</span></span>

<span data-ttu-id="06d8a-305">Az Azure SQL-adatbázis, amely a ASE használja a rendszer egy tűzfal van.</span><span class="sxs-lookup"><span data-stu-id="06d8a-305">The Azure SQL database that the ASE uses to manage the system has a firewall.</span></span> <span data-ttu-id="06d8a-306">Kommunikáció a ASE nyilvános VIP oly módon, hogy ez igényli.</span><span class="sxs-lookup"><span data-stu-id="06d8a-306">It requires communication to originate from the ASE public VIP.</span></span> <span data-ttu-id="06d8a-307">Az SQL adatbázishoz a ASE kapcsolódásának elutasításra kerülne, ha elküldi őket egy másik IP-cím és az ExpressRoute-kapcsolatot.</span><span class="sxs-lookup"><span data-stu-id="06d8a-307">Connections to the SQL database from the ASE will be denied if they are sent down the ExpressRoute connection and out another IP address.</span></span>

<span data-ttu-id="06d8a-308">Ha a bejövő felügyeleti kérelmekre adott válaszokat le az ExpressRoute, a válaszcímet eltér az eredeti célra.</span><span class="sxs-lookup"><span data-stu-id="06d8a-308">If replies to incoming management requests are sent down the ExpressRoute, the reply address is different than the original destination.</span></span> <span data-ttu-id="06d8a-309">Ez az eltérés megsérti a TCP-kommunikációt.</span><span class="sxs-lookup"><span data-stu-id="06d8a-309">This mismatch breaks the TCP communication.</span></span>

<span data-ttu-id="06d8a-310">A ASE működjön, miközben a virtuális hálózat egy ExpressRoute van konfigurálva a legegyszerűbb is van:</span><span class="sxs-lookup"><span data-stu-id="06d8a-310">For your ASE to work while your VNet is configured with an ExpressRoute, the easiest thing to do is:</span></span>

-   <span data-ttu-id="06d8a-311">Konfigurálja az ExpressRoute hivatkozik _0.0.0.0/0_.</span><span class="sxs-lookup"><span data-stu-id="06d8a-311">Configure ExpressRoute to advertise _0.0.0.0/0_.</span></span> <span data-ttu-id="06d8a-312">Alapértelmezés szerint azt kényszerített bújtatás minden kimenő forgalom a helyszínen.</span><span class="sxs-lookup"><span data-stu-id="06d8a-312">By default, it force tunnels all outbound traffic on-premises.</span></span>
-   <span data-ttu-id="06d8a-313">Hozzon létre egy UDR.</span><span class="sxs-lookup"><span data-stu-id="06d8a-313">Create a UDR.</span></span> <span data-ttu-id="06d8a-314">Alkalmazza azt az alhálózatot, amely tartalmazza a egy címelőtagot ASE _0.0.0.0/0_ és következőugrás-típusú _Internet_.</span><span class="sxs-lookup"><span data-stu-id="06d8a-314">Apply it to the subnet that contains the ASE with an address prefix of _0.0.0.0/0_ and a next hop type of _Internet_.</span></span>

<span data-ttu-id="06d8a-315">Ha a módosítások két, a ASE alhálózatról érkező forgalmat az internet felé nem működik az ExpressRoute- és a ASE le kényszerített.</span><span class="sxs-lookup"><span data-stu-id="06d8a-315">If you make these two changes, internet-destined traffic that originates from the ASE subnet isn't forced down the ExpressRoute and the ASE works.</span></span> 

> [!IMPORTANT]
> <span data-ttu-id="06d8a-316">Lehet, hogy egy UDR definiált útvonalak kellően specifikus elsőbbséget élveznek a bármely az ExpressRoute-konfiguráció által hirdetett útvonalakat.</span><span class="sxs-lookup"><span data-stu-id="06d8a-316">The routes defined in a UDR must be specific enough to take precedence over any routes advertised by the ExpressRoute configuration.</span></span> <span data-ttu-id="06d8a-317">Az előző példában a széles körű 0.0.0.0/0 címtartomány.</span><span class="sxs-lookup"><span data-stu-id="06d8a-317">The preceding example uses the broad 0.0.0.0/0 address range.</span></span> <span data-ttu-id="06d8a-318">Az esetlegesen véletlenül felülbírálhatja pontosabb címtartományai használó útvonal-hirdetéseinek.</span><span class="sxs-lookup"><span data-stu-id="06d8a-318">It can potentially be accidentally overridden by route advertisements that use more specific address ranges.</span></span>
>
> <span data-ttu-id="06d8a-319">ASEs cross-hirdetményt a magánfelhő-társviszony létesítése – elérési utat a nyilvános társviszony elérési útvonalak ExpressRoute beállításokkal nem támogatottak.</span><span class="sxs-lookup"><span data-stu-id="06d8a-319">ASEs aren't supported with ExpressRoute configurations that cross-advertise routes from the public-peering path to the private-peering path.</span></span> <span data-ttu-id="06d8a-320">A nyilvános társviszony konfigurált ExpressRoute-konfigurációk útvonal-hirdetéseinek kapni a Microsofttól.</span><span class="sxs-lookup"><span data-stu-id="06d8a-320">ExpressRoute configurations with public peering configured receive route advertisements from Microsoft.</span></span> <span data-ttu-id="06d8a-321">A hirdetmények a Microsoft Azure IP-címtartományok nagy foglal magában.</span><span class="sxs-lookup"><span data-stu-id="06d8a-321">The advertisements contain a large set of Microsoft Azure IP address ranges.</span></span> <span data-ttu-id="06d8a-322">Ha a címtartomány határokon meghirdetett privát társviszony elérési útján, minden kimenő hálózati csomagokat a ASE alhálózatból egy ügyfél a helyi hálózati infrastruktúra bújtatott hatályba.</span><span class="sxs-lookup"><span data-stu-id="06d8a-322">If the address ranges are cross-advertised on the private-peering path, all outbound network packets from the ASE's subnet are force tunneled to a customer's on-premises network infrastructure.</span></span> <span data-ttu-id="06d8a-323">A hálózati folyamat jelenleg nem támogatott a ASEs.</span><span class="sxs-lookup"><span data-stu-id="06d8a-323">This network flow is currently not supported with ASEs.</span></span> <span data-ttu-id="06d8a-324">Egy megoldást a problémára, hogy állítsa le a kereszt-közzététel útvonalak nyilvános társviszony elérési útjáról a magánfelhő-társviszony létesítése – elérési utat.</span><span class="sxs-lookup"><span data-stu-id="06d8a-324">One solution to this problem is to stop cross-advertising routes from the public-peering path to the private-peering path.</span></span>

<span data-ttu-id="06d8a-325">Hozzon létre egy UDR, kövesse az alábbi lépéseket:</span><span class="sxs-lookup"><span data-stu-id="06d8a-325">To create a UDR, follow these steps:</span></span>

1. <span data-ttu-id="06d8a-326">Ugrás az Azure-portálon.</span><span class="sxs-lookup"><span data-stu-id="06d8a-326">Go to the Azure portal.</span></span> <span data-ttu-id="06d8a-327">Válassza ki **hálózati** > **útvonaltáblát**.</span><span class="sxs-lookup"><span data-stu-id="06d8a-327">Select **Networking** > **Route Tables**.</span></span>

2. <span data-ttu-id="06d8a-328">Hozzon létre egy új útvonaltábla és a virtuális hálózat ugyanabban a régióban.</span><span class="sxs-lookup"><span data-stu-id="06d8a-328">Create a new route table in the same region as your VNet.</span></span>

3. <span data-ttu-id="06d8a-329">Az útvonaltábla felhasználói felületén belül jelölje ki **útvonalak** > **Hozzáadás**.</span><span class="sxs-lookup"><span data-stu-id="06d8a-329">From within your route table UI, select **Routes** > **Add**.</span></span>

4. <span data-ttu-id="06d8a-330">Állítsa be a **a következő ugrás típusa** való **Internet** és a **címelőtag** való **0.0.0.0/0**.</span><span class="sxs-lookup"><span data-stu-id="06d8a-330">Set the **Next hop type** to **Internet** and the **Address prefix** to **0.0.0.0/0**.</span></span> <span data-ttu-id="06d8a-331">Kattintson a **Mentés** gombra.</span><span class="sxs-lookup"><span data-stu-id="06d8a-331">Select **Save**.</span></span>

    <span data-ttu-id="06d8a-332">Ekkor megjelenik egy, a következőhöz hasonló:</span><span class="sxs-lookup"><span data-stu-id="06d8a-332">You then see something like the following:</span></span>

    ![Funkcionális útvonalak][6]

5. <span data-ttu-id="06d8a-334">Új útvonaltábla létrehozása után nyissa meg az alhálózatot, amely tartalmazza a ASE.</span><span class="sxs-lookup"><span data-stu-id="06d8a-334">After you create the new route table, go to the subnet that contains your ASE.</span></span> <span data-ttu-id="06d8a-335">Válassza ki az útválasztási táblázatot a portálon a listából.</span><span class="sxs-lookup"><span data-stu-id="06d8a-335">Select your route table from the list in the portal.</span></span> <span data-ttu-id="06d8a-336">A módosítás mentése után majd megtekintheti az NSG-ket és ezekkel az alhálózati útvonalakat.</span><span class="sxs-lookup"><span data-stu-id="06d8a-336">After you save the change, you should then see the NSGs and routes noted with your subnet.</span></span>

    ![Az NSG-k és útvonalak][7]

### <a name="deploy-into-existing-azure-virtual-networks-that-are-integrated-with-expressroute"></a><span data-ttu-id="06d8a-338">Üzembe helyezés meglévő Azure virtuális hálózataihoz ExpressRoute integrált</span><span class="sxs-lookup"><span data-stu-id="06d8a-338">Deploy into existing Azure virtual networks that are integrated with ExpressRoute</span></span> ###

<span data-ttu-id="06d8a-339">A ASE egy Vnetet, amely integrálva van a ExpressRoute történő központi telepítéséhez adja meg az alhálózatot, ha azt szeretné, hogy a telepített ASE előre.</span><span class="sxs-lookup"><span data-stu-id="06d8a-339">To deploy your ASE into a VNet that's integrated with ExpressRoute, preconfigure the subnet where you want the ASE deployed.</span></span> <span data-ttu-id="06d8a-340">A Resource Manager-sablon segítségével telepítheti azt.</span><span class="sxs-lookup"><span data-stu-id="06d8a-340">Then use a Resource Manager template to deploy it.</span></span> <span data-ttu-id="06d8a-341">Hozzon létre egy ASE a Vneten belül, amely már rendelkezik konfigurált ExpressRoute:</span><span class="sxs-lookup"><span data-stu-id="06d8a-341">To create an ASE in a VNet that already has ExpressRoute configured:</span></span>

- <span data-ttu-id="06d8a-342">Hozzon létre egy alhálózatot a ASE üzemeltetéséhez.</span><span class="sxs-lookup"><span data-stu-id="06d8a-342">Create a subnet to host the ASE.</span></span>

    > [!NOTE]
    > <span data-ttu-id="06d8a-343">Nincs más lehet az alhálózat, de a ASE.</span><span class="sxs-lookup"><span data-stu-id="06d8a-343">Nothing else can be in the subnet but the ASE.</span></span> <span data-ttu-id="06d8a-344">Ne válasszon, amely lehetővé teszi a jövőbeli növekedésre címteret.</span><span class="sxs-lookup"><span data-stu-id="06d8a-344">Be sure to choose an address space that allows for future growth.</span></span> <span data-ttu-id="06d8a-345">Később Ez a beállítás nem módosítható.</span><span class="sxs-lookup"><span data-stu-id="06d8a-345">You can't change this setting later.</span></span> <span data-ttu-id="06d8a-346">Azt javasoljuk, hogy a méretet `/25` 128-címekkel.</span><span class="sxs-lookup"><span data-stu-id="06d8a-346">We recommend a size of `/25` with 128 addresses.</span></span>

- <span data-ttu-id="06d8a-347">Hozzon létre udr-EK (például az útvonaltáblák), a fentebb leírt módon, és állítsa be, amely az alhálózaton.</span><span class="sxs-lookup"><span data-stu-id="06d8a-347">Create UDRs (for example, route tables) as described earlier, and set that on the subnet.</span></span>
- <span data-ttu-id="06d8a-348">A ASE létrehozása a Resource Manager sablonnal [egy ASE létrehozása egy Resource Manager-sablon használatával][MakeASEfromTemplate].</span><span class="sxs-lookup"><span data-stu-id="06d8a-348">Create the ASE by using a Resource Manager template as described in [Create an ASE by using a Resource Manager template][MakeASEfromTemplate].</span></span>

<!--Image references-->
[1]: ./media/network_considerations_with_an_app_service_environment/networkase-overflow.png
[2]: ./media/network_considerations_with_an_app_service_environment/networkase-overflow2.png
[3]: ./media/network_considerations_with_an_app_service_environment/networkase-ipaddresses.png
[4]: ./media/network_considerations_with_an_app_service_environment/networkase-inboundnsg.png
[5]: ./media/network_considerations_with_an_app_service_environment/networkase-outboundnsg.png
[6]: ./media/network_considerations_with_an_app_service_environment/networkase-udr.png
[7]: ./media/network_considerations_with_an_app_service_environment/networkase-subnet.png

<!--Links-->
[Intro]: ./intro.md
[MakeExternalASE]: ./create-external-ase.md
[MakeASEfromTemplate]: ./create-from-template.md
[MakeILBASE]: ./create-ilb-ase.md
[ASENetwork]: ./network-info.md
[ASEReadme]: ./readme.md
[UsingASE]: ./using-an-ase.md
[UDRs]: ../../virtual-network/virtual-networks-udr-overview.md
[NSGs]: ../../virtual-network/virtual-networks-nsg.md
[ConfigureASEv1]: ../../app-service-web/app-service-web-configure-an-app-service-environment.md
[ASEv1Intro]: ../../app-service-web/app-service-app-service-environment-intro.md
[webapps]: ../../app-service-web/app-service-web-overview.md
[mobileapps]: ../../app-service-mobile/app-service-mobile-value-prop.md
[APIapps]: ../../app-service-api/app-service-api-apps-why-best-platform.md
[Functions]: ../../azure-functions/index.yml
[Pricing]: http://azure.microsoft.com/pricing/details/app-service/
[ARMOverview]: ../../azure-resource-manager/resource-group-overview.md
[ConfigureSSL]: ../../app-service-web/web-sites-purchase-ssl-web-site.md
[Kudu]: http://azure.microsoft.com/resources/videos/super-secret-kudu-debug-console-for-azure-web-sites/
[AppDeploy]: ../../app-service-web/web-sites-deploy.md
[ASEWAF]: ../../app-service-web/app-service-app-service-environment-web-application-firewall.md
[AppGW]: ../../application-gateway/application-gateway-web-application-firewall-overview.md
[ASEManagement]: ./management-addresses.md
