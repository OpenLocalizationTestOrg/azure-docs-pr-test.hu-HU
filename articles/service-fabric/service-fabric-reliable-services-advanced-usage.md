---
title: "a Reliable Services aaaAdvanced használati |} Microsoft Docs"
description: "Ismerje meg a szolgáltatások a hozzáadott rugalmasságot biztosít a Service Fabric Reliable Services speciális használatát."
services: Service-Fabric
documentationcenter: .net
author: vturecek
manager: timlt
editor: masnider
ms.assetid: f2942871-863d-47c3-b14a-7cdad9a742c7
ms.service: Service-Fabric
ms.devlang: multiple
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 06/29/2017
ms.author: vturecek
ms.openlocfilehash: e6d6310a4deae9edcfcd76551e1337f0e39e9e5d
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/06/2017
---
# <a name="advanced-usage-of-hello-reliable-services-programming-model"></a><span data-ttu-id="0b9e5-103">Speciális hello Reliable Services programozási modell használata</span><span class="sxs-lookup"><span data-stu-id="0b9e5-103">Advanced usage of hello Reliable Services programming model</span></span>
<span data-ttu-id="0b9e5-104">Azure Service Fabric leegyszerűsíti az írást, és megbízható állapotmentes és állapotalapú szolgáltatások kezelésére.</span><span class="sxs-lookup"><span data-stu-id="0b9e5-104">Azure Service Fabric simplifies writing and managing reliable stateless and stateful services.</span></span> <span data-ttu-id="0b9e5-105">Ez az útmutató bemutat Reliable Services toogain speciális tartalmazza több irányítást és rugalmasságot keresztül a szolgáltatásokhoz.</span><span class="sxs-lookup"><span data-stu-id="0b9e5-105">This guide talks about advanced usages of Reliable Services toogain more control and flexibility over your services.</span></span> <span data-ttu-id="0b9e5-106">Előzetes tooreading ez guide feltérképezése [hello Reliable Services programozási modell](service-fabric-reliable-services-introduction.md).</span><span class="sxs-lookup"><span data-stu-id="0b9e5-106">Prior tooreading this guide, familiarize yourself with [hello Reliable Services programming model](service-fabric-reliable-services-introduction.md).</span></span>

<span data-ttu-id="0b9e5-107">Állapot-nyilvántartó és a állapotmentes szolgáltatások felhasználói kód a két elsődleges belépési pontok rendelkezik:</span><span class="sxs-lookup"><span data-stu-id="0b9e5-107">Both stateful and stateless services have two primary entry points for user code:</span></span>

* <span data-ttu-id="0b9e5-108">`RunAsync(C#) / runAsync(Java)`egy általános célú belépési ponthoz, a szolgáltatás kódban van.</span><span class="sxs-lookup"><span data-stu-id="0b9e5-108">`RunAsync(C#) / runAsync(Java)` is a general-purpose entry point for your service code.</span></span>
* <span data-ttu-id="0b9e5-109">`CreateServiceReplicaListeners(C#)`és `CreateServiceInstanceListeners(C#) / createServiceInstanceListeners(Java)` van a kommunikációs figyelőket az ügyféli kérelmek részére.</span><span class="sxs-lookup"><span data-stu-id="0b9e5-109">`CreateServiceReplicaListeners(C#)` and `CreateServiceInstanceListeners(C#) / createServiceInstanceListeners(Java)` is for opening communication listeners for client requests.</span></span>

<span data-ttu-id="0b9e5-110">A legtöbb szolgáltatásokra ezek két belépési pontok elegendőek.</span><span class="sxs-lookup"><span data-stu-id="0b9e5-110">For most services, these two entry points are sufficient.</span></span> <span data-ttu-id="0b9e5-111">Ritka esetekben a szolgáltatási életciklus teljesebb körű vezérlése szükség, ha további életciklus események állnak rendelkezésre.</span><span class="sxs-lookup"><span data-stu-id="0b9e5-111">In rare cases when more control over a service's lifecycle is required, additional lifecycle events are available.</span></span>

## <a name="stateless-service-instance-lifecycle"></a><span data-ttu-id="0b9e5-112">Állapotmentes szolgáltatások példány életciklusa</span><span class="sxs-lookup"><span data-stu-id="0b9e5-112">Stateless service instance lifecycle</span></span>
<span data-ttu-id="0b9e5-113">Egy állapotmentes szolgáltatások élettartama nagyon egyszerű.</span><span class="sxs-lookup"><span data-stu-id="0b9e5-113">A stateless service's lifecycle is very simple.</span></span> <span data-ttu-id="0b9e5-114">Egy állapotmentes szolgáltatások csak megnyitható, zárva, vagy megszakadt.</span><span class="sxs-lookup"><span data-stu-id="0b9e5-114">A stateless service can only be opened, closed, or aborted.</span></span> <span data-ttu-id="0b9e5-115">`RunAsync`az állapotmentes szolgáltatások végrehajtása egy szolgáltatáspéldány megnyitásakor, és vonja vissza, ha egy szolgáltatáspéldány van zárva, vagy megszakadt.</span><span class="sxs-lookup"><span data-stu-id="0b9e5-115">`RunAsync` in a stateless service is executed when a service instance is opened, and canceled when a service instance is closed or aborted.</span></span>

<span data-ttu-id="0b9e5-116">Bár a `RunAsync` elegendőnek kell lennie a szinte minden esetben hello nyitva, zárja be, és a megszakítási események állapotmentes szolgáltatások is elérhetők:</span><span class="sxs-lookup"><span data-stu-id="0b9e5-116">Although `RunAsync` should be sufficient in almost all cases, hello open, close, and abort events in a stateless service are also available:</span></span>

* <span data-ttu-id="0b9e5-117">`Task OnOpenAsync(IStatelessServicePartition, CancellationToken) - C# / CompletableFuture<String> onOpenAsync(CancellationToken) - Java`OnOpenAsync van meghívva, amikor az állapotmentes szolgáltatások példány hello használt toobe kapcsolatos.</span><span class="sxs-lookup"><span data-stu-id="0b9e5-117">`Task OnOpenAsync(IStatelessServicePartition, CancellationToken) - C# / CompletableFuture<String> onOpenAsync(CancellationToken) - Java` OnOpenAsync is called when hello stateless service instance is about toobe used.</span></span> <span data-ttu-id="0b9e5-118">Kiterjesztett szolgáltatás inicializálási feladatokat jelenleg indítható.</span><span class="sxs-lookup"><span data-stu-id="0b9e5-118">Extended service initialization tasks can be started at this time.</span></span>
* <span data-ttu-id="0b9e5-119">`Task OnCloseAsync(CancellationToken) - C# / CompletableFuture onCloseAsync(CancellationToken) - Java`OnCloseAsync van meghívva, amikor az állapot nélküli szolgáltatáspéldány hello érintetlen toobe szabályosan leállítást.</span><span class="sxs-lookup"><span data-stu-id="0b9e5-119">`Task OnCloseAsync(CancellationToken) - C# / CompletableFuture onCloseAsync(CancellationToken) - Java` OnCloseAsync is called when hello stateless service instance is going toobe gracefully shut down.</span></span> <span data-ttu-id="0b9e5-120">Ez akkor fordulhat elő, amikor hello szolgáltatást kód frissítés alatt áll, hello szolgáltatáspéldány áthelyezik tooload terheléselosztás miatt, vagy egy átmeneti hiba észlelhető.</span><span class="sxs-lookup"><span data-stu-id="0b9e5-120">This can occur when hello service's code is being upgraded, hello service instance is being moved due tooload balancing, or a transient fault is detected.</span></span> <span data-ttu-id="0b9e5-121">OnCloseAsync kell használt toosafely zárjon be minden olyan erőforrásnál, állítsa le a háttérben történő feldolgozás, külső állapotmentést befejeződését, vagy le a meglévő kapcsolatok.</span><span class="sxs-lookup"><span data-stu-id="0b9e5-121">OnCloseAsync can be used toosafely close any resources, stop any background processing, finish saving external state, or close down existing connections.</span></span>
* <span data-ttu-id="0b9e5-122">`void OnAbort() - C# / void onAbort() - Java`Megszakításkor van meghívva, amikor az állapot nélküli szolgáltatáspéldány hello leállítása folyamatban van kényszerítve.</span><span class="sxs-lookup"><span data-stu-id="0b9e5-122">`void OnAbort() - C# / void onAbort() - Java` OnAbort is called when hello stateless service instance is being forcefully shut down.</span></span> <span data-ttu-id="0b9e5-123">Ezt általában nevezik, ha egy állandó hibát észlelt a hello csomópont, vagy ha a Service Fabric megbízhatóan az hello szolgáltatás példány életciklus toointernal hibák miatt nem tudja kezelni.</span><span class="sxs-lookup"><span data-stu-id="0b9e5-123">This is generally called when a permanent fault is detected on hello node, or when Service Fabric cannot reliably manage hello service instance's lifecycle due toointernal failures.</span></span>

## <a name="stateful-service-replica-lifecycle"></a><span data-ttu-id="0b9e5-124">Az állapotalapú szolgáltatás replika életciklusa</span><span class="sxs-lookup"><span data-stu-id="0b9e5-124">Stateful service replica lifecycle</span></span>

> [!NOTE]
> <span data-ttu-id="0b9e5-125">Állapot-nyilvántartó megbízható szolgáltatások nem támogatottak a Java még.</span><span class="sxs-lookup"><span data-stu-id="0b9e5-125">Stateful reliable services are not supported in Java yet.</span></span>
>
>

<span data-ttu-id="0b9e5-126">Az állapotalapú szolgáltatás replika élettartama sokkal bonyolultabb, mint egy állapot nélküli szolgáltatáspéldány.</span><span class="sxs-lookup"><span data-stu-id="0b9e5-126">A stateful service replica's lifecycle is much more complex than a stateless service instance.</span></span> <span data-ttu-id="0b9e5-127">Továbbá tooopen, zárja be, és megszakítja az események, állapotalapú szolgáltatási replika teljes élettartama alatt megy keresztül szerepkör módosításokat.</span><span class="sxs-lookup"><span data-stu-id="0b9e5-127">In addition tooopen, close, and abort events, a stateful service replica undergoes role changes during its lifetime.</span></span> <span data-ttu-id="0b9e5-128">Szerepkör állapotalapú szolgáltatási replika megváltozásakor hello `OnChangeRoleAsync` esemény akkor váltódik ki:</span><span class="sxs-lookup"><span data-stu-id="0b9e5-128">When a stateful service replica changes role, hello `OnChangeRoleAsync` event is triggered:</span></span>

* <span data-ttu-id="0b9e5-129">`Task OnChangeRoleAsync(ReplicaRole, CancellationToken)`OnChangeRoleAsync módosításakor hello állapotalapú szolgáltatási replika van szerepkör, például a tooprimary vagy a másodlagost nevezik.</span><span class="sxs-lookup"><span data-stu-id="0b9e5-129">`Task OnChangeRoleAsync(ReplicaRole, CancellationToken)` OnChangeRoleAsync is called when hello stateful service replica is changing role, for example tooprimary or secondary.</span></span> <span data-ttu-id="0b9e5-130">Elsődleges replikára változott adta írási állapota (engedélyezettek toocreate és tooReliable gyűjtemények írása).</span><span class="sxs-lookup"><span data-stu-id="0b9e5-130">Primary replicas are given write status (are allowed toocreate and write tooReliable Collections).</span></span> <span data-ttu-id="0b9e5-131">Másodlagos replikák adta olvasási állapota (csak Olvasás meglévő megbízható gyűjtemények).</span><span class="sxs-lookup"><span data-stu-id="0b9e5-131">Secondary replicas are given read status (can only read from existing Reliable Collections).</span></span> <span data-ttu-id="0b9e5-132">A legtöbb munkaelem egy állapotalapú szolgáltatás hello elsődleges replika kellett végezni.</span><span class="sxs-lookup"><span data-stu-id="0b9e5-132">Most work in a stateful service is performed at hello primary replica.</span></span> <span data-ttu-id="0b9e5-133">Másodlagos replikák írásvédett érvényesítési, jelentéskészítésre, adatbányászat vagy más írásvédett feladatokat hajthat végre.</span><span class="sxs-lookup"><span data-stu-id="0b9e5-133">Secondary replicas can perform read-only validation, report generation, data mining, or other read-only jobs.</span></span>

<span data-ttu-id="0b9e5-134">Az állapotalapú service-ben csak hello elsődleges replika toostate írási hozzáféréssel rendelkezik, és így az általában akkor, ha hello szolgáltatás működik-e valódi munkát.</span><span class="sxs-lookup"><span data-stu-id="0b9e5-134">In a stateful service, only hello primary replica has write access toostate and thus is generally when hello service is performing actual work.</span></span> <span data-ttu-id="0b9e5-135">Hello `RunAsync` az állapotalapú service metódus végrehajtása csak akkor, amikor a hello állapotalapú szolgáltatási replika nem elsődleges.</span><span class="sxs-lookup"><span data-stu-id="0b9e5-135">hello `RunAsync` method in a stateful service is executed only when hello stateful service replica is primary.</span></span> <span data-ttu-id="0b9e5-136">Hello `RunAsync` metódus megszűnik, ha egy elsődleges replika szerepkör módosítások elsődleges befejeződött, és a hello zárja be és események megszakítása.</span><span class="sxs-lookup"><span data-stu-id="0b9e5-136">hello `RunAsync` method is canceled when a primary replica's role changes away from primary, as well as during hello close and abort events.</span></span>

<span data-ttu-id="0b9e5-137">Hello segítségével `OnChangeRoleAsync` esemény lehetővé teszi a tooperform munkáját attól függően, hogy a replika szerepkör is válasz toorole módosítása.</span><span class="sxs-lookup"><span data-stu-id="0b9e5-137">Using hello `OnChangeRoleAsync` event allows you tooperform work depending on replica role as well as in response toorole change.</span></span>

<span data-ttu-id="0b9e5-138">Állapotalapú szolgáltatás is biztosít a hello azonos négy életciklus-események állapotmentes szolgáltatásként hello azonos szemantikáját, és a használati esetekben:</span><span class="sxs-lookup"><span data-stu-id="0b9e5-138">A stateful service also provides hello same four lifecycle events as a stateless service, with hello same semantics and use cases:</span></span>

```csharp
* Task OnOpenAsync(IStatefulServicePartition, CancellationToken)
* Task OnCloseAsync(CancellationToken)
* void OnAbort()
```

## <a name="next-steps"></a><span data-ttu-id="0b9e5-139">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="0b9e5-139">Next steps</span></span>
<span data-ttu-id="0b9e5-140">Speciális témakörök kapcsolódó tooService háló tekintse meg a következő cikkek hello:</span><span class="sxs-lookup"><span data-stu-id="0b9e5-140">For more advanced topics related tooService Fabric, see hello following articles:</span></span>

* [<span data-ttu-id="0b9e5-141">Állapotalapú Reliable Services konfigurálása</span><span class="sxs-lookup"><span data-stu-id="0b9e5-141">Configuring stateful Reliable Services</span></span>](service-fabric-reliable-services-configuration.md)
* [<span data-ttu-id="0b9e5-142">A Service Fabric állapotának bemutatása</span><span class="sxs-lookup"><span data-stu-id="0b9e5-142">Service Fabric health introduction</span></span>](service-fabric-health-introduction.md)
* [<span data-ttu-id="0b9e5-143">Rendszerállapot-jelentések használata a hibaelhárításhoz</span><span class="sxs-lookup"><span data-stu-id="0b9e5-143">Using system health reports for troubleshooting</span></span>](service-fabric-understand-and-troubleshoot-with-system-health-reports.md)
* [<span data-ttu-id="0b9e5-144">A Service Fabric fürt erőforrás-kezelő hello szolgáltatások konfigurálása</span><span class="sxs-lookup"><span data-stu-id="0b9e5-144">Configuring Services with hello Service Fabric Cluster Resource Manager</span></span>](service-fabric-cluster-resource-manager-configure-services.md)
