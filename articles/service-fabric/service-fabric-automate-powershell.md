---
title: "Automatizált Azure Service Fabric-alkalmazás felügyelete |} Microsoft Docs"
description: "Központi telepítése, frissítése, tesztelése és PowerShell használatával távolítsa el a Service Fabric-alkalmazások."
services: service-fabric
documentationcenter: .net
author: rwike77
manager: timlt
editor: 
ms.assetid: f03f4294-571d-4262-8a77-cc8b481b959d
ms.service: service-fabric
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: dotnet
ms.topic: article
ms.date: 06/16/2017
ms.author: ryanwi
redirect_url: /azure/service-fabric/service-fabric-deploy-remove-applications
ms.openlocfilehash: fb3c2a77ea887289eebf343e223c190781d0e4c2
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 07/11/2017
---
# <a name="automate-the-application-lifecycle-using-powershell"></a><span data-ttu-id="8e4e5-103">Az alkalmazás-életciklus PowerShell használatával automatizálhatja</span><span class="sxs-lookup"><span data-stu-id="8e4e5-103">Automate the application lifecycle using PowerShell</span></span>
<span data-ttu-id="8e4e5-104">Sok aspektusainak a [Service Fabric-alkalmazás életciklusa](service-fabric-application-lifecycle.md) automatizálható.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-104">Many aspects of the [Service Fabric application lifecycle](service-fabric-application-lifecycle.md) can be automated.</span></span>  <span data-ttu-id="8e4e5-105">Ez a cikk bemutatja, hogyan használhatja a PowerShell telepítése, frissítése, eltávolítása és tesztelés az Azure Service Fabric-alkalmazások esetében gyakori feladatok automatizálására.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-105">This article shows how to use PowerShell to automate common tasks for deploying, upgrading, removing, and testing Azure Service Fabric applications.</span></span>  <span data-ttu-id="8e4e5-106">Felügyelt, és az Alkalmazáskezelés HTTP API-k is elérhetők.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-106">Managed and HTTP APIs for app management are also available.</span></span> <span data-ttu-id="8e4e5-107">Lásd: [alkalmazás-életciklus](service-fabric-application-lifecycle.md) további információt.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-107">See [app lifecycle](service-fabric-application-lifecycle.md) for more information.</span></span>  

## <a name="prerequisites"></a><span data-ttu-id="8e4e5-108">Előfeltételek</span><span class="sxs-lookup"><span data-stu-id="8e4e5-108">Prerequisites</span></span>
<span data-ttu-id="8e4e5-109">Mielőtt továbblép a feladatokat a cikkben, ügyeljen arra, hogy:</span><span class="sxs-lookup"><span data-stu-id="8e4e5-109">Before you move on to the tasks in the article, be sure to:</span></span>

* <span data-ttu-id="8e4e5-110">Ismerkedjen meg a Service Fabric ismertetett fogalmakat [technikai áttekintése a Service Fabric](service-fabric-technical-overview.md).</span><span class="sxs-lookup"><span data-stu-id="8e4e5-110">Get familiar with the Service Fabric concepts described in [Technical overview of Service Fabric](service-fabric-technical-overview.md).</span></span>
* <span data-ttu-id="8e4e5-111">[A futtatókörnyezet, az SDK és az eszközök telepítése](service-fabric-get-started.md), amely is telepíti a **ServiceFabric** PowerShell-modult.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-111">[Install the runtime, SDK, and tools](service-fabric-get-started.md), which also installs the **ServiceFabric** PowerShell module.</span></span>
* <span data-ttu-id="8e4e5-112">[PowerShell-parancsfájl végrehajtásának engedélyezése](service-fabric-get-started.md#enable-powershell-script-execution).</span><span class="sxs-lookup"><span data-stu-id="8e4e5-112">[Enable PowerShell script execution](service-fabric-get-started.md#enable-powershell-script-execution).</span></span>
* <span data-ttu-id="8e4e5-113">A helyi fürt elindításához.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-113">Start a local cluster.</span></span>  <span data-ttu-id="8e4e5-114">Indítsa el a rendszergazdaként egy új PowerShell-ablakot, és futtassa a fürtbeállítási parancsfájlt az SDK mappából:`& "$ENV:ProgramFiles\Microsoft SDKs\Service Fabric\ClusterSetup\DevClusterSetup.ps1"`</span><span class="sxs-lookup"><span data-stu-id="8e4e5-114">Launch a new PowerShell window as an administrator and then run the cluster setup script from the SDK folder: `& "$ENV:ProgramFiles\Microsoft SDKs\Service Fabric\ClusterSetup\DevClusterSetup.ps1"`</span></span>
* <span data-ttu-id="8e4e5-115">Ebben a cikkben a PowerShell-parancsok futtatása, előtt először csatlakozik a helyi Service Fabric-fürt [Connect-ServiceFabricCluster](/powershell/module/servicefabric/connect-servicefabriccluster?view=azureservicefabricps):`Connect-ServiceFabricCluster localhost:19000`</span><span class="sxs-lookup"><span data-stu-id="8e4e5-115">Before you run any PowerShell commands in this article, first connect to the local Service Fabric cluster by using [Connect-ServiceFabricCluster](/powershell/module/servicefabric/connect-servicefabriccluster?view=azureservicefabricps): `Connect-ServiceFabricCluster localhost:19000`</span></span>
* <span data-ttu-id="8e4e5-116">A következő feladatokat a V1-es alkalmazáscsomag telepítéséhez és a v2 alkalmazáscsomagok van szükségük a frissítést.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-116">The following tasks require a v1 application package to deploy and a v2 application package for upgrade.</span></span> <span data-ttu-id="8e4e5-117">Töltse le a [ **WordCount** mintaalkalmazás](http://aka.ms/servicefabricsamples) (az első lépések minták található).</span><span class="sxs-lookup"><span data-stu-id="8e4e5-117">Download the [**WordCount** sample application](http://aka.ms/servicefabricsamples) (located in the Getting Started samples).</span></span> <span data-ttu-id="8e4e5-118">Hozza létre, és a Visual Studio alkalmazás becsomagolása (kattintson a jobb gombbal a **WordCount** megoldáskezelő, és válasszon **csomag**).</span><span class="sxs-lookup"><span data-stu-id="8e4e5-118">Build and package the application in Visual Studio (right-click on **WordCount** in Solution Explorer and select **Package**).</span></span> <span data-ttu-id="8e4e5-119">Másolja a v1 csomagot a `C:\ServiceFabricSamples\Services\WordCount\WordCount\pkg\Debug` való `C:\Temp\WordCount`.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-119">Copy the v1 package in `C:\ServiceFabricSamples\Services\WordCount\WordCount\pkg\Debug` to `C:\Temp\WordCount`.</span></span> <span data-ttu-id="8e4e5-120">Másolás `C:\Temp\WordCount` való `C:\Temp\WordCountV2`, a frissítés a v2 alkalmazáscsomagot létrehozása.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-120">Copy `C:\Temp\WordCount` to `C:\Temp\WordCountV2`, creating the v2 application package for upgrade.</span></span> <span data-ttu-id="8e4e5-121">Nyissa meg `C:\Temp\WordCountV2\ApplicationManifest.xml` egy szövegszerkesztőben.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-121">Open `C:\Temp\WordCountV2\ApplicationManifest.xml` in a text editor.</span></span> <span data-ttu-id="8e4e5-122">Az a **applicationmanifest jegyzékben** elem, módosítsa a **ApplicationTypeVersion** attribútumot "1.0.0" a "2.0.0" gombra az alkalmazás verziószám frissítéséhez.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-122">In the **ApplicationManifest** element, change the **ApplicationTypeVersion** attribute from "1.0.0" to "2.0.0" to update the app version number.</span></span> <span data-ttu-id="8e4e5-123">Mentse a módosított ApplicationManifest.xml fájlt.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-123">Save the changed ApplicationManifest.xml file.</span></span>

## <a name="task-deploy-a-service-fabric-application"></a><span data-ttu-id="8e4e5-124">Feladat: A Service Fabric-alkalmazás központi telepítése</span><span class="sxs-lookup"><span data-stu-id="8e4e5-124">Task: Deploy a Service Fabric application</span></span>
<span data-ttu-id="8e4e5-125">Miután már beépített és az alkalmazás csomagolt (vagy letöltött alkalmazáscsomag), telepítheti az alkalmazást egy helyi Service Fabric-fürt.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-125">After you've built and packaged the application (or downloaded the application package), you can deploy the application into a local Service Fabric cluster.</span></span> <span data-ttu-id="8e4e5-126">Központi telepítés magában foglalja az alkalmazáscsomag feltöltését, az alkalmazástípus regisztrálása és az alkalmazás példányának létrehozásakor.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-126">Deployment involves uploading the application package, registering the application type, and creating the application instance.</span></span> <span data-ttu-id="8e4e5-127">Kövesse az utasításokat ebben a szakaszban egy fürt egy új alkalmazást telepíti.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-127">Use the instructions in this section to deploy a new application to a cluster.</span></span>

### <a name="step-1-upload-the-application-package"></a><span data-ttu-id="8e4e5-128">1. lépés: Az alkalmazáscsomag feltöltése</span><span class="sxs-lookup"><span data-stu-id="8e4e5-128">Step 1: Upload the application package</span></span>
<span data-ttu-id="8e4e5-129">Az alkalmazáscsomag feltöltését az image store helyezi helyen elérhető belső Service Fabric-összetevők.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-129">Uploading the application package to the image store puts it in a location accessible to internal Service Fabric components.</span></span>  <span data-ttu-id="8e4e5-130">Az alkalmazáscsomag tartalmazza a szükséges alkalmazás jegyzékfájlja, a szolgáltatás jegyzékfájlban és a kódot, konfiguráció és adatok csomag(ok) az alkalmazás és szolgáltatás példányainak létrehozásához.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-130">The application package contains the necessary application manifest, service manifests, and code, configuration, and data package(s) to create the application and service instances.</span></span> <span data-ttu-id="8e4e5-131">Ha szeretné ellenőrizni a csomag helyi, használja a [teszt-ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/test-servicefabricapplicationpackage) parancsmag.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-131">If you want to verify the app package locally, use the [Test-ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/test-servicefabricapplicationpackage) cmdlet.</span></span>  <span data-ttu-id="8e4e5-132">A [másolási-ServiceFabricApplicationPackage](/powershell/module/servicefabric/copy-servicefabricapplicationpackage?view=azureservicefabricps) parancs feltölti a csomagot.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-132">The [Copy-ServiceFabricApplicationPackage](/powershell/module/servicefabric/copy-servicefabricapplicationpackage?view=azureservicefabricps) command uploads the package.</span></span> <span data-ttu-id="8e4e5-133">Példa:</span><span class="sxs-lookup"><span data-stu-id="8e4e5-133">For example:</span></span>

```powershell
Copy-ServiceFabricApplicationPackage C:\Temp\WordCount\ -ImageStoreConnectionString file:C:\SfDevCluster\Data\ImageStoreShare -ApplicationPackagePathInImageStore WordCount
```

### <a name="step-2-register-the-application-type"></a><span data-ttu-id="8e4e5-134">2. lépés: Az alkalmazástípus regisztrálása</span><span class="sxs-lookup"><span data-stu-id="8e4e5-134">Step 2: Register the application type</span></span>
<span data-ttu-id="8e4e5-135">Az alkalmazáscsomag regisztrációja lehetővé teszi az alkalmazás típusától és verziójától érhető el az alkalmazás jegyzékében használható deklarált.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-135">Registering the application package makes the application type and version declared in the application manifest available for use.</span></span> <span data-ttu-id="8e4e5-136">A rendszer olvasás a csomag feltöltése az 1. lépésben a csomag ellenőrzése (futó egyenértékű [teszt-ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/test-servicefabricapplicationpackage) helyileg), feldolgozza a csomag tartalmát, és másolja a feldolgozott csomagot egy belső rendszer hely.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-136">The system reads the package uploaded in the step 1, verify the package (equivalent to running [Test-ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/test-servicefabricapplicationpackage) locally), process the package contents, and copy the processed package to an internal system location.</span></span>  <span data-ttu-id="8e4e5-137">Futtassa a [Register-ServiceFabricApplicationType](/powershell/module/servicefabric/register-servicefabricapplicationtype?view=azureservicefabricps) parancsmagot:</span><span class="sxs-lookup"><span data-stu-id="8e4e5-137">Run the [Register-ServiceFabricApplicationType](/powershell/module/servicefabric/register-servicefabricapplicationtype?view=azureservicefabricps) cmdlet:</span></span>

```powershell
Register-ServiceFabricApplicationType WordCount
```
<span data-ttu-id="8e4e5-138">A fürt regisztrált alkalmazástípusok megtekintéséhez futtassa a [Get-ServiceFabricApplicationType](/powershell/module/servicefabric/get-servicefabricapplicationtype?view=azureservicefabricps) parancsmagot:</span><span class="sxs-lookup"><span data-stu-id="8e4e5-138">To see all the application types registered in the cluster, run the [Get-ServiceFabricApplicationType](/powershell/module/servicefabric/get-servicefabricapplicationtype?view=azureservicefabricps) cmdlet:</span></span>

```powershell
Get-ServiceFabricApplicationType
```

### <a name="step-3-create-the-application-instance"></a><span data-ttu-id="8e4e5-139">3. lépés: Az alkalmazáspéldány létrehozása</span><span class="sxs-lookup"><span data-stu-id="8e4e5-139">Step 3: Create the application instance</span></span>
<span data-ttu-id="8e4e5-140">Egy alkalmazás példányosítható bármely alkalmazástípus verziója, amely regisztrálása sikeresen befejeződött a használatával a [New-ServiceFabricApplication](/powershell/module/servicefabric/new-servicefabricapplication?view=azureservicefabricps) parancsot.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-140">An application can be instantiated by using any application type version that has been registered successfully by using the [New-ServiceFabricApplication](/powershell/module/servicefabric/new-servicefabricapplication?view=azureservicefabricps) command.</span></span> <span data-ttu-id="8e4e5-141">Minden alkalmazás neve van deklarálva idő telepítése és kell kezdődnie az **háló:** sémáját, és minden alkalmazáspéldányhoz egyedinek lennie.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-141">The name of each application is declared at deploy time and must start with the **fabric:** scheme and be unique for each application instance.</span></span> <span data-ttu-id="8e4e5-142">Az alkalmazás nevét, és az alkalmazástípus verziója deklarálva van a **ApplicationManifest.xml** alkalmazáscsomag fájlt.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-142">The application type name and application type version are declared in the **ApplicationManifest.xml** file of the application package.</span></span> <span data-ttu-id="8e4e5-143">Ha a célalkalmazás típusa, az alkalmazás jegyzékében meghatározott alapértelmezett szolgáltatások, akkor azok jönnek létre most.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-143">If any default services were defined in the application manifest of the target application type, then those are created at this time.</span></span>

```powershell
New-ServiceFabricApplication fabric:/WordCount WordCount 1.0.0
```

<span data-ttu-id="8e4e5-144">A [Get-ServiceFabricApplication](/powershell/servicefabric/vlatest/get-servicefabricapplication) parancs felsorolja az összes alkalmazáspéldányok sikeresen létrehozott, valamint az átfogó állapotával.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-144">The [Get-ServiceFabricApplication](/powershell/servicefabric/vlatest/get-servicefabricapplication) command lists all application instances that were successfully created, along with their overall status.</span></span> <span data-ttu-id="8e4e5-145">A [Get-ServiceFabricService](/powershell/module/servicefabric/get-servicefabricservice?view=azureservicefabricps) parancs felsorolja a szolgáltatáspéldány sikeresen létrehozott egy adott alkalmazáspéldány belül.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-145">The [Get-ServiceFabricService](/powershell/module/servicefabric/get-servicefabricservice?view=azureservicefabricps) command lists all of the service instances that were successfully created within a given application instance.</span></span> <span data-ttu-id="8e4e5-146">(Ha van ilyen) alapértelmezett szolgáltatások szerepelnek.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-146">Default services (if any) are listed.</span></span>

```powershell
Get-ServiceFabricApplication

Get-ServiceFabricApplication | Get-ServiceFabricService
```

## <a name="task-upgrade-a-service-fabric-application"></a><span data-ttu-id="8e4e5-147">Feladat: A Service Fabric-alkalmazás frissítése</span><span class="sxs-lookup"><span data-stu-id="8e4e5-147">Task: Upgrade a Service Fabric application</span></span>
<span data-ttu-id="8e4e5-148">Frissíthet egy frissített alkalmazáscsomagot és egy korábban telepített Service Fabric-alkalmazás.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-148">You can upgrade a previously deployed Service Fabric application with an updated application package.</span></span> <span data-ttu-id="8e4e5-149">Ez a feladat frissíti a telepített a WordCount alkalmazás "feladat: a Service Fabric-alkalmazás központi telepítése."</span><span class="sxs-lookup"><span data-stu-id="8e4e5-149">This task upgrades the WordCount application that was deployed in "Task: Deploy a Service Fabric application."</span></span> <span data-ttu-id="8e4e5-150">Olvassa végig [Service Fabric az alkalmazásfrissítés](service-fabric-application-upgrade.md) további információt.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-150">Read through [Service Fabric application upgrade](service-fabric-application-upgrade.md) for more information.</span></span>

<span data-ttu-id="8e4e5-151">Dolgot egyszerű ehhez a példához megtartásához csak az alkalmazás verziószáma frissült az Előfeltételek létrehozott WordCountV2 alkalmazáscsomagban.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-151">To keep things simple for this example, only the application version number was updated in the WordCountV2 application package created in the prerequisites.</span></span> <span data-ttu-id="8e4e5-152">A modell forgatókönyv olyan tartalmaz, amely a szolgáltatás kódot, konfigurációs vagy az adatok fájlok frissítése, majd újraépítése, és frissített verziószámok az alkalmazás csomagolás.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-152">A more realistic scenario would involve updating your service code, configuration, or data files and then rebuilding and packaging the application with updated version numbers.</span></span>  

### <a name="step-1-upload-the-updated-application-package"></a><span data-ttu-id="8e4e5-153">1. lépés: A frissített alkalmazáscsomag feltöltése</span><span class="sxs-lookup"><span data-stu-id="8e4e5-153">Step 1: Upload the updated application package</span></span>
<span data-ttu-id="8e4e5-154">A WordCount V1-es alkalmazás készen áll a frissíthető.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-154">The WordCount v1 application is ready to be upgraded.</span></span> <span data-ttu-id="8e4e5-155">Ha megnyit egy PowerShell-ablak rendszergazda, írja be [ **Get-ServiceFabricApplication**](/powershell/module/servicefabric/get-servicefabricapplication?view=azureservicefabricps), láthatja, hogy a WordCount alkalmazás típusú 1.0.0 verzió van telepítve.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-155">If you open up a PowerShell window as administrator and type [**Get-ServiceFabricApplication**](/powershell/module/servicefabric/get-servicefabricapplication?view=azureservicefabricps), you see that version 1.0.0 of the WordCount application type is deployed.</span></span>  

<span data-ttu-id="8e4e5-156">Most másolja a frissített alkalmazáscsomagot (az alkalmazáscsomagok tárolására Service Fabric által) a Service Fabric lemezképtárolóhoz.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-156">Now copy the updated application package to the Service Fabric image store (where the application packages are stored by Service Fabric).</span></span> <span data-ttu-id="8e4e5-157">A paraméter **ApplicationPackagePathInImageStore** arról tájékoztatja a Service Fabric hol találnak a alkalmazáscsomagot.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-157">The parameter **ApplicationPackagePathInImageStore** informs Service Fabric where it can find the application package.</span></span> <span data-ttu-id="8e4e5-158">A következő parancsot, másolja át az alkalmazáscsomagot **WordCountV2** a az image store:</span><span class="sxs-lookup"><span data-stu-id="8e4e5-158">The following command copies the application package to **WordCountV2** in the image store:</span></span>  

```powershell
Copy-ServiceFabricApplicationPackage C:\Temp\WordCountV2\ -ImageStoreConnectionString file:C:\SfDevCluster\Data\ImageStoreShare -ApplicationPackagePathInImageStore WordCountV2

```
### <a name="step-2-register-the-updated-application-type"></a><span data-ttu-id="8e4e5-159">2. lépés: A frissített alkalmazástípus regisztrálása</span><span class="sxs-lookup"><span data-stu-id="8e4e5-159">Step 2: Register the updated application type</span></span>
<span data-ttu-id="8e4e5-160">A következő lépés az, hogy regisztrálja az alkalmazás új verzióját a Service Fabric, amelyek segítségével hajtható végre a [Register-ServiceFabricApplicationType](/powershell/module/servicefabric/register-servicefabricapplicationtype?view=azureservicefabricps) parancsmagot:</span><span class="sxs-lookup"><span data-stu-id="8e4e5-160">The next step is to register the new version of the application with Service Fabric, which can be performed by using the [Register-ServiceFabricApplicationType](/powershell/module/servicefabric/register-servicefabricapplicationtype?view=azureservicefabricps) cmdlet:</span></span>

```powershell
Register-ServiceFabricApplicationType WordCountV2
```

### <a name="step-3-start-the-upgrade"></a><span data-ttu-id="8e4e5-161">3. lépés: A frissítés megkezdése</span><span class="sxs-lookup"><span data-stu-id="8e4e5-161">Step 3: Start the upgrade</span></span>
<span data-ttu-id="8e4e5-162">Különböző frissítési paraméterek időtúllépések és health kritériumokat alkalmazásfrissítések alkalmazhatja.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-162">Various upgrade parameters, timeouts, and health criteria can be applied to application upgrades.</span></span> <span data-ttu-id="8e4e5-163">Olvassa végig a [alkalmazás frissítési paraméterei](service-fabric-application-upgrade-parameters.md) és [frissítési folyamat](service-fabric-application-upgrade.md) további dokumentumokat.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-163">Read through the [application upgrade parameters](service-fabric-application-upgrade-parameters.md) and [upgrade process](service-fabric-application-upgrade.md) documents to learn more.</span></span> <span data-ttu-id="8e4e5-164">Összes szolgáltatását és példányok kell *kifogástalan* a frissítés után.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-164">All services and instances should be *healthy* after the upgrade.</span></span>  <span data-ttu-id="8e4e5-165">Állítsa be a **HealthCheckStableDuration** 60 másodperc (így a szolgáltatások csak kifogástalan legalább 20 másodperc, mielőtt továbblép a frissítés a következő frissítési tartományra).</span><span class="sxs-lookup"><span data-stu-id="8e4e5-165">Set the **HealthCheckStableDuration** to 60 seconds (so that the services are healthy for at least 20 seconds before the upgrade proceeds to the next upgrade domain).</span></span>  <span data-ttu-id="8e4e5-166">Állítson be úgy a **UpgradeDomainTimeout** 1200-as másodpercre és a **UpgradeTimeout** 3000 másodpercre.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-166">Also set the **UpgradeDomainTimeout** to 1200 seconds and the **UpgradeTimeout** to 3000 seconds.</span></span> <span data-ttu-id="8e4e5-167">Végezetül be a **UpgradeFailureAction** való **visszaállítási**, amely kéri, hogy a Service Fabric visszaállítja a az alkalmazás korábbi verziójának Ha a sikertelen frissítés során hibát.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-167">Finally, set the **UpgradeFailureAction** to **rollback**, which requests that Service Fabric rolls back the application to the previous version if failures are encountered during upgrade.</span></span>

<span data-ttu-id="8e4e5-168">Az alkalmazásfrissítés használatával most elindíthatja a [Start-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/start-servicefabricapplicationupgrade?view=azureservicefabricps) parancsmagot:</span><span class="sxs-lookup"><span data-stu-id="8e4e5-168">You can now start the application upgrade by using the [Start-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/start-servicefabricapplicationupgrade?view=azureservicefabricps) cmdlet:</span></span>

```powershell
Start-ServiceFabricApplicationUpgrade -ApplicationName fabric:/WordCount -ApplicationTypeVersion 2.0.0 -HealthCheckStableDurationSec 60 -UpgradeDomainTimeoutSec 1200 -UpgradeTimeout 3000  -FailureAction Rollback -Monitored
```

<span data-ttu-id="8e4e5-169">Vegye figyelembe, hogy az alkalmazás neve ugyanaz, mint a korábban telepített v1.0.0 alkalmazásnév (fabric: / WordCount).</span><span class="sxs-lookup"><span data-stu-id="8e4e5-169">Note that the application name is the same as the previously deployed v1.0.0 application name (fabric:/WordCount).</span></span> <span data-ttu-id="8e4e5-170">A Service Fabric azonosítására, mely az alkalmazás első frissítés használja ezt a nevet.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-170">Service Fabric uses this name to identify which application is getting upgraded.</span></span> <span data-ttu-id="8e4e5-171">Ha az időtúllépéseket túl rövid, esetleg felmerülő egy időtúllépési hibaüzenet arról, hogy a problémát.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-171">If you set the time-outs to be too short, you might encounter a time-out failure message that states the problem.</span></span> <span data-ttu-id="8e4e5-172">Tekintse meg [alkalmazásfrissítések hibaelhárítása](service-fabric-application-upgrade-troubleshooting.md), vagy növelje az időtúllépéseket.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-172">Refer to [Troubleshoot application upgrades](service-fabric-application-upgrade-troubleshooting.md), or increase the time-outs.</span></span>

### <a name="step-4-check-upgrade-progress"></a><span data-ttu-id="8e4e5-173">4. lépés: Ellenőrizze frissítési folyamat állapota</span><span class="sxs-lookup"><span data-stu-id="8e4e5-173">Step 4: Check upgrade progress</span></span>
<span data-ttu-id="8e4e5-174">Alkalmazás frissítése folyamatban van a figyelheti [Service Fabric Explorer](service-fabric-visualizing-your-cluster.md), vagy a [Get-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/get-servicefabricapplicationupgrade?view=azureservicefabricps) parancsmagot:</span><span class="sxs-lookup"><span data-stu-id="8e4e5-174">You can monitor application upgrade progress by using [Service Fabric Explorer](service-fabric-visualizing-your-cluster.md), or by using the [Get-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/get-servicefabricapplicationupgrade?view=azureservicefabricps) cmdlet:</span></span>

```powershell
Get-ServiceFabricApplicationUpgrade fabric:/WordCount
```

<span data-ttu-id="8e4e5-175">Néhány perc múlva a [Get-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/get-servicefabricapplicationupgrade?view=azureservicefabricps) parancsmag jeleníti meg, hogy minden frissítési tartományok frissített (elvégezve).</span><span class="sxs-lookup"><span data-stu-id="8e4e5-175">In a few minutes, the [Get-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/get-servicefabricapplicationupgrade?view=azureservicefabricps) cmdlet shows that all upgrade domains were upgraded (completed).</span></span>

## <a name="task-test-a-service-fabric-application"></a><span data-ttu-id="8e4e5-176">Feladat: A Service Fabric-alkalmazás tesztelése</span><span class="sxs-lookup"><span data-stu-id="8e4e5-176">Task: Test a Service Fabric application</span></span>
<span data-ttu-id="8e4e5-177">Magas színvonalú szolgáltatásokat írni fejlesztők kell tudni idéz elő a nem megbízható infrastruktúra hibák szolgáltatásaik stabilitásának teszteléséhez.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-177">To write high-quality services, developers need to be able to induce unreliable infrastructure faults to test the stability of their services.</span></span> <span data-ttu-id="8e4e5-178">A Service Fabric lehetővé teszi a fejlesztők a tartalék műveletek végrehajtását, és tesztelje a szolgáltatásokat hibák esetén a chaos és a feladatátvételi teszt forgatókönyv.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-178">Service Fabric gives developers the ability to induce fault actions and test services in the presence of failures by using the chaos and failover test scenarios.</span></span>  <span data-ttu-id="8e4e5-179">Olvassa végig [bemutatása a tartalék Analysis Service](service-fabric-testability-overview.md) további információt.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-179">Read through [Introduction to the Fault Analysis Service](service-fabric-testability-overview.md) for additional information.</span></span>

### <a name="step-1-run-the-chaos-test-scenario"></a><span data-ttu-id="8e4e5-180">1. lépés: A chaos vizsgálati eset futtatása</span><span class="sxs-lookup"><span data-stu-id="8e4e5-180">Step 1: Run the chaos test scenario</span></span>
<span data-ttu-id="8e4e5-181">A chaos tesztkörnyezet hibák között a teljes Service Fabric-fürtöt hoz létre.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-181">The chaos test scenario generates faults across the entire Service Fabric cluster.</span></span> <span data-ttu-id="8e4e5-182">A forgatókönyv tömöríti a hibák általában hónapokban vagy években néhány óra alatt látható.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-182">The scenario compresses faults generally seen over months or years to a few hours.</span></span> <span data-ttu-id="8e4e5-183">Magas tartalék sebességet kihagyásos hibák kombinációja, ellenkező esetben lehet kihagyni esetekben keresi.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-183">The combination of interleaved faults with a high fault rate finds corner cases that would otherwise be missed.</span></span> <span data-ttu-id="8e4e5-184">A következő példa a chaos tesztkörnyezet 60 percig fut.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-184">The following example runs the chaos test scenario for 60 minutes.</span></span>

```powershell
$timeToRun = 60
$maxStabilizationTimeSecs = 180
$concurrentFaults = 3
$waitTimeBetweenIterationsSec = 60

Invoke-ServiceFabricChaosTestScenario -TimeToRunMinute $timeToRun -MaxClusterStabilizationTimeoutSec $maxStabilizationTimeSecs -MaxConcurrentFaults $concurrentFaults -EnableMoveReplicaFaults -WaitTimeBetweenIterationsSec $waitTimeBetweenIterationsSec
```

### <a name="step-2-run-the-failover-test-scenario"></a><span data-ttu-id="8e4e5-185">2. lépés: A feladatátvételi teszt forgatókönyv futtatása</span><span class="sxs-lookup"><span data-stu-id="8e4e5-185">Step 2: Run the failover test scenario</span></span>
<span data-ttu-id="8e4e5-186">A feladatátvételi teszt forgatókönyv célokat egy adott szolgáltatás partíció helyett a teljes fürtöt, és más szolgáltatások változatlanul hagyja.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-186">The failover test scenario targets a specific service partition instead of the entire cluster, and it leaves other services unaffected.</span></span> <span data-ttu-id="8e4e5-187">A forgatókönyv telepítéseket szolgáltatás érvényesítési szimulált hibák sorozata, az üzleti logika futtatása közben.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-187">The scenario iterates through a sequence of simulated faults in service validation while your business logic runs.</span></span> <span data-ttu-id="8e4e5-188">Szolgáltatás érvényesítési hiba azt jelzi, hogy a hibát, amely további vizsgálat szükséges.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-188">A failure in service validation indicates an issue that needs further investigation.</span></span> <span data-ttu-id="8e4e5-189">A feladatátvételi teszt csak egy hibaüzenetet kapott egyszerre több hibák helyeken chaos tesztkörnyezet szemben.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-189">The failover test induces only one fault at a time, as opposed to the chaos test scenario, which can induce multiple faults.</span></span> <span data-ttu-id="8e4e5-190">A következő példa a feladatátvételi teszt 60 percig fut a fabric: / WordCount/WordCountService szolgáltatás.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-190">The following example runs the failover test for 60 minutes against the fabric:/WordCount/WordCountService service.</span></span>

```powershell
$timeToRun = 60
$maxStabilizationTimeSecs = 180
$waitTimeBetweenFaultsSec = 10
$serviceName = "fabric:/WordCount/WordCountService"

Invoke-ServiceFabricFailoverTestScenario -TimeToRunMinute $timeToRun -MaxServiceStabilizationTimeoutSec $maxStabilizationTimeSecs -WaitTimeBetweenFaultsSec $waitTimeBetweenFaultsSec -ServiceName $serviceName -PartitionKindUniformInt64 -PartitionKey 1
```

## <a name="task-remove-a-service-fabric-application"></a><span data-ttu-id="8e4e5-191">Feladat: Távolítsa el a Service Fabric-alkalmazás</span><span class="sxs-lookup"><span data-stu-id="8e4e5-191">Task: Remove a Service Fabric application</span></span>
<span data-ttu-id="8e4e5-192">A központilag telepített alkalmazás egy példányának törlése, a kiépített alkalmazástípus eltávolítása a fürtből, és az alkalmazáscsomag eltávolítása az ImageStore.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-192">You can delete an instance of a deployed application, remove the provisioned application type from the cluster, and remove the application package from the ImageStore.</span></span>

### <a name="step-1-remove-an-application-instance"></a><span data-ttu-id="8e4e5-193">1. lépés: Az alkalmazáspéldány eltávolítása</span><span class="sxs-lookup"><span data-stu-id="8e4e5-193">Step 1: Remove an application instance</span></span>
<span data-ttu-id="8e4e5-194">Az alkalmazáspéldány nincs szükség, ha véglegesen eltávolíthatja azt használatával a [Remove-ServiceFabricApplication](/powershell/module/servicefabric/remove-servicefabricapplication?view=azureservicefabricps) parancsmag.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-194">When an application instance is no longer needed, you can permanently remove it by using the [Remove-ServiceFabricApplication](/powershell/module/servicefabric/remove-servicefabricapplication?view=azureservicefabricps) cmdlet.</span></span> <span data-ttu-id="8e4e5-195">Végleg eltávolítja az összes szolgáltatás állapotának alkalmazáshoz tartozó összes szolgáltatás automatikusan is távolítja el.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-195">This also automatically removes all services belonging to the application, permanently removing all service state.</span></span> <span data-ttu-id="8e4e5-196">Ez a művelet nem vonható vissza, és alkalmazás állapota nem állítható helyre.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-196">This operation cannot be reversed and application state cannot be recovered.</span></span>

```powershell
Remove-ServiceFabricApplication fabric:/WordCount
```

### <a name="step-2-unregister-the-application-type"></a><span data-ttu-id="8e4e5-197">2. lépés: Az alkalmazástípus regisztrációjának törlése</span><span class="sxs-lookup"><span data-stu-id="8e4e5-197">Step 2: Unregister the application type</span></span>
<span data-ttu-id="8e4e5-198">Ha már nincs szüksége egy adott verzióját egy alkalmazás típusa, regisztráció segítségével a [Unregister-ServiceFabricApplicationType](/powershell/module/servicefabric/unregister-servicefabricapplicationtype?view=azureservicefabricps) parancsmag.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-198">When you no longer need a particular version of an application type, unregister it by using the [Unregister-ServiceFabricApplicationType](/powershell/module/servicefabric/unregister-servicefabricapplicationtype?view=azureservicefabricps) cmdlet.</span></span> <span data-ttu-id="8e4e5-199">Az image store az alkalmazáscsomag által felhasznált tárterület beállításjegyzékből való törlésekor a nem használt típusok kiadását.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-199">Unregistering unused types releases storage space used by the application package in the image store.</span></span> <span data-ttu-id="8e4e5-200">Az alkalmazástípus regisztrációjának törlése lehet, mindaddig, amíg nincsenek rajta, vagy függőben hivatkoznak rá alkalmazásfrissítések példányként létrehozott alkalmazások.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-200">An application type can be unregistered as long as there are no applications instantiated against it or pending application upgrades referencing it.</span></span>

```powershell
Unregister-ServiceFabricApplicationType WordCount 1.0.0
```

### <a name="step-3-remove-the-application-package"></a><span data-ttu-id="8e4e5-201">3. lépés: Az alkalmazáscsomag eltávolítása</span><span class="sxs-lookup"><span data-stu-id="8e4e5-201">Step 3: Remove the application package</span></span>
<span data-ttu-id="8e4e5-202">Miután az alkalmazástípus regisztrációjának törlése, az alkalmazáscsomag eltávolíthatja az image store használatával a [Remove-ServiceFabricApplicationPackage](/powershell/module/servicefabric/remove-servicefabricapplicationpackage?view=azureservicefabricps) parancsmag.</span><span class="sxs-lookup"><span data-stu-id="8e4e5-202">After the application type is unregistered, the application package can be removed from the image store by using the [Remove-ServiceFabricApplicationPackage](/powershell/module/servicefabric/remove-servicefabricapplicationpackage?view=azureservicefabricps) cmdlet.</span></span>

```powershell
Remove-ServiceFabricApplicationPackage -ImageStoreConnectionString file:C:\SfDevCluster\Data\ImageStoreShare -ApplicationPackagePathInImageStore WordCount
```

## <a name="next-steps"></a><span data-ttu-id="8e4e5-203">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="8e4e5-203">Next steps</span></span>
[<span data-ttu-id="8e4e5-204">A Service Fabric-alkalmazás életciklusa</span><span class="sxs-lookup"><span data-stu-id="8e4e5-204">Service Fabric application lifecycle</span></span>](service-fabric-application-lifecycle.md)

[<span data-ttu-id="8e4e5-205">Alkalmazás üzembe helyezése</span><span class="sxs-lookup"><span data-stu-id="8e4e5-205">Deploy an application</span></span>](service-fabric-deploy-remove-applications.md)

[<span data-ttu-id="8e4e5-206">Az alkalmazásfrissítés</span><span class="sxs-lookup"><span data-stu-id="8e4e5-206">Application upgrade</span></span>](service-fabric-application-upgrade.md)

[<span data-ttu-id="8e4e5-207">Azure Service Fabric-parancsmagokkal</span><span class="sxs-lookup"><span data-stu-id="8e4e5-207">Azure Service Fabric cmdlets</span></span>](/powershell/azure/overview?view=azureservicefabricps)

