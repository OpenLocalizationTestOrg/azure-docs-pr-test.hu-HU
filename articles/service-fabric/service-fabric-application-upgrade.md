---
title: "Fabric-alkalmazás frissítés aaaService |} Microsoft Docs"
description: "Ez a cikk a Service Fabric-alkalmazás, beleértve a választhatja frissítési módok és teljesítő állapot-ellenőrzést egy bevezető tooupgrading tartalmazza."
services: service-fabric
documentationcenter: .net
author: mani-ramaswamy
manager: timlt
editor: 
ms.assetid: 803c9c63-373a-4d6a-8ef2-ea97e16e88dd
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 8/9/2017
ms.author: subramar
ms.openlocfilehash: 6f649ef4a5c0afab682522bcba7d2d66a4268ead
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/06/2017
---
# <a name="service-fabric-application-upgrade"></a><span data-ttu-id="97205-103">Service Fabric-alkalmazás frissítése</span><span class="sxs-lookup"><span data-stu-id="97205-103">Service Fabric application upgrade</span></span>
<span data-ttu-id="97205-104">Az Azure Service Fabric-alkalmazás szolgáltatások gyűjteménye.</span><span class="sxs-lookup"><span data-stu-id="97205-104">An Azure Service Fabric application is a collection of services.</span></span> <span data-ttu-id="97205-105">A frissítés során a Service Fabric összehasonlítja új hello [alkalmazásjegyzék](service-fabric-application-model.md#describe-an-application) hello korábbi verziójával, illetve határozza meg, melyik szolgáltatás hello alkalmazásban frissítés szükséges.</span><span class="sxs-lookup"><span data-stu-id="97205-105">During an upgrade, Service Fabric compares hello new [application manifest](service-fabric-application-model.md#describe-an-application) with hello previous version and determines which services in hello application require updates.</span></span> <span data-ttu-id="97205-106">A Service Fabric hello szolgáltatásban számok akkor jelentkezik, a hello verziószámok hello korábbi verziójában hello verzió hasonlítja össze.</span><span class="sxs-lookup"><span data-stu-id="97205-106">Service Fabric compares hello version numbers in hello service manifests with hello version numbers in hello previous version.</span></span> <span data-ttu-id="97205-107">Ha a szolgáltatás nem változott, hogy a szolgáltatás nincs frissítve.</span><span class="sxs-lookup"><span data-stu-id="97205-107">If a service has not changed, that service is not upgraded.</span></span>

## <a name="rolling-upgrades-overview"></a><span data-ttu-id="97205-108">Működés közbeni frissítés áttekintése</span><span class="sxs-lookup"><span data-stu-id="97205-108">Rolling upgrades overview</span></span>
<span data-ttu-id="97205-109">A működés közbeni alkalmazás frissítés hello frissítés végrehajtása fázisból áll.</span><span class="sxs-lookup"><span data-stu-id="97205-109">In a rolling application upgrade, hello upgrade is performed in stages.</span></span> <span data-ttu-id="97205-110">Egyes szakaszokban hello frissítés hello fürt, egy frissítési tartományi csomópontok alkalmazott tooa részhalmaza.</span><span class="sxs-lookup"><span data-stu-id="97205-110">At each stage, hello upgrade is applied tooa subset of nodes in hello cluster, called an update domain.</span></span> <span data-ttu-id="97205-111">Ennek eredményeképpen hello alkalmazás továbbra is elérhető hello frissítése során.</span><span class="sxs-lookup"><span data-stu-id="97205-111">As a result, hello application remains available throughout hello upgrade.</span></span> <span data-ttu-id="97205-112">Hello a frissítés során a hello fürt hello régi és új verzióit vegyesen tartalmazhatnak.</span><span class="sxs-lookup"><span data-stu-id="97205-112">During hello upgrade, hello cluster may contain a mix of hello old and new versions.</span></span>

<span data-ttu-id="97205-113">Ezért két hello verziószámmal kell előre és hátra kompatibilis.</span><span class="sxs-lookup"><span data-stu-id="97205-113">For that reason, hello two versions must be forward and backward compatible.</span></span> <span data-ttu-id="97205-114">Ha azok nem kompatibilisek, hello alkalmazás-rendszergazda feladata egy több-fázis frissítési toomaintain rendelkezésre állási átmeneti.</span><span class="sxs-lookup"><span data-stu-id="97205-114">If they are not compatible, hello application administrator is responsible for staging a multiple-phase upgrade toomaintain availability.</span></span> <span data-ttu-id="97205-115">A több fázisú frissítés hello első lépéseként tooan köztes hello alkalmazás hello korábbi verziójával kompatibilis verziójának frissítését végzi.</span><span class="sxs-lookup"><span data-stu-id="97205-115">In a multiple-phase upgrade, hello first step is upgrading tooan intermediate version of hello application that is compatible with hello previous version.</span></span> <span data-ttu-id="97205-116">hello második lépésre tooupgrade hello végleges verziójú, amely megsérti hello frissítés előtti verziójával való kompatibilitás szempontjából, de hello köztes verziójával kompatibilis.</span><span class="sxs-lookup"><span data-stu-id="97205-116">hello second step is tooupgrade hello final version that breaks compatibility with hello pre-update version, but is compatible with hello intermediate version.</span></span>

<span data-ttu-id="97205-117">Frissítési tartományok megadott hello fürtjegyzékben hello fürt konfigurálásakor.</span><span class="sxs-lookup"><span data-stu-id="97205-117">Update domains are specified in hello cluster manifest when you configure hello cluster.</span></span> <span data-ttu-id="97205-118">Frissítési tartományok nem kaphat frissítéseket meghatározott sorrendben.</span><span class="sxs-lookup"><span data-stu-id="97205-118">Update domains do not receive updates in a particular order.</span></span> <span data-ttu-id="97205-119">Egy frissítési tartomány nem az alkalmazás központi telepítésének logikai tárolóegységet jelöl.</span><span class="sxs-lookup"><span data-stu-id="97205-119">An update domain is a logical unit of deployment for an application.</span></span> <span data-ttu-id="97205-120">Frissítési tartományok magas rendelkezésre álló hello szolgáltatások tooremain engedélyezése a frissítés során.</span><span class="sxs-lookup"><span data-stu-id="97205-120">Update domains allow hello services tooremain at high availability during an upgrade.</span></span>

<span data-ttu-id="97205-121">Nem működés közbeni frissítés is előfordulhatnak, ha hello frissítés alkalmazott tooall csomópontok hello fürt, amely hello eset esetén hello alkalmazás csak egy frissítési tartomány van.</span><span class="sxs-lookup"><span data-stu-id="97205-121">Non-rolling upgrades are possible if hello upgrade is applied tooall nodes in hello cluster, which is hello case when hello application has only one update domain.</span></span> <span data-ttu-id="97205-122">Ez a módszer nem ajánlott, mivel hello szolgáltatás leáll, és a frissítés hello időpontjában nem érhető el.</span><span class="sxs-lookup"><span data-stu-id="97205-122">This approach is not recommended, since hello service goes down and isn't available at hello time of upgrade.</span></span> <span data-ttu-id="97205-123">Emellett Azure nem biztosít semmilyen garanciák egy fürt csak egy frissítési tartomány be van állítva.</span><span class="sxs-lookup"><span data-stu-id="97205-123">Additionally, Azure doesn't provide any guarantees when a cluster is set up with only one update domain.</span></span>

## <a name="health-checks-during-upgrades"></a><span data-ttu-id="97205-124">Állapot-ellenőrzési eredményeire frissítéskor</span><span class="sxs-lookup"><span data-stu-id="97205-124">Health checks during upgrades</span></span>
<span data-ttu-id="97205-125">A frissítéshez állapotházirendeket van beállítva toobe (vagy alapértelmezett értékek használható).</span><span class="sxs-lookup"><span data-stu-id="97205-125">For an upgrade, health policies have toobe set (or default values may be used).</span></span> <span data-ttu-id="97205-126">Frissítés sikeres nevezik amikor megtörténik a frissítési tartományok belül hello időtúllépéseket meg, és minden frissítés tartományok kifogástalan minősülnek.</span><span class="sxs-lookup"><span data-stu-id="97205-126">An upgrade is termed successful when all update domains are upgraded within hello specified time-outs, and when all update domains are deemed healthy.</span></span>  <span data-ttu-id="97205-127">A megfelelő frissítési tartomány azt jelenti, hogy adott hello frissítési tartomány átadott hello állapotfigyelő házirendben meghatározott összes hello állapotellenőrzést.</span><span class="sxs-lookup"><span data-stu-id="97205-127">A healthy update domain means that hello update domain passed all hello health checks specified in hello health policy.</span></span> <span data-ttu-id="97205-128">Például egy olyan házirendet is engedélyezhetik, hogy kell-e egy alkalmazás példányán belül minden szolgáltatás *kifogástalan*, a health Service Fabric által meghatározott.</span><span class="sxs-lookup"><span data-stu-id="97205-128">For example, a health policy may mandate that all services within an application instance must be *healthy*, as health is defined by Service Fabric.</span></span>

<span data-ttu-id="97205-129">Házirendek és a Service Fabric által a frissítés során ellenőrzi olyan szolgáltatások és alkalmazások független.</span><span class="sxs-lookup"><span data-stu-id="97205-129">Health policies and checks during upgrade by Service Fabric are service and application agnostic.</span></span> <span data-ttu-id="97205-130">Ez azt jelenti, hogy nem szolgáltatásspecifikus tesztek történik.</span><span class="sxs-lookup"><span data-stu-id="97205-130">That is, no service-specific tests are done.</span></span>  <span data-ttu-id="97205-131">Például előfordulhat, hogy a szolgáltatás egy átviteli követelményt, de a Service Fabric nincs hello információk toocheck átviteli sebesség.</span><span class="sxs-lookup"><span data-stu-id="97205-131">For example, your service might have a throughput requirement, but Service Fabric does not have hello information toocheck throughput.</span></span> <span data-ttu-id="97205-132">Tekintse meg a toohello [egészségügyi cikkek](service-fabric-health-introduction.md) hello ellenőrzésére kerül sor.</span><span class="sxs-lookup"><span data-stu-id="97205-132">Refer toohello [health articles](service-fabric-health-introduction.md) for hello checks that are performed.</span></span> <span data-ttu-id="97205-133">hello ellenőrzi, hogy a az e hello alkalmazáscsomag megfelelően, másolja egy frissítési include tesztek során fordulhat elő, hogy hello példány indult el, és így tovább.</span><span class="sxs-lookup"><span data-stu-id="97205-133">hello checks that happen during an upgrade include tests for whether hello application package was copied correctly, whether hello instance was started, and so on.</span></span>

<span data-ttu-id="97205-134">hello alkalmazás állapotának összesítését hello gyermek entitások hello alkalmazás.</span><span class="sxs-lookup"><span data-stu-id="97205-134">hello application health is an aggregation of hello child entities of hello application.</span></span> <span data-ttu-id="97205-135">A Service Fabric röviden hello állapotának hello alkalmazást hello állapotadatokat. melyeket hello alkalmazás jelentenek keresztül értékeli ki.</span><span class="sxs-lookup"><span data-stu-id="97205-135">In short, Service Fabric evaluates hello health of hello application through hello health that is reported on hello application.</span></span> <span data-ttu-id="97205-136">Azt is kiértékeli minden hello szolgáltatás hello alkalmazás állapotának hello ily módon.</span><span class="sxs-lookup"><span data-stu-id="97205-136">It also evaluates hello health of all hello services for hello application this way.</span></span> <span data-ttu-id="97205-137">A Service Fabric további hello alkalmazásszolgáltatások hello állapotának értékelje gyermekei, például a hello szolgáltatás replika hello állapotának összesítése.</span><span class="sxs-lookup"><span data-stu-id="97205-137">Service Fabric further evaluates hello health of hello application services by aggregating hello health of their children, such as hello service replica.</span></span> <span data-ttu-id="97205-138">Után az alkalmazás állapotházirendje hello teljesül, hello frissítés végrehajtható.</span><span class="sxs-lookup"><span data-stu-id="97205-138">Once hello application health policy is satisfied, hello upgrade can proceed.</span></span> <span data-ttu-id="97205-139">Ha a hello állapotházirend sérül, hello alkalmazás frissítése sikertelen.</span><span class="sxs-lookup"><span data-stu-id="97205-139">If hello health policy is violated, hello application upgrade fails.</span></span>

## <a name="upgrade-modes"></a><span data-ttu-id="97205-140">Frissítési módok</span><span class="sxs-lookup"><span data-stu-id="97205-140">Upgrade modes</span></span>
<span data-ttu-id="97205-141">hello az alkalmazásfrissítés általunk javasolt módja figyelt hello módban, amely általánosan használt hello mód.</span><span class="sxs-lookup"><span data-stu-id="97205-141">hello mode that we recommend for application upgrade is hello monitored mode, which is hello commonly used mode.</span></span> <span data-ttu-id="97205-142">Figyelt mód hello frissítést végez egy frissítési tartományt, és ha ellenőrzi az összes (e hello házirend megadva), pass áthelyezése toohello következő frissítési tartományra automatikusan.</span><span class="sxs-lookup"><span data-stu-id="97205-142">Monitored mode performs hello upgrade on one update domain, and if all health checks pass (per hello policy specified), moves on toohello next update domain automatically.</span></span>  <span data-ttu-id="97205-143">Ha állapotának ellenőrzése sikertelen, és/vagy időtúllépéseket elérésekor, hello frissítés vagy vissza lesz állítva hello frissítési tartomány, vagy hello mód módosított toounmonitored manuális.</span><span class="sxs-lookup"><span data-stu-id="97205-143">If health checks fail and/or time-outs are reached, hello upgrade is either rolled back for hello update domain, or hello mode is changed toounmonitored manual.</span></span> <span data-ttu-id="97205-144">E két mód a sikertelen frissítések hello frissítési toochoose konfigurálhatja.</span><span class="sxs-lookup"><span data-stu-id="97205-144">You can configure hello upgrade toochoose one of those two modes for failed upgrades.</span></span> 

<span data-ttu-id="97205-145">A nem figyelt manuális mód kézi beavatkozás után minden frissítés frissítési tartományokon, tookick hello tovább frissítési tartomány hello frissítéséhez ki kell.</span><span class="sxs-lookup"><span data-stu-id="97205-145">Unmonitored manual mode needs manual intervention after every upgrade on an update domain, tookick off hello upgrade on hello next update domain.</span></span> <span data-ttu-id="97205-146">Nem a Service Fabric állapotellenőrzést végez.</span><span class="sxs-lookup"><span data-stu-id="97205-146">No Service Fabric health checks are performed.</span></span> <span data-ttu-id="97205-147">a rendszergazda hello hello állapotfigyelő vagy állapotának vizsgálata hello tovább frissítési tartomány hello frissítés megkezdése előtt.</span><span class="sxs-lookup"><span data-stu-id="97205-147">hello administrator performs hello health or status checks before starting hello upgrade in hello next update domain.</span></span>

## <a name="upgrade-default-services"></a><span data-ttu-id="97205-148">Alapértelmezett szolgáltatások frissítésére</span><span class="sxs-lookup"><span data-stu-id="97205-148">Upgrade default services</span></span>
<span data-ttu-id="97205-149">Service Fabric-alkalmazás alapértelmezett szolgáltatások frissítése az alkalmazás hello a frissítési folyamat során.</span><span class="sxs-lookup"><span data-stu-id="97205-149">Default services within Service Fabric application can be upgraded during hello upgrade process of an application.</span></span> <span data-ttu-id="97205-150">Alapértelmezett szolgáltatások definiált hello [alkalmazásjegyzék](service-fabric-application-model.md#describe-an-application).</span><span class="sxs-lookup"><span data-stu-id="97205-150">Default services are defined in hello [application manifest](service-fabric-application-model.md#describe-an-application).</span></span> <span data-ttu-id="97205-151">az alapértelmezett szolgáltatások frissítése a hello szabványos szabályok a következők:</span><span class="sxs-lookup"><span data-stu-id="97205-151">hello standard rules of upgrading default services are:</span></span>

1. <span data-ttu-id="97205-152">Az új hello szolgáltatások alapértelmezett [alkalmazásjegyzék](service-fabric-application-model.md#describe-an-application) , amely nem szerepel a hello fürt jönnek létre.</span><span class="sxs-lookup"><span data-stu-id="97205-152">Default services in hello new [application manifest](service-fabric-application-model.md#describe-an-application) that do not exist in hello cluster are created.</span></span>
> [!TIP]
> <span data-ttu-id="97205-153">[EnableDefaultServicesUpgrade](service-fabric-cluster-fabric-settings.md#fabric-settings-that-you-can-customize) igények toobe beállítása tootrue tooenable hello szabályainak.</span><span class="sxs-lookup"><span data-stu-id="97205-153">[EnableDefaultServicesUpgrade](service-fabric-cluster-fabric-settings.md#fabric-settings-that-you-can-customize) needs toobe set tootrue tooenable hello following rules.</span></span> <span data-ttu-id="97205-154">Ez a funkció a v5.5 támogatott.</span><span class="sxs-lookup"><span data-stu-id="97205-154">This feature is supported from v5.5.</span></span>

2. <span data-ttu-id="97205-155">Mindkét előző meglévő szolgáltatási alapértelmezett [alkalmazásjegyzék](service-fabric-application-model.md#describe-an-application) és új verziójára frissülnek.</span><span class="sxs-lookup"><span data-stu-id="97205-155">Default services existing in both previous [application manifest](service-fabric-application-model.md#describe-an-application) and new version are updated.</span></span> <span data-ttu-id="97205-156">Szolgáltatások ismertetése hello új verziójában felülírná már a hello fürt.</span><span class="sxs-lookup"><span data-stu-id="97205-156">Service descriptions in hello new version would overwrite those already in hello cluster.</span></span> <span data-ttu-id="97205-157">Az alkalmazásfrissítés alapértelmezett szolgáltatás hibája frissítése után automatikusan visszaállítási lenne.</span><span class="sxs-lookup"><span data-stu-id="97205-157">Application upgrade would rollback automatically upon updating default service failure.</span></span>
3. <span data-ttu-id="97205-158">Az előző hello szolgáltatások alapértelmezett [alkalmazásjegyzék](service-fabric-application-model.md#describe-an-application) , de nem az új verzió hello törli.</span><span class="sxs-lookup"><span data-stu-id="97205-158">Default services in hello previous [application manifest](service-fabric-application-model.md#describe-an-application) but not in hello new version are deleted.</span></span> <span data-ttu-id="97205-159">**Vegye figyelembe, hogy a törlési alapértelmezett szolgáltatások nem beállításai állíthatók vissza.**</span><span class="sxs-lookup"><span data-stu-id="97205-159">**Note that this deleting default services can not be reverted.**</span></span>

<span data-ttu-id="97205-160">Abban az esetben, ha egy alkalmazás a frissítés az vissza lesz állítva, az alapértelmezett szolgáltatások visszatért toohello állapot frissítésének megkezdése előtt.</span><span class="sxs-lookup"><span data-stu-id="97205-160">In case of an application upgrade is rolled back, default services are reverted toohello status before upgrade started.</span></span> <span data-ttu-id="97205-161">De törölt szolgáltatások soha nem hozható létre.</span><span class="sxs-lookup"><span data-stu-id="97205-161">But deleted services can never be created.</span></span>

## <a name="application-upgrade-flowchart"></a><span data-ttu-id="97205-162">Alkalmazás frissítési folyamatábra</span><span class="sxs-lookup"><span data-stu-id="97205-162">Application upgrade flowchart</span></span>
<span data-ttu-id="97205-163">hello folyamatábra alábbi azt segítenek megérteni a Service Fabric-alkalmazás hello frissítési folyamatát.</span><span class="sxs-lookup"><span data-stu-id="97205-163">hello flowchart following this paragraph can help you understand hello upgrade process of a Service Fabric application.</span></span> <span data-ttu-id="97205-164">Hello folyamatot ismerteti, hogyan hello időtúllépéseket, beleértve a *HealthCheckStableDuration*, *HealthCheckRetryTimeout*, és *UpgradeHealthCheckInterval*, szabályozni, amikor egy frissítési tartomány hello frissítés akkor tekinthető, sikeres, vagy a hiba.</span><span class="sxs-lookup"><span data-stu-id="97205-164">In particular, hello flow describes how hello time-outs, including *HealthCheckStableDuration*, *HealthCheckRetryTimeout*, and *UpgradeHealthCheckInterval*, help control when hello upgrade in one update domain is considered a success or a failure.</span></span>

![a Service Fabric-alkalmazás hello frissítési folyamata][image]

## <a name="next-steps"></a><span data-ttu-id="97205-166">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="97205-166">Next steps</span></span>
<span data-ttu-id="97205-167">[Az alkalmazás használata a Visual Studio frissítése](service-fabric-application-upgrade-tutorial.md) végigvezeti Önt az alkalmazásfrissítés Visual Studio használatával.</span><span class="sxs-lookup"><span data-stu-id="97205-167">[Upgrading your Application Using Visual Studio](service-fabric-application-upgrade-tutorial.md) walks you through an application upgrade using Visual Studio.</span></span>

<span data-ttu-id="97205-168">[Az alkalmazás használatával Powershell frissítése](service-fabric-application-upgrade-tutorial-powershell.md) végigvezeti Önt az alkalmazásfrissítés PowerShell használatával.</span><span class="sxs-lookup"><span data-stu-id="97205-168">[Upgrading your Application Using Powershell](service-fabric-application-upgrade-tutorial-powershell.md) walks you through an application upgrade using PowerShell.</span></span>

<span data-ttu-id="97205-169">Szabályozhatja, hogy az alkalmazás használatával frissíti [frissítése paraméterek](service-fabric-application-upgrade-parameters.md).</span><span class="sxs-lookup"><span data-stu-id="97205-169">Control how your application upgrades by using [Upgrade Parameters](service-fabric-application-upgrade-parameters.md).</span></span>

<span data-ttu-id="97205-170">Az alkalmazásfrissítéseket Learning kompatibilissé hogyan toouse [Adatszerializálás](service-fabric-application-upgrade-data-serialization.md).</span><span class="sxs-lookup"><span data-stu-id="97205-170">Make your application upgrades compatible by learning how toouse [Data Serialization](service-fabric-application-upgrade-data-serialization.md).</span></span>

<span data-ttu-id="97205-171">Ismerje meg, hogyan toouse speciális azáltal túl az alkalmazás frissítésekor funkció[Speciális témakörök](service-fabric-application-upgrade-advanced.md).</span><span class="sxs-lookup"><span data-stu-id="97205-171">Learn how toouse advanced functionality while upgrading your application by referring too[Advanced Topics](service-fabric-application-upgrade-advanced.md).</span></span>

<span data-ttu-id="97205-172">Javítsa ki a gyakori problémákat alkalmazásfrissítések toohello lépéseit hivatkozással [Alkalmazásfrissítések hibaelhárítási](service-fabric-application-upgrade-troubleshooting.md).</span><span class="sxs-lookup"><span data-stu-id="97205-172">Fix common problems in application upgrades by referring toohello steps in [Troubleshooting Application Upgrades](service-fabric-application-upgrade-troubleshooting.md).</span></span>

[image]: media/service-fabric-application-upgrade/service-fabric-application-upgrade-flowchart.png
