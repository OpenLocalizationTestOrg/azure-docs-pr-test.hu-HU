---
title: "Service Fabric-alkalmazás frissítés PowerShell használatával |} Microsoft Docs"
description: "Ez a cikk végigvezeti a Service Fabric-alkalmazás telepítése, kódjának a módosítása és PowerShell használatával frissítés terítésével élménye."
services: service-fabric
documentationcenter: .net
author: mani-ramaswamy
manager: timlt
editor: 
ms.assetid: 9bc75748-96b0-49ca-8d8a-41fe08398f25
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 8/9/2017
ms.author: subramar
ms.openlocfilehash: 3591ced970887d4eb5a33cec8f6951b5476d04f8
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 08/18/2017
---
# <a name="service-fabric-application-upgrade-using-powershell"></a><span data-ttu-id="581a2-103">Az alkalmazásfrissítés Service Fabric PowerShell-lel</span><span class="sxs-lookup"><span data-stu-id="581a2-103">Service Fabric application upgrade using PowerShell</span></span>
> [!div class="op_single_selector"]
> * [<span data-ttu-id="581a2-104">PowerShell</span><span class="sxs-lookup"><span data-stu-id="581a2-104">PowerShell</span></span>](service-fabric-application-upgrade-tutorial-powershell.md)
> * [<span data-ttu-id="581a2-105">Visual Studio</span><span class="sxs-lookup"><span data-stu-id="581a2-105">Visual Studio</span></span>](service-fabric-application-upgrade-tutorial.md)
> 
> 

<br/>

<span data-ttu-id="581a2-106">A leggyakrabban használt és ajánlott frissítési módszer a figyelt működés közbeni frissítés.</span><span class="sxs-lookup"><span data-stu-id="581a2-106">The most frequently used and recommended upgrade approach is the monitored rolling upgrade.</span></span>  <span data-ttu-id="581a2-107">Az Azure Service Fabric állapotfigyelő házirendjei alapján az alkalmazás frissítés alatt állapotát figyeli.</span><span class="sxs-lookup"><span data-stu-id="581a2-107">Azure Service Fabric monitors the health of the application being upgraded based on a set of health policies.</span></span> <span data-ttu-id="581a2-108">Miután egy frissítési tartományt (UD) frissítve van, a Service Fabric kiértékeli az alkalmazás állapotának, és folytatódik a következő frissítési tartományra vagy attól függően, hogy a házirendek frissítése sikertelen.</span><span class="sxs-lookup"><span data-stu-id="581a2-108">Once an update domain (UD) is upgraded, Service Fabric evaluates the application health and either proceeds to the next update domain or fails the upgrade depending on the health policies.</span></span>

<span data-ttu-id="581a2-109">A figyelt alkalmazáshoz frissítés használatával végezheti el a natív vagy felügyelt API-k, PowerShell vagy REST.</span><span class="sxs-lookup"><span data-stu-id="581a2-109">A monitored application upgrade can be performed using the managed or native APIs, PowerShell, or REST.</span></span> <span data-ttu-id="581a2-110">Visual Studio használatával történő frissítése, lásd: [Visual Studio segítségével az alkalmazás frissítését](service-fabric-application-upgrade-tutorial.md).</span><span class="sxs-lookup"><span data-stu-id="581a2-110">For instructions on performing an upgrade using Visual Studio, see [Upgrading your application using Visual Studio](service-fabric-application-upgrade-tutorial.md).</span></span>

<span data-ttu-id="581a2-111">Az alkalmazás-rendszergazda figyeli a Service Fabric működés közbeni frissítések segítségével beállíthatja a kiértékelési házirendet, amely a Service Fabric használ annak megállapításához, hogy az alkalmazás kifogástalan.</span><span class="sxs-lookup"><span data-stu-id="581a2-111">With Service Fabric monitored rolling upgrades, the application administrator can configure the health evaluation policy that Service Fabric uses to determine if the application is healthy.</span></span> <span data-ttu-id="581a2-112">Emellett a rendszergazda úgy is konfigurálhatja a a művelet végrehajtását, ha az állapot kiértékelésekor sikertelen (például egy automatikus visszaállítási történt.) Ez a szakasz végigvezeti az SDK-minták PowerShell használó egyik egy figyelt frissítésével.</span><span class="sxs-lookup"><span data-stu-id="581a2-112">In addition, the administrator can configure the action to be taken when the health evaluation fails (for example, doing an automatic rollback.) This section walks through a monitored upgrade for one of the SDK samples that uses PowerShell.</span></span> <span data-ttu-id="581a2-113">A következő Microsoft Virtual Academy videó is bemutatja, hogyan alkalmazás frissítése:<center><a target="_blank" href="https://mva.microsoft.com/en-US/training-courses/building-microservices-applications-on-azure-service-fabric-16747?l=OrHJH66yC_6406218965">
<img src="./media/service-fabric-application-upgrade-tutorial-powershell/AppLifecycleVid.png" WIDTH="360" HEIGHT="244">
</a></center></span><span class="sxs-lookup"><span data-stu-id="581a2-113">The following Microsoft Virtual Academy video also walks you through an app upgrade: <center><a target="_blank" href="https://mva.microsoft.com/en-US/training-courses/building-microservices-applications-on-azure-service-fabric-16747?l=OrHJH66yC_6406218965">
<img src="./media/service-fabric-application-upgrade-tutorial-powershell/AppLifecycleVid.png" WIDTH="360" HEIGHT="244">
</a></center></span></span>

## <a name="step-1-build-and-deploy-the-visual-objects-sample"></a><span data-ttu-id="581a2-114">1. lépés: Létrehozása és központi telepítése a Visual objektumok minta</span><span class="sxs-lookup"><span data-stu-id="581a2-114">Step 1: Build and deploy the Visual Objects sample</span></span>
<span data-ttu-id="581a2-115">Hozza létre, és tegye közzé az alkalmazást, kattintson a jobb gombbal a projektet, a **VisualObjectsApplication,** , majd válassza a **közzététel** parancsot.</span><span class="sxs-lookup"><span data-stu-id="581a2-115">Build and publish the application by right-clicking on the application project, **VisualObjectsApplication,** and selecting the **Publish** command.</span></span>  <span data-ttu-id="581a2-116">További információkért lásd: [Service Fabric-alkalmazás frissítési oktatóanyag](service-fabric-application-upgrade-tutorial.md).</span><span class="sxs-lookup"><span data-stu-id="581a2-116">For more information, see [Service Fabric application upgrade tutorial](service-fabric-application-upgrade-tutorial.md).</span></span>  <span data-ttu-id="581a2-117">Azt is megteheti a PowerShell használatával telepítheti az alkalmazást.</span><span class="sxs-lookup"><span data-stu-id="581a2-117">Alternatively, you can use PowerShell to deploy your application.</span></span>

> [!NOTE]
> <span data-ttu-id="581a2-118">A Service Fabric parancsok PowerShell is használható, mielőtt először használatával csatlakozzon a fürthöz a `Connect-ServiceFabricCluster` parancsmag.</span><span class="sxs-lookup"><span data-stu-id="581a2-118">Before any of the Service Fabric commands may be used in PowerShell, you first need to connect to the cluster by using the `Connect-ServiceFabricCluster` cmdlet.</span></span> <span data-ttu-id="581a2-119">Hasonlóképpen feltételezzük, hogy a fürt már be van állítva a helyi számítógépen.</span><span class="sxs-lookup"><span data-stu-id="581a2-119">Similarly, it is assumed that the Cluster has already been set up on your local machine.</span></span> <span data-ttu-id="581a2-120">Olvassa el a [a Service Fabric fejlesztési környezet létrehozása](service-fabric-get-started.md).</span><span class="sxs-lookup"><span data-stu-id="581a2-120">See the article on [setting up your Service Fabric development environment](service-fabric-get-started.md).</span></span>
> 
> 

<span data-ttu-id="581a2-121">A Visual Studio projekt létrehozása, után a PowerShell-parancsot használhatja [másolási-ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/copy-servicefabricapplicationpackage) alkalmazás csomag másolása a lemezképtárolóba.</span><span class="sxs-lookup"><span data-stu-id="581a2-121">After building the project in Visual Studio, you can use the PowerShell command [Copy-ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/copy-servicefabricapplicationpackage) to copy the application package to the ImageStore.</span></span> <span data-ttu-id="581a2-122">Ha szeretné ellenőrizni a csomag helyi, használja a [teszt-ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/test-servicefabricapplicationpackage) parancsmag.</span><span class="sxs-lookup"><span data-stu-id="581a2-122">If you want to verify the app package locally, use the [Test-ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/test-servicefabricapplicationpackage) cmdlet.</span></span> <span data-ttu-id="581a2-123">A következő lépés az, hogy az alkalmazás a Service Fabric futásidejű történő regisztrálása a [Register-ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/register-servicefabricapplicationtype) parancsmag.</span><span class="sxs-lookup"><span data-stu-id="581a2-123">The next step is to register the application to the Service Fabric runtime using the [Register-ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/register-servicefabricapplicationtype) cmdlet.</span></span> <span data-ttu-id="581a2-124">Az utolsó lépést az, hogy az alkalmazás példányának használatával indítsa el a [New-ServiceFabricApplication](/powershell/module/servicefabric/new-servicefabricapplication?view=azureservicefabricps) parancsmag.</span><span class="sxs-lookup"><span data-stu-id="581a2-124">The final step is to start an instance of the application by using the [New-ServiceFabricApplication](/powershell/module/servicefabric/new-servicefabricapplication?view=azureservicefabricps) cmdlet.</span></span>  <span data-ttu-id="581a2-125">Fenti három lépést is megfelel a használatával a **telepítés** menüpont a Visual Studióban.</span><span class="sxs-lookup"><span data-stu-id="581a2-125">These three steps are analogous to using the **Deploy** menu item in Visual Studio.</span></span>

<span data-ttu-id="581a2-126">Most már használhatja [a fürt és az alkalmazás megtekintése a Service Fabric Explorer](service-fabric-visualizing-your-cluster.md).</span><span class="sxs-lookup"><span data-stu-id="581a2-126">Now, you can use [Service Fabric Explorer to view the cluster and the application](service-fabric-visualizing-your-cluster.md).</span></span> <span data-ttu-id="581a2-127">Az alkalmazás rendelkezik egy webszolgáltatás, amelyet is nyílik meg, az Internet Explorerben írja be a [http://localhost: 8081/visualobjects](http://localhost:8081/visualobjects) a böngésző címsorába.</span><span class="sxs-lookup"><span data-stu-id="581a2-127">The application has a web service that can be navigated to in Internet Explorer by typing [http://localhost:8081/visualobjects](http://localhost:8081/visualobjects) in the address bar.</span></span>  <span data-ttu-id="581a2-128">Navigálás a képernyő néhány lebegőpontos vizuális objektum kell megjelennie.</span><span class="sxs-lookup"><span data-stu-id="581a2-128">You should see some floating visual objects moving around in the screen.</span></span>  <span data-ttu-id="581a2-129">Emellett használhatja [Get-ServiceFabricApplication](/powershell/module/servicefabric/get-servicefabricapplication?view=azureservicefabricps) az alkalmazás állapotának ellenőrzéséhez.</span><span class="sxs-lookup"><span data-stu-id="581a2-129">Additionally, you can use [Get-ServiceFabricApplication](/powershell/module/servicefabric/get-servicefabricapplication?view=azureservicefabricps) to check the application status.</span></span>

## <a name="step-2-update-the-visual-objects-sample"></a><span data-ttu-id="581a2-130">2. lépés: A Visual objektumok minta frissítése</span><span class="sxs-lookup"><span data-stu-id="581a2-130">Step 2: Update the Visual Objects sample</span></span>
<span data-ttu-id="581a2-131">Bizonyára észrevette, hogy, hogy az 1. lépésben telepített verziója, a visual objektumok nem elforgatása.</span><span class="sxs-lookup"><span data-stu-id="581a2-131">You might notice that with the version that was deployed in Step 1, the visual objects do not rotate.</span></span> <span data-ttu-id="581a2-132">Most frissítse az alkalmazás olyanra, ahol a vizuális objektumok is elforgatása.</span><span class="sxs-lookup"><span data-stu-id="581a2-132">Let's upgrade this application to one where the visual objects also rotate.</span></span>

<span data-ttu-id="581a2-133">Válassza ki a VisualObjects.ActorService projektet a VisualObjects megoldáson, és nyissa meg a StatefulVisualObjectActor.cs fájlt.</span><span class="sxs-lookup"><span data-stu-id="581a2-133">Select the VisualObjects.ActorService project within the VisualObjects solution, and open the StatefulVisualObjectActor.cs file.</span></span> <span data-ttu-id="581a2-134">Ugrás a fájlt, a módszer `MoveObject`, megjegyzéssé `this.State.Move()`, és állítsa vissza `this.State.Move(true)`.</span><span class="sxs-lookup"><span data-stu-id="581a2-134">Within that file, navigate to the method `MoveObject`, comment out `this.State.Move()`, and uncomment `this.State.Move(true)`.</span></span> <span data-ttu-id="581a2-135">Ez a változás az objektumok elforgatja, a szolgáltatás frissítése után.</span><span class="sxs-lookup"><span data-stu-id="581a2-135">This change rotates the objects after the service is upgraded.</span></span>

<span data-ttu-id="581a2-136">Is frissíteni kell a *ServiceManifest.xml* fájlt (PackageRoot) a projekt **VisualObjects.ActorService**.</span><span class="sxs-lookup"><span data-stu-id="581a2-136">We also need to update the *ServiceManifest.xml* file (under PackageRoot) of the project **VisualObjects.ActorService**.</span></span> <span data-ttu-id="581a2-137">Frissítés a *CodePackage* és a 2.0-s és a megfelelő sorok az verziója a *ServiceManifest.xml* fájlt.</span><span class="sxs-lookup"><span data-stu-id="581a2-137">Update the *CodePackage* and the service version to 2.0, and the corresponding lines in the *ServiceManifest.xml* file.</span></span>
<span data-ttu-id="581a2-138">Használhatja a Visual Studio *Manifest fájlok szerkesztése* lehetőséget, kattintson a jobb gombbal a megoldásban a jegyzékfájl módosítások után.</span><span class="sxs-lookup"><span data-stu-id="581a2-138">You can use the Visual Studio *Edit Manifest Files* option after you right-click on the solution to make the manifest file changes.</span></span>

<span data-ttu-id="581a2-139">A módosításokat, miután a jegyzék a következőket kell hasonlítania (kiemelt bizonyos részei a módosításoknak):</span><span class="sxs-lookup"><span data-stu-id="581a2-139">After the changes are made, the manifest should look like the following (highlighted portions show the changes):</span></span>

```xml
<ServiceManifestName="VisualObjects.ActorService" Version="2.0" xmlns="http://schemas.microsoft.com/2011/01/fabric" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

<CodePackageName="Code" Version="2.0">
```

<span data-ttu-id="581a2-140">Most a *ApplicationManifest.xml* fájl (alatt található a **VisualObjects** projekt alatt a **VisualObjects** megoldás) 2.0-s verzióját a frissül**VisualObjects.ActorService** projekt.</span><span class="sxs-lookup"><span data-stu-id="581a2-140">Now the *ApplicationManifest.xml* file (found under the **VisualObjects** project under the **VisualObjects** solution) is updated to version 2.0 of the **VisualObjects.ActorService** project.</span></span> <span data-ttu-id="581a2-141">Emellett a alkalmazás verzióra frissül 2.0.0.0-s 1.0.0.0 a.</span><span class="sxs-lookup"><span data-stu-id="581a2-141">In addition, the Application version is updated to 2.0.0.0 from 1.0.0.0.</span></span> <span data-ttu-id="581a2-142">A *ApplicationManifest.xml* az alábbi kódrészletben hasonlóan kell kinéznie:</span><span class="sxs-lookup"><span data-stu-id="581a2-142">The *ApplicationManifest.xml* should look like the following snippet:</span></span>

```xml
<ApplicationManifestxmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" ApplicationTypeName="VisualObjects" ApplicationTypeVersion="2.0.0.0" xmlns="http://schemas.microsoft.com/2011/01/fabric">

 <ServiceManifestRefServiceManifestName="VisualObjects.ActorService" ServiceManifestVersion="2.0" />
```


<span data-ttu-id="581a2-143">Most, a projekt buildjének elkészítéséhez kiválasztásával csak a **ActorService** projektet, és majd kattintson a jobb gombbal, majd válassza a **Build** lehetőséget a Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="581a2-143">Now, build the project by selecting just the **ActorService** project, and then right-clicking and selecting the **Build** option in Visual Studio.</span></span> <span data-ttu-id="581a2-144">Ha **építse újra az összes**, mivel a kód volna frissítenie kell az összes projektet, a verziók.</span><span class="sxs-lookup"><span data-stu-id="581a2-144">If you select **Rebuild all**, you should update the versions for all projects, since the code would have changed.</span></span> <span data-ttu-id="581a2-145">Ezután tegyük a frissített alkalmazás becsomagolása kattintson a jobb gombbal a ***VisualObjectsApplication***, a Service Fabric menü kiválasztásával, és válassza **csomag**.</span><span class="sxs-lookup"><span data-stu-id="581a2-145">Next, let's package the updated application by right-clicking on ***VisualObjectsApplication***, selecting the Service Fabric Menu, and choosing **Package**.</span></span> <span data-ttu-id="581a2-146">Ez a művelet létrehoz egy alkalmazáscsomagot, amely telepíthető.</span><span class="sxs-lookup"><span data-stu-id="581a2-146">This action creates an application package that can be deployed.</span></span>  <span data-ttu-id="581a2-147">A frissített alkalmazás készen áll a telepíthető.</span><span class="sxs-lookup"><span data-stu-id="581a2-147">Your updated application is ready to be deployed.</span></span>

## <a name="step-3--decide-on-health-policies-and-upgrade-parameters"></a><span data-ttu-id="581a2-148">3. lépés: Házirendek mellett dönt, és frissítse a paraméterek</span><span class="sxs-lookup"><span data-stu-id="581a2-148">Step 3:  Decide on health policies and upgrade parameters</span></span>
<span data-ttu-id="581a2-149">Ismerje meg, a [alkalmazás frissítési paraméterei](service-fabric-application-upgrade-parameters.md) és a [frissítési folyamat](service-fabric-application-upgrade.md) lekérni a különböző frissítési paraméterek időtúllépéseket és állapotfigyelő feltétel alkalmazása beható ismerete.</span><span class="sxs-lookup"><span data-stu-id="581a2-149">Familiarize yourself with the [application upgrade parameters](service-fabric-application-upgrade-parameters.md) and the [upgrade process](service-fabric-application-upgrade.md) to get a good understanding of the various upgrade parameters, time-outs, and health criterion applied.</span></span> <span data-ttu-id="581a2-150">Jelen kalauz használatához a szolgáltatás állapotának kiértékelési feltétel az alapértelmezett értékre van beállítva (és a javasolt) értéket, ami azt jelenti, hogy az összes szolgáltatás és példányok legyen *kifogástalan* a frissítés után.</span><span class="sxs-lookup"><span data-stu-id="581a2-150">For this walkthrough, the service health evaluation criterion is set to the default (and recommended) values, which means that all services and instances should be *healthy* after the upgrade.</span></span>  

<span data-ttu-id="581a2-151">Azonban nézzük növeli a *HealthCheckStableDuration* 60 másodperc (így a szolgáltatások csak megfelelő előtt a frissítés előrehalad az a következő frissítési tartományra legalább 20 másodperc).</span><span class="sxs-lookup"><span data-stu-id="581a2-151">However, let's increase the *HealthCheckStableDuration* to 60 seconds (so that the services are healthy for at least 20 seconds before the upgrade proceeds to the next update domain).</span></span>  <span data-ttu-id="581a2-152">Most is beállíthat a *UpgradeDomainTimeout* az 1200-as másodperc és a *UpgradeTimeout* kell 3000 másodperc.</span><span class="sxs-lookup"><span data-stu-id="581a2-152">Let's also set the *UpgradeDomainTimeout* to be 1200 seconds and the *UpgradeTimeout* to be 3000 seconds.</span></span>

<span data-ttu-id="581a2-153">Végezetül is állítsa a *UpgradeFailureAction* visszaállítani.</span><span class="sxs-lookup"><span data-stu-id="581a2-153">Finally, let's also set the *UpgradeFailureAction* to rollback.</span></span> <span data-ttu-id="581a2-154">Ez a beállítás megköveteli a Service Fabric szeretné visszaállítani az előző verzió az alkalmazás Ha probléma merül fel a frissítés során találkozik.</span><span class="sxs-lookup"><span data-stu-id="581a2-154">This option requires Service Fabric to roll back the application to the previous version if it encounters any issues during the upgrade.</span></span> <span data-ttu-id="581a2-155">Így a frissítés (4. lépés) indításakor a következő paraméterek vannak megadva:</span><span class="sxs-lookup"><span data-stu-id="581a2-155">Thus, when starting the upgrade (in Step 4), the following parameters are specified:</span></span>

<span data-ttu-id="581a2-156">FailureAction visszaállítási =</span><span class="sxs-lookup"><span data-stu-id="581a2-156">FailureAction = Rollback</span></span>

<span data-ttu-id="581a2-157">HealthCheckStableDurationSec = 60</span><span class="sxs-lookup"><span data-stu-id="581a2-157">HealthCheckStableDurationSec = 60</span></span>

<span data-ttu-id="581a2-158">UpgradeDomainTimeoutSec = 1200</span><span class="sxs-lookup"><span data-stu-id="581a2-158">UpgradeDomainTimeoutSec = 1200</span></span>

<span data-ttu-id="581a2-159">UpgradeTimeout = 3000</span><span class="sxs-lookup"><span data-stu-id="581a2-159">UpgradeTimeout = 3000</span></span>

## <a name="step-4-prepare-application-for-upgrade"></a><span data-ttu-id="581a2-160">4. lépés: A frissítésre alkalmazás előkészítése</span><span class="sxs-lookup"><span data-stu-id="581a2-160">Step 4: Prepare application for upgrade</span></span>
<span data-ttu-id="581a2-161">Az alkalmazás most már áll, beépített és készen áll a frissíthető.</span><span class="sxs-lookup"><span data-stu-id="581a2-161">Now the application is built and ready to be upgraded.</span></span> <span data-ttu-id="581a2-162">Ha megnyit egy PowerShell-ablak rendszergazda, írja be [Get-ServiceFabricApplication](/powershell/module/servicefabric/get-servicefabricapplication?view=azureservicefabricps), akkor hagyja, hogy azt jelzi, hogy a rendszer alkalmazás típusú 1.0.0.0 **VisualObjects** telepített van.</span><span class="sxs-lookup"><span data-stu-id="581a2-162">If you open up a PowerShell window as an administrator and type [Get-ServiceFabricApplication](/powershell/module/servicefabric/get-servicefabricapplication?view=azureservicefabricps), it should let you know that it is application type 1.0.0.0 of **VisualObjects** that's been deployed.</span></span>  

<span data-ttu-id="581a2-163">Az alkalmazás csomag megtalálható a következő relatív elérési úton, ahol a Service Fabric SDK - tömörítés nélkül *Samples\Services\Stateful\VisualObjects\VisualObjects\obj\x64\Debug*.</span><span class="sxs-lookup"><span data-stu-id="581a2-163">The application package is stored under the following relative path where you uncompressed the Service Fabric SDK - *Samples\Services\Stateful\VisualObjects\VisualObjects\obj\x64\Debug*.</span></span> <span data-ttu-id="581a2-164">Ebben a könyvtárban, az alkalmazáscsomag tárolására látnia kell egy "Csomagja" mappát.</span><span class="sxs-lookup"><span data-stu-id="581a2-164">You should find a "Package" folder in that directory, where the application package is stored.</span></span> <span data-ttu-id="581a2-165">Ellenőrizze a helyi időre való győződjön meg arról, hogy-e a legújabb buildjével (esetleg módon módosítsa az is).</span><span class="sxs-lookup"><span data-stu-id="581a2-165">Check the timestamps to ensure that it is the latest build (you may need to modify the paths appropriately as well).</span></span>

<span data-ttu-id="581a2-166">Most tegyük másolja a frissített alkalmazáscsomag a Service Fabric lemezképtárolóba (az alkalmazáscsomagok tárolására Service Fabric által).</span><span class="sxs-lookup"><span data-stu-id="581a2-166">Now let's copy the updated application package to the Service Fabric ImageStore (where the application packages are stored by Service Fabric).</span></span> <span data-ttu-id="581a2-167">A paraméter *ApplicationPackagePathInImageStore* arról tájékoztatja a Service Fabric hol találnak a alkalmazáscsomagot.</span><span class="sxs-lookup"><span data-stu-id="581a2-167">The parameter *ApplicationPackagePathInImageStore* informs Service Fabric where it can find the application package.</span></span> <span data-ttu-id="581a2-168">Azt a frissített alkalmazás rendelkezik be "VisualObjects\_V2" (esetleg újra annak megfelelően módosítsa a elérési utak) a következő paranccsal.</span><span class="sxs-lookup"><span data-stu-id="581a2-168">We have put the updated application in "VisualObjects\_V2" with the following command (you may need to modify paths again appropriately).</span></span>

```powershell
Copy-ServiceFabricApplicationPackage  -ApplicationPackagePath .\Samples\Services\Stateful\VisualObjects\VisualObjects\obj\x64\Debug\Package
-ImageStoreConnectionString fabric:ImageStore   -ApplicationPackagePathInImageStore "VisualObjects\_V2"
```

<span data-ttu-id="581a2-169">A következő lépés az, hogy az alkalmazás regisztrálása a Service Fabric, amelyek használatával végezheti el a [Register-ServiceFabricApplicationType](/powershell/module/servicefabric/register-servicefabricapplicationtype?view=azureservicefabricps) parancs:</span><span class="sxs-lookup"><span data-stu-id="581a2-169">The next step is to register this application with Service Fabric, which can be performed using the [Register-ServiceFabricApplicationType](/powershell/module/servicefabric/register-servicefabricapplicationtype?view=azureservicefabricps) command:</span></span>

```powershell
Register-ServiceFabricApplicationType -ApplicationPathInImageStore "VisualObjects\_V2"
```

<span data-ttu-id="581a2-170">Ha az előző parancs nem jár sikerrel, valószínű, hogy kell-e egy újjáépítését az összes szolgáltatás.</span><span class="sxs-lookup"><span data-stu-id="581a2-170">If the preceding command doesn't succeed, it is likely that you need a rebuild of all services.</span></span> <span data-ttu-id="581a2-171">2. lépésben említett, előfordulhat, hogy, valamint a WebService verzióra frissíteni.</span><span class="sxs-lookup"><span data-stu-id="581a2-171">As mentioned in Step 2, you may have to update your WebService version as well.</span></span>

## <a name="step-5-start-the-application-upgrade"></a><span data-ttu-id="581a2-172">5. lépés: Indítsa el az alkalmazás frissítését</span><span class="sxs-lookup"><span data-stu-id="581a2-172">Step 5: Start the application upgrade</span></span>
<span data-ttu-id="581a2-173">Most, még az alkalmazásfrissítés használatával indítsa el az összes beállítása a [Start-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/start-servicefabricapplicationupgrade?view=azureservicefabricps) parancs:</span><span class="sxs-lookup"><span data-stu-id="581a2-173">Now, we're all set to start the application upgrade by using the [Start-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/start-servicefabricapplicationupgrade?view=azureservicefabricps) command:</span></span>

```powershell
Start-ServiceFabricApplicationUpgrade -ApplicationName fabric:/VisualObjects -ApplicationTypeVersion 2.0.0.0 -HealthCheckStableDurationSec 60 -UpgradeDomainTimeoutSec 1200 -UpgradeTimeout 3000   -FailureAction Rollback -Monitored
```


<span data-ttu-id="581a2-174">Az alkalmazás neve nem azonos a leírtaknak azt a *ApplicationManifest.xml* fájlt.</span><span class="sxs-lookup"><span data-stu-id="581a2-174">The application name is the same as it was described in the *ApplicationManifest.xml* file.</span></span> <span data-ttu-id="581a2-175">A Service Fabric azonosítására, mely az alkalmazás első frissítés használja ezt a nevet.</span><span class="sxs-lookup"><span data-stu-id="581a2-175">Service Fabric uses this name to identify which application is getting upgraded.</span></span> <span data-ttu-id="581a2-176">Ha az időtúllépéseket túl rövid, egy hibaüzenet arról, hogy a probléma merülhetnek fel.</span><span class="sxs-lookup"><span data-stu-id="581a2-176">If you set the time-outs to be too short, you may encounter a failure message that states the problem.</span></span> <span data-ttu-id="581a2-177">Tekintse át a hibaelhárítási részt, vagy növelje az időtúllépéseket.</span><span class="sxs-lookup"><span data-stu-id="581a2-177">Refer to the troubleshooting section, or increase the time-outs.</span></span>

<span data-ttu-id="581a2-178">Most, mint az alkalmazás frissítési telepítése folytatódik, figyelheti használatával a Service Fabric Explorer vagy a [Get-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/get-servicefabricapplicationupgrade?view=azureservicefabricps) PowerShell-parancsot:</span><span class="sxs-lookup"><span data-stu-id="581a2-178">Now, as the application upgrade proceeds, you can monitor it using Service Fabric Explorer, or by using the [Get-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/get-servicefabricapplicationupgrade?view=azureservicefabricps) PowerShell command:</span></span> 

```powershell
Get-ServiceFabricApplicationUpgrade fabric:/VisualObjects
```

<span data-ttu-id="581a2-179">Néhány perc múlva, az állapotot, az előző PowerShell-parancs használatával portáltól kell nyújtaniuk, hogy minden frissítési tartományok frissített (elvégezve).</span><span class="sxs-lookup"><span data-stu-id="581a2-179">In a few minutes, the status that you got by using the preceding PowerShell command, should state that all update domains were upgraded (completed).</span></span> <span data-ttu-id="581a2-180">És látnia kell, hogy a böngészőablakban visual objektumok elindította elforgatása!</span><span class="sxs-lookup"><span data-stu-id="581a2-180">And you should find that the visual objects in your browser window have started rotating!</span></span>

<span data-ttu-id="581a2-181">Próbálja meg frissíteni a 3-as verziójú 2-es verzióját, vagy a 2-es verzióra, egy gyakorlatot 1.</span><span class="sxs-lookup"><span data-stu-id="581a2-181">You can try upgrading from version 2 to version 3, or from version 2 to version 1 as an exercise.</span></span> <span data-ttu-id="581a2-182">A 2-es áthelyezése az 1-es frissítés is minősül.</span><span class="sxs-lookup"><span data-stu-id="581a2-182">Moving from version 2 to version 1 is also considered an upgrade.</span></span> <span data-ttu-id="581a2-183">Lejátszás a időtúllépéseket és az állapotházirendeket el saját magának ismeri a őket.</span><span class="sxs-lookup"><span data-stu-id="581a2-183">Play with time-outs and health policies to make yourself familiar with them.</span></span> <span data-ttu-id="581a2-184">Egy Azure fürthöz való telepítéséhez, a paraméterek kell megfelelően be kell állítani.</span><span class="sxs-lookup"><span data-stu-id="581a2-184">When you are deploying to an Azure cluster, the parameters need to be set appropriately.</span></span> <span data-ttu-id="581a2-185">Az időtúllépéseket konzervatív módon beállítása helyes legyen.</span><span class="sxs-lookup"><span data-stu-id="581a2-185">It is good to set the time-outs conservatively.</span></span>

## <a name="next-steps"></a><span data-ttu-id="581a2-186">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="581a2-186">Next steps</span></span>
<span data-ttu-id="581a2-187">[Visual Studio segítségével az alkalmazás frissítését](service-fabric-application-upgrade-tutorial.md) végigvezeti Önt az alkalmazásfrissítés Visual Studio használatával.</span><span class="sxs-lookup"><span data-stu-id="581a2-187">[Upgrading your application using Visual Studio](service-fabric-application-upgrade-tutorial.md) walks you through an application upgrade using Visual Studio.</span></span>

<span data-ttu-id="581a2-188">Szabályozhatja, hogy az alkalmazás használatával frissíti [frissítési paraméterek](service-fabric-application-upgrade-parameters.md).</span><span class="sxs-lookup"><span data-stu-id="581a2-188">Control how your application upgrades by using [upgrade parameters](service-fabric-application-upgrade-parameters.md).</span></span>

<span data-ttu-id="581a2-189">Az alkalmazásfrissítéseket által használatának megtanulása kompatibilissé [adatszerializálás](service-fabric-application-upgrade-data-serialization.md).</span><span class="sxs-lookup"><span data-stu-id="581a2-189">Make your application upgrades compatible by learning how to use [data serialization](service-fabric-application-upgrade-data-serialization.md).</span></span>

<span data-ttu-id="581a2-190">Összetettebb funkciók használata az alkalmazás frissítésekor szakaszra [témakörök speciális](service-fabric-application-upgrade-advanced.md).</span><span class="sxs-lookup"><span data-stu-id="581a2-190">Learn how to use advanced functionality while upgrading your application by referring to [Advanced topics](service-fabric-application-upgrade-advanced.md).</span></span>

<span data-ttu-id="581a2-191">Alkalmazásfrissítések gyakori problémáinak megoldásához hajtsa végre a hivatkozással [alkalmazásfrissítések hibaelhárítási](service-fabric-application-upgrade-troubleshooting.md).</span><span class="sxs-lookup"><span data-stu-id="581a2-191">Fix common problems in application upgrades by referring to the steps in [Troubleshooting application upgrades](service-fabric-application-upgrade-troubleshooting.md).</span></span>

