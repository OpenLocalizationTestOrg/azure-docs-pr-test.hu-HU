---
title: "Az alkalmazásfrissítés: adatszerializálás |} Microsoft Docs"
description: "Ajánlott eljárások az adatok szerializálása és közbeni alkalmazás hatása."
services: service-fabric
documentationcenter: .net
author: vturecek
manager: timlt
editor: 
ms.assetid: a5f36366-a2ab-4ae3-bb08-bc2f9533bc5a
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 06/29/2017
ms.author: vturecek
ms.openlocfilehash: 6aa3ac7842df4657fca7f6b4264e1c6fe52dc0c6
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 07/11/2017
---
# <a name="how-data-serialization-affects-an-application-upgrade"></a><span data-ttu-id="84304-103">Hogyan befolyásolja a adatszerializálás az alkalmazás frissítés</span><span class="sxs-lookup"><span data-stu-id="84304-103">How data serialization affects an application upgrade</span></span>
<span data-ttu-id="84304-104">Az egy [működés közbeni frissítés alkalmazás](service-fabric-application-upgrade.md), a frissítés a csomópontok egy alkészlete, egyszerre több frissítési tartományt vonatkozik.</span><span class="sxs-lookup"><span data-stu-id="84304-104">In a [rolling application upgrade](service-fabric-application-upgrade.md), the upgrade is applied to a subset of nodes, one upgrade domain at a time.</span></span> <span data-ttu-id="84304-105">A folyamat során néhány frissítési tartományok az alkalmazás újabb verziója, és néhány frissítési tartományok az alkalmazás régebbi verzióját.</span><span class="sxs-lookup"><span data-stu-id="84304-105">During this process, some upgrade domains are on the newer version of your application, and some upgrade domains are on the older version of your application.</span></span> <span data-ttu-id="84304-106">A bevezetés alatt az alkalmazás új verzióját kell fogja tudni elolvasni az adatok a korábbi verziója, és az alkalmazás régebbi verziójához tudja olvasni az adatokat az új verziót kell lennie.</span><span class="sxs-lookup"><span data-stu-id="84304-106">During the rollout, the new version of your application must be able to read the old version of your data, and the old version of your application must be able to read the new version of your data.</span></span> <span data-ttu-id="84304-107">Ha az adatformátum nem előre és hátra kompatibilis, a frissítés sikertelen lehet, vagy rosszabb, adatok esetleg elveszett vagy sérült.</span><span class="sxs-lookup"><span data-stu-id="84304-107">If the data format is not forward and backward compatible, the upgrade may fail, or worse, data may be lost or corrupted.</span></span> <span data-ttu-id="84304-108">Ez a cikk ismerteti, mi a adatformátum számít, és annak biztosítása, hogy az adatok előre és hátra ajánlott eljárásai kínál kompatibilis.</span><span class="sxs-lookup"><span data-stu-id="84304-108">This article discusses what constitutes your data format and offers best practices for ensuring that your data is forward and backward compatible.</span></span>

## <a name="what-makes-up-your-data-format"></a><span data-ttu-id="84304-109">Mi az adatformátum alkotó?</span><span class="sxs-lookup"><span data-stu-id="84304-109">What makes up your data format?</span></span>
<span data-ttu-id="84304-110">Az Azure Service Fabric a megőrzött és a replikált adatokat a C# osztályok származik.</span><span class="sxs-lookup"><span data-stu-id="84304-110">In Azure Service Fabric, the data that is persisted and replicated comes from your C# classes.</span></span> <span data-ttu-id="84304-111">Használó alkalmazások esetén [megbízható gyűjtemények](service-fabric-reliable-services-reliable-collections.md), hogy adatokat-e a megbízható szótárakat és a várólisták objektumok.</span><span class="sxs-lookup"><span data-stu-id="84304-111">For applications that use [Reliable Collections](service-fabric-reliable-services-reliable-collections.md), that data is the objects in the reliable dictionaries and queues.</span></span> <span data-ttu-id="84304-112">Használó alkalmazások esetén [Reliable Actors](service-fabric-reliable-actors-introduction.md), vagyis szereplő biztonsági állapotát.</span><span class="sxs-lookup"><span data-stu-id="84304-112">For applications that use [Reliable Actors](service-fabric-reliable-actors-introduction.md), that is the backing state for the actor.</span></span> <span data-ttu-id="84304-113">Ezeket az osztályokat C# tárolása és replikálása szerializálhatónak kell lennie.</span><span class="sxs-lookup"><span data-stu-id="84304-113">These C# classes must be serializable to be persisted and replicated.</span></span> <span data-ttu-id="84304-114">Ezért az adatok formátumát a mezők és tulajdonságok, amelyek szerializálva vannak, valamint hogy szerializálva vannak.</span><span class="sxs-lookup"><span data-stu-id="84304-114">Therefore, the data format is defined by the fields and properties that are serialized, as well as how they are serialized.</span></span> <span data-ttu-id="84304-115">Például egy `IReliableDictionary<int, MyClass>` az adatokat egy szerializált `int` és egy szerializált `MyClass`.</span><span class="sxs-lookup"><span data-stu-id="84304-115">For example, in an `IReliableDictionary<int, MyClass>` the data is a serialized `int` and a serialized `MyClass`.</span></span>

### <a name="code-changes-that-result-in-a-data-format-change"></a><span data-ttu-id="84304-116">Kód változik, hogy akár egy adatok formátumának módosítása</span><span class="sxs-lookup"><span data-stu-id="84304-116">Code changes that result in a data format change</span></span>
<span data-ttu-id="84304-117">Az adatformátum C# osztályok határozza meg, mert az osztályok módosításai okozhat egy adatok formátumának módosítása.</span><span class="sxs-lookup"><span data-stu-id="84304-117">Since the data format is determined by C# classes, changes to the classes may cause a data format change.</span></span> <span data-ttu-id="84304-118">Ügyelni kell arra, hogy a működés közbeni frissítés kezelni tud-e az adatok formátumának módosítása.</span><span class="sxs-lookup"><span data-stu-id="84304-118">Care must be taken to ensure that a rolling upgrade can handle the data format change.</span></span> <span data-ttu-id="84304-119">Példák, amelyek okozhatnak adatok formázása módosításokat:</span><span class="sxs-lookup"><span data-stu-id="84304-119">Examples that may cause data format changes:</span></span>

* <span data-ttu-id="84304-120">Hozzáadásával vagy eltávolításával a mezők és tulajdonságok</span><span class="sxs-lookup"><span data-stu-id="84304-120">Adding or removing fields or properties</span></span>
* <span data-ttu-id="84304-121">Mezők és tulajdonságok átnevezése</span><span class="sxs-lookup"><span data-stu-id="84304-121">Renaming fields or properties</span></span>
* <span data-ttu-id="84304-122">A típusú mezők és tulajdonságok módosítása</span><span class="sxs-lookup"><span data-stu-id="84304-122">Changing the types of fields or properties</span></span>
* <span data-ttu-id="84304-123">Az osztályhoz nevet vagy névteret módosítása</span><span class="sxs-lookup"><span data-stu-id="84304-123">Changing the class name or namespace</span></span>

### <a name="data-contract-as-the-default-serializer"></a><span data-ttu-id="84304-124">Adategyezmény, mint az alapértelmezett szerializáló</span><span class="sxs-lookup"><span data-stu-id="84304-124">Data Contract as the default serializer</span></span>
<span data-ttu-id="84304-125">A szerializáló felelős általában az adatok olvasása és deszerializálása során az aktuális verziójában, még akkor is, ha az adatok korábbi vagy *újabb* verziója.</span><span class="sxs-lookup"><span data-stu-id="84304-125">The serializer is generally responsible for reading the data and deserializing it into the current version, even if the data is in an older or *newer* version.</span></span> <span data-ttu-id="84304-126">Az alapértelmezett szerializáló van a [adategyezmény-szerializáló](https://msdn.microsoft.com/library/ms733127.aspx), amely jól meghatározott versioning szabályokkal rendelkeznek.</span><span class="sxs-lookup"><span data-stu-id="84304-126">The default serializer is the [Data Contract serializer](https://msdn.microsoft.com/library/ms733127.aspx), which has well-defined versioning rules.</span></span> <span data-ttu-id="84304-127">Gyűjtemények engedélyezése a szerializáló felülbírálását, de a Reliable Actors jelenleg nem megbízható.</span><span class="sxs-lookup"><span data-stu-id="84304-127">Reliable Collections allow the serializer to be overridden, but Reliable Actors currently do not.</span></span> <span data-ttu-id="84304-128">Az adatok szerializáló a működés közbeni frissítés fontos szerepet játszik.</span><span class="sxs-lookup"><span data-stu-id="84304-128">The data serializer plays an important role in enabling rolling upgrades.</span></span> <span data-ttu-id="84304-129">Az adategyezmény-szerializáló a Service Fabric-alkalmazások általunk javasolt szerializáló.</span><span class="sxs-lookup"><span data-stu-id="84304-129">The Data Contract serializer is the serializer that we recommend for Service Fabric applications.</span></span>

## <a name="how-the-data-format-affects-a-rolling-upgrade"></a><span data-ttu-id="84304-130">Hogyan befolyásolja az adatformátum a működés közbeni frissítés</span><span class="sxs-lookup"><span data-stu-id="84304-130">How the data format affects a rolling upgrade</span></span>
<span data-ttu-id="84304-131">A működés közbeni frissítés során nincsenek kétféle módon történhet, ahol a szerializáló régebbi észlelhetnek vagy *újabb* az adatok verziója:</span><span class="sxs-lookup"><span data-stu-id="84304-131">During a rolling upgrade, there are two main scenarios where the serializer may encounter an older or *newer* version of your data:</span></span>

1. <span data-ttu-id="84304-132">Miután egy csomópont frissítve van, és biztonsági mentése elindul, az új szerializáló tölti be lett megőrzött adatok lemezre régi verziója.</span><span class="sxs-lookup"><span data-stu-id="84304-132">After a node is upgraded and starts back up, the new serializer will load the data that was persisted to disk by the old version.</span></span>
2. <span data-ttu-id="84304-133">A működés közbeni frissítés során a fürt a régi és új verziókat a kód vegyesen fogja tartalmazni.</span><span class="sxs-lookup"><span data-stu-id="84304-133">During the rolling upgrade, the cluster will contain a mix of the old and new versions of your code.</span></span> <span data-ttu-id="84304-134">Replikák különböző frissítési tartományok kerülnek, és replikák adatokat küldeni a egymástól, az adatok új és/vagy a régi verzióját a szerializáló az új és/vagy a régi verziója fordulhatnak elő.</span><span class="sxs-lookup"><span data-stu-id="84304-134">Since replicas may be placed in different upgrade domains, and replicas send data to each other, the new and/or old version of your data may be encountered by the new and/or old version of your serializer.</span></span>

> [!NOTE]
> <span data-ttu-id="84304-135">Az "új verzió" és "régi verzió" Itt tekintse meg a futó kód verziója.</span><span class="sxs-lookup"><span data-stu-id="84304-135">The "new version" and "old version" here refer to the version of your code that is running.</span></span> <span data-ttu-id="84304-136">Az "új szerializáló" hivatkozik a szerializáló kódot, amely végrehajtja az az alkalmazás új verziója.</span><span class="sxs-lookup"><span data-stu-id="84304-136">The "new serializer" refers to the serializer code that is executing in the new version of your application.</span></span> <span data-ttu-id="84304-137">Az "új adatok" hivatkozik a szerializált C# az alkalmazás új verziója.</span><span class="sxs-lookup"><span data-stu-id="84304-137">The "new data" refers to the serialized C# class from the new version of your application.</span></span>
> 
> 

<span data-ttu-id="84304-138">Kódja és adatai formátum két verziója kell lennie, továbbítás és a visszamenőlegesen kompatibilis.</span><span class="sxs-lookup"><span data-stu-id="84304-138">The two versions of code and data format must be both forward and backward compatible.</span></span> <span data-ttu-id="84304-139">Ha azok nem kompatibilisek, a működés közbeni frissítés sikertelen lehet, vagy adatvesztés történhet.</span><span class="sxs-lookup"><span data-stu-id="84304-139">If they are not compatible, the rolling upgrade may fail or data may be lost.</span></span> <span data-ttu-id="84304-140">A működés közbeni frissítés meghiúsulhat, mert a kódban, illetve a szerializáló generálhat kivételek vagy hiba esetén a másik verziója.</span><span class="sxs-lookup"><span data-stu-id="84304-140">The rolling upgrade may fail because the code or serializer may throw exceptions or a fault when it encounters the other version.</span></span> <span data-ttu-id="84304-141">Adatok elveszhetnek, ha például egy új tulajdonság hozzá lett adva, de a régi szerializáló elveti deszerializálása során.</span><span class="sxs-lookup"><span data-stu-id="84304-141">Data may be lost if, for example, a new property was added but the old serializer discards it during deserialization.</span></span>

<span data-ttu-id="84304-142">Adategyezmény-e annak biztosítása, hogy az adatok kompatibilis az ajánlott megoldás.</span><span class="sxs-lookup"><span data-stu-id="84304-142">Data Contract is the recommended solution for ensuring that your data is compatible.</span></span> <span data-ttu-id="84304-143">Rendelkezik, jól meghatározott versioning szabályok hozzáadása, eltávolítása és mezők módosítása</span><span class="sxs-lookup"><span data-stu-id="84304-143">It has well-defined versioning rules for adding, removing, and changing fields.</span></span> <span data-ttu-id="84304-144">Azt is támogatja az ismeretlen mezők foglalkoznak, a szerializálás és a deszerializálás folyamatba csatlakoztatás és osztályöröklődést foglalkoznak.</span><span class="sxs-lookup"><span data-stu-id="84304-144">It also has support for dealing with unknown fields, hooking into the serialization and deserialization process, and dealing with class inheritance.</span></span> <span data-ttu-id="84304-145">További információkért lásd: [adategyezmény használatával](https://msdn.microsoft.com/library/ms733127.aspx).</span><span class="sxs-lookup"><span data-stu-id="84304-145">For more information, see [Using Data Contract](https://msdn.microsoft.com/library/ms733127.aspx).</span></span>

## <a name="next-steps"></a><span data-ttu-id="84304-146">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="84304-146">Next steps</span></span>
<span data-ttu-id="84304-147">[Az alkalmazás használata a Visual Studio frissítése](service-fabric-application-upgrade-tutorial.md) végigvezeti Önt az alkalmazásfrissítés Visual Studio használatával.</span><span class="sxs-lookup"><span data-stu-id="84304-147">[Upgrading your Application Using Visual Studio](service-fabric-application-upgrade-tutorial.md) walks you through an application upgrade using Visual Studio.</span></span>

<span data-ttu-id="84304-148">[Az alkalmazás használatával Powershell frissítése](service-fabric-application-upgrade-tutorial-powershell.md) végigvezeti Önt az alkalmazásfrissítés PowerShell használatával.</span><span class="sxs-lookup"><span data-stu-id="84304-148">[Upgrading your Application Using Powershell](service-fabric-application-upgrade-tutorial-powershell.md) walks you through an application upgrade using PowerShell.</span></span>

<span data-ttu-id="84304-149">Szabályozhatja, hogy az alkalmazás használatával frissíti [frissítése paraméterek](service-fabric-application-upgrade-parameters.md).</span><span class="sxs-lookup"><span data-stu-id="84304-149">Control how your application upgrades by using [Upgrade Parameters](service-fabric-application-upgrade-parameters.md).</span></span>

<span data-ttu-id="84304-150">Összetettebb funkciók használata az alkalmazás frissítésekor szakaszra [Speciális témakörök](service-fabric-application-upgrade-advanced.md).</span><span class="sxs-lookup"><span data-stu-id="84304-150">Learn how to use advanced functionality while upgrading your application by referring to [Advanced Topics](service-fabric-application-upgrade-advanced.md).</span></span>

<span data-ttu-id="84304-151">Alkalmazásfrissítések gyakori problémáinak megoldásához hajtsa végre a hivatkozással [Alkalmazásfrissítések hibaelhárítási ](service-fabric-application-upgrade-troubleshooting.md).</span><span class="sxs-lookup"><span data-stu-id="84304-151">Fix common problems in application upgrades by referring to the steps in [Troubleshooting Application Upgrades ](service-fabric-application-upgrade-troubleshooting.md).</span></span>

