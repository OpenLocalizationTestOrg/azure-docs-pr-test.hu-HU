---
title: "Az alkalmazásfrissítés: adatszerializálás |} Microsoft Docs"
description: "Ajánlott eljárások az adatok szerializálása és közbeni alkalmazás hatása."
services: service-fabric
documentationcenter: .net
author: vturecek
manager: timlt
editor: 
ms.assetid: a5f36366-a2ab-4ae3-bb08-bc2f9533bc5a
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 06/29/2017
ms.author: vturecek
ms.openlocfilehash: 1b65dfd3813423550631490640a81953864f58e3
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/06/2017
---
# <a name="how-data-serialization-affects-an-application-upgrade"></a><span data-ttu-id="f38f3-103">Hogyan befolyásolja a adatszerializálás az alkalmazás frissítés</span><span class="sxs-lookup"><span data-stu-id="f38f3-103">How data serialization affects an application upgrade</span></span>
<span data-ttu-id="f38f3-104">Az egy [működés közbeni frissítés alkalmazás](service-fabric-application-upgrade.md), hello frissítés alkalmazott tooa részhalmazát csomópontok, egyszerre több frissítési tartományt.</span><span class="sxs-lookup"><span data-stu-id="f38f3-104">In a [rolling application upgrade](service-fabric-application-upgrade.md), hello upgrade is applied tooa subset of nodes, one upgrade domain at a time.</span></span> <span data-ttu-id="f38f3-105">A folyamat során néhány frissítési tartományok hello az alkalmazás újabb verzióját, és néhány frissítési tartományok hello az alkalmazás régebbi verzióján.</span><span class="sxs-lookup"><span data-stu-id="f38f3-105">During this process, some upgrade domains are on hello newer version of your application, and some upgrade domains are on hello older version of your application.</span></span> <span data-ttu-id="f38f3-106">Hello bevezetés alatt hello új az alkalmazás verziójúnak kell lennie képes tooread hello régi adatait, és hello régi az alkalmazás verziójúnak kell lennie képes tooread hello új adatait.</span><span class="sxs-lookup"><span data-stu-id="f38f3-106">During hello rollout, hello new version of your application must be able tooread hello old version of your data, and hello old version of your application must be able tooread hello new version of your data.</span></span> <span data-ttu-id="f38f3-107">Ha hello adatok formátuma nem kompatibilis, hello frissítés előre és hátra sikertelen vagy rosszabb, adatok előfordulhat, hogy elvész vagy sérült.</span><span class="sxs-lookup"><span data-stu-id="f38f3-107">If hello data format is not forward and backward compatible, hello upgrade may fail, or worse, data may be lost or corrupted.</span></span> <span data-ttu-id="f38f3-108">Ez a cikk ismerteti, mi a adatformátum számít, és annak biztosítása, hogy az adatok előre és hátra ajánlott eljárásai kínál kompatibilis.</span><span class="sxs-lookup"><span data-stu-id="f38f3-108">This article discusses what constitutes your data format and offers best practices for ensuring that your data is forward and backward compatible.</span></span>

## <a name="what-makes-up-your-data-format"></a><span data-ttu-id="f38f3-109">Mi az adatformátum alkotó?</span><span class="sxs-lookup"><span data-stu-id="f38f3-109">What makes up your data format?</span></span>
<span data-ttu-id="f38f3-110">Az Azure Service Fabric megőrzött és a replikált hello adatok a C# osztályok származik.</span><span class="sxs-lookup"><span data-stu-id="f38f3-110">In Azure Service Fabric, hello data that is persisted and replicated comes from your C# classes.</span></span> <span data-ttu-id="f38f3-111">Használó alkalmazások esetén [megbízható gyűjtemények](service-fabric-reliable-services-reliable-collections.md), hogy adatokat hello objektumok hello megbízható szótárakat és a várólisták-e.</span><span class="sxs-lookup"><span data-stu-id="f38f3-111">For applications that use [Reliable Collections](service-fabric-reliable-services-reliable-collections.md), that data is hello objects in hello reliable dictionaries and queues.</span></span> <span data-ttu-id="f38f3-112">Használó alkalmazások esetén [Reliable Actors](service-fabric-reliable-actors-introduction.md), vagyis hello szereplő állapota biztonsági hello.</span><span class="sxs-lookup"><span data-stu-id="f38f3-112">For applications that use [Reliable Actors](service-fabric-reliable-actors-introduction.md), that is hello backing state for hello actor.</span></span> <span data-ttu-id="f38f3-113">Ezeket az osztályokat C# szerializálhatónak kell lennie toobe tárolása és replikálása.</span><span class="sxs-lookup"><span data-stu-id="f38f3-113">These C# classes must be serializable toobe persisted and replicated.</span></span> <span data-ttu-id="f38f3-114">Ezért hello adatformátum induló hello mezőit és tulajdonságait, amelyek szerializálva vannak, valamint hogy szerializálva vannak.</span><span class="sxs-lookup"><span data-stu-id="f38f3-114">Therefore, hello data format is defined by hello fields and properties that are serialized, as well as how they are serialized.</span></span> <span data-ttu-id="f38f3-115">Például egy `IReliableDictionary<int, MyClass>` hello adatokat egy szerializált `int` és egy szerializált `MyClass`.</span><span class="sxs-lookup"><span data-stu-id="f38f3-115">For example, in an `IReliableDictionary<int, MyClass>` hello data is a serialized `int` and a serialized `MyClass`.</span></span>

### <a name="code-changes-that-result-in-a-data-format-change"></a><span data-ttu-id="f38f3-116">Kód változik, hogy akár egy adatok formátumának módosítása</span><span class="sxs-lookup"><span data-stu-id="f38f3-116">Code changes that result in a data format change</span></span>
<span data-ttu-id="f38f3-117">Hello adatformátum C# osztályok határozza meg, mert a módosítások toohello osztályok egy adatok formátumának módosítása okozhatja.</span><span class="sxs-lookup"><span data-stu-id="f38f3-117">Since hello data format is determined by C# classes, changes toohello classes may cause a data format change.</span></span> <span data-ttu-id="f38f3-118">Ügyelni kell a működés közbeni frissítés kezelhető tooensure hello adatok formázása módosítása.</span><span class="sxs-lookup"><span data-stu-id="f38f3-118">Care must be taken tooensure that a rolling upgrade can handle hello data format change.</span></span> <span data-ttu-id="f38f3-119">Példák, amelyek okozhatnak adatok formázása módosításokat:</span><span class="sxs-lookup"><span data-stu-id="f38f3-119">Examples that may cause data format changes:</span></span>

* <span data-ttu-id="f38f3-120">Hozzáadásával vagy eltávolításával a mezők és tulajdonságok</span><span class="sxs-lookup"><span data-stu-id="f38f3-120">Adding or removing fields or properties</span></span>
* <span data-ttu-id="f38f3-121">Mezők és tulajdonságok átnevezése</span><span class="sxs-lookup"><span data-stu-id="f38f3-121">Renaming fields or properties</span></span>
* <span data-ttu-id="f38f3-122">Hello típusú mezők és tulajdonságok módosítása</span><span class="sxs-lookup"><span data-stu-id="f38f3-122">Changing hello types of fields or properties</span></span>
* <span data-ttu-id="f38f3-123">Hello osztály nevet vagy névteret módosítása</span><span class="sxs-lookup"><span data-stu-id="f38f3-123">Changing hello class name or namespace</span></span>

### <a name="data-contract-as-hello-default-serializer"></a><span data-ttu-id="f38f3-124">Adategyezmény, alapértelmezett szerializáló hello</span><span class="sxs-lookup"><span data-stu-id="f38f3-124">Data Contract as hello default serializer</span></span>
<span data-ttu-id="f38f3-125">hello szerializáló felelős általában hello adatainak olvasása és deszerializálása azt hello aktuális verziójában, még akkor is, ha hello adatok korábbi vagy *újabb* verziója.</span><span class="sxs-lookup"><span data-stu-id="f38f3-125">hello serializer is generally responsible for reading hello data and deserializing it into hello current version, even if hello data is in an older or *newer* version.</span></span> <span data-ttu-id="f38f3-126">hello alapértelmezett szerializáló hello [adategyezmény-szerializáló](https://msdn.microsoft.com/library/ms733127.aspx), amely jól meghatározott versioning szabályokkal rendelkeznek.</span><span class="sxs-lookup"><span data-stu-id="f38f3-126">hello default serializer is hello [Data Contract serializer](https://msdn.microsoft.com/library/ms733127.aspx), which has well-defined versioning rules.</span></span> <span data-ttu-id="f38f3-127">Gyűjtemények engedélyezése hello szerializáló toobe felül, de a Reliable Actors jelenleg nem megbízható.</span><span class="sxs-lookup"><span data-stu-id="f38f3-127">Reliable Collections allow hello serializer toobe overridden, but Reliable Actors currently do not.</span></span> <span data-ttu-id="f38f3-128">hello adatok szerializáló a működés közbeni frissítés fontos szerepet játszik.</span><span class="sxs-lookup"><span data-stu-id="f38f3-128">hello data serializer plays an important role in enabling rolling upgrades.</span></span> <span data-ttu-id="f38f3-129">hello adategyezmény-szerializáló, amely a Service Fabric-alkalmazásokhoz ajánlott hello szerializáló.</span><span class="sxs-lookup"><span data-stu-id="f38f3-129">hello Data Contract serializer is hello serializer that we recommend for Service Fabric applications.</span></span>

## <a name="how-hello-data-format-affects-a-rolling-upgrade"></a><span data-ttu-id="f38f3-130">Hogyan befolyásolja az hello adatformátum a működés közbeni frissítés</span><span class="sxs-lookup"><span data-stu-id="f38f3-130">How hello data format affects a rolling upgrade</span></span>
<span data-ttu-id="f38f3-131">A működés közbeni frissítés során nincsenek kétféle módon történhet, ahol hello szerializáló régebbi észlelhetnek vagy *újabb* az adatok verziója:</span><span class="sxs-lookup"><span data-stu-id="f38f3-131">During a rolling upgrade, there are two main scenarios where hello serializer may encounter an older or *newer* version of your data:</span></span>

1. <span data-ttu-id="f38f3-132">Miután egy csomópont frissítve van, és biztonsági mentése elindul, hello új szerializáló hello régi verziója megőrzött toodisk hello adat tölti be.</span><span class="sxs-lookup"><span data-stu-id="f38f3-132">After a node is upgraded and starts back up, hello new serializer will load hello data that was persisted toodisk by hello old version.</span></span>
2. <span data-ttu-id="f38f3-133">Működés közbeni frissítés hello, során hello fürt hello régi és új verziókat a kód vegyesen fogja tartalmazni.</span><span class="sxs-lookup"><span data-stu-id="f38f3-133">During hello rolling upgrade, hello cluster will contain a mix of hello old and new versions of your code.</span></span> <span data-ttu-id="f38f3-134">Mivel replikák különböző frissítési tartományok kerülnek, és a replikák küldése adatok tooeach más, hello új és/vagy a régi verziója, az adatok a szerializáló az új és/vagy a régi verziója hello fordulhatnak elő.</span><span class="sxs-lookup"><span data-stu-id="f38f3-134">Since replicas may be placed in different upgrade domains, and replicas send data tooeach other, hello new and/or old version of your data may be encountered by hello new and/or old version of your serializer.</span></span>

> [!NOTE]
> <span data-ttu-id="f38f3-135">"új" és "régi verziója" Hello itt tekintse meg a kódot futtató toohello verzióját.</span><span class="sxs-lookup"><span data-stu-id="f38f3-135">hello "new version" and "old version" here refer toohello version of your code that is running.</span></span> <span data-ttu-id="f38f3-136">"új szerializáló" Hello, amely végrehajtja az az alkalmazás új verziójának hello toohello szerializáló kód hivatkozik.</span><span class="sxs-lookup"><span data-stu-id="f38f3-136">hello "new serializer" refers toohello serializer code that is executing in hello new version of your application.</span></span> <span data-ttu-id="f38f3-137">hello "új adatok" az alkalmazás új verziójának hello szerializált toohello C# osztály hivatkozik.</span><span class="sxs-lookup"><span data-stu-id="f38f3-137">hello "new data" refers toohello serialized C# class from hello new version of your application.</span></span>
> 
> 

<span data-ttu-id="f38f3-138">hello kód két verziója és az adatformátum előre és hátra kell lennie. kompatibilis.</span><span class="sxs-lookup"><span data-stu-id="f38f3-138">hello two versions of code and data format must be both forward and backward compatible.</span></span> <span data-ttu-id="f38f3-139">Ha nem kompatibilis, működés közbeni frissítés hello sikertelenek lehetnek, vagy adatvesztés történhet.</span><span class="sxs-lookup"><span data-stu-id="f38f3-139">If they are not compatible, hello rolling upgrade may fail or data may be lost.</span></span> <span data-ttu-id="f38f3-140">működés közbeni frissítés hello sikertelen lehet, mert hello kód vagy a szerializáló generálhat kivételek vagy hiba esetén hello más verziót.</span><span class="sxs-lookup"><span data-stu-id="f38f3-140">hello rolling upgrade may fail because hello code or serializer may throw exceptions or a fault when it encounters hello other version.</span></span> <span data-ttu-id="f38f3-141">Adatok elveszhetnek, ha például egy új tulajdonság hozzá lett adva, de hello régi szerializáló elveti deszerializálása során.</span><span class="sxs-lookup"><span data-stu-id="f38f3-141">Data may be lost if, for example, a new property was added but hello old serializer discards it during deserialization.</span></span>

<span data-ttu-id="f38f3-142">Adategyezmény ajánlott megoldás annak biztosítása, hogy az adatok kompatibilis hello.</span><span class="sxs-lookup"><span data-stu-id="f38f3-142">Data Contract is hello recommended solution for ensuring that your data is compatible.</span></span> <span data-ttu-id="f38f3-143">Rendelkezik, jól meghatározott versioning szabályok hozzáadása, eltávolítása és mezők módosítása</span><span class="sxs-lookup"><span data-stu-id="f38f3-143">It has well-defined versioning rules for adding, removing, and changing fields.</span></span> <span data-ttu-id="f38f3-144">Azt is támogatja az ismeretlen mezők foglalkoznak, hello szerializálása és deszerializálása folyamatba csatlakoztatás és osztályöröklődést foglalkoznak.</span><span class="sxs-lookup"><span data-stu-id="f38f3-144">It also has support for dealing with unknown fields, hooking into hello serialization and deserialization process, and dealing with class inheritance.</span></span> <span data-ttu-id="f38f3-145">További információkért lásd: [adategyezmény használatával](https://msdn.microsoft.com/library/ms733127.aspx).</span><span class="sxs-lookup"><span data-stu-id="f38f3-145">For more information, see [Using Data Contract](https://msdn.microsoft.com/library/ms733127.aspx).</span></span>

## <a name="next-steps"></a><span data-ttu-id="f38f3-146">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="f38f3-146">Next steps</span></span>
<span data-ttu-id="f38f3-147">[Az alkalmazás használata a Visual Studio frissítése](service-fabric-application-upgrade-tutorial.md) végigvezeti Önt az alkalmazásfrissítés Visual Studio használatával.</span><span class="sxs-lookup"><span data-stu-id="f38f3-147">[Upgrading your Application Using Visual Studio](service-fabric-application-upgrade-tutorial.md) walks you through an application upgrade using Visual Studio.</span></span>

<span data-ttu-id="f38f3-148">[Az alkalmazás használatával Powershell frissítése](service-fabric-application-upgrade-tutorial-powershell.md) végigvezeti Önt az alkalmazásfrissítés PowerShell használatával.</span><span class="sxs-lookup"><span data-stu-id="f38f3-148">[Upgrading your Application Using Powershell](service-fabric-application-upgrade-tutorial-powershell.md) walks you through an application upgrade using PowerShell.</span></span>

<span data-ttu-id="f38f3-149">Szabályozhatja, hogy az alkalmazás használatával frissíti [frissítése paraméterek](service-fabric-application-upgrade-parameters.md).</span><span class="sxs-lookup"><span data-stu-id="f38f3-149">Control how your application upgrades by using [Upgrade Parameters](service-fabric-application-upgrade-parameters.md).</span></span>

<span data-ttu-id="f38f3-150">Ismerje meg, hogyan toouse speciális azáltal túl az alkalmazás frissítésekor funkció[Speciális témakörök](service-fabric-application-upgrade-advanced.md).</span><span class="sxs-lookup"><span data-stu-id="f38f3-150">Learn how toouse advanced functionality while upgrading your application by referring too[Advanced Topics](service-fabric-application-upgrade-advanced.md).</span></span>

<span data-ttu-id="f38f3-151">Javítsa ki a gyakori problémákat alkalmazásfrissítések toohello lépéseit hivatkozással [Alkalmazásfrissítések hibaelhárítási ](service-fabric-application-upgrade-troubleshooting.md).</span><span class="sxs-lookup"><span data-stu-id="f38f3-151">Fix common problems in application upgrades by referring toohello steps in [Troubleshooting Application Upgrades ](service-fabric-application-upgrade-troubleshooting.md).</span></span>

