---
title: "A Windows Azure mikroszolgáltatások hibakeresése |} Microsoft Docs"
description: "Megtudhatja, hogyan figyelése és diagnosztizálása a szolgáltatások egy helyi fejlesztési gépen a Microsoft Azure Service Fabric használatával készítettek."
services: service-fabric
documentationcenter: .net
author: dkkapur
manager: timlt
editor: 
ms.assetid: edcc0631-ed2d-45a3-851d-2c4fa0f4a326
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 04/24/2017
ms.author: dekapur
ms.openlocfilehash: 08998340afb2f242b9a268331607b0d1ddb9b0c6
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 07/11/2017
---
# <a name="monitor-and-diagnose-services-in-a-local-machine-development-setup"></a><span data-ttu-id="da3a6-103">Figyelése és diagnosztizálása szolgáltatásai a helyi számítógép fejlesztési beállítása</span><span class="sxs-lookup"><span data-stu-id="da3a6-103">Monitor and diagnose services in a local machine development setup</span></span>
> [!div class="op_single_selector"]
> * [<span data-ttu-id="da3a6-104">Windows</span><span class="sxs-lookup"><span data-stu-id="da3a6-104">Windows</span></span>](service-fabric-diagnostics-how-to-monitor-and-diagnose-services-locally.md)
> * [<span data-ttu-id="da3a6-105">Linux</span><span class="sxs-lookup"><span data-stu-id="da3a6-105">Linux</span></span>](service-fabric-diagnostics-how-to-monitor-and-diagnose-services-locally-linux.md)
> 
> 

<span data-ttu-id="da3a6-106">Figyelés, észlelésére, diagnosztizálása és hibaelhárítási lehetővé teszi a felhasználói élmény minimális megszakadását folytatásához szolgáltatások.</span><span class="sxs-lookup"><span data-stu-id="da3a6-106">Monitoring, detecting, diagnosing, and troubleshooting allow for services to continue with minimal disruption to the user experience.</span></span> <span data-ttu-id="da3a6-107">Amíg figyelése és a diagnosztika nem kritikus tényleges telepített éles környezetben, a hatékonyság függ hasonló modell bevezetése szolgáltatásokat, hogy biztosítsa a működnek, helyez át egy valós telepítés fejlesztése során.</span><span class="sxs-lookup"><span data-stu-id="da3a6-107">While monitoring and diagnostics are critical in an actual deployed production environment, the efficiency will depend on adopting a similar model during development of services to ensure they work when you move to a real-world setup.</span></span> <span data-ttu-id="da3a6-108">A Service Fabric megkönnyíti a szolgáltatás fejlesztők számára, amely zökkenőmentesen használható legyen a helyi fejlesztési egyszámítógépes beállításokat és a valós üzemi fürt beállítások diagnosztika megvalósításához.</span><span class="sxs-lookup"><span data-stu-id="da3a6-108">Service Fabric makes it easy for service developers to implement diagnostics that can seamlessly work across both single-machine local development setups and real-world production cluster setups.</span></span>

## <a name="event-tracing-for-windows"></a><span data-ttu-id="da3a6-109">A Windows esemény-nyomkövetés</span><span class="sxs-lookup"><span data-stu-id="da3a6-109">Event Tracing for Windows</span></span>
<span data-ttu-id="da3a6-110">[Esemény nyomkövetése Windows](https://msdn.microsoft.com/library/windows/desktop/bb968803.aspx) (ETW) egy nyomkövetési üzenet, a Service Fabric ajánlott technológia.</span><span class="sxs-lookup"><span data-stu-id="da3a6-110">[Event Tracing for Windows](https://msdn.microsoft.com/library/windows/desktop/bb968803.aspx) (ETW) is the recommended technology for tracing messages in Service Fabric.</span></span> <span data-ttu-id="da3a6-111">Néhány ETW használatának előnyei a következők:</span><span class="sxs-lookup"><span data-stu-id="da3a6-111">Some benefits of using ETW are:</span></span>

* <span data-ttu-id="da3a6-112">**ETW gyors.**</span><span class="sxs-lookup"><span data-stu-id="da3a6-112">**ETW is fast.**</span></span> <span data-ttu-id="da3a6-113">A nyomkövetés technológia, amely rendelkezik egy kód végrehajtásának lassúságát gyakorolt minimális hatás mellett azokat készítették.</span><span class="sxs-lookup"><span data-stu-id="da3a6-113">It was built as a tracing technology that has minimal impact on code execution times.</span></span>
* <span data-ttu-id="da3a6-114">**ETW-nyomkövetés zökkenőmentesen helyi fejlesztési környezetekben, és valós fürt beállítások között.**</span><span class="sxs-lookup"><span data-stu-id="da3a6-114">**ETW tracing works seamlessly across local development environments and also real-world cluster setups.**</span></span> <span data-ttu-id="da3a6-115">Ez azt jelenti, hogy nem kell újraírnia a a nyomkövetés programot, amikor készen áll a kód telepítésére valós fürtre.</span><span class="sxs-lookup"><span data-stu-id="da3a6-115">This  means you don't have to rewrite your tracing code when you are ready to deploy your code to a real cluster.</span></span>
* <span data-ttu-id="da3a6-116">**A Service Fabric rendszer kód ETW is használja a belső nyomkövetés.**</span><span class="sxs-lookup"><span data-stu-id="da3a6-116">**Service Fabric system code also uses ETW for internal tracing.**</span></span> <span data-ttu-id="da3a6-117">Ez lehetővé teszi, hogy az alkalmazás nyomkövetési adatait, a Service Fabric rendszer nyomkövetések időosztásos megtekintése.</span><span class="sxs-lookup"><span data-stu-id="da3a6-117">This allows you to view your application traces interleaved with Service Fabric system traces.</span></span> <span data-ttu-id="da3a6-118">Emellett segít, hogy a rendszer könnyebb megérteni a feladatütemezések és a kapcsolatokat, az alkalmazás kódjában és az események között.</span><span class="sxs-lookup"><span data-stu-id="da3a6-118">It also helps you to more easily understand the sequences and interrelationships between your application code and events in the underlying system.</span></span>
* <span data-ttu-id="da3a6-119">**A rendszer az ETW-események megtekintése a Service Fabric Visual Studio eszközök beépített támogatja.**</span><span class="sxs-lookup"><span data-stu-id="da3a6-119">**There is built-in support in Service Fabric Visual Studio tools to view ETW events.**</span></span> <span data-ttu-id="da3a6-120">Után a Service Fabric megfelelően konfigurálva a Visual Studio ETW-események jelennek meg a Visual Studio a diagnosztikai nézetben.</span><span class="sxs-lookup"><span data-stu-id="da3a6-120">ETW events appear in the Diagnostic Events view of Visual Studio once Visual Studio is correctly configured with Service Fabric.</span></span> 

## <a name="view-service-fabric-system-events-in-visual-studio"></a><span data-ttu-id="da3a6-121">A Visual Studio Service Fabric rendszer eseményeinek megtekintése</span><span class="sxs-lookup"><span data-stu-id="da3a6-121">View Service Fabric system events in Visual Studio</span></span>
<span data-ttu-id="da3a6-122">A Service Fabric bocsát ki, hogy mi történik, a platform alkalmazásfejlesztők segítségével ETW-események.</span><span class="sxs-lookup"><span data-stu-id="da3a6-122">Service Fabric emits ETW events to help application developers understand what's happening in the platform.</span></span> <span data-ttu-id="da3a6-123">Ha még nem tette meg, lépjen tovább, és kövesse a [az első alkalmazás létrehozásának a Visual Studio](service-fabric-create-your-first-application-in-visual-studio.md).</span><span class="sxs-lookup"><span data-stu-id="da3a6-123">If you haven't already done so, go ahead and follow the steps in [Creating your first application in Visual Studio](service-fabric-create-your-first-application-in-visual-studio.md).</span></span> <span data-ttu-id="da3a6-124">Ezek az információk segítségével egy alkalmazás működik, és az diagnosztikai eseménynapló a nyomkövetési üzenetek megjelenítése.</span><span class="sxs-lookup"><span data-stu-id="da3a6-124">This information will help you get an application up and running with the Diagnostics Events Viewer showing the trace messages.</span></span>

1. <span data-ttu-id="da3a6-125">Ha a diagnosztika események ablak automatikusan jelenjen meg, lépjen a **nézet** a Visual Studio lapra, majd **más Windows** , majd **diagnosztikai eseménynaplóhoz**.</span><span class="sxs-lookup"><span data-stu-id="da3a6-125">If the diagnostics events window does not automatically show, Go to the **View** tab in Visual Studio, choose **Other Windows** and then **Diagnostic Events Viewer**.</span></span>
2. <span data-ttu-id="da3a6-126">Mindegyik esemény rendelkezik szabványos metaadat-információi, amely jelzi, hogy a csomópont, alkalmazás és szolgáltatás, az esemény származik.</span><span class="sxs-lookup"><span data-stu-id="da3a6-126">Each event has standard metadata information that tells you the node, application and service the event is coming from.</span></span> <span data-ttu-id="da3a6-127">Az események listájának használatával is végezhet a **események szűréséhez** be az események ablak tetején.</span><span class="sxs-lookup"><span data-stu-id="da3a6-127">You can also filter the list of events by using the **Filter events** box at the top of the events window.</span></span> <span data-ttu-id="da3a6-128">Végezhet, például a **csomópontnév** vagy **szolgáltatás neve.**</span><span class="sxs-lookup"><span data-stu-id="da3a6-128">For example, you can filter on **Node Name** or **Service Name.**</span></span> <span data-ttu-id="da3a6-129">Amikor tartózkodik esemény részleteit, fel is függesztheti használatával, és a **szüneteltetése** gombra az események ablak tetején, majd később események adatvesztés nélkül folytathatja.</span><span class="sxs-lookup"><span data-stu-id="da3a6-129">And when you're looking at event details, you can also pause by using the **Pause** button at the top of the events window and resume later without any loss of events.</span></span>
   
   ![A Visual Studio diagnosztikai eseménynapló](./media/service-fabric-diagnostics-how-to-monitor-and-diagnose-services-locally/DiagEventsExamples2.png)

## <a name="add-your-own-custom-traces-to-the-application-code"></a><span data-ttu-id="da3a6-131">Adja hozzá a saját egyéni nyomkövetési adatokat az alkalmazás kódja</span><span class="sxs-lookup"><span data-stu-id="da3a6-131">Add your own custom traces to the application code</span></span>
<span data-ttu-id="da3a6-132">A Service Fabric Visual Studio projektsablonjai példakódot tartalmaz.</span><span class="sxs-lookup"><span data-stu-id="da3a6-132">The Service Fabric Visual Studio project templates contain sample code.</span></span> <span data-ttu-id="da3a6-133">A kód bemutatja, hogyan egyéni alkalmazás kód ETW-nyomkövetési adatok jelennek meg a Visual Studio ETW megjelenítő rendszer nyomkövetések mellett a Service Fabric hozzáadásához.</span><span class="sxs-lookup"><span data-stu-id="da3a6-133">The code shows how to add custom application code ETW traces that show up in the Visual Studio ETW viewer alongside system traces from Service Fabric.</span></span> <span data-ttu-id="da3a6-134">Ez a módszer előnye, hogy a metaadatok automatikusan hozzáadódik a nyomkövetési adatokat, és a Visual Studio diagnosztikai eseménynaplóhoz már be van állítva is a megjelenítésükhöz.</span><span class="sxs-lookup"><span data-stu-id="da3a6-134">The advantage of this method is that metadata is automatically added to traces, and the Visual Studio Diagnostic Events Viewer is already configured to display them.</span></span>

<span data-ttu-id="da3a6-135">Projektek alapján létrehozott a **szolgáltatássablonok** (állapot nélküli és állapotalapú) csak keressen a `RunAsync` végrehajtására:</span><span class="sxs-lookup"><span data-stu-id="da3a6-135">For projects created from the **service templates** (stateless or stateful) just search for the `RunAsync` implementation:</span></span>

1. <span data-ttu-id="da3a6-136">A hívás `ServiceEventSource.Current.ServiceMessage` a a `RunAsync` módszer az alkalmazás kódjában egyéni ETW-nyomkövetés példáját mutatja be.</span><span class="sxs-lookup"><span data-stu-id="da3a6-136">The call to `ServiceEventSource.Current.ServiceMessage` in the `RunAsync` method shows an example of a custom ETW trace from the application code.</span></span>
2. <span data-ttu-id="da3a6-137">Az a **ServiceEventSource.cs** fájl, a túlterhelés megtalálja a `ServiceEventSource.ServiceMessage` nagyon gyakori események, teljesítmény oknál használandó módszert.</span><span class="sxs-lookup"><span data-stu-id="da3a6-137">In the **ServiceEventSource.cs** file, you will find an overload for the `ServiceEventSource.ServiceMessage` method that should be used for high-frequency events due to performance reasons.</span></span>

<span data-ttu-id="da3a6-138">Projektek alapján létrehozott a **szereplő sablonok** (állapot nélküli és állapotalapú):</span><span class="sxs-lookup"><span data-stu-id="da3a6-138">For projects created from the **actor templates** (stateless or stateful):</span></span>

1. <span data-ttu-id="da3a6-139">Nyissa meg a **"Projektnév".cs** where fájl *projektnév* a neve, a Visual Studio-projekt számára is választott.</span><span class="sxs-lookup"><span data-stu-id="da3a6-139">Open the **"ProjectName".cs** file where *ProjectName* is the name you chose for your Visual Studio project.</span></span>  
2. <span data-ttu-id="da3a6-140">A kód található `ActorEventSource.Current.ActorMessage(this, "Doing Work");` a a *DoWorkAsync* metódust.</span><span class="sxs-lookup"><span data-stu-id="da3a6-140">Find the code `ActorEventSource.Current.ActorMessage(this, "Doing Work");` in the *DoWorkAsync* method.</span></span>  <span data-ttu-id="da3a6-141">Ez az egy egyéni ETW-nyomkövetés alkalmazáskód írásbeli példát.</span><span class="sxs-lookup"><span data-stu-id="da3a6-141">This is an example of a custom ETW trace written from application code.</span></span>  
3. <span data-ttu-id="da3a6-142">A fájl **ActorEventSource.cs**, megtalálja a túlterhelés a `ActorEventSource.ActorMessage` nagyon gyakori események, teljesítmény oknál használandó módszert.</span><span class="sxs-lookup"><span data-stu-id="da3a6-142">In file **ActorEventSource.cs**, you will find an overload for the `ActorEventSource.ActorMessage` method that should be used for high-frequency events due to performance reasons.</span></span>

<span data-ttu-id="da3a6-143">Egyéni ETW-nyomkövetés adásakor a szolgáltatáskód hibáit, létre, telepíthetnek és ismételt használatával ellenőrizheti az esemény a diagnosztikai eseménynaplóhoz az alkalmazás futtatásához.</span><span class="sxs-lookup"><span data-stu-id="da3a6-143">After adding custom ETW tracing to your service code, you can build, deploy, and run the application again to see your event(s) in the Diagnostic Events Viewer.</span></span> <span data-ttu-id="da3a6-144">Ha az alkalmazás hibakeresése **F5**, a diagnosztikai eseménynaplóhoz automatikusan megnyílik.</span><span class="sxs-lookup"><span data-stu-id="da3a6-144">If you debug the application with **F5**, the Diagnostic Events Viewer will open automatically.</span></span>

## <a name="next-steps"></a><span data-ttu-id="da3a6-145">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="da3a6-145">Next steps</span></span>
<span data-ttu-id="da3a6-146">Az alkalmazás helyi diagnosztikai fentiekben hozzáadott ugyanazt nyomkövetés a kódot az eszközöket, amelyek segítségével megtekintheti ezeket az eseményeket az Azure-fürttel az alkalmazás futtatásakor fog működni.</span><span class="sxs-lookup"><span data-stu-id="da3a6-146">The same tracing code that you added to your application above for local diagnostics will work with tools that you can use to view these events when running your application on an Azure cluster.</span></span> <span data-ttu-id="da3a6-147">Tekintse meg a cikkek ismertetik az eszközök a különböző lehetőségek közül, és írja le, hogyan állíthat be őket.</span><span class="sxs-lookup"><span data-stu-id="da3a6-147">Check out these articles that discuss the different options for the tools and describe how you can set them up.</span></span>

* [<span data-ttu-id="da3a6-148">Az Azure diagnosztikai naplók gyűjtéséről</span><span class="sxs-lookup"><span data-stu-id="da3a6-148">How to collect logs with Azure Diagnostics</span></span>](service-fabric-diagnostics-how-to-setup-wad.md)
* [<span data-ttu-id="da3a6-149">Esemény összevonásának és a gyűjtemény EventFlow használatával</span><span class="sxs-lookup"><span data-stu-id="da3a6-149">Event aggregation and collection using EventFlow</span></span>](service-fabric-diagnostics-event-aggregation-eventflow.md)

