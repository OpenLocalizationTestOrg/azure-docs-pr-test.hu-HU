---
title: "aaaGuidelines & javaslatok az Azure Service Fabric megbízható gyűjtemények |} Microsoft Docs"
description: "Irányelvek és javaslatok a Service Fabric megbízható gyűjtemények"
services: service-fabric
documentationcenter: .net
author: mcoskun
manager: timlt
editor: masnider,rajak
ms.assetid: 62857523-604b-434e-bd1c-2141ea4b00d1
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: required
ms.date: 5/3/2017
ms.author: mcoskun
ms.openlocfilehash: bcdbc9d013bc044e06c43761e7f515c7e4bf340c
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/06/2017
---
# <a name="guidelines-and-recommendations-for-reliable-collections-in-azure-service-fabric"></a><span data-ttu-id="94e65-103">Irányelvek és javaslatok az Azure Service Fabric megbízható gyűjtemények</span><span class="sxs-lookup"><span data-stu-id="94e65-103">Guidelines and recommendations for Reliable Collections in Azure Service Fabric</span></span>
<span data-ttu-id="94e65-104">Ez a szakasz útmutatást nyújt a megbízható állapotkezelője és megbízható gyűjtemények használatával.</span><span class="sxs-lookup"><span data-stu-id="94e65-104">This section provides guidelines for using Reliable State Manager and Reliable Collections.</span></span> <span data-ttu-id="94e65-105">hello célja toohelp felhasználók közös nehézségek elkerülése érdekében.</span><span class="sxs-lookup"><span data-stu-id="94e65-105">hello goal is toohelp users avoid common pitfalls.</span></span>

<span data-ttu-id="94e65-106">hello irányelvek vannak rendszerezve hello feltételek előtagként egyszerű ajánlásaiban *tegye*, *fontolja meg*, *kerülje* és *nem*.</span><span class="sxs-lookup"><span data-stu-id="94e65-106">hello guidelines are organized as simple recommendations prefixed with hello terms *Do*, *Consider*, *Avoid* and *Do not*.</span></span>

* <span data-ttu-id="94e65-107">Ne módosítsa az olvasási műveletek által visszaadott egyéni típusú objektum (például `TryPeekAsync` vagy `TryGetValueAsync`).</span><span class="sxs-lookup"><span data-stu-id="94e65-107">Do not modify an object of custom type returned by read operations (for example, `TryPeekAsync` or `TryGetValueAsync`).</span></span> <span data-ttu-id="94e65-108">Megbízható gyűjtemények, egyidejű gyűjtemények, mint például egy hivatkozási toohello objektumok és nem egy példányt adja vissza.</span><span class="sxs-lookup"><span data-stu-id="94e65-108">Reliable Collections, just like Concurrent Collections, return a reference toohello objects and not a copy.</span></span>
* <span data-ttu-id="94e65-109">Hajtsa végre a részletes másolási hello egy egyéni típusú objektumot adott vissza a módosítás előtt.</span><span class="sxs-lookup"><span data-stu-id="94e65-109">Do deep copy hello returned object of a custom type before modifying it.</span></span> <span data-ttu-id="94e65-110">Mivel a struktúrák és beépített pass-by-value, nem kell toodo rajtuk mély másolatát.</span><span class="sxs-lookup"><span data-stu-id="94e65-110">Since structs and built-in types are pass-by-value, you do not need toodo a deep copy on them.</span></span>
* <span data-ttu-id="94e65-111">Ne használjon `TimeSpan.MaxValue` időtúllépési.</span><span class="sxs-lookup"><span data-stu-id="94e65-111">Do not use `TimeSpan.MaxValue` for time-outs.</span></span> <span data-ttu-id="94e65-112">Időtúllépések használt toodetect érvényben kell lennie.</span><span class="sxs-lookup"><span data-stu-id="94e65-112">Time-outs should be used toodetect deadlocks.</span></span>
* <span data-ttu-id="94e65-113">Ne használjon tranzakció, miután ez befejeződött, megszakított, vagy elvetése megtörtént.</span><span class="sxs-lookup"><span data-stu-id="94e65-113">Do not use a transaction after it has been committed, aborted, or disposed.</span></span>
* <span data-ttu-id="94e65-114">Ne használja az enumerálás létrehozták a hello tranzakció hatókörén kívül.</span><span class="sxs-lookup"><span data-stu-id="94e65-114">Do not use an enumeration outside of hello transaction scope it was created in.</span></span>
* <span data-ttu-id="94e65-115">Ne hozzon létre egy tranzakcióban, másik tranzakcióban `using` utasítás mert holtpont lehet okozni.</span><span class="sxs-lookup"><span data-stu-id="94e65-115">Do not create a transaction within another transaction’s `using` statement because it can cause deadlocks.</span></span>
* <span data-ttu-id="94e65-116">Győződjön meg arról, hogy a `IComparable<TKey>` implementációjának helyességét.</span><span class="sxs-lookup"><span data-stu-id="94e65-116">Do ensure that your `IComparable<TKey>` implementation is correct.</span></span> <span data-ttu-id="94e65-117">hello rendszer veszi függőségi `IComparable<TKey>` az ellenőrzőpontok és sorok egyesítéshez.</span><span class="sxs-lookup"><span data-stu-id="94e65-117">hello system takes dependency on `IComparable<TKey>` for merging checkpoints and rows.</span></span>
* <span data-ttu-id="94e65-118">Módosítási zárolást használja, egy szándékát tooupdate elemet olvasásakor az tooprevent egy bizonyos osztály holtpont.</span><span class="sxs-lookup"><span data-stu-id="94e65-118">Do use Update lock when reading an item with an intention tooupdate it tooprevent a certain class of deadlocks.</span></span>
* <span data-ttu-id="94e65-119">Vegye figyelembe a megőrzi az elemeket (például TKey + TValue megbízható szótár) 80 KB alatt: kisebb hello jobb.</span><span class="sxs-lookup"><span data-stu-id="94e65-119">Consider keeping your items (for example, TKey + TValue for Reliable Dictionary) below 80 KBytes: smaller hello better.</span></span> <span data-ttu-id="94e65-120">Ez csökkenti a nagy objektumok halommemóriájának kihasználtsága, valamint a lemezek és a hálózati IO-követelményeket hello mennyiségét.</span><span class="sxs-lookup"><span data-stu-id="94e65-120">This reduces hello amount of Large Object Heap usage as well as disk and network IO requirements.</span></span> <span data-ttu-id="94e65-121">Gyakran csökkentik az ismétlődő adatreplikálás hello érték csak egy kis részét frissítésekor.</span><span class="sxs-lookup"><span data-stu-id="94e65-121">Often, it reduces replicating duplicate data when only one small part of hello value is being updated.</span></span> <span data-ttu-id="94e65-122">Gyakori módja tooachieve Ez megbízható szótárban az toobreak a sorokat toomultiple sorokat.</span><span class="sxs-lookup"><span data-stu-id="94e65-122">Common way tooachieve this in Reliable Dictionary, is toobreak your rows in toomultiple rows.</span></span>
* <span data-ttu-id="94e65-123">Érdemes biztonsági mentést, és visszaállítási funkció toohave vész-helyreállítási.</span><span class="sxs-lookup"><span data-stu-id="94e65-123">Consider using backup and restore functionality toohave disaster recovery.</span></span>
* <span data-ttu-id="94e65-124">Elkerülése érdekében egyetlen entitás műveletek és többentitásos műveletek (például `GetCountAsync`, `CreateEnumerableAsync`) a hello miatt toohello másik elkülönítési szinten ugyanabban a tranzakcióban.</span><span class="sxs-lookup"><span data-stu-id="94e65-124">Avoid mixing single entity operations and multi-entity operations (e.g `GetCountAsync`, `CreateEnumerableAsync`) in hello same transaction due toohello different isolation levels.</span></span>
* <span data-ttu-id="94e65-125">InvalidOperationException kezelni.</span><span class="sxs-lookup"><span data-stu-id="94e65-125">Do handle InvalidOperationException.</span></span> <span data-ttu-id="94e65-126">Hello rendszer számos okból a felhasználói tranzakció is megszakítja.</span><span class="sxs-lookup"><span data-stu-id="94e65-126">User transactions can be aborted by hello system for variety of reasons.</span></span> <span data-ttu-id="94e65-127">Például ha megbízható állapotkezelője hello jal kívül elsődleges szerepet a, vagy ha egy hosszú ideig futó tranzakció blokkolja hello tranzakciós napló csonkolási.</span><span class="sxs-lookup"><span data-stu-id="94e65-127">For example, when hello Reliable State Manager is changing its role out of Primary or when a long-running transaction is blocking truncation of hello transactional log.</span></span> <span data-ttu-id="94e65-128">Ilyen esetben felhasználói InvalidOperationException, amely azt jelzi, hogy a tranzakció már meg lett szakítva, jelenhet meg.</span><span class="sxs-lookup"><span data-stu-id="94e65-128">In such cases, user may receive InvalidOperationException indicating that their transaction has already been terminated.</span></span> <span data-ttu-id="94e65-129">Feltételezve, hello tranzakció hello megszüntetése nem volt szükség hello felhasználó, a legjobb módja toohandle ehhez a kivételhez toodispose hello tranzakció, ellenőrizze, hogy hello cancellation token felé a jelzésküldés (vagy hello replika szerepkörét az hello megváltozott), és ha nem Hozzon létre egy új tranzakció, és próbálkozzon újra.</span><span class="sxs-lookup"><span data-stu-id="94e65-129">Assuming, hello termination of hello transaction was not requested by hello user, best way toohandle this exception is toodispose hello transaction, check if hello cancellation token has been signaled (or hello role of hello replica has been changed), and if not create a new transaction and retry.</span></span>  

<span data-ttu-id="94e65-130">Íme néhány dolgot tookeep figyelembe vételével:</span><span class="sxs-lookup"><span data-stu-id="94e65-130">Here are some things tookeep in mind:</span></span>

* <span data-ttu-id="94e65-131">hello alapértelmezett időtúllépési érték az összes hello megbízható gyűjtemény API-k négy másodperc.</span><span class="sxs-lookup"><span data-stu-id="94e65-131">hello default time-out is four seconds for all hello Reliable Collection APIs.</span></span> <span data-ttu-id="94e65-132">A legtöbb felhasználónak hello alapértelmezett időtúllépési kell használnia.</span><span class="sxs-lookup"><span data-stu-id="94e65-132">Most users should use hello default time-out.</span></span>
* <span data-ttu-id="94e65-133">hello alapértelmezett megszakítási lexikális elem `CancellationToken.None` a gyűjtemények API-k az összes megbízható.</span><span class="sxs-lookup"><span data-stu-id="94e65-133">hello default cancellation token is `CancellationToken.None` in all Reliable Collections APIs.</span></span>
* <span data-ttu-id="94e65-134">a kulcstípus paraméter hello (*TKey*) a megbízható Dictionary megfelelően meg kell valósítania `GetHashCode()` és `Equals()`.</span><span class="sxs-lookup"><span data-stu-id="94e65-134">hello key type parameter (*TKey*) for a Reliable Dictionary must correctly implement `GetHashCode()` and `Equals()`.</span></span> <span data-ttu-id="94e65-135">Lehet, hogy a kulcsok nem módosítható.</span><span class="sxs-lookup"><span data-stu-id="94e65-135">Keys must be immutable.</span></span>
* <span data-ttu-id="94e65-136">minden szolgáltatás tooachieve magas rendelkezésre állás hello megbízható gyűjtemények, kell legalább egy célként és a replikakészlet minimális mérete 3 beállítása.</span><span class="sxs-lookup"><span data-stu-id="94e65-136">tooachieve high availability for hello Reliable Collections, each service should have at least a target and minimum replica set size of 3.</span></span>
* <span data-ttu-id="94e65-137">A másodlagos hello olvasási műveletek nem kvórum véglegesített verziók lehet olvasni.</span><span class="sxs-lookup"><span data-stu-id="94e65-137">Read operations on hello secondary may read versions that are not quorum committed.</span></span>
  <span data-ttu-id="94e65-138">Ez azt jelenti, hogy egy verziója, amely egyetlen másodlagos olvasható adatok előfordulhat, hogy lehet hamis jutott el.</span><span class="sxs-lookup"><span data-stu-id="94e65-138">This means that a version of data that is read from a single secondary might be false progressed.</span></span>
  <span data-ttu-id="94e65-139">Elsődleges olvasások a rendszer mindig stabil: is soha nem lehet false jutott el.</span><span class="sxs-lookup"><span data-stu-id="94e65-139">Reads from Primary are always stable: can never be false progressed.</span></span>

### <a name="next-steps"></a><span data-ttu-id="94e65-140">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="94e65-140">Next steps</span></span>
* [<span data-ttu-id="94e65-141">A Reliable Collections használata</span><span class="sxs-lookup"><span data-stu-id="94e65-141">Working with Reliable Collections</span></span>](service-fabric-work-with-reliable-collections.md)
* [<span data-ttu-id="94e65-142">Tranzakciók és a zárolásokat</span><span class="sxs-lookup"><span data-stu-id="94e65-142">Transactions and Locks</span></span>](service-fabric-reliable-services-reliable-collections-transactions-locks.md)
* [<span data-ttu-id="94e65-143">Megbízható állapot Manager és a gyűjtemény belső funkciói</span><span class="sxs-lookup"><span data-stu-id="94e65-143">Reliable State Manager and Collection Internals</span></span>](service-fabric-reliable-services-reliable-collections-internals.md)
* <span data-ttu-id="94e65-144">Adatok kezelése</span><span class="sxs-lookup"><span data-stu-id="94e65-144">Managing Data</span></span>
  * [<span data-ttu-id="94e65-145">Biztonsági mentés és visszaállítás</span><span class="sxs-lookup"><span data-stu-id="94e65-145">Backup and Restore</span></span>](service-fabric-reliable-services-backup-restore.md)
  * [<span data-ttu-id="94e65-146">Értesítések</span><span class="sxs-lookup"><span data-stu-id="94e65-146">Notifications</span></span>](service-fabric-reliable-services-notifications.md)
  * [<span data-ttu-id="94e65-147">Szerializálási és frissítése</span><span class="sxs-lookup"><span data-stu-id="94e65-147">Serialization and Upgrade</span></span>](service-fabric-application-upgrade-data-serialization.md)
  * [<span data-ttu-id="94e65-148">Megbízható állapot Manager konfigurálása</span><span class="sxs-lookup"><span data-stu-id="94e65-148">Reliable State Manager configuration</span></span>](service-fabric-reliable-services-configuration.md)
* <span data-ttu-id="94e65-149">Egyéb</span><span class="sxs-lookup"><span data-stu-id="94e65-149">Others</span></span>
  * [<span data-ttu-id="94e65-150">Megbízható szolgáltatások – első lépések</span><span class="sxs-lookup"><span data-stu-id="94e65-150">Reliable Services quick start</span></span>](service-fabric-reliable-services-quick-start.md)
  * [<span data-ttu-id="94e65-151">Fejlesztői leírás megbízható gyűjtemények</span><span class="sxs-lookup"><span data-stu-id="94e65-151">Developer reference for Reliable Collections</span></span>](https://msdn.microsoft.com/library/azure/microsoft.servicefabric.data.collections.aspx)
