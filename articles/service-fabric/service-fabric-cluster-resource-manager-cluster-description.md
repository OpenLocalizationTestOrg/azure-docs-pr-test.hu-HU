---
title: "az erőforrás-kezelő fürt leírása aaaCluster |} Microsoft Docs"
description: "A Service Fabric-fürt leíró tartalék tartományok, a frissítési tartományok, a csomópont tulajdonságait és a csomópont kapacitások hello fürt erőforrás-kezelő megadásával."
services: service-fabric
documentationcenter: .net
author: masnider
manager: timlt
editor: 
ms.assetid: 55f8ab37-9399-4c9a-9e6c-d2d859de6766
ms.service: Service-Fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 08/18/2017
ms.author: masnider
ms.openlocfilehash: f2822075976bd54402af5ad56991b5b360dfb1d8
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/06/2017
---
# <a name="describing-a-service-fabric-cluster"></a><span data-ttu-id="ac16e-103">Ismertető a service fabric-fürt</span><span class="sxs-lookup"><span data-stu-id="ac16e-103">Describing a service fabric cluster</span></span>
<span data-ttu-id="ac16e-104">Service Fabric fürt erőforrás-kezelő hello leíró egy fürt több mechanizmus biztosít.</span><span class="sxs-lookup"><span data-stu-id="ac16e-104">hello Service Fabric Cluster Resource Manager provides several mechanisms for describing a cluster.</span></span> <span data-ttu-id="ac16e-105">Futásidőben hello fürt erőforrás-kezelő a információk tooensure magas rendelkezésre állású hello szolgáltatásokat futtató hello fürt használja.</span><span class="sxs-lookup"><span data-stu-id="ac16e-105">During runtime, hello Cluster Resource Manager uses this information tooensure high availability of hello services running in hello cluster.</span></span> <span data-ttu-id="ac16e-106">Miközben a fontos szabályok, azt is megkísérli a toooptimize hello hálózatierőforrás-fogyasztás hello fürtön belül.</span><span class="sxs-lookup"><span data-stu-id="ac16e-106">While enforcing these important rules, it also attempts toooptimize hello resource consumption within hello cluster.</span></span>

## <a name="key-concepts"></a><span data-ttu-id="ac16e-107">Fő fogalmak</span><span class="sxs-lookup"><span data-stu-id="ac16e-107">Key concepts</span></span>
<span data-ttu-id="ac16e-108">hello fürt erőforrás-kezelő fürt leíró több funkciót támogatja:</span><span class="sxs-lookup"><span data-stu-id="ac16e-108">hello Cluster Resource Manager supports several features that describe a cluster:</span></span>

* <span data-ttu-id="ac16e-109">Tartalék tartományok</span><span class="sxs-lookup"><span data-stu-id="ac16e-109">Fault Domains</span></span>
* <span data-ttu-id="ac16e-110">Frissítési tartományok</span><span class="sxs-lookup"><span data-stu-id="ac16e-110">Upgrade Domains</span></span>
* <span data-ttu-id="ac16e-111">Csomópont tulajdonságai</span><span class="sxs-lookup"><span data-stu-id="ac16e-111">Node Properties</span></span>
* <span data-ttu-id="ac16e-112">Csomópont-kapacitás</span><span class="sxs-lookup"><span data-stu-id="ac16e-112">Node Capacities</span></span>

## <a name="fault-domains"></a><span data-ttu-id="ac16e-113">Tartalék tartományok</span><span class="sxs-lookup"><span data-stu-id="ac16e-113">Fault domains</span></span>
<span data-ttu-id="ac16e-114">Tartalék tartomány bármely terület koordinált hiba.</span><span class="sxs-lookup"><span data-stu-id="ac16e-114">A Fault Domain is any area of coordinated failure.</span></span> <span data-ttu-id="ac16e-115">Egyetlen számítógépen egy tartalék tartományt, (mivel meghiúsulhatnak, hogy a power ellátási hibák toodrive hibák toobad NIC belső vezérlőprogram a saját a különböző okok miatt).</span><span class="sxs-lookup"><span data-stu-id="ac16e-115">A single machine is a Fault Domain (since it can fail on its own for various reasons, from power supply failures toodrive failures toobad NIC firmware).</span></span> <span data-ttu-id="ac16e-116">Azonos Ethernet-kapcsoló szerepelnek csatlakoztatott toohello hello azonos tartalék tartományban, mint a gépek gépek megosztása egyetlen forrás áramkimaradás vagy egy helyen.</span><span class="sxs-lookup"><span data-stu-id="ac16e-116">Machines connected toohello same Ethernet switch are in hello same Fault Domain, as are machines sharing a single source of power or in a single location.</span></span> <span data-ttu-id="ac16e-117">Mivel a hardveres hibák toooverlap természetes, tartalék tartományok eredendően hierarchikus és jelentésekként jelennek meg a Service Fabric URI.</span><span class="sxs-lookup"><span data-stu-id="ac16e-117">Since it's natural for hardware faults toooverlap, Fault Domains are inherently hierarchal and are represented as URIs in Service Fabric.</span></span>

<span data-ttu-id="ac16e-118">Fontos, hogy tartalék tartományok megfelelően vannak beállítva, mert a Service Fabric ezen információk toosafely hely szolgáltatásokat használ.</span><span class="sxs-lookup"><span data-stu-id="ac16e-118">It is important that Fault Domains are set up correctly since Service Fabric uses this information toosafely place services.</span></span> <span data-ttu-id="ac16e-119">A Service Fabric nem szeretné, hogy tooplace szolgáltatások úgy, hogy (hello hiba néhány összetevő által okozott) tartalék tartomány hello elvesztését eredményezi egy szolgáltatás toogo le.</span><span class="sxs-lookup"><span data-stu-id="ac16e-119">Service Fabric doesn't want tooplace services such that hello loss of a Fault Domain (caused by hello failure of some component) causes a service toogo down.</span></span> <span data-ttu-id="ac16e-120">Hello Azure Service Fabric hello tartalék tartomány adatokat hello környezet toocorrectly által biztosított használja környezetben konfigurálja az Ön nevében hello hello fürt csomópontja.</span><span class="sxs-lookup"><span data-stu-id="ac16e-120">In hello Azure environment Service Fabric uses hello Fault Domain information provided by hello environment toocorrectly configure hello nodes in hello cluster on your behalf.</span></span> <span data-ttu-id="ac16e-121">A Service Fabric önálló, a tartalék tartományok hello időben vannak meghatározva hello fürt beállítása</span><span class="sxs-lookup"><span data-stu-id="ac16e-121">For Service Fabric Standalone, Fault Domains are defined at hello time that hello cluster is set up</span></span> 

> [!WARNING]
> <span data-ttu-id="ac16e-122">Fontos, hogy hello tartalék tartomány adatokat megadva a háló tooService pontos.</span><span class="sxs-lookup"><span data-stu-id="ac16e-122">It is important that hello Fault Domain information provided tooService Fabric is accurate.</span></span> <span data-ttu-id="ac16e-123">Tételezzük fel például, hogy a Service Fabric-fürt csomópontja öt fizikai állomáson futnak, 10 virtuális gépeken belül futnak.</span><span class="sxs-lookup"><span data-stu-id="ac16e-123">For example, let's say that your Service Fabric cluster's nodes are running inside 10 virtual machines, running on five physical hosts.</span></span> <span data-ttu-id="ac16e-124">Ebben az esetben, annak ellenére, hogy nincsenek 10 virtuális gépet, nincs csak 5 különböző (a legfelső szintű) tartományok fault.</span><span class="sxs-lookup"><span data-stu-id="ac16e-124">In this case, even though there are 10 virtual machines, there's only 5 different (top level) fault domains.</span></span> <span data-ttu-id="ac16e-125">Ugyanazon a fizikai gazdagépen hatására hello megosztása virtuális gépek tooshare hello legfelső szintű azonos tartalék tartományban, mert a virtuális gépek élmény hello koordinált hiba, ha a fizikai gazdagép meghibásodik.</span><span class="sxs-lookup"><span data-stu-id="ac16e-125">Sharing hello same physical host causes VMs tooshare hello same root fault domain, since hello VMs experience coordinated failure if their physical host fails.</span></span>  
>
> <span data-ttu-id="ac16e-126">Mivel a Service Fabric hello tartalék tartomány egy csomópont nem toochange vár.</span><span class="sxs-lookup"><span data-stu-id="ac16e-126">Since Service Fabric expects hello Fault Domain of a node not toochange.</span></span> <span data-ttu-id="ac16e-127">Más módszerek, például a biztosítsa a magas rendelkezésre állású virtuális gépek, hello [magas rendelkezésre ÁLLÁSÚ virtuális gépek](https://technet.microsoft.com/en-us/library/cc967323.aspx), egy gazdagép tooanother a virtuális gépek transzparens migrálását.</span><span class="sxs-lookup"><span data-stu-id="ac16e-127">Other mechanisms of ensuring high availability of hello VMs, such as [HA-VMs](https://technet.microsoft.com/en-us/library/cc967323.aspx), use transparent migration of VMs from one host tooanother.</span></span> <span data-ttu-id="ac16e-128">Ezek a mechanizmusok nem konfigurálja újra, és értesíthetők a virtuális gép hello kódot futtató hello.</span><span class="sxs-lookup"><span data-stu-id="ac16e-128">These mechanisms do not reconfigure or notify hello running code inside hello VM.</span></span> <span data-ttu-id="ac16e-129">Így azok **nem támogatott** , környezetekben a Service Fabric rendszert futtató fürtöket.</span><span class="sxs-lookup"><span data-stu-id="ac16e-129">As such, they are **not supported** as environments for running Service Fabric clusters.</span></span> <span data-ttu-id="ac16e-130">A Service Fabric hello csak magas rendelkezésre állású technológia alkalmazott kell lennie.</span><span class="sxs-lookup"><span data-stu-id="ac16e-130">Service Fabric should be hello only high-availability technology employed.</span></span> <span data-ttu-id="ac16e-131">Például a virtuális gép élő áttelepítést, a mechanizmusok San hálózatok, vagy mások számára nem szükséges.</span><span class="sxs-lookup"><span data-stu-id="ac16e-131">Mechanisms like live VM migration, SANs, or others are not necessary.</span></span> <span data-ttu-id="ac16e-132">Ha a Service Fabric, ezek a mechanizmusok együtt használható _csökkentése_ alkalmazás rendelkezésre állásának és megbízhatóságának vezetnek nagyobb fokú összetettségével jár, mert hiba központi adatforrások hozzáadása, és megbízhatósági és rendelkezésre állási stratégiát, amely ütközik a Service Fabric a felhasználását.</span><span class="sxs-lookup"><span data-stu-id="ac16e-132">If used in conjunction with Service Fabric, these mechanisms _reduce_ application availability and reliability because they introduce additional complexity, add centralized sources of failure, and utilize reliability and availability strategies that conflict with those in Service Fabric.</span></span> 
>
>

<span data-ttu-id="ac16e-133">Az alábbi ábra hello hello entitásokhoz Ez hozzájárul a tooFault tartományok és a lista összes hello különböző tartalék tartományok, amelyek azt szín.</span><span class="sxs-lookup"><span data-stu-id="ac16e-133">In hello graphic below we color all hello entities that contribute tooFault Domains and list all hello different Fault Domains that result.</span></span> <span data-ttu-id="ac16e-134">Ebben a példában tudunk adatközpontok ("DC"), például rackszekrények ("R") és panelen (a "B").</span><span class="sxs-lookup"><span data-stu-id="ac16e-134">In this example, we have datacenters ("DC"), racks ("R"), and blades ("B").</span></span> <span data-ttu-id="ac16e-135">Kapcsolódását Ha minden panel egynél több virtuális gép, lehetnek réteget a hello tartalék tartomány hierarchia.</span><span class="sxs-lookup"><span data-stu-id="ac16e-135">Conceivably, if each blade holds more than one virtual machine, there could be another layer in hello Fault Domain hierarchy.</span></span>

<span data-ttu-id="ac16e-136"><center>
![Tartalék tartományok keresztül szervezett csomópontja][Image1]
</center></span><span class="sxs-lookup"><span data-stu-id="ac16e-136"><center>
![Nodes organized via Fault Domains][Image1]
</center></span></span>

<span data-ttu-id="ac16e-137">Futásidőben a Service Fabric fürt erőforrás-kezelő hello hello tartalék tartományok hello fürt leálltnak, és elrendezések tervez.</span><span class="sxs-lookup"><span data-stu-id="ac16e-137">During runtime, hello Service Fabric Cluster Resource Manager considers hello Fault Domains in hello cluster and plans layouts.</span></span> <span data-ttu-id="ac16e-138">állapot-nyilvántartó replikák hello, vagy egy adott szolgáltatáshoz állapotmentes példányai vannak kerül terjesztésre, így külön tartalék tartományok vannak.</span><span class="sxs-lookup"><span data-stu-id="ac16e-138">hello stateful replicas or stateless instances for a given service are distributed so they are in separate Fault Domains.</span></span> <span data-ttu-id="ac16e-139">Hello szolgáltatás osztja a tartalék tartományok között hello szolgáltatás elérhetősége hello nem sérül, amikor egy tartalék tartomány meghibásodna hello hierarchia bármely szinten biztosítja.</span><span class="sxs-lookup"><span data-stu-id="ac16e-139">Distributing hello service across fault domains ensures hello availability of hello service is not compromised when a Fault Domain fails at any level of hello hierarchy.</span></span>

<span data-ttu-id="ac16e-140">A Service Fabric-fürt erőforrás-kezelő nem fontos hány rétegek hello tartalék tartomány hierarchia szerepelnek.</span><span class="sxs-lookup"><span data-stu-id="ac16e-140">Service Fabric’s Cluster Resource Manager doesn’t care how many layers there are in hello Fault Domain hierarchy.</span></span> <span data-ttu-id="ac16e-141">Azonban, hogy bármely hello hierarchia egy részének hello megszűnését nem befolyásolja a benne futó szolgáltatások tooensure megkísérli.</span><span class="sxs-lookup"><span data-stu-id="ac16e-141">However, it tries tooensure that hello loss of any one portion of hello hierarchy doesn’t impact services running in it.</span></span> 

<span data-ttu-id="ac16e-142">Ez nem ajánlott, ha egyes szintjein mélység hello tartalék tartomány hierarchia a csomópontok azonos számú hello.</span><span class="sxs-lookup"><span data-stu-id="ac16e-142">It is best if there are hello same number of nodes at each level of depth in hello Fault Domain hierarchy.</span></span> <span data-ttu-id="ac16e-143">Ha a tartalék tartományok "fáját" hello egyenetlen a fürtben, azt megnehezíti a hello fürt erőforrás-kezelő toofigure hello legjobb foglalási szolgáltatások ki.</span><span class="sxs-lookup"><span data-stu-id="ac16e-143">If hello “tree” of Fault Domains is unbalanced in your cluster, it makes it harder for hello Cluster Resource Manager toofigure out hello best allocation of services.</span></span> <span data-ttu-id="ac16e-144">Imbalanced tartalék tartományok elrendezések jelenti azt, hogy egyes tartományok hello adatvesztés hatása hello több, mint a más tartományokban szolgáltatások rendelkezésre állását.</span><span class="sxs-lookup"><span data-stu-id="ac16e-144">Imbalanced Fault Domains layouts mean that hello loss of some domains impact hello availability of services more than other domains.</span></span> <span data-ttu-id="ac16e-145">Emiatt hello fürt erőforrás-kezelő között két célt levágása: szolgáltatások helyez szeretnének toouse hello gépek az adott "nehéz" tartományban, és, hogy a tartomány hello megszűnését problémákhoz nem szeretnének más tartományok tooplace szolgáltatások.</span><span class="sxs-lookup"><span data-stu-id="ac16e-145">As a result, hello Cluster Resource Manager is torn between two goals: It wants toouse hello machines in that “heavy” domain by placing services on them, and it wants tooplace services in other domains so that hello loss of a domain doesn’t cause problems.</span></span> 

<span data-ttu-id="ac16e-146">Mire imbalanced tartományok figyelni például?</span><span class="sxs-lookup"><span data-stu-id="ac16e-146">What do imbalanced domains look like?</span></span> <span data-ttu-id="ac16e-147">Hello az alábbi ábrán megmutatjuk, két különböző fürt elrendezés.</span><span class="sxs-lookup"><span data-stu-id="ac16e-147">In hello diagram below, we show two different cluster layouts.</span></span> <span data-ttu-id="ac16e-148">Hello első példában a hello csomópontok egyenletesen különböző pontjain hello tartalék tartományok.</span><span class="sxs-lookup"><span data-stu-id="ac16e-148">In hello first example, hello nodes are distributed evenly across hello Fault Domains.</span></span> <span data-ttu-id="ac16e-149">Hello második példában egy tartalék tartomány más tartalék tartományok rendelkezik mint hello számos további csomópontokat.</span><span class="sxs-lookup"><span data-stu-id="ac16e-149">In hello second example, one Fault Domain has many more nodes than hello other Fault Domains.</span></span> 

<span data-ttu-id="ac16e-150"><center>
![Két különböző fürt elrendezések][Image2]
</center></span><span class="sxs-lookup"><span data-stu-id="ac16e-150"><center>
![Two different cluster layouts][Image2]
</center></span></span>

<span data-ttu-id="ac16e-151">Az Azure-ban, amelyek a tartalék tartomány csomópontot tartalmaz hello választott van kezelve.</span><span class="sxs-lookup"><span data-stu-id="ac16e-151">In Azure, hello choice of which Fault Domain contains a node is managed for you.</span></span> <span data-ttu-id="ac16e-152">Azonban attól függően, hogy hello kiépítése csomópontok száma továbbra is fejezheti a tartalék tartományok többinél azokat a további csomópontokkal.</span><span class="sxs-lookup"><span data-stu-id="ac16e-152">However, depending on hello number of nodes that you provision you can still end up with Fault Domains with more nodes in them than others.</span></span> <span data-ttu-id="ac16e-153">Tegyük fel például, öt tartalék tartományok hello fürt rendelkezik, de egy adott NodeType hét csomópontok létrehozni.</span><span class="sxs-lookup"><span data-stu-id="ac16e-153">For example, say you have five Fault Domains in hello cluster but provision seven nodes for a given NodeType.</span></span> <span data-ttu-id="ac16e-154">Ebben az esetben hello első két tartalék tartományok végül több csomópontot.</span><span class="sxs-lookup"><span data-stu-id="ac16e-154">In this case, hello first two Fault Domains end up with more nodes.</span></span> <span data-ttu-id="ac16e-155">Ha továbbra is toodeploy további NodeType tulajdonságok értéke csak néhány osztályt, hello probléma rosszabb lekérdezi.</span><span class="sxs-lookup"><span data-stu-id="ac16e-155">If you continue toodeploy more NodeTypes with only a couple instances, hello problem gets worse.</span></span> <span data-ttu-id="ac16e-156">Javasoljuk, hogy hello ezért az egyes csomóponttípusok csomópontok száma legyen hello tartalék tartományainak számát.</span><span class="sxs-lookup"><span data-stu-id="ac16e-156">For this reason it's recommended that hello number of nodes in each node type is a multiple of hello number of Fault Domains.</span></span>

## <a name="upgrade-domains"></a><span data-ttu-id="ac16e-157">Frissítési tartományok</span><span class="sxs-lookup"><span data-stu-id="ac16e-157">Upgrade domains</span></span>
<span data-ttu-id="ac16e-158">Frissítési tartományok egy másik szolgáltatás, amely segít a Service Fabric fürt erőforrás-kezelő hello hello elrendezés hello fürt ismertetése.</span><span class="sxs-lookup"><span data-stu-id="ac16e-158">Upgrade Domains are another feature that helps hello Service Fabric Cluster Resource Manager understand hello layout of hello cluster.</span></span> <span data-ttu-id="ac16e-159">Frissítési tartományok megadása a következő hello frissített csomópontok beállítása ugyanannyi időt vesz igénybe.</span><span class="sxs-lookup"><span data-stu-id="ac16e-159">Upgrade Domains define sets of nodes that are upgraded at hello same time.</span></span> <span data-ttu-id="ac16e-160">Frissítési tartományok súgó hello fürt erőforrás-kezelő megértéséhez, valamint levezényelni a kezelési műveletek, például a frissítéseket.</span><span class="sxs-lookup"><span data-stu-id="ac16e-160">Upgrade Domains help hello Cluster Resource Manager understand and orchestrate management operations like upgrades.</span></span>

<span data-ttu-id="ac16e-161">Frissítési tartományok sokkal vannak, például a tartalék tartományok, de néhány fontosabb különbségeket.</span><span class="sxs-lookup"><span data-stu-id="ac16e-161">Upgrade Domains are a lot like Fault Domains, but with a couple key differences.</span></span> <span data-ttu-id="ac16e-162">Első lépésként koordinált hardverhibák területéhez tartalék tartományok definiálása.</span><span class="sxs-lookup"><span data-stu-id="ac16e-162">First, areas of coordinated hardware failures define Fault Domains.</span></span> <span data-ttu-id="ac16e-163">Frissítési tartományt, a hello ugyanakkor, házirend által meghatározott.</span><span class="sxs-lookup"><span data-stu-id="ac16e-163">Upgrade Domains, on hello other hand, are defined by policy.</span></span> <span data-ttu-id="ac16e-164">Toodecide hány azt szeretné, helyett hello környezet alatt meghatározni az beszerzése.</span><span class="sxs-lookup"><span data-stu-id="ac16e-164">You get toodecide how many you want, rather than it being dictated by hello environment.</span></span> <span data-ttu-id="ac16e-165">Tetszőleges számú frissítési tartományok csomópontok módon lehet.</span><span class="sxs-lookup"><span data-stu-id="ac16e-165">You could have as many Upgrade Domains as you do nodes.</span></span> <span data-ttu-id="ac16e-166">Egy másik tartalék tartományok és a frissítési tartományok közötti különbség, hogy a frissítési tartományok nincsenek hierarchikus.</span><span class="sxs-lookup"><span data-stu-id="ac16e-166">Another difference between Fault Domains and Upgrade Domains is that Upgrade Domains are not hierarchical.</span></span> <span data-ttu-id="ac16e-167">Ehelyett azok több mint egy egyszerű címke.</span><span class="sxs-lookup"><span data-stu-id="ac16e-167">Instead, they are more like a simple tag.</span></span> 

<span data-ttu-id="ac16e-168">hello alábbi ábrán látható három frissítési tartományok szétteríti a három tartalék tartományok.</span><span class="sxs-lookup"><span data-stu-id="ac16e-168">hello following diagram shows three Upgrade Domains are striped across three Fault Domains.</span></span> <span data-ttu-id="ac16e-169">Emellett egy lehetséges három különböző replikáinak állapotalapú szolgáltatás elhelyezésének, ahol minden egyes fejeződik be a különböző tartalék és frissítési tartományok jelenít meg.</span><span class="sxs-lookup"><span data-stu-id="ac16e-169">It also shows one possible placement for three different replicas of a stateful service, where each ends up in different Fault and Upgrade Domains.</span></span> <span data-ttu-id="ac16e-170">Az elhelyezési lehetővé teszi, hogy a szolgáltatás frissítésének hello közel tartalék tartomány hello megszűnését, és továbbra is fennáll az hello kódja és adatai egy példányát.</span><span class="sxs-lookup"><span data-stu-id="ac16e-170">This placement allows hello loss of a Fault Domain while in hello middle of a service upgrade and still have one copy of hello code and data.</span></span>  

<span data-ttu-id="ac16e-171"><center>
![A tartalék és verziófrissítési elhelyezése][Image3]
</center></span><span class="sxs-lookup"><span data-stu-id="ac16e-171"><center>
![Placement With Fault and Upgrade Domains][Image3]
</center></span></span>

<span data-ttu-id="ac16e-172">Vannak előnyei és hátrányai toohaving nagy számú frissítési tartomány.</span><span class="sxs-lookup"><span data-stu-id="ac16e-172">There are pros and cons toohaving large numbers of Upgrade Domains.</span></span> <span data-ttu-id="ac16e-173">További frissítési tartományok azt jelenti, hogy egyes hello frissítés lépéseinek részletesebb, és ezért hatással van a csomópont vagy a szolgáltatások kevesebb.</span><span class="sxs-lookup"><span data-stu-id="ac16e-173">More Upgrade Domains means each step of hello upgrade is more granular and therefore affects a smaller number of nodes or services.</span></span> <span data-ttu-id="ac16e-174">Ennek eredményeképpen kevesebb szolgáltatások rendelkeznek toomove egyszerre, kisebb a forgalom bevezetéséről hello rendszerbe.</span><span class="sxs-lookup"><span data-stu-id="ac16e-174">As a result, fewer services have toomove at a time, introducing less churn into hello system.</span></span> <span data-ttu-id="ac16e-175">Ez általában tooimprove megbízhatóság, mert kisebb hello szolgáltatás által bevezetett hello frissítés során bármilyen problémát kihatással van.</span><span class="sxs-lookup"><span data-stu-id="ac16e-175">This tends tooimprove reliability, since less of hello service is impacted by any issue introduced during hello upgrade.</span></span> <span data-ttu-id="ac16e-176">További frissítési tartományok azt is jelenti, kell kevesebb, mint a más csomópontok toohandle hello hatása hello elérhető puffer frissíteni.</span><span class="sxs-lookup"><span data-stu-id="ac16e-176">More Upgrade Domains also means that you need less available buffer on other nodes toohandle hello impact of hello upgrade.</span></span> <span data-ttu-id="ac16e-177">Például ha öt frissítési tartományok, minden egyes csomópontján hello vannak kezelése nagyjából 20 %-a forgalmat.</span><span class="sxs-lookup"><span data-stu-id="ac16e-177">For example, if you have five Upgrade Domains, hello nodes in each are handling roughly 20% of your traffic.</span></span> <span data-ttu-id="ac16e-178">Ha tootake frissítési tartomány le kell a frissítéshez, a terhelés általában kell toogo valahol.</span><span class="sxs-lookup"><span data-stu-id="ac16e-178">If you need tootake down that Upgrade Domain for an upgrade, that load usually needs toogo somewhere.</span></span> <span data-ttu-id="ac16e-179">Négy fennmaradó frissítési tartományban vannak, mivel minden egyes hely hello teljes forgalom körülbelül 5 %-át kell rendelkeznie.</span><span class="sxs-lookup"><span data-stu-id="ac16e-179">Since you have four remaining Upgrade Domains, each must have room for about 5% of hello total traffic.</span></span> <span data-ttu-id="ac16e-180">További frissítési tartományok azt jelenti, hogy kevesebb puffer hello fürt hello csomópontján van szüksége.</span><span class="sxs-lookup"><span data-stu-id="ac16e-180">More Upgrade Domains means you need less buffer on hello nodes in hello cluster.</span></span> <span data-ttu-id="ac16e-181">Tegyük fel, hogy ha 10 frissítési tartománya volt helyette.</span><span class="sxs-lookup"><span data-stu-id="ac16e-181">For example, consider if you had 10 Upgrade Domains instead.</span></span> <span data-ttu-id="ac16e-182">Ebben az esetben egyes UD volna csak végző hello teljes forgalom körülbelül 10 %-át.</span><span class="sxs-lookup"><span data-stu-id="ac16e-182">In that case, each UD would only be handling about 10% of hello total traffic.</span></span> <span data-ttu-id="ac16e-183">Ha a frissítési lépéseket hello fürt keresztül, minden tartomány csak kellene toohave hely készül 1.1 % hello teljes forgalom számára.</span><span class="sxs-lookup"><span data-stu-id="ac16e-183">When an upgrade steps through hello cluster, each domain would only need toohave room for about 1.1% of hello total traffic.</span></span> <span data-ttu-id="ac16e-184">További frissítési tartományok általában lehetővé teszi toorun magasabb kihasználtsága, mivel kevesebb lefoglalt kapacitás van szüksége a csomópontokat.</span><span class="sxs-lookup"><span data-stu-id="ac16e-184">More Upgrade Domains generally allow you toorun your nodes at higher utilization, since you need less reserved capacity.</span></span> <span data-ttu-id="ac16e-185">hello esetében is igaz tartalék tartományok.</span><span class="sxs-lookup"><span data-stu-id="ac16e-185">hello same is true for Fault Domains.</span></span>  

<span data-ttu-id="ac16e-186">hello hátránya, hogy hány frissítési tartományok, hogy az egyes frissítések tootake hosszabb.</span><span class="sxs-lookup"><span data-stu-id="ac16e-186">hello downside of having many Upgrade Domains is that upgrades tend tootake longer.</span></span> <span data-ttu-id="ac16e-187">A Service Fabric egy megvárja-e egy rövid idő alatt után egy frissítési tartomány befejeződött, és tooupgrade hello elindítása előtt ellenőrzi.</span><span class="sxs-lookup"><span data-stu-id="ac16e-187">Service Fabric waits a short period of time after an Upgrade Domain is completed and performs checks before starting tooupgrade hello next one.</span></span> <span data-ttu-id="ac16e-188">Ezek a késleltetések bevezetett hello frissítése előtt hello frissítés előrehalad észlelése problémák engedélyezése.</span><span class="sxs-lookup"><span data-stu-id="ac16e-188">These delays enable detecting issues introduced by hello upgrade before hello upgrade proceeds.</span></span> <span data-ttu-id="ac16e-189">hello kompromisszumot nem elfogadható, mert megakadályozza, hogy rossz módosítások érintő hello szolgáltatás túl sok egyszerre.</span><span class="sxs-lookup"><span data-stu-id="ac16e-189">hello tradeoff is acceptable because it prevents bad changes from affecting too much of hello service at a time.</span></span>

<span data-ttu-id="ac16e-190">Túl kevés frissítési tartományok rendelkezik sok negatív hatásai – minden egyes frissítési tartomány nem működik, amíg a frissítés alatt áll egy nagy része a teljes kapacitásának nem érhető el.</span><span class="sxs-lookup"><span data-stu-id="ac16e-190">Too few Upgrade Domains has many negative side effects – while each individual Upgrade Domain is down and being upgraded a large portion of your overall capacity is unavailable.</span></span> <span data-ttu-id="ac16e-191">Például ha csak három frissítési tartományok készítésének körülbelül 1/3 a teljes szolgáltatás vagy a fürt kapacitás le egyszerre.</span><span class="sxs-lookup"><span data-stu-id="ac16e-191">For example, if you only have three Upgrade Domains you are taking down about 1/3 of your overall service or cluster capacity at a time.</span></span> <span data-ttu-id="ac16e-192">Hogy nagy részét a szolgáltatás le egyszerre nem kívánatos, mivel Ön toohave elegendő kapacitással rendelkeznek a toohandle hello fürtmunkaterhelés hello többi.</span><span class="sxs-lookup"><span data-stu-id="ac16e-192">Having so much of your service down at once isn’t desirable since you have toohave enough capacity in hello rest of your cluster toohandle hello workload.</span></span> <span data-ttu-id="ac16e-193">Adott puffer azt jelenti, hogy normál működés során azokat a csomópontokat, kisebb, mint egyébként betöltött karbantartása.</span><span class="sxs-lookup"><span data-stu-id="ac16e-193">Maintaining that buffer means that during normal operation those nodes are less loaded than they would be otherwise.</span></span> <span data-ttu-id="ac16e-194">Ez növeli a szolgáltatást futtató hello költségét.</span><span class="sxs-lookup"><span data-stu-id="ac16e-194">This increases hello cost of running your service.</span></span>

<span data-ttu-id="ac16e-195">Nincs valós toohello összesített számának korlátozása hiba vagy a frissítési tartományok egy olyan környezetben, vagy korlátozza a hogyan átfedik van.</span><span class="sxs-lookup"><span data-stu-id="ac16e-195">There’s no real limit toohello total number of fault or Upgrade Domains in an environment, or constraints on how they overlap.</span></span> <span data-ttu-id="ac16e-196">Említett, van néhány gyakori minták:</span><span class="sxs-lookup"><span data-stu-id="ac16e-196">That said, there are several common patterns:</span></span>

- <span data-ttu-id="ac16e-197">Tartalék tartományok és a frissítési tartományok leképezése 1:1</span><span class="sxs-lookup"><span data-stu-id="ac16e-197">Fault Domains and Upgrade Domains mapped 1:1</span></span>
- <span data-ttu-id="ac16e-198">Egy frissítési tartomány-csomópontokban (fizikai vagy virtuális OS példány)</span><span class="sxs-lookup"><span data-stu-id="ac16e-198">One Upgrade Domain per Node (physical or virtual OS instance)</span></span>
- <span data-ttu-id="ac16e-199">Ha hello tartalék tartományok és a frissítési tartományok alkotják a mátrix általában fut le hello átlói gépekkel "csíkozott" vagy "mátrix" modell</span><span class="sxs-lookup"><span data-stu-id="ac16e-199">A “striped” or “matrix” model where hello Fault Domains and Upgrade Domains form a matrix with machines usually running down hello diagonals</span></span>

<span data-ttu-id="ac16e-200"><center>
![Hiba és a frissítési tartomány elrendezések][Image4]
</center></span><span class="sxs-lookup"><span data-stu-id="ac16e-200"><center>
![Fault and Upgrade Domain Layouts][Image4]
</center></span></span>

<span data-ttu-id="ac16e-201">Nem ajánlott mely elrendezés toochoose választ, a mindegyike rendelkezik néhány előnyei és hátrányai.</span><span class="sxs-lookup"><span data-stu-id="ac16e-201">There’s no best answer which layout toochoose, each has some pros and cons.</span></span> <span data-ttu-id="ac16e-202">Például hello 1FD:1UD modell egyszerű tooset legfeljebb lesz.</span><span class="sxs-lookup"><span data-stu-id="ac16e-202">For example, hello 1FD:1UD model is simple tooset up.</span></span> <span data-ttu-id="ac16e-203">hello csomópont modell 1 frissítési tartományonkénti például milyen személyek használt legtöbb.</span><span class="sxs-lookup"><span data-stu-id="ac16e-203">hello 1 Upgrade Domain per Node model is most like what people are used to.</span></span> <span data-ttu-id="ac16e-204">Frissítések során minden egyes csomópont önállóan frissül.</span><span class="sxs-lookup"><span data-stu-id="ac16e-204">During upgrades each node is updated independently.</span></span> <span data-ttu-id="ac16e-205">Ez a hasonló toohow kis csoportja gépek múltbeli hello a manuálisan frissített.</span><span class="sxs-lookup"><span data-stu-id="ac16e-205">This is similar toohow small sets of machines were upgraded manually in hello past.</span></span> 

<span data-ttu-id="ac16e-206">hello leggyakoribb modell hello FD/UD mátrix, ahol hello FDs és UDs egy táblát, és csomópontok kerülnek mentén átlós hello indítása.</span><span class="sxs-lookup"><span data-stu-id="ac16e-206">hello most common model is hello FD/UD matrix, where hello FDs and UDs form a table and nodes are placed starting along hello diagonal.</span></span> <span data-ttu-id="ac16e-207">Ez az alapértelmezés szerint a Service Fabric-fürtök az Azure-ban használt hello modell.</span><span class="sxs-lookup"><span data-stu-id="ac16e-207">This is hello model used by default in Service Fabric clusters in Azure.</span></span> <span data-ttu-id="ac16e-208">A sok csomópontokkal rendelkező fürtök mindent fejeződik be a like hello sűrű mátrix fenti keresése.</span><span class="sxs-lookup"><span data-stu-id="ac16e-208">For clusters with many nodes everything ends up looking like hello dense matrix pattern above.</span></span>

## <a name="fault-and-upgrade-domain-constraints-and-resulting-behavior"></a><span data-ttu-id="ac16e-209">Hiba és a frissítési tartomány típusmegkötéseket és az eredményül kapott viselkedéstől</span><span class="sxs-lookup"><span data-stu-id="ac16e-209">Fault and Upgrade Domain constraints and resulting behavior</span></span>
<span data-ttu-id="ac16e-210">hello fürt erőforrás-kezelő szolgáltatás tookeep hiba és a frissítési tartományok korlátozásként között elosztott terhelésű hello desire kezeli.</span><span class="sxs-lookup"><span data-stu-id="ac16e-210">hello Cluster Resource Manager treats hello desire tookeep a service balanced across fault and Upgrade Domains as a constraint.</span></span> <span data-ttu-id="ac16e-211">További információk a korlátozások található [Ez a cikk](service-fabric-cluster-resource-manager-management-integration.md).</span><span class="sxs-lookup"><span data-stu-id="ac16e-211">You can find out more about constraints in [this article](service-fabric-cluster-resource-manager-management-integration.md).</span></span> <span data-ttu-id="ac16e-212">Hiba és a frissítési tartomány megkötések állapot hello: "egy adott szolgáltatáshoz partíció soha nem kell különbséget *nagyobb, mint egy* hello (állapotmentes szolgáltatások példányok vagy állapotalapú szolgáltatási replikák) szolgáltatás objektumok száma tartományok közötti."</span><span class="sxs-lookup"><span data-stu-id="ac16e-212">hello Fault and Upgrade Domain constraints state: "For a given service partition there should never be a difference *greater than one* in hello number of service objects (stateless service instances or stateful service replicas) between two domains."</span></span> <span data-ttu-id="ac16e-213">Ez megakadályozza, hogy bizonyos helyezi át, vagy a szabályok, amelyek megszegnek ennél a határértéknél.</span><span class="sxs-lookup"><span data-stu-id="ac16e-213">This prevents certain moves or arrangements that violate this constraint.</span></span>

<span data-ttu-id="ac16e-214">Nézzük például.</span><span class="sxs-lookup"><span data-stu-id="ac16e-214">Let's look at one example.</span></span> <span data-ttu-id="ac16e-215">Tegyük fel, hogy rendelkezik-e öt tartalék tartományok és öt frissítési tartományok hat csomóponttal rendelkező fürt.</span><span class="sxs-lookup"><span data-stu-id="ac16e-215">Let's say that we have a cluster with six nodes, configured with five Fault Domains and five Upgrade Domains.</span></span>

|  | <span data-ttu-id="ac16e-216">FD0</span><span class="sxs-lookup"><span data-stu-id="ac16e-216">FD0</span></span> | <span data-ttu-id="ac16e-217">FD1</span><span class="sxs-lookup"><span data-stu-id="ac16e-217">FD1</span></span> | <span data-ttu-id="ac16e-218">FD2</span><span class="sxs-lookup"><span data-stu-id="ac16e-218">FD2</span></span> | <span data-ttu-id="ac16e-219">FD3</span><span class="sxs-lookup"><span data-stu-id="ac16e-219">FD3</span></span> | <span data-ttu-id="ac16e-220">FD4</span><span class="sxs-lookup"><span data-stu-id="ac16e-220">FD4</span></span> |
| --- |:---:|:---:|:---:|:---:|:---:|
| <span data-ttu-id="ac16e-221">**UD0**</span><span class="sxs-lookup"><span data-stu-id="ac16e-221">**UD0**</span></span> |<span data-ttu-id="ac16e-222">N1</span><span class="sxs-lookup"><span data-stu-id="ac16e-222">N1</span></span> | | | | |
| <span data-ttu-id="ac16e-223">**UD1**</span><span class="sxs-lookup"><span data-stu-id="ac16e-223">**UD1**</span></span> |<span data-ttu-id="ac16e-224">N6</span><span class="sxs-lookup"><span data-stu-id="ac16e-224">N6</span></span> |<span data-ttu-id="ac16e-225">N2</span><span class="sxs-lookup"><span data-stu-id="ac16e-225">N2</span></span> | | | |
| <span data-ttu-id="ac16e-226">**UD2**</span><span class="sxs-lookup"><span data-stu-id="ac16e-226">**UD2**</span></span> | | |<span data-ttu-id="ac16e-227">N3</span><span class="sxs-lookup"><span data-stu-id="ac16e-227">N3</span></span> | | |
| <span data-ttu-id="ac16e-228">**UD3**</span><span class="sxs-lookup"><span data-stu-id="ac16e-228">**UD3**</span></span> | | | |<span data-ttu-id="ac16e-229">N4</span><span class="sxs-lookup"><span data-stu-id="ac16e-229">N4</span></span> | |
| <span data-ttu-id="ac16e-230">**UD4**</span><span class="sxs-lookup"><span data-stu-id="ac16e-230">**UD4**</span></span> | | | | |<span data-ttu-id="ac16e-231">N5</span><span class="sxs-lookup"><span data-stu-id="ac16e-231">N5</span></span> |

<span data-ttu-id="ac16e-232">Most tegyük fel, a szolgáltatás egy TargetReplicaSetSize (vagy, egy állapot nélküli szolgáltatáshoz az InstanceCount) létrehozhatunk öt.</span><span class="sxs-lookup"><span data-stu-id="ac16e-232">Now let's say that we create a service with a TargetReplicaSetSize (or, for a stateless service an InstanceCount) of five.</span></span> <span data-ttu-id="ac16e-233">hello replikák N1-N5 léphet.</span><span class="sxs-lookup"><span data-stu-id="ac16e-233">hello replicas land on N1-N5.</span></span> <span data-ttu-id="ac16e-234">N6 valójában soha nem használt függetlenül attól, hány szolgáltatások, például a hoz létre.</span><span class="sxs-lookup"><span data-stu-id="ac16e-234">In fact, N6 is never used no matter how many services like this you create.</span></span> <span data-ttu-id="ac16e-235">De miért?</span><span class="sxs-lookup"><span data-stu-id="ac16e-235">But why?</span></span> <span data-ttu-id="ac16e-236">Nézzük hello különbségének hello aktuális elrendezést, és mi történne N6 van kiválasztva.</span><span class="sxs-lookup"><span data-stu-id="ac16e-236">Let's look at hello difference between hello current layout and what would happen if N6 is chosen.</span></span>

<span data-ttu-id="ac16e-237">A Microsoft készült, és hiba és a frissítési tartomány / replikák száma hello hello elrendezés itt található:</span><span class="sxs-lookup"><span data-stu-id="ac16e-237">Here's hello layout we got and hello total number of replicas per Fault and Upgrade Domain:</span></span>

|  | <span data-ttu-id="ac16e-238">FD0</span><span class="sxs-lookup"><span data-stu-id="ac16e-238">FD0</span></span> | <span data-ttu-id="ac16e-239">FD1</span><span class="sxs-lookup"><span data-stu-id="ac16e-239">FD1</span></span> | <span data-ttu-id="ac16e-240">FD2</span><span class="sxs-lookup"><span data-stu-id="ac16e-240">FD2</span></span> | <span data-ttu-id="ac16e-241">FD3</span><span class="sxs-lookup"><span data-stu-id="ac16e-241">FD3</span></span> | <span data-ttu-id="ac16e-242">FD4</span><span class="sxs-lookup"><span data-stu-id="ac16e-242">FD4</span></span> | <span data-ttu-id="ac16e-243">UDTotal</span><span class="sxs-lookup"><span data-stu-id="ac16e-243">UDTotal</span></span> |
| --- |:---:|:---:|:---:|:---:|:---:|:---:|
| <span data-ttu-id="ac16e-244">**UD0**</span><span class="sxs-lookup"><span data-stu-id="ac16e-244">**UD0**</span></span> |<span data-ttu-id="ac16e-245">R1</span><span class="sxs-lookup"><span data-stu-id="ac16e-245">R1</span></span> | | | | |<span data-ttu-id="ac16e-246">1</span><span class="sxs-lookup"><span data-stu-id="ac16e-246">1</span></span> |
| <span data-ttu-id="ac16e-247">**UD1**</span><span class="sxs-lookup"><span data-stu-id="ac16e-247">**UD1**</span></span> | |<span data-ttu-id="ac16e-248">R2</span><span class="sxs-lookup"><span data-stu-id="ac16e-248">R2</span></span> | | | |<span data-ttu-id="ac16e-249">1</span><span class="sxs-lookup"><span data-stu-id="ac16e-249">1</span></span> |
| <span data-ttu-id="ac16e-250">**UD2**</span><span class="sxs-lookup"><span data-stu-id="ac16e-250">**UD2**</span></span> | | |<span data-ttu-id="ac16e-251">R3</span><span class="sxs-lookup"><span data-stu-id="ac16e-251">R3</span></span> | | |<span data-ttu-id="ac16e-252">1</span><span class="sxs-lookup"><span data-stu-id="ac16e-252">1</span></span> |
| <span data-ttu-id="ac16e-253">**UD3**</span><span class="sxs-lookup"><span data-stu-id="ac16e-253">**UD3**</span></span> | | | |<span data-ttu-id="ac16e-254">R4</span><span class="sxs-lookup"><span data-stu-id="ac16e-254">R4</span></span> | |<span data-ttu-id="ac16e-255">1</span><span class="sxs-lookup"><span data-stu-id="ac16e-255">1</span></span> |
| <span data-ttu-id="ac16e-256">**UD4**</span><span class="sxs-lookup"><span data-stu-id="ac16e-256">**UD4**</span></span> | | | | |<span data-ttu-id="ac16e-257">R5</span><span class="sxs-lookup"><span data-stu-id="ac16e-257">R5</span></span> |<span data-ttu-id="ac16e-258">1</span><span class="sxs-lookup"><span data-stu-id="ac16e-258">1</span></span> |
| <span data-ttu-id="ac16e-259">**FDTotal**</span><span class="sxs-lookup"><span data-stu-id="ac16e-259">**FDTotal**</span></span> |<span data-ttu-id="ac16e-260">1</span><span class="sxs-lookup"><span data-stu-id="ac16e-260">1</span></span> |<span data-ttu-id="ac16e-261">1</span><span class="sxs-lookup"><span data-stu-id="ac16e-261">1</span></span> |<span data-ttu-id="ac16e-262">1</span><span class="sxs-lookup"><span data-stu-id="ac16e-262">1</span></span> |<span data-ttu-id="ac16e-263">1</span><span class="sxs-lookup"><span data-stu-id="ac16e-263">1</span></span> |<span data-ttu-id="ac16e-264">1</span><span class="sxs-lookup"><span data-stu-id="ac16e-264">1</span></span> |- |

<span data-ttu-id="ac16e-265">Ebben az elrendezésben kiegyensúlyozott tartalék tartomány és a frissítési tartományi csomópontok tekintetében.</span><span class="sxs-lookup"><span data-stu-id="ac16e-265">This layout is balanced in terms of nodes per Fault Domain and Upgrade Domain.</span></span> <span data-ttu-id="ac16e-266">Azt is kiegyensúlyozott hiba és a frissítési tartomány / replikák hello számát.</span><span class="sxs-lookup"><span data-stu-id="ac16e-266">It is also balanced in terms of hello number of replicas per Fault and Upgrade Domain.</span></span> <span data-ttu-id="ac16e-267">Egyes tartományok csomópontok azonos számú hello és replikák azonos számú hello.</span><span class="sxs-lookup"><span data-stu-id="ac16e-267">Each domain has hello same number of nodes and hello same number of replicas.</span></span>

<span data-ttu-id="ac16e-268">Most mi történne helyett N2 kellett használtuk N6 vizsgáljuk meg.</span><span class="sxs-lookup"><span data-stu-id="ac16e-268">Now, let's look at what would happen if we'd used N6 instead of N2.</span></span> <span data-ttu-id="ac16e-269">Hogyan lesz replikák hello terjeszthetők majd?</span><span class="sxs-lookup"><span data-stu-id="ac16e-269">How would hello replicas be distributed then?</span></span>

|  | <span data-ttu-id="ac16e-270">FD0</span><span class="sxs-lookup"><span data-stu-id="ac16e-270">FD0</span></span> | <span data-ttu-id="ac16e-271">FD1</span><span class="sxs-lookup"><span data-stu-id="ac16e-271">FD1</span></span> | <span data-ttu-id="ac16e-272">FD2</span><span class="sxs-lookup"><span data-stu-id="ac16e-272">FD2</span></span> | <span data-ttu-id="ac16e-273">FD3</span><span class="sxs-lookup"><span data-stu-id="ac16e-273">FD3</span></span> | <span data-ttu-id="ac16e-274">FD4</span><span class="sxs-lookup"><span data-stu-id="ac16e-274">FD4</span></span> | <span data-ttu-id="ac16e-275">UDTotal</span><span class="sxs-lookup"><span data-stu-id="ac16e-275">UDTotal</span></span> |
| --- |:---:|:---:|:---:|:---:|:---:|:---:|
| <span data-ttu-id="ac16e-276">**UD0**</span><span class="sxs-lookup"><span data-stu-id="ac16e-276">**UD0**</span></span> |<span data-ttu-id="ac16e-277">R1</span><span class="sxs-lookup"><span data-stu-id="ac16e-277">R1</span></span> | | | | |<span data-ttu-id="ac16e-278">1</span><span class="sxs-lookup"><span data-stu-id="ac16e-278">1</span></span> |
| <span data-ttu-id="ac16e-279">**UD1**</span><span class="sxs-lookup"><span data-stu-id="ac16e-279">**UD1**</span></span> |<span data-ttu-id="ac16e-280">R5</span><span class="sxs-lookup"><span data-stu-id="ac16e-280">R5</span></span> | | | | |<span data-ttu-id="ac16e-281">1</span><span class="sxs-lookup"><span data-stu-id="ac16e-281">1</span></span> |
| <span data-ttu-id="ac16e-282">**UD2**</span><span class="sxs-lookup"><span data-stu-id="ac16e-282">**UD2**</span></span> | | |<span data-ttu-id="ac16e-283">R2</span><span class="sxs-lookup"><span data-stu-id="ac16e-283">R2</span></span> | | |<span data-ttu-id="ac16e-284">1</span><span class="sxs-lookup"><span data-stu-id="ac16e-284">1</span></span> |
| <span data-ttu-id="ac16e-285">**UD3**</span><span class="sxs-lookup"><span data-stu-id="ac16e-285">**UD3**</span></span> | | | |<span data-ttu-id="ac16e-286">R3</span><span class="sxs-lookup"><span data-stu-id="ac16e-286">R3</span></span> | |<span data-ttu-id="ac16e-287">1</span><span class="sxs-lookup"><span data-stu-id="ac16e-287">1</span></span> |
| <span data-ttu-id="ac16e-288">**UD4**</span><span class="sxs-lookup"><span data-stu-id="ac16e-288">**UD4**</span></span> | | | | |<span data-ttu-id="ac16e-289">R4</span><span class="sxs-lookup"><span data-stu-id="ac16e-289">R4</span></span> |<span data-ttu-id="ac16e-290">1</span><span class="sxs-lookup"><span data-stu-id="ac16e-290">1</span></span> |
| <span data-ttu-id="ac16e-291">**FDTotal**</span><span class="sxs-lookup"><span data-stu-id="ac16e-291">**FDTotal**</span></span> |<span data-ttu-id="ac16e-292">2</span><span class="sxs-lookup"><span data-stu-id="ac16e-292">2</span></span> |<span data-ttu-id="ac16e-293">0</span><span class="sxs-lookup"><span data-stu-id="ac16e-293">0</span></span> |<span data-ttu-id="ac16e-294">1</span><span class="sxs-lookup"><span data-stu-id="ac16e-294">1</span></span> |<span data-ttu-id="ac16e-295">1</span><span class="sxs-lookup"><span data-stu-id="ac16e-295">1</span></span> |<span data-ttu-id="ac16e-296">1</span><span class="sxs-lookup"><span data-stu-id="ac16e-296">1</span></span> |- |

<span data-ttu-id="ac16e-297">Ebben az elrendezésben megsérti a tartalék tartomány korlátozás hello definíciója.</span><span class="sxs-lookup"><span data-stu-id="ac16e-297">This layout violates our definition for hello Fault Domain constraint.</span></span> <span data-ttu-id="ac16e-298">FD0 két replika van, míg FD1 nulla, felhasználásának hello különbség FD0 és FD1 összesen két.</span><span class="sxs-lookup"><span data-stu-id="ac16e-298">FD0 has two replicas, while FD1 has zero, making hello difference between FD0 and FD1 a total of two.</span></span> <span data-ttu-id="ac16e-299">Ezzel az elrendezéssel hello fürt erőforrás-kezelő nem érhető el.</span><span class="sxs-lookup"><span data-stu-id="ac16e-299">hello Cluster Resource Manager does not allow this arrangement.</span></span> <span data-ttu-id="ac16e-300">Hasonlóképpen, ha azt kivételezett N2 és N6 (helyett N1 és N2) azt visszajelzést kap:</span><span class="sxs-lookup"><span data-stu-id="ac16e-300">Similarly if we picked N2 and N6 (instead of N1 and N2) we'd get:</span></span>

|  | <span data-ttu-id="ac16e-301">FD0</span><span class="sxs-lookup"><span data-stu-id="ac16e-301">FD0</span></span> | <span data-ttu-id="ac16e-302">FD1</span><span class="sxs-lookup"><span data-stu-id="ac16e-302">FD1</span></span> | <span data-ttu-id="ac16e-303">FD2</span><span class="sxs-lookup"><span data-stu-id="ac16e-303">FD2</span></span> | <span data-ttu-id="ac16e-304">FD3</span><span class="sxs-lookup"><span data-stu-id="ac16e-304">FD3</span></span> | <span data-ttu-id="ac16e-305">FD4</span><span class="sxs-lookup"><span data-stu-id="ac16e-305">FD4</span></span> | <span data-ttu-id="ac16e-306">UDTotal</span><span class="sxs-lookup"><span data-stu-id="ac16e-306">UDTotal</span></span> |
| --- |:---:|:---:|:---:|:---:|:---:|:---:|
| <span data-ttu-id="ac16e-307">**UD0**</span><span class="sxs-lookup"><span data-stu-id="ac16e-307">**UD0**</span></span> | | | | | |<span data-ttu-id="ac16e-308">0</span><span class="sxs-lookup"><span data-stu-id="ac16e-308">0</span></span> |
| <span data-ttu-id="ac16e-309">**UD1**</span><span class="sxs-lookup"><span data-stu-id="ac16e-309">**UD1**</span></span> |<span data-ttu-id="ac16e-310">R5</span><span class="sxs-lookup"><span data-stu-id="ac16e-310">R5</span></span> |<span data-ttu-id="ac16e-311">R1</span><span class="sxs-lookup"><span data-stu-id="ac16e-311">R1</span></span> | | | |<span data-ttu-id="ac16e-312">2</span><span class="sxs-lookup"><span data-stu-id="ac16e-312">2</span></span> |
| <span data-ttu-id="ac16e-313">**UD2**</span><span class="sxs-lookup"><span data-stu-id="ac16e-313">**UD2**</span></span> | | |<span data-ttu-id="ac16e-314">R2</span><span class="sxs-lookup"><span data-stu-id="ac16e-314">R2</span></span> | | |<span data-ttu-id="ac16e-315">1</span><span class="sxs-lookup"><span data-stu-id="ac16e-315">1</span></span> |
| <span data-ttu-id="ac16e-316">**UD3**</span><span class="sxs-lookup"><span data-stu-id="ac16e-316">**UD3**</span></span> | | | |<span data-ttu-id="ac16e-317">R3</span><span class="sxs-lookup"><span data-stu-id="ac16e-317">R3</span></span> | |<span data-ttu-id="ac16e-318">1</span><span class="sxs-lookup"><span data-stu-id="ac16e-318">1</span></span> |
| <span data-ttu-id="ac16e-319">**UD4**</span><span class="sxs-lookup"><span data-stu-id="ac16e-319">**UD4**</span></span> | | | | |<span data-ttu-id="ac16e-320">R4</span><span class="sxs-lookup"><span data-stu-id="ac16e-320">R4</span></span> |<span data-ttu-id="ac16e-321">1</span><span class="sxs-lookup"><span data-stu-id="ac16e-321">1</span></span> |
| <span data-ttu-id="ac16e-322">**FDTotal**</span><span class="sxs-lookup"><span data-stu-id="ac16e-322">**FDTotal**</span></span> |<span data-ttu-id="ac16e-323">1</span><span class="sxs-lookup"><span data-stu-id="ac16e-323">1</span></span> |<span data-ttu-id="ac16e-324">1</span><span class="sxs-lookup"><span data-stu-id="ac16e-324">1</span></span> |<span data-ttu-id="ac16e-325">1</span><span class="sxs-lookup"><span data-stu-id="ac16e-325">1</span></span> |<span data-ttu-id="ac16e-326">1</span><span class="sxs-lookup"><span data-stu-id="ac16e-326">1</span></span> |<span data-ttu-id="ac16e-327">1</span><span class="sxs-lookup"><span data-stu-id="ac16e-327">1</span></span> |- |

<span data-ttu-id="ac16e-328">Ebben az elrendezésben kiegyensúlyozott tartalék tartományok tekintetében.</span><span class="sxs-lookup"><span data-stu-id="ac16e-328">This layout is balanced in terms of Fault Domains.</span></span> <span data-ttu-id="ac16e-329">Azonban most azt van a szabályt sértő hello frissítési tartomány korlátozás.</span><span class="sxs-lookup"><span data-stu-id="ac16e-329">However, now it's violating hello Upgrade Domain constraint.</span></span> <span data-ttu-id="ac16e-330">Ennek az az oka UD0 rendelkezik nulla replikákat, míg két UD1 tartozik.</span><span class="sxs-lookup"><span data-stu-id="ac16e-330">This is because UD0 has zero replicas while UD1 has two.</span></span> <span data-ttu-id="ac16e-331">Ezért az elrendezés is érvénytelen, és nem tárolható hello fürt erőforrás-kezelő által.</span><span class="sxs-lookup"><span data-stu-id="ac16e-331">Therefore, this layout is also invalid and won't be picked by hello Cluster Resource Manager.</span></span> 

## <a name="configuring-fault-and-upgrade-domains"></a><span data-ttu-id="ac16e-332">Hiba és a frissítési tartományok konfigurálása</span><span class="sxs-lookup"><span data-stu-id="ac16e-332">Configuring fault and Upgrade Domains</span></span>
<span data-ttu-id="ac16e-333">Tartalék tartományok és a frissítési tartományok definiálása történik meg automatikusan az Azure Service Fabric központi telepítések üzemeltetett.</span><span class="sxs-lookup"><span data-stu-id="ac16e-333">Defining Fault Domains and Upgrade Domains is done automatically in Azure hosted Service Fabric deployments.</span></span> <span data-ttu-id="ac16e-334">A Service Fabric szerzi be, és hello környezet az adatokat az Azure-ból használja.</span><span class="sxs-lookup"><span data-stu-id="ac16e-334">Service Fabric picks up and uses hello environment information from Azure.</span></span>

<span data-ttu-id="ac16e-335">Ha saját fürt létrehozása folyamatban (vagy egy adott topológia a fejlesztési toorun), megadhatja hello tartalék tartomány és a frissítési tartomány információkat saját maga.</span><span class="sxs-lookup"><span data-stu-id="ac16e-335">If you’re creating your own cluster (or want toorun a particular topology in development), you can provide hello Fault Domain and Upgrade Domain information yourself.</span></span> <span data-ttu-id="ac16e-336">Ebben a példában meghatároztuk a kilenc csomópont helyi fejlesztési fürtök három "adatközpontok" (mindnek három rackszekrények) is.</span><span class="sxs-lookup"><span data-stu-id="ac16e-336">In this example, we define a nine node local development cluster that spans three “datacenters” (each with three racks).</span></span> <span data-ttu-id="ac16e-337">A fürt ezen három üzemeltetésében csíkozott három frissítési tartomány is van.</span><span class="sxs-lookup"><span data-stu-id="ac16e-337">This cluster also has three Upgrade Domains striped across those three datacenters.</span></span> <span data-ttu-id="ac16e-338">Hello konfigurációját nem éri el:</span><span class="sxs-lookup"><span data-stu-id="ac16e-338">An example of hello configuration is below:</span></span> 

<span data-ttu-id="ac16e-339">ClusterManifest.xml</span><span class="sxs-lookup"><span data-stu-id="ac16e-339">ClusterManifest.xml</span></span>

```xml
  <Infrastructure>
    <!-- IsScaleMin indicates that this cluster runs on one-box /one single server -->
    <WindowsServer IsScaleMin="true">
      <NodeList>
        <Node NodeName="Node01" IPAddressOrFQDN="localhost" NodeTypeRef="NodeType01" FaultDomain="fd:/DC01/Rack01" UpgradeDomain="UpgradeDomain1" IsSeedNode="true" />
        <Node NodeName="Node02" IPAddressOrFQDN="localhost" NodeTypeRef="NodeType02" FaultDomain="fd:/DC01/Rack02" UpgradeDomain="UpgradeDomain2" IsSeedNode="true" />
        <Node NodeName="Node03" IPAddressOrFQDN="localhost" NodeTypeRef="NodeType03" FaultDomain="fd:/DC01/Rack03" UpgradeDomain="UpgradeDomain3" IsSeedNode="true" />
        <Node NodeName="Node04" IPAddressOrFQDN="localhost" NodeTypeRef="NodeType04" FaultDomain="fd:/DC02/Rack01" UpgradeDomain="UpgradeDomain1" IsSeedNode="true" />
        <Node NodeName="Node05" IPAddressOrFQDN="localhost" NodeTypeRef="NodeType05" FaultDomain="fd:/DC02/Rack02" UpgradeDomain="UpgradeDomain2" IsSeedNode="true" />
        <Node NodeName="Node06" IPAddressOrFQDN="localhost" NodeTypeRef="NodeType06" FaultDomain="fd:/DC02/Rack03" UpgradeDomain="UpgradeDomain3" IsSeedNode="true" />
        <Node NodeName="Node07" IPAddressOrFQDN="localhost" NodeTypeRef="NodeType07" FaultDomain="fd:/DC03/Rack01" UpgradeDomain="UpgradeDomain1" IsSeedNode="true" />
        <Node NodeName="Node08" IPAddressOrFQDN="localhost" NodeTypeRef="NodeType08" FaultDomain="fd:/DC03/Rack02" UpgradeDomain="UpgradeDomain2" IsSeedNode="true" />
        <Node NodeName="Node09" IPAddressOrFQDN="localhost" NodeTypeRef="NodeType09" FaultDomain="fd:/DC03/Rack03" UpgradeDomain="UpgradeDomain3" IsSeedNode="true" />
      </NodeList>
    </WindowsServer>
  </Infrastructure>
```

<span data-ttu-id="ac16e-340">az önálló verziója telepítéseinek művelet keresztül</span><span class="sxs-lookup"><span data-stu-id="ac16e-340">via ClusterConfig.json for Standalone deployments</span></span>

```json
"nodes": [
  {
    "nodeName": "vm1",
    "iPAddress": "localhost",
    "nodeTypeRef": "NodeType0",
    "faultDomain": "fd:/dc1/r0",
    "upgradeDomain": "UD1"
  },
  {
    "nodeName": "vm2",
    "iPAddress": "localhost",
    "nodeTypeRef": "NodeType0",
    "faultDomain": "fd:/dc1/r0",
    "upgradeDomain": "UD2"
  },
  {
    "nodeName": "vm3",
    "iPAddress": "localhost",
    "nodeTypeRef": "NodeType0",
    "faultDomain": "fd:/dc1/r0",
    "upgradeDomain": "UD3"
  },
  {
    "nodeName": "vm4",
    "iPAddress": "localhost",
    "nodeTypeRef": "NodeType0",
    "faultDomain": "fd:/dc2/r0",
    "upgradeDomain": "UD1"
  },
  {
    "nodeName": "vm5",
    "iPAddress": "localhost",
    "nodeTypeRef": "NodeType0",
    "faultDomain": "fd:/dc2/r0",
    "upgradeDomain": "UD2"
  },
  {
    "nodeName": "vm6",
    "iPAddress": "localhost",
    "nodeTypeRef": "NodeType0",
    "faultDomain": "fd:/dc2/r0",
    "upgradeDomain": "UD3"
  },
  {
    "nodeName": "vm7",
    "iPAddress": "localhost",
    "nodeTypeRef": "NodeType0",
    "faultDomain": "fd:/dc3/r0",
    "upgradeDomain": "UD1"
  },
  {
    "nodeName": "vm8",
    "iPAddress": "localhost",
    "nodeTypeRef": "NodeType0",
    "faultDomain": "fd:/dc3/r0",
    "upgradeDomain": "UD2"
  },
  {
    "nodeName": "vm9",
    "iPAddress": "localhost",
    "nodeTypeRef": "NodeType0",
    "faultDomain": "fd:/dc3/r0",
    "upgradeDomain": "UD3"
  }
],
```

> [!NOTE]
> <span data-ttu-id="ac16e-341">Fürtök keresztül Azure Resource Manager meghatározásakor tartalék tartományok és a frissítési tartományok Azure rendeli hozzá.</span><span class="sxs-lookup"><span data-stu-id="ac16e-341">When defining clusters via Azure Resource Manager, Fault Domains and Upgrade Domains are assigned by Azure.</span></span> <span data-ttu-id="ac16e-342">Hello meghatározása a csomóponttípusok és a virtuálisgép-méretezési csoportok az Azure Resource Manager sablon, ezért nem tartalmazza a tartalék tartomány és a frissítési tartomány adatait.</span><span class="sxs-lookup"><span data-stu-id="ac16e-342">Therefore, hello definition of your Node Types and Virtual Machine Scale Sets in your Azure Resource Manager template does not include Fault Domain or Upgrade Domain information.</span></span>
>

## <a name="node-properties-and-placement-constraints"></a><span data-ttu-id="ac16e-343">Csomópont tulajdonságai és elhelyezési korlátozás</span><span class="sxs-lookup"><span data-stu-id="ac16e-343">Node properties and placement constraints</span></span>
<span data-ttu-id="ac16e-344">Egyes esetekben (a gyakorlatban, hello legtöbbször ennek) fog toowant tooensure, amelyek bizonyos munkaterhelések csak bizonyos típusú hello fürt csomópontja.</span><span class="sxs-lookup"><span data-stu-id="ac16e-344">Sometimes (in fact, most of hello time) you’re going toowant tooensure that certain workloads run only on certain types of nodes in hello cluster.</span></span> <span data-ttu-id="ac16e-345">Például bizonyos alkalmazások és szolgáltatások igényelhet Feldolgozóegységekkel vagy SSD-k, míg mások számára nem engedélyezett.</span><span class="sxs-lookup"><span data-stu-id="ac16e-345">For example, some workload may require GPUs or SSDs while others may not.</span></span> <span data-ttu-id="ac16e-346">A nagy célcsoport-kezelési hardver tooparticular munkaterhelések példája ott szinte minden n szintű architektúra.</span><span class="sxs-lookup"><span data-stu-id="ac16e-346">A great example of targeting hardware tooparticular workloads is almost every n-tier architecture out there.</span></span> <span data-ttu-id="ac16e-347">Egyes gépek szolgál, előtér- vagy a kiszolgáló oldalán található hello alkalmazás API hello és elérhetőségi toohello ügyfelek vagy hello internet.</span><span class="sxs-lookup"><span data-stu-id="ac16e-347">Certain machines serve as hello front end or API serving side of hello application and are exposed toohello clients or hello internet.</span></span> <span data-ttu-id="ac16e-348">Eltérő gépeken, gyakran különböző hardvererőforrás, a hello munkahelyi hello számítási és tárolási rétegek kezelni.</span><span class="sxs-lookup"><span data-stu-id="ac16e-348">Different machines, often with different hardware resources, handle hello work of hello compute or storage layers.</span></span> <span data-ttu-id="ac16e-349">Ezek rendszerint _nem_ közvetlenül elérhetővé tett tooclients vagy hello internet.</span><span class="sxs-lookup"><span data-stu-id="ac16e-349">These are usually _not_ directly exposed tooclients or hello internet.</span></span> <span data-ttu-id="ac16e-350">A Service Fabric vár, hogy vannak-e esetben, amikor adott munkaterhelések kell-e az adott hardverkonfigurációk toorun.</span><span class="sxs-lookup"><span data-stu-id="ac16e-350">Service Fabric expects that there are cases where particular workloads need toorun on particular hardware configurations.</span></span> <span data-ttu-id="ac16e-351">Példa:</span><span class="sxs-lookup"><span data-stu-id="ac16e-351">For example:</span></span>

* <span data-ttu-id="ac16e-352">egy meglévő n szintű alkalmazást új "vissza, és vette" a Service Fabric környezetbe</span><span class="sxs-lookup"><span data-stu-id="ac16e-352">an existing n-tier application has been “lifted and shifted” into a Service Fabric environment</span></span>
* <span data-ttu-id="ac16e-353">a munkaterhelés a adott hardverekhez toorun szeretne a teljesítmény, a méretezési vagy a biztonsági elkülönítés okok</span><span class="sxs-lookup"><span data-stu-id="ac16e-353">a workload wants toorun on specific hardware for performance, scale, or security isolation reasons</span></span>
* <span data-ttu-id="ac16e-354">A munkaterhelés különítve a többi munkaterhelését házirend vagy az erőforrás felhasználási okokból kell lennie.</span><span class="sxs-lookup"><span data-stu-id="ac16e-354">A workload should be isolated from other workloads for policy or resource consumption reasons</span></span>

<span data-ttu-id="ac16e-355">toosupport ezek a konfigurációk, rendezése Service Fabric rendelkezik, amely alkalmazott toonodes címkék első osztályú fogalmát.</span><span class="sxs-lookup"><span data-stu-id="ac16e-355">toosupport these sorts of configurations, Service Fabric has a first class notion of tags that can be applied toonodes.</span></span> <span data-ttu-id="ac16e-356">Ezekkel a címkékkel nevezzük **csomópont tulajdonságai**.</span><span class="sxs-lookup"><span data-stu-id="ac16e-356">These tags are called **node properties**.</span></span> <span data-ttu-id="ac16e-357">**Egy elhelyezési korlátozás** hello utasítások csatolt tooindividual szolgáltatások, válasszon egy vagy több csomópont tulajdonságai.</span><span class="sxs-lookup"><span data-stu-id="ac16e-357">**Placement constraints** are hello statements attached tooindividual services that select for one or more node properties.</span></span> <span data-ttu-id="ac16e-358">Egy elhelyezési korlátozás határozza meg, ahol szolgáltatásainak futnia kell.</span><span class="sxs-lookup"><span data-stu-id="ac16e-358">Placement constraints define where services should run.</span></span> <span data-ttu-id="ac16e-359">hello beállítása megkötéseket bővíthető – bármely kulcs/érték pár is működik.</span><span class="sxs-lookup"><span data-stu-id="ac16e-359">hello set of constraints is extensible - any key/value pair can work.</span></span> 

<span data-ttu-id="ac16e-360"><center>
![A fürt különböző terhelésekhez elrendezés][Image5]
</center></span><span class="sxs-lookup"><span data-stu-id="ac16e-360"><center>
![Cluster Layout Different Workloads][Image5]
</center></span></span>

### <a name="built-in-node-properties"></a><span data-ttu-id="ac16e-361">A beépített csomópont tulajdonságai</span><span class="sxs-lookup"><span data-stu-id="ac16e-361">Built in node properties</span></span>
<span data-ttu-id="ac16e-362">A Service Fabric néhány alapértelmezett csomópont nélkül használható lesz automatikusan toodefine rendelkező hello felhasználói tulajdonságok határozza meg azokat.</span><span class="sxs-lookup"><span data-stu-id="ac16e-362">Service Fabric defines some default node properties that can be used automatically without hello user having toodefine them.</span></span> <span data-ttu-id="ac16e-363">hello alapértelmezett tulajdonságok definiált minden egyes csomóponton: hello **NodeType** és hello **csomópontnév**.</span><span class="sxs-lookup"><span data-stu-id="ac16e-363">hello default properties defined at each node are hello **NodeType** and hello **NodeName**.</span></span> <span data-ttu-id="ac16e-364">Így például lehet írni, mint egy elhelyezési korlátozás `"(NodeType == NodeType03)"`.</span><span class="sxs-lookup"><span data-stu-id="ac16e-364">So for example you could write a placement constraint as `"(NodeType == NodeType03)"`.</span></span> <span data-ttu-id="ac16e-365">Általában találtunk, amelyeknek a NodeType toobe leggyakrabban használt hello tulajdonságok egyikét.</span><span class="sxs-lookup"><span data-stu-id="ac16e-365">Generally we have found NodeType toobe one of hello most commonly used properties.</span></span> <span data-ttu-id="ac16e-366">Ez a beállítás akkor hasznos, mivel a gép típusú megfelel 1:1.</span><span class="sxs-lookup"><span data-stu-id="ac16e-366">It is useful since it corresponds 1:1 with a type of a machine.</span></span> <span data-ttu-id="ac16e-367">Minden számítógép típusú tooa típusú egy hagyományos n szintű alkalmazásban felel meg.</span><span class="sxs-lookup"><span data-stu-id="ac16e-367">Each type of machine corresponds tooa type of workload in a traditional n-tier application.</span></span>

<span data-ttu-id="ac16e-368"><center>
![Korlátozza és a csomópont tulajdonságai][Image6]
</center></span><span class="sxs-lookup"><span data-stu-id="ac16e-368"><center>
![Placement Constraints and Node Properties][Image6]
</center></span></span>

## <a name="placement-constraint-and-node-property-syntax"></a><span data-ttu-id="ac16e-369">Elhelyezési korlátozás és a csomópont tulajdonság szintaxis</span><span class="sxs-lookup"><span data-stu-id="ac16e-369">Placement Constraint and Node Property Syntax</span></span> 
<span data-ttu-id="ac16e-370">hello csomópont tulajdonságban megadott hello érték string, bool, lehet, vagy hosszú aláírással.</span><span class="sxs-lookup"><span data-stu-id="ac16e-370">hello value specified in hello node property can be a string, bool, or signed long.</span></span> <span data-ttu-id="ac16e-371">hello nyilatkozatát hello szolgáltatást a neve egy elhelyezési *megkötés* óta korlátozza, ahol hello szolgáltatás futtathatók hello fürtben.</span><span class="sxs-lookup"><span data-stu-id="ac16e-371">hello statement at hello service is called a placement *constraint* since it constrains where hello service can run in hello cluster.</span></span> <span data-ttu-id="ac16e-372">hello megkötés hello másik csomópont-tulajdonságok hello fürtben működő logikai utasítás lehet.</span><span class="sxs-lookup"><span data-stu-id="ac16e-372">hello constraint can be any Boolean statement that operates on hello different node properties in hello cluster.</span></span> <span data-ttu-id="ac16e-373">hello érvényes választók a logikai utasításokat a következők:</span><span class="sxs-lookup"><span data-stu-id="ac16e-373">hello valid selectors in these boolean statements are:</span></span>

1) <span data-ttu-id="ac16e-374">adott utasítások létrehozásához feltételes ellenőrzése</span><span class="sxs-lookup"><span data-stu-id="ac16e-374">conditional checks for creating particular statements</span></span>

| <span data-ttu-id="ac16e-375">Utasítás</span><span class="sxs-lookup"><span data-stu-id="ac16e-375">Statement</span></span> | <span data-ttu-id="ac16e-376">Szintaxis</span><span class="sxs-lookup"><span data-stu-id="ac16e-376">Syntax</span></span> |
| --- |:---:|
| <span data-ttu-id="ac16e-377">"egyenlő"</span><span class="sxs-lookup"><span data-stu-id="ac16e-377">"equal to"</span></span> | <span data-ttu-id="ac16e-378">"=="</span><span class="sxs-lookup"><span data-stu-id="ac16e-378">"=="</span></span> |
| <span data-ttu-id="ac16e-379">"nem egyenlő"</span><span class="sxs-lookup"><span data-stu-id="ac16e-379">"not equal to"</span></span> | <span data-ttu-id="ac16e-380">"!="</span><span class="sxs-lookup"><span data-stu-id="ac16e-380">"!="</span></span> |
| <span data-ttu-id="ac16e-381">"nagyobb, mint"</span><span class="sxs-lookup"><span data-stu-id="ac16e-381">"greater than"</span></span> | <span data-ttu-id="ac16e-382">">"</span><span class="sxs-lookup"><span data-stu-id="ac16e-382">">"</span></span> |
| <span data-ttu-id="ac16e-383">"nagyobb, mint vagy egyenlő"</span><span class="sxs-lookup"><span data-stu-id="ac16e-383">"greater than or equal to"</span></span> | <span data-ttu-id="ac16e-384">">="</span><span class="sxs-lookup"><span data-stu-id="ac16e-384">">="</span></span> |
| <span data-ttu-id="ac16e-385">"kisebb, mint"</span><span class="sxs-lookup"><span data-stu-id="ac16e-385">"less than"</span></span> | <span data-ttu-id="ac16e-386">"<"</span><span class="sxs-lookup"><span data-stu-id="ac16e-386">"<"</span></span> |
| <span data-ttu-id="ac16e-387">"kisebb vagy egyenlő, mint"</span><span class="sxs-lookup"><span data-stu-id="ac16e-387">"less than or equal to"</span></span> | <span data-ttu-id="ac16e-388">"<="</span><span class="sxs-lookup"><span data-stu-id="ac16e-388">"<="</span></span> |

2) <span data-ttu-id="ac16e-389">logikai utasításokat a csoportosítási és logikai műveletek</span><span class="sxs-lookup"><span data-stu-id="ac16e-389">boolean statements for grouping and logical operations</span></span>

| <span data-ttu-id="ac16e-390">Utasítás</span><span class="sxs-lookup"><span data-stu-id="ac16e-390">Statement</span></span> | <span data-ttu-id="ac16e-391">Szintaxis</span><span class="sxs-lookup"><span data-stu-id="ac16e-391">Syntax</span></span> |
| --- |:---:|
| <span data-ttu-id="ac16e-392">"és"</span><span class="sxs-lookup"><span data-stu-id="ac16e-392">"and"</span></span> | <span data-ttu-id="ac16e-393">"&&"</span><span class="sxs-lookup"><span data-stu-id="ac16e-393">"&&"</span></span> |
| <span data-ttu-id="ac16e-394">"vagy"</span><span class="sxs-lookup"><span data-stu-id="ac16e-394">"or"</span></span> | <span data-ttu-id="ac16e-395">"&#124;&#124;"</span><span class="sxs-lookup"><span data-stu-id="ac16e-395">"&#124;&#124;"</span></span> |
| <span data-ttu-id="ac16e-396">"nem"</span><span class="sxs-lookup"><span data-stu-id="ac16e-396">"not"</span></span> | <span data-ttu-id="ac16e-397">"!"</span><span class="sxs-lookup"><span data-stu-id="ac16e-397">"!"</span></span> |
| <span data-ttu-id="ac16e-398">"csoportot egyetlen utasításként"</span><span class="sxs-lookup"><span data-stu-id="ac16e-398">"group as single statement"</span></span> | <span data-ttu-id="ac16e-399">"()"</span><span class="sxs-lookup"><span data-stu-id="ac16e-399">"()"</span></span> |

<span data-ttu-id="ac16e-400">Az alábbiakban néhány olyan alapvető típusmegkötésein utasításokat.</span><span class="sxs-lookup"><span data-stu-id="ac16e-400">Here are some examples of basic constraint statements.</span></span>

  * `"Value >= 5"`
  * `"NodeColor != green"`
  * `"((OneProperty < 100) || ((AnotherProperty == false) && (OneProperty >= 100)))"`

<span data-ttu-id="ac16e-401">Ahol hello teljes elhelyezési korlátozás utasítás kiértékelése túl "True" csak csomópontokat lehet rá hello szolgáltatást.</span><span class="sxs-lookup"><span data-stu-id="ac16e-401">Only nodes where hello overall placement constraint statement evaluates too“True” can have hello service placed on it.</span></span> <span data-ttu-id="ac16e-402">Csomópontot, amely nincs meghatározva tulajdonsága nem egyezik a tartalmazó tulajdonság elhelyezési korlátozás.</span><span class="sxs-lookup"><span data-stu-id="ac16e-402">Nodes that do not have a property defined do not match any placement constraint containing that property.</span></span>

<span data-ttu-id="ac16e-403">Tegyük fel, hogy a következő tulajdonságok definiálva egy adott csomóponttípus csomópont hello:</span><span class="sxs-lookup"><span data-stu-id="ac16e-403">Let’s say that hello following node properties were defined for a given node type:</span></span>

<span data-ttu-id="ac16e-404">ClusterManifest.xml</span><span class="sxs-lookup"><span data-stu-id="ac16e-404">ClusterManifest.xml</span></span>

```xml
    <NodeType Name="NodeType01">
      <PlacementProperties>
        <Property Name="HasSSD" Value="true"/>
        <Property Name="NodeColor" Value="green"/>
        <Property Name="SomeProperty" Value="5"/>
      </PlacementProperties>
    </NodeType>
```

<span data-ttu-id="ac16e-405">az önálló verziója telepítéseinek művelet vagy az Azure-Template.json üzemeltetett fürtök.</span><span class="sxs-lookup"><span data-stu-id="ac16e-405">via ClusterConfig.json for Standalone deployments or Template.json for Azure hosted clusters.</span></span> 

> [!NOTE]
> <span data-ttu-id="ac16e-406">Az Azure Resource Manager sablon hello csomópontban típus általában paraméteres.</span><span class="sxs-lookup"><span data-stu-id="ac16e-406">In your Azure Resource Manager template hello node type is usually parameterized.</span></span> <span data-ttu-id="ac16e-407">Az alábbihoz hasonlóan fog kinézni "[parameters('vmNodeType1Name')]" helyett "NodeType01".</span><span class="sxs-lookup"><span data-stu-id="ac16e-407">It would look like "[parameters('vmNodeType1Name')]" rather than "NodeType01".</span></span>
>

```json
"nodeTypes": [
    {
        "name": "NodeType01",
        "placementProperties": {
            "HasSSD": "true",
            "NodeColor": "green",
            "SomeProperty": "5"
        },
    }
],
```

<span data-ttu-id="ac16e-408">Szolgáltatás elhelyezésének hozhat létre *megkötések* egy szolgáltatás, például az alábbiak szerint:</span><span class="sxs-lookup"><span data-stu-id="ac16e-408">You can create service placement *constraints* for a service like as follows:</span></span>

<span data-ttu-id="ac16e-409">C#</span><span class="sxs-lookup"><span data-stu-id="ac16e-409">C#</span></span>

```csharp
FabricClient fabricClient = new FabricClient();
StatefulServiceDescription serviceDescription = new StatefulServiceDescription();
serviceDescription.PlacementConstraints = "(HasSSD == true && SomeProperty >= 4)";
// add other required servicedescription fields
//...
await fabricClient.ServiceManager.CreateServiceAsync(serviceDescription);
```

<span data-ttu-id="ac16e-410">PowerShell:</span><span class="sxs-lookup"><span data-stu-id="ac16e-410">Powershell:</span></span>

```posh
New-ServiceFabricService -ApplicationName $applicationName -ServiceName $serviceName -ServiceTypeName $serviceType -Stateful -MinReplicaSetSize 3 -TargetReplicaSetSize 3 -PartitionSchemeSingleton -PlacementConstraint "HasSSD == true && SomeProperty >= 4"
```

<span data-ttu-id="ac16e-411">Összes csomópontja NodeType01 érvényesek, ha igény szerint kiválaszthatja, hogy csomóponttípus hello megkötés "(NodeType == NodeType01)".</span><span class="sxs-lookup"><span data-stu-id="ac16e-411">If all nodes of NodeType01 are valid, you can also select that node type with hello constraint "(NodeType == NodeType01)".</span></span>

<span data-ttu-id="ac16e-412">Ritkán használt adatok dolgot hello szolgáltatás placement Constraints korlátozásokat kapcsolatos egyik, hogy azok dinamikusan frissíthető futásidőben.</span><span class="sxs-lookup"><span data-stu-id="ac16e-412">One of hello cool things about a service’s placement constraints is that they can be updated dynamically during runtime.</span></span> <span data-ttu-id="ac16e-413">Ezért ha kell, egy szolgáltatás Navigálás hello fürtben, hozzáadhat és eltávolítja a követelmények, stb. A Service Fabric gondoskodik arról, hogy hello szolgáltatás marad, és elérhető még ha ilyen jellegű módosítások végzett.</span><span class="sxs-lookup"><span data-stu-id="ac16e-413">So if you need to, you can move a service around in hello cluster, add and remove requirements, etc. Service Fabric takes care of ensuring that hello service stays up and available even when these types of changes are made.</span></span>

<span data-ttu-id="ac16e-414">C#:</span><span class="sxs-lookup"><span data-stu-id="ac16e-414">C#:</span></span>

```csharp
StatefulServiceUpdateDescription updateDescription = new StatefulServiceUpdateDescription();
updateDescription.PlacementConstraints = "NodeType == NodeType01";
await fabricClient.ServiceManager.UpdateServiceAsync(new Uri("fabric:/app/service"), updateDescription);
```

<span data-ttu-id="ac16e-415">PowerShell:</span><span class="sxs-lookup"><span data-stu-id="ac16e-415">Powershell:</span></span>

```posh
Update-ServiceFabricService -Stateful -ServiceName $serviceName -PlacementConstraints "NodeType == NodeType01"
```

<span data-ttu-id="ac16e-416">Minden elnevezett példány különböző Placement Constraints korlátozásokat vannak megadva.</span><span class="sxs-lookup"><span data-stu-id="ac16e-416">Placement constraints are specified for every different named service instance.</span></span> <span data-ttu-id="ac16e-417">Frissítések mindig szükség van hello helye (felülírása) mi korábban lett megadva.</span><span class="sxs-lookup"><span data-stu-id="ac16e-417">Updates always take hello place of (overwrite) what was previously specified.</span></span>

<span data-ttu-id="ac16e-418">hello fürt definition hello tulajdonságainak meghatározása a csomóponton.</span><span class="sxs-lookup"><span data-stu-id="ac16e-418">hello cluster definition defines hello properties on a node.</span></span> <span data-ttu-id="ac16e-419">A csomópont tulajdonságainak módosításához szükséges konfigurációs Fürtfrissítés.</span><span class="sxs-lookup"><span data-stu-id="ac16e-419">Changing a node's properties requires a cluster configuration upgrade.</span></span> <span data-ttu-id="ac16e-420">A csomópont tulajdonságainak frissítéséhez minden érintett csomópont toorestart tooreport új tulajdonságát.</span><span class="sxs-lookup"><span data-stu-id="ac16e-420">Upgrading a node's properties requires each affected node toorestart tooreport its new properties.</span></span> <span data-ttu-id="ac16e-421">Ezek a működés közbeni frissítés a Service Fabric kezeli.</span><span class="sxs-lookup"><span data-stu-id="ac16e-421">These rolling upgrades are managed by Service Fabric.</span></span>

## <a name="describing-and-managing-cluster-resources"></a><span data-ttu-id="ac16e-422">Leíró, és a fürt erőforrások kezelése</span><span class="sxs-lookup"><span data-stu-id="ac16e-422">Describing and Managing Cluster Resources</span></span>
<span data-ttu-id="ac16e-423">Erőforrás-felhasználás hello fürt egyik legfontosabb feladatok bármely orchestrator toohelp hello kezelése.</span><span class="sxs-lookup"><span data-stu-id="ac16e-423">One of hello most important jobs of any orchestrator is toohelp manage resource consumption in hello cluster.</span></span> <span data-ttu-id="ac16e-424">Fürt-erőforrások kezelése azt több különböző fogalom.</span><span class="sxs-lookup"><span data-stu-id="ac16e-424">Managing cluster resources can mean a couple of different things.</span></span> <span data-ttu-id="ac16e-425">Először is hiba van biztosításához, hogy a gépek nem túlterhelt.</span><span class="sxs-lookup"><span data-stu-id="ac16e-425">First, there's ensuring that machines are not overloaded.</span></span> <span data-ttu-id="ac16e-426">Ez azt jelenti, hogy meggyőződött arról, hogy, hogy gépek kezelni tud, mint szolgáltatás nem fut-e.</span><span class="sxs-lookup"><span data-stu-id="ac16e-426">This means making sure that machines aren't running more services than they can handle.</span></span> <span data-ttu-id="ac16e-427">Második nincs terheléselosztási és optimalizálási, ami kritikus fontosságú toorunning szolgáltatások hatékony.</span><span class="sxs-lookup"><span data-stu-id="ac16e-427">Second, there's balancing and optimization which is critical toorunning services efficiently.</span></span> <span data-ttu-id="ac16e-428">Költség hatályos vagy a teljesítmény-és nagybetűket szolgáltatásajánlatok nem engedélyezheti néhány csomópontok toobe kiemelt cold vannak.</span><span class="sxs-lookup"><span data-stu-id="ac16e-428">Cost effective or performance sensitive service offerings can't allow some nodes toobe hot while others are cold.</span></span> <span data-ttu-id="ac16e-429">Működés közbeni csomópontok tooresource versenyt és a gyenge teljesítményt, és a cold csomópontok kihasználatlan jelentik erőforrások és a költségek vezethet.</span><span class="sxs-lookup"><span data-stu-id="ac16e-429">Hot nodes lead tooresource contention and poor performance, and cold nodes represent wasted resources and increased costs.</span></span> 

<span data-ttu-id="ac16e-430">A Service Fabric jelöli az erőforrásokhoz, mint `Metrics`.</span><span class="sxs-lookup"><span data-stu-id="ac16e-430">Service Fabric represents resources as `Metrics`.</span></span> <span data-ttu-id="ac16e-431">Adatok gyűjtése le a logikai és fizikai erőforrás, amelyet az toodescribe tooService háló.</span><span class="sxs-lookup"><span data-stu-id="ac16e-431">Metrics are any logical or physical resource that you want toodescribe tooService Fabric.</span></span> <span data-ttu-id="ac16e-432">Metrikák Példák többek között a "WorkQueueDepth" vagy "MemoryInMb".</span><span class="sxs-lookup"><span data-stu-id="ac16e-432">Examples of metrics are things like “WorkQueueDepth” or “MemoryInMb”.</span></span> <span data-ttu-id="ac16e-433">Csomópontok hello fizikai erőforrásokat, amelyek képesek felügyelni a Service Fabric kapcsolatos információkért lásd: [erőforrás irányítás](service-fabric-resource-governance.md).</span><span class="sxs-lookup"><span data-stu-id="ac16e-433">For information about hello physical resources that Service Fabric can govern on nodes, see [resource governance](service-fabric-resource-governance.md).</span></span> <span data-ttu-id="ac16e-434">Egyéni metrikák és a használatukat konfigurálásával kapcsolatos további információkért lásd: [Ez a cikk](service-fabric-cluster-resource-manager-metrics.md)</span><span class="sxs-lookup"><span data-stu-id="ac16e-434">For information on configuring custom metrics and their uses, see [this article](service-fabric-cluster-resource-manager-metrics.md)</span></span>

<span data-ttu-id="ac16e-435">Adatok gyűjtése le eltérő adatközpontokon korlátozások és a csomópont tulajdonságait.</span><span class="sxs-lookup"><span data-stu-id="ac16e-435">Metrics are different from placements constraints and node properties.</span></span> <span data-ttu-id="ac16e-436">Csomópont tulajdonságai statikus leírók hello csomópontok magukat.</span><span class="sxs-lookup"><span data-stu-id="ac16e-436">Node properties are static descriptors of hello nodes themselves.</span></span> <span data-ttu-id="ac16e-437">Metrikák csomópontok rendelkező erőforrásokat és, hogy a szolgáltatások felhasználásához csomóponton futtatásakor ismertetik.</span><span class="sxs-lookup"><span data-stu-id="ac16e-437">Metrics describe resources that nodes have and that services consume when they are run on a node.</span></span> <span data-ttu-id="ac16e-438">A csomópont-tulajdonságok "HasSSD" lehet, és tootrue, és hamis értéket kell beállítani.</span><span class="sxs-lookup"><span data-stu-id="ac16e-438">A node property could be "HasSSD" and could be set tootrue or false.</span></span> <span data-ttu-id="ac16e-439">hello szabad lemezterület, hogy az SSD és a szolgáltatások mennyi felhasznált például a "DriveSpaceInMb" metrika lenne.</span><span class="sxs-lookup"><span data-stu-id="ac16e-439">hello amount of space available on that SSD and how much is consumed by services would be a metric like “DriveSpaceInMb”.</span></span> 

<span data-ttu-id="ac16e-440">Fontos, hogy akárcsak egy elhelyezési korlátozás és a csomópont tulajdonságait, hello Service Fabric fürt erőforrás-kezelő nem ismeri a milyen hello neveket hello metrikák középérték toonote.</span><span class="sxs-lookup"><span data-stu-id="ac16e-440">It is important toonote that just like for placement constraints and node properties, hello Service Fabric Cluster Resource Manager doesn't understand what hello names of hello metrics mean.</span></span> <span data-ttu-id="ac16e-441">Metrika nevében csak karakterláncok számítanak.</span><span class="sxs-lookup"><span data-stu-id="ac16e-441">Metric names are just strings.</span></span> <span data-ttu-id="ac16e-442">Egy jó gyakorlat toodeclare egységek hello metrika neve nem egyértelmű lehet létrehozott részeként is.</span><span class="sxs-lookup"><span data-stu-id="ac16e-442">It is a good practice toodeclare units as a part of hello metric names that you create when it could be ambiguous.</span></span>

## <a name="capacity"></a><span data-ttu-id="ac16e-443">Kapacitás</span><span class="sxs-lookup"><span data-stu-id="ac16e-443">Capacity</span></span>
<span data-ttu-id="ac16e-444">Ha kikapcsolt minden erőforrás *terheléselosztási*, a Service Fabric-fürt erőforrás-kezelő továbbra is biztosítja, hogy nincs csomópont véget ért a kapacitás keresztül.</span><span class="sxs-lookup"><span data-stu-id="ac16e-444">If you turned off all resource *balancing*, Service Fabric’s Cluster Resource Manager would still ensure that no node ended up over its capacity.</span></span> <span data-ttu-id="ac16e-445">Kapacitás meghaladása kezelése használata lehetséges, kivéve, ha hello fürtön nincs elég hely, vagy hello munkaterhelés nagyobb, mint egyetlen csomópont.</span><span class="sxs-lookup"><span data-stu-id="ac16e-445">Managing capacity overruns is possible unless hello cluster is too full or hello workload is larger than any node.</span></span> <span data-ttu-id="ac16e-446">Egy másik *megkötés* adott hello fürt erőforrás-kezelő használja toounderstand milyen egy erőforrást egy csomópont van.</span><span class="sxs-lookup"><span data-stu-id="ac16e-446">Capacity is another *constraint* that hello Cluster Resource Manager uses toounderstand how much of a resource a node has.</span></span> <span data-ttu-id="ac16e-447">Fennmaradó kapacitás is nyomon követi hello fürt egésze.</span><span class="sxs-lookup"><span data-stu-id="ac16e-447">Remaining capacity is also tracked for hello cluster as a whole.</span></span> <span data-ttu-id="ac16e-448">Hello kapacitás és a hello fogyasztás hello szolgáltatás szintű metrikák vannak kifejezve.</span><span class="sxs-lookup"><span data-stu-id="ac16e-448">Both hello capacity and hello consumption at hello service level are expressed in terms of metrics.</span></span> <span data-ttu-id="ac16e-449">Így például hello metrika "ClientConnections" lehet, és egy adott csomópont lehet egy "ClientConnections" 32768 tartozó kapacitás.</span><span class="sxs-lookup"><span data-stu-id="ac16e-449">So for example, hello metric might be "ClientConnections" and a given Node may have a capacity for "ClientConnections" of 32768.</span></span> <span data-ttu-id="ac16e-450">Más csomópontok más korlátok néhány szolgáltatás fut az adott csomópont is mondja ki azt az jelenleg fel 32256 hello mérőszám "ClientConnections" lehet.</span><span class="sxs-lookup"><span data-stu-id="ac16e-450">Other nodes can have other limits Some service running on that node can say it is currently consuming 32256 of hello metric "ClientConnections".</span></span>

<span data-ttu-id="ac16e-451">Hello fürt erőforrás-kezelő futásidőben, nyomon követi a fennmaradó kapacitás hello fürt és a csomóponton.</span><span class="sxs-lookup"><span data-stu-id="ac16e-451">During runtime, hello Cluster Resource Manager tracks remaining capacity in hello cluster and on nodes.</span></span> <span data-ttu-id="ac16e-452">A rendelés tootrack kapacitás hello fürt erőforrás-kezelő kivonja a csomópont-kapacitás hello szolgáltatást futtató minden egyes szolgáltatás használati.</span><span class="sxs-lookup"><span data-stu-id="ac16e-452">In order tootrack capacity hello Cluster Resource Manager subtracts each service's usage from node's capacity where hello service runs.</span></span> <span data-ttu-id="ac16e-453">Az információ hello Service Fabric fürt erőforrás-kezelő kitalálja, hogy hol tooplace vagy helyezze át a replikákat, hogy a csomópontok kapacitása nem ismerteti.</span><span class="sxs-lookup"><span data-stu-id="ac16e-453">With this information, hello Service Fabric Cluster Resource Manager can figure out where tooplace or move replicas so that nodes don’t go over capacity.</span></span>

<span data-ttu-id="ac16e-454"><center>
![Fürtcsomópontok és a kapacitás][Image7]
</center></span><span class="sxs-lookup"><span data-stu-id="ac16e-454"><center>
![Cluster nodes and capacity][Image7]
</center></span></span>

<span data-ttu-id="ac16e-455">C#:</span><span class="sxs-lookup"><span data-stu-id="ac16e-455">C#:</span></span>

```csharp
StatefulServiceDescription serviceDescription = new StatefulServiceDescription();
ServiceLoadMetricDescription metric = new ServiceLoadMetricDescription();
metric.Name = "ClientConnections";
metric.PrimaryDefaultLoad = 1024;
metric.SecondaryDefaultLoad = 0;
metric.Weight = ServiceLoadMetricWeight.High;
serviceDescription.Metrics.Add(metric);
await fabricClient.ServiceManager.CreateServiceAsync(serviceDescription);
```

<span data-ttu-id="ac16e-456">PowerShell:</span><span class="sxs-lookup"><span data-stu-id="ac16e-456">Powershell:</span></span>

```posh
New-ServiceFabricService -ApplicationName $applicationName -ServiceName $serviceName -ServiceTypeName $serviceTypeName –Stateful -MinReplicaSetSize 3 -TargetReplicaSetSize 3 -PartitionSchemeSingleton –Metric @("ClientConnections,High,1024,0)
```

<span data-ttu-id="ac16e-457">Hello a fürtjegyzékben megadott kapacitások látható:</span><span class="sxs-lookup"><span data-stu-id="ac16e-457">You can see capacities defined in hello cluster manifest:</span></span>

<span data-ttu-id="ac16e-458">ClusterManifest.xml</span><span class="sxs-lookup"><span data-stu-id="ac16e-458">ClusterManifest.xml</span></span>

```xml
    <NodeType Name="NodeType03">
      <Capacities>
        <Capacity Name="ClientConnections" Value="65536"/>
      </Capacities>
    </NodeType>
```

<span data-ttu-id="ac16e-459">az önálló verziója telepítéseinek művelet vagy az Azure-Template.json üzemeltetett fürtök.</span><span class="sxs-lookup"><span data-stu-id="ac16e-459">via ClusterConfig.json for Standalone deployments or Template.json for Azure hosted clusters.</span></span> 

```json
"nodeTypes": [
    {
        "name": "NodeType03",
        "capacities": {
            "ClientConnections": "65536",
        }
    }
],
```

<span data-ttu-id="ac16e-460">Általában az adott szolgáltatás módosításának betöltése dinamikusan.</span><span class="sxs-lookup"><span data-stu-id="ac16e-460">Commonly a service’s load changes dynamically.</span></span> <span data-ttu-id="ac16e-461">Tegyük fel például, hogy a replika betöltése "ClientConnections" 1024 too2048, de azt kiszolgálón már futott, akkor csak az adott mérőszám fennmaradó 512 kapacitás kellett hello csomópont változása.</span><span class="sxs-lookup"><span data-stu-id="ac16e-461">Say that a replica's load of "ClientConnections" changed from 1024 too2048, but hello node it was running on then only had 512 capacity remaining for that metric.</span></span> <span data-ttu-id="ac16e-462">Most már a adott másodpéldány vagy a példány elhelyezési érvénytelen, mert nincs elég hely a csomóponton.</span><span class="sxs-lookup"><span data-stu-id="ac16e-462">Now that replica or instance's placement is invalid, since there's not enough room on that node.</span></span> <span data-ttu-id="ac16e-463">Fürt erőforrás-kezelő hello tookick rendelkezik, és vissza a kapacitás alatt hello csomópont beolvasása.</span><span class="sxs-lookup"><span data-stu-id="ac16e-463">hello Cluster Resource Manager has tookick in and get hello node back below capacity.</span></span> <span data-ttu-id="ac16e-464">Hello csomópont, amelyhez kapacitás keresztül egy vagy több hello replikák és példányok tér át, hogy tooother csomópontok terhelése csökkenti.</span><span class="sxs-lookup"><span data-stu-id="ac16e-464">It reduces load on hello node that is over capacity by moving one or more of hello replicas or instances from that node tooother nodes.</span></span> <span data-ttu-id="ac16e-465">Replikák áthelyezésekor hello fürt erőforrás-kezelő megpróbál ilyen mozgást toominimize hello költségét.</span><span class="sxs-lookup"><span data-stu-id="ac16e-465">When moving replicas, hello Cluster Resource Manager tries toominimize hello cost of those movements.</span></span> <span data-ttu-id="ac16e-466">A mozgás költsége ismertet [Ez a cikk](service-fabric-cluster-resource-manager-movement-cost.md) több kapcsolatos hello fürt erőforrás-kezelő stratégiák tartozó kiegyenlítését és szabályok leírt [Itt](service-fabric-cluster-resource-manager-metrics.md).</span><span class="sxs-lookup"><span data-stu-id="ac16e-466">Movement cost is discussed in [this article](service-fabric-cluster-resource-manager-movement-cost.md) and more about hello Cluster Resource Manager's rebalancing strategies and rules is described [here](service-fabric-cluster-resource-manager-metrics.md).</span></span>

## <a name="cluster-capacity"></a><span data-ttu-id="ac16e-467">Fürt kapacitás</span><span class="sxs-lookup"><span data-stu-id="ac16e-467">Cluster capacity</span></span>
<span data-ttu-id="ac16e-468">Igen, hogyan nem hello Service Fabric fürt erőforrás-kezelő megtartása hello általános fürt nem túl teljes?</span><span class="sxs-lookup"><span data-stu-id="ac16e-468">So how does hello Service Fabric Cluster Resource Manager keep hello overall cluster from being too full?</span></span> <span data-ttu-id="ac16e-469">A dinamikus terhelés nincs sokkal lehet hasznos.</span><span class="sxs-lookup"><span data-stu-id="ac16e-469">Well, with dynamic load there’s not a lot it can do.</span></span> <span data-ttu-id="ac16e-470">Szolgáltatások lehet a terhelés csúcs hello fürt erőforrás-kezelő által végrehajtott műveletek függetlenül.</span><span class="sxs-lookup"><span data-stu-id="ac16e-470">Services can have their load spike independently of actions taken by hello Cluster Resource Manager.</span></span> <span data-ttu-id="ac16e-471">Emiatt a fürt bőven ma belső magasságnak lehet underpowered válásának Ön famous holnap.</span><span class="sxs-lookup"><span data-stu-id="ac16e-471">As a result, your cluster with plenty of headroom today may be underpowered when you become famous tomorrow.</span></span> <span data-ttu-id="ac16e-472">Említett, vannak bizonyos vezérlők, amely a tooprevent problémák vannak bővíthetőség.</span><span class="sxs-lookup"><span data-stu-id="ac16e-472">That said, there are some controls that are baked in tooprevent problems.</span></span> <span data-ttu-id="ac16e-473">hello elsőként tehetünk ennek az új típusoktól, amelyek hello fürt toobecome teljes hello létrehozásának megakadályozása.</span><span class="sxs-lookup"><span data-stu-id="ac16e-473">hello first thing we can do is prevent hello creation of new workloads that would cause hello cluster toobecome full.</span></span>

<span data-ttu-id="ac16e-474">Tegyük fel például, hogy állapot nélküli szolgáltatás, és néhány terhelés társítva van.</span><span class="sxs-lookup"><span data-stu-id="ac16e-474">Say that you create a stateless service and it has some load associated with it.</span></span> <span data-ttu-id="ac16e-475">Tegyük fel, hogy hello szolgáltatás ügyel hello "DiskSpaceInMb" metrika.</span><span class="sxs-lookup"><span data-stu-id="ac16e-475">Let’s say that hello service cares about hello "DiskSpaceInMb" metric.</span></span> <span data-ttu-id="ac16e-476">Tételezzük is fel, hogy a rendszer folyamatban lévő tooconsume öt egységeinek hello szolgáltatást mindegyik példányhoz "DiskSpaceInMb".</span><span class="sxs-lookup"><span data-stu-id="ac16e-476">Let's also say that it is going tooconsume five units of "DiskSpaceInMb" for every instance of hello service.</span></span> <span data-ttu-id="ac16e-477">Három alkalmazáspéldányra toocreate hello szolgáltatást szeretné.</span><span class="sxs-lookup"><span data-stu-id="ac16e-477">You want toocreate three instances of hello service.</span></span> <span data-ttu-id="ac16e-478">Remek!</span><span class="sxs-lookup"><span data-stu-id="ac16e-478">Great!</span></span> <span data-ttu-id="ac16e-479">Úgy, hogy azt jelenti, hogy a "DiskSpaceInMb" toobe 15 egységek kell ahhoz, hogy velünk hello fürt tooeven van kell ezeket szolgáltatáspéldány képes toocreate.</span><span class="sxs-lookup"><span data-stu-id="ac16e-479">So that means that we need 15 units of "DiskSpaceInMb" toobe present in hello cluster in order for us tooeven be able toocreate these service instances.</span></span> <span data-ttu-id="ac16e-480">hello fürt erőforrás-kezelő folyamatosan kiszámítja hello kapacitás, és mindegyik metrikát fogyasztásának így meg tudja határozni hello fennmaradó kapacitás hello fürtben.</span><span class="sxs-lookup"><span data-stu-id="ac16e-480">hello Cluster Resource Manager continually calculates hello capacity and consumption of each metric so it can determine hello remaining capacity in hello cluster.</span></span> <span data-ttu-id="ac16e-481">Ha nincs elég hely, erőforrás-kezelő fürt elutasítások hello hello létrehozása szolgáltatás hívása.</span><span class="sxs-lookup"><span data-stu-id="ac16e-481">If there isn't enough space, hello Cluster Resource Manager rejects hello create service call.</span></span>

<span data-ttu-id="ac16e-482">Hello követelmény, amely csak 15 egység érhető el, mert ez a terület rendelhető számos különböző módja.</span><span class="sxs-lookup"><span data-stu-id="ac16e-482">Since hello requirement is only that there be 15 units available, this space could be allocated many different ways.</span></span> <span data-ttu-id="ac16e-483">Például lehet egy fennmaradó egység 15 különböző csomópontokon kapacitás vagy három fennmaradó egységek öt különböző csomópontokon kapacitást.</span><span class="sxs-lookup"><span data-stu-id="ac16e-483">For example, there could be one remaining unit of capacity on 15 different nodes, or three remaining units of capacity on five different nodes.</span></span> <span data-ttu-id="ac16e-484">Ha a fürt erőforrás-kezelő hello is átrendezéséhez dolgot úgy érhető el öt egység három csomóponton helyezi hello szolgáltatást.</span><span class="sxs-lookup"><span data-stu-id="ac16e-484">If hello Cluster Resource Manager can rearrange things so there's five units available on three nodes, it places hello service.</span></span> <span data-ttu-id="ac16e-485">Átrendezése hello fürt általában lehetőség, kivéve, ha hello fürt majdnem megtelt, vagy valamilyen okból kifolyólag nem lehet összevont hello meglévő szolgáltatások.</span><span class="sxs-lookup"><span data-stu-id="ac16e-485">Rearranging hello cluster is usually possible unless hello cluster is almost full or hello existing services can't be consolidated for some reason.</span></span>

## <a name="buffered-capacity"></a><span data-ttu-id="ac16e-486">A pufferelt kapacitás</span><span class="sxs-lookup"><span data-stu-id="ac16e-486">Buffered Capacity</span></span>
<span data-ttu-id="ac16e-487">A pufferelt kapacitása hello erőforrás-kezelő fürt egy másik szolgáltatása.</span><span class="sxs-lookup"><span data-stu-id="ac16e-487">Buffered capacity is another feature of hello Cluster Resource Manager.</span></span> <span data-ttu-id="ac16e-488">Lehetővé teszi a Foglalás hello egy részét az általános csomópont kapacitását.</span><span class="sxs-lookup"><span data-stu-id="ac16e-488">It allows reservation of some portion of hello overall node capacity.</span></span> <span data-ttu-id="ac16e-489">A kapacitás puffer csak használt tooplace szolgáltatások frissítéseket és a csomópont hibák alatt.</span><span class="sxs-lookup"><span data-stu-id="ac16e-489">This capacity buffer is only used tooplace services during upgrades and node failures.</span></span> <span data-ttu-id="ac16e-490">A metrika az összes csomópont pufferelt kapacitás globálisan van meghatározva.</span><span class="sxs-lookup"><span data-stu-id="ac16e-490">Buffered Capacity is specified globally per metric for all nodes.</span></span> <span data-ttu-id="ac16e-491">hello hello szolgáltatás számára fenntartott kapacitás választott értéke hiba és hello fürt rendelkezik frissítési tartományok száma hello függvényében.</span><span class="sxs-lookup"><span data-stu-id="ac16e-491">hello value you pick for hello reserved capacity is a function of hello number of Fault and Upgrade Domains you have in hello cluster.</span></span> <span data-ttu-id="ac16e-492">Több hiba és frissítési tartományok azt jelenti, hogy kevesebb kiválaszthatja a pufferelt kapacitást.</span><span class="sxs-lookup"><span data-stu-id="ac16e-492">More Fault and Upgrade Domains means that you can pick a lower number for your buffered capacity.</span></span> <span data-ttu-id="ac16e-493">Ha több tartományban vannak, számíthat a fürt toobe kisebb mennyiségű nem érhető el frissítéseket és a hibák alatt.</span><span class="sxs-lookup"><span data-stu-id="ac16e-493">If you have more domains, you can expect smaller amounts of your cluster toobe unavailable during upgrades and failures.</span></span> <span data-ttu-id="ac16e-494">Kapacitás pufferelt megadása csak értelme, ha akkor is megadott hello csomópont-kapacitás olyan metrikajelentés.</span><span class="sxs-lookup"><span data-stu-id="ac16e-494">Specifying Buffered Capacity only makes sense if you have also specified hello node capacity for a metric.</span></span>

<span data-ttu-id="ac16e-495">Íme egy példa hogyan toospecify pufferelt kapacitás:</span><span class="sxs-lookup"><span data-stu-id="ac16e-495">Here's an example of how toospecify buffered capacity:</span></span>

<span data-ttu-id="ac16e-496">ClusterManifest.xml</span><span class="sxs-lookup"><span data-stu-id="ac16e-496">ClusterManifest.xml</span></span>

```xml
        <Section Name="NodeBufferPercentage">
            <Parameter Name="SomeMetric" Value="0.15" />
            <Parameter Name="SomeOtherMetric" Value="0.20" />
        </Section>
```

<span data-ttu-id="ac16e-497">az önálló verziója telepítéseinek művelet vagy az Azure-Template.json üzemeltetett fürtök:</span><span class="sxs-lookup"><span data-stu-id="ac16e-497">via ClusterConfig.json for Standalone deployments or Template.json for Azure hosted clusters:</span></span>

```json
"fabricSettings": [
  {
    "name": "NodeBufferPercentage",
    "parameters": [
      {
          "name": "SomeMetric",
          "value": "0.15"
      },
      {
          "name": "SomeOtherMetric",
          "value": "0.20"
      }
    ]
  }
]
```

<span data-ttu-id="ac16e-498">az új szolgáltatások hello létrehozás sikertelen lesz, amikor hello fürt olyan metrikajelentés pufferelt kapacitás kívül esik.</span><span class="sxs-lookup"><span data-stu-id="ac16e-498">hello creation of new services fails when hello cluster is out of buffered capacity for a metric.</span></span> <span data-ttu-id="ac16e-499">Megakadályozza az új szolgáltatások toopreserve hello puffer hello létrehozása biztosítja, hogy frissítéseket és a hibák nem okozhat csomópontok toogo kapacitás keresztül.</span><span class="sxs-lookup"><span data-stu-id="ac16e-499">Preventing hello creation of new services toopreserve hello buffer ensures that upgrades and failures don’t cause nodes toogo over capacity.</span></span> <span data-ttu-id="ac16e-500">A pufferelt kapacitás nem kötelező, de ajánlott a fürt, amely meghatározza egy olyan metrikajelentés kapacitás.</span><span class="sxs-lookup"><span data-stu-id="ac16e-500">Buffered capacity is optional but is recommended in any cluster that defines a capacity for a metric.</span></span>

<span data-ttu-id="ac16e-501">hello fürt erőforrás-kezelő teszi közzé a terhelés kapcsolatos információkat.</span><span class="sxs-lookup"><span data-stu-id="ac16e-501">hello Cluster Resource Manager exposes this load information.</span></span> <span data-ttu-id="ac16e-502">Mindegyik metrikát az alábbiakat:</span><span class="sxs-lookup"><span data-stu-id="ac16e-502">For each metric, this information includes:</span></span> 
  - <span data-ttu-id="ac16e-503">hello pufferelt beállításait</span><span class="sxs-lookup"><span data-stu-id="ac16e-503">hello buffered capacity settings</span></span>
  - <span data-ttu-id="ac16e-504">hello teljes kapacitás</span><span class="sxs-lookup"><span data-stu-id="ac16e-504">hello total capacity</span></span>
  - <span data-ttu-id="ac16e-505">hello aktuális felhasználás</span><span class="sxs-lookup"><span data-stu-id="ac16e-505">hello current consumption</span></span>
  - <span data-ttu-id="ac16e-506">vagy nem mindegyik metrikát tekinthető e rendszerrel</span><span class="sxs-lookup"><span data-stu-id="ac16e-506">whether each metric is considered balanced or not</span></span>
  - <span data-ttu-id="ac16e-507">hello szórás statisztikája</span><span class="sxs-lookup"><span data-stu-id="ac16e-507">statistics about hello standard deviation</span></span>
  - <span data-ttu-id="ac16e-508">hello csomópontokat, amelyeknek hello rendelkezik a legtöbb és legalább betöltése</span><span class="sxs-lookup"><span data-stu-id="ac16e-508">hello nodes which have hello most and least load</span></span>  
  
<span data-ttu-id="ac16e-509">Az alábbiakban egy példa kimenet látható:</span><span class="sxs-lookup"><span data-stu-id="ac16e-509">Below we see an example of that output:</span></span>

```posh
PS C:\Users\user> Get-ServiceFabricClusterLoadInformation
LastBalancingStartTimeUtc : 9/1/2016 12:54:59 AM
LastBalancingEndTimeUtc   : 9/1/2016 12:54:59 AM
LoadMetricInformation     :
                            LoadMetricName        : Metric1
                            IsBalancedBefore      : False
                            IsBalancedAfter       : False
                            DeviationBefore       : 0.192450089729875
                            DeviationAfter        : 0.192450089729875
                            BalancingThreshold    : 1
                            Action                : NoActionNeeded
                            ActivityThreshold     : 0
                            ClusterCapacity       : 189
                            ClusterLoad           : 45
                            ClusterRemainingCapacity : 144
                            NodeBufferPercentage  : 10
                            ClusterBufferedCapacity : 170
                            ClusterRemainingBufferedCapacity : 125
                            ClusterCapacityViolation : False
                            MinNodeLoadValue      : 0
                            MinNodeLoadNodeId     : 3ea71e8e01f4b0999b121abcbf27d74d
                            MaxNodeLoadValue      : 15
                            MaxNodeLoadNodeId     : 2cc648b6770be1bc9824fa995d5b68b1
```

## <a name="next-steps"></a><span data-ttu-id="ac16e-510">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="ac16e-510">Next steps</span></span>
* <span data-ttu-id="ac16e-511">Hello architektúra és információk folyamata belül hello fürt erőforrás-kezelő információkért tekintse meg [Ez a cikk](service-fabric-cluster-resource-manager-architecture.md)</span><span class="sxs-lookup"><span data-stu-id="ac16e-511">For information on hello architecture and information flow within hello Cluster Resource Manager, check out [this article ](service-fabric-cluster-resource-manager-architecture.md)</span></span>
* <span data-ttu-id="ac16e-512">Töredezettségmentesítés metrikák meghatározása a csomópont helyett ezzel az egyirányú tooconsolidate terhelése. toolearn hogyan tooconfigure töredezettségmentesítés, tekintse meg a túl[Ez a cikk](service-fabric-cluster-resource-manager-defragmentation-metrics.md)</span><span class="sxs-lookup"><span data-stu-id="ac16e-512">Defining Defragmentation Metrics is one way tooconsolidate load on nodes instead of spreading it out. toolearn how tooconfigure defragmentation, refer too[this article](service-fabric-cluster-resource-manager-defragmentation-metrics.md)</span></span>
* <span data-ttu-id="ac16e-513">Indítsa el a hello elejétől és [egy bevezető toohello Service Fabric fürt erőforrás-kezelő beolvasása](service-fabric-cluster-resource-manager-introduction.md)</span><span class="sxs-lookup"><span data-stu-id="ac16e-513">Start from hello beginning and [get an Introduction toohello Service Fabric Cluster Resource Manager](service-fabric-cluster-resource-manager-introduction.md)</span></span>
* <span data-ttu-id="ac16e-514">toofind meg arról, hogyan hello fürt erőforrás-kezelő felügyeli, és elosztja a terhelést hello fürtben, tekintse meg hello a cikk a [terheléselosztás](service-fabric-cluster-resource-manager-balancing.md)</span><span class="sxs-lookup"><span data-stu-id="ac16e-514">toofind out about how hello Cluster Resource Manager manages and balances load in hello cluster, check out hello article on [balancing load](service-fabric-cluster-resource-manager-balancing.md)</span></span>

[Image1]:./media/service-fabric-cluster-resource-manager-cluster-description/cluster-fault-domains.png
[Image2]:./media/service-fabric-cluster-resource-manager-cluster-description/cluster-uneven-fault-domain-layout.png
[Image3]:./media/service-fabric-cluster-resource-manager-cluster-description/cluster-fault-and-upgrade-domains-with-placement.png
[Image4]:./media/service-fabric-cluster-resource-manager-cluster-description/cluster-fault-and-upgrade-domain-layout-strategies.png
[Image5]:./media/service-fabric-cluster-resource-manager-cluster-description/cluster-layout-different-workloads.png
[Image6]:./media/service-fabric-cluster-resource-manager-cluster-description/cluster-placement-constraints-node-properties.png
[Image7]:./media/service-fabric-cluster-resource-manager-cluster-description/cluster-nodes-and-capacity.png
