---
title: "az Azure terheléselosztó virtuális IP-címek aaaMultiple |} Microsoft Docs"
description: "Több virtuális IP-címek az Azure Load Balancer áttekintése"
services: load-balancer
documentationcenter: na
author: chkuhtz
manager: narayan
editor: 
ms.assetid: 748e50cd-3087-4c2e-a9e1-ac0ecce4f869
ms.service: load-balancer
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 08/11/2016
ms.author: chkuhtz
ms.openlocfilehash: e186e1248e7d187e7efd0668dc3244465ce3e156
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/06/2017
---
# <a name="multiple-vips-for-azure-load-balancer"></a><span data-ttu-id="30a9f-103">Több virtuális IP-cím az Azure Load Balancerhez</span><span class="sxs-lookup"><span data-stu-id="30a9f-103">Multiple VIPs for Azure Load Balancer</span></span>

<span data-ttu-id="30a9f-104">Az Azure Load Balancer lehetővé teszi a tooload egyenleg szolgáltatások több portot vagy több IP-címet.</span><span class="sxs-lookup"><span data-stu-id="30a9f-104">Azure Load Balancer allows you tooload balance services on multiple ports, multiple IP addresses, or both.</span></span> <span data-ttu-id="30a9f-105">Használhatja a nyilvános és a belső terheléselosztó definíciók tooload egyenleg adatfolyamok virtuális gépek csoportja között.</span><span class="sxs-lookup"><span data-stu-id="30a9f-105">You can use public and internal load balancer definitions tooload balance flows across a set of VMs.</span></span>

<span data-ttu-id="30a9f-106">Ez a cikk ismerteti a lehetősége, fontos fogalmakat és korlátozások hello alapjait.</span><span class="sxs-lookup"><span data-stu-id="30a9f-106">This article describes hello fundamentals of this ability, important concepts, and constraints.</span></span> <span data-ttu-id="30a9f-107">Ha csak egy IP-címet kíván tooexpose szolgáltatások egyszerűsített utasításokat talál [nyilvános](load-balancer-get-started-internet-portal.md) vagy [belső](load-balancer-get-started-ilb-arm-portal.md) terheléselosztó konfigurációjában betölteni.</span><span class="sxs-lookup"><span data-stu-id="30a9f-107">If you only intend tooexpose services on one IP address, you can find simplified instructions for [public](load-balancer-get-started-internet-portal.md) or [internal](load-balancer-get-started-ilb-arm-portal.md) load balancer configurations.</span></span> <span data-ttu-id="30a9f-108">Több virtuális IP-címek hozzáadása akkor növekményes tooa egyetlen virtuális IP-konfigurációval.</span><span class="sxs-lookup"><span data-stu-id="30a9f-108">Adding Multiple VIPs is incremental tooa single VIP configuration.</span></span> <span data-ttu-id="30a9f-109">Ebben a cikkben hello fogalmak használva bővítheti egy egyszerűsített konfigurációs bármikor.</span><span class="sxs-lookup"><span data-stu-id="30a9f-109">Using hello concepts in this article, you can expand a simplified configuration at any time.</span></span>

<span data-ttu-id="30a9f-110">Ha az Azure Load Balancer, egy előtér- és a háttér-konfiguráció csatlakoztatott szabályok.</span><span class="sxs-lookup"><span data-stu-id="30a9f-110">When you define an Azure Load Balancer, a frontend and a backend configuration are connected with rules.</span></span> <span data-ttu-id="30a9f-111">hello hello szabály által hivatkozott állapotmintáihoz új használt toodetermine adatfolyamok tooa csomópont küldi hello háttérkészlet.</span><span class="sxs-lookup"><span data-stu-id="30a9f-111">hello health probe referenced by hello rule is used toodetermine how new flows are sent tooa node in hello backend pool.</span></span> <span data-ttu-id="30a9f-112">hello előtér által a virtuális IP-cím (VIP), amely egy 3-rekord az IP-cím (nyilvános vagy belső), egy átviteli protokoll (UDP vagy TCP) és a portszám van definiálva.</span><span class="sxs-lookup"><span data-stu-id="30a9f-112">hello frontend is defined by a Virtual IP (VIP), which is a 3-tuple comprised of an IP address (public or internal), a transport protocol (UDP or TCP), and a port number.</span></span> <span data-ttu-id="30a9f-113">A DIP-t, a egy olyan Azure virtuális hálózati adapter IP-cím van csatolva tooa hello háttérkészletben lévő virtuális gép.</span><span class="sxs-lookup"><span data-stu-id="30a9f-113">A DIP is an IP address on an Azure virtual NIC attached tooa VM in hello backend pool.</span></span>

<span data-ttu-id="30a9f-114">hello a következő táblázatban néhány példa előtér konfigurációkat tartalmazza:</span><span class="sxs-lookup"><span data-stu-id="30a9f-114">hello following table contains some example frontend configurations:</span></span>

| <span data-ttu-id="30a9f-115">VIP</span><span class="sxs-lookup"><span data-stu-id="30a9f-115">VIP</span></span> | <span data-ttu-id="30a9f-116">IP-cím</span><span class="sxs-lookup"><span data-stu-id="30a9f-116">IP address</span></span> | <span data-ttu-id="30a9f-117">Protokoll</span><span class="sxs-lookup"><span data-stu-id="30a9f-117">protocol</span></span> | <span data-ttu-id="30a9f-118">port</span><span class="sxs-lookup"><span data-stu-id="30a9f-118">port</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="30a9f-119">1</span><span class="sxs-lookup"><span data-stu-id="30a9f-119">1</span></span> |<span data-ttu-id="30a9f-120">65.52.0.1</span><span class="sxs-lookup"><span data-stu-id="30a9f-120">65.52.0.1</span></span> |<span data-ttu-id="30a9f-121">TCP</span><span class="sxs-lookup"><span data-stu-id="30a9f-121">TCP</span></span> |<span data-ttu-id="30a9f-122">80</span><span class="sxs-lookup"><span data-stu-id="30a9f-122">80</span></span> |
| <span data-ttu-id="30a9f-123">2</span><span class="sxs-lookup"><span data-stu-id="30a9f-123">2</span></span> |<span data-ttu-id="30a9f-124">65.52.0.1</span><span class="sxs-lookup"><span data-stu-id="30a9f-124">65.52.0.1</span></span> |<span data-ttu-id="30a9f-125">TCP</span><span class="sxs-lookup"><span data-stu-id="30a9f-125">TCP</span></span> |<span data-ttu-id="30a9f-126">*8080*</span><span class="sxs-lookup"><span data-stu-id="30a9f-126">*8080*</span></span> |
| <span data-ttu-id="30a9f-127">3</span><span class="sxs-lookup"><span data-stu-id="30a9f-127">3</span></span> |<span data-ttu-id="30a9f-128">65.52.0.1</span><span class="sxs-lookup"><span data-stu-id="30a9f-128">65.52.0.1</span></span> |<span data-ttu-id="30a9f-129">*UDP*</span><span class="sxs-lookup"><span data-stu-id="30a9f-129">*UDP*</span></span> |<span data-ttu-id="30a9f-130">80</span><span class="sxs-lookup"><span data-stu-id="30a9f-130">80</span></span> |
| <span data-ttu-id="30a9f-131">4</span><span class="sxs-lookup"><span data-stu-id="30a9f-131">4</span></span> |<span data-ttu-id="30a9f-132">*65.52.0.2*</span><span class="sxs-lookup"><span data-stu-id="30a9f-132">*65.52.0.2*</span></span> |<span data-ttu-id="30a9f-133">TCP</span><span class="sxs-lookup"><span data-stu-id="30a9f-133">TCP</span></span> |<span data-ttu-id="30a9f-134">80</span><span class="sxs-lookup"><span data-stu-id="30a9f-134">80</span></span> |

<span data-ttu-id="30a9f-135">a táblázat hello négy különböző frontends.</span><span class="sxs-lookup"><span data-stu-id="30a9f-135">hello table shows four different frontends.</span></span> <span data-ttu-id="30a9f-136">Frontends #1, #2 és a #3 egyetlen virtuális IP-címhez több szabályt a rendszer.</span><span class="sxs-lookup"><span data-stu-id="30a9f-136">Frontends #1, #2 and #3 are a single VIP with multiple rules.</span></span> <span data-ttu-id="30a9f-137">hello azonos IP-címet használja, de hello port vagy a protokoll nem azonos az összes előtérbeli.</span><span class="sxs-lookup"><span data-stu-id="30a9f-137">hello same IP address is used but hello port or protocol is different for each frontend.</span></span> <span data-ttu-id="30a9f-138">Frontends #1 és #4 például több virtuális IP-címek, ahol hello azonos elülső rétegbeli protokoll és port újra felhasználja a rendszer több virtuális IP-címek között.</span><span class="sxs-lookup"><span data-stu-id="30a9f-138">Frontends #1 and #4 are an example of Multiple VIPs, where hello same frontend protocol and port are reused across multiple VIPs.</span></span>

<span data-ttu-id="30a9f-139">Az Azure terheléselosztó hello terheléselosztási szabályok definiálása rugalmasságot biztosít.</span><span class="sxs-lookup"><span data-stu-id="30a9f-139">Azure Load Balancer provides flexibility in defining hello load balancing rules.</span></span> <span data-ttu-id="30a9f-140">Egy szabály kijelenti, hogyan egy címet és egy hello elülső rétegbeli portja csatlakoztatott toohello rendeltetési cím és port hello háttérkiszolgálón.</span><span class="sxs-lookup"><span data-stu-id="30a9f-140">A rule declares how an address and port on hello frontend is mapped toohello destination address and port on hello backend.</span></span> <span data-ttu-id="30a9f-141">Hello típusú hello szabályt függ-e szabályok között háttérportokat fel újra.</span><span class="sxs-lookup"><span data-stu-id="30a9f-141">Whether or not backend ports are reused across rules depends on hello type of hello rule.</span></span> <span data-ttu-id="30a9f-142">Minden szabály megvan konkrét követelmények, amelyek hatással lehetnek a gazdagép-konfiguráció és a mintavételi megtervezése.</span><span class="sxs-lookup"><span data-stu-id="30a9f-142">Each type of rule has specific requirements that can affect host configuration and probe design.</span></span> <span data-ttu-id="30a9f-143">A szabályok két típusa van:</span><span class="sxs-lookup"><span data-stu-id="30a9f-143">There are two types of rules:</span></span>

1. <span data-ttu-id="30a9f-144">alapértelmezett szabály hello nem háttérportot újrafelhasználása</span><span class="sxs-lookup"><span data-stu-id="30a9f-144">hello default rule with no backend port reuse</span></span>
2. <span data-ttu-id="30a9f-145">Ha háttérportokat újrafelhasznált hello fix IP-szabály</span><span class="sxs-lookup"><span data-stu-id="30a9f-145">hello Floating IP rule where backend ports are reused</span></span>

<span data-ttu-id="30a9f-146">Az Azure terheléselosztó lehetővé teszi mindkét-szabályok típusai toomix hello azonos terheléselosztó-konfigurációt.</span><span class="sxs-lookup"><span data-stu-id="30a9f-146">Azure Load Balancer allows you toomix both rule types on hello same load balancer configuration.</span></span> <span data-ttu-id="30a9f-147">hello terheléselosztót is használhatók egyidejűleg egy adott virtuális Gépet, vagy tetszőleges kombinációját, mindaddig, amíg Ön elfogadják hello megkötések hello szabály.</span><span class="sxs-lookup"><span data-stu-id="30a9f-147">hello load balancer can use them simultaneously for a given VM, or any combination, as long as you abide by hello constraints of hello rule.</span></span> <span data-ttu-id="30a9f-148">Úgy dönt, a szabály típusát attól függ, hogy az alkalmazás- és hello összetettsége támogatása, hogy a konfigurálás hello követelményeinek.</span><span class="sxs-lookup"><span data-stu-id="30a9f-148">Which rule type you choose depends on hello requirements of your application and hello complexity of supporting that configuration.</span></span> <span data-ttu-id="30a9f-149">Akkor ki kell értékelnie, mely szabálytípusok ajánlott a forgatókönyvéhez.</span><span class="sxs-lookup"><span data-stu-id="30a9f-149">You should evaluate which rule types are best for your scenario.</span></span>

<span data-ttu-id="30a9f-150">További forgatókönyvekben hello alapértelmezett viselkedés kezdve megismerkedhet azt.</span><span class="sxs-lookup"><span data-stu-id="30a9f-150">We explore these scenarios further by starting with hello default behavior.</span></span>

## <a name="rule-type-1-no-backend-port-reuse"></a><span data-ttu-id="30a9f-151">Szabály típusa #1: nincs háttér port újbóli</span><span class="sxs-lookup"><span data-stu-id="30a9f-151">Rule type #1: No backend port reuse</span></span>

![Több virtuális ábra](./media/load-balancer-multivip-overview/load-balancer-multivip.png)

<span data-ttu-id="30a9f-153">Ebben a forgatókönyvben hello előtér virtuális IP-címmel vannak konfigurálva az alábbiak szerint:</span><span class="sxs-lookup"><span data-stu-id="30a9f-153">In this scenario, hello frontend VIPs are configured as follows:</span></span>

| <span data-ttu-id="30a9f-154">VIP</span><span class="sxs-lookup"><span data-stu-id="30a9f-154">VIP</span></span> | <span data-ttu-id="30a9f-155">IP-cím</span><span class="sxs-lookup"><span data-stu-id="30a9f-155">IP address</span></span> | <span data-ttu-id="30a9f-156">Protokoll</span><span class="sxs-lookup"><span data-stu-id="30a9f-156">protocol</span></span> | <span data-ttu-id="30a9f-157">port</span><span class="sxs-lookup"><span data-stu-id="30a9f-157">port</span></span> |
| --- | --- | --- | --- |
| ![VIP](./media/load-balancer-multivip-overview/load-balancer-rule-green.png) <span data-ttu-id="30a9f-159">1</span><span class="sxs-lookup"><span data-stu-id="30a9f-159">1</span></span> |<span data-ttu-id="30a9f-160">65.52.0.1</span><span class="sxs-lookup"><span data-stu-id="30a9f-160">65.52.0.1</span></span> |<span data-ttu-id="30a9f-161">TCP</span><span class="sxs-lookup"><span data-stu-id="30a9f-161">TCP</span></span> |<span data-ttu-id="30a9f-162">80</span><span class="sxs-lookup"><span data-stu-id="30a9f-162">80</span></span> |
| ![VIP](./media/load-balancer-multivip-overview/load-balancer-rule-purple.png) <span data-ttu-id="30a9f-164">2</span><span class="sxs-lookup"><span data-stu-id="30a9f-164">2</span></span> |<span data-ttu-id="30a9f-165">*65.52.0.2*</span><span class="sxs-lookup"><span data-stu-id="30a9f-165">*65.52.0.2*</span></span> |<span data-ttu-id="30a9f-166">TCP</span><span class="sxs-lookup"><span data-stu-id="30a9f-166">TCP</span></span> |<span data-ttu-id="30a9f-167">80</span><span class="sxs-lookup"><span data-stu-id="30a9f-167">80</span></span> |

<span data-ttu-id="30a9f-168">hello DIP az hello hello hely bejövő adatfolyam.</span><span class="sxs-lookup"><span data-stu-id="30a9f-168">hello DIP is hello destination of hello inbound flow.</span></span> <span data-ttu-id="30a9f-169">Hello háttérkészlet, a virtuális gépek mutatja meg egy egyedi portot, a DIP-ről a kívánt hello szolgáltatás.</span><span class="sxs-lookup"><span data-stu-id="30a9f-169">In hello backend pool, each VM exposes hello desired service on a unique port on a DIP.</span></span> <span data-ttu-id="30a9f-170">Ez a szolgáltatás nem tartozik hello előtér keresztül egy szabályát leíró definíció beolvasása.</span><span class="sxs-lookup"><span data-stu-id="30a9f-170">This service is associated with hello frontend through a rule definition.</span></span>

<span data-ttu-id="30a9f-171">Azt adja meg a két szabályt:</span><span class="sxs-lookup"><span data-stu-id="30a9f-171">We define two rules:</span></span>

| <span data-ttu-id="30a9f-172">Szabály</span><span class="sxs-lookup"><span data-stu-id="30a9f-172">Rule</span></span> | <span data-ttu-id="30a9f-173">Előtérbeli leképezése</span><span class="sxs-lookup"><span data-stu-id="30a9f-173">Map frontend</span></span> | <span data-ttu-id="30a9f-174">toobackend készlet</span><span class="sxs-lookup"><span data-stu-id="30a9f-174">toobackend pool</span></span> |
| --- | --- | --- |
| <span data-ttu-id="30a9f-175">1</span><span class="sxs-lookup"><span data-stu-id="30a9f-175">1</span></span> |![VIP](./media/load-balancer-multivip-overview/load-balancer-rule-green.png) <span data-ttu-id="30a9f-177">VIP1:80</span><span class="sxs-lookup"><span data-stu-id="30a9f-177">VIP1:80</span></span> |![háttér](./media/load-balancer-multivip-overview/load-balancer-rule-green.png) <span data-ttu-id="30a9f-179">DIP1:80,</span><span class="sxs-lookup"><span data-stu-id="30a9f-179">DIP1:80,</span></span> ![háttér](./media/load-balancer-multivip-overview/load-balancer-rule-green.png) <span data-ttu-id="30a9f-181">DIP2:80</span><span class="sxs-lookup"><span data-stu-id="30a9f-181">DIP2:80</span></span> |
| <span data-ttu-id="30a9f-182">2</span><span class="sxs-lookup"><span data-stu-id="30a9f-182">2</span></span> |![VIP](./media/load-balancer-multivip-overview/load-balancer-rule-purple.png) <span data-ttu-id="30a9f-184">VIP2:80</span><span class="sxs-lookup"><span data-stu-id="30a9f-184">VIP2:80</span></span> |![háttér](./media/load-balancer-multivip-overview/load-balancer-rule-purple.png) <span data-ttu-id="30a9f-186">DIP1:81,</span><span class="sxs-lookup"><span data-stu-id="30a9f-186">DIP1:81,</span></span> ![háttér](./media/load-balancer-multivip-overview/load-balancer-rule-purple.png) <span data-ttu-id="30a9f-188">DIP2:81</span><span class="sxs-lookup"><span data-stu-id="30a9f-188">DIP2:81</span></span> |

<span data-ttu-id="30a9f-189">teljes leképezését hello Azure Load Balancer jelenleg az alábbiak szerint:</span><span class="sxs-lookup"><span data-stu-id="30a9f-189">hello complete mapping in Azure Load Balancer is now as follows:</span></span>

| <span data-ttu-id="30a9f-190">Szabály</span><span class="sxs-lookup"><span data-stu-id="30a9f-190">Rule</span></span> | <span data-ttu-id="30a9f-191">VIP IP-cím</span><span class="sxs-lookup"><span data-stu-id="30a9f-191">VIP IP address</span></span> | <span data-ttu-id="30a9f-192">Protokoll</span><span class="sxs-lookup"><span data-stu-id="30a9f-192">protocol</span></span> | <span data-ttu-id="30a9f-193">port</span><span class="sxs-lookup"><span data-stu-id="30a9f-193">port</span></span> | <span data-ttu-id="30a9f-194">Cél</span><span class="sxs-lookup"><span data-stu-id="30a9f-194">Destination</span></span> | <span data-ttu-id="30a9f-195">port</span><span class="sxs-lookup"><span data-stu-id="30a9f-195">port</span></span> |
| --- | --- | --- | --- | --- | --- |
| ![A szabály](./media/load-balancer-multivip-overview/load-balancer-rule-green.png) <span data-ttu-id="30a9f-197">1</span><span class="sxs-lookup"><span data-stu-id="30a9f-197">1</span></span> |<span data-ttu-id="30a9f-198">65.52.0.1</span><span class="sxs-lookup"><span data-stu-id="30a9f-198">65.52.0.1</span></span> |<span data-ttu-id="30a9f-199">TCP</span><span class="sxs-lookup"><span data-stu-id="30a9f-199">TCP</span></span> |<span data-ttu-id="30a9f-200">80</span><span class="sxs-lookup"><span data-stu-id="30a9f-200">80</span></span> |<span data-ttu-id="30a9f-201">DIP IP-cím</span><span class="sxs-lookup"><span data-stu-id="30a9f-201">DIP IP Address</span></span> |<span data-ttu-id="30a9f-202">80</span><span class="sxs-lookup"><span data-stu-id="30a9f-202">80</span></span> |
| ![A szabály](./media/load-balancer-multivip-overview/load-balancer-rule-purple.png) <span data-ttu-id="30a9f-204">2</span><span class="sxs-lookup"><span data-stu-id="30a9f-204">2</span></span> |<span data-ttu-id="30a9f-205">65.52.0.2</span><span class="sxs-lookup"><span data-stu-id="30a9f-205">65.52.0.2</span></span> |<span data-ttu-id="30a9f-206">TCP</span><span class="sxs-lookup"><span data-stu-id="30a9f-206">TCP</span></span> |<span data-ttu-id="30a9f-207">80</span><span class="sxs-lookup"><span data-stu-id="30a9f-207">80</span></span> |<span data-ttu-id="30a9f-208">DIP IP-cím</span><span class="sxs-lookup"><span data-stu-id="30a9f-208">DIP IP Address</span></span> |<span data-ttu-id="30a9f-209">81</span><span class="sxs-lookup"><span data-stu-id="30a9f-209">81</span></span> |

<span data-ttu-id="30a9f-210">Minden egyes szabály a folyamat a cél IP-cím és a célport egyedi kombinációját kell eredményez.</span><span class="sxs-lookup"><span data-stu-id="30a9f-210">Each rule must produce a flow with a unique combination of destination IP address and destination port.</span></span> <span data-ttu-id="30a9f-211">Különböző hello célport hello folyamat, amelyet több szabály által biztosított adatfolyamok toohello azonos DIP eltérő portokon.</span><span class="sxs-lookup"><span data-stu-id="30a9f-211">By varying hello destination port of hello flow, multiple rules can deliver flows toohello same DIP on different ports.</span></span>

<span data-ttu-id="30a9f-212">Állapotteljesítmény mindig irányított toohello DIP-t a virtuális gépek találhatók.</span><span class="sxs-lookup"><span data-stu-id="30a9f-212">Health probes are always directed toohello DIP of a VM.</span></span> <span data-ttu-id="30a9f-213">Győződjön meg arról, hogy a mintavételi tükrözi hello hello VM állapotának.</span><span class="sxs-lookup"><span data-stu-id="30a9f-213">You must ensure you that your probe reflects hello health of hello VM.</span></span>

## <a name="rule-type-2-backend-port-reuse-by-using-floating-ip"></a><span data-ttu-id="30a9f-214">Szabály típusa #2: háttér port újbóli fix IP-Címek használatával</span><span class="sxs-lookup"><span data-stu-id="30a9f-214">Rule type #2: backend port reuse by using Floating IP</span></span>

<span data-ttu-id="30a9f-215">Az Azure Load Balancer hello rugalmasságot biztosít tooreuse hello elülső rétegbeli portot több virtuális IP-címek függetlenül használt hello szabálytípus között.</span><span class="sxs-lookup"><span data-stu-id="30a9f-215">Azure Load Balancer provides hello flexibility tooreuse hello frontend port across multiple VIPs regardless of hello rule type used.</span></span> <span data-ttu-id="30a9f-216">Emellett egyes alkalmazás-forgatókönyvek inkább, vagy hello azonos toobe több alkalmazáspéldányt a hello háttérkészletben lévő egyetlen virtuális gép által használt port szükséges.</span><span class="sxs-lookup"><span data-stu-id="30a9f-216">Additionally, some application scenarios prefer or require hello same port toobe used by multiple application instances on a single VM in hello backend pool.</span></span> <span data-ttu-id="30a9f-217">Például a port újbóli magában foglalhatja a fürtözése a magas rendelkezésre állású, hálózati, a virtuális készülékek, és adjon meg több TLS végpont ismételt titkosítás nélkül.</span><span class="sxs-lookup"><span data-stu-id="30a9f-217">Common examples of port reuse include clustering for high availability, network virtual appliances, and exposing multiple TLS endpoints without re-encryption.</span></span>

<span data-ttu-id="30a9f-218">Ha több szabályok között tooreuse hello háttérportot, engedélyeznie kell fix IP-Címek hello szabályát leíró definíció beolvasása.</span><span class="sxs-lookup"><span data-stu-id="30a9f-218">If you want tooreuse hello backend port across multiple rules, you must enable Floating IP in hello rule definition.</span></span>

<span data-ttu-id="30a9f-219">Lebegőpontos IP egy része, mint a közvetlen kiszolgálói vissza (DSR) néven ismert.</span><span class="sxs-lookup"><span data-stu-id="30a9f-219">Floating IP is a portion of what is known as Direct Server Return (DSR).</span></span> <span data-ttu-id="30a9f-220">DSR két részből áll: a folyamat-topológia és egy IP-cím a leképezési séma.</span><span class="sxs-lookup"><span data-stu-id="30a9f-220">DSR consists of two parts: a flow topology and an IP address mapping scheme.</span></span> <span data-ttu-id="30a9f-221">A platform szintjén Azure Load Balancer mindig működik, függetlenül attól, hogy a fix IP-Címek engedélyezve van-e vagy sem DSR folyamata topológiában.</span><span class="sxs-lookup"><span data-stu-id="30a9f-221">At a platform level, Azure Load Balancer always operates in a DSR flow topology regardless of whether Floating IP is enabled or not.</span></span> <span data-ttu-id="30a9f-222">Ez azt jelenti, hogy hello kimenő része a folyamat mindig megfelelően egy átírt tooflow közvetlenül hátsó toohello forrása.</span><span class="sxs-lookup"><span data-stu-id="30a9f-222">This means that hello outbound part of a flow is always correctly rewritten tooflow directly back toohello origin.</span></span>

<span data-ttu-id="30a9f-223">Hello alapértelmezett szabály típusa, az Azure közzététele egy hagyományos terheléselosztási IP cím leképezési séma könnyű használatra.</span><span class="sxs-lookup"><span data-stu-id="30a9f-223">With hello default rule type, Azure exposes a traditional load balancing IP address mapping scheme for ease of use.</span></span> <span data-ttu-id="30a9f-224">Lehetővé teszi fix IP-Címek hello IP-cím hozzárendelés séma tooallow további rugalmasságot biztosít, amint azt alább módosítja.</span><span class="sxs-lookup"><span data-stu-id="30a9f-224">Enabling Floating IP changes hello IP address mapping scheme tooallow for additional flexibility as explained below.</span></span>

<span data-ttu-id="30a9f-225">hello a következő ábra szemlélteti ezt a konfigurációt:</span><span class="sxs-lookup"><span data-stu-id="30a9f-225">hello following diagram illustrates this configuration:</span></span>

![Több virtuális ábra](./media/load-balancer-multivip-overview/load-balancer-multivip-dsr.png)

<span data-ttu-id="30a9f-227">Ebben a forgatókönyvben minden virtuális gép hello háttérkészlet három hálózati adapterrel rendelkezik:</span><span class="sxs-lookup"><span data-stu-id="30a9f-227">For this scenario, every VM in hello backend pool has three network interfaces:</span></span>

* <span data-ttu-id="30a9f-228">DIP: virtuális hálózati Adapterhez társított hello VM csomag (IP-konfiguráció Azure hálózati erőforrás)</span><span class="sxs-lookup"><span data-stu-id="30a9f-228">DIP: a Virtual NIC associated with hello VM (IP configuration of Azure's NIC resource)</span></span>
* <span data-ttu-id="30a9f-229">Vip1-en: egy visszacsatolási belül a vendég operációs rendszer, amely vip1-en az IP-címmel van konfigurálva</span><span class="sxs-lookup"><span data-stu-id="30a9f-229">VIP1: a loopback interface within guest OS that is configured with IP address of VIP1</span></span>
* <span data-ttu-id="30a9f-230">VIP2: egy visszacsatolási belül a vendég operációs rendszer, amely a VIP2 IP-címmel van konfigurálva</span><span class="sxs-lookup"><span data-stu-id="30a9f-230">VIP2: a loopback interface within guest OS that is configured with IP address of VIP2</span></span>

> [!IMPORTANT]
> <span data-ttu-id="30a9f-231">hello konfigurációs hello logikai felületek hello vendég operációs rendszer belül történik.</span><span class="sxs-lookup"><span data-stu-id="30a9f-231">hello configuration of hello logical interfaces is performed within hello guest OS.</span></span> <span data-ttu-id="30a9f-232">Ez a konfiguráció nem végre vagy Azure által kezelt.</span><span class="sxs-lookup"><span data-stu-id="30a9f-232">This configuration is not performed or managed by Azure.</span></span> <span data-ttu-id="30a9f-233">E beállítások nélkül hello szabályok nem működnek.</span><span class="sxs-lookup"><span data-stu-id="30a9f-233">Without this configuration, hello rules will not function.</span></span> <span data-ttu-id="30a9f-234">Állapotfigyelő mintavételi definíciók hello DIP-t a virtuális gép hello használata helyett logikai VIP hello.</span><span class="sxs-lookup"><span data-stu-id="30a9f-234">Health probe definitions use hello DIP of hello VM rather than hello logical VIP.</span></span> <span data-ttu-id="30a9f-235">Ezért a szolgáltatást biztosítania kell mintavételi válaszok hello szolgáltatás felajánlott hello állapotát tükrözi hello logikai VIP DIP porton.</span><span class="sxs-lookup"><span data-stu-id="30a9f-235">Therefore, your service must provide probe responses on a DIP port that reflect hello status of hello service offered on hello logical VIP.</span></span>

<span data-ttu-id="30a9f-236">Tegyük fel hello azonos előtérbeli konfigurációja mint hello előző forgatókönyv esetén:</span><span class="sxs-lookup"><span data-stu-id="30a9f-236">Let's assume hello same frontend configuration as in hello previous scenario:</span></span>

| <span data-ttu-id="30a9f-237">VIP</span><span class="sxs-lookup"><span data-stu-id="30a9f-237">VIP</span></span> | <span data-ttu-id="30a9f-238">IP-cím</span><span class="sxs-lookup"><span data-stu-id="30a9f-238">IP address</span></span> | <span data-ttu-id="30a9f-239">Protokoll</span><span class="sxs-lookup"><span data-stu-id="30a9f-239">protocol</span></span> | <span data-ttu-id="30a9f-240">port</span><span class="sxs-lookup"><span data-stu-id="30a9f-240">port</span></span> |
| --- | --- | --- | --- |
| ![VIP](./media/load-balancer-multivip-overview/load-balancer-rule-green.png) <span data-ttu-id="30a9f-242">1</span><span class="sxs-lookup"><span data-stu-id="30a9f-242">1</span></span> |<span data-ttu-id="30a9f-243">65.52.0.1</span><span class="sxs-lookup"><span data-stu-id="30a9f-243">65.52.0.1</span></span> |<span data-ttu-id="30a9f-244">TCP</span><span class="sxs-lookup"><span data-stu-id="30a9f-244">TCP</span></span> |<span data-ttu-id="30a9f-245">80</span><span class="sxs-lookup"><span data-stu-id="30a9f-245">80</span></span> |
| ![VIP](./media/load-balancer-multivip-overview/load-balancer-rule-purple.png) <span data-ttu-id="30a9f-247">2</span><span class="sxs-lookup"><span data-stu-id="30a9f-247">2</span></span> |<span data-ttu-id="30a9f-248">*65.52.0.2*</span><span class="sxs-lookup"><span data-stu-id="30a9f-248">*65.52.0.2*</span></span> |<span data-ttu-id="30a9f-249">TCP</span><span class="sxs-lookup"><span data-stu-id="30a9f-249">TCP</span></span> |<span data-ttu-id="30a9f-250">80</span><span class="sxs-lookup"><span data-stu-id="30a9f-250">80</span></span> |

<span data-ttu-id="30a9f-251">Azt adja meg a két szabályt:</span><span class="sxs-lookup"><span data-stu-id="30a9f-251">We define two rules:</span></span>

| <span data-ttu-id="30a9f-252">Szabály</span><span class="sxs-lookup"><span data-stu-id="30a9f-252">Rule</span></span> | <span data-ttu-id="30a9f-253">Előtérbeli leképezése</span><span class="sxs-lookup"><span data-stu-id="30a9f-253">Map frontend</span></span> | <span data-ttu-id="30a9f-254">toobackend készlet</span><span class="sxs-lookup"><span data-stu-id="30a9f-254">toobackend pool</span></span> |
| --- | --- | --- |
| <span data-ttu-id="30a9f-255">1</span><span class="sxs-lookup"><span data-stu-id="30a9f-255">1</span></span> |![A szabály](./media/load-balancer-multivip-overview/load-balancer-rule-green.png) <span data-ttu-id="30a9f-257">VIP1:80</span><span class="sxs-lookup"><span data-stu-id="30a9f-257">VIP1:80</span></span> |![háttér](./media/load-balancer-multivip-overview/load-balancer-rule-green.png) <span data-ttu-id="30a9f-259">(A VM1 és vm2 virtuális gépnek) VIP1:80</span><span class="sxs-lookup"><span data-stu-id="30a9f-259">VIP1:80 (in VM1 and VM2)</span></span> |
| <span data-ttu-id="30a9f-260">2</span><span class="sxs-lookup"><span data-stu-id="30a9f-260">2</span></span> |![A szabály](./media/load-balancer-multivip-overview/load-balancer-rule-purple.png) <span data-ttu-id="30a9f-262">VIP2:80</span><span class="sxs-lookup"><span data-stu-id="30a9f-262">VIP2:80</span></span> |![háttér](./media/load-balancer-multivip-overview/load-balancer-rule-purple.png) <span data-ttu-id="30a9f-264">(A VM1 és vm2 virtuális gépnek) VIP2:80</span><span class="sxs-lookup"><span data-stu-id="30a9f-264">VIP2:80 (in VM1 and VM2)</span></span> |

<span data-ttu-id="30a9f-265">a következő táblázat hello hello teljes leképezés hello terheléselosztó mutatja:</span><span class="sxs-lookup"><span data-stu-id="30a9f-265">hello following table shows hello complete mapping in hello load balancer:</span></span>

| <span data-ttu-id="30a9f-266">Szabály</span><span class="sxs-lookup"><span data-stu-id="30a9f-266">Rule</span></span> | <span data-ttu-id="30a9f-267">VIP IP-cím</span><span class="sxs-lookup"><span data-stu-id="30a9f-267">VIP IP address</span></span> | <span data-ttu-id="30a9f-268">Protokoll</span><span class="sxs-lookup"><span data-stu-id="30a9f-268">protocol</span></span> | <span data-ttu-id="30a9f-269">port</span><span class="sxs-lookup"><span data-stu-id="30a9f-269">port</span></span> | <span data-ttu-id="30a9f-270">Cél</span><span class="sxs-lookup"><span data-stu-id="30a9f-270">Destination</span></span> | <span data-ttu-id="30a9f-271">port</span><span class="sxs-lookup"><span data-stu-id="30a9f-271">port</span></span> |
| --- | --- | --- | --- | --- | --- |
| ![VIP](./media/load-balancer-multivip-overview/load-balancer-rule-green.png) <span data-ttu-id="30a9f-273">1</span><span class="sxs-lookup"><span data-stu-id="30a9f-273">1</span></span> |<span data-ttu-id="30a9f-274">65.52.0.1</span><span class="sxs-lookup"><span data-stu-id="30a9f-274">65.52.0.1</span></span> |<span data-ttu-id="30a9f-275">TCP</span><span class="sxs-lookup"><span data-stu-id="30a9f-275">TCP</span></span> |<span data-ttu-id="30a9f-276">80</span><span class="sxs-lookup"><span data-stu-id="30a9f-276">80</span></span> |<span data-ttu-id="30a9f-277">ugyanaz, mint VIP (65.52.0.1)</span><span class="sxs-lookup"><span data-stu-id="30a9f-277">same as VIP (65.52.0.1)</span></span> |<span data-ttu-id="30a9f-278">ugyanaz, mint VIP (80-as)</span><span class="sxs-lookup"><span data-stu-id="30a9f-278">same as VIP (80)</span></span> |
| ![VIP](./media/load-balancer-multivip-overview/load-balancer-rule-purple.png) <span data-ttu-id="30a9f-280">2</span><span class="sxs-lookup"><span data-stu-id="30a9f-280">2</span></span> |<span data-ttu-id="30a9f-281">65.52.0.2</span><span class="sxs-lookup"><span data-stu-id="30a9f-281">65.52.0.2</span></span> |<span data-ttu-id="30a9f-282">TCP</span><span class="sxs-lookup"><span data-stu-id="30a9f-282">TCP</span></span> |<span data-ttu-id="30a9f-283">80</span><span class="sxs-lookup"><span data-stu-id="30a9f-283">80</span></span> |<span data-ttu-id="30a9f-284">ugyanaz, mint VIP (65.52.0.2)</span><span class="sxs-lookup"><span data-stu-id="30a9f-284">same as VIP (65.52.0.2)</span></span> |<span data-ttu-id="30a9f-285">ugyanaz, mint VIP (80-as)</span><span class="sxs-lookup"><span data-stu-id="30a9f-285">same as VIP (80)</span></span> |

<span data-ttu-id="30a9f-286">hello cél hello bejövő folyamata az hello VIP-cím szerepel a virtuális gép hello hello visszacsatolási.</span><span class="sxs-lookup"><span data-stu-id="30a9f-286">hello destination of hello inbound flow is hello VIP address on hello loopback interface in hello VM.</span></span> <span data-ttu-id="30a9f-287">Minden egyes szabály a folyamat a cél IP-cím és a célport egyedi kombinációját kell eredményez.</span><span class="sxs-lookup"><span data-stu-id="30a9f-287">Each rule must produce a flow with a unique combination of destination IP address and destination port.</span></span> <span data-ttu-id="30a9f-288">Különböző hello cél IP-cím alapján hello folyamata, port újbóli kiszolgálón lehetőség hello azonos virtuális gép.</span><span class="sxs-lookup"><span data-stu-id="30a9f-288">By varying hello destination IP address of hello flow, port reuse is possible on hello same VM.</span></span> <span data-ttu-id="30a9f-289">A szolgáltatás elérhetővé toohello terheléselosztó szerint toohello VIP tartozó IP-cím és port hello megfelelő visszacsatolási kötés.</span><span class="sxs-lookup"><span data-stu-id="30a9f-289">Your service is exposed toohello load balancer by binding it toohello VIP’s IP address and port of hello respective loopback interface.</span></span>

<span data-ttu-id="30a9f-290">Figyelje meg, hogy ez a példa nem változtatja meg a célport hello.</span><span class="sxs-lookup"><span data-stu-id="30a9f-290">Notice that this example does not change hello destination port.</span></span> <span data-ttu-id="30a9f-291">Annak ellenére, hogy ez egy webfarmos fix IP-Címek, Azure Load Balancer is támogatja a szabály toorewrite hello háttér célport és toomake azt hello előtér célport eltérő.</span><span class="sxs-lookup"><span data-stu-id="30a9f-291">Even though this is a Floating IP scenario, Azure Load Balancer also supports defining a rule toorewrite hello backend destination port and toomake it different from hello frontend destination port.</span></span>

<span data-ttu-id="30a9f-292">hello fix IP-Címek szabálytípus hello foundation több terhelés terheléselosztó konfigurációs minták.</span><span class="sxs-lookup"><span data-stu-id="30a9f-292">hello Floating IP rule type is hello foundation of several load balancer configuration patterns.</span></span> <span data-ttu-id="30a9f-293">Egy példa, hogy jelenleg rendelkezésre áll: hello [több figyelők az SQL AlwaysOn](../virtual-machines/windows/sql/virtual-machines-windows-portal-sql-ps-alwayson-int-listener.md) konfigurációs.</span><span class="sxs-lookup"><span data-stu-id="30a9f-293">One example that is currently available is hello [SQL AlwaysOn with Multiple Listeners](../virtual-machines/windows/sql/virtual-machines-windows-portal-sql-ps-alwayson-int-listener.md) configuration.</span></span> <span data-ttu-id="30a9f-294">Adott idő alatt azt fogja a dokumentum több forgatókönyvekben.</span><span class="sxs-lookup"><span data-stu-id="30a9f-294">Over time, we will document more of these scenarios.</span></span>

## <a name="limitations"></a><span data-ttu-id="30a9f-295">Korlátozások</span><span class="sxs-lookup"><span data-stu-id="30a9f-295">Limitations</span></span>

* <span data-ttu-id="30a9f-296">Több virtuális IP-konfiguráció csak az infrastruktúra-szolgáltatási virtuális gépek támogatottak.</span><span class="sxs-lookup"><span data-stu-id="30a9f-296">Multiple VIP configurations are only supported with IaaS VMs.</span></span>
* <span data-ttu-id="30a9f-297">Hello fix IP-szabállyal az alkalmazást kell használnia hello DIP kimenő forgalom.</span><span class="sxs-lookup"><span data-stu-id="30a9f-297">With hello Floating IP rule, your application must use hello DIP for outbound flows.</span></span> <span data-ttu-id="30a9f-298">Ha az alkalmazás hello visszacsatolási hello vendég operációs rendszer beállított toohello virtuális IP-címével van kötve, majd SNAT nem érhető el toorewrite hello kimenő folyam és hello folyamat sikertelen lesz.</span><span class="sxs-lookup"><span data-stu-id="30a9f-298">If your application binds toohello VIP address configured on hello loopback interface in hello guest OS, then SNAT is not available toorewrite hello outbound flow and hello flow fails.</span></span>
* <span data-ttu-id="30a9f-299">Nyilvános IP-címek számlázási hatással.</span><span class="sxs-lookup"><span data-stu-id="30a9f-299">Public IP addresses have an effect on billing.</span></span> <span data-ttu-id="30a9f-300">További információkért lásd: [IP-cím díjszabása](https://azure.microsoft.com/pricing/details/ip-addresses/)</span><span class="sxs-lookup"><span data-stu-id="30a9f-300">For more information, see [IP Address pricing](https://azure.microsoft.com/pricing/details/ip-addresses/)</span></span>
* <span data-ttu-id="30a9f-301">Érvényes előfizetési korlátozásait.</span><span class="sxs-lookup"><span data-stu-id="30a9f-301">Subscription limits apply.</span></span> <span data-ttu-id="30a9f-302">További információkért lásd: [szolgáltatási korlátait](../azure-subscription-service-limits.md#networking-limits) részleteiről.</span><span class="sxs-lookup"><span data-stu-id="30a9f-302">For more information, see [Service limits](../azure-subscription-service-limits.md#networking-limits) for details.</span></span>
