---
title: "Hitelesítési forgatókönyvek az Azure AD |} Microsoft Docs"
description: "Az öt leggyakoribb hitelesítési forgatókönyvek az Azure Active Directory (AAD) áttekintése"
services: active-directory
documentationcenter: dev-center-name
author: skwan
manager: mbaldwin
editor: 
ms.assetid: 0c84e7d0-16aa-4897-82f2-f53c6c990fd9
ms.service: active-directory
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: identity
ms.date: 04/27/2017
ms.author: skwan
ms.custom: aaddev
ms.openlocfilehash: 2f9410bdaa037f1839cf7c12c3532b51be669ed5
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 08/18/2017
---
# <a name="authentication-scenarios-for-azure-ad"></a><span data-ttu-id="64d8d-103">Hitelesítési forgatókönyvek az Azure AD-hez</span><span class="sxs-lookup"><span data-stu-id="64d8d-103">Authentication Scenarios for Azure AD</span></span>
<span data-ttu-id="64d8d-104">Azure Active Directory (Azure AD) egyszerűbbé teszi a fejlesztők számára hitelesítési megadásával identitás szolgáltatás, például az OAuth 2.0 és az OpenID Connect szabványos protokollt támogat, valamint nyitott forrásként tárak segítségével gyorsan elkezdésére különböző platformokon.</span><span class="sxs-lookup"><span data-stu-id="64d8d-104">Azure Active Directory (Azure AD) simplifies authentication for developers by providing identity as a service, with support for industry-standard protocols such as OAuth 2.0 and OpenID Connect, as well as open source libraries for different platforms to help you start coding quickly.</span></span> <span data-ttu-id="64d8d-105">Ez a dokumentum segít megérteni a különböző forgatókönyvek az Azure AD által támogatott, és bemutatja, hogyan lásson.</span><span class="sxs-lookup"><span data-stu-id="64d8d-105">This document will help you understand the various scenarios Azure AD supports and will show you how to get started.</span></span> <span data-ttu-id="64d8d-106">Ez a következő részből áll:</span><span class="sxs-lookup"><span data-stu-id="64d8d-106">It’s divided into the following sections:</span></span>

* [<span data-ttu-id="64d8d-107">Az Azure AD hitelesítési alapjai</span><span class="sxs-lookup"><span data-stu-id="64d8d-107">Basics of Authentication in Azure AD</span></span>](#basics-of-authentication-in-azure-ad)
* [<span data-ttu-id="64d8d-108">Az Azure AD biztonsági jogkivonatokat a jogcím</span><span class="sxs-lookup"><span data-stu-id="64d8d-108">Claims in Azure AD Security Tokens</span></span>](#claims-in-azure-ad-security-tokens)
* [<span data-ttu-id="64d8d-109">Egy alkalmazás regisztrálása az Azure AD alapjai</span><span class="sxs-lookup"><span data-stu-id="64d8d-109">Basics of Registering an Application in Azure AD</span></span>](#basics-of-registering-an-application-in-azure-ad)
* [<span data-ttu-id="64d8d-110">Alkalmazástípusok és forgatókönyvek</span><span class="sxs-lookup"><span data-stu-id="64d8d-110">Application Types and Scenarios</span></span>](#application-types-and-scenarios)
  
  * [<span data-ttu-id="64d8d-111">Webalkalmazás webböngészőben</span><span class="sxs-lookup"><span data-stu-id="64d8d-111">Web Browser to Web Application</span></span>](#web-browser-to-web-application)
  * [<span data-ttu-id="64d8d-112">Egylapos alkalmazások (SPA)</span><span class="sxs-lookup"><span data-stu-id="64d8d-112">Single Page Application (SPA)</span></span>](#single-page-application-spa)
  * [<span data-ttu-id="64d8d-113">Natív alkalmazás webes API-hoz</span><span class="sxs-lookup"><span data-stu-id="64d8d-113">Native Application to Web API</span></span>](#native-application-to-web-api)
  * [<span data-ttu-id="64d8d-114">Webalkalmazás, webes API-hoz</span><span class="sxs-lookup"><span data-stu-id="64d8d-114">Web Application to Web API</span></span>](#web-application-to-web-api)
  * [<span data-ttu-id="64d8d-115">Démon vagy kiszolgálói alkalmazás webes API-hoz</span><span class="sxs-lookup"><span data-stu-id="64d8d-115">Daemon or Server Application to Web API</span></span>](#daemon-or-server-application-to-web-api)

## <a name="basics-of-authentication-in-azure-ad"></a><span data-ttu-id="64d8d-116">Az Azure AD hitelesítési alapjai</span><span class="sxs-lookup"><span data-stu-id="64d8d-116">Basics of Authentication in Azure AD</span></span>
<span data-ttu-id="64d8d-117">Ha nem ismeri az Azure AD authentication alapvető fogalmait, olvassa el az ebben a szakaszban.</span><span class="sxs-lookup"><span data-stu-id="64d8d-117">If you are unfamiliar with basic concepts of authentication in Azure AD, read this section.</span></span> <span data-ttu-id="64d8d-118">Ellenkező esetben előfordulhat, hogy kihagyni kívánt le a [alkalmazástípusok és forgatókönyvek](#application-types-and-scenarios).</span><span class="sxs-lookup"><span data-stu-id="64d8d-118">Otherwise, you may want to skip down to [Application Types and Scenarios](#application-types-and-scenarios).</span></span>

<span data-ttu-id="64d8d-119">Mérlegeljük, a lehető legegyszerűbb eset, ahol szükség-e identitás: a felhasználó böngészőben nem hitelesíti a webalkalmazásokhoz.</span><span class="sxs-lookup"><span data-stu-id="64d8d-119">Let’s consider the most basic scenario where identity is required: a user in a web browser needs to authenticate to a web application.</span></span> <span data-ttu-id="64d8d-120">Ebben a forgatókönyvben a nagyobb részletes leírását lásd a [webböngészőt a webes alkalmazás](#web-browser-to-web-application) szakaszában, de a bemutatják, a képességek az Azure AD és a forgatókönyv működése conceptualize hasznos kiindulási pont.</span><span class="sxs-lookup"><span data-stu-id="64d8d-120">This scenario is described in greater detail in the [Web Browser to Web Application](#web-browser-to-web-application) section, but it’s a useful starting point to illustrate the capabilities of Azure AD and conceptualize how the scenario works.</span></span> <span data-ttu-id="64d8d-121">Vegye figyelembe az alábbi ábrán a forgatókönyv:</span><span class="sxs-lookup"><span data-stu-id="64d8d-121">Consider the following diagram for this scenario:</span></span>

![Bejelentkezés a webes alkalmazás áttekintése](./media/active-directory-authentication-scenarios/basics_of_auth_in_aad.png)

<span data-ttu-id="64d8d-123">A fenti ábrának szem előtt, az itt található különböző összetevőinek ismernie kell:</span><span class="sxs-lookup"><span data-stu-id="64d8d-123">With the diagram above in mind, here’s what you need to know about its various components:</span></span>

* <span data-ttu-id="64d8d-124">Az Azure AD az identitásszolgáltató felelős a felhasználók és az alkalmazásokat, amelyek a szervezetek könyvtárában identitásának ellenőrzésére, és végső soron a biztonsági jogkivonatokat ezen felhasználók és az alkalmazások sikeres hitelesítés után kiadása.</span><span class="sxs-lookup"><span data-stu-id="64d8d-124">Azure AD is the identity provider, responsible for verifying the identity of users and applications that exist in an organization’s directory, and ultimately issuing security tokens upon successful authentication of those users and applications.</span></span>
* <span data-ttu-id="64d8d-125">Olyan alkalmazás, amely az Azure AD hitelesítési kihelyező szeretne regisztrálni kell az Azure AD, ami regisztrálja, és egyedileg azonosítja az alkalmazást a címtárban.</span><span class="sxs-lookup"><span data-stu-id="64d8d-125">An application that wants to outsource authentication to Azure AD must be registered in Azure AD, which registers and uniquely identifies the app in the directory.</span></span>
* <span data-ttu-id="64d8d-126">A fejlesztők a nyílt forráskódú az Azure AD hitelesítési könyvtárat a hitelesítés a protokoll alfolyamatot kezelnek, megkönnyítése.</span><span class="sxs-lookup"><span data-stu-id="64d8d-126">Developers can use the open source Azure AD authentication libraries to make authentication easy by handling the protocol details for you.</span></span> <span data-ttu-id="64d8d-127">Lásd: [Azure Active Directory hitelesítési Kódtárai](active-directory-authentication-libraries.md) további információt.</span><span class="sxs-lookup"><span data-stu-id="64d8d-127">See [Azure Active Directory Authentication Libraries](active-directory-authentication-libraries.md) for more information.</span></span>

<span data-ttu-id="64d8d-128">• A felhasználó hitelesítése után, az alkalmazásnak ellenőriznie kell a felhasználó biztonsági jogkivonat biztosításához, hogy a hitelesítés sikerült a tervezett felek számára.</span><span class="sxs-lookup"><span data-stu-id="64d8d-128">• Once a user has been authenticated, the application must validate the user’s security token to ensure that authentication was successful for the intended parties.</span></span> <span data-ttu-id="64d8d-129">A fejlesztők a megadott hitelesítési könyvtárat a bármely jogkivonat az Azure AD, beleértve a JSON Web Tokens (JWT) vagy a SAML 2.0-s érvényességének kezelésére.</span><span class="sxs-lookup"><span data-stu-id="64d8d-129">Developers can use the provided authentication libraries to handle validation of any token from Azure AD, including JSON Web Tokens (JWT) or SAML 2.0.</span></span> <span data-ttu-id="64d8d-130">Ha azt szeretné, manuálisan érvényességi végrehajtásához, tekintse meg a [JWT jogkivonat-kezelő](https://msdn.microsoft.com/library/dn205065.aspx) dokumentációját.</span><span class="sxs-lookup"><span data-stu-id="64d8d-130">If you want to perform validation manually, see the [JWT Token Handler](https://msdn.microsoft.com/library/dn205065.aspx) documentation.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="64d8d-131">Az Azure AD nyilvános kulcsú hitelesítésen használja a jogkivonatok aláírásához, és győződjön meg arról, hogy azok érvényesek.</span><span class="sxs-lookup"><span data-stu-id="64d8d-131">Azure AD uses public key cryptography to sign tokens and verify that they are valid.</span></span> <span data-ttu-id="64d8d-132">Lásd: [fontos információk kapcsolatos aláírási kulcs átfordulási az Azure AD](active-directory-signing-key-rollover.md) lévő szükséges logika további információt az alkalmazásban, annak érdekében, hogy mindig frissül a legfrissebb kulcsokkal kell rendelkeznie.</span><span class="sxs-lookup"><span data-stu-id="64d8d-132">See [Important Information About Signing Key Rollover in Azure AD](active-directory-signing-key-rollover.md) for more information on the necessary logic you must have in your application to ensure it’s always updated with the latest keys.</span></span>
> 
> 

<span data-ttu-id="64d8d-133">• A kérelmeit és válaszait a hitelesítési folyamathoz határozzák meg a hitelesítési protokoll, amelyet használt, például az OAuth 2.0, az OpenID Connect, vagy a WS-Federation, SAML 2.0-s.</span><span class="sxs-lookup"><span data-stu-id="64d8d-133">• The flow of requests and responses for the authentication process is determined by the authentication protocol that was used, such as OAuth 2.0, OpenID Connect, WS-Federation, or SAML 2.0.</span></span> <span data-ttu-id="64d8d-134">Ezek a protokollok részletes ismertetése a [Azure Active Directory hitelesítési protokolljai](active-directory-authentication-protocols.md) témakör és az alábbi szakaszokban.</span><span class="sxs-lookup"><span data-stu-id="64d8d-134">These protocols are discussed in more detail in the [Azure Active Directory Authentication Protocols](active-directory-authentication-protocols.md) topic and in the sections below.</span></span>

> [!NOTE]
> <span data-ttu-id="64d8d-135">Az Azure AD támogatja az OAuth 2.0-s, és OpenID Connect szabványok, amelyek nagy mennyiségű használja a tulajdonosi jogkivonatok, beleértve a tulajdonosi jogkivonatok JWTs-ként.</span><span class="sxs-lookup"><span data-stu-id="64d8d-135">Azure AD supports the OAuth 2.0 and OpenID Connect standards that make extensive use of bearer tokens, including bearer tokens represented as JWTs.</span></span> <span data-ttu-id="64d8d-136">Egy tulajdonosi jogkivonatot egy egyszerűsített biztonsági jogkivonatot, amely védett erőforrásokhoz való hozzáférést a "tulajdonos".</span><span class="sxs-lookup"><span data-stu-id="64d8d-136">A bearer token is a lightweight security token that grants the “bearer” access to a protected resource.</span></span> <span data-ttu-id="64d8d-137">Abban az értelemben a "tulajdonos", amely a token is jelenthet félre.</span><span class="sxs-lookup"><span data-stu-id="64d8d-137">In this sense, the “bearer” is any party that can present the token.</span></span> <span data-ttu-id="64d8d-138">Egy entitás először hitelesítenie kell magát a tulajdonosi jogkivonattal, fogadni az Azure AD, ha a szükséges lépéseket a rendszer nem hajtja végre a lexikális elem szerepel az átvitel, illetve tárolás biztosításához, ha hozzá, és egy nem kívánt félnek használják.</span><span class="sxs-lookup"><span data-stu-id="64d8d-138">Though a party must first authenticate with Azure AD to receive the bearer token, if the required steps are not taken to secure the token in transmission and storage, it can be intercepted and used by an unintended party.</span></span> <span data-ttu-id="64d8d-139">Míg néhány biztonsági jogkivonatokat egy beépített mechanizmust meggátolja, hogy a nem hitelesített felek használja őket, a tulajdonosi jogkivonatok nem rendelkezik a mechanizmus, és kell szállítani, például a transport layer security (HTTPS) biztonságos csatorna.</span><span class="sxs-lookup"><span data-stu-id="64d8d-139">While some security tokens have a built-in mechanism for preventing unauthorized parties from using them, bearer tokens do not have this mechanism and must be transported in a secure channel such as transport layer security (HTTPS).</span></span> <span data-ttu-id="64d8d-140">Egy tulajdonosi jogkivonatot továbbított szövegként, ha egy man-a a középső támadás segítségével egy rosszindulatú fél jogkivonat és a védett erőforrásokhoz való illetéktelen hozzáférés használni.</span><span class="sxs-lookup"><span data-stu-id="64d8d-140">If a bearer token is transmitted in the clear, a man-in the middle attack can be used by a malicious party to acquire the token and use it for an unauthorized access to a protected resource.</span></span> <span data-ttu-id="64d8d-141">Az azonos biztonsági elveket alkalmazza, ha a tárolást, vagy a gyorsítótárazás tulajdonosi jogkivonatok későbbi használatra.</span><span class="sxs-lookup"><span data-stu-id="64d8d-141">The same security principles apply when storing or caching bearer tokens for later use.</span></span> <span data-ttu-id="64d8d-142">Mindig győződjön meg arról, hogy az alkalmazás továbbítja, és biztonságos módon tárolja a tulajdonosi jogkivonatokhoz.</span><span class="sxs-lookup"><span data-stu-id="64d8d-142">Always ensure that your application transmits and stores bearer tokens in a secure manner.</span></span> <span data-ttu-id="64d8d-143">További biztonsági szempontok a tulajdonosi jogkivonatok, lásd: [RFC 6750 szakasz 5](http://tools.ietf.org/html/rfc6750).</span><span class="sxs-lookup"><span data-stu-id="64d8d-143">For more security considerations on bearer tokens, see [RFC 6750 Section 5](http://tools.ietf.org/html/rfc6750).</span></span>
> 
> 

<span data-ttu-id="64d8d-144">Most, hogy az alapvető áttekintést, olvassa el a kiépítési működésének megismerése az Azure ad-ben az alábbi szakaszokat, és a gyakori forgatókönyvek az Azure AD támogatja.</span><span class="sxs-lookup"><span data-stu-id="64d8d-144">Now that you have an overview of the basics, read the sections below to understand how provisioning works in Azure AD and the common scenarios Azure AD supports.</span></span>

## <a name="claims-in-azure-ad-security-tokens"></a><span data-ttu-id="64d8d-145">Az Azure AD biztonsági jogkivonatokat a jogcím</span><span class="sxs-lookup"><span data-stu-id="64d8d-145">Claims in Azure AD Security Tokens</span></span>
<span data-ttu-id="64d8d-146">Az Azure AD által kiadott biztonsági jogkivonatokat jogcímeket vagy helyességi feltételek hitelesítése tulajdonos információt tartalmaz.</span><span class="sxs-lookup"><span data-stu-id="64d8d-146">Security tokens issued by Azure AD contain claims, or assertions of information about the subject that has been authenticated.</span></span> <span data-ttu-id="64d8d-147">Ezeket a jogcímeket a különböző feladatokhoz használhatják az alkalmazást.</span><span class="sxs-lookup"><span data-stu-id="64d8d-147">These claims can be used by the application for various tasks.</span></span> <span data-ttu-id="64d8d-148">Például felhasználásuk ellenőrzése a jogkivonat, a tulajdonos directory-bérlő azonosíthatja, felhasználói információk megjelenítése, megállapítása a tulajdonos, és így tovább.</span><span class="sxs-lookup"><span data-stu-id="64d8d-148">For example, they can be used to validate the token, identify the subject's directory tenant, display user information, determine the subject's authorization, and so on.</span></span> <span data-ttu-id="64d8d-149">A jogcímeket bármely adott biztonsági jogkivonat szerepel token, a felhasználó és az alkalmazás konfigurációját hitelesítéséhez használt hitelesítő adat típusának típusától függenek.</span><span class="sxs-lookup"><span data-stu-id="64d8d-149">The claims present in any given security token are dependent upon the type of token, the type of credential used to authenticate the user, and the application configuration.</span></span> <span data-ttu-id="64d8d-150">Minden Azure AD által kibocsátott jogcím típusú rövid leírása az alábbi táblázatban találhatók.</span><span class="sxs-lookup"><span data-stu-id="64d8d-150">A brief description of each type of claim emitted by Azure AD is provided in the table below.</span></span> <span data-ttu-id="64d8d-151">További információkért tekintse meg [támogatott jogkivonat és jogcímtípusok](active-directory-token-and-claims.md).</span><span class="sxs-lookup"><span data-stu-id="64d8d-151">For more information, refer to [Supported Token and Claim Types](active-directory-token-and-claims.md).</span></span>

| <span data-ttu-id="64d8d-152">Jogcím</span><span class="sxs-lookup"><span data-stu-id="64d8d-152">Claim</span></span> | <span data-ttu-id="64d8d-153">Leírás</span><span class="sxs-lookup"><span data-stu-id="64d8d-153">Description</span></span> |
| --- | --- |
| <span data-ttu-id="64d8d-154">Alkalmazásazonosító</span><span class="sxs-lookup"><span data-stu-id="64d8d-154">Application ID</span></span> |<span data-ttu-id="64d8d-155">Azonosítja az alkalmazást, amely a token-t használja.</span><span class="sxs-lookup"><span data-stu-id="64d8d-155">Identifies the application that is using the token.</span></span> |
| <span data-ttu-id="64d8d-156">Célközönség</span><span class="sxs-lookup"><span data-stu-id="64d8d-156">Audience</span></span> |<span data-ttu-id="64d8d-157">A jogkivonat az célja, hogy a címzett erőforrás azonosítja.</span><span class="sxs-lookup"><span data-stu-id="64d8d-157">Identifies the recipient resource the token is intended for.</span></span> |
| <span data-ttu-id="64d8d-158">Alkalmazás hitelesítési környezeti osztályait ismertető dokumentációban</span><span class="sxs-lookup"><span data-stu-id="64d8d-158">Application Authentication Context Class Reference</span></span> |<span data-ttu-id="64d8d-159">Azt jelzi, hogy az ügyfél volt hitelesített (nyilvános ügyfél és a bizalmas ügyfél).</span><span class="sxs-lookup"><span data-stu-id="64d8d-159">Indicates how the client was authenticated (public client vs. confidential client).</span></span> |
| <span data-ttu-id="64d8d-160">Azonnali hitelesítés</span><span class="sxs-lookup"><span data-stu-id="64d8d-160">Authentication Instant</span></span> |<span data-ttu-id="64d8d-161">A dátum és idő, amikor a hitelesítési történt rögzíti.</span><span class="sxs-lookup"><span data-stu-id="64d8d-161">Records the date and time when the authentication occurred.</span></span> |
| <span data-ttu-id="64d8d-162">Hitelesítési módszer</span><span class="sxs-lookup"><span data-stu-id="64d8d-162">Authentication Method</span></span> |<span data-ttu-id="64d8d-163">Azt jelzi, hogy a jogkivonat tárgya hitelesítésének módját (jelszó, tanúsítvány, stb.).</span><span class="sxs-lookup"><span data-stu-id="64d8d-163">Indicates how the subject of the token was authenticated (password, certificate, etc.).</span></span> |
| <span data-ttu-id="64d8d-164">Utónév</span><span class="sxs-lookup"><span data-stu-id="64d8d-164">First Name</span></span> |<span data-ttu-id="64d8d-165">Az Azure AD-készlet biztosít a felhasználó utóneve.</span><span class="sxs-lookup"><span data-stu-id="64d8d-165">Provides the given name of the user as set in Azure AD.</span></span> |
| <span data-ttu-id="64d8d-166">Csoportok</span><span class="sxs-lookup"><span data-stu-id="64d8d-166">Groups</span></span> |<span data-ttu-id="64d8d-167">A felhasználó tagja objektum azonosítók az Azure AD-csoportot tartalmaz.</span><span class="sxs-lookup"><span data-stu-id="64d8d-167">Contains object Ids of Azure AD groups the user is a member of.</span></span> |
| <span data-ttu-id="64d8d-168">Identitásszolgáltató</span><span class="sxs-lookup"><span data-stu-id="64d8d-168">Identity Provider</span></span> |<span data-ttu-id="64d8d-169">Az identitásszolgáltató, amely a token tárgya hitelesített rögzíti.</span><span class="sxs-lookup"><span data-stu-id="64d8d-169">Records the identity provider that authenticated the subject of the token.</span></span> |
| <span data-ttu-id="64d8d-170">Ki:</span><span class="sxs-lookup"><span data-stu-id="64d8d-170">Issued At</span></span> |<span data-ttu-id="64d8d-171">Amellyel a token adta ki, gyakran használt token frissesség idejét rögzíti.</span><span class="sxs-lookup"><span data-stu-id="64d8d-171">Records the time at which the token was issued, often used for token freshness.</span></span> |
| <span data-ttu-id="64d8d-172">Kiállító</span><span class="sxs-lookup"><span data-stu-id="64d8d-172">Issuer</span></span> |<span data-ttu-id="64d8d-173">Az STS, amely a token, valamint az Azure AD-bérlő kibocsátott azonosítja.</span><span class="sxs-lookup"><span data-stu-id="64d8d-173">Identifies the STS that emitted the token as well as the Azure AD tenant.</span></span> |
| <span data-ttu-id="64d8d-174">Vezetéknév</span><span class="sxs-lookup"><span data-stu-id="64d8d-174">Last Name</span></span> |<span data-ttu-id="64d8d-175">Az Azure AD-készlet biztosít a felhasználó vezetékneve.</span><span class="sxs-lookup"><span data-stu-id="64d8d-175">Provides the surname of the user as set in Azure AD.</span></span> |
| <span data-ttu-id="64d8d-176">Név</span><span class="sxs-lookup"><span data-stu-id="64d8d-176">Name</span></span> |<span data-ttu-id="64d8d-177">Emberi olvasható érték, amely azonosítja a token tárgya biztosít.</span><span class="sxs-lookup"><span data-stu-id="64d8d-177">Provides a human readable value that identifies the subject of the token.</span></span> |
| <span data-ttu-id="64d8d-178">Objektum azonosítója</span><span class="sxs-lookup"><span data-stu-id="64d8d-178">Object Id</span></span> |<span data-ttu-id="64d8d-179">Az Azure ad-ben a tulajdonos nem módosítható, egyedi azonosítót tartalmaz.</span><span class="sxs-lookup"><span data-stu-id="64d8d-179">Contains an immutable, unique identifier of the subject in Azure AD.</span></span> |
| <span data-ttu-id="64d8d-180">Szerepkörök</span><span class="sxs-lookup"><span data-stu-id="64d8d-180">Roles</span></span> |<span data-ttu-id="64d8d-181">Az Azure AD alkalmazás-szerepkörök, amelyek a felhasználó számára engedélyezett rövid nevét tartalmazza.</span><span class="sxs-lookup"><span data-stu-id="64d8d-181">Contains friendly names of Azure AD Application Roles that the user has been granted.</span></span> |
| <span data-ttu-id="64d8d-182">Hatókör</span><span class="sxs-lookup"><span data-stu-id="64d8d-182">Scope</span></span> |<span data-ttu-id="64d8d-183">Azt jelzi, hogy az ügyfélalkalmazás számára megadott engedélyeket.</span><span class="sxs-lookup"><span data-stu-id="64d8d-183">Indicates the permissions granted to the client application.</span></span> |
| <span data-ttu-id="64d8d-184">Tárgy</span><span class="sxs-lookup"><span data-stu-id="64d8d-184">Subject</span></span> |<span data-ttu-id="64d8d-185">Azt jelzi, hogy a rendszerbiztonsági tag, amelyekről a token állításokat információkat.</span><span class="sxs-lookup"><span data-stu-id="64d8d-185">Indicates the principal about which the token asserts information.</span></span> |
| <span data-ttu-id="64d8d-186">Bérlő azonosítója</span><span class="sxs-lookup"><span data-stu-id="64d8d-186">Tenant Id</span></span> |<span data-ttu-id="64d8d-187">A directory-bérlő a jogkivonat kiállító nem módosítható, egyedi azonosítót tartalmaz.</span><span class="sxs-lookup"><span data-stu-id="64d8d-187">Contains an immutable, unique identifier of the directory tenant that issued the token.</span></span> |
| <span data-ttu-id="64d8d-188">A jogkivonatok élettartama</span><span class="sxs-lookup"><span data-stu-id="64d8d-188">Token Lifetime</span></span> |<span data-ttu-id="64d8d-189">Meghatározza a időtartam alatt, amelyen belül a lexikális elem érvénytelen.</span><span class="sxs-lookup"><span data-stu-id="64d8d-189">Defines the time interval within which a token is valid.</span></span> |
| <span data-ttu-id="64d8d-190">Egyszerű felhasználónév</span><span class="sxs-lookup"><span data-stu-id="64d8d-190">User Principal Name</span></span> |<span data-ttu-id="64d8d-191">A felhasználó egyszerű felhasználóneve, a tulajdonos tartalmazza.</span><span class="sxs-lookup"><span data-stu-id="64d8d-191">Contains the user principal name of the subject.</span></span> |
| <span data-ttu-id="64d8d-192">Verzió</span><span class="sxs-lookup"><span data-stu-id="64d8d-192">Version</span></span> |<span data-ttu-id="64d8d-193">A token a verziószámát tartalmazza.</span><span class="sxs-lookup"><span data-stu-id="64d8d-193">Contains the version number of the token.</span></span> |

## <a name="basics-of-registering-an-application-in-azure-ad"></a><span data-ttu-id="64d8d-194">Egy alkalmazás regisztrálása az Azure AD alapjai</span><span class="sxs-lookup"><span data-stu-id="64d8d-194">Basics of Registering an Application in Azure AD</span></span>
<span data-ttu-id="64d8d-195">Bármely alkalmazás, amely az Azure AD hitelesítési outsources regisztrálni kell a könyvtárban található.</span><span class="sxs-lookup"><span data-stu-id="64d8d-195">Any application that outsources authentication to Azure AD must be registered in a directory.</span></span> <span data-ttu-id="64d8d-196">Ez a lépés magában foglalja a szólítja fel az Azure AD a alkalmazásról, beleértve az URL-címet, akkor rendelkezik helyét, küldje a választ az URI-t az alkalmazást, és több azonosítása a hitelesítés után az URL-cím.</span><span class="sxs-lookup"><span data-stu-id="64d8d-196">This step involves telling Azure AD about your application, including the URL where it’s located, the URL to send replies after authentication, the URI to identify your application, and more.</span></span> <span data-ttu-id="64d8d-197">Ezek az információk néhány főbb okból is szükséges:</span><span class="sxs-lookup"><span data-stu-id="64d8d-197">This information is required for a few key reasons:</span></span>

* <span data-ttu-id="64d8d-198">Az Azure AD alkalmazással történő kommunikációra a bejelentkezéshez vagy cserélő jogkivonatok kezelésekor koordinátát kell.</span><span class="sxs-lookup"><span data-stu-id="64d8d-198">Azure AD needs coordinates to communicate with the application when handling sign-on or exchanging tokens.</span></span> <span data-ttu-id="64d8d-199">Ezek közé tartoznak a következők:</span><span class="sxs-lookup"><span data-stu-id="64d8d-199">These include the following:</span></span>
  
  * <span data-ttu-id="64d8d-200">Application ID URI: Az alkalmazás azonosítója.</span><span class="sxs-lookup"><span data-stu-id="64d8d-200">Application ID URI: The identifier for an application.</span></span> <span data-ttu-id="64d8d-201">Ez az érték az Azure AD-hitelesítés során küldött jelzi, hogy melyik alkalmazás a hívó szeretne rendelni egy token.</span><span class="sxs-lookup"><span data-stu-id="64d8d-201">This value is sent to Azure AD during authentication to indicate which application the caller wants a token for.</span></span> <span data-ttu-id="64d8d-202">Emellett ez az érték megtalálható a jogkivonatot, hogy az alkalmazás ismeri a kívánt célkörnyezet volt.</span><span class="sxs-lookup"><span data-stu-id="64d8d-202">Additionally, this value is included in the token so that the application knows it was the intended target.</span></span>
  * <span data-ttu-id="64d8d-203">Válasz URL-CÍMÉT és átirányítási URI-: webes API vagy webalkalmazás esetén a válasz URL-címe: a helyet, amelyhez az Azure AD a hitelesítési válaszra, beleértve a jogkivonatot, ha a hitelesítés sikerült küldi.</span><span class="sxs-lookup"><span data-stu-id="64d8d-203">Reply URL and Redirect URI: In the case of a web API or web application, the Reply URL is the location to which Azure AD will send the authentication response, including a token if authentication was successful.</span></span> <span data-ttu-id="64d8d-204">Esetében a natív alkalmazás átirányítási URI-t egy egyedi azonosítója, amelyhez az Azure AD átirányítja a felhasználói ügynök egy OAuth 2.0-lekérdezésben.</span><span class="sxs-lookup"><span data-stu-id="64d8d-204">In the case of a native application, the Redirect URI is a unique identifier to which Azure AD will redirect the user-agent in an OAuth 2.0 request.</span></span>
  * <span data-ttu-id="64d8d-205">Alkalmazás azonosítója: Az alkalmazás, az alkalmazás regisztrálásakor Azure AD által generált azonosítója.</span><span class="sxs-lookup"><span data-stu-id="64d8d-205">Application ID: The ID for an application, which is generated by Azure AD when the application is registered.</span></span> <span data-ttu-id="64d8d-206">Az engedélyezési kód vagy a token igénylésekor az alkalmazás Azonosítóját és kulcsát kerülnek az Azure AD-hitelesítés során.</span><span class="sxs-lookup"><span data-stu-id="64d8d-206">When requesting an authorization code or token, the Application ID and key are sent to Azure AD during authentication.</span></span>
  * <span data-ttu-id="64d8d-207">Kulcs: A kulcs együtt küldött egy Alkalmazásazonosítót hitelesítéséhez az Azure AD a webes API-hívás.</span><span class="sxs-lookup"><span data-stu-id="64d8d-207">Key: The key that is sent along with a Application ID when authenticating to Azure AD to call a web API.</span></span>
* <span data-ttu-id="64d8d-208">Az Azure AD-nek az alkalmazás a szükséges engedélyekkel, hozzáférhet a címtár adataihoz, a szervezet más alkalmazásokat, és így tovább kell</span><span class="sxs-lookup"><span data-stu-id="64d8d-208">Azure AD needs to ensure the application has the required permissions to access your directory data, other applications in your organization, and so on</span></span>

<span data-ttu-id="64d8d-209">Kiépítés válik tisztább, Miután megismerte a fejlett és az Azure AD integrált alkalmazások két kategóriába sorolhatók:</span><span class="sxs-lookup"><span data-stu-id="64d8d-209">Provisioning becomes clearer when you understand that there are two categories of applications that can be developed and integrated with Azure AD:</span></span>

* <span data-ttu-id="64d8d-210">Bérlői alkalmazások egyszeri: egy bérlő egyetlen alkalmazás használatát az egyik szervezet számára készült.</span><span class="sxs-lookup"><span data-stu-id="64d8d-210">Single tenant application: A single tenant application is intended for use in one organization.</span></span> <span data-ttu-id="64d8d-211">Ezek a általában az üzletági (LoB) alkalmazások a vállalati fejlesztők által írt.</span><span class="sxs-lookup"><span data-stu-id="64d8d-211">These are typically line-of-business (LoB) applications written by an enterprise developer.</span></span> <span data-ttu-id="64d8d-212">Egy bérlő egyetlen alkalmazást csak kell egy címtárban a felhasználók ne férhessenek hozzá, ezért az ennek eredményeként, csak úgy kell létrehozni egy címtárban.</span><span class="sxs-lookup"><span data-stu-id="64d8d-212">A single tenant application only needs to be accessed by users in one directory, and as a result, it only needs to be provisioned in one directory.</span></span> <span data-ttu-id="64d8d-213">Ezek az alkalmazások általában egy fejlesztő a szervezet által regisztrált.</span><span class="sxs-lookup"><span data-stu-id="64d8d-213">These applications are typically registered by a developer in the organization.</span></span>
* <span data-ttu-id="64d8d-214">Több-bérlős alkalmazás: A több-bérlős alkalmazás készült, számos szervezet, nem csak egyetlen szervezet.</span><span class="sxs-lookup"><span data-stu-id="64d8d-214">Multi-tenant application: A multi-tenant application is intended for use in many organizations, not just one organization.</span></span> <span data-ttu-id="64d8d-215">Ezek a független szoftverszállító (ISV) által írt általában szoftver,--szolgáltatás (SaaS) alkalmazások.</span><span class="sxs-lookup"><span data-stu-id="64d8d-215">These are typically software-as-a-service (SaaS) applications written by an independent software vendor (ISV).</span></span> <span data-ttu-id="64d8d-216">Több-bérlős alkalmazásokhoz szükség minden egyes könyvtárban, ahol használni fogják őket, regisztrálja őket a felhasználó vagy a rendszergazda jóváhagyását igénylő lesz.</span><span class="sxs-lookup"><span data-stu-id="64d8d-216">Multi-tenant applications need to be provisioned in each directory where they will be used, which requires user or administrator consent to register them.</span></span> <span data-ttu-id="64d8d-217">A hozzájárulási folyamat akkor kezdődik, amikor egy alkalmazás a könyvtárban van regisztrálva, és a Graph API vagy akár egy másik webes API-k való hozzáférése.</span><span class="sxs-lookup"><span data-stu-id="64d8d-217">This consent process starts when an application has been registered in the directory and is given access to the Graph API or perhaps another web API.</span></span> <span data-ttu-id="64d8d-218">Amikor egy felhasználó vagy egy másik szervezet rendszergazda regisztrál, és használja az alkalmazást, jelenjenek meg ezek egy párbeszédpanelt, amely megjeleníti a az alkalmazás futtatásához szükséges engedélyekkel.</span><span class="sxs-lookup"><span data-stu-id="64d8d-218">When a user or administrator from a different organization signs up to use the application, they are presented with a dialog that displays the permissions the application requires.</span></span> <span data-ttu-id="64d8d-219">A felhasználó vagy a rendszergazda is majd hozzájárul az alkalmazásról, így az alkalmazás hozzáférést biztosít a megadott adatokat, és végül regisztrálja az alkalmazást a címtárban.</span><span class="sxs-lookup"><span data-stu-id="64d8d-219">The user or administrator can then consent to the application, which gives the application access to the stated data, and finally registers the application in their directory.</span></span> <span data-ttu-id="64d8d-220">További információkért lásd: [hozzájárulás keretében áttekintése](active-directory-integrating-applications.md#overview-of-the-consent-framework).</span><span class="sxs-lookup"><span data-stu-id="64d8d-220">For more information, see [Overview of the Consent Framework](active-directory-integrating-applications.md#overview-of-the-consent-framework).</span></span>

<span data-ttu-id="64d8d-221">További megfontolásokat helyett egy bérlő egyetlen alkalmazás egy több-bérlős alkalmazások fejlesztése során merülhetnek fel.</span><span class="sxs-lookup"><span data-stu-id="64d8d-221">Some additional considerations arise when developing a multi-tenant application instead of a single tenant application.</span></span> <span data-ttu-id="64d8d-222">Például, ha az alkalmazás érhető el a felhasználók számára több könyvtárban, szeretné meghatározni, melyik bérlői is a.</span><span class="sxs-lookup"><span data-stu-id="64d8d-222">For example, if you are making your application available to users in multiple directories, you need a mechanism to determine which tenant they’re in.</span></span> <span data-ttu-id="64d8d-223">Egy egybérlős alkalmazást kell csak egy felhasználó a saját címtárban keresse meg, amíg egy több-bérlős alkalmazást az Azure AD egy adott felhasználó az összes könyvtár azonosítania kell.</span><span class="sxs-lookup"><span data-stu-id="64d8d-223">A single tenant application only needs to look in its own directory for a user, while a multi-tenant application needs to identify a specific user from all the directories in Azure AD.</span></span> <span data-ttu-id="64d8d-224">Ennek a feladatnak az Azure AD egy közös hitelesítési végpontot, ahol több-bérlős alkalmazásokat lehet konfigurálni a bejelentkezési kérelmek, helyett egy bérlő-specifikus végpontot biztosít.</span><span class="sxs-lookup"><span data-stu-id="64d8d-224">To accomplish this task, Azure AD provides a common authentication endpoint where any multi-tenant application can direct sign-in requests, instead of a tenant-specific endpoint.</span></span> <span data-ttu-id="64d8d-225">Ehhez a végponthoz összes könyvtár https://login.microsoftonline.com/common az Azure ad-ben, mivel lehet, hogy a bérlő-specifikus végpont https://login.microsoftonline.com/contoso.onmicrosoft.com. A közös végpont különösen fontos figyelembe venni, amikor az alkalmazás fejlesztése, mert több bérlő kezelésének bejelentkezési, kijelentkezési, és a jogkivonatok érvényesség-ellenőrzése során szükséges logika lesz szüksége.</span><span class="sxs-lookup"><span data-stu-id="64d8d-225">This endpoint is https://login.microsoftonline.com/common for all directories in Azure AD, whereas a tenant-specific endpoint might be https://login.microsoftonline.com/contoso.onmicrosoft.com. The common endpoint is especially important to consider when developing your application because you’ll need the necessary logic to handle multiple tenants during sign-in, sign-out, and token validation.</span></span>

<span data-ttu-id="64d8d-226">Ha jelenleg egy egybérlős alkalmazást fejleszt, de számos szervezet rendelkezésére bocsátja, könnyen módosításokat végezheti el az alkalmazás és az Azure AD-konfigurációjában abba, hogy több-bérlős képes.</span><span class="sxs-lookup"><span data-stu-id="64d8d-226">If you are currently developing a single tenant application but want to make it available to many organizations, you can easily make changes to the application and its configuration in Azure AD to make it multi-tenant capable.</span></span> <span data-ttu-id="64d8d-227">Emellett az Azure AD használ az azonos aláírási kulcs összes jogkivonatokat található összes, hogy meg van adva egy bérlő egyetlen vagy több-bérlős alkalmazás hitelesítési.</span><span class="sxs-lookup"><span data-stu-id="64d8d-227">In addition, Azure AD uses the same signing key for all tokens in all directories, whether you are providing authentication in a single tenant or multi-tenant application.</span></span>

<span data-ttu-id="64d8d-228">A jelen dokumentumban szereplő minden egyes forgatókönyv egy alterület, mely leírja az üzembe helyezési követelményei tartalmazza.</span><span class="sxs-lookup"><span data-stu-id="64d8d-228">Each scenario listed in this document includes a sub-section that describes its provisioning requirements.</span></span> <span data-ttu-id="64d8d-229">Részletesebb információ a kiépítési az Azure AD alkalmazás- és egyetlen és több-bérlős alkalmazások közötti különbségek: [alkalmazások integrálása az Azure Active Directoryval](active-directory-integrating-applications.md) további információt.</span><span class="sxs-lookup"><span data-stu-id="64d8d-229">For more in-depth information about provisioning an application in Azure AD and the differences between single and multi-tenant applications, see [Integrating Applications with Azure Active Directory](active-directory-integrating-applications.md) for more information.</span></span> <span data-ttu-id="64d8d-230">Továbbra is az Azure AD alkalmazás szabhatják megértéséhez olvasása.</span><span class="sxs-lookup"><span data-stu-id="64d8d-230">Continue reading to understand the common application scenarios in Azure AD.</span></span>

## <a name="application-types-and-scenarios"></a><span data-ttu-id="64d8d-231">Alkalmazástípusok és forgatókönyvek</span><span class="sxs-lookup"><span data-stu-id="64d8d-231">Application Types and Scenarios</span></span>
<span data-ttu-id="64d8d-232">Minden ebben a dokumentumban leírt forgatókönyv fejleszthetők a különböző nyelvekhez és platformokhoz használatával.</span><span class="sxs-lookup"><span data-stu-id="64d8d-232">Each of the scenarios described in this document can be developed using various languages and platforms.</span></span> <span data-ttu-id="64d8d-233">Azok az összes üzemelnek elérhető teljes Kódminták a [mintakódok útmutató](active-directory-code-samples.md), vagy közvetlenül a megfelelő [minta GitHub-adattárak](https://github.com/Azure-Samples?utf8=%E2%9C%93&query=active-directory).</span><span class="sxs-lookup"><span data-stu-id="64d8d-233">They are all backed by complete code samples which are available in our [Code Samples guide](active-directory-code-samples.md), or directly from the corresponding [GitHub sample repositories](https://github.com/Azure-Samples?utf8=%E2%9C%93&query=active-directory).</span></span> <span data-ttu-id="64d8d-234">Emellett ha az alkalmazásnak egy adott vagy egy végpontok közötti forgatókönyv szegmens, a legtöbb esetben funkció felveheti egymástól függetlenül.</span><span class="sxs-lookup"><span data-stu-id="64d8d-234">In addition, if your application needs a specific piece or segment of an end-to-end scenario, in most cases that functionality can be added independently.</span></span> <span data-ttu-id="64d8d-235">Például ha egy natív alkalmazás, amely behívja a webes API-k, egyszerűen hozzáadhatja a webes API-t is meghívó webalkalmazás.</span><span class="sxs-lookup"><span data-stu-id="64d8d-235">For example, if you have a native application that calls a web API, you can easily add a web application that also calls the web API.</span></span> <span data-ttu-id="64d8d-236">A következő diagram azt ábrázolja, ezek a forgatókönyvek és alkalmazástípusokat, és hogyan felveheti különböző összetevőket:</span><span class="sxs-lookup"><span data-stu-id="64d8d-236">The following diagram illustrates these scenarios and application types, and how different components can be added:</span></span>

![Alkalmazástípusok és forgatókönyvek](./media/active-directory-authentication-scenarios/application_types_and_scenarios.png)

<span data-ttu-id="64d8d-238">Az Azure AD által támogatott öt elsődleges az alkalmazás-forgatókönyvek a következők:</span><span class="sxs-lookup"><span data-stu-id="64d8d-238">These are the five primary application scenarios supported by Azure AD:</span></span>

* <span data-ttu-id="64d8d-239">[Böngészőben webalkalmazásokhoz](#web-browser-to-web-application): A felhasználó bejelentkezni egy webalkalmazást, amelyet az Azure AD számára szükséges.</span><span class="sxs-lookup"><span data-stu-id="64d8d-239">[Web Browser to Web Application](#web-browser-to-web-application): A user needs to sign in to a web application that is secured by Azure AD.</span></span>
* <span data-ttu-id="64d8d-240">[Egyetlen lap alkalmazás (SPA)](#single-page-application-spa): A felhasználó bejelentkezni egy egyoldalas alkalmazást, amelyet az Azure AD számára szükséges.</span><span class="sxs-lookup"><span data-stu-id="64d8d-240">[Single Page Application (SPA)](#single-page-application-spa): A user needs to sign in to a single page application that is secured by Azure AD.</span></span>
* <span data-ttu-id="64d8d-241">[Webes API a natív alkalmazás](#native-application-to-web-api): egy natív alkalmazást egy telefon, a tábla vagy a számítógépen futó kell hitelesíteni a felhasználót, hogy egy webes API-t az Azure AD által védett erőforrások lekérése.</span><span class="sxs-lookup"><span data-stu-id="64d8d-241">[Native Application to Web API](#native-application-to-web-api): A native application that runs on a phone, tablet, or PC needs to authenticate a user to get resources from a web API that is secured by Azure AD.</span></span>
* <span data-ttu-id="64d8d-242">[Webes API-webalkalmazás](#web-application-to-web-api): webalkalmazás kell egy webes API-t az Azure AD által védett erőforrások lekérése.</span><span class="sxs-lookup"><span data-stu-id="64d8d-242">[Web Application to Web API](#web-application-to-web-api): A web application needs to get resources from a web API secured by Azure AD.</span></span>
* <span data-ttu-id="64d8d-243">[Démon vagy webes API kiszolgálói alkalmazás](#daemon-or-server-application-to-web-api): egy démon alkalmazást vagy egy kiszolgálói alkalmazás webes felhasználói felület nélkül kell egy webes API-t az Azure AD által védett erőforrások lekérése.</span><span class="sxs-lookup"><span data-stu-id="64d8d-243">[Daemon or Server Application to Web API](#daemon-or-server-application-to-web-api): A daemon application or a server application with no web user interface needs to get resources from a web API secured by Azure AD.</span></span>

### <a name="web-browser-to-web-application"></a><span data-ttu-id="64d8d-244">Webalkalmazás webböngészőben</span><span class="sxs-lookup"><span data-stu-id="64d8d-244">Web Browser to Web Application</span></span>
<span data-ttu-id="64d8d-245">Ez a szakasz olyan alkalmazás, amely hitelesíti a felhasználót egy böngészőben webalkalmazásokhoz ismerteti.</span><span class="sxs-lookup"><span data-stu-id="64d8d-245">This section describes an application that authenticates a user in a web browser to a web application.</span></span> <span data-ttu-id="64d8d-246">Ebben a forgatókönyvben a webes alkalmazás a felhasználó böngészőben való bejelentkezéshez őket az Azure AD irányítja.</span><span class="sxs-lookup"><span data-stu-id="64d8d-246">In this scenario, the web application directs the user’s browser to sign them in to Azure AD.</span></span> <span data-ttu-id="64d8d-247">Az Azure AD tartalmaz egy biztonsági jogkivonatba a felhasználóval kapcsolatos jogcímek a felhasználó böngészőben a bejelentkezési választ ad.</span><span class="sxs-lookup"><span data-stu-id="64d8d-247">Azure AD returns a sign-in response through the user’s browser, which contains claims about the user in a security token.</span></span> <span data-ttu-id="64d8d-248">Ebben a forgatókönyvben támogatja a bejelentkezést a WS-Federation, SAML 2.0 és OpenID Connect protokollok használatával.</span><span class="sxs-lookup"><span data-stu-id="64d8d-248">This scenario supports sign-on using the WS-Federation, SAML 2.0, and OpenID Connect protocols.</span></span>

#### <a name="diagram"></a><span data-ttu-id="64d8d-249">Ábra</span><span class="sxs-lookup"><span data-stu-id="64d8d-249">Diagram</span></span>
![Webes alkalmazás böngészőben hitelesítési folyamata](./media/active-directory-authentication-scenarios/web_browser_to_web_api.png)

#### <a name="description-of-protocol-flow"></a><span data-ttu-id="64d8d-251">Protokoll folyamat leírása</span><span class="sxs-lookup"><span data-stu-id="64d8d-251">Description of Protocol Flow</span></span>
1. <span data-ttu-id="64d8d-252">Amikor a felhasználó felkeresi a alkalmazást, és jelentkezzen be, a rendszer visszairányítja a hitelesítési végpont bejelentkezési kérelem keresztül az Azure ad-ben.</span><span class="sxs-lookup"><span data-stu-id="64d8d-252">When a user visits the application and needs to sign in, they are redirected via a sign-in request to the authentication endpoint in Azure AD.</span></span>
2. <span data-ttu-id="64d8d-253">A felhasználó bejelentkezik a bejelentkezési oldalon.</span><span class="sxs-lookup"><span data-stu-id="64d8d-253">The user signs in on the sign-in page.</span></span>
3. <span data-ttu-id="64d8d-254">Sikeres hitelesítés esetén az Azure AD egy hitelesítési jogkivonatot hoz létre, és a bejelentkezési választ küld az alkalmazás válasz URL-címet adott meg az Azure portálon.</span><span class="sxs-lookup"><span data-stu-id="64d8d-254">If authentication is successful, Azure AD creates an authentication token and returns a sign-in response to the application’s Reply URL that was configured in the Azure Portal.</span></span> <span data-ttu-id="64d8d-255">Termelési alkalmazások esetében a válasz URL-CÍMEN HTTPS kell lennie.</span><span class="sxs-lookup"><span data-stu-id="64d8d-255">For a production application, this Reply URL should be HTTPS.</span></span> <span data-ttu-id="64d8d-256">A visszaküldött jogkivonat felhasználói és az Azure AD szükséges jogcímeket, az alkalmazás ellenőrzése a jogkivonat tartalmazza.</span><span class="sxs-lookup"><span data-stu-id="64d8d-256">The returned token includes claims about the user and Azure AD that are required by the application to validate the token.</span></span>
4. <span data-ttu-id="64d8d-257">Az alkalmazás használatával egy nyilvános aláírási kulcs és a kiállítói információk érhetők el az összevonási metaadatok dokumentum az Azure AD érvényesíti a jogkivonatot.</span><span class="sxs-lookup"><span data-stu-id="64d8d-257">The application validates the token by using a public signing key and issuer information available at the federation metadata document for Azure AD.</span></span> <span data-ttu-id="64d8d-258">Után az alkalmazás érvényesíti a jogkivonatot, az Azure AD egy új munkamenet a felhasználó indul.</span><span class="sxs-lookup"><span data-stu-id="64d8d-258">After the application validates the token, Azure AD starts a new session with the user.</span></span> <span data-ttu-id="64d8d-259">A munkamenet a felhasználó az alkalmazás eléréséhez, amíg le nem jár.</span><span class="sxs-lookup"><span data-stu-id="64d8d-259">This session allows the user to access the application until it expires.</span></span>

#### <a name="code-samples"></a><span data-ttu-id="64d8d-260">Kódminták</span><span class="sxs-lookup"><span data-stu-id="64d8d-260">Code Samples</span></span>
<span data-ttu-id="64d8d-261">A Kódminták talál webböngésző webalkalmazás forgatókönyvek.</span><span class="sxs-lookup"><span data-stu-id="64d8d-261">See the code samples for Web Browser to Web Application scenarios.</span></span> <span data-ttu-id="64d8d-262">És foglalkozzon gyakran--jelenleg felvenni új minták folyamatosan.</span><span class="sxs-lookup"><span data-stu-id="64d8d-262">And, check back frequently -- we add new samples all the time.</span></span> <span data-ttu-id="64d8d-263">[Böngészőben webalkalmazásokhoz](active-directory-code-samples.md#web-browser-to-web-application).</span><span class="sxs-lookup"><span data-stu-id="64d8d-263">[Web Browser to Web Application](active-directory-code-samples.md#web-browser-to-web-application).</span></span>

#### <a name="registering"></a><span data-ttu-id="64d8d-264">Regisztrálása</span><span class="sxs-lookup"><span data-stu-id="64d8d-264">Registering</span></span>
* <span data-ttu-id="64d8d-265">Egybérlős: Ha egy alkalmazás csak a szervezet számára, regisztrálnia kell azt a vállalati címtárban az Azure portál használatával.</span><span class="sxs-lookup"><span data-stu-id="64d8d-265">Single Tenant: If you are building an application just for your organization, it must be registered in your company’s directory by using the Azure Portal.</span></span>
* <span data-ttu-id="64d8d-266">Több-Bérlős: Ha egy alkalmazás, amely a szervezeten kívüli felhasználók által használható, az szerepelnie kell a vállalati címtárban, hanem is regisztrálni kell az alkalmazást használó minden egyes szervezet könyvtárban.</span><span class="sxs-lookup"><span data-stu-id="64d8d-266">Multi-Tenant: If you are building an application that can be used by users outside your organization, it must be registered in your company’s directory, but also must be registered in each organization’s directory that will be using the application.</span></span> <span data-ttu-id="64d8d-267">Az alkalmazás akkor válik elérhetővé a könyvtárban, az ügyfelek, amelyek lehetővé teszik az alkalmazás hozzájárul, hogy a regisztrációs folyamat is megadhat.</span><span class="sxs-lookup"><span data-stu-id="64d8d-267">To make your application available in their directory, you can include a sign-up process for your customers that enables them to consent to your application.</span></span> <span data-ttu-id="64d8d-268">Amikor bejelentkeznek az alkalmazáshoz, azok számára jelenik meg olyan párbeszédpanel, amely az alkalmazás futtatásához szükséges engedélyek láthatók, és hozzájárulás lehetőséget.</span><span class="sxs-lookup"><span data-stu-id="64d8d-268">When they sign up for your application, they will be presented with a dialog that shows the permissions the application requires, and then the option to consent.</span></span> <span data-ttu-id="64d8d-269">Attól függően, hogy a szükséges engedélyekkel, a másik szervezet rendszergazda előfordulhat, hogy kell azokat.</span><span class="sxs-lookup"><span data-stu-id="64d8d-269">Depending on the required permissions, an administrator in the other organization may be required to give consent.</span></span> <span data-ttu-id="64d8d-270">Amikor a felhasználó vagy a rendszergazda beleegyezik, az alkalmazás regisztrálva van a címtár.</span><span class="sxs-lookup"><span data-stu-id="64d8d-270">When the user or administrator consents, the application is registered in their directory.</span></span> <span data-ttu-id="64d8d-271">További információkért lásd: [alkalmazások integrálása az Azure Active Directoryval](active-directory-integrating-applications.md).</span><span class="sxs-lookup"><span data-stu-id="64d8d-271">For more information, see [Integrating Applications with Azure Active Directory](active-directory-integrating-applications.md).</span></span>

#### <a name="token-expiration"></a><span data-ttu-id="64d8d-272">Jogkivonat lejáratáról</span><span class="sxs-lookup"><span data-stu-id="64d8d-272">Token Expiration</span></span>
<span data-ttu-id="64d8d-273">A felhasználói munkamenet lejár, ha az Azure AD által kibocsátott jogkivonat élettartamát lejár.</span><span class="sxs-lookup"><span data-stu-id="64d8d-273">The user’s session expires when the lifetime of the token issued by Azure AD expires.</span></span> <span data-ttu-id="64d8d-274">Az alkalmazás ebben az időszakban szükség esetén például a felhasználók adott ideig tartó tétlenség alapján kijelentkezés lerövidíthető.</span><span class="sxs-lookup"><span data-stu-id="64d8d-274">Your application can shorten this time period if desired, such as signing out users based on a period of inactivity.</span></span> <span data-ttu-id="64d8d-275">Ha a munkamenet lejár, a felhasználó felszólítást kapnak újból bejelentkezni.</span><span class="sxs-lookup"><span data-stu-id="64d8d-275">When the session expires, the user will be prompted to sign in again.</span></span>

### <a name="single-page-application-spa"></a><span data-ttu-id="64d8d-276">Egylapos alkalmazások (SPA)</span><span class="sxs-lookup"><span data-stu-id="64d8d-276">Single Page Application (SPA)</span></span>
<span data-ttu-id="64d8d-277">Ez a szakasz ismerteti a hitelesítési egyetlen oldal alkalmazás esetében, amely használja az Azure AD és az OAuth 2.0 típusú implicit engedélyezési adja meg a webes API vissza end biztonságossá.</span><span class="sxs-lookup"><span data-stu-id="64d8d-277">This section describes authentication for a Single Page Application, that uses Azure AD and the OAuth 2.0 implicit authorization grant to secure its web API back end.</span></span> <span data-ttu-id="64d8d-278">Egyetlen lap alkalmazások általában felépítése rétegként JavaScript bemutató (előtér-), amelyen a böngésző és a Web API háttérből, amely az olyan kiszolgálón fut, és megvalósítja az alkalmazás üzleti logikát.</span><span class="sxs-lookup"><span data-stu-id="64d8d-278">Single Page Applications are typically structured as a JavaScript presentation layer (front end) that runs in the browser and a Web API back end that runs on a server and implements the application’s business logic.</span></span> <span data-ttu-id="64d8d-279">További tudnivalók az implicit hitelesítésengedélyezési, és segít eldönteni, hogy az alkalmazás forgatókönyv szerint jobb [OAuth2 implicit ismertetése adja meg az Azure Active Directoryban folyamat](active-directory-dev-understanding-oauth2-implicit-grant.md).</span><span class="sxs-lookup"><span data-stu-id="64d8d-279">To learn more about the implicit authorization grant, and help you decide whether it's right for your application scenario, see [Understanding the OAuth2 implicit grant flow in Azure Active Directory](active-directory-dev-understanding-oauth2-implicit-grant.md).</span></span>

<span data-ttu-id="64d8d-280">Ebben a forgatókönyvben, amikor a felhasználó bejelentkezik, a JavaScript első célból használ [Active Directory hitelesítési tár JavaScript (adal-t. JS)](https://github.com/AzureAD/azure-activedirectory-library-for-js/tree/dev) és az beszerzése egy azonosító jogkivonatot (id_token) az Azure AD implicit hitelesítésengedélyezési.</span><span class="sxs-lookup"><span data-stu-id="64d8d-280">In this scenario, when the user signs in, the JavaScript front end uses [Active Directory Authentication Library for JavaScript (ADAL.JS)](https://github.com/AzureAD/azure-activedirectory-library-for-js/tree/dev) and the implicit authorization grant to obtain an ID token (id_token) from Azure AD.</span></span> <span data-ttu-id="64d8d-281">A jogkivonat található a gyorsítótárban, és az ügyfél csatolja a kérelem a tulajdonosi jogkivonattal, akkor a Web API háttér, amely az OWIN köztes használatával lett biztonságossá téve.</span><span class="sxs-lookup"><span data-stu-id="64d8d-281">The token is cached and the client attaches it to the request as the bearer token when making calls to its Web API back end, which is secured using the OWIN middleware.</span></span> 

#### <a name="diagram"></a><span data-ttu-id="64d8d-282">Ábra</span><span class="sxs-lookup"><span data-stu-id="64d8d-282">Diagram</span></span>
![Egyetlen lapon alkalmazásdiagram](./media/active-directory-authentication-scenarios/single_page_app.png)

#### <a name="description-of-protocol-flow"></a><span data-ttu-id="64d8d-284">Protokoll folyamat leírása</span><span class="sxs-lookup"><span data-stu-id="64d8d-284">Description of Protocol Flow</span></span>
1. <span data-ttu-id="64d8d-285">A felhasználók megnyitják a webes alkalmazás.</span><span class="sxs-lookup"><span data-stu-id="64d8d-285">The user navigates to the web application.</span></span>
2. <span data-ttu-id="64d8d-286">Az alkalmazás a JavaScript előtér (bemutató réteg) és a böngésző ad vissza.</span><span class="sxs-lookup"><span data-stu-id="64d8d-286">The application returns the JavaScript front end (presentation layer) to the browser.</span></span>
3. <span data-ttu-id="64d8d-287">A felhasználói bejelentkezés, például kezdeményez egy szereplő bejelentkezési hivatkozásra kattintva.</span><span class="sxs-lookup"><span data-stu-id="64d8d-287">The user initiates sign in, for example by clicking a sign in link.</span></span> <span data-ttu-id="64d8d-288">A böngészőben egy GET küld az Azure AD engedélyezési végpont egy azonosító jogkivonatot kérni.</span><span class="sxs-lookup"><span data-stu-id="64d8d-288">The browser sends a GET to the Azure AD authorization endpoint to request an ID token.</span></span> <span data-ttu-id="64d8d-289">A kérelem lekérdezési paraméterekhez az alkalmazás Azonosítóját és a válasz URL-CÍMÉT tartalmazza.</span><span class="sxs-lookup"><span data-stu-id="64d8d-289">This request includes the application ID and reply URL in the query parameters.</span></span>
4. <span data-ttu-id="64d8d-290">Az Azure AD ellenőrzi a válasz URL-CÍMEN, szemben a regisztrált válasz URL-címet adott meg az Azure portálon.</span><span class="sxs-lookup"><span data-stu-id="64d8d-290">Azure AD validates the Reply URL against the registered Reply URL that was configured in the Azure Portal.</span></span>
5. <span data-ttu-id="64d8d-291">A felhasználó bejelentkezik a bejelentkezési oldalon.</span><span class="sxs-lookup"><span data-stu-id="64d8d-291">The user signs in on the sign-in page.</span></span>
6. <span data-ttu-id="64d8d-292">Sikeres hitelesítés esetén az Azure AD egy azonosító adatblokkot hoz létre, és visszaadja egy URL-cím kódrészletet (#), a kérelem-válasz URL-CÍMEN.</span><span class="sxs-lookup"><span data-stu-id="64d8d-292">If authentication is successful, Azure AD creates an ID token and returns it as a URL fragment (#) to the application’s Reply URL.</span></span> <span data-ttu-id="64d8d-293">Termelési alkalmazások esetében a válasz URL-CÍMEN HTTPS kell lennie.</span><span class="sxs-lookup"><span data-stu-id="64d8d-293">For a production application, this Reply URL should be HTTPS.</span></span> <span data-ttu-id="64d8d-294">A visszaküldött jogkivonat felhasználói és az Azure AD szükséges jogcímeket, az alkalmazás ellenőrzése a jogkivonat tartalmazza.</span><span class="sxs-lookup"><span data-stu-id="64d8d-294">The returned token includes claims about the user and Azure AD that are required by the application to validate the token.</span></span>
7. <span data-ttu-id="64d8d-295">A böngészőjében futó JavaScript-ügyfél kód a token kiolvassa a hívások az alkalmazás webes API vissza end védelméhez használandó válasz.</span><span class="sxs-lookup"><span data-stu-id="64d8d-295">The JavaScript client code running in the browser extracts the token from the response to use in securing calls to the application’s web API back end.</span></span>
8. <span data-ttu-id="64d8d-296">A böngésző meghívja az alkalmazás webes API vissza a engedélyezési fejléc végződhet a hozzáférési jogkivonat.</span><span class="sxs-lookup"><span data-stu-id="64d8d-296">The browser calls the application’s web API back end with the access token in the authorization header.</span></span>

#### <a name="code-samples"></a><span data-ttu-id="64d8d-297">Kódminták</span><span class="sxs-lookup"><span data-stu-id="64d8d-297">Code Samples</span></span>
<span data-ttu-id="64d8d-298">Tekintse meg a mintakódok lap alkalmazás (SPA) forgatókönyvek esetén.</span><span class="sxs-lookup"><span data-stu-id="64d8d-298">See the code samples for Single Page Application (SPA) scenarios.</span></span> <span data-ttu-id="64d8d-299">Ügyeljen arra, hogy gyakran foglalkozzon – jelenleg felvenni új minták folyamatosan.</span><span class="sxs-lookup"><span data-stu-id="64d8d-299">Be sure to check back frequently -- we add new samples all the time.</span></span> <span data-ttu-id="64d8d-300">[Egyetlen lap alkalmazás (SPA)](active-directory-code-samples.md#single-page-application-spa).</span><span class="sxs-lookup"><span data-stu-id="64d8d-300">[Single Page Application (SPA)](active-directory-code-samples.md#single-page-application-spa).</span></span>

#### <a name="registering"></a><span data-ttu-id="64d8d-301">Regisztrálása</span><span class="sxs-lookup"><span data-stu-id="64d8d-301">Registering</span></span>
* <span data-ttu-id="64d8d-302">Egybérlős: Ha egy alkalmazás csak a szervezet számára, regisztrálnia kell azt a vállalati címtárban az Azure portál használatával.</span><span class="sxs-lookup"><span data-stu-id="64d8d-302">Single Tenant: If you are building an application just for your organization, it must be registered in your company’s directory by using the Azure Portal.</span></span>
* <span data-ttu-id="64d8d-303">Több-Bérlős: Ha egy alkalmazás, amely a szervezeten kívüli felhasználók által használható, az szerepelnie kell a vállalati címtárban, hanem is regisztrálni kell az alkalmazást használó minden egyes szervezet könyvtárban.</span><span class="sxs-lookup"><span data-stu-id="64d8d-303">Multi-Tenant: If you are building an application that can be used by users outside your organization, it must be registered in your company’s directory, but also must be registered in each organization’s directory that will be using the application.</span></span> <span data-ttu-id="64d8d-304">Az alkalmazás akkor válik elérhetővé a könyvtárban, az ügyfelek, amelyek lehetővé teszik az alkalmazás hozzájárul, hogy a regisztrációs folyamat is megadhat.</span><span class="sxs-lookup"><span data-stu-id="64d8d-304">To make your application available in their directory, you can include a sign-up process for your customers that enables them to consent to your application.</span></span> <span data-ttu-id="64d8d-305">Amikor bejelentkeznek az alkalmazáshoz, azok számára jelenik meg olyan párbeszédpanel, amely az alkalmazás futtatásához szükséges engedélyek láthatók, és hozzájárulás lehetőséget.</span><span class="sxs-lookup"><span data-stu-id="64d8d-305">When they sign up for your application, they will be presented with a dialog that shows the permissions the application requires, and then the option to consent.</span></span> <span data-ttu-id="64d8d-306">Attól függően, hogy a szükséges engedélyekkel, a másik szervezet rendszergazda előfordulhat, hogy kell azokat.</span><span class="sxs-lookup"><span data-stu-id="64d8d-306">Depending on the required permissions, an administrator in the other organization may be required to give consent.</span></span> <span data-ttu-id="64d8d-307">Amikor a felhasználó vagy a rendszergazda beleegyezik, az alkalmazás regisztrálva van a címtár.</span><span class="sxs-lookup"><span data-stu-id="64d8d-307">When the user or administrator consents, the application is registered in their directory.</span></span> <span data-ttu-id="64d8d-308">További információkért lásd: [alkalmazások integrálása az Azure Active Directoryval](active-directory-integrating-applications.md).</span><span class="sxs-lookup"><span data-stu-id="64d8d-308">For more information, see [Integrating Applications with Azure Active Directory](active-directory-integrating-applications.md).</span></span>

<span data-ttu-id="64d8d-309">Az alkalmazás a regisztrálás után azt be kell állítani az OAuth 2.0 Implicit Grant protokoll használatára.</span><span class="sxs-lookup"><span data-stu-id="64d8d-309">After registering the application, it must be configured to use OAuth 2.0 Implicit Grant protocol.</span></span> <span data-ttu-id="64d8d-310">Alapértelmezés szerint ez a protokoll le van tiltva, az alkalmazások.</span><span class="sxs-lookup"><span data-stu-id="64d8d-310">By default, this protocol is disabled for applications.</span></span> <span data-ttu-id="64d8d-311">Ahhoz, hogy az alkalmazás az OAuth2 Implicit Grant protokoll, az Azure portálról az alkalmazásjegyzék szerkesztése és a "oauth2AllowImplicitFlow" értéket állítsa igaz értékre.</span><span class="sxs-lookup"><span data-stu-id="64d8d-311">To enable the OAuth2 Implicit Grant protocol for your application, edit its application manifest from the Azure Portal and set the “oauth2AllowImplicitFlow” value to true.</span></span> <span data-ttu-id="64d8d-312">Részletes útmutatásért lásd: [engedélyezése OAuth 2.0 Implicit Grant egyetlen oldal alkalmazások](active-directory-integrating-applications.md).</span><span class="sxs-lookup"><span data-stu-id="64d8d-312">For detailed instructions, see [Enabling OAuth 2.0 Implicit Grant for Single Page Applications](active-directory-integrating-applications.md).</span></span>

#### <a name="token-expiration"></a><span data-ttu-id="64d8d-313">Jogkivonat lejáratáról</span><span class="sxs-lookup"><span data-stu-id="64d8d-313">Token Expiration</span></span>
<span data-ttu-id="64d8d-314">Ha ADAL.js használatával kezelheti az Azure AD hitelesítési, kihasználhatja a több funkciót is lehetővé teszi egy lejárt jogkivonat frissítését, valamint a jogkivonatok lekérésének további webes API-erőforrások, amelyeket a lehetséges, hogy az alkalmazás.</span><span class="sxs-lookup"><span data-stu-id="64d8d-314">When you use ADAL.js to manage authentication with Azure AD, you benefit from several features that facilitate refreshing an expired token as well as getting tokens for additional web API resources that may be called by the application.</span></span> <span data-ttu-id="64d8d-315">Amikor a felhasználó sikeresen hitelesíti az Azure ad-vel, a cookie-k által védett munkamenet a felhasználó a böngésző és az Azure AD között.</span><span class="sxs-lookup"><span data-stu-id="64d8d-315">When the user successfully authenticates with Azure AD, a session secured by a cookie is established for the user between the browser and Azure AD.</span></span> <span data-ttu-id="64d8d-316">Fontos megjegyezni, hogy a munkamenet létezik-e a felhasználó és az Azure AD között és kapcsolat nem a felhasználó és a webalkalmazás fut a kiszolgálón.</span><span class="sxs-lookup"><span data-stu-id="64d8d-316">It’s important to note that the session exists between the user and Azure AD and not between the user and the web application running on the server.</span></span> <span data-ttu-id="64d8d-317">Amikor egy jogkivonat lejár, ADAL.js ehhez a munkamenethez segítségével csendes egy másik jogkivonat beszerzése.</span><span class="sxs-lookup"><span data-stu-id="64d8d-317">When a token expires, ADAL.js uses this session to silently obtain another token.</span></span> <span data-ttu-id="64d8d-318">Ennek érdekében egy rejtett iFrame használatával küldésére és fogadására a kérelem, az OAuth Implicit Grant protokoll használatával.</span><span class="sxs-lookup"><span data-stu-id="64d8d-318">It does this by using a hidden iFrame to send and receive the request using the OAuth Implicit Grant protocol.</span></span> <span data-ttu-id="64d8d-319">ADAL.js segítségével is ugyanezzel a módszerrel csendes hozzáférési tokenek beszerzése érdekében, az Azure AD, hogy az alkalmazás hívások mindaddig, amíg ezek az erőforrások támogatja az eltérő eredetű erőforrások megosztása (CORS) van regisztrálva az a felhasználó, és a webes API erőforrások számára szükséges beleegyezést bejelentkezéskor a felhasználó által adtak meg.</span><span class="sxs-lookup"><span data-stu-id="64d8d-319">ADAL.js can also use this same mechanism to silently obtain access tokens from Azure AD for other web API resources that the application calls as long as these resources support cross-origin resource sharing (CORS), are registered in the user’s directory, and any required consent was given by the user during sign-in.</span></span>

### <a name="native-application-to-web-api"></a><span data-ttu-id="64d8d-320">Natív alkalmazás webes API-hoz</span><span class="sxs-lookup"><span data-stu-id="64d8d-320">Native Application to Web API</span></span>
<span data-ttu-id="64d8d-321">Ez a szakasz ismerteti a natív alkalmazás, amely behívja a webes API-k egy felhasználó nevében.</span><span class="sxs-lookup"><span data-stu-id="64d8d-321">This section describes a native application that calls a web API on behalf of a user.</span></span> <span data-ttu-id="64d8d-322">Ebben a forgatókönyvben épül, az OAuth 2.0 engedélyezési kód engedélytípus nyilvános ügyféllel 4.1 szakaszában leírtak szerint a [OAuth 2.0 specifikáció](http://tools.ietf.org/html/rfc6749).</span><span class="sxs-lookup"><span data-stu-id="64d8d-322">This scenario is built on the OAuth 2.0 authorization code grant type with a public client, as described in section 4.1 of the [OAuth 2.0 specification](http://tools.ietf.org/html/rfc6749).</span></span> <span data-ttu-id="64d8d-323">A natív alkalmazás a felhasználó számára egy jogkivonatot beolvassa az OAuth 2.0 protokoll használatával.</span><span class="sxs-lookup"><span data-stu-id="64d8d-323">The native application obtains an access token for the user by using the OAuth 2.0 protocol.</span></span> <span data-ttu-id="64d8d-324">Ez a jogkivonat küldi el a rendszer a kérelem a webes API-hoz, amely engedélyezi a felhasználó és a kívánt erőforrás adja vissza.</span><span class="sxs-lookup"><span data-stu-id="64d8d-324">This access token is then sent in the request to the web API, which authorizes the user and returns the desired resource.</span></span>

#### <a name="diagram"></a><span data-ttu-id="64d8d-325">Ábra</span><span class="sxs-lookup"><span data-stu-id="64d8d-325">Diagram</span></span>
![Webes API-Diagram natív alkalmazás](./media/active-directory-authentication-scenarios/native_app_to_web_api.png)

#### <a name="authentication-flow-for-native-application-to-api"></a><span data-ttu-id="64d8d-327">Hitelesítési folyamata az API a natív alkalmazás</span><span class="sxs-lookup"><span data-stu-id="64d8d-327">Authentication flow for native application to API</span></span>
#### <a name="description-of-protocol-flow"></a><span data-ttu-id="64d8d-328">Protokoll folyamat leírása</span><span class="sxs-lookup"><span data-stu-id="64d8d-328">Description of Protocol Flow</span></span>
<span data-ttu-id="64d8d-329">Ha az AD-hitelesítési kódtárakkal használ, a protokoll részleteit az alábbiakban a legtöbb történik meg, például a böngészőben előugró ablak, a token-gyorsítótárazási és a frissítési jogkivonatokat kezelése.</span><span class="sxs-lookup"><span data-stu-id="64d8d-329">If you are using the AD Authentication Libraries, most of the protocol details described below are handled for you, such as the browser pop-up, token caching, and handling of refresh tokens.</span></span>

1. <span data-ttu-id="64d8d-330">Egy böngészővel előugró, a natív alkalmazás egy kérést küld az engedélyezési végpont Azure AD-ben.</span><span class="sxs-lookup"><span data-stu-id="64d8d-330">Using a browser pop-up, the native application makes a request to the authorization endpoint in Azure AD.</span></span> <span data-ttu-id="64d8d-331">Ehhez a kérelemhez tartalmazza az alkalmazás Azonosítóját és az átirányítási URI-t a natív alkalmazás, ahogy az az Azure portálon, és az alkalmazás URI azonosítója a webes API.</span><span class="sxs-lookup"><span data-stu-id="64d8d-331">This request includes the Application ID and the redirect URI of the native application as shown in the Azure Portal, and the application ID URI for the web API.</span></span> <span data-ttu-id="64d8d-332">Ha a felhasználó még nem jelentkezett be, meg kell újból bejelentkezni</span><span class="sxs-lookup"><span data-stu-id="64d8d-332">If the user hasn’t already signed in, they are prompted to sign in again</span></span>
2. <span data-ttu-id="64d8d-333">Az Azure AD akkor hitelesíti a felhasználót.</span><span class="sxs-lookup"><span data-stu-id="64d8d-333">Azure AD authenticates the user.</span></span> <span data-ttu-id="64d8d-334">Ha olyan több-bérlős alkalmazás, és hozzájárulási kell használni az alkalmazást, a felhasználó beleegyezését, ha azok még nem tette meg kell.</span><span class="sxs-lookup"><span data-stu-id="64d8d-334">If it is a multi-tenant application and consent is required to use the application, the user will be required to consent if they haven’t already done so.</span></span> <span data-ttu-id="64d8d-335">Hozzájárulás megadása után, és a sikeres hitelesítés után az Azure AD kibocsát egy engedélyezési kód válaszul vissza az ügyfél-alkalmazás átirányítási URI-t.</span><span class="sxs-lookup"><span data-stu-id="64d8d-335">After granting consent and upon successful authentication, Azure AD issues an authorization code response back to the client application’s redirect URI.</span></span>
3. <span data-ttu-id="64d8d-336">Ha az Azure AD kibocsát egy engedélyezési kód válaszul vissza az átirányítási URI-t, az ügyfélalkalmazás leállítja a böngésző interakció, és a válaszban szereplő engedélyezési kódot kibontja.</span><span class="sxs-lookup"><span data-stu-id="64d8d-336">When Azure AD issues an authorization code response back to the redirect URI, the client application stops browser interaction and extracts the authorization code from the response.</span></span> <span data-ttu-id="64d8d-337">Az engedélyezési kód használatával, az ügyfélalkalmazás kérést küld az Azure AD token végpontot, amely engedélyezési kódot tartalmaz, akkor az ügyfélalkalmazás (alkalmazás Azonosítóját és átirányítási URI-t), és a kívánt erőforrás kapcsolatos információk (alkalmazás URI azonosítója a a webes API-k).</span><span class="sxs-lookup"><span data-stu-id="64d8d-337">Using this authorization code, the client application sends a request to Azure AD’s token endpoint that includes the authorization code, details about the client application (Application ID and redirect URI), and the desired resource (application ID URI for the web API).</span></span>
4. <span data-ttu-id="64d8d-338">Az Azure AD érvényesíti az engedélyezési kód és az alkalmazás és a webes API-ja kapcsolatos információkat.</span><span class="sxs-lookup"><span data-stu-id="64d8d-338">The authorization code and information about the client application and web API are validated by Azure AD.</span></span> <span data-ttu-id="64d8d-339">Sikeres ellenőrzés esetén az Azure AD két jogkivonatok adja vissza: a JWT jogkivonat és egy frissítési JWT jogkivonat.</span><span class="sxs-lookup"><span data-stu-id="64d8d-339">Upon successful validation, Azure AD returns two tokens: a JWT access token and a JWT refresh token.</span></span> <span data-ttu-id="64d8d-340">Ezenkívül az Azure AD a felhasználó, például a megjelenítendő nevét és a bérlői azonosító alapvető információt ad vissza</span><span class="sxs-lookup"><span data-stu-id="64d8d-340">In addition, Azure AD returns basic information about the user, such as their display name and tenant ID.</span></span>
5. <span data-ttu-id="64d8d-341">A HTTPS PROTOKOLLOKON keresztül az ügyfélalkalmazás az visszaadott JWT jogkivonat a JWT karakterlánc a "Tulajdonos" megnevezés a kérés hitelesítési fejlécéhez modul hozzáadása a webes API-t.</span><span class="sxs-lookup"><span data-stu-id="64d8d-341">Over HTTPS, the client application uses the returned JWT access token to add the JWT string with a “Bearer” designation in the Authorization header of the request to the web API.</span></span> <span data-ttu-id="64d8d-342">A webes API-k majd érvényesíti a JWT jogkivonatot, és ha az érvényesítés sikeres, akkor adja vissza a kívánt erőforrás.</span><span class="sxs-lookup"><span data-stu-id="64d8d-342">The web API then validates the JWT token, and if validation is successful, returns the desired resource.</span></span>
6. <span data-ttu-id="64d8d-343">Ha a hozzáférési jogkivonat lejár, az ügyfélalkalmazás program hibaüzenetet, amely jelzi, hogy a felhasználónak újra hitelesíteni kell.</span><span class="sxs-lookup"><span data-stu-id="64d8d-343">When the access token expires, the client application will receive an error that indicates the user needs to authenticate again.</span></span> <span data-ttu-id="64d8d-344">Ha az alkalmazás egy érvényes frissítési jogkivonat, azt segítségével szerezzen be egy új hozzáférési jogkivonat jelentkezhet be a felhasználó értesítése nélkül.</span><span class="sxs-lookup"><span data-stu-id="64d8d-344">If the application has a valid refresh token, it can be used to acquire a new access token without prompting the user to sign in again.</span></span> <span data-ttu-id="64d8d-345">Ha a frissítési jogkivonat lejár, az alkalmazás kell ismét interaktív módon a felhasználó hitelesítésére.</span><span class="sxs-lookup"><span data-stu-id="64d8d-345">If the refresh token expires, the application will need to interactively authenticate the user once again.</span></span>

> [!NOTE]
> <span data-ttu-id="64d8d-346">Az Azure AD által kiadott frissítési jogkivonat segítségével több erőforrások elérését.</span><span class="sxs-lookup"><span data-stu-id="64d8d-346">The refresh token issued by Azure AD can be used to access multiple resources.</span></span> <span data-ttu-id="64d8d-347">Például ha egy ügyfél-alkalmazás, amely jogosult két webes API-k hívására, a frissítési jogkivonat segítségével szerezze be a hozzáférési tokent a más webes API-hoz is.</span><span class="sxs-lookup"><span data-stu-id="64d8d-347">For example, if you have a client application that has permission to call two web APIs, the refresh token can be used to get an access token to the other web API as well.</span></span>
> 
> 

#### <a name="code-samples"></a><span data-ttu-id="64d8d-348">Kódminták</span><span class="sxs-lookup"><span data-stu-id="64d8d-348">Code Samples</span></span>
<span data-ttu-id="64d8d-349">Tekintse meg a mintakódok natív alkalmazás számára, hogy a webes API-forgatókönyvek.</span><span class="sxs-lookup"><span data-stu-id="64d8d-349">See the code samples for Native Application to Web API scenarios.</span></span> <span data-ttu-id="64d8d-350">És foglalkozzon gyakran--jelenleg felvenni új minták folyamatosan.</span><span class="sxs-lookup"><span data-stu-id="64d8d-350">And, check back frequently -- we add new samples all the time.</span></span> <span data-ttu-id="64d8d-351">[Webes API-t natív alkalmazás](active-directory-code-samples.md#native-application-to-web-api).</span><span class="sxs-lookup"><span data-stu-id="64d8d-351">[Native Application to Web API](active-directory-code-samples.md#native-application-to-web-api).</span></span>

#### <a name="registering"></a><span data-ttu-id="64d8d-352">Regisztrálása</span><span class="sxs-lookup"><span data-stu-id="64d8d-352">Registering</span></span>
* <span data-ttu-id="64d8d-353">Egyetlen bérlői: Mind a natív alkalmazás és a webes API-k regisztrálni kell ugyanabban a könyvtárban az Azure ad-ben.</span><span class="sxs-lookup"><span data-stu-id="64d8d-353">Single Tenant: Both the native application and the web API must be registered in the same directory in Azure AD.</span></span> <span data-ttu-id="64d8d-354">A webes API-k beállítható úgy, hogy az engedélyekkel, az erőforrások a natív alkalmazás hozzáférés korlátozására szolgáló tenni.</span><span class="sxs-lookup"><span data-stu-id="64d8d-354">The web API can be configured to expose a set of permissions, which are used to limit the native application’s access to its resources.</span></span> <span data-ttu-id="64d8d-355">Az ügyfélalkalmazás majd kiválasztja a kívánt engedélyeket az Azure portálon a "Engedélyek az egyéb alkalmazások" legördülő menüből.</span><span class="sxs-lookup"><span data-stu-id="64d8d-355">The client application then selects the desired permissions from the “Permissions to Other Applications” drop-down menu in the Azure Portal.</span></span>
* <span data-ttu-id="64d8d-356">Több-Bérlős: Először a natív alkalmazás csak a fejlesztői vagy regisztrált publisher könyvtár.</span><span class="sxs-lookup"><span data-stu-id="64d8d-356">Multi-Tenant: First, the native application only ever registered in the developer or publisher’s directory.</span></span> <span data-ttu-id="64d8d-357">Jelzi a működéséhez szükséges engedélyekkel, a natív alkalmazás van konfigurálva.</span><span class="sxs-lookup"><span data-stu-id="64d8d-357">Second, the native application is configured to indicate the permissions it requires to be functional.</span></span> <span data-ttu-id="64d8d-358">Amikor egy felhasználó vagy a rendszergazda a célkönyvtárban hozzájárulását adja az alkalmazásnak, amely lehetővé teszi a szervezet a szükséges engedélyek listája látható párbeszédpanel.</span><span class="sxs-lookup"><span data-stu-id="64d8d-358">This list of required permissions is shown in a dialog when a user or administrator in the destination directory gives consent to the application, which makes it available to their organization.</span></span> <span data-ttu-id="64d8d-359">Egyes alkalmazások csak a felhasználói szintű engedélyek, amelyek a szervezet bármely felhasználója is szükséges.</span><span class="sxs-lookup"><span data-stu-id="64d8d-359">Some applications require just user-level permissions, which any user in the organization can consent to.</span></span> <span data-ttu-id="64d8d-360">Más alkalmazásoknak rendszergazdai engedélyek, amelyek a szervezetben a felhasználók nem járulhatnak hozzá.</span><span class="sxs-lookup"><span data-stu-id="64d8d-360">Other applications require administrator-level permissions, which a user in the organization cannot consent to.</span></span> <span data-ttu-id="64d8d-361">Csak a címtár rendszergazdája biztosíthat hozzájárulási Ez a jogosultsági szint igénylő alkalmazások számára.</span><span class="sxs-lookup"><span data-stu-id="64d8d-361">Only a directory administrator can give consent to applications that require this level of permissions.</span></span> <span data-ttu-id="64d8d-362">Amikor a felhasználó vagy a rendszergazda hozzájárul, csak a webes API regisztrálva van a címtár.</span><span class="sxs-lookup"><span data-stu-id="64d8d-362">When the user or administrator consents, only the web API is registered in their directory.</span></span> <span data-ttu-id="64d8d-363">További információkért lásd: [alkalmazások integrálása az Azure Active Directoryval](active-directory-integrating-applications.md).</span><span class="sxs-lookup"><span data-stu-id="64d8d-363">For more information, see [Integrating Applications with Azure Active Directory](active-directory-integrating-applications.md).</span></span>

#### <a name="token-expiration"></a><span data-ttu-id="64d8d-364">Jogkivonat lejáratáról</span><span class="sxs-lookup"><span data-stu-id="64d8d-364">Token Expiration</span></span>
<span data-ttu-id="64d8d-365">A natív alkalmazás használja az engedélyezési kód is elérheti a JWT jogkivonat, amikor JWT frissítési jogkivonat is megkapja.</span><span class="sxs-lookup"><span data-stu-id="64d8d-365">When the native application uses its authorization code to get a JWT access token, it also receives a JWT refresh token.</span></span> <span data-ttu-id="64d8d-366">Ha a hozzáférési jogkivonat lejár, a frissítési jogkivonat segítségével újra hitelesíteni a felhasználót anélkül, hogy jelentkezzen be újra.</span><span class="sxs-lookup"><span data-stu-id="64d8d-366">When the access token expires, the refresh token can be used to re-authenticate the user without requiring them to sign in again.</span></span> <span data-ttu-id="64d8d-367">A frissítési jogkivonat majd segítségével hitelesíti a felhasználót, amely egy új hozzáférési jogkivonat és a frissítési jogkivonat eredményez.</span><span class="sxs-lookup"><span data-stu-id="64d8d-367">This refresh token is then used to authenticate the user, which results in a new access token and refresh token.</span></span>

### <a name="web-application-to-web-api"></a><span data-ttu-id="64d8d-368">Webalkalmazás, webes API-hoz</span><span class="sxs-lookup"><span data-stu-id="64d8d-368">Web Application to Web API</span></span>
<span data-ttu-id="64d8d-369">Ez a szakasz ismerteti a webalkalmazás, amelyet a webes API-k erőforrások lekérése.</span><span class="sxs-lookup"><span data-stu-id="64d8d-369">This section describes a web application that needs to get resources from a web API.</span></span> <span data-ttu-id="64d8d-370">Ebben a forgatókönyvben kétfélék identitás, amely a webes alkalmazás hitelesítéséhez, és hívja meg a webes API-k segítségével: az alkalmazás azonosítóját, vagy delegált felhasználói azonosítót.</span><span class="sxs-lookup"><span data-stu-id="64d8d-370">In this scenario, there are two identity types that the web application can use to authenticate and call the web API: an application identity, or a delegated user identity.</span></span>

<span data-ttu-id="64d8d-371">*Az Alkalmazásidentitás:* ebben a forgatókönyvben használja OAuth 2.0 ügyfél hitelesítő adatok megadása hitelesítse magát az alkalmazást, és a webes API-k eléréséhez.</span><span class="sxs-lookup"><span data-stu-id="64d8d-371">*Application identity:* This scenario uses OAuth 2.0 client credentials grant to authenticate as the application and access the web API.</span></span> <span data-ttu-id="64d8d-372">Ha egy alkalmazás azonosítóját, a webes API csak azt észleli, hogy a webes alkalmazás hívja meg, mint a webes API nem kapott információt a felhasználóval kapcsolatos.</span><span class="sxs-lookup"><span data-stu-id="64d8d-372">When using an application identity, the web API can only detect that the web application is calling it, as the web API does not receive any information about the user.</span></span> <span data-ttu-id="64d8d-373">Ha az alkalmazás kap a felhasználó adatai, az alkalmazás protokollon keresztül küldi, és azt nem írta alá az Azure AD.</span><span class="sxs-lookup"><span data-stu-id="64d8d-373">If the application receives information about the user, it will be sent via the application protocol, and it is not signed by Azure AD.</span></span> <span data-ttu-id="64d8d-374">A webes API-k megbízhatónak tekinti, hogy a webes alkalmazás hitelesítette a felhasználót.</span><span class="sxs-lookup"><span data-stu-id="64d8d-374">The web API trusts that the web application authenticated the user.</span></span> <span data-ttu-id="64d8d-375">Ezért ez a minta egy megbízható alrendszer neve.</span><span class="sxs-lookup"><span data-stu-id="64d8d-375">For this reason, this pattern is called a trusted subsystem.</span></span>

<span data-ttu-id="64d8d-376">*Felhasználói azonosító meghatalmazott:* ebben a forgatókönyvben két módon valósítható meg: OpenID Connect, és a kód hitelesítésengedélyezési OAuth 2.0 bizalmas ügyféllel.</span><span class="sxs-lookup"><span data-stu-id="64d8d-376">*Delegated user identity:* This scenario can be accomplished in two ways: OpenID Connect, and OAuth 2.0 authorization code grant with a confidential client.</span></span> <span data-ttu-id="64d8d-377">A webalkalmazás kap egy jogkivonatot a felhasználóhoz, amelynek kiderül, hogy a webes API, amely a webalkalmazás sikeresen hitelesíteni a felhasználót, és a webalkalmazás nem szerezhetnek be a webes API hívásához delegált felhasználói azonosítót.</span><span class="sxs-lookup"><span data-stu-id="64d8d-377">The web application obtains an access token for the user, which proves to the web API that the user successfully authenticated to the web application and that the web application was able to obtain a delegated user identity to call the web API.</span></span> <span data-ttu-id="64d8d-378">Ez a jogkivonat a webes API-hoz, amely engedélyezi a felhasználó, és adja vissza a kívánt erőforrás a kérelem küldése.</span><span class="sxs-lookup"><span data-stu-id="64d8d-378">This access token is sent in the request to the web API, which authorizes the user and returns the desired resource.</span></span>

#### <a name="diagram"></a><span data-ttu-id="64d8d-379">Ábra</span><span class="sxs-lookup"><span data-stu-id="64d8d-379">Diagram</span></span>
![Webes alkalmazás Web API diagramja](./media/active-directory-authentication-scenarios/web_app_to_web_api.png)

#### <a name="description-of-protocol-flow"></a><span data-ttu-id="64d8d-381">Protokoll folyamat leírása</span><span class="sxs-lookup"><span data-stu-id="64d8d-381">Description of Protocol Flow</span></span>
<span data-ttu-id="64d8d-382">Az Alkalmazásidentitás és a delegált felhasználói identitás típusok az alábbi folyamat ismerteti.</span><span class="sxs-lookup"><span data-stu-id="64d8d-382">Both the application identity and delegated user identity types are discussed in the flow below.</span></span> <span data-ttu-id="64d8d-383">A fő különbség a kettő között, hogy a felhasználó delegált identitása először kell szerezni az engedélyezési kód, mielőtt a felhasználó bejelentkezési és a webes API-k eléréséhez.</span><span class="sxs-lookup"><span data-stu-id="64d8d-383">The key difference between them is that the delegated user identity must first acquire an authorization code before the user can sign-in and gain access to the web API.</span></span>

##### <a name="application-identity-with-oauth-20-client-credentials-grant"></a><span data-ttu-id="64d8d-384">Az OAuth 2.0 ügyfél Alkalmazásidentitás hitelesítő adatok megadása</span><span class="sxs-lookup"><span data-stu-id="64d8d-384">Application Identity with OAuth 2.0 Client Credentials Grant</span></span>
1. <span data-ttu-id="64d8d-385">A felhasználó van bejelentkezve az Azure AD-t a webes alkalmazás (lásd a [webböngészőt a webes alkalmazás](#web-browser-to-web-application) fent).</span><span class="sxs-lookup"><span data-stu-id="64d8d-385">A user is signed in to Azure AD in the web application (see the [Web Browser to Web Application](#web-browser-to-web-application) above).</span></span>
2. <span data-ttu-id="64d8d-386">A webalkalmazásnak kell szerezni a hozzáférési tokent, hogy a webes API-t a hitelesítéshez és a kívánt erőforrás lekérése.</span><span class="sxs-lookup"><span data-stu-id="64d8d-386">The web application needs to acquire an access token so that it can authenticate to the web API and retrieve the desired resource.</span></span> <span data-ttu-id="64d8d-387">Ez egy kérést küld az Azure AD token-végpont, a hitelesítő adatokat, Alkalmazásazonosítót és webes API-alkalmazás URI azonosítója.</span><span class="sxs-lookup"><span data-stu-id="64d8d-387">It makes a request to Azure AD’s token endpoint, providing the credential, Application ID, and web API’s application ID URI.</span></span>
3. <span data-ttu-id="64d8d-388">Az Azure AD hitelesíti az alkalmazást, és adja vissza a JWT jogkivonat, amellyel a webes API hívása.</span><span class="sxs-lookup"><span data-stu-id="64d8d-388">Azure AD authenticates the application and returns a JWT access token that is used to call the web API.</span></span>
4. <span data-ttu-id="64d8d-389">A HTTPS PROTOKOLLOKON keresztül a webes alkalmazás használatával az visszaadott JWT jogkivonat a kérés hitelesítési fejlécéhez a "Tulajdonos" megjelölés JWT karakterlánc hozzáadása a webes API-t.</span><span class="sxs-lookup"><span data-stu-id="64d8d-389">Over HTTPS, the web application uses the returned JWT access token to add the JWT string with a “Bearer” designation in the Authorization header of the request to the web API.</span></span> <span data-ttu-id="64d8d-390">A webes API-k majd érvényesíti a JWT jogkivonatot, és ha az érvényesítés sikeres, akkor adja vissza a kívánt erőforrás.</span><span class="sxs-lookup"><span data-stu-id="64d8d-390">The web API then validates the JWT token, and if validation is successful, returns the desired resource.</span></span>

##### <a name="delegated-user-identity-with-openid-connect"></a><span data-ttu-id="64d8d-391">Delegált felhasználói identitás openid Connect</span><span class="sxs-lookup"><span data-stu-id="64d8d-391">Delegated User Identity with OpenID Connect</span></span>
1. <span data-ttu-id="64d8d-392">A felhasználó van bejelentkezve az Azure AD használata ingyenes webalkalmazás (lásd a [webböngészőt a webes alkalmazás](#web-browser-to-web-application) fenti szakaszban).</span><span class="sxs-lookup"><span data-stu-id="64d8d-392">A user is signed in to a web application using Azure AD (see the [Web Browser to Web Application](#web-browser-to-web-application) section above).</span></span> <span data-ttu-id="64d8d-393">Ha a felhasználó a webalkalmazás nem még hozzájárult lehetővé téve a webes alkalmazás a webes API hívásához a nevében, a felhasználó beleegyezését kell.</span><span class="sxs-lookup"><span data-stu-id="64d8d-393">If the user of the web application has not yet consented to allowing the web application to call the web API on its behalf, the user will need to consent.</span></span> <span data-ttu-id="64d8d-394">Az alkalmazás megjeleníti a szükséges engedélyekkel, és ha ezek egyikét sem rendszergazdai engedélyek, a címtárban a normál felhasználók nem fogják tudni hozzájárulás.</span><span class="sxs-lookup"><span data-stu-id="64d8d-394">The application will display the permissions it requires, and if any of these are administrator-level permissions, a normal user in the directory will not be able to consent.</span></span> <span data-ttu-id="64d8d-395">A hozzájárulási folyamat csak több-bérlős alkalmazásra vonatkozik, nem egyetlen bérlői alkalmazások, mint az alkalmazás már rendelkezik a szükséges engedélyekkel.</span><span class="sxs-lookup"><span data-stu-id="64d8d-395">This consent process only applies to multi-tenant applications, not single tenant applications, as the application will already have the necessary permissions.</span></span> <span data-ttu-id="64d8d-396">Amikor a felhasználó jelentkezik be, a webes alkalmazás kapott egy azonosító jogkivonat a felhasználó, valamint az engedélyezési kód kapcsolatos információkat.</span><span class="sxs-lookup"><span data-stu-id="64d8d-396">When the user signed in, the web application received an ID token with information about the user, as well as an authorization code.</span></span>
2. <span data-ttu-id="64d8d-397">Az Azure AD által kiadott engedélyezési kódot használja, a webes alkalmazás kérést küld, amely tartalmazza az engedélyezési kódot, az ügyfélalkalmazás (alkalmazás Azonosítóját és átirányítási URI-t), és a kívánt erőforrás (Alkalmazásazonosító URI-alkalmazás a webes API) az Azure AD-jogkivonat végpontjához.</span><span class="sxs-lookup"><span data-stu-id="64d8d-397">Using the authorization code issued by Azure AD, the web application sends a request to Azure AD’s token endpoint that includes the authorization code, details about the client application (Application ID and redirect URI), and the desired resource (application ID URI for the web API).</span></span>
3. <span data-ttu-id="64d8d-398">Az Azure AD érvényesíti az engedélyezési kódot és az információt a webalkalmazás és a webes API.</span><span class="sxs-lookup"><span data-stu-id="64d8d-398">The authorization code and information about the web application and web API are validated by Azure AD.</span></span> <span data-ttu-id="64d8d-399">Sikeres ellenőrzés esetén az Azure AD két jogkivonatok adja vissza: a JWT jogkivonat és egy frissítési JWT jogkivonat.</span><span class="sxs-lookup"><span data-stu-id="64d8d-399">Upon successful validation, Azure AD returns two tokens: a JWT access token and a JWT refresh token.</span></span>
4. <span data-ttu-id="64d8d-400">A HTTPS PROTOKOLLOKON keresztül a webes alkalmazás használatával az visszaadott JWT jogkivonat a kérés hitelesítési fejlécéhez a "Tulajdonos" megjelölés JWT karakterlánc hozzáadása a webes API-t.</span><span class="sxs-lookup"><span data-stu-id="64d8d-400">Over HTTPS, the web application uses the returned JWT access token to add the JWT string with a “Bearer” designation in the Authorization header of the request to the web API.</span></span> <span data-ttu-id="64d8d-401">A webes API-k majd érvényesíti a JWT jogkivonatot, és ha az érvényesítés sikeres, akkor adja vissza a kívánt erőforrás.</span><span class="sxs-lookup"><span data-stu-id="64d8d-401">The web API then validates the JWT token, and if validation is successful, returns the desired resource.</span></span>

##### <a name="delegated-user-identity-with-oauth-20-authorization-code-grant"></a><span data-ttu-id="64d8d-402">Az OAuth 2.0 kód Hitelesítésengedélyezési delegált felhasználók identitását</span><span class="sxs-lookup"><span data-stu-id="64d8d-402">Delegated User Identity with OAuth 2.0 Authorization Code Grant</span></span>
1. <span data-ttu-id="64d8d-403">A felhasználó már bejelentkezett egy webes alkalmazás, amelynek hitelesítési módszer használata az Azure AD független.</span><span class="sxs-lookup"><span data-stu-id="64d8d-403">A user is already signed in to a web application, whose authentication mechanism is independent of Azure AD.</span></span>
2. <span data-ttu-id="64d8d-404">A webalkalmazás az engedélyezési kód Szerezzen be a hozzáférési tokent, így azt a böngészőben egy kérelmet ad ki az Azure AD hitelesítési végpontra, Alkalmazásazonosító megadása és a sikeres hitelesítést követően a webes alkalmazás átirányítási URI-címe van szükség.</span><span class="sxs-lookup"><span data-stu-id="64d8d-404">The web application requires an authorization code to acquire an access token, so it issues a request through the browser to Azure AD’s authorization endpoint, providing the Application ID and redirect URI for the web application after successful authentication.</span></span> <span data-ttu-id="64d8d-405">A felhasználó bejelentkezik az Azure ad Szolgáltatásba.</span><span class="sxs-lookup"><span data-stu-id="64d8d-405">The user signs in to Azure AD.</span></span>
3. <span data-ttu-id="64d8d-406">Ha a felhasználó a webalkalmazás nem még hozzájárult lehetővé téve a webes alkalmazás a webes API hívásához a nevében, a felhasználó beleegyezését kell.</span><span class="sxs-lookup"><span data-stu-id="64d8d-406">If the user of the web application has not yet consented to allowing the web application to call the web API on its behalf, the user will need to consent.</span></span> <span data-ttu-id="64d8d-407">Az alkalmazás megjeleníti a szükséges engedélyekkel, és ha ezek egyikét sem rendszergazdai engedélyek, a címtárban a normál felhasználók nem fogják tudni hozzájárulás.</span><span class="sxs-lookup"><span data-stu-id="64d8d-407">The application will display the permissions it requires, and if any of these are administrator-level permissions, a normal user in the directory will not be able to consent.</span></span> <span data-ttu-id="64d8d-408">A hozzájárulási egyetlen és több-bérlős alkalmazásra vonatkozik.</span><span class="sxs-lookup"><span data-stu-id="64d8d-408">This consent applies to both single and multi-tenant application.</span></span>  <span data-ttu-id="64d8d-409">Az egyetlen bérlő esetében egy rendszergazda hajthat végre a rendszergazda jóváhagyását a hozzájárulási azok a felhasználók nevében.</span><span class="sxs-lookup"><span data-stu-id="64d8d-409">In the single tenant case, an admin can perform admin consent to consent on behalf of their users.</span></span>  <span data-ttu-id="64d8d-410">Ehhez használja a `Grant Permissions` gombra a [Azure Portal](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="64d8d-410">This can be done using the `Grant Permissions` button in the [Azure Portal](https://portal.azure.com).</span></span> 
4. <span data-ttu-id="64d8d-411">Miután a felhasználó hozzájárult, a webalkalmazás kap olyan hozzáférési jogkivonatot szerezni szükséges engedélyezési kódot.</span><span class="sxs-lookup"><span data-stu-id="64d8d-411">After the user has consented, the web application receives the authorization code that it needs to acquire an access token.</span></span>
5. <span data-ttu-id="64d8d-412">Az Azure AD által kiadott engedélyezési kódot használja, a webes alkalmazás kérést küld, amely tartalmazza az engedélyezési kódot, az ügyfélalkalmazás (alkalmazás Azonosítóját és átirányítási URI-t), és a kívánt erőforrás (Alkalmazásazonosító URI-alkalmazás a webes API) az Azure AD-jogkivonat végpontjához.</span><span class="sxs-lookup"><span data-stu-id="64d8d-412">Using the authorization code issued by Azure AD, the web application sends a request to Azure AD’s token endpoint that includes the authorization code, details about the client application (Application ID and redirect URI), and the desired resource (application ID URI for the web API).</span></span>
6. <span data-ttu-id="64d8d-413">Az Azure AD érvényesíti az engedélyezési kódot és az információt a webalkalmazás és a webes API.</span><span class="sxs-lookup"><span data-stu-id="64d8d-413">The authorization code and information about the web application and web API are validated by Azure AD.</span></span> <span data-ttu-id="64d8d-414">Sikeres ellenőrzés esetén az Azure AD két jogkivonatok adja vissza: a JWT jogkivonat és egy frissítési JWT jogkivonat.</span><span class="sxs-lookup"><span data-stu-id="64d8d-414">Upon successful validation, Azure AD returns two tokens: a JWT access token and a JWT refresh token.</span></span>
7. <span data-ttu-id="64d8d-415">A HTTPS PROTOKOLLOKON keresztül a webes alkalmazás használatával az visszaadott JWT jogkivonat a kérés hitelesítési fejlécéhez a "Tulajdonos" megjelölés JWT karakterlánc hozzáadása a webes API-t.</span><span class="sxs-lookup"><span data-stu-id="64d8d-415">Over HTTPS, the web application uses the returned JWT access token to add the JWT string with a “Bearer” designation in the Authorization header of the request to the web API.</span></span> <span data-ttu-id="64d8d-416">A webes API-k majd érvényesíti a JWT jogkivonatot, és ha az érvényesítés sikeres, akkor adja vissza a kívánt erőforrás.</span><span class="sxs-lookup"><span data-stu-id="64d8d-416">The web API then validates the JWT token, and if validation is successful, returns the desired resource.</span></span>

#### <a name="code-samples"></a><span data-ttu-id="64d8d-417">Kódminták</span><span class="sxs-lookup"><span data-stu-id="64d8d-417">Code Samples</span></span>
<span data-ttu-id="64d8d-418">A Kódminták talál Web API forgatókönyvek webalkalmazás.</span><span class="sxs-lookup"><span data-stu-id="64d8d-418">See the code samples for Web Application to Web API scenarios.</span></span> <span data-ttu-id="64d8d-419">És foglalkozzon gyakran--jelenleg felvenni új minták folyamatosan.</span><span class="sxs-lookup"><span data-stu-id="64d8d-419">And, check back frequently -- we add new samples all the time.</span></span> <span data-ttu-id="64d8d-420">Webes [alkalmazás webes API-hoz](active-directory-code-samples.md#web-application-to-web-api).</span><span class="sxs-lookup"><span data-stu-id="64d8d-420">Web [Application to Web API](active-directory-code-samples.md#web-application-to-web-api).</span></span>

#### <a name="registering"></a><span data-ttu-id="64d8d-421">Regisztrálása</span><span class="sxs-lookup"><span data-stu-id="64d8d-421">Registering</span></span>
* <span data-ttu-id="64d8d-422">Egybérlős: Az alkalmazás azonosítóját és a felhasználó delegált identitása esetekben, a webes alkalmazás és a webes API regisztrálni kell ugyanabban a könyvtárban az Azure ad-ben.</span><span class="sxs-lookup"><span data-stu-id="64d8d-422">Single Tenant: For both the application identity and delegated user identity cases, the web application and the web API must be registered in the same directory in Azure AD.</span></span> <span data-ttu-id="64d8d-423">A webes API-k engedélyekkel, szolgáló korlátozni az erőforrások eléréséhez a webalkalmazás közzétételét konfigurálható.</span><span class="sxs-lookup"><span data-stu-id="64d8d-423">The web API can be configured to expose a set of permissions, which are used to limit the web application’s access to its resources.</span></span> <span data-ttu-id="64d8d-424">A delegált felhasználói identitástípus használatos, ha a webalkalmazásnak kell válassza ki a kívánt engedélyeket az Azure portálon a "Engedélyek az egyéb alkalmazások" legördülő menüből.</span><span class="sxs-lookup"><span data-stu-id="64d8d-424">If a delegated user identity type is being used, the web application needs to select the desired permissions from the “Permissions to Other Applications” drop-down menu in the Azure Portal.</span></span> <span data-ttu-id="64d8d-425">Ez a lépés nincs szükség, ha az alkalmazás identity típus használatban van.</span><span class="sxs-lookup"><span data-stu-id="64d8d-425">This step is not required if the application identity type is being used.</span></span>
* <span data-ttu-id="64d8d-426">Több-Bérlős: Először a webes alkalmazás van konfigurálva a működéséhez szükséges engedélyek jelzi.</span><span class="sxs-lookup"><span data-stu-id="64d8d-426">Multi-Tenant: First, the web application is configured to indicate the permissions it requires to be functional.</span></span> <span data-ttu-id="64d8d-427">Amikor egy felhasználó vagy a rendszergazda a célkönyvtárban hozzájárulását adja az alkalmazásnak, amely lehetővé teszi a szervezet a szükséges engedélyek listája látható párbeszédpanel.</span><span class="sxs-lookup"><span data-stu-id="64d8d-427">This list of required permissions is shown in a dialog when a user or administrator in the destination directory gives consent to the application, which makes it available to their organization.</span></span> <span data-ttu-id="64d8d-428">Egyes alkalmazások csak a felhasználói szintű engedélyek, amelyek a szervezet bármely felhasználója is szükséges.</span><span class="sxs-lookup"><span data-stu-id="64d8d-428">Some applications require just user-level permissions, which any user in the organization can consent to.</span></span> <span data-ttu-id="64d8d-429">Más alkalmazásoknak rendszergazdai engedélyek, amelyek a szervezetben a felhasználók nem járulhatnak hozzá.</span><span class="sxs-lookup"><span data-stu-id="64d8d-429">Other applications require administrator-level permissions, which a user in the organization cannot consent to.</span></span> <span data-ttu-id="64d8d-430">Csak a címtár rendszergazdája biztosíthat hozzájárulási Ez a jogosultsági szint igénylő alkalmazások számára.</span><span class="sxs-lookup"><span data-stu-id="64d8d-430">Only a directory administrator can give consent to applications that require this level of permissions.</span></span> <span data-ttu-id="64d8d-431">Amikor a felhasználó vagy a rendszergazda hozzájárul, a webes alkalmazás és a webes API egyaránt regisztrálva van a címtárban.</span><span class="sxs-lookup"><span data-stu-id="64d8d-431">When the user or administrator consents, the web application and the web API are both registered in their directory.</span></span>

#### <a name="token-expiration"></a><span data-ttu-id="64d8d-432">Jogkivonat lejáratáról</span><span class="sxs-lookup"><span data-stu-id="64d8d-432">Token Expiration</span></span>
<span data-ttu-id="64d8d-433">Ha a webes alkalmazás is elérheti a JWT jogkivonat az engedélyezési kód használ, a JWT-frissítési jogkivonat is kap.</span><span class="sxs-lookup"><span data-stu-id="64d8d-433">When the web application uses its authorization code to get a JWT access token, it also receives a JWT refresh token.</span></span> <span data-ttu-id="64d8d-434">Ha a hozzáférési jogkivonat lejár, a frissítési jogkivonat segítségével újra hitelesíteni a felhasználót anélkül, hogy jelentkezzen be újra.</span><span class="sxs-lookup"><span data-stu-id="64d8d-434">When the access token expires, the refresh token can be used to re-authenticate the user without requiring them to sign in again.</span></span> <span data-ttu-id="64d8d-435">A frissítési jogkivonat majd segítségével hitelesíti a felhasználót, amely egy új hozzáférési jogkivonat és a frissítési jogkivonat eredményez.</span><span class="sxs-lookup"><span data-stu-id="64d8d-435">This refresh token is then used to authenticate the user, which results in a new access token and refresh token.</span></span>

### <a name="daemon-or-server-application-to-web-api"></a><span data-ttu-id="64d8d-436">Démon vagy kiszolgálói alkalmazás webes API-hoz</span><span class="sxs-lookup"><span data-stu-id="64d8d-436">Daemon or Server Application to Web API</span></span>
<span data-ttu-id="64d8d-437">Ez a szakasz ismerteti, amelyet a webes API-k erőforrások lekérése démon vagy kiszolgálói alkalmazás.</span><span class="sxs-lookup"><span data-stu-id="64d8d-437">This section describes a daemon or server application that needs to get resources from a web API.</span></span> <span data-ttu-id="64d8d-438">Két alárendelt esetben ez a szakasz vonatkozó: démon, amelyet a webes API OAuth 2.0 ügyfél hitelesítő adatok engedélytípus; épülő meghívása és a kiszolgáló alkalmazások (például a webes API-k), amelyet a webes API-k, OAuth 2.0 On-Behalf-Of vázlat specification épülő hívja.</span><span class="sxs-lookup"><span data-stu-id="64d8d-438">There are two sub-scenarios that apply to this section: A daemon that needs to call a web API, built on OAuth 2.0 client credentials grant type; and a server application (such as a web API) that needs to call a web API, built on OAuth 2.0 On-Behalf-Of draft specification.</span></span>

<span data-ttu-id="64d8d-439">A forgatókönyv esetében egy démon alkalmazást kell egy webes API-hívás esetén fontos tudni, hogy folyamatban van.</span><span class="sxs-lookup"><span data-stu-id="64d8d-439">For the scenario when a daemon application needs to call a web API, it’s important to understand a few things.</span></span> <span data-ttu-id="64d8d-440">Először nincs lehetőség egy démon alkalmazással, amelyhez az alkalmazás a saját identitással rendelkezik felhasználói beavatkozást.</span><span class="sxs-lookup"><span data-stu-id="64d8d-440">First, user interaction is not possible with a daemon application, which requires the application to have its own identity.</span></span> <span data-ttu-id="64d8d-441">Egy démon alkalmazás például egy kötegelt, vagy a háttérben futó operációs rendszer szolgáltatásnak.</span><span class="sxs-lookup"><span data-stu-id="64d8d-441">An example of a daemon application is a batch job, or an operating system service running in the background.</span></span> <span data-ttu-id="64d8d-442">Ez az alkalmazástípus kérései hozzáférési tokent az alkalmazás azonosítójának használatával, és az Alkalmazásazonosító, a hitelesítő adatok (jelszó vagy a tanúsítvány) és az alkalmazás bemutatása az Azure AD-Alkalmazásazonosító URI.</span><span class="sxs-lookup"><span data-stu-id="64d8d-442">This type of application requests an access token by using its application identity and presenting its Application ID, credential (password or certificate), and application ID URI to Azure AD.</span></span> <span data-ttu-id="64d8d-443">Sikeres hitelesítést követően a démon megkapja a hozzáférési tokent az Azure AD, majd a webes API hívásához használt.</span><span class="sxs-lookup"><span data-stu-id="64d8d-443">After successful authentication, the daemon receives an access token from Azure AD, which is then used to call the web API.</span></span>

<span data-ttu-id="64d8d-444">A forgatókönyvhöz egy kiszolgálói alkalmazás kell egy webes API-hívás esetén hasznos lehet egy példát.</span><span class="sxs-lookup"><span data-stu-id="64d8d-444">For the scenario when a server application needs to call a web API, it’s helpful to use an example.</span></span> <span data-ttu-id="64d8d-445">Tegyük fel, hogy a felhasználó a natív alkalmazás hitelesítette, és a natív alkalmazást kell webes API-hívás.</span><span class="sxs-lookup"><span data-stu-id="64d8d-445">Imagine that a user has authenticated on a native application, and this native application needs to call a web API.</span></span> <span data-ttu-id="64d8d-446">Az Azure AD kibocsát egy JWT jogkivonat a webes API hívásához.</span><span class="sxs-lookup"><span data-stu-id="64d8d-446">Azure AD issues a JWT access token to call the web API.</span></span> <span data-ttu-id="64d8d-447">Ha a webes API-t egy másik alsóbb rétegbeli webes API-t hívja, a a-meghatalmazásos folyamat használhatja a felhasználói identitás delegálásához, és az alacsonyabb szintű webes API-hoz.</span><span class="sxs-lookup"><span data-stu-id="64d8d-447">If the web API needs to call another downstream web API, it can use the on-behalf-of flow to delegate the user’s identity and authenticate to the second-tier web API.</span></span>

#### <a name="diagram"></a><span data-ttu-id="64d8d-448">Ábra</span><span class="sxs-lookup"><span data-stu-id="64d8d-448">Diagram</span></span>
![Démon vagy webes API-diagram kiszolgálói alkalmazás](./media/active-directory-authentication-scenarios/daemon_server_app_to_web_api.png)

#### <a name="description-of-protocol-flow"></a><span data-ttu-id="64d8d-450">Protokoll folyamat leírása</span><span class="sxs-lookup"><span data-stu-id="64d8d-450">Description of Protocol Flow</span></span>
##### <a name="application-identity-with-oauth-20-client-credentials-grant"></a><span data-ttu-id="64d8d-451">Az OAuth 2.0 ügyfél Alkalmazásidentitás hitelesítő adatok megadása</span><span class="sxs-lookup"><span data-stu-id="64d8d-451">Application Identity with OAuth 2.0 Client Credentials Grant</span></span>
1. <span data-ttu-id="64d8d-452">Először a kiszolgálóalkalmazás kell hitelesítenie magát az Azure ad szolgáltatással, mint például az interaktív bejelentkezési párbeszédpanel emberi beavatkozás nélkül.</span><span class="sxs-lookup"><span data-stu-id="64d8d-452">First, the server application needs to authenticate with Azure AD as itself, without any human interaction such as an interactive sign-on dialog.</span></span> <span data-ttu-id="64d8d-453">Ez egy kérést küld az Azure AD token-végpont, a hitelesítő adatok, a Alkalmazásazonosító és az alkalmazás URI azonosítója.</span><span class="sxs-lookup"><span data-stu-id="64d8d-453">It makes a request to Azure AD’s token endpoint, providing the credential, Application ID, and application ID URI.</span></span>
2. <span data-ttu-id="64d8d-454">Az Azure AD hitelesíti az alkalmazást, és adja vissza a JWT jogkivonat, amellyel a webes API hívása.</span><span class="sxs-lookup"><span data-stu-id="64d8d-454">Azure AD authenticates the application and returns a JWT access token that is used to call the web API.</span></span>
3. <span data-ttu-id="64d8d-455">A HTTPS PROTOKOLLOKON keresztül a webes alkalmazás használatával az visszaadott JWT jogkivonat a kérés hitelesítési fejlécéhez a "Tulajdonos" megjelölés JWT karakterlánc hozzáadása a webes API-t.</span><span class="sxs-lookup"><span data-stu-id="64d8d-455">Over HTTPS, the web application uses the returned JWT access token to add the JWT string with a “Bearer” designation in the Authorization header of the request to the web API.</span></span> <span data-ttu-id="64d8d-456">A webes API-k majd érvényesíti a JWT jogkivonatot, és ha az érvényesítés sikeres, akkor adja vissza a kívánt erőforrás.</span><span class="sxs-lookup"><span data-stu-id="64d8d-456">The web API then validates the JWT token, and if validation is successful, returns the desired resource.</span></span>

##### <a name="delegated-user-identity-with-oauth-20-on-behalf-of-draft-specification"></a><span data-ttu-id="64d8d-457">OAuth 2.0 a nevében-az Vázlat meghatározásával delegált felhasználói azonosító</span><span class="sxs-lookup"><span data-stu-id="64d8d-457">Delegated User Identity with OAuth 2.0 On-Behalf-Of Draft Specification</span></span>
<span data-ttu-id="64d8d-458">Az alábbiakban tárgyalt folyamata azt feltételezi, hogy, hogy a felhasználó hitelesítése egy másik alkalmazástól (például egy natív alkalmazás), és a felhasználói identitás már használja egy hozzáférési jogkivonatát az első szintű webes API-k megszerzésére.</span><span class="sxs-lookup"><span data-stu-id="64d8d-458">The flow discussed below assumes that a user has been authenticated on another application (such as a native application), and their user identity has been used to acquire an access token to the first-tier web API.</span></span>

1. <span data-ttu-id="64d8d-459">A natív alkalmazás küld az első szintű webes API-t a hozzáférési jogkivonat.</span><span class="sxs-lookup"><span data-stu-id="64d8d-459">The native application sends the access token to the first-tier web API.</span></span>
2. <span data-ttu-id="64d8d-460">Az első szintű webes API-t egy kérést küld az Azure AD token-végpont, így az alkalmazás Azonosítóját és hitelesítő adatait, valamint a felhasználói jogkivonat.</span><span class="sxs-lookup"><span data-stu-id="64d8d-460">The first-tier web API sends a request to Azure AD’s token endpoint, providing its Application ID and credentials, as well as the user’s access token.</span></span> <span data-ttu-id="64d8d-461">Emellett a kérelem nem jut egy on_behalf_of paraméter, amely azt jelzi, a webes API által kért új jogkivonatai és az eredeti felhasználó nevében alsóbb rétegbeli webes API-hívás.</span><span class="sxs-lookup"><span data-stu-id="64d8d-461">In addition, the request is sent with an on_behalf_of parameter that indicates the web API is requesting new tokens to call a downstream web API on behalf of the original user.</span></span>
3. <span data-ttu-id="64d8d-462">Az Azure AD ellenőrzi, hogy az első szintű webes API-k jogosult az elérésére, a második szintű webes API-t, és érvényesíti a kérelem egy JWT jogkivonatot ad vissza, és a jwt-t frissítési token az első szintű webes API-hoz.</span><span class="sxs-lookup"><span data-stu-id="64d8d-462">Azure AD verifies that the first-tier web API has permissions to access the second-tier web API and validates the request, returning a JWT access token and a JWT refresh token to the first-tier web API.</span></span>
4. <span data-ttu-id="64d8d-463">A HTTPS PROTOKOLLOKON keresztül az első szintű web API majd meghívja a második szintű webes API-t a kérés hitelesítési fejlécéhez a lexikális elem karakterlánca hozzáfűzésével.</span><span class="sxs-lookup"><span data-stu-id="64d8d-463">Over HTTPS, the first-tier web API then calls the second-tier web API by appending the token string in the Authorization header in the request.</span></span> <span data-ttu-id="64d8d-464">Az első szintű webes API-t továbbra is a második szintű webes API-k hívható meg, amíg a hozzáférési jogkivonat és frissítési jogkivonatok érvényesek.</span><span class="sxs-lookup"><span data-stu-id="64d8d-464">The first-tier web API can continue to call the second-tier web API as long as the access token and refresh tokens are valid.</span></span>

#### <a name="code-samples"></a><span data-ttu-id="64d8d-465">Kódminták</span><span class="sxs-lookup"><span data-stu-id="64d8d-465">Code Samples</span></span>
<span data-ttu-id="64d8d-466">Tekintse meg a mintakódok démon vagy webes API-forgatókönyvek kiszolgálói alkalmazás.</span><span class="sxs-lookup"><span data-stu-id="64d8d-466">See the code samples for Daemon or Server Application to Web API scenarios.</span></span> <span data-ttu-id="64d8d-467">És foglalkozzon gyakran--jelenleg felvenni új minták folyamatosan.</span><span class="sxs-lookup"><span data-stu-id="64d8d-467">And, check back frequently -- we add new samples all the time.</span></span> [<span data-ttu-id="64d8d-468">Kiszolgáló vagy démon alkalmazás webes API-hoz</span><span class="sxs-lookup"><span data-stu-id="64d8d-468">Server or Daemon Application to Web API</span></span>](active-directory-code-samples.md#server-or-daemon-application-to-web-api)

#### <a name="registering"></a><span data-ttu-id="64d8d-469">Regisztrálása</span><span class="sxs-lookup"><span data-stu-id="64d8d-469">Registering</span></span>
* <span data-ttu-id="64d8d-470">Egybérlős: Az alkalmazás azonosítóját és a felhasználó delegált identitása esetekben, a démon vagy kiszolgálói alkalmazás regisztrálni kell ugyanabban a könyvtárban az Azure ad-ben.</span><span class="sxs-lookup"><span data-stu-id="64d8d-470">Single Tenant: For both the application identity and delegated user identity cases, the daemon or server application must be registered in the same directory in Azure AD.</span></span> <span data-ttu-id="64d8d-471">A webes API-k beállítható úgy, hogy az engedélyekkel, korlátozza a démon vagy az erőforrások kiszolgáló elérésére használt tenni.</span><span class="sxs-lookup"><span data-stu-id="64d8d-471">The web API can be configured to expose a set of permissions, which are used to limit the daemon or server’s access to its resources.</span></span> <span data-ttu-id="64d8d-472">A delegált felhasználói identitástípus használatos, ha a kiszolgálóalkalmazás kell válassza ki a kívánt engedélyeket az Azure portálon a "Engedélyek az egyéb alkalmazások" legördülő menüből.</span><span class="sxs-lookup"><span data-stu-id="64d8d-472">If a delegated user identity type is being used, the server application needs to select the desired permissions from the “Permissions to Other Applications” drop-down menu in the Azure Portal.</span></span> <span data-ttu-id="64d8d-473">Ez a lépés nincs szükség, ha az alkalmazás identity típus használatban van.</span><span class="sxs-lookup"><span data-stu-id="64d8d-473">This step is not required if the application identity type is being used.</span></span>
* <span data-ttu-id="64d8d-474">Több-Bérlős: Először a démon vagy a kiszolgáló alkalmazás van konfigurálva a működéséhez szükséges engedélyek jelzi.</span><span class="sxs-lookup"><span data-stu-id="64d8d-474">Multi-Tenant: First, the daemon or server application is configured to indicate the permissions it requires to be functional.</span></span> <span data-ttu-id="64d8d-475">Amikor egy felhasználó vagy a rendszergazda a célkönyvtárban hozzájárulását adja az alkalmazásnak, amely lehetővé teszi a szervezet a szükséges engedélyek listája látható párbeszédpanel.</span><span class="sxs-lookup"><span data-stu-id="64d8d-475">This list of required permissions is shown in a dialog when a user or administrator in the destination directory gives consent to the application, which makes it available to their organization.</span></span> <span data-ttu-id="64d8d-476">Egyes alkalmazások csak a felhasználói szintű engedélyek, amelyek a szervezet bármely felhasználója is szükséges.</span><span class="sxs-lookup"><span data-stu-id="64d8d-476">Some applications require just user-level permissions, which any user in the organization can consent to.</span></span> <span data-ttu-id="64d8d-477">Más alkalmazásoknak rendszergazdai engedélyek, amelyek a szervezetben a felhasználók nem járulhatnak hozzá.</span><span class="sxs-lookup"><span data-stu-id="64d8d-477">Other applications require administrator-level permissions, which a user in the organization cannot consent to.</span></span> <span data-ttu-id="64d8d-478">Csak a címtár rendszergazdája biztosíthat hozzájárulási Ez a jogosultsági szint igénylő alkalmazások számára.</span><span class="sxs-lookup"><span data-stu-id="64d8d-478">Only a directory administrator can give consent to applications that require this level of permissions.</span></span> <span data-ttu-id="64d8d-479">Amikor a felhasználó vagy a rendszergazda hozzájárul, mind a webes API-k a könyvtárban van regisztrálva.</span><span class="sxs-lookup"><span data-stu-id="64d8d-479">When the user or administrator consents, both of the web APIs are registered in their directory.</span></span>

#### <a name="token-expiration"></a><span data-ttu-id="64d8d-480">Jogkivonat lejáratáról</span><span class="sxs-lookup"><span data-stu-id="64d8d-480">Token Expiration</span></span>
<span data-ttu-id="64d8d-481">Ha az első alkalmazás használja az engedélyezési kód is elérheti a JWT jogkivonat, is kap egy frissítési JWT jogkivonat.</span><span class="sxs-lookup"><span data-stu-id="64d8d-481">When the first application uses its authorization code to get a JWT access token, it also receives a JWT refresh token.</span></span> <span data-ttu-id="64d8d-482">Ha a hozzáférési jogkivonat lejár, a frissítési jogkivonat segítségével újra hitelesíteni a felhasználót a hitelesítő adatok kérése nélkül.</span><span class="sxs-lookup"><span data-stu-id="64d8d-482">When the access token expires, the refresh token can be used to re-authenticate the user without prompting for credentials.</span></span> <span data-ttu-id="64d8d-483">A frissítési jogkivonat majd segítségével hitelesíti a felhasználót, amely egy új hozzáférési jogkivonat és a frissítési jogkivonat eredményez.</span><span class="sxs-lookup"><span data-stu-id="64d8d-483">This refresh token is then used to authenticate the user, which results in a new access token and refresh token.</span></span>

## <a name="see-also"></a><span data-ttu-id="64d8d-484">Lásd még:</span><span class="sxs-lookup"><span data-stu-id="64d8d-484">See Also</span></span>
[<span data-ttu-id="64d8d-485">Az Azure Active Directory fejlesztői útmutatója</span><span class="sxs-lookup"><span data-stu-id="64d8d-485">Azure Active Directory Developer's Guide</span></span>](active-directory-developers-guide.md)

[<span data-ttu-id="64d8d-486">Az Azure Active Directory-Kódminták</span><span class="sxs-lookup"><span data-stu-id="64d8d-486">Azure Active Directory Code Samples</span></span>](active-directory-code-samples.md)

[<span data-ttu-id="64d8d-487">Fontos információkat a kulcsváltás Azure AD-ben</span><span class="sxs-lookup"><span data-stu-id="64d8d-487">Important Information About Signing Key Rollover in Azure AD</span></span>](active-directory-signing-key-rollover.md)

[<span data-ttu-id="64d8d-488">OAuth 2.0 Azure AD-ben</span><span class="sxs-lookup"><span data-stu-id="64d8d-488">OAuth 2.0 in Azure AD</span></span>](https://msdn.microsoft.com/library/azure/dn645545.aspx)

