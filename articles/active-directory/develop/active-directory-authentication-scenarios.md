---
title: "Forgatókönyvek az Azure AD aaaAuthentication |} Microsoft Docs"
description: "Hello öt leggyakoribb hitelesítési forgatókönyvek az Azure Active Directory (AAD) áttekintése"
services: active-directory
documentationcenter: dev-center-name
author: skwan
manager: mbaldwin
editor: 
ms.assetid: 0c84e7d0-16aa-4897-82f2-f53c6c990fd9
ms.service: active-directory
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: identity
ms.date: 04/27/2017
ms.author: skwan
ms.custom: aaddev
ms.openlocfilehash: 5b391e3f096fcb52934c4a8aff08688352bfd3dc
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/06/2017
---
# <a name="authentication-scenarios-for-azure-ad"></a><span data-ttu-id="565ce-103">Hitelesítési forgatókönyvek az Azure AD-hez</span><span class="sxs-lookup"><span data-stu-id="565ce-103">Authentication Scenarios for Azure AD</span></span>
<span data-ttu-id="565ce-104">Azure Active Directory (Azure AD) egyszerűsíti a fejlesztők hitelesítési azzal, hogy identitás szolgáltatásként,-támogatással rendelkező a szabványos protokollok, például az OAuth 2.0-s és OpenID Connect, valamint a különböző platformokon toohelp nyílt forráskódú szalagtárak akkor elkezdésére gyorsan.</span><span class="sxs-lookup"><span data-stu-id="565ce-104">Azure Active Directory (Azure AD) simplifies authentication for developers by providing identity as a service, with support for industry-standard protocols such as OAuth 2.0 and OpenID Connect, as well as open source libraries for different platforms toohelp you start coding quickly.</span></span> <span data-ttu-id="565ce-105">Ez a dokumentum segít ismeri hello különböző forgatókönyvek az Azure AD által támogatott, és bemutatja, hogyan tooget el.</span><span class="sxs-lookup"><span data-stu-id="565ce-105">This document will help you understand hello various scenarios Azure AD supports and will show you how tooget started.</span></span> <span data-ttu-id="565ce-106">A következő szakaszok hello részből áll:</span><span class="sxs-lookup"><span data-stu-id="565ce-106">It’s divided into hello following sections:</span></span>

* [<span data-ttu-id="565ce-107">Az Azure AD hitelesítési alapjai</span><span class="sxs-lookup"><span data-stu-id="565ce-107">Basics of Authentication in Azure AD</span></span>](#basics-of-authentication-in-azure-ad)
* [<span data-ttu-id="565ce-108">Az Azure AD biztonsági jogkivonatokat a jogcím</span><span class="sxs-lookup"><span data-stu-id="565ce-108">Claims in Azure AD Security Tokens</span></span>](#claims-in-azure-ad-security-tokens)
* [<span data-ttu-id="565ce-109">Egy alkalmazás regisztrálása az Azure AD alapjai</span><span class="sxs-lookup"><span data-stu-id="565ce-109">Basics of Registering an Application in Azure AD</span></span>](#basics-of-registering-an-application-in-azure-ad)
* [<span data-ttu-id="565ce-110">Alkalmazástípusok és forgatókönyvek</span><span class="sxs-lookup"><span data-stu-id="565ce-110">Application Types and Scenarios</span></span>](#application-types-and-scenarios)
  
  * [<span data-ttu-id="565ce-111">Webes böngésző tooWeb alkalmazás</span><span class="sxs-lookup"><span data-stu-id="565ce-111">Web Browser tooWeb Application</span></span>](#web-browser-to-web-application)
  * [<span data-ttu-id="565ce-112">Egylapos alkalmazások (SPA)</span><span class="sxs-lookup"><span data-stu-id="565ce-112">Single Page Application (SPA)</span></span>](#single-page-application-spa)
  * [<span data-ttu-id="565ce-113">Natív alkalmazás tooWeb API</span><span class="sxs-lookup"><span data-stu-id="565ce-113">Native Application tooWeb API</span></span>](#native-application-to-web-api)
  * [<span data-ttu-id="565ce-114">Webes alkalmazás tooWeb API</span><span class="sxs-lookup"><span data-stu-id="565ce-114">Web Application tooWeb API</span></span>](#web-application-to-web-api)
  * [<span data-ttu-id="565ce-115">Démon vagy kiszolgálói alkalmazás tooWeb API</span><span class="sxs-lookup"><span data-stu-id="565ce-115">Daemon or Server Application tooWeb API</span></span>](#daemon-or-server-application-to-web-api)

## <a name="basics-of-authentication-in-azure-ad"></a><span data-ttu-id="565ce-116">Az Azure AD hitelesítési alapjai</span><span class="sxs-lookup"><span data-stu-id="565ce-116">Basics of Authentication in Azure AD</span></span>
<span data-ttu-id="565ce-117">Ha nem ismeri az Azure AD authentication alapvető fogalmait, olvassa el az ebben a szakaszban.</span><span class="sxs-lookup"><span data-stu-id="565ce-117">If you are unfamiliar with basic concepts of authentication in Azure AD, read this section.</span></span> <span data-ttu-id="565ce-118">Ellenkező esetben érdemes lehet tooskip le túl[alkalmazástípusok és forgatókönyvek](#application-types-and-scenarios).</span><span class="sxs-lookup"><span data-stu-id="565ce-118">Otherwise, you may want tooskip down too[Application Types and Scenarios](#application-types-and-scenarios).</span></span>

<span data-ttu-id="565ce-119">Mérlegeljük, ahol szükség-e identitás hello legalapvetőbb forgatókönyv: egy webböngészőben a felhasználó számára szükséges tooauthenticate tooa webes alkalmazást.</span><span class="sxs-lookup"><span data-stu-id="565ce-119">Let’s consider hello most basic scenario where identity is required: a user in a web browser needs tooauthenticate tooa web application.</span></span> <span data-ttu-id="565ce-120">Ebben a forgatókönyvben a hello nagyobb részletességgel ismertetett [webböngésző tooWeb alkalmazás](#web-browser-to-web-application) szakaszában, de a egy hasznos hello képességek az Azure AD és a pont tooillustrate indítása conceptualize hello forgatókönyv működése.</span><span class="sxs-lookup"><span data-stu-id="565ce-120">This scenario is described in greater detail in hello [Web Browser tooWeb Application](#web-browser-to-web-application) section, but it’s a useful starting point tooillustrate hello capabilities of Azure AD and conceptualize how hello scenario works.</span></span> <span data-ttu-id="565ce-121">Vegye figyelembe a következő ábrán a forgatókönyv hello:</span><span class="sxs-lookup"><span data-stu-id="565ce-121">Consider hello following diagram for this scenario:</span></span>

![Bejelentkezés tooweb alkalmazás áttekintése](./media/active-directory-authentication-scenarios/basics_of_auth_in_aad.png)

<span data-ttu-id="565ce-123">Vegye figyelembe a fenti ábrának hello, itt nem találja tooknow kapcsolatos különféle összetevői:</span><span class="sxs-lookup"><span data-stu-id="565ce-123">With hello diagram above in mind, here’s what you need tooknow about its various components:</span></span>

* <span data-ttu-id="565ce-124">Az Azure AD hello identitásszolgáltató, felhasználók és az alkalmazások, amely szerepel a munkahely címtárában hello identitásának ellenőrzésére, és végső soron a biztonsági jogkivonatokat ezen felhasználók és az alkalmazások sikeres hitelesítés után kiállító felelős.</span><span class="sxs-lookup"><span data-stu-id="565ce-124">Azure AD is hello identity provider, responsible for verifying hello identity of users and applications that exist in an organization’s directory, and ultimately issuing security tokens upon successful authentication of those users and applications.</span></span>
* <span data-ttu-id="565ce-125">Szeretne toooutsource hitelesítési tooAzure AD alkalmazás az Azure AD, ami regisztrálja, és egyedi módon azonosítja az hello könyvtárban hello alkalmazást regisztrálni kell.</span><span class="sxs-lookup"><span data-stu-id="565ce-125">An application that wants toooutsource authentication tooAzure AD must be registered in Azure AD, which registers and uniquely identifies hello app in hello directory.</span></span>
* <span data-ttu-id="565ce-126">A fejlesztők a hello nyílt forráskódú az Azure AD hitelesítési könyvtárak toomake hitelesítési könnyen hello protokoll alfolyamatot kezelnek meg.</span><span class="sxs-lookup"><span data-stu-id="565ce-126">Developers can use hello open source Azure AD authentication libraries toomake authentication easy by handling hello protocol details for you.</span></span> <span data-ttu-id="565ce-127">Lásd: [Azure Active Directory hitelesítési Kódtárai](active-directory-authentication-libraries.md) további információt.</span><span class="sxs-lookup"><span data-stu-id="565ce-127">See [Azure Active Directory Authentication Libraries](active-directory-authentication-libraries.md) for more information.</span></span>

<span data-ttu-id="565ce-128">• Egyszer a felhasználó hitelesítése, hello alkalmazás hello felhasználó biztonsági jogkivonat tooensure ellenőrizni kell, hogy a hitelesítés sikeres volt, a hello szánt felek.</span><span class="sxs-lookup"><span data-stu-id="565ce-128">• Once a user has been authenticated, hello application must validate hello user’s security token tooensure that authentication was successful for hello intended parties.</span></span> <span data-ttu-id="565ce-129">A fejlesztők a szalagtárak toohandle hitelesítése bármely jogkivonat adta meg az Azure AD, beleértve a JSON Web Tokens (JWT) vagy a SAML 2.0 hello.</span><span class="sxs-lookup"><span data-stu-id="565ce-129">Developers can use hello provided authentication libraries toohandle validation of any token from Azure AD, including JSON Web Tokens (JWT) or SAML 2.0.</span></span> <span data-ttu-id="565ce-130">Ha manuálisan szeretné tooperform érvényesítési, lásd: hello [JWT jogkivonat-kezelő](https://msdn.microsoft.com/library/dn205065.aspx) dokumentációját.</span><span class="sxs-lookup"><span data-stu-id="565ce-130">If you want tooperform validation manually, see hello [JWT Token Handler](https://msdn.microsoft.com/library/dn205065.aspx) documentation.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="565ce-131">Az Azure AD nyilvános kulcsú hitelesítésen toosign jogkivonatokat használ, és győződjön meg arról, hogy azok érvényesek.</span><span class="sxs-lookup"><span data-stu-id="565ce-131">Azure AD uses public key cryptography toosign tokens and verify that they are valid.</span></span> <span data-ttu-id="565ce-132">Lásd: [fontos információk kapcsolatos aláírási kulcs átfordulási az Azure AD](active-directory-signing-key-rollover.md) hello szükséges logika további információt, szerepelnie kell az alkalmazás tooensure mindig frissíteni hello legújabb kulcsokkal.</span><span class="sxs-lookup"><span data-stu-id="565ce-132">See [Important Information About Signing Key Rollover in Azure AD](active-directory-signing-key-rollover.md) for more information on hello necessary logic you must have in your application tooensure it’s always updated with hello latest keys.</span></span>
> 
> 

<span data-ttu-id="565ce-133">• hello kérelmeit és válaszait hello hitelesítési folyamat határozzák meg hello hitelesítési protokoll, amelyet használt, például az OAuth 2.0, az OpenID Connect, vagy a WS-Federation, SAML 2.0-s.</span><span class="sxs-lookup"><span data-stu-id="565ce-133">• hello flow of requests and responses for hello authentication process is determined by hello authentication protocol that was used, such as OAuth 2.0, OpenID Connect, WS-Federation, or SAML 2.0.</span></span> <span data-ttu-id="565ce-134">Ezek a protokollok hello részletes ismertetése [Azure Active Directory hitelesítési protokolljai](active-directory-authentication-protocols.md) témakör és az alábbi szakaszokban hello.</span><span class="sxs-lookup"><span data-stu-id="565ce-134">These protocols are discussed in more detail in hello [Azure Active Directory Authentication Protocols](active-directory-authentication-protocols.md) topic and in hello sections below.</span></span>

> [!NOTE]
> <span data-ttu-id="565ce-135">Az Azure AD hello OAuth 2.0 támogatja, és OpenID Connect szabványok, amelyek nagy mennyiségű használja a tulajdonosi jogkivonatok, beleértve a tulajdonosi jogkivonatok JWTs-ként.</span><span class="sxs-lookup"><span data-stu-id="565ce-135">Azure AD supports hello OAuth 2.0 and OpenID Connect standards that make extensive use of bearer tokens, including bearer tokens represented as JWTs.</span></span> <span data-ttu-id="565ce-136">Egy tulajdonosi jogkivonatot egy egyszerűsített biztonsági jogkivonatot, hogy biztosít hello "tulajdonos" hozzáférési tooa erőforrás védelemmel ellátva.</span><span class="sxs-lookup"><span data-stu-id="565ce-136">A bearer token is a lightweight security token that grants hello “bearer” access tooa protected resource.</span></span> <span data-ttu-id="565ce-137">Abban az értelemben a "tulajdonos" hello, akik hello token félre.</span><span class="sxs-lookup"><span data-stu-id="565ce-137">In this sense, hello “bearer” is any party that can present hello token.</span></span> <span data-ttu-id="565ce-138">Egy entitás először hitelesítenie kell magát az Azure AD tooreceive hello tulajdonosi jogkivonattal, ha hello szükséges lépések nem veszi toosecure hello lexikális elem szerepel az átvitel és a tárolási, bár hozzá, és egy nem kívánt félnek használják.</span><span class="sxs-lookup"><span data-stu-id="565ce-138">Though a party must first authenticate with Azure AD tooreceive hello bearer token, if hello required steps are not taken toosecure hello token in transmission and storage, it can be intercepted and used by an unintended party.</span></span> <span data-ttu-id="565ce-139">Míg néhány biztonsági jogkivonatokat egy beépített mechanizmust meggátolja, hogy a nem hitelesített felek használja őket, a tulajdonosi jogkivonatok nem rendelkezik a mechanizmus, és kell szállítani, például a transport layer security (HTTPS) biztonságos csatorna.</span><span class="sxs-lookup"><span data-stu-id="565ce-139">While some security tokens have a built-in mechanism for preventing unauthorized parties from using them, bearer tokens do not have this mechanism and must be transported in a secure channel such as transport layer security (HTTPS).</span></span> <span data-ttu-id="565ce-140">Egy tulajdonosi jogkivonatot egyértelmű hello küldött a rendszer, a man a hello középső támadás rosszindulatú fél tooacquire hello jogkivonat használatával, és használhassák az illetéktelen hozzáféréstől tooa védett erőforrás.</span><span class="sxs-lookup"><span data-stu-id="565ce-140">If a bearer token is transmitted in hello clear, a man-in hello middle attack can be used by a malicious party tooacquire hello token and use it for an unauthorized access tooa protected resource.</span></span> <span data-ttu-id="565ce-141">hello ugyanazt biztonsági elveket alkalmazza, ha a tárolást, vagy a gyorsítótárazás tulajdonosi jogkivonatok későbbi használatra.</span><span class="sxs-lookup"><span data-stu-id="565ce-141">hello same security principles apply when storing or caching bearer tokens for later use.</span></span> <span data-ttu-id="565ce-142">Mindig győződjön meg arról, hogy az alkalmazás továbbítja, és biztonságos módon tárolja a tulajdonosi jogkivonatokhoz.</span><span class="sxs-lookup"><span data-stu-id="565ce-142">Always ensure that your application transmits and stores bearer tokens in a secure manner.</span></span> <span data-ttu-id="565ce-143">További biztonsági szempontok a tulajdonosi jogkivonatok, lásd: [RFC 6750 szakasz 5](http://tools.ietf.org/html/rfc6750).</span><span class="sxs-lookup"><span data-stu-id="565ce-143">For more security considerations on bearer tokens, see [RFC 6750 Section 5](http://tools.ietf.org/html/rfc6750).</span></span>
> 
> 

<span data-ttu-id="565ce-144">Most, hogy hello alapjai, olvassa el alább toounderstand hello szakaszokat áttekintést hogyan kiépítés működik az Azure ad-ben, és támogatja a hello gyakori forgatókönyvek az Azure AD.</span><span class="sxs-lookup"><span data-stu-id="565ce-144">Now that you have an overview of hello basics, read hello sections below toounderstand how provisioning works in Azure AD and hello common scenarios Azure AD supports.</span></span>

## <a name="claims-in-azure-ad-security-tokens"></a><span data-ttu-id="565ce-145">Az Azure AD biztonsági jogkivonatokat a jogcím</span><span class="sxs-lookup"><span data-stu-id="565ce-145">Claims in Azure AD Security Tokens</span></span>
<span data-ttu-id="565ce-146">Az Azure AD által kiadott biztonsági jogkivonatokat jogcímeket vagy helyességi feltételek hitelesítése hello tulajdonos információt tartalmaz.</span><span class="sxs-lookup"><span data-stu-id="565ce-146">Security tokens issued by Azure AD contain claims, or assertions of information about hello subject that has been authenticated.</span></span> <span data-ttu-id="565ce-147">Ezeket a jogcímeket a különböző feladatokhoz hello alkalmazás által használható.</span><span class="sxs-lookup"><span data-stu-id="565ce-147">These claims can be used by hello application for various tasks.</span></span> <span data-ttu-id="565ce-148">Például használt toovalidate hello jogkivonatot kell, azonosítása hello tulajdonos directory-bérlő, felhasználói információk megjelenítése, megállapítása hello tulajdonos, és így tovább.</span><span class="sxs-lookup"><span data-stu-id="565ce-148">For example, they can be used toovalidate hello token, identify hello subject's directory tenant, display user information, determine hello subject's authorization, and so on.</span></span> <span data-ttu-id="565ce-149">hello jogcím szerepel a megadott biztonsági jogkivonat hello típusú jogkivonat, hello használt hitelesítő adat tooauthenticate hello felhasználó, és hello Alkalmazáskonfiguráció függenek.</span><span class="sxs-lookup"><span data-stu-id="565ce-149">hello claims present in any given security token are dependent upon hello type of token, hello type of credential used tooauthenticate hello user, and hello application configuration.</span></span> <span data-ttu-id="565ce-150">Minden Azure AD által kibocsátott jogcím típusú rövid leírása az alábbi táblázat hello valósul meg.</span><span class="sxs-lookup"><span data-stu-id="565ce-150">A brief description of each type of claim emitted by Azure AD is provided in hello table below.</span></span> <span data-ttu-id="565ce-151">További információkért tekintse meg túl[támogatott jogkivonat és jogcímtípusok](active-directory-token-and-claims.md).</span><span class="sxs-lookup"><span data-stu-id="565ce-151">For more information, refer too[Supported Token and Claim Types](active-directory-token-and-claims.md).</span></span>

| <span data-ttu-id="565ce-152">Jogcím</span><span class="sxs-lookup"><span data-stu-id="565ce-152">Claim</span></span> | <span data-ttu-id="565ce-153">Leírás</span><span class="sxs-lookup"><span data-stu-id="565ce-153">Description</span></span> |
| --- | --- |
| <span data-ttu-id="565ce-154">Alkalmazásazonosító</span><span class="sxs-lookup"><span data-stu-id="565ce-154">Application ID</span></span> |<span data-ttu-id="565ce-155">Határozza meg, amely hello jogkivonatot használja hello alkalmazást.</span><span class="sxs-lookup"><span data-stu-id="565ce-155">Identifies hello application that is using hello token.</span></span> |
| <span data-ttu-id="565ce-156">Célközönség</span><span class="sxs-lookup"><span data-stu-id="565ce-156">Audience</span></span> |<span data-ttu-id="565ce-157">Azonosítja a hello címzett erőforrás hello jogkivonat számára készült.</span><span class="sxs-lookup"><span data-stu-id="565ce-157">Identifies hello recipient resource hello token is intended for.</span></span> |
| <span data-ttu-id="565ce-158">Alkalmazás hitelesítési környezeti osztályait ismertető dokumentációban</span><span class="sxs-lookup"><span data-stu-id="565ce-158">Application Authentication Context Class Reference</span></span> |<span data-ttu-id="565ce-159">Azt jelzi, hogyan hello ügyfél hitelesített (nyilvános ügyfél és a bizalmas ügyfél).</span><span class="sxs-lookup"><span data-stu-id="565ce-159">Indicates how hello client was authenticated (public client vs. confidential client).</span></span> |
| <span data-ttu-id="565ce-160">Azonnali hitelesítés</span><span class="sxs-lookup"><span data-stu-id="565ce-160">Authentication Instant</span></span> |<span data-ttu-id="565ce-161">Rekordok hello dátum és idő, amikor hello hitelesítési történt.</span><span class="sxs-lookup"><span data-stu-id="565ce-161">Records hello date and time when hello authentication occurred.</span></span> |
| <span data-ttu-id="565ce-162">Hitelesítési módszer</span><span class="sxs-lookup"><span data-stu-id="565ce-162">Authentication Method</span></span> |<span data-ttu-id="565ce-163">Azt jelzi, hogyan hello tulajdonos hello jogkivonat hitelesítési (jelszó, tanúsítvány, stb.).</span><span class="sxs-lookup"><span data-stu-id="565ce-163">Indicates how hello subject of hello token was authenticated (password, certificate, etc.).</span></span> |
| <span data-ttu-id="565ce-164">Utónév</span><span class="sxs-lookup"><span data-stu-id="565ce-164">First Name</span></span> |<span data-ttu-id="565ce-165">Biztosít hello felhasználó utóneve hello beállítása az Azure ad-ben.</span><span class="sxs-lookup"><span data-stu-id="565ce-165">Provides hello given name of hello user as set in Azure AD.</span></span> |
| <span data-ttu-id="565ce-166">Csoportok</span><span class="sxs-lookup"><span data-stu-id="565ce-166">Groups</span></span> |<span data-ttu-id="565ce-167">Objektum azonosítók az Azure AD-csoportok hello felhasználó tagja tartalmazza.</span><span class="sxs-lookup"><span data-stu-id="565ce-167">Contains object Ids of Azure AD groups hello user is a member of.</span></span> |
| <span data-ttu-id="565ce-168">Identitásszolgáltató</span><span class="sxs-lookup"><span data-stu-id="565ce-168">Identity Provider</span></span> |<span data-ttu-id="565ce-169">Rekordok hello identitásszolgáltató hitelesített hello tulajdonos hello jogkivonat.</span><span class="sxs-lookup"><span data-stu-id="565ce-169">Records hello identity provider that authenticated hello subject of hello token.</span></span> |
| <span data-ttu-id="565ce-170">Ki:</span><span class="sxs-lookup"><span data-stu-id="565ce-170">Issued At</span></span> |<span data-ttu-id="565ce-171">Rekordok hello idő, mely hello token adta ki, lexikális elem frissesség gyakran használják.</span><span class="sxs-lookup"><span data-stu-id="565ce-171">Records hello time at which hello token was issued, often used for token freshness.</span></span> |
| <span data-ttu-id="565ce-172">Kiállító</span><span class="sxs-lookup"><span data-stu-id="565ce-172">Issuer</span></span> |<span data-ttu-id="565ce-173">Hello STS, amely a kibocsátott jogkivonat hello, valamint a hello Azure AD-bérlő azonosítja.</span><span class="sxs-lookup"><span data-stu-id="565ce-173">Identifies hello STS that emitted hello token as well as hello Azure AD tenant.</span></span> |
| <span data-ttu-id="565ce-174">Vezetéknév</span><span class="sxs-lookup"><span data-stu-id="565ce-174">Last Name</span></span> |<span data-ttu-id="565ce-175">Biztosít hello felhasználó vezetékneve hello beállítása az Azure ad-ben.</span><span class="sxs-lookup"><span data-stu-id="565ce-175">Provides hello surname of hello user as set in Azure AD.</span></span> |
| <span data-ttu-id="565ce-176">Név</span><span class="sxs-lookup"><span data-stu-id="565ce-176">Name</span></span> |<span data-ttu-id="565ce-177">Emberi olvasható érték, amely azonosítja a hello tulajdonos hello jogkivonat biztosít.</span><span class="sxs-lookup"><span data-stu-id="565ce-177">Provides a human readable value that identifies hello subject of hello token.</span></span> |
| <span data-ttu-id="565ce-178">Objektum azonosítója</span><span class="sxs-lookup"><span data-stu-id="565ce-178">Object Id</span></span> |<span data-ttu-id="565ce-179">Az Azure AD hello tulajdonos nem módosítható, egyedi azonosítót tartalmaz.</span><span class="sxs-lookup"><span data-stu-id="565ce-179">Contains an immutable, unique identifier of hello subject in Azure AD.</span></span> |
| <span data-ttu-id="565ce-180">Szerepkörök</span><span class="sxs-lookup"><span data-stu-id="565ce-180">Roles</span></span> |<span data-ttu-id="565ce-181">Rövid nevét tartalmazza az Azure AD alkalmazás-szerepkörök adott hello felhasználó számára engedélyezett.</span><span class="sxs-lookup"><span data-stu-id="565ce-181">Contains friendly names of Azure AD Application Roles that hello user has been granted.</span></span> |
| <span data-ttu-id="565ce-182">Hatókör</span><span class="sxs-lookup"><span data-stu-id="565ce-182">Scope</span></span> |<span data-ttu-id="565ce-183">Azt jelzi, hogy hello engedélyek megadott toohello ügyfélalkalmazást.</span><span class="sxs-lookup"><span data-stu-id="565ce-183">Indicates hello permissions granted toohello client application.</span></span> |
| <span data-ttu-id="565ce-184">Tárgy</span><span class="sxs-lookup"><span data-stu-id="565ce-184">Subject</span></span> |<span data-ttu-id="565ce-185">Azt jelzi, hogy mely hello kapcsolatos token állításokat információk hello rendszerbiztonsági tag.</span><span class="sxs-lookup"><span data-stu-id="565ce-185">Indicates hello principal about which hello token asserts information.</span></span> |
| <span data-ttu-id="565ce-186">Bérlő azonosítója</span><span class="sxs-lookup"><span data-stu-id="565ce-186">Tenant Id</span></span> |<span data-ttu-id="565ce-187">Hello directory bérlő hello jogkivonatot kibocsátó nem módosítható, egyedi azonosítót tartalmaz.</span><span class="sxs-lookup"><span data-stu-id="565ce-187">Contains an immutable, unique identifier of hello directory tenant that issued hello token.</span></span> |
| <span data-ttu-id="565ce-188">A jogkivonatok élettartama</span><span class="sxs-lookup"><span data-stu-id="565ce-188">Token Lifetime</span></span> |<span data-ttu-id="565ce-189">Meghatározza a hello időtartam, amelyen belül a lexikális elem érvénytelen.</span><span class="sxs-lookup"><span data-stu-id="565ce-189">Defines hello time interval within which a token is valid.</span></span> |
| <span data-ttu-id="565ce-190">Egyszerű felhasználónév</span><span class="sxs-lookup"><span data-stu-id="565ce-190">User Principal Name</span></span> |<span data-ttu-id="565ce-191">Hello egyszerű felhasználónév hello tulajdonos tartalmazza.</span><span class="sxs-lookup"><span data-stu-id="565ce-191">Contains hello user principal name of hello subject.</span></span> |
| <span data-ttu-id="565ce-192">Verzió</span><span class="sxs-lookup"><span data-stu-id="565ce-192">Version</span></span> |<span data-ttu-id="565ce-193">Hello token hello verziószámát tartalmazza.</span><span class="sxs-lookup"><span data-stu-id="565ce-193">Contains hello version number of hello token.</span></span> |

## <a name="basics-of-registering-an-application-in-azure-ad"></a><span data-ttu-id="565ce-194">Egy alkalmazás regisztrálása az Azure AD alapjai</span><span class="sxs-lookup"><span data-stu-id="565ce-194">Basics of Registering an Application in Azure AD</span></span>
<span data-ttu-id="565ce-195">Bármely alkalmazás outsources hitelesítési tooAzure AD regisztrálni kell a könyvtárban található.</span><span class="sxs-lookup"><span data-stu-id="565ce-195">Any application that outsources authentication tooAzure AD must be registered in a directory.</span></span> <span data-ttu-id="565ce-196">Ez a lépés magában foglalja a szólítja fel az Azure AD az alkalmazásokkal, beleértve a hello URL-cím, ahol kapcsolatos található, hello URL-cím toosend válaszol hello URI tooidentify a hitelesítés után az alkalmazás és egyebek.</span><span class="sxs-lookup"><span data-stu-id="565ce-196">This step involves telling Azure AD about your application, including hello URL where it’s located, hello URL toosend replies after authentication, hello URI tooidentify your application, and more.</span></span> <span data-ttu-id="565ce-197">Ezek az információk néhány főbb okból is szükséges:</span><span class="sxs-lookup"><span data-stu-id="565ce-197">This information is required for a few key reasons:</span></span>

* <span data-ttu-id="565ce-198">Az Azure AD meg kell koordináták toocommunicate hello alkalmazással bejelentkezés vagy cserélő jogkivonatok kezelésekor.</span><span class="sxs-lookup"><span data-stu-id="565ce-198">Azure AD needs coordinates toocommunicate with hello application when handling sign-on or exchanging tokens.</span></span> <span data-ttu-id="565ce-199">Ezek közé tartozik a következő hello:</span><span class="sxs-lookup"><span data-stu-id="565ce-199">These include hello following:</span></span>
  
  * <span data-ttu-id="565ce-200">Application ID URI: hello alkalmazás azonosítója.</span><span class="sxs-lookup"><span data-stu-id="565ce-200">Application ID URI: hello identifier for an application.</span></span> <span data-ttu-id="565ce-201">Ez az érték tooAzure AD hitelesítési tooindicate melyik alkalmazás hello hívó szeretne rendelni egy token során zajlik.</span><span class="sxs-lookup"><span data-stu-id="565ce-201">This value is sent tooAzure AD during authentication tooindicate which application hello caller wants a token for.</span></span> <span data-ttu-id="565ce-202">Ezenkívül ez az érték szerepel a hello token így hello alkalmazás tudja hello szánt cél volt.</span><span class="sxs-lookup"><span data-stu-id="565ce-202">Additionally, this value is included in hello token so that hello application knows it was hello intended target.</span></span>
  * <span data-ttu-id="565ce-203">Válasz URL-CÍMÉT és átirányítási URI-: hello esetében egy webes API-t vagy a webes alkalmazás hello válasz URL-CÍMEN az Azure AD küldi hello hitelesítési választ, beleértve a jogkivonatot, ha a hitelesítés sikerült hello hely toowhich.</span><span class="sxs-lookup"><span data-stu-id="565ce-203">Reply URL and Redirect URI: In hello case of a web API or web application, hello Reply URL is hello location toowhich Azure AD will send hello authentication response, including a token if authentication was successful.</span></span> <span data-ttu-id="565ce-204">Egy natív alkalmazás hello esetben hello átirányítási URI-egy egyedi azonosítója az Azure AD toowhich átirányítja a hello felhasználói ügynök egy OAuth 2.0-lekérdezésben.</span><span class="sxs-lookup"><span data-stu-id="565ce-204">In hello case of a native application, hello Redirect URI is a unique identifier toowhich Azure AD will redirect hello user-agent in an OAuth 2.0 request.</span></span>
  * <span data-ttu-id="565ce-205">Alkalmazásazonosító: hello azonosító egy alkalmazás, amely jön létre az Azure ad hello alkalmazás regisztrálásakor.</span><span class="sxs-lookup"><span data-stu-id="565ce-205">Application ID: hello ID for an application, which is generated by Azure AD when hello application is registered.</span></span> <span data-ttu-id="565ce-206">Az engedélyezési kód vagy a token kérésekor hello Alkalmazásazonosítót és a kulcs küldése tooAzure AD a hitelesítés során.</span><span class="sxs-lookup"><span data-stu-id="565ce-206">When requesting an authorization code or token, hello Application ID and key are sent tooAzure AD during authentication.</span></span>
  * <span data-ttu-id="565ce-207">Kulcs: hello kulcs egy Alkalmazásazonosítót együtt küldött tooAzure AD toocall egy webes API hitelesítésekor.</span><span class="sxs-lookup"><span data-stu-id="565ce-207">Key: hello key that is sent along with a Application ID when authenticating tooAzure AD toocall a web API.</span></span>
* <span data-ttu-id="565ce-208">Az Azure AD-igények tooensure hello alkalmazás hello szükséges engedélyek tooaccess a címtár adataihoz, a szervezet más alkalmazásokat, és így tovább</span><span class="sxs-lookup"><span data-stu-id="565ce-208">Azure AD needs tooensure hello application has hello required permissions tooaccess your directory data, other applications in your organization, and so on</span></span>

<span data-ttu-id="565ce-209">Kiépítés válik tisztább, Miután megismerte a fejlett és az Azure AD integrált alkalmazások két kategóriába sorolhatók:</span><span class="sxs-lookup"><span data-stu-id="565ce-209">Provisioning becomes clearer when you understand that there are two categories of applications that can be developed and integrated with Azure AD:</span></span>

* <span data-ttu-id="565ce-210">Bérlői alkalmazások egyszeri: egy bérlő egyetlen alkalmazás használatát az egyik szervezet számára készült.</span><span class="sxs-lookup"><span data-stu-id="565ce-210">Single tenant application: A single tenant application is intended for use in one organization.</span></span> <span data-ttu-id="565ce-211">Ezek a általában az üzletági (LoB) alkalmazások a vállalati fejlesztők által írt.</span><span class="sxs-lookup"><span data-stu-id="565ce-211">These are typically line-of-business (LoB) applications written by an enterprise developer.</span></span> <span data-ttu-id="565ce-212">Egy bérlő egyetlen alkalmazást csak kell toobe elérhetők a felhasználók számára pedig egy címtárban, ezért az emiatt csak egy címtárban kiépített toobe.</span><span class="sxs-lookup"><span data-stu-id="565ce-212">A single tenant application only needs toobe accessed by users in one directory, and as a result, it only needs toobe provisioned in one directory.</span></span> <span data-ttu-id="565ce-213">Ezek az alkalmazások általában egy fejlesztő hello szervezet által regisztrált.</span><span class="sxs-lookup"><span data-stu-id="565ce-213">These applications are typically registered by a developer in hello organization.</span></span>
* <span data-ttu-id="565ce-214">Több-bérlős alkalmazás: A több-bérlős alkalmazás készült, számos szervezet, nem csak egyetlen szervezet.</span><span class="sxs-lookup"><span data-stu-id="565ce-214">Multi-tenant application: A multi-tenant application is intended for use in many organizations, not just one organization.</span></span> <span data-ttu-id="565ce-215">Ezek a független szoftverszállító (ISV) által írt általában szoftver,--szolgáltatás (SaaS) alkalmazások.</span><span class="sxs-lookup"><span data-stu-id="565ce-215">These are typically software-as-a-service (SaaS) applications written by an independent software vendor (ISV).</span></span> <span data-ttu-id="565ce-216">Több-bérlős alkalmazásokhoz kiosztott összes könyvtárban, ahol használni fogják őket, felhasználói vagy rendszergazdai hozzájárulási tooregister igénylő toobe kell őket.</span><span class="sxs-lookup"><span data-stu-id="565ce-216">Multi-tenant applications need toobe provisioned in each directory where they will be used, which requires user or administrator consent tooregister them.</span></span> <span data-ttu-id="565ce-217">A hozzájárulási folyamat elindul, amikor egy alkalmazás hello könyvtárban regisztrálva van, és kap hozzáférést toohello Graph API vagy akár egy másik webes API.</span><span class="sxs-lookup"><span data-stu-id="565ce-217">This consent process starts when an application has been registered in hello directory and is given access toohello Graph API or perhaps another web API.</span></span> <span data-ttu-id="565ce-218">Amikor egy felhasználó vagy rendszergazda egy másik szervezet előfizet a toouse hello alkalmazás, jelenjenek meg ezek egy párbeszédpanelt, amely megjeleníti a hello engedélyek hello az alkalmazáshoz.</span><span class="sxs-lookup"><span data-stu-id="565ce-218">When a user or administrator from a different organization signs up toouse hello application, they are presented with a dialog that displays hello permissions hello application requires.</span></span> <span data-ttu-id="565ce-219">hello felhasználó vagy a rendszergazda számára hozzájárulási toohello alkalmazás, ahol hello alkalmazás hozzáférés toohello közölt adatok, és végül regiszterekben hello alkalmazás a címtárban.</span><span class="sxs-lookup"><span data-stu-id="565ce-219">hello user or administrator can then consent toohello application, which gives hello application access toohello stated data, and finally registers hello application in their directory.</span></span> <span data-ttu-id="565ce-220">További információkért lásd: [hello hozzájárulás keretrendszer áttekintése](active-directory-integrating-applications.md#overview-of-the-consent-framework).</span><span class="sxs-lookup"><span data-stu-id="565ce-220">For more information, see [Overview of hello Consent Framework](active-directory-integrating-applications.md#overview-of-the-consent-framework).</span></span>

<span data-ttu-id="565ce-221">További megfontolásokat helyett egy bérlő egyetlen alkalmazás egy több-bérlős alkalmazások fejlesztése során merülhetnek fel.</span><span class="sxs-lookup"><span data-stu-id="565ce-221">Some additional considerations arise when developing a multi-tenant application instead of a single tenant application.</span></span> <span data-ttu-id="565ce-222">Például, ha az alkalmazás elérhető toousers több könyvtárban, van szüksége egy mechanizmus toodetermine mely bérlői is a.</span><span class="sxs-lookup"><span data-stu-id="565ce-222">For example, if you are making your application available toousers in multiple directories, you need a mechanism toodetermine which tenant they’re in.</span></span> <span data-ttu-id="565ce-223">Egy egybérlős alkalmazást közben egy több-bérlős alkalmazást egy adott felhasználó összes hello címtárakban tooidentify kell az Azure ad-ben csak kell a saját címtárban toolook egy felhasználó.</span><span class="sxs-lookup"><span data-stu-id="565ce-223">A single tenant application only needs toolook in its own directory for a user, while a multi-tenant application needs tooidentify a specific user from all hello directories in Azure AD.</span></span> <span data-ttu-id="565ce-224">tooaccomplish ebben a feladatban az Azure AD biztosít egy közös hitelesítési végpont, ahol több-bérlős alkalmazásokat lehet konfigurálni a bejelentkezési kérelmek, a bérlő-specifikus végpont helyett.</span><span class="sxs-lookup"><span data-stu-id="565ce-224">tooaccomplish this task, Azure AD provides a common authentication endpoint where any multi-tenant application can direct sign-in requests, instead of a tenant-specific endpoint.</span></span> <span data-ttu-id="565ce-225">Ehhez a végponthoz összes könyvtár https://login.microsoftonline.com/common az Azure ad-ben, mivel lehet, hogy a bérlő-specifikus végpont https://login.microsoftonline.com/contoso.onmicrosoft.com. hello közös végpont akkor különösen fontos tooconsider, ha az alkalmazás fejlesztése, mert szükség lesz hello szükséges logika toohandle több bérlő bejelentkezési, kijelentkezési, és a jogkivonatok érvényesség-ellenőrzése során.</span><span class="sxs-lookup"><span data-stu-id="565ce-225">This endpoint is https://login.microsoftonline.com/common for all directories in Azure AD, whereas a tenant-specific endpoint might be https://login.microsoftonline.com/contoso.onmicrosoft.com. hello common endpoint is especially important tooconsider when developing your application because you’ll need hello necessary logic toohandle multiple tenants during sign-in, sign-out, and token validation.</span></span>

<span data-ttu-id="565ce-226">Ha jelenleg egy egybérlős alkalmazást fejleszt, de szeretné, hogy toomake az elérhető toomany szervezetek könnyen tehet módosítások toohello alkalmazás és konfigurációja az Azure AD toomake, több-bérlős képes.</span><span class="sxs-lookup"><span data-stu-id="565ce-226">If you are currently developing a single tenant application but want toomake it available toomany organizations, you can easily make changes toohello application and its configuration in Azure AD toomake it multi-tenant capable.</span></span> <span data-ttu-id="565ce-227">Emellett az Azure AD használ hello azonos aláírási kulcs található összes összes jogkivonatokat, hogy meg van adva egy bérlő egyetlen vagy több-bérlős alkalmazás hitelesítési.</span><span class="sxs-lookup"><span data-stu-id="565ce-227">In addition, Azure AD uses hello same signing key for all tokens in all directories, whether you are providing authentication in a single tenant or multi-tenant application.</span></span>

<span data-ttu-id="565ce-228">A jelen dokumentumban szereplő minden egyes forgatókönyv egy alterület, mely leírja az üzembe helyezési követelményei tartalmazza.</span><span class="sxs-lookup"><span data-stu-id="565ce-228">Each scenario listed in this document includes a sub-section that describes its provisioning requirements.</span></span> <span data-ttu-id="565ce-229">Az Azure AD alkalmazás-kiépítés további részletes információt és hello egyetlen és több-bérlős alkalmazások közötti különbségeket, lásd: [alkalmazások integrálása az Azure Active Directoryval](active-directory-integrating-applications.md) további információt.</span><span class="sxs-lookup"><span data-stu-id="565ce-229">For more in-depth information about provisioning an application in Azure AD and hello differences between single and multi-tenant applications, see [Integrating Applications with Azure Active Directory](active-directory-integrating-applications.md) for more information.</span></span> <span data-ttu-id="565ce-230">Továbbra is az Azure AD hello alkalmazás szabhatják toounderstand olvasásakor.</span><span class="sxs-lookup"><span data-stu-id="565ce-230">Continue reading toounderstand hello common application scenarios in Azure AD.</span></span>

## <a name="application-types-and-scenarios"></a><span data-ttu-id="565ce-231">Alkalmazástípusok és forgatókönyvek</span><span class="sxs-lookup"><span data-stu-id="565ce-231">Application Types and Scenarios</span></span>
<span data-ttu-id="565ce-232">Egyes hello forgatókönyveket a jelen dokumentumban ismertetett fejleszthetők a különböző nyelvekhez és platformokhoz használatával.</span><span class="sxs-lookup"><span data-stu-id="565ce-232">Each of hello scenarios described in this document can be developed using various languages and platforms.</span></span> <span data-ttu-id="565ce-233">Azok az összes üzemelnek elérhető teljes Kódminták a [mintakódok útmutató](active-directory-code-samples.md), vagy közvetlenül a megfelelő hello [minta GitHub-adattárak](https://github.com/Azure-Samples?utf8=%E2%9C%93&query=active-directory).</span><span class="sxs-lookup"><span data-stu-id="565ce-233">They are all backed by complete code samples which are available in our [Code Samples guide](active-directory-code-samples.md), or directly from hello corresponding [GitHub sample repositories](https://github.com/Azure-Samples?utf8=%E2%9C%93&query=active-directory).</span></span> <span data-ttu-id="565ce-234">Emellett ha az alkalmazásnak egy adott vagy egy végpontok közötti forgatókönyv szegmens, a legtöbb esetben funkció felveheti egymástól függetlenül.</span><span class="sxs-lookup"><span data-stu-id="565ce-234">In addition, if your application needs a specific piece or segment of an end-to-end scenario, in most cases that functionality can be added independently.</span></span> <span data-ttu-id="565ce-235">Például ha egy natív alkalmazás, amely behívja a webes API-k, egyszerűen hozzáadhatja egy webes alkalmazás, amely is hívja hello webes API-t.</span><span class="sxs-lookup"><span data-stu-id="565ce-235">For example, if you have a native application that calls a web API, you can easily add a web application that also calls hello web API.</span></span> <span data-ttu-id="565ce-236">hello következő diagram azt ábrázolja, ezek a forgatókönyvek és alkalmazástípusokat, és hogyan felveheti különböző összetevőket:</span><span class="sxs-lookup"><span data-stu-id="565ce-236">hello following diagram illustrates these scenarios and application types, and how different components can be added:</span></span>

![Alkalmazástípusok és forgatókönyvek](./media/active-directory-authentication-scenarios/application_types_and_scenarios.png)

<span data-ttu-id="565ce-238">Hello Azure AD által támogatott öt elsődleges alkalmazás forgatókönyvek a következők:</span><span class="sxs-lookup"><span data-stu-id="565ce-238">These are hello five primary application scenarios supported by Azure AD:</span></span>

* <span data-ttu-id="565ce-239">[Webalkalmazás-böngésző tooWeb alkalmazás](#web-browser-to-web-application): A felhasználó számára szükséges toosign tooa webes alkalmazás, amelyet az Azure AD.</span><span class="sxs-lookup"><span data-stu-id="565ce-239">[Web Browser tooWeb Application](#web-browser-to-web-application): A user needs toosign in tooa web application that is secured by Azure AD.</span></span>
* <span data-ttu-id="565ce-240">[Egyetlen lap alkalmazás (SPA)](#single-page-application-spa): A felhasználó számára szükséges toosign alkalmazásban tooa egyetlen lap, amelyet az Azure AD.</span><span class="sxs-lookup"><span data-stu-id="565ce-240">[Single Page Application (SPA)](#single-page-application-spa): A user needs toosign in tooa single page application that is secured by Azure AD.</span></span>
* <span data-ttu-id="565ce-241">[Natív alkalmazás tooWeb API](#native-application-to-web-api): egy natív alkalmazás, amely futtatja a telefon, táblagép vagy PC igények tooauthenticate egy felhasználó tooget erőforrások webes API-k, amelyet az Azure AD.</span><span class="sxs-lookup"><span data-stu-id="565ce-241">[Native Application tooWeb API](#native-application-to-web-api): A native application that runs on a phone, tablet, or PC needs tooauthenticate a user tooget resources from a web API that is secured by Azure AD.</span></span>
* <span data-ttu-id="565ce-242">[Webes alkalmazás tooWeb API-t](#web-application-to-web-api): webalkalmazás kell egy webes API-t az Azure AD által védett tooget erőforrásokat.</span><span class="sxs-lookup"><span data-stu-id="565ce-242">[Web Application tooWeb API](#web-application-to-web-api): A web application needs tooget resources from a web API secured by Azure AD.</span></span>
* <span data-ttu-id="565ce-243">[Démon vagy kiszolgálói alkalmazás tooWeb API](#daemon-or-server-application-to-web-api): egy démon alkalmazást vagy egy kiszolgálói alkalmazás webes felhasználói felület nélkül ki egy webes API-t az Azure AD által védett tooget erőforrásokat.</span><span class="sxs-lookup"><span data-stu-id="565ce-243">[Daemon or Server Application tooWeb API](#daemon-or-server-application-to-web-api): A daemon application or a server application with no web user interface needs tooget resources from a web API secured by Azure AD.</span></span>

### <a name="web-browser-tooweb-application"></a><span data-ttu-id="565ce-244">Webes böngésző tooWeb alkalmazás</span><span class="sxs-lookup"><span data-stu-id="565ce-244">Web Browser tooWeb Application</span></span>
<span data-ttu-id="565ce-245">Ez a szakasz olyan alkalmazás, amely hitelesíti a felhasználót egy webes böngésző tooa webalkalmazásban ismerteti.</span><span class="sxs-lookup"><span data-stu-id="565ce-245">This section describes an application that authenticates a user in a web browser tooa web application.</span></span> <span data-ttu-id="565ce-246">Ebben a forgatókönyvben hello webalkalmazás hello felhasználói böngésző toosign irányítja őket a tooAzure AD.</span><span class="sxs-lookup"><span data-stu-id="565ce-246">In this scenario, hello web application directs hello user’s browser toosign them in tooAzure AD.</span></span> <span data-ttu-id="565ce-247">Az Azure AD keresztül hello felhasználói browser bővítményt, amely tartalmaz egy biztonsági jogkivonatba hello felhasználóval kapcsolatos jogcímek bejelentkezési választ ad.</span><span class="sxs-lookup"><span data-stu-id="565ce-247">Azure AD returns a sign-in response through hello user’s browser, which contains claims about hello user in a security token.</span></span> <span data-ttu-id="565ce-248">Ebben a forgatókönyvben támogatja bejelentkezést hello WS-Federation, SAML 2.0 és OpenID Connect protokollok használatával.</span><span class="sxs-lookup"><span data-stu-id="565ce-248">This scenario supports sign-on using hello WS-Federation, SAML 2.0, and OpenID Connect protocols.</span></span>

#### <a name="diagram"></a><span data-ttu-id="565ce-249">Ábra</span><span class="sxs-lookup"><span data-stu-id="565ce-249">Diagram</span></span>
![A böngésző tooweb alkalmazás hitelesítési folyamat](./media/active-directory-authentication-scenarios/web_browser_to_web_api.png)

#### <a name="description-of-protocol-flow"></a><span data-ttu-id="565ce-251">Protokoll folyamat leírása</span><span class="sxs-lookup"><span data-stu-id="565ce-251">Description of Protocol Flow</span></span>
1. <span data-ttu-id="565ce-252">Ha a felhasználó meglátogat hello alkalmazás, és a toosign, a rendszer visszairányítja a bejelentkezési kérelem toohello hitelesítési végpontot keresztül az Azure ad-ben.</span><span class="sxs-lookup"><span data-stu-id="565ce-252">When a user visits hello application and needs toosign in, they are redirected via a sign-in request toohello authentication endpoint in Azure AD.</span></span>
2. <span data-ttu-id="565ce-253">hello felhasználó bejelentkezik hello bejelentkezési oldalára.</span><span class="sxs-lookup"><span data-stu-id="565ce-253">hello user signs in on hello sign-in page.</span></span>
3. <span data-ttu-id="565ce-254">Sikeres hitelesítés esetén az Azure AD egy hitelesítési jogkivonatot hoz létre, és egy bejelentkezési válasz toohello alkalmazás válasz URL-CÍMEN hello Azure Portal konfigurált adja vissza.</span><span class="sxs-lookup"><span data-stu-id="565ce-254">If authentication is successful, Azure AD creates an authentication token and returns a sign-in response toohello application’s Reply URL that was configured in hello Azure Portal.</span></span> <span data-ttu-id="565ce-255">Termelési alkalmazások esetében a válasz URL-CÍMEN HTTPS kell lennie.</span><span class="sxs-lookup"><span data-stu-id="565ce-255">For a production application, this Reply URL should be HTTPS.</span></span> <span data-ttu-id="565ce-256">adott vissza hello hello felhasználóról és az Azure AD hello alkalmazás toovalidate hello lexikális elem által igényelt jogcímeket tartalmaz.</span><span class="sxs-lookup"><span data-stu-id="565ce-256">hello returned token includes claims about hello user and Azure AD that are required by hello application toovalidate hello token.</span></span>
4. <span data-ttu-id="565ce-257">hello alkalmazás használatával egy nyilvános aláírási kulcs és a kiállítói információk érhetők el hello összevonási metaadat-dokumentum az Azure AD érvényesíti hello jogkivonatot.</span><span class="sxs-lookup"><span data-stu-id="565ce-257">hello application validates hello token by using a public signing key and issuer information available at hello federation metadata document for Azure AD.</span></span> <span data-ttu-id="565ce-258">Hello alkalmazás érvényesíti hello jogkivonatot, miután az Azure AD egy új munkamenet kezdődik hello felhasználó.</span><span class="sxs-lookup"><span data-stu-id="565ce-258">After hello application validates hello token, Azure AD starts a new session with hello user.</span></span> <span data-ttu-id="565ce-259">Ehhez a munkamenethez lehetővé teszi a felhasználó tooaccess hello hello alkalmazást amíg le nem jár.</span><span class="sxs-lookup"><span data-stu-id="565ce-259">This session allows hello user tooaccess hello application until it expires.</span></span>

#### <a name="code-samples"></a><span data-ttu-id="565ce-260">Kódminták</span><span class="sxs-lookup"><span data-stu-id="565ce-260">Code Samples</span></span>
<span data-ttu-id="565ce-261">Lásd: hello mintakódok webböngésző tooWeb alkalmazás forgatókönyvek esetén.</span><span class="sxs-lookup"><span data-stu-id="565ce-261">See hello code samples for Web Browser tooWeb Application scenarios.</span></span> <span data-ttu-id="565ce-262">És foglalkozzon gyakran--jelenleg felvenni új minták összes hello idő.</span><span class="sxs-lookup"><span data-stu-id="565ce-262">And, check back frequently -- we add new samples all hello time.</span></span> <span data-ttu-id="565ce-263">[Webalkalmazás-böngésző tooWeb alkalmazás](active-directory-code-samples.md#web-browser-to-web-application).</span><span class="sxs-lookup"><span data-stu-id="565ce-263">[Web Browser tooWeb Application](active-directory-code-samples.md#web-browser-to-web-application).</span></span>

#### <a name="registering"></a><span data-ttu-id="565ce-264">Regisztrálása</span><span class="sxs-lookup"><span data-stu-id="565ce-264">Registering</span></span>
* <span data-ttu-id="565ce-265">Egybérlős: Ha egy alkalmazás csak a szervezet számára, regisztrálnia kell azt a vállalati címtárban hello Azure portál használatával.</span><span class="sxs-lookup"><span data-stu-id="565ce-265">Single Tenant: If you are building an application just for your organization, it must be registered in your company’s directory by using hello Azure Portal.</span></span>
* <span data-ttu-id="565ce-266">Több-Bérlős: Ha egy alkalmazás, amely a szervezeten kívüli felhasználók által használható, az szerepelnie kell a vállalati címtárban, hanem is regisztrálni kell a hello alkalmazást használó minden egyes szervezet címtárához.</span><span class="sxs-lookup"><span data-stu-id="565ce-266">Multi-Tenant: If you are building an application that can be used by users outside your organization, it must be registered in your company’s directory, but also must be registered in each organization’s directory that will be using hello application.</span></span> <span data-ttu-id="565ce-267">toomake az alkalmazás a címtár érhető el, megadhatja a regisztrációs folyamat, amely tooconsent tooyour alkalmazás lehetővé teszi az ügyfeleknek.</span><span class="sxs-lookup"><span data-stu-id="565ce-267">toomake your application available in their directory, you can include a sign-up process for your customers that enables them tooconsent tooyour application.</span></span> <span data-ttu-id="565ce-268">Amikor bejelentkeznek az alkalmazáshoz, azok számára jelenik meg olyan párbeszédpanel, amely hello engedélyek hello alkalmazás igényel, és majd a beállítás tooconsent hello jeleníti meg.</span><span class="sxs-lookup"><span data-stu-id="565ce-268">When they sign up for your application, they will be presented with a dialog that shows hello permissions hello application requires, and then hello option tooconsent.</span></span> <span data-ttu-id="565ce-269">Attól függően, hello szükséges engedélyekkel, rendszergazda hello a másik szervezet lehet toogive hozzájárulási szükséges.</span><span class="sxs-lookup"><span data-stu-id="565ce-269">Depending on hello required permissions, an administrator in hello other organization may be required toogive consent.</span></span> <span data-ttu-id="565ce-270">Hello felhasználói vagy rendszergazdai hozzájárul, hello alkalmazás regisztrálja a címtárban.</span><span class="sxs-lookup"><span data-stu-id="565ce-270">When hello user or administrator consents, hello application is registered in their directory.</span></span> <span data-ttu-id="565ce-271">További információkért lásd: [alkalmazások integrálása az Azure Active Directoryval](active-directory-integrating-applications.md).</span><span class="sxs-lookup"><span data-stu-id="565ce-271">For more information, see [Integrating Applications with Azure Active Directory](active-directory-integrating-applications.md).</span></span>

#### <a name="token-expiration"></a><span data-ttu-id="565ce-272">Jogkivonat lejáratáról</span><span class="sxs-lookup"><span data-stu-id="565ce-272">Token Expiration</span></span>
<span data-ttu-id="565ce-273">hello felhasználói munkamenet lejár, ha az Azure AD által kibocsátott hello jogkivonat élettartamát hello lejár.</span><span class="sxs-lookup"><span data-stu-id="565ce-273">hello user’s session expires when hello lifetime of hello token issued by Azure AD expires.</span></span> <span data-ttu-id="565ce-274">Az alkalmazás ebben az időszakban szükség esetén például a felhasználók adott ideig tartó tétlenség alapján kijelentkezés lerövidíthető.</span><span class="sxs-lookup"><span data-stu-id="565ce-274">Your application can shorten this time period if desired, such as signing out users based on a period of inactivity.</span></span> <span data-ttu-id="565ce-275">Hello munkamenet lejártakor hello felhasználó el a kért toosign újra.</span><span class="sxs-lookup"><span data-stu-id="565ce-275">When hello session expires, hello user will be prompted toosign in again.</span></span>

### <a name="single-page-application-spa"></a><span data-ttu-id="565ce-276">Egylapos alkalmazások (SPA)</span><span class="sxs-lookup"><span data-stu-id="565ce-276">Single Page Application (SPA)</span></span>
<span data-ttu-id="565ce-277">Ez a szakasz ismerteti a egyetlen lap, használó alkalmazások az Azure AD hitelesítési és hello OAuth 2.0 típusú implicit engedélyezési adja vissza a webes API end toosecure.</span><span class="sxs-lookup"><span data-stu-id="565ce-277">This section describes authentication for a Single Page Application, that uses Azure AD and hello OAuth 2.0 implicit authorization grant toosecure its web API back end.</span></span> <span data-ttu-id="565ce-278">Egyetlen lap alkalmazások általában struktúráját rétegként JavaScript bemutató (előtér-) futó hello böngésző és a Web API háttérből, amely az olyan kiszolgálón fut, és megvalósít hello alkalmazás üzleti logikát.</span><span class="sxs-lookup"><span data-stu-id="565ce-278">Single Page Applications are typically structured as a JavaScript presentation layer (front end) that runs in hello browser and a Web API back end that runs on a server and implements hello application’s business logic.</span></span> <span data-ttu-id="565ce-279">További információ az hello implicit hitelesítésengedélyezési, és úgy dönt, hogy az alkalmazás helyzetnek megfelelő súgó toolearn lásd [ismertetése hello OAuth2 implicit adja meg az Azure Active Directoryban folyamat](active-directory-dev-understanding-oauth2-implicit-grant.md).</span><span class="sxs-lookup"><span data-stu-id="565ce-279">toolearn more about hello implicit authorization grant, and help you decide whether it's right for your application scenario, see [Understanding hello OAuth2 implicit grant flow in Azure Active Directory](active-directory-dev-understanding-oauth2-implicit-grant.md).</span></span>

<span data-ttu-id="565ce-280">Ebben a forgatókönyvben a hello felhasználó jelentkezik be, amikor hello JavaScript első célból használ [Active Directory hitelesítési tár JavaScript (adal-t. JS)](https://github.com/AzureAD/azure-activedirectory-library-for-js/tree/dev) és hello implicit engedélyezési tooobtain egy azonosító jogkivonatot (id_token) az Azure AD.</span><span class="sxs-lookup"><span data-stu-id="565ce-280">In this scenario, when hello user signs in, hello JavaScript front end uses [Active Directory Authentication Library for JavaScript (ADAL.JS)](https://github.com/AzureAD/azure-activedirectory-library-for-js/tree/dev) and hello implicit authorization grant tooobtain an ID token (id_token) from Azure AD.</span></span> <span data-ttu-id="565ce-281">hello jogkivonat található a gyorsítótárban, és hello ügyfél csatolja toohello kérelem hello tulajdonosi tokenként, amikor webes API tooits háttér, amely hello OWIN köztes használatával lett biztonságossá téve.</span><span class="sxs-lookup"><span data-stu-id="565ce-281">hello token is cached and hello client attaches it toohello request as hello bearer token when making calls tooits Web API back end, which is secured using hello OWIN middleware.</span></span> 

#### <a name="diagram"></a><span data-ttu-id="565ce-282">Ábra</span><span class="sxs-lookup"><span data-stu-id="565ce-282">Diagram</span></span>
![Egyetlen lapon alkalmazásdiagram](./media/active-directory-authentication-scenarios/single_page_app.png)

#### <a name="description-of-protocol-flow"></a><span data-ttu-id="565ce-284">Protokoll folyamat leírása</span><span class="sxs-lookup"><span data-stu-id="565ce-284">Description of Protocol Flow</span></span>
1. <span data-ttu-id="565ce-285">hello felhasználó toohello webalkalmazás lép.</span><span class="sxs-lookup"><span data-stu-id="565ce-285">hello user navigates toohello web application.</span></span>
2. <span data-ttu-id="565ce-286">hello alkalmazás hello JavaScript előtér (bemutató réteg) toohello böngésző adja vissza.</span><span class="sxs-lookup"><span data-stu-id="565ce-286">hello application returns hello JavaScript front end (presentation layer) toohello browser.</span></span>
3. <span data-ttu-id="565ce-287">hello felhasználói bejelentkezés, például kezdeményez egy szereplő bejelentkezési hivatkozásra kattintva.</span><span class="sxs-lookup"><span data-stu-id="565ce-287">hello user initiates sign in, for example by clicking a sign in link.</span></span> <span data-ttu-id="565ce-288">hello böngésző küld egy GET toohello az Azure AD hitelesítési végpont toorequest egy azonosító jogkivonatot.</span><span class="sxs-lookup"><span data-stu-id="565ce-288">hello browser sends a GET toohello Azure AD authorization endpoint toorequest an ID token.</span></span> <span data-ttu-id="565ce-289">A kérelem hello lekérdezési paraméterek hello alkalmazás azonosítója és válasz URL-címet tartalmazza.</span><span class="sxs-lookup"><span data-stu-id="565ce-289">This request includes hello application ID and reply URL in hello query parameters.</span></span>
4. <span data-ttu-id="565ce-290">Az Azure AD válasz URL-CÍMEN elleni hello regisztrált válasz URL-CÍMEN hello Azure Portal konfigurált hello ellenőrzi.</span><span class="sxs-lookup"><span data-stu-id="565ce-290">Azure AD validates hello Reply URL against hello registered Reply URL that was configured in hello Azure Portal.</span></span>
5. <span data-ttu-id="565ce-291">hello felhasználó bejelentkezik hello bejelentkezési oldalára.</span><span class="sxs-lookup"><span data-stu-id="565ce-291">hello user signs in on hello sign-in page.</span></span>
6. <span data-ttu-id="565ce-292">Sikeres hitelesítés esetén az Azure AD egy azonosító adatblokkot hoz létre, és visszaadja egy URL-címe (#) töredék toohello alkalmazás válasz URL-címként.</span><span class="sxs-lookup"><span data-stu-id="565ce-292">If authentication is successful, Azure AD creates an ID token and returns it as a URL fragment (#) toohello application’s Reply URL.</span></span> <span data-ttu-id="565ce-293">Termelési alkalmazások esetében a válasz URL-CÍMEN HTTPS kell lennie.</span><span class="sxs-lookup"><span data-stu-id="565ce-293">For a production application, this Reply URL should be HTTPS.</span></span> <span data-ttu-id="565ce-294">adott vissza hello hello felhasználóról és az Azure AD hello alkalmazás toovalidate hello lexikális elem által igényelt jogcímeket tartalmaz.</span><span class="sxs-lookup"><span data-stu-id="565ce-294">hello returned token includes claims about hello user and Azure AD that are required by hello application toovalidate hello token.</span></span>
7. <span data-ttu-id="565ce-295">hello hello böngészőjében futó JavaScript-Ügyfélkód hello token kiolvassa a hello válasz toouse toohello alkalmazás webes API vissza end hívások védelméhez.</span><span class="sxs-lookup"><span data-stu-id="565ce-295">hello JavaScript client code running in hello browser extracts hello token from hello response toouse in securing calls toohello application’s web API back end.</span></span>
8. <span data-ttu-id="565ce-296">hello böngésző hívások hello alkalmazás webes API vissza végződhet hello jogkivonatokkal hello authorization fejlécet.</span><span class="sxs-lookup"><span data-stu-id="565ce-296">hello browser calls hello application’s web API back end with hello access token in hello authorization header.</span></span>

#### <a name="code-samples"></a><span data-ttu-id="565ce-297">Kódminták</span><span class="sxs-lookup"><span data-stu-id="565ce-297">Code Samples</span></span>
<span data-ttu-id="565ce-298">Lásd: hello mintakódok lap alkalmazás (SPA) forgatókönyvek esetén.</span><span class="sxs-lookup"><span data-stu-id="565ce-298">See hello code samples for Single Page Application (SPA) scenarios.</span></span> <span data-ttu-id="565ce-299">Meg arról, hogy toocheck vissza gyakran--azt hozzáadása új minták összes hello idő.</span><span class="sxs-lookup"><span data-stu-id="565ce-299">Be sure toocheck back frequently -- we add new samples all hello time.</span></span> <span data-ttu-id="565ce-300">[Egyetlen lap alkalmazás (SPA)](active-directory-code-samples.md#single-page-application-spa).</span><span class="sxs-lookup"><span data-stu-id="565ce-300">[Single Page Application (SPA)](active-directory-code-samples.md#single-page-application-spa).</span></span>

#### <a name="registering"></a><span data-ttu-id="565ce-301">Regisztrálása</span><span class="sxs-lookup"><span data-stu-id="565ce-301">Registering</span></span>
* <span data-ttu-id="565ce-302">Egybérlős: Ha egy alkalmazás csak a szervezet számára, regisztrálnia kell azt a vállalati címtárban hello Azure portál használatával.</span><span class="sxs-lookup"><span data-stu-id="565ce-302">Single Tenant: If you are building an application just for your organization, it must be registered in your company’s directory by using hello Azure Portal.</span></span>
* <span data-ttu-id="565ce-303">Több-Bérlős: Ha egy alkalmazás, amely a szervezeten kívüli felhasználók által használható, az szerepelnie kell a vállalati címtárban, hanem is regisztrálni kell a hello alkalmazást használó minden egyes szervezet címtárához.</span><span class="sxs-lookup"><span data-stu-id="565ce-303">Multi-Tenant: If you are building an application that can be used by users outside your organization, it must be registered in your company’s directory, but also must be registered in each organization’s directory that will be using hello application.</span></span> <span data-ttu-id="565ce-304">toomake az alkalmazás a címtár érhető el, megadhatja a regisztrációs folyamat, amely tooconsent tooyour alkalmazás lehetővé teszi az ügyfeleknek.</span><span class="sxs-lookup"><span data-stu-id="565ce-304">toomake your application available in their directory, you can include a sign-up process for your customers that enables them tooconsent tooyour application.</span></span> <span data-ttu-id="565ce-305">Amikor bejelentkeznek az alkalmazáshoz, azok számára jelenik meg olyan párbeszédpanel, amely hello engedélyek hello alkalmazás igényel, és majd a beállítás tooconsent hello jeleníti meg.</span><span class="sxs-lookup"><span data-stu-id="565ce-305">When they sign up for your application, they will be presented with a dialog that shows hello permissions hello application requires, and then hello option tooconsent.</span></span> <span data-ttu-id="565ce-306">Attól függően, hello szükséges engedélyekkel, rendszergazda hello a másik szervezet lehet toogive hozzájárulási szükséges.</span><span class="sxs-lookup"><span data-stu-id="565ce-306">Depending on hello required permissions, an administrator in hello other organization may be required toogive consent.</span></span> <span data-ttu-id="565ce-307">Hello felhasználói vagy rendszergazdai hozzájárul, hello alkalmazás regisztrálja a címtárban.</span><span class="sxs-lookup"><span data-stu-id="565ce-307">When hello user or administrator consents, hello application is registered in their directory.</span></span> <span data-ttu-id="565ce-308">További információkért lásd: [alkalmazások integrálása az Azure Active Directoryval](active-directory-integrating-applications.md).</span><span class="sxs-lookup"><span data-stu-id="565ce-308">For more information, see [Integrating Applications with Azure Active Directory](active-directory-integrating-applications.md).</span></span>

<span data-ttu-id="565ce-309">Hello alkalmazás regisztrálása után a konfigurált toouse OAuth 2.0 Implicit Grant protokoll kell legyen.</span><span class="sxs-lookup"><span data-stu-id="565ce-309">After registering hello application, it must be configured toouse OAuth 2.0 Implicit Grant protocol.</span></span> <span data-ttu-id="565ce-310">Alapértelmezés szerint ez a protokoll le van tiltva, az alkalmazások.</span><span class="sxs-lookup"><span data-stu-id="565ce-310">By default, this protocol is disabled for applications.</span></span> <span data-ttu-id="565ce-311">tooenable hello OAuth2 Implicit Grant protokollt az alkalmazás szerkesztése az alkalmazásjegyzék a hello Azure portálon, és állítsa be a hello "oauth2AllowImplicitFlow" érték tootrue.</span><span class="sxs-lookup"><span data-stu-id="565ce-311">tooenable hello OAuth2 Implicit Grant protocol for your application, edit its application manifest from hello Azure Portal and set hello “oauth2AllowImplicitFlow” value tootrue.</span></span> <span data-ttu-id="565ce-312">Részletes útmutatásért lásd: [engedélyezése OAuth 2.0 Implicit Grant egyetlen oldal alkalmazások](active-directory-integrating-applications.md).</span><span class="sxs-lookup"><span data-stu-id="565ce-312">For detailed instructions, see [Enabling OAuth 2.0 Implicit Grant for Single Page Applications](active-directory-integrating-applications.md).</span></span>

#### <a name="token-expiration"></a><span data-ttu-id="565ce-313">Jogkivonat lejáratáról</span><span class="sxs-lookup"><span data-stu-id="565ce-313">Token Expiration</span></span>
<span data-ttu-id="565ce-314">Az Azure ad-val ADAL.js toomanage hitelesítés használatakor, kihasználhatja a több funkciót is lehetővé teszi egy lejárt jogkivonat frissítését, valamint a jogkivonatok lekérésének további webes API erőforrások hello alkalmazás elnevezése lehet.</span><span class="sxs-lookup"><span data-stu-id="565ce-314">When you use ADAL.js toomanage authentication with Azure AD, you benefit from several features that facilitate refreshing an expired token as well as getting tokens for additional web API resources that may be called by hello application.</span></span> <span data-ttu-id="565ce-315">Hello felhasználó sikeresen hitelesíti magát, és az Azure AD, ha a cookie-k által védett munkamenet hello felhasználó hello böngésző és az Azure AD között.</span><span class="sxs-lookup"><span data-stu-id="565ce-315">When hello user successfully authenticates with Azure AD, a session secured by a cookie is established for hello user between hello browser and Azure AD.</span></span> <span data-ttu-id="565ce-316">Fontos, hogy hello munkamenet létezik hello felhasználói és az Azure AD között és kapcsolat nem hello felhasználói és hello webes alkalmazás hello kiszolgálón futó toonote.</span><span class="sxs-lookup"><span data-stu-id="565ce-316">It’s important toonote that hello session exists between hello user and Azure AD and not between hello user and hello web application running on hello server.</span></span> <span data-ttu-id="565ce-317">Ha a jogkivonat lejár, ADAL.js használja ehhez a munkamenethez toosilently egy másik jogkivonat beszerzése.</span><span class="sxs-lookup"><span data-stu-id="565ce-317">When a token expires, ADAL.js uses this session toosilently obtain another token.</span></span> <span data-ttu-id="565ce-318">Ezt egy rejtett iFrame toosend használatával hajtja végre, és hello OAuth Implicit Grant protokollt használó hello kérés fogadásához.</span><span class="sxs-lookup"><span data-stu-id="565ce-318">It does this by using a hidden iFrame toosend and receive hello request using hello OAuth Implicit Grant protocol.</span></span> <span data-ttu-id="565ce-319">ADAL.js is használhatja ugyanazt a mechanizmust toosilently hozzáférési tokenek beszerzése érdekében az Azure AD más webes API-erőforrások, hogy hello alkalmazás hívások mindaddig, amíg ezek az erőforrások támogatja az eltérő eredetű erőforrások megosztása (CORS) regisztrált hello felhasználói könyvtárba, és minden szükséges beleegyezést hello felhasználó adott bejelentkezés során.</span><span class="sxs-lookup"><span data-stu-id="565ce-319">ADAL.js can also use this same mechanism toosilently obtain access tokens from Azure AD for other web API resources that hello application calls as long as these resources support cross-origin resource sharing (CORS), are registered in hello user’s directory, and any required consent was given by hello user during sign-in.</span></span>

### <a name="native-application-tooweb-api"></a><span data-ttu-id="565ce-320">Natív alkalmazás tooWeb API</span><span class="sxs-lookup"><span data-stu-id="565ce-320">Native Application tooWeb API</span></span>
<span data-ttu-id="565ce-321">Ez a szakasz ismerteti a natív alkalmazás, amely behívja a webes API-k egy felhasználó nevében.</span><span class="sxs-lookup"><span data-stu-id="565ce-321">This section describes a native application that calls a web API on behalf of a user.</span></span> <span data-ttu-id="565ce-322">Ebben a forgatókönyvben a hello OAuth 2.0 hitelesítési kód engedélytípus nyilvános ügyféllel épül, a hello 4.1 leírtak [OAuth 2.0 specifikáció](http://tools.ietf.org/html/rfc6749).</span><span class="sxs-lookup"><span data-stu-id="565ce-322">This scenario is built on hello OAuth 2.0 authorization code grant type with a public client, as described in section 4.1 of hello [OAuth 2.0 specification](http://tools.ietf.org/html/rfc6749).</span></span> <span data-ttu-id="565ce-323">hello natív alkalmazás hello felhasználói számára egy jogkivonatot kap hello OAuth 2.0 protokoll használatával.</span><span class="sxs-lookup"><span data-stu-id="565ce-323">hello native application obtains an access token for hello user by using hello OAuth 2.0 protocol.</span></span> <span data-ttu-id="565ce-324">Ez a jogkivonat küldi el a rendszer a hello kérelem toohello webes API-t, amely engedélyezi a felhasználó hello hello szükséges erőforrás visszaadja.</span><span class="sxs-lookup"><span data-stu-id="565ce-324">This access token is then sent in hello request toohello web API, which authorizes hello user and returns hello desired resource.</span></span>

#### <a name="diagram"></a><span data-ttu-id="565ce-325">Ábra</span><span class="sxs-lookup"><span data-stu-id="565ce-325">Diagram</span></span>
![Natív alkalmazás tooWeb API diagramja](./media/active-directory-authentication-scenarios/native_app_to_web_api.png)

#### <a name="authentication-flow-for-native-application-tooapi"></a><span data-ttu-id="565ce-327">Natív alkalmazás tooAPI hitelesítési folyamata</span><span class="sxs-lookup"><span data-stu-id="565ce-327">Authentication flow for native application tooAPI</span></span>
#### <a name="description-of-protocol-flow"></a><span data-ttu-id="565ce-328">Protokoll folyamat leírása</span><span class="sxs-lookup"><span data-stu-id="565ce-328">Description of Protocol Flow</span></span>
<span data-ttu-id="565ce-329">Hello AD hitelesítési könyvtárat használja, ha hello protokoll adatai az alábbiakban a legtöbb történik meg, például a hello böngészőben előugró ablak, a token-gyorsítótárazási és a frissítési jogkivonatokat kezelése.</span><span class="sxs-lookup"><span data-stu-id="565ce-329">If you are using hello AD Authentication Libraries, most of hello protocol details described below are handled for you, such as hello browser pop-up, token caching, and handling of refresh tokens.</span></span>

1. <span data-ttu-id="565ce-330">A böngészőben előugró hello natív alkalmazás lehetővé teszi egy kérelem toohello engedélyezési végpont Azure AD-ben.</span><span class="sxs-lookup"><span data-stu-id="565ce-330">Using a browser pop-up, hello native application makes a request toohello authorization endpoint in Azure AD.</span></span> <span data-ttu-id="565ce-331">Ehhez a kérelemhez a hello Alkalmazásazonosítót és hello átirányítási URI-t hello natív alkalmazás hello Azure portálon, és hello alkalmazás Alkalmazásazonosító URI hello webes API-t tartalmaz.</span><span class="sxs-lookup"><span data-stu-id="565ce-331">This request includes hello Application ID and hello redirect URI of hello native application as shown in hello Azure Portal, and hello application ID URI for hello web API.</span></span> <span data-ttu-id="565ce-332">Hello felhasználó még nem jelentkezett be, ha azok a kért toosign újra</span><span class="sxs-lookup"><span data-stu-id="565ce-332">If hello user hasn’t already signed in, they are prompted toosign in again</span></span>
2. <span data-ttu-id="565ce-333">Az Azure AD akkor hitelesíti a hello felhasználót.</span><span class="sxs-lookup"><span data-stu-id="565ce-333">Azure AD authenticates hello user.</span></span> <span data-ttu-id="565ce-334">Ha olyan több-bérlős alkalmazás és a hozzájárulásukat adják szükséges toouse hello alkalmazás, hello felhasználói szükséges tooconsent lesz, ha azok még nem tette meg.</span><span class="sxs-lookup"><span data-stu-id="565ce-334">If it is a multi-tenant application and consent is required toouse hello application, hello user will be required tooconsent if they haven’t already done so.</span></span> <span data-ttu-id="565ce-335">Hozzájárulás megadása után, és a sikeres hitelesítés után az Azure AD kibocsát egy engedélyezési kódot válaszban hátsó toohello ügyfél alkalmazás átirányítási URI-t.</span><span class="sxs-lookup"><span data-stu-id="565ce-335">After granting consent and upon successful authentication, Azure AD issues an authorization code response back toohello client application’s redirect URI.</span></span>
3. <span data-ttu-id="565ce-336">Ha az Azure AD kibocsát egy engedélyezési kód választ küld vissza toohello átirányítási URI-címe, hello ügyfél alkalmazás leáll böngésző interakció és kivonatok hello szereplő engedélyezési kódot hello válasz.</span><span class="sxs-lookup"><span data-stu-id="565ce-336">When Azure AD issues an authorization code response back toohello redirect URI, hello client application stops browser interaction and extracts hello authorization code from hello response.</span></span> <span data-ttu-id="565ce-337">Az engedélyezési kód használatával hello ügyfélalkalmazás küld egy kérelem tooAzure AD a token-végpont hello engedélyezési kódot tartalmazó, részletek készül hello ügyfélalkalmazás (alkalmazás Azonosítóját és átirányítási URI) és a kívánt erőforrás (Alkalmazásazonosító hello URI-JÁNAK hello webes API-k).</span><span class="sxs-lookup"><span data-stu-id="565ce-337">Using this authorization code, hello client application sends a request tooAzure AD’s token endpoint that includes hello authorization code, details about hello client application (Application ID and redirect URI), and hello desired resource (application ID URI for hello web API).</span></span>
4. <span data-ttu-id="565ce-338">hello engedélyezési kód és információ hello ügyfélalkalmazást és a webes API-t az Azure AD érvényesíti.</span><span class="sxs-lookup"><span data-stu-id="565ce-338">hello authorization code and information about hello client application and web API are validated by Azure AD.</span></span> <span data-ttu-id="565ce-339">Sikeres ellenőrzés esetén az Azure AD két jogkivonatok adja vissza: a JWT jogkivonat és egy frissítési JWT jogkivonat.</span><span class="sxs-lookup"><span data-stu-id="565ce-339">Upon successful validation, Azure AD returns two tokens: a JWT access token and a JWT refresh token.</span></span> <span data-ttu-id="565ce-340">Ezenkívül az Azure AD hello felhasználó, például a megjelenítendő nevét és a bérlői azonosító alapvető információt ad vissza</span><span class="sxs-lookup"><span data-stu-id="565ce-340">In addition, Azure AD returns basic information about hello user, such as their display name and tenant ID.</span></span>
5. <span data-ttu-id="565ce-341">A HTTPS PROTOKOLLOKON keresztül hello ügyfélalkalmazás hello hello engedélyezési fejlécének hello kérelem toohello webes API-t adott vissza a JWT access token tooadd hello JWT karakterlánc a "Tulajdonos" jelöléssel.</span><span class="sxs-lookup"><span data-stu-id="565ce-341">Over HTTPS, hello client application uses hello returned JWT access token tooadd hello JWT string with a “Bearer” designation in hello Authorization header of hello request toohello web API.</span></span> <span data-ttu-id="565ce-342">hello webes API-k majd érvényesíti hello JWT jogkivonatot, és ellenőrzés nem jelez hibát, ha vissza hello szükséges erőforrás.</span><span class="sxs-lookup"><span data-stu-id="565ce-342">hello web API then validates hello JWT token, and if validation is successful, returns hello desired resource.</span></span>
6. <span data-ttu-id="565ce-343">Amikor hello hozzáférési jogkivonat lejár, hello ügyfélalkalmazást, amely jelzi, hogy újra meg kell tooauthenticate hello felhasználó hiba fog kapni.</span><span class="sxs-lookup"><span data-stu-id="565ce-343">When hello access token expires, hello client application will receive an error that indicates hello user needs tooauthenticate again.</span></span> <span data-ttu-id="565ce-344">Hello alkalmazásnak meg egy érvényes frissítési jogkivonat, ha azok egy új hozzáférési jogkivonat értesítése nélkül a felhasználó toosign újra hello használt tooacquire.</span><span class="sxs-lookup"><span data-stu-id="565ce-344">If hello application has a valid refresh token, it can be used tooacquire a new access token without prompting hello user toosign in again.</span></span> <span data-ttu-id="565ce-345">Ha hello frissítési jogkivonat lejár, a hello alkalmazásnak szüksége lesz toointeractively ismét hello felhasználó hitelesítéséhez.</span><span class="sxs-lookup"><span data-stu-id="565ce-345">If hello refresh token expires, hello application will need toointeractively authenticate hello user once again.</span></span>

> [!NOTE]
> <span data-ttu-id="565ce-346">hello frissítési jogkivonat az Azure AD által kibocsátott lehet használt tooaccess több erőforrást.</span><span class="sxs-lookup"><span data-stu-id="565ce-346">hello refresh token issued by Azure AD can be used tooaccess multiple resources.</span></span> <span data-ttu-id="565ce-347">Például ha egy ügyfél-alkalmazás, amely rendelkezik engedéllyel a két toocall webes API-k, a hello frissítési jogkivonat lehet használt tooget egy hozzáférési jogkivonat toohello más webes API-t is.</span><span class="sxs-lookup"><span data-stu-id="565ce-347">For example, if you have a client application that has permission toocall two web APIs, hello refresh token can be used tooget an access token toohello other web API as well.</span></span>
> 
> 

#### <a name="code-samples"></a><span data-ttu-id="565ce-348">Kódminták</span><span class="sxs-lookup"><span data-stu-id="565ce-348">Code Samples</span></span>
<span data-ttu-id="565ce-349">Lásd: hello mintakódok natív alkalmazás tooWeb API forgatókönyvek esetén.</span><span class="sxs-lookup"><span data-stu-id="565ce-349">See hello code samples for Native Application tooWeb API scenarios.</span></span> <span data-ttu-id="565ce-350">És foglalkozzon gyakran--jelenleg felvenni új minták összes hello idő.</span><span class="sxs-lookup"><span data-stu-id="565ce-350">And, check back frequently -- we add new samples all hello time.</span></span> <span data-ttu-id="565ce-351">[Natív alkalmazás tooWeb API](active-directory-code-samples.md#native-application-to-web-api).</span><span class="sxs-lookup"><span data-stu-id="565ce-351">[Native Application tooWeb API](active-directory-code-samples.md#native-application-to-web-api).</span></span>

#### <a name="registering"></a><span data-ttu-id="565ce-352">Regisztrálása</span><span class="sxs-lookup"><span data-stu-id="565ce-352">Registering</span></span>
* <span data-ttu-id="565ce-353">Egyetlen bérlői: Mindkét hello natív alkalmazás, és hello webes API-t kell regisztrálni az hello ugyanabban a könyvtárban az Azure ad-ben.</span><span class="sxs-lookup"><span data-stu-id="565ce-353">Single Tenant: Both hello native application and hello web API must be registered in hello same directory in Azure AD.</span></span> <span data-ttu-id="565ce-354">hello webes API-k lehet konfigurált tooexpose engedélyekkel, amelyek tooits erőforrások használt toolimit hello natív alkalmazás eléréséhez.</span><span class="sxs-lookup"><span data-stu-id="565ce-354">hello web API can be configured tooexpose a set of permissions, which are used toolimit hello native application’s access tooits resources.</span></span> <span data-ttu-id="565ce-355">majd ügyfélalkalmazás hello hello szükséges engedélyek hello "Engedélyek tooOther alkalmazások" legördülő menüjében hello Azure portálon lévő választja ki.</span><span class="sxs-lookup"><span data-stu-id="565ce-355">hello client application then selects hello desired permissions from hello “Permissions tooOther Applications” drop-down menu in hello Azure Portal.</span></span>
* <span data-ttu-id="565ce-356">Több-Bérlős: Először hello natív alkalmazás csak regisztrált hello fejlesztői vagy közzétevő könyvtár.</span><span class="sxs-lookup"><span data-stu-id="565ce-356">Multi-Tenant: First, hello native application only ever registered in hello developer or publisher’s directory.</span></span> <span data-ttu-id="565ce-357">Hello natív alkalmazás, konfigurált tooindicate hello engedélyek működési toobe van szükség.</span><span class="sxs-lookup"><span data-stu-id="565ce-357">Second, hello native application is configured tooindicate hello permissions it requires toobe functional.</span></span> <span data-ttu-id="565ce-358">A szükséges engedélyek listája párbeszédpanel jelenik meg, amikor egy felhasználó vagy rendszergazda hello célkönyvtárban hozzájárulási toohello alkalmazás, így a rendelkezésre álló tootheir szervezet.</span><span class="sxs-lookup"><span data-stu-id="565ce-358">This list of required permissions is shown in a dialog when a user or administrator in hello destination directory gives consent toohello application, which makes it available tootheir organization.</span></span> <span data-ttu-id="565ce-359">Egyes alkalmazások csak a felhasználói szintű engedélyek, amelyek hello szervezet bármely felhasználója is szükséges.</span><span class="sxs-lookup"><span data-stu-id="565ce-359">Some applications require just user-level permissions, which any user in hello organization can consent to.</span></span> <span data-ttu-id="565ce-360">Más alkalmazásoknak rendszergazdai engedélyek, amelyek hello szervezetben a felhasználók nem járulhatnak hozzá.</span><span class="sxs-lookup"><span data-stu-id="565ce-360">Other applications require administrator-level permissions, which a user in hello organization cannot consent to.</span></span> <span data-ttu-id="565ce-361">A címtár csak a rendszergazda biztosíthat hozzájárulási tooapplications, ez a jogosultsági szint szükséges.</span><span class="sxs-lookup"><span data-stu-id="565ce-361">Only a directory administrator can give consent tooapplications that require this level of permissions.</span></span> <span data-ttu-id="565ce-362">Hello felhasználói vagy rendszergazdai hozzájárul, csak hello webes API-k regisztrálja a címtárban.</span><span class="sxs-lookup"><span data-stu-id="565ce-362">When hello user or administrator consents, only hello web API is registered in their directory.</span></span> <span data-ttu-id="565ce-363">További információkért lásd: [alkalmazások integrálása az Azure Active Directoryval](active-directory-integrating-applications.md).</span><span class="sxs-lookup"><span data-stu-id="565ce-363">For more information, see [Integrating Applications with Azure Active Directory](active-directory-integrating-applications.md).</span></span>

#### <a name="token-expiration"></a><span data-ttu-id="565ce-364">Jogkivonat lejáratáról</span><span class="sxs-lookup"><span data-stu-id="565ce-364">Token Expiration</span></span>
<span data-ttu-id="565ce-365">Hello natív alkalmazás használja az engedélyezési kód tooget a JWT jogkivonat, amikor JWT frissítési jogkivonat is megkapja.</span><span class="sxs-lookup"><span data-stu-id="565ce-365">When hello native application uses its authorization code tooget a JWT access token, it also receives a JWT refresh token.</span></span> <span data-ttu-id="565ce-366">Amikor hello hozzáférési jogkivonat lejár, a hello frissítési jogkivonat lehet-e a használt toore-anélkül, hogy azokat újra a toosign hello felhasználó hitelesítéséhez.</span><span class="sxs-lookup"><span data-stu-id="565ce-366">When hello access token expires, hello refresh token can be used toore-authenticate hello user without requiring them toosign in again.</span></span> <span data-ttu-id="565ce-367">A frissítési jogkivonat nem használt tooauthenticate hello felhasználói, mely eredményezi, hogy egy új hozzáférési tokent, és frissítse token.</span><span class="sxs-lookup"><span data-stu-id="565ce-367">This refresh token is then used tooauthenticate hello user, which results in a new access token and refresh token.</span></span>

### <a name="web-application-tooweb-api"></a><span data-ttu-id="565ce-368">Webes alkalmazás tooWeb API</span><span class="sxs-lookup"><span data-stu-id="565ce-368">Web Application tooWeb API</span></span>
<span data-ttu-id="565ce-369">Ez a szakasz ismerteti a webalkalmazás, amelyet a webes API-k tooget erőforrásokat.</span><span class="sxs-lookup"><span data-stu-id="565ce-369">This section describes a web application that needs tooget resources from a web API.</span></span> <span data-ttu-id="565ce-370">Ilyen esetben van két identity típus, amely a webes alkalmazás hello tooauthenticate használhatja és hello webes API hívása: az alkalmazás azonosítóját, vagy delegált felhasználói azonosítót.</span><span class="sxs-lookup"><span data-stu-id="565ce-370">In this scenario, there are two identity types that hello web application can use tooauthenticate and call hello web API: an application identity, or a delegated user identity.</span></span>

<span data-ttu-id="565ce-371">*Az Alkalmazásidentitás:* a forgatókönyvet használja az OAuth 2.0 ügyfél hitelesítő adatai megadják tooauthenticate hello alkalmazás és a hozzáférés hello webes API-t.</span><span class="sxs-lookup"><span data-stu-id="565ce-371">*Application identity:* This scenario uses OAuth 2.0 client credentials grant tooauthenticate as hello application and access hello web API.</span></span> <span data-ttu-id="565ce-372">Ha egy alkalmazás identitásával hello webes API csak azt észleli, hogy hello webalkalmazás hívja meg, hello, webes API-k nem kapott információt hello felhasználóról.</span><span class="sxs-lookup"><span data-stu-id="565ce-372">When using an application identity, hello web API can only detect that hello web application is calling it, as hello web API does not receive any information about hello user.</span></span> <span data-ttu-id="565ce-373">Hello alkalmazás hello felhasználó adatai kap, ha küldi hello alkalmazás protokollon keresztül, és azt nem írta alá az Azure AD.</span><span class="sxs-lookup"><span data-stu-id="565ce-373">If hello application receives information about hello user, it will be sent via hello application protocol, and it is not signed by Azure AD.</span></span> <span data-ttu-id="565ce-374">hello webes API-k megbízhatónak tekinti, hogy a webalkalmazás hello hello felhasználó hitelesítése.</span><span class="sxs-lookup"><span data-stu-id="565ce-374">hello web API trusts that hello web application authenticated hello user.</span></span> <span data-ttu-id="565ce-375">Ezért ez a minta egy megbízható alrendszer neve.</span><span class="sxs-lookup"><span data-stu-id="565ce-375">For this reason, this pattern is called a trusted subsystem.</span></span>

<span data-ttu-id="565ce-376">*Felhasználói azonosító meghatalmazott:* ebben a forgatókönyvben két módon valósítható meg: OpenID Connect, és a kód hitelesítésengedélyezési OAuth 2.0 bizalmas ügyféllel.</span><span class="sxs-lookup"><span data-stu-id="565ce-376">*Delegated user identity:* This scenario can be accomplished in two ways: OpenID Connect, and OAuth 2.0 authorization code grant with a confidential client.</span></span> <span data-ttu-id="565ce-377">hello webalkalmazás jut hozzá a hozzáférési token hello felhasználóhoz, amely bizonyítja toohello webes API-k hello sikeresen hitelesített felhasználó toohello webalkalmazáshoz, és hello webes alkalmazás nem képes tooobtain delegált felhasználói identitás toocall hello webes API-k.</span><span class="sxs-lookup"><span data-stu-id="565ce-377">hello web application obtains an access token for hello user, which proves toohello web API that hello user successfully authenticated toohello web application and that hello web application was able tooobtain a delegated user identity toocall hello web API.</span></span> <span data-ttu-id="565ce-378">Ez a jogkivonat küldött hello kérelem toohello webes API-t, amely engedélyezi a felhasználó hello hello szükséges erőforrás visszaadja.</span><span class="sxs-lookup"><span data-stu-id="565ce-378">This access token is sent in hello request toohello web API, which authorizes hello user and returns hello desired resource.</span></span>

#### <a name="diagram"></a><span data-ttu-id="565ce-379">Ábra</span><span class="sxs-lookup"><span data-stu-id="565ce-379">Diagram</span></span>
![Webszolgáltatás alkalmazásdiagram tooWeb API](./media/active-directory-authentication-scenarios/web_app_to_web_api.png)

#### <a name="description-of-protocol-flow"></a><span data-ttu-id="565ce-381">Protokoll folyamat leírása</span><span class="sxs-lookup"><span data-stu-id="565ce-381">Description of Protocol Flow</span></span>
<span data-ttu-id="565ce-382">Mindkét hello Alkalmazásidentitás és delegált felhasználói identitás típusai hello folyamata az alábbi esik szó.</span><span class="sxs-lookup"><span data-stu-id="565ce-382">Both hello application identity and delegated user identity types are discussed in hello flow below.</span></span> <span data-ttu-id="565ce-383">hello a fő különbség a kettő között, hogy meghatalmazott hello felhasználói identitás először kell szerezni az engedélyezési kód, mielőtt hello felhasználó bejelentkezési és szerezhet hozzáférést toohello webes API.</span><span class="sxs-lookup"><span data-stu-id="565ce-383">hello key difference between them is that hello delegated user identity must first acquire an authorization code before hello user can sign-in and gain access toohello web API.</span></span>

##### <a name="application-identity-with-oauth-20-client-credentials-grant"></a><span data-ttu-id="565ce-384">Az OAuth 2.0 ügyfél Alkalmazásidentitás hitelesítő adatok megadása</span><span class="sxs-lookup"><span data-stu-id="565ce-384">Application Identity with OAuth 2.0 Client Credentials Grant</span></span>
1. <span data-ttu-id="565ce-385">TooAzure AD hello webes alkalmazás a bejelentkezett felhasználó (lásd: hello [webböngésző tooWeb alkalmazás](#web-browser-to-web-application) fent).</span><span class="sxs-lookup"><span data-stu-id="565ce-385">A user is signed in tooAzure AD in hello web application (see hello [Web Browser tooWeb Application](#web-browser-to-web-application) above).</span></span>
2. <span data-ttu-id="565ce-386">hello webalkalmazásnak kell tooacquire olyan hozzáférési jogkivonatot, hogy a hitelesítéshez toohello webes API és hello szükséges erőforrás lekérése.</span><span class="sxs-lookup"><span data-stu-id="565ce-386">hello web application needs tooacquire an access token so that it can authenticate toohello web API and retrieve hello desired resource.</span></span> <span data-ttu-id="565ce-387">A kérelem tooAzure AD meg jogkivonat végpontjához hello hitelesítő adat, Alkalmazásazonosítót és webes API-alkalmazás azonosítója URI teszi.</span><span class="sxs-lookup"><span data-stu-id="565ce-387">It makes a request tooAzure AD’s token endpoint, providing hello credential, Application ID, and web API’s application ID URI.</span></span>
3. <span data-ttu-id="565ce-388">Az Azure AD hitelesíti a hello alkalmazás, és a JWT jogkivonat, amely használt toocall hello webes API adja vissza.</span><span class="sxs-lookup"><span data-stu-id="565ce-388">Azure AD authenticates hello application and returns a JWT access token that is used toocall hello web API.</span></span>
4. <span data-ttu-id="565ce-389">A HTTPS PROTOKOLLOKON keresztül hello webalkalmazás hello JWT access token tooadd hello JWT karakterlánc a "Tulajdonos" jelöléssel visszaadott hello engedélyezési fejlécének hello kérelem toohello webes API-t használ.</span><span class="sxs-lookup"><span data-stu-id="565ce-389">Over HTTPS, hello web application uses hello returned JWT access token tooadd hello JWT string with a “Bearer” designation in hello Authorization header of hello request toohello web API.</span></span> <span data-ttu-id="565ce-390">hello webes API-k majd érvényesíti hello JWT jogkivonatot, és ellenőrzés nem jelez hibát, ha vissza hello szükséges erőforrás.</span><span class="sxs-lookup"><span data-stu-id="565ce-390">hello web API then validates hello JWT token, and if validation is successful, returns hello desired resource.</span></span>

##### <a name="delegated-user-identity-with-openid-connect"></a><span data-ttu-id="565ce-391">Delegált felhasználói identitás openid Connect</span><span class="sxs-lookup"><span data-stu-id="565ce-391">Delegated User Identity with OpenID Connect</span></span>
1. <span data-ttu-id="565ce-392">Tooa webalkalmazását az Azure AD használatával bejelentkezett felhasználó (lásd: hello [webböngésző tooWeb alkalmazás](#web-browser-to-web-application) fenti szakaszban).</span><span class="sxs-lookup"><span data-stu-id="565ce-392">A user is signed in tooa web application using Azure AD (see hello [Web Browser tooWeb Application](#web-browser-to-web-application) section above).</span></span> <span data-ttu-id="565ce-393">Ha hello felhasználói hello webes alkalmazás nem hozzájárult még tooallowing hello webes alkalmazás toocall hello webes API-t a nevében, hello felhasználói tooconsent kell.</span><span class="sxs-lookup"><span data-stu-id="565ce-393">If hello user of hello web application has not yet consented tooallowing hello web application toocall hello web API on its behalf, hello user will need tooconsent.</span></span> <span data-ttu-id="565ce-394">hello alkalmazás megjeleníti hello engedélyeket igényel, és ha ezek egyikét sem rendszergazdai engedélyek, a normál felhasználói hello címtárban nem lesz képes tooconsent.</span><span class="sxs-lookup"><span data-stu-id="565ce-394">hello application will display hello permissions it requires, and if any of these are administrator-level permissions, a normal user in hello directory will not be able tooconsent.</span></span> <span data-ttu-id="565ce-395">Hello alkalmazás már rendelkezik hello szükséges engedélyekkel a hozzájárulási folyamat csak toomulti bérlői alkalmazások, nem egybérlős alkalmazások alkalmazza.</span><span class="sxs-lookup"><span data-stu-id="565ce-395">This consent process only applies toomulti-tenant applications, not single tenant applications, as hello application will already have hello necessary permissions.</span></span> <span data-ttu-id="565ce-396">Hello bejelentkezett felhasználó, hello webalkalmazás kapott egy azonosító jogkivonat hello felhasználó, valamint az engedélyezési kód kapcsolatos információkat.</span><span class="sxs-lookup"><span data-stu-id="565ce-396">When hello user signed in, hello web application received an ID token with information about hello user, as well as an authorization code.</span></span>
2. <span data-ttu-id="565ce-397">Hello engedélyezési kód az Azure AD által kibocsátott használatával, hello webes alkalmazás küld egy kérelem tooAzure AD a token-végpont hello engedélyezési kódot tartalmazó, hello ügyfélalkalmazás (alkalmazás Azonosítóját és átirányítási URI-t), és hello szükségeskonfiguráció-erőforrás) Application ID URI hello webes API).</span><span class="sxs-lookup"><span data-stu-id="565ce-397">Using hello authorization code issued by Azure AD, hello web application sends a request tooAzure AD’s token endpoint that includes hello authorization code, details about hello client application (Application ID and redirect URI), and hello desired resource (application ID URI for hello web API).</span></span>
3. <span data-ttu-id="565ce-398">hello engedélyezési kód és információ hello webalkalmazás és a webes API-t az Azure AD érvényesíti.</span><span class="sxs-lookup"><span data-stu-id="565ce-398">hello authorization code and information about hello web application and web API are validated by Azure AD.</span></span> <span data-ttu-id="565ce-399">Sikeres ellenőrzés esetén az Azure AD két jogkivonatok adja vissza: a JWT jogkivonat és egy frissítési JWT jogkivonat.</span><span class="sxs-lookup"><span data-stu-id="565ce-399">Upon successful validation, Azure AD returns two tokens: a JWT access token and a JWT refresh token.</span></span>
4. <span data-ttu-id="565ce-400">A HTTPS PROTOKOLLOKON keresztül hello webalkalmazás hello JWT access token tooadd hello JWT karakterlánc a "Tulajdonos" jelöléssel visszaadott hello engedélyezési fejlécének hello kérelem toohello webes API-t használ.</span><span class="sxs-lookup"><span data-stu-id="565ce-400">Over HTTPS, hello web application uses hello returned JWT access token tooadd hello JWT string with a “Bearer” designation in hello Authorization header of hello request toohello web API.</span></span> <span data-ttu-id="565ce-401">hello webes API-k majd érvényesíti hello JWT jogkivonatot, és ellenőrzés nem jelez hibát, ha vissza hello szükséges erőforrás.</span><span class="sxs-lookup"><span data-stu-id="565ce-401">hello web API then validates hello JWT token, and if validation is successful, returns hello desired resource.</span></span>

##### <a name="delegated-user-identity-with-oauth-20-authorization-code-grant"></a><span data-ttu-id="565ce-402">Az OAuth 2.0 kód Hitelesítésengedélyezési delegált felhasználók identitását</span><span class="sxs-lookup"><span data-stu-id="565ce-402">Delegated User Identity with OAuth 2.0 Authorization Code Grant</span></span>
1. <span data-ttu-id="565ce-403">A felhasználó már bejelentkezett tooa webes alkalmazás, amelynek hitelesítési módszer használata az Azure AD független.</span><span class="sxs-lookup"><span data-stu-id="565ce-403">A user is already signed in tooa web application, whose authentication mechanism is independent of Azure AD.</span></span>
2. <span data-ttu-id="565ce-404">hello webes alkalmazáshoz szükséges engedélyezési kód a hozzáférési tokent, tooacquire, az általa kiállított hello böngésző tooAzure AD meg hitelesítési végpont, hello Alkalmazásazonosító megadása egy kérelmet, és átirányítási URI hello webalkalmazás után sikeres hitelesítés.</span><span class="sxs-lookup"><span data-stu-id="565ce-404">hello web application requires an authorization code tooacquire an access token, so it issues a request through hello browser tooAzure AD’s authorization endpoint, providing hello Application ID and redirect URI for hello web application after successful authentication.</span></span> <span data-ttu-id="565ce-405">hello felhasználó bejelentkezik tooAzure AD.</span><span class="sxs-lookup"><span data-stu-id="565ce-405">hello user signs in tooAzure AD.</span></span>
3. <span data-ttu-id="565ce-406">Ha hello felhasználói hello webes alkalmazás nem hozzájárult még tooallowing hello webes alkalmazás toocall hello webes API-t a nevében, hello felhasználói tooconsent kell.</span><span class="sxs-lookup"><span data-stu-id="565ce-406">If hello user of hello web application has not yet consented tooallowing hello web application toocall hello web API on its behalf, hello user will need tooconsent.</span></span> <span data-ttu-id="565ce-407">hello alkalmazás megjeleníti hello engedélyeket igényel, és ha ezek egyikét sem rendszergazdai engedélyek, a normál felhasználói hello címtárban nem lesz képes tooconsent.</span><span class="sxs-lookup"><span data-stu-id="565ce-407">hello application will display hello permissions it requires, and if any of these are administrator-level permissions, a normal user in hello directory will not be able tooconsent.</span></span> <span data-ttu-id="565ce-408">A hozzájárulási tooboth egyetlen és több-bérlős alkalmazás vonatkozik.</span><span class="sxs-lookup"><span data-stu-id="565ce-408">This consent applies tooboth single and multi-tenant application.</span></span>  <span data-ttu-id="565ce-409">Hello egybérlős esetében egy rendszergazda hajthat végre a rendszergazda jóváhagyását tooconsent azok a felhasználók nevében.</span><span class="sxs-lookup"><span data-stu-id="565ce-409">In hello single tenant case, an admin can perform admin consent tooconsent on behalf of their users.</span></span>  <span data-ttu-id="565ce-410">Ezt megteheti hello segítségével `Grant Permissions` hello gombjára [Azure Portal](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="565ce-410">This can be done using hello `Grant Permissions` button in hello [Azure Portal](https://portal.azure.com).</span></span> 
4. <span data-ttu-id="565ce-411">Miután hello felhasználó hozzájárult, hello webalkalmazás kap hello engedélyezési kódot, hogy kell-e tooacquire olyan hozzáférési jogkivonatot.</span><span class="sxs-lookup"><span data-stu-id="565ce-411">After hello user has consented, hello web application receives hello authorization code that it needs tooacquire an access token.</span></span>
5. <span data-ttu-id="565ce-412">Hello engedélyezési kód az Azure AD által kibocsátott használatával, hello webes alkalmazás küld egy kérelem tooAzure AD a token-végpont hello engedélyezési kódot tartalmazó, hello ügyfélalkalmazás (alkalmazás Azonosítóját és átirányítási URI-t), és hello szükségeskonfiguráció-erőforrás) Application ID URI hello webes API).</span><span class="sxs-lookup"><span data-stu-id="565ce-412">Using hello authorization code issued by Azure AD, hello web application sends a request tooAzure AD’s token endpoint that includes hello authorization code, details about hello client application (Application ID and redirect URI), and hello desired resource (application ID URI for hello web API).</span></span>
6. <span data-ttu-id="565ce-413">hello engedélyezési kód és információ hello webalkalmazás és a webes API-t az Azure AD érvényesíti.</span><span class="sxs-lookup"><span data-stu-id="565ce-413">hello authorization code and information about hello web application and web API are validated by Azure AD.</span></span> <span data-ttu-id="565ce-414">Sikeres ellenőrzés esetén az Azure AD két jogkivonatok adja vissza: a JWT jogkivonat és egy frissítési JWT jogkivonat.</span><span class="sxs-lookup"><span data-stu-id="565ce-414">Upon successful validation, Azure AD returns two tokens: a JWT access token and a JWT refresh token.</span></span>
7. <span data-ttu-id="565ce-415">A HTTPS PROTOKOLLOKON keresztül hello webalkalmazás hello JWT access token tooadd hello JWT karakterlánc a "Tulajdonos" jelöléssel visszaadott hello engedélyezési fejlécének hello kérelem toohello webes API-t használ.</span><span class="sxs-lookup"><span data-stu-id="565ce-415">Over HTTPS, hello web application uses hello returned JWT access token tooadd hello JWT string with a “Bearer” designation in hello Authorization header of hello request toohello web API.</span></span> <span data-ttu-id="565ce-416">hello webes API-k majd érvényesíti hello JWT jogkivonatot, és ellenőrzés nem jelez hibát, ha vissza hello szükséges erőforrás.</span><span class="sxs-lookup"><span data-stu-id="565ce-416">hello web API then validates hello JWT token, and if validation is successful, returns hello desired resource.</span></span>

#### <a name="code-samples"></a><span data-ttu-id="565ce-417">Kódminták</span><span class="sxs-lookup"><span data-stu-id="565ce-417">Code Samples</span></span>
<span data-ttu-id="565ce-418">Lásd: hello mintakódok webalkalmazás tooWeb API forgatókönyvek esetén.</span><span class="sxs-lookup"><span data-stu-id="565ce-418">See hello code samples for Web Application tooWeb API scenarios.</span></span> <span data-ttu-id="565ce-419">És foglalkozzon gyakran--jelenleg felvenni új minták összes hello idő.</span><span class="sxs-lookup"><span data-stu-id="565ce-419">And, check back frequently -- we add new samples all hello time.</span></span> <span data-ttu-id="565ce-420">Webes [alkalmazás tooWeb API](active-directory-code-samples.md#web-application-to-web-api).</span><span class="sxs-lookup"><span data-stu-id="565ce-420">Web [Application tooWeb API](active-directory-code-samples.md#web-application-to-web-api).</span></span>

#### <a name="registering"></a><span data-ttu-id="565ce-421">Regisztrálása</span><span class="sxs-lookup"><span data-stu-id="565ce-421">Registering</span></span>
* <span data-ttu-id="565ce-422">Egyetlen bérlői: Hello Alkalmazásidentitás és a felhasználó delegált identitása esetekben hello webalkalmazás és hello webes API-t kell regisztrálni az hello ugyanabban a könyvtárban az Azure ad-ben.</span><span class="sxs-lookup"><span data-stu-id="565ce-422">Single Tenant: For both hello application identity and delegated user identity cases, hello web application and hello web API must be registered in hello same directory in Azure AD.</span></span> <span data-ttu-id="565ce-423">hello webes API-k lehet konfigurált tooexpose engedélyekkel, amelyek tooits erőforrások használt toolimit hello webes alkalmazás eléréséhez.</span><span class="sxs-lookup"><span data-stu-id="565ce-423">hello web API can be configured tooexpose a set of permissions, which are used toolimit hello web application’s access tooits resources.</span></span> <span data-ttu-id="565ce-424">A delegált felhasználói identitástípus használatos, ha a hello webalkalmazásnak kell tooselect hello szükséges engedélyek a hello Azure Portal hello "Engedélyek tooOther alkalmazások" legördülő menüből.</span><span class="sxs-lookup"><span data-stu-id="565ce-424">If a delegated user identity type is being used, hello web application needs tooselect hello desired permissions from hello “Permissions tooOther Applications” drop-down menu in hello Azure Portal.</span></span> <span data-ttu-id="565ce-425">Ebben a lépésben nincs szükség, ha hello alkalmazás identity típus használatban van.</span><span class="sxs-lookup"><span data-stu-id="565ce-425">This step is not required if hello application identity type is being used.</span></span>
* <span data-ttu-id="565ce-426">Több-Bérlős: Először hello webalkalmazás konfigurált tooindicate hello engedélyek működési toobe van szükség.</span><span class="sxs-lookup"><span data-stu-id="565ce-426">Multi-Tenant: First, hello web application is configured tooindicate hello permissions it requires toobe functional.</span></span> <span data-ttu-id="565ce-427">A szükséges engedélyek listája párbeszédpanel jelenik meg, amikor egy felhasználó vagy rendszergazda hello célkönyvtárban hozzájárulási toohello alkalmazás, így a rendelkezésre álló tootheir szervezet.</span><span class="sxs-lookup"><span data-stu-id="565ce-427">This list of required permissions is shown in a dialog when a user or administrator in hello destination directory gives consent toohello application, which makes it available tootheir organization.</span></span> <span data-ttu-id="565ce-428">Egyes alkalmazások csak a felhasználói szintű engedélyek, amelyek hello szervezet bármely felhasználója is szükséges.</span><span class="sxs-lookup"><span data-stu-id="565ce-428">Some applications require just user-level permissions, which any user in hello organization can consent to.</span></span> <span data-ttu-id="565ce-429">Más alkalmazásoknak rendszergazdai engedélyek, amelyek hello szervezetben a felhasználók nem járulhatnak hozzá.</span><span class="sxs-lookup"><span data-stu-id="565ce-429">Other applications require administrator-level permissions, which a user in hello organization cannot consent to.</span></span> <span data-ttu-id="565ce-430">A címtár csak a rendszergazda biztosíthat hozzájárulási tooapplications, ez a jogosultsági szint szükséges.</span><span class="sxs-lookup"><span data-stu-id="565ce-430">Only a directory administrator can give consent tooapplications that require this level of permissions.</span></span> <span data-ttu-id="565ce-431">Amikor hello felhasználói vagy rendszergazdai hozzájárulásokat azoktól, hello webes alkalmazáshoz és hello webes API egyaránt regisztrálva van a címtárban.</span><span class="sxs-lookup"><span data-stu-id="565ce-431">When hello user or administrator consents, hello web application and hello web API are both registered in their directory.</span></span>

#### <a name="token-expiration"></a><span data-ttu-id="565ce-432">Jogkivonat lejáratáról</span><span class="sxs-lookup"><span data-stu-id="565ce-432">Token Expiration</span></span>
<span data-ttu-id="565ce-433">Hello webalkalmazás az engedélyezési kód tooget a JWT jogkivonat használ, amikor JWT frissítési jogkivonat is megkapja.</span><span class="sxs-lookup"><span data-stu-id="565ce-433">When hello web application uses its authorization code tooget a JWT access token, it also receives a JWT refresh token.</span></span> <span data-ttu-id="565ce-434">Amikor hello hozzáférési jogkivonat lejár, a hello frissítési jogkivonat lehet-e a használt toore-anélkül, hogy azokat újra a toosign hello felhasználó hitelesítéséhez.</span><span class="sxs-lookup"><span data-stu-id="565ce-434">When hello access token expires, hello refresh token can be used toore-authenticate hello user without requiring them toosign in again.</span></span> <span data-ttu-id="565ce-435">A frissítési jogkivonat nem használt tooauthenticate hello felhasználói, mely eredményezi, hogy egy új hozzáférési tokent, és frissítse token.</span><span class="sxs-lookup"><span data-stu-id="565ce-435">This refresh token is then used tooauthenticate hello user, which results in a new access token and refresh token.</span></span>

### <a name="daemon-or-server-application-tooweb-api"></a><span data-ttu-id="565ce-436">Démon vagy kiszolgálói alkalmazás tooWeb API</span><span class="sxs-lookup"><span data-stu-id="565ce-436">Daemon or Server Application tooWeb API</span></span>
<span data-ttu-id="565ce-437">Ez a szakasz ismerteti, amelyet a webes API-k tooget erőforrásokat démon vagy kiszolgálói alkalmazás.</span><span class="sxs-lookup"><span data-stu-id="565ce-437">This section describes a daemon or server application that needs tooget resources from a web API.</span></span> <span data-ttu-id="565ce-438">Két alárendelt esetben toothis szakasz alkalmazó: toocall egy webes API-t OAuth 2.0 ügyfél hitelesítő adatok engedélytípus; épülő igénylő démon és egy kiszolgáló alkalmazások (például a webes API-k), amelyet a toocall a webes API-k, épülő OAuth 2.0 On-Behalf-Of vázlat megadását.</span><span class="sxs-lookup"><span data-stu-id="565ce-438">There are two sub-scenarios that apply toothis section: A daemon that needs toocall a web API, built on OAuth 2.0 client credentials grant type; and a server application (such as a web API) that needs toocall a web API, built on OAuth 2.0 On-Behalf-Of draft specification.</span></span>

<span data-ttu-id="565ce-439">Hello a forgatókönyvhöz egy démon alkalmazást toocall egy webes API-t kell esetén fontos toounderstand folyamatban van.</span><span class="sxs-lookup"><span data-stu-id="565ce-439">For hello scenario when a daemon application needs toocall a web API, it’s important toounderstand a few things.</span></span> <span data-ttu-id="565ce-440">Először nincs lehetőség démon alkalmazással, amelyhez hello alkalmazás toohave saját identitás szükséges felhasználói közreműködés.</span><span class="sxs-lookup"><span data-stu-id="565ce-440">First, user interaction is not possible with a daemon application, which requires hello application toohave its own identity.</span></span> <span data-ttu-id="565ce-441">Egy démon alkalmazás például egy kötegelt vagy hello háttérben futó operációs rendszer szolgáltatásnak.</span><span class="sxs-lookup"><span data-stu-id="565ce-441">An example of a daemon application is a batch job, or an operating system service running in hello background.</span></span> <span data-ttu-id="565ce-442">Ez az alkalmazástípus hozzáférési tokent az Alkalmazásidentitás használatával, és a Alkalmazásazonosító, a hitelesítő adatok (jelszó vagy a tanúsítvány) és a kérelem URI azonosítója tooAzure AD bemutató kéri.</span><span class="sxs-lookup"><span data-stu-id="565ce-442">This type of application requests an access token by using its application identity and presenting its Application ID, credential (password or certificate), and application ID URI tooAzure AD.</span></span> <span data-ttu-id="565ce-443">Sikeres hitelesítést követően hello démon megkapja a hozzáférési tokent az Azure AD, amely akkor használt toocall hello webes API.</span><span class="sxs-lookup"><span data-stu-id="565ce-443">After successful authentication, hello daemon receives an access token from Azure AD, which is then used toocall hello web API.</span></span>

<span data-ttu-id="565ce-444">Hello a forgatókönyvhöz egy kiszolgálói alkalmazás toocall egy webes API-t kell esetén hasznos toouse példa.</span><span class="sxs-lookup"><span data-stu-id="565ce-444">For hello scenario when a server application needs toocall a web API, it’s helpful toouse an example.</span></span> <span data-ttu-id="565ce-445">Tegyük fel, hogy a felhasználó a natív alkalmazás hitelesítette, és a natív alkalmazást kell toocall egy webes API-t.</span><span class="sxs-lookup"><span data-stu-id="565ce-445">Imagine that a user has authenticated on a native application, and this native application needs toocall a web API.</span></span> <span data-ttu-id="565ce-446">Az Azure AD kibocsát egy JWT access token toocall hello webes API-t.</span><span class="sxs-lookup"><span data-stu-id="565ce-446">Azure AD issues a JWT access token toocall hello web API.</span></span> <span data-ttu-id="565ce-447">Hello webes API-t kell toocall egy másik alsóbb rétegbeli webes API-t, ha el hello a-meghatalmazásos folyamat toodelegate hello felhasználó identitását, és hitelesíteni toohello alacsonyabb szintű webes API-t.</span><span class="sxs-lookup"><span data-stu-id="565ce-447">If hello web API needs toocall another downstream web API, it can use hello on-behalf-of flow toodelegate hello user’s identity and authenticate toohello second-tier web API.</span></span>

#### <a name="diagram"></a><span data-ttu-id="565ce-448">Ábra</span><span class="sxs-lookup"><span data-stu-id="565ce-448">Diagram</span></span>
![Démon vagy kiszolgálói alkalmazás tooWeb API diagramja](./media/active-directory-authentication-scenarios/daemon_server_app_to_web_api.png)

#### <a name="description-of-protocol-flow"></a><span data-ttu-id="565ce-450">Protokoll folyamat leírása</span><span class="sxs-lookup"><span data-stu-id="565ce-450">Description of Protocol Flow</span></span>
##### <a name="application-identity-with-oauth-20-client-credentials-grant"></a><span data-ttu-id="565ce-451">Az OAuth 2.0 ügyfél Alkalmazásidentitás hitelesítő adatok megadása</span><span class="sxs-lookup"><span data-stu-id="565ce-451">Application Identity with OAuth 2.0 Client Credentials Grant</span></span>
1. <span data-ttu-id="565ce-452">Első lépésként hello server alkalmazást kell tooauthenticate az Azure ad szolgáltatással, mint például az interaktív bejelentkezési párbeszédpanel emberi beavatkozás nélkül.</span><span class="sxs-lookup"><span data-stu-id="565ce-452">First, hello server application needs tooauthenticate with Azure AD as itself, without any human interaction such as an interactive sign-on dialog.</span></span> <span data-ttu-id="565ce-453">Így a kérelem tooAzure AD meg jogkivonat végpontjához hello hitelesítő adat, Alkalmazásazonosítót és alkalmazás URI azonosítója.</span><span class="sxs-lookup"><span data-stu-id="565ce-453">It makes a request tooAzure AD’s token endpoint, providing hello credential, Application ID, and application ID URI.</span></span>
2. <span data-ttu-id="565ce-454">Az Azure AD hitelesíti a hello alkalmazás, és a JWT jogkivonat, amely használt toocall hello webes API adja vissza.</span><span class="sxs-lookup"><span data-stu-id="565ce-454">Azure AD authenticates hello application and returns a JWT access token that is used toocall hello web API.</span></span>
3. <span data-ttu-id="565ce-455">A HTTPS PROTOKOLLOKON keresztül hello webalkalmazás hello JWT access token tooadd hello JWT karakterlánc a "Tulajdonos" jelöléssel visszaadott hello engedélyezési fejlécének hello kérelem toohello webes API-t használ.</span><span class="sxs-lookup"><span data-stu-id="565ce-455">Over HTTPS, hello web application uses hello returned JWT access token tooadd hello JWT string with a “Bearer” designation in hello Authorization header of hello request toohello web API.</span></span> <span data-ttu-id="565ce-456">hello webes API-k majd érvényesíti hello JWT jogkivonatot, és ellenőrzés nem jelez hibát, ha vissza hello szükséges erőforrás.</span><span class="sxs-lookup"><span data-stu-id="565ce-456">hello web API then validates hello JWT token, and if validation is successful, returns hello desired resource.</span></span>

##### <a name="delegated-user-identity-with-oauth-20-on-behalf-of-draft-specification"></a><span data-ttu-id="565ce-457">OAuth 2.0 a nevében-az Vázlat meghatározásával delegált felhasználói azonosító</span><span class="sxs-lookup"><span data-stu-id="565ce-457">Delegated User Identity with OAuth 2.0 On-Behalf-Of Draft Specification</span></span>
<span data-ttu-id="565ce-458">alább hello folyamata azt feltételezi, hogy, hogy a felhasználó hitelesítése egy másik alkalmazástól (például egy natív alkalmazást), és a felhasználói identitás használt tooacquire egy hozzáférési jogkivonat toohello első szintű webes API-t.</span><span class="sxs-lookup"><span data-stu-id="565ce-458">hello flow discussed below assumes that a user has been authenticated on another application (such as a native application), and their user identity has been used tooacquire an access token toohello first-tier web API.</span></span>

1. <span data-ttu-id="565ce-459">hello natív alkalmazás hello access token toohello első szintű webes API-t küld.</span><span class="sxs-lookup"><span data-stu-id="565ce-459">hello native application sends hello access token toohello first-tier web API.</span></span>
2. <span data-ttu-id="565ce-460">hello első szintű webes API-t küld egy kérelem tooAzure AD meg token-végpont, így az alkalmazás Azonosítóját és hitelesítő adatait, valamint hello felhasználói jogkivonat.</span><span class="sxs-lookup"><span data-stu-id="565ce-460">hello first-tier web API sends a request tooAzure AD’s token endpoint, providing its Application ID and credentials, as well as hello user’s access token.</span></span> <span data-ttu-id="565ce-461">Ezenkívül hello kérelem nem jut egy paraméter, amely azt jelzi, hello on_behalf_of API által kért új webes jogkivonatok toocall egy alsóbb rétegbeli webes API hello eredeti felhasználó nevében.</span><span class="sxs-lookup"><span data-stu-id="565ce-461">In addition, hello request is sent with an on_behalf_of parameter that indicates hello web API is requesting new tokens toocall a downstream web API on behalf of hello original user.</span></span>
3. <span data-ttu-id="565ce-462">Az Azure AD ellenőrzi a hello első szintű web API engedélyek tooaccess hello alacsonyabb szintű webes API rendelkezik, és érvényesíti a hello kérelem vissza a JWT jogkivonat és egy JWT jogkivonat toohello első szintű webes API frissítése.</span><span class="sxs-lookup"><span data-stu-id="565ce-462">Azure AD verifies that hello first-tier web API has permissions tooaccess hello second-tier web API and validates hello request, returning a JWT access token and a JWT refresh token toohello first-tier web API.</span></span>
4. <span data-ttu-id="565ce-463">A HTTPS PROTOKOLLOKON keresztül hello első szintű webes API majd meghívja a második szintű webes API-k hello hello lexikális elem karakterlánca hello engedélyezési fejlécben hello kérelem hozzáfűzésével.</span><span class="sxs-lookup"><span data-stu-id="565ce-463">Over HTTPS, hello first-tier web API then calls hello second-tier web API by appending hello token string in hello Authorization header in hello request.</span></span> <span data-ttu-id="565ce-464">hello első szintű webes API-t továbbra is toocall hello alacsonyabb szintű webes API-t, mindaddig, amíg hello hozzáférési jogkivonat és frissítési jogkivonatok érvényesek.</span><span class="sxs-lookup"><span data-stu-id="565ce-464">hello first-tier web API can continue toocall hello second-tier web API as long as hello access token and refresh tokens are valid.</span></span>

#### <a name="code-samples"></a><span data-ttu-id="565ce-465">Kódminták</span><span class="sxs-lookup"><span data-stu-id="565ce-465">Code Samples</span></span>
<span data-ttu-id="565ce-466">Lásd: hello mintakódok démon vagy kiszolgálói alkalmazás tooWeb API forgatókönyvek esetén.</span><span class="sxs-lookup"><span data-stu-id="565ce-466">See hello code samples for Daemon or Server Application tooWeb API scenarios.</span></span> <span data-ttu-id="565ce-467">És foglalkozzon gyakran--jelenleg felvenni új minták összes hello idő.</span><span class="sxs-lookup"><span data-stu-id="565ce-467">And, check back frequently -- we add new samples all hello time.</span></span> [<span data-ttu-id="565ce-468">Kiszolgáló vagy démon alkalmazás tooWeb API</span><span class="sxs-lookup"><span data-stu-id="565ce-468">Server or Daemon Application tooWeb API</span></span>](active-directory-code-samples.md#server-or-daemon-application-to-web-api)

#### <a name="registering"></a><span data-ttu-id="565ce-469">Regisztrálása</span><span class="sxs-lookup"><span data-stu-id="565ce-469">Registering</span></span>
* <span data-ttu-id="565ce-470">Egybérlős: Hello Alkalmazásidentitás és a felhasználó delegált identitása esetekben hello démon vagy server alkalmazást regisztrálni kell a hello ugyanabban a könyvtárban az Azure ad-ben.</span><span class="sxs-lookup"><span data-stu-id="565ce-470">Single Tenant: For both hello application identity and delegated user identity cases, hello daemon or server application must be registered in hello same directory in Azure AD.</span></span> <span data-ttu-id="565ce-471">hello webes API-k konfigurált tooexpose engedélyekkel, amelyek használt toolimit hello démon vagy a kiszolgáló hozzáférés tooits erőforrásait is lehet.</span><span class="sxs-lookup"><span data-stu-id="565ce-471">hello web API can be configured tooexpose a set of permissions, which are used toolimit hello daemon or server’s access tooits resources.</span></span> <span data-ttu-id="565ce-472">A delegált felhasználói identitástípus használatos, ha hello server alkalmazást kell hello "Engedélyek tooOther alkalmazások" legördülő menüjében hello Azure portálon lévő tooselect hello szükséges engedélyekkel.</span><span class="sxs-lookup"><span data-stu-id="565ce-472">If a delegated user identity type is being used, hello server application needs tooselect hello desired permissions from hello “Permissions tooOther Applications” drop-down menu in hello Azure Portal.</span></span> <span data-ttu-id="565ce-473">Ebben a lépésben nincs szükség, ha hello alkalmazás identity típus használatban van.</span><span class="sxs-lookup"><span data-stu-id="565ce-473">This step is not required if hello application identity type is being used.</span></span>
* <span data-ttu-id="565ce-474">Több-Bérlős: Először hello démon vagy kiszolgálói alkalmazás konfigurált tooindicate hello engedélyek működési toobe van szükség.</span><span class="sxs-lookup"><span data-stu-id="565ce-474">Multi-Tenant: First, hello daemon or server application is configured tooindicate hello permissions it requires toobe functional.</span></span> <span data-ttu-id="565ce-475">A szükséges engedélyek listája párbeszédpanel jelenik meg, amikor egy felhasználó vagy rendszergazda hello célkönyvtárban hozzájárulási toohello alkalmazás, így a rendelkezésre álló tootheir szervezet.</span><span class="sxs-lookup"><span data-stu-id="565ce-475">This list of required permissions is shown in a dialog when a user or administrator in hello destination directory gives consent toohello application, which makes it available tootheir organization.</span></span> <span data-ttu-id="565ce-476">Egyes alkalmazások csak a felhasználói szintű engedélyek, amelyek hello szervezet bármely felhasználója is szükséges.</span><span class="sxs-lookup"><span data-stu-id="565ce-476">Some applications require just user-level permissions, which any user in hello organization can consent to.</span></span> <span data-ttu-id="565ce-477">Más alkalmazásoknak rendszergazdai engedélyek, amelyek hello szervezetben a felhasználók nem járulhatnak hozzá.</span><span class="sxs-lookup"><span data-stu-id="565ce-477">Other applications require administrator-level permissions, which a user in hello organization cannot consent to.</span></span> <span data-ttu-id="565ce-478">A címtár csak a rendszergazda biztosíthat hozzájárulási tooapplications, ez a jogosultsági szint szükséges.</span><span class="sxs-lookup"><span data-stu-id="565ce-478">Only a directory administrator can give consent tooapplications that require this level of permissions.</span></span> <span data-ttu-id="565ce-479">Hello felhasználói vagy rendszergazdai hozzájárul, ha mindkét hello webes API-k a könyvtárban van regisztrálva.</span><span class="sxs-lookup"><span data-stu-id="565ce-479">When hello user or administrator consents, both of hello web APIs are registered in their directory.</span></span>

#### <a name="token-expiration"></a><span data-ttu-id="565ce-480">Jogkivonat lejáratáról</span><span class="sxs-lookup"><span data-stu-id="565ce-480">Token Expiration</span></span>
<span data-ttu-id="565ce-481">Hello első alkalmazás használja az engedélyezési kód tooget a JWT jogkivonat, amikor JWT frissítési jogkivonat is megkapja.</span><span class="sxs-lookup"><span data-stu-id="565ce-481">When hello first application uses its authorization code tooget a JWT access token, it also receives a JWT refresh token.</span></span> <span data-ttu-id="565ce-482">Amikor hello hozzáférési jogkivonat lejár, a hello frissítési jogkivonat lehet-e a használt toore-hello felhasználói hitelesítés nélkül kéri a hitelesítő adatokat.</span><span class="sxs-lookup"><span data-stu-id="565ce-482">When hello access token expires, hello refresh token can be used toore-authenticate hello user without prompting for credentials.</span></span> <span data-ttu-id="565ce-483">A frissítési jogkivonat nem használt tooauthenticate hello felhasználói, mely eredményezi, hogy egy új hozzáférési tokent, és frissítse token.</span><span class="sxs-lookup"><span data-stu-id="565ce-483">This refresh token is then used tooauthenticate hello user, which results in a new access token and refresh token.</span></span>

## <a name="see-also"></a><span data-ttu-id="565ce-484">Lásd még:</span><span class="sxs-lookup"><span data-stu-id="565ce-484">See Also</span></span>
[<span data-ttu-id="565ce-485">Az Azure Active Directory fejlesztői útmutatója</span><span class="sxs-lookup"><span data-stu-id="565ce-485">Azure Active Directory Developer's Guide</span></span>](active-directory-developers-guide.md)

[<span data-ttu-id="565ce-486">Az Azure Active Directory-Kódminták</span><span class="sxs-lookup"><span data-stu-id="565ce-486">Azure Active Directory Code Samples</span></span>](active-directory-code-samples.md)

[<span data-ttu-id="565ce-487">Fontos információkat a kulcsváltás Azure AD-ben</span><span class="sxs-lookup"><span data-stu-id="565ce-487">Important Information About Signing Key Rollover in Azure AD</span></span>](active-directory-signing-key-rollover.md)

[<span data-ttu-id="565ce-488">OAuth 2.0 Azure AD-ben</span><span class="sxs-lookup"><span data-stu-id="565ce-488">OAuth 2.0 in Azure AD</span></span>](https://msdn.microsoft.com/library/azure/dn645545.aspx)

