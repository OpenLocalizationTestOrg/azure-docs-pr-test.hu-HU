---
title: "Hogyan hozhat létre egy alkalmazást, minden Azure AD-felhasználó bejelentkezés |} Microsoft Docs"
description: "Lépésről lépésre, amely egy alkalmazás létrehozásához szükséges utasításokat jelentkezhetnek be a felhasználó bármely Azure Active Directory-bérlőhöz, más néven egy több-bérlős alkalmazást."
services: active-directory
documentationcenter: 
author: dstrockis
manager: mbaldwin
editor: 
ms.assetid: 35af95cb-ced3-46ad-b01d-5d2f6fd064a3
ms.service: active-directory
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: identity
ms.date: 04/26/2017
ms.author: dastrock
ms.custom: aaddev
ms.openlocfilehash: f1c79fa7e3b0e160487b5941741f6a6c677c6b81
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 07/11/2017
---
# <a name="how-to-sign-in-any-azure-active-directory-ad-user-using-the-multi-tenant-application-pattern"></a><span data-ttu-id="233e6-103">Bejelentkezés bármely Azure Active Directory (AD) felhasználó használja a több-bérlős alkalmazásminta</span><span class="sxs-lookup"><span data-stu-id="233e6-103">How to sign in any Azure Active Directory (AD) user using the multi-tenant application pattern</span></span>
<span data-ttu-id="233e6-104">Ha egy szoftver számos szervezet hasonló szolgáltatás alkalmazásként, konfigurálhatja az alkalmazás minden Azure AD-bérlő bejelentkezések fogadására.</span><span class="sxs-lookup"><span data-stu-id="233e6-104">If you offer a Software as a Service application to many organizations, you can configure your application to accept sign-ins from any Azure AD tenant.</span></span>  <span data-ttu-id="233e6-105">Az Azure ad-ben ezt nevezik, így az alkalmazás több-bérlős.</span><span class="sxs-lookup"><span data-stu-id="233e6-105">In Azure AD this is called making your application multi-tenant.</span></span>  <span data-ttu-id="233e6-106">Bármely Azure AD-bérlő felhasználók fog tudni bejelentkezni az alkalmazás után hozzájárul ahhoz, hogy a fiókot használja az alkalmazással.</span><span class="sxs-lookup"><span data-stu-id="233e6-106">Users in any Azure AD tenant will be able to sign in to your application after consenting to use their account with your application.</span></span>  

<span data-ttu-id="233e6-107">Ha egy meglévő alkalmazást a saját fiók rendszer, vagy egyéb forgalomból adódó bejelentkezés más felhőalapú szolgáltatók támogatja, felvétele az Azure AD-bejelentkezés a panelhez használata egyszerű.</span><span class="sxs-lookup"><span data-stu-id="233e6-107">If you have an existing application that has its own account system, or supports other kinds of sign-in from other cloud providers, adding Azure AD sign-in from any tenant is simple.</span></span> <span data-ttu-id="233e6-108">Csak az alkalmazás regisztrálásához, adja hozzá az OAuth2, az OpenID Connect vagy a SAML-bejelentkezés kódot, és a "Sign In with Microsoft" gomb elhelyezése az alkalmazás.</span><span class="sxs-lookup"><span data-stu-id="233e6-108">Just register your app, add sign-in code via OAuth2, OpenID Connect, or SAML, and put a "Sign In with Microsoft" button on your application.</span></span> <span data-ttu-id="233e6-109">Az alábbi gombra kattintva tudhat meg többet az alkalmazás branding.</span><span class="sxs-lookup"><span data-stu-id="233e6-109">Click the following button to learn more about branding your application.</span></span>

<span data-ttu-id="233e6-110">[! [Gomb bejelentkezés] [Az AAD-bejelentkezés]][AAD-App-Branding]</span><span class="sxs-lookup"><span data-stu-id="233e6-110">[![Sign in button][AAD-Sign-In]][AAD-App-Branding]</span></span>

<span data-ttu-id="233e6-111">Ez a cikk feltételezi, hogy már ismeri az Azure AD egy egybérlős alkalmazás felépítése.</span><span class="sxs-lookup"><span data-stu-id="233e6-111">This article assumes you’re already familiar with building a single tenant application for Azure AD.</span></span>  <span data-ttu-id="233e6-112">Ha nem, head biztonsági másolatot a [fejlesztői útmutató kezdőlap] [ AAD-Dev-Guide] és tekintse meg a gyors üzembe helyezések!</span><span class="sxs-lookup"><span data-stu-id="233e6-112">If you’re not, head back up to the [developer guide homepage][AAD-Dev-Guide] and try one of our quick starts!</span></span>

<span data-ttu-id="233e6-113">Az alkalmazás alakítani egy több-bérlős az Azure AD alkalmazás négy egyszerű lépésben történik:</span><span class="sxs-lookup"><span data-stu-id="233e6-113">There are four simple steps to convert your application into an Azure AD multi-tenant app:</span></span>

1. <span data-ttu-id="233e6-114">A több-bérlős kell regisztrációja frissítése</span><span class="sxs-lookup"><span data-stu-id="233e6-114">Update your application registration to be multi-tenant</span></span>
2. <span data-ttu-id="233e6-115">Frissítse a kódot kérelmeket küldeni a/Common végpont</span><span class="sxs-lookup"><span data-stu-id="233e6-115">Update your code to send requests to the /common endpoint</span></span> 
3. <span data-ttu-id="233e6-116">Frissítse a kódot több kibocsátó érték kezelése</span><span class="sxs-lookup"><span data-stu-id="233e6-116">Update your code to handle multiple issuer values</span></span>
4. <span data-ttu-id="233e6-117">Felhasználó és rendszergazda jóváhagyását megértéséhez, valamint a megfelelő kódot módosításokat</span><span class="sxs-lookup"><span data-stu-id="233e6-117">Understand user and admin consent and make appropriate code changes</span></span>

<span data-ttu-id="233e6-118">Nézzük részletes lépéseit.</span><span class="sxs-lookup"><span data-stu-id="233e6-118">Let’s look at each step in detail.</span></span> <span data-ttu-id="233e6-119">Akkor is is ugorhat rögtön [ebben a listában több-bérlős minták][AAD-Samples-MT].</span><span class="sxs-lookup"><span data-stu-id="233e6-119">You can also jump straight to [this list of multi-tenant samples][AAD-Samples-MT].</span></span>

## <a name="update-registration-to-be-multi-tenant"></a><span data-ttu-id="233e6-120">Több-bérlős kell regisztráció frissítése</span><span class="sxs-lookup"><span data-stu-id="233e6-120">Update registration to be multi-tenant</span></span>
<span data-ttu-id="233e6-121">Alapértelmezés szerint web app/API regisztráció az Azure ad-ben található egybérlős.</span><span class="sxs-lookup"><span data-stu-id="233e6-121">By default, web app/API registrations in Azure AD are single tenant.</span></span>  <span data-ttu-id="233e6-122">Akkor is használhatja a regisztrációs több-bérlős keresése a "Több központjaként" kapcsolót az alkalmazáshoz való regisztráció tulajdonságok lapján a [Azure-portálon] [ AZURE-portal] és az "Igen" beállítás.</span><span class="sxs-lookup"><span data-stu-id="233e6-122">You can make your registration multi-tenant by finding the “Multi-Tenanted” switch on the properties page of your application registration in the [Azure portal][AZURE-portal] and setting it to “Yes”.</span></span>

<span data-ttu-id="233e6-123">Vegye figyelembe azt is, előtt egy alkalmazás több-bérlős, Azure AD szükséges az alkalmazás globálisan egyedinek kell lennie az App ID URI.</span><span class="sxs-lookup"><span data-stu-id="233e6-123">Also note, before an application can be made multi-tenant, Azure AD requires the App ID URI of the application to be globally unique.</span></span> <span data-ttu-id="233e6-124">Az App ID URI az alkalmazás azonosítható protokoll üzeneteinek eljárások valamelyikével.</span><span class="sxs-lookup"><span data-stu-id="233e6-124">The App ID URI is one of the ways an application is identified in protocol messages.</span></span>  <span data-ttu-id="233e6-125">Egyetlen bérlői alkalmazások a rendszer megfelelő a App ID URI bérlőre belül egyedinek kell lennie.</span><span class="sxs-lookup"><span data-stu-id="233e6-125">For a single tenant application, it is sufficient for the App ID URI to be unique within that tenant.</span></span>  <span data-ttu-id="233e6-126">Egy több-bérlős alkalmazáshoz kell legyen globálisan egyedi, az Azure AD megtalálja az alkalmazás összes bérlők között.</span><span class="sxs-lookup"><span data-stu-id="233e6-126">For a multi-tenant application, it must be globally unique so Azure AD can find the application across all tenants.</span></span>  <span data-ttu-id="233e6-127">Globális egyediségi azzal, hogy rendelkezik egy állomásnevet, amely megfelel az Azure AD-bérlő ellenőrzött tartományt App ID URI érvényesül.</span><span class="sxs-lookup"><span data-stu-id="233e6-127">Global uniqueness is enforced by requiring the App ID URI to have a host name that matches a verified domain of the Azure AD tenant.</span></span>  <span data-ttu-id="233e6-128">Például, ha a bérlő neve contoso.onmicrosoft.com, majd egy érvényes App ID URI lenne `https://contoso.onmicrosoft.com/myapp`.</span><span class="sxs-lookup"><span data-stu-id="233e6-128">For example, if the name of your tenant was contoso.onmicrosoft.com then a valid App ID URI would be `https://contoso.onmicrosoft.com/myapp`.</span></span>  <span data-ttu-id="233e6-129">Ha a bérlő az ellenőrzött tartományt kellett `contoso.com`, majd egy érvényes App ID URI is használhatók lesznek `https://contoso.com/myapp`.</span><span class="sxs-lookup"><span data-stu-id="233e6-129">If your tenant had a verified domain of `contoso.com`, then a valid App ID URI would also be `https://contoso.com/myapp`.</span></span>  <span data-ttu-id="233e6-130">Az alkalmazás beállítását több-bérlős sikertelen lesz, ha az App ID URI nem követi ezt a mintát.</span><span class="sxs-lookup"><span data-stu-id="233e6-130">Setting an application as multi-tenant will fail if the App ID URI doesn’t follow this pattern.</span></span>

<span data-ttu-id="233e6-131">Natív ügyfél alapértelmezés szerint több-bérlős hiányoznak.</span><span class="sxs-lookup"><span data-stu-id="233e6-131">Native client registrations are multi-tenant by default.</span></span>  <span data-ttu-id="233e6-132">Nem kell egy natív el semmilyen művelet végrehajtására az ügyfél alkalmazás regisztrációs több-bérlős.</span><span class="sxs-lookup"><span data-stu-id="233e6-132">You don’t need to take any action to make a native client application registration multi-tenant.</span></span>

## <a name="update-your-code-to-send-requests-to-common"></a><span data-ttu-id="233e6-133">Frissítse a kódot kérelmeket küldeni/Common</span><span class="sxs-lookup"><span data-stu-id="233e6-133">Update your code to send requests to /common</span></span>
<span data-ttu-id="233e6-134">Bejelentkezési kérelmek egy egybérlős alkalmazást, a bérlő bejelentkezési végpont kell küldeni.</span><span class="sxs-lookup"><span data-stu-id="233e6-134">In a single tenant application, sign-in requests are sent to the tenant’s sign-in endpoint.</span></span> <span data-ttu-id="233e6-135">Például a contoso.onmicrosoft.com a végpont a következő lesz:</span><span class="sxs-lookup"><span data-stu-id="233e6-135">For example, for contoso.onmicrosoft.com the endpoint would be:</span></span>

    https://login.microsoftonline.com/contoso.onmicrosoft.com

<span data-ttu-id="233e6-136">A tenant végpont küldött kérelmeket a bérlőre elérhető alkalmazásokra mutató bérlőre jelentkezhetnek be a felhasználók (vagy a vendégek).</span><span class="sxs-lookup"><span data-stu-id="233e6-136">Requests sent to a tenant’s endpoint can sign in users (or guests) in that tenant to applications in that tenant.</span></span>  <span data-ttu-id="233e6-137">Egy több-bérlős alkalmazással az alkalmazás nem tud előre milyen bérlő, a felhasználó tartozik, így nem tudnak kérelmeket küldeni a tenant végpont.</span><span class="sxs-lookup"><span data-stu-id="233e6-137">With a multi-tenant application, the application doesn’t know up front what tenant the user is from, so you can’t send requests to a tenant’s endpoint.</span></span>  <span data-ttu-id="233e6-138">Ehelyett kérelmeket küldött egy végpontot, amely minden Azure AD bérlők között multiplexes:</span><span class="sxs-lookup"><span data-stu-id="233e6-138">Instead, requests are sent to an endpoint that multiplexes across all Azure AD tenants:</span></span>

    https://login.microsoftonline.com/common

<span data-ttu-id="233e6-139">Ha az Azure AD meg az/Common kérelem érkezik a végponthoz, azt a felhasználó bejelentkezik, és ennek következtében felderíti a felhasználó mely bérlői.</span><span class="sxs-lookup"><span data-stu-id="233e6-139">When Azure AD receives a request on the /common endpoint, it signs the user in and as a consequence discovers which tenant the user is from.</span></span>  <span data-ttu-id="233e6-140">A/közös végpont működik együtt, minden Azure AD által támogatott hitelesítési protokoll: OpenID Connect, a OAuth 2.0, a SAML 2.0 és a WS-Federation.</span><span class="sxs-lookup"><span data-stu-id="233e6-140">The /common endpoint works with all of the authentication protocols supported by Azure AD:  OpenID Connect, OAuth 2.0, SAML 2.0, and WS-Federation.</span></span>

<span data-ttu-id="233e6-141">Az alkalmazás ezután a bejelentkezési választ a felhasználó jelképező jogkivonatot tartalmazza.</span><span class="sxs-lookup"><span data-stu-id="233e6-141">The sign-in response to the application then contains a token representing the user.</span></span>  <span data-ttu-id="233e6-142">A jogkivonatot kibocsátó értéke be van állítva egy alkalmazás a felhasználó milyen bérlő.</span><span class="sxs-lookup"><span data-stu-id="233e6-142">The issuer value in the token tells an application what tenant the user is from.</span></span>  <span data-ttu-id="233e6-143">Ha választ ad vissza, a/Common a végponthoz, a jogkivonatot kibocsátó értéke felel meg a felhasználó bérlői.</span><span class="sxs-lookup"><span data-stu-id="233e6-143">When a response returns from the /common endpoint, the issuer value in the token will correspond to the user’s tenant.</span></span>  <span data-ttu-id="233e6-144">Fontos megjegyzés: a/Common végpont nem a bérlőt, és nincs kibocsátó, a csupán a multiplexer.</span><span class="sxs-lookup"><span data-stu-id="233e6-144">It’s important to note the /common endpoint is not a tenant and is not an issuer, it’s just a multiplexer.</span></span>  <span data-ttu-id="233e6-145">/ Common használata esetén az alkalmazás érvényesíthet jogkivonatokat logika figyelembe ennek frissíteni kell.</span><span class="sxs-lookup"><span data-stu-id="233e6-145">When using /common, the logic in your application to validate tokens needs to be updated to take this into account.</span></span> 

<span data-ttu-id="233e6-146">A korábban említett, több-bérlős alkalmazásokhoz is biztosítania kell egy egységes bejelentkezés során tapasztal élmény a felhasználók számára, a következő irányelveket branding az Azure AD-alkalmazást.</span><span class="sxs-lookup"><span data-stu-id="233e6-146">As mentioned earlier, multi-tenant applications should also provide a consistent sign-in experience for users, following the Azure AD application branding guidelines.</span></span> <span data-ttu-id="233e6-147">Az alábbi gombra kattintva tudhat meg többet az alkalmazás branding.</span><span class="sxs-lookup"><span data-stu-id="233e6-147">Click the following button to learn more about branding your application.</span></span>

<span data-ttu-id="233e6-148">[! [Gomb bejelentkezés] [Az AAD-bejelentkezés]][AAD-App-Branding]</span><span class="sxs-lookup"><span data-stu-id="233e6-148">[![Sign in button][AAD-Sign-In]][AAD-App-Branding]</span></span>

<span data-ttu-id="233e6-149">Vessen egy pillantást a/Common használatát végpont és a kód végrehajtása részletesebben.</span><span class="sxs-lookup"><span data-stu-id="233e6-149">Let’s take a look at the use of the /common endpoint and your code implementation in more detail.</span></span>

## <a name="update-your-code-to-handle-multiple-issuer-values"></a><span data-ttu-id="233e6-150">Frissítse a kódot több kibocsátó érték kezelése</span><span class="sxs-lookup"><span data-stu-id="233e6-150">Update your code to handle multiple issuer values</span></span>
<span data-ttu-id="233e6-151">Webalkalmazások és webes API-k kap, és érvényesítse az Azure AD.</span><span class="sxs-lookup"><span data-stu-id="233e6-151">Web applications and web APIs receive and validate tokens from Azure AD.</span></span>  

> [!NOTE]
> <span data-ttu-id="233e6-152">Natív ügyfélalkalmazások kérése és jogkivonatokat fogadni az Azure AD, ehhez a elküldhesse az összeset API-k, ahol érvényesítve.</span><span class="sxs-lookup"><span data-stu-id="233e6-152">While native client applications request and receive tokens from Azure AD, they do so to send them to APIs, where they are validated.</span></span>  <span data-ttu-id="233e6-153">Natív alkalmazások nem érvényesíthet jogkivonatokat és kell kezeli őket nem átlátszó.</span><span class="sxs-lookup"><span data-stu-id="233e6-153">Native applications do not validate tokens and must treat them as opaque.</span></span>
> 
> 

<span data-ttu-id="233e6-154">Nézzük, hogyan ellenőrzi az alkalmazás a jogkivonatokat kap az Azure AD.</span><span class="sxs-lookup"><span data-stu-id="233e6-154">Let’s look at how an application validates tokens it receives from Azure AD.</span></span>  <span data-ttu-id="233e6-155">Egy bérlő egyetlen alkalmazás általában lépnek egy végpont értékét, például:</span><span class="sxs-lookup"><span data-stu-id="233e6-155">A single tenant application will normally take an endpoint value like:</span></span>

    https://login.microsoftonline.com/contoso.onmicrosoft.com

<span data-ttu-id="233e6-156">és annak segítségével hozható létre a metaadatok URL-cím (ebben az esetben az OpenID Connect) például:</span><span class="sxs-lookup"><span data-stu-id="233e6-156">and use it to construct a metadata URL (in this case, OpenID Connect) like:</span></span>

    https://login.microsoftonline.com/contoso.onmicrosoft.com/.well-known/openid-configuration

<span data-ttu-id="233e6-157">két fontos adatot, amely segítségével érvényesítse letöltése: a bérlő által aláíró kulcsok és a kiállító érték.</span><span class="sxs-lookup"><span data-stu-id="233e6-157">to download two critical pieces of information that are used to validate tokens:  the tenant’s signing keys and issuer value.</span></span>  <span data-ttu-id="233e6-158">Minden Azure AD-bérlő egyedi kibocsátó értéke a következő formátumban:</span><span class="sxs-lookup"><span data-stu-id="233e6-158">Each Azure AD tenant has a unique issuer value of the form:</span></span>

    https://sts.windows.net/31537af4-6d77-4bb9-a681-d2394888ea26/

<span data-ttu-id="233e6-159">a GUID-érték esetén a bérlő bérlői azonosító átnevezése szálbiztos verzióját.</span><span class="sxs-lookup"><span data-stu-id="233e6-159">where the GUID value is the rename-safe version of the tenant ID of the tenant.</span></span>  <span data-ttu-id="233e6-160">Ha az előző metaadatok hivatkozásra kattintva `contoso.onmicrosoft.com`, láthatja, hogy ez a dokumentum az kibocsátó érték.</span><span class="sxs-lookup"><span data-stu-id="233e6-160">If you click on the preceding metadata link for `contoso.onmicrosoft.com`, you can see this issuer value in the document.</span></span>

<span data-ttu-id="233e6-161">Amikor egy bérlő egyetlen alkalmazás érvényesíti a jogkivonatot, ellenőrzi az aláírás a jogkivonat az aláírási kulcsokat a metaadat-dokumentum ellen.</span><span class="sxs-lookup"><span data-stu-id="233e6-161">When a single tenant application validates a token, it checks the signature of the token against the signing keys from the metadata document.</span></span> <span data-ttu-id="233e6-162">Ez lehetővé teszi, hogy ellenőrizze, hogy a jogkivonat kiállítójának értéke megegyezik, amely a metaadat-dokumentum található.</span><span class="sxs-lookup"><span data-stu-id="233e6-162">This allows it to make sure the issuer value in the token matches the one that was found in the metadata document.</span></span>

<span data-ttu-id="233e6-163">A/Common óta végpont a bérlő nem felel meg, és nem egy kibocsátó, vizsgálja meg a kibocsátó az metaadatok / közös rendelkezik sablonalapú URL-cím helyett egy tényleges érték:</span><span class="sxs-lookup"><span data-stu-id="233e6-163">Since the /common endpoint doesn’t correspond to a tenant and isn’t an issuer, when you examine the issuer value in the metadata for /common it has a templated URL instead of an actual value:</span></span>

    https://sts.windows.net/{tenantid}/

<span data-ttu-id="233e6-164">Ezért egy több-bérlős alkalmazás nem érvényesíthet jogkivonatokat csak a metaadatok a kibocsátó értékével egyező által a `issuer` a token értékét.</span><span class="sxs-lookup"><span data-stu-id="233e6-164">Therefore, a multi-tenant application can’t validate tokens just by matching the issuer value in the metadata with the `issuer` value in the token.</span></span>  <span data-ttu-id="233e6-165">Egy több-bérlős alkalmazás logika döntse el, hogy mely kibocsátó értékek érvényes, amelyekre nem kell, a bérlő Állomásazonosító részét feloszthatja a kibocsátó érték alapján.</span><span class="sxs-lookup"><span data-stu-id="233e6-165">A multi-tenant application needs logic to decide which issuer values are valid and which are not, based on the tenant ID portion of the issuer value.</span></span>  

<span data-ttu-id="233e6-166">Például ha egy több-bérlős alkalmazás csak lehetővé teszi, hogy bejelentkezési adott bérlő, aki regisztrált-e a szolgáltatás, akkor azt kell ellenőrizze vagy a kibocsátó érték vagy a `tid` jogcím értéke a jogkivonatban, győződjön meg arról, hogy a bérlő az előfizetők a listában.</span><span class="sxs-lookup"><span data-stu-id="233e6-166">For example, if a multi-tenant application only allows sign-in from specific tenants who have signed up for their service, then it must check either the issuer value or the `tid` claim value in the token to make sure that tenant is in their list of subscribers.</span></span>  <span data-ttu-id="233e6-167">Ha csak egy több-bérlős alkalmazás egyének foglalkozik, és nem minden hozzáférés alapján döntéseket bérlők, majd azt figyelmen kívül hagyhatja a kibocsátó érték regisztrálását.</span><span class="sxs-lookup"><span data-stu-id="233e6-167">If a multi-tenant application only deals with individuals and doesn’t make any access decisions based on tenants, then it can ignore the issuer value altogether.</span></span>

<span data-ttu-id="233e6-168">A több-bérlős minták a [kapcsolódó tartalom](#related-content) szakasz ebben a cikkben kibocsátó érvényesítése végén le van tiltva, bejelentkezhet bármely Azure AD-bérlő engedélyezéséhez.</span><span class="sxs-lookup"><span data-stu-id="233e6-168">In the multi-tenant samples in the [Related Content](#related-content) section at the end of this article, issuer validation is disabled to enable any Azure AD tenant to sign in.</span></span>

<span data-ttu-id="233e6-169">Mostantól a felhasználói élmény a felhasználók számára, amely több-bérlős alkalmazásokhoz bejelentkezés vizsgáljuk meg.</span><span class="sxs-lookup"><span data-stu-id="233e6-169">Now let’s look at the user experience for users that are signing in to multi-tenant applications.</span></span>

## <a name="understanding-user-and-admin-consent"></a><span data-ttu-id="233e6-170">Understanding felhasználói és rendszergazdai hozzájárulási</span><span class="sxs-lookup"><span data-stu-id="233e6-170">Understanding user and admin consent</span></span>
<span data-ttu-id="233e6-171">Egy felhasználó bejelentkezni az Azure AD-alkalmazás az alkalmazás meg kell jelennie a felhasználó bérlői.</span><span class="sxs-lookup"><span data-stu-id="233e6-171">For a user to sign in to an application in Azure AD, the application must be represented in the user’s tenant.</span></span>  <span data-ttu-id="233e6-172">Ez lehetővé teszi, hogy a szervezet például egyedi házirendek alkalmazása, amikor a bérlő felhasználóit jelentkeznek be az alkalmazást.</span><span class="sxs-lookup"><span data-stu-id="233e6-172">This allows the organization to do things like apply unique policies when users from their tenant sign in to the application.</span></span>  <span data-ttu-id="233e6-173">Egyetlen bérlői alkalmazások a regisztráció az egyszerű; , amely akkor fordul elő, amikor regisztrálja az alkalmazást a [Azure-portálon][AZURE-portal].</span><span class="sxs-lookup"><span data-stu-id="233e6-173">For a single tenant application, this registration is simple; it’s the one that happens when you register the application in the [Azure portal][AZURE-portal].</span></span>

<span data-ttu-id="233e6-174">Egy több-bérlős alkalmazáshoz az alkalmazás a kezdeti regisztráció él, az Azure AD-bérlő a fejlesztők használják.</span><span class="sxs-lookup"><span data-stu-id="233e6-174">For a multi-tenant application, the initial registration for the application lives in the Azure AD tenant used by the developer.</span></span>  <span data-ttu-id="233e6-175">Amikor egy felhasználó egy másik bérlőhöz az alkalmazás első alkalommal jelentkezik be, az Azure AD megkéri, hogy az engedélyeket, az alkalmazás által kért hozzájárulás.</span><span class="sxs-lookup"><span data-stu-id="233e6-175">When a user from a different tenant signs in to the application for the first time, Azure AD asks them to consent to the permissions requested by the application.</span></span>  <span data-ttu-id="233e6-176">Ha azok hozzájárulás, akkor az alkalmazás egy ábrázolása nevű egy *egyszerű* jön létre a felhasználó bérlői, és a bejelentkezés.</span><span class="sxs-lookup"><span data-stu-id="233e6-176">If they consent, then a representation of the application called a *service principal* is created in the user’s tenant, and sign-in can continue.</span></span> <span data-ttu-id="233e6-177">A delegálás rögzíti az alkalmazás a felhasználó hozzájárul a címtárban is létrejön.</span><span class="sxs-lookup"><span data-stu-id="233e6-177">A delegation is also created in the directory that records the user’s consent to the application.</span></span> <span data-ttu-id="233e6-178">Lásd: [alkalmazás és szolgáltatás egyszerű objektumok] [ AAD-App-SP-Objects] az alkalmazás alkalmazás- és szolgáltatásnév objektumokat, és hogyan kapcsolódnak egymáshoz.</span><span class="sxs-lookup"><span data-stu-id="233e6-178">See [Application Objects and Service Principal Objects][AAD-App-SP-Objects] for details on the application's Application and ServicePrincipal objects, and how they relate to each other.</span></span>

![Egyszintű alkalmazásba hozzájárulás][Consent-Single-Tier] 

<span data-ttu-id="233e6-180">A hozzájárulási forgatókönyvben az engedélyeket, az alkalmazás által kért van hatással.</span><span class="sxs-lookup"><span data-stu-id="233e6-180">This consent experience is affected by the permissions requested by the application.</span></span>  <span data-ttu-id="233e6-181">Az Azure AD kétféle engedélyek, csak alkalmazást, és a delegált támogatja:</span><span class="sxs-lookup"><span data-stu-id="233e6-181">Azure AD supports two kinds of permissions, app-only and delegated:</span></span>

* <span data-ttu-id="233e6-182">Egy engedélyt biztosít az alkalmazás lehetővé teszi, hogy a művelet egy részét a felhasználói bejelentkezés, a felhasználó teheti meg.</span><span class="sxs-lookup"><span data-stu-id="233e6-182">A delegated permission grants an application the ability to act as a signed in user for a subset of the things the user can do.</span></span>  <span data-ttu-id="233e6-183">Például engedélyt adhat egy alkalmazást a delegált a bejelentkezett felhasználó nevében naptár olvasni.</span><span class="sxs-lookup"><span data-stu-id="233e6-183">For example, you can grant an application the delegated permission to read the signed in user’s calendar.</span></span>
* <span data-ttu-id="233e6-184">Az alkalmazás csak az engedélyt közvetlenül az alkalmazáshoz.</span><span class="sxs-lookup"><span data-stu-id="233e6-184">An app-only permission is granted directly to the identity of the application.</span></span>  <span data-ttu-id="233e6-185">Például engedélyt adhat egy alkalmazást a csak alkalmazás olvasni a bérlőt, függetlenül attól, akik bejelentkezett az alkalmazásba a felhasználók listáját.</span><span class="sxs-lookup"><span data-stu-id="233e6-185">For example, you can grant an application the app-only permission to read the list of users in a tenant, regardless of who is signed in to the application.</span></span>

<span data-ttu-id="233e6-186">Néhány engedély is lehet hozzájárulását normál felhasználói, míg más egy Bérlői rendszergazda jóváhagyását.</span><span class="sxs-lookup"><span data-stu-id="233e6-186">Some permissions can be consented to by a regular user, while others require a tenant administrator’s consent.</span></span> 

### <a name="admin-consent"></a><span data-ttu-id="233e6-187">Felügyeleti hozzájárulás</span><span class="sxs-lookup"><span data-stu-id="233e6-187">Admin consent</span></span>
<span data-ttu-id="233e6-188">Csak alkalmazás engedélyek minden esetben szükséges egy Bérlői rendszergazda jóváhagyását.</span><span class="sxs-lookup"><span data-stu-id="233e6-188">App-only permissions always require a tenant administrator’s consent.</span></span>  <span data-ttu-id="233e6-189">Ha az alkalmazás az alkalmazás csak engedélyt kér, és a felhasználó megpróbál bejelentkezni az alkalmazás, egy hibaüzenet jelenik meg arról, hogy a felhasználó nem tudja hozzájárulás.</span><span class="sxs-lookup"><span data-stu-id="233e6-189">If your application requests an app-only permission and a user tries to sign in to the application, an error message will be displayed saying the user isn’t able to consent.</span></span>

<span data-ttu-id="233e6-190">Bizonyos delegált jogosultságokkal sikeresen telepítették is szükség lehet egy Bérlői rendszergazda jóváhagyását.</span><span class="sxs-lookup"><span data-stu-id="233e6-190">Certain delegated permissions also require a tenant administrator’s consent.</span></span>  <span data-ttu-id="233e6-191">Írjanak vissza az Azure AD a bejelentkezett felhasználó nevében, például egy Bérlői rendszergazda jóváhagyását igényli.</span><span class="sxs-lookup"><span data-stu-id="233e6-191">For example, the ability to write back to Azure AD as the signed in user requires a tenant administrator’s consent.</span></span>  <span data-ttu-id="233e6-192">Csak alkalmazáshoz engedéllyel, például ha egy szokásos felhasználó megpróbál bejelentkezni egy alkalmazás, amelyet a rendszergazda jóváhagyását igénylő engedélyt igényel az alkalmazás egy hibaüzenetet fog kapni.</span><span class="sxs-lookup"><span data-stu-id="233e6-192">Like app-only permissions, if an ordinary user tries to sign in to an application that requests a delegated permission that requires administrator consent, your application will receive an error.</span></span>  <span data-ttu-id="233e6-193">Engedélyt igényel-e a rendszergazda jóváhagyását a fejlesztői erőforrás közzétett határozza meg, és lehet, a dokumentációban, az erőforrás található.</span><span class="sxs-lookup"><span data-stu-id="233e6-193">Whether or not a permission requires admin consent is determined by the developer that published the resource, and can be found in the documentation for the resource.</span></span>  <span data-ttu-id="233e6-194">Az elérhető engedélyek leíró, az az Azure AD Graph API és a Microsoft Graph API témakörökre mutató hivatkozásokat tartalmaz a [kapcsolódó tartalom](#related-content) című szakaszát.</span><span class="sxs-lookup"><span data-stu-id="233e6-194">Links to topics describing the available permissions for the Azure AD Graph API and Microsoft Graph API are in the [Related Content](#related-content) section of this article.</span></span>

<span data-ttu-id="233e6-195">Ha az alkalmazás a rendszergazda jóváhagyását igénylő engedélyek használja, a hitelesítési mód, például egy gombra való kattintást vagy hivatkozás rendelkezik, ahol a rendszergazda a művelet is kezdeményezhető szeretné.</span><span class="sxs-lookup"><span data-stu-id="233e6-195">If your application uses permissions that require admin consent, you need to have a gesture such as a button or link where the admin can initiate the action.</span></span>  <span data-ttu-id="233e6-196">A kérelem, az alkalmazás elküld, ez a művelet nem a szokásos OAuth2/OpenID Connect hitelesítési kérést, de a, amely magában foglalja a `prompt=admin_consent` lekérdezési karakterlánc.</span><span class="sxs-lookup"><span data-stu-id="233e6-196">The request your application sends for this action is a usual OAuth2/OpenID Connect authorization request, but that also includes the `prompt=admin_consent` query string parameter.</span></span>  <span data-ttu-id="233e6-197">Ha a rendszergazda hozzájárult, és a szolgáltatás egyszerű az ügyfél bérlő jön létre, új bejelentkezési kérelmek nem kell a `prompt=admin_consent` paraméter.</span><span class="sxs-lookup"><span data-stu-id="233e6-197">Once the admin has consented and the service principal is created in the customer’s tenant, subsequent sign-in requests do not need the `prompt=admin_consent` parameter.</span></span> <span data-ttu-id="233e6-198">A rendszergazda úgy dönt, a kért engedélyeket elfogadhatók, mivel nincs más felhasználó bekéri a hozzájárulási ettől kezdve.</span><span class="sxs-lookup"><span data-stu-id="233e6-198">Since the administrator has decided the requested permissions are acceptable, no other users in the tenant will be prompted for consent from that point forward.</span></span>

<span data-ttu-id="233e6-199">A `prompt=admin_consent` paraméter is használható az engedélyeket, nincs szükség a rendszergazda jóváhagyását igénylő alkalmazásokkal.</span><span class="sxs-lookup"><span data-stu-id="233e6-199">The `prompt=admin_consent` parameter can also be used by applications that request permissions that do not require admin consent.</span></span> <span data-ttu-id="233e6-200">Ez történik, ha az alkalmazástelepítések a számára, ahol a bérlői rendszergazda "előfizet" egy időben, és egyéb felhasználói a rendszer bekéri hozzájárulási ettől a szükséges.</span><span class="sxs-lookup"><span data-stu-id="233e6-200">This is done when the applicaton requires an experience where the tenant admin “signs up” one time, and no other users are prompted for consent from that point on.</span></span>

<span data-ttu-id="233e6-201">Ha egy alkalmazás megkövetel egy rendszergazda jóváhagyását, és egy rendszergazda jelentkezik be, de a `prompt=admin_consent` paraméter nem küldi el, a rendszergazda sikeresen hozzájárul az alkalmazás **csak a hozzájuk tartozó felhasználói fiókok**.</span><span class="sxs-lookup"><span data-stu-id="233e6-201">If an application requires admin consent, and an admin signs in but the `prompt=admin_consent` parameter is not sent, the admin will successfully consent to the application **only for their user account**.</span></span>  <span data-ttu-id="233e6-202">Rendszeres felhasználók továbbra is nem fognak tudni bejelentkezni, és hogy az alkalmazás.</span><span class="sxs-lookup"><span data-stu-id="233e6-202">Regular users will still not be able to sign in and consent to the application.</span></span>  <span data-ttu-id="233e6-203">Ez akkor hasznos, ha szeretne adni a bérlői rendszergazda Fedezze fel az alkalmazást, mielőtt más felhasználók hozzáférést lehessen.</span><span class="sxs-lookup"><span data-stu-id="233e6-203">This is useful if you want to give the tenant administrator the ability to explore your application before allowing other users access.</span></span>

<span data-ttu-id="233e6-204">A bérlői rendszergazda letilthatja az alkalmazások beleegyezését rendszeres felhasználók.</span><span class="sxs-lookup"><span data-stu-id="233e6-204">A tenant administrator can disable the ability for regular users to consent to applications.</span></span>  <span data-ttu-id="233e6-205">Ha ez a funkció le van tiltva, a rendszergazda hozzájárulás megadása mindig kötelező az alkalmazás a bérlő kell beállítani.</span><span class="sxs-lookup"><span data-stu-id="233e6-205">If this capability is disabled, admin consent is always required for the application to be set up in the tenant.</span></span>  <span data-ttu-id="233e6-206">Ha szeretné tesztelni az alkalmazás normál felhasználói hozzájárulás le van tiltva, a konfigurációs kapcsolót az található az Azure AD-bérlő konfigurációs szakasza a [Azure-portálon][AZURE-portal].</span><span class="sxs-lookup"><span data-stu-id="233e6-206">If you want to test your application with regular user consent disabled, you can find the configuration switch in the Azure AD tenant configuration section of the [Azure portal][AZURE-portal].</span></span>

> [!NOTE]
> <span data-ttu-id="233e6-207">Egyes alkalmazások szeretné, hogy hol rendszeres felhasználók kezdetben hozzájárulás, és később magába foglaló az alkalmazást a rendszergazda és a kérelem engedélyek rendszergazda jóváhagyását igénylő élményt.</span><span class="sxs-lookup"><span data-stu-id="233e6-207">Some applications want an experience where regular users are able to consent initially, and later the application can involve the administrator and request permissions that require admin consent.</span></span>  <span data-ttu-id="233e6-208">Nincs semmilyen módon nem ugyanezt a műveletet egy önálló alkalmazás regisztrálása az Azure AD ma.</span><span class="sxs-lookup"><span data-stu-id="233e6-208">There is no way to do this with a single application registration in Azure AD today.</span></span>  <span data-ttu-id="233e6-209">A jövőbeli v2 végpont az Azure AD lehetővé teszi alkalmazások engedélyeket futásidőben, ahelyett, hogy regisztrációs időpontban, amely lehetővé teszi, hogy ebben a forgatókönyvben.</span><span class="sxs-lookup"><span data-stu-id="233e6-209">The upcoming Azure AD v2 endpoint will allow applications to request permissions at runtime, instead of at registration time, which will enable this scenario.</span></span>  <span data-ttu-id="233e6-210">További információkért lásd: a [Azure AD alkalmazás-modell v2 – útmutató fejlesztőknek][AAD-V2-Dev-Guide].</span><span class="sxs-lookup"><span data-stu-id="233e6-210">For more information, see the [Azure AD App Model v2 Developer Guide][AAD-V2-Dev-Guide].</span></span>
> 
> 

### <a name="consent-and-multi-tier-applications"></a><span data-ttu-id="233e6-211">Hozzájárulás és a többrétegű alkalmazások</span><span class="sxs-lookup"><span data-stu-id="233e6-211">Consent and multi-tier applications</span></span>
<span data-ttu-id="233e6-212">Előfordulhat, hogy az alkalmazás több rétegek, a saját regisztrációs által képviselt minden Azure AD-ben.</span><span class="sxs-lookup"><span data-stu-id="233e6-212">Your application may have multiple tiers, each represented by its own registration in Azure AD.</span></span>  <span data-ttu-id="233e6-213">Például egy webes API-t egy natív alkalmazás, vagy egy webes alkalmazás, amely meghívja a webes API-k.</span><span class="sxs-lookup"><span data-stu-id="233e6-213">For example, a native application that calls a web API, or a web application that calls a web API.</span></span>  <span data-ttu-id="233e6-214">Mindkét esetben a az ügyfél (a natív alkalmazással vagy a web app) kér engedélyeket az erőforrás (webes API-k) hívni.</span><span class="sxs-lookup"><span data-stu-id="233e6-214">In both of these cases, the client (native app or web app) requests permissions to call the resource (web API).</span></span>  <span data-ttu-id="233e6-215">Az ügyfél számára kell sikeresen átadni kívánt hozzájárult e az ügyfél bérlői, amelyhez engedélyeket igényel minden erőforrás már léteznie kell az ügyfél-bérlőben.</span><span class="sxs-lookup"><span data-stu-id="233e6-215">For the client to be successfully consented into a customer’s tenant, all resources to which it requests permissions must already exist in the customer’s tenant.</span></span>  <span data-ttu-id="233e6-216">Ha ez a feltétel nem teljesül, az Azure AD hibaüzenetet kap, hogy az erőforrás először hozzá kell adni.</span><span class="sxs-lookup"><span data-stu-id="233e6-216">If this condition isn’t met, Azure AD will return an error that the resource must be added first.</span></span>

<span data-ttu-id="233e6-217">**Egy bérlő több rétegből**</span><span class="sxs-lookup"><span data-stu-id="233e6-217">**Multiple tiers in a single tenant**</span></span>

<span data-ttu-id="233e6-218">Ez problémát okozhat, ha a logikai alkalmazás két vagy több alkalmazás regisztrációk, például egy külön ügyfél- és erőforrás áll.</span><span class="sxs-lookup"><span data-stu-id="233e6-218">This can be a problem if your logical application consists of two or more application registrations, for example a separate client and resource.</span></span>  <span data-ttu-id="233e6-219">Hogyan kapunk az erőforrás a felhasználói bérlő az első?</span><span class="sxs-lookup"><span data-stu-id="233e6-219">How do you get the resource into the customer tenant first?</span></span>  <span data-ttu-id="233e6-220">Az Azure AD hozzá van rendelve ebben az esetben engedélyezése az ügyfél és a erőforrás átadni kívánt hozzájárult e egyetlen lépésben.</span><span class="sxs-lookup"><span data-stu-id="233e6-220">Azure AD covers this case by enabling client and resource to be consented in a single step.</span></span> <span data-ttu-id="233e6-221">A felhasználónál az engedélyeket, az ügyfél és a hozzájárulási lapon erőforrás által kért összessége.</span><span class="sxs-lookup"><span data-stu-id="233e6-221">The user sees the sum total of the permissions requested by both the client and resource on the consent page.</span></span>  <span data-ttu-id="233e6-222">Ahhoz, hogy ez a viselkedés, az erőforrás-alkalmazás regisztrációja tartalmaznia kell az ügyfél alkalmazás azonosítója egy `knownClientApplications` az alkalmazásjegyzékben.</span><span class="sxs-lookup"><span data-stu-id="233e6-222">To enable this behavior, the resource’s application registration must include the client’s App ID as a `knownClientApplications` in its application manifest.</span></span>  <span data-ttu-id="233e6-223">Példa:</span><span class="sxs-lookup"><span data-stu-id="233e6-223">For example:</span></span>

    knownClientApplications": ["94da0930-763f-45c7-8d26-04d5938baab2"]

<span data-ttu-id="233e6-224">Ez a tulajdonság az erőforrás keresztül frissíthető [alkalmazás jegyzékfájlja][AAD-App-Manifest].</span><span class="sxs-lookup"><span data-stu-id="233e6-224">This property can be updated via the resource [application’s manifest][AAD-App-Manifest].</span></span> <span data-ttu-id="233e6-225">Ezt mutatják be egy natív ügyfél többrétegű, webes API-mintát hívása a [kapcsolódó tartalom](#related-content) szakasz Ez a cikk végén.</span><span class="sxs-lookup"><span data-stu-id="233e6-225">This is demonstrated in a multi-tier native client calling web API sample in the [Related Content](#related-content) section at the end of this article.</span></span> <span data-ttu-id="233e6-226">A következő ábra áttekintést hozzájárulási egy többrétegű alkalmazást, regisztrálni az egyetlen bérlő számára:</span><span class="sxs-lookup"><span data-stu-id="233e6-226">The following diagram provides an overview of consent for a multi-tier app registered in a single tenant :</span></span>

![Többrétegű ismert ügyfélalkalmazás hozzájárulás][Consent-Multi-Tier-Known-Client] 

<span data-ttu-id="233e6-228">**A több bérlő több rétegből**</span><span class="sxs-lookup"><span data-stu-id="233e6-228">**Multiple tiers in multiple tenants**</span></span>

<span data-ttu-id="233e6-229">Hasonló esetek történik, ha az alkalmazások különböző rétegek a különböző bérlők van regisztrálva.</span><span class="sxs-lookup"><span data-stu-id="233e6-229">A similar case happens if the different tiers of an application are registered in different tenants.</span></span>  <span data-ttu-id="233e6-230">Vegyük példaként a kis-és az Office 365 Exchange Online API-t egy natív ügyfélalkalmazás létrehozása.</span><span class="sxs-lookup"><span data-stu-id="233e6-230">For example, consider the case of building a native client application that calls the Office 365 Exchange Online API.</span></span>  <span data-ttu-id="233e6-231">A natív, és újabb verzióiban a natív alkalmazás ügyfél-bérlőben futtatásához kialakításához, az Exchange Online szolgáltatás egyszerű jelen kell lennie.</span><span class="sxs-lookup"><span data-stu-id="233e6-231">To develop the native application, and later for the native application to run in a customer’s tenant, the Exchange Online service principal must be present.</span></span>  <span data-ttu-id="233e6-232">Ebben az esetben a fejlesztői és az ügyfél kell vásárolnia, Exchange online-hoz létre kell hozni a bérlők egyszerű szolgáltatás.</span><span class="sxs-lookup"><span data-stu-id="233e6-232">In this case, the developer and customer must purchase Exchange Online for the service principal to be created in their tenants.</span></span>  

<span data-ttu-id="233e6-233">Esetén az API-t egy szervezet, nem a Microsoft által az API-t a fejlesztői lehetővé teszik az ügyfelek számára, az alkalmazást az ügyfelek bérlők beleegyezését kell.</span><span class="sxs-lookup"><span data-stu-id="233e6-233">In the case of an API built by an organization other than Microsoft, the developer of the API needs to provide a way for their customers to consent the application into their customers' tenants.</span></span> <span data-ttu-id="233e6-234">A javasolt tervezési van a fejlesztők számára a 3. fél hozhat létre az API-t úgy, hogy a regisztráció végrehajtásához webes ügyfélként is működhet:</span><span class="sxs-lookup"><span data-stu-id="233e6-234">The recommended design is for the 3rd party developer to build the API such that it can also function as a web client to implement sign-up :</span></span>

1. <span data-ttu-id="233e6-235">Kövesse a korábbi szakaszokban annak érdekében, az API-t valósítja meg a több-bérlős regisztrációs/kód alkalmazáskövetelmények</span><span class="sxs-lookup"><span data-stu-id="233e6-235">Follow the earlier sections to ensure the API implements the multi-tenant application registration/code requirements</span></span>
2. <span data-ttu-id="233e6-236">Mellett, hogy csökkenjen az API-t hatókörök/szerepkörök, ellenőrizze a regisztrációs tartalmazza a "Bejelentkezés és felhasználói profil olvasása" az Azure AD engedélyt (alapértelmezés szerint)</span><span class="sxs-lookup"><span data-stu-id="233e6-236">In addition to exposing the API's scopes/roles, ensure the registration includes the "Sign in and read user profile" Azure AD permission (provided by default)</span></span>
3. <span data-ttu-id="233e6-237">Valósít meg a webes ügyféllel, a következő bejelentkezési-a/regisztrációs oldalon a [admin hozzájárulási](#admin-consent) útmutatást taglaltak</span><span class="sxs-lookup"><span data-stu-id="233e6-237">Implement a sign-in/sign-up page in the web client, following the [admin consent](#admin-consent) guidance discussed earlier</span></span> 
4. <span data-ttu-id="233e6-238">Miután a felhasználó hozzájárul, hogy az alkalmazás, a szolgáltatás egyszerű és beleegyezése delegálás hivatkozásokat hoz létre a bérlői, és a natív alkalmazás tud jogkivonatokhoz az API</span><span class="sxs-lookup"><span data-stu-id="233e6-238">Once the user consents to the application, the service principal and consent delegation links are created in their tenant, and the native application can get tokens for the API</span></span>

<span data-ttu-id="233e6-239">A következő ábra hozzájárulási áttekintést nyújt a különböző bérlők regisztrált többrétegű alkalmazást:</span><span class="sxs-lookup"><span data-stu-id="233e6-239">The following diagram provides an overview of consent for a multi-tier app registered in different tenants:</span></span>

![Többrétegű több résztvevős alkalmazásba hozzájárulás][Consent-Multi-Tier-Multi-Party] 

### <a name="revoking-consent"></a><span data-ttu-id="233e6-241">Hozzájárulás visszavonása</span><span class="sxs-lookup"><span data-stu-id="233e6-241">Revoking Consent</span></span>
<span data-ttu-id="233e6-242">Felhasználók és rendszergazdák vissza tudja vonni a bármikor az alkalmazásba hozzájárulás:</span><span class="sxs-lookup"><span data-stu-id="233e6-242">Users and administrators can revoke consent to your application at any time:</span></span>

* <span data-ttu-id="233e6-243">Felhasználók visszavonni a hozzáférést az egyes alkalmazások eltávolítja azokat a [Panel alkalmazásokat] [ AAD-Access-Panel] listája.</span><span class="sxs-lookup"><span data-stu-id="233e6-243">Users revoke access to individual applications by removing them from their [Access Panel Applications][AAD-Access-Panel] list.</span></span>
* <span data-ttu-id="233e6-244">A rendszergazdák alkalmazásokhoz való hozzáférés visszavonása eltávolítja azokat az Azure AD felügyeleti szakaszában az Azure AD a [Azure-portálon][AZURE-portal].</span><span class="sxs-lookup"><span data-stu-id="233e6-244">Administrators revoke access to applications by removing them from Azure AD using the Azure AD management section of the [Azure portal][AZURE-portal].</span></span>

<span data-ttu-id="233e6-245">Járul hozzá a rendszergazda egy alkalmazás a bérlő a összes felhasználója számára, ha a felhasználók hozzáférést külön-külön nem visszavonása.</span><span class="sxs-lookup"><span data-stu-id="233e6-245">If an administrator consents to an application for all users in a tenant, users cannot revoke access individually.</span></span>  <span data-ttu-id="233e6-246">Csak a rendszergazda visszavonhatja a hozzáférést, és csak a teljes alkalmazáshoz.</span><span class="sxs-lookup"><span data-stu-id="233e6-246">Only the administrator can revoke access, and only for the whole application.</span></span>

### <a name="consent-and-protocol-support"></a><span data-ttu-id="233e6-247">Hozzájárulás és protokollok támogatása</span><span class="sxs-lookup"><span data-stu-id="233e6-247">Consent and Protocol Support</span></span>
<span data-ttu-id="233e6-248">Hozzájárulás támogatott keresztül az OAuth, OpenID Connect, az Azure AD-ben és a WS-Federation, SAML protokoll.</span><span class="sxs-lookup"><span data-stu-id="233e6-248">Consent is supported in Azure AD via the OAuth, OpenID Connect, WS-Federation, and SAML protocols.</span></span>  <span data-ttu-id="233e6-249">A WS-Federation és az SAML protokoll nem támogatják a `prompt=admin_consent` paraméter, így a rendszergazda jóváhagyását csak az OAuth és az OpenID Connect keresztül lehetséges.</span><span class="sxs-lookup"><span data-stu-id="233e6-249">The SAML and WS-Federation protocols do not support the `prompt=admin_consent` parameter, so admin consent is only possible via OAuth and OpenID Connect.</span></span>

## <a name="multi-tenant-applications-and-caching-access-tokens"></a><span data-ttu-id="233e6-250">Több-Bérlős alkalmazásokhoz és a hozzáférési jogkivonatok gyorsítótár</span><span class="sxs-lookup"><span data-stu-id="233e6-250">Multi-Tenant Applications and Caching Access Tokens</span></span>
<span data-ttu-id="233e6-251">Több-bérlős alkalmazásokhoz is kérheti le a hozzáférési jogkivonatok az Azure AD által védett API-k meghívásához.</span><span class="sxs-lookup"><span data-stu-id="233e6-251">Multi-tenant applications can also get access tokens to call APIs that are protected by Azure AD.</span></span>  <span data-ttu-id="233e6-252">Általános hiba az Active Directory Authentication Library (ADAL) használata egy több-bérlős alkalmazással először kérjen egy felhasználó/Common használatával tokent, kapott választ, akkor kérjen az, hogy a felhasználók is használja a/Common későbbi tokent.</span><span class="sxs-lookup"><span data-stu-id="233e6-252">A common error when using the Active Directory Authentication Library (ADAL) with a multi-tenant application, is to initially request a token for a user using /common, receive a response, then request a subsequent token for that same user also using /common.</span></span>  <span data-ttu-id="233e6-253">Mivel az Azure ad-válasz nem származik a bérlő vagy közös, ADAL gyorsítótárazza a jogkivonatot, hogy a bérlőtől.</span><span class="sxs-lookup"><span data-stu-id="233e6-253">Since the response from Azure AD comes from a tenant, not /common, ADAL caches the token as being from the tenant.</span></span> <span data-ttu-id="233e6-254">Olyan hozzáférési jogkivonatot beolvasni a felhasználói/Common későbbi hívása sikertelen a gyorsítótári bejegyzést, és kéri a felhasználót, hogy jelentkezzen be újra.</span><span class="sxs-lookup"><span data-stu-id="233e6-254">The subsequent call to /common to get an access token for the user misses the cache entry, and the user is prompted to sign in again.</span></span>  <span data-ttu-id="233e6-255">Hiányzik a gyorsítótár elkerülése érdekében győződjön meg arról, hogy a tenant végpont már bejelentkezett felhasználók további hívások történik.</span><span class="sxs-lookup"><span data-stu-id="233e6-255">To avoid missing the cache, make sure subsequent calls for an already signed in user are made to the tenant’s endpoint.</span></span>

## <a name="next-steps"></a><span data-ttu-id="233e6-256">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="233e6-256">Next steps</span></span>
<span data-ttu-id="233e6-257">Ebben a cikkben megtanulta, hogyan hozhat létre olyan alkalmazás, amely bejelentkezhet a felhasználó bármely Azure Active Directory-bérlőhöz.</span><span class="sxs-lookup"><span data-stu-id="233e6-257">In this article, you learned how to build an application that can sign in a user from any Azure Active Directory tenant.</span></span> <span data-ttu-id="233e6-258">Miután engedélyezte az egyszeri bejelentkezés az alkalmazás és az Azure Active Directory között, az alkalmazás által a Microsoft-erőforrások, például az Office 365 API-k elérésére is frissítheti.</span><span class="sxs-lookup"><span data-stu-id="233e6-258">After enabling Single Sign-On between your app and Azure Active Directory, you can also update your application to access APIs exposed by Microsoft resources, like Office 365.</span></span> <span data-ttu-id="233e6-259">Ezért kínálhat testreszabott élmént az alkalmazás például a felhasználóknak, a profilkép vagy a következő naptári időpontot egyeztessen a környezetfüggő adatainak megjelenítése.</span><span class="sxs-lookup"><span data-stu-id="233e6-259">So you can offer a personalized experience in your application, for example showing contextual information to the users, like their profile picture or their next calendar appointment.</span></span> <span data-ttu-id="233e6-260">Azure Active Directory és az Office 365 szolgáltatásokba, mint az Exchange, SharePoint, a OneDrive, a OneNote, Planner, Excel és több API-hívások kapcsolatos további információkért látogasson el a: [Microsoft Graph API][MSFT-Graph-overview].</span><span class="sxs-lookup"><span data-stu-id="233e6-260">To learn more about making API calls to Azure Active Directory and Office 365 services like Exchange, SharePoint, OneDrive, OneNote, Planner, Excel and more, visit: [Microsoft Graph API][MSFT-Graph-overview].</span></span>


## <a name="related-content"></a><span data-ttu-id="233e6-261">Kapcsolódó tartalom</span><span class="sxs-lookup"><span data-stu-id="233e6-261">Related content</span></span>
* <span data-ttu-id="233e6-262">[Több-bérlős alkalmazás minták][AAD-Samples-MT]</span><span class="sxs-lookup"><span data-stu-id="233e6-262">[Multi-tenant application samples][AAD-Samples-MT]</span></span>
* <span data-ttu-id="233e6-263">[Az alkalmazások arculati útmutatóját][AAD-App-Branding]</span><span class="sxs-lookup"><span data-stu-id="233e6-263">[Branding Guidelines for Applications][AAD-App-Branding]</span></span>
* <span data-ttu-id="233e6-264">[Az Azure AD fejlesztői útmutató][AAD-Dev-Guide]</span><span class="sxs-lookup"><span data-stu-id="233e6-264">[Azure AD Developer's Guide][AAD-Dev-Guide]</span></span>
* <span data-ttu-id="233e6-265">[Alkalmazás és szolgáltatás egyszerű objektumok][AAD-App-SP-Objects]</span><span class="sxs-lookup"><span data-stu-id="233e6-265">[Application Objects and Service Principal Objects][AAD-App-SP-Objects]</span></span>
* <span data-ttu-id="233e6-266">[Alkalmazások integrálása az Azure Active Directoryval][AAD-Integrating-Apps]</span><span class="sxs-lookup"><span data-stu-id="233e6-266">[Integrating Applications with Azure Active Directory][AAD-Integrating-Apps]</span></span>
* <span data-ttu-id="233e6-267">[A hozzájárulási keretrendszer áttekintése][AAD-Consent-Overview]</span><span class="sxs-lookup"><span data-stu-id="233e6-267">[Overview of the Consent Framework][AAD-Consent-Overview]</span></span>
* <span data-ttu-id="233e6-268">[A Microsoft Graph API-Engedélyhatókörök][MSFT-Graph-permision-scopes]</span><span class="sxs-lookup"><span data-stu-id="233e6-268">[Microsoft Graph API Permission Scopes][MSFT-Graph-permision-scopes]</span></span>
* <span data-ttu-id="233e6-269">[Az Azure AD Graph API-Engedélyhatókörök][AAD-Graph-Perm-Scopes]</span><span class="sxs-lookup"><span data-stu-id="233e6-269">[Azure AD Graph API Permission Scopes][AAD-Graph-Perm-Scopes]</span></span>

<span data-ttu-id="233e6-270">Az alábbi Megjegyzések szakasz segítségével visszajelzést, és segítsen pontosítsa és a tartalom.</span><span class="sxs-lookup"><span data-stu-id="233e6-270">Please use the following comments section to provide feedback and help us refine and shape our content.</span></span>

<!--Reference style links IN USE -->
[AAD-Access-Panel]:  https://myapps.microsoft.com
[AAD-App-Branding]: ./active-directory-branding-guidelines.md
[AAD-App-Manifest]: ./active-directory-application-manifest.md
[AAD-App-SP-Objects]: ./active-directory-application-objects.md
[AAD-Auth-Scenarios]: ./active-directory-authentication-scenarios.md
[AAD-Consent-Overview]: ./active-directory-integrating-applications.md#overview-of-the-consent-framework
[AAD-Dev-Guide]: ./active-directory-developers-guide.md
[AAD-Graph-Overview]: https://azure.microsoft.com/en-us/documentation/articles/active-directory-graph-api/
[AAD-Graph-Perm-Scopes]: https://msdn.microsoft.com/library/azure/ad/graph/howto/azure-ad-graph-api-permission-scopes
[AAD-Integrating-Apps]: ./active-directory-integrating-applications.md
[AAD-Samples-MT]: https://azure.microsoft.com/documentation/samples/?service=active-directory&term=multitenant
[AAD-Why-To-Integrate]: ./active-directory-how-to-integrate.md
[AZURE-portal]: https://portal.azure.com
[MSFT-Graph-overview]: https://graph.microsoft.io/en-us/docs/overview/overview
[MSFT-Graph-permision-scopes]: https://graph.microsoft.io/en-us/docs/authorization/permission_scopes

<!--Image references-->
[AAD-Sign-In]: ./media/active-directory-devhowto-multi-tenant-overview/sign-in-with-microsoft-light.png
[Consent-Single-Tier]: ./media/active-directory-devhowto-multi-tenant-overview/consent-flow-single-tier.png
[Consent-Multi-Tier-Known-Client]: ./media/active-directory-devhowto-multi-tenant-overview/consent-flow-multi-tier-known-clients.png
[Consent-Multi-Tier-Multi-Party]: ./media/active-directory-devhowto-multi-tenant-overview/consent-flow-multi-tier-multi-party.png

<!--Reference style links -->
[AAD-App-Manifest]: ./active-directory-application-manifest.md
[AAD-App-SP-Objects]: ./active-directory-application-objects.md
[AAD-Auth-Scenarios]: ./active-directory-authentication-scenarios.md
[AAD-Integrating-Apps]: ./active-directory-integrating-applications.md
[AAD-Dev-Guide]: ./active-directory-developers-guide.md
[AAD-Graph-Perm-Scopes]: https://msdn.microsoft.com/library/azure/ad/graph/howto/azure-ad-graph-api-permission-scopes
[AAD-Graph-App-Entity]: https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/entity-and-complex-type-reference#application-entity
[AAD-Graph-Sp-Entity]: https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/entity-and-complex-type-reference#serviceprincipal-entity
[AAD-Graph-User-Entity]: https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/entity-and-complex-type-reference#user-entity
[AAD-How-To-Integrate]: ./active-directory-how-to-integrate.md
[AAD-Security-Token-Claims]: ./active-directory-authentication-scenarios/#claims-in-azure-ad-security-tokens
[AAD-Tokens-Claims]: ./active-directory-token-and-claims.md
[AAD-V2-Dev-Guide]: ../active-directory-appmodel-v2-overview.md
[AZURE-portal]: https://portal.azure.com
[Duyshant-Role-Blog]: http://www.dushyantgill.com/blog/2014/12/10/roles-based-access-control-in-cloud-applications-using-azure-ad/
[JWT]: https://tools.ietf.org/html/draft-ietf-oauth-json-web-token-32
[O365-Perm-Ref]: https://msdn.microsoft.com/en-us/office/office365/howto/application-manifest
[OAuth2-Access-Token-Scopes]: https://tools.ietf.org/html/rfc6749#section-3.3
[OAuth2-AuthZ-Code-Grant-Flow]: https://msdn.microsoft.com/library/azure/dn645542.aspx
[OAuth2-AuthZ-Grant-Types]: https://tools.ietf.org/html/rfc6749#section-1.3 
[OAuth2-Client-Types]: https://tools.ietf.org/html/rfc6749#section-2.1
[OAuth2-Role-Def]: https://tools.ietf.org/html/rfc6749#page-6
[OpenIDConnect]: http://openid.net/specs/openid-connect-core-1_0.html
[OpenIDConnect-ID-Token]: http://openid.net/specs/openid-connect-core-1_0.html#IDToken














