---
title: "Az Azure AD Connect: Hogyan toorecover a 10 GB-os LocalDB korlátozása probléma |} Microsoft Docs"
description: "Ez a témakör ismerteti, hogyan toorecover Azure AD Connect szinkronizálási szolgáltatás LocalDB 10 GB-os beolvasásakor probléma korlátozza."
services: active-directory
documentationcenter: 
author: cychua
manager: femila
editor: 
ms.assetid: 41d081af-ed89-4e17-be34-14f7e80ae358
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/17/2017
ms.author: billmath
ms.openlocfilehash: 7b8ce6e19b68837639017bb0315eda4b924d525a
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/06/2017
---
# <a name="azure-ad-connect-how-toorecover-from-localdb-10-gb-limit"></a><span data-ttu-id="47432-103">Az Azure AD Connect: Hogyan toorecover LocalDB 10 GB-os korlát</span><span class="sxs-lookup"><span data-stu-id="47432-103">Azure AD Connect: How toorecover from LocalDB 10-GB limit</span></span>
<span data-ttu-id="47432-104">Az Azure AD Connect egy SQL Server adatbázis toostore identitásadatok igényel.</span><span class="sxs-lookup"><span data-stu-id="47432-104">Azure AD Connect requires a SQL Server database toostore identity data.</span></span> <span data-ttu-id="47432-105">Az Azure AD Connect telepítése az SQL Server 2012 Express LocalDB hello alapértelmezett használja, vagy használja a saját teljes SQL.</span><span class="sxs-lookup"><span data-stu-id="47432-105">You can either use hello default SQL Server 2012 Express LocalDB installed with Azure AD Connect or use your own full SQL.</span></span> <span data-ttu-id="47432-106">Az SQL Server Express 10 GB-os méretkorláttal rendelkezik.</span><span class="sxs-lookup"><span data-stu-id="47432-106">SQL Server Express imposes a 10-GB size limit.</span></span> <span data-ttu-id="47432-107">Ha a LocalDB-t használja és eléri a korlátot, az Azure AD Connect szinkronizálási szolgáltatása többé nem indul majd el, vagy nem végzi el megfelelően a szinkronizálást.</span><span class="sxs-lookup"><span data-stu-id="47432-107">When using LocalDB and this limit is reached, Azure AD Connect Synchronization Service can no longer start or synchronize properly.</span></span> <span data-ttu-id="47432-108">A cikkben hello helyreállítási lépéseket.</span><span class="sxs-lookup"><span data-stu-id="47432-108">This article provides hello recovery steps.</span></span>

## <a name="symptoms"></a><span data-ttu-id="47432-109">Probléma</span><span class="sxs-lookup"><span data-stu-id="47432-109">Symptoms</span></span>
<span data-ttu-id="47432-110">Két közös jelenségek van:</span><span class="sxs-lookup"><span data-stu-id="47432-110">There are two common symptoms:</span></span>

* <span data-ttu-id="47432-111">Az Azure AD Connect szinkronizálási szolgáltatás **fut** , de nem sikerül a toosynchronize *"leállt-adatbázis-lemez-teljes"* hiba.</span><span class="sxs-lookup"><span data-stu-id="47432-111">Azure AD Connect Synchronization Service **is running** but fails toosynchronize with *“stopped-database-disk-full”* error.</span></span>

* <span data-ttu-id="47432-112">Az Azure AD Connect szinkronizálási szolgáltatás **nem toostart van**.</span><span class="sxs-lookup"><span data-stu-id="47432-112">Azure AD Connect Synchronization Service **is unable toostart**.</span></span> <span data-ttu-id="47432-113">Amikor toostart hello szolgáltatást, az nem esemény 6323 és hibaüzenet *"hello kiszolgáló hibába ütközött, mert nincs elég szabad lemezterület az SQL Server."*</span><span class="sxs-lookup"><span data-stu-id="47432-113">When you attempt toostart hello service, it fails with event 6323 and error message *"hello server encountered an error because SQL Server is out of disk space."*</span></span>

## <a name="short-term-recovery-steps"></a><span data-ttu-id="47432-114">Rövid távú helyreállítási lépések</span><span class="sxs-lookup"><span data-stu-id="47432-114">Short-term recovery steps</span></span>
<span data-ttu-id="47432-115">Ez a témakör hello Azure AD Connect szinkronizálási szolgáltatás tooresume művelet szükséges lépéseket tooreclaim DB helyet.</span><span class="sxs-lookup"><span data-stu-id="47432-115">This section provides hello steps tooreclaim DB space required for Azure AD Connect Synchronization Service tooresume operation.</span></span> <span data-ttu-id="47432-116">hello lépések az alábbiak:</span><span class="sxs-lookup"><span data-stu-id="47432-116">hello steps include:</span></span>
1. [<span data-ttu-id="47432-117">Hello szinkronizálási szolgáltatás állapotának meghatározása</span><span class="sxs-lookup"><span data-stu-id="47432-117">Determine hello Synchronization Service status</span></span>](#determine-the-synchronization-service-status)
2. [<span data-ttu-id="47432-118">Hello adatbázis zsugorítása</span><span class="sxs-lookup"><span data-stu-id="47432-118">Shrink hello database</span></span>](#shrink-the-database)
3. [<span data-ttu-id="47432-119">Futtassa az előzményadatok törlése</span><span class="sxs-lookup"><span data-stu-id="47432-119">Delete run history data</span></span>](#delete-run-history-data)
4. [<span data-ttu-id="47432-120">Rövidítse le a futtatási előzményei adatok megőrzési időtartama</span><span class="sxs-lookup"><span data-stu-id="47432-120">Shorten retention period for run history data</span></span>](#shorten-retention-period-for-run-history-data)

### <a name="determine-hello-synchronization-service-status"></a><span data-ttu-id="47432-121">Hello szinkronizálási szolgáltatás állapotának meghatározása</span><span class="sxs-lookup"><span data-stu-id="47432-121">Determine hello Synchronization Service status</span></span>
<span data-ttu-id="47432-122">Először határozza meg, hogy a hello szinkronizálási szolgáltatás még fut, vagy nem:</span><span class="sxs-lookup"><span data-stu-id="47432-122">First, determine whether hello Synchronization Service is still running or not:</span></span>

1. <span data-ttu-id="47432-123">Jelentkezzen be tooyour Azure AD Connect-kiszolgáló rendszergazdájához.</span><span class="sxs-lookup"><span data-stu-id="47432-123">Log in tooyour Azure AD Connect server as administrator.</span></span>

2. <span data-ttu-id="47432-124">Nyissa meg túl**szolgáltatásvezérlő**.</span><span class="sxs-lookup"><span data-stu-id="47432-124">Go too**Service Control Manager**.</span></span>

3. <span data-ttu-id="47432-125">Hello állapotának ellenőrzése **Microsoft Azure AD Sync**.</span><span class="sxs-lookup"><span data-stu-id="47432-125">Check hello status of **Microsoft Azure AD Sync**.</span></span>


4. <span data-ttu-id="47432-126">Ha fut, nem állítsa le vagy hello szolgáltatást.</span><span class="sxs-lookup"><span data-stu-id="47432-126">If it is running, do not stop or restart hello service.</span></span> <span data-ttu-id="47432-127">Kihagyás [zsugorítás hello adatbázis](#shrink-the-database) . lépés:, és nyissa meg túl[Delete futtatása előzményadatok](#delete-run-history-data) lépés.</span><span class="sxs-lookup"><span data-stu-id="47432-127">Skip [Shrink hello database](#shrink-the-database) step and go too[Delete run history data](#delete-run-history-data) step.</span></span>

5. <span data-ttu-id="47432-128">Ha nem fut, próbálja toostart hello szolgáltatást.</span><span class="sxs-lookup"><span data-stu-id="47432-128">If it is not running, try toostart hello service.</span></span> <span data-ttu-id="47432-129">Ha hello szolgáltatás sikeresen elindul, hagyja ki [zsugorítás hello adatbázis](#shrink-the-database) . lépés:, és nyissa meg túl[Delete futtatása előzményadatok](#delete-run-history-data) lépés.</span><span class="sxs-lookup"><span data-stu-id="47432-129">If hello service starts successfully, skip [Shrink hello database](#shrink-the-database) step and go too[Delete run history data](#delete-run-history-data) step.</span></span> <span data-ttu-id="47432-130">Ellenkező esetben folytassa [zsugorítás hello adatbázis](#shrink-the-database) lépés.</span><span class="sxs-lookup"><span data-stu-id="47432-130">Otherwise, continue with [Shrink hello database](#shrink-the-database) step.</span></span>

### <a name="shrink-hello-database"></a><span data-ttu-id="47432-131">Hello adatbázis zsugorítása</span><span class="sxs-lookup"><span data-stu-id="47432-131">Shrink hello database</span></span>
<span data-ttu-id="47432-132">Hello zsugorítási művelet toofree fel elegendő DB terület toostart hello szinkronizálási szolgáltatást használja.</span><span class="sxs-lookup"><span data-stu-id="47432-132">Use hello Shrink operation toofree up enough DB space toostart hello Synchronization Service.</span></span> <span data-ttu-id="47432-133">Az felszabadítja DB hello adatbázis szóközök eltávolításával.</span><span class="sxs-lookup"><span data-stu-id="47432-133">It frees up DB space by removing whitespaces in hello database.</span></span> <span data-ttu-id="47432-134">Ez a lépés esetén a legjobb, mert nem garantált, hogy mindig helyreállíthatja terület.</span><span class="sxs-lookup"><span data-stu-id="47432-134">This step is best-effort as it is not guaranteed that you can always recover space.</span></span> <span data-ttu-id="47432-135">További információ a zsugorítási művelet toolearn, olvassa el ebben a cikkben [adatbázis zsugorítása](https://msdn.microsoft.com/library/ms189035.aspx).</span><span class="sxs-lookup"><span data-stu-id="47432-135">toolearn more about Shrink operation, read this article [Shrink a database](https://msdn.microsoft.com/library/ms189035.aspx).</span></span>

> [!IMPORTANT]
> <span data-ttu-id="47432-136">Hagyja ki ezt a lépést, ha hello szinkronizálási szolgáltatás toorun kaphat.</span><span class="sxs-lookup"><span data-stu-id="47432-136">Skip this step if you can get hello Synchronization Service toorun.</span></span> <span data-ttu-id="47432-137">Tooshrink hello SQL DB tooincreased töredezettsége toopoor teljesítményére eredményezhet, nem ajánlott.</span><span class="sxs-lookup"><span data-stu-id="47432-137">It is not recommended tooshrink hello SQL DB as it can lead toopoor performance due tooincreased fragmentation.</span></span>

<span data-ttu-id="47432-138">az Azure AD Connect létrehozott hello adatbázis neve hello **ADSync**.</span><span class="sxs-lookup"><span data-stu-id="47432-138">hello name of hello database created for Azure AD Connect is **ADSync**.</span></span> <span data-ttu-id="47432-139">a zsugorítási művelet tooperform, be kell jelentkeznie vagy hello sysadmin vagy hello adatbázis DBO.</span><span class="sxs-lookup"><span data-stu-id="47432-139">tooperform a Shrink operation, you must log in either as hello sysadmin or DBO of hello database.</span></span> <span data-ttu-id="47432-140">Az Azure AD Connect telepítése során a következő fiókok hello jogokat kapnak a sysadmin (rendszergazda):</span><span class="sxs-lookup"><span data-stu-id="47432-140">During Azure AD Connect installation, hello following accounts are granted sysadmin rights:</span></span>
* <span data-ttu-id="47432-141">A helyi rendszergazdák</span><span class="sxs-lookup"><span data-stu-id="47432-141">Local Administrators</span></span>
* <span data-ttu-id="47432-142">hello felhasználói fiók, de a használt toorun az Azure AD Connect telepítés.</span><span class="sxs-lookup"><span data-stu-id="47432-142">hello user account that was used toorun Azure AD Connect installation.</span></span>
* <span data-ttu-id="47432-143">hello Azure AD Connect szinkronizálási szolgáltatás keretében működő hello használt szinkronizálási szolgáltatásfiók.</span><span class="sxs-lookup"><span data-stu-id="47432-143">hello Sync Service account that is used as hello operating context of Azure AD Connect Synchronization Service.</span></span>
* <span data-ttu-id="47432-144">hello helyi csoport telepítése során létrehozott ADSyncAdmins.</span><span class="sxs-lookup"><span data-stu-id="47432-144">hello local group ADSyncAdmins that was created during installation.</span></span>

1. <span data-ttu-id="47432-145">Készítsen biztonsági mentést hello adatbázis másolása **ADSync.mdf** és **ADSync_log.ldf** alatt található fájlok `%ProgramFiles%\program files\Microsoft Azure AD Sync\Data` tooa biztonságos helyen.</span><span class="sxs-lookup"><span data-stu-id="47432-145">Back up hello database by copying **ADSync.mdf** and **ADSync_log.ldf** files located under `%ProgramFiles%\program files\Microsoft Azure AD Sync\Data` tooa safe location.</span></span>

2. <span data-ttu-id="47432-146">Indítson el egy új PowerShell-munkamenetet.</span><span class="sxs-lookup"><span data-stu-id="47432-146">Start a new PowerShell session.</span></span>

3. <span data-ttu-id="47432-147">Keresse meg a toofolder `%ProgramFiles%\Program Files\Microsoft SQL Server\110\Tools\Binn`.</span><span class="sxs-lookup"><span data-stu-id="47432-147">Navigate toofolder `%ProgramFiles%\Program Files\Microsoft SQL Server\110\Tools\Binn`.</span></span>

4. <span data-ttu-id="47432-148">Start **sqlcmd** segédprogram hello parancs futtatásával `./SQLCMD.EXE -S “(localdb)\.\ADSync” -U <Username> -P <Password>`, hello egy rendszergazdai hitelesítő adatai használatával, vagy hello adatbázis DBO.</span><span class="sxs-lookup"><span data-stu-id="47432-148">Start **sqlcmd** utility by running hello command `./SQLCMD.EXE -S “(localdb)\.\ADSync” -U <Username> -P <Password>`, using hello credential of a sysadmin or hello database DBO.</span></span>

5. <span data-ttu-id="47432-149">tooshrink hello adatbázis, a hello sqlcmd parancssorból (1 >), adja meg `DBCC Shrinkdatabase(ADSync,1);`, utána pedig `GO` hello következő kódsorban.</span><span class="sxs-lookup"><span data-stu-id="47432-149">tooshrink hello database, at hello sqlcmd prompt (1>), enter `DBCC Shrinkdatabase(ADSync,1);`, followed by `GO` in hello next line.</span></span>

6. <span data-ttu-id="47432-150">Ha hello művelet sikeres, próbálja meg újra toostart hello szinkronizálási szolgáltatást.</span><span class="sxs-lookup"><span data-stu-id="47432-150">If hello operation is successful, try toostart hello Synchronization Service again.</span></span> <span data-ttu-id="47432-151">Ha hello szinkronizálási szolgáltatás elindítható, nyissa meg túl[Delete futtatása előzményadatok](#delete-run-history-data) lépés.</span><span class="sxs-lookup"><span data-stu-id="47432-151">If you can start hello Synchronization Service, go too[Delete run history data](#delete-run-history-data) step.</span></span> <span data-ttu-id="47432-152">Ha nem, forduljon a támogatási szolgálathoz.</span><span class="sxs-lookup"><span data-stu-id="47432-152">If not, contact Support.</span></span>

### <a name="delete-run-history-data"></a><span data-ttu-id="47432-153">Futtassa az előzményadatok törlése</span><span class="sxs-lookup"><span data-stu-id="47432-153">Delete run history data</span></span>
<span data-ttu-id="47432-154">Alapértelmezés szerint az Azure AD Connect megtartja a futtatási előzményei adatok tooseven nap alatt érkezett be.</span><span class="sxs-lookup"><span data-stu-id="47432-154">By default, Azure AD Connect retains up tooseven days’ worth of run history data.</span></span> <span data-ttu-id="47432-155">Ebben a lépésben azt törlése hello előzmények tooreclaim DB adatterülethez futtassa, hogy az Azure AD Connect szinkronizálási szolgáltatás is indítsa el újra a szinkronizálással.</span><span class="sxs-lookup"><span data-stu-id="47432-155">In this step, we delete hello run history data tooreclaim DB space so that Azure AD Connect Synchronization Service can start syncing again.</span></span>

1.  <span data-ttu-id="47432-156">Start **Synchronization Service Managert** fog tooSTART → által szinkronizálási szolgáltatást.</span><span class="sxs-lookup"><span data-stu-id="47432-156">Start **Synchronization Service Manager** by going tooSTART → Synchronization Service.</span></span>

2.  <span data-ttu-id="47432-157">Nyissa meg toohello **műveletek** fülre.</span><span class="sxs-lookup"><span data-stu-id="47432-157">Go toohello **Operations** tab.</span></span>

3.  <span data-ttu-id="47432-158">A **műveletek**, jelölje be **egyértelmű futtatása**...</span><span class="sxs-lookup"><span data-stu-id="47432-158">Under **Actions**, select **Clear Runs**…</span></span>

4.  <span data-ttu-id="47432-159">Választhat **törölje az összes futtatása** vagy **előtt fut törlése... <date>**  lehetőséget.</span><span class="sxs-lookup"><span data-stu-id="47432-159">You can either choose **Clear all runs** or **Clear runs before… <date>** option.</span></span> <span data-ttu-id="47432-160">Ajánlott elindításához futtassa a két napnál régebbi előzmények adatok törlésével.</span><span class="sxs-lookup"><span data-stu-id="47432-160">It is recommended that you start by clearing run history data that are older than two days.</span></span> <span data-ttu-id="47432-161">Ha az adatbázis méretét a probléma továbbra is toorun, majd válassza a hello **törölje az összes futtatása** lehetőséget.</span><span class="sxs-lookup"><span data-stu-id="47432-161">If you continue toorun into DB size issue, then choose hello **Clear all runs** option.</span></span>

### <a name="shorten-retention-period-for-run-history-data"></a><span data-ttu-id="47432-162">Rövidítse le a futtatási előzményei adatok megőrzési időtartama</span><span class="sxs-lookup"><span data-stu-id="47432-162">Shorten retention period for run history data</span></span>
<span data-ttu-id="47432-163">Ez a lépés akkor több szinkronizálási ciklust követően hello 10 GB-os korlát probléma rendszert futtató tooreduce hello valószínűségét.</span><span class="sxs-lookup"><span data-stu-id="47432-163">This step is tooreduce hello likelihood of running into hello 10-GB limit issue after multiple sync cycles.</span></span>

1. <span data-ttu-id="47432-164">Nyisson meg egy új PowerShell-munkamenetet.</span><span class="sxs-lookup"><span data-stu-id="47432-164">Open a new PowerShell session.</span></span>

2. <span data-ttu-id="47432-165">Futtatás `Get-ADSyncScheduler` és jegyezze fel a hello PurgeRunHistoryInterval tulajdonságot, amelynek hello aktuális megőrzési időszak.</span><span class="sxs-lookup"><span data-stu-id="47432-165">Run `Get-ADSyncScheduler` and take note of hello PurgeRunHistoryInterval property, which specifies hello current retention period.</span></span>

3. <span data-ttu-id="47432-166">Futtatás `Set-ADSyncScheduler -PurgeRunHistoryInterval 2.00:00:00` tooset hello megőrzési időszak tootwo nap.</span><span class="sxs-lookup"><span data-stu-id="47432-166">Run `Set-ADSyncScheduler -PurgeRunHistoryInterval 2.00:00:00` tooset hello retention period tootwo days.</span></span> <span data-ttu-id="47432-167">Hello megőrzési időszak szükség szerint módosítsa.</span><span class="sxs-lookup"><span data-stu-id="47432-167">Adjust hello retention period as appropriate.</span></span>

## <a name="long-term-solution--migrate-toofull-sql"></a><span data-ttu-id="47432-168">Hosszú távú megoldás – áttelepítése toofull SQL</span><span class="sxs-lookup"><span data-stu-id="47432-168">Long-term solution – Migrate toofull SQL</span></span>
<span data-ttu-id="47432-169">Hello problémát általában előzetes, hogy 10 GB-os adatbázisméret már nincs elegendő-e az Azure AD Connect toosynchronize a helyszíni Active Directory tooAzure AD.</span><span class="sxs-lookup"><span data-stu-id="47432-169">In general, hello issue is indicative that 10-GB database size is no longer sufficient for Azure AD Connect toosynchronize your on-premises Active Directory tooAzure AD.</span></span> <span data-ttu-id="47432-170">Javasoljuk, hogy vált toousing hello teljes SQL server verziója.</span><span class="sxs-lookup"><span data-stu-id="47432-170">It is recommended that you switch toousing hello full version of SQL server.</span></span> <span data-ttu-id="47432-171">Az Azure AD Connect meglévő központi LocalDB hello közvetlenül hello adatbázis SQL teljes verziójának hello nem cserélje.</span><span class="sxs-lookup"><span data-stu-id="47432-171">You cannot directly replace hello LocalDB of an existing Azure AD Connect deployment with hello database of hello full version of SQL.</span></span> <span data-ttu-id="47432-172">Ehelyett egy új Azure AD Connect-kiszolgáló SQL hello teljes verzióját kell telepítenie.</span><span class="sxs-lookup"><span data-stu-id="47432-172">Instead, you must deploy a new Azure AD Connect server with hello full version of SQL.</span></span> <span data-ttu-id="47432-173">Javasoljuk, hogy végezzen mozgó áttelepítés hello új Azure AD Connect-kiszolgáló (az SQL-adatbázis) Ha van telepítve egy átmeneti kiszolgálón, a következő toohello meglévő az Azure AD Connect kiszolgáló (LocalDB).</span><span class="sxs-lookup"><span data-stu-id="47432-173">It is recommended that you do a swing migration where hello new Azure AD Connect server (with SQL DB) is deployed as a staging server, next toohello existing Azure AD Connect server (with LocalDB).</span></span> 
* <span data-ttu-id="47432-174">További információk az hogyan tooconfigure távoli SQL az Azure AD Connect, tekintse meg a tooarticle [az Azure AD Connect egyéni telepítési](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnect-get-started-custom).</span><span class="sxs-lookup"><span data-stu-id="47432-174">For instruction on how tooconfigure remote SQL with Azure AD Connect, refer tooarticle [Custom installation of Azure AD Connect](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnect-get-started-custom).</span></span>
* <span data-ttu-id="47432-175">Az Azure AD Connect frissítése mozgó áttelepítési utasításokért tekintse meg a tooarticle [az Azure AD Connect: frissítés a legújabb egy korábbi verziója toohello](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnect-upgrade-previous-version#swing-migration).</span><span class="sxs-lookup"><span data-stu-id="47432-175">For instructions on swing migration for Azure AD Connect upgrade, refer tooarticle [Azure AD Connect: Upgrade from a previous version toohello latest](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnect-upgrade-previous-version#swing-migration).</span></span>

## <a name="next-steps"></a><span data-ttu-id="47432-176">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="47432-176">Next steps</span></span>
<span data-ttu-id="47432-177">További információ: [Helyszíni identitások integrálása az Azure Active Directoryval](active-directory-aadconnect.md).</span><span class="sxs-lookup"><span data-stu-id="47432-177">Learn more about [Integrating your on-premises identities with Azure Active Directory](active-directory-aadconnect.md).</span></span>
