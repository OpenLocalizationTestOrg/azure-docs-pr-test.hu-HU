---
title: "Az Azure AD Connect: Frissítés egy korábbi verzióról |} Microsoft Docs"
description: "Az Azure Active Directory Connect, beleértve a helyben frissítés és egy mozgó áttelepítési legújabb kiadására történő frissítése a különböző módszereket ismerteti."
services: active-directory
documentationcenter: 
author: AndKjell
manager: femila
editor: 
ms.assetid: 31f084d8-2b89-478c-9079-76cf92e6618f
ms.service: active-directory
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: Identity
ms.date: 07/12/2017
ms.author: billmath
ms.openlocfilehash: 52fd9375c71c42feaf87f4a0f4220e1cb3889e63
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 08/03/2017
---
# <a name="azure-ad-connect-upgrade-from-a-previous-version-to-the-latest"></a><span data-ttu-id="bb4b7-103">Az Azure AD Connect: Frissítés egy korábbi verziójáról a legújabb verzióra</span><span class="sxs-lookup"><span data-stu-id="bb4b7-103">Azure AD Connect: Upgrade from a previous version to the latest</span></span>
<span data-ttu-id="bb4b7-104">Ez a témakör ismerteti a különböző módszereket, amelyek az Azure Active Directory (Azure AD) Connect telepítés frissítése a legújabb verzióra.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-104">This topic describes the different methods that you can use to upgrade your Azure Active Directory (Azure AD) Connect installation to the latest release.</span></span> <span data-ttu-id="bb4b7-105">Azt javasoljuk, hogy őrizze meg az Azure AD Connect kiadásainak aktuális.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-105">We recommend that you keep yourself current with the releases of Azure AD Connect.</span></span> <span data-ttu-id="bb4b7-106">Is használhatja a lépéseket a [áttelepítési éppen](#swing-migration) szakaszában, amikor olyan jelentős konfigurációs módosítást hajt végre.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-106">You also use the steps in the [Swing migration](#swing-migration) section when you make a substantial configuration change.</span></span>

<span data-ttu-id="bb4b7-107">Ha azt szeretné, a frissítésre a Dirsyncről, lásd: [Azure AD Szinkronizáló eszközéről (DirSync) verzióról](active-directory-aadconnect-dirsync-upgrade-get-started.md) helyette.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-107">If you want to upgrade from DirSync, see [Upgrade from Azure AD sync tool (DirSync)](active-directory-aadconnect-dirsync-upgrade-get-started.md) instead.</span></span>

<span data-ttu-id="bb4b7-108">Nincsenek használhatja az Azure AD Connect frissítése néhány különböző stratégiákat.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-108">There are a few different strategies that you can use to upgrade Azure AD Connect.</span></span>

| <span data-ttu-id="bb4b7-109">Módszer</span><span class="sxs-lookup"><span data-stu-id="bb4b7-109">Method</span></span> | <span data-ttu-id="bb4b7-110">Leírás</span><span class="sxs-lookup"><span data-stu-id="bb4b7-110">Description</span></span> |
| --- | --- |
| [<span data-ttu-id="bb4b7-111">Automatikus frissítés</span><span class="sxs-lookup"><span data-stu-id="bb4b7-111">Automatic upgrade</span></span>](active-directory-aadconnect-feature-automatic-upgrade.md) |<span data-ttu-id="bb4b7-112">Ez az a legegyszerűbb módszer az expressz telepítési rendelkező ügyfelek esetén.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-112">This is the easiest method for customers with an express installation.</span></span> |
| [<span data-ttu-id="bb4b7-113">Frissítés helyben</span><span class="sxs-lookup"><span data-stu-id="bb4b7-113">In-place upgrade</span></span>](#in-place-upgrade) |<span data-ttu-id="bb4b7-114">Ha egy önálló kiszolgáló, frissítheti a telepítési helyben ugyanazon a kiszolgálón.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-114">If you have a single server, you can upgrade the installation in-place on the same server.</span></span> |
| [<span data-ttu-id="bb4b7-115">Áttelepítési éppen</span><span class="sxs-lookup"><span data-stu-id="bb4b7-115">Swing migration</span></span>](#swing-migration) |<span data-ttu-id="bb4b7-116">Két kiszolgáló előkészítése az új kiadási vagy konfigurációs kiszolgálón, és módosítsa az aktív kiszolgáló, amikor készen áll.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-116">With two servers, you can prepare one of the servers with the new release or configuration, and change the active server when you're ready.</span></span> |

<span data-ttu-id="bb4b7-117">Engedélyek információkért lásd: a [a frissítéshez szükséges engedélyek](active-directory-aadconnect-accounts-permissions.md#upgrade).</span><span class="sxs-lookup"><span data-stu-id="bb4b7-117">For permissions information, see the [permissions required for an upgrade](active-directory-aadconnect-accounts-permissions.md#upgrade).</span></span>

> [!NOTE]
> <span data-ttu-id="bb4b7-118">Az új Azure AD Connect kiszolgáló elindítani a változások az Azure AD szinkronizálása engedélyezését, meg kell állítja vissza a DirSync vagy az Azure AD Sync használatával.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-118">After you've enabled your new Azure AD Connect server to start synchronizing changes to Azure AD, you must not roll back to using DirSync or Azure AD Sync.</span></span> <span data-ttu-id="bb4b7-119">Az Azure AD Connect a régi ügyfelek, beleértve a DirSync és Azure AD Sync programot, alacsonyabb verziójúra változtatása nem támogatott, és az Azure ad-ben például adatvesztés vezethet.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-119">Downgrading from Azure AD Connect to legacy clients, including DirSync and Azure AD Sync, isn't supported and can lead to issues such as data loss in Azure AD.</span></span>

## <a name="in-place-upgrade"></a><span data-ttu-id="bb4b7-120">Frissítés helyben</span><span class="sxs-lookup"><span data-stu-id="bb4b7-120">In-place upgrade</span></span>
<span data-ttu-id="bb4b7-121">Egy frissítés tér át Azure AD Sync vagy az Azure AD Connect működik.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-121">An in-place upgrade works for moving from Azure AD Sync or Azure AD Connect.</span></span> <span data-ttu-id="bb4b7-122">A Dirsync szolgáltatásról áthelyezésére vagy megoldás a Forefront Identity Manager (FIM) + Azure AD-összekötő nem működik.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-122">It doesn't work for moving from DirSync or for a solution with Forefront Identity Manager (FIM) + Azure AD Connector.</span></span>

<span data-ttu-id="bb4b7-123">Ez a módszer használata ajánlott, ha egy önálló kiszolgáló és kisebb, mint körülbelül 100 000 objektumok.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-123">This method is preferred when you have a single server and less than about 100,000 objects.</span></span> <span data-ttu-id="bb4b7-124">Ha nincsenek out-of-box szinkronizálási szabályok módosításait, a teljes importálás és a teljes szinkronizálás történik a frissítés után.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-124">If there are any changes to the out-of-box sync rules, a full import and full synchronization occur after the upgrade.</span></span> <span data-ttu-id="bb4b7-125">Ez a módszer biztosítja, hogy az új konfigurációt alkalmaz az összes meglévő objektumokat a rendszer.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-125">This method ensures that the new configuration is applied to all existing objects in the system.</span></span> <span data-ttu-id="bb4b7-126">Ehhez a futtató órára is szükség lehet néhány, attól függően, hogy a szinkronizálási motor hatókörében lévő objektumok száma.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-126">This run might take a few hours, depending on the number of objects that are in scope of the sync engine.</span></span> <span data-ttu-id="bb4b7-127">A normál különbözeti szinkronizálás ütemező (amely alapértelmezés szerint 30 percenként szinkronizál) fel van függesztve, de a jelszó-szinkronizálás továbbra is.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-127">The normal delta synchronization scheduler (which synchronizes every 30 minutes by default) is suspended, but password synchronization continues.</span></span> <span data-ttu-id="bb4b7-128">Érdemes lehet a helyi frissítés a hétvégén.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-128">You might consider doing the in-place upgrade during a weekend.</span></span> <span data-ttu-id="bb4b7-129">Ha az az új Azure AD Connect a out-of-box konfigurációban nem történtek változások kiadási, majd a normál különbözeti importálás vagy szinkronizálás, ehelyett elindítja.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-129">If there are no changes to the out-of-box configuration with the new Azure AD Connect release, then a normal delta import/sync starts instead.</span></span>  
![Frissítés helyben](./media/active-directory-aadconnect-upgrade-previous-version/inplaceupgrade.png)

<span data-ttu-id="bb4b7-131">Ha a out-of-box szinkronizálási szabályok végrehajtott módosításokat, majd ezek a szabályok állítja vissza az alapértelmezett konfiguráció, a frissítés.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-131">If you've made changes to the out-of-box synchronization rules, then these rules are set back to the default configuration on upgrade.</span></span> <span data-ttu-id="bb4b7-132">Győződjön meg arról, hogy a frissítések közötti tárolódik a konfigurációt, győződjön meg arról, hogy módosítania folyamatban ismertetett módon [gyakorlati tanácsok az alapértelmezett konfiguráció módosításának](active-directory-aadconnectsync-best-practices-changing-default-configuration.md).</span><span class="sxs-lookup"><span data-stu-id="bb4b7-132">To make sure that your configuration is kept between upgrades, make sure that you make changes as they're described in [Best practices for changing the default configuration](active-directory-aadconnectsync-best-practices-changing-default-configuration.md).</span></span>

<span data-ttu-id="bb4b7-133">Helybeni verziófrissítés során előfordulhat bevezetett változások, a frissítés befejezése után hajtható végre a meghatározott szinkronizálási tevékenység (beleértve a teljes importálás és a teljes szinkronizálás lépést) szükséges.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-133">During in-place upgrade, there may be changes introduced that require specific synchronization activities (including Full Import step and Full Synchronization step) to be executed after upgrade completes.</span></span> <span data-ttu-id="bb4b7-134">Az ilyen tevékenységek késleltető, tekintse át a részt [hogyan késlelteti a frissítés után teljes szinkronizálást](#how-to-defer-full-synchronization-after-upgrade).</span><span class="sxs-lookup"><span data-stu-id="bb4b7-134">To defer such activities, refer to section [How to defer full synchronization after upgrade](#how-to-defer-full-synchronization-after-upgrade).</span></span>

## <a name="swing-migration"></a><span data-ttu-id="bb4b7-135">Párhuzamos migrálás</span><span class="sxs-lookup"><span data-stu-id="bb4b7-135">Swing migration</span></span>
<span data-ttu-id="bb4b7-136">Ha egy összetett üzembe helyezése vagy több objektumot, egy frissítés az élő rendszeren ehhez nem célszerű lehet.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-136">If you have a complex deployment or many objects, it might be impractical to do an in-place upgrade on the live system.</span></span> <span data-ttu-id="bb4b7-137">Egyes ügyfelek esetén ez a folyamat eltarthat több nap –, és ebben az időszakban nem változáskülönbözeteit feldolgozása.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-137">For some customers, this process might take multiple days--and during this time, no delta changes are processed.</span></span> <span data-ttu-id="bb4b7-138">Is használhatja ezt a módszert, ha azt tervezi, hogy a konfiguráció jelentős változtatásokat, és próbálja ki őket ahhoz, azok még leküldeni a felhő szeretné.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-138">You can also use this method when you plan to make substantial changes to your configuration and you want to try them out before they're pushed to the cloud.</span></span>

<span data-ttu-id="bb4b7-139">Ezek a forgatókönyvek az ajánlott módszer, hogy egy mozgó áttelepítési használja.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-139">The recommended method for these scenarios is to use a swing migration.</span></span> <span data-ttu-id="bb4b7-140">(Legalább) két kiszolgáló – egy aktív kiszolgáló és egy átmeneti kiszolgálón van szüksége.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-140">You need (at least) two servers--one active server and one staging server.</span></span> <span data-ttu-id="bb4b7-141">(Lásd az alábbi képen látható teli kék vonallal) az aktív kiszolgáló felelős a aktív üzemi terhelés.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-141">The active server (shown with solid blue lines in the following picture) is responsible for the active production load.</span></span> <span data-ttu-id="bb4b7-142">Az átmeneti kiszolgálón (látható lila szaggatott vonallal) az új kiadási vagy konfigurációs kész.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-142">The staging server (shown with dashed purple lines) is prepared with the new release or configuration.</span></span> <span data-ttu-id="bb4b7-143">Amikor teljesen készen áll, a kiszolgáló akkor aktív.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-143">When it's fully ready, this server is made active.</span></span> <span data-ttu-id="bb4b7-144">A korábbi aktív kiszolgáló, amely mostantól a régi verziója vagy a konfigurációs telepítve van, az átmeneti kiszolgálóra történik, és frissítése.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-144">The previous active server, which now has the old version or configuration installed, is made into the staging server and is upgraded.</span></span>

<span data-ttu-id="bb4b7-145">A két kiszolgáló különböző verzióit is használhatják.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-145">The two servers can use different versions.</span></span> <span data-ttu-id="bb4b7-146">Például az aktív kiszolgáló, amely le szeretné szerelni használhatja az Azure AD Sync, és az új átmeneti kiszolgálón használhatja az Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-146">For example, the active server that you plan to decommission can use Azure AD Sync, and the new staging server can use Azure AD Connect.</span></span> <span data-ttu-id="bb4b7-147">Ha mozgó áttelepítés használatával fejlesztése a konfigurációt, célszerű egyeznie kell a két kiszolgálón.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-147">If you use swing migration to develop a new configuration, it's a good idea to have the same versions on the two servers.</span></span>  
![Átmeneti kiszolgáló](./media/active-directory-aadconnect-upgrade-previous-version/stagingserver1.png)

> [!NOTE]
> <span data-ttu-id="bb4b7-149">Egyes ügyfelek előnyben részesítik a három vagy négy kiszolgáló ehhez a forgatókönyvhöz.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-149">Some customers prefer to have three or four servers for this scenario.</span></span> <span data-ttu-id="bb4b7-150">Az átmeneti kiszolgáló frissítve van, ha nem rendelkezik egy biztonsági kiszolgáló [vész-helyreállítási](active-directory-aadconnectsync-operations.md#disaster-recovery).</span><span class="sxs-lookup"><span data-stu-id="bb4b7-150">When the staging server is upgraded, you don't have a backup server for [disaster recovery](active-directory-aadconnectsync-operations.md#disaster-recovery).</span></span> <span data-ttu-id="bb4b7-151">Három vagy négy kiszolgálókkal készítse elő az új verzióra, amely biztosítja, hogy nincs-e mindig egy átmeneti kiszolgálón, amely kész átvenni az elsődleges vagy készenléti állapotban lévő kiszolgálók egy csoportja.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-151">With three or four servers, you can prepare one set of primary/standby servers with the new version, which ensures that there is always a staging server that's ready to take over.</span></span>

<span data-ttu-id="bb4b7-152">Ezeket a lépéseket az Azure AD Sync vagy az Azure AD-összekötő FIM kiegészítve megoldás mozgatása is működik.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-152">These steps also work to move from Azure AD Sync or a solution with FIM + Azure AD Connector.</span></span> <span data-ttu-id="bb4b7-153">Ezeket a lépéseket a Dirsync nem működnek, de a azonos mozgó áttelepítés (más néven párhuzamos üzembe helyezés) lépésben DirSync módja a [frissítés Azure Active Directory-szinkronizálás (DirSync)](active-directory-aadconnect-dirsync-upgrade-get-started.md).</span><span class="sxs-lookup"><span data-stu-id="bb4b7-153">These steps don't work for DirSync, but the same swing migration method (also called parallel deployment) with steps for DirSync is in [Upgrade Azure Active Directory sync (DirSync)](active-directory-aadconnect-dirsync-upgrade-get-started.md).</span></span>

### <a name="use-a-swing-migration-to-upgrade"></a><span data-ttu-id="bb4b7-154">Egy mozgó áttelepítés használatával frissíti</span><span class="sxs-lookup"><span data-stu-id="bb4b7-154">Use a swing migration to upgrade</span></span>
1. <span data-ttu-id="bb4b7-155">Ha használja az Azure AD Connect mindkét kiszolgálón, és csak feltétlenül a konfiguráció módosítása, ellenőrizze, hogy az aktív kiszolgáló és az átmeneti kiszolgálón egyaránt ugyanazon verzióját használja.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-155">If you use Azure AD Connect on both servers and plan to only make a configuration change, make sure that your active server and staging server are both using the same version.</span></span> <span data-ttu-id="bb4b7-156">Amely megkönnyíti a különbségek később.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-156">That makes it easier to compare differences later.</span></span> <span data-ttu-id="bb4b7-157">Ha az Azure AD-Szinkronizálóról frissít, ezeket a kiszolgálókat különböző verziói működnek.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-157">If you're upgrading from Azure AD Sync, then these servers have different versions.</span></span> <span data-ttu-id="bb4b7-158">Ha frissít, az Azure AD Connect egy korábbi verziójából származó, érdemes indítsa el a két kiszolgáló, amely ugyanazon verzióját használja, de ez nem szükséges.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-158">If you're upgrading from an older version of Azure AD Connect, it's a good idea to start with the two servers that are using the same version, but it's not required.</span></span>
2. <span data-ttu-id="bb4b7-159">Ha egy egyéni konfigurációt végrehajtott, és az átmeneti kiszolgálón nincs, kövesse a [az aktív kiszolgáló egyéni konfigurációs áthelyezése az átmeneti kiszolgálón](#move-custom-configuration-from-active-to-staging-server).</span><span class="sxs-lookup"><span data-stu-id="bb4b7-159">If you've made a custom configuration and your staging server doesn't have it, follow the steps under [Move a custom configuration from the active server to the staging server](#move-custom-configuration-from-active-to-staging-server).</span></span>
3. <span data-ttu-id="bb4b7-160">Ha az Azure AD Connect egy korábbi kiadásáról frissít, a átmeneti kiszolgáló frissítése a legújabb verzióra.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-160">If you're upgrading from an earlier release of Azure AD Connect, upgrade the staging server to the latest version.</span></span> <span data-ttu-id="bb4b7-161">Ha az Azure AD-Szinkronizálóról telepít át, majd az Azure AD Connect telepítése az átmeneti kiszolgálón.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-161">If you're moving from Azure AD Sync, then install Azure AD Connect on your staging server.</span></span>
4. <span data-ttu-id="bb4b7-162">Lehetővé teszik a szinkronizálási motor teljes importálást és teljes szinkronizálást a átmeneti kiszolgálón futnak.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-162">Let the sync engine run full import and full synchronization on your staging server.</span></span>
5. <span data-ttu-id="bb4b7-163">Győződjön meg, hogy az új konfigurációt a "Hitelesítés" lépések segítségével nem okozhat váratlan módosításokat az [ellenőrizze a kiszolgáló konfigurációja](active-directory-aadconnectsync-operations.md#verify-the-configuration-of-a-server).</span><span class="sxs-lookup"><span data-stu-id="bb4b7-163">Verify that the new configuration didn't cause any unexpected changes by using the steps under "Verify" in [Verify the configuration of a server](active-directory-aadconnectsync-operations.md#verify-the-configuration-of-a-server).</span></span> <span data-ttu-id="bb4b7-164">Ha valami nem a várt módon, javítsa ki, futtassa az importálás és szinkronizálás, és ellenőrizze az adatokat, amíg azt megfelelőnek tűnik, a lépéseket követve.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-164">If something isn't as expected, correct it, run the import and sync, and verify the data until it looks good, by following the steps.</span></span>
6. <span data-ttu-id="bb4b7-165">Váltás az aktív kiszolgáló átmeneti kiszolgálón.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-165">Switch the staging server to be the active server.</span></span> <span data-ttu-id="bb4b7-166">Ez az utolsó lépésben "Kapcsoló aktív kiszolgáló" a [ellenőrizze a kiszolgáló konfigurációja](active-directory-aadconnectsync-operations.md#verify-the-configuration-of-a-server).</span><span class="sxs-lookup"><span data-stu-id="bb4b7-166">This is the final step "Switch active server" in [Verify the configuration of a server](active-directory-aadconnectsync-operations.md#verify-the-configuration-of-a-server).</span></span>
7. <span data-ttu-id="bb4b7-167">Ha az Azure AD Connect frissít, frissítse a kiszolgálót, amelyik most már a legújabb verzióra átmeneti módban.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-167">If you're upgrading Azure AD Connect, upgrade the server that's now in staging mode to the latest release.</span></span> <span data-ttu-id="bb4b7-168">Ugyanazokat a lépéseket, mielőtt az adatok és a frissített konfiguráció.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-168">Follow the same steps as before to get the data and configuration upgraded.</span></span> <span data-ttu-id="bb4b7-169">Ha frissített az Azure AD-Szinkronizálóról, ezután kapcsolja ki a és a régi kiszolgáló leszerelése.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-169">If you upgraded from Azure AD Sync, you can now turn off and decommission your old server.</span></span>

### <a name="move-a-custom-configuration-from-the-active-server-to-the-staging-server"></a><span data-ttu-id="bb4b7-170">Az aktív kiszolgáló egyéni konfigurációs áthelyezése az átmeneti kiszolgálón</span><span class="sxs-lookup"><span data-stu-id="bb4b7-170">Move a custom configuration from the active server to the staging server</span></span>
<span data-ttu-id="bb4b7-171">Ha az aktív kiszolgáló végrehajtott konfigurációs módosításokat, győződjön meg arról, hogy az azonos módosításai érvényesek lesznek a átmeneti kiszolgálón szeretné.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-171">If you've made configuration changes to the active server, you need to make sure that the same changes are applied to the staging server.</span></span> <span data-ttu-id="bb4b7-172">Az áthelyezés érdekében használhatja a [az Azure AD Connect konfigurációs dokumentáló](https://github.com/Microsoft/AADConnectConfigDocumenter).</span><span class="sxs-lookup"><span data-stu-id="bb4b7-172">To help with this move, you can use the [Azure AD Connect configuration documenter](https://github.com/Microsoft/AADConnectConfigDocumenter).</span></span>

<span data-ttu-id="bb4b7-173">Áthelyezheti az egyéni szinkronizálási szabályokat, hogy a PowerShell használatával létrehozott.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-173">You can move the custom sync rules that you've created by using PowerShell.</span></span> <span data-ttu-id="bb4b7-174">Telepítenie kell az egyéb módosítások ugyanúgy mindkét rendszeren, és nem telepíthető át a módosításokat.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-174">You must apply other changes the same way on both systems, and you can't migrate the changes.</span></span> <span data-ttu-id="bb4b7-175">A [konfigurációs dokumentáló](https://github.com/Microsoft/AADConnectConfigDocumenter) segítségével összehasonlítja a két rendszer számára, győződjön meg arról, hogy azok egyezését.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-175">The [configuration documenter](https://github.com/Microsoft/AADConnectConfigDocumenter) can help you comparing the two systems to make sure they are identical.</span></span> <span data-ttu-id="bb4b7-176">Az eszköz is segíthetnek az ebben a szakaszban található lépéseket automatizálását.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-176">The tool can also help in automating the steps found in this section.</span></span>

<span data-ttu-id="bb4b7-177">Mindkét kiszolgálón ugyanúgy konfigurálja a következőket kell:</span><span class="sxs-lookup"><span data-stu-id="bb4b7-177">You need to configure the following things the same way on both servers:</span></span>

* <span data-ttu-id="bb4b7-178">Az azonos erdők kapcsolat</span><span class="sxs-lookup"><span data-stu-id="bb4b7-178">Connection to the same forests</span></span>
* <span data-ttu-id="bb4b7-179">Bármely tartomány és szervezeti egységek szűrése</span><span class="sxs-lookup"><span data-stu-id="bb4b7-179">Any domain and OU filtering</span></span>
* <span data-ttu-id="bb4b7-180">A választható szolgáltatásait, például a jelszó-szinkronizálás és jelszóvisszaíró</span><span class="sxs-lookup"><span data-stu-id="bb4b7-180">The same optional features, such as password sync and password writeback</span></span>

<span data-ttu-id="bb4b7-181">**Helyezze át az egyéni szinkronizálási szabályok**</span><span class="sxs-lookup"><span data-stu-id="bb4b7-181">**Move custom synchronization rules**</span></span>  
<span data-ttu-id="bb4b7-182">Egyéni szinkronizálási szabályok áthelyezni, tegye a következőket:</span><span class="sxs-lookup"><span data-stu-id="bb4b7-182">To move custom synchronization rules, do the following:</span></span>

1. <span data-ttu-id="bb4b7-183">Nyissa meg **szinkronizálási szabályok szerkesztő** az aktív kiszolgálón.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-183">Open **Synchronization Rules Editor** on your active server.</span></span>
2. <span data-ttu-id="bb4b7-184">Jelöljön ki egy egyéni szabályt.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-184">Select a custom rule.</span></span> <span data-ttu-id="bb4b7-185">Kattintson a **exportálása**.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-185">Click **Export**.</span></span> <span data-ttu-id="bb4b7-186">Ekkor megjelenik a Jegyzettömb ablak.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-186">This brings up a Notepad window.</span></span> <span data-ttu-id="bb4b7-187">Az ideiglenes fájl mentése PS1 kiterjesztéssel.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-187">Save the temporary file with a PS1 extension.</span></span> <span data-ttu-id="bb4b7-188">Így egy PowerShell-parancsfájlt.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-188">This makes it a PowerShell script.</span></span> <span data-ttu-id="bb4b7-189">Az átmeneti kiszolgálón másolja a PS1 fájlnevet.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-189">Copy the PS1 file to the staging server.</span></span>  
   <span data-ttu-id="bb4b7-190">![Szinkronizálási szabály exportálása](./media/active-directory-aadconnect-upgrade-previous-version/exportrule.png)</span><span class="sxs-lookup"><span data-stu-id="bb4b7-190">![Sync rule export](./media/active-directory-aadconnect-upgrade-previous-version/exportrule.png)</span></span>
3. <span data-ttu-id="bb4b7-191">Az összekötő GUID azonosítója nem egyezik a átmeneti kiszolgálón, és akkor kell megváltoztatnia.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-191">The Connector GUID is different on the staging server, and you must change it.</span></span> <span data-ttu-id="bb4b7-192">Ahhoz, hogy a GUID, indítsa el a **szinkronizálási szabályok szerkesztő**, válasszon egyet a out-of-box szabályokat, amelyek megfelelnek az adott csatlakoztatott rendszer, majd kattintson a **exportálása**.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-192">To get the GUID, start **Synchronization Rules Editor**, select one of the out-of-box rules that represent the same connected system, and click **Export**.</span></span> <span data-ttu-id="bb4b7-193">Az a PS1 fájlnevet a globálisan egyedi Azonosítót cserélje le a GUID-Azonosítójának a átmeneti kiszolgálón.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-193">Replace the GUID in your PS1 file with the GUID from the staging server.</span></span>
4. <span data-ttu-id="bb4b7-194">Egy PowerShell-parancssorba futtassa a PS1 fájlnevet.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-194">In a PowerShell prompt, run the PS1 file.</span></span> <span data-ttu-id="bb4b7-195">Ez az egyéni szinkronizálási szabályt a átmeneti kiszolgálón hoz létre.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-195">This creates the custom synchronization rule on the staging server.</span></span>
5. <span data-ttu-id="bb4b7-196">Ismételje meg ezt az egyéni szabályok.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-196">Repeat this for all your custom rules.</span></span>

## <a name="how-to-defer-full-synchronization-after-upgrade"></a><span data-ttu-id="bb4b7-197">Hogyan késlelteti a frissítés után teljes szinkronizálást</span><span class="sxs-lookup"><span data-stu-id="bb4b7-197">How to defer full synchronization after upgrade</span></span>
<span data-ttu-id="bb4b7-198">Helybeni verziófrissítés során előfordulhat módosítások bevezetett (beleértve a teljes importálás és a teljes szinkronizálás lépést) adott szinkronizálási műveleteket hajthatnak végre.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-198">During in-place upgrade, there may be changes introduced that require specific synchronization activities (including Full Import step and Full Synchronization step) to be executed.</span></span> <span data-ttu-id="bb4b7-199">Például összekötő séma módosításához **teljes importálás** lépés és out-of-box szinkronizálási szabály módosításához **teljes szinkronizálás** lépéssel hajtható végre az érintett összekötőt.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-199">For example, connector schema changes require **full import** step and out-of-box synchronization rule changes require **full synchronization** step to be executed on affected connectors.</span></span> <span data-ttu-id="bb4b7-200">A frissítés során az Azure AD Connect meghatározza, hogy milyen szinkronizálási tevékenységek szükségesek, és rögzíti őket *felülbírálások*.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-200">During upgrade, Azure AD Connect determines what synchronization activities are required and records them as *overrides*.</span></span> <span data-ttu-id="bb4b7-201">A következő szinkronizálási ciklusban a szinkronizálás Feladatütemező szerzi be ezeket a felülbírálásokat, és végrehajtja azokat.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-201">In the following synchronization cycle, the synchronization scheduler picks up these overrides and executes them.</span></span> <span data-ttu-id="bb4b7-202">Felülbírálás sikeresen végre, ha eltávolítják azt.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-202">Once an override is successfully executed, it is removed.</span></span>

<span data-ttu-id="bb4b7-203">Előfordulhat, hogy esetekben nem célszerű ezeket a felülbírálásokat közvetlenül a frissítés után kerül sor.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-203">There may be situations where you do not want these overrides to take place immediately after upgrade.</span></span> <span data-ttu-id="bb4b7-204">Például számos szinkronizált objektummal rendelkezik, és azt szeretné, hogy szinkronizálás lépések munkaidő után következik be.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-204">For example, you have numerous synchronized objects and you would like these synchronization steps to occur after business hours.</span></span> <span data-ttu-id="bb4b7-205">Ezeket a felülbírálásokat eltávolítása:</span><span class="sxs-lookup"><span data-stu-id="bb4b7-205">To remove these overrides:</span></span>

1. <span data-ttu-id="bb4b7-206">A frissítés során **, törölje a jelet** beállítás **a szinkronizálási folyamat indítása, ha a konfiguráció befejezése**.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-206">During upgrade, **uncheck** the option **Start the synchronization process when configuration completes**.</span></span> <span data-ttu-id="bb4b7-207">Ezzel letiltja a a szinkronizálási Feladatütemező, és megakadályozza, hogy a szinkronizálási ciklust megakadályozhat automatikusan előtt a rendszer eltávolítja a felülbírálások.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-207">This disables the synchronization scheduler and prevents synchronization cycle from taking place automatically before the overrides are removed.</span></span>

   ![DisableFullSyncAfterUpgrade](./media/active-directory-aadconnect-upgrade-previous-version/disablefullsync01.png)

2. <span data-ttu-id="bb4b7-209">Frissítés befejezése után futtassa az alábbi parancsmagot, hogy megtudja, milyen felülbírálások lettek hozzáadva:`Get-ADSyncSchedulerConnectorOverride | fl`</span><span class="sxs-lookup"><span data-stu-id="bb4b7-209">After upgrade completes, run the following cmdlet to find out what overrides have been added: `Get-ADSyncSchedulerConnectorOverride | fl`</span></span>

   >[!NOTE]
   > <span data-ttu-id="bb4b7-210">A felülbírálások connector-specifikus.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-210">The overrides are connector-specific.</span></span> <span data-ttu-id="bb4b7-211">A következő példában a teljes importálás és a teljes szinkronizálás lépést lettek hozzáadva mind a helyszíni AD-összekötő és az Azure AD-összekötőt.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-211">In the following example, Full Import step and Full Synchronization step have been added to both the on-premises AD Connector and Azure AD Connector.</span></span>

   ![DisableFullSyncAfterUpgrade](./media/active-directory-aadconnect-upgrade-previous-version/disablefullsync02.png)

3. <span data-ttu-id="bb4b7-213">Jegyezze fel a meglévő felülbírálások hozzáadott.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-213">Note down the existing overrides that have been added.</span></span>
   
4. <span data-ttu-id="bb4b7-214">A felülbírálásokat is teljes importálást és teljes szinkronizálást egy tetszőleges összekötőn eltávolításához futtassa a következő parancsmagot:`Set-ADSyncSchedulerConnectorOverride -ConnectorIdentifier <Guid-of-ConnectorIdentifier> -FullImportRequired $false -FullSyncRequired $false`</span><span class="sxs-lookup"><span data-stu-id="bb4b7-214">To remove the overrides for both full import and full synchronization on an arbitrary connector, run the following cmdlet: `Set-ADSyncSchedulerConnectorOverride -ConnectorIdentifier <Guid-of-ConnectorIdentifier> -FullImportRequired $false -FullSyncRequired $false`</span></span>

   <span data-ttu-id="bb4b7-215">Távolítsa el az összes összekötőt a felülbírálások, hajtsa végre a következő PowerShell-parancsfájlt:</span><span class="sxs-lookup"><span data-stu-id="bb4b7-215">To remove the overrides on all connectors, execute the following PowerShell script:</span></span>

   ```
   foreach ($connectorOverride in Get-ADSyncSchedulerConnectorOverride)
   {
       Set-ADSyncSchedulerConnectorOverride -ConnectorIdentifier $connectorOverride.ConnectorIdentifier.Guid -FullSyncRequired $false -FullImportRequired $false
   }
   ```

5. <span data-ttu-id="bb4b7-216">Az ütemező folytatásához futtassa az alábbi parancsmagot:`Set-ADSyncScheduler -SyncCycleEnabled $true`</span><span class="sxs-lookup"><span data-stu-id="bb4b7-216">To resume the scheduler, run the following cmdlet: `Set-ADSyncScheduler -SyncCycleEnabled $true`</span></span>

   >[!IMPORTANT]
   > <span data-ttu-id="bb4b7-217">Ne felejtse el a szükséges szinkronizálásának lépései legkorábbi tetszés hajtható végre.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-217">Remember to execute the required synchronization steps at your earliest convenience.</span></span> <span data-ttu-id="bb4b7-218">Manuálisan hajtható végre ezeket a lépéseket a Synchronization Service Manager használatával, vagy adja hozzá a felülbírálások biztonsági másolatot, a Set-ADSyncSchedulerConnectorOverride parancsmaggal.</span><span class="sxs-lookup"><span data-stu-id="bb4b7-218">You can either manually execute these steps using the Synchronization Service Manager or add the overrides back using the Set-ADSyncSchedulerConnectorOverride cmdlet.</span></span>

<span data-ttu-id="bb4b7-219">A teljes importálás és a teljes szinkronizálás felülbírálásokat egy tetszőleges összekötő hozzáadásához futtassa az alábbi parancsmagot:`Set-ADSyncSchedulerConnectorOverride -ConnectorIdentifier <Guid> -FullImportRequired $true -FullSyncRequired $true`</span><span class="sxs-lookup"><span data-stu-id="bb4b7-219">To add the overrides for both full import and full synchronization on an arbitrary connector, run the following cmdlet:  `Set-ADSyncSchedulerConnectorOverride -ConnectorIdentifier <Guid> -FullImportRequired $true -FullSyncRequired $true`</span></span>

## <a name="next-steps"></a><span data-ttu-id="bb4b7-220">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="bb4b7-220">Next steps</span></span>
<span data-ttu-id="bb4b7-221">További információ [a helyszíni identitások integrálása az Azure Active Directoryval](active-directory-aadconnect.md).</span><span class="sxs-lookup"><span data-stu-id="bb4b7-221">Learn more about [integrating your on-premises identities with Azure Active Directory](active-directory-aadconnect.md).</span></span>
