---
title: "Az Azure AD Connect: Frissítés egy korábbi verzióról |} Microsoft Docs"
description: "Hello különböző módszereket tooupgrade toohello legújabb kiadása Azure Active Directory Connect, beleértve a helyben frissítés és egy mozgó áttelepítési ismerteti."
services: active-directory
documentationcenter: 
author: AndKjell
manager: femila
editor: 
ms.assetid: 31f084d8-2b89-478c-9079-76cf92e6618f
ms.service: active-directory
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: Identity
ms.date: 07/12/2017
ms.author: billmath
ms.openlocfilehash: 57bd5b094654e4983cafa303b6f3daecadafb01c
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/06/2017
---
# <a name="azure-ad-connect-upgrade-from-a-previous-version-toohello-latest"></a><span data-ttu-id="21945-103">Az Azure AD Connect: Frissítés a legújabb egy korábbi verziója toohello</span><span class="sxs-lookup"><span data-stu-id="21945-103">Azure AD Connect: Upgrade from a previous version toohello latest</span></span>
<span data-ttu-id="21945-104">Ez a témakör ismerteti a használható tooupgrade az Azure Active Directory (Azure AD) Connect telepítési toohello legújabb kiadásának hello különböző módszereket.</span><span class="sxs-lookup"><span data-stu-id="21945-104">This topic describes hello different methods that you can use tooupgrade your Azure Active Directory (Azure AD) Connect installation toohello latest release.</span></span> <span data-ttu-id="21945-105">Azt javasoljuk, hogy őrizze meg az Azure AD Connect hello kiadásainak aktuális.</span><span class="sxs-lookup"><span data-stu-id="21945-105">We recommend that you keep yourself current with hello releases of Azure AD Connect.</span></span> <span data-ttu-id="21945-106">Hello hello lépéseket is használhat [áttelepítési éppen](#swing-migration) szakaszában, amikor olyan jelentős konfigurációs módosítást hajt végre.</span><span class="sxs-lookup"><span data-stu-id="21945-106">You also use hello steps in hello [Swing migration](#swing-migration) section when you make a substantial configuration change.</span></span>

<span data-ttu-id="21945-107">Ha azt szeretné, hogy a Dirsync szolgáltatásról tooupgrade, [Azure AD Szinkronizáló eszközéről (DirSync) verzióról](active-directory-aadconnect-dirsync-upgrade-get-started.md) helyette.</span><span class="sxs-lookup"><span data-stu-id="21945-107">If you want tooupgrade from DirSync, see [Upgrade from Azure AD sync tool (DirSync)](active-directory-aadconnect-dirsync-upgrade-get-started.md) instead.</span></span>

<span data-ttu-id="21945-108">Nincsenek használható az Azure AD Connect tooupgrade néhány különböző stratégiákat.</span><span class="sxs-lookup"><span data-stu-id="21945-108">There are a few different strategies that you can use tooupgrade Azure AD Connect.</span></span>

| <span data-ttu-id="21945-109">Módszer</span><span class="sxs-lookup"><span data-stu-id="21945-109">Method</span></span> | <span data-ttu-id="21945-110">Leírás</span><span class="sxs-lookup"><span data-stu-id="21945-110">Description</span></span> |
| --- | --- |
| [<span data-ttu-id="21945-111">Automatikus frissítés</span><span class="sxs-lookup"><span data-stu-id="21945-111">Automatic upgrade</span></span>](active-directory-aadconnect-feature-automatic-upgrade.md) |<span data-ttu-id="21945-112">Ez a hello legegyszerűbb módszer az expressz telepítési rendelkező ügyfelek esetén.</span><span class="sxs-lookup"><span data-stu-id="21945-112">This is hello easiest method for customers with an express installation.</span></span> |
| [<span data-ttu-id="21945-113">Frissítés helyben</span><span class="sxs-lookup"><span data-stu-id="21945-113">In-place upgrade</span></span>](#in-place-upgrade) |<span data-ttu-id="21945-114">Ha egy önálló kiszolgáló, frissítheti a hello telepítési helyben hello ugyanarra a kiszolgálóra.</span><span class="sxs-lookup"><span data-stu-id="21945-114">If you have a single server, you can upgrade hello installation in-place on hello same server.</span></span> |
| [<span data-ttu-id="21945-115">Áttelepítési éppen</span><span class="sxs-lookup"><span data-stu-id="21945-115">Swing migration</span></span>](#swing-migration) |<span data-ttu-id="21945-116">Két kiszolgálóval készítse elő hello hello új kiadás vagy konfigurációs kiszolgálók, és módosítsa a hello aktív kiszolgáló, amikor készen áll.</span><span class="sxs-lookup"><span data-stu-id="21945-116">With two servers, you can prepare one of hello servers with hello new release or configuration, and change hello active server when you're ready.</span></span> |

<span data-ttu-id="21945-117">Engedélyek információkért lásd: hello [a frissítéshez szükséges engedélyek](active-directory-aadconnect-accounts-permissions.md#upgrade).</span><span class="sxs-lookup"><span data-stu-id="21945-117">For permissions information, see hello [permissions required for an upgrade](active-directory-aadconnect-accounts-permissions.md#upgrade).</span></span>

> [!NOTE]
> <span data-ttu-id="21945-118">Az új Azure AD Connect kiszolgáló toostart szinkronizálási módosítások tooAzure AD engedélyezése után meg kell állítja vissza a DirSync vagy az Azure AD Sync toousing. Alacsonyabb verziójúra változtatása az Azure AD Connect toolegacy ügyfelekről, beleértve a DirSync és Azure AD Sync programot, nem támogatott, és az Azure ad-ben például adatvesztés tooissues vezethet.</span><span class="sxs-lookup"><span data-stu-id="21945-118">After you've enabled your new Azure AD Connect server toostart synchronizing changes tooAzure AD, you must not roll back toousing DirSync or Azure AD Sync. Downgrading from Azure AD Connect toolegacy clients, including DirSync and Azure AD Sync, isn't supported and can lead tooissues such as data loss in Azure AD.</span></span>

## <a name="in-place-upgrade"></a><span data-ttu-id="21945-119">Frissítés helyben</span><span class="sxs-lookup"><span data-stu-id="21945-119">In-place upgrade</span></span>
<span data-ttu-id="21945-120">Egy frissítés tér át Azure AD Sync vagy az Azure AD Connect működik.</span><span class="sxs-lookup"><span data-stu-id="21945-120">An in-place upgrade works for moving from Azure AD Sync or Azure AD Connect.</span></span> <span data-ttu-id="21945-121">A Dirsync szolgáltatásról áthelyezésére vagy megoldás a Forefront Identity Manager (FIM) + Azure AD-összekötő nem működik.</span><span class="sxs-lookup"><span data-stu-id="21945-121">It doesn't work for moving from DirSync or for a solution with Forefront Identity Manager (FIM) + Azure AD Connector.</span></span>

<span data-ttu-id="21945-122">Ez a módszer használata ajánlott, ha egy önálló kiszolgáló és kisebb, mint körülbelül 100 000 objektumok.</span><span class="sxs-lookup"><span data-stu-id="21945-122">This method is preferred when you have a single server and less than about 100,000 objects.</span></span> <span data-ttu-id="21945-123">A módosításokat toohello out-of-box szinkronizálási szabályok vonatkoznak, ha egy teljes importálást és teljes szinkronizálást fordulhat elő, hello frissítés után.</span><span class="sxs-lookup"><span data-stu-id="21945-123">If there are any changes toohello out-of-box sync rules, a full import and full synchronization occur after hello upgrade.</span></span> <span data-ttu-id="21945-124">Ez a módszer biztosítja, hogy hello új konfigurációt alkalmazott tooall meglévő objektumok hello rendszerben.</span><span class="sxs-lookup"><span data-stu-id="21945-124">This method ensures that hello new configuration is applied tooall existing objects in hello system.</span></span> <span data-ttu-id="21945-125">Ehhez a futtató órára is szükség lehet néhány, attól függően, hogy hello hello szinkronizálási motor hatókörében lévő objektumok száma.</span><span class="sxs-lookup"><span data-stu-id="21945-125">This run might take a few hours, depending on hello number of objects that are in scope of hello sync engine.</span></span> <span data-ttu-id="21945-126">hello normál különbözeti szinkronizálás Feladatütemező (amely alapértelmezés szerint 30 percenként szinkronizál) fel van függesztve, de a jelszó-szinkronizálás továbbra is.</span><span class="sxs-lookup"><span data-stu-id="21945-126">hello normal delta synchronization scheduler (which synchronizes every 30 minutes by default) is suspended, but password synchronization continues.</span></span> <span data-ttu-id="21945-127">Érdemes valamilyen módon hello helybeni frissítést a hétvégén.</span><span class="sxs-lookup"><span data-stu-id="21945-127">You might consider doing hello in-place upgrade during a weekend.</span></span> <span data-ttu-id="21945-128">Ha hello új Azure AD Connect kiadással módosítások toohello out-of-box konfigurálásra, majd normál különbözeti importálás/szinkronizálási indítása helyette.</span><span class="sxs-lookup"><span data-stu-id="21945-128">If there are no changes toohello out-of-box configuration with hello new Azure AD Connect release, then a normal delta import/sync starts instead.</span></span>  
![Frissítés helyben](./media/active-directory-aadconnect-upgrade-previous-version/inplaceupgrade.png)

<span data-ttu-id="21945-130">Ha végrehajtott módosítások toohello out-of-box szinkronizálási szabályokat, majd ezek a szabályok állítja vissza toohello alapértelmezett konfigurációja a frissítés.</span><span class="sxs-lookup"><span data-stu-id="21945-130">If you've made changes toohello out-of-box synchronization rules, then these rules are set back toohello default configuration on upgrade.</span></span> <span data-ttu-id="21945-131">arról, hogy a konfigurációs tárolódik a frissítések közötti toomake győződjön meg arról, hogy módosítania folyamatban ismertetett módon [ajánlott eljárások a hello alapértelmezett konfiguráció módosítása](active-directory-aadconnectsync-best-practices-changing-default-configuration.md).</span><span class="sxs-lookup"><span data-stu-id="21945-131">toomake sure that your configuration is kept between upgrades, make sure that you make changes as they're described in [Best practices for changing hello default configuration](active-directory-aadconnectsync-best-practices-changing-default-configuration.md).</span></span>

<span data-ttu-id="21945-132">Helybeni verziófrissítés során előfordulhat módosítások bevezetett meghatározott szinkronizálási tevékenységeket (beleértve a teljes importálás és a teljes szinkronizálás lépést) toobe végrehajtása a frissítés befejezése után.</span><span class="sxs-lookup"><span data-stu-id="21945-132">During in-place upgrade, there may be changes introduced that require specific synchronization activities (including Full Import step and Full Synchronization step) toobe executed after upgrade completes.</span></span> <span data-ttu-id="21945-133">toodefer ilyen tevékenységek, tekintse meg a toosection [hogyan toodefer teljes szinkronizálás a frissítés után](#how-to-defer-full-synchronization-after-upgrade).</span><span class="sxs-lookup"><span data-stu-id="21945-133">toodefer such activities, refer toosection [How toodefer full synchronization after upgrade](#how-to-defer-full-synchronization-after-upgrade).</span></span>

## <a name="swing-migration"></a><span data-ttu-id="21945-134">Párhuzamos migrálás</span><span class="sxs-lookup"><span data-stu-id="21945-134">Swing migration</span></span>
<span data-ttu-id="21945-135">Ha egy összetett üzembe helyezése vagy több objektumot, nem célszerű toodo hello élő rendszer helyben frissítés lehet.</span><span class="sxs-lookup"><span data-stu-id="21945-135">If you have a complex deployment or many objects, it might be impractical toodo an in-place upgrade on hello live system.</span></span> <span data-ttu-id="21945-136">Egyes ügyfelek esetén ez a folyamat eltarthat több nap –, és ebben az időszakban nem változáskülönbözeteit feldolgozása.</span><span class="sxs-lookup"><span data-stu-id="21945-136">For some customers, this process might take multiple days--and during this time, no delta changes are processed.</span></span> <span data-ttu-id="21945-137">Is használhatja ezt a módszert a toomake jelentős módosításokat tooyour konfigurációjának megtervezése és tootry ahhoz, azok közben leküldött toohello felhő ki őket.</span><span class="sxs-lookup"><span data-stu-id="21945-137">You can also use this method when you plan toomake substantial changes tooyour configuration and you want tootry them out before they're pushed toohello cloud.</span></span>

<span data-ttu-id="21945-138">módszer forgatókönyvek esetén ajánlott hello toouse mozgó áttelepítés.</span><span class="sxs-lookup"><span data-stu-id="21945-138">hello recommended method for these scenarios is toouse a swing migration.</span></span> <span data-ttu-id="21945-139">(Legalább) két kiszolgáló – egy aktív kiszolgáló és egy átmeneti kiszolgálón van szüksége.</span><span class="sxs-lookup"><span data-stu-id="21945-139">You need (at least) two servers--one active server and one staging server.</span></span> <span data-ttu-id="21945-140">(lásd az alábbi képen hello teli kék vonallal) hello aktív kiszolgáló felelős hello aktív üzemi terhelés.</span><span class="sxs-lookup"><span data-stu-id="21945-140">hello active server (shown with solid blue lines in hello following picture) is responsible for hello active production load.</span></span> <span data-ttu-id="21945-141">hello új kiadás vagy konfigurációs kiszolgálóhoz (lila szaggatott vonallal) átmeneti hello kész.</span><span class="sxs-lookup"><span data-stu-id="21945-141">hello staging server (shown with dashed purple lines) is prepared with hello new release or configuration.</span></span> <span data-ttu-id="21945-142">Amikor teljesen készen áll, a kiszolgáló akkor aktív.</span><span class="sxs-lookup"><span data-stu-id="21945-142">When it's fully ready, this server is made active.</span></span> <span data-ttu-id="21945-143">hello előző aktív kiszolgáló, amely most hello régi verziója vagy a konfigurációs telepítve van, a kiszolgáló átmeneti hello történik, és frissítése.</span><span class="sxs-lookup"><span data-stu-id="21945-143">hello previous active server, which now has hello old version or configuration installed, is made into hello staging server and is upgraded.</span></span>

<span data-ttu-id="21945-144">két kiszolgáló hello különböző verzióit is használhatják.</span><span class="sxs-lookup"><span data-stu-id="21945-144">hello two servers can use different versions.</span></span> <span data-ttu-id="21945-145">Például hello aktív kiszolgáló toodecommission megtervezni használhatja az Azure AD Sync, és új átmeneti kiszolgálón hello használhatja az Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="21945-145">For example, hello active server that you plan toodecommission can use Azure AD Sync, and hello new staging server can use Azure AD Connect.</span></span> <span data-ttu-id="21945-146">Ha mozgó áttelepítési toodevelop egy új konfigurációt, az a jó ötlet toohave hello ugyanezen verziókban a hello két kiszolgálóval.</span><span class="sxs-lookup"><span data-stu-id="21945-146">If you use swing migration toodevelop a new configuration, it's a good idea toohave hello same versions on hello two servers.</span></span>  
![Átmeneti kiszolgáló](./media/active-directory-aadconnect-upgrade-previous-version/stagingserver1.png)

> [!NOTE]
> <span data-ttu-id="21945-148">Egyes ügyfelek előnyben részesítik a három vagy négy toohave kiszolgálók ehhez a forgatókönyvhöz.</span><span class="sxs-lookup"><span data-stu-id="21945-148">Some customers prefer toohave three or four servers for this scenario.</span></span> <span data-ttu-id="21945-149">Kiszolgáló átmeneti hello frissítésekor a biztonsági kiszolgáló nem rendelkezik [vész-helyreállítási](active-directory-aadconnectsync-operations.md#disaster-recovery).</span><span class="sxs-lookup"><span data-stu-id="21945-149">When hello staging server is upgraded, you don't have a backup server for [disaster recovery](active-directory-aadconnectsync-operations.md#disaster-recovery).</span></span> <span data-ttu-id="21945-150">Három vagy négy kiszolgálókkal előkészítheti a hello új verziójára, amely biztosítja, hogy nincs-e mindig egy átmeneti kiszolgálón, amely készen áll a tootake keresztül elsődleges vagy készenléti állapotban lévő kiszolgálók egy csoportja.</span><span class="sxs-lookup"><span data-stu-id="21945-150">With three or four servers, you can prepare one set of primary/standby servers with hello new version, which ensures that there is always a staging server that's ready tootake over.</span></span>

<span data-ttu-id="21945-151">Ezeket a lépéseket az Azure AD Sync vagy az Azure AD-összekötő FIM kiegészítve megoldás toomove is együttműködik.</span><span class="sxs-lookup"><span data-stu-id="21945-151">These steps also work toomove from Azure AD Sync or a solution with FIM + Azure AD Connector.</span></span> <span data-ttu-id="21945-152">Ezeket a lépéseket a Dirsync nem működnek, de ugyanazon mozgó áttelepítési metódust használ (más néven párhuzamos üzembe helyezés) lépések DirSync hello [frissítés Azure Active Directory-szinkronizálás (DirSync)](active-directory-aadconnect-dirsync-upgrade-get-started.md).</span><span class="sxs-lookup"><span data-stu-id="21945-152">These steps don't work for DirSync, but hello same swing migration method (also called parallel deployment) with steps for DirSync is in [Upgrade Azure Active Directory sync (DirSync)](active-directory-aadconnect-dirsync-upgrade-get-started.md).</span></span>

### <a name="use-a-swing-migration-tooupgrade"></a><span data-ttu-id="21945-153">Egy mozgó áttelepítési tooupgrade használata</span><span class="sxs-lookup"><span data-stu-id="21945-153">Use a swing migration tooupgrade</span></span>
1. <span data-ttu-id="21945-154">Ha a kiszolgálók és a terv tooonly ellenőrizze a konfiguráció módosítása az Azure AD Connect használ, ellenőrizze, hogy az aktív kiszolgáló és az átmeneti kiszolgálón egyaránt használatával hello ugyanazt a verziót.</span><span class="sxs-lookup"><span data-stu-id="21945-154">If you use Azure AD Connect on both servers and plan tooonly make a configuration change, make sure that your active server and staging server are both using hello same version.</span></span> <span data-ttu-id="21945-155">Amelyek révén könnyebben toocompare különbségek később.</span><span class="sxs-lookup"><span data-stu-id="21945-155">That makes it easier toocompare differences later.</span></span> <span data-ttu-id="21945-156">Ha az Azure AD-Szinkronizálóról frissít, ezeket a kiszolgálókat különböző verziói működnek.</span><span class="sxs-lookup"><span data-stu-id="21945-156">If you're upgrading from Azure AD Sync, then these servers have different versions.</span></span> <span data-ttu-id="21945-157">Ha frissít, az Azure AD Connect egy korábbi verziójából származó, a rendszer egy jó ötlet toostart hello két kiszolgálókkal, amelyek segítségével hello ugyanazt a verziót, de ez nem szükséges.</span><span class="sxs-lookup"><span data-stu-id="21945-157">If you're upgrading from an older version of Azure AD Connect, it's a good idea toostart with hello two servers that are using hello same version, but it's not required.</span></span>
2. <span data-ttu-id="21945-158">Ha egy egyéni konfigurációt végrehajtott, és az átmeneti kiszolgálón nincs, lépésekkel hello alatt [egyéni konfiguráció áthelyezése hello aktív kiszolgáló toohello kiszolgáló átmeneti](#move-custom-configuration-from-active-to-staging-server).</span><span class="sxs-lookup"><span data-stu-id="21945-158">If you've made a custom configuration and your staging server doesn't have it, follow hello steps under [Move a custom configuration from hello active server toohello staging server](#move-custom-configuration-from-active-to-staging-server).</span></span>
3. <span data-ttu-id="21945-159">Ha frissít, az Azure AD Connect egy korábbi kiadásáról, frissítse az hello átmeneti server toohello legújabb verzióra.</span><span class="sxs-lookup"><span data-stu-id="21945-159">If you're upgrading from an earlier release of Azure AD Connect, upgrade hello staging server toohello latest version.</span></span> <span data-ttu-id="21945-160">Ha az Azure AD-Szinkronizálóról telepít át, majd az Azure AD Connect telepítése az átmeneti kiszolgálón.</span><span class="sxs-lookup"><span data-stu-id="21945-160">If you're moving from Azure AD Sync, then install Azure AD Connect on your staging server.</span></span>
4. <span data-ttu-id="21945-161">Lehetővé teszik a hello szinkronizálási motor futtatása teljes importálást és teljes szinkronizálást az átmeneti kiszolgálón.</span><span class="sxs-lookup"><span data-stu-id="21945-161">Let hello sync engine run full import and full synchronization on your staging server.</span></span>
5. <span data-ttu-id="21945-162">Győződjön meg az adott hello új konfiguráció nem következtében a nem várt módosítások a "Hitelesítés" hello lépések segítségével [ellenőrizze hello konfigurációs kiszolgáló](active-directory-aadconnectsync-operations.md#verify-the-configuration-of-a-server).</span><span class="sxs-lookup"><span data-stu-id="21945-162">Verify that hello new configuration didn't cause any unexpected changes by using hello steps under "Verify" in [Verify hello configuration of a server](active-directory-aadconnectsync-operations.md#verify-the-configuration-of-a-server).</span></span> <span data-ttu-id="21945-163">Ha valami nem a várt, helyes-e, futtassa a hello importálás és szinkronizálás, és ellenőrizze a hello adatokat, amíg azt megfelelőnek tűnik, hello lépéseket követve.</span><span class="sxs-lookup"><span data-stu-id="21945-163">If something isn't as expected, correct it, run hello import and sync, and verify hello data until it looks good, by following hello steps.</span></span>
6. <span data-ttu-id="21945-164">Kiszolgáló toobe hello aktív kiszolgáló átmeneti hello váltani.</span><span class="sxs-lookup"><span data-stu-id="21945-164">Switch hello staging server toobe hello active server.</span></span> <span data-ttu-id="21945-165">Ez az utolsó lépés hello "Kapcsoló aktív kiszolgáló" a [ellenőrizze hello konfigurációs kiszolgáló](active-directory-aadconnectsync-operations.md#verify-the-configuration-of-a-server).</span><span class="sxs-lookup"><span data-stu-id="21945-165">This is hello final step "Switch active server" in [Verify hello configuration of a server](active-directory-aadconnectsync-operations.md#verify-the-configuration-of-a-server).</span></span>
7. <span data-ttu-id="21945-166">Ha a frissítés során az Azure AD Connect frissítése van a most átmeneti mód toohello legújabb kiadásának hello kiszolgáló.</span><span class="sxs-lookup"><span data-stu-id="21945-166">If you're upgrading Azure AD Connect, upgrade hello server that's now in staging mode toohello latest release.</span></span> <span data-ttu-id="21945-167">Hajtsa végre az azonos előtt tooget hello adatok és a frissített konfigurációs lépések hello.</span><span class="sxs-lookup"><span data-stu-id="21945-167">Follow hello same steps as before tooget hello data and configuration upgraded.</span></span> <span data-ttu-id="21945-168">Ha frissített az Azure AD-Szinkronizálóról, ezután kapcsolja ki a és a régi kiszolgáló leszerelése.</span><span class="sxs-lookup"><span data-stu-id="21945-168">If you upgraded from Azure AD Sync, you can now turn off and decommission your old server.</span></span>

### <a name="move-a-custom-configuration-from-hello-active-server-toohello-staging-server"></a><span data-ttu-id="21945-169">Egyéni konfiguráció áthelyezése hello aktív toohello átmeneti kiszolgálót.</span><span class="sxs-lookup"><span data-stu-id="21945-169">Move a custom configuration from hello active server toohello staging server</span></span>
<span data-ttu-id="21945-170">Ha végrehajtott konfigurációs módosításokat toohello aktív kiszolgáló, szükség toomake meg arról, hogy azonos hello változtatások kiszolgáló átmeneti alkalmazott toohello.</span><span class="sxs-lookup"><span data-stu-id="21945-170">If you've made configuration changes toohello active server, you need toomake sure that hello same changes are applied toohello staging server.</span></span> <span data-ttu-id="21945-171">Ennek toohelp helyezi át, használhatja a hello [az Azure AD Connect konfigurációs dokumentáló](https://github.com/Microsoft/AADConnectConfigDocumenter).</span><span class="sxs-lookup"><span data-stu-id="21945-171">toohelp with this move, you can use hello [Azure AD Connect configuration documenter](https://github.com/Microsoft/AADConnectConfigDocumenter).</span></span>

<span data-ttu-id="21945-172">Áthelyezheti hello egyéni szinkronizálási szabályokat, hogy a PowerShell használatával létrehozott.</span><span class="sxs-lookup"><span data-stu-id="21945-172">You can move hello custom sync rules that you've created by using PowerShell.</span></span> <span data-ttu-id="21945-173">Telepítenie kell az egyéb módosítások hello ugyanúgy egyaránt rendszerek, és nem telepíthető át hello módosításokat.</span><span class="sxs-lookup"><span data-stu-id="21945-173">You must apply other changes hello same way on both systems, and you can't migrate hello changes.</span></span> <span data-ttu-id="21945-174">Hello [konfigurációs dokumentáló](https://github.com/Microsoft/AADConnectConfigDocumenter) hello két rendszerek toomake meg arról, hogy azok egyezését összehasonlításával nyújt segítséget.</span><span class="sxs-lookup"><span data-stu-id="21945-174">hello [configuration documenter](https://github.com/Microsoft/AADConnectConfigDocumenter) can help you comparing hello two systems toomake sure they are identical.</span></span> <span data-ttu-id="21945-175">Ebben a szakaszban található hello lépéseket automatizálását is segíthetnek hello eszköz.</span><span class="sxs-lookup"><span data-stu-id="21945-175">hello tool can also help in automating hello steps found in this section.</span></span>

<span data-ttu-id="21945-176">Tooconfigure hello következőkre lesz szüksége dolgot hello azonos módon mindkét kiszolgálón:</span><span class="sxs-lookup"><span data-stu-id="21945-176">You need tooconfigure hello following things hello same way on both servers:</span></span>

* <span data-ttu-id="21945-177">Kapcsolat toohello azonos erdőben</span><span class="sxs-lookup"><span data-stu-id="21945-177">Connection toohello same forests</span></span>
* <span data-ttu-id="21945-178">Bármely tartomány és szervezeti egységek szűrése</span><span class="sxs-lookup"><span data-stu-id="21945-178">Any domain and OU filtering</span></span>
* <span data-ttu-id="21945-179">hello azonos választható funkciók, például a jelszó-szinkronizálás és jelszóvisszaíró</span><span class="sxs-lookup"><span data-stu-id="21945-179">hello same optional features, such as password sync and password writeback</span></span>

<span data-ttu-id="21945-180">**Helyezze át az egyéni szinkronizálási szabályok**</span><span class="sxs-lookup"><span data-stu-id="21945-180">**Move custom synchronization rules**</span></span>  
<span data-ttu-id="21945-181">toomove egyéni szinkronizálási szabályait, hello a következő:</span><span class="sxs-lookup"><span data-stu-id="21945-181">toomove custom synchronization rules, do hello following:</span></span>

1. <span data-ttu-id="21945-182">Nyissa meg **szinkronizálási szabályok szerkesztő** az aktív kiszolgálón.</span><span class="sxs-lookup"><span data-stu-id="21945-182">Open **Synchronization Rules Editor** on your active server.</span></span>
2. <span data-ttu-id="21945-183">Jelöljön ki egy egyéni szabályt.</span><span class="sxs-lookup"><span data-stu-id="21945-183">Select a custom rule.</span></span> <span data-ttu-id="21945-184">Kattintson a **exportálása**.</span><span class="sxs-lookup"><span data-stu-id="21945-184">Click **Export**.</span></span> <span data-ttu-id="21945-185">Ekkor megjelenik a Jegyzettömb ablak.</span><span class="sxs-lookup"><span data-stu-id="21945-185">This brings up a Notepad window.</span></span> <span data-ttu-id="21945-186">Hello ideiglenes fájl mentése PS1 kiterjesztéssel.</span><span class="sxs-lookup"><span data-stu-id="21945-186">Save hello temporary file with a PS1 extension.</span></span> <span data-ttu-id="21945-187">Így egy PowerShell-parancsfájlt.</span><span class="sxs-lookup"><span data-stu-id="21945-187">This makes it a PowerShell script.</span></span> <span data-ttu-id="21945-188">Hello PS1 fájl toohello kiszolgáló átmeneti másolja.</span><span class="sxs-lookup"><span data-stu-id="21945-188">Copy hello PS1 file toohello staging server.</span></span>  
   <span data-ttu-id="21945-189">![Szinkronizálási szabály exportálása](./media/active-directory-aadconnect-upgrade-previous-version/exportrule.png)</span><span class="sxs-lookup"><span data-stu-id="21945-189">![Sync rule export](./media/active-directory-aadconnect-upgrade-previous-version/exportrule.png)</span></span>
3. <span data-ttu-id="21945-190">hello összekötő GUID kiszolgáló átmeneti hello eltérő, és akkor kell megváltoztatnia.</span><span class="sxs-lookup"><span data-stu-id="21945-190">hello Connector GUID is different on hello staging server, and you must change it.</span></span> <span data-ttu-id="21945-191">tooget hello GUID, indítsa el **szinkronizálási szabályok szerkesztő**, válasszon egyet a hello out-of-box szabályok azonos rendszer csatlakozott, majd kattintson az adott jelentik hello **exportálása**.</span><span class="sxs-lookup"><span data-stu-id="21945-191">tooget hello GUID, start **Synchronization Rules Editor**, select one of hello out-of-box rules that represent hello same connected system, and click **Export**.</span></span> <span data-ttu-id="21945-192">Cserélje le a kiszolgáló átmeneti hello GUID hello hello GUID az a PS1 fájlnevet.</span><span class="sxs-lookup"><span data-stu-id="21945-192">Replace hello GUID in your PS1 file with hello GUID from hello staging server.</span></span>
4. <span data-ttu-id="21945-193">A PowerShell-parancssorból futtassa a hello PS1 fájlt.</span><span class="sxs-lookup"><span data-stu-id="21945-193">In a PowerShell prompt, run hello PS1 file.</span></span> <span data-ttu-id="21945-194">Ez server átmeneti hello hello egyéni szinkronizálási szabályt hoz létre.</span><span class="sxs-lookup"><span data-stu-id="21945-194">This creates hello custom synchronization rule on hello staging server.</span></span>
5. <span data-ttu-id="21945-195">Ismételje meg ezt az egyéni szabályok.</span><span class="sxs-lookup"><span data-stu-id="21945-195">Repeat this for all your custom rules.</span></span>

## <a name="how-toodefer-full-synchronization-after-upgrade"></a><span data-ttu-id="21945-196">Hogyan toodefer teljes szinkronizálás a frissítés után</span><span class="sxs-lookup"><span data-stu-id="21945-196">How toodefer full synchronization after upgrade</span></span>
<span data-ttu-id="21945-197">Helybeni verziófrissítés során előfordulhat bevezetett változások meghatározott szinkronizálási tevékenységeket (beleértve a teljes importálás és a teljes szinkronizálás lépést) toobe végre igénylő.</span><span class="sxs-lookup"><span data-stu-id="21945-197">During in-place upgrade, there may be changes introduced that require specific synchronization activities (including Full Import step and Full Synchronization step) toobe executed.</span></span> <span data-ttu-id="21945-198">Például összekötő séma módosításához **teljes importálás** lépés és out-of-box szinkronizálási szabály módosításához **teljes szinkronizálás** lépést végre a fertőzött összekötők toobe.</span><span class="sxs-lookup"><span data-stu-id="21945-198">For example, connector schema changes require **full import** step and out-of-box synchronization rule changes require **full synchronization** step toobe executed on affected connectors.</span></span> <span data-ttu-id="21945-199">A frissítés során az Azure AD Connect meghatározza, hogy milyen szinkronizálási tevékenységek szükségesek, és rögzíti őket *felülbírálások*.</span><span class="sxs-lookup"><span data-stu-id="21945-199">During upgrade, Azure AD Connect determines what synchronization activities are required and records them as *overrides*.</span></span> <span data-ttu-id="21945-200">A következő szinkronizálási ciklusban hello hello szinkronizálási Feladatütemező szerzi be ezeket a felülbírálásokat, és végrehajtja azokat.</span><span class="sxs-lookup"><span data-stu-id="21945-200">In hello following synchronization cycle, hello synchronization scheduler picks up these overrides and executes them.</span></span> <span data-ttu-id="21945-201">Felülbírálás sikeresen végre, ha eltávolítják azt.</span><span class="sxs-lookup"><span data-stu-id="21945-201">Once an override is successfully executed, it is removed.</span></span>

<span data-ttu-id="21945-202">Előfordulhat, hogy esetekben nem célszerű a felülbírálások tootake hely közvetlenül a frissítés után.</span><span class="sxs-lookup"><span data-stu-id="21945-202">There may be situations where you do not want these overrides tootake place immediately after upgrade.</span></span> <span data-ttu-id="21945-203">Például számos szinkronizált objektummal rendelkezik, és azt szeretné, a szinkronizálás lépéseket toooccur munkaidő után.</span><span class="sxs-lookup"><span data-stu-id="21945-203">For example, you have numerous synchronized objects and you would like these synchronization steps toooccur after business hours.</span></span> <span data-ttu-id="21945-204">Ezek a felülbírálások tooremove:</span><span class="sxs-lookup"><span data-stu-id="21945-204">tooremove these overrides:</span></span>

1. <span data-ttu-id="21945-205">A frissítés során **, törölje a jelet** beállítás hello **hello szinkronizálási folyamat indítása, ha a konfiguráció befejezése**.</span><span class="sxs-lookup"><span data-stu-id="21945-205">During upgrade, **uncheck** hello option **Start hello synchronization process when configuration completes**.</span></span> <span data-ttu-id="21945-206">Ezzel letiltja a hello szinkronizálási Feladatütemező, és megakadályozza, hogy a szinkronizálási ciklust megakadályozhat automatikusan hello felülbírálások eltávolítása előtt.</span><span class="sxs-lookup"><span data-stu-id="21945-206">This disables hello synchronization scheduler and prevents synchronization cycle from taking place automatically before hello overrides are removed.</span></span>

   ![DisableFullSyncAfterUpgrade](./media/active-directory-aadconnect-upgrade-previous-version/disablefullsync01.png)

2. <span data-ttu-id="21945-208">Frissítés befejezése után futtassa a következő parancsmag toofind, mely a felülbírálások hozzá vannak adva hello:`Get-ADSyncSchedulerConnectorOverride | fl`</span><span class="sxs-lookup"><span data-stu-id="21945-208">After upgrade completes, run hello following cmdlet toofind out what overrides have been added: `Get-ADSyncSchedulerConnectorOverride | fl`</span></span>

   >[!NOTE]
   > <span data-ttu-id="21945-209">hello felülbírálások connector-specifikus.</span><span class="sxs-lookup"><span data-stu-id="21945-209">hello overrides are connector-specific.</span></span> <span data-ttu-id="21945-210">Hello a következő példa, a teljes importálás és a teljes szinkronizálás lépést hozzáadott tooboth hello a helyszíni AD-összekötő és az Azure AD-összekötőt.</span><span class="sxs-lookup"><span data-stu-id="21945-210">In hello following example, Full Import step and Full Synchronization step have been added tooboth hello on-premises AD Connector and Azure AD Connector.</span></span>

   ![DisableFullSyncAfterUpgrade](./media/active-directory-aadconnect-upgrade-previous-version/disablefullsync02.png)

3. <span data-ttu-id="21945-212">Jegyezze fel, amelyek hozzá vannak adva hello meglévő felülbírálások.</span><span class="sxs-lookup"><span data-stu-id="21945-212">Note down hello existing overrides that have been added.</span></span>
   
4. <span data-ttu-id="21945-213">tooremove hello felülbírálja a teljes importálás és a teljes szinkronizálás egy tetszőleges összekötőn, futtassa a következő parancsmag hello:`Set-ADSyncSchedulerConnectorOverride -ConnectorIdentifier <Guid-of-ConnectorIdentifier> -FullImportRequired $false -FullSyncRequired $false`</span><span class="sxs-lookup"><span data-stu-id="21945-213">tooremove hello overrides for both full import and full synchronization on an arbitrary connector, run hello following cmdlet: `Set-ADSyncSchedulerConnectorOverride -ConnectorIdentifier <Guid-of-ConnectorIdentifier> -FullImportRequired $false -FullSyncRequired $false`</span></span>

   <span data-ttu-id="21945-214">tooremove hello felülbírálások összekötők, a következő PowerShell-parancsfájl hello hajtható végre:</span><span class="sxs-lookup"><span data-stu-id="21945-214">tooremove hello overrides on all connectors, execute hello following PowerShell script:</span></span>

   ```
   foreach ($connectorOverride in Get-ADSyncSchedulerConnectorOverride)
   {
       Set-ADSyncSchedulerConnectorOverride -ConnectorIdentifier $connectorOverride.ConnectorIdentifier.Guid -FullSyncRequired $false -FullImportRequired $false
   }
   ```

5. <span data-ttu-id="21945-215">tooresume hello Feladatütemező, futtassa a következő parancsmag hello:`Set-ADSyncScheduler -SyncCycleEnabled $true`</span><span class="sxs-lookup"><span data-stu-id="21945-215">tooresume hello scheduler, run hello following cmdlet: `Set-ADSyncScheduler -SyncCycleEnabled $true`</span></span>

   >[!IMPORTANT]
   > <span data-ttu-id="21945-216">Ne felejtse el tooexecute szükséges hello szinkronizálásának lépései legkorábbi tetszés.</span><span class="sxs-lookup"><span data-stu-id="21945-216">Remember tooexecute hello required synchronization steps at your earliest convenience.</span></span> <span data-ttu-id="21945-217">Manuálisan hajtható végre ezeket a lépéseket hello Synchronization Service Manager használatával, vagy hello felülbírálások vissza a hello Set-ADSyncSchedulerConnectorOverride parancsmag használatával adja hozzá.</span><span class="sxs-lookup"><span data-stu-id="21945-217">You can either manually execute these steps using hello Synchronization Service Manager or add hello overrides back using hello Set-ADSyncSchedulerConnectorOverride cmdlet.</span></span>

<span data-ttu-id="21945-218">tooadd hello felülbírálja a teljes importálás és a teljes szinkronizálás egy tetszőleges összekötőn, futtassa a következő parancsmag hello:`Set-ADSyncSchedulerConnectorOverride -ConnectorIdentifier <Guid> -FullImportRequired $true -FullSyncRequired $true`</span><span class="sxs-lookup"><span data-stu-id="21945-218">tooadd hello overrides for both full import and full synchronization on an arbitrary connector, run hello following cmdlet:  `Set-ADSyncSchedulerConnectorOverride -ConnectorIdentifier <Guid> -FullImportRequired $true -FullSyncRequired $true`</span></span>

## <a name="next-steps"></a><span data-ttu-id="21945-219">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="21945-219">Next steps</span></span>
<span data-ttu-id="21945-220">További információ [a helyszíni identitások integrálása az Azure Active Directoryval](active-directory-aadconnect.md).</span><span class="sxs-lookup"><span data-stu-id="21945-220">Learn more about [integrating your on-premises identities with Azure Active Directory](active-directory-aadconnect.md).</span></span>
