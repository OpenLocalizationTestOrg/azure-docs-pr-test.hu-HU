---
title: "az Azure AD-alkalmazásproxy aaaSecurity szempontjai |} Microsoft Docs"
description: "Az Azure AD-alkalmazásproxy használatának biztonsági szempontjait ismerteti"
services: active-directory
documentationcenter: 
author: kgremban
manager: femila
ms.assetid: 
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/03/2017
ms.author: kgremban
ms.reviewer: harshja
ms.custom: it-pro
ms.openlocfilehash: ebd14b9d1fc8f4629c5916e5a910595727d935d5
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/06/2017
---
# <a name="security-considerations-for-accessing-apps-remotely-with-azure-ad-application-proxy"></a><span data-ttu-id="c59ae-103">Biztonsági szempontok az alkalmazások távolról a Azure AD alkalmazásproxy elérése</span><span class="sxs-lookup"><span data-stu-id="c59ae-103">Security considerations for accessing apps remotely with Azure AD Application Proxy</span></span>

<span data-ttu-id="c59ae-104">Ez a cikk azt ismerteti, hogyan nyújt az Azure Active Directory Alkalmazásproxyjával a közzétételéhez, és távolról fér hozzá az alkalmazások biztonságos szolgáltatás.</span><span class="sxs-lookup"><span data-stu-id="c59ae-104">This article explains how Azure Active Directory Application Proxy provides a secure service for publishing and accessing your applications remotely.</span></span>

<span data-ttu-id="c59ae-105">a következő ábrán látható az Azure AD hello lehetővé teszi, hogy a biztonságos távoli hozzáférés tooyour a helyszíni alkalmazások.</span><span class="sxs-lookup"><span data-stu-id="c59ae-105">hello following diagram shows how Azure AD enables secure remote access tooyour on-premises applications.</span></span>

 ![Azure AD alkalmazásproxy segítségével biztonságos távoli hozzáférés ábrája](./media/application-proxy-security-considerations/secure-remote-access.png)

## <a name="security-benefits"></a><span data-ttu-id="c59ae-107">Biztonsági szempontból előnyökkel járhat</span><span class="sxs-lookup"><span data-stu-id="c59ae-107">Security benefits</span></span>

<span data-ttu-id="c59ae-108">Az Azure AD-alkalmazásproxy kínál a következő biztonsági szempontból előnyökkel járhat hello:</span><span class="sxs-lookup"><span data-stu-id="c59ae-108">Azure AD Application Proxy offers hello following security benefits:</span></span>

### <a name="authenticated-access"></a><span data-ttu-id="c59ae-109">Hitelesített hozzáférés</span><span class="sxs-lookup"><span data-stu-id="c59ae-109">Authenticated access</span></span> 

<span data-ttu-id="c59ae-110">Ha úgy dönt, hogy toouse Azure Active Directory előhitelesítést, majd csak hitelesített kapcsolatokat hozzáférni a hálózathoz.</span><span class="sxs-lookup"><span data-stu-id="c59ae-110">If you choose toouse Azure Active Directory preauthentication, then only authenticated connections can access your network.</span></span>

<span data-ttu-id="c59ae-111">Az Azure AD-alkalmazásproxy hello Azure AD biztonsági jogkivonat-szolgáltatás (STS) összes hitelesítési támaszkodik.</span><span class="sxs-lookup"><span data-stu-id="c59ae-111">Azure AD Application Proxy relies on hello Azure AD security token service (STS) for all authentication.</span></span>  <span data-ttu-id="c59ae-112">Előhitelesítés használatakor jellegéből adódóan, blokkolja jelentős számú névtelen támadások, mivel csak hitelesített identitást hello háttér-alkalmazást érheti el.</span><span class="sxs-lookup"><span data-stu-id="c59ae-112">Preauthentication, by its very nature, blocks a significant number of anonymous attacks, because only authenticated identities can access hello back-end application.</span></span>

<span data-ttu-id="c59ae-113">Ha csatlakoztatott legyen a előhitelesítési módszer, ez a szolgáltatás nem jelenik meg.</span><span class="sxs-lookup"><span data-stu-id="c59ae-113">If you choose Passthrough as your preauthentication method, you don't get this benefit.</span></span> 

### <a name="conditional-access"></a><span data-ttu-id="c59ae-114">Feltételes hozzáférés</span><span class="sxs-lookup"><span data-stu-id="c59ae-114">Conditional access</span></span>

<span data-ttu-id="c59ae-115">Alkalmazása előtt tooyour hálózati létesített kapcsolatok gazdagabb házirend-ellenőrzést.</span><span class="sxs-lookup"><span data-stu-id="c59ae-115">Apply richer policy controls before connections tooyour network are established.</span></span>

<span data-ttu-id="c59ae-116">A [feltételes hozzáférés](active-directory-conditional-access-azuread-connected-apps.md), definiálhat milyen forgalom korlátozásai engedélyezett tooaccess a háttér-alkalmazások.</span><span class="sxs-lookup"><span data-stu-id="c59ae-116">With [conditional access](active-directory-conditional-access-azuread-connected-apps.md), you can define restrictions on what traffic is allowed tooaccess your back-end applications.</span></span> <span data-ttu-id="c59ae-117">Házirendeket, amelyek korlátozzák a bejelentkezéseket helye, hitelesítési és kockázatú profil alapján is létrehozhat.</span><span class="sxs-lookup"><span data-stu-id="c59ae-117">You can create policies that restrict sign-ins based on location, strength of authentication, and user risk profile.</span></span>

<span data-ttu-id="c59ae-118">Használhatja a feltételes hozzáférés tooconfigure többtényezős hitelesítési házirendek, biztonsági tooyour felhasználói hitelesítések réteget hozzáadása.</span><span class="sxs-lookup"><span data-stu-id="c59ae-118">You can also use conditional access tooconfigure Multi-Factor Authentication policies, adding another layer of security tooyour user authentications.</span></span> 

### <a name="traffic-termination"></a><span data-ttu-id="c59ae-119">Forgalom megszüntetése</span><span class="sxs-lookup"><span data-stu-id="c59ae-119">Traffic termination</span></span>

<span data-ttu-id="c59ae-120">Az összes forgalom hello felhőben megszakad.</span><span class="sxs-lookup"><span data-stu-id="c59ae-120">All traffic is terminated in hello cloud.</span></span>

<span data-ttu-id="c59ae-121">Mivel az Azure AD-alkalmazásproxy egy fordított proxy, minden forgalom tooback-a befejezési alkalmazások: hello szolgáltatás megszakad.</span><span class="sxs-lookup"><span data-stu-id="c59ae-121">Because Azure AD Application Proxy is a reverse-proxy, all traffic tooback-end applications is terminated at hello service.</span></span> <span data-ttu-id="c59ae-122">hello munkamenet is beolvasása újrakezdte csak a hello háttér-kiszolgálófiók, ami azt jelenti, hogy a háttér-kiszolgálók esetén nem kitett toodirect HTTP-forgalmat.</span><span class="sxs-lookup"><span data-stu-id="c59ae-122">hello session can get reestablished only with hello back-end server, which means that your back-end servers are not exposed toodirect HTTP traffic.</span></span> <span data-ttu-id="c59ae-123">Ez a konfiguráció azt jelenti, hogy jobban védve célzott támadásoktól.</span><span class="sxs-lookup"><span data-stu-id="c59ae-123">This configuration means that you are better protected from targeted attacks.</span></span>

### <a name="all-access-is-outbound"></a><span data-ttu-id="c59ae-124">Minden hozzáférés meg kimenő</span><span class="sxs-lookup"><span data-stu-id="c59ae-124">All access is outbound</span></span> 

<span data-ttu-id="c59ae-125">Nincs szükség a tooopen bejövő kapcsolatok toohello vállalati hálózathoz.</span><span class="sxs-lookup"><span data-stu-id="c59ae-125">You don't need tooopen inbound connections toohello corporate network.</span></span>

<span data-ttu-id="c59ae-126">Application Proxy összekötők csak a kimenő kapcsolatok toohello az Azure AD alkalmazásproxy-szolgáltatás, ami azt jelenti, hogy nincs szükség a bejövő kapcsolatok tooopen tűzfalportok használja.</span><span class="sxs-lookup"><span data-stu-id="c59ae-126">Application Proxy connectors only use outbound connections toohello Azure AD Application Proxy service, which means that there is no need tooopen firewall ports for incoming connections.</span></span> <span data-ttu-id="c59ae-127">Hagyományos proxyk szükséges a szegélyhálózaton (más néven *DMZ*, *demilitarizált zóna*, vagy *végezheti*), és a hozzáférés toounauthenticated kapcsolatok hello hálózati peremhálózaton.</span><span class="sxs-lookup"><span data-stu-id="c59ae-127">Traditional proxies required a perimeter network (also known as *DMZ*, *demilitarized zone*, or *screened subnet*) and allowed access toounauthenticated connections at hello network edge.</span></span> <span data-ttu-id="c59ae-128">Ebben a forgatókönyvben webes alkalmazást érintő számos további beruházásra termékek tooanalyze forgalom tűzfal- és kínálnak hozzáadása védelmi toohello környezet szükséges.</span><span class="sxs-lookup"><span data-stu-id="c59ae-128">This scenario required many additional investments in web application firewall products tooanalyze traffic and offer addition protections toohello environment.</span></span> <span data-ttu-id="c59ae-129">A Proxy nincs szükség a szegélyhálózaton, mert az összes kapcsolat kimenő, és egy biztonságos csatornán kerül sor.</span><span class="sxs-lookup"><span data-stu-id="c59ae-129">With Application Proxy, you don't need a perimeter network because all connections are outbound and take place over a secure channel.</span></span>

<span data-ttu-id="c59ae-130">Összekötők kapcsolatos további információkért lásd: [megértéséhez Azure AD-alkalmazásproxy összekötők](application-proxy-understand-connectors.md).</span><span class="sxs-lookup"><span data-stu-id="c59ae-130">For more information about connectors, see [Understand Azure AD Application Proxy connectors](application-proxy-understand-connectors.md).</span></span>

### <a name="cloud-scale-analytics-and-machine-learning"></a><span data-ttu-id="c59ae-131">A felhőméretű elemzés és a gépi tanulás</span><span class="sxs-lookup"><span data-stu-id="c59ae-131">Cloud-scale analytics and machine learning</span></span> 

<span data-ttu-id="c59ae-132">A legmodernebb védelmet beolvasása.</span><span class="sxs-lookup"><span data-stu-id="c59ae-132">Get cutting-edge security protection.</span></span>

<span data-ttu-id="c59ae-133">Mivel az Azure Active Directory részét, kihasználhatják a alkalmazásproxy [Azure AD Identity Protection](active-directory-identityprotection.md)a machine learning-alapú eszközintelligencia és a Microsoft Security Response Center hello és milyen adatokat.</span><span class="sxs-lookup"><span data-stu-id="c59ae-133">Because it's part of Azure Active Directory, Application Proxy can leverage [Azure AD Identity Protection](active-directory-identityprotection.md), with machine learning-driven intelligence and data from hello Microsoft Security Response Center and Digital Crimes Unit.</span></span> <span data-ttu-id="c59ae-134">Együtt azt megelőző a sérült biztonságú fiókjait azonosítják és magas kockázatú bejelentkezések valós idejű védelmet nyújtsanak. Azt is figyelembe számos tényező befolyásolja, például hozzáférés névtelenítését hálózatokon keresztül fertőzött eszközökről és a rendellenes és szokatlan helyekről.</span><span class="sxs-lookup"><span data-stu-id="c59ae-134">Together we proactively identify compromised accounts and offer real-time protection from high-risk sign-ins. We take into account numerous factors, such as access from infected devices, through anonymizing networks, and from atypical and unlikely locations.</span></span>

<span data-ttu-id="c59ae-135">Ezek a jelentések és események számos már elérhető a biztonsági információk és az esemény (SIEM) rendszerek integrációját egy API-n keresztül.</span><span class="sxs-lookup"><span data-stu-id="c59ae-135">Many of these reports and events are already available through an API for integration with your security information and event management (SIEM) systems.</span></span>

### <a name="remote-access-as-a-service"></a><span data-ttu-id="c59ae-136">A távelérés szolgáltatás</span><span class="sxs-lookup"><span data-stu-id="c59ae-136">Remote access as a service</span></span>

<span data-ttu-id="c59ae-137">Nincs tooworry kapcsolatos karbantartásáért, valamint a helyszíni kiszolgálók javítását.</span><span class="sxs-lookup"><span data-stu-id="c59ae-137">You don’t have tooworry about maintaining and patching on-premises servers.</span></span>

<span data-ttu-id="c59ae-138">Továbbra is a nem javított szoftver támadások számos fiókok.</span><span class="sxs-lookup"><span data-stu-id="c59ae-138">Unpatched software still accounts for a large number of attacks.</span></span> <span data-ttu-id="c59ae-139">Az Azure AD-alkalmazásproxy egy Internet-skálázási szolgáltatás, amely a Microsoft tulajdonában van,, így mindig hello legújabb biztonsági javítások és frissítéseket.</span><span class="sxs-lookup"><span data-stu-id="c59ae-139">Azure AD Application Proxy is an Internet-scale service that Microsoft owns, so you always get hello latest security patches and upgrades.</span></span>

<span data-ttu-id="c59ae-140">tooimprove hello biztonsági Azure AD alkalmazásproxy által közzétett alkalmazás, az azt blokkolása webes webbejáró robots indexelő és az alkalmazások Archiválás.</span><span class="sxs-lookup"><span data-stu-id="c59ae-140">tooimprove hello security of applications published by Azure AD Application Proxy, we block web crawler robots from indexing and archiving your applications.</span></span> <span data-ttu-id="c59ae-141">Minden alkalommal, amikor egy webes webbejáró robot próbálja beolvasni a robot beállításait a közzétett alkalmazások Application Proxy válaszol a robots.txt fájl tartalmazza a `User-agent: * Disallow: /`.</span><span class="sxs-lookup"><span data-stu-id="c59ae-141">Each time a web crawler robot tries to retrieve the robot's settings for a published app, Application Proxy replies with a robots.txt file that includes `User-agent: * Disallow: /`.</span></span>

## <a name="under-hello-hood"></a><span data-ttu-id="c59ae-142">Hello technikai részletek alapján</span><span class="sxs-lookup"><span data-stu-id="c59ae-142">Under hello hood</span></span>

<span data-ttu-id="c59ae-143">Az Azure AD-alkalmazásproxy két részből áll:</span><span class="sxs-lookup"><span data-stu-id="c59ae-143">Azure AD Application Proxy consists of two parts:</span></span>

* <span data-ttu-id="c59ae-144">felhőalapú szolgáltatás hello: Ez a szolgáltatás fut az Azure-ban, és ahol hello külső ügyfélfelhasználó kapcsolódnának.</span><span class="sxs-lookup"><span data-stu-id="c59ae-144">hello cloud-based service: This service runs in Azure, and is where hello external client/user connections are made.</span></span>
* <span data-ttu-id="c59ae-145">[hello a helyszíni összekötő](application-proxy-understand-connectors.md): egy a helyszíni összetevő hello összekötő hello Azure AD alkalmazásproxy-szolgáltatás érkező kéréseket figyeli, és kapcsolatok toohello belső alkalmazások kezeli.</span><span class="sxs-lookup"><span data-stu-id="c59ae-145">[hello on-premises connector](application-proxy-understand-connectors.md): An on-premises component, hello connector listens for requests from hello Azure AD Application Proxy service and handles connections toohello internal applications.</span></span> 

<span data-ttu-id="c59ae-146">A folyamat hello összekötő és hello alkalmazásproxy-szolgáltatás között létesít során:</span><span class="sxs-lookup"><span data-stu-id="c59ae-146">A flow between hello connector and hello Application Proxy service is established when:</span></span>

* <span data-ttu-id="c59ae-147">hello összekötő először állítsa be.</span><span class="sxs-lookup"><span data-stu-id="c59ae-147">hello connector is first set up.</span></span>
* <span data-ttu-id="c59ae-148">hello összekötő hello alkalmazásproxy-szolgáltatás konfigurációs adatait kéri le.</span><span class="sxs-lookup"><span data-stu-id="c59ae-148">hello connector pulls configuration information from hello Application Proxy service.</span></span>
* <span data-ttu-id="c59ae-149">Egy felhasználó a közzétett alkalmazás fér hozzá.</span><span class="sxs-lookup"><span data-stu-id="c59ae-149">A user accesses a published application.</span></span>

>[!NOTE]
><span data-ttu-id="c59ae-150">Az összes kommunikáció SSL-en keresztül történik, és mindig származnak: hello összekötő toohello alkalmazásproxy-szolgáltatás.</span><span class="sxs-lookup"><span data-stu-id="c59ae-150">All communications occur over SSL, and they always originate at hello connector toohello Application Proxy service.</span></span> <span data-ttu-id="c59ae-151">hello szolgáltatás csak akkor beszélünk.</span><span class="sxs-lookup"><span data-stu-id="c59ae-151">hello service is outbound only.</span></span>

<span data-ttu-id="c59ae-152">hello összekötő használ az ügyfél tooauthenticate toohello szinte minden hívások alkalmazásproxy-szolgáltatás.</span><span class="sxs-lookup"><span data-stu-id="c59ae-152">hello connector uses a client certificate tooauthenticate toohello Application Proxy service for nearly all calls.</span></span> <span data-ttu-id="c59ae-153">hello csak kivétel toothis folyamat lépése hello kezdeti beállítás, ahol hello ügyféltanúsítvány jön létre.</span><span class="sxs-lookup"><span data-stu-id="c59ae-153">hello only exception toothis process is hello initial setup step, where hello client certificate is established.</span></span>

### <a name="installing-hello-connector"></a><span data-ttu-id="c59ae-154">Hello-összekötő telepítése</span><span class="sxs-lookup"><span data-stu-id="c59ae-154">Installing hello connector</span></span>

<span data-ttu-id="c59ae-155">Ha először hello összekötő van beállítva, a következő folyamat eseményeinek hello kerül sor:</span><span class="sxs-lookup"><span data-stu-id="c59ae-155">When hello connector is first set up, hello following flow events take place:</span></span>

1. <span data-ttu-id="c59ae-156">hello összekötő regisztrációs toohello szolgáltatás hello összekötő hello telepítésének részeként történik.</span><span class="sxs-lookup"><span data-stu-id="c59ae-156">hello connector registration toohello service happens as part of hello installation of hello connector.</span></span> <span data-ttu-id="c59ae-157">Felhasználók felszólító tooenter vannak az Azure AD rendszergazdai hitelesítő adatait.</span><span class="sxs-lookup"><span data-stu-id="c59ae-157">Users are prompted tooenter their Azure AD admin credentials.</span></span> <span data-ttu-id="c59ae-158">A jogkivonat a alapján a hitelesítés majd rendelkezésre toohello az Azure AD alkalmazásproxy-szolgáltatás.</span><span class="sxs-lookup"><span data-stu-id="c59ae-158">The token acquired from this authentication is then presented toohello Azure AD Application Proxy service.</span></span>
2. <span data-ttu-id="c59ae-159">Alkalmazásproxy-szolgáltatás hello hello token értékeli ki.</span><span class="sxs-lookup"><span data-stu-id="c59ae-159">hello Application Proxy service evaluates hello token.</span></span> <span data-ttu-id="c59ae-160">Azt biztosítja, hogy hello a felhasználó egy vállalati rendszergazda belül, amely a hello token hello bérlői ki.</span><span class="sxs-lookup"><span data-stu-id="c59ae-160">It ensures that hello user is a company administrator within hello tenant that hello token was issued for.</span></span> <span data-ttu-id="c59ae-161">Ha hello felhasználó nem rendszergazda, hello folyamat megszakadt.</span><span class="sxs-lookup"><span data-stu-id="c59ae-161">If hello user is not an administrator, hello process is terminated.</span></span>
3. <span data-ttu-id="c59ae-162">hello összekötő egy ügyfél tanúsítványkérelmet állít elő, és továbbítja azokat, valamint hello token, toohello alkalmazásproxy-szolgáltatás.</span><span class="sxs-lookup"><span data-stu-id="c59ae-162">hello connector generates a client certificate request and passes it, along with hello token, toohello Application Proxy service.</span></span> <span data-ttu-id="c59ae-163">hello szolgáltatás pedig hello token ellenőrzi és aláírja hello ügyfél tanúsítványkérelmet.</span><span class="sxs-lookup"><span data-stu-id="c59ae-163">hello service in turn verifies hello token and signs hello client certificate request.</span></span>
4. <span data-ttu-id="c59ae-164">hello összekötő hello ügyféltanúsítvány hello alkalmazásproxy-szolgáltatás jövőbeli kommunikációt használ.</span><span class="sxs-lookup"><span data-stu-id="c59ae-164">hello connector uses hello client certificate for future communication with hello Application Proxy service.</span></span>
5. <span data-ttu-id="c59ae-165">hello összekötő hello szolgáltatás használatával az ügyféltanúsítvány hajt végre egy kezdeti lekéréses hello rendszer konfigurációs adatokat, és most már készen áll a tootake kérelmek.</span><span class="sxs-lookup"><span data-stu-id="c59ae-165">hello connector performs an initial pull of hello system configuration data from hello service using its client certificate, and it is now ready tootake requests.</span></span>

### <a name="updating-hello-configuration-settings"></a><span data-ttu-id="c59ae-166">Hello konfigurációs beállításainak frissítése folyamatban</span><span class="sxs-lookup"><span data-stu-id="c59ae-166">Updating hello configuration settings</span></span>

<span data-ttu-id="c59ae-167">Amikor hello alkalmazásproxy-szolgáltatás frissíti hello konfigurációs beállításait, a következő folyamat eseményeinek hello kerül sor:</span><span class="sxs-lookup"><span data-stu-id="c59ae-167">Whenever hello Application Proxy service updates hello configuration settings, hello following flow events take place:</span></span>

1. <span data-ttu-id="c59ae-168">hello összekötő toohello konfigurációs végpont belül hello alkalmazásproxy-szolgáltatás kapcsolódik az ügyféltanúsítvány használatával.</span><span class="sxs-lookup"><span data-stu-id="c59ae-168">hello connector connects toohello configuration endpoint within hello Application Proxy service by using its client certificate.</span></span>
2. <span data-ttu-id="c59ae-169">Hello ügyféltanúsítvány érvényesítése után hello alkalmazásproxy-szolgáltatás adja vissza a konfigurációs adatok toohello összekötő (például hello összekötő csoport, amely összekötő hello részének kell lennie).</span><span class="sxs-lookup"><span data-stu-id="c59ae-169">After hello client certificate has been validated, hello Application Proxy service returns configuration data toohello connector (for example, hello connector group that hello connector should be part of).</span></span>
3. <span data-ttu-id="c59ae-170">Ha hello jelenlegi tanúsítvány 180 napnál régebbi, hello összekötőt állít elő, egy új tanúsítványkérelmet, és hatékonyan frissül hello ügyféltanúsítvány 180 nap alatt.</span><span class="sxs-lookup"><span data-stu-id="c59ae-170">If hello current certificate is more than 180 days old, hello connector generates a new certificate request, which effectively updates hello client certificate every 180 days.</span></span>

### <a name="accessing-published-applications"></a><span data-ttu-id="c59ae-171">A közzétett alkalmazások eléréséhez</span><span class="sxs-lookup"><span data-stu-id="c59ae-171">Accessing published applications</span></span>

<span data-ttu-id="c59ae-172">Amikor a felhasználók hozzáférnek a közzétett alkalmazás, hello következő események kerül sor hello alkalmazásproxy-szolgáltatás és hello alkalmazásproxy-összekötő között:</span><span class="sxs-lookup"><span data-stu-id="c59ae-172">When users access a published application, hello following events take place between hello Application Proxy service and hello Application Proxy connector:</span></span>

1. [<span data-ttu-id="c59ae-173">hello szolgáltatás hitelesíti hello felhasználói hello alkalmazás</span><span class="sxs-lookup"><span data-stu-id="c59ae-173">hello service authenticates hello user for hello app</span></span>](#the-service-checks-the-configuration-settings-for-the-app)
2. [<span data-ttu-id="c59ae-174">hello szolgáltatás kérelmet helyezi hello összekötő várólista</span><span class="sxs-lookup"><span data-stu-id="c59ae-174">hello service places a request in hello connector queue</span></span>](#The-service-places-a-request-in-the-connector-queue)
3. [<span data-ttu-id="c59ae-175">Összekötő feldolgozza hello kérést hello üzenetsorból</span><span class="sxs-lookup"><span data-stu-id="c59ae-175">A connector processes hello request from hello queue</span></span>](#the-connector-receives-the-request-from-the-queue)
4. [<span data-ttu-id="c59ae-176">hello összekötő választ vár</span><span class="sxs-lookup"><span data-stu-id="c59ae-176">hello connector waits for a response</span></span>](#the-connector-waits-for-a-response)
5. [<span data-ttu-id="c59ae-177">hello szolgáltatás adatfolyamok adatok toohello felhasználó</span><span class="sxs-lookup"><span data-stu-id="c59ae-177">hello service streams data toohello user</span></span>](#the-service-streams-data-to-the-user)

<span data-ttu-id="c59ae-178">Mi történik, a lépések, kapcsolatos további információkért toolearn tartsa olvasásakor.</span><span class="sxs-lookup"><span data-stu-id="c59ae-178">toolearn more about what takes place in each of these steps, keep reading.</span></span>


#### <a name="1-hello-service-authenticates-hello-user-for-hello-app"></a><span data-ttu-id="c59ae-179">1. hello szolgáltatás hitelesíti hello felhasználói hello alkalmazás</span><span class="sxs-lookup"><span data-stu-id="c59ae-179">1. hello service authenticates hello user for hello app</span></span>

<span data-ttu-id="c59ae-180">Ha a előhitelesítési módszer konfigurált hello app toouse csatlakoztatott, hello ebben a szakaszban kimarad.</span><span class="sxs-lookup"><span data-stu-id="c59ae-180">If you configured hello app toouse Passthrough as its preauthentication method, hello steps in this section are skipped.</span></span>

<span data-ttu-id="c59ae-181">Ha hello app toopreauthenticate konfigurálta az Azure ad-vel, felhasználó átirányított toohello az Azure AD STS tooauthenticate, és hello lépések kerül sor:</span><span class="sxs-lookup"><span data-stu-id="c59ae-181">If you configured hello app toopreauthenticate with Azure AD, users are redirected toohello Azure AD STS tooauthenticate, and hello following steps take place:</span></span>

1. <span data-ttu-id="c59ae-182">Alkalmazásproxy ellenőrzi a feltételes hozzáférési házirend követelményeinek hello meghatározott alkalmazásokra vonatkozzanak.</span><span class="sxs-lookup"><span data-stu-id="c59ae-182">Application Proxy checks for any conditional access policy requirements for hello specific application.</span></span> <span data-ttu-id="c59ae-183">Ez a lépés biztosítja, hogy a felhasználó hello toohello alkalmazás lett rendelve.</span><span class="sxs-lookup"><span data-stu-id="c59ae-183">This step ensures that hello user has been assigned toohello application.</span></span> <span data-ttu-id="c59ae-184">Ha szükséges a kétlépéses ellenőrzést, hello hitelesítési feladatütemezési kéri hello egy második hitelesítési módszert.</span><span class="sxs-lookup"><span data-stu-id="c59ae-184">If two-step verification is required, hello authentication sequence prompts hello user for a second authentication method.</span></span>

2. <span data-ttu-id="c59ae-185">Miután az ellenőrzés sikeres rendelkeznek, hello Azure AD STS állít ki hello alkalmazás aláírt jogkivonat, és átirányítja a felhasználót vissza toohello alkalmazásproxy-szolgáltatás hello.</span><span class="sxs-lookup"><span data-stu-id="c59ae-185">After all checks have passed, hello Azure AD STS issues a signed token for hello application and redirects hello user back toohello Application Proxy service.</span></span>

3. <span data-ttu-id="c59ae-186">Alkalmazásproxy ellenőrzi, hogy hello token toocorrect hello alkalmazás adta ki.</span><span class="sxs-lookup"><span data-stu-id="c59ae-186">Application Proxy verifies that hello token was issued toocorrect hello application.</span></span> <span data-ttu-id="c59ae-187">Azt az egyéb-ellenőrzéseket is végez, például győződjön meg arról, hogy hello jogkivonat aláírása Azure ad és, hogy továbbra is érvényes ablak hello belül van-e.</span><span class="sxs-lookup"><span data-stu-id="c59ae-187">It performs other checks also, such as ensuring that hello token was signed by Azure AD, and that it is still within hello valid window.</span></span>

4. <span data-ttu-id="c59ae-188">Alkalmazásproxy beállítja egy titkosított hitelesítési cookie-k tooindicate hitelesítési toohello alkalmazás történt.</span><span class="sxs-lookup"><span data-stu-id="c59ae-188">Application Proxy sets an encrypted authentication cookie tooindicate that authentication toohello application has occurred.</span></span> <span data-ttu-id="c59ae-189">hello cookie-k tartalmaz egy lejárati időbélyeg alapuló hello jogkivonatot az Azure AD és más adatok, például hitelesítés hello hello felhasználónév alapul.</span><span class="sxs-lookup"><span data-stu-id="c59ae-189">hello cookie includes an expiration timestamp that's based on hello token from Azure AD and other data, such as hello user name that hello authentication is based on.</span></span> <span data-ttu-id="c59ae-190">hello cookie titkosítása és a titkos kulcs ismert csak toohello alkalmazásproxy-szolgáltatás.</span><span class="sxs-lookup"><span data-stu-id="c59ae-190">hello cookie is encrypted with a private key known only toohello Application Proxy service.</span></span>

5. <span data-ttu-id="c59ae-191">Application Proxy átirányítások hello felhasználói hátsó toohello eredetileg kért URL-CÍMÉT.</span><span class="sxs-lookup"><span data-stu-id="c59ae-191">Application Proxy redirects hello user back toohello originally requested URL.</span></span>

<span data-ttu-id="c59ae-192">Hello előhitelesítési lépéseket bármely részét nem sikerül, ha hello felhasználói kérelmet a rendszer megtagadja, és hello felhasználó számára megjelenik egy hibaüzenet, amely hello hello probléma forrása.</span><span class="sxs-lookup"><span data-stu-id="c59ae-192">If any part of hello preauthentication steps fails, hello user’s request is denied, and hello user is shown a message indicating hello source of hello problem.</span></span>


#### <a name="2-hello-service-places-a-request-in-hello-connector-queue"></a><span data-ttu-id="c59ae-193">2. hello szolgáltatás kérelmet helyezi hello összekötő várólista</span><span class="sxs-lookup"><span data-stu-id="c59ae-193">2. hello service places a request in hello connector queue</span></span>

<span data-ttu-id="c59ae-194">Összekötők tartsa egy kimenő kapcsolat megnyitása toohello alkalmazásproxy-szolgáltatás.</span><span class="sxs-lookup"><span data-stu-id="c59ae-194">Connectors keep an outbound connection open toohello Application Proxy service.</span></span> <span data-ttu-id="c59ae-195">Ha a kérelem érkezik, hello szolgáltatás hello kérelem hello nyitott kapcsolatok hello összekötő toopick be az egyik várólisták.</span><span class="sxs-lookup"><span data-stu-id="c59ae-195">When a request comes in, hello service queues up hello request on one of hello open connections for hello connector toopick up.</span></span>

<span data-ttu-id="c59ae-196">hello kérelem hello alkalmazások, például hello kérelemfejléc, hello titkosított cookie-ból adatokat szereplő elemeket tartalmaz, akkor hello kérelmet, és hello tétele hello felhasználói kérelem azonosítója.</span><span class="sxs-lookup"><span data-stu-id="c59ae-196">hello request includes items from hello application, such as hello request headers, data from hello encrypted cookie, hello user making hello request, and hello request ID.</span></span> <span data-ttu-id="c59ae-197">Bár a hello titkosított cookie-ból adatküldést hello kérelemmel, maga hello hitelesítési cookie nincs.</span><span class="sxs-lookup"><span data-stu-id="c59ae-197">Although data from hello encrypted cookie is sent with hello request, hello authentication cookie itself is not.</span></span>

#### <a name="3-hello-connector-processes-hello-request-from-hello-queue"></a><span data-ttu-id="c59ae-198">3. hello összekötő folyamatok hello kérelem hello üzenetsorból.</span><span class="sxs-lookup"><span data-stu-id="c59ae-198">3. hello connector processes hello request from hello queue.</span></span> 

<span data-ttu-id="c59ae-199">Hello kérés alapján alkalmazásproxy egyikét hajtja végre a következő műveletek hello:</span><span class="sxs-lookup"><span data-stu-id="c59ae-199">Based on hello request, Application Proxy performs one of hello following actions:</span></span>

* <span data-ttu-id="c59ae-200">Ha hello kérés egyszerű feladat (például nincs belül, és egy RESTful hello törzs adat *beolvasása* kérelem), hello összekötő lehetővé teszi egy kapcsolat toohello belső célerőforrása, és választ vár.</span><span class="sxs-lookup"><span data-stu-id="c59ae-200">If hello request is a simple operation (for example, there is no data within hello body as is with a RESTful *GET* request), hello connector makes a connection toohello target internal resource and then waits for a response.</span></span>

* <span data-ttu-id="c59ae-201">Ha tartozik-e a hello kérelemhez társított hello törzsében (például egy RESTful *POST* művelet), hello összekötő lehetővé teszi egy kimenő kapcsolat hello ügyfél tanúsítvány toohello proxyval példány használatával.</span><span class="sxs-lookup"><span data-stu-id="c59ae-201">If hello request has data associated with it in hello body (for example, a RESTful *POST* operation), hello connector makes an outbound connection by using hello client certificate toohello Application Proxy instance.</span></span> <span data-ttu-id="c59ae-202">A kapcsolati toorequest hello adatait, és az nyisson meg egy kapcsolati toohello belső erőforrást.</span><span class="sxs-lookup"><span data-stu-id="c59ae-202">It makes this connection toorequest hello data and open a connection toohello internal resource.</span></span> <span data-ttu-id="c59ae-203">Hello-összekötőről származó hello kérelmet kap, miután hello alkalmazásproxy-szolgáltatás hello felhasználói tartalmat elfogadása kezdődik, és toohello adatösszekötő továbbítja.</span><span class="sxs-lookup"><span data-stu-id="c59ae-203">After it receives hello request from hello connector, hello Application Proxy service begins accepting content from hello user and forwards data toohello connector.</span></span> <span data-ttu-id="c59ae-204">hello összekötő, viszont hello adatok toohello belső erőforrás továbbítja.</span><span class="sxs-lookup"><span data-stu-id="c59ae-204">hello connector, in turn, forwards hello data toohello internal resource.</span></span>

#### <a name="4-hello-connector-waits-for-a-response"></a><span data-ttu-id="c59ae-205">4. hello összekötő válaszra.</span><span class="sxs-lookup"><span data-stu-id="c59ae-205">4. hello connector waits for a response.</span></span>

<span data-ttu-id="c59ae-206">Miután hello kérelmet, és az összes tartalmat toohello továbbításának biztonsági end elkészült, akkor hello összekötő válaszra.</span><span class="sxs-lookup"><span data-stu-id="c59ae-206">After hello request and transmission of all content toohello back end is complete, hello connector waits for a response.</span></span>

<span data-ttu-id="c59ae-207">Választ kap, miután hello összekötő lehetővé teszi egy kimenő kapcsolat toohello alkalmazásproxy-szolgáltatás, tooreturn fejléc részletek hello kezdete streaming hello visszatérési adatai.</span><span class="sxs-lookup"><span data-stu-id="c59ae-207">After it receives a response, hello connector makes an outbound connection toohello Application Proxy service, tooreturn hello header details and begin streaming hello return data.</span></span>

#### <a name="5-hello-service-streams-data-toohello-user"></a><span data-ttu-id="c59ae-208">5. hello szolgáltatás adatfolyamok adatok toohello felhasználó.</span><span class="sxs-lookup"><span data-stu-id="c59ae-208">5. hello service streams data toohello user.</span></span> 

<span data-ttu-id="c59ae-209">Egyes feldolgozási hello alkalmazás itt fordulhat elő.</span><span class="sxs-lookup"><span data-stu-id="c59ae-209">Some processing of hello application may occur here.</span></span> <span data-ttu-id="c59ae-210">Ha az alkalmazás a alkalmazásproxy tootranslate fejlécek vagy URL-címek konfigurálta, a feldolgozása történik, ennél a lépésnél szükség szerint.</span><span class="sxs-lookup"><span data-stu-id="c59ae-210">If you configured Application Proxy tootranslate headers or URLs in your application, that processing happens as needed during this step.</span></span>


## <a name="next-steps"></a><span data-ttu-id="c59ae-211">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="c59ae-211">Next steps</span></span>

[<span data-ttu-id="c59ae-212">Hálózati topológia szempontjai az Azure AD-alkalmazásproxy használatával</span><span class="sxs-lookup"><span data-stu-id="c59ae-212">Network topology considerations when using Azure AD Application Proxy</span></span>](application-proxy-network-topology-considerations.md)

[<span data-ttu-id="c59ae-213">Az Azure AD-alkalmazásproxy összekötők ismertetése</span><span class="sxs-lookup"><span data-stu-id="c59ae-213">Understand Azure AD Application Proxy connectors</span></span>](application-proxy-understand-connectors.md)
