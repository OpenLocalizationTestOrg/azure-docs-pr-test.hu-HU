---
title: "automatikus skálázás aaaBest eljárásai |} Microsoft Docs"
description: "Automatikus skálázás minták Azure Web Apps, a virtuálisgép-méretezési készletek és a Cloud Services csomag"
author: anirudhcavale
manager: orenr
editor: 
services: monitoring-and-diagnostics
documentationcenter: monitoring-and-diagnostics
ms.assetid: 9fa2b94b-dfa5-4106-96ff-74fd1fba4657
ms.service: monitoring-and-diagnostics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/07/2017
ms.author: ancav
ms.openlocfilehash: eb731c15e440af93a2675210583878814d0d8818
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/06/2017
---
# <a name="best-practices-for-autoscale"></a><span data-ttu-id="0583e-103">Ajánlott eljárások az automatikus méretezéshez</span><span class="sxs-lookup"><span data-stu-id="0583e-103">Best practices for Autoscale</span></span>
<span data-ttu-id="0583e-104">Ez a cikk útmutatást ad az ajánlott eljárások tooautoscale az Azure-ban.</span><span class="sxs-lookup"><span data-stu-id="0583e-104">This article teaches best practices tooautoscale in Azure.</span></span> <span data-ttu-id="0583e-105">Az Azure a figyelő automatikus skálázás csak túl vonatkozik[virtuálisgép-méretezési csoportok](https://azure.microsoft.com/services/virtual-machine-scale-sets/), [Felhőszolgáltatások](https://azure.microsoft.com/services/cloud-services/), és [App Service - webalkalmazások](https://azure.microsoft.com/services/app-service/web/).</span><span class="sxs-lookup"><span data-stu-id="0583e-105">Azure Monitor autoscale applies only too[Virtual Machine Scale Sets](https://azure.microsoft.com/services/virtual-machine-scale-sets/), [Cloud Services](https://azure.microsoft.com/services/cloud-services/), and [App Service - Web Apps](https://azure.microsoft.com/services/app-service/web/).</span></span> <span data-ttu-id="0583e-106">Más Azure-szolgáltatások különböző méretezési módszer használatára.</span><span class="sxs-lookup"><span data-stu-id="0583e-106">Other Azure services use different scaling methods.</span></span>

## <a name="autoscale-concepts"></a><span data-ttu-id="0583e-107">Automatikus skálázás fogalmak</span><span class="sxs-lookup"><span data-stu-id="0583e-107">Autoscale concepts</span></span>
* <span data-ttu-id="0583e-108">Egy erőforrás csak rendelkezhet *egy* automatikus skálázási beállítás</span><span class="sxs-lookup"><span data-stu-id="0583e-108">A resource can have only *one* autoscale setting</span></span>
* <span data-ttu-id="0583e-109">Az automatikus skálázási beállítás egy vagy több profilok és az egyes profilok lehet egy vagy több automatikus skálázási szabályok.</span><span class="sxs-lookup"><span data-stu-id="0583e-109">An autoscale setting can have one or more profiles and each profile can have one or more autoscale rules.</span></span>
* <span data-ttu-id="0583e-110">Az automatikus skálázási beállítás méretezi példányok vízszintesen, amely *kimenő* hello példányok növelésével és *a* hello példányok számának csökkentésével.</span><span class="sxs-lookup"><span data-stu-id="0583e-110">An autoscale setting scales instances horizontally, which is *out* by increasing hello instances and *in* by decreasing hello number of instances.</span></span>
  <span data-ttu-id="0583e-111">Az automatikus skálázási beállítás tartozik egy maximális, minimális és példányok alapértelmezett értéke.</span><span class="sxs-lookup"><span data-stu-id="0583e-111">An autoscale setting has a maximum, minimum, and default value of instances.</span></span>
* <span data-ttu-id="0583e-112">Az automatikus skálázási feladat, mindig hello a hozzá kapcsolódó metrika tooscale ellenőrzésével, elért hello kibővített vagy méretezési a beállított küszöbértéket.</span><span class="sxs-lookup"><span data-stu-id="0583e-112">An autoscale job always reads hello associated metric tooscale by, checking if it has crossed hello configured threshold for scale-out or scale-in.</span></span> <span data-ttu-id="0583e-113">Listáját megtekintheti a mérőszámok, hogy az automatikus skálázás méretezheti által a [Azure figyelő automatikus skálázás közös metrikák](insights-autoscale-common-metrics.md).</span><span class="sxs-lookup"><span data-stu-id="0583e-113">You can view a list of metrics that autoscale can scale by at [Azure Monitor autoscaling common metrics](insights-autoscale-common-metrics.md).</span></span>
* <span data-ttu-id="0583e-114">Minden küszöbértéke egy példány szintjén kiszámítása.</span><span class="sxs-lookup"><span data-stu-id="0583e-114">All thresholds are calculated at an instance level.</span></span> <span data-ttu-id="0583e-115">Például "1 példány által végzett méretezési amikor átlagos CPU > 80 %, ha a példányok száma 2", azt jelenti, hogy a kibővített 80 %-nál nagyobb hello átlagos CPU-csomagbeli összes példányra esetén.</span><span class="sxs-lookup"><span data-stu-id="0583e-115">For example, "scale out by 1 instance when average CPU > 80% when instance count is 2", means scale-out when hello average CPU across all instances is greater than 80%.</span></span>
* <span data-ttu-id="0583e-116">Mindig kapják értesítések e-mailben.</span><span class="sxs-lookup"><span data-stu-id="0583e-116">You always receive failure notifications via email.</span></span> <span data-ttu-id="0583e-117">Hello tulajdonos, közreműködő és hello célerőforrása olvasói kifejezetten, e-maileket kapni.</span><span class="sxs-lookup"><span data-stu-id="0583e-117">Specifically, hello owner, contributor, and readers of hello target resource receive email.</span></span> <span data-ttu-id="0583e-118">Mindig is kap egy *helyreállítási* e-mailt automatikus skálázás helyreállít a hibát, és elindítja a szokásos módon működik-e.</span><span class="sxs-lookup"><span data-stu-id="0583e-118">You also always receive a *recovery* email when autoscale recovers from a failure and starts functioning normally.</span></span>
* <span data-ttu-id="0583e-119">Ön részt tooreceive sikeres skálázási művelet értesítést e-mailek és webhookokkal keresztül.</span><span class="sxs-lookup"><span data-stu-id="0583e-119">You can opt-in tooreceive a successful scale action notification via email and webhooks.</span></span>

## <a name="autoscale-best-practices"></a><span data-ttu-id="0583e-120">Automatikus skálázás gyakorlati tanácsok</span><span class="sxs-lookup"><span data-stu-id="0583e-120">Autoscale best practices</span></span>
<span data-ttu-id="0583e-121">Használja az automatikus skálázás használata a következő gyakorlati tanácsok hello.</span><span class="sxs-lookup"><span data-stu-id="0583e-121">Use hello following best practices as you use autoscale.</span></span>

### <a name="ensure-hello-maximum-and-minimum-values-are-different-and-have-an-adequate-margin-between-them"></a><span data-ttu-id="0583e-122">Győződjön meg arról, hello maximális és minimális értékek eltérőek, és a közöttük egy megfelelő margóval rendelkeznie</span><span class="sxs-lookup"><span data-stu-id="0583e-122">Ensure hello maximum and minimum values are different and have an adequate margin between them</span></span>
<span data-ttu-id="0583e-123">Ha a beállítást, amely rendelkezik a minimális = 2, legfeljebb = 2 és hello aktuális példányszám 2, akkor fordulhat elő, nem skálázási művelet.</span><span class="sxs-lookup"><span data-stu-id="0583e-123">If you have a setting that has minimum=2, maximum=2 and hello current instance count is 2, no scale action can occur.</span></span> <span data-ttu-id="0583e-124">Tartsa meg egy megfelelő margója közötti hello maximális és minimális példányok számát, amely átfogó jellegűek.</span><span class="sxs-lookup"><span data-stu-id="0583e-124">Keep an adequate margin between hello maximum and minimum instance counts, which are inclusive.</span></span> <span data-ttu-id="0583e-125">Automatikus skálázás mindig méretezze át a korlátok között.</span><span class="sxs-lookup"><span data-stu-id="0583e-125">Autoscale always scales between these limits.</span></span>

### <a name="manual-scaling-is-reset-by-autoscale-min-and-max"></a><span data-ttu-id="0583e-126">Manuális skálázás automatikus skálázás min és max alaphelyzetbe állítása</span><span class="sxs-lookup"><span data-stu-id="0583e-126">Manual scaling is reset by autoscale min and max</span></span>
<span data-ttu-id="0583e-127">Manuálisan hello példány tooa számérték fenti frissítésekor vagy alatti hello, hello automatikus skálázás motor automatikusan méretezi hátsó toohello minimális (Ha alacsonyabb) vagy a maximális hello (Ha újabb).</span><span class="sxs-lookup"><span data-stu-id="0583e-127">If you manually update hello instance count tooa value above or below hello maximum, hello autoscale engine automatically scales back toohello minimum (if below) or hello maximum (if above).</span></span> <span data-ttu-id="0583e-128">Például beállíthatja hello 3. és 6 közötti tartományba esik.</span><span class="sxs-lookup"><span data-stu-id="0583e-128">For example, you set hello range between 3 and 6.</span></span> <span data-ttu-id="0583e-129">Ha egy futó példány, a hello automatikus skálázás motor too3 példányok méretezi a következő futásakor.</span><span class="sxs-lookup"><span data-stu-id="0583e-129">If you have one running instance, hello autoscale engine scales too3 instances on its next run.</span></span> <span data-ttu-id="0583e-130">Ehhez hasonlóan az volna méretezési-a 8 példányok biztonsági too6 a következő futásakor.</span><span class="sxs-lookup"><span data-stu-id="0583e-130">Likewise, it would scale-in 8 instances back too6 on its next run.</span></span>  <span data-ttu-id="0583e-131">Manuális skálázás csak nagyon ideiglenes, kivéve, ha alaphelyzetbe állít egy hello automatikus skálázási szabályok is.</span><span class="sxs-lookup"><span data-stu-id="0583e-131">Manual scaling is very temporary unless you reset hello autoscale rules as well.</span></span>

### <a name="always-use-a-scale-out-and-scale-in-rule-combination-that-performs-an-increase-and-decrease"></a><span data-ttu-id="0583e-132">Mindig használja a kibővített és skálázási szabály, amely végrehajtja az növekedés és csökkentése</span><span class="sxs-lookup"><span data-stu-id="0583e-132">Always use a scale-out and scale-in rule combination that performs an increase and decrease</span></span>
<span data-ttu-id="0583e-133">Hello kombinációja csak egy részét használja, ha automatikus skálázás méretezési modul, amely egyetlen, vagy, hello maximális és minimális, amíg eléri.</span><span class="sxs-lookup"><span data-stu-id="0583e-133">If you use only one part of hello combination, autoscale scale-in that single out, or in, until hello maximum, or minimum, is reached.</span></span>

### <a name="do-not-switch-between-hello-azure-portal-and-hello-azure-classic-portal-when-managing-autoscale"></a><span data-ttu-id="0583e-134">Nem váltás hello Azure-portál és a klasszikus Azure portálon hello automatikus skálázás kezelése</span><span class="sxs-lookup"><span data-stu-id="0583e-134">Do not switch between hello Azure portal and hello Azure classic portal when managing Autoscale</span></span>
<span data-ttu-id="0583e-135">Felhőalapú szolgáltatásokhoz és alkalmazásszolgáltatások (webalkalmazások) hello Azure portal (portal.azure.com) toocreate használja, és automatikus skálázás beállításainak kezelése.</span><span class="sxs-lookup"><span data-stu-id="0583e-135">For Cloud Services and App Services (Web Apps), use hello Azure portal (portal.azure.com) toocreate and manage autoscale settings.</span></span> <span data-ttu-id="0583e-136">A virtuálisgép-méretezési csoportok használjon PowerShell, a parancssori felületen vagy a REST API toocreate, és kezelheti az automatikus skálázási beállítás.</span><span class="sxs-lookup"><span data-stu-id="0583e-136">For Virtual Machine Scale Sets use PowerShell, CLI or REST API toocreate and manage autoscale setting.</span></span> <span data-ttu-id="0583e-137">Nem Váltás a klasszikus Azure portálon (manage.windowsazure.com) hello és hello Azure portal (portal.azure.com) automatikus skálázási konfigurációk kezelésekor.</span><span class="sxs-lookup"><span data-stu-id="0583e-137">Do not switch between hello Azure classic portal (manage.windowsazure.com) and hello Azure portal (portal.azure.com) when managing autoscale configurations.</span></span> <span data-ttu-id="0583e-138">hello a klasszikus Azure portálon, és az alapjául szolgáló háttér korlátai.</span><span class="sxs-lookup"><span data-stu-id="0583e-138">hello Azure classic portal and its underlying backend has limitations.</span></span> <span data-ttu-id="0583e-139">Helyezze át a toohello az Azure portál toomanage automatikus skálázás egy grafikus felhasználói felület használatával.</span><span class="sxs-lookup"><span data-stu-id="0583e-139">Move toohello Azure portal toomanage autoscale using a graphical user interface.</span></span> <span data-ttu-id="0583e-140">a következők hello toouse hello automatikus skálázás PowerShell, a parancssori felületen vagy a REST API-t (az Azure erőforrás-kezelő) keresztül.</span><span class="sxs-lookup"><span data-stu-id="0583e-140">hello options are toouse hello autoscale PowerShell, CLI or REST API (via Azure Resource Explorer).</span></span>

### <a name="choose-hello-appropriate-statistic-for-your-diagnostics-metric"></a><span data-ttu-id="0583e-141">Válassza ki a hello megfelelő statisztika a diagnosztika mérőszám</span><span class="sxs-lookup"><span data-stu-id="0583e-141">Choose hello appropriate statistic for your diagnostics metric</span></span>
<span data-ttu-id="0583e-142">Diagnosztika metrikáihoz közül választhat *átlagos*, *minimális*, *maximális* és *teljes* , egy metrika tooscale által.</span><span class="sxs-lookup"><span data-stu-id="0583e-142">For diagnostics metrics, you can choose among *Average*, *Minimum*, *Maximum* and *Total* as a metric tooscale by.</span></span> <span data-ttu-id="0583e-143">hello leggyakoribb statisztikai adat *átlagos*.</span><span class="sxs-lookup"><span data-stu-id="0583e-143">hello most common statistic is *Average*.</span></span>

### <a name="choose-hello-thresholds-carefully-for-all-metric-types"></a><span data-ttu-id="0583e-144">Válassza ki a hello küszöbértékek gondosan összes mérték típusa</span><span class="sxs-lookup"><span data-stu-id="0583e-144">Choose hello thresholds carefully for all metric types</span></span>
<span data-ttu-id="0583e-145">Azt javasoljuk, körültekintően a kibővített és a skála gyakorlati helyzetek alapján különböző küszöbértékek kiválasztása.</span><span class="sxs-lookup"><span data-stu-id="0583e-145">We recommend carefully choosing different thresholds for scale-out and scale-in based on practical situations.</span></span>

<span data-ttu-id="0583e-146">A Microsoft *nem javasoljuk* automatikus skálázási beállítások, például az alábbi hello példák hello azonos vagy nagyon hasonló küszöbértékei, és a feltételek:</span><span class="sxs-lookup"><span data-stu-id="0583e-146">We *do not recommend* autoscale settings like hello examples below with hello same or very similar threshold values for out and in conditions:</span></span>

* <span data-ttu-id="0583e-147">1 növeléséhez a példányok száma, amikor szálak száma < = 600</span><span class="sxs-lookup"><span data-stu-id="0583e-147">Increase instances by 1 count when Thread Count <= 600</span></span>
* <span data-ttu-id="0583e-148">1 csökkentése példányok száma, amikor szálak száma > = 600</span><span class="sxs-lookup"><span data-stu-id="0583e-148">Decrease instances by 1 count when Thread Count >= 600</span></span>

<span data-ttu-id="0583e-149">Nézzük például milyen vezethet tűnhet félrevezető tooa működésére.</span><span class="sxs-lookup"><span data-stu-id="0583e-149">Let's look at an example of what can lead tooa behavior that may seem confusing.</span></span> <span data-ttu-id="0583e-150">Vegye figyelembe a következő feladatütemezési hello.</span><span class="sxs-lookup"><span data-stu-id="0583e-150">Consider hello following sequence.</span></span>

1. <span data-ttu-id="0583e-151">Tegyük fel, a 2 példányok toobegin, és majd hello átlagos példányonként szálak száma nő too625.</span><span class="sxs-lookup"><span data-stu-id="0583e-151">Assume there are 2 instances toobegin with and then hello average number of threads per instance grows too625.</span></span>
2. <span data-ttu-id="0583e-152">Automatikus skálázás arányosan kimenő hozzáadja a 3. példányt.</span><span class="sxs-lookup"><span data-stu-id="0583e-152">Autoscale scales out adding a 3rd instance.</span></span>
3. <span data-ttu-id="0583e-153">A következő azt feltételezik, hogy a hello átlagos szálak száma példány között too575 esik.</span><span class="sxs-lookup"><span data-stu-id="0583e-153">Next, assume that hello average thread count across instance falls too575.</span></span>
4. <span data-ttu-id="0583e-154">Skálázás, mielőtt az automatikus skálázási megpróbál tooestimate milyen hello végső állapot lesz, ha a méretezve.</span><span class="sxs-lookup"><span data-stu-id="0583e-154">Before scaling down, autoscale tries tooestimate what hello final state will be if it scaled in.</span></span> <span data-ttu-id="0583e-155">Például 575 x 3 (aktuális példányszám) = 1,725 / 2 (ha méretezhető végleges száma) 862.5 szálak =.</span><span class="sxs-lookup"><span data-stu-id="0583e-155">For example, 575 x  3 (current instance count) = 1,725 / 2 (final number of instances when scaled down) = 862.5 threads.</span></span> <span data-ttu-id="0583e-156">Ez azt jelenti, hogy automatikus skálázás kellene tooimmediately kibővített újra még azt követően, méretezhető, ha hello átlagos szál száma továbbra is hello azonos vagy akár csak kis mértékben csökken.</span><span class="sxs-lookup"><span data-stu-id="0583e-156">This means autoscale would have tooimmediately scale-out again even after it scaled in, if hello average thread count remains hello same or even falls only a small amount.</span></span> <span data-ttu-id="0583e-157">Azonban ha, akár méretezhető, volna ismételje meg a teljes folyamat hello, ami tooan végtelen ciklus.</span><span class="sxs-lookup"><span data-stu-id="0583e-157">However, if it scaled up again, hello whole process would repeat, leading tooan infinite loop.</span></span>
5. <span data-ttu-id="0583e-158">tooavoid ebben az esetben ("flapping" hívják) automatikus skálázási nem csökkentheti egyáltalán.</span><span class="sxs-lookup"><span data-stu-id="0583e-158">tooavoid this situation (termed "flapping"), autoscale does not scale down at all.</span></span> <span data-ttu-id="0583e-159">Ehelyett a használatával kihagyhatja, és reevaluates hello feltétel újra hello tovább idő hello szolgáltatás feladatot hajt végre.</span><span class="sxs-lookup"><span data-stu-id="0583e-159">Instead, it skips and reevaluates hello condition again hello next time hello service's job executes.</span></span> <span data-ttu-id="0583e-160">Ez sikerült megzavarják sokan, mert automatikus skálázás sikertelen toowork állapotában 575 hello átlagos szálak száma.</span><span class="sxs-lookup"><span data-stu-id="0583e-160">This could confuse many people because autoscale wouldn't appear toowork when hello average thread count was 575.</span></span>

<span data-ttu-id="0583e-161">Során egy méretezési a becslés "váltakozó állapotú" olyan helyzetekben, a méretezés és a kibővített műveletek folyamatosan hová oda-vissza tervezett tooavoid.</span><span class="sxs-lookup"><span data-stu-id="0583e-161">Estimation during a scale-in is intended tooavoid "flapping" situations, where scale-in and scale-out actions continually go back and forth.</span></span> <span data-ttu-id="0583e-162">A kibővített és az azonos küszöbértékek hello kiválasztásakor vegye figyelembe ezt a viselkedést.</span><span class="sxs-lookup"><span data-stu-id="0583e-162">Keep this behavior in mind when you choose hello same thresholds for scale-out and in.</span></span>

<span data-ttu-id="0583e-163">Azt javasoljuk, hogy egy megfelelő margó hello kibővített között, és a küszöbértékek kiválasztása.</span><span class="sxs-lookup"><span data-stu-id="0583e-163">We recommend choosing an adequate margin between hello scale-out and in thresholds.</span></span> <span data-ttu-id="0583e-164">Tegyük fel fontolja meg a következő jobb szabály kombinációja hello.</span><span class="sxs-lookup"><span data-stu-id="0583e-164">As an example, consider hello following better rule combination.</span></span>

* <span data-ttu-id="0583e-165">1 növeléséhez a példányok száma, amikor CPU % > = 80</span><span class="sxs-lookup"><span data-stu-id="0583e-165">Increase instances by 1 count when CPU%  >= 80</span></span>
* <span data-ttu-id="0583e-166">1 csökkentése példányok száma, amikor CPU % < = 60</span><span class="sxs-lookup"><span data-stu-id="0583e-166">Decrease instances by 1 count when CPU% <= 60</span></span>

<span data-ttu-id="0583e-167">Ebben az esetben</span><span class="sxs-lookup"><span data-stu-id="0583e-167">In this case</span></span>  

1. <span data-ttu-id="0583e-168">Tegyük fel, a 2 példányok toostart van.</span><span class="sxs-lookup"><span data-stu-id="0583e-168">Assume there are 2 instances toostart with.</span></span>
2. <span data-ttu-id="0583e-169">Ha hello átlagos CPU % között példányok too80 kerül, automatikus skálázás méretezi a kimenő hozzáadja egy harmadik példányt.</span><span class="sxs-lookup"><span data-stu-id="0583e-169">If hello average CPU% across instances goes too80, autoscale scales out adding a third instance.</span></span>
3. <span data-ttu-id="0583e-170">Mostantól azt feltételezi, hogy idő hello CPU keresztül % too60 esik.</span><span class="sxs-lookup"><span data-stu-id="0583e-170">Now assume that over time hello CPU% falls too60.</span></span>
4. <span data-ttu-id="0583e-171">Az automatikus skálázás tartozó skála a szabály becslése hello végső állapot, mintha tooscale a.</span><span class="sxs-lookup"><span data-stu-id="0583e-171">Autoscale's scale-in rule estimates hello final state if it were tooscale-in.</span></span> <span data-ttu-id="0583e-172">Például 60 x 3 (aktuális példányszám) = 180 / 2 (ha méretezhető végleges száma) = 90.</span><span class="sxs-lookup"><span data-stu-id="0583e-172">For example, 60 x 3 (current instance count) = 180 / 2 (final number of instances when scaled down) = 90.</span></span> <span data-ttu-id="0583e-173">Így automatikus skálázás nem skálázási be mert tooscale kibővített azonnal újra kellene.</span><span class="sxs-lookup"><span data-stu-id="0583e-173">So autoscale does not scale-in because it would have tooscale-out again immediately.</span></span> <span data-ttu-id="0583e-174">Ehelyett kihagyja skálázás.</span><span class="sxs-lookup"><span data-stu-id="0583e-174">Instead, it skips scaling down.</span></span>
5. <span data-ttu-id="0583e-175">hello tovább idő automatikus skálázás ellenőrzi, hello CPU toofall too50 továbbra is.</span><span class="sxs-lookup"><span data-stu-id="0583e-175">hello next time autoscale checks, hello CPU continues toofall too50.</span></span> <span data-ttu-id="0583e-176">Becslése újra - példány 50 x 3 = 150 / 2 példányok = 75, amely 80-as, hello kibővített küszöbérték alatt, a méretezés sikeresen too2 példányát.</span><span class="sxs-lookup"><span data-stu-id="0583e-176">It estimates again -  50 x 3 instance = 150 / 2 instances = 75, which is below hello scale-out threshold of 80, so it scales in successfully too2 instances.</span></span>

### <a name="considerations-for-scaling-threshold-values-for-special-metrics"></a><span data-ttu-id="0583e-177">Különleges metrikák küszöbértékei skálázás szempontjai</span><span class="sxs-lookup"><span data-stu-id="0583e-177">Considerations for scaling threshold values for special metrics</span></span>
 <span data-ttu-id="0583e-178">Például a tároló- és Service Bus-üzenetsorba hossza metrika különleges metrikáihoz a hello küszöbértéke hello kiszolgálónként példányok jelenlegi száma üzenetek átlagos száma.</span><span class="sxs-lookup"><span data-stu-id="0583e-178">For special metrics such as Storage or Service Bus Queue length metric, hello threshold is hello average number of messages available per current number of instances.</span></span> <span data-ttu-id="0583e-179">Gondosan válasszon hello hello tartozó küszöbérték. Ez a metrika válassza.</span><span class="sxs-lookup"><span data-stu-id="0583e-179">Carefully choose hello choose hello threshold value for this metric.</span></span>

<span data-ttu-id="0583e-180">Most azt mutatják be egy példa tooensure a hello viselkedés jobb megértése.</span><span class="sxs-lookup"><span data-stu-id="0583e-180">Let's illustrate it with an example tooensure you understand hello behavior better.</span></span>

* <span data-ttu-id="0583e-181">Példányok növelhető 1 száma szerint, ha a tároló várólista üzenet-száma > = 50</span><span class="sxs-lookup"><span data-stu-id="0583e-181">Increase instances by 1 count when Storage Queue message count >= 50</span></span>
* <span data-ttu-id="0583e-182">Példányok csökkentése 1 száma szerint, ha Storage Üzenetsorába száma < = 10</span><span class="sxs-lookup"><span data-stu-id="0583e-182">Decrease instances by 1 count when Storage Queue message count <= 10</span></span>

<span data-ttu-id="0583e-183">Vegye figyelembe a következő feladatütemezési hello:</span><span class="sxs-lookup"><span data-stu-id="0583e-183">Consider hello following sequence:</span></span>

1. <span data-ttu-id="0583e-184">Nincsenek 2 tároló várólista példányok.</span><span class="sxs-lookup"><span data-stu-id="0583e-184">There are 2 storage queue instances.</span></span>
2. <span data-ttu-id="0583e-185">Üzeneteket érkezni és hello storage üzenetsorába áttekintéséhez hello számuk beolvassa 50.</span><span class="sxs-lookup"><span data-stu-id="0583e-185">Messages keep coming and when you review hello storage queue, hello total count reads 50.</span></span> <span data-ttu-id="0583e-186">Ön azt feltételezik, hogy az automatikus skálázási elindul egy kibővíthető műveletet.</span><span class="sxs-lookup"><span data-stu-id="0583e-186">You might assume that autoscale should start a scale-out action.</span></span> <span data-ttu-id="0583e-187">Azonban ügyeljen arra, hogy a rendszer továbbra is 50/2 = példányonként 25 üzeneteket.</span><span class="sxs-lookup"><span data-stu-id="0583e-187">However, note that it is still 50/2 = 25 messages per instance.</span></span> <span data-ttu-id="0583e-188">Igen kibővített nem történik meg.</span><span class="sxs-lookup"><span data-stu-id="0583e-188">So, scale-out does not occur.</span></span> <span data-ttu-id="0583e-189">Hello első kibővített toohappen hello összes üzenet számán hello tároló várólista legyen 100.</span><span class="sxs-lookup"><span data-stu-id="0583e-189">For hello first scale-out toohappen, hello total message count in hello storage queue should be 100.</span></span>
3. <span data-ttu-id="0583e-190">A következő azt feltételezik, hogy hello összes üzenet számán eléri-e a 100 értéket.</span><span class="sxs-lookup"><span data-stu-id="0583e-190">Next, assume that hello total message count reaches 100.</span></span>
4. <span data-ttu-id="0583e-191">A 3. tároló várólistára kerül tooa kibővített művelet miatt.</span><span class="sxs-lookup"><span data-stu-id="0583e-191">A 3rd storage queue instance is added due tooa scale-out action.</span></span>  <span data-ttu-id="0583e-192">hello következő kibővített művelet nem történik teljes hello amíg hello várólistában lévő üzenetek száma eléri a 150, mert 150/3 = 50.</span><span class="sxs-lookup"><span data-stu-id="0583e-192">hello next scale-out action will not happen until hello total message count in hello queue reaches 150 because 150/3 = 50.</span></span>
5. <span data-ttu-id="0583e-193">Most hello hello várólistában lévő üzenetek számának beolvasása kisebb.</span><span class="sxs-lookup"><span data-stu-id="0583e-193">Now hello number of messages in hello queue gets smaller.</span></span> <span data-ttu-id="0583e-194">3 osztályt hello első skálázási művelet történik, ha hello összes várólistán található összes üzenet egyezzen too30, mert 30/3 = hello méretezési a küszöbérték, példányonként 10 üzeneteket.</span><span class="sxs-lookup"><span data-stu-id="0583e-194">With 3 instances, hello first scale-in action happens when hello total messages in all queues add up too30 because 30/3 = 10 messages per instance, which is hello scale-in threshold.</span></span>

### <a name="considerations-for-scaling-when-multiple-profiles-are-configured-in-an-autoscale-setting"></a><span data-ttu-id="0583e-195">Ha az automatikus skálázási beállításban több profilok méretezéshez szempontok</span><span class="sxs-lookup"><span data-stu-id="0583e-195">Considerations for scaling when multiple profiles are configured in an autoscale setting</span></span>
<span data-ttu-id="0583e-196">Az automatikus skálázási beállításban választhat egy alapértelmezett profilt, amely minden függőség ütemezés vagy idő nélkül mindig érvényes, vagy választhatja azt egy ismétlődő vagy profil egy meghatározott ideig dátum és idő tartománnyal.</span><span class="sxs-lookup"><span data-stu-id="0583e-196">In an autoscale setting, you can choose a default profile, which is always applied without any dependency on schedule or time, or you can choose a recurring profile or a profile for a fixed period with a date and time range.</span></span>

<span data-ttu-id="0583e-197">Amikor az automatikus skálázás szolgáltatás feldolgozza azokat, mindig ellenőrzi a sorrend hello:</span><span class="sxs-lookup"><span data-stu-id="0583e-197">When autoscale service processes them, it always checks in hello following order:</span></span>

1. <span data-ttu-id="0583e-198">Rögzített dátum profil</span><span class="sxs-lookup"><span data-stu-id="0583e-198">Fixed Date profile</span></span>
2. <span data-ttu-id="0583e-199">Ismétlődő profil</span><span class="sxs-lookup"><span data-stu-id="0583e-199">Recurring profile</span></span>
3. <span data-ttu-id="0583e-200">Alapértelmezett profil ("Always")</span><span class="sxs-lookup"><span data-stu-id="0583e-200">Default ("Always") profile</span></span>

<span data-ttu-id="0583e-201">Ha egy profil feltétel teljesül, automatikus skálázási nem hello következő profil feltétel alatta ellenőrzése.</span><span class="sxs-lookup"><span data-stu-id="0583e-201">If a profile condition is met, autoscale does not check hello next profile condition below it.</span></span> <span data-ttu-id="0583e-202">Automatikus skálázás egyszerre csak egy profil dolgozza fel.</span><span class="sxs-lookup"><span data-stu-id="0583e-202">Autoscale only processes one profile at a time.</span></span> <span data-ttu-id="0583e-203">Ez azt jelenti, ha azt szeretné, hogy tooalso közé tartoznak az alsó szintű profilból feldolgozási feltétel, meg kell adnia ezeket a szabályokat, valamint aktuális hello-profil.</span><span class="sxs-lookup"><span data-stu-id="0583e-203">This means if you want tooalso include a processing condition from a lower-tier profile, you must include those rules as well in hello current profile.</span></span>

<span data-ttu-id="0583e-204">Tekintsük át, ennek egy példát:</span><span class="sxs-lookup"><span data-stu-id="0583e-204">Let's review this using an example:</span></span>

<span data-ttu-id="0583e-205">hello az alábbi ábrán az automatikus skálázási beállítás minimális példányok alapértelmezett profillal = 2 és a maximális példányok = 10.</span><span class="sxs-lookup"><span data-stu-id="0583e-205">hello image below shows an autoscale setting with a default profile of minimum instances = 2 and maximum instances = 10.</span></span> <span data-ttu-id="0583e-206">Ebben a példában szabályok konfigurált tooscale kibővített lesz, ha hello várólista hello üzenetek száma nagyobb, mint 10 és a skála hello üzenetek száma hello várólistán kevesebb mint 3 esetén.</span><span class="sxs-lookup"><span data-stu-id="0583e-206">In this example, rules are configured tooscale-out when hello message count in hello queue is greater than 10 and scale-in when hello message count in hello queue is less than 3.</span></span> <span data-ttu-id="0583e-207">Most hello erőforrás méretezhető 2 és 10 példányai között.</span><span class="sxs-lookup"><span data-stu-id="0583e-207">So now hello resource can scale between 2 and 10 instances.</span></span>

<span data-ttu-id="0583e-208">Emellett nincs egy ismétlődő profil hétfő beállítása.</span><span class="sxs-lookup"><span data-stu-id="0583e-208">In addition, there is a recurring profile set for Monday.</span></span> <span data-ttu-id="0583e-209">A példányok minimális érték = 2 és a maximális példányok = 12.</span><span class="sxs-lookup"><span data-stu-id="0583e-209">It is set for minimum instances = 2 and maximum instances = 12.</span></span> <span data-ttu-id="0583e-210">Ez azt jelenti, hétfőn hello első alkalommal automatikus skálázás ellenőrzi a feltétel 2 hello példányszám esetén toohello új legalább 3-as méretezés.</span><span class="sxs-lookup"><span data-stu-id="0583e-210">This means on Monday, hello first time autoscale checks for this condition, if hello instance count is 2, it scales toohello new minimum of 3.</span></span> <span data-ttu-id="0583e-211">Mindaddig, amíg az automatikus skálázás továbbra is fennáll, ez a profil feltétel egyezik (hétfő) toofind, akkor csak feldolgozza hello CPU-alapú scale-out/a szabályok konfigurálva ehhez a profilhoz.</span><span class="sxs-lookup"><span data-stu-id="0583e-211">As long as autoscale continues toofind this profile condition matched (Monday), it only processes hello CPU-based scale-out/in rules configured for this profile.</span></span> <span data-ttu-id="0583e-212">Most azt nem ellenőrzi az hello várólistájának hossza.</span><span class="sxs-lookup"><span data-stu-id="0583e-212">At this time, it does not check for hello queue length.</span></span> <span data-ttu-id="0583e-213">Azonban ha is hello várólista hossza feltétel toobe be van jelölve, bele kell foglalni hello alapértelmezett profilból ezeket a szabályokat, valamint a hétfő profil.</span><span class="sxs-lookup"><span data-stu-id="0583e-213">However, if you also want hello queue length condition toobe checked, you should include those rules from hello default profile as well in your Monday profile.</span></span>

<span data-ttu-id="0583e-214">Hasonlóképpen automatikus skálázás hátsó toohello alapértelmezett profil vált, ha először ellenőrzi, ha hello minimális és maximális feltételek teljesülnek-e.</span><span class="sxs-lookup"><span data-stu-id="0583e-214">Similarly, when autoscale switches back toohello default profile, it first checks if hello minimum and maximum conditions are met.</span></span> <span data-ttu-id="0583e-215">Ha hello több példányban hello időpontban 12, méretezés too10, az engedélyezett maximális hello hello alapértelmezett profilt.</span><span class="sxs-lookup"><span data-stu-id="0583e-215">If hello number of instances at hello time is 12, it scales in too10, hello maximum allowed for hello default profile.</span></span>

![automatikus skálázási beállításokat](./media/insights-autoscale-best-practices/insights-autoscale-best-practices-2.png)

### <a name="considerations-for-scaling-when-multiple-rules-are-configured-in-a-profile"></a><span data-ttu-id="0583e-217">Több szabály profil konfigurálásakor skálázás szempontjai</span><span class="sxs-lookup"><span data-stu-id="0583e-217">Considerations for scaling when multiple rules are configured in a profile</span></span>
<span data-ttu-id="0583e-218">Előfordulhatnak olyan esetek, ahol előfordulhat, hogy tooset több szabály profilban.</span><span class="sxs-lookup"><span data-stu-id="0583e-218">There are cases where you may have tooset multiple rules in a profile.</span></span> <span data-ttu-id="0583e-219">a következő automatikus skálázási szabályok hello használata szolgáltatások használatával, amikor több szabályok be vannak állítva.</span><span class="sxs-lookup"><span data-stu-id="0583e-219">hello following set of autoscale rules are used by services use when multiple rules are set.</span></span>

<span data-ttu-id="0583e-220">A *horizontális felskálázás*, automatikus skálázás fut, ha minden szabály teljesül.</span><span class="sxs-lookup"><span data-stu-id="0583e-220">On *scale out*, autoscale runs if any rule is met.</span></span>
<span data-ttu-id="0583e-221">A *méretezési a*, automatikus skálázás megkövetelése minden szabály teljesül toobe.</span><span class="sxs-lookup"><span data-stu-id="0583e-221">On *scale-in*, autoscale require all rules toobe met.</span></span>

<span data-ttu-id="0583e-222">tooillustrate, azt feltételezik, hogy rendelkezik-e a következő 4 automatikus skálázási szabályok hello:</span><span class="sxs-lookup"><span data-stu-id="0583e-222">tooillustrate, assume that you have hello following 4 autoscale rules:</span></span>

* <span data-ttu-id="0583e-223">Ha a CPU < 30 %, méretezési-1</span><span class="sxs-lookup"><span data-stu-id="0583e-223">If CPU < 30 %, scale-in by 1</span></span>
* <span data-ttu-id="0583e-224">Ha memória < 50 %-kal, méretezési-1</span><span class="sxs-lookup"><span data-stu-id="0583e-224">If Memory < 50%, scale-in by 1</span></span>
* <span data-ttu-id="0583e-225">Ha a CPU-> 75 %, kibővített 1</span><span class="sxs-lookup"><span data-stu-id="0583e-225">If CPU > 75%, scale-out by 1</span></span>
* <span data-ttu-id="0583e-226">Ha memória > 75 %, kibővített 1</span><span class="sxs-lookup"><span data-stu-id="0583e-226">If Memory > 75%, scale-out by 1</span></span>

<span data-ttu-id="0583e-227">Majd hello kövesse megy végbe:</span><span class="sxs-lookup"><span data-stu-id="0583e-227">Then hello follow occurs:</span></span>

* <span data-ttu-id="0583e-228">Ha CPU 76 % és memória 50 %-át, hogy a kibővített.</span><span class="sxs-lookup"><span data-stu-id="0583e-228">If CPU is 76% and Memory is 50%, we scale-out.</span></span>
* <span data-ttu-id="0583e-229">Ha CPU 50 %-át, és memória 76 % azt kibővített.</span><span class="sxs-lookup"><span data-stu-id="0583e-229">If CPU is 50% and Memory is 76% we scale-out.</span></span>

<span data-ttu-id="0583e-230">A hello, ugyanakkor, ha a CPU 25 % pedig memória 51 % automatikus skálázás does **nem** méretezési a.</span><span class="sxs-lookup"><span data-stu-id="0583e-230">On hello other hand, if CPU is 25% and memory is 51% autoscale does **not** scale-in.</span></span> <span data-ttu-id="0583e-231">Sorrendben tooscale-Processzor kell 29 % és a memória 49 %.</span><span class="sxs-lookup"><span data-stu-id="0583e-231">In order tooscale-in, CPU must be 29% and Memory 49%.</span></span>

### <a name="always-select-a-safe-default-instance-count"></a><span data-ttu-id="0583e-232">Mindig jelölje be a biztonságos alapértelmezett példányszám</span><span class="sxs-lookup"><span data-stu-id="0583e-232">Always select a safe default instance count</span></span>
<span data-ttu-id="0583e-233">automatikus skálázás méretezi a szolgáltatás toothat száma, amikor nem érhetők el a metrikák hello alapértelmezett példányszám fontos.</span><span class="sxs-lookup"><span data-stu-id="0583e-233">hello default instance count is important autoscale scales your service toothat count when metrics are not available.</span></span> <span data-ttu-id="0583e-234">Ezért válasszon egy alapértelmezett példányok száma, amelyek a munkaterhelések biztonságos.</span><span class="sxs-lookup"><span data-stu-id="0583e-234">Therefore, select a default instance count that's safe for your workloads.</span></span>

### <a name="configure-autoscale-notifications"></a><span data-ttu-id="0583e-235">Értesítések automatikus skálázás konfigurálása</span><span class="sxs-lookup"><span data-stu-id="0583e-235">Configure autoscale notifications</span></span>
<span data-ttu-id="0583e-236">Automatikus skálázás értesíti hello rendszergazdák és közreműködő szerepkörrel rendelkező személyek hello erőforrás e-mailben Ha hello a következő feltételek bármelyike teljesül:</span><span class="sxs-lookup"><span data-stu-id="0583e-236">Autoscale notifies hello administrators and contributors of hello resource by email if any of hello following conditions occur:</span></span>

* <span data-ttu-id="0583e-237">automatikus skálázás szolgáltatás tootake művelet sikertelen lesz.</span><span class="sxs-lookup"><span data-stu-id="0583e-237">autoscale service fails tootake an action.</span></span>
* <span data-ttu-id="0583e-238">Az automatikus skálázás szolgáltatás toomake méretezési döntést metrikák nem érhetők el.</span><span class="sxs-lookup"><span data-stu-id="0583e-238">Metrics are not available for autoscale service toomake a scale decision.</span></span>
* <span data-ttu-id="0583e-239">Adatok gyűjtése le elérhető (helyreállítási) újra toomake méretezési döntést hoznak.</span><span class="sxs-lookup"><span data-stu-id="0583e-239">Metrics are available (recovery) again toomake a scale decision.</span></span>
  <span data-ttu-id="0583e-240">Ezenkívül toohello feltételek fent, konfigurálhatja sikeres skálázási műveletekhez értesítést kap e-mailben vagy webhook értesítések tooget.</span><span class="sxs-lookup"><span data-stu-id="0583e-240">In addition toohello conditions above, you can configure email or webhook notifications tooget notified for successful scale actions.</span></span>
  
<span data-ttu-id="0583e-241">Az tevékenységnapló riasztási toomonitor hello állapotát hello automatikus skálázás motor is használható.</span><span class="sxs-lookup"><span data-stu-id="0583e-241">You can also use an Activity Log alert toomonitor hello health of hello autoscale engine.</span></span> <span data-ttu-id="0583e-242">Az alábbiakban példákat túl[hozzon létre egy tevékenység napló riasztási toomonitor az előfizetés minden automatikus skálázási motor műveletek](https://github.com/Azure/azure-quickstart-templates/tree/master/monitor-autoscale-alert) vagy túl[hozzon létre egy tevékenység napló riasztási toomonitor összes sikertelen automatikus skálázás skála / a műveletek kiterjesztése az előfizetés](https://github.com/Azure/azure-quickstart-templates/tree/master/monitor-autoscale-failed-alert).</span><span class="sxs-lookup"><span data-stu-id="0583e-242">Here are examples too[create an Activity Log Alert toomonitor all autoscale engine operations on your subscription](https://github.com/Azure/azure-quickstart-templates/tree/master/monitor-autoscale-alert) or too[create an Activity Log Alert toomonitor all failed autoscale scale in/scale out operations on your subscription](https://github.com/Azure/azure-quickstart-templates/tree/master/monitor-autoscale-failed-alert).</span></span>

## <a name="next-steps"></a><span data-ttu-id="0583e-243">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="0583e-243">Next Steps</span></span>
- [<span data-ttu-id="0583e-244">Hozzon létre egy tevékenység napló riasztási toomonitor az előfizetés minden automatikus skálázási motor műveleteket.</span><span class="sxs-lookup"><span data-stu-id="0583e-244">Create an Activity Log Alert toomonitor all autoscale engine operations on your subscription.</span></span>](https://github.com/Azure/azure-quickstart-templates/tree/master/monitor-autoscale-alert)
- [<span data-ttu-id="0583e-245">Hozzon létre egy tevékenység napló riasztási toomonitor összes sikertelen automatikus skálázás skála / műveleteket az előfizetés kiterjesztése</span><span class="sxs-lookup"><span data-stu-id="0583e-245">Create an Activity Log Alert toomonitor all failed autoscale scale in/scale out operations on your subscription</span></span>](https://github.com/Azure/azure-quickstart-templates/tree/master/monitor-autoscale-failed-alert)
