---
title: "szerepkörök, engedélyek és biztonsági Azure megfigyelővel használatába aaaGet |} Microsoft Docs"
description: "Ismerje meg, hogyan toouse Azure figyelő beépített szerepkörök és engedélyek toorestrict hozzáférés toomonitoring erőforrásokat."
author: johnkemnetz
manager: orenr
editor: 
services: monitoring-and-diagnostics
documentationcenter: monitoring-and-diagnostics
ms.assetid: 2686e53b-72f0-4312-bcd3-3dc1b4a9b912
ms.service: monitoring-and-diagnostics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 09/26/2016
ms.author: johnkem
ms.openlocfilehash: 44fdf2a697050309480dfc164ebab51445b19bc8
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/06/2017
---
# <a name="get-started-with-roles-permissions-and-security-with-azure-monitor"></a><span data-ttu-id="11349-103">Ismerkedés a szerepkörök, engedélyek és biztonságának és az Azure-figyelő</span><span class="sxs-lookup"><span data-stu-id="11349-103">Get started with roles, permissions, and security with Azure Monitor</span></span>
<span data-ttu-id="11349-104">Sok toostrictly szükséges hozzáférési toomonitoring adatok és beállítások szabályozzák.</span><span class="sxs-lookup"><span data-stu-id="11349-104">Many teams need toostrictly regulate access toomonitoring data and settings.</span></span> <span data-ttu-id="11349-105">Például, ha vannak olyan dolgozó kizárólag figyelése (a támogatási szakértők, devops mérnökök) csoport tagjai, vagy ha egy felügyelt szolgáltató használja, érdemes lehet őket elérni a figyelési adatok közben korlátozó saját képességét toocreate tooonly toogrant, módosít, vagy törli az erőforrást.</span><span class="sxs-lookup"><span data-stu-id="11349-105">For example, if you have team members who work exclusively on monitoring (support engineers, devops engineers) or if you use a managed service provider, you may want toogrant them access tooonly monitoring data while restricting their ability toocreate, modify, or delete resources.</span></span> <span data-ttu-id="11349-106">Ez a cikk bemutatja, hogyan tooquickly alkalmazni egy beépített figyelési RBAC szerepkör tooa felhasználói az Azure-ban vagy a felhasználókat, akiknek korlátozott felügyeleti engedélyekkel kell a saját egyéni szerepkör létrehozása.</span><span class="sxs-lookup"><span data-stu-id="11349-106">This article shows how tooquickly apply a built-in monitoring RBAC role tooa user in Azure or build your own custom role for a user who needs limited monitoring permissions.</span></span> <span data-ttu-id="11349-107">Majd az Azure-figyelő kapcsolódó erőforrások biztonsági szempontjai mutatjuk be, és hogyan korlátozhatja a hozzáférést toohello adatokat tartalmaznak.</span><span class="sxs-lookup"><span data-stu-id="11349-107">It then discusses security considerations for your Azure Monitor-related resources and how you can limit access toohello data they contain.</span></span>

## <a name="built-in-monitoring-roles"></a><span data-ttu-id="11349-108">Beépített figyelési szerepkörök</span><span class="sxs-lookup"><span data-stu-id="11349-108">Built-in monitoring roles</span></span>
<span data-ttu-id="11349-109">Azure figyelő beépített szerepkörök felelősek tervezett toohelp korlát hozzáférés tooresources továbbra is engedélyezze azokat egy előfizetésben infrastruktúra tooobtain, és konfigurálja a szükséges hello adatokhoz.</span><span class="sxs-lookup"><span data-stu-id="11349-109">Azure Monitor’s built-in roles are designed toohelp limit access tooresources in a subscription while still enabling those responsible for monitoring infrastructure tooobtain and configure hello data they need.</span></span> <span data-ttu-id="11349-110">Az Azure két out-of-az-box szerepkörök biztosít: A figyelési olvasó és a figyelés közreműködő.</span><span class="sxs-lookup"><span data-stu-id="11349-110">Azure Monitor provides two out-of-the-box roles: A Monitoring Reader and a Monitoring Contributor.</span></span>

### <a name="monitoring-reader"></a><span data-ttu-id="11349-111">Figyelési olvasó</span><span class="sxs-lookup"><span data-stu-id="11349-111">Monitoring Reader</span></span>
<span data-ttu-id="11349-112">Hello figyelési olvasó szerepkört személyek megtekintheti összes figyelési adatokat egy előfizetésben, de nem minden erőforrás módosítása vagy szerkesztheti beállítások kapcsolódó toomonitoring erőforrásokat.</span><span class="sxs-lookup"><span data-stu-id="11349-112">People assigned hello Monitoring Reader role can view all monitoring data in a subscription but cannot modify any resource or edit any settings related toomonitoring resources.</span></span> <span data-ttu-id="11349-113">A szerepkör a vállalatnál, például a támogatási szolgálathoz vagy a műveletek mérnökök, ki kell tudni toobe megfelelő:</span><span class="sxs-lookup"><span data-stu-id="11349-113">This role is appropriate for users in an organization, such as support or operations engineers, who need toobe able to:</span></span>

* <span data-ttu-id="11349-114">Figyelési irányítópult megtekintése hello portálon, és a saját személyes figyelési irányítópultot létrehozni.</span><span class="sxs-lookup"><span data-stu-id="11349-114">View monitoring dashboards in hello portal and create their own private monitoring dashboards.</span></span>
* <span data-ttu-id="11349-115">Lekérdezés hello segítségével metrikáihoz [Azure figyelő REST API](https://msdn.microsoft.com/library/azure/dn931930.aspx), [PowerShell-parancsmagok](insights-powershell-samples.md), vagy [platformfüggetlen parancssori felület](insights-cli-samples.md).</span><span class="sxs-lookup"><span data-stu-id="11349-115">Query for metrics using hello [Azure Monitor REST API](https://msdn.microsoft.com/library/azure/dn931930.aspx), [PowerShell cmdlets](insights-powershell-samples.md), or [cross-platform CLI](insights-cli-samples.md).</span></span>
* <span data-ttu-id="11349-116">Lekérdezés hello tevékenységnapló hello portál, az Azure figyelő REST API-t, a PowerShell-parancsmagok vagy a platformfüggetlen parancssori felület használatával.</span><span class="sxs-lookup"><span data-stu-id="11349-116">Query hello Activity Log using hello portal, Azure Monitor REST API, PowerShell cmdlets, or cross-platform CLI.</span></span>
* <span data-ttu-id="11349-117">Nézet hello [diagnosztikai beállítások](monitoring-overview-of-diagnostic-logs.md#resource-diagnostic-settings) erőforrás.</span><span class="sxs-lookup"><span data-stu-id="11349-117">View hello [diagnostic settings](monitoring-overview-of-diagnostic-logs.md#resource-diagnostic-settings) for a resource.</span></span>
* <span data-ttu-id="11349-118">Nézet hello [profilt naplózni](monitoring-overview-activity-logs.md#export-the-activity-log-with-a-log-profile) az előfizetéshez.</span><span class="sxs-lookup"><span data-stu-id="11349-118">View hello [log profile](monitoring-overview-activity-logs.md#export-the-activity-log-with-a-log-profile) for a subscription.</span></span>
* <span data-ttu-id="11349-119">Automatikus skálázási beállítások megtekintéséhez.</span><span class="sxs-lookup"><span data-stu-id="11349-119">View autoscale settings.</span></span>
* <span data-ttu-id="11349-120">Riasztási tevékenység megtekintése és a beállítások.</span><span class="sxs-lookup"><span data-stu-id="11349-120">View alert activity and settings.</span></span>
* <span data-ttu-id="11349-121">Az Application Insights adatokat, és AI Analytics adatainak megtekintéséhez.</span><span class="sxs-lookup"><span data-stu-id="11349-121">Access Application Insights data and view data in AI Analytics.</span></span>
* <span data-ttu-id="11349-122">Keresési Naplóelemzés (OMS) adatai hello munkaterület használati adatokat is beleértve.</span><span class="sxs-lookup"><span data-stu-id="11349-122">Search Log Analytics (OMS) workspace data including usage data for hello workspace.</span></span>
* <span data-ttu-id="11349-123">Naplóelemzés (OMS) felügyeleti csoportoknak a megtekintése.</span><span class="sxs-lookup"><span data-stu-id="11349-123">View Log Analytics (OMS) management groups.</span></span>
* <span data-ttu-id="11349-124">Hello Naplóelemzés (OMS) keresési séma beolvasása.</span><span class="sxs-lookup"><span data-stu-id="11349-124">Retrieve hello Log Analytics (OMS) search schema.</span></span>
* <span data-ttu-id="11349-125">Lista Naplóelemzés (OMS) eszközintelligencia csomagokat.</span><span class="sxs-lookup"><span data-stu-id="11349-125">List Log Analytics (OMS) intelligence packs.</span></span>
* <span data-ttu-id="11349-126">Kérje le, majd Naplóelemzés (OMS) mentett keresések hajtható végre.</span><span class="sxs-lookup"><span data-stu-id="11349-126">Retrieve and execute Log Analytics (OMS) saved searches.</span></span>
* <span data-ttu-id="11349-127">Hello Naplóelemzés (OMS) tárolási konfigurációt beolvasása.</span><span class="sxs-lookup"><span data-stu-id="11349-127">Retrieve hello Log Analytics (OMS) storage configuration.</span></span>

> [!NOTE]
> <span data-ttu-id="11349-128">Ez a szerepkör nem ad adatfolyamként továbbított tooan eseményközpont vagy a storage-fiókban tárolt olvasási hozzáférés toolog adatokat.</span><span class="sxs-lookup"><span data-stu-id="11349-128">This role does not give read access toolog data that has been streamed tooan event hub or stored in a storage account.</span></span> <span data-ttu-id="11349-129">[Lásd az alábbi](#security-considerations-for-monitoring-data) toothese erőforrások eléréséhez konfigurálásával kapcsolatos információkat.</span><span class="sxs-lookup"><span data-stu-id="11349-129">[See below](#security-considerations-for-monitoring-data) for information on configuring access toothese resources.</span></span>
> 
> 

### <a name="monitoring-contributor"></a><span data-ttu-id="11349-130">A közreműködői figyelése</span><span class="sxs-lookup"><span data-stu-id="11349-130">Monitoring Contributor</span></span>
<span data-ttu-id="11349-131">Hozzárendelt személyek hello figyelési közreműködői szerepkört is összes figyelési adatok megtekintése az előfizetés és hozzon létre vagy figyelési beállítások azonban nem tudja módosítani összes erőforrását.</span><span class="sxs-lookup"><span data-stu-id="11349-131">People assigned hello Monitoring Contributor role can view all monitoring data in a subscription and create or modify monitoring settings, but cannot modify any other resources.</span></span> <span data-ttu-id="11349-132">Ez a szerepkör felülbírálja a hello figyelési olvasó szerepkört, és egy szervezet figyelési team vagy felügyelt szolgáltatók példányaik, továbbá a fenti toohello engedélyeket is toobe tudni tagjai számára megfelelő:</span><span class="sxs-lookup"><span data-stu-id="11349-132">This role is a superset of hello Monitoring Reader role, and is appropriate for members of an organization’s monitoring team or managed service providers who, in addition toohello permissions above, also need toobe able to:</span></span>

* <span data-ttu-id="11349-133">Tegye közzé a figyelési irányítópult megosztott irányítópultként.</span><span class="sxs-lookup"><span data-stu-id="11349-133">Publish monitoring dashboards as a shared dashboard.</span></span>
* <span data-ttu-id="11349-134">Állítsa be [diagnosztikai beállítások](monitoring-overview-of-diagnostic-logs.md#resource-diagnostic-settings) egy resource.* számára</span><span class="sxs-lookup"><span data-stu-id="11349-134">Set [diagnostic settings](monitoring-overview-of-diagnostic-logs.md#resource-diagnostic-settings) for a resource.*</span></span>
* <span data-ttu-id="11349-135">Set hello [profilt naplózni](monitoring-overview-activity-logs.md#export-the-activity-log-with-a-log-profile) egy subscription.* számára</span><span class="sxs-lookup"><span data-stu-id="11349-135">Set hello [log profile](monitoring-overview-activity-logs.md#export-the-activity-log-with-a-log-profile) for a subscription.*</span></span>
* <span data-ttu-id="11349-136">Riasztási tevékenység és a beállítások megadásához.</span><span class="sxs-lookup"><span data-stu-id="11349-136">Set alert activity and settings.</span></span>
* <span data-ttu-id="11349-137">Az Application Insights webalkalmazás-tesztek és összetevők létrehozása.</span><span class="sxs-lookup"><span data-stu-id="11349-137">Create Application Insights web tests and components.</span></span>
* <span data-ttu-id="11349-138">Naplóelemzés (OMS) munkaterületén a megosztott kulcsok szükségesek.</span><span class="sxs-lookup"><span data-stu-id="11349-138">List Log Analytics (OMS) workspace shared keys.</span></span>
* <span data-ttu-id="11349-139">Engedélyezi vagy letiltja eszközintelligencia csomagok Naplóelemzés (OMS).</span><span class="sxs-lookup"><span data-stu-id="11349-139">Enable or disable Log Analytics (OMS) intelligence packs.</span></span>
* <span data-ttu-id="11349-140">Hozzon létre és törlése, Naplóelemzés (OMS) mentett keresések hajtható végre.</span><span class="sxs-lookup"><span data-stu-id="11349-140">Create and delete and execute Log Analytics (OMS) saved searches.</span></span>
* <span data-ttu-id="11349-141">Hozzon létre, és törölni hello Naplóelemzés (OMS).</span><span class="sxs-lookup"><span data-stu-id="11349-141">Create and delete hello Log Analytics (OMS) storage configuration.</span></span>

<span data-ttu-id="11349-142">* felhasználói külön is engedéllyel kell rendelkezni ListKeys hello célként megadott erőforrás (tárolási fiók vagy esemény hub névtér) tooset napló profil vagy diagnosztikai beállítást.</span><span class="sxs-lookup"><span data-stu-id="11349-142">*user must also separately be granted ListKeys permission on hello target resource (storage account or event hub namespace) tooset a log profile or diagnostic setting.</span></span>

> [!NOTE]
> <span data-ttu-id="11349-143">Ez a szerepkör nem ad adatfolyamként továbbított tooan eseményközpont vagy a storage-fiókban tárolt olvasási hozzáférés toolog adatokat.</span><span class="sxs-lookup"><span data-stu-id="11349-143">This role does not give read access toolog data that has been streamed tooan event hub or stored in a storage account.</span></span> <span data-ttu-id="11349-144">[Lásd az alábbi](#security-considerations-for-monitoring-data) toothese erőforrások eléréséhez konfigurálásával kapcsolatos információkat.</span><span class="sxs-lookup"><span data-stu-id="11349-144">[See below](#security-considerations-for-monitoring-data) for information on configuring access toothese resources.</span></span>
> 
> 

## <a name="monitoring-permissions-and-custom-rbac-roles"></a><span data-ttu-id="11349-145">Figyelési engedélyek és egyéni RBAC-szerepkörök</span><span class="sxs-lookup"><span data-stu-id="11349-145">Monitoring permissions and custom RBAC roles</span></span>
<span data-ttu-id="11349-146">Ha beépített szerepkörök fent hello nem igényeihez hello pontos a csoport, akkor [hozzon létre egy egyéni RBAC szerepkör](../active-directory/role-based-access-control-custom-roles.md) részletesebb engedélyekkel.</span><span class="sxs-lookup"><span data-stu-id="11349-146">If hello above built-in roles don’t meet hello exact needs of your team, you can [create a custom RBAC role](../active-directory/role-based-access-control-custom-roles.md) with more granular permissions.</span></span> <span data-ttu-id="11349-147">Az alábbiakban hello közös Azure RBAC-figyelő műveletek azok leírásait tartalmazza.</span><span class="sxs-lookup"><span data-stu-id="11349-147">Below are hello common Azure Monitor RBAC operations with their descriptions.</span></span>

| <span data-ttu-id="11349-148">Művelet</span><span class="sxs-lookup"><span data-stu-id="11349-148">Operation</span></span> | <span data-ttu-id="11349-149">Leírás</span><span class="sxs-lookup"><span data-stu-id="11349-149">Description</span></span> |
| --- | --- |
| <span data-ttu-id="11349-150">Microsoft.Insights/AlertRules/[Read, írási, törlési]</span><span class="sxs-lookup"><span data-stu-id="11349-150">Microsoft.Insights/AlertRules/[Read, Write, Delete]</span></span> |<span data-ttu-id="11349-151">Olvasási, írási és törlési riasztási szabályok.</span><span class="sxs-lookup"><span data-stu-id="11349-151">Read/write/delete alert rules.</span></span> |
| <span data-ttu-id="11349-152">Microsoft.Insights/AlertRules/Incidents/Read</span><span class="sxs-lookup"><span data-stu-id="11349-152">Microsoft.Insights/AlertRules/Incidents/Read</span></span> |<span data-ttu-id="11349-153">A riasztási szabályok listázása incidensek (hello riasztási szabály alatt indított előzmények).</span><span class="sxs-lookup"><span data-stu-id="11349-153">List incidents (history of hello alert rule being triggered) for alert rules.</span></span> <span data-ttu-id="11349-154">Ez csak érvényes toohello portálon.</span><span class="sxs-lookup"><span data-stu-id="11349-154">This only applies toohello portal.</span></span> |
| <span data-ttu-id="11349-155">Microsoft.Insights/AutoscaleSettings/[Read, írási, törlési]</span><span class="sxs-lookup"><span data-stu-id="11349-155">Microsoft.Insights/AutoscaleSettings/[Read, Write, Delete]</span></span> |<span data-ttu-id="11349-156">Olvasási, írási és törlési automatikus skálázási beállításokat.</span><span class="sxs-lookup"><span data-stu-id="11349-156">Read/write/delete autoscale settings.</span></span> |
| <span data-ttu-id="11349-157">Microsoft.Insights/DiagnosticSettings/[Read, írási, törlési]</span><span class="sxs-lookup"><span data-stu-id="11349-157">Microsoft.Insights/DiagnosticSettings/[Read, Write, Delete]</span></span> |<span data-ttu-id="11349-158">Olvasási, írási és törlési diagnosztikai beállítások.</span><span class="sxs-lookup"><span data-stu-id="11349-158">Read/write/delete diagnostic settings.</span></span> |
| <span data-ttu-id="11349-159">Microsoft.Insights/eventtypes/digestevents/Read</span><span class="sxs-lookup"><span data-stu-id="11349-159">Microsoft.Insights/eventtypes/digestevents/Read</span></span> |<span data-ttu-id="11349-160">Ez az engedély szükséges tooActivity naplók hello portálon keresztül elérő felhasználók szükség.</span><span class="sxs-lookup"><span data-stu-id="11349-160">This permission is necessary for users who need access tooActivity Logs via hello portal.</span></span> |
| <span data-ttu-id="11349-161">Microsoft.Insights/eventtypes/values/Read</span><span class="sxs-lookup"><span data-stu-id="11349-161">Microsoft.Insights/eventtypes/values/Read</span></span> |<span data-ttu-id="11349-162">Tevékenységnapló események (felügyeleti események) egy előfizetésben listában.</span><span class="sxs-lookup"><span data-stu-id="11349-162">List Activity Log events (management events) in a subscription.</span></span> <span data-ttu-id="11349-163">Ez az engedély alkalmazható tooboth programozott és portál toohello tevékenységnapló.</span><span class="sxs-lookup"><span data-stu-id="11349-163">This permission is applicable tooboth programmatic and portal access toohello Activity Log.</span></span> |
| <span data-ttu-id="11349-164">Microsoft.Insights/LogDefinitions/Read</span><span class="sxs-lookup"><span data-stu-id="11349-164">Microsoft.Insights/LogDefinitions/Read</span></span> |<span data-ttu-id="11349-165">Ez az engedély szükséges tooActivity naplók hello portálon keresztül elérő felhasználók szükség.</span><span class="sxs-lookup"><span data-stu-id="11349-165">This permission is necessary for users who need access tooActivity Logs via hello portal.</span></span> |
| <span data-ttu-id="11349-166">Microsoft.Insights/MetricDefinitions/Read</span><span class="sxs-lookup"><span data-stu-id="11349-166">Microsoft.Insights/MetricDefinitions/Read</span></span> |<span data-ttu-id="11349-167">Olvassa el a metrikai meghatározásainak (erőforrás elérhető metrika típusok listája).</span><span class="sxs-lookup"><span data-stu-id="11349-167">Read metric definitions (list of available metric types for a resource).</span></span> |
| <span data-ttu-id="11349-168">Microsoft.Insights/Metrics/Read</span><span class="sxs-lookup"><span data-stu-id="11349-168">Microsoft.Insights/Metrics/Read</span></span> |<span data-ttu-id="11349-169">Egy erőforrás olvasni.</span><span class="sxs-lookup"><span data-stu-id="11349-169">Read metrics for a resource.</span></span> |

> [!NOTE]
> <span data-ttu-id="11349-170">Tooalerts, a diagnosztikai beállításokat és a metrikák elérhető erőforrás megköveteli, hogy hello felhasználó rendelkezik-e olvasási hozzáférést toohello erőforrástípustól és a hatókör erőforrás.</span><span class="sxs-lookup"><span data-stu-id="11349-170">Access tooalerts, diagnostic settings, and metrics for a resource requires that hello user has Read access toohello resource type and scope of that resource.</span></span> <span data-ttu-id="11349-171">Létrehozás ("write"), hogy archívumokat tooa tárolási fiók vagy adatfolyamok tooevent hubok igényel hello felhasználói tooalso diagnosztikai beállítás vagy a napló profil engedélye ListKeys hello cél erőforráson.</span><span class="sxs-lookup"><span data-stu-id="11349-171">Creating (“write”) a diagnostic setting or log profile that archives tooa storage account or streams tooevent hubs requires hello user tooalso have ListKeys permission on hello target resource.</span></span>
> 
> 

<span data-ttu-id="11349-172">Például táblázat felett hello segítségével létrehozhat egy egyéni RBAC szerepkör egy "tevékenység napló olvasó" ehhez hasonló:</span><span class="sxs-lookup"><span data-stu-id="11349-172">For example, using hello above table you could create a custom RBAC role for an “Activity Log Reader” like this:</span></span>

```powershell
$role = Get-AzureRmRoleDefinition "Reader"
$role.Id = $null
$role.Name = "Activity Log Reader"
$role.Description = "Can view activity logs."
$role.Actions.Clear()
$role.Actions.Add("Microsoft.Insights/eventtypes/*")
$role.AssignableScopes.Clear()
$role.AssignableScopes.Add("/subscriptions/mySubscription")
New-AzureRmRoleDefinition -Role $role 
```

## <a name="security-considerations-for-monitoring-data"></a><span data-ttu-id="11349-173">Figyelési adatok biztonsági szempontjai</span><span class="sxs-lookup"><span data-stu-id="11349-173">Security considerations for monitoring data</span></span>
<span data-ttu-id="11349-174">Figyelési adatok – különösen naplófájlok – tartalmazhatnak bizalmas adatokat, például az IP-címek vagy felhasználó neve.</span><span class="sxs-lookup"><span data-stu-id="11349-174">Monitoring data—particularly log files—can contain sensitive information, such as IP addresses or user names.</span></span> <span data-ttu-id="11349-175">Három alapvető képernyőn tartalmaz figyelési adatok az Azure-ból:</span><span class="sxs-lookup"><span data-stu-id="11349-175">Monitoring data from Azure comes in three basic forms:</span></span>

1. <span data-ttu-id="11349-176">hello tevékenységnapló, amely minden vezérlő-vezérlősík műveleteket ismerteti az Azure-előfizetéshez.</span><span class="sxs-lookup"><span data-stu-id="11349-176">hello Activity Log, which describes all control-plane actions on your Azure subscription.</span></span>
2. <span data-ttu-id="11349-177">Diagnosztikai naplók, amelyek az erőforrás által kibocsátott naplókat.</span><span class="sxs-lookup"><span data-stu-id="11349-177">Diagnostic Logs, which are logs emitted by a resource.</span></span>
3. <span data-ttu-id="11349-178">Metrika, amely erőforrások által kibocsátott.</span><span class="sxs-lookup"><span data-stu-id="11349-178">Metrics, which are emitted by resources.</span></span>

<span data-ttu-id="11349-179">Ezek az adattípusok három tárolhatja a storage-fiók, vagy folyamatos átviteli tooEvent Hub, amelyek mindkettő általános célú Azure-erőforrások.</span><span class="sxs-lookup"><span data-stu-id="11349-179">All three of these data types can be stored in a storage account or streamed tooEvent Hub, both of which are general-purpose Azure resources.</span></span> <span data-ttu-id="11349-180">Mivel ezek az általános célú erőforrások, létrehozása, törlése és hozzájuk férni egy olyan privileged művelet általában a rendszergazda számára van fenntartva.</span><span class="sxs-lookup"><span data-stu-id="11349-180">Because these are general-purpose resources, creating, deleting, and accessing them is a privileged operation usually reserved for an administrator.</span></span> <span data-ttu-id="11349-181">Javasoljuk, hogy a következő eljárásokkal kapcsolatos megfigyelési erőforrások tooprevent visszaélés hello használata:</span><span class="sxs-lookup"><span data-stu-id="11349-181">We suggest that you use hello following practices for monitoring-related resources tooprevent misuse:</span></span>

* <span data-ttu-id="11349-182">A figyelési adatok dedikált tárolási fiók használata.</span><span class="sxs-lookup"><span data-stu-id="11349-182">Use a single, dedicated storage account for monitoring data.</span></span> <span data-ttu-id="11349-183">Ha tooseparate figyelési adatok több tárfiókot az kell, ne ossza meg a storage-fiókok között figyelés használatát, és előfordulhat, hogy nem figyelési adatok, ez véletlenül adjon azok, akik csak kell adatelérés toomonitoring (pl..</span><span class="sxs-lookup"><span data-stu-id="11349-183">If you need tooseparate monitoring data into multiple storage accounts, never share usage of a storage account between monitoring and non-monitoring data, as this may inadvertently give those who only need access toomonitoring data (eg.</span></span> <span data-ttu-id="11349-184">egy külső SIEM) toonon figyelési adatok eléréséhez.</span><span class="sxs-lookup"><span data-stu-id="11349-184">a third-party SIEM) access toonon-monitoring data.</span></span>
* <span data-ttu-id="11349-185">Használjon egy dedikált a Service Bus vagy az Eseményközpont kiválasztásával névtér összes diagnosztikai beállítások között ugyanabból az okból a fenti hello.</span><span class="sxs-lookup"><span data-stu-id="11349-185">Use a single, dedicated Service Bus or Event Hub namespace across all diagnostic settings for hello same reason as above.</span></span>
* <span data-ttu-id="11349-186">Korlátozza a hozzáférést toomonitoring kapcsolódó tárfiókok vagy az event hubs egy külön erőforráscsoportban található tartja és [hatókört használja](../active-directory/role-based-access-control-what-is.md#basics-of-access-management-in-azure) a figyelési szerepkörök toolimit elérhetővé tooonly erőforráscsoporthoz.</span><span class="sxs-lookup"><span data-stu-id="11349-186">Limit access toomonitoring-related storage accounts or event hubs by keeping them in a separate resource group, and [use scope](../active-directory/role-based-access-control-what-is.md#basics-of-access-management-in-azure) on your monitoring roles toolimit access tooonly that resource group.</span></span>
* <span data-ttu-id="11349-187">Soha nem engedélyt hello ListKeys storage-fiókok vagy az event hubs előfizetési hatókört, amikor a felhasználó csak hozzáférés toomonitoring adatokra van szüksége.</span><span class="sxs-lookup"><span data-stu-id="11349-187">Never grant hello ListKeys permission for either storage accounts or event hubs at subscription scope when a user only needs access toomonitoring data.</span></span> <span data-ttu-id="11349-188">Ehelyett adjon az ezen engedélyek toohello felhasználó egy erőforrás vagy az erőforráscsoport (ha van egy dedikált figyelési erőforráscsoport) hatókör.</span><span class="sxs-lookup"><span data-stu-id="11349-188">Instead, give these permissions toohello user at a resource or resource group (if you have a dedicated monitoring resource group) scope.</span></span>

### <a name="limiting-access-toomonitoring-related-storage-accounts"></a><span data-ttu-id="11349-189">Korlátozó hozzáférési toomonitoring kapcsolatos storage-fiókok</span><span class="sxs-lookup"><span data-stu-id="11349-189">Limiting access toomonitoring-related storage accounts</span></span>
<span data-ttu-id="11349-190">Amikor egy felhasználó vagy alkalmazás toomonitoring adatok olyan tárfiókban kell elérni, érdemes [egy fiók SAS létre](https://msdn.microsoft.com/library/azure/mt584140.aspx) hello tárfiók, amely tartalmazza a szolgáltatási szint csak olvasási hozzáféréssel tooblob tárolóval figyelési adatokat.</span><span class="sxs-lookup"><span data-stu-id="11349-190">When a user or application needs access toomonitoring data in a storage account, you should [generate an Account SAS](https://msdn.microsoft.com/library/azure/mt584140.aspx) on hello storage account that contains monitoring data with service-level read-only access tooblob storage.</span></span> <span data-ttu-id="11349-191">A PowerShellben ez látható:</span><span class="sxs-lookup"><span data-stu-id="11349-191">In PowerShell, this might look like:</span></span>

```powershell
$context = New-AzureStorageContext -ConnectionString "[connection string for your monitoring Storage Account]"
$token = New-AzureStorageAccountSASToken -ResourceType Service -Service Blob -Permission "rl" -Context $context
```

<span data-ttu-id="11349-192">Majd adhat a hello token toohello entitást, amelyet a tooread adott tárfiókból, és azt listában, és olvassa el az összes BLOB storage-fiókhoz tartozó.</span><span class="sxs-lookup"><span data-stu-id="11349-192">You can then give hello token toohello entity that needs tooread from that storage account, and it can list and read from all blobs in that storage account.</span></span>

<span data-ttu-id="11349-193">Azt is megteheti Ha toocontrol kell ezt az engedélyt az RBAC, meg lehet adni, hogy entitás hello Microsoft.Storage/storageAccounts/listkeys/action engedélyt, hogy adott tárfiókok.</span><span class="sxs-lookup"><span data-stu-id="11349-193">Alternatively, if you need toocontrol this permission with RBAC, you can grant that entity hello Microsoft.Storage/storageAccounts/listkeys/action permission on that particular storage account.</span></span> <span data-ttu-id="11349-194">Erre akkor szükség a felhasználók, akik toobe képes tooset diagnosztikai beállítás vagy a napló profil tooarchive tooa tárfiók.</span><span class="sxs-lookup"><span data-stu-id="11349-194">This is necessary for users who need toobe able tooset a diagnostic setting or log profile tooarchive tooa storage account.</span></span> <span data-ttu-id="11349-195">Például létrehozhatja a következő egyéni RBAC szerepkör egy felhasználó vagy alkalmazás, amely csak a tooread egy tárfiókot az kell hello:</span><span class="sxs-lookup"><span data-stu-id="11349-195">For example, you could create hello following custom RBAC role for a user or application that only needs tooread from one storage account:</span></span>

```powershell
$role = Get-AzureRmRoleDefinition "Reader"
$role.Id = $null
$role.Name = "Monitoring Storage Account Reader"
$role.Description = "Can get hello storage account keys for a monitoring storage account."
$role.Actions.Clear()
$role.Actions.Add("Microsoft.Storage/storageAccounts/listkeys/action")
$role.Actions.Add("Microsoft.Storage/storageAccounts/Read")
$role.AssignableScopes.Clear()
$role.AssignableScopes.Add("/subscriptions/mySubscription/resourceGroups/myResourceGroup/providers/Microsoft.Storage/storageAccounts/myMonitoringStorageAccount")
New-AzureRmRoleDefinition -Role $role 
```

> [!WARNING]
> <span data-ttu-id="11349-196">hello ListKeys engedély lehetővé teszi, hogy a hello felhasználói toolist hello elsődleges és másodlagos tárfiók kulcsait.</span><span class="sxs-lookup"><span data-stu-id="11349-196">hello ListKeys permission enables hello user toolist hello primary and secondary storage account keys.</span></span> <span data-ttu-id="11349-197">Ezek a kulcsok hello felhasználó kap minden aláírt engedélyeket (olvasás, írás, blobok létrehozása, törlése, blobok stb.) összes aláírt szolgáltatások (blob, várólista, tábla, fájl), hogy a tárfiók.</span><span class="sxs-lookup"><span data-stu-id="11349-197">These keys grant hello user all signed permissions (read, write, create blobs, delete blobs, etc.) across all signed services (blob, queue, table, file) in that storage account.</span></span> <span data-ttu-id="11349-198">Egy fiók SAS, ha lehetséges, a fent leírt használatát javasoljuk.</span><span class="sxs-lookup"><span data-stu-id="11349-198">We recommend using an Account SAS described above when possible.</span></span>
> 
> 

### <a name="limiting-access-toomonitoring-related-event-hubs"></a><span data-ttu-id="11349-199">Korlátozó hozzáférési toomonitoring kapcsolatos az event hubs</span><span class="sxs-lookup"><span data-stu-id="11349-199">Limiting access toomonitoring-related event hubs</span></span>
<span data-ttu-id="11349-200">Hasonló mintát gyűjtheti az event hubs, de először meg kell toocreate egy dedikált figyelési engedélyezési szabályt.</span><span class="sxs-lookup"><span data-stu-id="11349-200">A similar pattern can be followed with event hubs, but first you need toocreate a dedicated Listen authorization rule.</span></span> <span data-ttu-id="11349-201">Ha azt szeretné, hogy toogrant access tooan alkalmazást, amelyet csak a toolisten toomonitoring kapcsolatos eseményközpontokhoz, a hello, a következő:</span><span class="sxs-lookup"><span data-stu-id="11349-201">If you want toogrant access tooan application that only needs toolisten toomonitoring-related event hubs, do hello following:</span></span>

1. <span data-ttu-id="11349-202">Megosztott hozzáférési házirend létrehozása a figyelési adatok csak a figyelési JOGCÍMEKKEL rendelkező és folyamatos létrehozott hello esemény hub(s).</span><span class="sxs-lookup"><span data-stu-id="11349-202">Create a shared access policy on hello event hub(s) that were created for streaming monitoring data with only Listen claims.</span></span> <span data-ttu-id="11349-203">Ezt megteheti a hello portálon.</span><span class="sxs-lookup"><span data-stu-id="11349-203">This can be done in hello portal.</span></span> <span data-ttu-id="11349-204">Például akkor lehet, hogy neki "monitoringReadOnly."</span><span class="sxs-lookup"><span data-stu-id="11349-204">For example, you might call it “monitoringReadOnly.”</span></span> <span data-ttu-id="11349-205">Ha lehetséges érdemes toogive, amely közvetlenül toohello fogyasztói kulcs, és hagyja ki a hello tovább.</span><span class="sxs-lookup"><span data-stu-id="11349-205">If possible, you will want toogive that key directly toohello consumer and skip hello next step.</span></span>
2. <span data-ttu-id="11349-206">Ha hello fogyasztói toobe képes tooget hello kulcs alkalmi van szüksége, adja meg a hello felhasználói hello ListKeys művelet adott eseményközpont.</span><span class="sxs-lookup"><span data-stu-id="11349-206">If hello consumer needs toobe able tooget hello key ad-hoc, grant hello user hello ListKeys action for that event hub.</span></span> <span data-ttu-id="11349-207">Ez egyben toobe képes tooset diagnosztikai beállításának kell, és jelentkezzen profil toostream tooevent hubok felhasználók számára szükséges.</span><span class="sxs-lookup"><span data-stu-id="11349-207">This is also necessary for users who need toobe able tooset a diagnostic setting or log profile toostream tooevent hubs.</span></span> <span data-ttu-id="11349-208">Például előfordulhat, hogy létre RBAC-szabályt:</span><span class="sxs-lookup"><span data-stu-id="11349-208">For example, you might create an RBAC rule:</span></span>
   
   ```powershell
   $role = Get-AzureRmRoleDefinition "Reader"
   $role.Id = $null
   $role.Name = "Monitoring Event Hub Listener"
   $role.Description = "Can get hello key toolisten tooan event hub streaming monitoring data."
   $role.Actions.Clear()
   $role.Actions.Add("Microsoft.ServiceBus/namespaces/authorizationrules/listkeys/action")
   $role.Actions.Add("Microsoft.ServiceBus/namespaces/Read")
   $role.AssignableScopes.Clear()
   $role.AssignableScopes.Add("/subscriptions/mySubscription/resourceGroups/myResourceGroup/providers/Microsoft.ServiceBus/namespaces/mySBNameSpace")
   New-AzureRmRoleDefinition -Role $role 
   ```

## <a name="next-steps"></a><span data-ttu-id="11349-209">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="11349-209">Next steps</span></span>
* [<span data-ttu-id="11349-210">További tudnivalók a Szerepalapú és engedélyeket az erőforrás-kezelőben</span><span class="sxs-lookup"><span data-stu-id="11349-210">Read about RBAC and permissions in Resource Manager</span></span>](../active-directory/role-based-access-control-what-is.md)
* [<span data-ttu-id="11349-211">Olvassa el az Azure-ban figyelési hello áttekintése</span><span class="sxs-lookup"><span data-stu-id="11349-211">Read hello overview of monitoring in Azure</span></span>](monitoring-overview.md)

