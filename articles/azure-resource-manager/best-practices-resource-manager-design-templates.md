---
title: "aaaDesign Azure sablonok összetett megoldások |} Microsoft Docs"
description: "Azt mutatja be ajánlott eljárások az Azure Resource Manager sablonok összetett forgatókönyvek tervezése"
services: azure-resource-manager
documentationcenter: 
author: tfitzmac
manager: timlt
editor: tysonn
ms.assetid: ce1141d6-ece7-4976-acea-1db1f775409e
ms.service: azure-resource-manager
ms.workload: multiple
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 12/19/2016
ms.author: tomfitz
ms.openlocfilehash: aa45e9a46d79a6336b696cff8fd37f65fa449f11
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/06/2017
---
# <a name="design-patterns-for-azure-resource-manager-templates-when-deploying-complex-solutions"></a><span data-ttu-id="c0f82-103">Az Azure Resource Manager-sablonok összetett megoldások telepítésekor tervezési minták</span><span class="sxs-lookup"><span data-stu-id="c0f82-103">Design patterns for Azure Resource Manager templates when deploying complex solutions</span></span>
<span data-ttu-id="c0f82-104">Egy rugalmas megközelítéssel Azure Resource Manager-sablonok alapján telepítheti a komplex topológiákba gyorsan és következetesen legyenek.</span><span class="sxs-lookup"><span data-stu-id="c0f82-104">Using a flexible approach based on Azure Resource Manager templates, you can deploy complex topologies quickly and consistently.</span></span> <span data-ttu-id="c0f82-105">A központi telepítéseket könnyen ajánlatok fejlődnek core vagy halegyedeket esetek vagy az ügyfelek tooaccommodate változatait, módosíthatja.</span><span class="sxs-lookup"><span data-stu-id="c0f82-105">You can adapt these deployments easily as core offerings evolve or tooaccommodate variants for outlier scenarios or customers.</span></span>

<span data-ttu-id="c0f82-106">Ez a témakör egy nagyobb tanulmány részét képezi.</span><span class="sxs-lookup"><span data-stu-id="c0f82-106">This topic is part of a larger whitepaper.</span></span> <span data-ttu-id="c0f82-107">Töltse le a teljes papír tooread hello [globális osztály Azure Resource Manager sablonok szempontok és eljárások bizonyítása](http://download.microsoft.com/download/8/E/1/8E1DBEFA-CECE-4DC9-A813-93520A5D7CFE/World Class ARM Templates - Considerations and Proven Practices.pdf).</span><span class="sxs-lookup"><span data-stu-id="c0f82-107">tooread hello full paper, download [World Class Azure Resource Manager Templates Considerations and Proven Practices](http://download.microsoft.com/download/8/E/1/8E1DBEFA-CECE-4DC9-A813-93520A5D7CFE/World Class ARM Templates - Considerations and Proven Practices.pdf).</span></span>

<span data-ttu-id="c0f82-108">Sablonok együttesen alapjául szolgáló Azure Resource Manager hello alkalmazkodás és a JavaScript Object Notation (JSON) olvashatóság hello hello előnyeit.</span><span class="sxs-lookup"><span data-stu-id="c0f82-108">Templates combine hello benefits of hello underlying Azure Resource Manager with hello adaptability and readability of JavaScript Object Notation (JSON).</span></span> <span data-ttu-id="c0f82-109">Sablonok használatával:</span><span class="sxs-lookup"><span data-stu-id="c0f82-109">Using templates, you can:</span></span>

* <span data-ttu-id="c0f82-110">Topológiákat és a munkaterhelések következetesen kell telepíteni.</span><span class="sxs-lookup"><span data-stu-id="c0f82-110">Deploy topologies and their workloads consistently.</span></span>
* <span data-ttu-id="c0f82-111">Erőforráscsoportok használata az alkalmazásban az erőforrások kezelése.</span><span class="sxs-lookup"><span data-stu-id="c0f82-111">Manage all your resources in an application together using resource groups.</span></span>
* <span data-ttu-id="c0f82-112">Szerepköralapú hozzáférés-vezérlést (RBAC) toogrant megfelelő hozzáférési toousers, a csoportok és a szolgáltatások alkalmazni.</span><span class="sxs-lookup"><span data-stu-id="c0f82-112">Apply role-based access control (RBAC) toogrant appropriate access toousers, groups, and services.</span></span>
* <span data-ttu-id="c0f82-113">Címkézési társítások toostreamline feladatokat, mint a számlázási kumulatív használja.</span><span class="sxs-lookup"><span data-stu-id="c0f82-113">Use tagging associations toostreamline tasks such as billing rollups.</span></span>

<span data-ttu-id="c0f82-114">Ez a cikk részletesen fogyasztás forgatókönyvek, architektúra és a Tervező munkamenetek és az Azure Ügyféltanácsadói csapatának (AzureCAT) ügyfelekkel valós sablon megvalósítások során feltárt megvalósítási minták.</span><span class="sxs-lookup"><span data-stu-id="c0f82-114">This article provides details on consumption scenarios, architecture, and implementation patterns identified during our design sessions and real-world template implementations with Azure Customer Advisory Team (AzureCAT) customers.</span></span> <span data-ttu-id="c0f82-115">Messze academic, ezek a módszerek bizonyítottan 12 hello felső Linux-alapú OSS technológiák, például sablonokat hello fejlesztésének figyelmeztet eljárásokat: Apache Kafka, Apache Spark, Cloudera, Couchbase, Hortonworks HDP, alapszintű DataStax vállalati technológiával Apache Cassandra, Elasticsearch, Jenkins, MongoDB, PostgreSQL, Redis és Nagios.</span><span class="sxs-lookup"><span data-stu-id="c0f82-115">Far from academic, these approaches are proven practices informed by hello development of templates for 12 of hello top Linux-based OSS technologies, including: Apache Kafka, Apache Spark, Cloudera, Couchbase, Hortonworks HDP, DataStax Enterprise powered by Apache Cassandra, Elasticsearch, Jenkins, MongoDB, PostgreSQL, Redis, and Nagios.</span></span> 

<span data-ttu-id="c0f82-116">Ez a cikk a bevált gyakorlat toohelp meg globális osztály Azure Resource Manager-sablonok tervezővel megosztja.</span><span class="sxs-lookup"><span data-stu-id="c0f82-116">This article shares these proven practices toohelp you architect world class Azure Resource Manager templates.</span></span>  

<span data-ttu-id="c0f82-117">A munka az ügyfelek, a vállalatok számára, a rendszer kiegészítők (SI) s és a megosztott fürtkötetek több Resource Manager sablon felhasználásának követelménye azonosította azt.</span><span class="sxs-lookup"><span data-stu-id="c0f82-117">In our work with customers, we have identified several Resource Manager template consumption experiences across enterprises, System Integrators (SI)s, and CSVs.</span></span> <span data-ttu-id="c0f82-118">hello következő szakaszokban gyakori forgatókönyvek és minták magas szintű áttekintését különböző vevő típusokhoz.</span><span class="sxs-lookup"><span data-stu-id="c0f82-118">hello following sections provide a high-level overview of common scenarios and patterns for different customer types.</span></span>

## <a name="enterprises-and-system-integrators"></a><span data-ttu-id="c0f82-119">A vállalatok és rendszerintegrátorok</span><span class="sxs-lookup"><span data-stu-id="c0f82-119">Enterprises and system integrators</span></span>
<span data-ttu-id="c0f82-120">Nagy méretű szervezeteknek belül általában látható Resource Manager-sablonok két fogyasztóinak: belső szoftver a fejlesztési csapat és a vállalati informatikai.</span><span class="sxs-lookup"><span data-stu-id="c0f82-120">Within large organizations, we commonly see two consumers of Resource Manager templates: internal software development teams and corporate IT.</span></span> <span data-ttu-id="c0f82-121">Azt, hogy hello SIs hello forgatókönyvei toohello forgatókönyvek hozzárendelését a vállalatok, talált Igen hello ugyanazok a feltételek vonatkoznak.</span><span class="sxs-lookup"><span data-stu-id="c0f82-121">We've found that hello scenarios for hello SIs map toohello scenarios for Enterprises, so hello same considerations apply.</span></span>

### <a name="internal-software-development-teams"></a><span data-ttu-id="c0f82-122">Belső szoftver a fejlesztési csapat</span><span class="sxs-lookup"><span data-stu-id="c0f82-122">Internal software development teams</span></span>
<span data-ttu-id="c0f82-123">A csapat házon belül fejlesztett alkalmazásokra szoftver toosupport az üzleti, ha a sablonok tooquickly telepítése technológiákat biztosítja a megoldások üzleti-specifikus könnyű megoldást biztosítson.</span><span class="sxs-lookup"><span data-stu-id="c0f82-123">If your team develops software toosupport your business, templates provide an easy way tooquickly deploy technologies for use in business-specific solutions.</span></span> <span data-ttu-id="c0f82-124">Is használhatja a sablonok toorapidly létrehozása képzési környezetek, amelyek lehetővé teszik a csapat tagjai toogain szükséges képességek.</span><span class="sxs-lookup"><span data-stu-id="c0f82-124">You can also use templates toorapidly create training environments that enable team members toogain necessary skills.</span></span>

<span data-ttu-id="c0f82-125">Használhatja a sablont,- vagy kiterjesztése vagy tooaccommodate állítható össze az igényeinek.</span><span class="sxs-lookup"><span data-stu-id="c0f82-125">You can use templates as-is or extend or compose them tooaccommodate your needs.</span></span> <span data-ttu-id="c0f82-126">A sablonokon belüli címkézést, megadhatja számlázási összefoglaló különböző nézetekkel például team projekt, egyéni vagy oktatási.</span><span class="sxs-lookup"><span data-stu-id="c0f82-126">Using tagging within templates, you can provide a billing summary with various views such as team, project, individual, and education.</span></span>

<span data-ttu-id="c0f82-127">Vállalatok gyakran érdemes szoftverfejlesztői csapatának toocreate egységes telepítési a megoldás sablonját.</span><span class="sxs-lookup"><span data-stu-id="c0f82-127">Businesses often want software development teams toocreate a template for consistent deployment of a solution.</span></span> <span data-ttu-id="c0f82-128">hello sablon megkötések könnyíti meg úgy, hogy a környezetben lévő egyes elemek rögzítettek, és nem bírálható felül.</span><span class="sxs-lookup"><span data-stu-id="c0f82-128">hello template facilitates constraints so certain items within that environment remain fixed and can't be overridden.</span></span> <span data-ttu-id="c0f82-129">Például egy bank előfordulhat, hogy a sablon tooinclude RBAC, programozók nem vizsgálja felül a banki megoldás toosend adatok tooa személyes tárfiók.</span><span class="sxs-lookup"><span data-stu-id="c0f82-129">For example, a bank might require a template tooinclude RBAC so a programmer can’t revise a banking solution toosend data tooa personal storage account.</span></span>

### <a name="corporate-it"></a><span data-ttu-id="c0f82-130">Vállalati informatikai</span><span class="sxs-lookup"><span data-stu-id="c0f82-130">Corporate IT</span></span>
<span data-ttu-id="c0f82-131">Vállalati informatikai szervezetek általában a sablonokkal kézbesítéséhez felhő kapacitása és a felhőben üzemeltetett képességeket.</span><span class="sxs-lookup"><span data-stu-id="c0f82-131">Corporate IT organizations typically use templates for delivering cloud capacity and cloud-hosted capabilities.</span></span>

#### <a name="cloud-capacity"></a><span data-ttu-id="c0f82-132">Felhő kapacitása</span><span class="sxs-lookup"><span data-stu-id="c0f82-132">Cloud capacity</span></span>
<span data-ttu-id="c0f82-133">Közös megoldást, hogy a vállalati informatikai csoportok tooprovide felhő kapacitása csoportjai "pólóra méretek", amelyek szabványos ajánlat például kis, közepes méretű és nagy jelenti.</span><span class="sxs-lookup"><span data-stu-id="c0f82-133">A common way for corporate IT groups tooprovide cloud capacity for teams is with "t-shirt sizes", which are standard offering sizes such as small, medium, and large.</span></span> <span data-ttu-id="c0f82-134">hello méretű pólóra kérésajánlatok ugyanakkor biztosítható a egy szint, amely megkönnyíti a lehetséges toouse sablonok szabványosítás kombinálhatja a különböző típusú és mennyiségben.</span><span class="sxs-lookup"><span data-stu-id="c0f82-134">hello t-shirt sized offerings can mix different resource types and quantities while providing a level of standardization that makes it possible toouse templates.</span></span> <span data-ttu-id="c0f82-135">hello sablonok kapacitás biztosításához, érvényesíti a vállalati házirendeket és címkézési tooprovide jóváírási tooconsuming szervezetek konzisztens módon.</span><span class="sxs-lookup"><span data-stu-id="c0f82-135">hello templates deliver capacity in a consistent way that enforces corporate policies and uses tagging tooprovide chargeback tooconsuming organizations.</span></span>

<span data-ttu-id="c0f82-136">Például szükség lehet tooprovide fejlesztési, tesztelési vagy belül mely hello szoftver a fejlesztési csapat megoldásuk telepítheti termelési környezetben.</span><span class="sxs-lookup"><span data-stu-id="c0f82-136">For example, you may need tooprovide development, test, or production environments within which hello software development teams can deploy their solutions.</span></span> <span data-ttu-id="c0f82-137">hello környezet rendelkezik egy előre definiált hálózati topológia és a szoftver a fejlesztési csapat hello elemek nem módosíthatók, például a szabályok hozzáférés toohello nyilvános internet és a csomag végzett vizsgálat végrehajtásához.</span><span class="sxs-lookup"><span data-stu-id="c0f82-137">hello environment has a predefined network topology and elements that hello software development teams cannot change, such as rules governing access toohello public internet and packet inspection.</span></span> <span data-ttu-id="c0f82-138">Hello környezet különböző hozzáférési jogokkal rendelkező ilyen környezetben a szervezet-specifikus szerepköröket is rendelkezhetnek.</span><span class="sxs-lookup"><span data-stu-id="c0f82-138">You may also have organization-specific roles for these environments with distinct access rights for hello environment.</span></span>

#### <a name="cloud-hosted-capabilities"></a><span data-ttu-id="c0f82-139">Felhőben üzemeltetett képességek</span><span class="sxs-lookup"><span data-stu-id="c0f82-139">Cloud-hosted capabilities</span></span>
<span data-ttu-id="c0f82-140">Sablonok toosupport felhőben üzemeltetett funkcióinak használata, beleértve az egyes szoftvercsomagok vagy összetett ajánlatok felkínált toointernal üzletágak.</span><span class="sxs-lookup"><span data-stu-id="c0f82-140">You can use templates toosupport cloud-hosted capabilities, including individual software packages or composite offerings that are offered toointernal lines of business.</span></span> <span data-ttu-id="c0f82-141">Példa egy összetett ajánlat lenne elemzés,--szolgáltatás – elemzés, adatmegjelenítési és más technológiák – előre meghatározott hálózati topológia optimalizált, csatlakoztatott konfigurációban kézbesíteni.</span><span class="sxs-lookup"><span data-stu-id="c0f82-141">An example of a composite offering would be analytics-as-a-service—analytics, visualization, and other technologies—delivered in an optimized, connected configuration on a predefined network topology.</span></span>

<span data-ttu-id="c0f82-142">Hello biztonsági és a szerepkör szempontok szerint hello felhő kapacitása kínál, amelyek azok van építve a felhőben üzemeltetett képességek van hatással.</span><span class="sxs-lookup"><span data-stu-id="c0f82-142">Cloud-hosted capabilities are affected by hello security and role considerations established by hello cloud capacity offering on which they’re built.</span></span> <span data-ttu-id="c0f82-143">Ezek a képességek eredeti formájukban, vagy egy felügyelt szolgáltatásként érhető el.</span><span class="sxs-lookup"><span data-stu-id="c0f82-143">These capabilities are offered as is or as a managed service.</span></span> <span data-ttu-id="c0f82-144">Az utóbbi hello korlátozott hozzáférés-szerepkörök szükségesek tooenable hozzáférés hello környezetbe felügyelet céljából.</span><span class="sxs-lookup"><span data-stu-id="c0f82-144">For hello latter, access-constrained roles are required tooenable access into hello environment for management purposes.</span></span>

## <a name="cloud-service-vendors"></a><span data-ttu-id="c0f82-145">Cloud service szállítók</span><span class="sxs-lookup"><span data-stu-id="c0f82-145">Cloud service vendors</span></span>
<span data-ttu-id="c0f82-146">A CSV-k toomany van szó, után felismertük több megközelítés közül választhat az ügyfelekkel és a hozzá tartozó követelmény toodeploy szolgáltatásokat.</span><span class="sxs-lookup"><span data-stu-id="c0f82-146">After talking toomany CSVs, we identified multiple approaches you can take toodeploy services for your customers and associated requirements.</span></span>

### <a name="csv-hosted-offering"></a><span data-ttu-id="c0f82-147">Fürt megosztott kötetei szolgáltatás által üzemeltetett ajánlat</span><span class="sxs-lookup"><span data-stu-id="c0f82-147">CSV-hosted offering</span></span>
<span data-ttu-id="c0f82-148">Az ajánlat működteti a saját Azure-előfizetéssel, ha két üzemeltetési szempontok megegyeznek: minden ügyfél esetében a különböző központi telepítési üzembe, vagy a méretezési egység, amelyek az összes ügyfél számára használja a megosztott infrastruktúra telepítése.</span><span class="sxs-lookup"><span data-stu-id="c0f82-148">If you host your offering in your own Azure subscription, two hosting approaches are common: deploying a distinct deployment for every customer or deploying scale units that underpin a shared infrastructure used for all customers.</span></span>

* <span data-ttu-id="c0f82-149">**Különböző központi telepítések minden ügyfél esetében.**</span><span class="sxs-lookup"><span data-stu-id="c0f82-149">**Distinct deployments for each customer.**</span></span> <span data-ttu-id="c0f82-150">Egy ügyfél különböző telepítés a különböző ismert konfigurációk rögzített topológiák igényel.</span><span class="sxs-lookup"><span data-stu-id="c0f82-150">Distinct deployments per customer require fixed topologies of different known configurations.</span></span> <span data-ttu-id="c0f82-151">Előfordulhat, hogy különböző virtuális gépek (VM) méretét, a változó számú csomópontok és a társított tárolási különböző mennyiségű történő központi telepítését.</span><span class="sxs-lookup"><span data-stu-id="c0f82-151">These deployments may have different virtual machine (VM) sizes, varying numbers of nodes, and different amounts of associated storage.</span></span> <span data-ttu-id="c0f82-152">A központi telepítések címkézés összesítő számlázási minden ügyfél szolgál.</span><span class="sxs-lookup"><span data-stu-id="c0f82-152">Tagging of deployments is used for roll-up billing of each customer.</span></span> <span data-ttu-id="c0f82-153">Az RBAC engedélyezett tooallow ügyfelek hozzáférési tooaspects a felhőalapú környezet lehet.</span><span class="sxs-lookup"><span data-stu-id="c0f82-153">RBAC may be enabled tooallow customers access tooaspects of their cloud environment.</span></span>
* <span data-ttu-id="c0f82-154">**Méretezési egységek megosztott több-bérlős környezetekben.**</span><span class="sxs-lookup"><span data-stu-id="c0f82-154">**Scale units in shared multi-tenant environments.**</span></span> <span data-ttu-id="c0f82-155">A sablon jelenthet a méretezési egység, több-bérlős környezetekben.</span><span class="sxs-lookup"><span data-stu-id="c0f82-155">A template can represent a scale unit for multi-tenant environments.</span></span> <span data-ttu-id="c0f82-156">Ebben az esetben az ugyanazon az infrastruktúrán hello használt toosupport az összes ügyfél számára.</span><span class="sxs-lookup"><span data-stu-id="c0f82-156">In this case, hello same infrastructure is used toosupport all customers.</span></span> <span data-ttu-id="c0f82-157">hello központi telepítések határoz meg, hogy a kapacitás hello üzemeltetett kínál, például a felhasználók száma és a tranzakciók száma a szintű erőforrások csoportja.</span><span class="sxs-lookup"><span data-stu-id="c0f82-157">hello deployments represent a group of resources that deliver a level of capacity for hello hosted offering, such as number of users and number of transactions.</span></span> <span data-ttu-id="c0f82-158">A méretezési egységeket vannak növelhető vagy csökkenthető, igény szerint van szüksége.</span><span class="sxs-lookup"><span data-stu-id="c0f82-158">These scale units are increased or decreased as demand requires.</span></span>

### <a name="csv-offering-injected-into-customer-subscription"></a><span data-ttu-id="c0f82-159">Ügyfél-előfizetést be a nézetmodellbe, CSV ajánlat</span><span class="sxs-lookup"><span data-stu-id="c0f82-159">CSV offering injected into customer subscription</span></span>
<span data-ttu-id="c0f82-160">Előfordulhat, hogy a kívánt toodeploy a szoftverek végfelhasználók által birtokolt előfizetések.</span><span class="sxs-lookup"><span data-stu-id="c0f82-160">You may want toodeploy your software into subscriptions owned by end customers.</span></span> <span data-ttu-id="c0f82-161">Is sablonok toodeploy különböző központi telepítéseket használ, az ügyfél Azure fiókjába.</span><span class="sxs-lookup"><span data-stu-id="c0f82-161">You can use templates toodeploy distinct deployments into a customer’s Azure account.</span></span>

<span data-ttu-id="c0f82-162">A központi telepítéseket az RBAC használatát, így frissítése és hello felhasználói fiókon belül hello telepítések kezelése.</span><span class="sxs-lookup"><span data-stu-id="c0f82-162">These deployments use RBAC so you can update and manage hello deployment within hello customer’s account.</span></span>

### <a name="azure-marketplace"></a><span data-ttu-id="c0f82-163">Azure Piactér</span><span class="sxs-lookup"><span data-stu-id="c0f82-163">Azure Marketplace</span></span>
<span data-ttu-id="c0f82-164">tooadvertise és eladásra ajánlatok létrehozásában a piactéren, például az Azure piactéren keresztül, a sablonok toodeliver különböző típusait ügyfél Azure fiókjában fejleszthet.</span><span class="sxs-lookup"><span data-stu-id="c0f82-164">tooadvertise and sell your offerings through a marketplace, such as Azure Marketplace, you can develop templates toodeliver distinct types of deployments that run in a customer’s Azure account.</span></span> <span data-ttu-id="c0f82-165">A különböző központi telepítéseket általában jelentheti egy Póló mérete (kis, közepes, nagy), a termék/célközönség típusa (közösségi, fejlesztők, vállalati) vagy a szolgáltatás típusa (alapszintű, a magas rendelkezésre állású).</span><span class="sxs-lookup"><span data-stu-id="c0f82-165">These distinct deployments can be typically described as a t-shirt size (small, medium, large), product/audience type (community, developer, enterprise), or feature type (basic, high availability).</span></span>  <span data-ttu-id="c0f82-166">Néhány esetben ezek a típusok lehetővé teszik toospecify bizonyos attribútumai hello központi telepítést végez, például Virtuálisgép-típussá vagy lemezek számát.</span><span class="sxs-lookup"><span data-stu-id="c0f82-166">In some cases, these types allow you toospecify certain attributes of hello deployment, such as VM type or number of disks.</span></span>

## <a name="oss-projects"></a><span data-ttu-id="c0f82-167">OSS-projektek</span><span class="sxs-lookup"><span data-stu-id="c0f82-167">OSS projects</span></span>
<span data-ttu-id="c0f82-168">Nyílt forráskódú projekteket belül a Resource Manager-sablonok egy megoldást gyorsan használatával bevált gyakorlatok engedélyezése egy közösségi toodeploy.</span><span class="sxs-lookup"><span data-stu-id="c0f82-168">Within open source projects, Resource Manager templates enable a community toodeploy a solution quickly using proven practices.</span></span> <span data-ttu-id="c0f82-169">Sablonok tárolhatja a GitHub-tárházban, így hello közösségi felülvizsgálhatja őket az adott idő alatt.</span><span class="sxs-lookup"><span data-stu-id="c0f82-169">You can store templates in a GitHub repository so hello community can revise them over time.</span></span> <span data-ttu-id="c0f82-170">Felhasználók a saját Azure-előfizetések sablonok telepítése.</span><span class="sxs-lookup"><span data-stu-id="c0f82-170">Users deploy these templates in their own Azure subscriptions.</span></span>

<span data-ttu-id="c0f82-171">hello alábbi szakaszok ismertetik a megoldás tervezése előtt kell tooconsider hello dolgot.</span><span class="sxs-lookup"><span data-stu-id="c0f82-171">hello following sections identify hello things you need tooconsider before designing your solution.</span></span>

## <a name="identifying-what-is-outside-and-inside-a-vm"></a><span data-ttu-id="c0f82-172">Kívül és belül a virtuális gépek azonosítása</span><span class="sxs-lookup"><span data-stu-id="c0f82-172">Identifying what is outside and inside a VM</span></span>
<span data-ttu-id="c0f82-173">A sablon tervezéséhez, hasznos toolook: hello követelmények tekintetében kívül és belül hello virtuális gépek (VM):</span><span class="sxs-lookup"><span data-stu-id="c0f82-173">As you design your template, it’s helpful toolook at hello requirements in terms of what's outside and inside hello virtual machines (VMs):</span></span>

* <span data-ttu-id="c0f82-174">Külső azt jelenti, hogy a virtuális gépek és más erőforrások, például a hello hálózati topológia, címkézéssel, hivatkozások toohello Tanúsítványos/titkos kulcsok és a szerepköralapú hozzáférés-vezérlés a telepítés hello.</span><span class="sxs-lookup"><span data-stu-id="c0f82-174">Outside means hello VMs and other resources of your deployment, such as hello network topology, tagging, references toohello certs/secrets, and role-based access control.</span></span> <span data-ttu-id="c0f82-175">Ezeket az erőforrásokat a sablon a részét képezik.</span><span class="sxs-lookup"><span data-stu-id="c0f82-175">All these resources are part of your template.</span></span>
* <span data-ttu-id="c0f82-176">Belső: hello telepített szoftvereket, és a teljes szükséges konfigurációs állapot.</span><span class="sxs-lookup"><span data-stu-id="c0f82-176">Inside means hello installed software and overall desired state configuration.</span></span> <span data-ttu-id="c0f82-177">Más módszerek, például Virtuálisgép-bővítmények vagy parancsfájlok, részben vagy egészben szolgálnak.</span><span class="sxs-lookup"><span data-stu-id="c0f82-177">Other mechanisms, such as VM extensions or scripts, are used in whole or in part.</span></span> <span data-ttu-id="c0f82-178">Ezek a mechanizmusok azonosítását és hello sablon hajtja végre, de nem található.</span><span class="sxs-lookup"><span data-stu-id="c0f82-178">These mechanisms may be identified and executed by hello template but aren’t in it.</span></span>

<span data-ttu-id="c0f82-179">Tevékenységek kellene tennie "belső hello kezdő" közös például-</span><span class="sxs-lookup"><span data-stu-id="c0f82-179">Common examples of activities you would do “inside hello box” include -</span></span>  

* <span data-ttu-id="c0f82-180">Telepítése vagy eltávolítása a kiszolgálói szerepkörök és szolgáltatások</span><span class="sxs-lookup"><span data-stu-id="c0f82-180">Install or remove server roles and features</span></span>
* <span data-ttu-id="c0f82-181">Telepítse és konfigurálja a szoftverfrissítési hello csomópont vagy a fürt szintjén</span><span class="sxs-lookup"><span data-stu-id="c0f82-181">Install and configure software at hello node or cluster level</span></span>
* <span data-ttu-id="c0f82-182">Egy webkiszolgálón webhelyek központi telepítése</span><span class="sxs-lookup"><span data-stu-id="c0f82-182">Deploy websites on a web server</span></span>
* <span data-ttu-id="c0f82-183">Adatbázis-sémák telepítése</span><span class="sxs-lookup"><span data-stu-id="c0f82-183">Deploy database schemas</span></span>
* <span data-ttu-id="c0f82-184">Beállításjegyzék vagy egyéb típusú konfigurációs beállítások kezelése</span><span class="sxs-lookup"><span data-stu-id="c0f82-184">Manage registry or other types of configuration settings</span></span>
* <span data-ttu-id="c0f82-185">Fájlok és könyvtárak kezelése</span><span class="sxs-lookup"><span data-stu-id="c0f82-185">Manage files and directories</span></span>
* <span data-ttu-id="c0f82-186">Indítás, Leállítás, és a folyamatok és szolgáltatások kezelése</span><span class="sxs-lookup"><span data-stu-id="c0f82-186">Start, stop, and manage processes and services</span></span>
* <span data-ttu-id="c0f82-187">Helyi csoportok és felhasználói fiókok kezelése</span><span class="sxs-lookup"><span data-stu-id="c0f82-187">Manage local groups and user accounts</span></span>
* <span data-ttu-id="c0f82-188">Telepítheti és kezelheti a csomagokat (.msi, .exe, yum, stb.)</span><span class="sxs-lookup"><span data-stu-id="c0f82-188">Install and manage packages (.msi, .exe, yum, etc.)</span></span>
* <span data-ttu-id="c0f82-189">Környezeti változók kezelése</span><span class="sxs-lookup"><span data-stu-id="c0f82-189">Manage environment variables</span></span>
* <span data-ttu-id="c0f82-190">Natív parancsfájlt (a Windows PowerShell, bash, stb.)</span><span class="sxs-lookup"><span data-stu-id="c0f82-190">Run native scripts (Windows PowerShell, bash, etc.)</span></span>

### <a name="desired-state-configuration-dsc"></a><span data-ttu-id="c0f82-191">Kívánt állapot konfigurációs (szolgáltatása DSC)</span><span class="sxs-lookup"><span data-stu-id="c0f82-191">Desired state configuration (DSC)</span></span>
<span data-ttu-id="c0f82-192">Szeretné végezni a virtuális gépek telepítési túl hello belső állapotával kapcsolatos, a toomake meg arról, hogy a központi telepítés nem "sodródni" hello konfigurációról, hogy definiálva, és be van jelölve a verziókövetési rendszerrel.</span><span class="sxs-lookup"><span data-stu-id="c0f82-192">Thinking about hello internal state of your VMs beyond deployment, you want toomake sure this deployment doesn’t "drift" from hello configuration that you have defined and checked into source control.</span></span> <span data-ttu-id="c0f82-193">Ez a megközelítés biztosítja a fejlesztők számára, vagy műveleti személyzet nem ellenőrizze alkalmi módosítások tooan környezet nem vetted, tesztelni, vagy tárolja, amely a verziókövetési rendszerrel.</span><span class="sxs-lookup"><span data-stu-id="c0f82-193">This approach ensures your developers or operations staff don’t make ad-hoc changes tooan environment that are not vetted, tested, or recorded in source control.</span></span> <span data-ttu-id="c0f82-194">A vezérlő fontos, mert hello manuális módosítások nem szerepelnek a verziókövetési rendszerrel.</span><span class="sxs-lookup"><span data-stu-id="c0f82-194">This control is important, because hello manual changes are not in source control.</span></span> <span data-ttu-id="c0f82-195">Is nem hello normál telepítés része, és hatással lesz a jövőbeni automatizált regisztrációt hello szoftver.</span><span class="sxs-lookup"><span data-stu-id="c0f82-195">They are also not part of hello standard deployment and will impact future automated deployments of hello software.</span></span>

<span data-ttu-id="c0f82-196">A belső munkatársra túl kívánt állapot konfigurációs az is fontos biztonsági szempontból.</span><span class="sxs-lookup"><span data-stu-id="c0f82-196">Beyond your internal employees, desired state configuration is also important from a security perspective.</span></span> <span data-ttu-id="c0f82-197">A támadók rendszeresen próbált toocompromise, és szoftver rendszerek kihasználására.</span><span class="sxs-lookup"><span data-stu-id="c0f82-197">Hackers are regularly trying toocompromise and exploit software systems.</span></span> <span data-ttu-id="c0f82-198">Ha sikeres, közös tooinstall fájlok, és egy fertőzött rendszer egyéb hello állapotváltozáshoz.</span><span class="sxs-lookup"><span data-stu-id="c0f82-198">When successful, it's common tooinstall files and otherwise change hello state of a compromised system.</span></span> <span data-ttu-id="c0f82-199">Kívánt állapot konfigurációs, segítségével szükséges hello és tényleges állapot közötti eltérések azonosítására és egy ismert beállításainak visszaállítása.</span><span class="sxs-lookup"><span data-stu-id="c0f82-199">Using desired state configuration, you can identify deltas between hello desired and actual state and restore a known configuration.</span></span>

<span data-ttu-id="c0f82-200">Nincsenek hello legnépszerűbb mechanizmusok DSC - a PowerShell DSC, Chef vagy Puppet erőforrás-bővítményt.</span><span class="sxs-lookup"><span data-stu-id="c0f82-200">There are resource extensions for hello most popular mechanisms for DSC - PowerShell DSC, Chef, and Puppet.</span></span> <span data-ttu-id="c0f82-201">Ezek a bővítmények mindegyikének hello a virtuális gép kezdeti állapotában telepítheti és is használt toomake meg arról, hogy hello szükséges állapot megmarad.</span><span class="sxs-lookup"><span data-stu-id="c0f82-201">Each of these extensions can deploy hello initial state of your VM and also be used toomake sure hello desired state is maintained.</span></span>

## <a name="common-template-scopes"></a><span data-ttu-id="c0f82-202">Közös sablon hatókörök</span><span class="sxs-lookup"><span data-stu-id="c0f82-202">Common template scopes</span></span>
<span data-ttu-id="c0f82-203">Az a tapasztalat világossá három fő megoldás sablonok hatókörök is láttuk.</span><span class="sxs-lookup"><span data-stu-id="c0f82-203">In our experience, we’ve seen three key solution templates scopes emerge.</span></span> <span data-ttu-id="c0f82-204">– A kapacitás, a funkció és a végpont megoldás – ezek három hatókör hello a következő szakaszok ismertetik.</span><span class="sxs-lookup"><span data-stu-id="c0f82-204">These three scopes – capacity, capability, and end-to-end solution – are described in hello following sections.</span></span>

### <a name="capacity-scope"></a><span data-ttu-id="c0f82-205">A kapacitás hatókör</span><span class="sxs-lookup"><span data-stu-id="c0f82-205">Capacity scope</span></span>
<span data-ttu-id="c0f82-206">A kapacitás hatókör nyújt több erőforrást, amely előkonfigurált toobe szabályozások és szabályzatok betartása szabványos topológiában.</span><span class="sxs-lookup"><span data-stu-id="c0f82-206">A capacity scope delivers a set of resources in a standard topology that is pre-configured toobe in compliance with regulations and policies.</span></span> <span data-ttu-id="c0f82-207">hello leggyakoribb például egy vállalati informatikai vagy SI forgatókönyvben szabványos fejlesztői környezetben telepít.</span><span class="sxs-lookup"><span data-stu-id="c0f82-207">hello most common example is deploying a standard development environment in an Enterprise IT or SI scenario.</span></span>

### <a name="capability-scope"></a><span data-ttu-id="c0f82-208">Képesség hatókör</span><span class="sxs-lookup"><span data-stu-id="c0f82-208">Capability scope</span></span>
<span data-ttu-id="c0f82-209">A funkció hatókör központi telepítését és konfigurálását a topológia egy adott technológia összpontosít.</span><span class="sxs-lookup"><span data-stu-id="c0f82-209">A capability scope is focused on deploying and configuring a topology for a given technology.</span></span> <span data-ttu-id="c0f82-210">Gyakori forgatókönyvek, például az SQL Server, Cassandra, Hadoop technológiák többek között.</span><span class="sxs-lookup"><span data-stu-id="c0f82-210">Common scenarios including technologies such as SQL Server, Cassandra, Hadoop.</span></span>

### <a name="end-to-end-solution-scope"></a><span data-ttu-id="c0f82-211">Végpontok közötti megoldás hatókör</span><span class="sxs-lookup"><span data-stu-id="c0f82-211">End-to-end solution scope</span></span>
<span data-ttu-id="c0f82-212">A végpont megoldás hatókörök megcélzott túl egyetlen funkció, és helyette arra irányul, hogy egy több képességek áll end tooend megoldást hoz létre.</span><span class="sxs-lookup"><span data-stu-id="c0f82-212">An End-to-End Solution Scope is targeted beyond a single capability, and instead focused on delivering an end tooend solution comprised of multiple capabilities.</span></span>  

<span data-ttu-id="c0f82-213">A megoldás hatókörű sablon hatóköréhez ügyfélrendszer egy vagy több képesség hatókörbe tartozó sablonokat Megoldásfüggő erőforrásokat, a logikai és a kívánt állapot készletként.</span><span class="sxs-lookup"><span data-stu-id="c0f82-213">A solution-scoped template scope manifests itself as a set of one or more capability-scoped templates with solution-specific resources, logic, and desired state.</span></span> <span data-ttu-id="c0f82-214">Megoldás hatókörű sablon példa: egy záró tooend csővezeték megoldás sablon.</span><span class="sxs-lookup"><span data-stu-id="c0f82-214">An example of a solution-scoped template is an end tooend data pipeline solution template.</span></span> <span data-ttu-id="c0f82-215">hello sablon előfordulhat, hogy keverje Megoldásfüggő topológia és állapotának például Kafka, a Storm és a Hadoop több megoldás funkció hatókörbe tartozó sablonokat.</span><span class="sxs-lookup"><span data-stu-id="c0f82-215">hello template might mix solution-specific topology and state with multiple capability-scoped solution templates such as Kafka, Storm, and Hadoop.</span></span>

## <a name="choosing-free-form-vs-known-configurations"></a><span data-ttu-id="c0f82-216">Szabad formátumú és ismert konfigurációk kiválasztása</span><span class="sxs-lookup"><span data-stu-id="c0f82-216">Choosing free-form vs. known configurations</span></span>
<span data-ttu-id="c0f82-217">Először érdemes egy sablont kell rugalmasan fogyasztók hello lehető legnagyobb mértékben, de sok szempontjai hatással hello lehetőségét toouse szabad formátumú konfigurációk és beállításainak.</span><span class="sxs-lookup"><span data-stu-id="c0f82-217">You might initially think a template should give consumers hello utmost flexibility, but many considerations affect hello choice of whether toouse free-form configurations vs. known configurations.</span></span> <span data-ttu-id="c0f82-218">Ez a szakasz azonosítja a hello kulcs felhasználói követelmények és műszaki olyan szempontot, amelyek a jelen dokumentum megosztott hello megközelítés alakú.</span><span class="sxs-lookup"><span data-stu-id="c0f82-218">This section identifies hello key customer requirements and technical considerations that shaped hello approach shared in this document.</span></span>

### <a name="free-form-configurations"></a><span data-ttu-id="c0f82-219">Szabad formátumú konfigurációk</span><span class="sxs-lookup"><span data-stu-id="c0f82-219">Free-form configurations</span></span>
<span data-ttu-id="c0f82-220">Hello felületen szabad formátumú konfigurációk hangkártya ideális.</span><span class="sxs-lookup"><span data-stu-id="c0f82-220">On hello surface, free-form configurations sound ideal.</span></span> <span data-ttu-id="c0f82-221">Ezek lehetővé teszik egy Virtuálisgép-típussá tooselect és adjon meg egy tetszőleges számú csomópontot és csatlakoztatott lemezekkel azokat a csomópontokat, a – és a paraméterek tooa sablonként ehhez.</span><span class="sxs-lookup"><span data-stu-id="c0f82-221">They allow you tooselect a VM type and provide an arbitrary number of nodes and attached disks for those nodes — and do so as parameters tooa template.</span></span> <span data-ttu-id="c0f82-222">Ezt a módszert azonban bizonyos forgatókönyvek nem ideális el.</span><span class="sxs-lookup"><span data-stu-id="c0f82-222">However, this approach is not ideal for some scenarios.</span></span>

<span data-ttu-id="c0f82-223">A [virtuális gépek méretei](../virtual-machines/windows/sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json), hello különböző Virtuálisgép-típusokon és elérhető méretek azonosítja, és egyes tartós hello száma lemezek, (2, 4, 8, 16 vagy 32), amely csatolható.</span><span class="sxs-lookup"><span data-stu-id="c0f82-223">In [Sizes for virtual machines](../virtual-machines/windows/sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json), hello different VM types and available sizes are identified, and each of hello number of durable disks (2, 4, 8, 16, or 32) that can be attached.</span></span> <span data-ttu-id="c0f82-224">Minden csatlakoztatott lemezre 500 IOPS biztosít, és ezeknek a lemezeknek többszörösei lehet közösen egy szorzóval IOPS adott számú lehet.</span><span class="sxs-lookup"><span data-stu-id="c0f82-224">Each attached disk provides 500 IOPS and multiples of these disks can be pooled for a multiplier of that number of IOPS.</span></span> <span data-ttu-id="c0f82-225">Például 16 lemez lehet készletezett tooprovide 8000 iops-érték.</span><span class="sxs-lookup"><span data-stu-id="c0f82-225">For example, 16 disks can be pooled tooprovide 8,000 IOPS.</span></span> <span data-ttu-id="c0f82-226">Készletezését hello operációs rendszerben, a Microsoft Windows tárolóhelyek vagy a redundáns tömbjének (RAID) olcsó lemezek Linux konfigurációval történik.</span><span class="sxs-lookup"><span data-stu-id="c0f82-226">Pooling is done with configuration in hello operating system, using Microsoft Windows Storage Spaces or redundant array of inexpensive disks (RAID) in Linux.</span></span>

<span data-ttu-id="c0f82-227">Egy szabad formátumú konfiguráció lehetővé teszi hello kijelölés Virtuálisgép-példányok több, különböző virtuális gép meg kell adnia, és az ezeken a példányokon hello Virtuálisgép-típussá, különböző lemez méretének és egy vagy több parancsfájl tooconfigure hello virtuális gép tartalmát.</span><span class="sxs-lookup"><span data-stu-id="c0f82-227">A free-form configuration enables hello selection several VM instances, various VM types and sizes for those instances, various disks for hello VM type, and one or more scripts tooconfigure hello VM contents.</span></span>

<span data-ttu-id="c0f82-228">Esetében gyakori, hogy a központi telepítés lehetnek többféle típusú csomópontok, például a fő és adatcsomópontokat, úgy erre a rugalmasságra gyakran esetén minden csomópont-típus van megadva.</span><span class="sxs-lookup"><span data-stu-id="c0f82-228">It is common that a deployment may have multiple types of nodes, such as master and data nodes, so this flexibility is often provided for every node type.</span></span>

<span data-ttu-id="c0f82-229">A kezdési toodeploy fürtök bármely jelentősége, az összetett forgatókönyvekben toowork megkezdése.</span><span class="sxs-lookup"><span data-stu-id="c0f82-229">As you start toodeploy clusters of any significance, you begin toowork with these complex scenarios.</span></span> <span data-ttu-id="c0f82-230">Ha egy Hadoop-fürt volt telepítése, például 8 főcsomópont és 200 adatcsomópontokat és készletezett 4 csatolt minden egyes főcsomópont és készletezett 16 csatlakoztatott lemezek adatok csomópontonként kellene lennie 208 virtuális gépek és 3,232 lemezek toomanage.</span><span class="sxs-lookup"><span data-stu-id="c0f82-230">If you were deploying a Hadoop cluster, for example, with 8 master nodes and 200 data nodes, and pooled 4 attached disks on each master node and pooled 16 attached disks per data node, you would have 208 VMs and 3,232 disks toomanage.</span></span>

<span data-ttu-id="c0f82-231">A tárfiók lesz szabályozás kérelmek fenti az azonosított 20 000 tranzakciók/másodperc korlátozásához, inkább tekintse meg a tárolási fiók particionálás és toodetermine hello megfelelő mennyiségű tárhelyet fiókok tooaccommodate ebben a topológiában számítások használatát.</span><span class="sxs-lookup"><span data-stu-id="c0f82-231">A storage account will throttle requests above its identified 20,000 transactions/second limit, so you should look at storage account partitioning and use calculations toodetermine hello appropriate number of storage accounts tooaccommodate this topology.</span></span> <span data-ttu-id="c0f82-232">Hello szabadkézi módszert használja, a dinamikus számítások által támogatott kombinációk hello számos megadott van szükség toodetermine hello megfelelő particionálást.</span><span class="sxs-lookup"><span data-stu-id="c0f82-232">Given hello multitude of combinations supported by hello free-form approach, dynamic calculations are required toodetermine hello appropriate partitioning.</span></span> <span data-ttu-id="c0f82-233">hello Azure Resource Manager sablon nyelvi jelenleg matematikai funkcióval rendelkezik, ezért el kell végeznie ezeket a számításokat a kódban, hello megfelelő adatokkal olyan egyedi, kódolt sablon létrehozása.</span><span class="sxs-lookup"><span data-stu-id="c0f82-233">hello Azure Resource Manager Template Language does not presently provide mathematical functions, so you must perform these calculations in code, generating a unique, hard-coded template with hello appropriate details.</span></span>

<span data-ttu-id="c0f82-234">A vállalati informatikai és SI forgatókönyvek esetében valaki kell hello sablonok karbantartása és telepített hello topológiákat támogatja a egy vagy több szervezet számára.</span><span class="sxs-lookup"><span data-stu-id="c0f82-234">In enterprise IT and SI scenarios, someone must maintain hello templates and support hello deployed topologies for one or more organizations.</span></span> <span data-ttu-id="c0f82-235">Ez a további terhelés – különböző konfigurációt, és minden ügyfél esetében sablonok – nem kívánatos.</span><span class="sxs-lookup"><span data-stu-id="c0f82-235">This additional overhead — different configurations and templates for each customer — is far from desirable.</span></span>

<span data-ttu-id="c0f82-236">Az ügyfél Azure-előfizetést ezen sablonok toodeploy környezetekben használható, de a vállalati informatikai csapata hozza létre és CSV-k általában telepíteni őket a saját előfizetések használata a jóváírási függvény toobill az ügyfeleknek.</span><span class="sxs-lookup"><span data-stu-id="c0f82-236">You can use these templates toodeploy environments in your customer’s Azure subscription, but both corporate IT teams and CSVs typically deploy them into their own subscriptions, using a chargeback function toobill their customers.</span></span> <span data-ttu-id="c0f82-237">Ezekben az esetekben hello célja toodeploy kapacitás több ügyfélhez előfizetések és a tárolás során is garantálják központi telepítések sűrűn a hello előfizetések toominimize előfizetés sprawl az tölti fel egy készlete közötti – Ez azt jelenti, hogy további előfizetések toomanage.</span><span class="sxs-lookup"><span data-stu-id="c0f82-237">In these scenarios, hello goal is toodeploy capacity for multiple customers across a pool of subscriptions and keep deployments densely populated into hello subscriptions toominimize subscription sprawl—that is, more subscriptions toomanage.</span></span> <span data-ttu-id="c0f82-238">Valóban dinamikus telepítési méret az ilyen típusú sűrűség elérése igényel a gondos tervezéssel és a további fejlesztési állványok munka hello szervezet nevében.</span><span class="sxs-lookup"><span data-stu-id="c0f82-238">With truly dynamic deployment sizes, achieving this type of density requires careful planning and additional development for scaffolding work on behalf of hello organization.</span></span>

<span data-ttu-id="c0f82-239">Emellett egy API-híváson keresztül előfizetések nem hozható létre, de ezt manuálisan kell megtennie hello portálon keresztül.</span><span class="sxs-lookup"><span data-stu-id="c0f82-239">In addition, you can’t create subscriptions via an API call but must do so manually through hello portal.</span></span> <span data-ttu-id="c0f82-240">Előfizetések hello száma növekszik, a létrejövő előfizetés sprawl emberi beavatkozást igényelnek – nem lehet automatizálni.</span><span class="sxs-lookup"><span data-stu-id="c0f82-240">As hello number of subscriptions increases, any resulting subscription sprawl requires human intervention—it can’t be automated.</span></span> <span data-ttu-id="c0f82-241">A túl nagy variancia hello méretű telepítések, kellene lennie toopre-provision előfizetések száma manuálisan tooensure előfizetések érhetők el.</span><span class="sxs-lookup"><span data-stu-id="c0f82-241">With so much variability in hello sizes of deployments, you would have toopre-provision a number of subscriptions manually tooensure subscriptions are available.</span></span>

<span data-ttu-id="c0f82-242">E tényezők, figyelembe véve a valóban szabad formátumú konfigurációs kevesebb mint, először blush tetszetős.</span><span class="sxs-lookup"><span data-stu-id="c0f82-242">Considering all these factors, a truly free-form configuration is less appealing than at first blush.</span></span>

### <a name="known-configurations--hello-t-shirt-sizing-approach"></a><span data-ttu-id="c0f82-243">Ismert konfigurációk – hello pólóra méretezési módszer</span><span class="sxs-lookup"><span data-stu-id="c0f82-243">Known configurations — hello t-shirt sizing approach</span></span>
<span data-ttu-id="c0f82-244">Ahelyett, hogy a sablont, amely a teljes és számos változata kínál, mint a tapasztalatunk egy közös mintát: tooprovide hello képességét tooselect ismert konfigurációk – érvényben, szabványos pólóra például védőfal kis, közepes és nagy méretű.</span><span class="sxs-lookup"><span data-stu-id="c0f82-244">Rather than offer a template that provides total flexibility and countless variations, in our experience a common pattern is tooprovide hello ability tooselect known configurations — in effect, standard t-shirt sizes such as sandbox, small, medium, and large.</span></span> <span data-ttu-id="c0f82-245">Más pólóra méretű például a termék ajánlatokat, community edition vagy enterprise edition.</span><span class="sxs-lookup"><span data-stu-id="c0f82-245">Other examples of t-shirt sizes are product offerings, such as community edition or enterprise edition.</span></span>  <span data-ttu-id="c0f82-246">Más esetekben lehet munkaterhelés-specifikus konfigurációk egy technológia – például a térkép csökkentése vagy a nem sql.</span><span class="sxs-lookup"><span data-stu-id="c0f82-246">In other cases, it may be workload-specific configurations of a technology – such as map reduce or no sql.</span></span>

<span data-ttu-id="c0f82-247">Sok vállalati informatikai szervezetek, OSS szállítók és SIs elérhetővé tegye az ajánlatok ma ily módon a helyszíni virtualizált környezetekben (vállalatok) vagy szoftver-,--szolgáltatás (SaaS) offerings (CSV-k és OSVs).</span><span class="sxs-lookup"><span data-stu-id="c0f82-247">Many enterprise IT organizations, OSS vendors, and SIs make their offerings available today in this way in on-premises, virtualized environments (enterprises) or as software-as-a-service (SaaS) offerings (CSVs and OSVs).</span></span>

<span data-ttu-id="c0f82-248">Ezt a módszert biztosít az ügyfelek különböző méretű előre konfigurált megfelelő, ismert konfigurációk.</span><span class="sxs-lookup"><span data-stu-id="c0f82-248">This approach provides good, known configurations of varying sizes that are preconfigured for customers.</span></span> <span data-ttu-id="c0f82-249">Ismert konfigurációk nélkül végfelhasználók kell meghatározni a fürt méretezése a saját, számításba a platform erőforrás-korlátozások és tegye a matematikai tooidentify hello eredő particionálás storage-fiókok és egyéb erőforrások (miatt toocluster méret- és erőforrás megkötések).</span><span class="sxs-lookup"><span data-stu-id="c0f82-249">Without known configurations, end customers must determine cluster sizing on their own, factor in platform resource constraints, and do math tooidentify hello resulting partitioning of storage accounts and other resources (due toocluster size and resource constraints).</span></span> <span data-ttu-id="c0f82-250">Ismert konfigurációk engedélyezése az ügyfelek tooeasily válassza hello megfelelő pólóra a mérete – Ez azt jelenti, hogy egy adott központi telepítés.</span><span class="sxs-lookup"><span data-stu-id="c0f82-250">Known configurations enable customers tooeasily select hello right t-shirt size—that is, a given deployment.</span></span> <span data-ttu-id="c0f82-251">Továbbá toomaking hello ügyfél hatékonyabb működését, ismert konfigurációk kis számú könnyebb toosupport és sűrűség magasabb szintű fájlmegosztásba nyújt segítséget.</span><span class="sxs-lookup"><span data-stu-id="c0f82-251">In addition toomaking a better experience for hello customer, a small number of known configurations is easier toosupport and can help you deliver a higher level of density.</span></span>

<span data-ttu-id="c0f82-252">Egy ismert konfigurációs módszer pólóra méretek összpontosított is eltérő számú méretet egy csomópontja.</span><span class="sxs-lookup"><span data-stu-id="c0f82-252">A known configuration approach focused on t-shirt sizes may also have varying number of nodes within a size.</span></span> <span data-ttu-id="c0f82-253">Például egy kis pólóra mérete 3 – 10 csomópontok között lehet.</span><span class="sxs-lookup"><span data-stu-id="c0f82-253">For example, a small t-shirt size may be between 3 and 10 nodes.</span></span>  <span data-ttu-id="c0f82-254">hello Póló mérete volna tervezett tooaccommodate too10 csomópontja fel kell, és adja meg a hello fogyasztói hello képességét toomake szabad formátumú beállításokat toohello azonosított maximális méretét.</span><span class="sxs-lookup"><span data-stu-id="c0f82-254">hello t-shirt size would be designed tooaccommodate up too10 nodes and provide hello consumer hello ability toomake free form selections up toohello maximum size identified.</span></span>  

<span data-ttu-id="c0f82-255">Egy pólóra munkaterhelés típusától függően lehet, hogy további szabad formátumú jellegű is telepíthető, de rendelkeznek munkaterhelések különböző csomópont méretére és konfigurációs hello szoftver hello csomóponton csomópontok száma hello tekintetében.</span><span class="sxs-lookup"><span data-stu-id="c0f82-255">A t-shirt size based on workload type, may be more free form in nature in terms of hello number of nodes that can be deployed but will have workload distinct node size and configuration of hello software on hello node.</span></span>

<span data-ttu-id="c0f82-256">Pólóra méretet termékajánlatokat, például a közösségi vagy Enterprise, előfordulhat, hogy különböző erőforrástípusok és telepíthető, csomópontok maximális száma kötött toolicensing szempontok vagy a szolgáltatás rendelkezésre állásával általában hello különböző ajánlatok között.</span><span class="sxs-lookup"><span data-stu-id="c0f82-256">T-shirt sizes based on product offerings, such as community or Enterprise, may have distinct resource types and maximum number of nodes that can be deployed, typically tied toolicensing considerations or feature availability across hello different offerings.</span></span>

<span data-ttu-id="c0f82-257">A sablonokkal hello JSON-alapú egyedi Variant adattípusban is lehetővé teszi az ügyfelek.</span><span class="sxs-lookup"><span data-stu-id="c0f82-257">You can also accommodate customers with unique variants using hello JSON-based templates.</span></span> <span data-ttu-id="c0f82-258">A kiugró meghatározásakor hello megfelelő tervezési és fejlesztői támogatási és költségszámítás szempontjai is használhatja.</span><span class="sxs-lookup"><span data-stu-id="c0f82-258">When dealing with outliers, you can incorporate hello appropriate planning and considerations for development, support, and costing.</span></span>

<span data-ttu-id="c0f82-259">Felismertük hello sablon fogyasztás forgatókönyvet, és ez a dokumentum hello elején meghatározott követelmények alapján, a sablon felbontás ellen egy mintát.</span><span class="sxs-lookup"><span data-stu-id="c0f82-259">Based on hello customer template consumption scenarios, and requirements identified at hello start of this document, we identified a pattern for template decomposition.</span></span>

## <a name="capacity-and-capability-scoped-solution-templates"></a><span data-ttu-id="c0f82-260">Kapacitás és a megoldás funkció hatókörű sablonok</span><span class="sxs-lookup"><span data-stu-id="c0f82-260">Capacity and capability-scoped solution templates</span></span>
<span data-ttu-id="c0f82-261">Felbontás ellen nyújt, amely támogatja a újbóli, kiterjeszthetőség, tesztelése és tooling eszköz moduláris megközelítést tootemplate fejlesztői.</span><span class="sxs-lookup"><span data-stu-id="c0f82-261">Decomposition provides a modular approach tootemplate development that supports reuse, extensibility, testing, and tooling.</span></span> <span data-ttu-id="c0f82-262">Ez a szakasz részletes biztosít a felbontás ellen megközelítés hogyan lehet kapacitást és -készítés hatókörű alkalmazott tootemplates.</span><span class="sxs-lookup"><span data-stu-id="c0f82-262">This section provides detail on how a decomposition approach can be applied tootemplates with a Capacity or Capability scope.</span></span>

<span data-ttu-id="c0f82-263">Ezt a módszert használja egy fő sablont paraméterértékek kap egy sablon végfelhasználói, majd a sablonok és a parancsfájlok tooseveral típusú után csatolja az alább látható módon.</span><span class="sxs-lookup"><span data-stu-id="c0f82-263">In this approach, a main template receives parameter values from a template consumer, then links tooseveral types of templates and scripts downstream as shown below.</span></span> <span data-ttu-id="c0f82-264">Paraméterek, a statikus változókat és a létrehozott változók értékei használt tooprovide mindkét kapcsolódó hello sablonok.</span><span class="sxs-lookup"><span data-stu-id="c0f82-264">Parameters, static variables, and generated variables are used tooprovide values in and out of hello linked templates.</span></span>

![Sablonparaméterek](./media/best-practices-resource-manager-design-templates/template-parameters.png)

<span data-ttu-id="c0f82-266">**Paraméterek át lettek adva, tooa fő sablont, majd toolinked sablonok**</span><span class="sxs-lookup"><span data-stu-id="c0f82-266">**Parameters are passed tooa main template then toolinked templates**</span></span>

<span data-ttu-id="c0f82-267">hello a következő szakaszok fókusz hello típusú sablonok és a parancsfájlok, amelyek ugyanazt a sablont a van kiválasztott.</span><span class="sxs-lookup"><span data-stu-id="c0f82-267">hello following sections focus on hello types of templates and scripts that a single template is decomposed into.</span></span> <span data-ttu-id="c0f82-268">hello szakaszok az állapotadatokat hello sablonok között továbbításához megközelítések jelenthet.</span><span class="sxs-lookup"><span data-stu-id="c0f82-268">hello sections present approaches for passing state information among hello templates.</span></span> <span data-ttu-id="c0f82-269">Minden sablon és a hello parancsfájl típusok hello kép együtt példák ismerteti.</span><span class="sxs-lookup"><span data-stu-id="c0f82-269">Each template and hello script types in hello image are described along with examples.</span></span> <span data-ttu-id="c0f82-270">Tekintse meg a környezetfüggő például "üzembe azt: a minta megvalósítása" a jelen dokumentum későbbi.</span><span class="sxs-lookup"><span data-stu-id="c0f82-270">For a contextual example, see "Putting it together: a sample implementation" later in this document.</span></span>

### <a name="template-metadata"></a><span data-ttu-id="c0f82-271">Sablon metaadatait</span><span class="sxs-lookup"><span data-stu-id="c0f82-271">Template metadata</span></span>
<span data-ttu-id="c0f82-272">Sablon metaadatait (hello metadata.json fájl) kulcs/érték párok, amelyek ismertetik a JSON-ban, amely az emberek és szoftver-rendszerek által olvasható sablont tartalmaz.</span><span class="sxs-lookup"><span data-stu-id="c0f82-272">Template metadata (hello metadata.json file) contains key/value pairs that describe a template in JSON, which can be read by humans and software systems.</span></span>

![Sablon metaadatait](./media/best-practices-resource-manager-design-templates/template-metadata.png)

<span data-ttu-id="c0f82-274">**Sablon metaadatait hello metadata.json fájl leírása**</span><span class="sxs-lookup"><span data-stu-id="c0f82-274">**Template metadata is described in hello metadata.json file**</span></span>

<span data-ttu-id="c0f82-275">Szoftver ügynökök hello metadata.json fájl lekérdezhetik és hello információkat és a hivatkozás toohello sablont egy weblap vagy directory közzé.</span><span class="sxs-lookup"><span data-stu-id="c0f82-275">Software agents can retrieve hello metadata.json file and publish hello information and a link toohello template in a web page or directory.</span></span> <span data-ttu-id="c0f82-276">Elemek például *itemDisplayName*, *leírás*, *összefoglaló*, *githubUsername*, és *dateUpdated*.</span><span class="sxs-lookup"><span data-stu-id="c0f82-276">Elements include *itemDisplayName*, *description*, *summary*, *githubUsername*, and *dateUpdated*.</span></span>

<span data-ttu-id="c0f82-277">Egy példa fájl egészében alább láthatók.</span><span class="sxs-lookup"><span data-stu-id="c0f82-277">An example file is shown below in its entirety.</span></span>

    {
        "itemDisplayName": "PostgreSQL 9.3 on Ubuntu VMs",
        "description": "This template creates a PostgreSQL streaming-replication between a master and one or more slave servers each with 2 striped data disks. hello database servers are deployed into a private-only subnet with one publicly accessible jumpbox VM in a DMZ subnet with public IP.",
        "summary": "PostgreSQL stream-replication with multiple slave servers and a publicly accessible jumpbox VM",
        "githubUsername": "arsenvlad",
        "dateUpdated": "2015-04-24"
    }

### <a name="main-template"></a><span data-ttu-id="c0f82-278">Fő sablon</span><span class="sxs-lookup"><span data-stu-id="c0f82-278">Main template</span></span>
<span data-ttu-id="c0f82-279">hello fő sablon paraméterek kap a felhasználó, adott információk toopopulate összetett objektumot változókat használ, és végrehajtja a kapcsolódó hello sablonok.</span><span class="sxs-lookup"><span data-stu-id="c0f82-279">hello main template receives parameters from a user, uses that information toopopulate complex object variables, and executes hello linked templates.</span></span>

![Fő sablon](./media/best-practices-resource-manager-design-templates/main-template.png)

<span data-ttu-id="c0f82-281">**hello fő sablon paraméterek kap a felhasználó**</span><span class="sxs-lookup"><span data-stu-id="c0f82-281">**hello main template receives parameters from a user**</span></span>

<span data-ttu-id="c0f82-282">Egy megadott paraméter olyan ismert konfigurációs is hello pólóra size paraméternek kis, közepes vagy nagy a szabványos értékek miatt.</span><span class="sxs-lookup"><span data-stu-id="c0f82-282">One parameter that is provided is a known configuration type also known as hello t-shirt size parameter because of its standardized values such as small, medium, or large.</span></span> <span data-ttu-id="c0f82-283">A gyakorlatban ez a paraméter több módon használhatja.</span><span class="sxs-lookup"><span data-stu-id="c0f82-283">In practice, you can use this parameter in multiple ways.</span></span> <span data-ttu-id="c0f82-284">További információkért lásd: "Ismert konfigurációs erőforrások sablon" a dokumentum későbbi szakaszában.</span><span class="sxs-lookup"><span data-stu-id="c0f82-284">For details, see "Known configuration resources template" later in this document.</span></span>

<span data-ttu-id="c0f82-285">Bizonyos erőforrások telepítése egy felhasználó paraméter által megadott hello ismert konfigurációs függetlenül.</span><span class="sxs-lookup"><span data-stu-id="c0f82-285">Some resources are deployed regardless of hello known configuration specified by a user parameter.</span></span> <span data-ttu-id="c0f82-286">Ezeket az erőforrásokat egyetlen megosztott erőforrás-sablon használatával telepített, és így hello megosztott erőforrás sablon első futtatásakor sablonok által megosztott.</span><span class="sxs-lookup"><span data-stu-id="c0f82-286">These resources are provisioned using a single shared resource template and are shared by other templates, so hello shared resource template is run first.</span></span>

<span data-ttu-id="c0f82-287">Bizonyos erőforrások nem kötelezően telepített hello ismert konfigurációs függetlenül.</span><span class="sxs-lookup"><span data-stu-id="c0f82-287">Some resources are deployed optionally regardless of hello specified known configuration.</span></span>

### <a name="shared-resources-template"></a><span data-ttu-id="c0f82-288">Megosztott erőforrások sablon</span><span class="sxs-lookup"><span data-stu-id="c0f82-288">Shared resources template</span></span>
<span data-ttu-id="c0f82-289">Ez a sablon minden ismert konfigurációk által közösen használt erőforrások nyújt.</span><span class="sxs-lookup"><span data-stu-id="c0f82-289">This template delivers resources that are common across all known configurations.</span></span> <span data-ttu-id="c0f82-290">Hello virtuális hálózati, a rendelkezésre állási készletek, valamint a telepített hello ismert konfigurációs sablon függetlenül is szükségesek, más erőforrásokat tartalmazza.</span><span class="sxs-lookup"><span data-stu-id="c0f82-290">It contains hello virtual network, availability sets, and other resources that are required regardless of hello known configuration template that is deployed.</span></span>

![Sablonerőforrás](./media/best-practices-resource-manager-design-templates/template-resources.png)

<span data-ttu-id="c0f82-292">**Megosztott erőforrások sablon**</span><span class="sxs-lookup"><span data-stu-id="c0f82-292">**Shared resources template**</span></span>

<span data-ttu-id="c0f82-293">Erőforrás nevét, például hello virtuális hálózat nevét, a hello fő sablon alapján.</span><span class="sxs-lookup"><span data-stu-id="c0f82-293">Resource names, such as hello virtual network name, are based on hello main template.</span></span> <span data-ttu-id="c0f82-294">Adja meg azokat, hogy a sablon belül változóként, vagy a hello felhasználó, a szervezete által megkövetelt paraméterként fogadásukra.</span><span class="sxs-lookup"><span data-stu-id="c0f82-294">You can specify them as a variable within that template or receive them as a parameter from hello user, as required by your organization.</span></span>

### <a name="optional-resources-template"></a><span data-ttu-id="c0f82-295">Nem kötelező erőforrások sablon</span><span class="sxs-lookup"><span data-stu-id="c0f82-295">Optional resources template</span></span>
<span data-ttu-id="c0f82-296">hello választható erőforrások sablonban erőforrások programozott módon telepített alapján hello paraméter vagy változó értékét.</span><span class="sxs-lookup"><span data-stu-id="c0f82-296">hello optional resources template contains resources that are programmatically deployed based on hello value of a parameter or variable.</span></span>

![Nem kötelező erőforrások](./media/best-practices-resource-manager-design-templates/optional-resources.png)

<span data-ttu-id="c0f82-298">**Nem kötelező erőforrások sablon**</span><span class="sxs-lookup"><span data-stu-id="c0f82-298">**Optional resources template**</span></span>

<span data-ttu-id="c0f82-299">Például használhatja egy választható erőforrások sablon tooconfigure egy jumpbox, amely lehetővé teszi a közvetett access tooa telepített környezet hello a nyilvános internethez.</span><span class="sxs-lookup"><span data-stu-id="c0f82-299">For example, you can use an optional resources template tooconfigure a jumpbox that enables indirect access tooa deployed environment from hello public Internet.</span></span> <span data-ttu-id="c0f82-300">A paraméter vagy változó tooidentify szeretné használni, hogy hello jumpbox engedélyezni kell és hello *concat* toobuild hello cél neve hello sablon működnek, mint *jumpbox_enabled.json*.</span><span class="sxs-lookup"><span data-stu-id="c0f82-300">You would use a parameter or variable tooidentify whether hello jumpbox should be enabled and hello *concat* function toobuild hello target name for hello template, such as *jumpbox_enabled.json*.</span></span> <span data-ttu-id="c0f82-301">Sablon linking hello eredményül kapott változó tooinstall hello jumpbox szeretné használni.</span><span class="sxs-lookup"><span data-stu-id="c0f82-301">Template linking would use hello resulting variable tooinstall hello jumpbox.</span></span>

<span data-ttu-id="c0f82-302">Hello választható erőforrások sablon több helyen is kapcsolhat:</span><span class="sxs-lookup"><span data-stu-id="c0f82-302">You can link hello optional resources template from multiple places:</span></span>

* <span data-ttu-id="c0f82-303">Ha alkalmazható tooevery telepítési paraméterekkel hivatkozás létrehozása hello megosztott erőforrások sablonból.</span><span class="sxs-lookup"><span data-stu-id="c0f82-303">When applicable tooevery deployment, create a parameter-driven link from hello shared resources template.</span></span>
* <span data-ttu-id="c0f82-304">Ha alkalmazható tooselect ismert konfigurációk – például csak telepíteni, a nagyméretű telepítések – paraméterekkel vagy változó adatvezérelt hivatkozás létrehozása hello ismert konfigurációs sablonból.</span><span class="sxs-lookup"><span data-stu-id="c0f82-304">When applicable tooselect known configurations—for example, only install on large deployments—create a parameter-driven or variable-driven link from hello known configuration template.</span></span>

<span data-ttu-id="c0f82-305">Nem kötelező-e egy adott erőforráshoz nem vezethetik hello sablon fogyasztói hanem hello sablon szolgáltató.</span><span class="sxs-lookup"><span data-stu-id="c0f82-305">Whether a given resource is optional may not be driven by hello template consumer but instead by hello template provider.</span></span> <span data-ttu-id="c0f82-306">Például szükség lehet toosatisfy egy adott termék követelmény vagy a termék bővítmény (common a CSV-k) vagy a tooenforce házirendek (gyakori, hogy a SIs és a nagyvállalati informatikai csoportok).</span><span class="sxs-lookup"><span data-stu-id="c0f82-306">For example, you may need toosatisfy a particular product requirement or product add-on (common for CSVs) or tooenforce policies (common for SIs and enterprise IT groups).</span></span> <span data-ttu-id="c0f82-307">Ezekben az esetekben változó tooidentify is használhatja, hogy hello erőforrás kell telepíteni.</span><span class="sxs-lookup"><span data-stu-id="c0f82-307">In these cases, you can use a variable tooidentify whether hello resource should be deployed.</span></span>

### <a name="known-configuration-resources-template"></a><span data-ttu-id="c0f82-308">Ismert konfigurációs erőforrások sablon</span><span class="sxs-lookup"><span data-stu-id="c0f82-308">Known configuration resources template</span></span>
<span data-ttu-id="c0f82-309">Hello fő sablonban a paraméter lehet kitett tooallow hello sablon fogyasztói toospecify egy ismert szükségeskonfiguráció toodeploy.</span><span class="sxs-lookup"><span data-stu-id="c0f82-309">In hello main template, a parameter can be exposed tooallow hello template consumer toospecify a desired known configuration toodeploy.</span></span> <span data-ttu-id="c0f82-310">Gyakran az ismert konfigurációs rögzített konfigurációs méretek védőfal, kis, közepes és nagy számú használja a pólóra mérete megközelítést.</span><span class="sxs-lookup"><span data-stu-id="c0f82-310">Often, this known configuration uses a t-shirt size approach with a set of fixed configuration sizes such as sandbox, small, medium, and large.</span></span>

![Ismert konfigurációs erőforrások](./media/best-practices-resource-manager-design-templates/known-config.png)

<span data-ttu-id="c0f82-312">**Ismert konfigurációs erőforrások sablon**</span><span class="sxs-lookup"><span data-stu-id="c0f82-312">**Known configuration resources template**</span></span>

<span data-ttu-id="c0f82-313">hello pólóra mérete módszer általában arra használják, de hello paraméterek minden olyan ismert konfigurációk jelenthet.</span><span class="sxs-lookup"><span data-stu-id="c0f82-313">hello t-shirt size approach is commonly used, but hello parameters can represent any set of known configurations.</span></span> <span data-ttu-id="c0f82-314">Például egy vállalati alkalmazás, például a fejlesztői, tesztelési és termék környezeteket készlete is megadhat.</span><span class="sxs-lookup"><span data-stu-id="c0f82-314">For example, you can specify a set of environments for an enterprise application such as Development, Test, and Product.</span></span> <span data-ttu-id="c0f82-315">Vagy használhat egy felhőalapú szolgáltatás toorepresent különböző a méretezési egység, termékverziók vagy termék konfigurációkat, például a közösségi, Developer és Enterprise.</span><span class="sxs-lookup"><span data-stu-id="c0f82-315">Or you could use it for a cloud service toorepresent different scale units, product versions, or product configurations such as Community, Developer, or Enterprise.</span></span>

<span data-ttu-id="c0f82-316">Hello megosztott erőforrás sablon, a változók átadott toohello ismert konfigurációk sablon alkalmazásból:</span><span class="sxs-lookup"><span data-stu-id="c0f82-316">As with hello shared resource template, variables are passed toohello known configurations template from either:</span></span>

* <span data-ttu-id="c0f82-317">A felhasználó – Ez azt jelenti, hogy hello paraméterek küldött toohello fő sablont.</span><span class="sxs-lookup"><span data-stu-id="c0f82-317">An end user—that is, hello parameters sent toohello main template.</span></span>
* <span data-ttu-id="c0f82-318">Egy szervezet – Ez azt jelenti, hogy a változók hello fő sablonban, amelyek belső követelmények vagy házirendek hello.</span><span class="sxs-lookup"><span data-stu-id="c0f82-318">An organization—that is, hello variables in hello main template that represent internal requirements or policies.</span></span>

### <a name="member-resources-template"></a><span data-ttu-id="c0f82-319">Tag erőforrások sablon</span><span class="sxs-lookup"><span data-stu-id="c0f82-319">Member resources template</span></span>
<span data-ttu-id="c0f82-320">Egy ismert konfigurációs belül egy vagy több tag csomóponttípusok gyakran érhetők el.</span><span class="sxs-lookup"><span data-stu-id="c0f82-320">Within a known configuration, one or more member node types are often included.</span></span> <span data-ttu-id="c0f82-321">Például Hadoop lehetősége főcsomópont és adatcsomópontokat.</span><span class="sxs-lookup"><span data-stu-id="c0f82-321">For example, with Hadoop you have master nodes and data nodes.</span></span> <span data-ttu-id="c0f82-322">Ha MongoDB telepíti, akkor adatcsomópontokat és egy soron.</span><span class="sxs-lookup"><span data-stu-id="c0f82-322">If you are installing MongoDB, you have data nodes and an arbiter.</span></span> <span data-ttu-id="c0f82-323">Ha alapszintű DataStax telepít, akkor adatok csomópontok és a virtuális gép telepítve OpsCenter és.</span><span class="sxs-lookup"><span data-stu-id="c0f82-323">If you are deploying DataStax, you have data nodes and a VM with OpsCenter installed.</span></span>

![Tagok erőforrások](./media/best-practices-resource-manager-design-templates/member-resources.png)

<span data-ttu-id="c0f82-325">**Tag erőforrások sablon**</span><span class="sxs-lookup"><span data-stu-id="c0f82-325">**Member resources template**</span></span>

<span data-ttu-id="c0f82-326">Különböző típusú csomópontok mérete eltér a virtuális gépek, a csatlakoztatott lemezek, a parancsfájlok tooinstall számát, és hello csomópontok, a virtuális gépek hello portbeállításokat, -példányok száma és egyéb részletek beállítása.</span><span class="sxs-lookup"><span data-stu-id="c0f82-326">Each type of nodes can have different sizes of VMs, numbers of attached disks, scripts tooinstall and set up hello nodes, port configurations for hello VMs, number of instances, and other details.</span></span> <span data-ttu-id="c0f82-327">Így az egyes csomóponttípusok lekérdezi a saját a szoftver belül hello virtuális gép konfigurálása, és tag erőforrás sablon, amely tartalmazza a hello telepítése és konfigurálása az infrastruktúra, valamint parancsfájlok toodeploy végrehajtása adatokat.</span><span class="sxs-lookup"><span data-stu-id="c0f82-327">So each node type gets its own member resource template, which contains hello details for deploying and configuring an infrastructure as well as executing scripts toodeploy and configure software within hello VM.</span></span>

<span data-ttu-id="c0f82-328">Virtuális gépek általában parancsfájlok kétféle használt, széles körben újrafelhasználható és egyéni parancsfájlok.</span><span class="sxs-lookup"><span data-stu-id="c0f82-328">For VMs, typically two types of scripts are used, widely reusable and custom scripts.</span></span>

### <a name="widely-reusable-scripts"></a><span data-ttu-id="c0f82-329">Széles körben újrafelhasználható parancsfájlok</span><span class="sxs-lookup"><span data-stu-id="c0f82-329">Widely reusable scripts</span></span>
<span data-ttu-id="c0f82-330">Széles körben újrafelhasználható parancsfájlok segítségével többféle típusú sablonok.</span><span class="sxs-lookup"><span data-stu-id="c0f82-330">Widely reusable scripts can be used across multiple types of templates.</span></span> <span data-ttu-id="c0f82-331">Hello jobb példák a széles körben újrafelhasználható parancsfájlok egyikét állítja be a Linux toopool lemez RAID, és nagyobb számú IOPS szerezhet.</span><span class="sxs-lookup"><span data-stu-id="c0f82-331">One of hello better examples of these widely reusable scripts sets up RAID on Linux toopool disks and gain a greater number of IOPS.</span></span> <span data-ttu-id="c0f82-332">Függetlenül a virtuális gép hello telepítendő hello szoftver ezt a parancsfájlt biztosít a bevált gyakorlatok újbóli gyakori forgatókönyvek.</span><span class="sxs-lookup"><span data-stu-id="c0f82-332">Regardless of hello software being installed in hello VM, this script provides reuse of proven practices for common scenarios.</span></span>

![Újrafelhasználható parancsfájlok](./media/best-practices-resource-manager-design-templates/reusable-scripts.png)

<span data-ttu-id="c0f82-334">**Tag erőforrásokat sablonok meghívhatja széles körben újrafelhasználható parancsfájlok**</span><span class="sxs-lookup"><span data-stu-id="c0f82-334">**Member resources templates can call widely reusable scripts**</span></span>

### <a name="custom-scripts"></a><span data-ttu-id="c0f82-335">Egyéni parancsfájlok</span><span class="sxs-lookup"><span data-stu-id="c0f82-335">Custom scripts</span></span>
<span data-ttu-id="c0f82-336">Sablonok általában egy vagy több olyan parancsfájlok, amelyek telepítése és konfigurálása a virtuális gépeken szoftver hívja.</span><span class="sxs-lookup"><span data-stu-id="c0f82-336">Templates commonly call one or more scripts that install and configure software within VMs.</span></span> <span data-ttu-id="c0f82-337">A közös minta látható a nagy topológiákhoz, ahol egy vagy több tag típusa több példánya van telepítve.</span><span class="sxs-lookup"><span data-stu-id="c0f82-337">A common pattern is seen with large topologies where multiple instances of one or more member types are deployed.</span></span> <span data-ttu-id="c0f82-338">Minden virtuális gép ezzel párhuzamosan futtatható kezdeményezett egy telepítési parancsfájlt a telepítési parancsprogram, minden virtuális gép (vagy egy megadott tag típusú virtuális gépeinek) üzembe helyezése után is nevezett követ.</span><span class="sxs-lookup"><span data-stu-id="c0f82-338">An installation script is initiated for every VM that can be run in parallel, followed by a setup script that is called after all VMs (or all VMs of a given member type) are deployed.</span></span>

![Egyéni parancsfájlok](./media/best-practices-resource-manager-design-templates/custom-scripts.png)

<span data-ttu-id="c0f82-340">**Tag erőforrásokat sablonok meghívhatja a parancsfájlokat egy adott célra, például a Virtuálisgép-konfiguráció**</span><span class="sxs-lookup"><span data-stu-id="c0f82-340">**Member resources templates can call scripts for a specific purpose such as VM configuration**</span></span>

## <a name="capability-scoped-solution-template-example---redis"></a><span data-ttu-id="c0f82-341">Képesség hatókörű megoldás sablon példa - Redis</span><span class="sxs-lookup"><span data-stu-id="c0f82-341">Capability-scoped solution template example - Redis</span></span>
<span data-ttu-id="c0f82-342">tooshow megvalósítását működhetnek, hogyan vizsgáljuk meg a sablont, amely elősegíti a hello a telepítését és konfigurálását a Redis szabványos pólóra méretben felépítése gyakorlati példa.</span><span class="sxs-lookup"><span data-stu-id="c0f82-342">tooshow how an implementation might work, let's look at a practical example of building a template that facilitates hello deployment and configuration of Redis in standard t-shirt sizes.</span></span>  

<span data-ttu-id="c0f82-343">Hello központi telepítését a megosztott erőforrásokat (virtuális hálózatot, tárfiókot, rendelkezésre állási készletek) és egy opcionális erőforrás (jumpbox) vannak.</span><span class="sxs-lookup"><span data-stu-id="c0f82-343">For hello deployment, there are a set of shared resources (virtual network, storage account, availability sets) and an optional resource (jumpbox).</span></span> <span data-ttu-id="c0f82-344">Több ismert konfigurációk-ként pólóra méretek (kis, közepes, nagy), de az egyetlen csomópont írja be.</span><span class="sxs-lookup"><span data-stu-id="c0f82-344">There are multiple known configurations represented as t-shirt sizes (small, medium, large) but each with a single node type.</span></span> <span data-ttu-id="c0f82-345">Van még két célú-specifikus parancsfájlok (telepítési, konfigurációs).</span><span class="sxs-lookup"><span data-stu-id="c0f82-345">There are also two purpose-specific scripts (installation, configuration).</span></span>

### <a name="creating-hello-template-files"></a><span data-ttu-id="c0f82-346">Hello sablon fájlok létrehozása</span><span class="sxs-lookup"><span data-stu-id="c0f82-346">Creating hello template files</span></span>
<span data-ttu-id="c0f82-347">Azuredeploy.json fő sablont hozna létre.</span><span class="sxs-lookup"><span data-stu-id="c0f82-347">You would create a Main Template named azuredeploy.json.</span></span>

<span data-ttu-id="c0f82-348">Megosztott resources.json nevű megosztott erőforrások sablon létrehozása</span><span class="sxs-lookup"><span data-stu-id="c0f82-348">You create Shared Resources Template named shared-resources.json</span></span>

<span data-ttu-id="c0f82-349">Egy nem kötelező erőforrás sablon tooenable hello telepítését egy jumpbox jumpbox_enabled.json nevű létrehozása</span><span class="sxs-lookup"><span data-stu-id="c0f82-349">You create an Optional Resource Template tooenable hello deployment of a jumpbox, named jumpbox_enabled.json</span></span>

<span data-ttu-id="c0f82-350">A redis csak egyetlen csomópont típusa, használ, így a csomópont-resources.json nevű egyetlen tag erőforrás sablont hoz létre.</span><span class="sxs-lookup"><span data-stu-id="c0f82-350">Redis uses just a single node type, so you create a single Member Resource Template named node-resources.json.</span></span>

<span data-ttu-id="c0f82-351">A redis gyorsítótárral tooinstall szeretné, hogy minden egyes csomóponton, és ezután hello fürt beállítása.</span><span class="sxs-lookup"><span data-stu-id="c0f82-351">With Redis, you want tooinstall each individual node, and then set up hello cluster.</span></span>  <span data-ttu-id="c0f82-352">Parancsfájlok tooaccommodate hello telepítése és beállítása, a redis-fürt-install.sh és a redis-fürt-setup.sh.</span><span class="sxs-lookup"><span data-stu-id="c0f82-352">You have scripts tooaccommodate hello installation and set up, redis-cluster-install.sh and redis-cluster-setup.sh.</span></span>

### <a name="linking-hello-templates"></a><span data-ttu-id="c0f82-353">Hivatkozási hello sablonok</span><span class="sxs-lookup"><span data-stu-id="c0f82-353">Linking hello templates</span></span>
<span data-ttu-id="c0f82-354">Hello fő sablon ki toohello megosztott erőforrások sablont, amely létrehozza a virtuális hálózati hello sablon linking használva hivatkozik.</span><span class="sxs-lookup"><span data-stu-id="c0f82-354">Using template linking, hello main template links out toohello shared resources template, which establishes hello virtual network.</span></span>

<span data-ttu-id="c0f82-355">Egy jumpbox kell telepíteni, hogy logika hello fő sablon tooenable fogyasztói hello sablon toospecify belül jelenik meg.</span><span class="sxs-lookup"><span data-stu-id="c0f82-355">Logic is added within hello main template tooenable consumers of hello template toospecify whether a jumpbox should be deployed.</span></span> <span data-ttu-id="c0f82-356">Egy *engedélyezett* hello értéke *EnableJumpbox* paraméter azt jelzi, hogy hello ügyfél toodeploy egy jumpbox szeretne.</span><span class="sxs-lookup"><span data-stu-id="c0f82-356">An *enabled* value for hello *EnableJumpbox* parameter indicates that hello customer wants toodeploy a jumpbox.</span></span> <span data-ttu-id="c0f82-357">Ha ezt az értéket, hello sablon összefűzi *_enabled* hello jumpbox funkció utótag tooa alap sablon nevét.</span><span class="sxs-lookup"><span data-stu-id="c0f82-357">When this value is provided, hello template concatenates *_enabled* as a suffix tooa base template name for hello jumpbox capability.</span></span>

<span data-ttu-id="c0f82-358">hello fő sablont alkalmazza hello *nagy* paraméter értékének pólóra méretét, és ezután használja az utótag tooa alap sablon nevét egy olyan sablon hivatkozás ki ezt az értéket túl*technology_on_os_large.json*.</span><span class="sxs-lookup"><span data-stu-id="c0f82-358">hello main template applies hello *large* parameter value as a suffix tooa base template name for t-shirt sizes, and then uses that value in a template link out too*technology_on_os_large.json*.</span></span>

<span data-ttu-id="c0f82-359">Ezen az ábrán hello topológia hasonló lesz.</span><span class="sxs-lookup"><span data-stu-id="c0f82-359">hello topology would resemble this illustration.</span></span>

![Redis sablon](./media/best-practices-resource-manager-design-templates/redis-template.png)

<span data-ttu-id="c0f82-361">**Egy Redis-sablon sablon struktúra**</span><span class="sxs-lookup"><span data-stu-id="c0f82-361">**Template structure for a Redis template**</span></span>

### <a name="configuring-state"></a><span data-ttu-id="c0f82-362">Állapot beállítása</span><span class="sxs-lookup"><span data-stu-id="c0f82-362">Configuring state</span></span>
<span data-ttu-id="c0f82-363">Hello fürt hello csomópontján tooconfiguring hello állapot két lépésből áll, mindkettő célú adott parancsfájlok által képviselt.</span><span class="sxs-lookup"><span data-stu-id="c0f82-363">For hello nodes in hello cluster, there are two steps tooconfiguring hello state, both represented by Purpose Specific Scripts.</span></span>  <span data-ttu-id="c0f82-364">"redis-fürt-install.sh" telepíti Redis és "redis-fürt-setup.sh" hello fürt beállítása a.</span><span class="sxs-lookup"><span data-stu-id="c0f82-364">"redis-cluster-install.sh" installs Redis and "redis-cluster-setup.sh" sets up hello cluster.</span></span>

### <a name="supporting-different-size-deployments"></a><span data-ttu-id="c0f82-365">A különböző méretű központi telepítések támogatása</span><span class="sxs-lookup"><span data-stu-id="c0f82-365">Supporting Different Size Deployments</span></span>
<span data-ttu-id="c0f82-366">Változók, belül hello pólóra mérete sablon minden típusú csomópontok hello számát adja meg a hello toodeploy megadott mérete (*nagy*).</span><span class="sxs-lookup"><span data-stu-id="c0f82-366">Inside variables, hello t-shirt size template specifies hello number of nodes of each type toodeploy for hello specified size (*large*).</span></span> <span data-ttu-id="c0f82-367">Majd központilag telepíti ezt a számot használó erőforrás hurkok, a csomópont nevét a numerikus sorozatszáma hozzáfűzésével egyedi nevek tooresources biztosító Virtuálisgép-példányokat *copyIndex()*.</span><span class="sxs-lookup"><span data-stu-id="c0f82-367">It then deploys that number of VM instances using resource loops, providing unique names tooresources by appending a node name with a numeric sequence number from *copyIndex()*.</span></span> <span data-ttu-id="c0f82-368">Az hajtja végre ezeket a lépéseket mindkét gyakran és meleg zóna virtuális gépekhez, a hello pólóra sablon</span><span class="sxs-lookup"><span data-stu-id="c0f82-368">It does these steps for both hot and warm zone VMs, as defined in hello t-shirt name template</span></span>

## <a name="decomposition-and-end-to-end-solution-scoped-templates"></a><span data-ttu-id="c0f82-369">Felbontás ellen és végpont megoldás hatókörű sablonok</span><span class="sxs-lookup"><span data-stu-id="c0f82-369">Decomposition and end-to-end solution scoped templates</span></span>
<span data-ttu-id="c0f82-370">A végpont megoldás hatókörű megoldássablon arra irányul, hogy egy végpont megoldást hoz létre.</span><span class="sxs-lookup"><span data-stu-id="c0f82-370">A solution template with an end-to-end solution scope is focused on delivering an end-to-end solution.</span></span>  <span data-ttu-id="c0f82-371">Erre akkor általában több képesség hatókörbe tartozó sablonokat további erőforrások, a logikai és a állapot áll.</span><span class="sxs-lookup"><span data-stu-id="c0f82-371">This approach is typically a composition of multiple capability-scoped templates with additional resources, logic, and state.</span></span>

<span data-ttu-id="c0f82-372">Kiemelve a hello alábbi rendszerképek közül, mint hello ugyanannak a modellnek hatókörű funkció sablonok használt ki van bővítve a végpont megoldás hatókörű sablonok.</span><span class="sxs-lookup"><span data-stu-id="c0f82-372">As highlighted in hello image below, hello same model used for capability scoped templates is extended for templates with an End-to-End Solution Scope.</span></span>

<span data-ttu-id="c0f82-373">A megosztott erőforrások sablon és a választható erőforrásokat sablonok szolgál, hello hello kapacitás, és képes hasonlóan azonos funkciót sablon megközelítések hatókörű, de hello end tooend megoldás hatóköre.</span><span class="sxs-lookup"><span data-stu-id="c0f82-373">A Shared Resources Template and Optional Resources Templates serve hello same function as in hello capacity and capability scoped template approaches, but are scoped for hello end tooend solution.</span></span>

<span data-ttu-id="c0f82-374">Záró tooend megoldás hatókörű sablonok is általában rendelkezhetnek pólóra méretek, hello konfigurációs erőforrások ismert sablon tükrözi hello megoldás egy adott ismert konfiguráció szükséges.</span><span class="sxs-lookup"><span data-stu-id="c0f82-374">As end tooend solution scoped templates also can typically have t-shirt sizes, hello Known Configuration Resources template reflects what is required for a given known configuration of hello solution.</span></span>

<span data-ttu-id="c0f82-375">hello ismert konfigurációs erőforrások sablon hivatkozások tooone vagy további funkció hatókörű megoldás sablonok, amelyek megfelelő toohello end tooend megoldás, valamint a hello tag erőforrás sablonok hello end tooend megoldás a szükséges.</span><span class="sxs-lookup"><span data-stu-id="c0f82-375">hello Known Configuration Resources Template links tooone or more capability scoped solution templates that are relevant toohello end tooend solution as well as hello Member Resource Templates that are required for hello end tooend solution.</span></span>

<span data-ttu-id="c0f82-376">Hello pólóra hello megoldás lehet, hogy hello egyedi képesség hatókörű sablon eltér, belül hello konfigurációs erőforrások sablon ismert változók értékei használt tooprovide hello megfelelő hatókörű alárendelt funkció megoldás sablonok toodeploy hello megfelelő pólóra mérete.</span><span class="sxs-lookup"><span data-stu-id="c0f82-376">As hello t-shirt size of hello solution may be different than hello individual capability-scoped template, variables within hello Known Configuration Resources Template are used tooprovide hello appropriate values for downstream capability scoped solution templates toodeploy hello appropriate t-shirt size.</span></span>

![Végpontok közötti](./media/best-practices-resource-manager-design-templates/end-to-end.png)

<span data-ttu-id="c0f82-378">**hello modell használt kapacitás vagy hatókörű funkció megoldás sablonok könnyen bővíthető end tooend megoldás sablon hatókörök**</span><span class="sxs-lookup"><span data-stu-id="c0f82-378">**hello model used for capacity or capability scoped solution templates can be readily extended for end tooend solution template scopes**</span></span>

## <a name="preparing-templates-for-hello-marketplace"></a><span data-ttu-id="c0f82-379">Sablonok előkészítése hello piactér</span><span class="sxs-lookup"><span data-stu-id="c0f82-379">Preparing templates for hello Marketplace</span></span>
<span data-ttu-id="c0f82-380">könnyen megelőző megközelítés hello forgatókönyvek, ahol vállalatok számára, a SIs és a megosztott fürtkötetek kívánt tooeither maguk hello sablonok telepítése, vagy engedélyezze a saját maguk a felhasználók toodeploy kezelésére képes.</span><span class="sxs-lookup"><span data-stu-id="c0f82-380">hello preceding approach readily accommodates scenarios where Enterprises, SIs, and CSVs want tooeither deploy hello templates themselves or enable their customers toodeploy on their own.</span></span>

<span data-ttu-id="c0f82-381">Egy másik kívánt forgatókönyv telepít, egy sablon hello piactéren keresztül.</span><span class="sxs-lookup"><span data-stu-id="c0f82-381">Another desired scenario is deploying a template via hello marketplace.</span></span>  <span data-ttu-id="c0f82-382">A felbontás ellen megközelítés a hello piactér is, néhány apró eltéréstől működik.</span><span class="sxs-lookup"><span data-stu-id="c0f82-382">This decomposition approach works for hello marketplace as well, with some minor changes.</span></span>

<span data-ttu-id="c0f82-383">Ahogy korábban említettük, a sablonok használt toooffer különböző központi telepítési típusok a hello piactér eladásra lehet.</span><span class="sxs-lookup"><span data-stu-id="c0f82-383">As mentioned previously, templates can be used toooffer distinct deployment types for sale in hello marketplace.</span></span> <span data-ttu-id="c0f82-384">Különböző központi telepítési típusok pólóra méretek (kis, közepes, nagy), a termék/célközönség típusa (közösségi, fejlesztők, vállalati) vagy a szolgáltatás típusa (alapszintű, a magas rendelkezésre állású) lehet.</span><span class="sxs-lookup"><span data-stu-id="c0f82-384">Distinct deployment types may be t-shirt sizes (small, medium, large), product/audience type (community, developer, enterprise), or feature type (basic, high availability).</span></span>

<span data-ttu-id="c0f82-385">Mint a záró tooend meglévő, alább látható módon hello megoldás vagy hatókörön belüli sablonok könnyen lehet funkció be a toolist hello különböző ismert konfigurációk hello piactéren.</span><span class="sxs-lookup"><span data-stu-id="c0f82-385">As shown below, hello existing end tooend solution or capability scoped templates can be readily utilized toolist hello different known configurations in hello marketplace.</span></span>

<span data-ttu-id="c0f82-386">hello paraméterek toohello fő sablon először módosítva lett tooremove hello tshirtSize nevű bemeneti paraméter.</span><span class="sxs-lookup"><span data-stu-id="c0f82-386">hello parameters toohello main template are first modified tooremove hello inbound parameter named tshirtSize.</span></span>

<span data-ttu-id="c0f82-387">Miközben hello különböző központi telepítési típusok toohello konfigurációs erőforrások sablon ismert leképezése, hello közös erőforrások is szükséges, és a konfigurációs található hello megosztott erőforrások sablont és potenciálisan azokat az opcionális erőforrás-sablonokban.</span><span class="sxs-lookup"><span data-stu-id="c0f82-387">While hello distinct deployment types map toohello Known Configuration Resources Template, they also need hello common resources and configuration found in hello Shared Resources Template and potentially those in Optional Resource Templates.</span></span>

<span data-ttu-id="c0f82-388">Ha azt szeretné, toopublish a sablon toohello piactér, kapcsolatot hoz létre a fő sablont, amely kiváltja a hello korábban elérhető bejövő paraméter tshirtSize tooa változó ágyazott hello sablon különböző példányait.</span><span class="sxs-lookup"><span data-stu-id="c0f82-388">If you want toopublish your template toohello marketplace, you establish distinct copies of your Main template that replaces hello previously available inbound parameter of tshirtSize tooa variable embedded within hello template.</span></span>

![Piactér](./media/best-practices-resource-manager-design-templates/marketplace.png)

<span data-ttu-id="c0f82-390">**A megoldás testreszabásához hatókörű hello piactér sablonját**</span><span class="sxs-lookup"><span data-stu-id="c0f82-390">**Adapting a solution scoped template for hello marketplace**</span></span>

## <a name="next-steps"></a><span data-ttu-id="c0f82-391">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="c0f82-391">Next steps</span></span>
* <span data-ttu-id="c0f82-392">toolearn megosztása állapot-sablonok, lásd: [állapotát az Azure Resource Manager sablonokban megosztása](best-practices-resource-manager-state.md).</span><span class="sxs-lookup"><span data-stu-id="c0f82-392">toolearn about sharing state into and out of templates, see [Sharing state in Azure Resource Manager templates](best-practices-resource-manager-state.md).</span></span>
* <span data-ttu-id="c0f82-393">A vállalatok használatát erőforrás-kezelő tooeffectively segítségükkel előfizetések kezelése című [Azure enterprise scaffold - előíró előfizetés irányítás](resource-manager-subscription-governance.md).</span><span class="sxs-lookup"><span data-stu-id="c0f82-393">For guidance on how enterprises can use Resource Manager tooeffectively manage subscriptions, see [Azure enterprise scaffold - prescriptive subscription governance](resource-manager-subscription-governance.md).</span></span>

