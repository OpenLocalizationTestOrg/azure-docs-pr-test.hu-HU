---
title: "Azure-sablonok összetett megoldások kialakítása |} Microsoft Docs"
description: "Azt mutatja be ajánlott eljárások az Azure Resource Manager sablonok összetett forgatókönyvek tervezése"
services: azure-resource-manager
documentationcenter: 
author: tfitzmac
manager: timlt
editor: tysonn
ms.assetid: ce1141d6-ece7-4976-acea-1db1f775409e
ms.service: azure-resource-manager
ms.workload: multiple
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 12/19/2016
ms.author: tomfitz
ms.openlocfilehash: dcc31f7a8c85a8f7fbd554371a66fb1e348bca17
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 08/03/2017
---
# <a name="design-patterns-for-azure-resource-manager-templates-when-deploying-complex-solutions"></a><span data-ttu-id="3301c-103">Az Azure Resource Manager-sablonok összetett megoldások telepítésekor tervezési minták</span><span class="sxs-lookup"><span data-stu-id="3301c-103">Design patterns for Azure Resource Manager templates when deploying complex solutions</span></span>
<span data-ttu-id="3301c-104">Egy rugalmas megközelítéssel Azure Resource Manager-sablonok alapján telepítheti a komplex topológiákba gyorsan és következetesen legyenek.</span><span class="sxs-lookup"><span data-stu-id="3301c-104">Using a flexible approach based on Azure Resource Manager templates, you can deploy complex topologies quickly and consistently.</span></span> <span data-ttu-id="3301c-105">Core ajánlatok fejlődnek, könnyen módosíthatja az történő központi telepítését vagy halegyedeket esetek vagy az ügyfelek a Variant típusú adatok befogadásához.</span><span class="sxs-lookup"><span data-stu-id="3301c-105">You can adapt these deployments easily as core offerings evolve or to accommodate variants for outlier scenarios or customers.</span></span>

<span data-ttu-id="3301c-106">Ez a témakör egy nagyobb tanulmány részét képezi.</span><span class="sxs-lookup"><span data-stu-id="3301c-106">This topic is part of a larger whitepaper.</span></span> <span data-ttu-id="3301c-107">Olvassa el a teljes dokumentum, le kell töltenie [globális osztály Azure Resource Manager sablonok szempontok és eljárások bizonyítása](http://download.microsoft.com/download/8/E/1/8E1DBEFA-CECE-4DC9-A813-93520A5D7CFE/World Class ARM Templates - Considerations and Proven Practices.pdf).</span><span class="sxs-lookup"><span data-stu-id="3301c-107">To read the full paper, download [World Class Azure Resource Manager Templates Considerations and Proven Practices](http://download.microsoft.com/download/8/E/1/8E1DBEFA-CECE-4DC9-A813-93520A5D7CFE/World Class ARM Templates - Considerations and Proven Practices.pdf).</span></span>

<span data-ttu-id="3301c-108">Sablonok a következő előnyöket a mögöttes Azure Resource Manager alkalmazkodás és olvashatóság JavaScript Object Notation (JSON) kombinálva.</span><span class="sxs-lookup"><span data-stu-id="3301c-108">Templates combine the benefits of the underlying Azure Resource Manager with the adaptability and readability of JavaScript Object Notation (JSON).</span></span> <span data-ttu-id="3301c-109">Sablonok használatával:</span><span class="sxs-lookup"><span data-stu-id="3301c-109">Using templates, you can:</span></span>

* <span data-ttu-id="3301c-110">Topológiákat és a munkaterhelések következetesen kell telepíteni.</span><span class="sxs-lookup"><span data-stu-id="3301c-110">Deploy topologies and their workloads consistently.</span></span>
* <span data-ttu-id="3301c-111">Erőforráscsoportok használata az alkalmazásban az erőforrások kezelése.</span><span class="sxs-lookup"><span data-stu-id="3301c-111">Manage all your resources in an application together using resource groups.</span></span>
* <span data-ttu-id="3301c-112">Szerepköralapú hozzáférés-vezérlést (RBAC) megfelelő hozzáférési jogot a felhasználók, csoportok és a szolgáltatások alkalmazni.</span><span class="sxs-lookup"><span data-stu-id="3301c-112">Apply role-based access control (RBAC) to grant appropriate access to users, groups, and services.</span></span>
* <span data-ttu-id="3301c-113">Címkézési társítások segítségével teheti gördülékennyé feladatokat, mint a számlázási kumulatív.</span><span class="sxs-lookup"><span data-stu-id="3301c-113">Use tagging associations to streamline tasks such as billing rollups.</span></span>

<span data-ttu-id="3301c-114">Ez a cikk részletesen fogyasztás forgatókönyvek, architektúra és a Tervező munkamenetek és az Azure Ügyféltanácsadói csapatának (AzureCAT) ügyfelekkel valós sablon megvalósítások során feltárt megvalósítási minták.</span><span class="sxs-lookup"><span data-stu-id="3301c-114">This article provides details on consumption scenarios, architecture, and implementation patterns identified during our design sessions and real-world template implementations with Azure Customer Advisory Team (AzureCAT) customers.</span></span> <span data-ttu-id="3301c-115">Messze academic, ezek a módszerek bizonyítottan 12 a Linux-alapú OSS felső technológiák, például sablonokat fejlesztésének figyelmeztet eljárásokat: Apache Kafka, Apache Spark, Cloudera, Couchbase, Hortonworks HDP, alapszintű DataStax vállalati Apache Cassandra, Elasticsearch, Jenkins, MongoDB, PostgreSQL, Redis és Nagios technológiával.</span><span class="sxs-lookup"><span data-stu-id="3301c-115">Far from academic, these approaches are proven practices informed by the development of templates for 12 of the top Linux-based OSS technologies, including: Apache Kafka, Apache Spark, Cloudera, Couchbase, Hortonworks HDP, DataStax Enterprise powered by Apache Cassandra, Elasticsearch, Jenkins, MongoDB, PostgreSQL, Redis, and Nagios.</span></span> 

<span data-ttu-id="3301c-116">Ez a cikk osztja meg ezek az eljárások segítséget nyújtanak a globális osztály Azure Resource Manager-sablonok tervezővel bizonyítása.</span><span class="sxs-lookup"><span data-stu-id="3301c-116">This article shares these proven practices to help you architect world class Azure Resource Manager templates.</span></span>  

<span data-ttu-id="3301c-117">A munka az ügyfelek, a vállalatok számára, a rendszer kiegészítők (SI) s és a megosztott fürtkötetek több Resource Manager sablon felhasználásának követelménye azonosította azt.</span><span class="sxs-lookup"><span data-stu-id="3301c-117">In our work with customers, we have identified several Resource Manager template consumption experiences across enterprises, System Integrators (SI)s, and CSVs.</span></span> <span data-ttu-id="3301c-118">Az alábbiakban gyakori forgatókönyvek és minták magas szintű áttekintését különböző vevő típusokhoz.</span><span class="sxs-lookup"><span data-stu-id="3301c-118">The following sections provide a high-level overview of common scenarios and patterns for different customer types.</span></span>

## <a name="enterprises-and-system-integrators"></a><span data-ttu-id="3301c-119">A vállalatok és rendszerintegrátorok</span><span class="sxs-lookup"><span data-stu-id="3301c-119">Enterprises and system integrators</span></span>
<span data-ttu-id="3301c-120">Nagy méretű szervezeteknek belül általában látható Resource Manager-sablonok két fogyasztóinak: belső szoftver a fejlesztési csapat és a vállalati informatikai.</span><span class="sxs-lookup"><span data-stu-id="3301c-120">Within large organizations, we commonly see two consumers of Resource Manager templates: internal software development teams and corporate IT.</span></span> <span data-ttu-id="3301c-121">Azt talált, amely a forgatókönyvek a SIs térkép a forgatókönyvekre azoknak a vállalatoknak, így ugyanazok a feltételek vonatkoznak.</span><span class="sxs-lookup"><span data-stu-id="3301c-121">We've found that the scenarios for the SIs map to the scenarios for Enterprises, so the same considerations apply.</span></span>

### <a name="internal-software-development-teams"></a><span data-ttu-id="3301c-122">Belső szoftver a fejlesztési csapat</span><span class="sxs-lookup"><span data-stu-id="3301c-122">Internal software development teams</span></span>
<span data-ttu-id="3301c-123">Ha a csoport az üzleti támogató szoftverek házon belül fejlesztett alkalmazásokra, a sablonok helyezhet üzembe gyorsan technológiákat biztosítja a megoldások üzleti-specifikus könnyű megoldást biztosítson.</span><span class="sxs-lookup"><span data-stu-id="3301c-123">If your team develops software to support your business, templates provide an easy way to quickly deploy technologies for use in business-specific solutions.</span></span> <span data-ttu-id="3301c-124">Sablonok használatával gyorsan hozzon létre képzési környezetek, amelyek lehetővé teszik a csoport tagjai ahhoz, hogy a szükséges.</span><span class="sxs-lookup"><span data-stu-id="3301c-124">You can also use templates to rapidly create training environments that enable team members to gain necessary skills.</span></span>

<span data-ttu-id="3301c-125">Használhatja a sablont,- vagy kiterjesztése, vagy írja őket az igényeinek megfelelően.</span><span class="sxs-lookup"><span data-stu-id="3301c-125">You can use templates as-is or extend or compose them to accommodate your needs.</span></span> <span data-ttu-id="3301c-126">A sablonokon belüli címkézést, megadhatja számlázási összefoglaló különböző nézetekkel például team projekt, egyéni vagy oktatási.</span><span class="sxs-lookup"><span data-stu-id="3301c-126">Using tagging within templates, you can provide a billing summary with various views such as team, project, individual, and education.</span></span>

<span data-ttu-id="3301c-127">Vállalatok gyakran szeretné, hogy a megoldás egységes telepítési sablon létrehozása a szoftver a fejlesztési csapat.</span><span class="sxs-lookup"><span data-stu-id="3301c-127">Businesses often want software development teams to create a template for consistent deployment of a solution.</span></span> <span data-ttu-id="3301c-128">A sablon megkötések könnyíti meg úgy, hogy a környezetben lévő egyes elemek rögzítettek, és nem bírálható felül.</span><span class="sxs-lookup"><span data-stu-id="3301c-128">The template facilitates constraints so certain items within that environment remain fixed and can't be overridden.</span></span> <span data-ttu-id="3301c-129">Például egy bank sablon RBAC tartalmazza, így a programozók nem vizsgálja felül az adatokat küldeni a személyes tárfiók banki megoldás lehet szükség.</span><span class="sxs-lookup"><span data-stu-id="3301c-129">For example, a bank might require a template to include RBAC so a programmer can’t revise a banking solution to send data to a personal storage account.</span></span>

### <a name="corporate-it"></a><span data-ttu-id="3301c-130">Vállalati informatikai</span><span class="sxs-lookup"><span data-stu-id="3301c-130">Corporate IT</span></span>
<span data-ttu-id="3301c-131">Vállalati informatikai szervezetek általában a sablonokkal kézbesítéséhez felhő kapacitása és a felhőben üzemeltetett képességeket.</span><span class="sxs-lookup"><span data-stu-id="3301c-131">Corporate IT organizations typically use templates for delivering cloud capacity and cloud-hosted capabilities.</span></span>

#### <a name="cloud-capacity"></a><span data-ttu-id="3301c-132">Felhő kapacitása</span><span class="sxs-lookup"><span data-stu-id="3301c-132">Cloud capacity</span></span>
<span data-ttu-id="3301c-133">Gyakori módja a vállalati informatikai csoportok a felhőben kapacitás csoportjai "pólóra méretek", amelyek szabványos ajánlat például kis, közepes méretű és nagy jelenti.</span><span class="sxs-lookup"><span data-stu-id="3301c-133">A common way for corporate IT groups to provide cloud capacity for teams is with "t-shirt sizes", which are standard offering sizes such as small, medium, and large.</span></span> <span data-ttu-id="3301c-134">A méretű pólóra ajánlatok kombinálhatja a különböző típusú, és ugyanakkor biztosítható a szabványosítás, amely lehetővé teszi egy szint mennyiségek sablonokkal.</span><span class="sxs-lookup"><span data-stu-id="3301c-134">The t-shirt sized offerings can mix different resource types and quantities while providing a level of standardization that makes it possible to use templates.</span></span> <span data-ttu-id="3301c-135">A sablonok konzisztens módon, amely érvényesíti a vállalati házirendeket és címkézés használatával biztosítja a jóváírások szervezetek fel kapacitást biztosítanak.</span><span class="sxs-lookup"><span data-stu-id="3301c-135">The templates deliver capacity in a consistent way that enforces corporate policies and uses tagging to provide chargeback to consuming organizations.</span></span>

<span data-ttu-id="3301c-136">Szükség lehet például arra, hogy belül, amely a szoftver a fejlesztési csapat telepítheti a megoldások fejlesztői, tesztelési vagy üzemi környezetben.</span><span class="sxs-lookup"><span data-stu-id="3301c-136">For example, you may need to provide development, test, or production environments within which the software development teams can deploy their solutions.</span></span> <span data-ttu-id="3301c-137">A környezet egy előre definiált hálózati topológia és a szoftver a fejlesztési csapat nem módosítható, például a a nyilvános internethez és a csomag hozzáférésére vonatkozó szabályok elemeknek van.</span><span class="sxs-lookup"><span data-stu-id="3301c-137">The environment has a predefined network topology and elements that the software development teams cannot change, such as rules governing access to the public internet and packet inspection.</span></span> <span data-ttu-id="3301c-138">A környezet különböző hozzáférési jogokkal rendelkező ilyen környezetben a szervezet-specifikus szerepköröket is rendelkezhetnek.</span><span class="sxs-lookup"><span data-stu-id="3301c-138">You may also have organization-specific roles for these environments with distinct access rights for the environment.</span></span>

#### <a name="cloud-hosted-capabilities"></a><span data-ttu-id="3301c-139">Felhőben üzemeltetett képességek</span><span class="sxs-lookup"><span data-stu-id="3301c-139">Cloud-hosted capabilities</span></span>
<span data-ttu-id="3301c-140">Sablonok használatával támogatják a felhőben üzemeltetett lehetőségekről, beleértve az egyes szoftvercsomagok vagy belső üzletágak felkínált összetett ajánlatokat.</span><span class="sxs-lookup"><span data-stu-id="3301c-140">You can use templates to support cloud-hosted capabilities, including individual software packages or composite offerings that are offered to internal lines of business.</span></span> <span data-ttu-id="3301c-141">Példa egy összetett ajánlat lenne elemzés,--szolgáltatás – elemzés, adatmegjelenítési és más technológiák – előre meghatározott hálózati topológia optimalizált, csatlakoztatott konfigurációban kézbesíteni.</span><span class="sxs-lookup"><span data-stu-id="3301c-141">An example of a composite offering would be analytics-as-a-service—analytics, visualization, and other technologies—delivered in an optimized, connected configuration on a predefined network topology.</span></span>

<span data-ttu-id="3301c-142">Felhőben üzemeltetett képességeket kínál, amelyek azok van építve a felhő kapacitása által létrehozott biztonsági és a szerepkör megfontolások érintett.</span><span class="sxs-lookup"><span data-stu-id="3301c-142">Cloud-hosted capabilities are affected by the security and role considerations established by the cloud capacity offering on which they’re built.</span></span> <span data-ttu-id="3301c-143">Ezek a képességek eredeti formájukban, vagy egy felügyelt szolgáltatásként érhető el.</span><span class="sxs-lookup"><span data-stu-id="3301c-143">These capabilities are offered as is or as a managed service.</span></span> <span data-ttu-id="3301c-144">Az utóbbi, hozzáférés-korlátozott szerepkörök felügyelet céljából a környezetbe való hozzáférés engedélyezése szükséges.</span><span class="sxs-lookup"><span data-stu-id="3301c-144">For the latter, access-constrained roles are required to enable access into the environment for management purposes.</span></span>

## <a name="cloud-service-vendors"></a><span data-ttu-id="3301c-145">Cloud service szállítók</span><span class="sxs-lookup"><span data-stu-id="3301c-145">Cloud service vendors</span></span>
<span data-ttu-id="3301c-146">Való egyeztetés után több CSV-k, felismertük több megközelítés közül választhat az ügyfelek és a hozzá tartozó követelmény szolgáltatásokat telepíti.</span><span class="sxs-lookup"><span data-stu-id="3301c-146">After talking to many CSVs, we identified multiple approaches you can take to deploy services for your customers and associated requirements.</span></span>

### <a name="csv-hosted-offering"></a><span data-ttu-id="3301c-147">Fürt megosztott kötetei szolgáltatás által üzemeltetett ajánlat</span><span class="sxs-lookup"><span data-stu-id="3301c-147">CSV-hosted offering</span></span>
<span data-ttu-id="3301c-148">Az ajánlat működteti a saját Azure-előfizetéssel, ha két üzemeltetési szempontok megegyeznek: minden ügyfél esetében a különböző központi telepítési üzembe, vagy a méretezési egység, amelyek az összes ügyfél számára használja a megosztott infrastruktúra telepítése.</span><span class="sxs-lookup"><span data-stu-id="3301c-148">If you host your offering in your own Azure subscription, two hosting approaches are common: deploying a distinct deployment for every customer or deploying scale units that underpin a shared infrastructure used for all customers.</span></span>

* <span data-ttu-id="3301c-149">**Különböző központi telepítések minden ügyfél esetében.**</span><span class="sxs-lookup"><span data-stu-id="3301c-149">**Distinct deployments for each customer.**</span></span> <span data-ttu-id="3301c-150">Egy ügyfél különböző telepítés a különböző ismert konfigurációk rögzített topológiák igényel.</span><span class="sxs-lookup"><span data-stu-id="3301c-150">Distinct deployments per customer require fixed topologies of different known configurations.</span></span> <span data-ttu-id="3301c-151">Előfordulhat, hogy különböző virtuális gépek (VM) méretét, a változó számú csomópontok és a társított tárolási különböző mennyiségű történő központi telepítését.</span><span class="sxs-lookup"><span data-stu-id="3301c-151">These deployments may have different virtual machine (VM) sizes, varying numbers of nodes, and different amounts of associated storage.</span></span> <span data-ttu-id="3301c-152">A központi telepítések címkézés összesítő számlázási minden ügyfél szolgál.</span><span class="sxs-lookup"><span data-stu-id="3301c-152">Tagging of deployments is used for roll-up billing of each customer.</span></span> <span data-ttu-id="3301c-153">Lehetővé teszi az ügyfeleknek a felhőalapú környezetben aspektusainak elérésére RBAC lehet engedélyezni.</span><span class="sxs-lookup"><span data-stu-id="3301c-153">RBAC may be enabled to allow customers access to aspects of their cloud environment.</span></span>
* <span data-ttu-id="3301c-154">**Méretezési egységek megosztott több-bérlős környezetekben.**</span><span class="sxs-lookup"><span data-stu-id="3301c-154">**Scale units in shared multi-tenant environments.**</span></span> <span data-ttu-id="3301c-155">A sablon jelenthet a méretezési egység, több-bérlős környezetekben.</span><span class="sxs-lookup"><span data-stu-id="3301c-155">A template can represent a scale unit for multi-tenant environments.</span></span> <span data-ttu-id="3301c-156">Ugyanazon az infrastruktúrán ebben az esetben az összes ügyfél támogatására szolgál.</span><span class="sxs-lookup"><span data-stu-id="3301c-156">In this case, the same infrastructure is used to support all customers.</span></span> <span data-ttu-id="3301c-157">A központi telepítések határoz meg, hogy a kapacitás az üzemeltetett elérhető, például a felhasználók száma és a tranzakciók száma a szintű erőforrások csoportja.</span><span class="sxs-lookup"><span data-stu-id="3301c-157">The deployments represent a group of resources that deliver a level of capacity for the hosted offering, such as number of users and number of transactions.</span></span> <span data-ttu-id="3301c-158">A méretezési egységeket vannak növelhető vagy csökkenthető, igény szerint van szüksége.</span><span class="sxs-lookup"><span data-stu-id="3301c-158">These scale units are increased or decreased as demand requires.</span></span>

### <a name="csv-offering-injected-into-customer-subscription"></a><span data-ttu-id="3301c-159">Ügyfél-előfizetést be a nézetmodellbe, CSV ajánlat</span><span class="sxs-lookup"><span data-stu-id="3301c-159">CSV offering injected into customer subscription</span></span>
<span data-ttu-id="3301c-160">Érdemes lehet a szoftver telepítése ebben a végfelhasználók által birtokolt előfizetések.</span><span class="sxs-lookup"><span data-stu-id="3301c-160">You may want to deploy your software into subscriptions owned by end customers.</span></span> <span data-ttu-id="3301c-161">Sablonok segítségével az ügyfél Azure figyelembe különböző központi telepítéséhez.</span><span class="sxs-lookup"><span data-stu-id="3301c-161">You can use templates to deploy distinct deployments into a customer’s Azure account.</span></span>

<span data-ttu-id="3301c-162">A központi telepítéseket az RBAC használatát, így frissítése és a felhasználói fiókon belül a központi telepítés kezelése.</span><span class="sxs-lookup"><span data-stu-id="3301c-162">These deployments use RBAC so you can update and manage the deployment within the customer’s account.</span></span>

### <a name="azure-marketplace"></a><span data-ttu-id="3301c-163">Azure Piactér</span><span class="sxs-lookup"><span data-stu-id="3301c-163">Azure Marketplace</span></span>
<span data-ttu-id="3301c-164">A hirdetményt, és a piactéren, például az Azure piactéren keresztül ajánlatok létrehozásában értékesítés képes biztosítani a különböző típusú központi telepítések, az ügyfél Azure-fiók futtató sablonok fejleszthet.</span><span class="sxs-lookup"><span data-stu-id="3301c-164">To advertise and sell your offerings through a marketplace, such as Azure Marketplace, you can develop templates to deliver distinct types of deployments that run in a customer’s Azure account.</span></span> <span data-ttu-id="3301c-165">A különböző központi telepítéseket általában jelentheti egy Póló mérete (kis, közepes, nagy), a termék/célközönség típusa (közösségi, fejlesztők, vállalati) vagy a szolgáltatás típusa (alapszintű, a magas rendelkezésre állású).</span><span class="sxs-lookup"><span data-stu-id="3301c-165">These distinct deployments can be typically described as a t-shirt size (small, medium, large), product/audience type (community, developer, enterprise), or feature type (basic, high availability).</span></span>  <span data-ttu-id="3301c-166">Néhány esetben ezek a típusok engedélyezi, hogy bizonyos attribútumai a központi telepítést végez, például Virtuálisgép-típussá vagy lemezek számát adja meg.</span><span class="sxs-lookup"><span data-stu-id="3301c-166">In some cases, these types allow you to specify certain attributes of the deployment, such as VM type or number of disks.</span></span>

## <a name="oss-projects"></a><span data-ttu-id="3301c-167">OSS-projektek</span><span class="sxs-lookup"><span data-stu-id="3301c-167">OSS projects</span></span>
<span data-ttu-id="3301c-168">Belül nyílt forráskódú projekteket, a Resource Manager-sablonok segítségével bevált gyakorlatok a megoldás üzembe helyezéséhez egy közösségi engedélyezése.</span><span class="sxs-lookup"><span data-stu-id="3301c-168">Within open source projects, Resource Manager templates enable a community to deploy a solution quickly using proven practices.</span></span> <span data-ttu-id="3301c-169">Sablonok tárolhatja a GitHub-tárházban, így a közösségi felülvizsgálhatja őket az adott idő alatt.</span><span class="sxs-lookup"><span data-stu-id="3301c-169">You can store templates in a GitHub repository so the community can revise them over time.</span></span> <span data-ttu-id="3301c-170">Felhasználók a saját Azure-előfizetések sablonok telepítése.</span><span class="sxs-lookup"><span data-stu-id="3301c-170">Users deploy these templates in their own Azure subscriptions.</span></span>

<span data-ttu-id="3301c-171">Az alábbi szakaszok ismertetik a dolgot figyelembe kell vennie a megoldás tervezése előtt.</span><span class="sxs-lookup"><span data-stu-id="3301c-171">The following sections identify the things you need to consider before designing your solution.</span></span>

## <a name="identifying-what-is-outside-and-inside-a-vm"></a><span data-ttu-id="3301c-172">Kívül és belül a virtuális gépek azonosítása</span><span class="sxs-lookup"><span data-stu-id="3301c-172">Identifying what is outside and inside a VM</span></span>
<span data-ttu-id="3301c-173">A sablon tervezéséhez, akkor célszerű nézze meg a követelmények tekintetében kívül és belül a virtuális gépek (VM):</span><span class="sxs-lookup"><span data-stu-id="3301c-173">As you design your template, it’s helpful to look at the requirements in terms of what's outside and inside the virtual machines (VMs):</span></span>

* <span data-ttu-id="3301c-174">Külső azt jelenti, hogy a virtuális gépek és a környezet más erőforrások, mint például a hálózati topológia, címkézéssel, a tanúsítványok vagy kulcsok és a szerepköralapú hozzáférés-vezérlés hivatkozik.</span><span class="sxs-lookup"><span data-stu-id="3301c-174">Outside means the VMs and other resources of your deployment, such as the network topology, tagging, references to the certs/secrets, and role-based access control.</span></span> <span data-ttu-id="3301c-175">Ezeket az erőforrásokat a sablon a részét képezik.</span><span class="sxs-lookup"><span data-stu-id="3301c-175">All these resources are part of your template.</span></span>
* <span data-ttu-id="3301c-176">Belső azt jelenti, hogy a telepített szoftverek és a teljes kívánt állapot konfigurációs.</span><span class="sxs-lookup"><span data-stu-id="3301c-176">Inside means the installed software and overall desired state configuration.</span></span> <span data-ttu-id="3301c-177">Más módszerek, például Virtuálisgép-bővítmények vagy parancsfájlok, részben vagy egészben szolgálnak.</span><span class="sxs-lookup"><span data-stu-id="3301c-177">Other mechanisms, such as VM extensions or scripts, are used in whole or in part.</span></span> <span data-ttu-id="3301c-178">Ezek a mechanizmusok azonosítását és a sablon hajtja végre, de nem található.</span><span class="sxs-lookup"><span data-stu-id="3301c-178">These mechanisms may be identified and executed by the template but aren’t in it.</span></span>

<span data-ttu-id="3301c-179">Tevékenységek kellene tennie "belül a kezdő" közös például-</span><span class="sxs-lookup"><span data-stu-id="3301c-179">Common examples of activities you would do “inside the box” include -</span></span>  

* <span data-ttu-id="3301c-180">Telepítése vagy eltávolítása a kiszolgálói szerepkörök és szolgáltatások</span><span class="sxs-lookup"><span data-stu-id="3301c-180">Install or remove server roles and features</span></span>
* <span data-ttu-id="3301c-181">Telepítse és konfigurálja a szoftver a csomópont vagy a fürt szintjén</span><span class="sxs-lookup"><span data-stu-id="3301c-181">Install and configure software at the node or cluster level</span></span>
* <span data-ttu-id="3301c-182">Egy webkiszolgálón webhelyek központi telepítése</span><span class="sxs-lookup"><span data-stu-id="3301c-182">Deploy websites on a web server</span></span>
* <span data-ttu-id="3301c-183">Adatbázis-sémák telepítése</span><span class="sxs-lookup"><span data-stu-id="3301c-183">Deploy database schemas</span></span>
* <span data-ttu-id="3301c-184">Beállításjegyzék vagy egyéb típusú konfigurációs beállítások kezelése</span><span class="sxs-lookup"><span data-stu-id="3301c-184">Manage registry or other types of configuration settings</span></span>
* <span data-ttu-id="3301c-185">Fájlok és könyvtárak kezelése</span><span class="sxs-lookup"><span data-stu-id="3301c-185">Manage files and directories</span></span>
* <span data-ttu-id="3301c-186">Indítás, Leállítás, és a folyamatok és szolgáltatások kezelése</span><span class="sxs-lookup"><span data-stu-id="3301c-186">Start, stop, and manage processes and services</span></span>
* <span data-ttu-id="3301c-187">Helyi csoportok és felhasználói fiókok kezelése</span><span class="sxs-lookup"><span data-stu-id="3301c-187">Manage local groups and user accounts</span></span>
* <span data-ttu-id="3301c-188">Telepítheti és kezelheti a csomagokat (.msi, .exe, yum, stb.)</span><span class="sxs-lookup"><span data-stu-id="3301c-188">Install and manage packages (.msi, .exe, yum, etc.)</span></span>
* <span data-ttu-id="3301c-189">Környezeti változók kezelése</span><span class="sxs-lookup"><span data-stu-id="3301c-189">Manage environment variables</span></span>
* <span data-ttu-id="3301c-190">Natív parancsfájlt (a Windows PowerShell, bash, stb.)</span><span class="sxs-lookup"><span data-stu-id="3301c-190">Run native scripts (Windows PowerShell, bash, etc.)</span></span>

### <a name="desired-state-configuration-dsc"></a><span data-ttu-id="3301c-191">Kívánt állapot konfigurációs (szolgáltatása DSC)</span><span class="sxs-lookup"><span data-stu-id="3301c-191">Desired state configuration (DSC)</span></span>
<span data-ttu-id="3301c-192">Szeretné végezni a központi telepítés meghaladja a virtuális gépek belső állapotával kapcsolatos, győződjön meg arról, hogy a központi telepítés nem "sodródni" a konfigurációról, hogy definiálva, és be van jelölve a verziókövetési rendszerrel.</span><span class="sxs-lookup"><span data-stu-id="3301c-192">Thinking about the internal state of your VMs beyond deployment, you want to make sure this deployment doesn’t "drift" from the configuration that you have defined and checked into source control.</span></span> <span data-ttu-id="3301c-193">Ez a megközelítés biztosítja a fejlesztők számára, vagy műveleti személyzet nem módosításokat alkalmi, amelyek nem vetted, tesztelni, vagy a verziókövetési rendszerrel rögzített környezetbe.</span><span class="sxs-lookup"><span data-stu-id="3301c-193">This approach ensures your developers or operations staff don’t make ad-hoc changes to an environment that are not vetted, tested, or recorded in source control.</span></span> <span data-ttu-id="3301c-194">A vezérlő fontos, mert a manuális módosítások nem szerepelnek a verziókövetési rendszerrel.</span><span class="sxs-lookup"><span data-stu-id="3301c-194">This control is important, because the manual changes are not in source control.</span></span> <span data-ttu-id="3301c-195">Akkor is nem részei a normál telepítése, és hatással lesz a jövőbeni automatizált regisztrációt, a szoftver.</span><span class="sxs-lookup"><span data-stu-id="3301c-195">They are also not part of the standard deployment and will impact future automated deployments of the software.</span></span>

<span data-ttu-id="3301c-196">A belső munkatársra túl kívánt állapot konfigurációs az is fontos biztonsági szempontból.</span><span class="sxs-lookup"><span data-stu-id="3301c-196">Beyond your internal employees, desired state configuration is also important from a security perspective.</span></span> <span data-ttu-id="3301c-197">A támadók rendszeresen próbál kedvezőtlenül és szoftver rendszerek kihasználására.</span><span class="sxs-lookup"><span data-stu-id="3301c-197">Hackers are regularly trying to compromise and exploit software systems.</span></span> <span data-ttu-id="3301c-198">Ha sikeres, általában fájlok telepítése és ellenkező esetben a sérült biztonságú rendszer állapotának módosítása.</span><span class="sxs-lookup"><span data-stu-id="3301c-198">When successful, it's common to install files and otherwise change the state of a compromised system.</span></span> <span data-ttu-id="3301c-199">Kívánt állapot konfigurációs, segítségével azonosíthatja a kívánt és a tényleges állapot közötti eltérések és egy ismert beállításainak visszaállítása.</span><span class="sxs-lookup"><span data-stu-id="3301c-199">Using desired state configuration, you can identify deltas between the desired and actual state and restore a known configuration.</span></span>

<span data-ttu-id="3301c-200">Nincsenek a legnépszerűbb mechanizmusok DSC - a PowerShell DSC, Chef vagy Puppet erőforrás-bővítményt.</span><span class="sxs-lookup"><span data-stu-id="3301c-200">There are resource extensions for the most popular mechanisms for DSC - PowerShell DSC, Chef, and Puppet.</span></span> <span data-ttu-id="3301c-201">Ezek a bővítmények telepítheti a virtuális gép kezdeti állapotában és is győződjön meg arról, hogy a kívánt állapot megmarad.</span><span class="sxs-lookup"><span data-stu-id="3301c-201">Each of these extensions can deploy the initial state of your VM and also be used to make sure the desired state is maintained.</span></span>

## <a name="common-template-scopes"></a><span data-ttu-id="3301c-202">Közös sablon hatókörök</span><span class="sxs-lookup"><span data-stu-id="3301c-202">Common template scopes</span></span>
<span data-ttu-id="3301c-203">Az a tapasztalat világossá három fő megoldás sablonok hatókörök is láttuk.</span><span class="sxs-lookup"><span data-stu-id="3301c-203">In our experience, we’ve seen three key solution templates scopes emerge.</span></span> <span data-ttu-id="3301c-204">– A kapacitás, a funkció és a végpont megoldás – ezek három hatókör a következő szakaszok ismertetik.</span><span class="sxs-lookup"><span data-stu-id="3301c-204">These three scopes – capacity, capability, and end-to-end solution – are described in the following sections.</span></span>

### <a name="capacity-scope"></a><span data-ttu-id="3301c-205">A kapacitás hatókör</span><span class="sxs-lookup"><span data-stu-id="3301c-205">Capacity scope</span></span>
<span data-ttu-id="3301c-206">A kapacitás hatókör nyújt több erőforrást, amely előre konfigurált meg megfelelően szabályozások és házirendek szabványos topológiában.</span><span class="sxs-lookup"><span data-stu-id="3301c-206">A capacity scope delivers a set of resources in a standard topology that is pre-configured to be in compliance with regulations and policies.</span></span> <span data-ttu-id="3301c-207">A leggyakoribb például egy vállalati informatikai vagy SI forgatókönyvben szabványos fejlesztői környezetben telepít.</span><span class="sxs-lookup"><span data-stu-id="3301c-207">The most common example is deploying a standard development environment in an Enterprise IT or SI scenario.</span></span>

### <a name="capability-scope"></a><span data-ttu-id="3301c-208">Képesség hatókör</span><span class="sxs-lookup"><span data-stu-id="3301c-208">Capability scope</span></span>
<span data-ttu-id="3301c-209">A funkció hatókör központi telepítését és konfigurálását a topológia egy adott technológia összpontosít.</span><span class="sxs-lookup"><span data-stu-id="3301c-209">A capability scope is focused on deploying and configuring a topology for a given technology.</span></span> <span data-ttu-id="3301c-210">Gyakori forgatókönyvek, például az SQL Server, Cassandra, Hadoop technológiák többek között.</span><span class="sxs-lookup"><span data-stu-id="3301c-210">Common scenarios including technologies such as SQL Server, Cassandra, Hadoop.</span></span>

### <a name="end-to-end-solution-scope"></a><span data-ttu-id="3301c-211">Végpontok közötti megoldás hatókör</span><span class="sxs-lookup"><span data-stu-id="3301c-211">End-to-end solution scope</span></span>
<span data-ttu-id="3301c-212">A végpont megoldás hatókörök megcélzott túl egyetlen funkció, és helyette arra irányul, hogy egy több képességek álló teljes körű megoldást hoz létre.</span><span class="sxs-lookup"><span data-stu-id="3301c-212">An End-to-End Solution Scope is targeted beyond a single capability, and instead focused on delivering an end to end solution comprised of multiple capabilities.</span></span>  

<span data-ttu-id="3301c-213">A megoldás hatókörű sablon hatóköréhez ügyfélrendszer egy vagy több képesség hatókörbe tartozó sablonokat Megoldásfüggő erőforrásokat, a logikai és a kívánt állapot készletként.</span><span class="sxs-lookup"><span data-stu-id="3301c-213">A solution-scoped template scope manifests itself as a set of one or more capability-scoped templates with solution-specific resources, logic, and desired state.</span></span> <span data-ttu-id="3301c-214">A megoldás hatókörű sablon példa: adatok végpontok közötti adatcsatorna megoldás sablonná.</span><span class="sxs-lookup"><span data-stu-id="3301c-214">An example of a solution-scoped template is an end to end data pipeline solution template.</span></span> <span data-ttu-id="3301c-215">A sablon előfordulhat, hogy keverje Megoldásfüggő topológia és állapotának például Kafka, a Storm és a Hadoop több megoldás funkció hatókörbe tartozó sablonokat.</span><span class="sxs-lookup"><span data-stu-id="3301c-215">The template might mix solution-specific topology and state with multiple capability-scoped solution templates such as Kafka, Storm, and Hadoop.</span></span>

## <a name="choosing-free-form-vs-known-configurations"></a><span data-ttu-id="3301c-216">Szabad formátumú és ismert konfigurációk kiválasztása</span><span class="sxs-lookup"><span data-stu-id="3301c-216">Choosing free-form vs. known configurations</span></span>
<span data-ttu-id="3301c-217">Először érdemes a sablont kell rugalmasan fogyasztók a lehető legnagyobb mértékben, de sok szempontok hatással a választott szabadkézi konfigurációk és beállításainak használ-e.</span><span class="sxs-lookup"><span data-stu-id="3301c-217">You might initially think a template should give consumers the utmost flexibility, but many considerations affect the choice of whether to use free-form configurations vs. known configurations.</span></span> <span data-ttu-id="3301c-218">Ez a szakasz azonosítja a kulcs felhasználói követelmények és az ebben a dokumentumban megosztott módszerrel alakú technikai szempontokat.</span><span class="sxs-lookup"><span data-stu-id="3301c-218">This section identifies the key customer requirements and technical considerations that shaped the approach shared in this document.</span></span>

### <a name="free-form-configurations"></a><span data-ttu-id="3301c-219">Szabad formátumú konfigurációk</span><span class="sxs-lookup"><span data-stu-id="3301c-219">Free-form configurations</span></span>
<span data-ttu-id="3301c-220">A felületen szabad formátumú konfigurációk hangkártya ideális.</span><span class="sxs-lookup"><span data-stu-id="3301c-220">On the surface, free-form configurations sound ideal.</span></span> <span data-ttu-id="3301c-221">Engedélyezi, hogy válassza ki a virtuális gép típusát, és adjon meg egy tetszőleges számú csomópontot, és a csatlakoztatott lemezekkel azokat a csomópontokat, a – és ehhez a sablonhoz paraméterekként.</span><span class="sxs-lookup"><span data-stu-id="3301c-221">They allow you to select a VM type and provide an arbitrary number of nodes and attached disks for those nodes — and do so as parameters to a template.</span></span> <span data-ttu-id="3301c-222">Ezt a módszert azonban bizonyos forgatókönyvek nem ideális el.</span><span class="sxs-lookup"><span data-stu-id="3301c-222">However, this approach is not ideal for some scenarios.</span></span>

<span data-ttu-id="3301c-223">A [virtuális gépek méretei](../virtual-machines/windows/sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json), a másik Virtuálisgép-típusokon és az elérhető méretek azonosítja, és a tartós számának minden egyes lemezek (2, 4, 8, 16 vagy 32), amely csatolható.</span><span class="sxs-lookup"><span data-stu-id="3301c-223">In [Sizes for virtual machines](../virtual-machines/windows/sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json), the different VM types and available sizes are identified, and each of the number of durable disks (2, 4, 8, 16, or 32) that can be attached.</span></span> <span data-ttu-id="3301c-224">Minden csatlakoztatott lemezre 500 IOPS biztosít, és ezeknek a lemezeknek többszörösei lehet közösen egy szorzóval IOPS adott számú lehet.</span><span class="sxs-lookup"><span data-stu-id="3301c-224">Each attached disk provides 500 IOPS and multiples of these disks can be pooled for a multiplier of that number of IOPS.</span></span> <span data-ttu-id="3301c-225">Például 16 lemezeket is vonható készletbe 8000 iops értéket biztosítanak.</span><span class="sxs-lookup"><span data-stu-id="3301c-225">For example, 16 disks can be pooled to provide 8,000 IOPS.</span></span> <span data-ttu-id="3301c-226">Az operációs rendszerben, a Microsoft Windows tárolóhelyek vagy a redundáns tömbjének (RAID) olcsó lemezek Linux konfigurációval készletezését történik.</span><span class="sxs-lookup"><span data-stu-id="3301c-226">Pooling is done with configuration in the operating system, using Microsoft Windows Storage Spaces or redundant array of inexpensive disks (RAID) in Linux.</span></span>

<span data-ttu-id="3301c-227">Egy szabad formátumú konfiguráció lehetővé teszi a kijelölt Virtuálisgép-példányok több, különböző virtuális gép meg kell adnia, és azokat a példányokat, a Virtuálisgép-típussá különböző lemezeket és konfigurálása a virtuális gép tartalmát egy vagy több parancsfájlok méretének.</span><span class="sxs-lookup"><span data-stu-id="3301c-227">A free-form configuration enables the selection several VM instances, various VM types and sizes for those instances, various disks for the VM type, and one or more scripts to configure the VM contents.</span></span>

<span data-ttu-id="3301c-228">Esetében gyakori, hogy a központi telepítés lehetnek többféle típusú csomópontok, például a fő és adatcsomópontokat, úgy erre a rugalmasságra gyakran esetén minden csomópont-típus van megadva.</span><span class="sxs-lookup"><span data-stu-id="3301c-228">It is common that a deployment may have multiple types of nodes, such as master and data nodes, so this flexibility is often provided for every node type.</span></span>

<span data-ttu-id="3301c-229">Bármely jelentőséggel fürtök üzembe helyezésekor megkezdésekor, megkezdheti a ezek összetett forgatókönyvek esetében használható.</span><span class="sxs-lookup"><span data-stu-id="3301c-229">As you start to deploy clusters of any significance, you begin to work with these complex scenarios.</span></span> <span data-ttu-id="3301c-230">Ha egy Hadoop-fürt volt telepítése, például 8 főcsomópont és 200 adatcsomópontokat és készletezett 4 csatolt minden egyes főcsomópont és készletezett 16 csatlakoztatott lemezek adatok csomópontonként kellene lennie 208 virtuális gépek és 3,232 lemezek kezelése.</span><span class="sxs-lookup"><span data-stu-id="3301c-230">If you were deploying a Hadoop cluster, for example, with 8 master nodes and 200 data nodes, and pooled 4 attached disks on each master node and pooled 16 attached disks per data node, you would have 208 VMs and 3,232 disks to manage.</span></span>

<span data-ttu-id="3301c-231">A tárfiók kérelmek fenti az azonosított 20 000 tranzakciók másodpercenkénti száma korlátozza, így kell nézze meg tárolási fiók particionálás, valamint számítások segítségével határozhatja meg, ez a topológia olyan tárfiókok megfelelő számú lesz szabályozás.</span><span class="sxs-lookup"><span data-stu-id="3301c-231">A storage account will throttle requests above its identified 20,000 transactions/second limit, so you should look at storage account partitioning and use calculations to determine the appropriate number of storage accounts to accommodate this topology.</span></span> <span data-ttu-id="3301c-232">A szabad formátumú megközelítés által támogatott kombinációk számos megadott, dinamikus számítások annak meghatározásához, hogy a megfelelő particionálás szükségesek.</span><span class="sxs-lookup"><span data-stu-id="3301c-232">Given the multitude of combinations supported by the free-form approach, dynamic calculations are required to determine the appropriate partitioning.</span></span> <span data-ttu-id="3301c-233">Az Azure Resource Manager sablon nyelvi jelenleg matematikai funkcióval rendelkezik, ezért el kell végeznie ezeket a számításokat a kódban, a megfelelő adatokkal olyan egyedi, kódolt sablon létrehozása.</span><span class="sxs-lookup"><span data-stu-id="3301c-233">The Azure Resource Manager Template Language does not presently provide mathematical functions, so you must perform these calculations in code, generating a unique, hard-coded template with the appropriate details.</span></span>

<span data-ttu-id="3301c-234">A vállalati informatikai és SI forgatókönyvek esetében valaki kell a sablonok karbantartása, és a telepített topológiákat támogatja a egy vagy több szervezet számára.</span><span class="sxs-lookup"><span data-stu-id="3301c-234">In enterprise IT and SI scenarios, someone must maintain the templates and support the deployed topologies for one or more organizations.</span></span> <span data-ttu-id="3301c-235">Ez a további terhelés – különböző konfigurációt, és minden ügyfél esetében sablonok – nem kívánatos.</span><span class="sxs-lookup"><span data-stu-id="3301c-235">This additional overhead — different configurations and templates for each customer — is far from desirable.</span></span>

<span data-ttu-id="3301c-236">Ezek a sablonok segítségével központi telepítése az Azure-előfizetés az ügyfél környezete, de a vállalati informatikai csapata hozza létre és CSV-k általában telepíteni őket a saját előfizetések vásárlóiknak számlázási jóváírási függvénnyel.</span><span class="sxs-lookup"><span data-stu-id="3301c-236">You can use these templates to deploy environments in your customer’s Azure subscription, but both corporate IT teams and CSVs typically deploy them into their own subscriptions, using a chargeback function to bill their customers.</span></span> <span data-ttu-id="3301c-237">Ezekben az esetekben a célja, hogy több ügyfélhez kapacitás telepítése egyes előfizetések között, és láthatóan tartja sűrűn feltöltve az előfizetések előfizetés sprawl minimalizálása érdekében a központi telepítések – Ez azt jelenti, hogy legalább egy előfizetésre kezeléséhez.</span><span class="sxs-lookup"><span data-stu-id="3301c-237">In these scenarios, the goal is to deploy capacity for multiple customers across a pool of subscriptions and keep deployments densely populated into the subscriptions to minimize subscription sprawl—that is, more subscriptions to manage.</span></span> <span data-ttu-id="3301c-238">Valóban dinamikus telepítési méret az ilyen típusú sűrűség elérése igényel a gondos tervezéssel és a további fejlesztési állványok munka a szervezet nevében.</span><span class="sxs-lookup"><span data-stu-id="3301c-238">With truly dynamic deployment sizes, achieving this type of density requires careful planning and additional development for scaffolding work on behalf of the organization.</span></span>

<span data-ttu-id="3301c-239">Emellett egy API-híváson keresztül előfizetések nem hozható létre, de ezt manuálisan kell tennie a portálon keresztül.</span><span class="sxs-lookup"><span data-stu-id="3301c-239">In addition, you can’t create subscriptions via an API call but must do so manually through the portal.</span></span> <span data-ttu-id="3301c-240">Előfizetések száma növekszik, a létrejövő előfizetés sprawl emberi beavatkozást igényelnek – nem lehet automatizálni.</span><span class="sxs-lookup"><span data-stu-id="3301c-240">As the number of subscriptions increases, any resulting subscription sprawl requires human intervention—it can’t be automated.</span></span> <span data-ttu-id="3301c-241">A központi telepítések mérete túl nagy szórása azonos akkor kell előre ellátnia az előfizetések manuálisan ellenőrizze, hogy az előfizetések elérhető számos.</span><span class="sxs-lookup"><span data-stu-id="3301c-241">With so much variability in the sizes of deployments, you would have to pre-provision a number of subscriptions manually to ensure subscriptions are available.</span></span>

<span data-ttu-id="3301c-242">E tényezők, figyelembe véve a valóban szabad formátumú konfigurációs kevesebb mint, először blush tetszetős.</span><span class="sxs-lookup"><span data-stu-id="3301c-242">Considering all these factors, a truly free-form configuration is less appealing than at first blush.</span></span>

### <a name="known-configurations--the-t-shirt-sizing-approach"></a><span data-ttu-id="3301c-243">Ismert konfigurációk – a pólóra méretezési módszer</span><span class="sxs-lookup"><span data-stu-id="3301c-243">Known configurations — the t-shirt sizing approach</span></span>
<span data-ttu-id="3301c-244">Ahelyett, hogy kínálnak a sablont, amely teljes rugalmasságot és számos változata biztosít, mint a felhasználói élmény a megszokott mintát követi, hogy lehetővé teszik a ismert konfigurációk kiválasztása – érvényben, szabványos pólóra például védőfal kis, közepes és nagy méretű.</span><span class="sxs-lookup"><span data-stu-id="3301c-244">Rather than offer a template that provides total flexibility and countless variations, in our experience a common pattern is to provide the ability to select known configurations — in effect, standard t-shirt sizes such as sandbox, small, medium, and large.</span></span> <span data-ttu-id="3301c-245">Más pólóra méretű például a termék ajánlatokat, community edition vagy enterprise edition.</span><span class="sxs-lookup"><span data-stu-id="3301c-245">Other examples of t-shirt sizes are product offerings, such as community edition or enterprise edition.</span></span>  <span data-ttu-id="3301c-246">Más esetekben lehet munkaterhelés-specifikus konfigurációk egy technológia – például a térkép csökkentése vagy a nem sql.</span><span class="sxs-lookup"><span data-stu-id="3301c-246">In other cases, it may be workload-specific configurations of a technology – such as map reduce or no sql.</span></span>

<span data-ttu-id="3301c-247">Sok vállalati informatikai szervezetek, OSS szállítók és SIs elérhetővé tegye az ajánlatok ma ily módon a helyszíni virtualizált környezetekben (vállalatok) vagy szoftver-,--szolgáltatás (SaaS) offerings (CSV-k és OSVs).</span><span class="sxs-lookup"><span data-stu-id="3301c-247">Many enterprise IT organizations, OSS vendors, and SIs make their offerings available today in this way in on-premises, virtualized environments (enterprises) or as software-as-a-service (SaaS) offerings (CSVs and OSVs).</span></span>

<span data-ttu-id="3301c-248">Ezt a módszert biztosít az ügyfelek különböző méretű előre konfigurált megfelelő, ismert konfigurációk.</span><span class="sxs-lookup"><span data-stu-id="3301c-248">This approach provides good, known configurations of varying sizes that are preconfigured for customers.</span></span> <span data-ttu-id="3301c-249">Ismert konfigurációk nélkül végfelhasználók kell saját méretezése fürtön határozza meg, figyelembe a platform erőforrás-korlátozások és számításokat végezni az eredményül kapott particionálás storage-fiókok és egyéb erőforrások (mert a fürt méretét és erőforrás korlátozások) azonosításához.</span><span class="sxs-lookup"><span data-stu-id="3301c-249">Without known configurations, end customers must determine cluster sizing on their own, factor in platform resource constraints, and do math to identify the resulting partitioning of storage accounts and other resources (due to cluster size and resource constraints).</span></span> <span data-ttu-id="3301c-250">Ismert konfigurációk engedélyezi az ügyfeleknek a egyszerűen válassza ki a megfelelő pólóra méretet – Ez azt jelenti, hogy egy adott központi telepítés.</span><span class="sxs-lookup"><span data-stu-id="3301c-250">Known configurations enable customers to easily select the right t-shirt size—that is, a given deployment.</span></span> <span data-ttu-id="3301c-251">Azonkívül, hogy hatékonyabb működését az ügyfél, néhány ismert konfigurációk, ezért könnyebben támogatja, és segít a következők támogatásával sűrűség magasabb szintű.</span><span class="sxs-lookup"><span data-stu-id="3301c-251">In addition to making a better experience for the customer, a small number of known configurations is easier to support and can help you deliver a higher level of density.</span></span>

<span data-ttu-id="3301c-252">Egy ismert konfigurációs módszer pólóra méretek összpontosított is eltérő számú méretet egy csomópontja.</span><span class="sxs-lookup"><span data-stu-id="3301c-252">A known configuration approach focused on t-shirt sizes may also have varying number of nodes within a size.</span></span> <span data-ttu-id="3301c-253">Például egy kis pólóra mérete 3 – 10 csomópontok között lehet.</span><span class="sxs-lookup"><span data-stu-id="3301c-253">For example, a small t-shirt size may be between 3 and 10 nodes.</span></span>  <span data-ttu-id="3301c-254">A Póló mérete volna kell megtervezni, hogy legfeljebb 10 csomópontok alkalmazásához, és adja meg a fogyasztó, hogy a meghatározott maximális mérete legfeljebb szabad formátumú beállításokat.</span><span class="sxs-lookup"><span data-stu-id="3301c-254">The t-shirt size would be designed to accommodate up to 10 nodes and provide the consumer the ability to make free form selections up to the maximum size identified.</span></span>  

<span data-ttu-id="3301c-255">Egy pólóra munkaterhelés típusától függően lehet, hogy további szabad formátumú jellegű telepíthetők, de lesz, hogy a munkaterhelés különböző csomópont méretét és a szoftver konfigurációs van a csomópont a csomópontok száma tekintetében.</span><span class="sxs-lookup"><span data-stu-id="3301c-255">A t-shirt size based on workload type, may be more free form in nature in terms of the number of nodes that can be deployed but will have workload distinct node size and configuration of the software on the node.</span></span>

<span data-ttu-id="3301c-256">Pólóra méretet termékajánlatokat, például a közösségi vagy Enterprise, előfordulhat, hogy is telepíthető, csomópontok maximális száma és a különböző erőforrás esetében általában kötve kapcsolatos vagy a szolgáltatás rendelkezésre állásával között a különböző ajánlatokat.</span><span class="sxs-lookup"><span data-stu-id="3301c-256">T-shirt sizes based on product offerings, such as community or Enterprise, may have distinct resource types and maximum number of nodes that can be deployed, typically tied to licensing considerations or feature availability across the different offerings.</span></span>

<span data-ttu-id="3301c-257">Az egyedi változatok a JSON-alapú sablonok használatával is lehetővé teszi az ügyfelek.</span><span class="sxs-lookup"><span data-stu-id="3301c-257">You can also accommodate customers with unique variants using the JSON-based templates.</span></span> <span data-ttu-id="3301c-258">A kiugró meghatározásakor a megfelelő tervezési és fejlesztői támogatási és költségszámítás szempontjai is használhatja.</span><span class="sxs-lookup"><span data-stu-id="3301c-258">When dealing with outliers, you can incorporate the appropriate planning and considerations for development, support, and costing.</span></span>

<span data-ttu-id="3301c-259">A sablon fogyasztás forgatókönyvet, és ez a dokumentum elején meghatározott követelmények alapján felismertük sablon felbontás ellen egy mintát.</span><span class="sxs-lookup"><span data-stu-id="3301c-259">Based on the customer template consumption scenarios, and requirements identified at the start of this document, we identified a pattern for template decomposition.</span></span>

## <a name="capacity-and-capability-scoped-solution-templates"></a><span data-ttu-id="3301c-260">Kapacitás és a megoldás funkció hatókörű sablonok</span><span class="sxs-lookup"><span data-stu-id="3301c-260">Capacity and capability-scoped solution templates</span></span>
<span data-ttu-id="3301c-261">Felbontás ellen, hogy támogatja szeretné újrafelhasználni, kiterjeszthetőség, tesztelése és tooling eszköz sablonok fejlesztését moduláris megközelítését ismerteti.</span><span class="sxs-lookup"><span data-stu-id="3301c-261">Decomposition provides a modular approach to template development that supports reuse, extensibility, testing, and tooling.</span></span> <span data-ttu-id="3301c-262">Ez a szakasz részletes ez hogyan alkalmazhatók a felbontás ellen megközelítés kapacitás és -készítés hatókörű sablonok.</span><span class="sxs-lookup"><span data-stu-id="3301c-262">This section provides detail on how a decomposition approach can be applied to templates with a Capacity or Capability scope.</span></span>

<span data-ttu-id="3301c-263">Ez a megközelítés egy fő sablont paraméterértékek kap egy sablon végfelhasználói, majd hivatkozik, és számos különböző típusú sablonok és a parancsfájlok után alább látható módon.</span><span class="sxs-lookup"><span data-stu-id="3301c-263">In this approach, a main template receives parameter values from a template consumer, then links to several types of templates and scripts downstream as shown below.</span></span> <span data-ttu-id="3301c-264">Adjon meg értékeket a kapcsolt sablonok mindkét paraméterek, a statikus változókat és a létrehozott változókat szolgálnak.</span><span class="sxs-lookup"><span data-stu-id="3301c-264">Parameters, static variables, and generated variables are used to provide values in and out of the linked templates.</span></span>

![Sablonparaméterek](./media/best-practices-resource-manager-design-templates/template-parameters.png)

<span data-ttu-id="3301c-266">**Egy fő sablont, majd a kapcsolt sablonok átadott paraméterek**</span><span class="sxs-lookup"><span data-stu-id="3301c-266">**Parameters are passed to a main template then to linked templates**</span></span>

<span data-ttu-id="3301c-267">Az alábbi szakaszok a sablonok és a parancsfájlok, amelyek ugyanazt a sablont a van a kiválasztott típusú összpontosítanak.</span><span class="sxs-lookup"><span data-stu-id="3301c-267">The following sections focus on the types of templates and scripts that a single template is decomposed into.</span></span> <span data-ttu-id="3301c-268">A szakaszok az állapotadatokat a sablonok között továbbításához megközelítések jelenthet.</span><span class="sxs-lookup"><span data-stu-id="3301c-268">The sections present approaches for passing state information among the templates.</span></span> <span data-ttu-id="3301c-269">Minden sablon és a parancsfájl típusát, a kép leírt példák együtt.</span><span class="sxs-lookup"><span data-stu-id="3301c-269">Each template and the script types in the image are described along with examples.</span></span> <span data-ttu-id="3301c-270">Tekintse meg a környezetfüggő például "üzembe azt: a minta megvalósítása" a jelen dokumentum későbbi.</span><span class="sxs-lookup"><span data-stu-id="3301c-270">For a contextual example, see "Putting it together: a sample implementation" later in this document.</span></span>

### <a name="template-metadata"></a><span data-ttu-id="3301c-271">Sablon metaadatait</span><span class="sxs-lookup"><span data-stu-id="3301c-271">Template metadata</span></span>
<span data-ttu-id="3301c-272">Sablon metaadatait (metadata.json fájl) kulcs/érték párok, amelyek ismertetik a JSON-ban, amely az emberek és szoftver-rendszerek által olvasható sablont tartalmaz.</span><span class="sxs-lookup"><span data-stu-id="3301c-272">Template metadata (the metadata.json file) contains key/value pairs that describe a template in JSON, which can be read by humans and software systems.</span></span>

![Sablon metaadatait](./media/best-practices-resource-manager-design-templates/template-metadata.png)

<span data-ttu-id="3301c-274">**Sablon metaadatait a metadata.json fájl leírása**</span><span class="sxs-lookup"><span data-stu-id="3301c-274">**Template metadata is described in the metadata.json file**</span></span>

<span data-ttu-id="3301c-275">Szoftver ügynökök kérje le a metadata.json fájlt, és az adatokat és a hivatkozás közzététele a sablon egy weblap vagy könyvtár.</span><span class="sxs-lookup"><span data-stu-id="3301c-275">Software agents can retrieve the metadata.json file and publish the information and a link to the template in a web page or directory.</span></span> <span data-ttu-id="3301c-276">Elemek például *itemDisplayName*, *leírás*, *összefoglaló*, *githubUsername*, és *dateUpdated*.</span><span class="sxs-lookup"><span data-stu-id="3301c-276">Elements include *itemDisplayName*, *description*, *summary*, *githubUsername*, and *dateUpdated*.</span></span>

<span data-ttu-id="3301c-277">Egy példa fájl egészében alább láthatók.</span><span class="sxs-lookup"><span data-stu-id="3301c-277">An example file is shown below in its entirety.</span></span>

    {
        "itemDisplayName": "PostgreSQL 9.3 on Ubuntu VMs",
        "description": "This template creates a PostgreSQL streaming-replication between a master and one or more slave servers each with 2 striped data disks. The database servers are deployed into a private-only subnet with one publicly accessible jumpbox VM in a DMZ subnet with public IP.",
        "summary": "PostgreSQL stream-replication with multiple slave servers and a publicly accessible jumpbox VM",
        "githubUsername": "arsenvlad",
        "dateUpdated": "2015-04-24"
    }

### <a name="main-template"></a><span data-ttu-id="3301c-278">Fő sablon</span><span class="sxs-lookup"><span data-stu-id="3301c-278">Main template</span></span>
<span data-ttu-id="3301c-279">A fő sablon paraméterek kap a felhasználó, ezt az információt használja a komplex objektum változók feltöltéséhez, és végrehajtja a kapcsolt sablonok.</span><span class="sxs-lookup"><span data-stu-id="3301c-279">The main template receives parameters from a user, uses that information to populate complex object variables, and executes the linked templates.</span></span>

![Fő sablon](./media/best-practices-resource-manager-design-templates/main-template.png)

<span data-ttu-id="3301c-281">**A fő sablon paraméterek kap a felhasználó**</span><span class="sxs-lookup"><span data-stu-id="3301c-281">**The main template receives parameters from a user**</span></span>

<span data-ttu-id="3301c-282">Egy megadott paraméter olyan ismert konfigurációs más néven a pólóra méretparaméternek kis, közepes vagy nagy a szabványos értékek miatt.</span><span class="sxs-lookup"><span data-stu-id="3301c-282">One parameter that is provided is a known configuration type also known as the t-shirt size parameter because of its standardized values such as small, medium, or large.</span></span> <span data-ttu-id="3301c-283">A gyakorlatban ez a paraméter több módon használhatja.</span><span class="sxs-lookup"><span data-stu-id="3301c-283">In practice, you can use this parameter in multiple ways.</span></span> <span data-ttu-id="3301c-284">További információkért lásd: "Ismert konfigurációs erőforrások sablon" a dokumentum későbbi szakaszában.</span><span class="sxs-lookup"><span data-stu-id="3301c-284">For details, see "Known configuration resources template" later in this document.</span></span>

<span data-ttu-id="3301c-285">Bizonyos erőforrások telepítése egy felhasználó paraméter által megadott ismert konfiguráció függetlenül.</span><span class="sxs-lookup"><span data-stu-id="3301c-285">Some resources are deployed regardless of the known configuration specified by a user parameter.</span></span> <span data-ttu-id="3301c-286">Ezeket az erőforrásokat egyetlen megosztott erőforrás-sablon használatával telepített, és más sablonok által megosztott, a megosztott erőforrás sablon első futtatásakor.</span><span class="sxs-lookup"><span data-stu-id="3301c-286">These resources are provisioned using a single shared resource template and are shared by other templates, so the shared resource template is run first.</span></span>

<span data-ttu-id="3301c-287">Bizonyos erőforrások opcionálisan telepítése a megadott ismert konfiguráció függetlenül.</span><span class="sxs-lookup"><span data-stu-id="3301c-287">Some resources are deployed optionally regardless of the specified known configuration.</span></span>

### <a name="shared-resources-template"></a><span data-ttu-id="3301c-288">Megosztott erőforrások sablon</span><span class="sxs-lookup"><span data-stu-id="3301c-288">Shared resources template</span></span>
<span data-ttu-id="3301c-289">Ez a sablon minden ismert konfigurációk által közösen használt erőforrások nyújt.</span><span class="sxs-lookup"><span data-stu-id="3301c-289">This template delivers resources that are common across all known configurations.</span></span> <span data-ttu-id="3301c-290">A virtuális hálózat, a rendelkezésre állási készletek, valamint a más erőforrások, amelyek szükségesek, függetlenül a központilag telepített ismert konfigurációs sablon tartalmazza.</span><span class="sxs-lookup"><span data-stu-id="3301c-290">It contains the virtual network, availability sets, and other resources that are required regardless of the known configuration template that is deployed.</span></span>

![Sablonerőforrás](./media/best-practices-resource-manager-design-templates/template-resources.png)

<span data-ttu-id="3301c-292">**Megosztott erőforrások sablon**</span><span class="sxs-lookup"><span data-stu-id="3301c-292">**Shared resources template**</span></span>

<span data-ttu-id="3301c-293">Erőforrás nevét, például a virtuális hálózat nevét, a fő sablon alapján.</span><span class="sxs-lookup"><span data-stu-id="3301c-293">Resource names, such as the virtual network name, are based on the main template.</span></span> <span data-ttu-id="3301c-294">Adja meg azokat, hogy a sablon belül változóként, vagy a felhasználó, a szervezete által megkövetelt paraméterként fogadásukra.</span><span class="sxs-lookup"><span data-stu-id="3301c-294">You can specify them as a variable within that template or receive them as a parameter from the user, as required by your organization.</span></span>

### <a name="optional-resources-template"></a><span data-ttu-id="3301c-295">Nem kötelező erőforrások sablon</span><span class="sxs-lookup"><span data-stu-id="3301c-295">Optional resources template</span></span>
<span data-ttu-id="3301c-296">A választható erőforrások sablonban programozott módon rendszerbe telepítendő erőforrásokat egy paraméter vagy változó értéke alapján.</span><span class="sxs-lookup"><span data-stu-id="3301c-296">The optional resources template contains resources that are programmatically deployed based on the value of a parameter or variable.</span></span>

![Nem kötelező erőforrások](./media/best-practices-resource-manager-design-templates/optional-resources.png)

<span data-ttu-id="3301c-298">**Nem kötelező erőforrások sablon**</span><span class="sxs-lookup"><span data-stu-id="3301c-298">**Optional resources template**</span></span>

<span data-ttu-id="3301c-299">Például az egy nem kötelező erőforrások sablon segítségével konfigurálhatja a jumpbox, amely lehetővé teszi a közvetett telepített környezethez a nyilvános interneten keresztül.</span><span class="sxs-lookup"><span data-stu-id="3301c-299">For example, you can use an optional resources template to configure a jumpbox that enables indirect access to a deployed environment from the public Internet.</span></span> <span data-ttu-id="3301c-300">Szeretné használni egy paraméter vagy változó adja meg, hogy a jumpbox engedélyezni kell, és a *concat* hozhat létre, mint a cél neve a sablon függvény *jumpbox_enabled.json*.</span><span class="sxs-lookup"><span data-stu-id="3301c-300">You would use a parameter or variable to identify whether the jumpbox should be enabled and the *concat* function to build the target name for the template, such as *jumpbox_enabled.json*.</span></span> <span data-ttu-id="3301c-301">Sablon csatolása a jumpbox telepítéséhez használja az eredményül kapott változó.</span><span class="sxs-lookup"><span data-stu-id="3301c-301">Template linking would use the resulting variable to install the jumpbox.</span></span>

<span data-ttu-id="3301c-302">A választható erőforrások sablon több helyen is kapcsolhat:</span><span class="sxs-lookup"><span data-stu-id="3301c-302">You can link the optional resources template from multiple places:</span></span>

* <span data-ttu-id="3301c-303">Minden egyes telepítésre alkalmazható, ha a megosztott erőforrások sablonból egy paraméterekkel hivatkozás létrehozásához.</span><span class="sxs-lookup"><span data-stu-id="3301c-303">When applicable to every deployment, create a parameter-driven link from the shared resources template.</span></span>
* <span data-ttu-id="3301c-304">Válassza ki az ismert konfigurációk kell, ha alkalmazható – például csak telepíteni, a nagyméretű telepítések – paraméterekkel vagy változó adatvezérelt hivatkozás létrehozása az ismert konfigurációs sablonból.</span><span class="sxs-lookup"><span data-stu-id="3301c-304">When applicable to select known configurations—for example, only install on large deployments—create a parameter-driven or variable-driven link from the known configuration template.</span></span>

<span data-ttu-id="3301c-305">Nem kötelező-e egy adott erőforráshoz nem vezethetik a sablon fogyasztó hanem a sablon szolgáltató.</span><span class="sxs-lookup"><span data-stu-id="3301c-305">Whether a given resource is optional may not be driven by the template consumer but instead by the template provider.</span></span> <span data-ttu-id="3301c-306">Például szükség lehet egy adott termék követelmény vagy a termék bővítmény (common a CSV-k) kielégítéséhez, vagy a házirendeknek az érvényesítését (gyakori, hogy a SIs és a nagyvállalati informatikai csoportok).</span><span class="sxs-lookup"><span data-stu-id="3301c-306">For example, you may need to satisfy a particular product requirement or product add-on (common for CSVs) or to enforce policies (common for SIs and enterprise IT groups).</span></span> <span data-ttu-id="3301c-307">Ezekben az esetekben a változó segítségével adja meg, hogy az erőforrás kell telepíteni.</span><span class="sxs-lookup"><span data-stu-id="3301c-307">In these cases, you can use a variable to identify whether the resource should be deployed.</span></span>

### <a name="known-configuration-resources-template"></a><span data-ttu-id="3301c-308">Ismert konfigurációs erőforrások sablon</span><span class="sxs-lookup"><span data-stu-id="3301c-308">Known configuration resources template</span></span>
<span data-ttu-id="3301c-309">A fő sablonban paraméter számára elérhetővé tehető lehetővé teszi a felhasználó a sablon adja meg a telepíteni kívánt ismert konfigurációját.</span><span class="sxs-lookup"><span data-stu-id="3301c-309">In the main template, a parameter can be exposed to allow the template consumer to specify a desired known configuration to deploy.</span></span> <span data-ttu-id="3301c-310">Gyakran az ismert konfigurációs rögzített konfigurációs méretek védőfal, kis, közepes és nagy számú használja a pólóra mérete megközelítést.</span><span class="sxs-lookup"><span data-stu-id="3301c-310">Often, this known configuration uses a t-shirt size approach with a set of fixed configuration sizes such as sandbox, small, medium, and large.</span></span>

![Ismert konfigurációs erőforrások](./media/best-practices-resource-manager-design-templates/known-config.png)

<span data-ttu-id="3301c-312">**Ismert konfigurációs erőforrások sablon**</span><span class="sxs-lookup"><span data-stu-id="3301c-312">**Known configuration resources template**</span></span>

<span data-ttu-id="3301c-313">A pólóra mérete módszer általában arra használják, de a paraméterek minden olyan ismert konfigurációk jelenthet.</span><span class="sxs-lookup"><span data-stu-id="3301c-313">The t-shirt size approach is commonly used, but the parameters can represent any set of known configurations.</span></span> <span data-ttu-id="3301c-314">Például egy vállalati alkalmazás, például a fejlesztői, tesztelési és termék környezeteket készlete is megadhat.</span><span class="sxs-lookup"><span data-stu-id="3301c-314">For example, you can specify a set of environments for an enterprise application such as Development, Test, and Product.</span></span> <span data-ttu-id="3301c-315">Vagy használhat egy felhőalapú szolgáltatást a különböző méretezési egységeket, termékverziók vagy termék konfigurációkat, például a közösségi, Developer és Enterprise.</span><span class="sxs-lookup"><span data-stu-id="3301c-315">Or you could use it for a cloud service to represent different scale units, product versions, or product configurations such as Community, Developer, or Enterprise.</span></span>

<span data-ttu-id="3301c-316">Csakúgy, mint a megosztott erőforrás sablon változók kerülnek átadásra a ismert konfigurációk sablon alkalmazásból:</span><span class="sxs-lookup"><span data-stu-id="3301c-316">As with the shared resource template, variables are passed to the known configurations template from either:</span></span>

* <span data-ttu-id="3301c-317">A felhasználó – Ez azt jelenti, hogy a fő sablont küldött paraméterek.</span><span class="sxs-lookup"><span data-stu-id="3301c-317">An end user—that is, the parameters sent to the main template.</span></span>
* <span data-ttu-id="3301c-318">Egy szervezet – Ez azt jelenti, hogy a változók a fő sablonban, amelyek belső követelmények vagy házirendek.</span><span class="sxs-lookup"><span data-stu-id="3301c-318">An organization—that is, the variables in the main template that represent internal requirements or policies.</span></span>

### <a name="member-resources-template"></a><span data-ttu-id="3301c-319">Tag erőforrások sablon</span><span class="sxs-lookup"><span data-stu-id="3301c-319">Member resources template</span></span>
<span data-ttu-id="3301c-320">Egy ismert konfigurációs belül egy vagy több tag csomóponttípusok gyakran érhetők el.</span><span class="sxs-lookup"><span data-stu-id="3301c-320">Within a known configuration, one or more member node types are often included.</span></span> <span data-ttu-id="3301c-321">Például Hadoop lehetősége főcsomópont és adatcsomópontokat.</span><span class="sxs-lookup"><span data-stu-id="3301c-321">For example, with Hadoop you have master nodes and data nodes.</span></span> <span data-ttu-id="3301c-322">Ha MongoDB telepíti, akkor adatcsomópontokat és egy soron.</span><span class="sxs-lookup"><span data-stu-id="3301c-322">If you are installing MongoDB, you have data nodes and an arbiter.</span></span> <span data-ttu-id="3301c-323">Ha alapszintű DataStax telepít, akkor adatok csomópontok és a virtuális gép telepítve OpsCenter és.</span><span class="sxs-lookup"><span data-stu-id="3301c-323">If you are deploying DataStax, you have data nodes and a VM with OpsCenter installed.</span></span>

![Tagok erőforrások](./media/best-practices-resource-manager-design-templates/member-resources.png)

<span data-ttu-id="3301c-325">**Tag erőforrások sablon**</span><span class="sxs-lookup"><span data-stu-id="3301c-325">**Member resources template**</span></span>

<span data-ttu-id="3301c-326">Minden egyes a csomópontok is rendelkezik különböző méretű virtuális gépekhez csatlakoztatott lemezek, telepítése és beállítása a csomópontokat, a virtuális gépeket, a példányok száma és egyéb részletek portbeállításokat parancsfájlok számát.</span><span class="sxs-lookup"><span data-stu-id="3301c-326">Each type of nodes can have different sizes of VMs, numbers of attached disks, scripts to install and set up the nodes, port configurations for the VMs, number of instances, and other details.</span></span> <span data-ttu-id="3301c-327">Így az egyes csomóponttípusok lekérdezi a saját tag erőforrás-sablon üzembe helyezése és az infrastruktúra konfigurálása, valamint telepítheti és konfigurálhatja a virtuális Gépen belül szoftver parancsfájlok végrehajtása részleteit tartalmazza.</span><span class="sxs-lookup"><span data-stu-id="3301c-327">So each node type gets its own member resource template, which contains the details for deploying and configuring an infrastructure as well as executing scripts to deploy and configure software within the VM.</span></span>

<span data-ttu-id="3301c-328">Virtuális gépek általában parancsfájlok kétféle használt, széles körben újrafelhasználható és egyéni parancsfájlok.</span><span class="sxs-lookup"><span data-stu-id="3301c-328">For VMs, typically two types of scripts are used, widely reusable and custom scripts.</span></span>

### <a name="widely-reusable-scripts"></a><span data-ttu-id="3301c-329">Széles körben újrafelhasználható parancsfájlok</span><span class="sxs-lookup"><span data-stu-id="3301c-329">Widely reusable scripts</span></span>
<span data-ttu-id="3301c-330">Széles körben újrafelhasználható parancsfájlok segítségével többféle típusú sablonok.</span><span class="sxs-lookup"><span data-stu-id="3301c-330">Widely reusable scripts can be used across multiple types of templates.</span></span> <span data-ttu-id="3301c-331">Széles körben újrafelhasználható parancsfájlokat jobb példái egyik RAID áll IOPS nagyobb számú tárolókészlet lemezek és a Linux beállítása.</span><span class="sxs-lookup"><span data-stu-id="3301c-331">One of the better examples of these widely reusable scripts sets up RAID on Linux to pool disks and gain a greater number of IOPS.</span></span> <span data-ttu-id="3301c-332">A szoftver telepítését a virtuális gép, függetlenül az ezt a parancsfájlt újbóli bevált gyakorlatát biztosít gyakori forgatókönyvek.</span><span class="sxs-lookup"><span data-stu-id="3301c-332">Regardless of the software being installed in the VM, this script provides reuse of proven practices for common scenarios.</span></span>

![Újrafelhasználható parancsfájlok](./media/best-practices-resource-manager-design-templates/reusable-scripts.png)

<span data-ttu-id="3301c-334">**Tag erőforrásokat sablonok meghívhatja széles körben újrafelhasználható parancsfájlok**</span><span class="sxs-lookup"><span data-stu-id="3301c-334">**Member resources templates can call widely reusable scripts**</span></span>

### <a name="custom-scripts"></a><span data-ttu-id="3301c-335">Egyéni parancsfájlok</span><span class="sxs-lookup"><span data-stu-id="3301c-335">Custom scripts</span></span>
<span data-ttu-id="3301c-336">Sablonok általában egy vagy több olyan parancsfájlok, amelyek telepítése és konfigurálása a virtuális gépeken szoftver hívja.</span><span class="sxs-lookup"><span data-stu-id="3301c-336">Templates commonly call one or more scripts that install and configure software within VMs.</span></span> <span data-ttu-id="3301c-337">A közös minta látható a nagy topológiákhoz, ahol egy vagy több tag típusa több példánya van telepítve.</span><span class="sxs-lookup"><span data-stu-id="3301c-337">A common pattern is seen with large topologies where multiple instances of one or more member types are deployed.</span></span> <span data-ttu-id="3301c-338">Minden virtuális gép ezzel párhuzamosan futtatható kezdeményezett egy telepítési parancsfájlt a telepítési parancsprogram, minden virtuális gép (vagy egy megadott tag típusú virtuális gépeinek) üzembe helyezése után is nevezett követ.</span><span class="sxs-lookup"><span data-stu-id="3301c-338">An installation script is initiated for every VM that can be run in parallel, followed by a setup script that is called after all VMs (or all VMs of a given member type) are deployed.</span></span>

![Egyéni parancsfájlok](./media/best-practices-resource-manager-design-templates/custom-scripts.png)

<span data-ttu-id="3301c-340">**Tag erőforrásokat sablonok meghívhatja a parancsfájlokat egy adott célra, például a Virtuálisgép-konfiguráció**</span><span class="sxs-lookup"><span data-stu-id="3301c-340">**Member resources templates can call scripts for a specific purpose such as VM configuration**</span></span>

## <a name="capability-scoped-solution-template-example---redis"></a><span data-ttu-id="3301c-341">Képesség hatókörű megoldás sablon példa - Redis</span><span class="sxs-lookup"><span data-stu-id="3301c-341">Capability-scoped solution template example - Redis</span></span>
<span data-ttu-id="3301c-342">Előfordulhat, hogy működése a megvalósítást megjelenítéséhez vizsgáljuk meg a sablont, amely elősegíti a a telepítését és konfigurálását a Redis szabványos pólóra méretben felépítése gyakorlati példa.</span><span class="sxs-lookup"><span data-stu-id="3301c-342">To show how an implementation might work, let's look at a practical example of building a template that facilitates the deployment and configuration of Redis in standard t-shirt sizes.</span></span>  

<span data-ttu-id="3301c-343">A központi telepítést a megosztott erőforrásokat (virtuális hálózatot, tárfiókot, rendelkezésre állási készletek) és egy opcionális erőforrás (jumpbox) vannak.</span><span class="sxs-lookup"><span data-stu-id="3301c-343">For the deployment, there are a set of shared resources (virtual network, storage account, availability sets) and an optional resource (jumpbox).</span></span> <span data-ttu-id="3301c-344">Több ismert konfigurációk-ként pólóra méretek (kis, közepes, nagy), de az egyetlen csomópont írja be.</span><span class="sxs-lookup"><span data-stu-id="3301c-344">There are multiple known configurations represented as t-shirt sizes (small, medium, large) but each with a single node type.</span></span> <span data-ttu-id="3301c-345">Van még két célú-specifikus parancsfájlok (telepítési, konfigurációs).</span><span class="sxs-lookup"><span data-stu-id="3301c-345">There are also two purpose-specific scripts (installation, configuration).</span></span>

### <a name="creating-the-template-files"></a><span data-ttu-id="3301c-346">A sablon fájlok létrehozása</span><span class="sxs-lookup"><span data-stu-id="3301c-346">Creating the template files</span></span>
<span data-ttu-id="3301c-347">Azuredeploy.json fő sablont hozna létre.</span><span class="sxs-lookup"><span data-stu-id="3301c-347">You would create a Main Template named azuredeploy.json.</span></span>

<span data-ttu-id="3301c-348">Megosztott resources.json nevű megosztott erőforrások sablon létrehozása</span><span class="sxs-lookup"><span data-stu-id="3301c-348">You create Shared Resources Template named shared-resources.json</span></span>

<span data-ttu-id="3301c-349">Létrehozott egy választható erőforrás-sablont egy jumpbox jumpbox_enabled.json nevű központi telepítésének engedélyezése</span><span class="sxs-lookup"><span data-stu-id="3301c-349">You create an Optional Resource Template to enable the deployment of a jumpbox, named jumpbox_enabled.json</span></span>

<span data-ttu-id="3301c-350">A redis csak egyetlen csomópont típusa, használ, így a csomópont-resources.json nevű egyetlen tag erőforrás sablont hoz létre.</span><span class="sxs-lookup"><span data-stu-id="3301c-350">Redis uses just a single node type, so you create a single Member Resource Template named node-resources.json.</span></span>

<span data-ttu-id="3301c-351">A redis gyorsítótárral kívánt minden egyes csomóponton telepíteni, majd állítsa be a fürtöt.</span><span class="sxs-lookup"><span data-stu-id="3301c-351">With Redis, you want to install each individual node, and then set up the cluster.</span></span>  <span data-ttu-id="3301c-352">Parancsfájlok használatával megfeleljen a telepítést, és állítsa be, a redis-fürt-install.sh és a redis-fürt-setup.sh rendelkezik.</span><span class="sxs-lookup"><span data-stu-id="3301c-352">You have scripts to accommodate the installation and set up, redis-cluster-install.sh and redis-cluster-setup.sh.</span></span>

### <a name="linking-the-templates"></a><span data-ttu-id="3301c-353">A sablonok csatolása</span><span class="sxs-lookup"><span data-stu-id="3301c-353">Linking the templates</span></span>
<span data-ttu-id="3301c-354">A sablonnal linking, a fő sablon mutató ki a megosztott erőforrások sablont, amely létrehozza a virtuális hálózat.</span><span class="sxs-lookup"><span data-stu-id="3301c-354">Using template linking, the main template links out to the shared resources template, which establishes the virtual network.</span></span>

<span data-ttu-id="3301c-355">A logika engedélyezéséhez adja meg, hogy egy jumpbox kell telepíteni, hogy a sablon fogyasztók fő sablonban.</span><span class="sxs-lookup"><span data-stu-id="3301c-355">Logic is added within the main template to enable consumers of the template to specify whether a jumpbox should be deployed.</span></span> <span data-ttu-id="3301c-356">Egy *engedélyezett* értékét a *EnableJumpbox* paraméter azt jelzi, hogy az ügyfél egy jumpbox telepíteni szeretné.</span><span class="sxs-lookup"><span data-stu-id="3301c-356">An *enabled* value for the *EnableJumpbox* parameter indicates that the customer wants to deploy a jumpbox.</span></span> <span data-ttu-id="3301c-357">Ha ez az érték van megadva, a sablon összefűzi *_enabled* a jumpbox funkció alap sablon nevét az utótagnak pedig.</span><span class="sxs-lookup"><span data-stu-id="3301c-357">When this value is provided, the template concatenates *_enabled* as a suffix to a base template name for the jumpbox capability.</span></span>

<span data-ttu-id="3301c-358">A fő sablont alkalmazza a *nagy* paraméter értékét egy alap tanúsítványsablon-nevet pólóra méretét, és ezután használja az utótagnak pedig ezt az értéket egy sablon társítani kívánt kimenő *technology_on_os_large.json*.</span><span class="sxs-lookup"><span data-stu-id="3301c-358">The main template applies the *large* parameter value as a suffix to a base template name for t-shirt sizes, and then uses that value in a template link out to *technology_on_os_large.json*.</span></span>

<span data-ttu-id="3301c-359">Ezen az ábrán a topológia hasonló lesz.</span><span class="sxs-lookup"><span data-stu-id="3301c-359">The topology would resemble this illustration.</span></span>

![Redis sablon](./media/best-practices-resource-manager-design-templates/redis-template.png)

<span data-ttu-id="3301c-361">**Egy Redis-sablon sablon struktúra**</span><span class="sxs-lookup"><span data-stu-id="3301c-361">**Template structure for a Redis template**</span></span>

### <a name="configuring-state"></a><span data-ttu-id="3301c-362">Állapot beállítása</span><span class="sxs-lookup"><span data-stu-id="3301c-362">Configuring state</span></span>
<span data-ttu-id="3301c-363">A fürt csomópontjaihoz az állapot beállítása két lépésből áll, mindkét célú adott parancsfájlok által képviselt.</span><span class="sxs-lookup"><span data-stu-id="3301c-363">For the nodes in the cluster, there are two steps to configuring the state, both represented by Purpose Specific Scripts.</span></span>  <span data-ttu-id="3301c-364">"redis-fürt-install.sh" Redis telepíti, és "redis-fürt-setup.sh" állítja be a fürtöt.</span><span class="sxs-lookup"><span data-stu-id="3301c-364">"redis-cluster-install.sh" installs Redis and "redis-cluster-setup.sh" sets up the cluster.</span></span>

### <a name="supporting-different-size-deployments"></a><span data-ttu-id="3301c-365">A különböző méretű központi telepítések támogatása</span><span class="sxs-lookup"><span data-stu-id="3301c-365">Supporting Different Size Deployments</span></span>
<span data-ttu-id="3301c-366">Változók, belül a pólóra mérete sablon központi telepítése a megadott méretű minden típusú csomópontok számát adja meg (*nagy*).</span><span class="sxs-lookup"><span data-stu-id="3301c-366">Inside variables, the t-shirt size template specifies the number of nodes of each type to deploy for the specified size (*large*).</span></span> <span data-ttu-id="3301c-367">Majd központilag telepíti ezt a számot erőforrás hurkok, egyedi nevek erőforrások biztosítása a csomópontnév a numerikus sorozatszáma hozzáfűzésével használó Virtuálisgép-példányokat *copyIndex()*.</span><span class="sxs-lookup"><span data-stu-id="3301c-367">It then deploys that number of VM instances using resource loops, providing unique names to resources by appending a node name with a numeric sequence number from *copyIndex()*.</span></span> <span data-ttu-id="3301c-368">Az hajtja végre ezeket a lépéseket működés közbeni és a meleg zóna virtuális gépeket, a a pólóra sablon</span><span class="sxs-lookup"><span data-stu-id="3301c-368">It does these steps for both hot and warm zone VMs, as defined in the t-shirt name template</span></span>

## <a name="decomposition-and-end-to-end-solution-scoped-templates"></a><span data-ttu-id="3301c-369">Felbontás ellen és végpont megoldás hatókörű sablonok</span><span class="sxs-lookup"><span data-stu-id="3301c-369">Decomposition and end-to-end solution scoped templates</span></span>
<span data-ttu-id="3301c-370">A végpont megoldás hatókörű megoldássablon arra irányul, hogy egy végpont megoldást hoz létre.</span><span class="sxs-lookup"><span data-stu-id="3301c-370">A solution template with an end-to-end solution scope is focused on delivering an end-to-end solution.</span></span>  <span data-ttu-id="3301c-371">Erre akkor általában több képesség hatókörbe tartozó sablonokat további erőforrások, a logikai és a állapot áll.</span><span class="sxs-lookup"><span data-stu-id="3301c-371">This approach is typically a composition of multiple capability-scoped templates with additional resources, logic, and state.</span></span>

<span data-ttu-id="3301c-372">Az alábbi ábrán kiemelt, mint ugyanannak a modellnek hatókörű funkció sablonok használt ki van bővítve a végpont megoldás hatókörű sablonok.</span><span class="sxs-lookup"><span data-stu-id="3301c-372">As highlighted in the image below, the same model used for capability scoped templates is extended for templates with an End-to-End Solution Scope.</span></span>

<span data-ttu-id="3301c-373">A megosztott erőforrások sablon és a választható erőforrásokat sablonok szolgál, ugyanezt a funkciót, mint a kapacitás és funkció sablon megközelítések hatókörű, de a teljes körű megoldás hatóköre.</span><span class="sxs-lookup"><span data-stu-id="3301c-373">A Shared Resources Template and Optional Resources Templates serve the same function as in the capacity and capability scoped template approaches, but are scoped for the end to end solution.</span></span>

<span data-ttu-id="3301c-374">Teljes körű megoldás hatókörű sablonok is általában rendelkezhetnek pólóra mérete, a konfiguráció erőforrások ismert sablon tükrözi, a megoldás egy adott ismert konfiguráció szükséges.</span><span class="sxs-lookup"><span data-stu-id="3301c-374">As end to end solution scoped templates also can typically have t-shirt sizes, the Known Configuration Resources template reflects what is required for a given known configuration of the solution.</span></span>

<span data-ttu-id="3301c-375">A konfigurációs erőforrások sablon ismert hivatkozásokat egy vagy több képesség, amely kapcsolódik a teljes körű megoldás a megoldás sablonokat, továbbá a tag erőforrás sablonok, amelyek szükségesek a teljes körű megoldás hatókörét.</span><span class="sxs-lookup"><span data-stu-id="3301c-375">The Known Configuration Resources Template links to one or more capability scoped solution templates that are relevant to the end to end solution as well as the Member Resource Templates that are required for the end to end solution.</span></span>

<span data-ttu-id="3301c-376">Lehet, hogy a megoldás pólóra mérete eltér az egyedi képesség hatókörű sablon, változók belül a konfigurációs erőforrások ismert sablon segítségével hatókörű alárendelt funkció megoldás sablonok központi telepítése a megfelelő Póló mérete a megfelelő értéket adjon meg.</span><span class="sxs-lookup"><span data-stu-id="3301c-376">As the t-shirt size of the solution may be different than the individual capability-scoped template, variables within the Known Configuration Resources Template are used to provide the appropriate values for downstream capability scoped solution templates to deploy the appropriate t-shirt size.</span></span>

![Végpontok közötti](./media/best-practices-resource-manager-design-templates/end-to-end.png)

<span data-ttu-id="3301c-378">**A modell használt kapacitás és -készítés hatókörű sablonok teljes körű megoldás sablon hatókörök könnyen bővíthető megoldás**</span><span class="sxs-lookup"><span data-stu-id="3301c-378">**The model used for capacity or capability scoped solution templates can be readily extended for end to end solution template scopes**</span></span>

## <a name="preparing-templates-for-the-marketplace"></a><span data-ttu-id="3301c-379">A piactér sablonok előkészítése</span><span class="sxs-lookup"><span data-stu-id="3301c-379">Preparing templates for the Marketplace</span></span>
<span data-ttu-id="3301c-380">Az előző módszerrel könnyen alkalmazkodik a vállalatok számára, a SIs és a CSV-k, ahová telepíteni magukat a sablonok vagy engedélyezi az ügyfeleknek a saját telepítendő forgatókönyvek.</span><span class="sxs-lookup"><span data-stu-id="3301c-380">The preceding approach readily accommodates scenarios where Enterprises, SIs, and CSVs want to either deploy the templates themselves or enable their customers to deploy on their own.</span></span>

<span data-ttu-id="3301c-381">Egy másik kívánt forgatókönyv telepít, a sablon a piactéren keresztül.</span><span class="sxs-lookup"><span data-stu-id="3301c-381">Another desired scenario is deploying a template via the marketplace.</span></span>  <span data-ttu-id="3301c-382">Ez a felbontás ellen megközelítés működik, valamint a piactér néhány apró eltéréstől.</span><span class="sxs-lookup"><span data-stu-id="3301c-382">This decomposition approach works for the marketplace as well, with some minor changes.</span></span>

<span data-ttu-id="3301c-383">Ahogy korábban említettük sablonok tesz a piactéren eladásra különböző központi telepítési típusok használhatók.</span><span class="sxs-lookup"><span data-stu-id="3301c-383">As mentioned previously, templates can be used to offer distinct deployment types for sale in the marketplace.</span></span> <span data-ttu-id="3301c-384">Különböző központi telepítési típusok pólóra méretek (kis, közepes, nagy), a termék/célközönség típusa (közösségi, fejlesztők, vállalati) vagy a szolgáltatás típusa (alapszintű, a magas rendelkezésre állású) lehet.</span><span class="sxs-lookup"><span data-stu-id="3301c-384">Distinct deployment types may be t-shirt sizes (small, medium, large), product/audience type (community, developer, enterprise), or feature type (basic, high availability).</span></span>

<span data-ttu-id="3301c-385">Alább látható módon a meglévő teljes körű megoldás vagy hatókörű funkció sablonok állítható könnyen be a listában a különböző ismert konfigurációk a piactéren.</span><span class="sxs-lookup"><span data-stu-id="3301c-385">As shown below, the existing end to end solution or capability scoped templates can be readily utilized to list the different known configurations in the marketplace.</span></span>

<span data-ttu-id="3301c-386">A paraméterek a fő sablont először módosultak, hogy távolítsa el a bejövő tshirtSize nevű paramétert.</span><span class="sxs-lookup"><span data-stu-id="3301c-386">The parameters to the main template are first modified to remove the inbound parameter named tshirtSize.</span></span>

<span data-ttu-id="3301c-387">A különböző központi telepítési típusok konfigurációs erőforrások ismert sablon leképezni, amíg is van szükségük a közös erőforrások és a megosztott erőforrások sablonban és potenciálisan azokat az opcionális erőforrás szolgáltatásokban található konfiguráció.</span><span class="sxs-lookup"><span data-stu-id="3301c-387">While the distinct deployment types map to the Known Configuration Resources Template, they also need the common resources and configuration found in the Shared Resources Template and potentially those in Optional Resource Templates.</span></span>

<span data-ttu-id="3301c-388">Ha közzé szeretné tenni a sablont a piactéren, kapcsolatot hoz létre a fő sablont, amely kiváltja a korábban elérhető bejövő paraméterének egy változóhoz, a sablonon belül a beágyazott tshirtSize különböző példányait.</span><span class="sxs-lookup"><span data-stu-id="3301c-388">If you want to publish your template to the marketplace, you establish distinct copies of your Main template that replaces the previously available inbound parameter of tshirtSize to a variable embedded within the template.</span></span>

![Piactér](./media/best-practices-resource-manager-design-templates/marketplace.png)

<span data-ttu-id="3301c-390">**A megoldás testreszabásához hatókörű a piactér sablonját**</span><span class="sxs-lookup"><span data-stu-id="3301c-390">**Adapting a solution scoped template for the marketplace**</span></span>

## <a name="next-steps"></a><span data-ttu-id="3301c-391">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="3301c-391">Next steps</span></span>
* <span data-ttu-id="3301c-392">Megosztás állapot-sablonok, lásd: [állapotát az Azure Resource Manager sablonokban megosztása](best-practices-resource-manager-state.md).</span><span class="sxs-lookup"><span data-stu-id="3301c-392">To learn about sharing state into and out of templates, see [Sharing state in Azure Resource Manager templates](best-practices-resource-manager-state.md).</span></span>
* <span data-ttu-id="3301c-393">Nagyvállalatoknak az [Azure enterprise scaffold - prescriptive subscription governance](resource-manager-subscription-governance.md) (Azure nagyvállalati struktúra - előíró előfizetés-irányítás) című cikk nyújt útmutatást az előfizetéseknek a Resource Managerrel való hatékony kezeléséről.</span><span class="sxs-lookup"><span data-stu-id="3301c-393">For guidance on how enterprises can use Resource Manager to effectively manage subscriptions, see [Azure enterprise scaffold - prescriptive subscription governance](resource-manager-subscription-governance.md).</span></span>

