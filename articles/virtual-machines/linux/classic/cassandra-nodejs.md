---
title: az Azure-on Linux Cassandra aaaRun |} Microsoft Docs
description: "Hogyan toorun egy Cassandra fürt Linux Azure Virtual Machines egy Node.js-alkalmazás"
services: virtual-machines-linux
documentationcenter: nodejs
author: tomarcher
manager: routlaw
editor: 
tags: azure-service-management
ms.assetid: 30de1f29-e97d-492f-ae34-41ec83488de0
ms.service: virtual-machines-linux
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-linux
ms.devlang: na
ms.topic: article
ms.date: 08/17/2017
ms.author: tarcher
ms.openlocfilehash: 381ca301bbe88d3740cf182f9c44fada5b9ba7cc
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/06/2017
---
# <a name="running-cassandra-with-linux-on-azure-and-accessing-it-from-nodejs"></a><span data-ttu-id="25341-103">A linuxos Cassandra futtatása az Azure-ban és az alkalmazás Node.js-ből való elérése</span><span class="sxs-lookup"><span data-stu-id="25341-103">Running Cassandra with Linux on Azure and Accessing it from Node.js</span></span>
> [!IMPORTANT] 
> <span data-ttu-id="25341-104">Azure az erőforrások létrehozására és kezelésére két különböző üzembe helyezési modellel rendelkezik: [Resource Manager és klasszikus](../../../resource-manager-deployment-model.md).</span><span class="sxs-lookup"><span data-stu-id="25341-104">Azure has two different deployment models for creating and working with resources: [Resource Manager and Classic](../../../resource-manager-deployment-model.md).</span></span> <span data-ttu-id="25341-105">Ez a cikk hello klasszikus telepítési modell használatát bemutatja.</span><span class="sxs-lookup"><span data-stu-id="25341-105">This article covers using hello Classic deployment model.</span></span> <span data-ttu-id="25341-106">A Microsoft azt javasolja, hogy az új telepítések esetén hello Resource Manager modellt használja.</span><span class="sxs-lookup"><span data-stu-id="25341-106">Microsoft recommends that most new deployments use hello Resource Manager model.</span></span> <span data-ttu-id="25341-107">Tekintse meg a Resource Manager-sablonok [alapszintű Datastax vállalati](https://azure.microsoft.com/documentation/templates/datastax) és [Spark-fürt és Cassandra a CentOS](https://azure.microsoft.com/documentation/templates/spark-and-cassandra-on-centos/).</span><span class="sxs-lookup"><span data-stu-id="25341-107">See Resource Manager templates for [Datastax Enterprise](https://azure.microsoft.com/documentation/templates/datastax) and [Spark cluster and Cassandra on CentOS](https://azure.microsoft.com/documentation/templates/spark-and-cassandra-on-centos/).</span></span>

## <a name="overview"></a><span data-ttu-id="25341-108">Áttekintés</span><span class="sxs-lookup"><span data-stu-id="25341-108">Overview</span></span>
<span data-ttu-id="25341-109">Microsoft Azure a egy megnyitott felhőalapú platform, amely a Microsoft fut, és a nem Microsoft szoftvert, amely operációs rendszerek, alkalmazás-kiszolgálókat, üzenetküldési köztes, valamint SQL és a NoSQL-adatbázisok mindkét kereskedelmi és nyissa meg a forrás-modellek.</span><span class="sxs-lookup"><span data-stu-id="25341-109">Microsoft Azure is an open cloud platform that runs both Microsoft as well as non-Microsoft software which  includes operating systems, application servers, messaging middleware as well as SQL and NoSQL databases from both commercial and open source models.</span></span> <span data-ttu-id="25341-110">A nyilvános felhők, beleértve az Azure rugalmas szolgáltatások igényel gondos tervezéssel és szándékos architektúra mindkét alkalmazáskiszolgálók jól tárolási rétegek.</span><span class="sxs-lookup"><span data-stu-id="25341-110">Building resilient services on public clouds including Azure requires careful planning and deliberate architecture for both applications servers as well storage layers.</span></span> <span data-ttu-id="25341-111">Cassandra által elosztott tároló-architektúra természetes segítségével magas rendelkezésre állású rendszerek, amelyek a fürt hibák hibatűrő fejlesztése során.</span><span class="sxs-lookup"><span data-stu-id="25341-111">Cassandra’s distributed storage architecture naturally helps in building highly available systems that are fault tolerant for cluster failures.</span></span> <span data-ttu-id="25341-112">Cassandra egy felhőhöz méretezett NoSQL-adatbázis által Apache szoftver Foundation költséget cassandra.apache.org; Cassandra Java nyelven van megírva, és ezért mind a Windows, Linux futtatja platformokon.</span><span class="sxs-lookup"><span data-stu-id="25341-112">Cassandra is a cloud scale NoSQL database maintained by Apache Software Foundation at cassandra.apache.org; Cassandra is written in Java and hence runs on both on Windows as well as Linux platforms.</span></span>

<span data-ttu-id="25341-113">hello Ez a cikk célja a Microsoft Azure virtuális gépek és virtuális hálózatok egyetlen és több data center fürtként Ubuntu tooshow Cassandra telepítés.</span><span class="sxs-lookup"><span data-stu-id="25341-113">hello focus of this article is tooshow Cassandra deployment on Ubuntu as a single and multi-data center cluster leveraging Microsoft Azure Virtual Machines and Virtual Networks.</span></span> <span data-ttu-id="25341-114">hello fürttelepítés optimalizált termelési számítási feladatokhoz hatókörén kívül esik a cikk több lemez a csomópont-konfiguráció szükséges, megfelelő körgyűrűs topológia tervezési és toosupport hello modellezési szükséges replikációs, az adatok konzisztenciájának, átviteli sebesség és magas rendelkezésre állási követelményeinek.</span><span class="sxs-lookup"><span data-stu-id="25341-114">hello cluster deployment for production optimized workloads is out of scope of this article as it requires multi-disk node configuration, appropriate ring topology design and data modeling toosupport hello needed replication, data consistency, throughput and high availability requirements.</span></span>

<span data-ttu-id="25341-115">Ez a cikk vesz egy alapvető megközelítés tooshow, mi is szerepet kap az épület hello Cassandra fürt képest Docker, Chef vagy Puppet, amely hello infrastruktúra telepítése sokkal egyszerűbbé teheti.</span><span class="sxs-lookup"><span data-stu-id="25341-115">This article takes a fundamental approach tooshow what is involved in building hello Cassandra cluster compared Docker, Chef or Puppet which can make hello infrastructure deployment a lot easier.</span></span>  

## <a name="hello-deployment-models"></a><span data-ttu-id="25341-116">üzembe helyezési modellel hello</span><span class="sxs-lookup"><span data-stu-id="25341-116">hello Deployment Models</span></span>
<span data-ttu-id="25341-117">A Microsoft Azure hálózatkezelés lehetővé teszi, hogy a elkülönített titkos fürtök esetén, amelyek hello hozzáférést lehet korlátozott tooattain finom nyomtatott hálózati biztonsági hello telepítését.</span><span class="sxs-lookup"><span data-stu-id="25341-117">Microsoft Azure networking allows hello deployment of isolated private clusters, hello access of which can be restricted tooattain fine grained network security.</span></span>  <span data-ttu-id="25341-118">Mivel ez a cikk hello Cassandra telepítési alapvető szinten megjelenítésével kapcsolatos, nem tárgyaljuk hello konzisztenciaszint és hello optimális tárolókialakítás átviteli sebesség eléréséhez.</span><span class="sxs-lookup"><span data-stu-id="25341-118">Since this article is about showing hello Cassandra deployment at a fundamental level, we will not focus on hello consistency level and hello optimal storage design for throughput.</span></span> <span data-ttu-id="25341-119">A képzeletbeli fürt hálózati követelményei hello listája itt található:</span><span class="sxs-lookup"><span data-stu-id="25341-119">Here is hello list of networking requirements for our hypothetical cluster:</span></span>

* <span data-ttu-id="25341-120">Külső rendszerek Cassandra adatbázis belül vagy kívül Azure nem tud hozzáférni.</span><span class="sxs-lookup"><span data-stu-id="25341-120">External systems can’t access Cassandra database from within or outside Azure</span></span>
* <span data-ttu-id="25341-121">Cassandra fürt toobe thrift-forgalom egy terheléselosztó mögött van</span><span class="sxs-lookup"><span data-stu-id="25341-121">Cassandra cluster has toobe behind a load balancer for thrift traffic</span></span>
* <span data-ttu-id="25341-122">Minden adatközpontot továbbfejlesztett fürt rendelkezésre állási csoportok két csomópontja Cassandra telepítése</span><span class="sxs-lookup"><span data-stu-id="25341-122">Deploy Cassandra nodes in two groups in each data center for an enhanced cluster availability</span></span>
* <span data-ttu-id="25341-123">Zárolását hello fürt úgy, hogy csak az alkalmazás kiszolgálófarm hozzáférés toohello adatbázis közvetlenül van</span><span class="sxs-lookup"><span data-stu-id="25341-123">Lock down hello cluster so that only application server farm has access toohello database directly</span></span>
* <span data-ttu-id="25341-124">Eltérő SSH nyilvános hálózati végpontok</span><span class="sxs-lookup"><span data-stu-id="25341-124">No public networking endpoints other than SSH</span></span>
* <span data-ttu-id="25341-125">Minden egyes Cassandra csomópont kell egy rögzített belső IP-cím</span><span class="sxs-lookup"><span data-stu-id="25341-125">Each Cassandra node needs a fixed internal IP address</span></span>

<span data-ttu-id="25341-126">Cassandra telepített tooa egyetlen Azure-régiót vagy toomultiple régiók hello munkaterhelés hello elosztott jellege alapján lehet.</span><span class="sxs-lookup"><span data-stu-id="25341-126">Cassandra can be deployed tooa single Azure region or toomultiple regions based on hello distributed nature of hello workload.</span></span> <span data-ttu-id="25341-127">Több régióban üzembe helyezési modellel lehet tooserve kihasználhatók a végfelhasználók szorosabb tooa adott földrajzi keresztül hello Cassandra ugyanabban az infrastruktúrában.</span><span class="sxs-lookup"><span data-stu-id="25341-127">Multi-region deployment model can be leveraged tooserve end users closer tooa particular geography through hello same Cassandra infrastructure.</span></span> <span data-ttu-id="25341-128">Cassandra meg beépített csomópont replikációs vesz többszörös főkiszolgáló hello szinkronizálás több különböző adatközponthoz származó ír és egységes hello adatok tooapplications ablak jeleníti.</span><span class="sxs-lookup"><span data-stu-id="25341-128">Cassandra’s built-in node replication takes care of hello synchronization of multi-master writes originating from multiple data centers and presents a consistent view of hello data tooapplications.</span></span> <span data-ttu-id="25341-129">Több területi központi telepítés is segíthetnek a hello kockázatcsökkentés a hello szélesebb körű Azure szolgáltatás-kimaradások számát.</span><span class="sxs-lookup"><span data-stu-id="25341-129">Multi-region deployment can also help with hello risk mitigation of hello broader Azure service outages.</span></span> <span data-ttu-id="25341-130">Cassandra tartozó hangolható konzisztencia és a replikációs topológia segít az alkalmazások különböző Helyreállítási igényeket.</span><span class="sxs-lookup"><span data-stu-id="25341-130">Cassandra’s tunable consistency and replication topology will help in meeting diverse RPO needs of applications.</span></span>

### <a name="single-region-deployment"></a><span data-ttu-id="25341-131">Egyetlen régión központi telepítés</span><span class="sxs-lookup"><span data-stu-id="25341-131">Single Region Deployment</span></span>
<span data-ttu-id="25341-132">Program először egy régió egyetlen központi telepítési és betakarítás hello learnings több területi modell létrehozásához.</span><span class="sxs-lookup"><span data-stu-id="25341-132">We will start with a single region deployment and harvest hello learnings in creating a multi-region model.</span></span> <span data-ttu-id="25341-133">Az Azure virtuális hálózat lesz elkülönített használt toocreate alhálózatok, hogy a fent említett hello hálózatbiztonsági követelményei érheti el.</span><span class="sxs-lookup"><span data-stu-id="25341-133">Azure virtual networking will be used toocreate isolated subnets so that hello network security requirements mentioned above can be met.</span></span>  <span data-ttu-id="25341-134">hello egyetlen régión központi telepítés létrehozása bemutatott hello folyamat használja az Ubuntu 14.04 LTS és Cassandra 2.08; azonban hello folyamat könnyen lehet elfogadott toohello más Linux Variant adattípusban.</span><span class="sxs-lookup"><span data-stu-id="25341-134">hello process described in creating hello single region deployment uses Ubuntu 14.04 LTS and Cassandra 2.08; however, hello process can easily be adopted toohello other Linux variants.</span></span> <span data-ttu-id="25341-135">hello közé tartoznak a következők hello rendszeres hello egyetlen régión telepítési jellemzőit.</span><span class="sxs-lookup"><span data-stu-id="25341-135">hello following are some of hello systemic characteristics of hello single region deployment.</span></span>  

<span data-ttu-id="25341-136">**Magas rendelkezésre állás:** hello Cassandra csomópontok látható az 1. ábra telepített hello tootwo rendelkezésre állási készletek, hogy hello csomópont a magas rendelkezésre állású több tartalék tartományok között van elosztva.</span><span class="sxs-lookup"><span data-stu-id="25341-136">**High Availability:** hello Cassandra nodes shown in hello Figure 1 are deployed tootwo availability sets so that hello nodes are spread between multiple fault domains for high availability.</span></span> <span data-ttu-id="25341-137">Virtuális gépek minden egyes rendelkezésre állási csoport attribútummal megfeleltetve too2 tartalék tartományok.</span><span class="sxs-lookup"><span data-stu-id="25341-137">VMs annotated with each availability set is mapped too2 fault domains.</span></span>  <span data-ttu-id="25341-138">A Microsoft Azure által használt hello fogalma tartalék tartomány toomanage állásidő (pl. a hardver- vagy hibák) közben (pl. gazdagép vagy vendég operációs rendszer javítás vagy frissítés, alkalmazásfrissítések) frissítési tartomány hello fogalma nem tervezett kezelésére állásidő ütemezett használt.</span><span class="sxs-lookup"><span data-stu-id="25341-138">Microsoft Azure uses hello concept of fault domain toomanage unplanned down time (e.g. hardware or software failures) while hello concept of upgrade domain (e.g. host or guest OS patching/upgrades, application upgrades) is used for managing scheduled down time.</span></span> <span data-ttu-id="25341-139">Ellenőrizze a [vész-helyreállítási és magas rendelkezésre állás, az Azure-alkalmazások](http://msdn.microsoft.com/library/dn251004.aspx) hello szerepkör hiba és a frissítési tartományok magas rendelkezésre állás eléréséhez.</span><span class="sxs-lookup"><span data-stu-id="25341-139">Please see [Disaster Recovery and High Availability for Azure Applications](http://msdn.microsoft.com/library/dn251004.aspx) for hello role of fault and upgrade domains in attaining high availability.</span></span>

![Egyetlen régión központi telepítés](./media/cassandra-nodejs/cassandra-linux1.png)

<span data-ttu-id="25341-141">1. ábra: Egy régiót központi telepítés</span><span class="sxs-lookup"><span data-stu-id="25341-141">Figure 1: Single region deployment</span></span>

<span data-ttu-id="25341-142">Vegye figyelembe, hogy írásának hello időpontban Azure nem engedélyezi a virtuális gépek tooa adott tartalék tartomány; csoportja hello explicit leképezése Következésképpen még hello telepítési modell 1. ábrán látható, a valószínű statisztikailag, hogy az összes hello virtuális gép csatlakoztatott tootwo tartalék tartományok helyett négy lehetnek.</span><span class="sxs-lookup"><span data-stu-id="25341-142">Note that at hello time of this writing, Azure doesn’t allow hello explicit mapping of a group of VMs tooa specific fault domain; consequently, even with hello deployment model shown in Figure 1, it is statistically probable that all hello virtual machines may be mapped tootwo fault domains instead of four.</span></span>

<span data-ttu-id="25341-143">**Terheléselosztás Thrift forgalmi betöltése:** Thrift ügyfél függvénytárainak belül hello webkiszolgáló toohello fürt csatlakoznak a belső terheléselosztót.</span><span class="sxs-lookup"><span data-stu-id="25341-143">**Load Balancing Thrift Traffic:** Thrift client libraries inside hello web server connect toohello cluster through an internal load balancer.</span></span> <span data-ttu-id="25341-144">Ehhez hello folyamata hello belső terheléselosztó toohello "data" alhálózat hozzáadása (lásd az 1. ábra) hello Cassandra fürtöt hello felhőszolgáltatás hello környezetében.</span><span class="sxs-lookup"><span data-stu-id="25341-144">This requires hello process of adding hello internal load balancer toohello “data” subnet (refer Figure 1) in hello context of hello cloud service hosting hello Cassandra cluster.</span></span> <span data-ttu-id="25341-145">Belső terheléselosztó hello van definiálva, miután minden csomópont van szükség, hello megjegyzések egy elosztott terhelésű készlet a korábban hozzáadott hello elosztott terhelésű végpont toobe meghatározott terheléselosztó neve.</span><span class="sxs-lookup"><span data-stu-id="25341-145">Once hello internal load balancer is defined, each node requires hello load balanced endpoint toobe added with hello annotations of a load balanced set with previously defined load balancer name.</span></span> <span data-ttu-id="25341-146">Lásd: [Azure belső terheléselosztás ](../../../load-balancer/load-balancer-internal-overview.md)további részleteket.</span><span class="sxs-lookup"><span data-stu-id="25341-146">See [Azure Internal Load Balancing ](../../../load-balancer/load-balancer-internal-overview.md)for more details.</span></span>

<span data-ttu-id="25341-147">**Fürt magok:** fontos tooselect hello legtöbb magas rendelkezésre állású csomópontok az mag, az új csomópontok hello kezdőérték csomópontok toodiscover hello topológia hello fürt fognak kommunikálni.</span><span class="sxs-lookup"><span data-stu-id="25341-147">**Cluster Seeds:** It is important tooselect hello most highly available nodes for seeds as hello new nodes will communicate with seed nodes toodiscover hello topology of hello cluster.</span></span> <span data-ttu-id="25341-148">Egyes rendelkezésre állási csoport egy csomópont kijelölt kezdőérték csomópontok tooavoid hibaérzékeny pontok kialakulását.</span><span class="sxs-lookup"><span data-stu-id="25341-148">One node from each availability set is designated as seed nodes tooavoid single point of failure.</span></span>

<span data-ttu-id="25341-149">**Replikációs tényező és Konzisztenciaszint:** Cassandra a beépített magas rendelkezésre állású és az adatok tartóssága jellemzőek hello replikációs tényező (RF - példányszámot az egyes sorok hello fürtön tárolt), és a Konzisztenciaszint (száma replikák toobe hello eredmény toohello hívó visszatérése előtt olvasása/írása).</span><span class="sxs-lookup"><span data-stu-id="25341-149">**Replication Factor and Consistency Level:** Cassandra’s build-in high-availability and data durability is characterized by hello Replication Factor (RF - number of copies of each row stored on hello cluster) and Consistency Level (number of replicas toobe read/written before returning hello result toohello caller).</span></span> <span data-ttu-id="25341-150">Replikációs tényező hello kulcstérértesítések használatával (hasonlóan tooa relációs adatbázis) létrehozása közben megadott, mivel hello konzisztenciaszint hello CRUD-lekérdezés elküldése során van megadva.</span><span class="sxs-lookup"><span data-stu-id="25341-150">Replication factor is specified during hello KEYSPACE (similar tooa relational database) creation whereas hello consistency level is specified while issuing hello CRUD query.</span></span> <span data-ttu-id="25341-151">Lásd a Cassandra dokumentációját a [konfigurálásával konzisztenciájának](http://www.datastax.com/documentation/cassandra/2.0/cassandra/dml/dml_config_consistency_c.html) konzisztencia részletek és hello képlet kvórum számításhoz.</span><span class="sxs-lookup"><span data-stu-id="25341-151">See Cassandra documentation at [Configuring for Consistency](http://www.datastax.com/documentation/cassandra/2.0/cassandra/dml/dml_config_consistency_c.html) for consistency details and hello formula for quorum computation.</span></span>

<span data-ttu-id="25341-152">Cassandra kétféle adatok integritásának modellek – konzisztencia és a végleges konzisztencia; hello replikációs tényező és Konzisztenciaszint együtt meghatározzák, ha hello adatok lesz konzisztens, amint egy írási művelet befejeződik, vagy idővel konzisztenssé lesz.</span><span class="sxs-lookup"><span data-stu-id="25341-152">Cassandra supports two types of data integrity models – Consistency and Eventual Consistency; hello Replication Factor and Consistency Level will together determine if hello data will be consistent as soon as a write operation is complete or it will be eventually consistent.</span></span> <span data-ttu-id="25341-153">Például KVÓRUM megadó Konzisztenciaszint mindig lesz hello biztosítja az adatok konzisztencia során minden konzisztencia szint alatt szükséges tooattain megírva replikák toobe hello száma, hogy idővel konzisztenssé adatok eredményezi KVÓRUM (pl. egy).</span><span class="sxs-lookup"><span data-stu-id="25341-153">For example, specifying QUORUM as hello Consistency Level will always ensures data Consistency while any consistency level, below hello number of replicas toobe written as needed tooattain QUORUM (e.g. ONE) results in data being eventually consistent.</span></span>

<span data-ttu-id="25341-154">3-KVÓRUM replikációs tényezővel a fent látható hello 8 csomópontos fürt (2 csomópontok vannak olvasása vagy írása konzisztencia) olvasási/írási konzisztenciaszint, hibatűrését hello elméleti megszűnését hello legtöbb 1 csomópont egy replikációs csoport hello alkalmazás indítása előtt: hello hiba észre.</span><span class="sxs-lookup"><span data-stu-id="25341-154">hello 8-node cluster shown above, with a replication factor of 3 and QUORUM (2 nodes are read or written for consistency) read/write consistency level, can survive hello theoretical loss of at hello most 1 node per replication group before hello application start noticing hello failure.</span></span> <span data-ttu-id="25341-155">A parancs feltételezi, hogy minden hello kulcs szóközt kell jól kiegyensúlyozott olvasási/írási kérések.</span><span class="sxs-lookup"><span data-stu-id="25341-155">This assumes that all hello key spaces have well balanced read/write requests.</span></span>  <span data-ttu-id="25341-156">Az alábbiakban hello hello paraméterek telepített hello fürt használjuk:</span><span class="sxs-lookup"><span data-stu-id="25341-156">hello following are hello parameters we will use for hello deployed cluster:</span></span>

<span data-ttu-id="25341-157">Egyetlen régión Cassandra fürtkonfiguráció:</span><span class="sxs-lookup"><span data-stu-id="25341-157">Single region Cassandra cluster configuration:</span></span>

| <span data-ttu-id="25341-158">Fürt paraméter</span><span class="sxs-lookup"><span data-stu-id="25341-158">Cluster Parameter</span></span> | <span data-ttu-id="25341-159">Érték</span><span class="sxs-lookup"><span data-stu-id="25341-159">Value</span></span> | <span data-ttu-id="25341-160">Megjegyzések</span><span class="sxs-lookup"><span data-stu-id="25341-160">Remarks</span></span> |
| --- | --- | --- |
| <span data-ttu-id="25341-161">(N) csomópontok száma</span><span class="sxs-lookup"><span data-stu-id="25341-161">Number of Nodes (N)</span></span> |<span data-ttu-id="25341-162">8</span><span class="sxs-lookup"><span data-stu-id="25341-162">8</span></span> |<span data-ttu-id="25341-163">Hello fürtben található csomópontok száma</span><span class="sxs-lookup"><span data-stu-id="25341-163">Total number of nodes in hello cluster</span></span> |
| <span data-ttu-id="25341-164">Replikációs tényező (RF)</span><span class="sxs-lookup"><span data-stu-id="25341-164">Replication Factor (RF)</span></span> |<span data-ttu-id="25341-165">3</span><span class="sxs-lookup"><span data-stu-id="25341-165">3</span></span> |<span data-ttu-id="25341-166">Adott sor replikák száma</span><span class="sxs-lookup"><span data-stu-id="25341-166">Number of replicas of a given row</span></span> |
| <span data-ttu-id="25341-167">Konzisztenciaszint (írás)</span><span class="sxs-lookup"><span data-stu-id="25341-167">Consistency Level (Write)</span></span> |<span data-ttu-id="25341-168">QUORUM[(RF/2) +1) = 2] hello eredmény hello a képlet lefelé kerekíti</span><span class="sxs-lookup"><span data-stu-id="25341-168">QUORUM[(RF/2) +1) = 2] hello result of hello formula is rounded down</span></span> |<span data-ttu-id="25341-169">Írja a hello legtöbb 2 replikával hello válasz toohello hívó elküldése előtt 3. a replika idővel konzisztenssé módon írása.</span><span class="sxs-lookup"><span data-stu-id="25341-169">Writes at hello most 2 replicas before hello response is sent toohello caller; 3rd replica is written in an eventually consistent manner.</span></span> |
| <span data-ttu-id="25341-170">Konzisztenciaszint (olvasás)</span><span class="sxs-lookup"><span data-stu-id="25341-170">Consistency Level (Read)</span></span> |<span data-ttu-id="25341-171">KVÓRUM [(RF/2) + 1 = 2] hello képlet hello eredményét lefelé kerekíti</span><span class="sxs-lookup"><span data-stu-id="25341-171">QUORUM [(RF/2) +1= 2] hello result of hello formula is rounded down</span></span> |<span data-ttu-id="25341-172">Beolvassa a 2-replikával válasz toohello hívó elküldése előtt.</span><span class="sxs-lookup"><span data-stu-id="25341-172">Reads 2 replicas before sending response toohello caller.</span></span> |
| <span data-ttu-id="25341-173">Replikációs stratégia</span><span class="sxs-lookup"><span data-stu-id="25341-173">Replication Strategy</span></span> |<span data-ttu-id="25341-174">NetworkTopologyStrategy lásd [adatreplikáció](http://www.datastax.com/documentation/cassandra/2.0/cassandra/architecture/architectureDataDistributeReplication_c.html) Cassandra dokumentációjában talál további információt a</span><span class="sxs-lookup"><span data-stu-id="25341-174">NetworkTopologyStrategy see [Data Replication](http://www.datastax.com/documentation/cassandra/2.0/cassandra/architecture/architectureDataDistributeReplication_c.html) in Cassandra documentation for more information</span></span> |<span data-ttu-id="25341-175">Hello telepítési topológia megértette és replikák helyezi a csomóponton, hogy az összes hello replika nem végül a hello azonos állvány</span><span class="sxs-lookup"><span data-stu-id="25341-175">Understands hello deployment topology and places replicas on nodes so that all hello replicas don’t end up on hello same rack</span></span> |
| <span data-ttu-id="25341-176">Snitch</span><span class="sxs-lookup"><span data-stu-id="25341-176">Snitch</span></span> |<span data-ttu-id="25341-177">Lásd a GossipingPropertyFileSnitch [Snitches](http://www.datastax.com/documentation/cassandra/2.0/cassandra/architecture/architectureSnitchesAbout_c.html) Cassandra dokumentációjában talál további információt a</span><span class="sxs-lookup"><span data-stu-id="25341-177">GossipingPropertyFileSnitch see [Snitches](http://www.datastax.com/documentation/cassandra/2.0/cassandra/architecture/architectureSnitchesAbout_c.html) in Cassandra documentation for more information</span></span> |<span data-ttu-id="25341-178">NetworkTopologyStrategy snitch toounderstand hello topológia egy fogalom használja.</span><span class="sxs-lookup"><span data-stu-id="25341-178">NetworkTopologyStrategy uses a concept of snitch toounderstand hello topology.</span></span> <span data-ttu-id="25341-179">GossipingPropertyFileSnitch a minden egyes csomópont toodata center és állvány leképezésekor nagyobb ellenőrzést biztosít.</span><span class="sxs-lookup"><span data-stu-id="25341-179">GossipingPropertyFileSnitch gives better control in mapping each node toodata center and rack.</span></span> <span data-ttu-id="25341-180">hello fürt pletykákat toopropagate ezt az információt használja.</span><span class="sxs-lookup"><span data-stu-id="25341-180">hello cluster then uses gossip toopropagate this information.</span></span> <span data-ttu-id="25341-181">Ez az jóval egyszerűbbé válik a dinamikus IP beállítás relatív tooPropertyFileSnitch</span><span class="sxs-lookup"><span data-stu-id="25341-181">This is much simpler in dynamic IP setting relative tooPropertyFileSnitch</span></span> |

<span data-ttu-id="25341-182">**Cassandra fürt Azure szempontjai:** Microsoft Azure virtuális gépek funkció Azure Blob Storage tárolót használja a lemez megőrzéséhez; Az Azure Storage minden lemez a magas tartósság 3 replikák menti.</span><span class="sxs-lookup"><span data-stu-id="25341-182">**Azure Considerations for Cassandra Cluster:** Microsoft Azure Virtual Machines capability uses Azure Blob storage for disk persistence; Azure Storage saves 3 replicas of each disk for high durability.</span></span> <span data-ttu-id="25341-183">Ez azt jelenti, hogy minden egyes soraiban levő adatok, a Cassandra táblába 3 replikák már tárolja, és ezért adatkonzisztencia van már hozott megvagyunk akkor is, ha hello replikációs tényező (RF) 1.</span><span class="sxs-lookup"><span data-stu-id="25341-183">That means each row of data inserted into a Cassandra table is already stored in 3 replicas and hence data consistency is already taken care of even if hello Replication Factor (RF) is 1.</span></span> <span data-ttu-id="25341-184">hello fő problémája replikációs tényező 1 folyamatban, hogy az alkalmazás hello Leállás következik, még akkor is, ha egy önálló Cassandra csomópont meghibásodik.</span><span class="sxs-lookup"><span data-stu-id="25341-184">hello main problem with Replication Factor being 1 is that hello application will experience downtime even if a single Cassandra node fails.</span></span> <span data-ttu-id="25341-185">Azonban ha egy csomópont le a hello problémákat (például a hardver, a szoftver rendszerhibák) ismeri fel az Azure Fabric Controller, az kiépíti a hely használatával új csomópontjának azonos tárolóeszközöket hello.</span><span class="sxs-lookup"><span data-stu-id="25341-185">However, if a node is down for hello problems (e.g. hardware, system software failures) recognized by Azure Fabric Controller, it will provision a new node in its place using hello same storage drives.</span></span> <span data-ttu-id="25341-186">Kiépítés egy új csomópont tooreplace hello régi egy eltarthat néhány percig.</span><span class="sxs-lookup"><span data-stu-id="25341-186">Provisioning a new node tooreplace hello old one may take a few minutes.</span></span>  <span data-ttu-id="25341-187">Tervezett karbantartás tevékenységek, például a vendég operációs rendszer módosításokat, hasonlóképpen Cassandra frissíti, és alkalmazás Azure Fabric Controller hajtja végre a működés közbeni frissítés hello csomópontok hello fürtben.</span><span class="sxs-lookup"><span data-stu-id="25341-187">Similarly for planned maintenance activities like guest OS changes, Cassandra upgrades and application changes Azure Fabric Controller performs rolling upgrades of hello nodes in hello cluster.</span></span>  <span data-ttu-id="25341-188">Működés közbeni frissítés is is igénybe vehet néhány csomópont le egyszerre, és ezért hello fürt problémákat tapasztalhat a néhány partíciók rövid idejű leállást.</span><span class="sxs-lookup"><span data-stu-id="25341-188">Rolling upgrades also may take down a few nodes at a time and hence hello cluster may experience brief downtime for a few partitions.</span></span> <span data-ttu-id="25341-189">Hello adatok azonban nem lesznek toohello beépített Azure adattároló redundanciája, amely miatt megszakadt.</span><span class="sxs-lookup"><span data-stu-id="25341-189">However, hello data will not be lost due toohello built-in Azure Storage redundancy.</span></span>  

<span data-ttu-id="25341-190">A rendszerek, amelyek nem igényelnek magas rendelkezésre állású tooAzure telepített (pl. körülbelül 99,9 amely egyenértékű too8.76 óra/év; lásd: [magas rendelkezésre állású](http://en.wikipedia.org/wiki/High_availability) részletek) rendelkező RF képes toorun esetleg = 1 és Konzisztenciaszint = egy.</span><span class="sxs-lookup"><span data-stu-id="25341-190">For systems deployed tooAzure that doesn’t require high availability (e.g. around 99.9 which is equivalent too8.76 hrs/year; see [High Availability](http://en.wikipedia.org/wiki/High_availability) for details) you may be able toorun with RF=1 and Consistency Level=ONE.</span></span>  <span data-ttu-id="25341-191">A magas rendelkezésre állású KÖVETELMÉNYŰ RF alkalmazások = 3 és Konzisztenciaszint = KVÓRUM hello hello csomópontok egy hello replikák közül az egyik állásidő lesz működését.</span><span class="sxs-lookup"><span data-stu-id="25341-191">For applications with high availability requirements, RF=3 and Consistency Level=QUORUM will tolerate hello down time of one of hello nodes one of hello replicas.</span></span> <span data-ttu-id="25341-192">RF = 1, a hagyományos telepítések (pl. a helyszíni) toohello esetleges adatvesztés eredő problémák, mint például a lemezek meghibásodása miatt nem használható.</span><span class="sxs-lookup"><span data-stu-id="25341-192">RF=1 in traditional deployments (e.g. on-premises) can’t be used due toohello possible data loss resulting from problems like disk failures.</span></span>   

## <a name="multi-region-deployment"></a><span data-ttu-id="25341-193">Több területi központi telepítés</span><span class="sxs-lookup"><span data-stu-id="25341-193">Multi-region Deployment</span></span>
<span data-ttu-id="25341-194">Bármely külső tooling Cassandra tartozó adatok-center-kompatibilis replikációs és konzisztencia-modell segítségével hello több területi telepítés nélkül hello hello kezdő verzióról a fent leírt van szükség.</span><span class="sxs-lookup"><span data-stu-id="25341-194">Cassandra’s data-center-aware replication and consistency model described above helps with hello multi-region deployment out of hello box without hello need for any external tooling.</span></span> <span data-ttu-id="25341-195">Ez eltér meglehetősen hello hagyományos, relációs adatbázisok ahol hello beállítása az adatbázis-tükrözésre több főkiszolgálós írások elég bonyolult lehet.</span><span class="sxs-lookup"><span data-stu-id="25341-195">This is quite different from hello traditional relational databases where hello setup for database mirroring for multi-master writes can be quite complex.</span></span> <span data-ttu-id="25341-196">Állítson be több régióban Cassandra hello használati forgatókönyvei többek között a következő hello is segítséget nyújt:</span><span class="sxs-lookup"><span data-stu-id="25341-196">Cassandra in a multi-region set up can help with hello usage scenarios including hello following:</span></span>

<span data-ttu-id="25341-197">**Közelségi kapcsolat alapú központi telepítés:** több-bérlős alkalmazásokhoz, és törölje a jelet a bérlő felhasználók-az-régió, is származott, alacsony késleltetésű hello több területi fürt által.</span><span class="sxs-lookup"><span data-stu-id="25341-197">**Proximity based deployment:** Multi-tenant applications, with clear mapping of tenant users -to-region, can be benefited by hello multi-region cluster’s low latencies.</span></span> <span data-ttu-id="25341-198">Például egy tanulási felügyeleti rendszerek oktatási intézményeknél a az USA keleti régiója, és az USA nyugati régiója régiók tooserve hello megfelelő kampuszok az elosztott fürtök telepítése tranzakciós, továbbá az elemzés.</span><span class="sxs-lookup"><span data-stu-id="25341-198">For example a learning management systems for educational institutions can deploy a distributed cluster in East US and West US regions tooserve hello respective campuses for transactional as well as analytics.</span></span> <span data-ttu-id="25341-199">hello adatok lehetnek helyileg konzisztens hello idő olvasása és írása, és idővel konzisztenssé mindkét hello régiók között.</span><span class="sxs-lookup"><span data-stu-id="25341-199">hello data can be locally consistent at hello time reads and writes and can be eventually consistent across both hello regions.</span></span> <span data-ttu-id="25341-200">További példák mint az adathordozó terjesztési, elektronikus kereskedelmi és semmit, és koncentrált földrajzi felhasználói alap látja, hogy egy megfelelő használati eset a központi telepítési modell.</span><span class="sxs-lookup"><span data-stu-id="25341-200">There are other examples like media distribution, e-commerce and anything and everything that serves geo concentrated user base is a good use case for this deployment model.</span></span>

<span data-ttu-id="25341-201">**Magas rendelkezésre állás:** redundancia szoftverek és hardverek magas rendelkezésre állás elérése kulcsfontosságú tényező; a részleteket lásd a Microsoft Azure épület megbízható a felhőalapú rendszerek.</span><span class="sxs-lookup"><span data-stu-id="25341-201">**High Availability:** Redundancy is a key factor in attaining high availability of software and hardware; see Building Reliable Cloud Systems on Microsoft Azure for details.</span></span> <span data-ttu-id="25341-202">A Microsoft Azure-hello csak megbízható igaz redundancia elérésének módja több területi fürt üzembe helyezésével.</span><span class="sxs-lookup"><span data-stu-id="25341-202">On Microsoft Azure, hello only reliable way of achieving true redundancy is by deploying a multi-region cluster.</span></span> <span data-ttu-id="25341-203">Egy aktív-aktív vagy aktív-passzív módban alkalmazások telepíthetők, és hello régiók egyikéhez sem nem működik, ha Azure Traffic Manager irányíthatja a forgalmat toohello aktív terület.</span><span class="sxs-lookup"><span data-stu-id="25341-203">Applications can be deployed in an active-active or active-passive mode and if one of hello regions is down, Azure Traffic Manager can redirect traffic toohello active region.</span></span>  <span data-ttu-id="25341-204">Hello egyetlen régión központi telepítésére, ha hello rendelkezésre állás 99,9, a két-régió központi telepítés el tud érni hello képlettel kiszámított 99.9999 a rendelkezésre állási: (1-(1-0.999) * (1-0.999)) * 100); Lásd a dokumentum részletes fent hello.</span><span class="sxs-lookup"><span data-stu-id="25341-204">With hello single region deployment, if hello availability is 99.9, a two-region deployment can attain an availability of 99.9999 computed by hello formula: (1-(1-0.999) * (1-0.999))*100); see hello above paper for details.</span></span>

<span data-ttu-id="25341-205">**Vész-helyreállítási:** több területi Cassandra fürt, ha megfelelően, is képes elviselni katasztrofális data center kimaradások esetén.</span><span class="sxs-lookup"><span data-stu-id="25341-205">**Disaster Recovery:** Multi-region Cassandra cluster, if properly designed, can withstand catastrophic data center outages.</span></span> <span data-ttu-id="25341-206">Ha egy régió nem működik, hello központilag telepített alkalmazás tooother régiók indításához hello végfelhasználók szolgáltató.</span><span class="sxs-lookup"><span data-stu-id="25341-206">If one region is down, hello application deployed tooother regions can start serving hello end users.</span></span> <span data-ttu-id="25341-207">Bármely más üzleti folytonossági megvalósításokhoz, például a hello alkalmazásnak hello adatok hello aszinkron feldolgozási eredő adatvesztést a hibatűrő toobe.</span><span class="sxs-lookup"><span data-stu-id="25341-207">Like any other business continuity implementations, hello application has toobe tolerant for some data loss resulting from hello data in hello asynchronous pipeline.</span></span> <span data-ttu-id="25341-208">Cassandra azonban hello helyreállítási sokkal zavartalanabbá, mint a hagyományos adatbázis helyreállítási folyamatok által igénybe vett hello idő.</span><span class="sxs-lookup"><span data-stu-id="25341-208">However, Cassandra makes hello recovery much swifter than hello time taken by traditional database recovery processes.</span></span> <span data-ttu-id="25341-209">2. ábrán minden régióban hello tipikus több régióban üzembe helyezési modellben a nyolc csomópont látható.</span><span class="sxs-lookup"><span data-stu-id="25341-209">Figure 2 shows hello typical multi-region deployment model with eight nodes in each region.</span></span> <span data-ttu-id="25341-210">Mindkét régiók a következők tükör lemezképeket minden más hello azonos szimmetriasíkjához; valós tervek hello munkaterhelésének típusát (pl. tranzakciós vagy analitikai), a helyreállítási Időkorlát, a RTO, a adatkonzisztenciát és a rendelkezésre állási követelményektől függenek.</span><span class="sxs-lookup"><span data-stu-id="25341-210">Both regions are mirror images of each other for hello same of symmetry; real world designs depend on hello workload type (e.g. transactional or analytical), RPO, RTO, data consistency and availability requirements.</span></span>

![Több régióban központi telepítés](./media/cassandra-nodejs/cassandra-linux2.png)

<span data-ttu-id="25341-212">2. ábra: Több területi Cassandra központi telepítés</span><span class="sxs-lookup"><span data-stu-id="25341-212">Figure 2: Multi-region Cassandra deployment</span></span>

### <a name="network-integration"></a><span data-ttu-id="25341-213">Hálózati integráció</span><span class="sxs-lookup"><span data-stu-id="25341-213">Network Integration</span></span>
<span data-ttu-id="25341-214">Beállítja a virtuális gépek két régiókban található telepített tooprivate hálózatok egymáshoz VPN-alagúton használatával kommunikál.</span><span class="sxs-lookup"><span data-stu-id="25341-214">Sets of virtual machines deployed tooprivate networks located on two regions communicates with each other using a VPN tunnel.</span></span> <span data-ttu-id="25341-215">hello VPN-alagút két szoftver átjáró hello hálózati telepítési folyamat során létesített kapcsolatot.</span><span class="sxs-lookup"><span data-stu-id="25341-215">hello VPN tunnel connects two software gateways provisioned during hello network deployment process.</span></span> <span data-ttu-id="25341-216">Mindkét memóriaterületnél hasonló hálózati architektúra szempontjából "web" és "data" alhálózat; Az Azure hálózatkezelés lehetővé teszi, hogy a lehető legtöbb alhálózatok igény szerint hello létrehozása, és alkalmazni a hozzáférés-vezérlési listákat, igényei szerint hálózati biztonság.</span><span class="sxs-lookup"><span data-stu-id="25341-216">Both regions have similar network architecture in terms of “web” and “data” subnets; Azure networking allows hello creation of as many subnets as needed and apply ACLs as needed by network security.</span></span> <span data-ttu-id="25341-217">Hello fürtjének topológiája tervezésekor többek adatok center kommunikációs késés és hello gazdasági hatása hello hálózati forgalmat kell toobe számít.</span><span class="sxs-lookup"><span data-stu-id="25341-217">While designing hello cluster topology inter data center communication latency and hello economic impact of hello network traffic need toobe considered.</span></span>

### <a name="data-consistency-for-multi-data-center-deployment"></a><span data-ttu-id="25341-218">Adatok konzisztenciájának több adatközpont központi telepítéshez</span><span class="sxs-lookup"><span data-stu-id="25341-218">Data Consistency for Multi-Data Center Deployment</span></span>
<span data-ttu-id="25341-219">Az elosztott központi telepítések kell toobe tisztában hello fürt topológia gyakorolt átviteli sebesség és a magas rendelkezésre állású legyen.</span><span class="sxs-lookup"><span data-stu-id="25341-219">Distributed deployments need toobe aware of hello cluster topology impact on throughput and high availability.</span></span> <span data-ttu-id="25341-220">hello RF és Konzisztenciaszint kell toobe, ilyen módon, amely a kvórum hello kijelölt összes hello adatközpontok hello rendelkezésre állását sem függ.</span><span class="sxs-lookup"><span data-stu-id="25341-220">hello RF and Consistency Level need toobe selected in such way that hello quorum doesn’t depend on hello availability of all hello data centers.</span></span>
<span data-ttu-id="25341-221">A rendszer, amelyet a magas konzisztencia, a LOCAL_QUORUM konzisztenciaszint (az olvasási és írási) fog győződjön meg arról, hogy hello helyi beolvassa és írási műveletek teljesülnek a helyi hello csomópontok, adatok replikálása aszinkron módon történik toohello távoli adatközpontokban.</span><span class="sxs-lookup"><span data-stu-id="25341-221">For a system that needs high consistency, a LOCAL_QUORUM for consistency level (for reads and writes) will make sure that hello local reads and writes are satisfied from hello local nodes while data is replicated asynchronously toohello remote data centers.</span></span>  <span data-ttu-id="25341-222">2. táblázat hello leírt hello több területi fürt részletes Microsoft Word hello konfiguráció összegzése látható.</span><span class="sxs-lookup"><span data-stu-id="25341-222">Table 2 summarizes hello configuration details for hello multi-region cluster outlined later in hello write up.</span></span>

<span data-ttu-id="25341-223">**A két-régió Cassandra fürtkonfiguráció**</span><span class="sxs-lookup"><span data-stu-id="25341-223">**Two-region Cassandra cluster configuration**</span></span>

| <span data-ttu-id="25341-224">Fürt paraméter</span><span class="sxs-lookup"><span data-stu-id="25341-224">Cluster Parameter</span></span> | <span data-ttu-id="25341-225">Érték</span><span class="sxs-lookup"><span data-stu-id="25341-225">Value</span></span> | <span data-ttu-id="25341-226">Megjegyzések</span><span class="sxs-lookup"><span data-stu-id="25341-226">Remarks</span></span> |
| --- | --- | --- |
| <span data-ttu-id="25341-227">(N) csomópontok száma</span><span class="sxs-lookup"><span data-stu-id="25341-227">Number of Nodes (N)</span></span> |<span data-ttu-id="25341-228">8 + 8</span><span class="sxs-lookup"><span data-stu-id="25341-228">8 + 8</span></span> |<span data-ttu-id="25341-229">Hello fürtben található csomópontok száma</span><span class="sxs-lookup"><span data-stu-id="25341-229">Total number of nodes in hello cluster</span></span> |
| <span data-ttu-id="25341-230">Replikációs tényező (RF)</span><span class="sxs-lookup"><span data-stu-id="25341-230">Replication Factor (RF)</span></span> |<span data-ttu-id="25341-231">3</span><span class="sxs-lookup"><span data-stu-id="25341-231">3</span></span> |<span data-ttu-id="25341-232">Adott sor replikák száma</span><span class="sxs-lookup"><span data-stu-id="25341-232">Number of replicas of a given row</span></span> |
| <span data-ttu-id="25341-233">Konzisztenciaszint (írás)</span><span class="sxs-lookup"><span data-stu-id="25341-233">Consistency Level (Write)</span></span> |<span data-ttu-id="25341-234">LOCAL_QUORUM [(sum(RF)/2) +1) = 4] hello képlet hello eredményét lefelé kerekíti</span><span class="sxs-lookup"><span data-stu-id="25341-234">LOCAL_QUORUM [(sum(RF)/2) +1) = 4] hello result of hello formula is rounded down</span></span> |<span data-ttu-id="25341-235">2 csomópontok lesz írva toohello első adatközpont szinkron módon történik; hello további 2 csomópontok kvórum szükség lesz írva aszinkron módon toohello 2. az Adatközpont.</span><span class="sxs-lookup"><span data-stu-id="25341-235">2 nodes will be written toohello first data center synchronously; hello additional 2 nodes needed for quorum will be written asynchronously toohello 2nd data center.</span></span> |
| <span data-ttu-id="25341-236">Konzisztenciaszint (olvasás)</span><span class="sxs-lookup"><span data-stu-id="25341-236">Consistency Level (Read)</span></span> |<span data-ttu-id="25341-237">LOCAL_QUORUM ((RF/2) + 1) = 2 hello képlet hello eredményét lefelé kerekíti</span><span class="sxs-lookup"><span data-stu-id="25341-237">LOCAL_QUORUM ((RF/2) +1) = 2 hello result of hello formula is rounded down</span></span> |<span data-ttu-id="25341-238">Olvasási kérések teljesülnek a csak egy régió tartozik; 2 csomópontja hátsó toohello ügyfél hello válasz elküldése előtt olvasható.</span><span class="sxs-lookup"><span data-stu-id="25341-238">Read requests are satisfied from only one region; 2 nodes are read before hello response is sent back toohello client.</span></span> |
| <span data-ttu-id="25341-239">Replikációs stratégia</span><span class="sxs-lookup"><span data-stu-id="25341-239">Replication Strategy</span></span> |<span data-ttu-id="25341-240">NetworkTopologyStrategy lásd [adatreplikáció](http://www.datastax.com/documentation/cassandra/2.0/cassandra/architecture/architectureDataDistributeReplication_c.html) Cassandra dokumentációjában talál további információt a</span><span class="sxs-lookup"><span data-stu-id="25341-240">NetworkTopologyStrategy see [Data Replication](http://www.datastax.com/documentation/cassandra/2.0/cassandra/architecture/architectureDataDistributeReplication_c.html) in Cassandra documentation for more information</span></span> |<span data-ttu-id="25341-241">Hello telepítési topológia megértette és replikák helyezi a csomóponton, hogy az összes hello replika nem végül a hello azonos állvány</span><span class="sxs-lookup"><span data-stu-id="25341-241">Understands hello deployment topology and places replicas on nodes so that all hello replicas don’t end up on hello same rack</span></span> |
| <span data-ttu-id="25341-242">Snitch</span><span class="sxs-lookup"><span data-stu-id="25341-242">Snitch</span></span> |<span data-ttu-id="25341-243">Lásd a GossipingPropertyFileSnitch [Snitches](http://www.datastax.com/documentation/cassandra/2.0/cassandra/architecture/architectureSnitchesAbout_c.html) Cassandra dokumentációjában talál további információt a</span><span class="sxs-lookup"><span data-stu-id="25341-243">GossipingPropertyFileSnitch see [Snitches](http://www.datastax.com/documentation/cassandra/2.0/cassandra/architecture/architectureSnitchesAbout_c.html) in Cassandra documentation for more information</span></span> |<span data-ttu-id="25341-244">NetworkTopologyStrategy snitch toounderstand hello topológia egy fogalom használja.</span><span class="sxs-lookup"><span data-stu-id="25341-244">NetworkTopologyStrategy uses a concept of snitch toounderstand hello topology.</span></span> <span data-ttu-id="25341-245">GossipingPropertyFileSnitch a minden egyes csomópont toodata center és állvány leképezésekor nagyobb ellenőrzést biztosít.</span><span class="sxs-lookup"><span data-stu-id="25341-245">GossipingPropertyFileSnitch gives better control in mapping each node toodata center and rack.</span></span> <span data-ttu-id="25341-246">hello fürt pletykákat toopropagate ezt az információt használja.</span><span class="sxs-lookup"><span data-stu-id="25341-246">hello cluster then uses gossip toopropagate this information.</span></span> <span data-ttu-id="25341-247">Ez az jóval egyszerűbbé válik a dinamikus IP beállítás relatív tooPropertyFileSnitch</span><span class="sxs-lookup"><span data-stu-id="25341-247">This is much simpler in dynamic IP setting relative tooPropertyFileSnitch</span></span> |

## <a name="hello-software-configuration"></a><span data-ttu-id="25341-248">hello SZOFTVERKONFIGURÁCIÓJÁNAK összeállítása</span><span class="sxs-lookup"><span data-stu-id="25341-248">hello SOFTWARE CONFIGURATION</span></span>
<span data-ttu-id="25341-249">a következő szoftververziók hello hello központi telepítése során használhatók:</span><span class="sxs-lookup"><span data-stu-id="25341-249">hello following software versions are used during hello deployment:</span></span>

<table>
<tr><th><span data-ttu-id="25341-250">Szoftver</span><span class="sxs-lookup"><span data-stu-id="25341-250">Software</span></span></th><th><span data-ttu-id="25341-251">Forrás</span><span class="sxs-lookup"><span data-stu-id="25341-251">Source</span></span></th><th><span data-ttu-id="25341-252">Verzió</span><span class="sxs-lookup"><span data-stu-id="25341-252">Version</span></span></th></tr>
<tr><td><span data-ttu-id="25341-253">JRE</span><span class="sxs-lookup"><span data-stu-id="25341-253">JRE</span></span>    </td><td><span data-ttu-id="25341-254">[8 JRE](http://www.oracle.com/technetwork/java/javase/downloads/server-jre8-downloads-2133154.html) </span><span class="sxs-lookup"><span data-stu-id="25341-254">[JRE 8](http://www.oracle.com/technetwork/java/javase/downloads/server-jre8-downloads-2133154.html) </span></span></td><td><span data-ttu-id="25341-255">8U5</span><span class="sxs-lookup"><span data-stu-id="25341-255">8U5</span></span></td></tr>
<tr><td><span data-ttu-id="25341-256">JNA</span><span class="sxs-lookup"><span data-stu-id="25341-256">JNA</span></span>    </td><td><span data-ttu-id="25341-257">[JNA](https://github.com/twall/jna) </span><span class="sxs-lookup"><span data-stu-id="25341-257">[JNA](https://github.com/twall/jna) </span></span></td><td> <span data-ttu-id="25341-258">3.2.7</span><span class="sxs-lookup"><span data-stu-id="25341-258">3.2.7</span></span></td></tr>
<tr><td><span data-ttu-id="25341-259">Cassandra</span><span class="sxs-lookup"><span data-stu-id="25341-259">Cassandra</span></span></td><td>[<span data-ttu-id="25341-260">Apache Cassandra 2.0.8</span><span class="sxs-lookup"><span data-stu-id="25341-260">Apache Cassandra 2.0.8</span></span>](http://www.apache.org/dist/cassandra/2.0.8/apache-cassandra-2.0.8-bin.tar.gz)</td><td> <span data-ttu-id="25341-261">2.0.8</span><span class="sxs-lookup"><span data-stu-id="25341-261">2.0.8</span></span></td></tr>
<tr><td><span data-ttu-id="25341-262">Ubuntu</span><span class="sxs-lookup"><span data-stu-id="25341-262">Ubuntu</span></span>    </td><td><span data-ttu-id="25341-263">[A Microsoft Azure](https://azure.microsoft.com/) </span><span class="sxs-lookup"><span data-stu-id="25341-263">[Microsoft Azure](https://azure.microsoft.com/) </span></span></td><td><span data-ttu-id="25341-264">14.04 LTS</span><span class="sxs-lookup"><span data-stu-id="25341-264">14.04 LTS</span></span></td></tr>
</table>

<span data-ttu-id="25341-265">Az Oracle-licencet, toosimplify hello központi telepítés, az összes szükséges szoftverek toohello asztal lemezképpel hello Ubuntu sablon azt létrehozni prekurzor toohello fürtként később feltöltése hello letöltési manuális elfogadását JRE letöltésének szükséges. központi telepítés.</span><span class="sxs-lookup"><span data-stu-id="25341-265">Since downloading of JRE requires manual acceptance of Oracle license, toosimplify hello deployment, download all hello required software toohello desktop for later uploading into hello Ubuntu template image we will be creating as a precursor toohello cluster deployment.</span></span>

<span data-ttu-id="25341-266">Töltse le a fenti szoftverek hello könyvtárba, amely egy jól ismert letöltési (pl. Windows %TEMP%/downloads vagy legtöbb Linux terjesztésekről vagy Mac ~/Downloads) hello helyi számítógépen.</span><span class="sxs-lookup"><span data-stu-id="25341-266">Download hello above software into a well-known download directory (e.g. %TEMP%/downloads on Windows or ~/Downloads on most Linux distributions or Mac) on hello local computer.</span></span>

### <a name="create-ubuntu-vm"></a><span data-ttu-id="25341-267">UBUNTU VIRTUÁLIS GÉP LÉTREHOZÁSA</span><span class="sxs-lookup"><span data-stu-id="25341-267">CREATE UBUNTU VM</span></span>
<span data-ttu-id="25341-268">Ebben a lépésben hello folyamat létrehozunk Ubuntu kép hello előfeltételt jelentő szoftvereket a úgy, hogy hello lemezkép felhasználható számos Cassandra csomópont történő üzembe helyezéséhez.</span><span class="sxs-lookup"><span data-stu-id="25341-268">In this step of hello process we will create Ubuntu image with hello pre-requisite software so that hello image can be reused for provisioning several Cassandra nodes.</span></span>  

#### <a name="step-1-generate-ssh-key-pair"></a><span data-ttu-id="25341-269">1. lépés: Az SSH-kulcspárral létrehozása</span><span class="sxs-lookup"><span data-stu-id="25341-269">STEP 1: Generate SSH key pair</span></span>
<span data-ttu-id="25341-270">Azure egy nyilvános kulcsot, amely PEM vagy DER kódolású idő kiépítés hello: X509 kér.</span><span class="sxs-lookup"><span data-stu-id="25341-270">Azure needs an X509 public key that is either PEM or DER encoded at hello provisioning time.</span></span> <span data-ttu-id="25341-271">Milyen található hello utasításokat követve nyilvános/titkos kulcspárt létre tooUse SSH Linux Azure-on.</span><span class="sxs-lookup"><span data-stu-id="25341-271">Generate a public/private key pair using hello instructions located at How tooUse SSH with Linux on Azure.</span></span> <span data-ttu-id="25341-272">Ha azt tervezi, toouse putty.exe Windows vagy Linux SSH-ügyfélként, hogy tooconvert hello PEM kódolású RSA titkos kulcs tooPPK formátum használatával puttygen.exe; hello utasításokat a fenti weblap hello találhatók.</span><span class="sxs-lookup"><span data-stu-id="25341-272">If you plan toouse putty.exe as an SSH client either on Windows or Linux, you have tooconvert hello PEM encoded RSA private key tooPPK format using puttygen.exe; hello instructions for this can be found in hello above web page.</span></span>

#### <a name="step-2-create-ubuntu-template-vm"></a><span data-ttu-id="25341-273">2. lépés: Sablon Ubuntu virtuális gép</span><span class="sxs-lookup"><span data-stu-id="25341-273">STEP 2: Create Ubuntu template VM</span></span>
<span data-ttu-id="25341-274">toocreate hello sablon virtuális Gépet, jelentkezzen be hello Azure klasszikus portál és -felhasználási hello a következő feladatütemezési: kattintson az új, számítási, virtuális gép, FROM GYŰJTEMÉNYE, UBUNTU, Ubuntu Server 14.04 LTS, majd a hello jobbra mutató nyílra.</span><span class="sxs-lookup"><span data-stu-id="25341-274">toocreate hello template VM, log into hello Azure classic portal and use hello following sequence: Click NEW, COMPUTE, VIRTUAL MACHINE, FROM GALLERY, UBUNTU, Ubuntu Server 14.04 LTS, and then click hello right arrow.</span></span> <span data-ttu-id="25341-275">Egy oktatóanyag, amely leírja, hogyan toocreate Linux virtuális gép: hozzon létre egy virtuális gép futó Linux.</span><span class="sxs-lookup"><span data-stu-id="25341-275">For a tutorial that describes how toocreate a Linux VM, see Create a Virtual Machine Running Linux.</span></span>

<span data-ttu-id="25341-276">Adja meg a következő információ hello "virtuálisgép-konfiguráció" képernyőn #1 hello:</span><span class="sxs-lookup"><span data-stu-id="25341-276">Enter hello following information on hello “Virtual machine configuration” screen #1:</span></span>

<table>
<tr><th><span data-ttu-id="25341-277">MEZŐ NEVE</span><span class="sxs-lookup"><span data-stu-id="25341-277">FIELD NAME</span></span>              </td><td>       <span data-ttu-id="25341-278">MEZŐÉRTÉK</span><span class="sxs-lookup"><span data-stu-id="25341-278">FIELD VALUE</span></span>               </td><td>         <span data-ttu-id="25341-279">MEGJEGYZÉSEK</span><span class="sxs-lookup"><span data-stu-id="25341-279">REMARKS</span></span>                </td><tr>
<tr><td><span data-ttu-id="25341-280">VERZIÓ KIADÁSI DÁTUM</span><span class="sxs-lookup"><span data-stu-id="25341-280">VERSION RELEASE DATE</span></span>    </td><td> <span data-ttu-id="25341-281">Válassza ki a megfelelő hello legördülő dátuma</span><span class="sxs-lookup"><span data-stu-id="25341-281">Select a date from hello drop down</span></span></td><td></td><tr>
<tr><td><span data-ttu-id="25341-282">VIRTUÁLIS GÉP NEVE</span><span class="sxs-lookup"><span data-stu-id="25341-282">VIRTUAL MACHINE NAME</span></span>    </td><td> <span data-ttu-id="25341-283">esetén-sablon</span><span class="sxs-lookup"><span data-stu-id="25341-283">cass-template</span></span>                   </td><td> <span data-ttu-id="25341-284">Ez a virtuális gép hello hello állomásnevét</span><span class="sxs-lookup"><span data-stu-id="25341-284">This is hello hostname of hello VM</span></span> </td><tr>
<tr><td><span data-ttu-id="25341-285">RÉTEG</span><span class="sxs-lookup"><span data-stu-id="25341-285">TIER</span></span>                     </td><td> <span data-ttu-id="25341-286">STANDARD</span><span class="sxs-lookup"><span data-stu-id="25341-286">STANDARD</span></span>                           </td><td> <span data-ttu-id="25341-287">Hello alapértelmezett hagyja</span><span class="sxs-lookup"><span data-stu-id="25341-287">Leave hello default</span></span>              </td><tr>
<tr><td><span data-ttu-id="25341-288">MÉRET</span><span class="sxs-lookup"><span data-stu-id="25341-288">SIZE</span></span>                     </td><td> <span data-ttu-id="25341-289">A1</span><span class="sxs-lookup"><span data-stu-id="25341-289">A1</span></span>                              </td><td><span data-ttu-id="25341-290">Virtuális gép alapján hello IO válassza hello kell; erre a célra hagyja hello alapértelmezett</span><span class="sxs-lookup"><span data-stu-id="25341-290">Select hello VM based on hello IO needs; for this purpose leave hello default</span></span> </td><tr>
<tr><td> <span data-ttu-id="25341-291">ÚJ FELHASZNÁLÓ NEVE</span><span class="sxs-lookup"><span data-stu-id="25341-291">NEW USER NAME</span></span>             </td><td> <span data-ttu-id="25341-292">localadmin</span><span class="sxs-lookup"><span data-stu-id="25341-292">localadmin</span></span>                       </td><td> <span data-ttu-id="25341-293">"rendszergazda" az egyetlen foglalt felhasználónévvel Ubuntu 12. xx és után</span><span class="sxs-lookup"><span data-stu-id="25341-293">"admin" is a reserved user name in Ubuntu 12.xx and after</span></span></td><tr>
<tr><td> <span data-ttu-id="25341-294">HITELESÍTÉS</span><span class="sxs-lookup"><span data-stu-id="25341-294">AUTHENTICATION</span></span>         </td><td> <span data-ttu-id="25341-295">Jelölje be jelölőnégyzetet</span><span class="sxs-lookup"><span data-stu-id="25341-295">Click check box</span></span>                 </td><td><span data-ttu-id="25341-296">Ellenőrizze, hogy ha azt szeretné toosecure SSH-kulcs</span><span class="sxs-lookup"><span data-stu-id="25341-296">Check if you want toosecure with an SSH key</span></span> </td><tr>
<tr><td> <span data-ttu-id="25341-297">TANÚSÍTVÁNY</span><span class="sxs-lookup"><span data-stu-id="25341-297">CERTIFICATE</span></span>             </td><td> <span data-ttu-id="25341-298">hello nyilvános kulcsú tanúsítvány fájlneve</span><span class="sxs-lookup"><span data-stu-id="25341-298">file name of hello public key certificate</span></span> </td><td> <span data-ttu-id="25341-299">Korábban létrehozott hello nyilvános kulcs használata</span><span class="sxs-lookup"><span data-stu-id="25341-299">Use hello public key generated previously</span></span></td><tr>
<tr><td> <span data-ttu-id="25341-300">Új jelszó</span><span class="sxs-lookup"><span data-stu-id="25341-300">New Password</span></span>    </td><td> <span data-ttu-id="25341-301">erős jelszó</span><span class="sxs-lookup"><span data-stu-id="25341-301">strong password</span></span> </td><td> </td><tr>
<tr><td> <span data-ttu-id="25341-302">Jelszó megerősítése</span><span class="sxs-lookup"><span data-stu-id="25341-302">Confirm Password</span></span>    </td><td> <span data-ttu-id="25341-303">erős jelszó</span><span class="sxs-lookup"><span data-stu-id="25341-303">strong password</span></span> </td><td></td><tr>
</table>

<span data-ttu-id="25341-304">Adja meg a következő információ hello "virtuálisgép-konfiguráció" képernyőn #2 hello:</span><span class="sxs-lookup"><span data-stu-id="25341-304">Enter hello following information on hello “Virtual machine configuration” screen #2:</span></span>

<table>
<tr><th><span data-ttu-id="25341-305">MEZŐ NEVE</span><span class="sxs-lookup"><span data-stu-id="25341-305">FIELD NAME</span></span>             </th><th> <span data-ttu-id="25341-306">MEZŐÉRTÉK</span><span class="sxs-lookup"><span data-stu-id="25341-306">FIELD VALUE</span></span>                       </th><th> <span data-ttu-id="25341-307">MEGJEGYZÉSEK</span><span class="sxs-lookup"><span data-stu-id="25341-307">REMARKS</span></span>                                 </th></tr>
<tr><td> <span data-ttu-id="25341-308">A FELHŐALAPÚ SZOLGÁLTATÁS</span><span class="sxs-lookup"><span data-stu-id="25341-308">CLOUD SERVICE</span></span>    </td><td> <span data-ttu-id="25341-309">Új felhőalapú szolgáltatás létrehozása</span><span class="sxs-lookup"><span data-stu-id="25341-309">Create a new cloud service</span></span>    </td><td><span data-ttu-id="25341-310">Felhőszolgáltatás egy tároló számítási erőforrásokhoz, mint a virtuális gépek</span><span class="sxs-lookup"><span data-stu-id="25341-310">Cloud service is a container compute resources like virtual machines</span></span></td></tr>
<tr><td> <span data-ttu-id="25341-311">FELHŐALAPÚ SZOLGÁLTATÁS DNS-NÉV</span><span class="sxs-lookup"><span data-stu-id="25341-311">CLOUD SERVICE DNS NAME</span></span>    </td><td><span data-ttu-id="25341-312">ubuntu-template.cloudapp.net</span><span class="sxs-lookup"><span data-stu-id="25341-312">ubuntu-template.cloudapp.net</span></span>    </td><td><span data-ttu-id="25341-313">Adjon meg egy gép független terheléselosztó neve</span><span class="sxs-lookup"><span data-stu-id="25341-313">Give a machine agnostic load balancer name</span></span></td></tr>
<tr><td> <span data-ttu-id="25341-314">RÉGIÓ/AFFINITÁSCSOPORT/VIRTUÁLIS HÁLÓZAT</span><span class="sxs-lookup"><span data-stu-id="25341-314">REGION/AFFINITY GROUP/VIRTUAL NETWORK</span></span> </td><td>    <span data-ttu-id="25341-315">USA nyugati régiója</span><span class="sxs-lookup"><span data-stu-id="25341-315">West US</span></span>    </td><td> <span data-ttu-id="25341-316">Válasszon ki egy régiót, ahol a webalkalmazások hello Cassandra fürt eléréséhez</span><span class="sxs-lookup"><span data-stu-id="25341-316">Select a region from which your web applications access hello Cassandra cluster</span></span></td></tr>
<tr><td><span data-ttu-id="25341-317">TÁRFIÓK</span><span class="sxs-lookup"><span data-stu-id="25341-317">STORAGE ACCOUNT</span></span> </td><td>    <span data-ttu-id="25341-318">Használhatja az alapértelmezettet</span><span class="sxs-lookup"><span data-stu-id="25341-318">Use default</span></span>    </td><td><span data-ttu-id="25341-319">Az adott hello alapértelmezett tárfiókot vagy egy előre létrehozott tárfiók használata</span><span class="sxs-lookup"><span data-stu-id="25341-319">Use hello default storage account  or a pre-created storage account in a particular region</span></span></td></tr>
<tr><td><span data-ttu-id="25341-320">A RENDELKEZÉSRE ÁLLÁSI CSOPORT</span><span class="sxs-lookup"><span data-stu-id="25341-320">AVAILABILITY SET</span></span> </td><td>    <span data-ttu-id="25341-321">None</span><span class="sxs-lookup"><span data-stu-id="25341-321">None</span></span> </td><td>    <span data-ttu-id="25341-322">Hagyja üresen</span><span class="sxs-lookup"><span data-stu-id="25341-322">Leave it blank</span></span></td></tr>
<tr><td><span data-ttu-id="25341-323">VÉGPONTOK</span><span class="sxs-lookup"><span data-stu-id="25341-323">ENDPOINTS</span></span>    </td><td><span data-ttu-id="25341-324">Használhatja az alapértelmezettet</span><span class="sxs-lookup"><span data-stu-id="25341-324">Use default</span></span> </td><td>    <span data-ttu-id="25341-325">Hello alapértelmezett SSH-konfiguráció használata</span><span class="sxs-lookup"><span data-stu-id="25341-325">Use hello default SSH configuration</span></span> </td></tr>
</table>

<span data-ttu-id="25341-326">Kattintson a jobbra mutató nyílra hello alapértelmezett hagyja a #3 üdvözlő képernyőt, és kattintson a hello "ellenőrzés" gombra toocomplete hello virtuális gép üzembe helyezési folyamat.</span><span class="sxs-lookup"><span data-stu-id="25341-326">Click right arrow, leave hello defaults on hello screen #3 and click hello “check” button toocomplete hello VM provisioning process.</span></span> <span data-ttu-id="25341-327">Néhány perc elteltével hello virtuális gép neve "ubuntu-sablonnal hello" a "fut" állapotba kell lennie.</span><span class="sxs-lookup"><span data-stu-id="25341-327">After a few minutes, hello VM with hello name “ubuntu-template” should be in a “running” status.</span></span>

### <a name="install-hello-necessary-software"></a><span data-ttu-id="25341-328">Hello szükséges SZOFTVEREK telepítése</span><span class="sxs-lookup"><span data-stu-id="25341-328">INSTALL hello NECESSARY SOFTWARE</span></span>
#### <a name="step-1-upload-tarballs"></a><span data-ttu-id="25341-329">1. lépés: Feltöltés tarballs</span><span class="sxs-lookup"><span data-stu-id="25341-329">STEP 1: Upload tarballs</span></span>
<span data-ttu-id="25341-330">A szolgáltatáskapcsolódási pont vagy pscp, másolása hello korábban letöltött szoftverfrissítések túl ~ / letöltések directory hello parancs formátuma a következő használatával:</span><span class="sxs-lookup"><span data-stu-id="25341-330">Using scp or pscp, copy hello previously downloaded software too~/downloads directory using hello following command format:</span></span>

##### <a name="pscp-server-jre-8u5-linux-x64targz-localadminhk-cas-templatecloudappnethomelocaladmindownloadsserver-jre-8u5-linux-x64targz"></a><span data-ttu-id="25341-331">pscp kiszolgáló-jre-8u5-linux-x64.tar.gzlocaladmin@hk-cas-template.cloudapp.net:/home/localadmin/downloads/server-jre-8u5-linux-x64.tar.gz</span><span class="sxs-lookup"><span data-stu-id="25341-331">pscp server-jre-8u5-linux-x64.tar.gz localadmin@hk-cas-template.cloudapp.net:/home/localadmin/downloads/server-jre-8u5-linux-x64.tar.gz</span></span>
<span data-ttu-id="25341-332">Ismételje meg a fent parancs hello JRE is mint hello Cassandra bits.</span><span class="sxs-lookup"><span data-stu-id="25341-332">Repeat hello above command for JRE as well as for hello Cassandra bits.</span></span>

#### <a name="step-2-prepare-hello-directory-structure-and-extract-hello-archives"></a><span data-ttu-id="25341-333">2. lépés: Készítse elő a hello könyvtárszerkezetét és hello archívum kibontása</span><span class="sxs-lookup"><span data-stu-id="25341-333">STEP 2: Prepare hello directory structure and extract hello archives</span></span>
<span data-ttu-id="25341-334">Jelentkezzen be a virtuális gép hello és hello könyvtárstruktúrát létrehozása, és bontsa ki a szoftver felügyelőként hello bash parancsfájlt az alábbi:</span><span class="sxs-lookup"><span data-stu-id="25341-334">Log into hello VM and create hello directory structure and extract software as a super user using hello bash script below:</span></span>

    #!/bin/bash
    CASS_INSTALL_DIR="/opt/cassandra"
    JRE_INSTALL_DIR="/opt/java"
    CASS_DATA_DIR="/var/lib/cassandra"
    CASS_LOG_DIR="/var/log/cassandra"
    DOWNLOADS_DIR="~/downloads"
    JRE_TARBALL="server-jre-8u5-linux-x64.tar.gz"
    CASS_TARBALL="apache-cassandra-2.0.8-bin.tar.gz"
    SVC_USER="localadmin"

    RESET_ERROR=1
    MKDIR_ERROR=2

    reset_installation ()
    {
       rm -rf $CASS_INSTALL_DIR 2> /dev/null
       rm -rf $JRE_INSTALL_DIR 2> /dev/null
       rm -rf $CASS_DATA_DIR 2> /dev/null
       rm -rf $CASS_LOG_DIR 2> /dev/null
    }
    make_dir ()
    {
       if [ -z "$1" ]
       then
          echo "make_dir: invalid directory name"
          exit $MKDIR_ERROR
       fi

       if [ -d "$1" ]
       then
          echo "make_dir: directory already exists"
          exit $MKDIR_ERROR
       fi

       mkdir $1 2>/dev/null
       if [ $? != 0 ]
       then
          echo "directory creation failed"
          exit $MKDIR_ERROR
       fi
    }

    unzip()
    {
       if [ $# == 2 ]
       then
          tar xzf $1 -C $2
       else
          echo "archive error"
       fi

    }

    if [ -n "$1" ]
    then
       SVC_USER=$1
    fi

    reset_installation
    make_dir $CASS_INSTALL_DIR
    make_dir $JRE_INSTALL_DIR
    make_dir $CASS_DATA_DIR
    make_dir $CASS_LOG_DIR

    #unzip JRE and Cassandra
    unzip $HOME/downloads/$JRE_TARBALL $JRE_INSTALL_DIR
    unzip $HOME/downloads/$CASS_TARBALL $CASS_INSTALL_DIR

    #Change hello ownership toohello service credentials

    chown -R $SVC_USER:$GROUP $CASS_DATA_DIR
    chown -R $SVC_USER:$GROUP $CASS_LOG_DIR
    echo "edit /etc/profile tooadd JRE toohello PATH"
    echo "installation is complete"


<span data-ttu-id="25341-335">Ha vim ablakba be ezt a parancsfájlt, győződjön meg arról, hogy tooremove hello kocsivissza visszatérési ("\r") a következő parancs hello használata:</span><span class="sxs-lookup"><span data-stu-id="25341-335">If you paste this script into vim window, make sure tooremove hello carriage return (‘\r”) using hello following command:</span></span>

    tr -d '\r' <infile.sh >outfile.sh

#### <a name="step-3-edit-etcprofile"></a><span data-ttu-id="25341-336">3. lépés: Stb/profil szerkesztése</span><span class="sxs-lookup"><span data-stu-id="25341-336">Step 3: Edit etc/profile</span></span>
<span data-ttu-id="25341-337">Hozzáfűzendő hello következő hello végén:</span><span class="sxs-lookup"><span data-stu-id="25341-337">Append hello following at hello end:</span></span>

    JAVA_HOME=/opt/java/jdk1.8.0_05
    CASS_HOME= /opt/cassandra/apache-cassandra-2.0.8
    PATH=$PATH:$HOME/bin:$JAVA_HOME/bin:$CASS_HOME/bin
    export JAVA_HOME
    export CASS_HOME
    export PATH

#### <a name="step-4-install-jna-for-production-systems"></a><span data-ttu-id="25341-338">4. lépés: Telepítse JNA éles rendszerek esetén</span><span class="sxs-lookup"><span data-stu-id="25341-338">Step 4: Install JNA for production systems</span></span>
<span data-ttu-id="25341-339">Használjon hello következő parancsot a feladatütemezési: hello következő parancsot a telepítés jna-3.2.7.jar és jna-platform-3.2.7.jar too/usr/share.java directory sudo apt-get telepíti a java-libjna</span><span class="sxs-lookup"><span data-stu-id="25341-339">Use hello following command sequence: hello following command will install jna-3.2.7.jar and jna-platform-3.2.7.jar too/usr/share.java directory sudo apt-get install libjna-java</span></span>

<span data-ttu-id="25341-340">Hozza létre a szimbolikus csatolást $CASS_HOME/lib könyvtárban, hogy Cassandra indítási parancsfájl megtalálhassa a JAR-fájlok kivételével:</span><span class="sxs-lookup"><span data-stu-id="25341-340">Create symbolic links in $CASS_HOME/lib directory so that Cassandra startup script can find these jars:</span></span>

    ln -s /usr/share/java/jna-3.2.7.jar $CASS_HOME/lib/jna.jar

    ln -s /usr/share/java/jna-platform-3.2.7.jar $CASS_HOME/lib/jna-platform.jar

#### <a name="step-5-configure-cassandrayaml"></a><span data-ttu-id="25341-341">5. lépés: Cassandra.yaml konfigurálása</span><span class="sxs-lookup"><span data-stu-id="25341-341">Step 5: Configure cassandra.yaml</span></span>
<span data-ttu-id="25341-342">Minden virtuális gép tooreflect konfiguráció [azt fogja végeznünk ez hello tényleges kiépítése során] összes hello virtuális gép által igényelt cassandra.yaml szerkesztése:</span><span class="sxs-lookup"><span data-stu-id="25341-342">Edit cassandra.yaml on each VM tooreflect configuration needed by all hello virtual machines [we will tweak this during hello actual provisioning]:</span></span>

<table>
<tr><th><span data-ttu-id="25341-343">Mező neve</span><span class="sxs-lookup"><span data-stu-id="25341-343">Field Name</span></span>   </th><th> <span data-ttu-id="25341-344">Érték</span><span class="sxs-lookup"><span data-stu-id="25341-344">Value</span></span>  </th><th>    <span data-ttu-id="25341-345">Megjegyzések</span><span class="sxs-lookup"><span data-stu-id="25341-345">Remarks</span></span> </th></tr>
<tr><td><span data-ttu-id="25341-346">fürtnév</span><span class="sxs-lookup"><span data-stu-id="25341-346">cluster_name</span></span> </td><td>    <span data-ttu-id="25341-347">"CustomerService"</span><span class="sxs-lookup"><span data-stu-id="25341-347">“CustomerService”</span></span>    </td><td> <span data-ttu-id="25341-348">Hello nevet válasszon, amely tükrözi a központi telepítés</span><span class="sxs-lookup"><span data-stu-id="25341-348">Use hello name that reflects your deployment</span></span></td></tr>
<tr><td><span data-ttu-id="25341-349">listen_address</span><span class="sxs-lookup"><span data-stu-id="25341-349">listen_address</span></span>    </td><td><span data-ttu-id="25341-350">[hagyja üresen a mezőt]</span><span class="sxs-lookup"><span data-stu-id="25341-350">[leave it blank]</span></span>    </td><td> <span data-ttu-id="25341-351">Törölje a "localhost"</span><span class="sxs-lookup"><span data-stu-id="25341-351">Delete “localhost”</span></span> </td></tr>
<tr><td><span data-ttu-id="25341-352">rpc_addres</span><span class="sxs-lookup"><span data-stu-id="25341-352">rpc_addres</span></span>   </td><td><span data-ttu-id="25341-353">[hagyja üresen a mezőt]</span><span class="sxs-lookup"><span data-stu-id="25341-353">[leave it blank]</span></span>    </td><td> <span data-ttu-id="25341-354">Törölje a "localhost"</span><span class="sxs-lookup"><span data-stu-id="25341-354">Delete “localhost”</span></span> </td></tr>
<tr><td><span data-ttu-id="25341-355">magok</span><span class="sxs-lookup"><span data-stu-id="25341-355">seeds</span></span>    </td><td><span data-ttu-id="25341-356">"10.1.2.4, 10.1.2.6, 10.1.2.8"</span><span class="sxs-lookup"><span data-stu-id="25341-356">"10.1.2.4, 10.1.2.6, 10.1.2.8"</span></span>    </td><td><span data-ttu-id="25341-357">Összes rendszer naplólemezként jelöli magok hello IP-címek listáját.</span><span class="sxs-lookup"><span data-stu-id="25341-357">List of  all hello IP addresses which are designated as seeds.</span></span></td></tr>
<tr><td><span data-ttu-id="25341-358">endpoint_snitch</span><span class="sxs-lookup"><span data-stu-id="25341-358">endpoint_snitch</span></span> </td><td> <span data-ttu-id="25341-359">org.apache.cassandra.locator.GossipingPropertyFileSnitch</span><span class="sxs-lookup"><span data-stu-id="25341-359">org.apache.cassandra.locator.GossipingPropertyFileSnitch</span></span> </td><td> <span data-ttu-id="25341-360">Ez hello NetworkTopologyStrateg behívásakor hello adatközpontban és a virtuális gép hello hello állvány használja</span><span class="sxs-lookup"><span data-stu-id="25341-360">This is used by hello NetworkTopologyStrateg for inferring hello data center and hello rack of hello VM</span></span></td></tr>
</table>

#### <a name="step-6-capture-hello-vm-image"></a><span data-ttu-id="25341-361">6. lépés: Hello Virtuálisgép-lemezkép rögzítése</span><span class="sxs-lookup"><span data-stu-id="25341-361">Step 6: Capture hello VM image</span></span>
<span data-ttu-id="25341-362">Jelentkezzen be hello virtuális gép hello állomásnév (hk-cas-template.cloudapp.net) és hello titkos SSH-kulcsot korábban hozott létre.</span><span class="sxs-lookup"><span data-stu-id="25341-362">Log into hello virtual machine using hello hostname (hk-cas-template.cloudapp.net) and hello SSH private key previously created.</span></span> <span data-ttu-id="25341-363">Lásd: hogyan hogyan használatával toolog hello parancs ssh vagy putty.exe részletezi az Azure Linux SSH tooUse.</span><span class="sxs-lookup"><span data-stu-id="25341-363">See How tooUse SSH with Linux on Azure for details on how toolog in using hello command ssh or putty.exe.</span></span>

<span data-ttu-id="25341-364">A következő feladatütemezési műveletek toocapture hello lemezkép hello hajtható végre:</span><span class="sxs-lookup"><span data-stu-id="25341-364">Execute hello following sequence of actions toocapture hello image:</span></span>

##### <a name="1-deprovision"></a><span data-ttu-id="25341-365">1. Deprovision</span><span class="sxs-lookup"><span data-stu-id="25341-365">1. Deprovision</span></span>
<span data-ttu-id="25341-366">Hello paranccsal "sudo waagent-deprovision + felhasználói" tooremove virtuálisgép-példány egyedi adatok.</span><span class="sxs-lookup"><span data-stu-id="25341-366">Use hello command “sudo waagent –deprovision+user” tooremove Virtual Machine instance specific information.</span></span> <span data-ttu-id="25341-367">Tekintse át a vonatkozó [hogyan tooCapture Linux virtuális gépek](capture-image.md) sablonként tooUse több részletet hello lemezkép rögzítését.</span><span class="sxs-lookup"><span data-stu-id="25341-367">See for [How tooCapture a Linux Virtual Machine](capture-image.md) tooUse as a Template more details on hello image capture process.</span></span>

##### <a name="2-shutdown-hello-vm"></a><span data-ttu-id="25341-368">2: leállítási hello méretű VM</span><span class="sxs-lookup"><span data-stu-id="25341-368">2: Shutdown hello VM</span></span>
<span data-ttu-id="25341-369">Győződjön meg arról, hogy hello a virtuális gép ki van jelölve, és az alsó eszköztár hello hello LEÁLLÍTÁSI hivatkozásra.</span><span class="sxs-lookup"><span data-stu-id="25341-369">Make sure that hello virtual machine is highlighted and click hello SHUTDOWN link from hello bottom command bar.</span></span>

##### <a name="3-capture-hello-image"></a><span data-ttu-id="25341-370">3: hello lemezképet</span><span class="sxs-lookup"><span data-stu-id="25341-370">3: Capture hello image</span></span>
<span data-ttu-id="25341-371">Győződjön meg arról, hogy hello a virtuális gép ki van jelölve, és az alsó eszköztár hello hello rögzítési hivatkozásra.</span><span class="sxs-lookup"><span data-stu-id="25341-371">Make sure that hello virtual machine is highlighted and click hello CAPTURE link from hello bottom command bar.</span></span> <span data-ttu-id="25341-372">Hello következő képernyőn nevezze el egy kép (pl. hk-cas-2-08-ub-14-04-2014071), a megfelelő RENDSZERKÉP leírása, és kattintson a hello "ellenőrzés" jel toofinish hello rögzítési folyamat.</span><span class="sxs-lookup"><span data-stu-id="25341-372">In hello next screen, give an IMAGE NAME (e.g. hk-cas-2-08-ub-14-04-2014071), appropriate IMAGE DESCRIPTION, and click hello “check” mark toofinish hello CAPTURE process.</span></span>

<span data-ttu-id="25341-373">Ez eltarthat néhány másodpercig és hello kép elérhetőnek kell lennie hello kép gyűjteménye a saját LEMEZKÉPEK szakaszában.</span><span class="sxs-lookup"><span data-stu-id="25341-373">This will take a few seconds and hello image should be available in MY IMAGES section of hello image gallery.</span></span> <span data-ttu-id="25341-374">hello forrás virtuális gép automatikusan után törlődni fognak hello lemezkép rögzítése sikerült.</span><span class="sxs-lookup"><span data-stu-id="25341-374">hello source VM will be automatically deleted after hello image is successfully captured.</span></span> 

## <a name="single-region-deployment-process"></a><span data-ttu-id="25341-375">Egyetlen régión telepítési folyamata</span><span class="sxs-lookup"><span data-stu-id="25341-375">Single Region Deployment Process</span></span>
<span data-ttu-id="25341-376">**1. lépés:, Hozzon létre virtuális hálózati hello** bejelentkezni hello Azure-portálon, és hozzon létre egy virtuális hálózat (klasszikus) hello attribútumokkal hello a következő táblázatban látható.</span><span class="sxs-lookup"><span data-stu-id="25341-376">**Step 1: Create hello Virtual Network** Log into hello Azure portal and create a virtual network (classic) with hello attributes shown in hello following table.</span></span> <span data-ttu-id="25341-377">Lásd: [hozzon létre egy virtuális hálózat (klasszikus) Azure-portálon hello](../../../virtual-network/virtual-networks-create-vnet-classic-pportal.md) hello folyamat részletes leírást.</span><span class="sxs-lookup"><span data-stu-id="25341-377">See [Create a virtual network (classic) using hello Azure portal](../../../virtual-network/virtual-networks-create-vnet-classic-pportal.md) for detailed steps of hello process.</span></span>      

<table>
<tr><th><span data-ttu-id="25341-378">VM-attribútum neve</span><span class="sxs-lookup"><span data-stu-id="25341-378">VM Attribute Name</span></span></th><th><span data-ttu-id="25341-379">Érték</span><span class="sxs-lookup"><span data-stu-id="25341-379">Value</span></span></th><th><span data-ttu-id="25341-380">Megjegyzések</span><span class="sxs-lookup"><span data-stu-id="25341-380">Remarks</span></span></th></tr>
<tr><td><span data-ttu-id="25341-381">Név</span><span class="sxs-lookup"><span data-stu-id="25341-381">Name</span></span></td><td><span data-ttu-id="25341-382">vnet-esetén-nyugati-us</span><span class="sxs-lookup"><span data-stu-id="25341-382">vnet-cass-west-us</span></span></td><td></td></tr>
<tr><td><span data-ttu-id="25341-383">Régió</span><span class="sxs-lookup"><span data-stu-id="25341-383">Region</span></span></td><td><span data-ttu-id="25341-384">USA nyugati régiója</span><span class="sxs-lookup"><span data-stu-id="25341-384">West US</span></span></td><td></td></tr>
<tr><td><span data-ttu-id="25341-385">DNS-kiszolgálók</span><span class="sxs-lookup"><span data-stu-id="25341-385">DNS Servers</span></span></td><td><span data-ttu-id="25341-386">None</span><span class="sxs-lookup"><span data-stu-id="25341-386">None</span></span></td><td><span data-ttu-id="25341-387">Figyelmen kívül hagyja ezt a DNS-kiszolgáló nem használjuk</span><span class="sxs-lookup"><span data-stu-id="25341-387">Ignore this as we are not using a DNS Server</span></span></td></tr>
<tr><td><span data-ttu-id="25341-388">Címterület</span><span class="sxs-lookup"><span data-stu-id="25341-388">Address Space</span></span></td><td><span data-ttu-id="25341-389">10.1.0.0/16</span><span class="sxs-lookup"><span data-stu-id="25341-389">10.1.0.0/16</span></span></td><td></td></tr>    
<tr><td><span data-ttu-id="25341-390">Kezdő IP-Címét</span><span class="sxs-lookup"><span data-stu-id="25341-390">Starting IP</span></span></td><td><span data-ttu-id="25341-391">10.1.0.0</span><span class="sxs-lookup"><span data-stu-id="25341-391">10.1.0.0</span></span></td><td></td></tr>    
<tr><td><span data-ttu-id="25341-392">CIDR</span><span class="sxs-lookup"><span data-stu-id="25341-392">CIDR</span></span> </td><td><span data-ttu-id="25341-393">/16 (65531)</span><span class="sxs-lookup"><span data-stu-id="25341-393">/16 (65531)</span></span></td><td></td></tr>
</table>

<span data-ttu-id="25341-394">Adja hozzá a következő alhálózatok hello:</span><span class="sxs-lookup"><span data-stu-id="25341-394">Add hello following subnets:</span></span>

<table>
<tr><th><span data-ttu-id="25341-395">Név</span><span class="sxs-lookup"><span data-stu-id="25341-395">Name</span></span></th><th><span data-ttu-id="25341-396">Kezdő IP-Címét</span><span class="sxs-lookup"><span data-stu-id="25341-396">Starting IP</span></span></th><th><span data-ttu-id="25341-397">CIDR</span><span class="sxs-lookup"><span data-stu-id="25341-397">CIDR</span></span></th><th><span data-ttu-id="25341-398">Megjegyzések</span><span class="sxs-lookup"><span data-stu-id="25341-398">Remarks</span></span></th></tr>
<tr><td><span data-ttu-id="25341-399">webalkalmazás</span><span class="sxs-lookup"><span data-stu-id="25341-399">web</span></span></td><td><span data-ttu-id="25341-400">10.1.1.0</span><span class="sxs-lookup"><span data-stu-id="25341-400">10.1.1.0</span></span></td><td><span data-ttu-id="25341-401">/24 (251)</span><span class="sxs-lookup"><span data-stu-id="25341-401">/24 (251)</span></span></td><td><span data-ttu-id="25341-402">Hello webfarm-alhálózatot</span><span class="sxs-lookup"><span data-stu-id="25341-402">Subnet for hello web farm</span></span></td></tr>
<tr><td><span data-ttu-id="25341-403">Adatok</span><span class="sxs-lookup"><span data-stu-id="25341-403">data</span></span></td><td><span data-ttu-id="25341-404">10.1.2.0</span><span class="sxs-lookup"><span data-stu-id="25341-404">10.1.2.0</span></span></td><td><span data-ttu-id="25341-405">/24 (251)</span><span class="sxs-lookup"><span data-stu-id="25341-405">/24 (251)</span></span></td><td><span data-ttu-id="25341-406">Adatbázis-csomópont hello alhálózatot</span><span class="sxs-lookup"><span data-stu-id="25341-406">Subnet for hello database nodes</span></span></td></tr>
</table>

<span data-ttu-id="25341-407">Adatok és a webes alhálózatok védetté tehetők a hálózati biztonsági csoportokkal hello érvényességének, amelyeknek ez a cikk a hatókörén kívül esik.</span><span class="sxs-lookup"><span data-stu-id="25341-407">Data and Web subnets can be protected through network security groups hello coverage of which is out of scope for this article.</span></span>  

<span data-ttu-id="25341-408">**2. lépés: Kiépítése virtuális gépek** korábban létrehozott hello lemezképet használ, rendszer létrehozása a következő virtuális gépek hello felhőben hello server "hk-c-svc-nyugati" és azok toohello megfelelő alhálózatokban kötési alább látható módon:</span><span class="sxs-lookup"><span data-stu-id="25341-408">**Step 2: Provision Virtual Machines** Using hello image created previously, we will create hello following virtual machines in hello cloud server “hk-c-svc-west” and bind them toohello respective subnets as shown below:</span></span>

<table>
<tr><th><span data-ttu-id="25341-409">Számítógép neve</span><span class="sxs-lookup"><span data-stu-id="25341-409">Machine Name</span></span>    </th><th><span data-ttu-id="25341-410">Alhálózat</span><span class="sxs-lookup"><span data-stu-id="25341-410">Subnet</span></span>    </th><th><span data-ttu-id="25341-411">IP-cím</span><span class="sxs-lookup"><span data-stu-id="25341-411">IP Address</span></span>    </th><th><span data-ttu-id="25341-412">Rendelkezésre állási csoport</span><span class="sxs-lookup"><span data-stu-id="25341-412">Availability set</span></span></th><th><span data-ttu-id="25341-413">DC/Rack</span><span class="sxs-lookup"><span data-stu-id="25341-413">DC/Rack</span></span></th><th><span data-ttu-id="25341-414">Kezdőérték?</span><span class="sxs-lookup"><span data-stu-id="25341-414">Seed?</span></span></th></tr>
<tr><td><span data-ttu-id="25341-415">HK-c1-nyugati-us</span><span class="sxs-lookup"><span data-stu-id="25341-415">hk-c1-west-us</span></span>    </td><td><span data-ttu-id="25341-416">Adatok</span><span class="sxs-lookup"><span data-stu-id="25341-416">data</span></span>    </td><td><span data-ttu-id="25341-417">10.1.2.4</span><span class="sxs-lookup"><span data-stu-id="25341-417">10.1.2.4</span></span>    </td><td><span data-ttu-id="25341-418">HK-c-aset-1</span><span class="sxs-lookup"><span data-stu-id="25341-418">hk-c-aset-1</span></span>    </td><td><span data-ttu-id="25341-419">DC = WESTUS állvány = rack1</span><span class="sxs-lookup"><span data-stu-id="25341-419">dc =WESTUS rack =rack1</span></span> </td><td><span data-ttu-id="25341-420">Igen</span><span class="sxs-lookup"><span data-stu-id="25341-420">Yes</span></span></td></tr>
<tr><td><span data-ttu-id="25341-421">HK-c2-nyugati-us</span><span class="sxs-lookup"><span data-stu-id="25341-421">hk-c2-west-us</span></span>    </td><td><span data-ttu-id="25341-422">Adatok</span><span class="sxs-lookup"><span data-stu-id="25341-422">data</span></span>    </td><td><span data-ttu-id="25341-423">10.1.2.5</span><span class="sxs-lookup"><span data-stu-id="25341-423">10.1.2.5</span></span>    </td><td><span data-ttu-id="25341-424">HK-c-aset-1</span><span class="sxs-lookup"><span data-stu-id="25341-424">hk-c-aset-1</span></span>    </td><td><span data-ttu-id="25341-425">DC = WESTUS állvány = rack1</span><span class="sxs-lookup"><span data-stu-id="25341-425">dc =WESTUS rack =rack1</span></span>    </td><td><span data-ttu-id="25341-426">Nem</span><span class="sxs-lookup"><span data-stu-id="25341-426">No</span></span> </td></tr>
<tr><td><span data-ttu-id="25341-427">HK-c3-nyugati-us</span><span class="sxs-lookup"><span data-stu-id="25341-427">hk-c3-west-us</span></span>    </td><td><span data-ttu-id="25341-428">Adatok</span><span class="sxs-lookup"><span data-stu-id="25341-428">data</span></span>    </td><td><span data-ttu-id="25341-429">10.1.2.6</span><span class="sxs-lookup"><span data-stu-id="25341-429">10.1.2.6</span></span>    </td><td><span data-ttu-id="25341-430">HK-c-aset-1</span><span class="sxs-lookup"><span data-stu-id="25341-430">hk-c-aset-1</span></span>    </td><td><span data-ttu-id="25341-431">DC = WESTUS állvány = rack2</span><span class="sxs-lookup"><span data-stu-id="25341-431">dc =WESTUS rack =rack2</span></span>    </td><td><span data-ttu-id="25341-432">Igen</span><span class="sxs-lookup"><span data-stu-id="25341-432">Yes</span></span></td></tr>
<tr><td><span data-ttu-id="25341-433">HK-c4-nyugati-us</span><span class="sxs-lookup"><span data-stu-id="25341-433">hk-c4-west-us</span></span>    </td><td><span data-ttu-id="25341-434">Adatok</span><span class="sxs-lookup"><span data-stu-id="25341-434">data</span></span>    </td><td><span data-ttu-id="25341-435">10.1.2.7</span><span class="sxs-lookup"><span data-stu-id="25341-435">10.1.2.7</span></span>    </td><td><span data-ttu-id="25341-436">HK-c-aset-1</span><span class="sxs-lookup"><span data-stu-id="25341-436">hk-c-aset-1</span></span>    </td><td><span data-ttu-id="25341-437">DC = WESTUS állvány = rack2</span><span class="sxs-lookup"><span data-stu-id="25341-437">dc =WESTUS rack =rack2</span></span>    </td><td><span data-ttu-id="25341-438">Nem</span><span class="sxs-lookup"><span data-stu-id="25341-438">No</span></span> </td></tr>
<tr><td><span data-ttu-id="25341-439">HK-c5-nyugati-us</span><span class="sxs-lookup"><span data-stu-id="25341-439">hk-c5-west-us</span></span>    </td><td><span data-ttu-id="25341-440">Adatok</span><span class="sxs-lookup"><span data-stu-id="25341-440">data</span></span>    </td><td><span data-ttu-id="25341-441">10.1.2.8</span><span class="sxs-lookup"><span data-stu-id="25341-441">10.1.2.8</span></span>    </td><td><span data-ttu-id="25341-442">HK-c-aset-2</span><span class="sxs-lookup"><span data-stu-id="25341-442">hk-c-aset-2</span></span>    </td><td><span data-ttu-id="25341-443">DC = WESTUS állvány = rack3</span><span class="sxs-lookup"><span data-stu-id="25341-443">dc =WESTUS rack =rack3</span></span>    </td><td><span data-ttu-id="25341-444">Igen</span><span class="sxs-lookup"><span data-stu-id="25341-444">Yes</span></span></td></tr>
<tr><td><span data-ttu-id="25341-445">HK-c6-nyugati-us</span><span class="sxs-lookup"><span data-stu-id="25341-445">hk-c6-west-us</span></span>    </td><td><span data-ttu-id="25341-446">Adatok</span><span class="sxs-lookup"><span data-stu-id="25341-446">data</span></span>    </td><td><span data-ttu-id="25341-447">10.1.2.9</span><span class="sxs-lookup"><span data-stu-id="25341-447">10.1.2.9</span></span>    </td><td><span data-ttu-id="25341-448">HK-c-aset-2</span><span class="sxs-lookup"><span data-stu-id="25341-448">hk-c-aset-2</span></span>    </td><td><span data-ttu-id="25341-449">DC = WESTUS állvány = rack3</span><span class="sxs-lookup"><span data-stu-id="25341-449">dc =WESTUS rack =rack3</span></span>    </td><td><span data-ttu-id="25341-450">Nem</span><span class="sxs-lookup"><span data-stu-id="25341-450">No</span></span> </td></tr>
<tr><td><span data-ttu-id="25341-451">HK-c7-nyugati-us</span><span class="sxs-lookup"><span data-stu-id="25341-451">hk-c7-west-us</span></span>    </td><td><span data-ttu-id="25341-452">Adatok</span><span class="sxs-lookup"><span data-stu-id="25341-452">data</span></span>    </td><td><span data-ttu-id="25341-453">10.1.2.10</span><span class="sxs-lookup"><span data-stu-id="25341-453">10.1.2.10</span></span>    </td><td><span data-ttu-id="25341-454">HK-c-aset-2</span><span class="sxs-lookup"><span data-stu-id="25341-454">hk-c-aset-2</span></span>    </td><td><span data-ttu-id="25341-455">DC = WESTUS állvány = rack4</span><span class="sxs-lookup"><span data-stu-id="25341-455">dc =WESTUS rack =rack4</span></span>    </td><td><span data-ttu-id="25341-456">Igen</span><span class="sxs-lookup"><span data-stu-id="25341-456">Yes</span></span></td></tr>
<tr><td><span data-ttu-id="25341-457">HK-c8-nyugati-us</span><span class="sxs-lookup"><span data-stu-id="25341-457">hk-c8-west-us</span></span>    </td><td><span data-ttu-id="25341-458">Adatok</span><span class="sxs-lookup"><span data-stu-id="25341-458">data</span></span>    </td><td><span data-ttu-id="25341-459">10.1.2.11</span><span class="sxs-lookup"><span data-stu-id="25341-459">10.1.2.11</span></span>    </td><td><span data-ttu-id="25341-460">HK-c-aset-2</span><span class="sxs-lookup"><span data-stu-id="25341-460">hk-c-aset-2</span></span>    </td><td><span data-ttu-id="25341-461">DC = WESTUS állvány = rack4</span><span class="sxs-lookup"><span data-stu-id="25341-461">dc =WESTUS rack =rack4</span></span>    </td><td><span data-ttu-id="25341-462">Nem</span><span class="sxs-lookup"><span data-stu-id="25341-462">No</span></span> </td></tr>
<tr><td><span data-ttu-id="25341-463">HK-F1-nyugati-us</span><span class="sxs-lookup"><span data-stu-id="25341-463">hk-w1-west-us</span></span>    </td><td><span data-ttu-id="25341-464">webalkalmazás</span><span class="sxs-lookup"><span data-stu-id="25341-464">web</span></span>    </td><td><span data-ttu-id="25341-465">10.1.1.4</span><span class="sxs-lookup"><span data-stu-id="25341-465">10.1.1.4</span></span>    </td><td><span data-ttu-id="25341-466">HK-w-aset-1</span><span class="sxs-lookup"><span data-stu-id="25341-466">hk-w-aset-1</span></span>    </td><td>                       </td><td><span data-ttu-id="25341-467">N/A</span><span class="sxs-lookup"><span data-stu-id="25341-467">N/A</span></span></td></tr>
<tr><td><span data-ttu-id="25341-468">HK-w2-nyugati-us</span><span class="sxs-lookup"><span data-stu-id="25341-468">hk-w2-west-us</span></span>    </td><td><span data-ttu-id="25341-469">webalkalmazás</span><span class="sxs-lookup"><span data-stu-id="25341-469">web</span></span>    </td><td><span data-ttu-id="25341-470">10.1.1.5</span><span class="sxs-lookup"><span data-stu-id="25341-470">10.1.1.5</span></span>    </td><td><span data-ttu-id="25341-471">HK-w-aset-1</span><span class="sxs-lookup"><span data-stu-id="25341-471">hk-w-aset-1</span></span>    </td><td>                       </td><td><span data-ttu-id="25341-472">N/A</span><span class="sxs-lookup"><span data-stu-id="25341-472">N/A</span></span></td></tr>
</table>

<span data-ttu-id="25341-473">Hello fent található virtuális gépek listájára létrehozásához a következő folyamat hello van szükség:</span><span class="sxs-lookup"><span data-stu-id="25341-473">Creation of hello above list of VMs requires hello following process:</span></span>

1. <span data-ttu-id="25341-474">Az adott üres felhőalapú szolgáltatás létrehozása</span><span class="sxs-lookup"><span data-stu-id="25341-474">Create an empty cloud service in a particular region</span></span>
2. <span data-ttu-id="25341-475">Hozzon létre egy virtuális Gépet hello korábban rögzített lemezképből, és csatlakoztassa azt toohello; korábban létrehozott virtuális hálózatban Ismételje meg ezt a hello virtuális gépen</span><span class="sxs-lookup"><span data-stu-id="25341-475">Create a VM from hello previously captured image and attach it toohello virtual network created previously; repeat this for all hello VMs</span></span>
3. <span data-ttu-id="25341-476">Adja hozzá a belső terheléselosztó toohello felhőalapú szolgáltatás, és csatlakoztassa azt toohello "data" alhálózat</span><span class="sxs-lookup"><span data-stu-id="25341-476">Add an internal load balancer toohello cloud service and attach it toohello “data” subnet</span></span>
4. <span data-ttu-id="25341-477">A korábban létrehozott virtuális gépek hozzáadása egy elosztott terhelésű végpont egy elosztott terhelésű készlet csatlakoztatott korábban létrehozott toohello belső terheléselosztó keresztül thrift-forgalom</span><span class="sxs-lookup"><span data-stu-id="25341-477">For each VM created previously, add a load balanced endpoint for thrift traffic through a load balanced set connected toohello previously created internal load balancer</span></span>

<span data-ttu-id="25341-478">hello fent folyamat használja a klasszikus Azure portálon; hajtható végre a Windows-számítógépen (Ha még nem rendelkezik hozzáférési tooa Windows gép Azure virtuális gép egy használata), használja a következő PowerShell-parancsfájl tooprovision hello 8 virtuális gépeinek automatikusan.</span><span class="sxs-lookup"><span data-stu-id="25341-478">hello above process can be executed using Azure classic portal; use a Windows machine (use a VM on Azure if you don't have access tooa Windows machine), use hello following PowerShell script tooprovision all 8 VMs automatically.</span></span>

<span data-ttu-id="25341-479">**Lista 1: Virtuális gépek rendszerbe állításához PowerShell-parancsfájl**</span><span class="sxs-lookup"><span data-stu-id="25341-479">**List 1: PowerShell script for provisioning virtual machines**</span></span>

        #Tested with Azure Powershell - November 2014
        #This powershell script deployes a number of VMs from an existing image inside an Azure region
        #Import your Azure subscription into hello current Powershell session before proceeding
        #hello process: 1. create Azure Storage account, 2. create virtual network, 3.create hello VM template, 2. crate a list of VMs from hello template

        #fundamental variables - change these tooreflect your subscription
        $country="us"; $region="west"; $vnetName = "your_vnet_name";$storageAccount="your_storage_account"
        $numVMs=8;$prefix = "hk-cass";$ilbIP="your_ilb_ip"
        $subscriptionName = "Azure_subscription_name";
        $vmSize="ExtraSmall"; $imageName="your_linux_image_name"
        $ilbName="ThriftInternalLB"; $thriftEndPoint="ThriftEndPoint"

        #generated variables
        $serviceName = "$prefix-svc-$region-$country"; $azureRegion = "$region $country"

        $vmNames = @()
        for ($i=0; $i -lt $numVMs; $i++)
        {
           $vmNames+=("$prefix-vm"+($i+1) + "-$region-$country" );
        }

        #select an Azure subscription already imported into Powershell session
        Select-AzureSubscription -SubscriptionName $subscriptionName -Current
        Set-AzureSubscription -SubscriptionName $subscriptionName -CurrentStorageAccountName $storageAccount

        #create an empty cloud service
        New-AzureService -ServiceName $serviceName -Label "hkcass$region" -Location $azureRegion
        Write-Host "Created $serviceName"

        $VMList= @()   # stores hello list of azure vm configuration objects
        #create hello list of VMs
        foreach($vmName in $vmNames)
        {
           $VMList += New-AzureVMConfig -Name $vmName -InstanceSize ExtraSmall -ImageName $imageName |
           Add-AzureProvisioningConfig -Linux -LinuxUser "localadmin" -Password "Local123" |
           Set-AzureSubnet "data"
        }

        New-AzureVM -ServiceName $serviceName -VNetName $vnetName -VMs $VMList

        #Create internal load balancer
        Add-AzureInternalLoadBalancer -ServiceName $serviceName -InternalLoadBalancerName $ilbName -SubnetName "data" -StaticVNetIPAddress "$ilbIP"
        Write-Host "Created $ilbName"
        #Add add hello thrift endpoint toohello internal load balancer for all hello VMs
        foreach($vmName in $vmNames)
        {
            Get-AzureVM -ServiceName $serviceName -Name $vmName |
                Add-AzureEndpoint -Name $thriftEndPoint -LBSetName "ThriftLBSet" -Protocol tcp -LocalPort 9160 -PublicPort 9160 -ProbePort 9160 -ProbeProtocol tcp -ProbeIntervalInSeconds 10 -InternalLoadBalancerName $ilbName |
                Update-AzureVM

            Write-Host "created $vmName"     
        }

<span data-ttu-id="25341-480">**3. lépés: Cassandra konfigurálása az egyes virtuális gépek**</span><span class="sxs-lookup"><span data-stu-id="25341-480">**Step 3: Configure Cassandra on each VM**</span></span>

<span data-ttu-id="25341-481">Jelentkezzen be a virtuális gép hello és hello következőket hajthatja végre:</span><span class="sxs-lookup"><span data-stu-id="25341-481">Log into hello VM and perform hello following:</span></span>

* <span data-ttu-id="25341-482">$CASS_HOME/conf/cassandra-rackdc.properties toospecify hello data center és állvány tulajdonságainak szerkesztése:</span><span class="sxs-lookup"><span data-stu-id="25341-482">Edit $CASS_HOME/conf/cassandra-rackdc.properties toospecify hello data center and rack properties:</span></span>
  
       dc =EASTUS, rack =rack1
* <span data-ttu-id="25341-483">Cassandra.yaml tooconfigure kezdőérték csomópontok alábbi szerkesztése:</span><span class="sxs-lookup"><span data-stu-id="25341-483">Edit cassandra.yaml tooconfigure seed nodes as below:</span></span>
  
       Seeds: "10.1.2.4,10.1.2.6,10.1.2.8,10.1.2.10"

<span data-ttu-id="25341-484">**4. lépés: Indítsa el a hello virtuális gépek és hello fürt tesztelése**</span><span class="sxs-lookup"><span data-stu-id="25341-484">**Step 4: Start hello VMs and test hello cluster**</span></span>

<span data-ttu-id="25341-485">Jelentkezzen be valamelyik hello csomópontja (pl. hk-c1-nyugati-us) és a következő parancs toosee hello állapotának hello fürt futtatási hello:</span><span class="sxs-lookup"><span data-stu-id="25341-485">Log into one of hello nodes (e.g. hk-c1-west-us) and run hello following command toosee hello status of hello cluster:</span></span>

       nodetool –h 10.1.2.4 –p 7199 status

<span data-ttu-id="25341-486">Hello megjelenítési hasonló toohello egy alatt a 8 csomópontos fürtök kell megjelennie:</span><span class="sxs-lookup"><span data-stu-id="25341-486">You should see hello display similar toohello one below for an 8-node cluster:</span></span>

<table>
<tr><th><span data-ttu-id="25341-487">status</span><span class="sxs-lookup"><span data-stu-id="25341-487">Status</span></span></th><th><span data-ttu-id="25341-488">Cím</span><span class="sxs-lookup"><span data-stu-id="25341-488">Address</span></span>    </th><th><span data-ttu-id="25341-489">Betöltés</span><span class="sxs-lookup"><span data-stu-id="25341-489">Load</span></span>    </th><th><span data-ttu-id="25341-490">Tokenek</span><span class="sxs-lookup"><span data-stu-id="25341-490">Tokens</span></span>    </th><th><span data-ttu-id="25341-491">Tulajdonos</span><span class="sxs-lookup"><span data-stu-id="25341-491">Owns</span></span> </th><th><span data-ttu-id="25341-492">Állomás azonosítója</span><span class="sxs-lookup"><span data-stu-id="25341-492">Host ID</span></span>    </th><th><span data-ttu-id="25341-493">Állvány</span><span class="sxs-lookup"><span data-stu-id="25341-493">Rack</span></span></th></tr>
<tr><th><span data-ttu-id="25341-494">VISSZAVONÁSA</span><span class="sxs-lookup"><span data-stu-id="25341-494">UN</span></span>    </td><td><span data-ttu-id="25341-495">10.1.2.4</span><span class="sxs-lookup"><span data-stu-id="25341-495">10.1.2.4</span></span>     </td><td><span data-ttu-id="25341-496">87.81 KB</span><span class="sxs-lookup"><span data-stu-id="25341-496">87.81 KB</span></span>    </td><td><span data-ttu-id="25341-497">256</span><span class="sxs-lookup"><span data-stu-id="25341-497">256</span></span>    </td><td><span data-ttu-id="25341-498">38.0%</span><span class="sxs-lookup"><span data-stu-id="25341-498">38.0%</span></span>    </td><td><span data-ttu-id="25341-499">GUID (eltávolítani)</span><span class="sxs-lookup"><span data-stu-id="25341-499">Guid (removed)</span></span></td><td><span data-ttu-id="25341-500">rack1</span><span class="sxs-lookup"><span data-stu-id="25341-500">rack1</span></span></td></tr>
<tr><th><span data-ttu-id="25341-501">VISSZAVONÁSA</span><span class="sxs-lookup"><span data-stu-id="25341-501">UN</span></span>    </td><td><span data-ttu-id="25341-502">10.1.2.5</span><span class="sxs-lookup"><span data-stu-id="25341-502">10.1.2.5</span></span>     </td><td><span data-ttu-id="25341-503">41.08 KB</span><span class="sxs-lookup"><span data-stu-id="25341-503">41.08 KB</span></span>    </td><td><span data-ttu-id="25341-504">256</span><span class="sxs-lookup"><span data-stu-id="25341-504">256</span></span>    </td><td><span data-ttu-id="25341-505">68.9%</span><span class="sxs-lookup"><span data-stu-id="25341-505">68.9%</span></span>    </td><td><span data-ttu-id="25341-506">GUID (eltávolítani)</span><span class="sxs-lookup"><span data-stu-id="25341-506">Guid (removed)</span></span></td><td><span data-ttu-id="25341-507">rack1</span><span class="sxs-lookup"><span data-stu-id="25341-507">rack1</span></span></td></tr>
<tr><th><span data-ttu-id="25341-508">VISSZAVONÁSA</span><span class="sxs-lookup"><span data-stu-id="25341-508">UN</span></span>    </td><td><span data-ttu-id="25341-509">10.1.2.6</span><span class="sxs-lookup"><span data-stu-id="25341-509">10.1.2.6</span></span>     </td><td><span data-ttu-id="25341-510">55.29 KB</span><span class="sxs-lookup"><span data-stu-id="25341-510">55.29 KB</span></span>    </td><td><span data-ttu-id="25341-511">256</span><span class="sxs-lookup"><span data-stu-id="25341-511">256</span></span>    </td><td><span data-ttu-id="25341-512">68.8%</span><span class="sxs-lookup"><span data-stu-id="25341-512">68.8%</span></span>    </td><td><span data-ttu-id="25341-513">GUID (eltávolítani)</span><span class="sxs-lookup"><span data-stu-id="25341-513">Guid (removed)</span></span></td><td><span data-ttu-id="25341-514">rack2</span><span class="sxs-lookup"><span data-stu-id="25341-514">rack2</span></span></td></tr>
<tr><th><span data-ttu-id="25341-515">VISSZAVONÁSA</span><span class="sxs-lookup"><span data-stu-id="25341-515">UN</span></span>    </td><td><span data-ttu-id="25341-516">10.1.2.7</span><span class="sxs-lookup"><span data-stu-id="25341-516">10.1.2.7</span></span>     </td><td><span data-ttu-id="25341-517">55.29 KB</span><span class="sxs-lookup"><span data-stu-id="25341-517">55.29 KB</span></span>    </td><td><span data-ttu-id="25341-518">256</span><span class="sxs-lookup"><span data-stu-id="25341-518">256</span></span>    </td><td><span data-ttu-id="25341-519">68.8%</span><span class="sxs-lookup"><span data-stu-id="25341-519">68.8%</span></span>    </td><td><span data-ttu-id="25341-520">GUID (eltávolítani)</span><span class="sxs-lookup"><span data-stu-id="25341-520">Guid (removed)</span></span></td><td><span data-ttu-id="25341-521">rack2</span><span class="sxs-lookup"><span data-stu-id="25341-521">rack2</span></span></td></tr>
<tr><th><span data-ttu-id="25341-522">VISSZAVONÁSA</span><span class="sxs-lookup"><span data-stu-id="25341-522">UN</span></span>    </td><td><span data-ttu-id="25341-523">10.1.2.8</span><span class="sxs-lookup"><span data-stu-id="25341-523">10.1.2.8</span></span>     </td><td><span data-ttu-id="25341-524">55.29 KB</span><span class="sxs-lookup"><span data-stu-id="25341-524">55.29 KB</span></span>    </td><td><span data-ttu-id="25341-525">256</span><span class="sxs-lookup"><span data-stu-id="25341-525">256</span></span>    </td><td><span data-ttu-id="25341-526">68.8%</span><span class="sxs-lookup"><span data-stu-id="25341-526">68.8%</span></span>    </td><td><span data-ttu-id="25341-527">GUID (eltávolítani)</span><span class="sxs-lookup"><span data-stu-id="25341-527">Guid (removed)</span></span></td><td><span data-ttu-id="25341-528">rack3</span><span class="sxs-lookup"><span data-stu-id="25341-528">rack3</span></span></td></tr>
<tr><th><span data-ttu-id="25341-529">VISSZAVONÁSA</span><span class="sxs-lookup"><span data-stu-id="25341-529">UN</span></span>    </td><td><span data-ttu-id="25341-530">10.1.2.9</span><span class="sxs-lookup"><span data-stu-id="25341-530">10.1.2.9</span></span>     </td><td><span data-ttu-id="25341-531">55.29 KB</span><span class="sxs-lookup"><span data-stu-id="25341-531">55.29 KB</span></span>    </td><td><span data-ttu-id="25341-532">256</span><span class="sxs-lookup"><span data-stu-id="25341-532">256</span></span>    </td><td><span data-ttu-id="25341-533">68.8%</span><span class="sxs-lookup"><span data-stu-id="25341-533">68.8%</span></span>    </td><td><span data-ttu-id="25341-534">GUID (eltávolítani)</span><span class="sxs-lookup"><span data-stu-id="25341-534">Guid (removed)</span></span></td><td><span data-ttu-id="25341-535">rack3</span><span class="sxs-lookup"><span data-stu-id="25341-535">rack3</span></span></td></tr>
<tr><th><span data-ttu-id="25341-536">VISSZAVONÁSA</span><span class="sxs-lookup"><span data-stu-id="25341-536">UN</span></span>    </td><td><span data-ttu-id="25341-537">10.1.2.10</span><span class="sxs-lookup"><span data-stu-id="25341-537">10.1.2.10</span></span>     </td><td><span data-ttu-id="25341-538">55.29 KB</span><span class="sxs-lookup"><span data-stu-id="25341-538">55.29 KB</span></span>    </td><td><span data-ttu-id="25341-539">256</span><span class="sxs-lookup"><span data-stu-id="25341-539">256</span></span>    </td><td><span data-ttu-id="25341-540">68.8%</span><span class="sxs-lookup"><span data-stu-id="25341-540">68.8%</span></span>    </td><td><span data-ttu-id="25341-541">GUID (eltávolítani)</span><span class="sxs-lookup"><span data-stu-id="25341-541">Guid (removed)</span></span></td><td><span data-ttu-id="25341-542">rack4</span><span class="sxs-lookup"><span data-stu-id="25341-542">rack4</span></span></td></tr>
<tr><th><span data-ttu-id="25341-543">VISSZAVONÁSA</span><span class="sxs-lookup"><span data-stu-id="25341-543">UN</span></span>    </td><td><span data-ttu-id="25341-544">10.1.2.11</span><span class="sxs-lookup"><span data-stu-id="25341-544">10.1.2.11</span></span>     </td><td><span data-ttu-id="25341-545">55.29 KB</span><span class="sxs-lookup"><span data-stu-id="25341-545">55.29 KB</span></span>    </td><td><span data-ttu-id="25341-546">256</span><span class="sxs-lookup"><span data-stu-id="25341-546">256</span></span>    </td><td><span data-ttu-id="25341-547">68.8%</span><span class="sxs-lookup"><span data-stu-id="25341-547">68.8%</span></span>    </td><td><span data-ttu-id="25341-548">GUID (eltávolítani)</span><span class="sxs-lookup"><span data-stu-id="25341-548">Guid (removed)</span></span></td><td><span data-ttu-id="25341-549">rack4</span><span class="sxs-lookup"><span data-stu-id="25341-549">rack4</span></span></td></tr>
</table>

## <a name="test-hello-single-region-cluster"></a><span data-ttu-id="25341-550">Teszt hello fürtön régió</span><span class="sxs-lookup"><span data-stu-id="25341-550">Test hello Single Region Cluster</span></span>
<span data-ttu-id="25341-551">A következő lépéseket tootest hello fürt hello használata:</span><span class="sxs-lookup"><span data-stu-id="25341-551">Use hello following steps tootest hello cluster:</span></span>

1. <span data-ttu-id="25341-552">Belső terheléselosztó hello hello IP-cím (pl. lekérésére hello Powershell parancs Get-AzureInternalLoadbalancer parancsmag használatával,  10.1.2.101).</span><span class="sxs-lookup"><span data-stu-id="25341-552">Using hello Powershell command Get-AzureInternalLoadbalancer commandlet, obtain hello IP address of hello internal load balancer (e.g.  10.1.2.101).</span></span> <span data-ttu-id="25341-553">hello hello parancs szintaxisa alább látható: Get-AzureLoadbalancer – szolgáltatásnév "hk-c-svc-nyugati-us" [hello belső terheléselosztó IP-címének együtt hello részleteit jeleníti meg]</span><span class="sxs-lookup"><span data-stu-id="25341-553">hello syntax of hello command is shown below: Get-AzureLoadbalancer –ServiceName "hk-c-svc-west-us” [displays hello details of hello internal load balancer along with its IP address]</span></span>
2. <span data-ttu-id="25341-554">Jelentkezzen be a hello webfarm (pl. hk-F1-nyugati-us) virtuális gép használata a Putty vagy ssh</span><span class="sxs-lookup"><span data-stu-id="25341-554">Log into hello web farm VM (e.g. hk-w1-west-us) using Putty or ssh</span></span>
3. <span data-ttu-id="25341-555">Végrehajtás $CASS_HOME/bin/cqlsh 10.1.2.101 9160</span><span class="sxs-lookup"><span data-stu-id="25341-555">Execute $CASS_HOME/bin/cqlsh 10.1.2.101 9160</span></span>
4. <span data-ttu-id="25341-556">Ha hello fürt nem működik a következő CQL parancsok tooverify hello használata:</span><span class="sxs-lookup"><span data-stu-id="25341-556">Use hello following CQL commands tooverify if hello cluster is working:</span></span>
   
     <span data-ttu-id="25341-557">Kulcstérértesítések használatával hozzon létre customers_ks rendelkező replikációs = {"class": "SimpleStrategy", "replication_factor": 3};   HASZNÁLJA a customers_ks;   Hozzon létre a tábla Customers(customer_id int PRIMARY KEY, firstname text, lastname text);   Helyezze be a Customers(customer_id, firstname, lastname) VALUES(1, 'John', 'Doe');   Helyezze be a Customers(customer_id, firstname, lastname) értékek (2, "Jane", "Doe").</span><span class="sxs-lookup"><span data-stu-id="25341-557">CREATE KEYSPACE customers_ks WITH REPLICATION = { 'class' : 'SimpleStrategy', 'replication_factor' : 3 };   USE customers_ks;   CREATE TABLE Customers(customer_id int PRIMARY KEY, firstname text, lastname text);   INSERT INTO Customers(customer_id, firstname, lastname) VALUES(1, 'John', 'Doe');   INSERT INTO Customers(customer_id, firstname, lastname) VALUES (2, 'Jane', 'Doe');</span></span>
   
     <span data-ttu-id="25341-558">Válassza ki * ügyfelek;</span><span class="sxs-lookup"><span data-stu-id="25341-558">SELECT * FROM Customers;</span></span>

<span data-ttu-id="25341-559">Például hello alatt megjelenítésre kell megjelennie:</span><span class="sxs-lookup"><span data-stu-id="25341-559">You should see a display like hello one below:</span></span>

<table>
  <tr><th> <span data-ttu-id="25341-560">customer_id</span><span class="sxs-lookup"><span data-stu-id="25341-560">customer_id</span></span> </th><th> <span data-ttu-id="25341-561">Utónév</span><span class="sxs-lookup"><span data-stu-id="25341-561">firstname</span></span> </th><th> <span data-ttu-id="25341-562">Vezetéknév</span><span class="sxs-lookup"><span data-stu-id="25341-562">lastname</span></span> </th></tr>
  <tr><td> <span data-ttu-id="25341-563">1</span><span class="sxs-lookup"><span data-stu-id="25341-563">1</span></span> </td><td> <span data-ttu-id="25341-564">John</span><span class="sxs-lookup"><span data-stu-id="25341-564">John</span></span> </td><td> <span data-ttu-id="25341-565">DOE</span><span class="sxs-lookup"><span data-stu-id="25341-565">Doe</span></span> </td></tr>
  <tr><td> <span data-ttu-id="25341-566">2</span><span class="sxs-lookup"><span data-stu-id="25341-566">2</span></span> </td><td> <span data-ttu-id="25341-567">Jane</span><span class="sxs-lookup"><span data-stu-id="25341-567">Jane</span></span> </td><td> <span data-ttu-id="25341-568">DOE</span><span class="sxs-lookup"><span data-stu-id="25341-568">Doe</span></span> </td></tr>
</table>

<span data-ttu-id="25341-569">Vegye figyelembe, hogy a 4. lépésben létrehozott hello kulcstérértesítések használatával SimpleStrategy használ egy replication_factor 3.</span><span class="sxs-lookup"><span data-stu-id="25341-569">Please note that hello keyspace created in step 4 uses SimpleStrategy with a  replication_factor of 3.</span></span> <span data-ttu-id="25341-570">SimpleStrategy ajánlott egyetlen data center központi telepítések mivel több adatok NetworkTopologyStrategy center központi telepítések.</span><span class="sxs-lookup"><span data-stu-id="25341-570">SimpleStrategy is recommended for single data center deployments whereas NetworkTopologyStrategy for multi-data center deployments.</span></span> <span data-ttu-id="25341-571">A / 3 replication_factor csomópont hibák tolerancia rendszerében.</span><span class="sxs-lookup"><span data-stu-id="25341-571">A replication_factor of 3 will give tolerance for node failures.</span></span>

## <span data-ttu-id="25341-572"><a id="tworegion"></a>Több területi telepítési folyamata</span><span class="sxs-lookup"><span data-stu-id="25341-572"><a id="tworegion"> </a>Multi-Region Deployment Process</span></span>
<span data-ttu-id="25341-573">Lesz használhatják fel a hello egyetlen régión telepítése befejeződött, és ismételje meg ugyanezt a folyamatot hello hello második régió telepítése.</span><span class="sxs-lookup"><span data-stu-id="25341-573">Will leverage hello single region deployment completed and repeat hello same process for installing hello second region.</span></span> <span data-ttu-id="25341-574">hello kulcs hello egyetlen és több régióban telepítési közötti különbség hello VPN-alagút beállítást régió közti kommunikációhoz; rendszer hello hálózati telepítéssel, hello virtuális gépek telepítéséhez és konfigurálásához Cassandra.</span><span class="sxs-lookup"><span data-stu-id="25341-574">hello key difference between hello single and multiple region deployment is hello VPN tunnel setup for inter-region communication; we will start with hello network installation, provision hello VMs and configure Cassandra.</span></span>

### <a name="step-1-create-hello-virtual-network-at-hello-2nd-region"></a><span data-ttu-id="25341-575">1. lépés: Hozzon létre virtuális hálózati hello hello régió 2.</span><span class="sxs-lookup"><span data-stu-id="25341-575">Step 1: Create hello Virtual Network at hello 2nd Region</span></span>
<span data-ttu-id="25341-576">Jelentkezzen be a klasszikus Azure portálon hello, és hozzon létre egy virtuális hálózati hello attribútumok megjelenítése hello táblában.</span><span class="sxs-lookup"><span data-stu-id="25341-576">Log into hello Azure classic portal and create a Virtual Network with hello attributes show in hello table.</span></span> <span data-ttu-id="25341-577">Lásd: [Cloud-Only virtuális hálózat konfigurálása a klasszikus Azure portálon hello](../../../virtual-network/virtual-networks-create-vnet-classic-pportal.md) hello folyamat részletes leírást.</span><span class="sxs-lookup"><span data-stu-id="25341-577">See [Configure a Cloud-Only Virtual Network in hello Azure classic portal](../../../virtual-network/virtual-networks-create-vnet-classic-pportal.md) for detailed steps of hello process.</span></span>      

<table>
<tr><th><span data-ttu-id="25341-578">Attribútum neve</span><span class="sxs-lookup"><span data-stu-id="25341-578">Attribute Name</span></span>    </th><th><span data-ttu-id="25341-579">Érték</span><span class="sxs-lookup"><span data-stu-id="25341-579">Value</span></span>    </th><th><span data-ttu-id="25341-580">Megjegyzések</span><span class="sxs-lookup"><span data-stu-id="25341-580">Remarks</span></span></th></tr>
<tr><td><span data-ttu-id="25341-581">Név</span><span class="sxs-lookup"><span data-stu-id="25341-581">Name</span></span>    </td><td><span data-ttu-id="25341-582">vnet-esetén-keleti-us</span><span class="sxs-lookup"><span data-stu-id="25341-582">vnet-cass-east-us</span></span></td><td></td></tr>
<tr><td><span data-ttu-id="25341-583">Régió</span><span class="sxs-lookup"><span data-stu-id="25341-583">Region</span></span>    </td><td><span data-ttu-id="25341-584">USA keleti régiója</span><span class="sxs-lookup"><span data-stu-id="25341-584">East US</span></span></td><td></td></tr>
<tr><td><span data-ttu-id="25341-585">DNS-kiszolgálók</span><span class="sxs-lookup"><span data-stu-id="25341-585">DNS Servers</span></span>        </td><td></td><td><span data-ttu-id="25341-586">Figyelmen kívül hagyja ezt a DNS-kiszolgáló nem használjuk</span><span class="sxs-lookup"><span data-stu-id="25341-586">Ignore this as we are not using a DNS Server</span></span></td></tr>
<tr><td><span data-ttu-id="25341-587">A pont-pont VPN konfigurálása</span><span class="sxs-lookup"><span data-stu-id="25341-587">Configure a point-to-site VPN</span></span></td><td></td><td>        <span data-ttu-id="25341-588">Figyelmen kívül hagyja ezt</span><span class="sxs-lookup"><span data-stu-id="25341-588">Ignore this</span></span></td></tr>
<tr><td><span data-ttu-id="25341-589">Webhelyek közötti virtuális magánhálózat konfigurálása</span><span class="sxs-lookup"><span data-stu-id="25341-589">Configure a site-to-site VPN</span></span></td><td></td><td>        <span data-ttu-id="25341-590">Figyelmen kívül hagyja ezt</span><span class="sxs-lookup"><span data-stu-id="25341-590">Ignore this</span></span></td></tr>
<tr><td><span data-ttu-id="25341-591">Címterület</span><span class="sxs-lookup"><span data-stu-id="25341-591">Address Space</span></span>    </td><td><span data-ttu-id="25341-592">10.2.0.0/16</span><span class="sxs-lookup"><span data-stu-id="25341-592">10.2.0.0/16</span></span></td><td></td></tr>
<tr><td><span data-ttu-id="25341-593">Kezdő IP-Címét</span><span class="sxs-lookup"><span data-stu-id="25341-593">Starting IP</span></span>    </td><td><span data-ttu-id="25341-594">10.2.0.0</span><span class="sxs-lookup"><span data-stu-id="25341-594">10.2.0.0</span></span>    </td><td></td></tr>
<tr><td><span data-ttu-id="25341-595">CIDR</span><span class="sxs-lookup"><span data-stu-id="25341-595">CIDR</span></span>    </td><td><span data-ttu-id="25341-596">/16 (65531)</span><span class="sxs-lookup"><span data-stu-id="25341-596">/16 (65531)</span></span></td><td></td></tr>
</table>

<span data-ttu-id="25341-597">Adja hozzá a következő alhálózatok hello:</span><span class="sxs-lookup"><span data-stu-id="25341-597">Add hello following subnets:</span></span>

<table>
<tr><th><span data-ttu-id="25341-598">Név</span><span class="sxs-lookup"><span data-stu-id="25341-598">Name</span></span>    </th><th><span data-ttu-id="25341-599">Kezdő IP-Címét</span><span class="sxs-lookup"><span data-stu-id="25341-599">Starting IP</span></span>    </th><th><span data-ttu-id="25341-600">CIDR</span><span class="sxs-lookup"><span data-stu-id="25341-600">CIDR</span></span>    </th><th><span data-ttu-id="25341-601">Megjegyzések</span><span class="sxs-lookup"><span data-stu-id="25341-601">Remarks</span></span></th></tr>
<tr><td><span data-ttu-id="25341-602">webalkalmazás</span><span class="sxs-lookup"><span data-stu-id="25341-602">web</span></span>    </td><td><span data-ttu-id="25341-603">10.2.1.0</span><span class="sxs-lookup"><span data-stu-id="25341-603">10.2.1.0</span></span>    </td><td><span data-ttu-id="25341-604">/24 (251)</span><span class="sxs-lookup"><span data-stu-id="25341-604">/24 (251)</span></span>    </td><td><span data-ttu-id="25341-605">Hello webfarm-alhálózatot</span><span class="sxs-lookup"><span data-stu-id="25341-605">Subnet for hello web farm</span></span></td></tr>
<tr><td><span data-ttu-id="25341-606">Adatok</span><span class="sxs-lookup"><span data-stu-id="25341-606">data</span></span>    </td><td><span data-ttu-id="25341-607">10.2.2.0</span><span class="sxs-lookup"><span data-stu-id="25341-607">10.2.2.0</span></span>    </td><td><span data-ttu-id="25341-608">/24 (251)</span><span class="sxs-lookup"><span data-stu-id="25341-608">/24 (251)</span></span>    </td><td><span data-ttu-id="25341-609">Adatbázis-csomópont hello alhálózatot</span><span class="sxs-lookup"><span data-stu-id="25341-609">Subnet for hello database nodes</span></span></td></tr>
</table>


### <a name="step-2-create-local-networks"></a><span data-ttu-id="25341-610">2. lépés: A helyi hálózatok létrehozása</span><span class="sxs-lookup"><span data-stu-id="25341-610">Step 2: Create Local Networks</span></span>
<span data-ttu-id="25341-611">Az Azure virtuális hálózatban egy helyi hálózaton egy proxy címtartományt, amely leképezhető tooa magánfelhőbe vagy egy másik Azure-régió, többek között távoli hely.</span><span class="sxs-lookup"><span data-stu-id="25341-611">A Local Network in Azure virtual networking is a proxy address space that maps tooa remote site including a private cloud or another Azure region.</span></span> <span data-ttu-id="25341-612">A proxy címtartomány kötött tooa távoli átjáró jobb hálózati célok útválasztási hálózati toohello.</span><span class="sxs-lookup"><span data-stu-id="25341-612">This proxy address space is bound tooa remote gateway for routing network toohello right networking destinations.</span></span> <span data-ttu-id="25341-613">Lásd: [konfigurálja a VNet tooVNet kapcsolat](../../../vpn-gateway/virtual-networks-configure-vnet-to-vnet-connection.md) hello útmutatásért VNET – VNET-kapcsolatot létesít.</span><span class="sxs-lookup"><span data-stu-id="25341-613">See [Configure a VNet tooVNet Connection](../../../vpn-gateway/virtual-networks-configure-vnet-to-vnet-connection.md) for hello instructions on establishing VNET-to-VNET connection.</span></span>

<span data-ttu-id="25341-614">Hozzon létre két helyi hálózat következő adatok hello száma:</span><span class="sxs-lookup"><span data-stu-id="25341-614">Create two local networks per hello following details:</span></span>

| <span data-ttu-id="25341-615">Hálózati név</span><span class="sxs-lookup"><span data-stu-id="25341-615">Network Name</span></span> | <span data-ttu-id="25341-616">VPN-átjáró címét</span><span class="sxs-lookup"><span data-stu-id="25341-616">VPN Gateway Address</span></span> | <span data-ttu-id="25341-617">Címterület</span><span class="sxs-lookup"><span data-stu-id="25341-617">Address Space</span></span> | <span data-ttu-id="25341-618">Megjegyzések</span><span class="sxs-lookup"><span data-stu-id="25341-618">Remarks</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="25341-619">HK-lnet-Map-to-East-us</span><span class="sxs-lookup"><span data-stu-id="25341-619">hk-lnet-map-to-east-us</span></span> |<span data-ttu-id="25341-620">23.1.1.1</span><span class="sxs-lookup"><span data-stu-id="25341-620">23.1.1.1</span></span> |<span data-ttu-id="25341-621">10.2.0.0/16</span><span class="sxs-lookup"><span data-stu-id="25341-621">10.2.0.0/16</span></span> |<span data-ttu-id="25341-622">Hello helyi hálózat létrehozásakor adjon címet az átjáró helyőrző.</span><span class="sxs-lookup"><span data-stu-id="25341-622">While creating hello Local Network give a placeholder gateway address.</span></span> <span data-ttu-id="25341-623">hello valós átjárócímet ki van töltve, hello átjáró létrehozása után.</span><span class="sxs-lookup"><span data-stu-id="25341-623">hello real gateway address is filled once hello gateway is created.</span></span> <span data-ttu-id="25341-624">Győződjön meg arról, hogy hello címterület pontosan megegyezik hello megfelelő távoli virtuális hálózat; Ebben az esetben hello virtuális hálózat létrehozása hello USA keleti régiójában.</span><span class="sxs-lookup"><span data-stu-id="25341-624">Make sure hello address space exactly matches hello respective remote VNET; in this case hello VNET created in hello East US region.</span></span> |
| <span data-ttu-id="25341-625">HK-lnet-Map-to-West-us</span><span class="sxs-lookup"><span data-stu-id="25341-625">hk-lnet-map-to-west-us</span></span> |<span data-ttu-id="25341-626">23.2.2.2</span><span class="sxs-lookup"><span data-stu-id="25341-626">23.2.2.2</span></span> |<span data-ttu-id="25341-627">10.1.0.0/16</span><span class="sxs-lookup"><span data-stu-id="25341-627">10.1.0.0/16</span></span> |<span data-ttu-id="25341-628">Hello helyi hálózat létrehozásakor adjon címet az átjáró helyőrző.</span><span class="sxs-lookup"><span data-stu-id="25341-628">While creating hello Local Network give a placeholder gateway address.</span></span> <span data-ttu-id="25341-629">hello valós átjárócímet ki van töltve, hello átjáró létrehozása után.</span><span class="sxs-lookup"><span data-stu-id="25341-629">hello real gateway address is filled once hello gateway is created.</span></span> <span data-ttu-id="25341-630">Győződjön meg arról, hogy hello címterület pontosan megegyezik hello megfelelő távoli virtuális hálózat; Ebben az esetben hello virtuális hálózat létrehozása hello USA nyugati régiója régióban.</span><span class="sxs-lookup"><span data-stu-id="25341-630">Make sure hello address space exactly matches hello respective remote VNET; in this case hello VNET created in hello West US region.</span></span> |

### <a name="step-3-map-local-network-toohello-respective-vnets"></a><span data-ttu-id="25341-631">3. lépés: Térkép "Helyi" hálózati toohello megfelelő Vnetek</span><span class="sxs-lookup"><span data-stu-id="25341-631">Step 3: Map “Local” network toohello respective VNETs</span></span>
<span data-ttu-id="25341-632">Hello a klasszikus Azure portálon minden egyes virtuális hálózat kiválasztása, kattintson a "Beállítása", "Connect toohello helyi hálózat" Ellenőrizze, majd hello a következő adatok hello / helyi hálózatok kiválasztása:</span><span class="sxs-lookup"><span data-stu-id="25341-632">From hello Azure classic portal, select each vnet, click “Configure”, check “Connect toohello local network”, and select hello Local Networks per hello following details:</span></span>

| <span data-ttu-id="25341-633">Virtual Network</span><span class="sxs-lookup"><span data-stu-id="25341-633">Virtual Network</span></span> | <span data-ttu-id="25341-634">Helyi hálózati</span><span class="sxs-lookup"><span data-stu-id="25341-634">Local Network</span></span> |
| --- | --- |
| <span data-ttu-id="25341-635">HK-vnet-nyugati-us</span><span class="sxs-lookup"><span data-stu-id="25341-635">hk-vnet-west-us</span></span> |<span data-ttu-id="25341-636">HK-lnet-Map-to-East-us</span><span class="sxs-lookup"><span data-stu-id="25341-636">hk-lnet-map-to-east-us</span></span> |
| <span data-ttu-id="25341-637">HK-vnet-keleti-us</span><span class="sxs-lookup"><span data-stu-id="25341-637">hk-vnet-east-us</span></span> |<span data-ttu-id="25341-638">HK-lnet-Map-to-West-us</span><span class="sxs-lookup"><span data-stu-id="25341-638">hk-lnet-map-to-west-us</span></span> |

### <a name="step-4-create-gateways-on-vnet1-and-vnet2"></a><span data-ttu-id="25341-639">4. lépés: A VNET1 és VNET2 átjárók létrehozása</span><span class="sxs-lookup"><span data-stu-id="25341-639">Step 4: Create Gateways on VNET1 and VNET2</span></span>
<span data-ttu-id="25341-640">Mindkét hello virtuális hálózatok hello irányítópultról kattintson létrehozása ÁTJÁRÓN, amely akkor indul el, hello VPN-átjáró létesítésének folyamatát kell használnia.</span><span class="sxs-lookup"><span data-stu-id="25341-640">From hello dashboard of both hello virtual networks, click CREATE GATEWAY which will trigger hello VPN gateway provisioning process.</span></span> <span data-ttu-id="25341-641">Miután néhány percig, amíg az összes virtuális hálózat irányítópult hello megjelenjen-e hello tényleges átjárócímet.</span><span class="sxs-lookup"><span data-stu-id="25341-641">After a few minutes hello dashboard of each virtual network should display hello actual gateway address.</span></span>

### <a name="step-5-update-local-networks-with-hello-respective-gateway-addresses"></a><span data-ttu-id="25341-642">5. lépés: Frissítés "Helyi" hálózatok hello megfelelő "Gateway" címek</span><span class="sxs-lookup"><span data-stu-id="25341-642">Step 5: Update “Local” networks with hello respective “Gateway” addresses</span></span>
<span data-ttu-id="25341-643">Mindkét hello helyi hálózatok tooreplace hello helyőrző átjáró IP-cím hello valós IP-címével csak hello kiépített átjárók szerkesztése.</span><span class="sxs-lookup"><span data-stu-id="25341-643">Edit both hello local networks tooreplace hello placeholder gateway IP address with hello real IP address of hello just provisioned gateways.</span></span> <span data-ttu-id="25341-644">A következő hozzárendelési hello használata:</span><span class="sxs-lookup"><span data-stu-id="25341-644">Use hello following mapping:</span></span>

<table>
<tr><th><span data-ttu-id="25341-645">Helyi hálózati</span><span class="sxs-lookup"><span data-stu-id="25341-645">Local Network</span></span>    </th><th><span data-ttu-id="25341-646">Virtuális hálózati átjáró</span><span class="sxs-lookup"><span data-stu-id="25341-646">Virtual Network Gateway</span></span></th></tr>
<tr><td><span data-ttu-id="25341-647">HK-lnet-Map-to-East-us</span><span class="sxs-lookup"><span data-stu-id="25341-647">hk-lnet-map-to-east-us</span></span> </td><td><span data-ttu-id="25341-648">A hk-vnet-nyugati-us átjáró</span><span class="sxs-lookup"><span data-stu-id="25341-648">Gateway of hk-vnet-west-us</span></span></td></tr>
<tr><td><span data-ttu-id="25341-649">HK-lnet-Map-to-West-us</span><span class="sxs-lookup"><span data-stu-id="25341-649">hk-lnet-map-to-west-us</span></span> </td><td><span data-ttu-id="25341-650">A hk-vnet-keleti-us átjáró</span><span class="sxs-lookup"><span data-stu-id="25341-650">Gateway of hk-vnet-east-us</span></span></td></tr>
</table>

### <a name="step-6-update-hello-shared-key"></a><span data-ttu-id="25341-651">6. lépés: Hello megosztott kulcs frissítése</span><span class="sxs-lookup"><span data-stu-id="25341-651">Step 6: Update hello shared key</span></span>
<span data-ttu-id="25341-652">A következő Powershell parancsfájl tooupdate hello IPSec-kulcs minden VPN-átjáró [hello szakét kulcs használata mindkét hello átjárók] használata hello: Set-AzureVNetGatewayKey - VNetName hk-vnet-keleti-us - LocalNetworkSiteName hk-lnet-map-to-west-us - SharedKey D9E76BKK Set-AzureVNetGatewayKey - VNetName hk-vnet-nyugati-us - LocalNetworkSiteName hk-lnet-map-to-east-us - SharedKey D9E76BKK</span><span class="sxs-lookup"><span data-stu-id="25341-652">Use hello following Powershell script tooupdate hello IPSec key of each VPN gateway [use hello sake key for both hello gateways]: Set-AzureVNetGatewayKey -VNetName hk-vnet-east-us -LocalNetworkSiteName hk-lnet-map-to-west-us -SharedKey D9E76BKK Set-AzureVNetGatewayKey -VNetName hk-vnet-west-us -LocalNetworkSiteName hk-lnet-map-to-east-us -SharedKey D9E76BKK</span></span>

### <a name="step-7-establish-hello-vnet-to-vnet-connection"></a><span data-ttu-id="25341-653">7. lépés: Hello VNET – VNET-kapcsolatot létrehozni.</span><span class="sxs-lookup"><span data-stu-id="25341-653">Step 7: Establish hello VNET-to-VNET connection</span></span>
<span data-ttu-id="25341-654">A klasszikus Azure portálon hello használja a hello "IRÁNYÍTÓPULT" menü mindkét hello virtuális hálózatok tooestablish átjárók közötti kapcsolat.</span><span class="sxs-lookup"><span data-stu-id="25341-654">From hello Azure classic portal, use hello “DASHBOARD” menu of both hello virtual networks tooestablish gateway-to-gateway connection.</span></span> <span data-ttu-id="25341-655">Hello alsó eszköztár hello "Csatlakozás" menüpontok használja.</span><span class="sxs-lookup"><span data-stu-id="25341-655">Use hello “CONNECT” menu items in hello bottom toolbar.</span></span> <span data-ttu-id="25341-656">Néhány perc múlva hello irányítópult megjelenjen-e hello kapcsolódási adatait grafikusan.</span><span class="sxs-lookup"><span data-stu-id="25341-656">After a few minutes hello dashboard should display hello connection details graphically.</span></span>

### <a name="step-8-create-hello-virtual-machines-in-region-2"></a><span data-ttu-id="25341-657">8. lépés: A régió #2 hello virtuális gépek létrehozása</span><span class="sxs-lookup"><span data-stu-id="25341-657">Step 8: Create hello virtual machines in region #2</span></span>
<span data-ttu-id="25341-658">Hello Ubuntu lemezkép létrehozása ugyanazon lépések vagy hello kép VHD fájl toohello Azure storage-fiók #2 régióban található, másolja a következő hello #1 régió telepítésben szerint, és hello lemezkép létrehozásához.</span><span class="sxs-lookup"><span data-stu-id="25341-658">Create hello Ubuntu image as described in region #1 deployment by following hello same steps or copy hello image VHD file toohello Azure storage account located in region #2 and create hello image.</span></span> <span data-ttu-id="25341-659">Ezzel a lemezképpel, és hozzon létre egy új felhőalapú szolgáltatás hk-c-svc-keleti-nekünk a virtuális gépek listájának következő hello:</span><span class="sxs-lookup"><span data-stu-id="25341-659">Use this image and create hello following list of virtual machines into a new cloud service hk-c-svc-east-us:</span></span>

| <span data-ttu-id="25341-660">Számítógép neve</span><span class="sxs-lookup"><span data-stu-id="25341-660">Machine Name</span></span> | <span data-ttu-id="25341-661">Alhálózat</span><span class="sxs-lookup"><span data-stu-id="25341-661">Subnet</span></span> | <span data-ttu-id="25341-662">IP-cím</span><span class="sxs-lookup"><span data-stu-id="25341-662">IP Address</span></span> | <span data-ttu-id="25341-663">Rendelkezésre állási csoport</span><span class="sxs-lookup"><span data-stu-id="25341-663">Availability set</span></span> | <span data-ttu-id="25341-664">DC/Rack</span><span class="sxs-lookup"><span data-stu-id="25341-664">DC/Rack</span></span> | <span data-ttu-id="25341-665">Kezdőérték?</span><span class="sxs-lookup"><span data-stu-id="25341-665">Seed?</span></span> |
| --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="25341-666">HK-c1-keleti-us</span><span class="sxs-lookup"><span data-stu-id="25341-666">hk-c1-east-us</span></span> |<span data-ttu-id="25341-667">Adatok</span><span class="sxs-lookup"><span data-stu-id="25341-667">data</span></span> |<span data-ttu-id="25341-668">10.2.2.4</span><span class="sxs-lookup"><span data-stu-id="25341-668">10.2.2.4</span></span> |<span data-ttu-id="25341-669">HK-c-aset-1</span><span class="sxs-lookup"><span data-stu-id="25341-669">hk-c-aset-1</span></span> |<span data-ttu-id="25341-670">DC = EASTUS állvány = rack1</span><span class="sxs-lookup"><span data-stu-id="25341-670">dc =EASTUS rack =rack1</span></span> |<span data-ttu-id="25341-671">Igen</span><span class="sxs-lookup"><span data-stu-id="25341-671">Yes</span></span> |
| <span data-ttu-id="25341-672">HK-c2-keleti-us</span><span class="sxs-lookup"><span data-stu-id="25341-672">hk-c2-east-us</span></span> |<span data-ttu-id="25341-673">Adatok</span><span class="sxs-lookup"><span data-stu-id="25341-673">data</span></span> |<span data-ttu-id="25341-674">10.2.2.5</span><span class="sxs-lookup"><span data-stu-id="25341-674">10.2.2.5</span></span> |<span data-ttu-id="25341-675">HK-c-aset-1</span><span class="sxs-lookup"><span data-stu-id="25341-675">hk-c-aset-1</span></span> |<span data-ttu-id="25341-676">DC = EASTUS állvány = rack1</span><span class="sxs-lookup"><span data-stu-id="25341-676">dc =EASTUS rack =rack1</span></span> |<span data-ttu-id="25341-677">Nem</span><span class="sxs-lookup"><span data-stu-id="25341-677">No</span></span> |
| <span data-ttu-id="25341-678">HK-c3-keleti-us</span><span class="sxs-lookup"><span data-stu-id="25341-678">hk-c3-east-us</span></span> |<span data-ttu-id="25341-679">Adatok</span><span class="sxs-lookup"><span data-stu-id="25341-679">data</span></span> |<span data-ttu-id="25341-680">10.2.2.6</span><span class="sxs-lookup"><span data-stu-id="25341-680">10.2.2.6</span></span> |<span data-ttu-id="25341-681">HK-c-aset-1</span><span class="sxs-lookup"><span data-stu-id="25341-681">hk-c-aset-1</span></span> |<span data-ttu-id="25341-682">DC = EASTUS állvány = rack2</span><span class="sxs-lookup"><span data-stu-id="25341-682">dc =EASTUS rack =rack2</span></span> |<span data-ttu-id="25341-683">Igen</span><span class="sxs-lookup"><span data-stu-id="25341-683">Yes</span></span> |
| <span data-ttu-id="25341-684">HK-c5-keleti-us</span><span class="sxs-lookup"><span data-stu-id="25341-684">hk-c5-east-us</span></span> |<span data-ttu-id="25341-685">Adatok</span><span class="sxs-lookup"><span data-stu-id="25341-685">data</span></span> |<span data-ttu-id="25341-686">10.2.2.8</span><span class="sxs-lookup"><span data-stu-id="25341-686">10.2.2.8</span></span> |<span data-ttu-id="25341-687">HK-c-aset-2</span><span class="sxs-lookup"><span data-stu-id="25341-687">hk-c-aset-2</span></span> |<span data-ttu-id="25341-688">DC = EASTUS állvány = rack3</span><span class="sxs-lookup"><span data-stu-id="25341-688">dc =EASTUS rack =rack3</span></span> |<span data-ttu-id="25341-689">Igen</span><span class="sxs-lookup"><span data-stu-id="25341-689">Yes</span></span> |
| <span data-ttu-id="25341-690">HK-c6-keleti-us</span><span class="sxs-lookup"><span data-stu-id="25341-690">hk-c6-east-us</span></span> |<span data-ttu-id="25341-691">Adatok</span><span class="sxs-lookup"><span data-stu-id="25341-691">data</span></span> |<span data-ttu-id="25341-692">10.2.2.9</span><span class="sxs-lookup"><span data-stu-id="25341-692">10.2.2.9</span></span> |<span data-ttu-id="25341-693">HK-c-aset-2</span><span class="sxs-lookup"><span data-stu-id="25341-693">hk-c-aset-2</span></span> |<span data-ttu-id="25341-694">DC = EASTUS állvány = rack3</span><span class="sxs-lookup"><span data-stu-id="25341-694">dc =EASTUS rack =rack3</span></span> |<span data-ttu-id="25341-695">Nem</span><span class="sxs-lookup"><span data-stu-id="25341-695">No</span></span> |
| <span data-ttu-id="25341-696">HK-c7-keleti-us</span><span class="sxs-lookup"><span data-stu-id="25341-696">hk-c7-east-us</span></span> |<span data-ttu-id="25341-697">Adatok</span><span class="sxs-lookup"><span data-stu-id="25341-697">data</span></span> |<span data-ttu-id="25341-698">10.2.2.10</span><span class="sxs-lookup"><span data-stu-id="25341-698">10.2.2.10</span></span> |<span data-ttu-id="25341-699">HK-c-aset-2</span><span class="sxs-lookup"><span data-stu-id="25341-699">hk-c-aset-2</span></span> |<span data-ttu-id="25341-700">DC = EASTUS állvány = rack4</span><span class="sxs-lookup"><span data-stu-id="25341-700">dc =EASTUS rack =rack4</span></span> |<span data-ttu-id="25341-701">Igen</span><span class="sxs-lookup"><span data-stu-id="25341-701">Yes</span></span> |
| <span data-ttu-id="25341-702">HK-c8-keleti-us</span><span class="sxs-lookup"><span data-stu-id="25341-702">hk-c8-east-us</span></span> |<span data-ttu-id="25341-703">Adatok</span><span class="sxs-lookup"><span data-stu-id="25341-703">data</span></span> |<span data-ttu-id="25341-704">10.2.2.11</span><span class="sxs-lookup"><span data-stu-id="25341-704">10.2.2.11</span></span> |<span data-ttu-id="25341-705">HK-c-aset-2</span><span class="sxs-lookup"><span data-stu-id="25341-705">hk-c-aset-2</span></span> |<span data-ttu-id="25341-706">DC = EASTUS állvány = rack4</span><span class="sxs-lookup"><span data-stu-id="25341-706">dc =EASTUS rack =rack4</span></span> |<span data-ttu-id="25341-707">Nem</span><span class="sxs-lookup"><span data-stu-id="25341-707">No</span></span> |
| <span data-ttu-id="25341-708">HK-F1-keleti-us</span><span class="sxs-lookup"><span data-stu-id="25341-708">hk-w1-east-us</span></span> |<span data-ttu-id="25341-709">webalkalmazás</span><span class="sxs-lookup"><span data-stu-id="25341-709">web</span></span> |<span data-ttu-id="25341-710">10.2.1.4</span><span class="sxs-lookup"><span data-stu-id="25341-710">10.2.1.4</span></span> |<span data-ttu-id="25341-711">HK-w-aset-1</span><span class="sxs-lookup"><span data-stu-id="25341-711">hk-w-aset-1</span></span> |<span data-ttu-id="25341-712">N/A</span><span class="sxs-lookup"><span data-stu-id="25341-712">N/A</span></span> |<span data-ttu-id="25341-713">N/A</span><span class="sxs-lookup"><span data-stu-id="25341-713">N/A</span></span> |
| <span data-ttu-id="25341-714">HK-w2-keleti-us</span><span class="sxs-lookup"><span data-stu-id="25341-714">hk-w2-east-us</span></span> |<span data-ttu-id="25341-715">webalkalmazás</span><span class="sxs-lookup"><span data-stu-id="25341-715">web</span></span> |<span data-ttu-id="25341-716">10.2.1.5</span><span class="sxs-lookup"><span data-stu-id="25341-716">10.2.1.5</span></span> |<span data-ttu-id="25341-717">HK-w-aset-1</span><span class="sxs-lookup"><span data-stu-id="25341-717">hk-w-aset-1</span></span> |<span data-ttu-id="25341-718">N/A</span><span class="sxs-lookup"><span data-stu-id="25341-718">N/A</span></span> |<span data-ttu-id="25341-719">N/A</span><span class="sxs-lookup"><span data-stu-id="25341-719">N/A</span></span> |

<span data-ttu-id="25341-720">Kövesse hello ugyanaz, mint #1 régió utasításokat, de a 10.2.xxx.xxx címterület használata.</span><span class="sxs-lookup"><span data-stu-id="25341-720">Follow hello same instructions as region #1 but use 10.2.xxx.xxx address space.</span></span>

### <a name="step-9-configure-cassandra-on-each-vm"></a><span data-ttu-id="25341-721">9. lépés: Cassandra konfigurálása az egyes virtuális gépek</span><span class="sxs-lookup"><span data-stu-id="25341-721">Step 9: Configure Cassandra on each VM</span></span>
<span data-ttu-id="25341-722">Jelentkezzen be a virtuális gép hello és hello következőket hajthatja végre:</span><span class="sxs-lookup"><span data-stu-id="25341-722">Log into hello VM and perform hello following:</span></span>

1. <span data-ttu-id="25341-723">$CASS_HOME/conf/cassandra-rackdc.properties toospecify hello data center és állvány tulajdonságainak szerkesztése hello formátumban: dc = EASTUS állvány = rack1</span><span class="sxs-lookup"><span data-stu-id="25341-723">Edit $CASS_HOME/conf/cassandra-rackdc.properties toospecify hello data center and rack properties in hello format:  dc =EASTUS  rack =rack1</span></span>
2. <span data-ttu-id="25341-724">Cassandra.yaml tooconfigure kezdőérték csomópontok szerkesztése: magok: "10.1.2.4,10.1.2.6,10.1.2.8,10.1.2.10,10.2.2.4,10.2.2.6,10.2.2.8,10.2.2.10"</span><span class="sxs-lookup"><span data-stu-id="25341-724">Edit cassandra.yaml tooconfigure seed nodes:  Seeds: "10.1.2.4,10.1.2.6,10.1.2.8,10.1.2.10,10.2.2.4,10.2.2.6,10.2.2.8,10.2.2.10"</span></span>

### <a name="step-10-start-cassandra"></a><span data-ttu-id="25341-725">10. lépés: Indítsa el a Cassandra</span><span class="sxs-lookup"><span data-stu-id="25341-725">Step 10: Start Cassandra</span></span>
<span data-ttu-id="25341-726">Jelentkezzen be az összes virtuális Géphez, és indítsa el a Cassandra hello háttérben hello a következő parancs futtatásával: $CASS_HOME/bin/cassandra</span><span class="sxs-lookup"><span data-stu-id="25341-726">Log into each VM and start Cassandra in hello background by running hello following command: $CASS_HOME/bin/cassandra</span></span>

## <a name="test-hello-multi-region-cluster"></a><span data-ttu-id="25341-727">Teszt hello több területi fürt</span><span class="sxs-lookup"><span data-stu-id="25341-727">Test hello Multi-Region Cluster</span></span>
<span data-ttu-id="25341-728">Mostanra Cassandra lett telepített too16-csomópont minden Azure régióban 8 csomópont.</span><span class="sxs-lookup"><span data-stu-id="25341-728">By now Cassandra has been deployed too16 nodes with 8 nodes in each Azure region.</span></span> <span data-ttu-id="25341-729">Ezek a csomópontok azonos fürt hello közös fürt neve és hello kezdőérték csomópont-konfiguráció hello szerepelnek.</span><span class="sxs-lookup"><span data-stu-id="25341-729">These nodes are in hello same cluster by virtue of hello common cluster name and hello seed node configuration.</span></span> <span data-ttu-id="25341-730">A következő folyamat tootest hello fürt hello használata:</span><span class="sxs-lookup"><span data-stu-id="25341-730">Use hello following process tootest hello cluster:</span></span>

### <a name="step-1-get-hello-internal-load-balancer-ip-for-both-hello-regions-using-powershell"></a><span data-ttu-id="25341-731">1. lépés: Hello belső terheléselosztó IP lekérése mindkét hello régió PowerShell használatával</span><span class="sxs-lookup"><span data-stu-id="25341-731">Step 1: Get hello internal load balancer IP for both hello regions using PowerShell</span></span>
* <span data-ttu-id="25341-732">"Hk-c-svc-nyugati-us" Get-AzureInternalLoadbalancer - szolgáltatásnév</span><span class="sxs-lookup"><span data-stu-id="25341-732">Get-AzureInternalLoadbalancer -ServiceName "hk-c-svc-west-us"</span></span>
* <span data-ttu-id="25341-733">"Hk-c-svc-keleti-us" Get-AzureInternalLoadbalancer - szolgáltatásnév</span><span class="sxs-lookup"><span data-stu-id="25341-733">Get-AzureInternalLoadbalancer -ServiceName "hk-c-svc-east-us"</span></span>  
  
    <span data-ttu-id="25341-734">Vegye figyelembe a hello IP-cím (pl. - 10.1.2.101, kelet - nyugati 10.2.2.101) jelenik meg.</span><span class="sxs-lookup"><span data-stu-id="25341-734">Note hello IP addresses (e.g. west - 10.1.2.101, east - 10.2.2.101) displayed.</span></span>

### <a name="step-2-execute-hello-following-in-hello-west-region-after-logging-into-hk-w1-west-us"></a><span data-ttu-id="25341-735">2. lépés: A végrehajtást hello következő hello nyugati terület hk-F1-nyugati-us való bejelentkezés után</span><span class="sxs-lookup"><span data-stu-id="25341-735">Step 2: Execute hello following in hello west region after logging into hk-w1-west-us</span></span>
1. <span data-ttu-id="25341-736">Végrehajtás $CASS_HOME/bin/cqlsh 10.1.2.101 9160</span><span class="sxs-lookup"><span data-stu-id="25341-736">Execute $CASS_HOME/bin/cqlsh 10.1.2.101 9160</span></span>
2. <span data-ttu-id="25341-737">A következő CQL parancsok hello hajtható végre:</span><span class="sxs-lookup"><span data-stu-id="25341-737">Execute hello following CQL commands:</span></span>
   
     <span data-ttu-id="25341-738">Kulcstérértesítések használatával hozzon létre customers_ks rendelkező replikációs = {"class": "NetworkToplogyStrategy", "WESTUS": 3, "EASTUS": 3};   HASZNÁLJA a customers_ks;   Hozzon létre a tábla Customers(customer_id int PRIMARY KEY, firstname text, lastname text);   Helyezze be a Customers(customer_id, firstname, lastname) VALUES(1, 'John', 'Doe');   Helyezze be a Customers(customer_id, firstname, lastname) értékek (2, "Jane", "Doe").   Válassza ki * ügyfelek;</span><span class="sxs-lookup"><span data-stu-id="25341-738">CREATE KEYSPACE customers_ks   WITH REPLICATION = { 'class' : 'NetworkToplogyStrategy', 'WESTUS' : 3, 'EASTUS' : 3};   USE customers_ks;   CREATE TABLE Customers(customer_id int PRIMARY KEY, firstname text, lastname text);   INSERT INTO Customers(customer_id, firstname, lastname) VALUES(1, 'John', 'Doe');   INSERT INTO Customers(customer_id, firstname, lastname) VALUES (2, 'Jane', 'Doe');   SELECT * FROM Customers;</span></span>

<span data-ttu-id="25341-739">Például hello alatt megjelenítésre kell megjelennie:</span><span class="sxs-lookup"><span data-stu-id="25341-739">You should see a display like hello one below:</span></span>

| <span data-ttu-id="25341-740">customer_id</span><span class="sxs-lookup"><span data-stu-id="25341-740">customer_id</span></span> | <span data-ttu-id="25341-741">Utónév</span><span class="sxs-lookup"><span data-stu-id="25341-741">firstname</span></span> | <span data-ttu-id="25341-742">Vezetéknév</span><span class="sxs-lookup"><span data-stu-id="25341-742">Lastname</span></span> |
| --- | --- | --- |
| <span data-ttu-id="25341-743">1</span><span class="sxs-lookup"><span data-stu-id="25341-743">1</span></span> |<span data-ttu-id="25341-744">John</span><span class="sxs-lookup"><span data-stu-id="25341-744">John</span></span> |<span data-ttu-id="25341-745">DOE</span><span class="sxs-lookup"><span data-stu-id="25341-745">Doe</span></span> |
| <span data-ttu-id="25341-746">2</span><span class="sxs-lookup"><span data-stu-id="25341-746">2</span></span> |<span data-ttu-id="25341-747">Jane</span><span class="sxs-lookup"><span data-stu-id="25341-747">Jane</span></span> |<span data-ttu-id="25341-748">DOE</span><span class="sxs-lookup"><span data-stu-id="25341-748">Doe</span></span> |

### <a name="step-3-execute-hello-following-in-hello-east-region-after-logging-into-hk-w1-east-us"></a><span data-ttu-id="25341-749">3. lépés: A végrehajtást hello következő hello keleti terület hk-F1-keleti-us való bejelentkezés után:</span><span class="sxs-lookup"><span data-stu-id="25341-749">Step 3: Execute hello following in hello east region after logging into hk-w1-east-us:</span></span>
1. <span data-ttu-id="25341-750">Végrehajtás $CASS_HOME/bin/cqlsh 10.2.2.101 9160</span><span class="sxs-lookup"><span data-stu-id="25341-750">Execute $CASS_HOME/bin/cqlsh 10.2.2.101 9160</span></span>
2. <span data-ttu-id="25341-751">A következő CQL parancsok hello hajtható végre:</span><span class="sxs-lookup"><span data-stu-id="25341-751">Execute hello following CQL commands:</span></span>
   
     <span data-ttu-id="25341-752">HASZNÁLJA a customers_ks;   Hozzon létre a tábla Customers(customer_id int PRIMARY KEY, firstname text, lastname text);   Helyezze be a Customers(customer_id, firstname, lastname) VALUES(1, 'John', 'Doe');   Helyezze be a Customers(customer_id, firstname, lastname) értékek (2, "Jane", "Doe").   Válassza ki * ügyfelek;</span><span class="sxs-lookup"><span data-stu-id="25341-752">USE customers_ks;   CREATE TABLE Customers(customer_id int PRIMARY KEY, firstname text, lastname text);   INSERT INTO Customers(customer_id, firstname, lastname) VALUES(1, 'John', 'Doe');   INSERT INTO Customers(customer_id, firstname, lastname) VALUES (2, 'Jane', 'Doe');   SELECT * FROM Customers;</span></span>

<span data-ttu-id="25341-753">Azonos jeleníti meg, mint hello nyugati régiójában hello kell megjelennie:</span><span class="sxs-lookup"><span data-stu-id="25341-753">You should see hello same display as seen for hello West region:</span></span>

| <span data-ttu-id="25341-754">customer_id</span><span class="sxs-lookup"><span data-stu-id="25341-754">customer_id</span></span> | <span data-ttu-id="25341-755">Utónév</span><span class="sxs-lookup"><span data-stu-id="25341-755">firstname</span></span> | <span data-ttu-id="25341-756">Vezetéknév</span><span class="sxs-lookup"><span data-stu-id="25341-756">Lastname</span></span> |
| --- | --- | --- |
| <span data-ttu-id="25341-757">1</span><span class="sxs-lookup"><span data-stu-id="25341-757">1</span></span> |<span data-ttu-id="25341-758">John</span><span class="sxs-lookup"><span data-stu-id="25341-758">John</span></span> |<span data-ttu-id="25341-759">DOE</span><span class="sxs-lookup"><span data-stu-id="25341-759">Doe</span></span> |
| <span data-ttu-id="25341-760">2</span><span class="sxs-lookup"><span data-stu-id="25341-760">2</span></span> |<span data-ttu-id="25341-761">Jane</span><span class="sxs-lookup"><span data-stu-id="25341-761">Jane</span></span> |<span data-ttu-id="25341-762">DOE</span><span class="sxs-lookup"><span data-stu-id="25341-762">Doe</span></span> |

<span data-ttu-id="25341-763">Néhány további Beszúrások hajtható végre, és, hogy azok beszerezni replikált toowest-us hello fürt része.</span><span class="sxs-lookup"><span data-stu-id="25341-763">Execute a few more inserts and see that those get replicated toowest-us part of hello cluster.</span></span>

## <a name="test-cassandra-cluster-from-nodejs"></a><span data-ttu-id="25341-764">Cassandra Tesztfürthöz Node.js-ből</span><span class="sxs-lookup"><span data-stu-id="25341-764">Test Cassandra Cluster from Node.js</span></span>
<span data-ttu-id="25341-765">Hello Linux virtuális gépek egyike segítségével jön létre hello "web" réteg korábban, azt fogja végrehajtani egy egyszerű Node.js parancsfájl tooread hello korábban beszúrt adatok</span><span class="sxs-lookup"><span data-stu-id="25341-765">Using one of hello Linux VMs crated in hello "web" tier previously, we will execute a simple Node.js script tooread hello previously inserted data</span></span>

<span data-ttu-id="25341-766">**1. lépés: A Node.js és Cassandra ügyfél telepítése**</span><span class="sxs-lookup"><span data-stu-id="25341-766">**Step 1: Install Node.js and Cassandra Client**</span></span>

1. <span data-ttu-id="25341-767">Telepítse a Node.js és npm</span><span class="sxs-lookup"><span data-stu-id="25341-767">Install Node.js and npm</span></span>
2. <span data-ttu-id="25341-768">Telepítse a csomag "cassandra-ügyfél csomópont" npm segítségével</span><span class="sxs-lookup"><span data-stu-id="25341-768">Install node package "cassandra-client" using npm</span></span>
3. <span data-ttu-id="25341-769">A következő parancsfájl hello rendszerhéj-parancssorba, mely megjeleníti a json-karakterláncban hello hello beolvasott adatok hello hajtható végre:</span><span class="sxs-lookup"><span data-stu-id="25341-769">Execute hello following script at hello shell prompt which displays hello json string of hello retrieved data:</span></span>
   
        var pooledCon = require('cassandra-client').PooledConnection;
        var ksName = "custsupport_ks";
        var cfName = "customers_cf";
        var hostList = ['internal_loadbalancer_ip:9160'];
        var ksConOptions = { hosts: hostList,
                             keyspace: ksName, use_bigints: false };
   
        function createKeyspace(callback){
           var cql = 'CREATE KEYSPACE ' + ksName + ' WITH strategy_class=SimpleStrategy AND strategy_options:replication_factor=1';
           var sysConOptions = { hosts: hostList,  
                                 keyspace: 'system', use_bigints: false };
           var con = new pooledCon(sysConOptions);
           con.execute(cql,[],function(err) {
           if (err) {
             console.log("Failed toocreate Keyspace: " + ksName);
             console.log(err);
           }
           else {
             console.log("Created Keyspace: " + ksName);
             callback(ksConOptions, populateCustomerData);
           }
           });
           con.shutdown();
        }
   
        function createColumnFamily(ksConOptions, callback){
          var params = ['customers_cf','custid','varint','custname',
                        'text','custaddress','text'];
          var cql = 'CREATE COLUMNFAMILY ? (? ? PRIMARY KEY,? ?, ? ?)';
        var con =  new pooledCon(ksConOptions);
          con.execute(cql,params,function(err) {
              if (err) {
                 console.log("Failed toocreate column family: " + params[0]);
                 console.log(err);
              }
              else {
                 console.log("Created column family: " + params[0]);
                 callback();
              }
          });
          con.shutdown();
        }
   
        //populate Data
        function populateCustomerData() {
           var params = ['John','Infinity Dr, TX', 1];
           updateCustomer(ksConOptions,params);
   
           params = ['Tom','Fermat Ln, WA', 2];
           updateCustomer(ksConOptions,params);
        }
   
        //update will also insert hello record if none exists
        function updateCustomer(ksConOptions,params)
        {
          var cql = 'UPDATE customers_cf SET custname=?,custaddress=? where custid=?';
          var con = new pooledCon(ksConOptions);
          con.execute(cql,params,function(err) {
              if (err) console.log(err);
              else console.log("Inserted customer : " + params[0]);
          });
          con.shutdown();
        }
   
        //read hello two rows inserted above
        function readCustomer(ksConOptions)
        {
          var cql = 'SELECT * FROM customers_cf WHERE custid IN (1,2)';
          var con = new pooledCon(ksConOptions);
          con.execute(cql,[],function(err,rows) {
              if (err)
                 console.log(err);
              else
                 for (var i=0; i<rows.length; i++)
                    console.log(JSON.stringify(rows[i]));
            });
           con.shutdown();
        }
   
        //exectue hello code
        createKeyspace(createColumnFamily);
        readCustomer(ksConOptions)

## <a name="conclusion"></a><span data-ttu-id="25341-770">Összegzés</span><span class="sxs-lookup"><span data-stu-id="25341-770">Conclusion</span></span>
<span data-ttu-id="25341-771">Microsoft Azure a rugalmas platform, amely lehetővé teszi a Microsoft, valamint nyílt forráskódú szoftvereket hello fut, amint azt a ebben a gyakorlatban.</span><span class="sxs-lookup"><span data-stu-id="25341-771">Microsoft Azure is a flexible platform that allows hello running of both Microsoft as well as open source software as demonstrated by this exercise.</span></span> <span data-ttu-id="25341-772">Magas rendelkezésre állású Cassandra fürtök egyetlen adatközpontba több tartalék tartományokban hello fürtcsomópontok terjednek hello keresztül telepíthető.</span><span class="sxs-lookup"><span data-stu-id="25341-772">Highly available Cassandra clusters can be deployed on a single data center through hello spreading of hello cluster nodes across multiple fault domains.</span></span> <span data-ttu-id="25341-773">Cassandra fürtök különféle régiókban földrajzilag távoli Azure katasztrófa igazoló rendszerekhez is telepíthető.</span><span class="sxs-lookup"><span data-stu-id="25341-773">Cassandra clusters can also be deployed across multiple geographically distant Azure regions for disaster proof systems.</span></span> <span data-ttu-id="25341-774">Azure és Cassandra együtt lehetővé teszi, hogy hello építése jól skálázható, magas rendelkezésre állású és a vészhelyreállítás helyreállítható felhőszolgáltatások szükséges mai internet által méret szolgáltatások.</span><span class="sxs-lookup"><span data-stu-id="25341-774">Azure and Cassandra together enables hello construction of highly scalable, highly available and disaster recoverable cloud services needed by today's internet scale services.</span></span>  

## <a name="references"></a><span data-ttu-id="25341-775">Referencia</span><span class="sxs-lookup"><span data-stu-id="25341-775">References</span></span>
* [<span data-ttu-id="25341-776">http://cassandra.Apache.org</span><span class="sxs-lookup"><span data-stu-id="25341-776">http://cassandra.apache.org</span></span>](http://cassandra.apache.org)
* [<span data-ttu-id="25341-777">http://www.datastax.com</span><span class="sxs-lookup"><span data-stu-id="25341-777">http://www.datastax.com</span></span>](http://www.datastax.com)
* [<span data-ttu-id="25341-778">http://www.nodejs.org</span><span class="sxs-lookup"><span data-stu-id="25341-778">http://www.nodejs.org</span></span>](http://www.nodejs.org)

