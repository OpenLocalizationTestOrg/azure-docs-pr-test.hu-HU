---
title: "aaaDNS névfeloldási lehetőségek a Linux virtuális gépek Azure-ban"
description: "Név feloldása forgatókönyvek a Linux virtuális gépek Azure IaaS, beleértve a megadott DNS-szolgáltatásokra, hibrid külső DNS- és Bring Your Own DNS-kiszolgáló."
services: virtual-machines
documentationcenter: na
author: RicksterCDN
manager: timlt
editor: tysonn
ms.assetid: 787a1e04-cebf-4122-a1b4-1fcf0a2bbf5f
ms.service: virtual-machines-linux
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 10/19/2016
ms.author: rclaus
ms.openlocfilehash: 7df2320b6f6b42b479bf4070ea60fe5770a78a41
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/06/2017
---
# <a name="dns-name-resolution-options-for-linux-virtual-machines-in-azure"></a><span data-ttu-id="20917-103">A DNS-névfeloldás beállítások a Linux virtuális gépek Azure-ban</span><span class="sxs-lookup"><span data-stu-id="20917-103">DNS Name Resolution options for Linux virtual machines in Azure</span></span>
<span data-ttu-id="20917-104">Azure alapértelmezés szerint a DNS-névfeloldás biztosít egy virtuális hálózaton lévő összes virtuális gépekhez.</span><span class="sxs-lookup"><span data-stu-id="20917-104">Azure provides DNS name resolution by default for all virtual machines that are in a single virtual network.</span></span> <span data-ttu-id="20917-105">Valósíthatja meg a saját DNS-név feloldása megoldást a saját DNS-szolgáltatások konfigurálása a virtuális gépeken, amely az Azure futtatja.</span><span class="sxs-lookup"><span data-stu-id="20917-105">You can implement your own DNS name resolution solution by configuring your own DNS services on your virtual machines that Azure hosts.</span></span> <span data-ttu-id="20917-106">hello következő esetekben kell segítségével eldöntheti, hello eszközre, amely a megfelelőt.</span><span class="sxs-lookup"><span data-stu-id="20917-106">hello following scenarios should help you choose hello one that works for your situation.</span></span>

* [<span data-ttu-id="20917-107">Azure által biztosított névfeloldás</span><span class="sxs-lookup"><span data-stu-id="20917-107">Name resolution that Azure provides</span></span>](#azure-provided-name-resolution)
* [<span data-ttu-id="20917-108">Névfeloldás a saját DNS-kiszolgáló használatával</span><span class="sxs-lookup"><span data-stu-id="20917-108">Name resolution using your own DNS server</span></span>](#name-resolution-using-your-own-dns-server)

<span data-ttu-id="20917-109">névfeloldás, amelyekkel hello típusa attól függ, hogy a virtuális gépek és a szerepkörpéldányok kell toocommunicate egymással.</span><span class="sxs-lookup"><span data-stu-id="20917-109">hello type of name resolution that you use depends on how your virtual machines and role instances need toocommunicate with each other.</span></span>

<span data-ttu-id="20917-110">hello alábbi táblázat szemlélteti forgatókönyvek és a megfelelő név feloldása megoldások:</span><span class="sxs-lookup"><span data-stu-id="20917-110">hello following table illustrates scenarios and corresponding name resolution solutions:</span></span>

| <span data-ttu-id="20917-111">**A forgatókönyv**</span><span class="sxs-lookup"><span data-stu-id="20917-111">**Scenario**</span></span> | <span data-ttu-id="20917-112">**Megoldás**</span><span class="sxs-lookup"><span data-stu-id="20917-112">**Solution**</span></span> | <span data-ttu-id="20917-113">**Utótag**</span><span class="sxs-lookup"><span data-stu-id="20917-113">**Suffix**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="20917-114">Névfeloldás a szerepkörpéldányok vagy hello lévő virtuális gépek közötti azonos virtuális hálózatban</span><span class="sxs-lookup"><span data-stu-id="20917-114">Name resolution between role instances or virtual machines in hello same virtual network</span></span> |[<span data-ttu-id="20917-115">Azure által biztosított névfeloldás</span><span class="sxs-lookup"><span data-stu-id="20917-115">Name resolution that Azure provides</span></span>](#azure-provided-name-resolution) |<span data-ttu-id="20917-116">állomásnév vagy teljesen minősített tartománynevét (FQDN)</span><span class="sxs-lookup"><span data-stu-id="20917-116">hostname or fully-qualified domain name (FQDN)</span></span> |
| <span data-ttu-id="20917-117">Névfeloldás szerepkörpéldányokat vagy különböző virtuális hálózatokon lévő virtuális gépek között</span><span class="sxs-lookup"><span data-stu-id="20917-117">Name resolution between role instances or virtual machines in different virtual networks</span></span> |<span data-ttu-id="20917-118">Ügyfél által felügyelt DNS-kiszolgálók, amelyek az Azure-ban (DNS-proxy) megoldás virtuális hálózatok közötti lekérdezéseket.</span><span class="sxs-lookup"><span data-stu-id="20917-118">Customer-managed DNS servers that forward queries between virtual networks for resolution by Azure (DNS proxy).</span></span> <span data-ttu-id="20917-119">Lásd: [névfeloldáshoz a saját DNS-kiszolgáló](#name-resolution-using-your-own-dns-server).</span><span class="sxs-lookup"><span data-stu-id="20917-119">See [Name resolution using your own DNS server](#name-resolution-using-your-own-dns-server).</span></span> |<span data-ttu-id="20917-120">Kizárólag az FQDN esetében</span><span class="sxs-lookup"><span data-stu-id="20917-120">FQDN only</span></span> |
| <span data-ttu-id="20917-121">A helyszíni számítógépek és a szerepkörpéldányok vagy Azure virtuális gépek szolgáltatásnevek feloldását.</span><span class="sxs-lookup"><span data-stu-id="20917-121">Resolution of on-premises computers and service names from role instances or virtual machines in Azure</span></span> |<span data-ttu-id="20917-122">Ügyfél által felügyelt DNS-kiszolgálók (például a helyi tartományvezérlő, helyi írásvédett tartományvezérlő vagy másodlagos DNS zónaletöltés használatával szinkronizálva).</span><span class="sxs-lookup"><span data-stu-id="20917-122">Customer-managed DNS servers (for example, on-premises domain controller, local read-only domain controller, or a DNS secondary synced by using zone transfers).</span></span> <span data-ttu-id="20917-123">Lásd: [névfeloldáshoz a saját DNS-kiszolgáló](#name-resolution-using-your-own-dns-server).</span><span class="sxs-lookup"><span data-stu-id="20917-123">See [Name resolution using your own DNS server](#name-resolution-using-your-own-dns-server).</span></span> |<span data-ttu-id="20917-124">Kizárólag az FQDN esetében</span><span class="sxs-lookup"><span data-stu-id="20917-124">FQDN only</span></span> |
| <span data-ttu-id="20917-125">A helyszíni számítógépek Azure állomásnevének feloldása</span><span class="sxs-lookup"><span data-stu-id="20917-125">Resolution of Azure hostnames from on-premises computers</span></span> |<span data-ttu-id="20917-126">Lekérdezések tooa ügyfél által felügyelt DNS-proxy kiszolgáló hello megfelelő virtuális hálózat továbbítja.</span><span class="sxs-lookup"><span data-stu-id="20917-126">Forward queries tooa customer-managed DNS proxy server in hello corresponding virtual network.</span></span> <span data-ttu-id="20917-127">hello proxykiszolgáló lekérdezések tooAzure a feloldásához továbbítja.</span><span class="sxs-lookup"><span data-stu-id="20917-127">hello proxy server forwards queries tooAzure for resolution.</span></span> <span data-ttu-id="20917-128">Lásd: [névfeloldáshoz a saját DNS-kiszolgáló](#name-resolution-using-your-own-dns-server).</span><span class="sxs-lookup"><span data-stu-id="20917-128">See [Name resolution using your own DNS server](#name-resolution-using-your-own-dns-server).</span></span> |<span data-ttu-id="20917-129">Kizárólag az FQDN esetében</span><span class="sxs-lookup"><span data-stu-id="20917-129">FQDN only</span></span> |
| <span data-ttu-id="20917-130">Névkeresési DNS, a belső IP-címek</span><span class="sxs-lookup"><span data-stu-id="20917-130">Reverse DNS for internal IPs</span></span> |[<span data-ttu-id="20917-131">Névfeloldás a saját DNS-kiszolgáló használatával</span><span class="sxs-lookup"><span data-stu-id="20917-131">Name resolution using your own DNS server</span></span>](#name-resolution-using-your-own-dns-server) |<span data-ttu-id="20917-132">n/a</span><span class="sxs-lookup"><span data-stu-id="20917-132">n/a</span></span> |

## <a name="name-resolution-that-azure-provides"></a><span data-ttu-id="20917-133">Azure által biztosított névfeloldás</span><span class="sxs-lookup"><span data-stu-id="20917-133">Name resolution that Azure provides</span></span>
<span data-ttu-id="20917-134">Nyilvános DNS-nevek feloldása, valamint Azure belső névfeloldást biztosít a virtuális gépek és a szerepkör-példányok hello ugyanazt a virtuális hálózatot.</span><span class="sxs-lookup"><span data-stu-id="20917-134">Along with resolution of public DNS names, Azure provides internal name resolution for virtual machines and role instances that are in hello same virtual network.</span></span> <span data-ttu-id="20917-135">A virtuális hálózatok az Azure Resource Manageren alapuló hello DNS-utótag összhangban a virtuális hálózaton hello; nincs szükség a hello teljes Tartománynevét.</span><span class="sxs-lookup"><span data-stu-id="20917-135">In virtual networks that are based on Azure Resource Manager, hello DNS suffix is consistent across hello virtual network; hello FQDN is not needed.</span></span> <span data-ttu-id="20917-136">DNS-nevek tooboth hálózati adapterek (NIC) és a virtuális gépek hozzárendelhetők legyenek.</span><span class="sxs-lookup"><span data-stu-id="20917-136">DNS names can be assigned tooboth network interface cards (NICs) and virtual machines.</span></span> <span data-ttu-id="20917-137">Bár az Azure által biztosított hello névfeloldás kell konfigurálni, nincs hello megfelelő választás az összes központi telepítési forgatókönyv hello előző táblázatban látható módon.</span><span class="sxs-lookup"><span data-stu-id="20917-137">Although hello name resolution that Azure provides does not require any configuration, it is not hello appropriate choice for all deployment scenarios, as seen on hello preceding table.</span></span>

### <a name="features-and-considerations"></a><span data-ttu-id="20917-138">Szolgáltatások és szempontok</span><span class="sxs-lookup"><span data-stu-id="20917-138">Features and considerations</span></span>
<span data-ttu-id="20917-139">**Szolgáltatások:**</span><span class="sxs-lookup"><span data-stu-id="20917-139">**Features:**</span></span>

* <span data-ttu-id="20917-140">Beállításokra nincs is szükség toouse névfeloldás Azure által biztosított.</span><span class="sxs-lookup"><span data-stu-id="20917-140">No configuration is required toouse name resolution that Azure provides.</span></span>
* <span data-ttu-id="20917-141">Azure által biztosított hello névfeloldási szolgáltatás magas rendelkezésre állású.</span><span class="sxs-lookup"><span data-stu-id="20917-141">hello name resolution service that Azure provides is highly available.</span></span> <span data-ttu-id="20917-142">Nem kell toocreate, és kezelheti a fürtöket a saját DNS-kiszolgálók.</span><span class="sxs-lookup"><span data-stu-id="20917-142">You don't need toocreate and manage clusters of your own DNS servers.</span></span>
* <span data-ttu-id="20917-143">Azure által biztosított hello névfeloldási szolgáltatás használható együtt a saját DNS-kiszolgálók tooresolve helyszíni, mind az Azure állomásnevek.</span><span class="sxs-lookup"><span data-stu-id="20917-143">hello name resolution service that Azure provides can be used along with your own DNS servers tooresolve both on-premises and Azure hostnames.</span></span>
* <span data-ttu-id="20917-144">Virtuális gépek anélkül hello FQDN virtuális hálózatok közötti névfeloldás valósul meg.</span><span class="sxs-lookup"><span data-stu-id="20917-144">Name resolution is provided between virtual machines in virtual networks without need for hello FQDN.</span></span>
* <span data-ttu-id="20917-145">Használhatja a központi telepítések jellemző állomásnevek ahelyett, hogy működik-e automatikusan létrehozott névvel.</span><span class="sxs-lookup"><span data-stu-id="20917-145">You can use hostnames that best describe your deployments rather than working with auto-generated names.</span></span>

<span data-ttu-id="20917-146">**Szempontok:**</span><span class="sxs-lookup"><span data-stu-id="20917-146">**Considerations:**</span></span>

* <span data-ttu-id="20917-147">nem lehet módosítani a hello DNS-utótagot, amely Azure-hoz.</span><span class="sxs-lookup"><span data-stu-id="20917-147">hello DNS suffix that Azure creates cannot be modified.</span></span>
* <span data-ttu-id="20917-148">Nem lehet manuálisan regisztrálni a saját rögzíti.</span><span class="sxs-lookup"><span data-stu-id="20917-148">You cannot manually register your own records.</span></span>
* <span data-ttu-id="20917-149">WINS- és NetBIOS nem támogatottak.</span><span class="sxs-lookup"><span data-stu-id="20917-149">WINS and NetBIOS are not supported.</span></span>
* <span data-ttu-id="20917-150">Állomásnevek kell lennie a DNS-kompatibilis.</span><span class="sxs-lookup"><span data-stu-id="20917-150">Hostnames must be DNS-compatible.</span></span>
    <span data-ttu-id="20917-151">Neveket kell használnia csak 0-9, a – z, és a "-", és nem kezdődhet vagy végződhet egy "-".</span><span class="sxs-lookup"><span data-stu-id="20917-151">Names must use only 0-9, a-z, and '-', and they cannot start or end with a '-'.</span></span> <span data-ttu-id="20917-152">Című rész RFC 3696 2.</span><span class="sxs-lookup"><span data-stu-id="20917-152">See RFC 3696 Section 2.</span></span>
* <span data-ttu-id="20917-153">DNS-lekérdezés forgalom az egyes virtuális gépek folyamatban van.</span><span class="sxs-lookup"><span data-stu-id="20917-153">DNS query traffic is throttled for each virtual machine.</span></span> <span data-ttu-id="20917-154">Sávszélesség-szabályozás nem befolyásolja a legtöbb alkalmazást.</span><span class="sxs-lookup"><span data-stu-id="20917-154">Throttling shouldn't impact most applications.</span></span>  <span data-ttu-id="20917-155">Ha kérelem szabályozása, győződjön meg arról, hogy engedélyezve van-e az ügyféloldali gyorsítótárazás.</span><span class="sxs-lookup"><span data-stu-id="20917-155">If request throttling is observed, ensure that client-side caching is enabled.</span></span>  <span data-ttu-id="20917-156">További információkért lásd: [hello Azure által biztosított névfeloldás a legtöbb kezdeti](#getting-the-most-from-name-resolution-that-azure-provides).</span><span class="sxs-lookup"><span data-stu-id="20917-156">For more information, see [Getting hello most from name resolution that Azure provides](#getting-the-most-from-name-resolution-that-azure-provides).</span></span>

### <a name="getting-hello-most-from-name-resolution-that-azure-provides"></a><span data-ttu-id="20917-157">Hello Azure által biztosított névfeloldás a legtöbb beolvasása</span><span class="sxs-lookup"><span data-stu-id="20917-157">Getting hello most from name resolution that Azure provides</span></span>
<span data-ttu-id="20917-158">**Ügyféloldali gyorsítótárazás:**</span><span class="sxs-lookup"><span data-stu-id="20917-158">**Client-side caching:**</span></span>

<span data-ttu-id="20917-159">Bizonyos DNS-lekérdezéseket a rendszer nem küldi hello hálózaton keresztül.</span><span class="sxs-lookup"><span data-stu-id="20917-159">Some DNS queries are not sent across hello network.</span></span> <span data-ttu-id="20917-160">Ügyféloldali gyorsítótárazás segít a késés csökkentésére, és növelheti rugalmasság toonetwork inkonzisztenciák feloldása ismétlődő DNS-lekérdezések a helyi gyorsítótárból.</span><span class="sxs-lookup"><span data-stu-id="20917-160">Client-side caching helps reduce latency and improve resilience toonetwork inconsistencies by resolving recurring DNS queries from a local cache.</span></span> <span data-ttu-id="20917-161">DNS-rekordokat tartalmaz egy Time-Live (TTL), amely lehetővé teszi hello toostore hello gyorsítótárrekord, amíg a rekord frissesség befolyásolása nélkül.</span><span class="sxs-lookup"><span data-stu-id="20917-161">DNS records contain a Time-To-Live (TTL), which enables hello cache toostore hello record for as long as possible without impacting record freshness.</span></span> <span data-ttu-id="20917-162">Ennek eredményeképpen ügyféloldali gyorsítótárazás alkalmas a legtöbb esetben.</span><span class="sxs-lookup"><span data-stu-id="20917-162">As a result, client-side caching is suitable for most situations.</span></span>

<span data-ttu-id="20917-163">Egyes Linux terjesztésekről gyorsítótárazás alapértelmezés szerint nem tartalmaznak.</span><span class="sxs-lookup"><span data-stu-id="20917-163">Some Linux distributions do not include caching by default.</span></span> <span data-ttu-id="20917-164">Azt javasoljuk, hogy a gyorsítótár tooeach Linux virtuális gép hozzáadása után ellenőrizheti, hogy a helyi gyorsítótárba még nem.</span><span class="sxs-lookup"><span data-stu-id="20917-164">We recommend that you add a cache tooeach Linux virtual machine after you check that there isn't a local cache already.</span></span>

<span data-ttu-id="20917-165">Számos különböző DNS-, csomagok, például a dnsmasq, gyorsítótárazás érhetők el.</span><span class="sxs-lookup"><span data-stu-id="20917-165">Several different DNS caching packages, such as dnsmasq, are available.</span></span> <span data-ttu-id="20917-166">A leggyakoribb terjesztéseket hello az alábbiakban hello lépéseket tooinstall dnsmasq:</span><span class="sxs-lookup"><span data-stu-id="20917-166">Here are hello steps tooinstall dnsmasq on hello most common distributions:</span></span>

<span data-ttu-id="20917-167">**Ubuntu (használ resolvconf)**</span><span class="sxs-lookup"><span data-stu-id="20917-167">**Ubuntu (uses resolvconf)**</span></span>
  * <span data-ttu-id="20917-168">Telepítse a hello dnsmasq csomagot ("sudo apt-get-telepítés dnsmasq").</span><span class="sxs-lookup"><span data-stu-id="20917-168">Install hello dnsmasq package (“sudo apt-get install dnsmasq”).</span></span>

<span data-ttu-id="20917-169">**SUSE (használ netconf)**:</span><span class="sxs-lookup"><span data-stu-id="20917-169">**SUSE (uses netconf)**:</span></span>
1. <span data-ttu-id="20917-170">Telepítse a hello dnsmasq csomagot ("sudo zypper telepítés dnsmasq").</span><span class="sxs-lookup"><span data-stu-id="20917-170">Install hello dnsmasq package (“sudo zypper install dnsmasq”).</span></span>
2. <span data-ttu-id="20917-171">Engedélyezze a hello dnsmasq szolgáltatást ("systemctl engedélyezése dnsmasq.service").</span><span class="sxs-lookup"><span data-stu-id="20917-171">Enable hello dnsmasq service (“systemctl enable dnsmasq.service”).</span></span>
3. <span data-ttu-id="20917-172">Indítsa el a hello dnsmasq szolgáltatást ("systemctl start dnsmasq.service").</span><span class="sxs-lookup"><span data-stu-id="20917-172">Start hello dnsmasq service (“systemctl start dnsmasq.service”).</span></span>
4. <span data-ttu-id="20917-173">Szerkesztés "/ etc/sysconfig/hálózati/config", és módosítsa a NETCONFIG_DNS_FORWARDER = "" túl "dnsmasq".</span><span class="sxs-lookup"><span data-stu-id="20917-173">Edit “/etc/sysconfig/network/config”, and change NETCONFIG_DNS_FORWARDER="" too”dnsmasq”.</span></span>
5. <span data-ttu-id="20917-174">Frissíti, a helyi DNS-feloldási hello resolv.conf ("netconfig update") tooset hello gyorsítótárát.</span><span class="sxs-lookup"><span data-stu-id="20917-174">Update resolv.conf ("netconfig update") tooset hello cache as hello local DNS resolver.</span></span>

<span data-ttu-id="20917-175">**Rosszindulatú Wave szoftver (korábbi nevén OpenLogic; NetworkManager használja) – centOS**</span><span class="sxs-lookup"><span data-stu-id="20917-175">**CentOS by Rogue Wave Software (formerly OpenLogic; uses NetworkManager)**</span></span>
1. <span data-ttu-id="20917-176">Telepítse a hello dnsmasq csomagot ("sudo yum telepítés dnsmasq").</span><span class="sxs-lookup"><span data-stu-id="20917-176">Install hello dnsmasq package (“sudo yum install dnsmasq”).</span></span>
2. <span data-ttu-id="20917-177">Engedélyezze a hello dnsmasq szolgáltatást ("systemctl engedélyezése dnsmasq.service").</span><span class="sxs-lookup"><span data-stu-id="20917-177">Enable hello dnsmasq service (“systemctl enable dnsmasq.service”).</span></span>
3. <span data-ttu-id="20917-178">Indítsa el a hello dnsmasq szolgáltatást ("systemctl start dnsmasq.service").</span><span class="sxs-lookup"><span data-stu-id="20917-178">Start hello dnsmasq service (“systemctl start dnsmasq.service”).</span></span>
4. <span data-ttu-id="20917-179">Adja hozzá a "név-tartománykiszolgálók 127.0.0.1; illesztenie" too"/etc/dhclient-eth0.conf".</span><span class="sxs-lookup"><span data-stu-id="20917-179">Add “prepend domain-name-servers 127.0.0.1;” too“/etc/dhclient-eth0.conf”.</span></span>
5. <span data-ttu-id="20917-180">Indítsa újra a hello hálózati szolgáltatás ("szolgáltatás hálózati restart") tooset hello gyorsítótár, a helyi DNS-feloldási hello</span><span class="sxs-lookup"><span data-stu-id="20917-180">Restart hello network service (“service network restart”) tooset hello cache as hello local DNS resolver</span></span>

> [!NOTE]
> <span data-ttu-id="20917-181">: hello "dnsmasq" csomag Ez csak egy hello számos DNS gyorsítótárazza a Linux elérhető.</span><span class="sxs-lookup"><span data-stu-id="20917-181">: hello 'dnsmasq' package is only one of hello many DNS caches that are available for Linux.</span></span> <span data-ttu-id="20917-182">Használatba vétel előtt ellenőrizze az igényeinek alkalmas, és nincs más gyorsítótár telepített.</span><span class="sxs-lookup"><span data-stu-id="20917-182">Before you use it, check its suitability for your needs and that no other cache is installed.</span></span>
>
>

<span data-ttu-id="20917-183">**Ügyféloldali újrapróbálkozások**</span><span class="sxs-lookup"><span data-stu-id="20917-183">**Client-side retries**</span></span>

<span data-ttu-id="20917-184">DNS elsősorban UDP protokoll.</span><span class="sxs-lookup"><span data-stu-id="20917-184">DNS is primarily a UDP protocol.</span></span> <span data-ttu-id="20917-185">Hello UDP protokoll nem biztosítására üzenetkézbesítést, mert a DNS protokoll hello újrapróbálkozási logika kezeli.</span><span class="sxs-lookup"><span data-stu-id="20917-185">Because hello UDP protocol doesn't guarantee message delivery, hello DNS protocol itself handles retry logic.</span></span> <span data-ttu-id="20917-186">Minden DNS-ügyfél (operációs rendszer) hello létrehozásához használt beállítások függően különböző újrapróbálkozási logika is lehetnek:</span><span class="sxs-lookup"><span data-stu-id="20917-186">Each DNS client (operating system) can exhibit different retry logic depending on hello creator's preference:</span></span>

* <span data-ttu-id="20917-187">Windows operációs rendszerek újrapróbálkozás után egy második és majd újra egy másik kettő, négy, és egy másik négy másodperc.</span><span class="sxs-lookup"><span data-stu-id="20917-187">Windows operating systems retry after one second and then again after another two, four, and another four seconds.</span></span>
* <span data-ttu-id="20917-188">hello alapértelmezett Linux telepítő újrapróbálkozások öt másodperc múlva.</span><span class="sxs-lookup"><span data-stu-id="20917-188">hello default Linux setup retries after five seconds.</span></span>  <span data-ttu-id="20917-189">Meg kell változtatni a tooretry ötször egy másodperces időközönként.</span><span class="sxs-lookup"><span data-stu-id="20917-189">You should change this tooretry five times at one-second intervals.</span></span>  

<span data-ttu-id="20917-190">toocheck hello Linux virtuális gépen, "/etc/resolv.conf cat", aktuális beállításokat, és tekintse meg hello "beállítások" sor, például:</span><span class="sxs-lookup"><span data-stu-id="20917-190">toocheck hello current settings on a Linux virtual machine, 'cat /etc/resolv.conf', and look at hello 'options' line, for example:</span></span>

    options timeout:1 attempts:5

<span data-ttu-id="20917-191">hello resolv.conf fájl jön létre automatikusan, és nem szerkeszthető.</span><span class="sxs-lookup"><span data-stu-id="20917-191">hello resolv.conf file is auto-generated and should not be edited.</span></span> <span data-ttu-id="20917-192">hello hello "beállítások" sor eltérő terjesztési által hozzáadott lépéseit:</span><span class="sxs-lookup"><span data-stu-id="20917-192">hello specific steps that add hello 'options' line vary by distribution:</span></span>

<span data-ttu-id="20917-193">**Ubuntu** (resolvconf használ)</span><span class="sxs-lookup"><span data-stu-id="20917-193">**Ubuntu** (uses resolvconf)</span></span>
1. <span data-ttu-id="20917-194">Adja hozzá a hello beállítások sor too'/etc/resolveconf/resolv.conf.d/head ".</span><span class="sxs-lookup"><span data-stu-id="20917-194">Add hello options line too'/etc/resolveconf/resolv.conf.d/head'.</span></span>
2. <span data-ttu-id="20917-195">Futtassa a 'resolvconf -u' tooupdate.</span><span class="sxs-lookup"><span data-stu-id="20917-195">Run 'resolvconf -u' tooupdate.</span></span>

<span data-ttu-id="20917-196">**SUSE** (netconf használ)</span><span class="sxs-lookup"><span data-stu-id="20917-196">**SUSE** (uses netconf)</span></span>
1. <span data-ttu-id="20917-197">Adja hozzá a 'timeout:1 kísérletek: 5' toohello NETCONFIG_DNS_RESOLVER_OPTIONS = "" a "/ etc/sysconfig/hálózati/config" paraméter.</span><span class="sxs-lookup"><span data-stu-id="20917-197">Add 'timeout:1 attempts:5' toohello NETCONFIG_DNS_RESOLVER_OPTIONS="" parameter in '/etc/sysconfig/network/config'.</span></span>
2. <span data-ttu-id="20917-198">Futtassa a "netconfig frissítés" tooupdate.</span><span class="sxs-lookup"><span data-stu-id="20917-198">Run 'netconfig update' tooupdate.</span></span>

<span data-ttu-id="20917-199">**Az engedélyezetlen Wave szoftver (korábbi nevén OpenLogic) – centOS** (NetworkManager használ)</span><span class="sxs-lookup"><span data-stu-id="20917-199">**CentOS by Rogue Wave Software (formerly OpenLogic)** (uses NetworkManager)</span></span>
1. <span data-ttu-id="20917-200">Adja hozzá a too'/etc/NetworkManager/dispatcher.d/11-dhclient "echo" lehetőségek timeout:1 kísérletek: 5"" ".</span><span class="sxs-lookup"><span data-stu-id="20917-200">Add 'echo "options timeout:1 attempts:5"' too'/etc/NetworkManager/dispatcher.d/11-dhclient'.</span></span>
2. <span data-ttu-id="20917-201">Futtassa a "service hálózati restart" tooupdate.</span><span class="sxs-lookup"><span data-stu-id="20917-201">Run 'service network restart' tooupdate.</span></span>

## <a name="name-resolution-using-your-own-dns-server"></a><span data-ttu-id="20917-202">Névfeloldás a saját DNS-kiszolgáló használatával</span><span class="sxs-lookup"><span data-stu-id="20917-202">Name resolution using your own DNS server</span></span>
<span data-ttu-id="20917-203">A névfeloldási szükségleteit hello szolgáltatások, Azure által biztosított, előfordulhat, hogy túlmutató.</span><span class="sxs-lookup"><span data-stu-id="20917-203">Your name resolution needs may go beyond hello features that Azure provides.</span></span> <span data-ttu-id="20917-204">Például a DNS-feloldás virtuális hálózatok közötti lehet szükség.</span><span class="sxs-lookup"><span data-stu-id="20917-204">For example, you might require DNS resolution between virtual networks.</span></span> <span data-ttu-id="20917-205">toocover ebben az esetben a saját DNS-kiszolgálókat is használhat.</span><span class="sxs-lookup"><span data-stu-id="20917-205">toocover this scenario, you can use your own DNS servers.</span></span>  

<span data-ttu-id="20917-206">Egy virtuális hálózat is tud előrehaladó DNS-lekérdezések toorecursive feloldókat Azure tooresolve állomásnevének lévő DNS-kiszolgálók hello ugyanazt a virtuális hálózatot.</span><span class="sxs-lookup"><span data-stu-id="20917-206">DNS servers within a virtual network can forward DNS queries toorecursive resolvers of Azure tooresolve hostnames that are in hello same virtual network.</span></span> <span data-ttu-id="20917-207">Például az Azure-ban futó DNS-kiszolgáló válaszolhassanak tooDNS lekérdezések a saját DNS-zónát fájlokat, és minden más lekérdezések tooAzure továbbítja.</span><span class="sxs-lookup"><span data-stu-id="20917-207">For example, a DNS server that runs in Azure can respond tooDNS queries for its own DNS zone files and forward all other queries tooAzure.</span></span> <span data-ttu-id="20917-208">Ez a funkció lehetővé teszi a virtuális gépek toosee a zóna fájlok és az Azure által biztosított (keresztül hello továbbító) állomásnevek mindkét a bejegyzést.</span><span class="sxs-lookup"><span data-stu-id="20917-208">This functionality enables virtual machines toosee both your entries in your zone files and hostnames that Azure provides (via hello forwarder).</span></span> <span data-ttu-id="20917-209">Hozzáférés toohello rekurzív feloldókat Azure hello virtuális IP-cím 168.63.129.16 keresztül valósul meg.</span><span class="sxs-lookup"><span data-stu-id="20917-209">Access toohello recursive resolvers of Azure is provided via hello virtual IP 168.63.129.16.</span></span>

<span data-ttu-id="20917-210">DNS-továbbítást is lehetővé teszi, hogy a DNS-feloldás virtuális hálózatok között, és lehetővé teszi, hogy a helyszíni gépeket tooresolve állomásnevek Azure által biztosított.</span><span class="sxs-lookup"><span data-stu-id="20917-210">DNS forwarding also enables DNS resolution between virtual networks and enables your on-premises machines tooresolve hostnames that Azure provides.</span></span> <span data-ttu-id="20917-211">tooresolve hello DNS-kiszolgáló virtuális gép egy virtuális gép állomásnevét, kell lennie a hello azonos virtuális hálózatban, és a beállított tooforward állomásnév lekérdezések tooAzure kell.</span><span class="sxs-lookup"><span data-stu-id="20917-211">tooresolve a virtual machine's hostname, hello DNS server virtual machine must reside in hello same virtual network and be configured tooforward hostname queries tooAzure.</span></span> <span data-ttu-id="20917-212">Mivel a hello DNS-utótagja eltér az egyes virtuális hálózati, feltételes továbbítás segítségével toosend DNS-lekérdezések toohello szabályok javítsa ki a virtuális hálózat a feloldásához.</span><span class="sxs-lookup"><span data-stu-id="20917-212">Because hello DNS suffix is different in each virtual network, you can use conditional forwarding rules toosend DNS queries toohello correct virtual network for resolution.</span></span> <span data-ttu-id="20917-213">hello alábbi ábrán két virtuális hálózatot és egy DNS-feloldás ezt a módszert a virtuális hálózatok közötti történt a helyi hálózaton:</span><span class="sxs-lookup"><span data-stu-id="20917-213">hello following image shows two virtual networks and an on-premises network doing DNS resolution between virtual networks by using this method:</span></span>

![Virtuális hálózatok közötti DNS-feloldás](./media/azure-dns/inter-vnet-dns.png)

<span data-ttu-id="20917-215">Azure által biztosított névfeloldás használatakor hello belső DNS-utótag tooeach virtuális gép által biztosított DHCP használatával.</span><span class="sxs-lookup"><span data-stu-id="20917-215">When you use name resolution that Azure provides, hello internal DNS suffix is provided tooeach virtual machine by using DHCP.</span></span> <span data-ttu-id="20917-216">A saját nevet névfeloldási megoldás használata esetén ez utótag nincs megadott toovirtual gépek mert más DNS-architektúrák ütköző hello utótag.</span><span class="sxs-lookup"><span data-stu-id="20917-216">When you use your own name resolution solution, this suffix is not supplied toovirtual machines because hello suffix interferes with other DNS architectures.</span></span> <span data-ttu-id="20917-217">toorefer toomachines által a virtuális gépek teljes Tartománynevét vagy tooconfigure hello utótagot, a PowerShell vagy hello API toodetermine hello utótag használhatja:</span><span class="sxs-lookup"><span data-stu-id="20917-217">toorefer toomachines by FQDN or tooconfigure hello suffix on your virtual machines, you can use PowerShell or hello API toodetermine hello suffix:</span></span>

* <span data-ttu-id="20917-218">Az Azure Resource Manager által kezelt virtuális hálózatok hello utótag megtalálható hello [hálózati kártya](https://msdn.microsoft.com/library/azure/mt163668.aspx) erőforrás.</span><span class="sxs-lookup"><span data-stu-id="20917-218">For virtual networks that are managed by Azure Resource Manager, hello suffix is available via hello [network interface card](https://msdn.microsoft.com/library/azure/mt163668.aspx) resource.</span></span> <span data-ttu-id="20917-219">Hello is futtathatja `azure network public-ip show <resource group> <pip name>` parancs a nyilvános IP-cím, amely tartalmazza a toodisplay hello részleteit hello FQDN-jét hello hálózati adaptert.</span><span class="sxs-lookup"><span data-stu-id="20917-219">You can also run hello `azure network public-ip show <resource group> <pip name>` command toodisplay hello details of your public IP, which includes hello FQDN of hello NIC.</span></span>

<span data-ttu-id="20917-220">Ha tooAzure nem felelnek meg az igényeinek lekérdezések továbbítása, akkor tooprovide a saját DNS-megoldást.</span><span class="sxs-lookup"><span data-stu-id="20917-220">If forwarding queries tooAzure doesn't suit your needs, you need tooprovide your own DNS solution.</span></span>  <span data-ttu-id="20917-221">A DNS-megoldást kell megfelelnie:</span><span class="sxs-lookup"><span data-stu-id="20917-221">Your DNS solution needs to:</span></span>

* <span data-ttu-id="20917-222">Segítségével például adja meg a megfelelő állomásnév-feloldási [DDNS](../../virtual-network/virtual-networks-name-resolution-ddns.md).</span><span class="sxs-lookup"><span data-stu-id="20917-222">Provide appropriate hostname resolution, for example via [DDNS](../../virtual-network/virtual-networks-name-resolution-ddns.md).</span></span> <span data-ttu-id="20917-223">Ha DDNS használ, szükség lehet toodisable DNS-rekord kitakarítási.</span><span class="sxs-lookup"><span data-stu-id="20917-223">If you use DDNS, you might need toodisable DNS record scavenging.</span></span> <span data-ttu-id="20917-224">DHCP-bérletek Azure nagyon hosszú, és kitakarítási távolíthatja el a DNS-rekordok idő előtt.</span><span class="sxs-lookup"><span data-stu-id="20917-224">DHCP leases of Azure are very long and scavenging may remove DNS records prematurely.</span></span>
* <span data-ttu-id="20917-225">Adja meg a megfelelő feloldás tooallow rekurziót külső tartománynevek.</span><span class="sxs-lookup"><span data-stu-id="20917-225">Provide appropriate recursive resolution tooallow resolution of external domain names.</span></span>
* <span data-ttu-id="20917-226">Elérhető (TCP és UDP 53-as porton) hello ügyfelek működik és képes tooaccess hello Internet.</span><span class="sxs-lookup"><span data-stu-id="20917-226">Be accessible (TCP and UDP on port 53) from hello clients it serves and be able tooaccess hello Internet.</span></span>
* <span data-ttu-id="20917-227">A külső ügynökök által jelentett hello Internet toomitigate fenyegetésekkel szembeni hatékony hozzáféréssel szemben védve legyenek.</span><span class="sxs-lookup"><span data-stu-id="20917-227">Be secured against access from hello Internet toomitigate threats posed by external agents.</span></span>

> [!NOTE]
> <span data-ttu-id="20917-228">A legjobb teljesítmény érdekében a virtuális gépek Azure DNS-kiszolgálókat használ, amikor ki IPv6 letiltása, és rendelje hozzá egy [példányszintű nyilvános IP-cím](../../virtual-network/virtual-networks-instance-level-public-ip.md) tooeach DNS-kiszolgáló virtuális gép.</span><span class="sxs-lookup"><span data-stu-id="20917-228">For best performance, when you use virtual machines in Azure DNS servers, disable IPv6 and assign an [Instance-Level Public IP](../../virtual-network/virtual-networks-instance-level-public-ip.md) tooeach DNS server virtual machine.</span></span>  
>
>
