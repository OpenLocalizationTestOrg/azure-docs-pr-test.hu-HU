---
title: "aaaCreate és feltöltése az Azure Linux virtuális merevlemez"
description: "Toocreate ismerje meg, és töltse fel az Azure virtuális merevlemez (VHD) a Linux operációs rendszert tartalmazó."
services: virtual-machines-linux
documentationcenter: 
author: szarkos
manager: timlt
editor: tysonn
tags: azure-resource-manager,azure-service-management
ms.assetid: d351396c-95a0-4092-b7bf-c6aae0bbd112
ms.service: virtual-machines-linux
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-linux
ms.devlang: na
ms.topic: article
ms.date: 02/02/2017
ms.author: szark
ms.openlocfilehash: 208e15c035edb5520fc29ba8e4e71c42b041864d
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/06/2017
---
# <a name="information-for-non-endorsed-distributions"></a><span data-ttu-id="33c90-103">Nem támogatott disztribúciókkal kapcsolatos tudnivalók</span><span class="sxs-lookup"><span data-stu-id="33c90-103">Information for Non-Endorsed Distributions</span></span>
[!INCLUDE [learn-about-deployment-models](../../../includes/learn-about-deployment-models-both-include.md)]

<span data-ttu-id="33c90-104">hello Azure platformon SLA vonatkozik hello Linux operációs rendszert futtató, csak ha egy futó toovirtual gépek hello a [által támogatott disztribúciók](endorsed-distros.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json) szolgál.</span><span class="sxs-lookup"><span data-stu-id="33c90-104">hello Azure platform SLA applies toovirtual machines running hello Linux OS only when one of hello [endorsed distributions](endorsed-distros.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json) is used.</span></span> <span data-ttu-id="33c90-105">Az összes Linux terjesztéseket, feltéve, hogy a hello Azure kép gyűjteménye, azokat a terjesztéseket, a szükséges konfigurációval hello záradékkal.</span><span class="sxs-lookup"><span data-stu-id="33c90-105">All Linux distributions that are provided in hello Azure image gallery are endorsed distributions with hello required configuration.</span></span>

* [<span data-ttu-id="33c90-106">Az Azure - Linux által támogatott Disztribúciók</span><span class="sxs-lookup"><span data-stu-id="33c90-106">Linux on Azure - Endorsed Distributions</span></span>](endorsed-distros.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)
* [<span data-ttu-id="33c90-107">A Microsoft Azure Linux lemezképek támogatása</span><span class="sxs-lookup"><span data-stu-id="33c90-107">Support for Linux images in Microsoft Azure</span></span>](https://support.microsoft.com/kb/2941892)

<span data-ttu-id="33c90-108">Azure-on futó összes terjesztéseket toomeet Előfeltételek toohave egy alkalommal tooproperly hello futtatására számos kell.</span><span class="sxs-lookup"><span data-stu-id="33c90-108">All distributions running on Azure will need toomeet a number of prerequisites toohave a chance tooproperly run on hello platform.</span></span>  <span data-ttu-id="33c90-109">Ez a cikk célja semmiképpen sem átfogó, amelyben minden terjesztési különbözik; és elég lehetséges, hogy akkor is, ha Ön feltételeknek megfelelő összes hello alábbi is szüksége lesz toosignificantly tudjon végezni a Linux rendszer tooensure, amely a megfelelően fut hello platformon.</span><span class="sxs-lookup"><span data-stu-id="33c90-109">This article is by no means comprehensive as every distribution is different; and it is quite possible that even if you meet all hello criteria below you will still need toosignificantly tweak your Linux system tooensure that it properly runs on hello platform.</span></span>

<span data-ttu-id="33c90-110">Az az oka, hogy azt javasoljuk, hogy az egyik megkezdése a [Azure támogatott Disztribúciókkal Linux](endorsed-distros.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json) amikor lehetséges.</span><span class="sxs-lookup"><span data-stu-id="33c90-110">It is for this reason that we recommend that you start with one of our [Linux on Azure Endorsed Distributions](endorsed-distros.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json) when possible.</span></span> <span data-ttu-id="33c90-111">hello következő cikkeket végigvezeti Önt hogyan tooprepare hello különböző által támogatott Azure által támogatott Linux-disztribúciók:</span><span class="sxs-lookup"><span data-stu-id="33c90-111">hello following articles will guide you through how tooprepare hello various endorsed Linux distributions that are supported on Azure:</span></span>

* <span data-ttu-id="33c90-112">**[CentOS-alapú Disztribúciók](create-upload-centos.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)**</span><span class="sxs-lookup"><span data-stu-id="33c90-112">**[CentOS-based Distributions](create-upload-centos.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)**</span></span>
* <span data-ttu-id="33c90-113">**[Debian Linux](debian-create-upload-vhd.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)**</span><span class="sxs-lookup"><span data-stu-id="33c90-113">**[Debian Linux](debian-create-upload-vhd.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)**</span></span>
* <span data-ttu-id="33c90-114">**[Oracle Linux](oracle-create-upload-vhd.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)**</span><span class="sxs-lookup"><span data-stu-id="33c90-114">**[Oracle Linux](oracle-create-upload-vhd.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)**</span></span>
* <span data-ttu-id="33c90-115">**[Red Hat Enterprise Linux](redhat-create-upload-vhd.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)**</span><span class="sxs-lookup"><span data-stu-id="33c90-115">**[Red Hat Enterprise Linux](redhat-create-upload-vhd.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)**</span></span>
* <span data-ttu-id="33c90-116">**[SLES & openSUSE](suse-create-upload-vhd.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)**</span><span class="sxs-lookup"><span data-stu-id="33c90-116">**[SLES & openSUSE](suse-create-upload-vhd.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)**</span></span>
* <span data-ttu-id="33c90-117">**[Ubuntu](create-upload-ubuntu.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)**</span><span class="sxs-lookup"><span data-stu-id="33c90-117">**[Ubuntu](create-upload-ubuntu.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)**</span></span>

<span data-ttu-id="33c90-118">Ez a cikk többi hello általános útmutatást a Linux-disztribúció Azure-on futó összpontosítanak.</span><span class="sxs-lookup"><span data-stu-id="33c90-118">hello rest of this article will focus on general guidance for running your Linux distribution on Azure.</span></span>

## <a name="general-linux-installation-notes"></a><span data-ttu-id="33c90-119">Jelzi, hogy általános Linux rendszerhez – telepítés</span><span class="sxs-lookup"><span data-stu-id="33c90-119">General Linux Installation Notes</span></span>
* <span data-ttu-id="33c90-120">hello VHDX formátum nem támogatott az Azure csak **rögzített VHD**.</span><span class="sxs-lookup"><span data-stu-id="33c90-120">hello VHDX format is not supported in Azure, only **fixed VHD**.</span></span>  <span data-ttu-id="33c90-121">Alakítsa át a Hyper-V kezelőjével hello tooVHD formátummal, vagy convert-vhd parancsmag hello.</span><span class="sxs-lookup"><span data-stu-id="33c90-121">You can convert hello disk tooVHD format using Hyper-V Manager or hello convert-vhd cmdlet.</span></span> <span data-ttu-id="33c90-122">VirtualBox rendszer használata esetén ez azt jelenti, hogy kiválasztásával **mérete rögzített** , ellenezte toohello alapértelmezett dinamikusan lefoglalt hello lemez létrehozásakor.</span><span class="sxs-lookup"><span data-stu-id="33c90-122">If you are using VirtualBox this means selecting **Fixed size** as opposed toohello default dynamically allocated when creating hello disk.</span></span>
* <span data-ttu-id="33c90-123">Azure csak az 1. generációs virtuális gépek támogatja.</span><span class="sxs-lookup"><span data-stu-id="33c90-123">Azure only supports generation 1 virtual machines.</span></span> <span data-ttu-id="33c90-124">1 virtuális gép VHDX toohello VHD formátumú és eltávolítása dinamikusan bővülő tooa rögzített méretű lemez generáció válthat.</span><span class="sxs-lookup"><span data-stu-id="33c90-124">You can convert a generation 1 virtual machine from VHDX toohello VHD file format and from dynamically expanding tooa fixed sized disk.</span></span> <span data-ttu-id="33c90-125">De nem módosíthatja a virtuális gép generációját.</span><span class="sxs-lookup"><span data-stu-id="33c90-125">But you can't change a virtual machine's generation.</span></span> <span data-ttu-id="33c90-126">További információkért lásd: [érdemes létrehozni 1 vagy 2. generációs virtuális gépek a Hyper-V?](https://technet.microsoft.com/en-us/windows-server-docs/compute/hyper-v/plan/should-i-create-a-generation-1-or-2-virtual-machine-in-hyper-v)</span><span class="sxs-lookup"><span data-stu-id="33c90-126">For more information, see [Should I create a generation 1 or 2 virtual machine in Hyper-V?](https://technet.microsoft.com/en-us/windows-server-docs/compute/hyper-v/plan/should-i-create-a-generation-1-or-2-virtual-machine-in-hyper-v)</span></span>
* <span data-ttu-id="33c90-127">maximális méret hello engedélyezett hello VHD 1,023 GB.</span><span class="sxs-lookup"><span data-stu-id="33c90-127">hello maximum size allowed for hello VHD is 1,023 GB.</span></span>
* <span data-ttu-id="33c90-128">Ha telepíti a hello Linux rendszer *ajánlott* LVM (gyakran hello alapértelmezett sok telepítés), hanem szabványos partíciók használja.</span><span class="sxs-lookup"><span data-stu-id="33c90-128">When installing hello Linux system it is *recommended* that you use standard partitions rather than LVM (often hello default for many installations).</span></span> <span data-ttu-id="33c90-129">LVM neve ütközik a klónozott virtuális gépek, így elkerülhető, különösen akkor, ha egy operációsrendszer-lemez valaha is szüksége van a csatolt toobe tooanother hibaelhárítási azonos virtuális gép.</span><span class="sxs-lookup"><span data-stu-id="33c90-129">This will avoid LVM name conflicts with cloned VMs, particularly if an OS disk ever needs toobe attached tooanother identical VM for troubleshooting.</span></span> <span data-ttu-id="33c90-130">[LVM](configure-lvm.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json) vagy [RAID](configure-raid.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json) adatlemezek használható.</span><span class="sxs-lookup"><span data-stu-id="33c90-130">[LVM](configure-lvm.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json) or [RAID](configure-raid.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json) may be used on data disks.</span></span>
* <span data-ttu-id="33c90-131">Kernel támogatása UDF fájlrendszerek csatlakoztatására szükség.</span><span class="sxs-lookup"><span data-stu-id="33c90-131">Kernel support for mounting UDF file systems is required.</span></span> <span data-ttu-id="33c90-132">Az Azure hello első rendszerindításkor létesítési konfiguráció lett átadva a toohello Linux virtuális gép UDF formátumú adathordozó csatolt toohello Vendég keresztül.</span><span class="sxs-lookup"><span data-stu-id="33c90-132">At first boot on Azure hello provisioning configuration is passed toohello Linux VM via UDF-formatted media that is attached toohello guest.</span></span> <span data-ttu-id="33c90-133">hello Azure Linux ügynök legyen képes toomount hello UDF fájl rendszer tooread konfigurációját és hello virtuális gép kiépítéséhez.</span><span class="sxs-lookup"><span data-stu-id="33c90-133">hello Azure Linux agent must be able toomount hello UDF file system tooread its configuration and provision hello VM.</span></span>
* <span data-ttu-id="33c90-134">Linux kernel verziójánál régebbi 2.6.37 nem támogatott a Hyper-V nagyobb Virtuálisgép-méretek a.</span><span class="sxs-lookup"><span data-stu-id="33c90-134">Linux kernel versions below 2.6.37 do not support NUMA on Hyper-V with larger VM sizes.</span></span> <span data-ttu-id="33c90-135">A probléma főként hatások régebbi azokat a terjesztéseket hello használata előtt Red Hat 2.6.32 kernel és javítását a RHEL 6.6 (kernel-2.6.32-504).</span><span class="sxs-lookup"><span data-stu-id="33c90-135">This issue primarily impacts older distributions using hello upstream Red Hat 2.6.32 kernel, and was fixed in RHEL 6.6 (kernel-2.6.32-504).</span></span> <span data-ttu-id="33c90-136">Rendszerekre egyéni kernelek régebbi, mint 2.6.37 vagy régebbi RHEL alapú kernelek 2.6.32-504 kell beállítani, mint a rendszerindítási paraméter hello `numa=off` a hello kernel grub.conf a parancssori.</span><span class="sxs-lookup"><span data-stu-id="33c90-136">Systems running custom kernels older than 2.6.37, or RHEL-based kernels older than 2.6.32-504 must set hello boot parameter `numa=off` on hello kernel command-line in grub.conf.</span></span> <span data-ttu-id="33c90-137">További információ: a Red Hat [KB 436883](https://access.redhat.com/solutions/436883).</span><span class="sxs-lookup"><span data-stu-id="33c90-137">For more information see Red Hat [KB 436883](https://access.redhat.com/solutions/436883).</span></span>
* <span data-ttu-id="33c90-138">Ne konfiguráljon egy swap partíció hello operációsrendszer-lemezzel.</span><span class="sxs-lookup"><span data-stu-id="33c90-138">Do not configure a swap partition on hello OS disk.</span></span> <span data-ttu-id="33c90-139">Linux-ügynök hello konfigurált toocreate hello ideiglenes erőforrás lemezen a lapozófájl lehet.</span><span class="sxs-lookup"><span data-stu-id="33c90-139">hello Linux agent can be configured toocreate a swap file on hello temporary resource disk.</span></span>  <span data-ttu-id="33c90-140">További információk a hello lépéseket találhatók.</span><span class="sxs-lookup"><span data-stu-id="33c90-140">More information about this can be found in hello steps below.</span></span>
* <span data-ttu-id="33c90-141">Az összes hello virtuális merevlemezeket kell rendelkeznie, amely többszörösei 1 MB méretű.</span><span class="sxs-lookup"><span data-stu-id="33c90-141">All of hello VHDs must have sizes that are multiples of 1 MB.</span></span>

### <a name="installing-kernel-modules-without-hyper-v"></a><span data-ttu-id="33c90-142">Hyper-V nélkül kernel-modulok telepítése</span><span class="sxs-lookup"><span data-stu-id="33c90-142">Installing kernel modules without Hyper-V</span></span>
<span data-ttu-id="33c90-143">Azure fut hello Hyper-V hipervizort, így Linux megköveteli, hogy az egyes kernel modulok telepítve vannak-e a rendelés toorun az Azure-ban.</span><span class="sxs-lookup"><span data-stu-id="33c90-143">Azure runs on hello Hyper-V hypervisor, so Linux requires that certain kernel modules are installed in order toorun in Azure.</span></span> <span data-ttu-id="33c90-144">Ha egy virtuális Gépet, amely a Hyper-V kívül készült, hello Linux telepítők nem tartalmazhatnak hello illesztőprogramok Hyper-v a kezdeti ramdisk hello (initrd vagy initramfs) kivéve, ha azt észleli, hogy fut-e egy Hyper-V környezetben.</span><span class="sxs-lookup"><span data-stu-id="33c90-144">If you have a VM that was created outside of Hyper-V, hello Linux installers may not include hello drivers for Hyper-V in hello initial ramdisk (initrd or initramfs) unless it detects that it is running an a Hyper-V environment.</span></span> <span data-ttu-id="33c90-145">Egy eltérő virtualizációs (azaz Virtualbox, KVM, stb.) a rendszer tooprepare a Linux-lemezkép használata esetén szükség lehet a toorebuild hello initrd tooensure legalább hello `hv_vmbus` és `hv_storvsc` kernel modulokra hello kezdeti ramdisk érhető el.</span><span class="sxs-lookup"><span data-stu-id="33c90-145">When using a different virtualization system (i.e. Virtualbox, KVM, etc.) tooprepare your Linux image, you may need toorebuild hello initrd tooensure that at least hello `hv_vmbus` and `hv_storvsc` kernel modules are available on hello initial ramdisk.</span></span>  <span data-ttu-id="33c90-146">Ez az egy ismert probléma legalább hello fölérendelt Red Hat terjesztési alapú rendszereken.</span><span class="sxs-lookup"><span data-stu-id="33c90-146">This is a known issue at least on systems based on hello upstream Red Hat distribution.</span></span>

<span data-ttu-id="33c90-147">hello mechanizmus a hello initrd vagy initramfs kép újjáépítését hello terjesztési függően változhat.</span><span class="sxs-lookup"><span data-stu-id="33c90-147">hello mechanism for rebuilding hello initrd or initramfs image may vary depending on hello distribution.</span></span> <span data-ttu-id="33c90-148">A terjesztési dokumentációt, vagy hello megfelelő eljárás támogatása.</span><span class="sxs-lookup"><span data-stu-id="33c90-148">Please consult your distribution's documentation or support for hello proper procedure.</span></span>  <span data-ttu-id="33c90-149">Íme egy példa a hogyan toorebuild hello hello segítségével initrd `mkinitrd` segédprogram:</span><span class="sxs-lookup"><span data-stu-id="33c90-149">Here is one example for how toorebuild hello initrd using hello `mkinitrd` utility:</span></span>

<span data-ttu-id="33c90-150">Először készítsen biztonsági másolatot hello meglévő initrd lemezképet:</span><span class="sxs-lookup"><span data-stu-id="33c90-150">First, back up hello existing initrd image:</span></span>

    # cd /boot
    # sudo cp initrd-`uname -r`.img  initrd-`uname -r`.img.bak

<span data-ttu-id="33c90-151">Ezután építse újra a hello hello initrd `hv_vmbus` és `hv_storvsc` kernel modulok:</span><span class="sxs-lookup"><span data-stu-id="33c90-151">Next, rebuild hello initrd with hello `hv_vmbus` and `hv_storvsc` kernel modules:</span></span>

    # sudo mkinitrd --preload=hv_storvsc --preload=hv_vmbus -v -f initrd-`uname -r`.img `uname -r`


### <a name="resizing-vhds"></a><span data-ttu-id="33c90-152">Virtuális merevlemezek átméretezése</span><span class="sxs-lookup"><span data-stu-id="33c90-152">Resizing VHDs</span></span>
<span data-ttu-id="33c90-153">Az Azure virtuális merevlemez képek rendelkeznie kell egy virtuális mérete igazítva too1MB.</span><span class="sxs-lookup"><span data-stu-id="33c90-153">VHD images on Azure must have a virtual size aligned too1MB.</span></span>  <span data-ttu-id="33c90-154">Általában a Hyper-v-vel létrehozott virtuális merevlemezeket már igazítását megfelelően.</span><span class="sxs-lookup"><span data-stu-id="33c90-154">Typically, VHDs created using Hyper-V should already be aligned correctly.</span></span>  <span data-ttu-id="33c90-155">Ha a virtuális merevlemez hello nincs megfelelően igazítva megfelelően akkor is megjelenhet egy hiba üzenet hasonló toohello a következő toocreate tett kísérlet során egy *kép* a virtuális merevlemezről:</span><span class="sxs-lookup"><span data-stu-id="33c90-155">If hello VHD is not aligned correctly then you may receive an error message similar toohello following when you attempt toocreate an *image* from your VHD:</span></span>

    "hello VHD http://<mystorageaccount>.blob.core.windows.net/vhds/MyLinuxVM.vhd has an unsupported virtual size of 21475270656 bytes. hello size must be a whole number (in MBs).”

<span data-ttu-id="33c90-156">tooremedy ez átméretezheti hello hello Hyper-V Manager konzol vagy hello használó virtuális gépek [átméretezési-VHD](http://technet.microsoft.com/library/hh848535.aspx) Powershell-parancsmagot.</span><span class="sxs-lookup"><span data-stu-id="33c90-156">tooremedy this you can resize hello VM using either hello Hyper-V Manager console or hello [Resize-VHD](http://technet.microsoft.com/library/hh848535.aspx) Powershell cmdlet.</span></span>  <span data-ttu-id="33c90-157">Ha nem futnak Windows környezetben javasolt toouse qemu-img tooconvert (ha szükséges), és hello virtuális merevlemez átméretezése.</span><span class="sxs-lookup"><span data-stu-id="33c90-157">If you are not running in a Windows environment then it is recommended toouse qemu-img tooconvert (if needed) and resize hello VHD.</span></span>

> [!NOTE]
> <span data-ttu-id="33c90-158">Egy ismert hiba van qemu-img verzió > = 2.2.1-en, amely egy nem megfelelően formázott virtuális merevlemez eredményez.</span><span class="sxs-lookup"><span data-stu-id="33c90-158">There is a known bug in qemu-img versions >=2.2.1 that results in an improperly formatted VHD.</span></span> <span data-ttu-id="33c90-159">hello hiba kijavítása QEMU 2.6.</span><span class="sxs-lookup"><span data-stu-id="33c90-159">hello issue has been fixed in QEMU 2.6.</span></span> <span data-ttu-id="33c90-160">Ajánlott toouse qemu-img 2.2.0 vagy alsó vagy frissítés too2.6 vagy újabb verzióját.</span><span class="sxs-lookup"><span data-stu-id="33c90-160">It is recommended toouse either qemu-img 2.2.0 or lower, or update too2.6 or higher.</span></span> <span data-ttu-id="33c90-161">Hivatkozás: https://bugs.launchpad.net/qemu/+bug/1490611.</span><span class="sxs-lookup"><span data-stu-id="33c90-161">Reference: https://bugs.launchpad.net/qemu/+bug/1490611.</span></span>
> 
> 

1. <span data-ttu-id="33c90-162">Közvetlenül eszközökkel például a virtuális merevlemez átméretezése hello `qemu-img` vagy `vbox-manage` azt eredményezheti, egy indíthatatlanná VHD-t.</span><span class="sxs-lookup"><span data-stu-id="33c90-162">Resizing hello VHD directly using tools such as `qemu-img` or `vbox-manage` may result in an unbootable VHD.</span></span>  <span data-ttu-id="33c90-163">Ezért ajánlott toofirst convert hello VHD tooa nyers lemezképet.</span><span class="sxs-lookup"><span data-stu-id="33c90-163">So it is recommended toofirst convert hello VHD tooa RAW disk image.</span></span>  <span data-ttu-id="33c90-164">Ha Virtuálisgép-lemezkép hello már létre lett hozva nyers lemezképet (az egyes Hipervizorok, például a KVM hello alapértelmezett), majd előfordulhat, hogy kihagyja ezt a lépést:</span><span class="sxs-lookup"><span data-stu-id="33c90-164">If hello VM image was already created as RAW disk image (hello default for some Hypervisors such as KVM) then you may skip this step:</span></span>
   
       # qemu-img convert -f vpc -O raw MyLinuxVM.vhd MyLinuxVM.raw

2. <span data-ttu-id="33c90-165">Kiszámítja a hello szükséges virtuális mérete hello hello lemez kép tooensure mérete igazított too1MB.</span><span class="sxs-lookup"><span data-stu-id="33c90-165">Calculate hello required size of hello disk image tooensure that hello virtual size is aligned too1MB.</span></span>  <span data-ttu-id="33c90-166">a következő héjparancsfájlt bash hello ezzel segít a.</span><span class="sxs-lookup"><span data-stu-id="33c90-166">hello following bash shell script can assist with this.</span></span>  <span data-ttu-id="33c90-167">hello parancsfájl a "`qemu-img info`" toodetermine hello hello lemezképet virtuális méretét, és számítja ki a hello mérete toohello tovább 1 MB:</span><span class="sxs-lookup"><span data-stu-id="33c90-167">hello script uses "`qemu-img info`" toodetermine hello virtual size of hello disk image and then calculates hello size toohello next 1MB:</span></span>
   
       rawdisk="MyLinuxVM.raw"
       vhddisk="MyLinuxVM.vhd"
   
       MB=$((1024*1024))
       size=$(qemu-img info -f raw --output json "$rawdisk" | \
              gawk 'match($0, /"virtual-size": ([0-9]+),/, val) {print val[1]}')
   
       rounded_size=$((($size/$MB + 1)*$MB))
       echo "Rounded Size = $rounded_size"

3. <span data-ttu-id="33c90-168">Automatikus oszlopszélesség hello nyers lemez $rounded_size használja, mint a fenti parancsfájl hello beállítása:</span><span class="sxs-lookup"><span data-stu-id="33c90-168">Resize hello raw disk using $rounded_size as set in hello above script:</span></span>
   
       # qemu-img resize MyLinuxVM.raw $rounded_size

4. <span data-ttu-id="33c90-169">Most, alakítsa át a nyers hátsó tooa hello rögzített méretű virtuális merevlemez:</span><span class="sxs-lookup"><span data-stu-id="33c90-169">Now, convert hello RAW disk back tooa fixed-size VHD:</span></span>
   
       # qemu-img convert -f raw -o subformat=fixed -O vpc MyLinuxVM.raw MyLinuxVM.vhd

   <span data-ttu-id="33c90-170">Vagy a verziójával qemu **2.6 +** közé tartozik a hello `force_size` lehetőséget:</span><span class="sxs-lookup"><span data-stu-id="33c90-170">Or, with qemu version **2.6+** include hello `force_size` option:</span></span>

       # qemu-img convert -f raw -o subformat=fixed,force_size -O vpc MyLinuxVM.raw MyLinuxVM.vhd

## <a name="linux-kernel-requirements"></a><span data-ttu-id="33c90-171">Linux Kernel követelmények</span><span class="sxs-lookup"><span data-stu-id="33c90-171">Linux Kernel Requirements</span></span>
<span data-ttu-id="33c90-172">hello Hyper-V és az Azure Linux integrációs szolgáltatások (LIS) illesztőprogramjait közzé közvetlenül toohello fölérendelt Linux kernel.</span><span class="sxs-lookup"><span data-stu-id="33c90-172">hello Linux Integration Services (LIS) drivers for Hyper-V and Azure are contributed directly toohello upstream Linux kernel.</span></span> <span data-ttu-id="33c90-173">A Linux kernel közelmúltban (azaz 3.x) tartalmazó terjesztések ezeket az illesztőprogramokat elérhető már rendelkezik, vagy ellenkező esetben adja meg ezeket az illesztőprogramokat backported verziói a kernelek a.</span><span class="sxs-lookup"><span data-stu-id="33c90-173">Many distributions that include a recent Linux kernel version (i.e. 3.x) will have these drivers available already, or otherwise provide backported versions of these drivers with their kernels.</span></span>  <span data-ttu-id="33c90-174">Ezeket az illesztőprogramokat folyamatosan változik a felsőbb rétegbeli kernel hello az új javításokat és szolgáltatásokat, amikor lehetséges célszerű toorun egy [által támogatott terjesztési](endorsed-distros.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json) , amely tartalmazza ezeket a javításokat és frissítéseit.</span><span class="sxs-lookup"><span data-stu-id="33c90-174">These drivers are constantly being updated in hello upstream kernel with new fixes and features, so when possible it is recommended toorun an [endorsed distribution](endorsed-distros.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json) that will include these fixes and updates.</span></span>

<span data-ttu-id="33c90-175">Ha futtatja a Red Hat Enterprise Linux-verziók variant **6.0-6.3**, a Hyper-V akkor kell tooinstall hello legújabb LIS illesztőprogramokat.</span><span class="sxs-lookup"><span data-stu-id="33c90-175">If you are running a variant of Red Hat Enterprise Linux versions **6.0-6.3**, then you will need tooinstall hello latest LIS drivers for Hyper-V.</span></span> <span data-ttu-id="33c90-176">hello illesztőprogramok található [ezen a helyen](http://go.microsoft.com/fwlink/p/?LinkID=254263&clcid=0x409).</span><span class="sxs-lookup"><span data-stu-id="33c90-176">hello drivers can be found [at this location](http://go.microsoft.com/fwlink/p/?LinkID=254263&clcid=0x409).</span></span> <span data-ttu-id="33c90-177">RHEL frissítésétől **6.4 +** (és származékai) hello LIS illesztőprogramok már érhetők el a hello kernel, és ezért nincs további telepítési csomag szükséges toorun ezekhez a rendszerekhez Azure vannak.</span><span class="sxs-lookup"><span data-stu-id="33c90-177">As of RHEL **6.4+** (and derivatives) hello LIS drivers are already included with hello kernel and so no additional installation packages are needed toorun those systems on Azure.</span></span>

<span data-ttu-id="33c90-178">Ha egy egyéni kernel szükség, a rendszer ajánlott toouse újabb verziójára kernel (azaz **3.8 +**).</span><span class="sxs-lookup"><span data-stu-id="33c90-178">If a custom kernel is required, it is recommended toouse a more recent kernel version (i.e. **3.8+**).</span></span> <span data-ttu-id="33c90-179">Ezeket a felosztás vagy szállítók, akik a saját kernel karbantartása néhány elérhető lesz szükség tooregularly backport hello LIS illesztőprogramok hello fölérendelt kernel tooyour egyéni kernel.</span><span class="sxs-lookup"><span data-stu-id="33c90-179">For those distributions or vendors who maintain their own kernel, some effort will be required tooregularly backport hello LIS drivers from hello upstream kernel tooyour custom kernel.</span></span>  <span data-ttu-id="33c90-180">Akkor is, ha már viszonylag új kernel-verziót futtat, ajánlott tookeep követése bármely előtt javítások hello LIS illesztőprogramok és backport azokat szükség szerint.</span><span class="sxs-lookup"><span data-stu-id="33c90-180">Even if you are already running a relatively recent kernel version, it is highly recommended tookeep track of any upstream fixes in hello LIS drivers and backport those as needed.</span></span> <span data-ttu-id="33c90-181">hello hello LIS illesztőprogram forrásfájljainak helye elérhető hello [MAINTAINERS](https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/tree/MAINTAINERS) hello Linux kernel forrás fában fájlt:</span><span class="sxs-lookup"><span data-stu-id="33c90-181">hello location of hello LIS driver source files is available in hello [MAINTAINERS](https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/tree/MAINTAINERS) file in hello Linux kernel source tree:</span></span>

    F:    arch/x86/include/asm/mshyperv.h
    F:    arch/x86/include/uapi/asm/hyperv.h
    F:    arch/x86/kernel/cpu/mshyperv.c
    F:    drivers/hid/hid-hyperv.c
    F:    drivers/hv/
    F:    drivers/input/serio/hyperv-keyboard.c
    F:    drivers/net/hyperv/
    F:    drivers/scsi/storvsc_drv.c
    F:    drivers/video/fbdev/hyperv_fb.c
    F:    include/linux/hyperv.h
    F:    tools/hv/

<span data-ttu-id="33c90-182">Egy nagyon minimális a következő javítások hello hello hiányában az előzőekben toocause problémák az Azure-on, és így ezek szerepelnie kell a hello kernel.</span><span class="sxs-lookup"><span data-stu-id="33c90-182">At a very minimum, hello absence of hello following patches have been known toocause problems on Azure and so these must be included in hello kernel.</span></span> <span data-ttu-id="33c90-183">Ebben a listában, de semmiképpen sem teljes körű teljes biztosít az összes disztribúciók számára:</span><span class="sxs-lookup"><span data-stu-id="33c90-183">This list is by no means exhaustive or complete for all distributions:</span></span>

* [<span data-ttu-id="33c90-184">ata_piix: lemezek Hyper-V toohello illesztőprogramok késleltető alapértelmezés szerint</span><span class="sxs-lookup"><span data-stu-id="33c90-184">ata_piix: defer disks toohello Hyper-V drivers by default</span></span>](https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/commit/drivers/ata/ata_piix.c?id=cd006086fa5d91414d8ff9ff2b78fbb593878e3c)
* [<span data-ttu-id="33c90-185">storvsc: fiókot használja az átvitel közbeni csomagok hello VISSZAÁLLÍTÁSI elérési úton</span><span class="sxs-lookup"><span data-stu-id="33c90-185">storvsc: Account for in-transit packets in hello RESET path</span></span>](https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/commit/drivers/scsi/storvsc_drv.c?id=5c1b10ab7f93d24f29b5630286e323d1c5802d5c)
* [<span data-ttu-id="33c90-186">storvsc: WRITE_SAME használatának elkerülése érdekében</span><span class="sxs-lookup"><span data-stu-id="33c90-186">storvsc: avoid usage of WRITE_SAME</span></span>](https://git.kernel.org/cgit/linux/kernel/git/next/linux-next.git/commit/drivers/scsi/storvsc_drv.c?id=3e8f4f4065901c8dfc51407e1984495e1748c090)
* [<span data-ttu-id="33c90-187">storvsc: RAID és virtuális állomás adapter illesztőprogramjai azonos írási letiltása</span><span class="sxs-lookup"><span data-stu-id="33c90-187">storvsc: Disable WRITE SAME for RAID and virtual host adapter drivers</span></span>](https://git.kernel.org/cgit/linux/kernel/git/next/linux-next.git/commit/drivers/scsi/storvsc_drv.c?id=54b2b50c20a61b51199bedb6e5d2f8ec2568fb43)
* [<span data-ttu-id="33c90-188">storvsc: NULL mutatót javítás kereshet vissza.</span><span class="sxs-lookup"><span data-stu-id="33c90-188">storvsc: NULL pointer dereference fix</span></span>](https://git.kernel.org/cgit/linux/kernel/git/next/linux-next.git/commit/drivers/scsi/storvsc_drv.c?id=b12bb60d6c350b348a4e1460cd68f97ccae9822e)
* [<span data-ttu-id="33c90-189">storvsc: ring pufferbe hibákat eredményezhet i/o-rögzítés</span><span class="sxs-lookup"><span data-stu-id="33c90-189">storvsc: ring buffer failures may result in I/O freeze</span></span>](https://git.kernel.org/cgit/linux/kernel/git/next/linux-next.git/commit/drivers/scsi/storvsc_drv.c?id=e86fb5e8ab95f10ec5f2e9430119d5d35020c951)
* [<span data-ttu-id="33c90-190">scsi_sysfs: __scsi_remove_device dupla végrehajtásának elleni védelem érdekében</span><span class="sxs-lookup"><span data-stu-id="33c90-190">scsi_sysfs: protect against double execution of __scsi_remove_device</span></span>](https://git.kernel.org/cgit/linux/kernel/git/next/linux-next.git/commit/drivers/scsi/scsi_sysfs.c?id=be821fd8e62765de43cc4f0e2db363d0e30a7e9b)

## <a name="hello-azure-linux-agent"></a><span data-ttu-id="33c90-191">hello Azure Linux ügynök</span><span class="sxs-lookup"><span data-stu-id="33c90-191">hello Azure Linux Agent</span></span>
<span data-ttu-id="33c90-192">Hello [Azure Linux ügynök](../windows/agent-user-guide.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json) (waagent) szükség tooproperly rendszerű Linux virtuális gép az Azure-ban.</span><span class="sxs-lookup"><span data-stu-id="33c90-192">hello [Azure Linux Agent](../windows/agent-user-guide.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json) (waagent) is required tooproperly provision a Linux virtual machine in Azure.</span></span> <span data-ttu-id="33c90-193">Is hello letöltéséhez, problémák fájlt, vagy küldje el a lekérési kérelmek hello [Linux-ügynök GitHub-tárház](https://github.com/Azure/WALinuxAgent).</span><span class="sxs-lookup"><span data-stu-id="33c90-193">You can get hello latest version, file issues or submit pull requests at hello [Linux Agent GitHub repo](https://github.com/Azure/WALinuxAgent).</span></span>

* <span data-ttu-id="33c90-194">Linux-ügynök hello hello Apache 2.0 licence szabadul fel.</span><span class="sxs-lookup"><span data-stu-id="33c90-194">hello Linux agent is released under hello Apache 2.0 license.</span></span> <span data-ttu-id="33c90-195">Terjesztések már nyújtanak RPM vagy deb csomagok hello ügynök, és így egyes esetekben ez telepíthetők és minimális erőfeszítéssel frissítve.</span><span class="sxs-lookup"><span data-stu-id="33c90-195">Many distributions already provide RPM or deb packages for hello agent, and so in some cases this can be installed and updated with little effort.</span></span>
* <span data-ttu-id="33c90-196">hello Azure Linux ügynök szükséges Python v2.6 +.</span><span class="sxs-lookup"><span data-stu-id="33c90-196">hello Azure Linux Agent requires Python v2.6+.</span></span>
* <span data-ttu-id="33c90-197">hello ügynök hello python-pyasn1 modul is szükséges.</span><span class="sxs-lookup"><span data-stu-id="33c90-197">hello agent also requires hello python-pyasn1 module.</span></span> <span data-ttu-id="33c90-198">A legtöbb terjesztéseket adja meg, ez különálló csomagként telepíthető.</span><span class="sxs-lookup"><span data-stu-id="33c90-198">Most distributions provide this as a separate package that can be installed.</span></span>
* <span data-ttu-id="33c90-199">Bizonyos esetekben hello Azure Linux-ügynök nem lehet NetworkManager kompatibilis.</span><span class="sxs-lookup"><span data-stu-id="33c90-199">In some cases hello Azure Linux Agent may not be compatible with NetworkManager.</span></span> <span data-ttu-id="33c90-200">Azokat a terjesztéseket által biztosított hello RPM/Deb-csomagok számos NetworkManager ütközés toohello waagent csomag konfigurálása, és így is el fogja távolítani NetworkManager hello Linux ügynök csomag telepítését.</span><span class="sxs-lookup"><span data-stu-id="33c90-200">Many of hello RPM/Deb packages provided by distributions configure NetworkManager as a conflict toohello waagent package, and thus will uninstall NetworkManager when you install hello Linux agent package.</span></span>

## <a name="general-linux-system-requirements"></a><span data-ttu-id="33c90-201">Általános Linux rendszerre vonatkozó követelmények</span><span class="sxs-lookup"><span data-stu-id="33c90-201">General Linux System Requirements</span></span>

* <span data-ttu-id="33c90-202">Hello kernel rendszerindító sort a következő paraméterek LÁRVAJÁRAT vagy GRUB2 tooinclude hello módosítása.</span><span class="sxs-lookup"><span data-stu-id="33c90-202">Modify hello kernel boot line in GRUB or GRUB2 tooinclude hello following parameters.</span></span> <span data-ttu-id="33c90-203">Ez biztosítja az összes konzol üzenetküldés toohello első soros port, amely segít az Azure által támogatott hibáinak feltárására:</span><span class="sxs-lookup"><span data-stu-id="33c90-203">This will also ensure all console messages are sent toohello first serial port, which can assist Azure support with debugging issues:</span></span>
  
        console=ttyS0,115200n8 earlyprintk=ttyS0,115200 rootdelay=300
  
    <span data-ttu-id="33c90-204">Ez biztosítja az összes konzol üzenetküldés toohello első soros port, amely segít az Azure által támogatott hibáinak feltárására.</span><span class="sxs-lookup"><span data-stu-id="33c90-204">This will also ensure all console messages are sent toohello first serial port, which can assist Azure support with debugging issues.</span></span>
  
    <span data-ttu-id="33c90-205">Továbbá a fenti toohello, ajánlott túl*eltávolítása* hello a következő paramétereket, ha vannak ilyenek:</span><span class="sxs-lookup"><span data-stu-id="33c90-205">In addition toohello above, it is recommended too*remove* hello following parameters if they exist:</span></span>
  
        rhgb quiet crashkernel=auto
  
    <span data-ttu-id="33c90-206">Grafikus és a csendes rendszerindító egy felhőalapú környezetben, ahol azt szeretnénk, hogy minden hello naplók toobe küldött toohello soros port nem hasznosak.</span><span class="sxs-lookup"><span data-stu-id="33c90-206">Graphical and quiet boot are not useful in a cloud environment where we want all hello logs toobe sent toohello serial port.</span></span> <span data-ttu-id="33c90-207">Hello `crashkernel` beállítás lehet, hogy szükség esetén konfigurálva balra, de vegye figyelembe, hogy ez a paraméter csökkenti a hello VM legalább 128 MB, rendelkezésre álló memória mennyisége hello esetleg problémás hello kisebb Virtuálisgép-méretek a.</span><span class="sxs-lookup"><span data-stu-id="33c90-207">hello `crashkernel` option may be left configured if desired, but note that this parameter will reduce hello amount of available memory in hello VM by 128MB or more, which may be problematic on hello smaller VM sizes.</span></span>

* <span data-ttu-id="33c90-208">Hello Azure Linux ügynök telepítése</span><span class="sxs-lookup"><span data-stu-id="33c90-208">Installing hello Azure Linux Agent</span></span>
  
    <span data-ttu-id="33c90-209">hello Azure Linux-ügynök szükség a Linux-lemezkép az Azure-on történő üzembe helyezéséhez.</span><span class="sxs-lookup"><span data-stu-id="33c90-209">hello Azure Linux Agent is required for provisioning a Linux image on Azure.</span></span>  <span data-ttu-id="33c90-210">Terjesztések hello ügynök RPM vagy Deb-csomagként adja meg (hello csomag neve általában "WALinuxAgent" vagy "walinuxagent").</span><span class="sxs-lookup"><span data-stu-id="33c90-210">Many distributions provide hello agent as an RPM or Deb package (hello package is typically called 'WALinuxAgent' or 'walinuxagent').</span></span>  <span data-ttu-id="33c90-211">hello ügynök is telepítheti manuálisan hello hello utasításait követve [Linux-ügynök útmutató](../windows/agent-user-guide.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="33c90-211">hello agent can also be installed manually by following hello steps in hello [Linux Agent Guide](../windows/agent-user-guide.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span></span>

* <span data-ttu-id="33c90-212">Győződjön meg arról, hogy hello SSH kiszolgáló telepítve van, és rendszerindítás toostart konfigurálva.</span><span class="sxs-lookup"><span data-stu-id="33c90-212">Ensure that hello SSH server is installed and configured toostart at boot time.</span></span>  <span data-ttu-id="33c90-213">Ez általában akkor hello alapértelmezett.</span><span class="sxs-lookup"><span data-stu-id="33c90-213">This is usually hello default.</span></span>

* <span data-ttu-id="33c90-214">Ne hozzon létre lapozóterület a hello operációsrendszer-lemez</span><span class="sxs-lookup"><span data-stu-id="33c90-214">Do not create swap space on hello OS disk</span></span>
  
    <span data-ttu-id="33c90-215">hello Azure Linux ügynök automatikusan konfigurálhatók a lapozóterület használata hello helyi erőforrás lemezhez csatolt toohello VM Azure kiépítése után.</span><span class="sxs-lookup"><span data-stu-id="33c90-215">hello Azure Linux Agent can automatically configure swap space using hello local resource disk that is attached toohello VM after provisioning on Azure.</span></span> <span data-ttu-id="33c90-216">Vegye figyelembe, hogy hello helyi erőforrás lemez egy *ideiglenes* lemezre, és előfordulhat, hogy üríteni, megszüntetett hello virtuális gép esetén.</span><span class="sxs-lookup"><span data-stu-id="33c90-216">Note that hello local resource disk is a *temporary* disk, and might be emptied when hello VM is deprovisioned.</span></span> <span data-ttu-id="33c90-217">Miután telepítette a hello Azure Linux ügynök (lásd az előző lépésben), módosítsa megfelelően a következő paraméterek a /etc/waagent.conf hello:</span><span class="sxs-lookup"><span data-stu-id="33c90-217">After installing hello Azure Linux Agent (see previous step), modify hello following parameters in /etc/waagent.conf appropriately:</span></span>
  
        ResourceDisk.Format=y
        ResourceDisk.Filesystem=ext4
        ResourceDisk.MountPoint=/mnt/resource
        ResourceDisk.EnableSwap=y
        ResourceDisk.SwapSizeMB=2048    ## NOTE: set this toowhatever you need it toobe.

* <span data-ttu-id="33c90-218">Utolsó lépésként futtassa a következő parancsok toodeprovision hello virtuális gép hello:</span><span class="sxs-lookup"><span data-stu-id="33c90-218">As a final step, run hello following commands toodeprovision hello virtual machine:</span></span>
  
        # sudo waagent -force -deprovision
        # export HISTSIZE=0
        # logout
  
  > [!NOTE]
  > <span data-ttu-id="33c90-219">Virtualbox a következő hiba futtatása után hello jelenhetnek meg "waagent-force - deprovision": `[Errno 5] Input/output error`.</span><span class="sxs-lookup"><span data-stu-id="33c90-219">On Virtualbox you may see hello following error after running 'waagent -force -deprovision': `[Errno 5] Input/output error`.</span></span> <span data-ttu-id="33c90-220">Ez a hibaüzenet nem fontos, és figyelmen kívül lesz hagyva.</span><span class="sxs-lookup"><span data-stu-id="33c90-220">This error message is not critical and can be ignored.</span></span>
  > 
  > 

* <span data-ttu-id="33c90-221">Akkor lesz majd tooshut hello virtuális gépét le kell, és töltse fel a hello VHD tooAzure.</span><span class="sxs-lookup"><span data-stu-id="33c90-221">You will then need tooshut down hello virtual machine and upload hello VHD tooAzure.</span></span>

