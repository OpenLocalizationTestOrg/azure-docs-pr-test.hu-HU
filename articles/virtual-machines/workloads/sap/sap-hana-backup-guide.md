---
title: "a SAP HANA Azure virtuális gépeken aaaBackup útmutatója |} Microsoft Docs"
description: "Biztonsági mentési SAP Hana az útmutató két fő biztonsági mentési lehetőségek SAP Hana az Azure virtuális gépeken"
services: virtual-machines-linux
documentationcenter: 
author: hermanndms
manager: timlt
editor: 
ms.service: virtual-machines-linux
ms.devlang: NA
ms.topic: article
ums.tgt_pltfrm: vm-linux
ms.workload: infrastructure-services
ms.date: 3/13/2017
ms.author: rclaus
ms.openlocfilehash: e651091bb5da2698ec8bf80cad405bfce5b192cf
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/06/2017
---
# <a name="backup-guide-for-sap-hana-on-azure-virtual-machines"></a><span data-ttu-id="50eec-103">Útmutató az Azure-beli virtuális gépeken futó SAP HANA biztonsági mentéséhez</span><span class="sxs-lookup"><span data-stu-id="50eec-103">Backup guide for SAP HANA on Azure Virtual Machines</span></span>

## <a name="getting-started"></a><span data-ttu-id="50eec-104">Első lépések</span><span class="sxs-lookup"><span data-stu-id="50eec-104">Getting Started</span></span>

<span data-ttu-id="50eec-105">hello biztonsági mentési útmutató az Azure virtuális gépeken futó SAP Hana csak Azure-specifikus témakörök ismerteti.</span><span class="sxs-lookup"><span data-stu-id="50eec-105">hello backup guide for SAP HANA running on Azure virtual Machines will only describe Azure-specific topics.</span></span> <span data-ttu-id="50eec-106">Általános SAP HANA biztonsági mentési kapcsolódó elemek, dokumentációjában hello SAP HANA (lásd: _biztonsági mentési SAP HANA-dokumentáció_ Ez a cikk későbbi).</span><span class="sxs-lookup"><span data-stu-id="50eec-106">For general SAP HANA backup related items, check hello SAP HANA documentation (see _SAP HANA backup documentation_ later in this article).</span></span>

<span data-ttu-id="50eec-107">hello Ez a cikk célja a két fő biztonsági mentési lehetőségek SAP Hana az Azure virtuális gépeken:</span><span class="sxs-lookup"><span data-stu-id="50eec-107">hello focus of this article is on two major backup possibilities for SAP HANA on Azure virtual machines:</span></span>

- <span data-ttu-id="50eec-108">HANA biztonsági mentési toohello fájlrendszer egy Azure Linux virtuális gépen (lásd: [SAP HANA Azure biztonsági mentési fájl szinten](sap-hana-backup-file-level.md))</span><span class="sxs-lookup"><span data-stu-id="50eec-108">HANA backup toohello file system in an Azure Linux Virtual Machine (see [SAP HANA Azure Backup on file level](sap-hana-backup-file-level.md))</span></span>
- <span data-ttu-id="50eec-109">A storage-pillanatfelvételekkel hello az Azure storage blob pillanatkép funkció használatával manuálisan vagy az Azure Backup szolgáltatás alapján HANA biztonsági mentés (lásd: [SAP HANA biztonsági másolat alapján storage-pillanatfelvételekkel](sap-hana-backup-storage-snapshots.md))</span><span class="sxs-lookup"><span data-stu-id="50eec-109">HANA backup based on storage snapshots using hello Azure storage blob snapshot feature manually or Azure Backup Service (see [SAP HANA backup based on storage snapshots](sap-hana-backup-storage-snapshots.md))</span></span>

<span data-ttu-id="50eec-110">SAP HANA API, amely lehetővé teszi, hogy a külső biztonsági mentési eszközök toointegrate közvetlenül az SAP HANA biztonsági kínál.</span><span class="sxs-lookup"><span data-stu-id="50eec-110">SAP HANA offers a backup API, which allows third-party backup tools toointegrate directly with SAP HANA.</span></span> <span data-ttu-id="50eec-111">(Ez nem ez az útmutató hello hatókörén belül.) Nincs közvetlen integráció az Azure Backup szolgáltatásban elérhető jobbra a alapján ez az API SAP HANA van.</span><span class="sxs-lookup"><span data-stu-id="50eec-111">(That is not within hello scope of this guide.) There is no direct integration of SAP HANA with Azure Backup service available right now based on this API.</span></span>

<span data-ttu-id="50eec-112">SAP HANA hivatalosan támogatott Azure virtuális gép típus GS5, egy további korlátozás tooOLAP munkaterhelések az Egypéldányos (lásd: [hitelesített IaaS platformok](https://global.sap.com/community/ebook/2014-09-02-hana-hardware/enEN/iaas.html) hello SAP webhelyen).</span><span class="sxs-lookup"><span data-stu-id="50eec-112">SAP HANA is officially supported on Azure VM type GS5 as single instance with an additional restriction tooOLAP workloads (see [Find Certified IaaS Platforms](https://global.sap.com/community/ebook/2014-09-02-hana-hardware/enEN/iaas.html) on hello SAP website).</span></span> <span data-ttu-id="50eec-113">Ez a cikk új ajánlatok SAP Hana Azure elérhető legyen, mint fog frissülni.</span><span class="sxs-lookup"><span data-stu-id="50eec-113">This article will be updated as new offerings for SAP HANA on Azure become available.</span></span>

<span data-ttu-id="50eec-114">Nem érhető el egy SAP HANA hibrid megoldás Azure SAP HANA futtató nem virtualizált fizikai kiszolgálókon.</span><span class="sxs-lookup"><span data-stu-id="50eec-114">There is also an SAP HANA hybrid solution available on Azure, where SAP HANA runs non-virtualized on physical servers.</span></span> <span data-ttu-id="50eec-115">Azonban az SAP HANA Azure biztonsági mentési útmutató hozzá van rendelve egy SAP HANA futtató egy Azure virtuális gép, a SAP HANA-nem fut a tiszta Azure-környezetéhez &quot;nagy példányok.&quot; Lásd: [SAP HANA (nagy példányok) – áttekintés és Azure architektúra](hana-overview-architecture.md) tájékozódhat a biztonsági mentési megoldás a &quot;nagy példányok&quot; storage-pillanatfelvételekkel alapján.</span><span class="sxs-lookup"><span data-stu-id="50eec-115">However, this SAP HANA Azure backup guide covers a pure Azure environment where SAP HANA runs in an Azure VM, not SAP HANA running on &quot;large instances.&quot; See [SAP HANA (large instances) overview and architecture on Azure](hana-overview-architecture.md) for more information about this backup solution on &quot;large instances&quot; based on storage snapshots.</span></span>

<span data-ttu-id="50eec-116">Általános információk a támogatott Azure SAP termékek található [SAP Megjegyzés 1928533](https://launchpad.support.sap.com/#/notes/1928533).</span><span class="sxs-lookup"><span data-stu-id="50eec-116">General information about SAP products supported on Azure can be found in [SAP Note 1928533](https://launchpad.support.sap.com/#/notes/1928533).</span></span>

<span data-ttu-id="50eec-117">hello következő három ábra áttekintést hello SAP HANA natív Azure-képességek jelenleg használt biztonsági mentési lehetőségeket, és három lehetséges jövőbeli biztonsági mentési helyzetet is megjelenítése.</span><span class="sxs-lookup"><span data-stu-id="50eec-117">hello following three figures give an overview of hello SAP HANA backup options using native Azure capabilities currently, and also show three potential future backup scenarios.</span></span> <span data-ttu-id="50eec-118">hello kapcsolódó cikkekben [SAP HANA Azure biztonsági mentési fájl szinten](sap-hana-backup-file-level.md) és [SAP HANA biztonsági másolat alapján storage-pillanatfelvételekkel](sap-hana-backup-storage-snapshots.md) ezeket a beállításokat, beleértve az SAP mérete és a teljesítménnyel kapcsolatos részletesebb leírása HANA biztonsági mentések, amelyek multi-terabájt méretű.</span><span class="sxs-lookup"><span data-stu-id="50eec-118">hello related articles [SAP HANA Azure Backup on file level](sap-hana-backup-file-level.md) and [SAP HANA backup based on storage snapshots](sap-hana-backup-storage-snapshots.md) describe these options in more detail, including size and performance considerations for SAP HANA backups that are multi-terabytes in size.</span></span>

![Az ábrán látható, két lehetőség közül választhat a hello aktuális VM állapotának mentése](media/sap-hana-backup-guide/image001.png)

<span data-ttu-id="50eec-120">Az ábrán látható, hello aktuális virtuális gép állapotát, vagy Azure Backup szolgáltatás vagy Virtuálisgép-lemezek manuális pillanatkép mentésekor hello lehetőségét.</span><span class="sxs-lookup"><span data-stu-id="50eec-120">This figure shows hello possibility of saving hello current VM state, either via Azure Backup service or manual snapshot of VM disks.</span></span> <span data-ttu-id="50eec-121">Ezt a módszert használja, egy nem &#39; nincs toomanage SAP HANA biztonsági mentéseket.</span><span class="sxs-lookup"><span data-stu-id="50eec-121">With this approach, one doesn&#39;t have toomanage SAP HANA backups.</span></span> <span data-ttu-id="50eec-122">hello challenge hello lemez pillanatkép forgatókönyv fájlrendszer-konzisztenciával, de az alkalmazáskonzisztens lemez állapota.</span><span class="sxs-lookup"><span data-stu-id="50eec-122">hello challenge of hello disk snapshot scenario is file system consistency, and an application-consistent disk state.</span></span> <span data-ttu-id="50eec-123">hello konzisztencia témakör hello szakaszban tárgyalt _SAP HANA adatkonzisztencia véve a storage-pillanatfelvételekkel_ című cikkben.</span><span class="sxs-lookup"><span data-stu-id="50eec-123">hello consistency topic is discussed in hello section _SAP HANA data consistency when taking storage snapshots_ later in this article.</span></span> <span data-ttu-id="50eec-124">Képességek és korlátozások az Azure Backup szolgáltatással kapcsolatos tooSAP HANA biztonsági mentéseket is ismertetése a cikk későbbi részében.</span><span class="sxs-lookup"><span data-stu-id="50eec-124">Capabilities and restrictions of Azure Backup service related tooSAP HANA backups are also discussed later in this article.</span></span>

![Az ábrán látható, hogy egy SAP HANA fogadására beállítások fájlszintű biztonsági belül hello VM](media/sap-hana-backup-guide/image002.png)

<span data-ttu-id="50eec-126">Ez a szám egy SAP HANA-biztonsági mentés hello VM belül, és majd tárolásukról HANA biztonságimásolat-fájlok valahol ellenkező esetben a különböző eszközök használatával lehetőségeket mutatja be.</span><span class="sxs-lookup"><span data-stu-id="50eec-126">This figure shows options for taking an SAP HANA file backup inside hello VM, and then storing it HANA backup files somewhere else using different tools.</span></span> <span data-ttu-id="50eec-127">HANA biztonsági másolat egy pillanatkép-alapú biztonsági mentési megoldás több időt igényel, azonban mindenképpen sértetlenségét és konzisztencia előnyeit.</span><span class="sxs-lookup"><span data-stu-id="50eec-127">Taking a HANA backup requires more time than a snapshot-based backup solution, but it has advantages regarding integrity and consistency.</span></span> <span data-ttu-id="50eec-128">További részletek találhatók a cikk későbbi részében.</span><span class="sxs-lookup"><span data-stu-id="50eec-128">More details are provided later in this article.</span></span>

![Ezen az ábrán egy lehetséges jövőbeli SAP HANA biztonsági mentési forgatókönyvet mutat](media/sap-hana-backup-guide/image003.png)

<span data-ttu-id="50eec-130">Ezen az ábrán egy lehetséges jövőbeli SAP HANA biztonsági mentési forgatókönyvet mutat.</span><span class="sxs-lookup"><span data-stu-id="50eec-130">This figure shows a potential future SAP HANA backup scenario.</span></span> <span data-ttu-id="50eec-131">SAP HANA engedélyezett másodlagos replikációból biztonsági másolatok fogadására, ha azt szeretné adja hozzá a biztonsági mentési stratégia további beállításokat.</span><span class="sxs-lookup"><span data-stu-id="50eec-131">If SAP HANA allowed taking backups from a replication secondary, it would add additional options for backup strategies.</span></span> <span data-ttu-id="50eec-132">Jelenleg nem lehet megfelelően tooa közlemény hello SAP HANA Wiki:</span><span class="sxs-lookup"><span data-stu-id="50eec-132">Currently it isn't possible according tooa post in hello SAP HANA Wiki:</span></span>

<span data-ttu-id="50eec-133">_&quot;Ennyi az egész lehetséges tootake biztonsági mentések hello másodlagos oldalon?_</span><span class="sxs-lookup"><span data-stu-id="50eec-133">_&quot;Is it possible tootake backups on hello secondary side?_</span></span>

<span data-ttu-id="50eec-134">_Nem, jelenleg csak adatokat és naplófájl biztonsági mentések hello elsődleges oldalán. Ha automatikus napló biztonsági mentési engedélyezve van, felvásárlási toohello másodlagos oldalon után hello naplóalapú biztonsági mentések automatikusan írandó van.&quot;_</span><span class="sxs-lookup"><span data-stu-id="50eec-134">_No, currently you can only take data and log backups on hello primary side. If automatic log backup is enabled, after takeover toohello secondary side, hello log backups will automatically be written there.&quot;_</span></span>

## <a name="sap-resources-for-hana-backup"></a><span data-ttu-id="50eec-135">SAP HANA biztonsági mentés erőforrásait</span><span class="sxs-lookup"><span data-stu-id="50eec-135">SAP resources for HANA backup</span></span>

### <a name="sap-hana-backup-documentation"></a><span data-ttu-id="50eec-136">Biztonsági mentési SAP HANA-dokumentáció</span><span class="sxs-lookup"><span data-stu-id="50eec-136">SAP HANA backup documentation</span></span>

- [<span data-ttu-id="50eec-137">Bevezetés tooSAP HANA felügyeleti</span><span class="sxs-lookup"><span data-stu-id="50eec-137">Introduction tooSAP HANA Administration</span></span>](https://help.sap.com/viewer/6b94445c94ae495c83a19646e7c3fd56/2.0.00/en-US)
- [<span data-ttu-id="50eec-138">A biztonsági mentési és helyreállítási stratégia tervezése</span><span class="sxs-lookup"><span data-stu-id="50eec-138">Planning Your Backup and Recovery Strategy</span></span>](https://help.sap.com/saphelp_hanaplatform/helpdata/en/ef/085cd5949c40b788bba8fd3c65743e/content.htm)
- [<span data-ttu-id="50eec-139">Biztonsági mentés HANA ABAP DBACOCKPIT ütemezése</span><span class="sxs-lookup"><span data-stu-id="50eec-139">Schedule HANA Backup using ABAP DBACOCKPIT</span></span>](http://www.hanatutorials.com/p/schedule-hana-backup-using-abap.html)
- [<span data-ttu-id="50eec-140">Ütemezési adatok biztonsági mentése (SAP HANA Vezérlőpult)</span><span class="sxs-lookup"><span data-stu-id="50eec-140">Schedule Data Backups (SAP HANA Cockpit)</span></span>](http://help.sap.com/saphelp_hanaplatform/helpdata/en/6d/385fa14ef64a6bab2c97a3d3e40292/frameset.htm)
- <span data-ttu-id="50eec-141">SAP HANA gyakori kérdések a biztonsági mentés [SAP Megjegyzés 1642148](https://launchpad.support.sap.com/#/notes/1642148)</span><span class="sxs-lookup"><span data-stu-id="50eec-141">FAQ about SAP HANA backup in [SAP Note 1642148](https://launchpad.support.sap.com/#/notes/1642148)</span></span>
- <span data-ttu-id="50eec-142">Gyakori kérdések az adatbázis és a tárolási pillanatképek SAP HANA [SAP Megjegyzés 2039883](https://launchpad.support.sap.com/#/notes/2039883)</span><span class="sxs-lookup"><span data-stu-id="50eec-142">FAQ about SAP HANA database and storage snapshots in [SAP Note 2039883](https://launchpad.support.sap.com/#/notes/2039883)</span></span>
- <span data-ttu-id="50eec-143">Nem alkalmas hálózati fájlrendszerek biztonsági másolat és helyreállítás a [SAP Megjegyzés 1820529](https://launchpad.support.sap.com/#/notes/1820529)</span><span class="sxs-lookup"><span data-stu-id="50eec-143">Unsuitable network file systems for backup and recovery in [SAP Note 1820529](https://launchpad.support.sap.com/#/notes/1820529)</span></span>

### <a name="why-sap-hana-backup"></a><span data-ttu-id="50eec-144">Miért SAP HANA biztonsági mentést?</span><span class="sxs-lookup"><span data-stu-id="50eec-144">Why SAP HANA backup?</span></span>

<span data-ttu-id="50eec-145">Az Azure storage kínál rendelkezésre állásának és megbízhatóságának hello kezdő verzióról (lásd: [Azure Storage bemutatása tooMicrosoft](../../../storage/common/storage-introduction.md) további információ az Azure storage).</span><span class="sxs-lookup"><span data-stu-id="50eec-145">Azure storage offers availability and reliability out of hello box (see [Introduction tooMicrosoft Azure Storage](../../../storage/common/storage-introduction.md) for more information about Azure storage).</span></span>

<span data-ttu-id="50eec-146">a minimális hello &quot;biztonsági mentési&quot; toorely hello Azure SLA-kat, ha megtartja hello az SAP HANA adatainak és naplókönyvtárainak fájlok Azure virtuális merevlemezek csatolt toohello SAP HANA-kiszolgálón virtuális gép van.</span><span class="sxs-lookup"><span data-stu-id="50eec-146">hello minimum for &quot;backup&quot; is toorely on hello Azure SLAs, keeping hello SAP HANA data and log files on Azure VHDs attached toohello SAP HANA server VM.</span></span> <span data-ttu-id="50eec-147">Ez a megközelítés VM hibák, de a nem lehetséges kárt toohello SAP HANA adatok és a naplófájlokat vagy a logikai hibák például törlés, adatok vagy a fájlok véletlenül ismerteti.</span><span class="sxs-lookup"><span data-stu-id="50eec-147">This approach covers VM failures, but not potential damage toohello SAP HANA data and log files, or logical errors like deleting data or files by accident.</span></span> <span data-ttu-id="50eec-148">Biztonsági mentés is szükség, megfelelőségi vagy jogi okokból.</span><span class="sxs-lookup"><span data-stu-id="50eec-148">Backups are also required for compliance or legal reasons.</span></span> <span data-ttu-id="50eec-149">Rövid mindig szükség van a SAP HANA biztonsági mentésekhez.</span><span class="sxs-lookup"><span data-stu-id="50eec-149">In short, there is always a need for SAP HANA backups.</span></span>

### <a name="how-tooverify-correctness-of-sap-hana-backup"></a><span data-ttu-id="50eec-150">Hogyan tooverify helyességét SAP HANA biztonsági mentés.</span><span class="sxs-lookup"><span data-stu-id="50eec-150">How tooverify correctness of SAP HANA backup</span></span>
<span data-ttu-id="50eec-151">Egy teszt visszaállítást egy másik rendszeren futó tárolási pillanatképek használata esetén ajánlott.</span><span class="sxs-lookup"><span data-stu-id="50eec-151">When using storage snapshots, running a test restore on a different system is recommended.</span></span> <span data-ttu-id="50eec-152">Ezt a módszert biztosít a módon tooensure, hogy biztonsági helyes-e, és a belső folyamatok biztonsági mentési és visszaállítási munka várt módon.</span><span class="sxs-lookup"><span data-stu-id="50eec-152">This approach provides a way tooensure that a backup is correct, and internal processes for backup and restore work as expected.</span></span> <span data-ttu-id="50eec-153">Ez nem egy jelentős a küszöbértéket a helyszínen, sokkal könnyebb tooaccomplish hello felhőben megadásával szükséges erőforrások átmenetileg erre a célra.</span><span class="sxs-lookup"><span data-stu-id="50eec-153">While this is a significant hurdle on-premises, it is much easier tooaccomplish in hello cloud by providing necessary resources temporarily for this purpose.</span></span>

<span data-ttu-id="50eec-154">Tartsa szem előtt, amely során egy egyszerű visszaállítás és ellenőrizni, hogy HANA működik-e és fut nem elegendő.</span><span class="sxs-lookup"><span data-stu-id="50eec-154">Keep in mind that doing a simple restore and checking if HANA is up and running is not sufficient.</span></span> <span data-ttu-id="50eec-155">Ideális esetben egy olyan tábla konzisztencia ellenőrzése toobe meg arról, hogy hello visszaállítani az adatbázis finom kell futtatnia.</span><span class="sxs-lookup"><span data-stu-id="50eec-155">Ideally, one should run a table consistency check toobe sure that hello restored database is fine.</span></span> <span data-ttu-id="50eec-156">SAP HANA kínál a konzisztencia-ellenőrzések leírt különböző típusú [SAP Megjegyzés 1977584](https://launchpad.support.sap.com/#/notes/1977584).</span><span class="sxs-lookup"><span data-stu-id="50eec-156">SAP HANA offers several kinds of consistency checks described in [SAP Note 1977584](https://launchpad.support.sap.com/#/notes/1977584).</span></span>

<span data-ttu-id="50eec-157">Hello tábla konzisztencia-ellenőrzéssel kapcsolatos információkat is hello SAP webhelyen található [tábla és a katalógus konzisztencia-ellenőrzések](http://help.sap.com/saphelp_hanaplatform/helpdata/en/25/84ec2e324d44529edc8221956359ea/content.htm#loio9357bf52c7324bee9567dca417ad9f8b).</span><span class="sxs-lookup"><span data-stu-id="50eec-157">Information about hello table consistency check can also be found on hello SAP website at [Table and Catalog Consistency Checks](http://help.sap.com/saphelp_hanaplatform/helpdata/en/25/84ec2e324d44529edc8221956359ea/content.htm#loio9357bf52c7324bee9567dca417ad9f8b).</span></span>

<span data-ttu-id="50eec-158">A szokásos fájlszintű biztonsági a teszt visszaállítás nincs szükség.</span><span class="sxs-lookup"><span data-stu-id="50eec-158">For standard file backups, a test restore is not necessary.</span></span> <span data-ttu-id="50eec-159">Két SAP HANA-eszközzel, hogy mely biztonsági másolat nem használható visszaállítási toocheck súgó: hdbbackupdiag és hdbbackupcheck.</span><span class="sxs-lookup"><span data-stu-id="50eec-159">There are two SAP HANA tools that help toocheck which backup can be used for restore: hdbbackupdiag and hdbbackupcheck.</span></span> <span data-ttu-id="50eec-160">Lásd: [manuális ellenőrzése hogy a helyreállítás az lehetséges](https://help.sap.com/saphelp_hanaplatform/helpdata/en/77/522ef1e3cb4d799bab33e0aeb9c93b/content.htm) ezekkel az eszközökkel kapcsolatos további információk.</span><span class="sxs-lookup"><span data-stu-id="50eec-160">See [Manually Checking Whether a Recovery is Possible](https://help.sap.com/saphelp_hanaplatform/helpdata/en/77/522ef1e3cb4d799bab33e0aeb9c93b/content.htm) for more information about these tools.</span></span>

### <a name="pros-and-cons-of-hana-backup-versus-storage-snapshot"></a><span data-ttu-id="50eec-161">Előnyei és hátrányai HANA biztonsági mentés és tárolás pillanatkép</span><span class="sxs-lookup"><span data-stu-id="50eec-161">Pros and cons of HANA backup versus storage snapshot</span></span>

<span data-ttu-id="50eec-162">SAP nem &#39; t biztosít preferencia tooeither HANA biztonsági mentés és a tárolási pillanatkép.</span><span class="sxs-lookup"><span data-stu-id="50eec-162">SAP doesn&#39;t give preference tooeither HANA backup versus storage snapshot.</span></span> <span data-ttu-id="50eec-163">Felsorolja az előnyei és hátrányai, így egy megállapíthatja, hogy mely toouse hello helyzet és a rendelkezésre álló tár technológia függően (lásd: [tervezési a biztonsági mentési és helyreállítási stratégia](https://help.sap.com/saphelp_hanaplatform/helpdata/en/ef/085cd5949c40b788bba8fd3c65743e/content.htm)).</span><span class="sxs-lookup"><span data-stu-id="50eec-163">It lists their pros and cons, so one can determine which toouse depending on hello situation and available storage technology (see [Planning Your Backup and Recovery Strategy](https://help.sap.com/saphelp_hanaplatform/helpdata/en/ef/085cd5949c40b788bba8fd3c65743e/content.htm)).</span></span>

<span data-ttu-id="50eec-164">On Azure figyelembe hello tényt, hogy az Azure blob pillanatkép funkció nem & #39 hello; t garantálja a fájlrendszer-konzisztenciával (lásd: [blob pillanatképei Using PowerShell](https://blogs.msdn.microsoft.com/cie/2016/05/17/using-blob-snapshots-with-powershell/)).</span><span class="sxs-lookup"><span data-stu-id="50eec-164">On Azure, be aware of hello fact that hello Azure blob snapshot feature doesn&#39;t guarantee file system consistency (see [Using blob snapshots with PowerShell](https://blogs.msdn.microsoft.com/cie/2016/05/17/using-blob-snapshots-with-powershell/)).</span></span> <span data-ttu-id="50eec-165">hello a következő szakaszban _SAP HANA adatkonzisztencia véve a storage-pillanatfelvételekkel_, ez a szolgáltatás kapcsolatos szempontokat ismerteti.</span><span class="sxs-lookup"><span data-stu-id="50eec-165">hello next section, _SAP HANA data consistency when taking storage snapshots_, discusses some considerations regarding this feature.</span></span>

<span data-ttu-id="50eec-166">Emellett egy rendelkezik toounderstand hello számlázási gyakorolt hatása, amikor olyan gyakran blob pillanatképek ebben a cikkben leírtak szerint: [ismertetése hogyan pillanatképek keletkeznek költségek](/rest/api/storageservices/understanding-how-snapshots-accrue-charges)– ez nem &#39; t, nyilvánvaló Azure használatával virtuális lemezek.</span><span class="sxs-lookup"><span data-stu-id="50eec-166">In addition, one has toounderstand hello billing implications when working frequently with blob snapshots as described in this article: [Understanding How Snapshots Accrue Charges](/rest/api/storageservices/understanding-how-snapshots-accrue-charges)—it isn&#39;t as obvious as using Azure virtual disks.</span></span>

### <a name="sap-hana-data-consistency-when-taking-storage-snapshots"></a><span data-ttu-id="50eec-167">SAP HANA adatkonzisztencia véve a storage-pillanatfelvételekkel</span><span class="sxs-lookup"><span data-stu-id="50eec-167">SAP HANA data consistency when taking storage snapshots</span></span>

<span data-ttu-id="50eec-168">A fájlok rendszer és az alkalmazás konzisztenciájának egy összetett probléma esetén tárolási pillanatképek készítése.</span><span class="sxs-lookup"><span data-stu-id="50eec-168">File system and application consistency is a complex issue when taking storage snapshots.</span></span> <span data-ttu-id="50eec-169">hello legegyszerűbb módja tooavoid problémák volna tooshut SAP HANA le, vagy lehet, hogy még a hello egész virtuális gép is.</span><span class="sxs-lookup"><span data-stu-id="50eec-169">hello easiest way tooavoid problems would be tooshut down SAP HANA, or maybe even hello whole virtual machine.</span></span> <span data-ttu-id="50eec-170">Előfordulhat, hogy a leállás doable egy bemutató vagy prototípus vagy akár egy fejlesztői rendszernek, de nincs lehetőség az éles rendszerre.</span><span class="sxs-lookup"><span data-stu-id="50eec-170">A shutdown might be doable with a demo or prototype, or even a development system, but it is not an option for a production system.</span></span>

<span data-ttu-id="50eec-171">A Azure-ban egy rendelkezik vegye figyelembe, hogy az Azure blob pillanatkép funkció nem & #39 hello tookeep; t fájlrendszer-konzisztencia biztosításához.</span><span class="sxs-lookup"><span data-stu-id="50eec-171">On Azure, one has tookeep in mind that hello Azure blob snapshot feature doesn&#39;t guarantee file system consistency.</span></span> <span data-ttu-id="50eec-172">Jól működik azonban hello segítségével SAP HANA pillanatkép-funkció, mindaddig, amíg nincs érintett csak egyetlen virtuális lemez.</span><span class="sxs-lookup"><span data-stu-id="50eec-172">It works fine however by using hello SAP HANA snapshot feature, as long as there is only a single virtual disk involved.</span></span> <span data-ttu-id="50eec-173">De egyetlen lemezen, még akkor is a további elemek toobe be van jelölve.</span><span class="sxs-lookup"><span data-stu-id="50eec-173">But even with a single disk, additional items have toobe checked.</span></span> <span data-ttu-id="50eec-174">[Megjegyzés: 2039883 SAP](https://launchpad.support.sap.com/#/notes/2039883) SAP HANA-biztonsági mentések storage-pillanatfelvételekkel keresztül kapcsolatos fontos információkat tartalmaz.</span><span class="sxs-lookup"><span data-stu-id="50eec-174">[SAP Note 2039883](https://launchpad.support.sap.com/#/notes/2039883) has important information about SAP HANA backups via storage snapshots.</span></span> <span data-ttu-id="50eec-175">Például, hogy megjelenik-e, hogy a hello XFS fájlrendszer esetén szükséges toorun **xfs\_rögzítése** tooguarantee konzisztencia pillanatkép-tárolási indítása előtt (lásd: [xfs\_freeze(8) - Linux man lap](https://linux.die.net/man/8/xfs_freeze) talál részletes információt **xfs\_rögzítése**).</span><span class="sxs-lookup"><span data-stu-id="50eec-175">For example, it mentions that, with hello XFS file system, it is necessary toorun **xfs\_freeze** before starting a storage snapshot tooguarantee consistency (see [xfs\_freeze(8) - Linux man page](https://linux.die.net/man/8/xfs_freeze) for details on **xfs\_freeze**).</span></span>

<span data-ttu-id="50eec-176">hello témakör következetesség lesz, abban az esetben, ha egy operációs rendszer által felölelt több lemez/kötet még több kihívást.</span><span class="sxs-lookup"><span data-stu-id="50eec-176">hello topic of consistency becomes even more challenging in a case where a single file system spans multiple disks/volumes.</span></span> <span data-ttu-id="50eec-177">Például úgy, hogy mdadm vagy LVM használ, és szétosztott.</span><span class="sxs-lookup"><span data-stu-id="50eec-177">For example, by using mdadm or LVM and striping.</span></span> <span data-ttu-id="50eec-178">a fenti állapotok SAP Megjegyzés hello:</span><span class="sxs-lookup"><span data-stu-id="50eec-178">hello SAP Note mentioned above states:</span></span>

<span data-ttu-id="50eec-179">_&quot;De vegye figyelembe, hogy rendelkezik-e hello tárolórendszer tooguarantee i/o-konzisztencia SAP HANA-adatok kötetenként tárolási pillanatkép létrehozása során, azaz egy SAP HANA-szolgáltatással kapcsolatos adatok kötet pillanatfelvételeinek egy atomi művelet kell lennie.&quot;_</span><span class="sxs-lookup"><span data-stu-id="50eec-179">_&quot;But keep in mind that hello storage system has tooguarantee I/O consistency while creating a storage snapshot per SAP HANA data volume, i.e. snapshotting of an SAP HANA service-specific data volume must be an atomic operation.&quot;_</span></span>

<span data-ttu-id="50eec-180">Feltételezve, hogy az átfedés négy Azure virtuális lemezek XFS fájlrendszer, hello alábbi lépések nyújtanak hello HANA adatterület jelölő alkalmazáskonzisztens pillanatkép:</span><span class="sxs-lookup"><span data-stu-id="50eec-180">Assuming there is an XFS file system spanning four Azure virtual disks, hello following steps provide a consistent snapshot that represents hello HANA data area:</span></span>

- <span data-ttu-id="50eec-181">HANA pillanatkép előkészítése</span><span class="sxs-lookup"><span data-stu-id="50eec-181">HANA snapshot prepare</span></span>
- <span data-ttu-id="50eec-182">Hello fájlrendszer rögzítése (például **xfs\_rögzítése**)</span><span class="sxs-lookup"><span data-stu-id="50eec-182">Freeze hello file system (for example, use **xfs\_freeze**)</span></span>
- <span data-ttu-id="50eec-183">Minden szükséges blob pillanatkép létrehozása az Azure</span><span class="sxs-lookup"><span data-stu-id="50eec-183">Create all necessary blob snapshots on Azure</span></span>
- <span data-ttu-id="50eec-184">Hello fájlrendszer feloldása</span><span class="sxs-lookup"><span data-stu-id="50eec-184">Unfreeze hello file system</span></span>
- <span data-ttu-id="50eec-185">Hello HANA pillanatkép megerősítése</span><span class="sxs-lookup"><span data-stu-id="50eec-185">Confirm hello HANA snapshot</span></span>

<span data-ttu-id="50eec-186">Javasoljuk, toouse hello fent leírt lépéseket az összes eset toobe hello biztonságos oldalán, függetlenül attól, milyen fájlrendszer.</span><span class="sxs-lookup"><span data-stu-id="50eec-186">Recommendation is toouse hello procedure above in all cases toobe on hello safe side, no matter which file system.</span></span> <span data-ttu-id="50eec-187">Vagy ha ez egy egyetlen lemez vagy, mdadm vagy LVM több lemezre kiterjedő csíkozást.</span><span class="sxs-lookup"><span data-stu-id="50eec-187">Or if it is a single disk or striping, via mdadm or LVM across multiple disks.</span></span>

<span data-ttu-id="50eec-188">Fontos tooconfirm hello HANA pillanatkép.</span><span class="sxs-lookup"><span data-stu-id="50eec-188">It is important tooconfirm hello HANA snapshot.</span></span> <span data-ttu-id="50eec-189">Esedékes toohello &quot;másolási módosításkor,&quot; SAP HANA előfordulhat, hogy nincs szükség további lemezterületet a ez mód pillanatkép-előkészítéséhez.</span><span class="sxs-lookup"><span data-stu-id="50eec-189">Due toohello &quot;Copy-on-Write,&quot; SAP HANA might not require additional disk space while in this snapshot-prepare mode.</span></span> <span data-ttu-id="50eec-190">&#39; s is nem lehetséges toostart új biztonsági mentés mindaddig, amíg hello SAP HANA pillanatkép ellenőrzése.</span><span class="sxs-lookup"><span data-stu-id="50eec-190">It&#39;s also not possible toostart new backups until hello SAP HANA snapshot is confirmed.</span></span>

<span data-ttu-id="50eec-191">Az Azure Backup szolgáltatás Azure virtuális gép bővítményei tootake kiszolgálásához hello fájlrendszer-konzisztenciával használja.</span><span class="sxs-lookup"><span data-stu-id="50eec-191">Azure Backup service uses Azure VM extensions tootake care of hello file system consistency.</span></span> <span data-ttu-id="50eec-192">A Virtuálisgép-bővítmények önálló használatra nem érhetők el.</span><span class="sxs-lookup"><span data-stu-id="50eec-192">These VM extensions are not available for standalone usage.</span></span> <span data-ttu-id="50eec-193">Egy még toomanage SAP HANA konzisztencia.</span><span class="sxs-lookup"><span data-stu-id="50eec-193">One still has toomanage SAP HANA consistency.</span></span> <span data-ttu-id="50eec-194">Hello kapcsolódó cikkében [SAP HANA Azure Backup a fájlszintű](sap-hana-backup-file-level.md) további információt.</span><span class="sxs-lookup"><span data-stu-id="50eec-194">See hello related article [SAP HANA Azure Backup on file level](sap-hana-backup-file-level.md) for more information.</span></span>

### <a name="sap-hana-backup-scheduling-strategy"></a><span data-ttu-id="50eec-195">SAP HANA-ütemezési biztonsági mentési stratégia</span><span class="sxs-lookup"><span data-stu-id="50eec-195">SAP HANA backup scheduling strategy</span></span>

<span data-ttu-id="50eec-196">hello SAP HANA-cikk [tervezési a biztonsági mentési és helyreállítási stratégia](https://help.sap.com/saphelp_hanaplatform/helpdata/en/ef/085cd5949c40b788bba8fd3c65743e/content.htm) állapotok Basicben a terv toodo biztonsági mentések:</span><span class="sxs-lookup"><span data-stu-id="50eec-196">hello SAP HANA article [Planning Your Backup and Recovery Strategy](https://help.sap.com/saphelp_hanaplatform/helpdata/en/ef/085cd5949c40b788bba8fd3c65743e/content.htm) states a basic plan toodo backups:</span></span>

- <span data-ttu-id="50eec-197">(Naponta) pillanatkép-tárolás</span><span class="sxs-lookup"><span data-stu-id="50eec-197">Storage snapshot (daily)</span></span>
- <span data-ttu-id="50eec-198">Teljes biztonsági mentését a fájl vagy bacint formátumban (hetente egyszer)</span><span class="sxs-lookup"><span data-stu-id="50eec-198">Complete data backup using file or bacint format (once a week)</span></span>
- <span data-ttu-id="50eec-199">Automatikus naplóalapú biztonsági mentések</span><span class="sxs-lookup"><span data-stu-id="50eec-199">Automatic log backups</span></span>

<span data-ttu-id="50eec-200">Szükség esetén egy sikerült nyissa meg teljesen nélkül storage-pillanatfelvételekkel; sikerült cserélhetősége HANA különbözeti biztonsági mentések, például növekményes vagy különbözeti biztonsági másolatok (lásd: [különbözeti biztonsági mentések](https://help.sap.com/saphelp_hanaplatform/helpdata/en/c3/bb7e33bb571014a03eeabba4e37541/content.htm)).</span><span class="sxs-lookup"><span data-stu-id="50eec-200">Optionally, one could go completely without storage snapshots; they could be replaced by HANA delta backups, like incremental or differential backups (see [Delta Backups](https://help.sap.com/saphelp_hanaplatform/helpdata/en/c3/bb7e33bb571014a03eeabba4e37541/content.htm)).</span></span>

<span data-ttu-id="50eec-201">hello HANA felügyeleti útmutató egy példa listája.</span><span class="sxs-lookup"><span data-stu-id="50eec-201">hello HANA Administration guide provides an example list.</span></span> <span data-ttu-id="50eec-202">Azt javasolja, hogy egy helyreállítási az SAP HANA tooa adott pont, amikor a következő feladatütemezési a biztonsági mentések hello:</span><span class="sxs-lookup"><span data-stu-id="50eec-202">It suggests that one recover SAP HANA tooa specific point in time using hello following sequence of backups:</span></span>

1. <span data-ttu-id="50eec-203">Teljes biztonságimásolat-készítő</span><span class="sxs-lookup"><span data-stu-id="50eec-203">Full data backup</span></span>
2. <span data-ttu-id="50eec-204">Különbözeti biztonsági mentése</span><span class="sxs-lookup"><span data-stu-id="50eec-204">Differential backup</span></span>
3. <span data-ttu-id="50eec-205">A növekményes biztonsági mentés 1</span><span class="sxs-lookup"><span data-stu-id="50eec-205">Incremental backup 1</span></span>
4. <span data-ttu-id="50eec-206">A növekményes biztonsági mentés 2. régiója</span><span class="sxs-lookup"><span data-stu-id="50eec-206">Incremental backup 2</span></span>
5. <span data-ttu-id="50eec-207">Napló-biztonságimásolatokat</span><span class="sxs-lookup"><span data-stu-id="50eec-207">Log backups</span></span>

<span data-ttu-id="50eec-208">Vonatkozó pontos ütemezés toowhen és milyen gyakran történjen egy adott típust, nincs lehetséges toogive általános iránymutatás – ez túl specifikus, és hány adatok változás hello rendszer függ.</span><span class="sxs-lookup"><span data-stu-id="50eec-208">Regarding an exact schedule as toowhen and how often a specific backup type should happen, it is not possible toogive a general guideline—it is too customer-specific, and depends on how many data changes occur in hello system.</span></span> <span data-ttu-id="50eec-209">Az SAP oldalról, általános útmutatásként látható, amely egy alapszintű javaslat toomake egy teljes HANA biztonsági mentés hetente egyszer.</span><span class="sxs-lookup"><span data-stu-id="50eec-209">One basic recommendation from SAP side, which can be seen as general guidance, is toomake one full HANA backup once a week.</span></span>
<span data-ttu-id="50eec-210">Kapcsolódó napló-biztonságimásolatokat a dokumentációban hello SAP HANA [Naplóalapú biztonsági mentések](https://help.sap.com/saphelp_hanaplatform/helpdata/en/c3/bb7e33bb571014a03eeabba4e37541/content.htm).</span><span class="sxs-lookup"><span data-stu-id="50eec-210">Regarding log backups, see hello SAP HANA documentation [Log Backups](https://help.sap.com/saphelp_hanaplatform/helpdata/en/c3/bb7e33bb571014a03eeabba4e37541/content.htm).</span></span>

<span data-ttu-id="50eec-211">SAP is azt javasolja, hogy néhány housekeeping hello biztonságimásolat-katalógus tookeep, ezzel az archív végtelenül (lásd: [biztonságimásolat-katalógus és a biztonsági másolatok tárolásának háztartási](http://help.sap.com/saphelp_hanaplatform/helpdata/en/ca/c903c28b0e4301b39814ef41dbf568/content.htm)).</span><span class="sxs-lookup"><span data-stu-id="50eec-211">SAP also recommends doing some housekeeping of hello backup catalog tookeep it from growing infinitely (see [Housekeeping for Backup Catalog and Backup Storage](http://help.sap.com/saphelp_hanaplatform/helpdata/en/ca/c903c28b0e4301b39814ef41dbf568/content.htm)).</span></span>

### <a name="sap-hana-configuration-files"></a><span data-ttu-id="50eec-212">SAP HANA-konfigurációs fájlok</span><span class="sxs-lookup"><span data-stu-id="50eec-212">SAP HANA configuration files</span></span>

<span data-ttu-id="50eec-213">Hello – gyakori kérdések a leírtaknak [SAP Megjegyzés 1642148](https://launchpad.support.sap.com/#/notes/1642148), hello SAP HANA konfigurációs fájljai nem egy szabványos HANA biztonsági másolat része.</span><span class="sxs-lookup"><span data-stu-id="50eec-213">As stated in hello FAQ in [SAP Note 1642148](https://launchpad.support.sap.com/#/notes/1642148), hello SAP HANA configuration files are not part of a standard HANA backup.</span></span> <span data-ttu-id="50eec-214">Nincsenek alapvető toorestore a rendszer.</span><span class="sxs-lookup"><span data-stu-id="50eec-214">They are not essential toorestore a system.</span></span> <span data-ttu-id="50eec-215">hello HANA konfigurációs sikerült módosítani a manuálisan hello visszaállítás után.</span><span class="sxs-lookup"><span data-stu-id="50eec-215">hello HANA configuration could be changed manually after hello restore.</span></span> <span data-ttu-id="50eec-216">Abban az esetben, ha egy szeretné tooget hello azonos egyéni konfiguráció során hello visszaállítási folyamat, a rendszer szükséges tooback hello HANA konfigurációs fájlok külön-külön.</span><span class="sxs-lookup"><span data-stu-id="50eec-216">In case one would like tooget hello same custom configuration during hello restore process, it is necessary tooback up hello HANA configuration files separately.</span></span>

<span data-ttu-id="50eec-217">Ha a standard HANA biztonsági mentés készül tooa dedikált HANA biztonságimásolat-fájl rendszer egyik is másolja hello konfigurációs fájlok toohello azonos fájlrendszer biztonsági mentése, és másolja minden együtt toohello végső célhelyet, például a blob storage cool.</span><span class="sxs-lookup"><span data-stu-id="50eec-217">If standard HANA backups are going tooa dedicated HANA backup file system, one could also copy hello configuration files toohello same backup filesystem, and then copy everything together toohello final storage destination like cool blob storage.</span></span>

### <a name="sap-hana-cockpit"></a><span data-ttu-id="50eec-218">SAP HANA-Vezérlőpult</span><span class="sxs-lookup"><span data-stu-id="50eec-218">SAP HANA Cockpit</span></span>

<span data-ttu-id="50eec-219">SAP HANA-Vezérlőpult kínál hello lehetőségét, figyeléséhez és felügyeletéhez SAP HANA böngésző használatával.</span><span class="sxs-lookup"><span data-stu-id="50eec-219">SAP HANA Cockpit offers hello possibility of monitoring and managing SAP HANA via a browser.</span></span> <span data-ttu-id="50eec-220">Azt is lehetővé teszi, hogy a SAP HANA-biztonsági mentések kezelése, és ezért használható alternatív tooSAP HANA Studio és ABAP DBACOCKPIT (lásd: [SAP HANA-Vezérlőpult](https://help.sap.com/saphelp_hanaplatform/helpdata/en/73/c37822444344f3973e0e976b77958e/content.htm) olvashat).</span><span class="sxs-lookup"><span data-stu-id="50eec-220">It also allows handling of SAP HANA backups, and therefore can be used as an alternative tooSAP HANA Studio and ABAP DBACOCKPIT (see [SAP HANA Cockpit](https://help.sap.com/saphelp_hanaplatform/helpdata/en/73/c37822444344f3973e0e976b77958e/content.htm) for more information).</span></span>

![Az ábrán látható, hello SAP HANA Vezérlőpult adatbázis felügyeleti képernyő](media/sap-hana-backup-guide/image004.png)

<span data-ttu-id="50eec-222">Az ábra azt mutatja be hello SAP HANA Vezérlőpult adatbázis felügyeleti képernyő, és a hello biztonsági mentési csempe a bal oldali hello.</span><span class="sxs-lookup"><span data-stu-id="50eec-222">This figure shows hello SAP HANA Cockpit Database Administration Screen, and hello backup tile on hello left.</span></span> <span data-ttu-id="50eec-223">Megnéz hello biztonsági mentési csempe bejelentkezési fiókjának megfelelő felhasználói engedélyekkel kell rendelkeznie.</span><span class="sxs-lookup"><span data-stu-id="50eec-223">Seeing hello backup tile requires appropriate user permissions for login account.</span></span>

![Biztonsági mentések SAP HANA-Vezérlőpult tudja felügyelni, amíg azok nem folyamatos](media/sap-hana-backup-guide/image005.png)

<span data-ttu-id="50eec-225">Biztonsági mentések figyelhető SAP HANA Vezérlőpulton, amíg a folyamatban lévő, és amikor elkészült, az összes hello biztonsági mentési részletek érhetők el.</span><span class="sxs-lookup"><span data-stu-id="50eec-225">Backups can be monitored in SAP HANA Cockpit while they are ongoing and, once it is finished, all hello backup details are available.</span></span>

![Egy példa, egy Azure SLES 12 virtuális gépen a Gnome desktop Firefox használatával](media/sap-hana-backup-guide/image006.png)

<span data-ttu-id="50eec-227">hello előző képernyőfelvételeken történtek egy Windows Azure virtuális gépről.</span><span class="sxs-lookup"><span data-stu-id="50eec-227">hello previous screenshots were made from an Azure Windows VM.</span></span> <span data-ttu-id="50eec-228">Erre látható egy példa egy Azure SLES 12 virtuális gépen a Gnome desktop Firefox segítségével.</span><span class="sxs-lookup"><span data-stu-id="50eec-228">This one is an example using Firefox on an Azure SLES 12 VM with Gnome desktop.</span></span> <span data-ttu-id="50eec-229">Hello beállítás toodefine SAP HANA-alapú biztonsági mentési ütemterv SAP HANA Vezérlőpulton jeleníti meg.</span><span class="sxs-lookup"><span data-stu-id="50eec-229">It shows hello option toodefine SAP HANA backup schedules in SAP HANA Cockpit.</span></span> <span data-ttu-id="50eec-230">Egy is láthatja, mivel azt sugallja, dátum/idő előtagjaként hello biztonságimásolat-fájlok.</span><span class="sxs-lookup"><span data-stu-id="50eec-230">As one can also see, it suggests date/time as a prefix for hello backup files.</span></span> <span data-ttu-id="50eec-231">Az SAP HANA Studio eszközben hello alapértelmezett előtag van &quot;COMPLETE\_adatok\_biztonsági MENTÉSI&quot; teljes biztonsági mentés során.</span><span class="sxs-lookup"><span data-stu-id="50eec-231">In SAP HANA Studio, hello default prefix is &quot;COMPLETE\_DATA\_BACKUP&quot; when doing a full file backup.</span></span> <span data-ttu-id="50eec-232">Egy egyedi előtag használata javasolt.</span><span class="sxs-lookup"><span data-stu-id="50eec-232">Using a unique prefix is recommended.</span></span>

### <a name="sap-hana-backup-encryption"></a><span data-ttu-id="50eec-233">SAP HANA a biztonsági mentés titkosítása</span><span class="sxs-lookup"><span data-stu-id="50eec-233">SAP HANA backup encryption</span></span>

<span data-ttu-id="50eec-234">SAP HANA adatainak és naplókönyvtárainak titkosításának kínál.</span><span class="sxs-lookup"><span data-stu-id="50eec-234">SAP HANA offers encryption of data and log.</span></span> <span data-ttu-id="50eec-235">Ha az SAP HANA-adatainak és naplókönyvtárainak nincs titkosítva, majd hello biztonsági mentések is nincs titkosítva.</span><span class="sxs-lookup"><span data-stu-id="50eec-235">If SAP HANA data and log are not encrypted, then hello backups are also not encrypted.</span></span> <span data-ttu-id="50eec-236">Toohello ügyfél toouse mentése harmadik féltől származó megoldás tooencrypt hello SAP HANA biztonsági másolatok egyaránt működik valamilyen formában.</span><span class="sxs-lookup"><span data-stu-id="50eec-236">It is up toohello customer toouse some form of third-party solution tooencrypt hello SAP HANA backups.</span></span> <span data-ttu-id="50eec-237">Lásd: [adatok és a napló Kötettitkosítást](https://help.sap.com/saphelp_hanaplatform/helpdata/en/dc/01f36fbb5710148b668201a6e95cf2/content.htm) toofind további tudnivalók az SAP HANA-titkosítás.</span><span class="sxs-lookup"><span data-stu-id="50eec-237">See [Data and Log Volume Encryption](https://help.sap.com/saphelp_hanaplatform/helpdata/en/dc/01f36fbb5710148b668201a6e95cf2/content.htm) toofind out more about SAP HANA encryption.</span></span>

<span data-ttu-id="50eec-238">A Microsoft Azure-ban az ügyfél használhatja az infrastruktúra-szolgáltatási virtuális gép titkosítási szolgáltatás tooencrypt hello.</span><span class="sxs-lookup"><span data-stu-id="50eec-238">On Microsoft Azure, a customer could use hello IaaS VM encryption feature tooencrypt.</span></span> <span data-ttu-id="50eec-239">Például egy használhatja dedikált adatok lemezek csatolt toohello virtuális gép, amely használt toostore SAP HANA-biztonsági mentések, akkor ezek a lemezek példányát.</span><span class="sxs-lookup"><span data-stu-id="50eec-239">For example, one could use dedicated data disks attached toohello VM, which are used toostore SAP HANA backups, then make copies of these disks.</span></span>

<span data-ttu-id="50eec-240">Az Azure Backup szolgáltatás kezelni tud a titkosított virtuális gép/lemez (lásd: [hogyan tooback mentése és visszaállítása titkosított virtuális gépek az Azure Backup](../../../backup/backup-azure-vms-encryption.md)).</span><span class="sxs-lookup"><span data-stu-id="50eec-240">Azure Backup service can handle encrypted VMs/disks (see [How tooback up and restore encrypted virtual machines with Azure Backup](../../../backup/backup-azure-vms-encryption.md)).</span></span>

<span data-ttu-id="50eec-241">Egy másik lehetőség lenne toomaintain hello SAP HANA virtuális gép és a lemezek titkosítás nélkül, és hello SAP HANA biztonságimásolat-fájlok tárolása egy tárfiókot, amelyre engedélyezték a titkosítást (lásd: [Azure Storage szolgáltatás titkosítási inaktív adatok](../../../storage/common/storage-service-encryption.md)) .</span><span class="sxs-lookup"><span data-stu-id="50eec-241">Another option would be toomaintain hello SAP HANA VM and its disks without encryption, and store hello SAP HANA backup files in a storage account for which encryption was enabled (see [Azure Storage Service Encryption for Data at Rest](../../../storage/common/storage-service-encryption.md)).</span></span>

## <a name="test-setup"></a><span data-ttu-id="50eec-242">Teszt beállítása</span><span class="sxs-lookup"><span data-stu-id="50eec-242">Test setup</span></span>

### <a name="test-virtual-machine-on-azure"></a><span data-ttu-id="50eec-243">Teszt virtuális gép az Azure-on</span><span class="sxs-lookup"><span data-stu-id="50eec-243">Test Virtual Machine on Azure</span></span>

<span data-ttu-id="50eec-244">Egy Azure GS5 virtuális gép egy SAP HANA-telepítés a következő biztonsági mentés/visszaállítás tesztek hello lett megadva.</span><span class="sxs-lookup"><span data-stu-id="50eec-244">An SAP HANA installation in an Azure GS5 VM was used for hello following backup/restore tests.</span></span>

![Az ábrán látható részét hello hello HANA teszt virtuális gép az Azure portál áttekintése](media/sap-hana-backup-guide/image007.png)

<span data-ttu-id="50eec-246">Az ábrán látható, hello hello HANA teszt virtuális gép az Azure portál áttekintése részét.</span><span class="sxs-lookup"><span data-stu-id="50eec-246">This figure shows part of hello Azure portal overview for hello HANA test VM.</span></span>

### <a name="test-backup-size"></a><span data-ttu-id="50eec-247">Biztonsági másolat mérete tesztelése</span><span class="sxs-lookup"><span data-stu-id="50eec-247">Test backup size</span></span>

![Ez a szám HANA Studio hello biztonsági mentési konzoljáról készült, és hello HANA index kiszolgáló 229 GB hello biztonságimásolat-fájl méretét jeleníti meg](media/sap-hana-backup-guide/image008.png)

<span data-ttu-id="50eec-249">Egy üres táblázatot töltötte az adatok tooget egy teljes biztonsági mentés méretének több mint 200 GB tooderive reális teljesítményadatokat.</span><span class="sxs-lookup"><span data-stu-id="50eec-249">A dummy table was filled up with data tooget a total data backup size of over 200 GB tooderive realistic performance data.</span></span> <span data-ttu-id="50eec-250">hello. ábra HANA Studio hello biztonsági mentési konzoljáról készült, és megmutatja a hello HANA index server 229 GB hello biztonságimásolat-fájl méretét.</span><span class="sxs-lookup"><span data-stu-id="50eec-250">hello figure was taken from hello backup console in HANA Studio and shows hello backup file size of 229 GB for hello HANA index server.</span></span> <span data-ttu-id="50eec-251">Hello tesztek hello alapértelmezett biztonsági mentési előtag SAP HANA Studio "COMPLETE_DATA_BACKUP" lett megadva.</span><span class="sxs-lookup"><span data-stu-id="50eec-251">For hello tests, hello default backup prefix "COMPLETE_DATA_BACKUP" in SAP HANA Studio was used.</span></span> <span data-ttu-id="50eec-252">A valós éles rendszerek hasznosabb előtag meg kell határozni.</span><span class="sxs-lookup"><span data-stu-id="50eec-252">In real production systems, a more useful prefix should be defined.</span></span> <span data-ttu-id="50eec-253">SAP HANA-Vezérlőpult Dátum és idő alapján.</span><span class="sxs-lookup"><span data-stu-id="50eec-253">SAP HANA Cockpit suggests date/time.</span></span>

### <a name="test-tool-toocopy-files-directly-tooazure-storage"></a><span data-ttu-id="50eec-254">Vizsgálati eszköz toocopy fájlok közvetlenül tooAzure tároló</span><span class="sxs-lookup"><span data-stu-id="50eec-254">Test tool toocopy files directly tooAzure storage</span></span>

<span data-ttu-id="50eec-255">tootransfer SAP HANA biztonságimásolat-fájlok közvetlenül tooAzure blob-tároló vagy Azure fájlmegosztásokat, hello blobxfer eszköz lett megadva, mert azt támogatja a célok, és azt egyszerűen integrálhatják automatizálási parancsfájlokat tooits parancssori felület miatt.</span><span class="sxs-lookup"><span data-stu-id="50eec-255">tootransfer SAP HANA backup files directly tooAzure blob storage, or Azure file shares, hello blobxfer tool was used because it supports both targets and it can be easily integrated into automation scripts due tooits command-line interface.</span></span> <span data-ttu-id="50eec-256">hello blobxfer eszköz [GitHub](https://github.com/Azure/blobxfer).</span><span class="sxs-lookup"><span data-stu-id="50eec-256">hello blobxfer tool is available on [GitHub](https://github.com/Azure/blobxfer).</span></span>

### <a name="test-backup-size-estimation"></a><span data-ttu-id="50eec-257">Tesztelje a biztonsági mentés méretének becslése</span><span class="sxs-lookup"><span data-stu-id="50eec-257">Test backup size estimation</span></span>

<span data-ttu-id="50eec-258">Fontos tooestimate hello biztonsági mentés mérete SAP HANA.</span><span class="sxs-lookup"><span data-stu-id="50eec-258">It is important tooestimate hello backup size of SAP HANA.</span></span> <span data-ttu-id="50eec-259">Ez a becslés tooimprove teljesítmény segítségével meghatározhat egy biztonságimásolat-fájlok száma hello biztonságimásolat-fájl maximális mérete miatt tooparallelism fájlmásolás közben.</span><span class="sxs-lookup"><span data-stu-id="50eec-259">This estimate helps tooimprove performance by defining hello max backup file size for a number of backup files, due tooparallelism during a file copy.</span></span> <span data-ttu-id="50eec-260">(Adatai magyarázatát a cikk későbbi részében.) Egy kell is döntse el, hogy toodo egy teljes biztonsági mentési vagy a különbözeti biztonsági mentés (növekményes vagy különbözeti).</span><span class="sxs-lookup"><span data-stu-id="50eec-260">(Those details are explained later in this article.) One must also decide whether toodo a full backup or a delta backup (incremental or differential).</span></span>

<span data-ttu-id="50eec-261">Szerencsére van egy egyszerű hello biztonságimásolat-fájlok hello méretének becslése SQL-utasítást: **válasszon \* m\_biztonsági MENTÉSI\_mérete\_BECSLÉSEKET** (lásd: [ Becsült hello terület szükséges a hello fájlrendszer a biztonsági mentést](https://help.sap.com/saphelp_hanaplatform/helpdata/en/7d/46337b7a9c4c708d965b65bc0f343c/content.htm)).</span><span class="sxs-lookup"><span data-stu-id="50eec-261">Fortunately, there is a simple SQL statement that estimates hello size of hello backup files: **select \* from M\_BACKUP\_SIZE\_ESTIMATIONS** (see [Estimate hello Space Needed in hello File System for a Data Backup](https://help.sap.com/saphelp_hanaplatform/helpdata/en/7d/46337b7a9c4c708d965b65bc0f343c/content.htm)).</span></span>

![az SQL-utasítás kimenete hello megegyezik szinte teljesen hello tényleges mérete hello teljes biztonsági mentését a lemezen](media/sap-hana-backup-guide/image009.png)

<span data-ttu-id="50eec-263">Az SQL-utasítás kimenete hello hello gazdagépes tesztrendszer esetében megegyezik szinte teljesen hello tényleges mérete hello teljes biztonsági mentését a lemezen.</span><span class="sxs-lookup"><span data-stu-id="50eec-263">For hello test system, hello output of this SQL statement matches almost exactly hello real size of hello full data backup on disk.</span></span>

### <a name="test-hana-backup-file-size"></a><span data-ttu-id="50eec-264">Teszt HANA biztonságimásolat-fájl mérete</span><span class="sxs-lookup"><span data-stu-id="50eec-264">Test HANA backup file size</span></span>

![hello HANA Studio biztonsági mentési konzol lehetővé teszi egy toorestrict hello maximális fájlméretét HANA biztonságimásolat-fájlok](media/sap-hana-backup-guide/image010.png)

<span data-ttu-id="50eec-266">hello HANA Studio biztonsági mentési konzol lehetővé teszi, hogy egy toorestrict hello maximális HANA biztonsági mentési fájlok méretét.</span><span class="sxs-lookup"><span data-stu-id="50eec-266">hello HANA Studio backup console allows one toorestrict hello max file size of HANA backup files.</span></span> <span data-ttu-id="50eec-267">Hello minta környezetben, a szolgáltatás révén lehetséges tooget több kisebb biztonságimásolat-fájlokat egy 230 GB-os biztonsági mentési fájl helyett.</span><span class="sxs-lookup"><span data-stu-id="50eec-267">In hello sample environment, that feature makes it possible tooget multiple smaller backup files instead of one 230-GB backup file.</span></span> <span data-ttu-id="50eec-268">Kisebb fájlméretet jelentős hatással van a teljesítményre (hello kapcsolódó cikkében [SAP HANA Azure Backup a fájlszintű](sap-hana-backup-file-level.md)).</span><span class="sxs-lookup"><span data-stu-id="50eec-268">Smaller file size has a significant impact on performance (see hello related article [SAP HANA Azure Backup on file level](sap-hana-backup-file-level.md)).</span></span>

## <a name="summary"></a><span data-ttu-id="50eec-269">Összefoglalás</span><span class="sxs-lookup"><span data-stu-id="50eec-269">Summary</span></span>

<span data-ttu-id="50eec-270">A következő táblák hello megjelenítése és mentése egy SAP HANA-adatbázisból, az Azure virtuális gépeken futó megoldások tooback hello vizsgálati eredmények alapján.</span><span class="sxs-lookup"><span data-stu-id="50eec-270">Based on hello test results hello following tables show pros and cons of solutions tooback up an SAP HANA database running on Azure virtual machines.</span></span>

<span data-ttu-id="50eec-271">**Készítsen biztonsági másolatot az SAP HANA toohello fájlrendszer, és másolja biztonságimásolat-fájlokat ezek után utolsó biztonsági mentés célhelyének toohello**</span><span class="sxs-lookup"><span data-stu-id="50eec-271">**Back up SAP HANA toohello file system and copy backup files afterwards toohello final backup destination**</span></span>

|<span data-ttu-id="50eec-272">Megoldás</span><span class="sxs-lookup"><span data-stu-id="50eec-272">Solution</span></span>                                           |<span data-ttu-id="50eec-273">Informatikai szakemberek</span><span class="sxs-lookup"><span data-stu-id="50eec-273">Pros</span></span>                                 |<span data-ttu-id="50eec-274">Hátrányok</span><span class="sxs-lookup"><span data-stu-id="50eec-274">Cons</span></span>                                  |
|---------------------------------------------------|-------------------------------------|--------------------------------------|
|<span data-ttu-id="50eec-275">A virtuális gépek lemezei HANA biztonsági mentések megtartása</span><span class="sxs-lookup"><span data-stu-id="50eec-275">Keep HANA backups on VM disks</span></span>                      |<span data-ttu-id="50eec-276">Nincsenek további felügyeleti próbálkozások</span><span class="sxs-lookup"><span data-stu-id="50eec-276">No additional management efforts</span></span>     |<span data-ttu-id="50eec-277">Helyi virtuális gép lemezterületet eats</span><span class="sxs-lookup"><span data-stu-id="50eec-277">Eats up local VM disk space</span></span>           |
|<span data-ttu-id="50eec-278">Blobxfer eszköz toocopy biztonságimásolat-fájlok tooblob tároló</span><span class="sxs-lookup"><span data-stu-id="50eec-278">Blobxfer tool toocopy backup files tooblob storage</span></span> |<span data-ttu-id="50eec-279">Párhuzamossági toocopy több fájlokat, választott toouse ritkán használt adatok blob-tároló</span><span class="sxs-lookup"><span data-stu-id="50eec-279">Parallelism toocopy multiple files, choice toouse cool blob storage</span></span> | <span data-ttu-id="50eec-280">További eszköz karbantartási és az egyéni parancsfájlok</span><span class="sxs-lookup"><span data-stu-id="50eec-280">Additional tool maintenance and custom scripting</span></span> | 
|<span data-ttu-id="50eec-281">A BLOB másolási Powershell vagy a parancssori felület használatával</span><span class="sxs-lookup"><span data-stu-id="50eec-281">Blob copy via Powershell or CLI</span></span>                    |<span data-ttu-id="50eec-282">Nincs szükség esetén további eszköz valósítható meg Azure Powershell vagy a parancssori felület használatával</span><span class="sxs-lookup"><span data-stu-id="50eec-282">No additional tool necessary, can be accomplished via Azure Powershell or CLI</span></span> |<span data-ttu-id="50eec-283">a manuális eljáráshoz, az ügyfélnek van tootake kiszolgálásához parancsfájlok és a visszaállítási másolt blobok kezelése</span><span class="sxs-lookup"><span data-stu-id="50eec-283">manual process, customer has tootake care of scripting and management of copied blobs for restore</span></span>|
|<span data-ttu-id="50eec-284">TooNFS megosztás</span><span class="sxs-lookup"><span data-stu-id="50eec-284">Copy tooNFS share</span></span>                                  |<span data-ttu-id="50eec-285">Utófeldolgozási biztonsági mentési fájlok és más virtuális gép hello HANA server gyakorolt hatás nélkül</span><span class="sxs-lookup"><span data-stu-id="50eec-285">Post-processing of backup files on other VM without impact on hello HANA server</span></span>|<span data-ttu-id="50eec-286">Lassú másolást</span><span class="sxs-lookup"><span data-stu-id="50eec-286">Slow copy process</span></span>|
|<span data-ttu-id="50eec-287">Blobxfer másolási tooAzure szolgáltatása</span><span class="sxs-lookup"><span data-stu-id="50eec-287">Blobxfer copy tooAzure File Service</span></span>                |<span data-ttu-id="50eec-288">Nem keleti-afrikai fel lemezterületet a helyi virtuális gépek lemezei</span><span class="sxs-lookup"><span data-stu-id="50eec-288">Doesn't eat up space on local VM disks</span></span>|<span data-ttu-id="50eec-289">Nincs közvetlen támogatási írja HANA biztonsági másolat, fájlméret korlátozása fájlmegosztás jelenleg 5 TB:</span><span class="sxs-lookup"><span data-stu-id="50eec-289">No direct write support by HANA backup, size restriction of file share currently at 5 TB</span></span>|
|<span data-ttu-id="50eec-290">Az Azure Backup szolgáltatás ügynöke</span><span class="sxs-lookup"><span data-stu-id="50eec-290">Azure Backup Agent</span></span>                                 | <span data-ttu-id="50eec-291">Előnyben részesített megoldás lenne</span><span class="sxs-lookup"><span data-stu-id="50eec-291">Would be preferred solution</span></span>         | <span data-ttu-id="50eec-292">Linux rendszeren jelenleg nem érhető el</span><span class="sxs-lookup"><span data-stu-id="50eec-292">Currently not available on Linux</span></span>    |



<span data-ttu-id="50eec-293">**Storage-pillanatfelvételekkel alapuló biztonsági mentési SAP HANA**</span><span class="sxs-lookup"><span data-stu-id="50eec-293">**Backup SAP HANA based on storage snapshots**</span></span>

|<span data-ttu-id="50eec-294">Megoldás</span><span class="sxs-lookup"><span data-stu-id="50eec-294">Solution</span></span>                                           |<span data-ttu-id="50eec-295">Informatikai szakemberek</span><span class="sxs-lookup"><span data-stu-id="50eec-295">Pros</span></span>                                 |<span data-ttu-id="50eec-296">Hátrányok</span><span class="sxs-lookup"><span data-stu-id="50eec-296">Cons</span></span>                                  |
|---------------------------------------------------|-------------------------------------|--------------------------------------|
|<span data-ttu-id="50eec-297">Azure biztonsági mentési szolgáltatás</span><span class="sxs-lookup"><span data-stu-id="50eec-297">Azure Backup Service</span></span>                               | <span data-ttu-id="50eec-298">Lehetővé teszi a virtuális gép biztonsági mentése a blob pillanatképek alapján</span><span class="sxs-lookup"><span data-stu-id="50eec-298">Allows VM backup based on blob snapshots</span></span> | <span data-ttu-id="50eec-299">Használatakor nem fájl szint visszaállítása hello létrehozása új virtuális gép igényel a hello visszaállítási folyamat, majd egy új SAP HANA-licenckulcs hello igények amiből</span><span class="sxs-lookup"><span data-stu-id="50eec-299">When not using file level restore, it requires hello creation of a new VM for hello restore process, which then implies hello need of a new SAP HANA license key</span></span>|
|<span data-ttu-id="50eec-300">A pillanatképek kézi blob</span><span class="sxs-lookup"><span data-stu-id="50eec-300">Manual blob snapshots</span></span>                              | <span data-ttu-id="50eec-301">Rugalmasság toocreate és visszaállítási adott virtuális gépek lemezei módosítása nélkül hello virtuális gép egyedi azonosítója</span><span class="sxs-lookup"><span data-stu-id="50eec-301">Flexibility toocreate and restore specific VM disks without changing hello unique VM ID</span></span>|<span data-ttu-id="50eec-302">Az összes manuális tevékenység, amelynek hello ügyfél által végzett toobe</span><span class="sxs-lookup"><span data-stu-id="50eec-302">All manual work, which has toobe done by hello customer</span></span>|

## <a name="next-steps"></a><span data-ttu-id="50eec-303">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="50eec-303">Next steps</span></span>
* <span data-ttu-id="50eec-304">[SAP HANA Azure biztonsági mentési fájl szinten](sap-hana-backup-file-level.md) hello fájl alapú biztonsági mentési beállítás ismerteti.</span><span class="sxs-lookup"><span data-stu-id="50eec-304">[SAP HANA Azure Backup on file level](sap-hana-backup-file-level.md) describes hello file-based backup option.</span></span>
* <span data-ttu-id="50eec-305">[A storage-pillanatfelvételekkel alapján SAP HANA biztonsági mentés](sap-hana-backup-storage-snapshots.md) hello tárolási pillanatkép-alapú biztonsági mentési beállítás ismerteti.</span><span class="sxs-lookup"><span data-stu-id="50eec-305">[SAP HANA backup based on storage snapshots](sap-hana-backup-storage-snapshots.md) describes hello storage snapshot-based backup option.</span></span>
* <span data-ttu-id="50eec-306">Hogyan tooestablish magas rendelkezésre állású és az Azure (nagy példányokat), az SAP HANA vész-helyreállítási terv: toolearn [SAP HANA (nagy példányok) magas rendelkezésre állási és vészhelyreállítási helyreállítási Azure](hana-overview-high-availability-disaster-recovery.md).</span><span class="sxs-lookup"><span data-stu-id="50eec-306">toolearn how tooestablish high availability and plan for disaster recovery of SAP HANA on Azure (large instances), see [SAP HANA (large instances) high availability and disaster recovery on Azure](hana-overview-high-availability-disaster-recovery.md).</span></span>
