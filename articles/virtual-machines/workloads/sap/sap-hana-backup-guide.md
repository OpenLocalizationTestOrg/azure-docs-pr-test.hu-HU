---
title: "Azure virtuális gépeken SAP HANA a biztonsági mentési útmutatója |} Microsoft Docs"
description: "Biztonsági mentési SAP Hana az útmutató két fő biztonsági mentési lehetőségek SAP Hana az Azure virtuális gépeken"
services: virtual-machines-linux
documentationcenter: 
author: hermanndms
manager: timlt
editor: 
ms.service: virtual-machines-linux
ms.devlang: NA
ms.topic: article
ums.tgt_pltfrm: vm-linux
ms.workload: infrastructure-services
ms.date: 3/13/2017
ms.author: rclaus
ms.openlocfilehash: 9e5b124643b753f404ba6012d3df998f567be59a
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 08/29/2017
---
# <a name="backup-guide-for-sap-hana-on-azure-virtual-machines"></a><span data-ttu-id="898f7-103">Útmutató az Azure-beli virtuális gépeken futó SAP HANA biztonsági mentéséhez</span><span class="sxs-lookup"><span data-stu-id="898f7-103">Backup guide for SAP HANA on Azure Virtual Machines</span></span>

## <a name="getting-started"></a><span data-ttu-id="898f7-104">Első lépések</span><span class="sxs-lookup"><span data-stu-id="898f7-104">Getting Started</span></span>

<span data-ttu-id="898f7-105">A biztonsági mentési útmutató az Azure virtuális gépeken futó SAP Hana csak Azure-specifikus témakörök ismerteti.</span><span class="sxs-lookup"><span data-stu-id="898f7-105">The backup guide for SAP HANA running on Azure virtual Machines will only describe Azure-specific topics.</span></span> <span data-ttu-id="898f7-106">Általános SAP HANA biztonsági mentési kapcsolódó elemek, a dokumentációjában SAP HANA (lásd: _biztonsági mentési SAP HANA-dokumentáció_ Ez a cikk későbbi).</span><span class="sxs-lookup"><span data-stu-id="898f7-106">For general SAP HANA backup related items, check the SAP HANA documentation (see _SAP HANA backup documentation_ later in this article).</span></span>

<span data-ttu-id="898f7-107">Ez a cikk a két fő biztonsági mentési lehetőségek SAP Hana Azure virtuális gépeken futó célja:</span><span class="sxs-lookup"><span data-stu-id="898f7-107">The focus of this article is on two major backup possibilities for SAP HANA on Azure virtual machines:</span></span>

- <span data-ttu-id="898f7-108">A fájlrendszer a Linux virtuális gépeinek HANA biztonsági mentés (lásd: [SAP HANA Azure biztonsági mentési fájl szinten](sap-hana-backup-file-level.md))</span><span class="sxs-lookup"><span data-stu-id="898f7-108">HANA backup to the file system in an Azure Linux Virtual Machine (see [SAP HANA Azure Backup on file level](sap-hana-backup-file-level.md))</span></span>
- <span data-ttu-id="898f7-109">A storage-pillanatfelvételekkel a szolgáltatással az Azure storage blob pillanatkép manuálisan vagy az Azure Backup szolgáltatás alapján HANA biztonsági mentés (lásd: [SAP HANA biztonsági másolat alapján storage-pillanatfelvételekkel](sap-hana-backup-storage-snapshots.md))</span><span class="sxs-lookup"><span data-stu-id="898f7-109">HANA backup based on storage snapshots using the Azure storage blob snapshot feature manually or Azure Backup Service (see [SAP HANA backup based on storage snapshots](sap-hana-backup-storage-snapshots.md))</span></span>

<span data-ttu-id="898f7-110">SAP HANA API, amely lehetővé teszi, hogy a külső biztonsági mentési eszközök közvetlenül az SAP HANA integrálása biztonsági kínál.</span><span class="sxs-lookup"><span data-stu-id="898f7-110">SAP HANA offers a backup API, which allows third-party backup tools to integrate directly with SAP HANA.</span></span> <span data-ttu-id="898f7-111">(Ez nem ez az útmutató hatókörén belül.) Nincs közvetlen integráció az Azure Backup szolgáltatásban elérhető jobbra a alapján ez az API SAP HANA van.</span><span class="sxs-lookup"><span data-stu-id="898f7-111">(That is not within the scope of this guide.) There is no direct integration of SAP HANA with Azure Backup service available right now based on this API.</span></span>

<span data-ttu-id="898f7-112">SAP HANA hivatalosan támogatott Azure Virtuálisgép-típussá GS5 egyetlen példányt egy további korlátozás OLAP munkaterhelések (lásd: [hitelesített IaaS platformok](https://global.sap.com/community/ebook/2014-09-02-hana-hardware/enEN/iaas.html) az SAP-webhelyen).</span><span class="sxs-lookup"><span data-stu-id="898f7-112">SAP HANA is officially supported on Azure VM type GS5 as single instance with an additional restriction to OLAP workloads (see [Find Certified IaaS Platforms](https://global.sap.com/community/ebook/2014-09-02-hana-hardware/enEN/iaas.html) on the SAP website).</span></span> <span data-ttu-id="898f7-113">Ez a cikk új ajánlatok SAP Hana Azure elérhető legyen, mint fog frissülni.</span><span class="sxs-lookup"><span data-stu-id="898f7-113">This article will be updated as new offerings for SAP HANA on Azure become available.</span></span>

<span data-ttu-id="898f7-114">Nem érhető el egy SAP HANA hibrid megoldás Azure SAP HANA futtató nem virtualizált fizikai kiszolgálókon.</span><span class="sxs-lookup"><span data-stu-id="898f7-114">There is also an SAP HANA hybrid solution available on Azure, where SAP HANA runs non-virtualized on physical servers.</span></span> <span data-ttu-id="898f7-115">Azonban az SAP HANA Azure biztonsági mentési útmutató hozzá van rendelve egy SAP HANA futtató egy Azure virtuális gép, a SAP HANA-nem fut a tiszta Azure-környezetéhez &quot;nagy példányok.&quot; Lásd: [SAP HANA (nagy példányok) – áttekintés és Azure architektúra](hana-overview-architecture.md) tájékozódhat a biztonsági mentési megoldás a &quot;nagy példányok&quot; storage-pillanatfelvételekkel alapján.</span><span class="sxs-lookup"><span data-stu-id="898f7-115">However, this SAP HANA Azure backup guide covers a pure Azure environment where SAP HANA runs in an Azure VM, not SAP HANA running on &quot;large instances.&quot; See [SAP HANA (large instances) overview and architecture on Azure](hana-overview-architecture.md) for more information about this backup solution on &quot;large instances&quot; based on storage snapshots.</span></span>

<span data-ttu-id="898f7-116">Általános információk a támogatott Azure SAP termékek található [SAP Megjegyzés 1928533](https://launchpad.support.sap.com/#/notes/1928533).</span><span class="sxs-lookup"><span data-stu-id="898f7-116">General information about SAP products supported on Azure can be found in [SAP Note 1928533](https://launchpad.support.sap.com/#/notes/1928533).</span></span>

<span data-ttu-id="898f7-117">A következő három adat áttekintést a jelenleg használt natív Azure-képességek SAP HANA biztonsági mentési lehetőségeket, és három lehetséges jövőbeli biztonsági mentési helyzetet is megjelenítése.</span><span class="sxs-lookup"><span data-stu-id="898f7-117">The following three figures give an overview of the SAP HANA backup options using native Azure capabilities currently, and also show three potential future backup scenarios.</span></span> <span data-ttu-id="898f7-118">A kapcsolódó cikkek [SAP HANA Azure biztonsági mentési fájl szinten](sap-hana-backup-file-level.md) és [SAP HANA biztonsági másolat alapján storage-pillanatfelvételekkel](sap-hana-backup-storage-snapshots.md) részletesen, beleértve az SAP mérete és a teljesítménnyel kapcsolatos ezeket a lehetőségeket ismerteti HANA biztonsági mentések, amelyek multi-terabájt méretű.</span><span class="sxs-lookup"><span data-stu-id="898f7-118">The related articles [SAP HANA Azure Backup on file level](sap-hana-backup-file-level.md) and [SAP HANA backup based on storage snapshots](sap-hana-backup-storage-snapshots.md) describe these options in more detail, including size and performance considerations for SAP HANA backups that are multi-terabytes in size.</span></span>

![Az ábrán látható, két lehetőség közül választhat, az aktuális virtuális gép állapotának mentése](media/sap-hana-backup-guide/image001.png)

<span data-ttu-id="898f7-120">Az ábrán látható, az aktuális virtuális gép állapotának mentése, vagy az Azure Backup szolgáltatás vagy a virtuális gépek lemezei manuális pillanatképe lehetőségét.</span><span class="sxs-lookup"><span data-stu-id="898f7-120">This figure shows the possibility of saving the current VM state, either via Azure Backup service or manual snapshot of VM disks.</span></span> <span data-ttu-id="898f7-121">Ezt a módszert használja, egy nem &#39; nincs az SAP HANA biztonsági mentéseit.</span><span class="sxs-lookup"><span data-stu-id="898f7-121">With this approach, one doesn&#39;t have to manage SAP HANA backups.</span></span> <span data-ttu-id="898f7-122">A lemez pillanatkép forgatókönyv kihívás fájlrendszer-konzisztenciával, de az alkalmazáskonzisztens lemez állapota.</span><span class="sxs-lookup"><span data-stu-id="898f7-122">The challenge of the disk snapshot scenario is file system consistency, and an application-consistent disk state.</span></span> <span data-ttu-id="898f7-123">A konzisztencia-témakör a szakaszban tárgyalt _SAP HANA adatkonzisztencia véve a storage-pillanatfelvételekkel_ című cikkben.</span><span class="sxs-lookup"><span data-stu-id="898f7-123">The consistency topic is discussed in the section _SAP HANA data consistency when taking storage snapshots_ later in this article.</span></span> <span data-ttu-id="898f7-124">Képességek és az Azure Backup szolgáltatás SAP HANA másolatokra történő visszaállításával kapcsolatos korlátozások is ismertetése a cikk későbbi részében.</span><span class="sxs-lookup"><span data-stu-id="898f7-124">Capabilities and restrictions of Azure Backup service related to SAP HANA backups are also discussed later in this article.</span></span>

![Az ábrán látható, hogy egy SAP HANA fogadására beállítások fájlszintű biztonsági a virtuális Gépen belül](media/sap-hana-backup-guide/image002.png)

<span data-ttu-id="898f7-126">Ez a szám egy SAP HANA fájl biztonsági másolat a virtuális Gépen belül, és majd tárolásukról HANA biztonságimásolat-fájlok valahol ellenkező esetben a különböző eszközök használatával lehetőségeket mutatja be.</span><span class="sxs-lookup"><span data-stu-id="898f7-126">This figure shows options for taking an SAP HANA file backup inside the VM, and then storing it HANA backup files somewhere else using different tools.</span></span> <span data-ttu-id="898f7-127">HANA biztonsági másolat egy pillanatkép-alapú biztonsági mentési megoldás több időt igényel, azonban mindenképpen sértetlenségét és konzisztencia előnyeit.</span><span class="sxs-lookup"><span data-stu-id="898f7-127">Taking a HANA backup requires more time than a snapshot-based backup solution, but it has advantages regarding integrity and consistency.</span></span> <span data-ttu-id="898f7-128">További részletek találhatók a cikk későbbi részében.</span><span class="sxs-lookup"><span data-stu-id="898f7-128">More details are provided later in this article.</span></span>

![Ezen az ábrán egy lehetséges jövőbeli SAP HANA biztonsági mentési forgatókönyvet mutat](media/sap-hana-backup-guide/image003.png)

<span data-ttu-id="898f7-130">Ezen az ábrán egy lehetséges jövőbeli SAP HANA biztonsági mentési forgatókönyvet mutat.</span><span class="sxs-lookup"><span data-stu-id="898f7-130">This figure shows a potential future SAP HANA backup scenario.</span></span> <span data-ttu-id="898f7-131">SAP HANA engedélyezett másodlagos replikációból biztonsági másolatok fogadására, ha azt szeretné adja hozzá a biztonsági mentési stratégia további beállításokat.</span><span class="sxs-lookup"><span data-stu-id="898f7-131">If SAP HANA allowed taking backups from a replication secondary, it would add additional options for backup strategies.</span></span> <span data-ttu-id="898f7-132">Jelenleg nem lehet a SAP HANA wiki post megfelelően:</span><span class="sxs-lookup"><span data-stu-id="898f7-132">Currently it isn't possible according to a post in the SAP HANA Wiki:</span></span>

<span data-ttu-id="898f7-133">_&quot;Az biztonsági másolatok készítése a másodlagos oldalon is?_</span><span class="sxs-lookup"><span data-stu-id="898f7-133">_&quot;Is it possible to take backups on the secondary side?_</span></span>

<span data-ttu-id="898f7-134">_Nem, jelenleg csak adatokat és az elsődleges oldal a biztonsági mentések jelentkezzen. Ha automatikus napló biztonsági mentési engedélyezve van, a másodlagos oldalának felvásárlási után a Naplók biztonsági másolatainak automatikusan írandó van.&quot;_</span><span class="sxs-lookup"><span data-stu-id="898f7-134">_No, currently you can only take data and log backups on the primary side. If automatic log backup is enabled, after takeover to the secondary side, the log backups will automatically be written there.&quot;_</span></span>

## <a name="sap-resources-for-hana-backup"></a><span data-ttu-id="898f7-135">SAP HANA biztonsági mentés erőforrásait</span><span class="sxs-lookup"><span data-stu-id="898f7-135">SAP resources for HANA backup</span></span>

### <a name="sap-hana-backup-documentation"></a><span data-ttu-id="898f7-136">Biztonsági mentési SAP HANA-dokumentáció</span><span class="sxs-lookup"><span data-stu-id="898f7-136">SAP HANA backup documentation</span></span>

- [<span data-ttu-id="898f7-137">SAP HANA felügyeleti bemutatása</span><span class="sxs-lookup"><span data-stu-id="898f7-137">Introduction to SAP HANA Administration</span></span>](https://help.sap.com/viewer/6b94445c94ae495c83a19646e7c3fd56/2.0.00/en-US)
- [<span data-ttu-id="898f7-138">A biztonsági mentési és helyreállítási stratégia tervezése</span><span class="sxs-lookup"><span data-stu-id="898f7-138">Planning Your Backup and Recovery Strategy</span></span>](https://help.sap.com/saphelp_hanaplatform/helpdata/en/ef/085cd5949c40b788bba8fd3c65743e/content.htm)
- [<span data-ttu-id="898f7-139">Biztonsági mentés HANA ABAP DBACOCKPIT ütemezése</span><span class="sxs-lookup"><span data-stu-id="898f7-139">Schedule HANA Backup using ABAP DBACOCKPIT</span></span>](http://www.hanatutorials.com/p/schedule-hana-backup-using-abap.html)
- [<span data-ttu-id="898f7-140">Ütemezési adatok biztonsági mentése (SAP HANA Vezérlőpult)</span><span class="sxs-lookup"><span data-stu-id="898f7-140">Schedule Data Backups (SAP HANA Cockpit)</span></span>](http://help.sap.com/saphelp_hanaplatform/helpdata/en/6d/385fa14ef64a6bab2c97a3d3e40292/frameset.htm)
- <span data-ttu-id="898f7-141">SAP HANA gyakori kérdések a biztonsági mentés [SAP Megjegyzés 1642148](https://launchpad.support.sap.com/#/notes/1642148)</span><span class="sxs-lookup"><span data-stu-id="898f7-141">FAQ about SAP HANA backup in [SAP Note 1642148](https://launchpad.support.sap.com/#/notes/1642148)</span></span>
- <span data-ttu-id="898f7-142">Gyakori kérdések az adatbázis és a tárolási pillanatképek SAP HANA [SAP Megjegyzés 2039883](https://launchpad.support.sap.com/#/notes/2039883)</span><span class="sxs-lookup"><span data-stu-id="898f7-142">FAQ about SAP HANA database and storage snapshots in [SAP Note 2039883](https://launchpad.support.sap.com/#/notes/2039883)</span></span>
- <span data-ttu-id="898f7-143">Nem alkalmas hálózati fájlrendszerek biztonsági másolat és helyreállítás a [SAP Megjegyzés 1820529](https://launchpad.support.sap.com/#/notes/1820529)</span><span class="sxs-lookup"><span data-stu-id="898f7-143">Unsuitable network file systems for backup and recovery in [SAP Note 1820529](https://launchpad.support.sap.com/#/notes/1820529)</span></span>

### <a name="why-sap-hana-backup"></a><span data-ttu-id="898f7-144">Miért SAP HANA biztonsági mentést?</span><span class="sxs-lookup"><span data-stu-id="898f7-144">Why SAP HANA backup?</span></span>

<span data-ttu-id="898f7-145">Az Azure storage kínál rendelkezésre állásának és megbízhatóságának nem (lásd: [Microsoft Azure Storage bemutatása](../../../storage/common/storage-introduction.md) további információ az Azure storage).</span><span class="sxs-lookup"><span data-stu-id="898f7-145">Azure storage offers availability and reliability out of the box (see [Introduction to Microsoft Azure Storage](../../../storage/common/storage-introduction.md) for more information about Azure storage).</span></span>

<span data-ttu-id="898f7-146">A minimális &quot;biztonsági mentési&quot; annak az Azure garantált szolgáltatási szintek, megtartja a SAP HANA adatainak és naplókönyvtárainak fájlokat az Azure virtuális merevlemezek a virtuális gép SAP HANA-kiszolgálóhoz csatlakoztatott támaszkodnak.</span><span class="sxs-lookup"><span data-stu-id="898f7-146">The minimum for &quot;backup&quot; is to rely on the Azure SLAs, keeping the SAP HANA data and log files on Azure VHDs attached to the SAP HANA server VM.</span></span> <span data-ttu-id="898f7-147">Ez a megközelítés VM hibák, de a SAP HANA-adatok és a naplófájlokat vagy a logikai hibák például törlés, adatok vagy a fájlok véletlenül nem lehetséges kár ismerteti.</span><span class="sxs-lookup"><span data-stu-id="898f7-147">This approach covers VM failures, but not potential damage to the SAP HANA data and log files, or logical errors like deleting data or files by accident.</span></span> <span data-ttu-id="898f7-148">Biztonsági mentés is szükség, megfelelőségi vagy jogi okokból.</span><span class="sxs-lookup"><span data-stu-id="898f7-148">Backups are also required for compliance or legal reasons.</span></span> <span data-ttu-id="898f7-149">Rövid mindig szükség van a SAP HANA biztonsági mentésekhez.</span><span class="sxs-lookup"><span data-stu-id="898f7-149">In short, there is always a need for SAP HANA backups.</span></span>

### <a name="how-to-verify-correctness-of-sap-hana-backup"></a><span data-ttu-id="898f7-150">SAP HANA biztonsági mentés helyességét ellenőrzése</span><span class="sxs-lookup"><span data-stu-id="898f7-150">How to verify correctness of SAP HANA backup</span></span>
<span data-ttu-id="898f7-151">Egy teszt visszaállítást egy másik rendszeren futó tárolási pillanatképek használata esetén ajánlott.</span><span class="sxs-lookup"><span data-stu-id="898f7-151">When using storage snapshots, running a test restore on a different system is recommended.</span></span> <span data-ttu-id="898f7-152">Ez a megközelítés biztosítja az gondoskodjon arról, hogy a biztonsági mentés helyes-e, és a belső folyamatok, a biztonsági mentéshez és a munka visszaállítani, mert a várt.</span><span class="sxs-lookup"><span data-stu-id="898f7-152">This approach provides a way to ensure that a backup is correct, and internal processes for backup and restore work as expected.</span></span> <span data-ttu-id="898f7-153">Ez nem egy jelentős a küszöbértéket a helyszínen, sokkal egyszerűbb elvégzéséhez szükséges erőforrások átmenetileg biztosítva erre a célra, a felhőben.</span><span class="sxs-lookup"><span data-stu-id="898f7-153">While this is a significant hurdle on-premises, it is much easier to accomplish in the cloud by providing necessary resources temporarily for this purpose.</span></span>

<span data-ttu-id="898f7-154">Tartsa szem előtt, amely során egy egyszerű visszaállítás és ellenőrizni, hogy HANA működik-e és fut nem elegendő.</span><span class="sxs-lookup"><span data-stu-id="898f7-154">Keep in mind that doing a simple restore and checking if HANA is up and running is not sufficient.</span></span> <span data-ttu-id="898f7-155">Ideális esetben egy futhat győződjön meg arról, hogy rendben-e a visszaállított adatbázis tábla konzisztencia-ellenőrzést.</span><span class="sxs-lookup"><span data-stu-id="898f7-155">Ideally, one should run a table consistency check to be sure that the restored database is fine.</span></span> <span data-ttu-id="898f7-156">SAP HANA kínál a konzisztencia-ellenőrzések leírt különböző típusú [SAP Megjegyzés 1977584](https://launchpad.support.sap.com/#/notes/1977584).</span><span class="sxs-lookup"><span data-stu-id="898f7-156">SAP HANA offers several kinds of consistency checks described in [SAP Note 1977584](https://launchpad.support.sap.com/#/notes/1977584).</span></span>

<span data-ttu-id="898f7-157">A tábla konzisztencia-ellenőrzés kapcsolatos információkat is megtalálható az SAP webhellyel [tábla és a katalógus konzisztencia-ellenőrzések](http://help.sap.com/saphelp_hanaplatform/helpdata/en/25/84ec2e324d44529edc8221956359ea/content.htm#loio9357bf52c7324bee9567dca417ad9f8b).</span><span class="sxs-lookup"><span data-stu-id="898f7-157">Information about the table consistency check can also be found on the SAP website at [Table and Catalog Consistency Checks](http://help.sap.com/saphelp_hanaplatform/helpdata/en/25/84ec2e324d44529edc8221956359ea/content.htm#loio9357bf52c7324bee9567dca417ad9f8b).</span></span>

<span data-ttu-id="898f7-158">A szokásos fájlszintű biztonsági a teszt visszaállítás nincs szükség.</span><span class="sxs-lookup"><span data-stu-id="898f7-158">For standard file backups, a test restore is not necessary.</span></span> <span data-ttu-id="898f7-159">Két SAP HANA-eszközzel, ellenőrizze, hogy mely biztonsági másolat nem használható visszaállítási: hdbbackupdiag és hdbbackupcheck.</span><span class="sxs-lookup"><span data-stu-id="898f7-159">There are two SAP HANA tools that help to check which backup can be used for restore: hdbbackupdiag and hdbbackupcheck.</span></span> <span data-ttu-id="898f7-160">Lásd: [manuális ellenőrzése hogy a helyreállítás az lehetséges](https://help.sap.com/saphelp_hanaplatform/helpdata/en/77/522ef1e3cb4d799bab33e0aeb9c93b/content.htm) ezekkel az eszközökkel kapcsolatos további információk.</span><span class="sxs-lookup"><span data-stu-id="898f7-160">See [Manually Checking Whether a Recovery is Possible](https://help.sap.com/saphelp_hanaplatform/helpdata/en/77/522ef1e3cb4d799bab33e0aeb9c93b/content.htm) for more information about these tools.</span></span>

### <a name="pros-and-cons-of-hana-backup-versus-storage-snapshot"></a><span data-ttu-id="898f7-161">Előnyei és hátrányai HANA biztonsági mentés és tárolás pillanatkép</span><span class="sxs-lookup"><span data-stu-id="898f7-161">Pros and cons of HANA backup versus storage snapshot</span></span>

<span data-ttu-id="898f7-162">SAP nem &#39; t biztosít előnyben vagy HANA biztonsági mentés és tárolás pillanatkép.</span><span class="sxs-lookup"><span data-stu-id="898f7-162">SAP doesn&#39;t give preference to either HANA backup versus storage snapshot.</span></span> <span data-ttu-id="898f7-163">Felsorolja az előnyei és hátrányai, egy alapján határozza meg attól függően, hogy a helyzet, és a rendelkezésre álló tár technológia használandó (lásd: [tervezési a biztonsági mentési és helyreállítási stratégia](https://help.sap.com/saphelp_hanaplatform/helpdata/en/ef/085cd5949c40b788bba8fd3c65743e/content.htm)).</span><span class="sxs-lookup"><span data-stu-id="898f7-163">It lists their pros and cons, so one can determine which to use depending on the situation and available storage technology (see [Planning Your Backup and Recovery Strategy](https://help.sap.com/saphelp_hanaplatform/helpdata/en/ef/085cd5949c40b788bba8fd3c65743e/content.htm)).</span></span>

<span data-ttu-id="898f7-164">On Azure, ne feledje azt a tényt, hogy az Azure-blobot pillanatkép-e a szolgáltatás nem &#39; t garantálja a fájlrendszer-konzisztenciával (lásd: [blob pillanatképei Using PowerShell](https://blogs.msdn.microsoft.com/cie/2016/05/17/using-blob-snapshots-with-powershell/)).</span><span class="sxs-lookup"><span data-stu-id="898f7-164">On Azure, be aware of the fact that the Azure blob snapshot feature doesn&#39;t guarantee file system consistency (see [Using blob snapshots with PowerShell](https://blogs.msdn.microsoft.com/cie/2016/05/17/using-blob-snapshots-with-powershell/)).</span></span> <span data-ttu-id="898f7-165">A következő szakaszban _SAP HANA adatkonzisztencia véve a storage-pillanatfelvételekkel_, ez a szolgáltatás kapcsolatos szempontokat ismerteti.</span><span class="sxs-lookup"><span data-stu-id="898f7-165">The next section, _SAP HANA data consistency when taking storage snapshots_, discusses some considerations regarding this feature.</span></span>

<span data-ttu-id="898f7-166">Emellett egy rendelkezik a számlázási vonatkozó következmények ismertetése, amikor olyan gyakran blob pillanatképek ebben a cikkben leírtak szerint: [ismertetése hogyan pillanatképek keletkeznek költségek](/rest/api/storageservices/understanding-how-snapshots-accrue-charges)– ez nem &#39; t, nyilvánvaló, Azure virtuális használatával lemezek.</span><span class="sxs-lookup"><span data-stu-id="898f7-166">In addition, one has to understand the billing implications when working frequently with blob snapshots as described in this article: [Understanding How Snapshots Accrue Charges](/rest/api/storageservices/understanding-how-snapshots-accrue-charges)—it isn&#39;t as obvious as using Azure virtual disks.</span></span>

### <a name="sap-hana-data-consistency-when-taking-storage-snapshots"></a><span data-ttu-id="898f7-167">SAP HANA adatkonzisztencia véve a storage-pillanatfelvételekkel</span><span class="sxs-lookup"><span data-stu-id="898f7-167">SAP HANA data consistency when taking storage snapshots</span></span>

<span data-ttu-id="898f7-168">A fájlok rendszer és az alkalmazás konzisztenciájának egy összetett probléma esetén tárolási pillanatképek készítése.</span><span class="sxs-lookup"><span data-stu-id="898f7-168">File system and application consistency is a complex issue when taking storage snapshots.</span></span> <span data-ttu-id="898f7-169">A legegyszerűbb módja a problémák elkerülése érdekében az SAP HANA leállt, vagy lehet, hogy akkor is igaz, az egész virtuális gép lenne.</span><span class="sxs-lookup"><span data-stu-id="898f7-169">The easiest way to avoid problems would be to shut down SAP HANA, or maybe even the whole virtual machine.</span></span> <span data-ttu-id="898f7-170">Előfordulhat, hogy a leállás doable egy bemutató vagy prototípus vagy akár egy fejlesztői rendszernek, de nincs lehetőség az éles rendszerre.</span><span class="sxs-lookup"><span data-stu-id="898f7-170">A shutdown might be doable with a demo or prototype, or even a development system, but it is not an option for a production system.</span></span>

<span data-ttu-id="898f7-171">Az Azure, vegye figyelembe, hogy az Azure-blobot pillanatkép-e a szolgáltatás nem &#39; senkinek t garancia fájlrendszer-konzisztenciával.</span><span class="sxs-lookup"><span data-stu-id="898f7-171">On Azure, one has to keep in mind that the Azure blob snapshot feature doesn&#39;t guarantee file system consistency.</span></span> <span data-ttu-id="898f7-172">Jól működik azonban használatával az SAP HANA pillanatkép-funkció, mindaddig, amíg nincs érintett csak egyetlen virtuális lemez.</span><span class="sxs-lookup"><span data-stu-id="898f7-172">It works fine however by using the SAP HANA snapshot feature, as long as there is only a single virtual disk involved.</span></span> <span data-ttu-id="898f7-173">De egyetlen lemezen, még akkor is a további elemek azokat fel kell venni.</span><span class="sxs-lookup"><span data-stu-id="898f7-173">But even with a single disk, additional items have to be checked.</span></span> <span data-ttu-id="898f7-174">[Megjegyzés: 2039883 SAP](https://launchpad.support.sap.com/#/notes/2039883) SAP HANA-biztonsági mentések storage-pillanatfelvételekkel keresztül kapcsolatos fontos információkat tartalmaz.</span><span class="sxs-lookup"><span data-stu-id="898f7-174">[SAP Note 2039883](https://launchpad.support.sap.com/#/notes/2039883) has important information about SAP HANA backups via storage snapshots.</span></span> <span data-ttu-id="898f7-175">Például, hogy megjelenik-e, hogy a XFS fájlrendszerrel futtatásához szükséges **xfs\_rögzítése** konzisztencia biztosításához tárolási pillanatkép megkezdése előtt (lásd: [xfs\_freeze(8) - Linux man lap ](https://linux.die.net/man/8/xfs_freeze) talál részletes információt **xfs\_rögzítése**).</span><span class="sxs-lookup"><span data-stu-id="898f7-175">For example, it mentions that, with the XFS file system, it is necessary to run **xfs\_freeze** before starting a storage snapshot to guarantee consistency (see [xfs\_freeze(8) - Linux man page](https://linux.die.net/man/8/xfs_freeze) for details on **xfs\_freeze**).</span></span>

<span data-ttu-id="898f7-176">A témakör a következetesség válik, abban az esetben, ha egy operációs rendszer által felölelt több lemez/kötet még több kihívást.</span><span class="sxs-lookup"><span data-stu-id="898f7-176">The topic of consistency becomes even more challenging in a case where a single file system spans multiple disks/volumes.</span></span> <span data-ttu-id="898f7-177">Például úgy, hogy mdadm vagy LVM használ, és szétosztott.</span><span class="sxs-lookup"><span data-stu-id="898f7-177">For example, by using mdadm or LVM and striping.</span></span> <span data-ttu-id="898f7-178">A fenti állapotok SAP Megjegyzés:</span><span class="sxs-lookup"><span data-stu-id="898f7-178">The SAP Note mentioned above states:</span></span>

<span data-ttu-id="898f7-179">_&quot;De vegye figyelembe, hogy a tárolórendszer rendelkezik egy SAP HANA-adatok kötetenként tárolási pillanatkép létrehozása során i/o-konzisztencia biztosításához, azaz egy SAP HANA-szolgáltatással kapcsolatos adatok kötet pillanatfelvételeinek kell lennie egy atomi művelet.&quot;_</span><span class="sxs-lookup"><span data-stu-id="898f7-179">_&quot;But keep in mind that the storage system has to guarantee I/O consistency while creating a storage snapshot per SAP HANA data volume, i.e. snapshotting of an SAP HANA service-specific data volume must be an atomic operation.&quot;_</span></span>

<span data-ttu-id="898f7-180">Feltételezve, hogy az átfedés négy Azure virtuális lemezek XFS fájlrendszer, az alábbi lépések nyújtanak a HANA adatterület jelölő konzisztens pillanatkép:</span><span class="sxs-lookup"><span data-stu-id="898f7-180">Assuming there is an XFS file system spanning four Azure virtual disks, the following steps provide a consistent snapshot that represents the HANA data area:</span></span>

- <span data-ttu-id="898f7-181">HANA pillanatkép előkészítése</span><span class="sxs-lookup"><span data-stu-id="898f7-181">HANA snapshot prepare</span></span>
- <span data-ttu-id="898f7-182">A fájlrendszer rögzítése (például **xfs\_rögzítése**)</span><span class="sxs-lookup"><span data-stu-id="898f7-182">Freeze the file system (for example, use **xfs\_freeze**)</span></span>
- <span data-ttu-id="898f7-183">Minden szükséges blob pillanatkép létrehozása az Azure</span><span class="sxs-lookup"><span data-stu-id="898f7-183">Create all necessary blob snapshots on Azure</span></span>
- <span data-ttu-id="898f7-184">A fájlrendszer feloldása</span><span class="sxs-lookup"><span data-stu-id="898f7-184">Unfreeze the file system</span></span>
- <span data-ttu-id="898f7-185">Erősítse meg a HANA pillanatkép</span><span class="sxs-lookup"><span data-stu-id="898f7-185">Confirm the HANA snapshot</span></span>

<span data-ttu-id="898f7-186">Javasoljuk, hogy segítségével a fent leírt lépéseket minden olyan esetben kell a biztonság kedvéért, függetlenül attól, milyen fájlrendszer.</span><span class="sxs-lookup"><span data-stu-id="898f7-186">Recommendation is to use the procedure above in all cases to be on the safe side, no matter which file system.</span></span> <span data-ttu-id="898f7-187">Vagy ha ez egy egyetlen lemez vagy, mdadm vagy LVM több lemezre kiterjedő csíkozást.</span><span class="sxs-lookup"><span data-stu-id="898f7-187">Or if it is a single disk or striping, via mdadm or LVM across multiple disks.</span></span>

<span data-ttu-id="898f7-188">Fontos a HANA pillanatkép megerősítéséhez.</span><span class="sxs-lookup"><span data-stu-id="898f7-188">It is important to confirm the HANA snapshot.</span></span> <span data-ttu-id="898f7-189">Miatt a &quot;másolási módosításkor,&quot; SAP HANA előfordulhat, hogy nincs szükség további lemezterületet a ez mód pillanatkép-előkészítéséhez.</span><span class="sxs-lookup"><span data-stu-id="898f7-189">Due to the &quot;Copy-on-Write,&quot; SAP HANA might not require additional disk space while in this snapshot-prepare mode.</span></span> <span data-ttu-id="898f7-190">&#39; s is nem lehetséges, hogy új biztonsági mentést elindítani, amíg a rendszer meggyőződött róla, a SAP HANA-pillanatkép.</span><span class="sxs-lookup"><span data-stu-id="898f7-190">It&#39;s also not possible to start new backups until the SAP HANA snapshot is confirmed.</span></span>

<span data-ttu-id="898f7-191">Az Azure Backup szolgáltatás Azure Virtuálisgép-bővítmények használatával a fájlrendszer-konzisztenciával kezeli.</span><span class="sxs-lookup"><span data-stu-id="898f7-191">Azure Backup service uses Azure VM extensions to take care of the file system consistency.</span></span> <span data-ttu-id="898f7-192">A Virtuálisgép-bővítmények önálló használatra nem érhetők el.</span><span class="sxs-lookup"><span data-stu-id="898f7-192">These VM extensions are not available for standalone usage.</span></span> <span data-ttu-id="898f7-193">Egy SAP HANA konzisztencia kezeléséhez továbbra is rendelkezik.</span><span class="sxs-lookup"><span data-stu-id="898f7-193">One still has to manage SAP HANA consistency.</span></span> <span data-ttu-id="898f7-194">Olvassa el a kapcsolódó [SAP HANA Azure Backup a fájlszintű](sap-hana-backup-file-level.md) további információt.</span><span class="sxs-lookup"><span data-stu-id="898f7-194">See the related article [SAP HANA Azure Backup on file level](sap-hana-backup-file-level.md) for more information.</span></span>

### <a name="sap-hana-backup-scheduling-strategy"></a><span data-ttu-id="898f7-195">SAP HANA-ütemezési biztonsági mentési stratégia</span><span class="sxs-lookup"><span data-stu-id="898f7-195">SAP HANA backup scheduling strategy</span></span>

<span data-ttu-id="898f7-196">A SAP HANA-cikk [tervezési a biztonsági mentési és helyreállítási stratégia](https://help.sap.com/saphelp_hanaplatform/helpdata/en/ef/085cd5949c40b788bba8fd3c65743e/content.htm) el a biztonsági mentéseket alapszintű terv szerint:</span><span class="sxs-lookup"><span data-stu-id="898f7-196">The SAP HANA article [Planning Your Backup and Recovery Strategy](https://help.sap.com/saphelp_hanaplatform/helpdata/en/ef/085cd5949c40b788bba8fd3c65743e/content.htm) states a basic plan to do backups:</span></span>

- <span data-ttu-id="898f7-197">(Naponta) pillanatkép-tárolás</span><span class="sxs-lookup"><span data-stu-id="898f7-197">Storage snapshot (daily)</span></span>
- <span data-ttu-id="898f7-198">Teljes biztonsági mentését a fájl vagy bacint formátumban (hetente egyszer)</span><span class="sxs-lookup"><span data-stu-id="898f7-198">Complete data backup using file or bacint format (once a week)</span></span>
- <span data-ttu-id="898f7-199">Automatikus naplóalapú biztonsági mentések</span><span class="sxs-lookup"><span data-stu-id="898f7-199">Automatic log backups</span></span>

<span data-ttu-id="898f7-200">Szükség esetén egy sikerült nyissa meg teljesen nélkül storage-pillanatfelvételekkel; sikerült cserélhetősége HANA különbözeti biztonsági mentések, például növekményes vagy különbözeti biztonsági másolatok (lásd: [különbözeti biztonsági mentések](https://help.sap.com/saphelp_hanaplatform/helpdata/en/c3/bb7e33bb571014a03eeabba4e37541/content.htm)).</span><span class="sxs-lookup"><span data-stu-id="898f7-200">Optionally, one could go completely without storage snapshots; they could be replaced by HANA delta backups, like incremental or differential backups (see [Delta Backups](https://help.sap.com/saphelp_hanaplatform/helpdata/en/c3/bb7e33bb571014a03eeabba4e37541/content.htm)).</span></span>

<span data-ttu-id="898f7-201">A HANA felügyeleti útmutató egy példa listája.</span><span class="sxs-lookup"><span data-stu-id="898f7-201">The HANA Administration guide provides an example list.</span></span> <span data-ttu-id="898f7-202">Azt javasolja, hogy egy helyreállítás SAP HANA az adott időben a biztonsági mentések az alábbi lépések segítségével:</span><span class="sxs-lookup"><span data-stu-id="898f7-202">It suggests that one recover SAP HANA to a specific point in time using the following sequence of backups:</span></span>

1. <span data-ttu-id="898f7-203">Teljes biztonságimásolat-készítő</span><span class="sxs-lookup"><span data-stu-id="898f7-203">Full data backup</span></span>
2. <span data-ttu-id="898f7-204">Különbözeti biztonsági mentése</span><span class="sxs-lookup"><span data-stu-id="898f7-204">Differential backup</span></span>
3. <span data-ttu-id="898f7-205">A növekményes biztonsági mentés 1</span><span class="sxs-lookup"><span data-stu-id="898f7-205">Incremental backup 1</span></span>
4. <span data-ttu-id="898f7-206">A növekményes biztonsági mentés 2. régiója</span><span class="sxs-lookup"><span data-stu-id="898f7-206">Incremental backup 2</span></span>
5. <span data-ttu-id="898f7-207">Napló-biztonságimásolatokat</span><span class="sxs-lookup"><span data-stu-id="898f7-207">Log backups</span></span>

<span data-ttu-id="898f7-208">Vonatkozó pontos ütemezés mikor és milyen gyakran történjen egy adott típust, nincs lehetőség általános iránymutatás adhat – ez túl specifikus, és attól függ, a rendszer hány adatváltozásokat fordul elő.</span><span class="sxs-lookup"><span data-stu-id="898f7-208">Regarding an exact schedule as to when and how often a specific backup type should happen, it is not possible to give a general guideline—it is too customer-specific, and depends on how many data changes occur in the system.</span></span> <span data-ttu-id="898f7-209">Egy alapszintű ajánlás SAP oldaláról, amelyek általános útmutatásként látható, az, hogy ellenőrizze egy teljes HANA biztonsági mentés hetente egyszer.</span><span class="sxs-lookup"><span data-stu-id="898f7-209">One basic recommendation from SAP side, which can be seen as general guidance, is to make one full HANA backup once a week.</span></span>
<span data-ttu-id="898f7-210">Napló-biztonságimásolatokat vonatkozó, az SAP HANA dokumentációjában [Naplóalapú biztonsági mentések](https://help.sap.com/saphelp_hanaplatform/helpdata/en/c3/bb7e33bb571014a03eeabba4e37541/content.htm).</span><span class="sxs-lookup"><span data-stu-id="898f7-210">Regarding log backups, see the SAP HANA documentation [Log Backups](https://help.sap.com/saphelp_hanaplatform/helpdata/en/c3/bb7e33bb571014a03eeabba4e37541/content.htm).</span></span>

<span data-ttu-id="898f7-211">SAP is azt javasolja, hogy ezzel biztosítható, hogy a végtelen ennél a biztonsági mentési katalógus néhány housekeeping (lásd: [biztonságimásolat-katalógus és a biztonsági másolatok tárolásának háztartási](http://help.sap.com/saphelp_hanaplatform/helpdata/en/ca/c903c28b0e4301b39814ef41dbf568/content.htm)).</span><span class="sxs-lookup"><span data-stu-id="898f7-211">SAP also recommends doing some housekeeping of the backup catalog to keep it from growing infinitely (see [Housekeeping for Backup Catalog and Backup Storage](http://help.sap.com/saphelp_hanaplatform/helpdata/en/ca/c903c28b0e4301b39814ef41dbf568/content.htm)).</span></span>

### <a name="sap-hana-configuration-files"></a><span data-ttu-id="898f7-212">SAP HANA-konfigurációs fájlok</span><span class="sxs-lookup"><span data-stu-id="898f7-212">SAP HANA configuration files</span></span>

<span data-ttu-id="898f7-213">Ahogy az a – gyakori kérdések a [SAP Megjegyzés 1642148](https://launchpad.support.sap.com/#/notes/1642148), a SAP HANA konfigurációs fájljai nem egy szabványos HANA biztonsági másolat része.</span><span class="sxs-lookup"><span data-stu-id="898f7-213">As stated in the FAQ in [SAP Note 1642148](https://launchpad.support.sap.com/#/notes/1642148), the SAP HANA configuration files are not part of a standard HANA backup.</span></span> <span data-ttu-id="898f7-214">Nem nélkülözhetetlenek visszaállította a rendszert.</span><span class="sxs-lookup"><span data-stu-id="898f7-214">They are not essential to restore a system.</span></span> <span data-ttu-id="898f7-215">Manuálisan a HANA konfigurációs sikerült módosítani a visszaállítás után.</span><span class="sxs-lookup"><span data-stu-id="898f7-215">The HANA configuration could be changed manually after the restore.</span></span> <span data-ttu-id="898f7-216">Abban az esetben, ha egy szeretné a visszaállítási folyamat során ugyanazt az egyéni konfigurációt beolvasandó, fontos külön-külön biztonsági mentése a HANA konfigurációs fájlokat.</span><span class="sxs-lookup"><span data-stu-id="898f7-216">In case one would like to get the same custom configuration during the restore process, it is necessary to back up the HANA configuration files separately.</span></span>

<span data-ttu-id="898f7-217">Ha szabványos HANA biztonsági mentések egy dedikált HANA biztonságimásolat-fájl rendszerre, egy sikerült a konfigurációs fájlokat átmásolhatja a ugyanazt biztonsági mentési filesystem, és másolja minden együtt a végső célhelyet ritkán hasonlóan a blob-tároló.</span><span class="sxs-lookup"><span data-stu-id="898f7-217">If standard HANA backups are going to a dedicated HANA backup file system, one could also copy the configuration files to the same backup filesystem, and then copy everything together to the final storage destination like cool blob storage.</span></span>

### <a name="sap-hana-cockpit"></a><span data-ttu-id="898f7-218">SAP HANA-Vezérlőpult</span><span class="sxs-lookup"><span data-stu-id="898f7-218">SAP HANA Cockpit</span></span>

<span data-ttu-id="898f7-219">SAP HANA-Vezérlőpult figyelésének és kezelésének SAP HANA böngészővel lehetőséget biztosít.</span><span class="sxs-lookup"><span data-stu-id="898f7-219">SAP HANA Cockpit offers the possibility of monitoring and managing SAP HANA via a browser.</span></span> <span data-ttu-id="898f7-220">Azt is lehetővé teszi, hogy a SAP HANA-biztonsági mentések kezelése, és ezért SAP HANA Studio és ABAP DBACOCKPIT alternatívájaként használható (lásd: [SAP HANA-Vezérlőpult](https://help.sap.com/saphelp_hanaplatform/helpdata/en/73/c37822444344f3973e0e976b77958e/content.htm) olvashat).</span><span class="sxs-lookup"><span data-stu-id="898f7-220">It also allows handling of SAP HANA backups, and therefore can be used as an alternative to SAP HANA Studio and ABAP DBACOCKPIT (see [SAP HANA Cockpit](https://help.sap.com/saphelp_hanaplatform/helpdata/en/73/c37822444344f3973e0e976b77958e/content.htm) for more information).</span></span>

![Az ábrán látható, a SAP HANA Vezérlőpult adatbázis felügyeleti képernyő](media/sap-hana-backup-guide/image004.png)

<span data-ttu-id="898f7-222">Az ábrán látható, a SAP HANA Vezérlőpult adatbázis felügyeleti képernyő, és a biztonsági mentési csempe a bal oldalon.</span><span class="sxs-lookup"><span data-stu-id="898f7-222">This figure shows the SAP HANA Cockpit Database Administration Screen, and the backup tile on the left.</span></span> <span data-ttu-id="898f7-223">Megtekintheti a biztonsági mentési csempe szükség van a megfelelő felhasználói jogosultságok bejelentkezési fiók.</span><span class="sxs-lookup"><span data-stu-id="898f7-223">Seeing the backup tile requires appropriate user permissions for login account.</span></span>

![Biztonsági mentések SAP HANA-Vezérlőpult tudja felügyelni, amíg azok nem folyamatos](media/sap-hana-backup-guide/image005.png)

<span data-ttu-id="898f7-225">Biztonsági mentések figyelhető SAP HANA Vezérlőpulton, amíg a folyamatban lévő, és amikor elkészült, a biztonsági mentési részletek érhetők el.</span><span class="sxs-lookup"><span data-stu-id="898f7-225">Backups can be monitored in SAP HANA Cockpit while they are ongoing and, once it is finished, all the backup details are available.</span></span>

![Egy példa, egy Azure SLES 12 virtuális gépen a Gnome desktop Firefox használatával](media/sap-hana-backup-guide/image006.png)

<span data-ttu-id="898f7-227">Az előző képernyőfelvételeken történtek egy Windows Azure virtuális gépről.</span><span class="sxs-lookup"><span data-stu-id="898f7-227">The previous screenshots were made from an Azure Windows VM.</span></span> <span data-ttu-id="898f7-228">Erre látható egy példa egy Azure SLES 12 virtuális gépen a Gnome desktop Firefox segítségével.</span><span class="sxs-lookup"><span data-stu-id="898f7-228">This one is an example using Firefox on an Azure SLES 12 VM with Gnome desktop.</span></span> <span data-ttu-id="898f7-229">Azt illusztrálja, SAP HANA Vezérlőpulton található SAP HANA biztonsági mentési ütemterv megadása lehetőséget.</span><span class="sxs-lookup"><span data-stu-id="898f7-229">It shows the option to define SAP HANA backup schedules in SAP HANA Cockpit.</span></span> <span data-ttu-id="898f7-230">Egy is láthatja, mivel azt sugallja, dátum/idő előtagjaként a biztonságimásolat-fájlok.</span><span class="sxs-lookup"><span data-stu-id="898f7-230">As one can also see, it suggests date/time as a prefix for the backup files.</span></span> <span data-ttu-id="898f7-231">Az SAP HANA Studióban, az alapértelmezett előtag van &quot;COMPLETE\_adatok\_biztonsági MENTÉSI&quot; teljes biztonsági mentés során.</span><span class="sxs-lookup"><span data-stu-id="898f7-231">In SAP HANA Studio, the default prefix is &quot;COMPLETE\_DATA\_BACKUP&quot; when doing a full file backup.</span></span> <span data-ttu-id="898f7-232">Egy egyedi előtag használata javasolt.</span><span class="sxs-lookup"><span data-stu-id="898f7-232">Using a unique prefix is recommended.</span></span>

### <a name="sap-hana-backup-encryption"></a><span data-ttu-id="898f7-233">SAP HANA a biztonsági mentés titkosítása</span><span class="sxs-lookup"><span data-stu-id="898f7-233">SAP HANA backup encryption</span></span>

<span data-ttu-id="898f7-234">SAP HANA adatainak és naplókönyvtárainak titkosításának kínál.</span><span class="sxs-lookup"><span data-stu-id="898f7-234">SAP HANA offers encryption of data and log.</span></span> <span data-ttu-id="898f7-235">Ha SAP HANA-adatainak és naplókönyvtárainak nincs titkosítva, majd a biztonsági mentéseket is nincs titkosítva.</span><span class="sxs-lookup"><span data-stu-id="898f7-235">If SAP HANA data and log are not encrypted, then the backups are also not encrypted.</span></span> <span data-ttu-id="898f7-236">Az ügyfél az SAP HANA-biztonsági mentések titkosításához valamilyen harmadik féltől származó megoldás használata esetén.</span><span class="sxs-lookup"><span data-stu-id="898f7-236">It is up to the customer to use some form of third-party solution to encrypt the SAP HANA backups.</span></span> <span data-ttu-id="898f7-237">Lásd: [adatok és a napló Kötettitkosítást](https://help.sap.com/saphelp_hanaplatform/helpdata/en/dc/01f36fbb5710148b668201a6e95cf2/content.htm) további tudnivalók az SAP HANA-titkosítás.</span><span class="sxs-lookup"><span data-stu-id="898f7-237">See [Data and Log Volume Encryption](https://help.sap.com/saphelp_hanaplatform/helpdata/en/dc/01f36fbb5710148b668201a6e95cf2/content.htm) to find out more about SAP HANA encryption.</span></span>

<span data-ttu-id="898f7-238">A Microsoft Azure-ügyfél titkosításához használhatja az infrastruktúra-szolgáltatási virtuális gép titkosítási szolgáltatást.</span><span class="sxs-lookup"><span data-stu-id="898f7-238">On Microsoft Azure, a customer could use the IaaS VM encryption feature to encrypt.</span></span> <span data-ttu-id="898f7-239">Használhatja például egy dedikált adatlemezt csatolni a virtuális gép szolgáló SAP HANA-biztonsági mentések tárolására, akkor ezek a lemezek példányát.</span><span class="sxs-lookup"><span data-stu-id="898f7-239">For example, one could use dedicated data disks attached to the VM, which are used to store SAP HANA backups, then make copies of these disks.</span></span>

<span data-ttu-id="898f7-240">Az Azure Backup szolgáltatás kezelni tud a titkosított virtuális gép/lemez (lásd: [biztonsági mentése és visszaállítása a virtuális gépek az Azure Backup szolgáltatással titkosított](../../../backup/backup-azure-vms-encryption.md)).</span><span class="sxs-lookup"><span data-stu-id="898f7-240">Azure Backup service can handle encrypted VMs/disks (see [How to back up and restore encrypted virtual machines with Azure Backup](../../../backup/backup-azure-vms-encryption.md)).</span></span>

<span data-ttu-id="898f7-241">Egy másik lehetőség az lenne a SAP HANA-virtuális gép és a titkosítás nélkül lemezei karbantartása, és tárolja a biztonsági mentési SAP HANA-fájlokat egy tárfiókot, amelyre engedélyezték a titkosítást (lásd: [Azure Storage szolgáltatás titkosítási inaktív adatok](../../../storage/common/storage-service-encryption.md)).</span><span class="sxs-lookup"><span data-stu-id="898f7-241">Another option would be to maintain the SAP HANA VM and its disks without encryption, and store the SAP HANA backup files in a storage account for which encryption was enabled (see [Azure Storage Service Encryption for Data at Rest](../../../storage/common/storage-service-encryption.md)).</span></span>

## <a name="test-setup"></a><span data-ttu-id="898f7-242">Teszt beállítása</span><span class="sxs-lookup"><span data-stu-id="898f7-242">Test setup</span></span>

### <a name="test-virtual-machine-on-azure"></a><span data-ttu-id="898f7-243">Teszt virtuális gép az Azure-on</span><span class="sxs-lookup"><span data-stu-id="898f7-243">Test Virtual Machine on Azure</span></span>

<span data-ttu-id="898f7-244">Egy Azure GS5 virtuális gép egy SAP HANA-telepítés a következő biztonsági mentés/visszaállítás tesztek lett megadva.</span><span class="sxs-lookup"><span data-stu-id="898f7-244">An SAP HANA installation in an Azure GS5 VM was used for the following backup/restore tests.</span></span>

![Az ábrán látható része a HANA teszt virtuális gép az Azure portál áttekintése](media/sap-hana-backup-guide/image007.png)

<span data-ttu-id="898f7-246">Az ábrán látható, az Azure portál áttekintése a HANA teszt virtuális gép részét.</span><span class="sxs-lookup"><span data-stu-id="898f7-246">This figure shows part of the Azure portal overview for the HANA test VM.</span></span>

### <a name="test-backup-size"></a><span data-ttu-id="898f7-247">Biztonsági másolat mérete tesztelése</span><span class="sxs-lookup"><span data-stu-id="898f7-247">Test backup size</span></span>

![Ez a szám HANA Studio a biztonsági mentési konzoljáról készült, és megmutatja a HANA index kiszolgáló 229 GB biztonságimásolat-fájl méretét](media/sap-hana-backup-guide/image008.png)

<span data-ttu-id="898f7-249">Egy üres táblázatot adatokat lekérni a teljes adatok biztonsági másolatának mérete több mint 200 GB-os reális teljesítményadatokat kapcsolattípusokból töltötte.</span><span class="sxs-lookup"><span data-stu-id="898f7-249">A dummy table was filled up with data to get a total data backup size of over 200 GB to derive realistic performance data.</span></span> <span data-ttu-id="898f7-250">Az ábra HANA Studio a biztonsági mentési konzoljáról készült, és megmutatja a HANA index kiszolgáló 229 GB biztonságimásolat-fájl méretét.</span><span class="sxs-lookup"><span data-stu-id="898f7-250">The figure was taken from the backup console in HANA Studio and shows the backup file size of 229 GB for the HANA index server.</span></span> <span data-ttu-id="898f7-251">A vizsgálatok az alapértelmezett biztonsági mentési előtag SAP HANA Studio "COMPLETE_DATA_BACKUP" lett megadva.</span><span class="sxs-lookup"><span data-stu-id="898f7-251">For the tests, the default backup prefix "COMPLETE_DATA_BACKUP" in SAP HANA Studio was used.</span></span> <span data-ttu-id="898f7-252">A valós éles rendszerek hasznosabb előtag meg kell határozni.</span><span class="sxs-lookup"><span data-stu-id="898f7-252">In real production systems, a more useful prefix should be defined.</span></span> <span data-ttu-id="898f7-253">SAP HANA-Vezérlőpult Dátum és idő alapján.</span><span class="sxs-lookup"><span data-stu-id="898f7-253">SAP HANA Cockpit suggests date/time.</span></span>

### <a name="test-tool-to-copy-files-directly-to-azure-storage"></a><span data-ttu-id="898f7-254">Fájlok másolása közvetlenül az Azure storage eszköz tesztelése</span><span class="sxs-lookup"><span data-stu-id="898f7-254">Test tool to copy files directly to Azure storage</span></span>

<span data-ttu-id="898f7-255">Átvitele SAP HANA biztonságimásolat-fájlok közvetlenül az Azure blob Storage tárolóban, vagy az Azure fájlmegosztások, a blobxfer eszköz lett megadva, mert mindkét célok támogatja, és könnyen integrálható az automatizálási parancsfájlokat a parancssori felület miatt.</span><span class="sxs-lookup"><span data-stu-id="898f7-255">To transfer SAP HANA backup files directly to Azure blob storage, or Azure file shares, the blobxfer tool was used because it supports both targets and it can be easily integrated into automation scripts due to its command-line interface.</span></span> <span data-ttu-id="898f7-256">A blobxfer eszköz [GitHub](https://github.com/Azure/blobxfer).</span><span class="sxs-lookup"><span data-stu-id="898f7-256">The blobxfer tool is available on [GitHub](https://github.com/Azure/blobxfer).</span></span>

### <a name="test-backup-size-estimation"></a><span data-ttu-id="898f7-257">Tesztelje a biztonsági mentés méretének becslése</span><span class="sxs-lookup"><span data-stu-id="898f7-257">Test backup size estimation</span></span>

<span data-ttu-id="898f7-258">Fontos SAP HANA biztonsági mentés méretének becslése.</span><span class="sxs-lookup"><span data-stu-id="898f7-258">It is important to estimate the backup size of SAP HANA.</span></span> <span data-ttu-id="898f7-259">Ez a becslés segít a teljesítmény javítása a biztonságimásolat-fájl maximális mérete biztonságimásolat-fájlok, fájlmásolás közben párhuzamosság miatt számos meghatározásával.</span><span class="sxs-lookup"><span data-stu-id="898f7-259">This estimate helps to improve performance by defining the max backup file size for a number of backup files, due to parallelism during a file copy.</span></span> <span data-ttu-id="898f7-260">(Adatai magyarázatát a cikk későbbi részében.) Egy kell is döntenie, hogy egy teljes biztonsági mentését vagy különbözeti biztonsági mentés (növekményes vagy különbözeti).</span><span class="sxs-lookup"><span data-stu-id="898f7-260">(Those details are explained later in this article.) One must also decide whether to do a full backup or a delta backup (incremental or differential).</span></span>

<span data-ttu-id="898f7-261">Szerencsére van egy egyszerű SQL-utasítást, amely a biztonsági mentési fájlok méretének becslése: **válasszon \* m\_biztonsági MENTÉSI\_mérete\_BECSLÉSEKET** (lásd: [becslése a biztonsági mentést a fájlrendszer szükséges hely](https://help.sap.com/saphelp_hanaplatform/helpdata/en/7d/46337b7a9c4c708d965b65bc0f343c/content.htm)).</span><span class="sxs-lookup"><span data-stu-id="898f7-261">Fortunately, there is a simple SQL statement that estimates the size of the backup files: **select \* from M\_BACKUP\_SIZE\_ESTIMATIONS** (see [Estimate the Space Needed in the File System for a Data Backup](https://help.sap.com/saphelp_hanaplatform/helpdata/en/7d/46337b7a9c4c708d965b65bc0f343c/content.htm)).</span></span>

![Az SQL-utasítás kimenete megegyezik a teljes biztonsági mentését a lemezen szinte teljesen a tényleges mérete](media/sap-hana-backup-guide/image009.png)

<span data-ttu-id="898f7-263">A tesztrendszerhez az SQL-utasítás kimenete megegyezik szinte teljesen valós méretét a teljes biztonsági mentését a lemezen.</span><span class="sxs-lookup"><span data-stu-id="898f7-263">For the test system, the output of this SQL statement matches almost exactly the real size of the full data backup on disk.</span></span>

### <a name="test-hana-backup-file-size"></a><span data-ttu-id="898f7-264">Teszt HANA biztonságimásolat-fájl mérete</span><span class="sxs-lookup"><span data-stu-id="898f7-264">Test HANA backup file size</span></span>

![A biztonsági mentési HANA Studio konzol lehetővé teszi egy HANA biztonságimásolat-fájlok maximális méretének korlátozása](media/sap-hana-backup-guide/image010.png)

<span data-ttu-id="898f7-266">A biztonsági mentési HANA Studio konzol lehetővé teszi egy HANA biztonságimásolat-fájlok maximális méretének korlátozására.</span><span class="sxs-lookup"><span data-stu-id="898f7-266">The HANA Studio backup console allows one to restrict the max file size of HANA backup files.</span></span> <span data-ttu-id="898f7-267">A minta környezetben, a szolgáltatás lehetővé teszi helyett egy 230 GB-os biztonságimásolat-fájl több kisebb biztonsági mentési fájlok eléréséhez.</span><span class="sxs-lookup"><span data-stu-id="898f7-267">In the sample environment, that feature makes it possible to get multiple smaller backup files instead of one 230-GB backup file.</span></span> <span data-ttu-id="898f7-268">Kisebb fájlméretet jelentős hatással van a teljesítményre (a kapcsolódó cikke [SAP HANA Azure Backup a fájlszintű](sap-hana-backup-file-level.md)).</span><span class="sxs-lookup"><span data-stu-id="898f7-268">Smaller file size has a significant impact on performance (see the related article [SAP HANA Azure Backup on file level](sap-hana-backup-file-level.md)).</span></span>

## <a name="summary"></a><span data-ttu-id="898f7-269">Összefoglalás</span><span class="sxs-lookup"><span data-stu-id="898f7-269">Summary</span></span>

<span data-ttu-id="898f7-270">Az alábbi táblázatok bemutatják és megoldások Azure virtuális gépeken futó egy SAP HANA-adatbázis biztonsági mentése teszt eredménye alapján.</span><span class="sxs-lookup"><span data-stu-id="898f7-270">Based on the test results the following tables show pros and cons of solutions to back up an SAP HANA database running on Azure virtual machines.</span></span>

<span data-ttu-id="898f7-271">**A fájlrendszer SAP HANA mentésére, és másolja a biztonságimásolat-fájlt utána az utolsó biztonsági mentési célhelyre**</span><span class="sxs-lookup"><span data-stu-id="898f7-271">**Back up SAP HANA to the file system and copy backup files afterwards to the final backup destination**</span></span>

|<span data-ttu-id="898f7-272">Megoldás</span><span class="sxs-lookup"><span data-stu-id="898f7-272">Solution</span></span>                                           |<span data-ttu-id="898f7-273">Informatikai szakemberek</span><span class="sxs-lookup"><span data-stu-id="898f7-273">Pros</span></span>                                 |<span data-ttu-id="898f7-274">Hátrányok</span><span class="sxs-lookup"><span data-stu-id="898f7-274">Cons</span></span>                                  |
|---------------------------------------------------|-------------------------------------|--------------------------------------|
|<span data-ttu-id="898f7-275">A virtuális gépek lemezei HANA biztonsági mentések megtartása</span><span class="sxs-lookup"><span data-stu-id="898f7-275">Keep HANA backups on VM disks</span></span>                      |<span data-ttu-id="898f7-276">Nincsenek további felügyeleti próbálkozások</span><span class="sxs-lookup"><span data-stu-id="898f7-276">No additional management efforts</span></span>     |<span data-ttu-id="898f7-277">Helyi virtuális gép lemezterületet eats</span><span class="sxs-lookup"><span data-stu-id="898f7-277">Eats up local VM disk space</span></span>           |
|<span data-ttu-id="898f7-278">Másolja a biztonságimásolat-fájlt a blob storage Blobxfer eszköz</span><span class="sxs-lookup"><span data-stu-id="898f7-278">Blobxfer tool to copy backup files to blob storage</span></span> |<span data-ttu-id="898f7-279">Több fájl másolása párhuzamossági ritkán használt adatok a blob storage használatához</span><span class="sxs-lookup"><span data-stu-id="898f7-279">Parallelism to copy multiple files, choice to use cool blob storage</span></span> | <span data-ttu-id="898f7-280">További eszköz karbantartási és az egyéni parancsfájlok</span><span class="sxs-lookup"><span data-stu-id="898f7-280">Additional tool maintenance and custom scripting</span></span> | 
|<span data-ttu-id="898f7-281">A BLOB másolási Powershell vagy a parancssori felület használatával</span><span class="sxs-lookup"><span data-stu-id="898f7-281">Blob copy via Powershell or CLI</span></span>                    |<span data-ttu-id="898f7-282">Nincs szükség esetén további eszköz valósítható meg Azure Powershell vagy a parancssori felület használatával</span><span class="sxs-lookup"><span data-stu-id="898f7-282">No additional tool necessary, can be accomplished via Azure Powershell or CLI</span></span> |<span data-ttu-id="898f7-283">a manuális eljáráshoz, az ügyfélnek a parancsfájlkezelést, és a visszaállítási másolt blobok felügyeleti irányuló van.</span><span class="sxs-lookup"><span data-stu-id="898f7-283">manual process, customer has to take care of scripting and management of copied blobs for restore</span></span>|
|<span data-ttu-id="898f7-284">NFS-megosztás másolása</span><span class="sxs-lookup"><span data-stu-id="898f7-284">Copy to NFS share</span></span>                                  |<span data-ttu-id="898f7-285">Utófeldolgozási biztonsági mentési fájlok és más virtuális gép a HANA kiszolgáló gyakorolt hatás nélkül</span><span class="sxs-lookup"><span data-stu-id="898f7-285">Post-processing of backup files on other VM without impact on the HANA server</span></span>|<span data-ttu-id="898f7-286">Lassú másolást</span><span class="sxs-lookup"><span data-stu-id="898f7-286">Slow copy process</span></span>|
|<span data-ttu-id="898f7-287">Azure Fájlszolgáltatás Blobxfer másolás</span><span class="sxs-lookup"><span data-stu-id="898f7-287">Blobxfer copy to Azure File Service</span></span>                |<span data-ttu-id="898f7-288">Nem keleti-afrikai fel lemezterületet a helyi virtuális gépek lemezei</span><span class="sxs-lookup"><span data-stu-id="898f7-288">Doesn't eat up space on local VM disks</span></span>|<span data-ttu-id="898f7-289">Nincs közvetlen támogatási írja HANA biztonsági másolat, fájlméret korlátozása fájlmegosztás jelenleg 5 TB:</span><span class="sxs-lookup"><span data-stu-id="898f7-289">No direct write support by HANA backup, size restriction of file share currently at 5 TB</span></span>|
|<span data-ttu-id="898f7-290">Az Azure Backup szolgáltatás ügynöke</span><span class="sxs-lookup"><span data-stu-id="898f7-290">Azure Backup Agent</span></span>                                 | <span data-ttu-id="898f7-291">Előnyben részesített megoldás lenne</span><span class="sxs-lookup"><span data-stu-id="898f7-291">Would be preferred solution</span></span>         | <span data-ttu-id="898f7-292">Linux rendszeren jelenleg nem érhető el</span><span class="sxs-lookup"><span data-stu-id="898f7-292">Currently not available on Linux</span></span>    |



<span data-ttu-id="898f7-293">**Storage-pillanatfelvételekkel alapuló biztonsági mentési SAP HANA**</span><span class="sxs-lookup"><span data-stu-id="898f7-293">**Backup SAP HANA based on storage snapshots**</span></span>

|<span data-ttu-id="898f7-294">Megoldás</span><span class="sxs-lookup"><span data-stu-id="898f7-294">Solution</span></span>                                           |<span data-ttu-id="898f7-295">Informatikai szakemberek</span><span class="sxs-lookup"><span data-stu-id="898f7-295">Pros</span></span>                                 |<span data-ttu-id="898f7-296">Hátrányok</span><span class="sxs-lookup"><span data-stu-id="898f7-296">Cons</span></span>                                  |
|---------------------------------------------------|-------------------------------------|--------------------------------------|
|<span data-ttu-id="898f7-297">Azure biztonsági mentési szolgáltatás</span><span class="sxs-lookup"><span data-stu-id="898f7-297">Azure Backup Service</span></span>                               | <span data-ttu-id="898f7-298">Lehetővé teszi a virtuális gép biztonsági mentése a blob pillanatképek alapján</span><span class="sxs-lookup"><span data-stu-id="898f7-298">Allows VM backup based on blob snapshots</span></span> | <span data-ttu-id="898f7-299">Használatakor nem szintű fájlvisszaállításra igényel az új virtuális gép létrehozása a visszaállítási folyamat, amely majd azt az új SAP HANA-licenc kulcs szükséges a</span><span class="sxs-lookup"><span data-stu-id="898f7-299">When not using file level restore, it requires the creation of a new VM for the restore process, which then implies the need of a new SAP HANA license key</span></span>|
|<span data-ttu-id="898f7-300">A pillanatképek kézi blob</span><span class="sxs-lookup"><span data-stu-id="898f7-300">Manual blob snapshots</span></span>                              | <span data-ttu-id="898f7-301">Hozzon létre, és állítsa vissza az adott virtuális gépek lemezei a virtuális gép egyedi azonosítója módosítása nélkül adhassanak</span><span class="sxs-lookup"><span data-stu-id="898f7-301">Flexibility to create and restore specific VM disks without changing the unique VM ID</span></span>|<span data-ttu-id="898f7-302">Az összes manuális tevékenység, amelyet az ügyfél által végezhető</span><span class="sxs-lookup"><span data-stu-id="898f7-302">All manual work, which has to be done by the customer</span></span>|

## <a name="next-steps"></a><span data-ttu-id="898f7-303">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="898f7-303">Next steps</span></span>
* <span data-ttu-id="898f7-304">[SAP HANA Azure biztonsági mentési fájl szinten](sap-hana-backup-file-level.md) ismerteti a fájl alapú biztonsági mentési beállítás.</span><span class="sxs-lookup"><span data-stu-id="898f7-304">[SAP HANA Azure Backup on file level](sap-hana-backup-file-level.md) describes the file-based backup option.</span></span>
* <span data-ttu-id="898f7-305">[A storage-pillanatfelvételekkel alapján SAP HANA biztonsági mentés](sap-hana-backup-storage-snapshots.md) ismerteti a tárolási pillanatkép-alapú biztonsági mentési beállítás.</span><span class="sxs-lookup"><span data-stu-id="898f7-305">[SAP HANA backup based on storage snapshots](sap-hana-backup-storage-snapshots.md) describes the storage snapshot-based backup option.</span></span>
* <span data-ttu-id="898f7-306">Magas rendelkezésre állás és az Azure (nagy példány) az SAP HANA vész-helyreállítási terv létrehozásához, lásd: [SAP HANA (nagy példányok) magas rendelkezésre állási és vészhelyreállítási helyreállítási Azure](hana-overview-high-availability-disaster-recovery.md).</span><span class="sxs-lookup"><span data-stu-id="898f7-306">To learn how to establish high availability and plan for disaster recovery of SAP HANA on Azure (large instances), see [SAP HANA (large instances) high availability and disaster recovery on Azure](hana-overview-high-availability-disaster-recovery.md).</span></span>
