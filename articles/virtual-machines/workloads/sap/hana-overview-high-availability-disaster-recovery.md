---
title: "az SAP HANA Azure (nagy példányok) rendelkezésre állási és vészhelyreállítási helyreállítási aaaHigh |} Microsoft Docs"
description: "Magas rendelkezésre állás és az Azure (nagy példány) az SAP HANA vész-helyreállítási terv létrehozásához."
services: virtual-machines-linux
documentationcenter: 
author: RicksterCDN
manager: timlt
editor: 
ms.service: virtual-machines-linux
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: vm-linux
ms.workload: infrastructure
ms.date: 12/01/2016
ms.author: rclaus
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: 0c0967f54cf29bbb275eb7cda9d36608488add9e
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/06/2017
---
# <a name="sap-hana-large-instances-high-availability-and-disaster-recovery-on-azure"></a><span data-ttu-id="e97c3-103">SAP HANA (nagy példányok) magas rendelkezésre állási és vészhelyreállítási helyreállítási az Azure-on</span><span class="sxs-lookup"><span data-stu-id="e97c3-103">SAP HANA (large instances) high availability and disaster recovery on Azure</span></span> 

<span data-ttu-id="e97c3-104">Magas rendelkezésre állású és vész-helyreállítási a kritikus fontosságú SAP HANA Azure (nagy példányok) kiszolgálón futó fontos szempontot.</span><span class="sxs-lookup"><span data-stu-id="e97c3-104">High availability and disaster recovery are important aspects of running your mission-critical SAP HANA on Azure (large instances) servers.</span></span> <span data-ttu-id="e97c3-105">Annak fontos toowork az SAP, a rendszer integráló, vagy a Microsoft tooproperly rendszerfejlesztők és a megvalósítása hello jobb felső – rendelkezésre állási/vész-helyreállítási stratégiát.</span><span class="sxs-lookup"><span data-stu-id="e97c3-105">It's important toowork with SAP, your system integrator, or Microsoft tooproperly architect and implement hello right high-availability/disaster-recovery strategy.</span></span> <span data-ttu-id="e97c3-106">Akkor is fontos tooconsider hello helyreállításipont-célkitűzés és a helyreállítási idő célkitűzése, amelyek adott tooyour környezet.</span><span class="sxs-lookup"><span data-stu-id="e97c3-106">It is also important tooconsider hello recovery point objective and recovery time objective, which are specific tooyour environment.</span></span>

## <a name="high-availability"></a><span data-ttu-id="e97c3-107">Magas rendelkezésre állás</span><span class="sxs-lookup"><span data-stu-id="e97c3-107">High availability</span></span>

<span data-ttu-id="e97c3-108">A Microsoft SAP HANA magas rendelkezésre állású módszerek "hello mezőbe out" többek között támogatja:</span><span class="sxs-lookup"><span data-stu-id="e97c3-108">Microsoft supports SAP HANA high-availability methods "out of hello box," which include:</span></span>

- <span data-ttu-id="e97c3-109">**Tárolóreplikálást:** hello tárolási rendszer képes tooreplicate összes adatok tooanother helye (belül, vagy különálló, hello ugyanabban az adatközpontban).</span><span class="sxs-lookup"><span data-stu-id="e97c3-109">**Storage replication:** hello storage system's ability tooreplicate all data tooanother location (within, or separate from, hello same datacenter).</span></span> <span data-ttu-id="e97c3-110">SAP HANA működése független ezt a módszert.</span><span class="sxs-lookup"><span data-stu-id="e97c3-110">SAP HANA operates independently of this method.</span></span>
- <span data-ttu-id="e97c3-111">**HANA replikációs:** az összes adat replikálási hello SAP HANA tooa külön SAP HANA rendszerben.</span><span class="sxs-lookup"><span data-stu-id="e97c3-111">**HANA system replication:** hello replication of all data in SAP HANA tooa separate SAP HANA system.</span></span> <span data-ttu-id="e97c3-112">hello helyreállítási idő célkitűzése keresztül rendszeres időközönként adatreplikáció másodpercekre csökken.</span><span class="sxs-lookup"><span data-stu-id="e97c3-112">hello recovery time objective is minimized through data replication at regular intervals.</span></span> <span data-ttu-id="e97c3-113">SAP HANA támogatja az aszinkron, szinkron memórián belüli és szinkron módban (csak SAP HANA javasolt belüli rendszerek hello ugyanabban az adatközpontban, vagy legalább 100 KM-egymástól).</span><span class="sxs-lookup"><span data-stu-id="e97c3-113">SAP HANA supports asynchronous, synchronous in-memory, and synchronous modes (recommended only for SAP HANA systems that are within hello same datacenter or less than 100 KM apart).</span></span> <span data-ttu-id="e97c3-114">Csak magas rendelkezésre állású hello aktuális kialakításában HANA nagy példány bélyegzők HANA replikációs használható.</span><span class="sxs-lookup"><span data-stu-id="e97c3-114">In hello current design of HANA large-instance stamps, HANA system replication can be used for high availability only.</span></span>
- <span data-ttu-id="e97c3-115">**Gazdagép automatikus feladatátvételt:** egy helyi hiba-helyreállítási megoldás toouse, egy alternatív toosystem replikálásra.</span><span class="sxs-lookup"><span data-stu-id="e97c3-115">**Host auto-failover:** A local fault-recovery solution toouse as an alternative toosystem replication.</span></span> <span data-ttu-id="e97c3-116">Hello főcsomópont nem érhető el, ha egy vagy több készenléti SAP HANA-csomópont a kibővített módban vannak konfigurálva, és az SAP HANA automatikusan átkerül tooanother csomópont.</span><span class="sxs-lookup"><span data-stu-id="e97c3-116">When hello master node becomes unavailable, one or more standby SAP HANA nodes are configured in scale-out mode and SAP HANA automatically fails over tooanother node.</span></span>

<span data-ttu-id="e97c3-117">A SAP HANA magas rendelkezésre állás további információkért lásd: hello SAP-adatait a következő:</span><span class="sxs-lookup"><span data-stu-id="e97c3-117">For more information on SAP HANA high availability, see hello following SAP information:</span></span>

- [<span data-ttu-id="e97c3-118">SAP HANA magas rendelkezésre állású tanulmány</span><span class="sxs-lookup"><span data-stu-id="e97c3-118">SAP HANA High-Availability Whitepaper</span></span>](http://go.sap.com/documents/2016/05/f8e5eeba-737c-0010-82c7-eda71af511fa.html)
- [<span data-ttu-id="e97c3-119">SAP HANA felügyeleti útmutató</span><span class="sxs-lookup"><span data-stu-id="e97c3-119">SAP HANA Administration Guide</span></span>](http://help.sap.com/hana/SAP_HANA_Administration_Guide_en.pdf)
- [<span data-ttu-id="e97c3-120">Az SAP HANA replikációs SAP Academy videó</span><span class="sxs-lookup"><span data-stu-id="e97c3-120">SAP Academy Video on SAP HANA System Replication</span></span>](http://scn.sap.com/community/hana-in-memory/blog/2015/05/19/sap-hana-system-replication)
- [<span data-ttu-id="e97c3-121">Támogatási Megjegyzés #1999880 – gyakori kérdések az SAP HANA replikációs SAP</span><span class="sxs-lookup"><span data-stu-id="e97c3-121">SAP Support Note #1999880 – FAQ on SAP HANA System Replication</span></span>](https://bcs.wdf.sap.corp/sap/support/notes/1999880)
- <span data-ttu-id="e97c3-122">[SAP támogatási Megjegyzés #2165547 – SAP HANA biztonsági mentési és visszaállítási SAP HANA rendszer replikációs környezeten belül](https://websmp230.sap-ag.de/sap(bD1lbiZjPTAwMQ==)/bc/bsp/sno/ui_entry/entry.htm?param=69765F6D6F64653D3030312669765F7361706E6F7465735F6E756D6265723D3231363535343726)</span><span class="sxs-lookup"><span data-stu-id="e97c3-122">[SAP Support Note #2165547 – SAP HANA Backup and Restore within SAP HANA System Replication Environment](https://websmp230.sap-ag.de/sap(bD1lbiZjPTAwMQ==)/bc/bsp/sno/ui_entry/entry.htm?param=69765F6D6F64653D3030312669765F7361706E6F7465735F6E756D6265723D3231363535343726)</span></span>
- <span data-ttu-id="e97c3-123">[Támogatási Megjegyzés #1984882 – SAP HANA replikációs használatával SAP minimális vagy nulla állásidővel hardver Exchange-hez](https://websmp230.sap-ag.de/sap(bD1lbiZjPTAwMQ==)/bc/bsp/sno/ui_entry/entry.htm?param=69765F6D6F64653D3030312669765F7361706E6F7465735F6E756D6265723D3139383438383226)</span><span class="sxs-lookup"><span data-stu-id="e97c3-123">[SAP Support Note #1984882 – Using SAP HANA System Replication for Hardware Exchange with Minimum/Zero Downtime](https://websmp230.sap-ag.de/sap(bD1lbiZjPTAwMQ==)/bc/bsp/sno/ui_entry/entry.htm?param=69765F6D6F64653D3030312669765F7361706E6F7465735F6E756D6265723D3139383438383226)</span></span>

## <a name="disaster-recovery"></a><span data-ttu-id="e97c3-124">Vészhelyreállítás</span><span class="sxs-lookup"><span data-stu-id="e97c3-124">Disaster recovery</span></span>

<span data-ttu-id="e97c3-125">A két Azure-régiók geopolitikai régióban SAP HANA Azure (nagy példányok) kínálják.</span><span class="sxs-lookup"><span data-stu-id="e97c3-125">SAP HANA on Azure (large instances) is offered in two Azure regions in a geopolitical region.</span></span> <span data-ttu-id="e97c3-126">Hello két nagy példány bélyegzők két különböző régiók közötti adatreplikálás vészhelyreállítás során a közvetlen kapcsolattal van.</span><span class="sxs-lookup"><span data-stu-id="e97c3-126">Between hello two large-instance stamps of two different regions is a direct network connectivity for replicating data during disaster recovery.</span></span> <span data-ttu-id="e97c3-127">hello adatok replikálása hello tároló-infrastruktúra alapú.</span><span class="sxs-lookup"><span data-stu-id="e97c3-127">hello replication of hello data is storage-infrastructure based.</span></span> <span data-ttu-id="e97c3-128">hello replikációs alapértelmezés szerint nem történik meg.</span><span class="sxs-lookup"><span data-stu-id="e97c3-128">hello replication is not done by default.</span></span> <span data-ttu-id="e97c3-129">Hello ügyfél konfigurációk hello vész-helyreállítási rendelt elkészült.</span><span class="sxs-lookup"><span data-stu-id="e97c3-129">It is done for hello customer configurations that ordered hello disaster recovery.</span></span> <span data-ttu-id="e97c3-130">Hello aktuális kialakításában HANA replikációs vész-helyreállítási nem használható.</span><span class="sxs-lookup"><span data-stu-id="e97c3-130">In hello current design, HANA system replication can't be used for disaster recovery.</span></span>

<span data-ttu-id="e97c3-131">Azonban tootake előny, hello vész-helyreállítási toostart toodesign hello hálózati kapcsolat toohello két különböző Azure-régiók kell.</span><span class="sxs-lookup"><span data-stu-id="e97c3-131">However, tootake advantage of hello disaster recovery, you need toostart toodesign hello network connectivity toohello two different Azure regions.</span></span> <span data-ttu-id="e97c3-132">toodo Igen, szükséges a helyszíni Azure ExpressRoute körön kapcsolat a fő Azure-régió, és egy másik kapcsolat kapcsolat a helyszíni tooyour vész-helyreállítási régióban.</span><span class="sxs-lookup"><span data-stu-id="e97c3-132">toodo so, you need an Azure ExpressRoute circuit connection from on-premises in your main Azure region and another circuit connection from on-premises tooyour disaster-recovery region.</span></span> <span data-ttu-id="e97c3-133">Ez a mérték kiterjedő olyan helyzet, amelyben a a teljes Azure-régiót, beleértve a Microsoft vállalati peremhálózati útválasztó (MSEE) helye egy hibát tartalmaz.</span><span class="sxs-lookup"><span data-stu-id="e97c3-133">This measure would cover a situation in which a complete Azure region, including a Microsoft enterprise edge router (MSEE) location, has an issue.</span></span>

<span data-ttu-id="e97c3-134">Második mérőszámként minden Azure virtuális hálózatok, amelyek kapcsolódnak az Azure (nagy példányok) HANA tooSAP hello régiók tooboth az adott ExpressRoute-Kapcsolatcsoportok egyikével csatlakoztathatja.</span><span class="sxs-lookup"><span data-stu-id="e97c3-134">As a second measure, you can connect all Azure virtual networks that connect tooSAP HANA on Azure (large instances) in one of hello regions tooboth of those ExpressRoute circuits.</span></span> <span data-ttu-id="e97c3-135">Ez a mérték megoldást egy esetet, ahol hello MSEE helyek csak az egyik, amely a helyszíni hely Azure-ral kerül nem működik.</span><span class="sxs-lookup"><span data-stu-id="e97c3-135">This measure addresses a case where only one of hello MSEE locations that connects your on-premises location with Azure goes off duty.</span></span>

<span data-ttu-id="e97c3-136">hello következő ábrán látható hello optimális konfigurációs katasztrófa utáni helyreállítás:</span><span class="sxs-lookup"><span data-stu-id="e97c3-136">hello following figure shows hello optimal configuration for disaster recovery:</span></span>

![Optimális konfigurációs katasztrófa utáni helyreállítás](./media/hana-overview-high-availability-disaster-recovery/image1-optimal-configuration.png)

<span data-ttu-id="e97c3-138">hello hello vész-helyreállítási konfiguráció az optimális esetében toohave két ExpressRoute-Kapcsolatcsoportok a helyszíni toohello két különböző Azure-régiók.</span><span class="sxs-lookup"><span data-stu-id="e97c3-138">hello optimal case for a disaster-recovery configuration of hello network is toohave two ExpressRoute circuits from on-premises toohello two different Azure regions.</span></span> <span data-ttu-id="e97c3-139">Egy kör tooregion #1 fut egy éles példánya kerül.</span><span class="sxs-lookup"><span data-stu-id="e97c3-139">One circuit goes tooregion #1, running a production instance.</span></span> <span data-ttu-id="e97c3-140">hello második ExpressRoute-kapcsolatcsoportot tooregion #2, néhány nem éles HANA példányt futtatva kerül.</span><span class="sxs-lookup"><span data-stu-id="e97c3-140">hello second ExpressRoute circuit goes tooregion #2, running some non-production HANA instances.</span></span> <span data-ttu-id="e97c3-141">(Ez akkor fontos, ha egy teljes Azure-régió, beleértve hello MSEE és nagy példány stamp visszatér hello rács.)</span><span class="sxs-lookup"><span data-stu-id="e97c3-141">(This is important if an entire Azure region, including hello MSEE and large-instance stamp, goes off hello grid.)</span></span>

<span data-ttu-id="e97c3-142">Második mérőszámként hello különböző virtuális hálózatok vannak csatlakoztatott toohello különböző ExpressRoute-Kapcsolatcsoportok, amelyek csatlakoztatott tooSAP HANA Azure (nagy példány).</span><span class="sxs-lookup"><span data-stu-id="e97c3-142">As a second measure, hello various virtual networks are connected toohello various ExpressRoute circuits that are connected tooSAP HANA on Azure (large instances).</span></span> <span data-ttu-id="e97c3-143">Később tárgyaljuk, megkerüléséhez hello helyre, ha az egy MSEE sikertelen vagy hello helyreállításipont-célkitűzés vész-helyreállítási csökkenthető.</span><span class="sxs-lookup"><span data-stu-id="e97c3-143">You can bypass hello location where an MSEE is failing, or you can lower hello recovery point objective for disaster recovery, as we discuss later.</span></span>

<span data-ttu-id="e97c3-144">a vész-helyreállítási telepítő hello következő követelményei a következők:</span><span class="sxs-lookup"><span data-stu-id="e97c3-144">hello next requirements for a disaster-recovery setup are:</span></span>

- <span data-ttu-id="e97c3-145">Az Azure (nagy példányok) termékváltozatok hello ugyanaz a gyártási termékváltozatok méretezés, és azok hello vész-helyreállítási régióban az SAP HANA kell rendeznie.</span><span class="sxs-lookup"><span data-stu-id="e97c3-145">You must order SAP HANA on Azure (large instances) SKUs of hello same size as your production SKUs and deploy them in hello disaster-recovery region.</span></span> <span data-ttu-id="e97c3-146">Ezek a példányok használt toorun teszt, a védőfal vagy a QA HANA példányok lehet.</span><span class="sxs-lookup"><span data-stu-id="e97c3-146">These instances can be used toorun test, sandbox, or QA HANA instances.</span></span>
- <span data-ttu-id="e97c3-147">Kell rendeznie vész-helyreállítási profil az egyes az Azure (nagy példányok) termékváltozatok a SAP HANA, amelyet az toorecover hello vész-helyreállítási helyen, ha szükséges.</span><span class="sxs-lookup"><span data-stu-id="e97c3-147">You must order a disaster-recovery profile for each of your SAP HANA on Azure (large instances) SKUs that you want toorecover in hello disaster-recovery site, if necessary.</span></span> <span data-ttu-id="e97c3-148">Ez a művelet eredménye toohello lefoglalása a tároló kötetek, amelyek hello tárolóreplikálást a termelési régióban hello vész-helyreállítási régióba hello célját.</span><span class="sxs-lookup"><span data-stu-id="e97c3-148">This action leads toohello allocation of storage volumes, which are hello target of hello storage replication from your production region into hello disaster-recovery region.</span></span>

<span data-ttu-id="e97c3-149">Megfelel a fenti követelmények hello, miután a felelősség toostart hello tárolóreplikálást áll.</span><span class="sxs-lookup"><span data-stu-id="e97c3-149">After you meet hello preceding requirements, it is your responsibility toostart hello storage replication.</span></span> <span data-ttu-id="e97c3-150">Hello tároló-infrastruktúrájában SAP Hana Azure (nagy példányok) használt hello tárolóreplikálást alapja storage-pillanatfelvételekkel.</span><span class="sxs-lookup"><span data-stu-id="e97c3-150">In hello storage infrastructure used for SAP HANA on Azure (large instances), hello basis of storage replication is storage snapshots.</span></span> <span data-ttu-id="e97c3-151">toostart hello vész-helyreállítási replikációs tooperform kell:</span><span class="sxs-lookup"><span data-stu-id="e97c3-151">toostart hello disaster-recovery replication, you need tooperform:</span></span>

- <span data-ttu-id="e97c3-152">A logikai egység már ismertetett rendszerindító pillanatképet.</span><span class="sxs-lookup"><span data-stu-id="e97c3-152">A snapshot of your boot LUN, as described earlier.</span></span>
- <span data-ttu-id="e97c3-153">Pillanatkép készítése a HANA kapcsolatos kötetek, a fentebb leírt módon.</span><span class="sxs-lookup"><span data-stu-id="e97c3-153">A snapshot of your HANA-related volumes, as described earlier.</span></span>

<span data-ttu-id="e97c3-154">Ezeket a pillanatképeket végrehajtása után a program a vész-helyreállítási profil hello vész-helyreállítási régióban társított hello köteteken rendezés hello kötetek kezdeti replikáját.</span><span class="sxs-lookup"><span data-stu-id="e97c3-154">After you execute these snapshots, an initial replica of hello volumes is seeded on hello volumes that are associated with your disaster-recovery profile in hello disaster-recovery region.</span></span>

<span data-ttu-id="e97c3-155">Ezt követően a hello legutóbbi tárolási pillanatkép óránként szolgál, amely a fejlesztés hello tároló köteteken tooreplicate hello eltéréseit.</span><span class="sxs-lookup"><span data-stu-id="e97c3-155">Subsequently, hello most recent storage snapshot is used every hour tooreplicate hello deltas that develop on hello storage volumes.</span></span>

<span data-ttu-id="e97c3-156">hello helyreállításipont-célkitűzést, amely érhető el, ez a konfiguráció 60 perc közötti too90 van.</span><span class="sxs-lookup"><span data-stu-id="e97c3-156">hello recovery point objective that's achieved with this configuration is from 60 too90 minutes.</span></span> <span data-ttu-id="e97c3-157">tooachieve jobb helyreállítási pont hello vész-helyreállítási helyzet, a Másolás hello HANA tranzakciónapló biztonsági mentései az SAP HANA az Azure (nagy példányok) toohello célkitűzést más Azure-régiót.</span><span class="sxs-lookup"><span data-stu-id="e97c3-157">tooachieve a better recovery point objective in hello disaster-recovery case, copy hello HANA transaction log backups from SAP HANA on Azure (large instances) toohello other Azure region.</span></span> <span data-ttu-id="e97c3-158">tooachieve a helyreállításipont-célkitűzést, a következő hello:</span><span class="sxs-lookup"><span data-stu-id="e97c3-158">tooachieve this recovery point objective, do hello following:</span></span>

1. <span data-ttu-id="e97c3-159">Készítsen biztonsági másolatot hello HANA tranzakció jelentkezzen gyakran lehető túl/hana / / biztonsági másolatát.</span><span class="sxs-lookup"><span data-stu-id="e97c3-159">Back up hello HANA transaction log as frequently as possible too/hana/log/backup.</span></span>
2. <span data-ttu-id="e97c3-160">Másolja a hello tranzakciónapló biztonsági mentései, amikor azok végzett tooan Azure virtuális gép (VM), amely olyan virtuális hálózatot, amely a csatlakozott toohello SAP HANA Azure (nagy példányok) kiszolgálón.</span><span class="sxs-lookup"><span data-stu-id="e97c3-160">Copy hello transaction log backups when they are finished tooan Azure virtual machine (VM), which is in a virtual network that's connected toohello SAP HANA on Azure (large instances) server.</span></span>
3. <span data-ttu-id="e97c3-161">Ezt a virtuális Gépet másolja a biztonsági mentési tooa hello virtuális Gépet, amely a virtuális hálózat hello vész-helyreállítási régióban van.</span><span class="sxs-lookup"><span data-stu-id="e97c3-161">From that VM, copy hello backup tooa VM that's in a virtual network in hello disaster-recovery region.</span></span>
4. <span data-ttu-id="e97c3-162">Ne hello tranzakció napló-biztonságimásolatokat a virtuális gép hello régió.</span><span class="sxs-lookup"><span data-stu-id="e97c3-162">Keep hello transaction log backups in that region in hello VM.</span></span>

<span data-ttu-id="e97c3-163">Vészhelyzet esetén, miután hello vész-helyreállítási profil egy tényleges kiszolgálón van telepítve, másolja hello tranzakciónapló biztonsági mentései a hello VM toohello SAP HANA Azure (nagy példányokat), amely jelenleg hello elsődleges kiszolgálója hello vész-helyreállítási régióban, és állítania.</span><span class="sxs-lookup"><span data-stu-id="e97c3-163">In case of disaster, after hello disaster-recovery profile has been deployed on an actual server, copy hello transaction log backups from hello VM toohello SAP HANA on Azure (large instances) that is now hello primary server in hello disaster-recovery region, and restore those backups.</span></span> <span data-ttu-id="e97c3-164">A helyreállítás nem lehetséges, mert hello HANA hello vész-helyreállítási lemezeken állapota, amely a HANA pillanatfelvétel.</span><span class="sxs-lookup"><span data-stu-id="e97c3-164">This recovery is possible because hello state of HANA on hello disaster-recovery disks is that of a HANA snapshot.</span></span> <span data-ttu-id="e97c3-165">Ez a tranzakciónapló biztonsági mentései további visszaállítását hello eltolási pontját.</span><span class="sxs-lookup"><span data-stu-id="e97c3-165">This is hello offset point for further restorations of transaction log backups.</span></span>

## <a name="backup-and-restore"></a><span data-ttu-id="e97c3-166">Biztonsági mentés és visszaállítás</span><span class="sxs-lookup"><span data-stu-id="e97c3-166">Backup and restore</span></span>

<span data-ttu-id="e97c3-167">Hello egyik legfontosabb szempontja toooperating adatbázisok közül az egyik van annak biztosítása, hello adatbázis védelme a különböző katasztrofális esemény.</span><span class="sxs-lookup"><span data-stu-id="e97c3-167">One of hello most important aspects toooperating databases is making sure hello database can be protected from various catastrophic events.</span></span> <span data-ttu-id="e97c3-168">Ezek az események természeti katasztrófa toosimple felhasználói hibák bármi más által is okozhat.</span><span class="sxs-lookup"><span data-stu-id="e97c3-168">These events can be caused by anything from natural disasters toosimple user errors.</span></span>

<span data-ttu-id="e97c3-169">Egy adatbázis biztonsági mentéséhez, a hello képességét toorestore azt tooany pont időben (például egy, a kritikus fontosságú adatok törlése előtt), lehetővé teszi, hogy a visszaállítási tooa állapot, amely a lehető toohello megszokottól hello megszakítása előtt zárja be van.</span><span class="sxs-lookup"><span data-stu-id="e97c3-169">Backing up a database, with hello ability toorestore it tooany point in time (such as before somebody deleted critical data), allows restoration tooa state that is as close as possible toohello way it was before hello disruption occurred.</span></span>

<span data-ttu-id="e97c3-170">Kétféle típusú biztonsági mentést kell végezni a legjobb eredmények elérése érdekében:</span><span class="sxs-lookup"><span data-stu-id="e97c3-170">Two types of backups must be performed for best results:</span></span>

- <span data-ttu-id="e97c3-171">Adatbázisok biztonsági mentése</span><span class="sxs-lookup"><span data-stu-id="e97c3-171">Database backups</span></span>
- <span data-ttu-id="e97c3-172">Tranzakciónapló biztonsági mentései</span><span class="sxs-lookup"><span data-stu-id="e97c3-172">Transaction log backups</span></span>

<span data-ttu-id="e97c3-173">Továbbá toofull adatbázis a biztonsági másolatok az alkalmazás szintjén, akkor lehet alaposabb még által biztonsági másolatok tárolási pillanatképekkel.</span><span class="sxs-lookup"><span data-stu-id="e97c3-173">In addition toofull database backups performed at an application-level, you can be even more thorough by performing backups with storage snapshots.</span></span> <span data-ttu-id="e97c3-174">Napló biztonsági mentést végez fontos is hello adatbázis (és tooempty hello naplók már véglegesített tranzakciók) visszaállítása.</span><span class="sxs-lookup"><span data-stu-id="e97c3-174">Performing log backups is also important for restoring hello database (and tooempty hello logs from already committed transactions).</span></span>

<span data-ttu-id="e97c3-175">SAP HANA Azure (nagy példányok) két biztonsági mentési és helyreállítási lehetőségeket kínálja:</span><span class="sxs-lookup"><span data-stu-id="e97c3-175">SAP HANA on Azure (large instances) offers two backup and restore options:</span></span>

- <span data-ttu-id="e97c3-176">Ehhez saját kezűleg (DIY).</span><span class="sxs-lookup"><span data-stu-id="e97c3-176">Do it yourself (DIY).</span></span> <span data-ttu-id="e97c3-177">Miután tooensure elég szabad lemezterület kiszámításához, hajtsa végre a teljes adatbázis és a napló biztonsági mentések lemez biztonsági mentési módszerek (toothose lemezek) használatával.</span><span class="sxs-lookup"><span data-stu-id="e97c3-177">After you calculate tooensure enough disk space, perform full database and log backups by using disk backup methods (toothose disks).</span></span> <span data-ttu-id="e97c3-178">Az idő múlásával hello biztonsági mentések másolt tooan Azure storage-fiók (Miután beállította az Azure-alapú fájlkiszolgálón gyakorlatilag korlátlan tárolóval), vagy használhat egy Azure Backup-tárolóban, vagy a cold az Azure storage.</span><span class="sxs-lookup"><span data-stu-id="e97c3-178">Over time, hello backups are copied tooan Azure storage account (after you set up an Azure-based file server with virtually unlimited storage), or use an Azure Backup vault or Azure cold storage.</span></span> <span data-ttu-id="e97c3-179">Másik lehetőség is toouse egy külső data protection eszközt, például a Commvault, miután bekerültek toostore hello biztonsági mentések másolt tooa tárfiók.</span><span class="sxs-lookup"><span data-stu-id="e97c3-179">Another option is toouse a third-party data protection tool, such as Commvault, toostore hello backups after they are copied tooa storage account.</span></span> <span data-ttu-id="e97c3-180">lehet, hogy hello DIY biztonsági mentési beállításának is szükséges, amelyet a toobe előírásainak és naplózási célokra hosszabb ideig tárolt adatokat.</span><span class="sxs-lookup"><span data-stu-id="e97c3-180">hello DIY backup option might also be necessary for data that needs toobe stored for longer periods for compliancy and auditing purposes.</span></span>
- <span data-ttu-id="e97c3-181">Hello biztonságimásolat-készítő és állítsa vissza az SAP HANA Azure (nagy példány) az alapul szolgáló infrastruktúra hello funkciókat biztosít.</span><span class="sxs-lookup"><span data-stu-id="e97c3-181">Use hello backup and restore functionality that hello underlying infrastructure of SAP HANA on Azure (large instances) provides.</span></span> <span data-ttu-id="e97c3-182">Ez a beállítás megfelel hello kell a biztonsági mentésekhez, és manuális biztonsági mentések majdnem elavult (kivéve, ha az adatok biztonsági szükséges megfelelőségi okokból) miatt.</span><span class="sxs-lookup"><span data-stu-id="e97c3-182">This option fulfills hello need for backups, and it makes manual backups nearly obsolete (except where data backups are required for compliance purposes).</span></span> <span data-ttu-id="e97c3-183">Ez a szakasz címek hello részeinek hello biztonsági mentési és működőképes állapotba hozni (nagy példányok) HANA ajánlott.</span><span class="sxs-lookup"><span data-stu-id="e97c3-183">hello rest of this section addresses hello backup and restore functionality that's offered with HANA (large instances).</span></span>

> [!NOTE]
> <span data-ttu-id="e97c3-184">hello pillanatkép technológia hello alapul szolgáló infrastruktúrája HANA (nagy példányok) által használt függőség SAP HANA-pillanatképekkel rendelkezik.</span><span class="sxs-lookup"><span data-stu-id="e97c3-184">hello snapshot technology that is used by hello underlying infrastructure of HANA (large instances) has a dependency on SAP HANA snapshots.</span></span> <span data-ttu-id="e97c3-185">SAP HANA-pillanatképek nem működnek együtt a SAP HANA több-Bérlős adatbázis tárolók.</span><span class="sxs-lookup"><span data-stu-id="e97c3-185">SAP HANA snapshots do not work in conjunction with SAP HANA Multitenant Database Containers.</span></span> <span data-ttu-id="e97c3-186">Ez a biztonsági mentési módszer emiatt nem lehet használt toodeploy SAP HANA több-Bérlős adatbázis tárolók.</span><span class="sxs-lookup"><span data-stu-id="e97c3-186">As a result, this method of backup cannot be used toodeploy SAP HANA Multitenant Database Containers.</span></span>

### <a name="using-storage-snapshots-of-sap-hana-on-azure-large-instances"></a><span data-ttu-id="e97c3-187">(Nagyméretű példányok) Azure storage-pillanatfelvételekkel a SAP HANA használatával</span><span class="sxs-lookup"><span data-stu-id="e97c3-187">Using storage snapshots of SAP HANA on Azure (large instances)</span></span>

<span data-ttu-id="e97c3-188">hello tároló-infrastruktúrájának alapjául szolgáló SAP HANA Azure (nagy példányok) támogatja a kötetek tárolási pillanatképe hello fogalmát.</span><span class="sxs-lookup"><span data-stu-id="e97c3-188">hello storage infrastructure underlying SAP HANA on Azure (large instances) supports hello notion of a storage snapshot of volumes.</span></span> <span data-ttu-id="e97c3-189">Biztonsági mentési és visszaállítási egy adott kötet használata támogatott, a következő szempontok hello:</span><span class="sxs-lookup"><span data-stu-id="e97c3-189">Both backup and restoration of a particular volume are supported, with hello following considerations:</span></span>

- <span data-ttu-id="e97c3-190">Adatbázis biztonsági mentése helyett tárolási kötet pillanatfelvételeket készít a gyakran.</span><span class="sxs-lookup"><span data-stu-id="e97c3-190">Instead of database backups, storage volume snapshots are taken on a frequent basis.</span></span>
- <span data-ttu-id="e97c3-191">hello tárolási pillanatkép kezdeményez egy SAP HANA-pillanatkép, mielőtt végrehajtja a hello tárolási pillanatkép.</span><span class="sxs-lookup"><span data-stu-id="e97c3-191">hello storage snapshot initiates an SAP HANA snapshot before it executes hello storage snapshot.</span></span> <span data-ttu-id="e97c3-192">Az SAP HANA-pillanatkép hello tárolási pillanatkép helyreállítása után az hello telepítő pont a végleges napló visszaállítását.</span><span class="sxs-lookup"><span data-stu-id="e97c3-192">This SAP HANA snapshot is hello setup point for eventual log restorations after recovery of hello storage snapshot.</span></span>
- <span data-ttu-id="e97c3-193">Hol hello tárolási pillanatkép sikeresen végre hello ponton hello SAP HANA pillanatkép törlését.</span><span class="sxs-lookup"><span data-stu-id="e97c3-193">At hello point where hello storage snapshot is executed successfully, hello SAP HANA snapshot is deleted.</span></span>
- <span data-ttu-id="e97c3-194">Napló biztonsági mentése gyakran és hello napló biztonsági mentési köteten, vagy az Azure-ban tárolja.</span><span class="sxs-lookup"><span data-stu-id="e97c3-194">Log backups are taken frequently and stored in hello log backup volume or in Azure.</span></span>
- <span data-ttu-id="e97c3-195">Ha hello adatbázis visszaállítására tooa egyes terjesztésipont-időben, a kérelem tooMicrosoft Azure támogatási szolgálatának (éles kimaradásáról) vagy SAP HANA az Azure szolgáltatásfelügyelet toorestore tooa bizonyos tárolási pillanatkép (például egy tervezett visszaállítás védőfal rendszer tooits eredeti állapot).</span><span class="sxs-lookup"><span data-stu-id="e97c3-195">If hello database must be restored tooa certain point in time, a request is made tooMicrosoft Azure Support (production outage) or SAP HANA on Azure Service Management toorestore tooa certain storage snapshot (for example, a planned restoration of a sandbox system tooits original state).</span></span>
- <span data-ttu-id="e97c3-196">hello SAP HANA pillanatkép hello tárolási pillanatfelvétel része egy eltolási pontot az alkalmazása a naplóalapú biztonsági mentések végrehajtása és hello tárolási pillanatkép készítése tárolja.</span><span class="sxs-lookup"><span data-stu-id="e97c3-196">hello SAP HANA snapshot that's included in hello storage snapshot is an offset point for applying log backups that have been executed and stored after hello storage snapshot was taken.</span></span>
- <span data-ttu-id="e97c3-197">A napló biztonsági mentése készít a toorestore hello adatbázis hátsó tooa egyes időpontra történő.</span><span class="sxs-lookup"><span data-stu-id="e97c3-197">These log backups are taken toorestore hello database back tooa certain point in time.</span></span>

<span data-ttu-id="e97c3-198">Adja meg hello biztonsági mentés\_nevét a következő kötetek hello pillanatképet készít:</span><span class="sxs-lookup"><span data-stu-id="e97c3-198">Specifying hello backup\_name creates a snapshot of hello following volumes:</span></span>

- <span data-ttu-id="e97c3-199">Hana/adatok</span><span class="sxs-lookup"><span data-stu-id="e97c3-199">hana/data</span></span>
- <span data-ttu-id="e97c3-200">Hana/napló</span><span class="sxs-lookup"><span data-stu-id="e97c3-200">hana/log</span></span>
- <span data-ttu-id="e97c3-201">Hana/log\_(csatlakoztatott tartalékként hana/naplóba) biztonsági mentése</span><span class="sxs-lookup"><span data-stu-id="e97c3-201">hana/log\_backup (mounted as backup into hana/log)</span></span>
- <span data-ttu-id="e97c3-202">Hana/megosztott</span><span class="sxs-lookup"><span data-stu-id="e97c3-202">hana/shared</span></span>

### <a name="storage-snapshot-considerations"></a><span data-ttu-id="e97c3-203">Tárolási pillanatkép kapcsolatos szempontok</span><span class="sxs-lookup"><span data-stu-id="e97c3-203">Storage snapshot considerations</span></span>

>[!NOTE]
><span data-ttu-id="e97c3-204">A pillanatképek tárolási _nem_ megadott díjmentesen, mert további tárhelyet kell kiosztani.</span><span class="sxs-lookup"><span data-stu-id="e97c3-204">Storage snapshots are _not_ provided free of charge, because additional storage space must be allocated.</span></span>

<span data-ttu-id="e97c3-205">SAP Hana (nagy példányok) Azure storage-pillanatfelvételekkel hello adott idejéről a következők:</span><span class="sxs-lookup"><span data-stu-id="e97c3-205">hello specific mechanics of storage snapshots for SAP HANA on Azure (large instances) include:</span></span>

- <span data-ttu-id="e97c3-206">Egy bizonyos tárolási pillanatkép (pontján hello mikor szükséges idő) igényel, csekély tárolási.</span><span class="sxs-lookup"><span data-stu-id="e97c3-206">A specific storage snapshot (at hello point in time when it is taken) consumes very little storage.</span></span>
- <span data-ttu-id="e97c3-207">Adatok a tartalmi változások és a fájlok módosulnak hello tárolási köteten SAP HANA-adatok tartalma hello hello pillanatkép kell toostore hello eredeti tartalom blokkolása.</span><span class="sxs-lookup"><span data-stu-id="e97c3-207">As data content changes and hello content in SAP HANA data files change on hello storage volume, hello snapshot needs toostore hello original block content.</span></span>
- <span data-ttu-id="e97c3-208">hello tárolási pillanatkép mérete növekszik.</span><span class="sxs-lookup"><span data-stu-id="e97c3-208">hello storage snapshot increases in size.</span></span> <span data-ttu-id="e97c3-209">hello hosszabb hello készült pillanatkép, hello nagyobb hello tárolási pillanatkép válik.</span><span class="sxs-lookup"><span data-stu-id="e97c3-209">hello longer hello snapshot exists, hello larger hello storage snapshot becomes.</span></span>
- <span data-ttu-id="e97c3-210">További módosítások toohello SAP HANA-adatbázis kötetén hello hello élettartama a tárolási pillanatfelvétel, hello nagyobb hello lemezterület-felhasználást hello tárolási pillanatkép válik.</span><span class="sxs-lookup"><span data-stu-id="e97c3-210">hello more changes made toohello SAP HANA database volume over hello lifetime of a storage snapshot, hello larger hello space consumption of hello storage snapshot becomes.</span></span>

<span data-ttu-id="e97c3-211">Az Azure (nagy példányok) SAP HANA hello SAP HANA adatainak és naplókönyvtárainak kötet mérete rögzített tartalmaz.</span><span class="sxs-lookup"><span data-stu-id="e97c3-211">SAP HANA on Azure (large instances) comes with fixed volume sizes for hello SAP HANA data and log volume.</span></span> <span data-ttu-id="e97c3-212">Pillanatképek készítése a köteteket végrehajtása eats a kötet térbe kerülnek, hogy a felelősség tooschedule storage-pillanatfelvételekkel (belül hello SAP HANA Azure [nagy példányok] folyamat).</span><span class="sxs-lookup"><span data-stu-id="e97c3-212">Performing snapshots of those volumes eats into your volume space, so it is your responsibility tooschedule storage snapshots (within hello SAP HANA on Azure [large instances] process).</span></span>

<span data-ttu-id="e97c3-213">hello alábbi szakaszok információt nyújtanak a ezeket a pillanatképeket, beleértve az általános ajánlásokat végrehajtásához.</span><span class="sxs-lookup"><span data-stu-id="e97c3-213">hello following sections provide information for performing these snapshots, including general recommendations:</span></span>

- <span data-ttu-id="e97c3-214">Bár a hello hardver kötetenként 255 pillanatképek képes elviselni, erősen ajánlott licencjelentéseket is e szám alá.</span><span class="sxs-lookup"><span data-stu-id="e97c3-214">Though hello hardware can sustain 255 snapshots per volume, we highly recommend that you stay well below this number.</span></span>
- <span data-ttu-id="e97c3-215">Mielőtt elvégezné a storage-pillanatfelvételekkel, figyeléséhez és nyomon követésére szabad terület.</span><span class="sxs-lookup"><span data-stu-id="e97c3-215">Before you perform storage snapshots, monitor and keep track of free space.</span></span>
- <span data-ttu-id="e97c3-216">Hello kevesebb a szabad lemezterület alapján storage-pillanatfelvételekkel.</span><span class="sxs-lookup"><span data-stu-id="e97c3-216">Lower hello number of storage snapshots based on free space.</span></span> <span data-ttu-id="e97c3-217">Előfordulhat, hogy mindig a pillanatképek számát toolower hello, vagy meg kell tooextend hello kötetek.</span><span class="sxs-lookup"><span data-stu-id="e97c3-217">You might need toolower hello number of snapshots that you keep, or you might need tooextend hello volumes.</span></span> <span data-ttu-id="e97c3-218">(Sorba rendezheti további tárhely 1 TB méretű egységekbe.)</span><span class="sxs-lookup"><span data-stu-id="e97c3-218">(You can order additional storage in 1-TB units.)</span></span>
- <span data-ttu-id="e97c3-219">Során tevékenységek, például SAP HANA rendszer áttelepítési eszközökről (R3load, vagy SAP HANA-adatbázisok visszaállítása biztonsági másolatból) adatok áthelyezése Határozottan javasoljuk, hogy nem elvégezhető a storage-pillanatfelvételekkel.</span><span class="sxs-lookup"><span data-stu-id="e97c3-219">During activities such as moving data into SAP HANA with system migration tools (with R3load, or by restoring SAP HANA databases from backups), we highly recommended that you not perform any storage snapshots.</span></span> <span data-ttu-id="e97c3-220">(Ha a rendszer áttelepítés egy új SAP HANA-rendszeren kell végrehajtania, storage-pillanatfelvételekkel nem kellene végre toobe.)</span><span class="sxs-lookup"><span data-stu-id="e97c3-220">(If a system migration is being done on a new SAP HANA system, storage snapshots would not need toobe performed.)</span></span>
- <span data-ttu-id="e97c3-221">SAP HANA-táblák nagyobb átszervezések során storage-pillanatfelvételekkel kell elkerülhető, ha lehetséges.</span><span class="sxs-lookup"><span data-stu-id="e97c3-221">During larger reorganizations of SAP HANA tables, storage snapshots should be avoided if possible.</span></span>
- <span data-ttu-id="e97c3-222">Tárolási pillanatképei egy SAP HANA Azure (nagy példányok) előfeltétel tooengaging hello vész-helyreállítási képességeit.</span><span class="sxs-lookup"><span data-stu-id="e97c3-222">Storage snapshots are a prerequisite tooengaging hello disaster-recovery capabilities of SAP HANA on Azure (large instances).</span></span>

### <a name="setting-up-storage-snapshots"></a><span data-ttu-id="e97c3-223">Storage-pillanatfelvételekkel beállítása</span><span class="sxs-lookup"><span data-stu-id="e97c3-223">Setting up storage snapshots</span></span>

1. <span data-ttu-id="e97c3-224">Győződjön meg arról, hogy Perl hello Linux operációs rendszer hello HANA (nagy példányok) kiszolgálóra van telepítve.</span><span class="sxs-lookup"><span data-stu-id="e97c3-224">Make sure that Perl is installed in hello Linux operating system on hello HANA (large instances) server.</span></span>
2. <span data-ttu-id="e97c3-225">Módosítsa/etc/ssh/ssh\_config tooadd hello sor _Mac számítógépekhez hmac-sha1_.</span><span class="sxs-lookup"><span data-stu-id="e97c3-225">Modify /etc/ssh/ssh\_config tooadd hello line _MACs hmac-sha1_.</span></span>
3. <span data-ttu-id="e97c3-226">Hozzon létre egy SAP HANA-biztonsági mentés felhasználói fiókot hello fő csomóponton minden SAP HANA-példány (ha van ilyen) futtatja.</span><span class="sxs-lookup"><span data-stu-id="e97c3-226">Create an SAP HANA backup user account on hello master node for each SAP HANA instance you are running (if applicable).</span></span>
4. <span data-ttu-id="e97c3-227">hello SAP HANA HDB ügyfél telepítenie kell minden olyan kiszolgálón SAP HANA (nagy példány).</span><span class="sxs-lookup"><span data-stu-id="e97c3-227">hello SAP HANA HDB client must be installed on all SAP HANA (large instances) servers.</span></span>
5. <span data-ttu-id="e97c3-228">Kiszolgálón hello első SAP HANA (nagy példányok) minden egyes régió egy nyilvános kulcsot kell létrehozni az alapul szolgáló tárolási infrastruktúra, amely szabályozza a pillanatkép létrehozása tooaccess hello.</span><span class="sxs-lookup"><span data-stu-id="e97c3-228">On hello first SAP HANA (large instances) server of each region, a public key must be created tooaccess hello underlying storage infrastructure that controls snapshot creation.</span></span>
6. <span data-ttu-id="e97c3-229">Másolja az azure hello parancsfájlt\_hana\_/parancsfájlok toohello helyéről backup.pl **hdbsql** a hello SAP HANA-telepítés.</span><span class="sxs-lookup"><span data-stu-id="e97c3-229">Copy hello script azure\_hana\_backup.pl from /scripts toohello location of **hdbsql** of hello SAP HANA installation.</span></span>
7. <span data-ttu-id="e97c3-230">Másolás hello HANABackupDetails.txt fájlként/parancsfájlok toohello azonos módon hello Perl parancsfájl helyét.</span><span class="sxs-lookup"><span data-stu-id="e97c3-230">Copy hello HANABackupDetails.txt file from /scripts toohello same location as hello Perl script.</span></span>
8. <span data-ttu-id="e97c3-231">Hello HANABackupDetails.txt fájl a megfelelő hello megfelelő felhasználói specifikációk módosításához.</span><span class="sxs-lookup"><span data-stu-id="e97c3-231">Modify hello HANABackupDetails.txt file as necessary for hello appropriate customer specifications.</span></span>

### <a name="step-1-install-sap-hana-hdbclient"></a><span data-ttu-id="e97c3-232">1. lépés: Az SAP HANA HDBClient telepítése</span><span class="sxs-lookup"><span data-stu-id="e97c3-232">Step 1: Install SAP HANA HDBClient</span></span>

<span data-ttu-id="e97c3-233">hello Azure (nagy példányok) SAP HANA telepített Linux hello mappákat tartalmazza, és a parancsfájlok szükséges tooexecute SAP HANA storage-pillanatfelvételekkel biztonsági mentési és vész-helyreállítási célokra.</span><span class="sxs-lookup"><span data-stu-id="e97c3-233">hello Linux installed on SAP HANA on Azure (large instances) includes hello folders and scripts necessary tooexecute SAP HANA storage snapshots for backup and disaster-recovery purposes.</span></span> <span data-ttu-id="e97c3-234">Azonban célszerű a felelősség tooinstall SAP HANA HDBclient, SAP HANA telepítése.</span><span class="sxs-lookup"><span data-stu-id="e97c3-234">However, it is your responsibility tooinstall SAP HANA HDBclient while you are installing SAP HANA.</span></span> <span data-ttu-id="e97c3-235">(A Microsoft telepíti a hello HDBclient sem SAP HANA.)</span><span class="sxs-lookup"><span data-stu-id="e97c3-235">(Microsoft installs neither hello HDBclient nor SAP HANA.)</span></span>

### <a name="step-2-change-etcsshsshconfig"></a><span data-ttu-id="e97c3-236">2. lépés: Módosítsa/etc/ssh/ssh\_config</span><span class="sxs-lookup"><span data-stu-id="e97c3-236">Step 2: Change /etc/ssh/ssh\_config</span></span>

<span data-ttu-id="e97c3-237">Módosítsa/etc/ssh/ssh\_hozzáadásával config _Mac számítógépekhez hmac-sha1_ sor itt látható módon:</span><span class="sxs-lookup"><span data-stu-id="e97c3-237">Change /etc/ssh/ssh\_config by adding _MACs hmac-sha1_ line as shown here:</span></span>
```
#   RhostsRSAAuthentication no
#   RSAAuthentication yes
#   PasswordAuthentication yes
#   HostbasedAuthentication no
#   GSSAPIAuthentication no
#   GSSAPIDelegateCredentials no
#   GSSAPIKeyExchange no
#   GSSAPITrustDNS no
#   BatchMode no
#   CheckHostIP yes
#   AddressFamily any
#   ConnectTimeout 0
#   StrictHostKeyChecking ask
#   IdentityFile ~/.ssh/identity
#   IdentityFile ~/.ssh/id_rsa
#   IdentityFile ~/.ssh/id_dsa
#   Port 22
Protocol 2
#   Cipher 3des
#   Ciphers aes128-ctr,aes192-ctr,aes256-ctr,arcfour256,arcfour128,aes128-cbc,3des-cbc
#   MACs hmac-md5,hmac-sha1,umac-64@openssh.com,hmac-ripemd160
MACs hmac-sha1
#   EscapeChar ~
#   Tunnel no
#   TunnelDevice any:any
#   PermitLocalCommand no
#   VisualHostKey no
#   ProxyCommand ssh -q -W %h:%p gateway.example.com
```

### <a name="step-3-create-a-public-key"></a><span data-ttu-id="e97c3-238">3. lépés:, Hozzon létre egy nyilvános kulcsot</span><span class="sxs-lookup"><span data-stu-id="e97c3-238">Step 3: Create a public key</span></span>

<span data-ttu-id="e97c3-239">A hello első SAP HANA minden Azure-régió, az Azure (nagy példányok) kiszolgálón hozza létre a használt nyilvános kulcsú toobe tooaccess hello tároló-infrastruktúra pillanatképeket hozhat létre.</span><span class="sxs-lookup"><span data-stu-id="e97c3-239">On hello first SAP HANA on Azure (large instances) server in each Azure region, create a public key toobe used tooaccess hello storage infrastructure so that you can create snapshots.</span></span> <span data-ttu-id="e97c3-240">hello nyilvános kulcs ellenőrzi, hogy a jelszó nem szükséges toosign toohello Storage és jelszó hitelesítő adatok nem állnak fenn.</span><span class="sxs-lookup"><span data-stu-id="e97c3-240">hello public key ensures that a password is not required toosign in toohello storage and that password credentials are not maintained.</span></span> <span data-ttu-id="e97c3-241">A Linux hello SAP HANA (nagy példányok) kiszolgálón hajtható végre a következő parancs toogenerate hello nyilvános kulcs hello:</span><span class="sxs-lookup"><span data-stu-id="e97c3-241">In Linux on hello SAP HANA (large instances) server, execute hello following command toogenerate hello public key:</span></span>
```
  ssh-keygen –t dsa –b 1024
```
<span data-ttu-id="e97c3-242">Új helye _/root/.ssh/id hello\_dsa.pub.</span><span class="sxs-lookup"><span data-stu-id="e97c3-242">hello new location is _/root/.ssh/id\_dsa.pub.</span></span> <span data-ttu-id="e97c3-243">Ne adjon meg egy tényleges jelszót, vagy pedig fogja szükséges tooenter hello jelszavát minden egyes bejelentkezéskor.</span><span class="sxs-lookup"><span data-stu-id="e97c3-243">Do not enter an actual passphrase, or else you will be required tooenter hello passphrase each time you sign in.</span></span> <span data-ttu-id="e97c3-244">Ehelyett nyomja le az **Enter** kétszer tooremove hello adja meg a jelszót követelmény való bejelentkezéshez.</span><span class="sxs-lookup"><span data-stu-id="e97c3-244">Instead, press **Enter** twice tooremove hello enter passphrase requirement for signing in.</span></span>

<span data-ttu-id="e97c3-245">Ellenőrizze, hogy hello nyilvános kulcs javította mappák too/root/.ssh/ módosítása, illetve majd végrehajtása hello által várt toomake **ls** parancsot.</span><span class="sxs-lookup"><span data-stu-id="e97c3-245">Check toomake sure that hello public key was corrected as expected by changing folders too/root/.ssh/ and then executing hello **ls** command.</span></span> <span data-ttu-id="e97c3-246">Ha hello kulcs található, másolja azt hello a következő parancs futtatásával:</span><span class="sxs-lookup"><span data-stu-id="e97c3-246">If hello key is present, you can copy it by running hello following command:</span></span>

![Nyilvános kulcs a következő parancs futtatásával másolódik](./media/hana-overview-high-availability-disaster-recovery/image2-public-key.png)

<span data-ttu-id="e97c3-248">Ezen a ponton lépjen kapcsolatba az Azure szolgáltatásfelügyelet SAP HANA, és adja meg a hello kulcs.</span><span class="sxs-lookup"><span data-stu-id="e97c3-248">At this point, contact SAP HANA on Azure Service Management and provide hello key.</span></span> <span data-ttu-id="e97c3-249">hello képviselőjével használ hello nyilvános kulcs tooregister legyen az alapul szolgáló tárolási infrastruktúra hello.</span><span class="sxs-lookup"><span data-stu-id="e97c3-249">hello service representative uses hello public key tooregister it in hello underlying storage infrastructure.</span></span>

### <a name="step-4-create-an-sap-hana-user-account"></a><span data-ttu-id="e97c3-250">4. lépés: Egy SAP HANA-felhasználói fiók létrehozása</span><span class="sxs-lookup"><span data-stu-id="e97c3-250">Step 4: Create an SAP HANA user account</span></span>

<span data-ttu-id="e97c3-251">Hozzon létre egy SAP HANA-felhasználói fiókot SAP HANA Studio biztonsági mentés céljából.</span><span class="sxs-lookup"><span data-stu-id="e97c3-251">Create an SAP HANA user account within SAP HANA Studio for backup purposes.</span></span> <span data-ttu-id="e97c3-252">Ennek a fióknak rendelkeznie kell a következő jogosultságokkal hello: _biztonsági mentési rendszergazda_ és _katalógus olvasási_.</span><span class="sxs-lookup"><span data-stu-id="e97c3-252">This account must have hello following privileges: _Backup Admin_ and _Catalog Read_.</span></span> <span data-ttu-id="e97c3-253">Ebben a példában hello felhasználónév SCADMIN jön létre.</span><span class="sxs-lookup"><span data-stu-id="e97c3-253">In this example, hello username SCADMIN is created.</span></span>

![A felhasználó létrehozása a HANA Studióban](./media/hana-overview-high-availability-disaster-recovery/image3-creating-user.png)

### <a name="step-5-authorize-hello-sap-hana-user-account"></a><span data-ttu-id="e97c3-255">5. lépés: Engedélyezze hello SAP HANA-felhasználói fiók</span><span class="sxs-lookup"><span data-stu-id="e97c3-255">Step 5: Authorize hello SAP HANA user account</span></span>

<span data-ttu-id="e97c3-256">Engedélyezi a hello SAP HANA-felhasználói fiókot (toobe anélkül, hogy az engedélyezési, minden alkalommal, amikor hello parancsfájl futtatása hello parancsfájlok által használt).</span><span class="sxs-lookup"><span data-stu-id="e97c3-256">Authorize hello SAP HANA user account (toobe used by hello scripts without requiring authorization every time hello script is run).</span></span> <span data-ttu-id="e97c3-257">hello SAP HANA-parancs `hdbuserstore` lehetővé teszi, hogy egy SAP HANA felhasználói kulcs, legalább egy SAP HANA-csomópontok tárolt hello létrehozását.</span><span class="sxs-lookup"><span data-stu-id="e97c3-257">hello SAP HANA command `hdbuserstore` allows hello creation of an SAP HANA user key, which is stored on one or more SAP HANA nodes.</span></span> <span data-ttu-id="e97c3-258">hello felhasználói kulcs is lehetővé teszi, hogy hello felhasználói tooaccess SAP HANA anélkül, hogy a folyamat, amelyet később scripting hello belül toomanage jelszavakat.</span><span class="sxs-lookup"><span data-stu-id="e97c3-258">hello user key also allows hello user tooaccess SAP HANA without having toomanage passwords from within hello scripting process that's discussed later.</span></span>

>[!IMPORTANT]
><span data-ttu-id="e97c3-259">Futtatási hello parancsot következő `_root_`.</span><span class="sxs-lookup"><span data-stu-id="e97c3-259">Run hello following command as `_root_`.</span></span> <span data-ttu-id="e97c3-260">Ellenkező esetben hello parancsprogramot nem fog megfelelően működni.</span><span class="sxs-lookup"><span data-stu-id="e97c3-260">Otherwise, hello script cannot work properly.</span></span>

<span data-ttu-id="e97c3-261">Adja meg a hello `hdbuserstore` parancsot a következőképpen:</span><span class="sxs-lookup"><span data-stu-id="e97c3-261">Enter hello `hdbuserstore` command as follows:</span></span>

![Adja meg a hello hdbuserstore parancs](./media/hana-overview-high-availability-disaster-recovery/image4-hdbuserstore-command.png)

<span data-ttu-id="e97c3-263">A következő példában, ahol hello felhasználói SCADMIN01 pedig hello állomásnév lhanad01, hello hello parancs a következő:</span><span class="sxs-lookup"><span data-stu-id="e97c3-263">In hello following example, where hello user is SCADMIN01 and hello hostname is lhanad01, hello command is:</span></span>
```
hdbuserstore set SCADMIN01 lhanad01:30115 <backup username> <password>
```
<span data-ttu-id="e97c3-264">Kezelheti az összes parancsfájl-kezelési kibővített HANA példányok egyetlen kiszolgálóról.</span><span class="sxs-lookup"><span data-stu-id="e97c3-264">Manage all scripting from a single server for scale-out HANA instances.</span></span> <span data-ttu-id="e97c3-265">Ebben a példában hello SAP HANA-kulcs SCADMIN01 módosítani kell úgy, hogy a kapcsolódó toohello kulcs hello gazdagéphez tükrözi minden állomás számára.</span><span class="sxs-lookup"><span data-stu-id="e97c3-265">In this example, hello SAP HANA key SCADMIN01 must be altered for each host in a way that reflects hello host that is related toohello key.</span></span> <span data-ttu-id="e97c3-266">Ez azt jelenti, hogy hello SAP HANA biztonsági mentési fiók módosul hello példány számú hello HANA DB **lhanad**.</span><span class="sxs-lookup"><span data-stu-id="e97c3-266">That is, hello SAP HANA backup account is amended with hello instance number of hello HANA DB, **lhanad**.</span></span> <span data-ttu-id="e97c3-267">hello kulcs rendszergazdai jogosultsággal kell rendelkeznie a hello gazdagépen hozzá van rendelve, és biztonsági mentési felhasználó hello kibővített kell hozzáférési jogok tooall SAP HANA-példányok.</span><span class="sxs-lookup"><span data-stu-id="e97c3-267">hello key must have administrative privileges on hello host it is assigned to, and hello backup user for scale-out must have access rights tooall SAP HANA instances.</span></span>
```
hdbuserstore set SCADMIN01 lhanad:30015 SCADMIN <password>
hdbuserstore set SCADMIN02 lhanad:30115 SCADMIN <password>
hdbuserstore set SCADMIN03 lhanad:30215 SCADMIN <password>
```

### <a name="step-6-copy-items-from-hello-scripts-folder"></a><span data-ttu-id="e97c3-268">6. lépés: Hello/parancsfájlok mappából elemek másolása</span><span class="sxs-lookup"><span data-stu-id="e97c3-268">Step 6: Copy items from hello /scripts folder</span></span>

<span data-ttu-id="e97c3-269">Másolás hello alábbi elemek a hello/mappát (hello arany lemezképen hello telepítés része) toohello munkakönyvtár megadása a parancsfájlok **hdbsql**.</span><span class="sxs-lookup"><span data-stu-id="e97c3-269">Copy hello following items from hello /scripts folder (included on hello gold image of hello installation) toohello working directory for **hdbsql**.</span></span> <span data-ttu-id="e97c3-270">Ez a könyvtár aktuális HANA telepítés esetén /hana/shared/D01/exe/linuxx86\_64/hdb.</span><span class="sxs-lookup"><span data-stu-id="e97c3-270">For current HANA installations, this directory is /hana/shared/D01/exe/linuxx86\_64/hdb.</span></span>
```
azure\_hana\_backup.pl
testHANAConnection.pl
testStorageSnapshotConnection.pl
removeTestStorageSnapshot.pl
HANABackupCustomerDetails.txt
```
<span data-ttu-id="e97c3-271">Ha kibővített futnak a következő elemek hello vagy OLAP másolja:</span><span class="sxs-lookup"><span data-stu-id="e97c3-271">Copy hello following items if they are running scale-out or OLAP:</span></span>
```
azure\_hana\_backup\_bw.pl
testHANAConnectionBW.pl
testStorageSnapshotConnectionBW.pl
removeTestStorageSnapshotBW.pl
HANABackupCustomerDetailsBW.txt
```
<span data-ttu-id="e97c3-272">hello HANABackupCustomerDetails.txt fájl méretezett telepítéshez az alábbiak szerint módosítható.</span><span class="sxs-lookup"><span data-stu-id="e97c3-272">hello HANABackupCustomerDetails.txt file is modifiable as follows for a scale-up deployment.</span></span> <span data-ttu-id="e97c3-273">Hello storage-pillanatfelvételekkel futó hello parancsfájl hello vezérlő és a konfigurációs fájlt is.</span><span class="sxs-lookup"><span data-stu-id="e97c3-273">It is hello control and configuration file for hello script that runs hello storage snapshots.</span></span> <span data-ttu-id="e97c3-274">Hello kell kapott _tárolási biztonsági másolat neve_ és _tárolási IP-cím_ az SAP HANA az Azure szolgáltatásfelügyelet, ha a példányok üzembe helyezése.</span><span class="sxs-lookup"><span data-stu-id="e97c3-274">You should have received hello _Storage Backup Name_ and _Storage IP Address_ from SAP HANA on Azure Service Management when your instances were deployed.</span></span> <span data-ttu-id="e97c3-275">Nem módosítható hello feladatütemezési, rendezés, vagy térköz bármely hello változók vagy hello parancsfájl nem működik megfelelően.</span><span class="sxs-lookup"><span data-stu-id="e97c3-275">You cannot modify hello sequence, ordering, or spacing of any of hello variables, or hello script does not run properly.</span></span>

<span data-ttu-id="e97c3-276">Méretezett üzembe helyezés esetén hello konfigurációs fájl alábbihoz hasonlóan fog kinézni:</span><span class="sxs-lookup"><span data-stu-id="e97c3-276">For a scale-up deployment, hello configuration file would look like:</span></span>
```
#Provided by Microsoft Service Management
Storage Backup Name: lhanad01backup
Storage IP Address: 10.250.20.21
#Created by customer using hdbuserstore
HANA Backup Name: SCADMIND01
```
<span data-ttu-id="e97c3-277">Kibővített konfiguráció esetén hello HANABackupCustomerDetailsBW.txt fájl alábbihoz hasonlóan fog kinézni:</span><span class="sxs-lookup"><span data-stu-id="e97c3-277">For a scale-out configuration, hello HANABackupCustomerDetailsBW.txt file would look like:</span></span>
```
#Provided by Microsoft Service Management
Storage Backup Name: lhanad01backup
Storage IP Address: 10.250.20.21
#Node IP addresses, instance numbers, and HANA backup name
#provided by customer.  HANA backup name created using
#hdbuserstore utility.
Node 1 IP Address: 10.254.15.21
Node 1 HANA instance number: 01
Node 1 HANA Backup Name: SCADMIN01
Node 2 IP Address: 10.254.15.22
Node 2 HANA instance number: 02
Node 2 HANA Backup Name: SCADMIN02
Node 3 IP Address: 10.254.15.23
Node 3 HANA instance number: 03
Node 3 HANA Backup Name: SCADMIN03
Node 4 IP Address: 10.254.15.24
Node 4 HANA instance number: 04
Node 4 HANA Backup Name: SCADMIN04
Node 5 IP Address: 10.254.15.25
Node 5 HANA instance number: 05
Node 5 HANA Backup Name: SCADMIN05
Node 6 IP Address: 10.254.15.26
Node 6 HANA instance number: 06
Node 6 HANA Backup Name: SCADMIN06
Node 7 IP Address: 10.254.15.27
Node 7 HANA instance number: 07
Node 7 HANA Backup Name: SCADMIN07
Node 8 IP Address: 10.254.15.28
Node 8 HANA instance number: 08
Node 8 HANA Backup Name: SCADMIN08
```
>[!NOTE]
><span data-ttu-id="e97c3-278">Jelenleg csak az 1. csomóponton részletek hello tényleges HANA tárolási pillanatkép parancsfájl használnak.</span><span class="sxs-lookup"><span data-stu-id="e97c3-278">Currently, only Node 1 details are used in hello actual HANA storage snapshot script.</span></span> <span data-ttu-id="e97c3-279">Azt javasoljuk, hogy minden HANA csomópontról hozzáférés tooor tesztelése úgy, hogy ha valaha is változik hello biztonsági mentési főcsomópont, már gondoskodott róla, hogy bármely másik csomópont végrehajthatók lesznek az 1. csomópont hello részletek módosításával.</span><span class="sxs-lookup"><span data-stu-id="e97c3-279">We recommend that you test access tooor from all HANA nodes so that, if hello master backup node ever changes, you have already ensured that any other node can take its place by modifying hello details in Node 1.</span></span>

<span data-ttu-id="e97c3-280">toocheck hello megfelelő konfigurációk hello konfigurációs fájl vagy a megfelelő csatlakozási toohello HANA példányok, futtassa a következő parancsfájlok hello egyikét:</span><span class="sxs-lookup"><span data-stu-id="e97c3-280">toocheck for hello correct configurations in hello configuration file or proper connectivity toohello HANA instances, run either of hello following scripts:</span></span>
- <span data-ttu-id="e97c3-281">(A SAP munkaterhelés független) méretezett konfigurációt:</span><span class="sxs-lookup"><span data-stu-id="e97c3-281">For a scale-up configuration (independent on SAP workload):</span></span>

 ```
testHANAConnection.pl
```
- <span data-ttu-id="e97c3-282">Kibővített konfigurációt:</span><span class="sxs-lookup"><span data-stu-id="e97c3-282">For a scale-out configuration:</span></span>

 ```
testHANAConnectionBW.pl
```

<span data-ttu-id="e97c3-283">Győződjön meg arról, hogy hello fő HANA példány szükséges tooall HANA kiszolgálók.</span><span class="sxs-lookup"><span data-stu-id="e97c3-283">Ensure that hello master HANA instance has access tooall required HANA servers.</span></span> <span data-ttu-id="e97c3-284">Nincsenek nem paraméterek toohello parancsprogram, de meg kell adnia a megfelelő HANABackupCustomerDetails hello / HANABackupCustomerDetailsBW hello parancsfájl toorun file ennek megfelelően.</span><span class="sxs-lookup"><span data-stu-id="e97c3-284">There are no parameters toohello script, but you must complete hello appropriate HANABackupCustomerDetails/ HANABackupCustomerDetailsBW file for hello script toorun properly.</span></span> <span data-ttu-id="e97c3-285">Csak hello rendszerhéj parancs hibakódok ad vissza, mert nincs lehetőség a hello parancsfájl tooerror-ellenőrzést minden példány.</span><span class="sxs-lookup"><span data-stu-id="e97c3-285">Because only hello shell command error codes are returned, it is not possible for hello script tooerror-check every instance.</span></span> <span data-ttu-id="e97c3-286">Még ha így hello parancsfájl megjegyzést néhány hasznos meg toodouble-ellenőrzéshez.</span><span class="sxs-lookup"><span data-stu-id="e97c3-286">Even so, hello script does provide some helpful comments for you toodouble-check.</span></span>

<span data-ttu-id="e97c3-287">toorun hello parancsfájlt:</span><span class="sxs-lookup"><span data-stu-id="e97c3-287">toorun hello script:</span></span>
```
 ./testHANAConnection.pl
```
 <span data-ttu-id="e97c3-288">Hello parancsprogram sikeresen állapotbeolvasás hello hello HANA példány, ha azt, hogy sikeres volt-e hello HANA kapcsolat üzenetet jelenít meg.</span><span class="sxs-lookup"><span data-stu-id="e97c3-288">If hello script successfully obtains hello status of hello HANA instance, it displays a message that hello HANA connection was successful.</span></span>

<span data-ttu-id="e97c3-289">Pedig a második típus parancsfájl segítségével is toocheck hello fő HANA példány kiszolgáló képes toosign toohello tároló.</span><span class="sxs-lookup"><span data-stu-id="e97c3-289">Additionally, there is a second type of script you can use toocheck hello master HANA instance server's ability toosign in toohello storage.</span></span> <span data-ttu-id="e97c3-290">Hello azure végrehajtása előtt\_hana\_biztonsági mentési (\_bw) .pl parancsfájl, végre kell hajtani a következő parancsfájl hello.</span><span class="sxs-lookup"><span data-stu-id="e97c3-290">Before you execute hello azure\_hana\_backup(\_bw).pl script, you must execute hello next script.</span></span> <span data-ttu-id="e97c3-291">Ha egy kötet pillanatképek nem tartalmaz, a rendszer lehetetlen toodetermine e hello egyszerűen üres, vagy nincs az ssh sikertelen tooobtain hello pillanatkép részleteit.</span><span class="sxs-lookup"><span data-stu-id="e97c3-291">If a volume contains no snapshots, it is impossible toodetermine whether hello volume is simply empty or there is an ssh failure tooobtain hello snapshot details.</span></span> <span data-ttu-id="e97c3-292">Emiatt hello parancsfájl végrehajtása két lépésből áll:</span><span class="sxs-lookup"><span data-stu-id="e97c3-292">For this reason, hello script executes two steps:</span></span>

- <span data-ttu-id="e97c3-293">Azt ellenőrzi, hogy hello tárolási konzol érhető el.</span><span class="sxs-lookup"><span data-stu-id="e97c3-293">It verifies that hello storage console is accessible.</span></span>
- <span data-ttu-id="e97c3-294">Pillanatképet hoz létre-teszt során, vagy helyőrző, minden olyan kötetre HANA példánya.</span><span class="sxs-lookup"><span data-stu-id="e97c3-294">It creates a test, or dummy, snapshot for each volume by HANA instance.</span></span>

<span data-ttu-id="e97c3-295">Emiatt hello HANA példány része, amelynek argumentuma.</span><span class="sxs-lookup"><span data-stu-id="e97c3-295">For this reason, hello HANA instance is included as an argument.</span></span> <span data-ttu-id="e97c3-296">Ebben az esetben nem lehetséges tooprovide hibaellenőrzés hello tárolási kapcsolat, de hello parancsfájl hasznos mutatókat biztosít, ha hello végrehajtása meghiúsul.</span><span class="sxs-lookup"><span data-stu-id="e97c3-296">Again, it is not possible tooprovide error checking for hello storage connection, but hello script provides helpful hints if hello execution fails.</span></span>

<span data-ttu-id="e97c3-297">hello parancsfájl futtatása:</span><span class="sxs-lookup"><span data-stu-id="e97c3-297">hello script is run as:</span></span>
```
 ./testStorageSnapshotConnection.pl <hana instance>
```
<span data-ttu-id="e97c3-298">Vagy fut, mint:</span><span class="sxs-lookup"><span data-stu-id="e97c3-298">Or it is run as:</span></span>
```
./testStorageSnapshotConnectionBW.pl <hana instance>
```
<span data-ttu-id="e97c3-299">hello parancsfájlt is, hogy-e a megfelelő telepített tooyour tárolási bérlő számára, amely hello logikaiegység-számok (LUN), amelyet Ön a tulajdonosa hello kiszolgálópéldányok használnak köré szerveződik, képes toosign üzenetet jelenít meg.</span><span class="sxs-lookup"><span data-stu-id="e97c3-299">hello script also displays a message that you are able toosign in appropriately tooyour deployed storage tenant, which is organized around hello logical unit numbers (LUNs) that are used by hello server instances you own.</span></span>

<span data-ttu-id="e97c3-300">Hello első tárolási pillanatkép-alapú biztonsági mentések végrehajtása előtt futtassa a hello következő parancsfájlok toomake meg róla, hogy a hello konfigurálása helyes.</span><span class="sxs-lookup"><span data-stu-id="e97c3-300">Before you execute hello first storage snapshot-based backups, run hello next scripts toomake sure that hello configuration is correct.</span></span>

<span data-ttu-id="e97c3-301">Miután ezek a parancsfájlok, törölheti hello pillanatképek hajtja végre:</span><span class="sxs-lookup"><span data-stu-id="e97c3-301">After running these scripts, you can delete hello snapshots by executing:</span></span>
```
./removeTestStorageSnapshot.pl <hana instance>
```
<span data-ttu-id="e97c3-302">Vagy</span><span class="sxs-lookup"><span data-stu-id="e97c3-302">Or</span></span>
```
./removeTestStorageSnapshot.pl <hana instance>
```

### <a name="step-7-perform-on-demand-snapshots"></a><span data-ttu-id="e97c3-303">7. lépés:, Hajtsa végre a tárolt pillanatképek</span><span class="sxs-lookup"><span data-stu-id="e97c3-303">Step 7: Perform on-demand snapshots</span></span>

<span data-ttu-id="e97c3-304">Hajtsa végre a pillanatképek igény (valamint ütemezett rendszeres pillanatképek használatával cron) itt leírt módon.</span><span class="sxs-lookup"><span data-stu-id="e97c3-304">Perform on-demand snapshots (as well as schedule regular snapshots by using cron) as described here.</span></span>

<span data-ttu-id="e97c3-305">Méretezett konfigurációk esetén hajtsa végre a következő parancsfájl hello:</span><span class="sxs-lookup"><span data-stu-id="e97c3-305">For scale-up configurations, execute hello following script:</span></span>
```
./azure_hana_backup.pl lhanad01 customer 20
```
<span data-ttu-id="e97c3-306">Kibővített konfigurációk esetén hajtsa végre a következő parancsfájl hello:</span><span class="sxs-lookup"><span data-stu-id="e97c3-306">For scale-out configurations, execute hello following script:</span></span>
```
./azure_hana_backup_bw.pl lhanad01 customer 20
```
<span data-ttu-id="e97c3-307">hello kibővített parancsfájl létezik néhány további ellenőrzési toomake, hogy minden HANA-kiszolgáló elérhető, és példányainak HANA vissza megfelelő állapotot hello példány SAP HANA vagy tárolási pillanatképeinek folytatása előtt.</span><span class="sxs-lookup"><span data-stu-id="e97c3-307">hello scale-out script does some additional checking toomake sure that all HANA servers can be accessed, and all HANA instances return appropriate status of hello instance before proceeding with creating SAP HANA or storage snapshots.</span></span>

<span data-ttu-id="e97c3-308">hello következő argumentumok szükségesek:</span><span class="sxs-lookup"><span data-stu-id="e97c3-308">hello following arguments are required:</span></span>

- <span data-ttu-id="e97c3-309">hello HANA példányt igénylő biztonsági mentés.</span><span class="sxs-lookup"><span data-stu-id="e97c3-309">hello HANA instance requiring backup.</span></span>
- <span data-ttu-id="e97c3-310">hello pillanatkép előtag hello tárolási pillanatkép.</span><span class="sxs-lookup"><span data-stu-id="e97c3-310">hello snapshot prefix for hello storage snapshot.</span></span>
- <span data-ttu-id="e97c3-311">a pillanatképek toobe hello adott előtag esetében hello száma.</span><span class="sxs-lookup"><span data-stu-id="e97c3-311">hello number of snapshots toobe kept for hello specific prefix.</span></span>

```
./azure_hana_backup.pl lhanad01 customer 20
```

<span data-ttu-id="e97c3-312">hello parancsfájl végrehajtásának hello hello tárolási pillanatképet hoz ezen három különálló lépésből áll:</span><span class="sxs-lookup"><span data-stu-id="e97c3-312">hello execution of hello script creates hello storage snapshot in these three distinct phases:</span></span>

- <span data-ttu-id="e97c3-313">HANA pillanatkép hajtható végre.</span><span class="sxs-lookup"><span data-stu-id="e97c3-313">Execute a HANA snapshot.</span></span>
- <span data-ttu-id="e97c3-314">Tárolási pillanatkép hajtható végre.</span><span class="sxs-lookup"><span data-stu-id="e97c3-314">Execute a storage snapshot.</span></span>
- <span data-ttu-id="e97c3-315">Távolítsa el a hello HANA pillanatkép.</span><span class="sxs-lookup"><span data-stu-id="e97c3-315">Remove hello HANA snapshot.</span></span>

<span data-ttu-id="e97c3-316">Hajtsa végre a hello parancsfájlt mappából hello HDB végrehajtható azt másolt meghívásával.</span><span class="sxs-lookup"><span data-stu-id="e97c3-316">Execute hello script by calling it from hello HDB executable folder that it was copied to.</span></span> <span data-ttu-id="e97c3-317">Azt követően kötetek legalább hello biztonsági másolatot készít, de azt is biztonsági másolatot készít hello kötetneve hello explicit SAP HANA-példány nevét tartalmazó kötet.</span><span class="sxs-lookup"><span data-stu-id="e97c3-317">It backs up at least hello following volumes, but it also backs up any volume that has hello explicit SAP HANA instance name in hello volume name.</span></span>
```
hana_data_<hana instance>_prod_t020_vol
hana_log_<hana instance>_prod_t020_vol
hana_log_backup_<hana instance>_prod_t020_vol
hana_shared_<hana instance>_prod_t020_vol
```
<span data-ttu-id="e97c3-318">hello megőrzési időszak szigorúan kezel, hello számú pillanatképek paraméterként be (például 20, korábbi műveletek szerint) hello parancsprogram végrehajtásakor.</span><span class="sxs-lookup"><span data-stu-id="e97c3-318">hello retention period is strictly administered, with hello number of snapshots submitted as a parameter when you execute hello script (such as 20, shown previously).</span></span> <span data-ttu-id="e97c3-319">Ezért hello időre hello időszak pillanatképek hello hívásban hello parancsfájl végrehajtása és hello számának függvényében.</span><span class="sxs-lookup"><span data-stu-id="e97c3-319">So hello amount of time is a function of hello period of execution and hello number of snapshots in hello call of hello script.</span></span> <span data-ttu-id="e97c3-320">Ha tárolják a pillanatképek hello száma meghaladja a hello hívás hello parancsfájl paraméterként nevű hello számát, ez a címke pillanatképe legrégebbi tárolási hello (ebben az előző esetben _egyéni_) törlődik, mielőtt új pillanatkép létrehozása végre.</span><span class="sxs-lookup"><span data-stu-id="e97c3-320">If hello number of snapshots that are kept exceeds hello number that are named as a parameter in hello call of hello script, hello oldest storage snapshot of this label (in our previous case, _custom_) is deleted before a new snapshot is executed.</span></span> <span data-ttu-id="e97c3-321">Ez azt jelenti, hello utolsó hello hívás paramétere használhatja a pillanatképek számát toocontrol hello hello számot ad hello számát.</span><span class="sxs-lookup"><span data-stu-id="e97c3-321">This means hello number you give as hello last parameter of hello call is hello number you can use toocontrol hello number of snapshots.</span></span>

>[!NOTE]
><span data-ttu-id="e97c3-322">Amint hello címkék módosításához hello számbavételi újraindul.</span><span class="sxs-lookup"><span data-stu-id="e97c3-322">As soon as you change hello label, hello counting starts again.</span></span>

<span data-ttu-id="e97c3-323">Tooinclude hello HANA példánynév által biztosított SAP HANA az Azure szolgáltatásfelügyelet argumentumként Ha több csomópontos környezetekben hoznak létre pillanatképek van szüksége.</span><span class="sxs-lookup"><span data-stu-id="e97c3-323">You need tooinclude hello HANA instance name that's provided by SAP HANA on Azure Service Management as an argument if they are creating snapshots in multi-node environments.</span></span> <span data-ttu-id="e97c3-324">Egycsomópontos környezetben SAP HANA hello Azure (nagy példányok) egységen hello neve nem megfelelő, de továbbra is ajánlott hello HANA példány neve.</span><span class="sxs-lookup"><span data-stu-id="e97c3-324">In single-node environments, hello name of hello SAP HANA on Azure (large instances) unit is sufficient, but hello HANA instance name is still recommended.</span></span>

<span data-ttu-id="e97c3-325">Emellett akkor is készítsen biztonsági másolatot a rendszerindító volumes\LUNs hello azonos parancsfájl.</span><span class="sxs-lookup"><span data-stu-id="e97c3-325">Additionally, you can back up boot volumes\LUNs by using hello same script.</span></span> <span data-ttu-id="e97c3-326">Készítsen biztonsági másolatot a rendszerindító kötet legalább egyszer HANA, első futtatásakor bár javasolt egy éjszakánként vagy heti biztonsági mentés ütemezését a cron rendszerindítású.</span><span class="sxs-lookup"><span data-stu-id="e97c3-326">You must back up your boot volume at least once when you first run HANA, although we recommend a weekly or nightly backup schedule for booting in cron.</span></span> <span data-ttu-id="e97c3-327">Ahelyett, hogy vegye fel a SAP HANA-példány nevét, mint beszúrása _rendszerindító_ módon argumentum hello hello parancsprogramba az alábbiak szerint:</span><span class="sxs-lookup"><span data-stu-id="e97c3-327">Rather than add an SAP HANA instance name, insert _boot_ as hello argument into hello script as follows:</span></span>
```
./azure_hana_backup boot customer 20
```
<span data-ttu-id="e97c3-328">hello azonos adatmegőrzési jogot is toohello rendszerkötethez.</span><span class="sxs-lookup"><span data-stu-id="e97c3-328">hello same retention policy is afforded toohello boot volume as well.</span></span> <span data-ttu-id="e97c3-329">Használja a pillanatképek igény leírtak csak, bizonyos esetekben a korábban, például SAP továbbfejlesztése (EHP) csomagot a frissítés során, vagy ha toocreate eltérő tárolási pillanatkép van szüksége.</span><span class="sxs-lookup"><span data-stu-id="e97c3-329">Use on-demand snapshots, as described previously, for special cases only, such as during an SAP enhancement package (EHP) upgrade, or when you need toocreate a distinct storage snapshot.</span></span>

<span data-ttu-id="e97c3-330">Javasoljuk, ütemezett tooperform storage-pillanatfelvételekkel cron használatával, és azt javasoljuk, hogy használja-e hello ugyanazt a parancsfájlt a biztonsági mentések és a vész-helyreállítási igényeit (módosítása hello parancsfájl bemenetek toomatch hello különféle biztonsági mentési alkalommal kért).</span><span class="sxs-lookup"><span data-stu-id="e97c3-330">We encourage you tooperform scheduled storage snapshots using cron, and we recommend that you use hello same script for all backups and disaster-recovery needs (modifying hello script inputs toomatch hello various requested backup times).</span></span> <span data-ttu-id="e97c3-331">Ezek az összes ütemezett eltérően a cron attól függően, hogy a végrehajtási idő: óránkénti, 12 órás, napi vagy heti.</span><span class="sxs-lookup"><span data-stu-id="e97c3-331">These are all scheduled differently in cron depending on their execution time: hourly, 12-hour, daily, or weekly.</span></span> <span data-ttu-id="e97c3-332">hello cron-ütemezését, amelyek megfelelnek a korábban tárgyalt hello megőrzési címkézését a hosszú távú helyszínen biztonsági mentéshez tervezett toocreate storage-pillanatfelvételekkel.</span><span class="sxs-lookup"><span data-stu-id="e97c3-332">hello cron schedule is designed toocreate storage snapshots that match hello previously discussed retention labeling for long-term off-site backup.</span></span> <span data-ttu-id="e97c3-333">hello parancsfájl parancsok tooback készíteni összes éles kötetről, attól függően, hogy a kért gyakorisága (adatainak és naplókönyvtárainak fájlok biztonsági mentést óránként végzi, mivel hello rendszerindító kötet napi készül biztonsági másolat) tartalmazza.</span><span class="sxs-lookup"><span data-stu-id="e97c3-333">hello script includes commands tooback up all production volumes, depending on their requested frequency (data and log files are backed up hourly, whereas hello boot volume is backed up daily).</span></span>

<span data-ttu-id="e97c3-334">cron parancsfájl a következő hello hello bejegyzések futtatni minden órában hello 10 perc, 12 óránként hello 10 percet, és naponta hello 10 perc.</span><span class="sxs-lookup"><span data-stu-id="e97c3-334">hello entries in hello following cron script run every hour at hello tenth minute, every 12 hours at hello tenth minute, and daily at hello tenth minute.</span></span> <span data-ttu-id="e97c3-335">hello cron feladatok jönnek létre úgy, hogy csak egy SAP HANA-tároló pillanatkép történik bármely adott órán belül, hogy hello óránkénti és a napi biztonsági mentés nem halasztja hello azonos idő (12:10 óra).</span><span class="sxs-lookup"><span data-stu-id="e97c3-335">hello cron jobs are created in such a way that only one SAP HANA storage snapshot takes place during any particular hour, so that hello hourly and daily backups do not occur at hello same time (12:10 AM).</span></span> <span data-ttu-id="e97c3-336">toohelp optimalizálhatja a pillanatkép létrehozása és a replikációs, az Azure szolgáltatásfelügyelet SAP HANA biztosít hello ajánlott meg toorun számára a biztonsági másolatok.</span><span class="sxs-lookup"><span data-stu-id="e97c3-336">toohelp optimize your snapshot creation and replication, SAP HANA on Azure Service Management provides hello recommended time for you toorun your backups.</span></span>

<span data-ttu-id="e97c3-337">hello alapértelmezett cron /etc/crontab ütemezését a következőképpen történik:</span><span class="sxs-lookup"><span data-stu-id="e97c3-337">hello default cron scheduling in /etc/crontab is as follows:</span></span>
```
10 1-11,13-23 * * * ./azure_hana_backup.pl lhanad01 hourly 66
10 12 * * *  ./azure_hana_backup.pl lhanad01 12hour 14
```
<span data-ttu-id="e97c3-338">A hello előző cron utasításokban hello HANA kötetek (nélkül a rendszerindító kötet) lekérése egy pillanatkép-hello címkével óránként.</span><span class="sxs-lookup"><span data-stu-id="e97c3-338">In hello previous cron instructions, hello HANA volumes (without boot volume) get an hourly snapshot with hello label.</span></span> <span data-ttu-id="e97c3-339">Ezeket a pillanatképeket a 66 megmaradnak.</span><span class="sxs-lookup"><span data-stu-id="e97c3-339">Of these snapshots, 66 are retained.</span></span> <span data-ttu-id="e97c3-340">Emellett hello 12 órás címkével 14 pillanatképet megőrzi.</span><span class="sxs-lookup"><span data-stu-id="e97c3-340">Additionally, 14 snapshots with hello 12-hour label are retained.</span></span> <span data-ttu-id="e97c3-341">Potenciálisan kapunk óránkénti pillanatképek három nap, valamint 12 órás pillanatképek egy másik négy napja, amely lehetővé teszi az egy teljes hét, a pillanatképek.</span><span class="sxs-lookup"><span data-stu-id="e97c3-341">You potentially get hourly snapshots for three days, plus 12-hour snapshots for another four days, which gives you an entire week of snapshots.</span></span>

<span data-ttu-id="e97c3-342">Cron belül ütemezés megkapni, mert csak egy parancsprogram kell végrehajtani adott bármikor, ha hello parancsfájlok kerülnek lépcsőzetes elrendezésben által néhány percig.</span><span class="sxs-lookup"><span data-stu-id="e97c3-342">Scheduling within cron can be tricky, because only one script should be executed at any particular time, unless hello scripts are staggered by several minutes.</span></span> <span data-ttu-id="e97c3-343">Ha hosszú távú megőrzési napi biztonsági mentései használni szeretne, vagy napi pillanatkép tartják együtt (a hét minden megőrzési számát) 12 órás pillanatképet, vagy hello óránkénti pillanatkép lépcsőzetes tootake hely 10 percen belül.</span><span class="sxs-lookup"><span data-stu-id="e97c3-343">If you want daily backups for long-term retention, either a daily snapshot is kept along with a 12-hour snapshot (with a retention count of seven each), or hello hourly snapshot is staggered tootake place 10 minutes later.</span></span> <span data-ttu-id="e97c3-344">Csak egy napi pillanatkép hello éles kötet maradjanak.</span><span class="sxs-lookup"><span data-stu-id="e97c3-344">Only one daily snapshot is kept in hello production volume.</span></span>
```
10 1-11,13-23 * * * ./azure_hana_backup.pl lhanad01 hourly 66
10 12 * * *  ./azure_hana_backup.pl lhanad01 12hour 7
10 0 * * * ./azure_hana_backup.pl lhanad01 daily 7
```
<span data-ttu-id="e97c3-345">az itt felsorolt hello gyakoriságot példák csak.</span><span class="sxs-lookup"><span data-stu-id="e97c3-345">hello frequencies listed here are only examples.</span></span> <span data-ttu-id="e97c3-346">tooderive az optimális pillanatképek számát, a következő feltételek használata hello:</span><span class="sxs-lookup"><span data-stu-id="e97c3-346">tooderive your optimum number of snapshots, use hello following criteria:</span></span>

- <span data-ttu-id="e97c3-347">A pont időponthoz kötött helyreállítás helyreállítási idő célkitűzése követelményeinek.</span><span class="sxs-lookup"><span data-stu-id="e97c3-347">Requirements in recovery time objective for point-in-time recovery.</span></span>
- <span data-ttu-id="e97c3-348">Lemezterület-használat.</span><span class="sxs-lookup"><span data-stu-id="e97c3-348">Space usage.</span></span>
- <span data-ttu-id="e97c3-349">Követelmények a helyreállítási cél és a helyreállítási idő célkitűzése a lehetséges vész-helyreállítási pontja.</span><span class="sxs-lookup"><span data-stu-id="e97c3-349">Requirements in recovery point objective and recovery time objective for potential disaster recovery.</span></span>
- <span data-ttu-id="e97c3-350">Végső végrehajtási HANA adatbázis teljes biztonsági mentések lemezek ellen.</span><span class="sxs-lookup"><span data-stu-id="e97c3-350">Eventual execution of HANA full database backups against disks.</span></span> <span data-ttu-id="e97c3-351">Amikor a lemezeket, szemben a teljes adatbázis biztonsági mentése vagy _backint_ csatoló, a hajtja végre, storage-pillanatfelvételekkel hello végrehajtása sikertelen lesz.</span><span class="sxs-lookup"><span data-stu-id="e97c3-351">Whenever a full database backup against disks, or _backint_ interface, is performed, hello execution of storage snapshots fails.</span></span> <span data-ttu-id="e97c3-352">Ha azt tervezi, hogy a storage-pillanatfelvételekkel fölött tooexecute adatbázis teljes biztonsági mentések, győződjön meg arról, hogy a pillanatképek tárolási hello végrehajtási le van tiltva, ebben az időszakban.</span><span class="sxs-lookup"><span data-stu-id="e97c3-352">If you plan tooexecute full database backups on top of storage snapshots, make sure that hello execution of storage snapshots is disabled during this time.</span></span>

>[!IMPORTANT]
> <span data-ttu-id="e97c3-353">hello storage-pillanatfelvételekkel SAP HANA biztonsági mentés használata érvényes csak akkor, ha hello pillanatképek SAP HANA-naplók biztonsági másolatainak együtt történik.</span><span class="sxs-lookup"><span data-stu-id="e97c3-353">hello use of storage snapshots for SAP HANA backups is valid only when hello snapshots are performed in conjunction with SAP HANA log backups.</span></span> <span data-ttu-id="e97c3-354">Következő naplófájl-biztonsági mentések kell toobe képes toocover hello időszakok hello storage-pillanatfelvételekkel között.</span><span class="sxs-lookup"><span data-stu-id="e97c3-354">These log backups need toobe able toocover hello time periods between hello storage snapshots.</span></span> <span data-ttu-id="e97c3-355">Ha beállította a 30 napos pont időponthoz kötött helyreállítás kötelezettségvállalás toousers, hello következőkre lesz szüksége:</span><span class="sxs-lookup"><span data-stu-id="e97c3-355">If you've set a commitment toousers of a point-in-time recovery of 30 days, you need hello following:</span></span>

- <span data-ttu-id="e97c3-356">Képes tooaccess, amely a 30 napos tárolási pillanatképet.</span><span class="sxs-lookup"><span data-stu-id="e97c3-356">Ability tooaccess a storage snapshot that is 30 days old.</span></span>
- <span data-ttu-id="e97c3-357">Összefüggő naplóalapú biztonsági mentések hello utolsó 30 nap alatt.</span><span class="sxs-lookup"><span data-stu-id="e97c3-357">Contiguous log backups over hello last 30 days.</span></span>

<span data-ttu-id="e97c3-358">A napló biztonsági mentések hello tartományát, a pillanatkép létrehozása a hello naplómentési kötethez.</span><span class="sxs-lookup"><span data-stu-id="e97c3-358">In hello range of log backups, create a snapshot of hello backup log volume as well.</span></span> <span data-ttu-id="e97c3-359">Azonban lehet, hogy tooperform rendszeres naplóalapú biztonsági mentések, hogy:</span><span class="sxs-lookup"><span data-stu-id="e97c3-359">However, be sure tooperform regular log backups so that you can:</span></span>

- <span data-ttu-id="e97c3-360">Hello összefüggő naplóalapú biztonsági mentések szükség tooperform időpontban helyreállítást végezni.</span><span class="sxs-lookup"><span data-stu-id="e97c3-360">Have hello contiguous log backups needed tooperform point-in-time recoveries.</span></span>
- <span data-ttu-id="e97c3-361">Hello SAP HANA naplózási kötet megakadályozása kevés a hely.</span><span class="sxs-lookup"><span data-stu-id="e97c3-361">Prevent hello SAP HANA log volume from running out of space.</span></span>

<span data-ttu-id="e97c3-362">Hello utolsó lépések egyike tooschedule SAP HANA biztonsági mentési naplók SAP HANA Studio.</span><span class="sxs-lookup"><span data-stu-id="e97c3-362">One of hello last steps is tooschedule SAP HANA backup logs in SAP HANA Studio.</span></span> <span data-ttu-id="e97c3-363">hello SAP HANA-napló biztonsági mentési célhelyre kifejezetten létrehozott hello hana/log\_hello csatlakoztatási pontját /hana/log/backups biztonsági mentések kötetet.</span><span class="sxs-lookup"><span data-stu-id="e97c3-363">hello SAP HANA backup log target destination is hello specially created hana/log\_backups volume with hello mount point of /hana/log/backups.</span></span>

![Az SAP HANA Studio naplózza az SAP HANA-biztonsági mentés ütemezése](./media/hana-overview-high-availability-disaster-recovery/image5-schedule-backup.png)

<span data-ttu-id="e97c3-365">Dönthet úgy, mint 15 percenként biztonsági mentéseket.</span><span class="sxs-lookup"><span data-stu-id="e97c3-365">You can choose backups that are more frequent than every 15 minutes.</span></span> <span data-ttu-id="e97c3-366">Egyes felhasználók is biztonsági másolatokat napló percenként, bár nem javasolt folyamatos _keresztül_ 15 perc.</span><span class="sxs-lookup"><span data-stu-id="e97c3-366">Some users even perform log backups every minute, although we do not recommend going _over_ 15 minutes.</span></span>

<span data-ttu-id="e97c3-367">utolsó lépésként hello tooperform fájl alapú biztonsági mentés (után hello SAP HANA kezdeti telepítése) toocreate hello biztonságimásolat-katalógus léteznie kell egy biztonsági mentési tétel.</span><span class="sxs-lookup"><span data-stu-id="e97c3-367">hello final step is tooperform a file-based backup (after hello initial installation of SAP HANA) toocreate a single backup entry that must exist within hello backup catalog.</span></span> <span data-ttu-id="e97c3-368">Ellenkező esetben SAP HANA nem indítható el a megadott napló biztonsági másolatokat.</span><span class="sxs-lookup"><span data-stu-id="e97c3-368">Otherwise SAP HANA cannot initiate your specified log backups.</span></span>

![A fájl alapú biztonsági mentési toocreate hozzon létre egy biztonsági mentési tételt](./media/hana-overview-high-availability-disaster-recovery/image6-make-backup.png)

### <a name="monitoring-hello-number-and-size-of-snapshots-on-hello-disk-volume"></a><span data-ttu-id="e97c3-370">Hello számát és méretét, a pillanatképek hello lemezköteten figyelése</span><span class="sxs-lookup"><span data-stu-id="e97c3-370">Monitoring hello number and size of snapshots on hello disk volume</span></span>

<span data-ttu-id="e97c3-371">Egy adott tárolási köteten figyelheti a pillanatképek és hello tároló fogyasztása a pillanatképek hello száma.</span><span class="sxs-lookup"><span data-stu-id="e97c3-371">On a particular storage volume, you can monitor hello number of snapshots and hello storage consumption of snapshots.</span></span> <span data-ttu-id="e97c3-372">Hello `ls` parancs hello pillanatkép könyvtár vagy fájl nem jeleníti meg.</span><span class="sxs-lookup"><span data-stu-id="e97c3-372">hello `ls` command doesn't show hello snapshot directory or files.</span></span> <span data-ttu-id="e97c3-373">Azonban a Linux operációs rendszert futtató parancs hello `du` nem, a következő parancsok hello:</span><span class="sxs-lookup"><span data-stu-id="e97c3-373">However, hello Linux OS command `du` does, with hello following commands:</span></span>

- <span data-ttu-id="e97c3-374">`du –sh .snapshot`hello pillanatkép könyvtárban lévő összes pillanatképet összesen biztosít.</span><span class="sxs-lookup"><span data-stu-id="e97c3-374">`du –sh .snapshot` provides a total of all snapshots within hello snapshot directory.</span></span>
- <span data-ttu-id="e97c3-375">`du –sh --max-depth=1`Felsorolja az összes hello .snapshot mappában, és minden pillanatkép hello mérete mentett pillanatképet.</span><span class="sxs-lookup"><span data-stu-id="e97c3-375">`du –sh --max-depth=1` lists all snapshots that are saved in hello .snapshot folder and hello size of each snapshot.</span></span>
- <span data-ttu-id="e97c3-376">`du –hc`Itt hello teljes mérete használják az összes pillanatképet.</span><span class="sxs-lookup"><span data-stu-id="e97c3-376">`du –hc` provides hello total size used by all snapshots.</span></span>

<span data-ttu-id="e97c3-377">Ezen parancsok toomake meg arról, hogy venni és tárolt hello pillanatképek nem használ fel minden hello tároló hello köteteken használja.</span><span class="sxs-lookup"><span data-stu-id="e97c3-377">Use these commands toomake sure that hello snapshots that are taken and stored are not consuming all hello storage on hello volumes.</span></span>

### <a name="reducing-hello-number-of-snapshots-on-a-server"></a><span data-ttu-id="e97c3-378">A pillanatképek olyan kiszolgálón hello számának csökkentése</span><span class="sxs-lookup"><span data-stu-id="e97c3-378">Reducing hello number of snapshots on a server</span></span>

<span data-ttu-id="e97c3-379">Ahogy korábban, csökkentheti a hello bizonyos címkék tárolt pillanatképek számát.</span><span class="sxs-lookup"><span data-stu-id="e97c3-379">As explained earlier, you can reduce hello number of certain labels of snapshots that you store.</span></span> <span data-ttu-id="e97c3-380">hello utolsó két paraméterének hello parancs tooinitiate pillanatkép számos címke és hello kívánt pillanatképek tooretain.</span><span class="sxs-lookup"><span data-stu-id="e97c3-380">hello last two parameters of hello command tooinitiate a snapshot are a label and hello number of snapshots you want tooretain.</span></span>
```
./azure_hana_backup.pl lhanad01 customer 20
```
<span data-ttu-id="e97c3-381">Hello előző példában hello pillanatkép címkéje _ügyfél_ és a megőrzött címke toobe pillanatképei hello száma _20_.</span><span class="sxs-lookup"><span data-stu-id="e97c3-381">In hello previous example, hello snapshot label is _customer_ and hello number of snapshots with this label toobe retained is _20_.</span></span> <span data-ttu-id="e97c3-382">Megfelelnek a toodisk lemezterület-felhasználást, érdemes lehet tárolt pillanatképek számát tooreduce hello.</span><span class="sxs-lookup"><span data-stu-id="e97c3-382">As you respond toodisk space consumption, you might want tooreduce hello number of stored snapshots.</span></span> <span data-ttu-id="e97c3-383">hello egyszerűen tooreduce hello számú pillanatképpel toorun hello parancsprogram hello utolsó paraméter beállítása too5:</span><span class="sxs-lookup"><span data-stu-id="e97c3-383">hello easy way tooreduce hello number of snapshots is toorun hello script with hello last parameter set too5:</span></span>
```
./azure_hana_backup.pl lhanad01 customer 5
```
<span data-ttu-id="e97c3-384">Miatt hello parancsfájl futtatását ezt a beállítást, a pillanatképek, beleértve a hello új pillanatkép, hello száma: _5_.</span><span class="sxs-lookup"><span data-stu-id="e97c3-384">As a result of running hello script with this setting, hello number of snapshots, including hello new storage snapshot, is _5_.</span></span>

 >[!NOTE]
 > <span data-ttu-id="e97c3-385">Ez a parancsfájl csökkenthető hello pillanatképek csak akkor, ha hello legutóbbi korábbi pillanatképből több mint egy órával korábbiak.</span><span class="sxs-lookup"><span data-stu-id="e97c3-385">This script reduces hello number of snapshots only if hello most recent previous snapshot is more than one hour old.</span></span> <span data-ttu-id="e97c3-386">hello parancsfájl nem törli a pillanatképeket, amelyek kevesebb, mint egy órával korábbiak.</span><span class="sxs-lookup"><span data-stu-id="e97c3-386">hello script does not delete snapshots that are less than one hour old.</span></span>

<span data-ttu-id="e97c3-387">Ezek a korlátozások kapcsolódó toohello választható vész-helyreállítási funkciói.</span><span class="sxs-lookup"><span data-stu-id="e97c3-387">These restrictions are related toohello optional disaster-recovery functionality offered.</span></span>

<span data-ttu-id="e97c3-388">Ha már nem szeretné ezt az előtagot pillanatképei készlete toomaintain, Ön is végrehajthatja a hello parancsprogram _0_ , hello megőrzési number tooremove ezt az előtagot megfelelő összes pillanatképet.</span><span class="sxs-lookup"><span data-stu-id="e97c3-388">If you no longer want toomaintain a set of snapshots with that prefix, you can execute hello script with _0_ as hello retention number tooremove all snapshots matching that prefix.</span></span> <span data-ttu-id="e97c3-389">Azonban minden pillanatképet eltávolítása hatással lehet a vész-helyreállítási hello képességeit.</span><span class="sxs-lookup"><span data-stu-id="e97c3-389">However, removing all snapshots can affect hello capabilities of disaster recovery.</span></span>

### <a name="recovering-toohello-most-recent-hana-snapshot"></a><span data-ttu-id="e97c3-390">Toohello legutóbbi HANA pillanatkép visszaállítása</span><span class="sxs-lookup"><span data-stu-id="e97c3-390">Recovering toohello most recent HANA snapshot</span></span>

<span data-ttu-id="e97c3-391">Hello eseményben tapasztalja egy éles lefelé forgatókönyv, végezze el a tárolási pillanatkép hello folyamatán kezdeményezhető, a felhasználói, amelyhez az SAP HANA az Azure Service Management.</span><span class="sxs-lookup"><span data-stu-id="e97c3-391">In hello event that you experience a production-down scenario, hello process of recovering from a storage snapshot can be initiated as a customer incident with SAP HANA on Azure Service Management.</span></span> <span data-ttu-id="e97c3-392">Ilyen egy váratlan forgatókönyvet a sürgősség szerinti függetlenül attól, hogy előfordulhat, ha a adat törölve lett egy éles rendszer és hello csak módon tooretrieve hello adatok toorestore hello éles adatbázist.</span><span class="sxs-lookup"><span data-stu-id="e97c3-392">Such an unexpected scenario might be a high-urgency matter if data was deleted in a production system and hello only way tooretrieve hello data is toorestore hello production database.</span></span>

<span data-ttu-id="e97c3-393">A hello, ugyanakkor egy időpontban helyreállítási lehet alacsony sürgősség, nappal a tervezett.</span><span class="sxs-lookup"><span data-stu-id="e97c3-393">On hello other hand, a point-in-time recovery could be low urgency and planned for days in advance.</span></span> <span data-ttu-id="e97c3-394">Megtervezheti ennek a helyreállításnak az SAP HANA az Azure szolgáltatásfelügyelet helyett egy magas prioritású probléma előléptetése.</span><span class="sxs-lookup"><span data-stu-id="e97c3-394">You can plan this recovery with SAP HANA on Azure Service Management instead of raising a high-priority issue.</span></span> <span data-ttu-id="e97c3-395">Például akkor lehet, hogy lehet tervezési tootry hello SAP szoftver frissítését úgy, hogy a fejlesztés új csomagot, és alkalmazza, majd kell toorevert biztonsági tooa pillanatkép, amely hello EHP frissítés előtt hello állapotát jeleníti meg.</span><span class="sxs-lookup"><span data-stu-id="e97c3-395">For example, you might be planning tootry an upgrade of hello SAP software by applying a new enhancement package, and you then need toorevert back tooa snapshot that represents hello state before hello EHP upgrade.</span></span>

<span data-ttu-id="e97c3-396">Hello kérelem adja ki, meg kell toodo bizonyos előkészítés.</span><span class="sxs-lookup"><span data-stu-id="e97c3-396">Before you issue hello request, you need toodo some preparation.</span></span> <span data-ttu-id="e97c3-397">SAP HANA Azure szolgáltatásfelügyeleti csoport ezután hello kérelem kezelésére, és adja meg a visszaállított hello kötetek.</span><span class="sxs-lookup"><span data-stu-id="e97c3-397">SAP HANA on Azure Service Management team can then handle hello request and provide hello restored volumes.</span></span> <span data-ttu-id="e97c3-398">A későbbiekben is tooyou toorestore hello HANA adatbázis hello pillanatképek alapján.</span><span class="sxs-lookup"><span data-stu-id="e97c3-398">Afterward, it is up tooyou toorestore hello HANA database based on hello snapshots.</span></span> <span data-ttu-id="e97c3-399">Itt hogyan tooprepare hello vonatkozó kérelem:</span><span class="sxs-lookup"><span data-stu-id="e97c3-399">Here is how tooprepare for hello request:</span></span>

>[!NOTE]
><span data-ttu-id="e97c3-400">A felhasználói felület hello alábbi képernyőképek hello SAP HANA-kiadás módjától függően eltérhetnek.</span><span class="sxs-lookup"><span data-stu-id="e97c3-400">Your user interface might vary from hello following screenshots, depending on hello SAP HANA release you are using.</span></span>

1. <span data-ttu-id="e97c3-401">Döntse el, melyik pillanatkép toorestore.</span><span class="sxs-lookup"><span data-stu-id="e97c3-401">Decide which snapshot toorestore.</span></span> <span data-ttu-id="e97c3-402">Csak hello hana/adatmennyiség kellene állítani, hacsak másként nem kéri.</span><span class="sxs-lookup"><span data-stu-id="e97c3-402">Only hello hana/data volume would be restored unless you are instructed otherwise.</span></span>

2. <span data-ttu-id="e97c3-403">Hello HANA példány leállítása.</span><span class="sxs-lookup"><span data-stu-id="e97c3-403">Shut down hello HANA instance.</span></span>

 ![Hello HANA példány leállítása](./media/hana-overview-high-availability-disaster-recovery/image7-shutdown-hana.png)

3. <span data-ttu-id="e97c3-405">Válassza le a hello az adatkötetek minden HANA-adatbázis csomóponton.</span><span class="sxs-lookup"><span data-stu-id="e97c3-405">Unmount hello data volumes on each HANA database node.</span></span> <span data-ttu-id="e97c3-406">hello hello pillanatkép visszaállítása sikertelen lesz, ha nincsenek fürtköteteiről hello az adatkötetek.</span><span class="sxs-lookup"><span data-stu-id="e97c3-406">hello restoration of hello snapshot fails if hello data volumes are not unmounted.</span></span>

 ![Minden egyes HANA adatbázis csomóponton hello az adatkötetek leválasztása](./media/hana-overview-high-availability-disaster-recovery/image8-unmount-data-volumes.png)

4. <span data-ttu-id="e97c3-408">Nyissa meg az Azure támogatási kérelem tooinstruct hello visszaállítása egy adott pillanatkép.</span><span class="sxs-lookup"><span data-stu-id="e97c3-408">Open an Azure support request tooinstruct hello restoration of a specific snapshot.</span></span>

 - <span data-ttu-id="e97c3-409">Hello visszaállítás során: az Azure szolgáltatásfelügyelet SAP HANA kérheti tooattend egy konferencia hívás tooensure, amelyek nincsenek adatok lekérdezése megszakadt.</span><span class="sxs-lookup"><span data-stu-id="e97c3-409">During hello restoration: SAP HANA on Azure Service Management might ask you tooattend a conference call tooensure that no data is getting lost.</span></span>

 - <span data-ttu-id="e97c3-410">Hello visszaállítást követően: az Azure szolgáltatásfelügyelet SAP HANA értesíti, amikor hello tárolási pillanatkép visszaállítása megtörtént.</span><span class="sxs-lookup"><span data-stu-id="e97c3-410">After hello restoration: SAP HANA on Azure Service Management notifies you when hello storage snapshot has been restored.</span></span>

5. <span data-ttu-id="e97c3-411">Hello visszaállítási folyamat befejezése után csatlakoztassa az összes kötetről.</span><span class="sxs-lookup"><span data-stu-id="e97c3-411">After hello restoration process is complete, remount all data volumes.</span></span>

 ![Minden adatkötetnél újracsatlakoztatni](./media/hana-overview-high-availability-disaster-recovery/image9-remount-data-volumes.png)

6. <span data-ttu-id="e97c3-413">Helyreállítási beállítások SAP HANA studióban, akkor válassza, ha nem automatikusan lépnek az újbóli tooHANA DB SAP HANA Studio alkalmazással.</span><span class="sxs-lookup"><span data-stu-id="e97c3-413">Select recovery options within SAP HANA Studio, if they do not automatically come up when you reconnect tooHANA DB through SAP HANA Studio.</span></span> <span data-ttu-id="e97c3-414">hello következő példa bemutatja, visszaállítás toohello utolsó HANA pillanatképet.</span><span class="sxs-lookup"><span data-stu-id="e97c3-414">hello following example shows a restoration toohello last HANA snapshot.</span></span> <span data-ttu-id="e97c3-415">Tárolási pillanatkép beágyazza egy HANA pillanatképet, és toohello legutóbbi tárolási pillanatkép visszaállítása, hello legutóbbi HANA pillanatkép kell lennie.</span><span class="sxs-lookup"><span data-stu-id="e97c3-415">A storage snapshot embeds one HANA snapshot, and if you are restoring toohello most recent storage snapshot, it should be hello most recent HANA snapshot.</span></span> <span data-ttu-id="e97c3-416">(Tooolder storage-pillanatfelvételekkel állítja vissza, ha szüksége van-e toolocate hello HANA pillanatkép készítése a hello idő hello tárolási pillanatkép alapján.)</span><span class="sxs-lookup"><span data-stu-id="e97c3-416">(If you are restoring tooolder storage snapshots, you need toolocate hello HANA snapshot based on hello time hello storage snapshot was taken.)</span></span>

 ![Válassza ki a helyreállítás beállítások SAP HANA studióban](./media/hana-overview-high-availability-disaster-recovery/image10-recover-options-a.png)

7. <span data-ttu-id="e97c3-418">Válassza ki **helyreállítás hello adatbázis tooa adott adatok biztonsági mentése és a tárolási pillanatkép**.</span><span class="sxs-lookup"><span data-stu-id="e97c3-418">Select **Recover hello database tooa specific data backup or storage snapshot**.</span></span>

 ![hello "A helyreállítás típusának megadása" ablakban](./media/hana-overview-high-availability-disaster-recovery/image11-recover-options-b.png)

8. <span data-ttu-id="e97c3-420">Válassza ki **adjon meg biztonsági másolat nélkül katalógus**.</span><span class="sxs-lookup"><span data-stu-id="e97c3-420">Select **Specify backup without catalog**.</span></span>

 ![hello "Adja meg a hely biztonsági mentése" ablak](./media/hana-overview-high-availability-disaster-recovery/image12-recover-options-c.png)

9. <span data-ttu-id="e97c3-422">A hello **céltípus** listáról válassza ki **pillanatkép**.</span><span class="sxs-lookup"><span data-stu-id="e97c3-422">In hello **Destination Type** list, select **Snapshot**.</span></span>

 ![hello "Megadása hello biztonsági mentés tooRecover" ablak](./media/hana-overview-high-availability-disaster-recovery/image13-recover-options-d.png)

10. <span data-ttu-id="e97c3-424">Kattintson a **Befejezés** toostart hello helyreállítási folyamatot.</span><span class="sxs-lookup"><span data-stu-id="e97c3-424">Click **Finish** toostart hello recovery process.</span></span>

 ![Kattintson a "Befejezés" toostart hello helyreállítási folyamat](./media/hana-overview-high-availability-disaster-recovery/image14-recover-options-e.png)

11. <span data-ttu-id="e97c3-426">hello HANA-adatbázisból helyreáll, és toohello HANA pillanatkép, amely megtalálható a hello tárolási pillanatkép helyre.</span><span class="sxs-lookup"><span data-stu-id="e97c3-426">hello HANA database is restored and recovered toohello HANA snapshot that's included in hello storage snapshot.</span></span>

 ![HANA-adatbázis visszaállítása, és a helyreállított toohello HANA pillanatkép](./media/hana-overview-high-availability-disaster-recovery/image15-recover-options-f.png)

### <a name="recovering-toohello-most-recent-state"></a><span data-ttu-id="e97c3-428">Legutóbbi toohello-állapot helyreállítása</span><span class="sxs-lookup"><span data-stu-id="e97c3-428">Recovering toohello most recent state</span></span>

<span data-ttu-id="e97c3-429">hello következő folyamat állítja vissza, amely megtalálható a hello tárolási pillanatkép hello HANA pillanatkép.</span><span class="sxs-lookup"><span data-stu-id="e97c3-429">hello following process restores hello HANA snapshot that is included in hello storage snapshot.</span></span> <span data-ttu-id="e97c3-430">Majd helyreállítja hello tranzakciós napló biztonsági mentések toohello legutóbbi hello adatbázis állapotának hello tárolási pillanatkép visszaállítása előtt.</span><span class="sxs-lookup"><span data-stu-id="e97c3-430">It then restores hello transaction log backups toohello most recent state of hello database before restoring hello storage snapshot.</span></span>

>[!IMPORTANT]
><span data-ttu-id="e97c3-431">Mielőtt továbblépne, győződjön meg arról, hogy rendelkezik-e a tranzakciónapló biztonsági mentései teljes és összefüggő láncolata.</span><span class="sxs-lookup"><span data-stu-id="e97c3-431">Before you proceed, make sure that you have a complete and contiguous chain of transaction log backups.</span></span> <span data-ttu-id="e97c3-432">A biztonsági mentése nélkül hello hello adatbázis jelenlegi állapota nem állítható vissza.</span><span class="sxs-lookup"><span data-stu-id="e97c3-432">Without these backups, you cannot restore hello current state of hello database.</span></span>

1. <span data-ttu-id="e97c3-433">Végezze el az 1-6. lépéseket az előző eljárás a "Helyreállítás toohello legutóbbi HANA pillanatképe." hello</span><span class="sxs-lookup"><span data-stu-id="e97c3-433">Complete steps 1-6 of hello preceding procedure in "Recovering toohello most recent HANA snapshot."</span></span>

2. <span data-ttu-id="e97c3-434">Válassza ki **hello adatbázis tooits legutóbbi állapot helyreállításához**.</span><span class="sxs-lookup"><span data-stu-id="e97c3-434">Select **Recover hello database tooits most recent state**.</span></span>

 ![Válassza a "Hello adatbázis tooits legutóbbi állapot helyreállításához"](./media/hana-overview-high-availability-disaster-recovery/image16-recover-database-a.png)

3. <span data-ttu-id="e97c3-436">Adja meg a legutóbbi HANA naplómentésekre hello hello elhelyezkedését.</span><span class="sxs-lookup"><span data-stu-id="e97c3-436">Specify hello location of hello most recent HANA log backups.</span></span> <span data-ttu-id="e97c3-437">hello helyre kell toocontain összes HANA tranzakciónapló biztonsági mentései a hello HANA pillanatkép toohello legutóbbi állapotból.</span><span class="sxs-lookup"><span data-stu-id="e97c3-437">hello location needs toocontain all HANA transaction log backups from hello HANA snapshot toohello most recent state.</span></span>

 ![Hello legutóbbi HANA naplóalapú biztonsági mentések hello helyének megadása](./media/hana-overview-high-availability-disaster-recovery/image17-recover-database-b.png)

4. <span data-ttu-id="e97c3-439">Válassza ki a biztonsági mentés mely toorecover hello adatbázisból alapjaként.</span><span class="sxs-lookup"><span data-stu-id="e97c3-439">Select a backup as a base from which toorecover hello database.</span></span> <span data-ttu-id="e97c3-440">A példánkban ez a hello HANA pillanatkép hello tárolási pillanatkép fájlban.</span><span class="sxs-lookup"><span data-stu-id="e97c3-440">In our example, this is hello HANA snapshot that was included in hello storage snapshot.</span></span> <span data-ttu-id="e97c3-441">(Csak egy pillanatképet, szerepel a következő képernyőkép hello.)</span><span class="sxs-lookup"><span data-stu-id="e97c3-441">(Only one snapshot is listed in hello following screenshot.)</span></span>

 ![Válassza ki a biztonsági mentés alapjául mely toorecover hello adatbázisból](./media/hana-overview-high-availability-disaster-recovery/image18-recover-database-c.png)

5. <span data-ttu-id="e97c3-443">Törölje a jelet hello **használata különbözeti biztonsági mentések** jelölőnégyzetet, ha hello HANA pillanatkép hello idő és a legutóbbi állapot hello közötti eltérések nem léteznek.</span><span class="sxs-lookup"><span data-stu-id="e97c3-443">Clear hello **Use Delta Backups** check box if deltas do not exist between hello time of hello HANA snapshot and hello most recent state.</span></span>

 ![Törölje a jelet hello "Használja a különbözeti biztonsági mentések" jelölőnégyzetet, ha nincs eltérések létezik](./media/hana-overview-high-availability-disaster-recovery/image19-recover-database-d.png)

6. <span data-ttu-id="e97c3-445">Hello összefoglaló képernyőn kattintson a **Befejezés** toostart hello visszaállítási eljáráshoz.</span><span class="sxs-lookup"><span data-stu-id="e97c3-445">On hello summary screen, click **Finish** toostart hello restoration procedure.</span></span>

 ![Kattintson a "Befejezés" hello összefoglaló képernyőn](./media/hana-overview-high-availability-disaster-recovery/image20-recover-database-e.png)

### <a name="recovering-tooanother-point-in-time"></a><span data-ttu-id="e97c3-447">Időben helyreállított tooanother pont</span><span class="sxs-lookup"><span data-stu-id="e97c3-447">Recovering tooanother point in time</span></span>
<span data-ttu-id="e97c3-448">toorecover tooa pont hello HANA pillanatkép (hello tárolási pillanatkép szerepel) és egy későbbi, mint hello HANA pillanatkép-időpontban helyreállítási közötti időben hello a következő:</span><span class="sxs-lookup"><span data-stu-id="e97c3-448">toorecover tooa point in time between hello HANA snapshot (included in hello storage snapshot) and one that is later than hello HANA snapshot point-in-time recovery, do hello following:</span></span>

1. <span data-ttu-id="e97c3-449">Győződjön meg arról, hogy rendelkezik-e az összes tranzakciónapló biztonsági mentései a hello HANA pillanatkép toohello időtartamát toorecover.</span><span class="sxs-lookup"><span data-stu-id="e97c3-449">Make sure that you have all transaction log backups from hello HANA snapshot toohello time you want toorecover.</span></span>
2. <span data-ttu-id="e97c3-450">Hello az eljárást a "Helyreállítás toohello legutóbbi állapot."</span><span class="sxs-lookup"><span data-stu-id="e97c3-450">Begin hello procedure under "Recovering toohello most recent state."</span></span>
3. <span data-ttu-id="e97c3-451">A hello eljárás hello a 2. lépés **helyreállítási típus megadása** ablakban válassza ki **helyreállítás hello adatbázis toohello következő időpontra történő**, adja meg a hello pontot időben, és fejezze be 3-6. lépéseket.</span><span class="sxs-lookup"><span data-stu-id="e97c3-451">In step 2 of hello procedure, in hello **Specify Recovery Type** window, select **Recover hello database toohello following point in time**, specify hello point in time, and then complete steps 3-6.</span></span>

## <a name="monitoring-hello-execution-of-snapshots"></a><span data-ttu-id="e97c3-452">A pillanatképek figyelési hello végrehajtása</span><span class="sxs-lookup"><span data-stu-id="e97c3-452">Monitoring hello execution of snapshots</span></span>

<span data-ttu-id="e97c3-453">Storage-pillanatfelvételekkel toomonitor hello végrehajtásának van szüksége.</span><span class="sxs-lookup"><span data-stu-id="e97c3-453">You need toomonitor hello execution of storage snapshots.</span></span> <span data-ttu-id="e97c3-454">hello parancsfájl, amely végrehajtja a tárolási pillanatkép kimeneti tooa fájlba ír, és toohello menti és hello Perl-parancsfájlokat ugyanazon a helyen.</span><span class="sxs-lookup"><span data-stu-id="e97c3-454">hello script that executes a storage snapshot writes output tooa file and then saves it toohello same location as hello Perl scripts.</span></span> <span data-ttu-id="e97c3-455">Minden egyes pillanatkép készült külön fájlt.</span><span class="sxs-lookup"><span data-stu-id="e97c3-455">A separate file is written for each snapshot.</span></span> <span data-ttu-id="e97c3-456">az egyes fájlok hello kimeneti hello is egyértelműen mutatja, amely végrehajtja a hello pillanatkép parancsfájl különböző fázisait:</span><span class="sxs-lookup"><span data-stu-id="e97c3-456">hello output of each file clearly shows hello various phases that hello snapshot script executes:</span></span>

- <span data-ttu-id="e97c3-457">Hello kötetek toocreate igénylő pillanatkép keresése</span><span class="sxs-lookup"><span data-stu-id="e97c3-457">Finding hello volumes that need toocreate a snapshot</span></span>
- <span data-ttu-id="e97c3-458">Ezek a kötetek vett hello pillanatképek keresése</span><span class="sxs-lookup"><span data-stu-id="e97c3-458">Finding hello snapshots taken from these volumes</span></span>
- <span data-ttu-id="e97c3-459">Végső meglévő pillanatképek toomatch hello pillanatképek számát a megadott törlése</span><span class="sxs-lookup"><span data-stu-id="e97c3-459">Deleting eventual existing snapshots toomatch hello number of snapshots you specified</span></span>
- <span data-ttu-id="e97c3-460">HANA pillanatkép létrehozása</span><span class="sxs-lookup"><span data-stu-id="e97c3-460">Creating a HANA snapshot</span></span>
- <span data-ttu-id="e97c3-461">Hello tárolási pillanatkép létrehozásához hello kötetek keresztül</span><span class="sxs-lookup"><span data-stu-id="e97c3-461">Creating hello storage snapshot over hello volumes</span></span>
- <span data-ttu-id="e97c3-462">Hello HANA pillanatkép törlése</span><span class="sxs-lookup"><span data-stu-id="e97c3-462">Deleting hello HANA snapshot</span></span>
- <span data-ttu-id="e97c3-463">Pillanatkép-túl legutóbbi hello átnevezése**.0**</span><span class="sxs-lookup"><span data-stu-id="e97c3-463">Renaming hello most recent snapshot too**.0**</span></span>

<span data-ttu-id="e97c3-464">hello legfontosabb hello parancsfájl része ezt:</span><span class="sxs-lookup"><span data-stu-id="e97c3-464">hello most important part of hello script is this:</span></span>
```
**********************Creating HANA snapshot**********************
Creating hello HANA snapshot with command: "./hdbsql -n localhost -i 01 -U SCADMIN01 "backup data create snapshot"" ...
HANA snapshot created successfully.
**********************Creating Storage snapshot**********************
Taking snapshot hourly.recent for hana_data_lhanad01_t020_vol ...
Snapshot created successfully.
Taking snapshot hourly.recent for hana_log_backup_lhanad01_t020_vol ...
Snapshot created successfully.
Taking snapshot hourly.recent for hana_log_lhanad01_t020_vol ...
Snapshot created successfully.
Taking snapshot hourly.recent for hana_shared_lhanad01_t020_vol ...
Snapshot created successfully.
Taking snapshot hourly.recent for sapmnt_lhanad01_t020_vol ...
Snapshot created successfully.
**********************Deleting HANA snapshot**********************
Deleting hello HANA snapshot with command: "./hdbsql -n localhost -i 01 -U SCADMIN01 "backup data drop snapshot"" ...
HANA snapshot deletion successfully.
```
<span data-ttu-id="e97c3-465">Ettől a példától láthatja, hogyan hello parancsfájl rekordok hello hello HANA pillanatkép létrehozását.</span><span class="sxs-lookup"><span data-stu-id="e97c3-465">You can see from this sample how hello script records hello creation of hello HANA snapshot.</span></span> <span data-ttu-id="e97c3-466">Ez a folyamat hello kibővített esetben hello főcsomópont indítható.</span><span class="sxs-lookup"><span data-stu-id="e97c3-466">In hello scale-out case, this process is initiated on hello master node.</span></span> <span data-ttu-id="e97c3-467">hello főcsomópont hello pillanatképek egyes hello munkavégző csomópontokhoz hello szinkron létrehozását kezdeményezi.</span><span class="sxs-lookup"><span data-stu-id="e97c3-467">hello master node initiates hello synchronous creation of hello snapshots on each of hello worker nodes.</span></span> <span data-ttu-id="e97c3-468">Majd hello tárolási pillanatkép készítésének időpontjában.</span><span class="sxs-lookup"><span data-stu-id="e97c3-468">Then hello storage snapshot is taken.</span></span> <span data-ttu-id="e97c3-469">Hello sikeres végrehajtása esetén hello storage-pillanatfelvételekkel hello HANA pillanatkép törlését.</span><span class="sxs-lookup"><span data-stu-id="e97c3-469">After hello successful execution of hello storage snapshots, hello HANA snapshot is deleted.</span></span>
