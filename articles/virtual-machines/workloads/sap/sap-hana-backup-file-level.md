---
title: "Azure biztonsági mentés HANA fájlszintű aaaSAP |} Microsoft Docs"
description: "Két fő biztonsági mentési lehetőség SAP Hana az Azure virtuális gépeken, ez a cikk foglalkozik SAP HANA Azure biztonsági mentési fájl szinten"
services: virtual-machines-linux
documentationcenter: 
author: hermanndms
manager: timlt
editor: 
ms.service: virtual-machines-linux
ms.devlang: NA
ms.topic: article
ums.tgt_pltfrm: vm-linux
ms.workload: infrastructure-services
ms.date: 3/13/2017
ms.author: rclaus
ms.openlocfilehash: d5a55de5634ac7724e7fd0fa3760c6c408c3db74
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/06/2017
---
# <a name="sap-hana-azure-backup-on-file-level"></a><span data-ttu-id="08139-103">A fájl szintjén SAP HANA Azure biztonsági mentés</span><span class="sxs-lookup"><span data-stu-id="08139-103">SAP HANA Azure Backup on file level</span></span>

## <a name="introduction"></a><span data-ttu-id="08139-104">Bevezetés</span><span class="sxs-lookup"><span data-stu-id="08139-104">Introduction</span></span>

<span data-ttu-id="08139-105">Ez egy SAP HANA biztonsági másolaton kapcsolódó cikkek háromrészes sorozatát része.</span><span class="sxs-lookup"><span data-stu-id="08139-105">This is part of a three-part series of related articles on SAP HANA backup.</span></span> <span data-ttu-id="08139-106">[Biztonsági mentési útmutató SAP Hana Azure virtuális gépeken](./sap-hana-backup-guide.md) áttekintése és információkat nyújt a kezdeti lépések, és [SAP HANA biztonsági másolat alapján storage-pillanatfelvételekkel](./sap-hana-backup-storage-snapshots.md) magában foglalja az hello tárolási pillanatkép-alapú biztonsági mentési beállítás.</span><span class="sxs-lookup"><span data-stu-id="08139-106">[Backup guide for SAP HANA on Azure Virtual Machines](./sap-hana-backup-guide.md) provides an overview and information on getting started, and [SAP HANA backup based on storage snapshots](./sap-hana-backup-storage-snapshots.md) covers hello storage snapshot-based backup option.</span></span>

<span data-ttu-id="08139-107">Hello Azure Virtuálisgép-méretek megnézi, egy látható, hogy egy GS5 lehetővé teszi a mellékelt adatok 64 lemez.</span><span class="sxs-lookup"><span data-stu-id="08139-107">Looking at hello Azure VM sizes, one can see that a GS5 allows 64 attached data disks.</span></span> <span data-ttu-id="08139-108">A nagyméretű SAP HANA-rendszerek esetében lemezek jelentős számú már adatainak és naplókönyvtárainak fájlokat, valószínűleg szoftveres RAID optimális lemez I/O kapacitása együtt kerülhet sor.</span><span class="sxs-lookup"><span data-stu-id="08139-108">For large SAP HANA systems, a significant number of disks might already be taken for data and log files, possibly in combination with software RAID for optimal disk IO throughput.</span></span> <span data-ttu-id="08139-109">majd hello kérdés, ahol toostore SAP HANA biztonsági mentési fájlokat, amelyek sikerült megtelnek hello csatolt adatok lemezek időbeli?</span><span class="sxs-lookup"><span data-stu-id="08139-109">hello question then is where toostore SAP HANA backup files, which could fill up hello attached data disks over time?</span></span> <span data-ttu-id="08139-110">Lásd: [Azure Linux virtuális gépek méretei](../../linux/sizes.md) hello Azure virtuális gép mérete táblákhoz.</span><span class="sxs-lookup"><span data-stu-id="08139-110">See [Sizes for Linux virtual machines in Azure](../../linux/sizes.md) for hello Azure VM size tables.</span></span>

<span data-ttu-id="08139-111">Nincs nincs biztonsági mentési SAP HANA-integráció az Azure Backup szolgáltatás jelenleg.</span><span class="sxs-lookup"><span data-stu-id="08139-111">There is no SAP HANA backup integration available with Azure Backup service at this time.</span></span> <span data-ttu-id="08139-112">hello normál módon toomanage hello fájlszintű biztonsági mentés/visszaállítás egy fájl alapú biztonsági mentéssel keresztül SAP HANA Studio vagy SAP HANA SQL-utasítások segítségével.</span><span class="sxs-lookup"><span data-stu-id="08139-112">hello standard way toomanage backup/restore at hello file level is with a file-based backup via SAP HANA Studio or via SAP HANA SQL statements.</span></span> <span data-ttu-id="08139-113">Lásd: [SAP HANA-SQL és a rendszer nézetek hivatkozás](https://help.sap.com/hana/SAP_HANA_SQL_and_System_Views_Reference_en.pdf) további információt.</span><span class="sxs-lookup"><span data-stu-id="08139-113">See [SAP HANA SQL and System Views Reference](https://help.sap.com/hana/SAP_HANA_SQL_and_System_Views_Reference_en.pdf) for more information.</span></span>

![Az ábrán látható, az SAP HANA Studio hello biztonsági mentési menüpont hello párbeszédpanel](media/sap-hana-backup-file-level/image022.png)

<span data-ttu-id="08139-115">Az ábrán látható, hello párbeszédpanel hello biztonsági mentési menüpont SAP HANA Studio.</span><span class="sxs-lookup"><span data-stu-id="08139-115">This figure shows hello dialog of hello backup menu item in SAP HANA Studio.</span></span> <span data-ttu-id="08139-116">Ha hálózatiadapter-típus &quot;fájl,&quot; egy van toospecify egy útvonal hello fájlrendszer, amelybe a SAP HANA hello biztonságimásolat-fájlok írja.</span><span class="sxs-lookup"><span data-stu-id="08139-116">When choosing type &quot;file,&quot; one has toospecify a path in hello file system where SAP HANA writes hello backup files.</span></span> <span data-ttu-id="08139-117">Visszaállítás hello működik ugyanúgy.</span><span class="sxs-lookup"><span data-stu-id="08139-117">Restore works hello same way.</span></span>

<span data-ttu-id="08139-118">Ez a választás hangvételére egyszerű és egyszerű, amíg nincsenek szempontokat.</span><span class="sxs-lookup"><span data-stu-id="08139-118">While this choice sounds simple and straight forward, there are some considerations.</span></span> <span data-ttu-id="08139-119">Ahogy korábban említettük, az Azure virtuális gép csatolható adatlemezek száma korlátozás van érvényben.</span><span class="sxs-lookup"><span data-stu-id="08139-119">As mentioned before, an Azure VM has a limitation of number of data disks that can be attached.</span></span> <span data-ttu-id="08139-120">Nem lehet kapacitás toostore SAP HANA biztonságimásolat-fájlok hello fájlrendszerek hello VM, hello lemez- és adatbázis-átviteli követelmények, amelyek során előfordulhat, hogy a szoftver hello méretétől függően a RAID használatával több adat között szétosztott lemezek.</span><span class="sxs-lookup"><span data-stu-id="08139-120">There might not be capacity toostore SAP HANA backup files on hello file systems of hello VM, depending on hello size of hello database and disk throughput requirements, which might involve software RAID using striping across multiple data disks.</span></span> <span data-ttu-id="08139-121">Különböző lehetőségek áthelyezésére e biztonságimásolat-fájlokat, és kezelését fájl mérete korlátozások és teljesítmény terabájtos adatkészleteket, kezelésekor a cikk későbbi részében találhatók.</span><span class="sxs-lookup"><span data-stu-id="08139-121">Various options for moving these backup files, and managing file size restrictions and performance when handling terabytes of data, are provided later in this article.</span></span>

<span data-ttu-id="08139-122">Egy másik lehetőség, mely rugalmasabban vonatkozó teljes kapacitás biztosítja, az Azure blob Storage tárolóban.</span><span class="sxs-lookup"><span data-stu-id="08139-122">Another option, which offers more freedom regarding total capacity, is Azure blob storage.</span></span> <span data-ttu-id="08139-123">Míg egy blob is korlátozott too1 TB, hello teljes kapacitás egyetlen blob-tároló jelenleg 500 TB.</span><span class="sxs-lookup"><span data-stu-id="08139-123">While a single blob is also restricted too1 TB, hello total capacity of a single blob container is currently 500 TB.</span></span> <span data-ttu-id="08139-124">Emellett biztosít az ügyfelek hello choice tooselect úgynevezett &quot;lassú&quot; tárolóról, ami egy költség előnye blob.</span><span class="sxs-lookup"><span data-stu-id="08139-124">Additionally, it gives customers hello choice tooselect so-called &quot;cool&quot; blob storage, which has a cost benefit.</span></span> <span data-ttu-id="08139-125">Lásd: [Azure Blob Storage: közbeni és a tárolási rétegek cool](../../../storage/blobs/storage-blob-storage-tiers.md) ritkán használt adatok a blob storage vonatkozó további információért.</span><span class="sxs-lookup"><span data-stu-id="08139-125">See [Azure Blob Storage: Hot and cool storage tiers](../../../storage/blobs/storage-blob-storage-tiers.md) for details about cool blob storage.</span></span>

<span data-ttu-id="08139-126">További biztonsági használja a georeplikált tárolási fiók toostore hello SAP HANA biztonsági mentéseket.</span><span class="sxs-lookup"><span data-stu-id="08139-126">For additional safety, use a geo-replicated storage account toostore hello SAP HANA backups.</span></span> <span data-ttu-id="08139-127">Lásd: [Azure Storage replikációs](../../../storage/common/storage-redundancy.md) tárfiók replikációjának vonatkozó további információért.</span><span class="sxs-lookup"><span data-stu-id="08139-127">See [Azure Storage replication](../../../storage/common/storage-redundancy.md) for details about storage account replication.</span></span>

<span data-ttu-id="08139-128">Egy SAP HANA-biztonsági mentések dedikált virtuális merevlemezek sikerült helyez egy dedikált biztonsági másolatok tárolási fiók georeplikált.</span><span class="sxs-lookup"><span data-stu-id="08139-128">One could place dedicated VHDs for SAP HANA backups in a dedicated backup storage account that is geo-replicated.</span></span> <span data-ttu-id="08139-129">Ellenkező esetben az egyik hello SAP HANA biztonsági mentések megtartása tooa georeplikált tárfiók hello VHD-k, vagy egy másik régióban tooa tárfiók másolja.</span><span class="sxs-lookup"><span data-stu-id="08139-129">Or else one could copy hello VHDs that keep hello SAP HANA backups tooa geo-replicated storage account, or tooa storage account that is in a different region.</span></span>

## <a name="azure-backup-agent"></a><span data-ttu-id="08139-130">Az Azure Backup szolgáltatás ügynöke</span><span class="sxs-lookup"><span data-stu-id="08139-130">Azure backup agent</span></span>

<span data-ttu-id="08139-131">Az Azure biztonsági mentési ajánlatok hello beállítás toonot csak biztonsági teljes virtuális gépeket, de is fájlok és könyvtárak keresztül hello biztonságimásolat-készítő ügynök, amely toobe hello vendég operációs rendszer telepítve van.</span><span class="sxs-lookup"><span data-stu-id="08139-131">Azure backup offers hello option toonot only back up complete VMs, but also files and directories via hello backup agent, which has toobe installed on hello guest OS.</span></span> <span data-ttu-id="08139-132">2016. December, ez az ügynök csak akkor támogatott a Windows, de (lásd: [biztonsági mentése a Windows Server vagy az ügyfél tooAzure hello erőforrás-kezelő telepítési modellel](../../../backup/backup-configure-vault.md)).</span><span class="sxs-lookup"><span data-stu-id="08139-132">But as of December 2016, this agent is only supported on Windows (see [Back up a Windows Server or client tooAzure using hello Resource Manager deployment model](../../../backup/backup-configure-vault.md)).</span></span>

<span data-ttu-id="08139-133">A probléma megoldásához toofirst másolatok SAP HANA biztonságimásolat-fájlok tooa Windows Azure virtuális gép (például keresztül SAMBA megosztás) és a hello Azure Backup szolgáltatás ügynöke onnan.</span><span class="sxs-lookup"><span data-stu-id="08139-133">A workaround is toofirst copy SAP HANA backup files tooa Windows VM on Azure (for example, via SAMBA share) and then use hello Azure backup agent from there.</span></span> <span data-ttu-id="08139-134">Bár ez technikailag lehetséges, azt kellene összetettebbé és lelassul hello biztonsági mentési vagy visszaállítási folyamat túl kicsit miatt toohello másolási hello Linux és a Windows virtuális gép hello között.</span><span class="sxs-lookup"><span data-stu-id="08139-134">While it is technically possible, it would add complexity and slow down hello backup or restore process quite a bit due toohello copy between hello Linux and hello Windows VM.</span></span> <span data-ttu-id="08139-135">Nem ajánlott toofollow ezt a módszert használja.</span><span class="sxs-lookup"><span data-stu-id="08139-135">It is not recommended toofollow this approach.</span></span>

## <a name="azure-blobxfer-utility-details"></a><span data-ttu-id="08139-136">Az Azure blobxfer segédprogram részletei</span><span class="sxs-lookup"><span data-stu-id="08139-136">Azure blobxfer utility details</span></span>

<span data-ttu-id="08139-137">toostore könyvtárak és fájlok az Azure storage, egy használhatja a parancssori felületen vagy a PowerShell-lel, vagy fejlesszen ki egy eszközt hello egyikével [Azure SDK-k](https://azure.microsoft.com/downloads/).</span><span class="sxs-lookup"><span data-stu-id="08139-137">toostore directories and files on Azure storage, one could use CLI or PowerShell, or develop a tool using one of hello [Azure SDKs](https://azure.microsoft.com/downloads/).</span></span> <span data-ttu-id="08139-138">Szerepel továbbá egy használatra kész segédprogram AzCopy, tooAzure adattárolás másolására, de Windows csak (lásd: [adatátvitel az AzCopy parancssori segédprogram használatát ismertető hello](../../../storage/common/storage-use-azcopy.md)).</span><span class="sxs-lookup"><span data-stu-id="08139-138">There is also a ready-to-use utility, AzCopy, for copying data tooAzure storage, but it is Windows only (see [Transfer data with hello AzCopy Command-Line Utility](../../../storage/common/storage-use-azcopy.md)).</span></span>

<span data-ttu-id="08139-139">Ezért blobxfer használt biztonsági mentési SAP HANA-fájlok másolása.</span><span class="sxs-lookup"><span data-stu-id="08139-139">Therefore blobxfer was used for copying SAP HANA backup files.</span></span> <span data-ttu-id="08139-140">Nyílt forráskódú, éles környezetben számos ügyfél használja, és elérhető legyen [GitHub](https://github.com/Azure/blobxfer).</span><span class="sxs-lookup"><span data-stu-id="08139-140">It is open source, used by many customers in production environments, and available on [GitHub](https://github.com/Azure/blobxfer).</span></span> <span data-ttu-id="08139-141">Ez az eszköz lehetővé teszi egy toocopy közvetlen tooeither Azure blob-tároló vagy az Azure-fájlmegosztáshoz.</span><span class="sxs-lookup"><span data-stu-id="08139-141">This tool allows one toocopy data directly tooeither Azure blob storage or Azure file share.</span></span> <span data-ttu-id="08139-142">Számos hasznos szolgáltatáshoz, például az md5 kivonatoló vagy automatikus párhuzamossági, ha egy könyvtárat a több fájl is biztosít.</span><span class="sxs-lookup"><span data-stu-id="08139-142">It also offers a range of useful features, like md5 hash or automatic parallelism when copying a directory with multiple files.</span></span>

## <a name="sap-hana-backup-performance"></a><span data-ttu-id="08139-143">Biztonsági mentési SAP HANA-teljesítmény</span><span class="sxs-lookup"><span data-stu-id="08139-143">SAP HANA backup performance</span></span>

![Ezen a képernyőfelvételen látható hello SAP HANA biztonsági mentési konzol SAP HANA Studio verziója](media/sap-hana-backup-file-level/image023.png)

<span data-ttu-id="08139-145">Ezen a képernyőfelvételen látható hello SAP HANA biztonsági mentési konzol SAP HANA Studio van.</span><span class="sxs-lookup"><span data-stu-id="08139-145">This screenshot is of hello SAP HANA backup console in SAP HANA Studio.</span></span> <span data-ttu-id="08139-146">Hamarosan 42 perc toodo hello biztonsági mentés végrehajtásának hello az egyetlen Azure standard tárolási lemezen 230 GB csatolt toohello HANA VM XFS fájlrendszert használ.</span><span class="sxs-lookup"><span data-stu-id="08139-146">It took about 42 minutes toodo hello backup of hello 230 GB on a single Azure standard storage disk attached toohello HANA VM using XFS file system.</span></span>

![Ezen a képernyőfelvételen látható verziója YaST hello SAP HANA-teszt virtuális gép](media/sap-hana-backup-file-level/image024.png)

<span data-ttu-id="08139-148">Ezen a képernyőfelvételen látható a YaST hello SAP HANA-teszt virtuális gép van.</span><span class="sxs-lookup"><span data-stu-id="08139-148">This screenshot is of YaST on hello SAP HANA test VM.</span></span> <span data-ttu-id="08139-149">Ahogy korábban említettük, egy hello 1 TB méretű lemez egy SAP HANA biztonsági mentés láthatja.</span><span class="sxs-lookup"><span data-stu-id="08139-149">One can see hello 1-TB single disk for SAP HANA backup as mentioned before.</span></span> <span data-ttu-id="08139-150">Hamarosan 42 perc toobackup tartott 230 GB.</span><span class="sxs-lookup"><span data-stu-id="08139-150">It took about 42 minutes toobackup 230 GB.</span></span> <span data-ttu-id="08139-151">Ezenkívül öt 200 GB-os lemezeken lenne csatlakoztatva, és a szoftver RAID md0 létre, csíkozást fölött öt az Azure data köteteit.</span><span class="sxs-lookup"><span data-stu-id="08139-151">In addition, five 200-GB disks were attached and software RAID md0 created, with striping on top of these five Azure data disks.</span></span>

![Ismétlődő ugyanazt biztonsági mentése során a szoftveres RAID csíkozást az öt különböző hello csatolt Azure standard szintű tárolást adatlemezek](media/sap-hana-backup-file-level/image025.png)

<span data-ttu-id="08139-153">Ismétlődő hello ugyanazt biztonsági mentése során a szoftveres RAID csíkozást az öt különböző csatolt Azure standard szintű tárolást adatainak indított lemezek hello biztonságimásolat-készítési időpont 42 perces too10 perc le.</span><span class="sxs-lookup"><span data-stu-id="08139-153">Repeating hello same backup on software RAID with striping across five attached Azure standard storage data disks brought hello backup time from 42 minutes down too10 minutes.</span></span> <span data-ttu-id="08139-154">hello lemezek toohello VM gyorsítótárazása nélkül lenne csatlakoztatva.</span><span class="sxs-lookup"><span data-stu-id="08139-154">hello disks were attached without caching toohello VM.</span></span> <span data-ttu-id="08139-155">Ezért ezt a nyilvánvaló mennyire fontos lemezírás teljesítménye hello biztonságimásolat-készítési időpont szolgál.</span><span class="sxs-lookup"><span data-stu-id="08139-155">So it is obvious how important disk write throughput is for hello backup time.</span></span> <span data-ttu-id="08139-156">Egy ekkor az kapcsoló tooAzure prémium szintű storage toofurther hello folyamat az optimális teljesítmény érdekében.</span><span class="sxs-lookup"><span data-stu-id="08139-156">One could then switch tooAzure premium storage toofurther accelerate hello process for optimal performance.</span></span> <span data-ttu-id="08139-157">Prémium szintű Azure storage általában éles rendszerek esetén használandó.</span><span class="sxs-lookup"><span data-stu-id="08139-157">In general, Azure premium storage should be used for production systems.</span></span>

## <a name="copy-sap-hana-backup-files-tooazure-blob-storage"></a><span data-ttu-id="08139-158">Másolja az SAP HANA biztonságimásolat-fájlok tooAzure blob-tároló</span><span class="sxs-lookup"><span data-stu-id="08139-158">Copy SAP HANA backup files tooAzure blob storage</span></span>

<span data-ttu-id="08139-159">Módon a 2016. December hello legjobban a beállítás tooquickly SAP HANA biztonsági mentési fájlok tárolása az Azure blob Storage tárolóban.</span><span class="sxs-lookup"><span data-stu-id="08139-159">As of December 2016, hello best option tooquickly store SAP HANA backup files is Azure blob storage.</span></span> <span data-ttu-id="08139-160">Több egyetlen blob-tároló rendelkezik egy legfeljebb 500 TB, a legtöbb SAP HANA-rendszerek esetén GS5 virtuális gépen futó Azure-ban tookeep elegendő SAP HANA biztonsági mentések elegendő.</span><span class="sxs-lookup"><span data-stu-id="08139-160">One single blob container has a limit of 500 TB, enough for most SAP HANA systems, running in a GS5 VM on Azure, tookeep sufficient SAP HANA backups.</span></span> <span data-ttu-id="08139-161">Az ügyfelek közötti választás hello rendelkezik &quot;forró&quot; és &quot;cold&quot; blob-tároló (lásd: [Azure Blob Storage: közbeni és a tárolási rétegek cool](../../../storage/blobs/storage-blob-storage-tiers.md)).</span><span class="sxs-lookup"><span data-stu-id="08139-161">Customers have hello choice between &quot;hot&quot; and &quot;cold&quot; blob storage (see [Azure Blob Storage: Hot and cool storage tiers](../../../storage/blobs/storage-blob-storage-tiers.md)).</span></span>

<span data-ttu-id="08139-162">Hello blobxfer eszközzel is könnyen toocopy hello SAP HANA biztonságimásolat-fájlok közvetlen tooAzure blob-tároló.</span><span class="sxs-lookup"><span data-stu-id="08139-162">With hello blobxfer tool, it is easy toocopy hello SAP HANA backup files directly tooAzure blob storage.</span></span>

![Itt látható egy SAP HANA fájl teljes biztonsági mentés fájljainak hello](media/sap-hana-backup-file-level/image026.png)

<span data-ttu-id="08139-164">Itt láthatja egy SAP HANA fájl teljes biztonsági mentés fájljainak hello.</span><span class="sxs-lookup"><span data-stu-id="08139-164">Here one can see hello files of a full SAP HANA file backup.</span></span> <span data-ttu-id="08139-165">Négy fájlok vannak, és hello legnagyobb nincs nagyjából 230 GB.</span><span class="sxs-lookup"><span data-stu-id="08139-165">There are four files and hello biggest one has roughly 230 GB.</span></span>

![Toocopy hello 230 GB tooan Azure standard fiók tárolóra tartott nagyjából 3000 másodpercben](media/sap-hana-backup-file-level/image027.png)

<span data-ttu-id="08139-167">Nem használja az md5 kivonatoló hello kezdeti teszt, végrehajtásának nagyjából 3000 másodperc toocopy hello 230 GB tooan Azure standard fiók tárolóra.</span><span class="sxs-lookup"><span data-stu-id="08139-167">Not using md5 hash in hello initial test, it took roughly 3000 seconds toocopy hello 230 GB tooan Azure standard storage account blob container.</span></span>

![Ezen a képernyőfelvételen látható egyik látható megjelenését a hello Azure-portálon](media/sap-hana-backup-file-level/image028.png)

<span data-ttu-id="08139-169">Ezen a képernyőfelvételen látható egy láthatja, hogyan fog kinézni a hello Azure-portálon.</span><span class="sxs-lookup"><span data-stu-id="08139-169">In this screenshot, one can see how it looks on hello Azure portal.</span></span> <span data-ttu-id="08139-170">A következő nevű blobtárolóban &quot;sap-hana-biztonsági mentések&quot; hozta létre, és tartalmazza a hello négy blobok, amelyek hello SAP HANA biztonságimásolat-fájlok tartalmazzák.</span><span class="sxs-lookup"><span data-stu-id="08139-170">A blob container named &quot;sap-hana-backups&quot; was created and includes hello four blobs, which represent hello SAP HANA backup files.</span></span> <span data-ttu-id="08139-171">Az egyik legyen egy korlátja nagyjából 230 GB.</span><span class="sxs-lookup"><span data-stu-id="08139-171">One of them has a size of roughly 230 GB.</span></span>

<span data-ttu-id="08139-172">hello HANA Studio biztonsági mentési konzol lehetővé teszi, hogy egy toorestrict hello maximális HANA biztonsági mentési fájlok méretét.</span><span class="sxs-lookup"><span data-stu-id="08139-172">hello HANA Studio backup console allows one toorestrict hello max file size of HANA backup files.</span></span> <span data-ttu-id="08139-173">Hello minta környezetben teljesítményét azáltal, hogy több kisebb biztonságimásolat-fájlokat, egy nagy 230 GB-os fájl helyett lehetséges toohave javult.</span><span class="sxs-lookup"><span data-stu-id="08139-173">In hello sample environment, it improved performance by making it possible toohave multiple smaller backup files, instead of one large 230-GB file.</span></span>

![Hello biztonságimásolat-fájl maximális mérete beállítása hello HANA ügyféloldali nem &#39; t hello biztonságimásolat-készítési időpont javítása](media/sap-hana-backup-file-level/image029.png)

<span data-ttu-id="08139-175">Hello biztonságimásolat-fájl maximális mérete beállítása hello HANA ügyféloldali nem &#39; t javítása hello biztonságimásolat-készítési időpont, mert egymás után, az ábrán látható módon írja hello fájlt.</span><span class="sxs-lookup"><span data-stu-id="08139-175">Setting hello backup file size limit on hello HANA side doesn&#39;t improve hello backup time, because hello files are written sequentially as shown in this figure.</span></span> <span data-ttu-id="08139-176">hello méretkorlátot too60 GB lett beállítva, így hello biztonsági másolat négy nagy fájlok hello 230 GB-os helyett egy fájlból.</span><span class="sxs-lookup"><span data-stu-id="08139-176">hello file size limit was set too60 GB, so hello backup created four large data files instead of hello 230-GB single file.</span></span>

![tootest párhuzamosságát hello blobxfer eszköz, a maximális fájlméret hello HANA biztonsági mentések majd állították a too15 GB](media/sap-hana-backup-file-level/image030.png)

<span data-ttu-id="08139-178">tootest párhuzamosságát hello blobxfer eszköz, a maximális fájlméret hello HANA biztonsági mentések majd too15 GB, ami 19 biztonságimásolat-fájlok lett beállítva.</span><span class="sxs-lookup"><span data-stu-id="08139-178">tootest parallelism of hello blobxfer tool, hello max file size for HANA backups was then set too15 GB, which resulted in 19 backup files.</span></span> <span data-ttu-id="08139-179">Ez a konfiguráció hello idő blobxfer toocopy hello 230 GB tooAzure blob Storage állapotba le too875 másodperc 3000 másodperc.</span><span class="sxs-lookup"><span data-stu-id="08139-179">This configuration brought hello time for blobxfer toocopy hello 230 GB tooAzure blob storage from 3000 seconds down too875 seconds.</span></span>

<span data-ttu-id="08139-180">Ez eredménye toohello legfeljebb 60 MB/s írásra, az Azure blob miatt.</span><span class="sxs-lookup"><span data-stu-id="08139-180">This result is due toohello limit of 60 MB/sec for writing an Azure blob.</span></span> <span data-ttu-id="08139-181">Több blobok keresztül párhuzamossági megoldja hello szűk keresztmetszet, de a hátránya: hello blobxfer eszköz toocopy teljesítményének növelése ezek HANA biztonságimásolat-fájlok tooAzure blob-tároló helyezi terhelés hello HANA VM és hello hálózati is.</span><span class="sxs-lookup"><span data-stu-id="08139-181">Parallelism via multiple blobs solves hello bottleneck, but there is a downside: increasing performance of hello blobxfer tool toocopy all these HANA backup files tooAzure blob storage puts load on both hello HANA VM and hello network.</span></span> <span data-ttu-id="08139-182">HANA rendszer működésének hatással lesz.</span><span class="sxs-lookup"><span data-stu-id="08139-182">Operation of HANA system becomes impacted.</span></span>

## <a name="blob-copy-of-dedicated-azure-data-disks-in-backup-software-raid"></a><span data-ttu-id="08139-183">Biztonsági mentési szoftver RAID dedikált Azure adatlemezek BLOB másolata</span><span class="sxs-lookup"><span data-stu-id="08139-183">Blob copy of dedicated Azure data disks in backup software RAID</span></span>

<span data-ttu-id="08139-184">Hello manuális VM adatok lemezes biztonsági mentés, ellentétben a ezt a módszert használja egy nem készítsen biztonsági másolatot a virtuális gép toosave hello egész SAP-telepítésen, HANA adatokat, beleértve az összes hello adatlemezek HANA naplózza fájljai és konfigurációs fájlok.</span><span class="sxs-lookup"><span data-stu-id="08139-184">Unlike hello manual VM data disk backup, in this approach one does not back up all hello data disks on a VM toosave hello whole SAP installation, including HANA data, HANA log files, and config files.</span></span> <span data-ttu-id="08139-185">Ehelyett hello lényege, dedikált toohave szoftveres RAID csíkozást a több Azure adatok VHD-k között SAP HANA fájl teljes biztonsági mentés tárolásához.</span><span class="sxs-lookup"><span data-stu-id="08139-185">Instead, hello idea is toohave dedicated software RAID with striping across multiple Azure data VHDs for storing a full SAP HANA file backup.</span></span> <span data-ttu-id="08139-186">Csak ezek a lemezek, amelyek hello SAP HANA biztonsági másolat egy másolja.</span><span class="sxs-lookup"><span data-stu-id="08139-186">One copies only these disks, which have hello SAP HANA backup.</span></span> <span data-ttu-id="08139-187">Dedikált HANA biztonsági mentési tárfiókokban könnyen megmarad, vagy dedikált tooa csatolt &quot;biztonsági mentése a felügyeleti virtuális gép&quot; további feldolgozásra.</span><span class="sxs-lookup"><span data-stu-id="08139-187">They could easily be kept in a dedicated HANA backup storage account, or attached tooa dedicated &quot;backup management VM&quot; for further processing.</span></span>

![Érintett összes virtuális merevlemez másolása hello segítségével ** start-azurestorageblobcopy ** PowerShell-paranccsal](media/sap-hana-backup-file-level/image031.png)

<span data-ttu-id="08139-189">Hello biztonsági mentési toohello helyi szoftveres RAID után minden érintett virtuális másolása hello segítségével **start-azurestorageblobcopy** PowerShell-parancsot (lásd: [Start-AzureStorageBlobCopy](/powershell/module/azure.storage/start-azurestorageblobcopy)).</span><span class="sxs-lookup"><span data-stu-id="08139-189">After hello backup toohello local software RAID was completed, all VHDs involved were copied using hello **start-azurestorageblobcopy** PowerShell command (see [Start-AzureStorageBlobCopy](/powershell/module/azure.storage/start-azurestorageblobcopy)).</span></span> <span data-ttu-id="08139-190">Csak befolyásolja a dedikált hello fájlrendszere hello biztonságimásolat-fájlok, nincsenek nem kétségei SAP HANA adat- vagy naplófájl fájl konzisztencia hello lemezen.</span><span class="sxs-lookup"><span data-stu-id="08139-190">As it only affects hello dedicated file system for keeping hello backup files, there are no concerns about SAP HANA data or log file consistency on hello disk.</span></span> <span data-ttu-id="08139-191">Ez a parancs előnye, hogy működik a miközben hello virtuális gép online marad.</span><span class="sxs-lookup"><span data-stu-id="08139-191">A benefit of this command is that it works while hello VM stays online.</span></span> <span data-ttu-id="08139-192">toobe bizonyos, hogy egyetlen folyamat sem ír toohello biztonsági mentési paritásos be van állítva, lehet, hogy toounmount előtt hello blob másolási, majd csatlakoztatnia azt újra később.</span><span class="sxs-lookup"><span data-stu-id="08139-192">toobe certain that no process writes toohello backup stripe set, be sure toounmount it before hello blob copy, and mount it again afterwards.</span></span> <span data-ttu-id="08139-193">Vagy egy használhat egy megfelelő túl&quot;rögzítése&quot; hello fájlrendszer.</span><span class="sxs-lookup"><span data-stu-id="08139-193">Or one could use an appropriate way too&quot;freeze&quot; hello file system.</span></span> <span data-ttu-id="08139-194">Például keresztül xfs\_hello XFS fájlrendszer rögzítése.</span><span class="sxs-lookup"><span data-stu-id="08139-194">For example, via xfs\_freeze for hello XFS file system.</span></span>

![Ezen a képernyőfelvételen látható blobok hello listáját hello VHD-k tárolóban az Azure-portálon hello jeleníti meg.](media/sap-hana-backup-file-level/image032.png)

<span data-ttu-id="08139-196">Ezen a képernyőfelvételen látható blobok hello listája látható hello &quot;VHD-k&quot; hello Azure-portálon a tárolóban.</span><span class="sxs-lookup"><span data-stu-id="08139-196">This screenshot shows hello list of blobs in hello &quot;vhds&quot; container on hello Azure portal.</span></span> <span data-ttu-id="08139-197">hello képernyőfelvételen látható hello öt VHD-k, amelyek lenne, csatlakoztatva a toohello SAP HANA server VM tooserve hello szoftver RAID tookeep SAP HANA biztonságimásolat-fájlok formájában.</span><span class="sxs-lookup"><span data-stu-id="08139-197">hello screenshot shows hello five VHDs, which were attached toohello SAP HANA server VM tooserve as hello software RAID tookeep SAP HANA backup files.</span></span> <span data-ttu-id="08139-198">Ezenfelül itt látható hello keresztül hello blob másolási parancs vett öt másolatát.</span><span class="sxs-lookup"><span data-stu-id="08139-198">It also shows hello five copies, which were taken via hello blob copy command.</span></span>

![Tesztelési célokra hello SAP HANA biztonsági mentési szoftver RAID lemezek hello példánya volt csatolt toohello alkalmazáskiszolgálóval VM](media/sap-hana-backup-file-level/image033.png)

<span data-ttu-id="08139-200">Tesztelési célokra hello SAP HANA biztonsági mentési szoftver RAID lemezek hello példánya volt csatolt toohello app server rendszerű virtuális Géphez.</span><span class="sxs-lookup"><span data-stu-id="08139-200">For testing purposes, hello copies of hello SAP HANA backup software RAID disks were attached toohello app server VM.</span></span>

![hello alkalmazáskiszolgálóval VM tooattach hello lemez másolja le volt állítva.](media/sap-hana-backup-file-level/image034.png)

<span data-ttu-id="08139-202">hello alkalmazáskiszolgálóval VM tooattach hello lemez másolja le volt állítva.</span><span class="sxs-lookup"><span data-stu-id="08139-202">hello app server VM was shut down tooattach hello disk copies.</span></span> <span data-ttu-id="08139-203">Hello VM indítás után hello lemezek és hello RAID derített fel megfelelően (csatlakoztatott UUID keresztül).</span><span class="sxs-lookup"><span data-stu-id="08139-203">After starting hello VM, hello disks and hello RAID were discovered correctly (mounted via UUID).</span></span> <span data-ttu-id="08139-204">Csak a hello csatlakoztatási pont hiányzott, amely hello YaST particionáló lett létrehozva.</span><span class="sxs-lookup"><span data-stu-id="08139-204">Only hello mount point was missing, which was created via hello YaST partitioner.</span></span> <span data-ttu-id="08139-205">Ezt követően hello SAP HANA biztonságimásolat-fájlt másolja vált látható az operációs rendszer szintjén.</span><span class="sxs-lookup"><span data-stu-id="08139-205">Afterwards hello SAP HANA backup file copies became visible on OS level.</span></span>

## <a name="copy-sap-hana-backup-files-toonfs-share"></a><span data-ttu-id="08139-206">Másolja a fájlokat biztonsági mentési SAP HANA tooNFS megosztása</span><span class="sxs-lookup"><span data-stu-id="08139-206">Copy SAP HANA backup files tooNFS share</span></span>

<span data-ttu-id="08139-207">toolessen hello gyakorolt lehetséges hatásának a hello SAP HANA-rendszer a teljesítmény vagy a szabad lemezterület szempontjából, egy esetleg érdemes tárolni hello SAP HANA biztonságimásolat-fájlok az NFS-megosztások.</span><span class="sxs-lookup"><span data-stu-id="08139-207">toolessen hello potential impact on hello SAP HANA system from a performance or disk space perspective, one might consider storing hello SAP HANA backup files on an NFS share.</span></span> <span data-ttu-id="08139-208">Technikailag működik, de az azt jelenti, hogy egy második Azure virtuális gép használja, mint az NFS-megosztások hello hello gazdagépe.</span><span class="sxs-lookup"><span data-stu-id="08139-208">Technically it works, but it means using a second Azure VM as hello host of hello NFS share.</span></span> <span data-ttu-id="08139-209">Nem lehet egy kis Virtuálisgép-méretet toohello VM hálózati sávszélesség miatt.</span><span class="sxs-lookup"><span data-stu-id="08139-209">It should not be a small VM size, due toohello VM network bandwidth.</span></span> <span data-ttu-id="08139-210">Ez tenné logika majd lefelé ez tooshut &quot;biztonsági mentése a virtuális gép&quot; és csak emelni feliratkozott hello SAP HANA biztonsági mentés végrehajtásakor.</span><span class="sxs-lookup"><span data-stu-id="08139-210">It would make sense then tooshut down this &quot;backup VM&quot; and only bring it up for executing hello SAP HANA backup.</span></span> <span data-ttu-id="08139-211">Az NFS írás megosztás hello hálózati terheléselosztási helyezi és hatások hello SAP HANA-rendszer, de csupán kezelése hello biztonságimásolat-fájlok ezután hello &quot;biztonsági mentése a virtuális gép&quot; volna nem befolyásolják hello SAP HANA-rendszer semmihez.</span><span class="sxs-lookup"><span data-stu-id="08139-211">Writing on an NFS share puts load on hello network and impacts hello SAP HANA system, but merely managing hello backup files afterwards on hello &quot;backup VM&quot; would not influence hello SAP HANA system at all.</span></span>

![Az NFS-megosztások egy másik Azure virtuális gép csatlakoztatott toohello SAP HANA-kiszolgáló virtuális gép volt](media/sap-hana-backup-file-level/image035.png)

<span data-ttu-id="08139-213">tooverify hello NFS-és nagybetűhasználattal, az NFS-megosztások egy másik Azure virtuális gép csatlakoztatott toohello SAP HANA-kiszolgáló virtuális gép volt.</span><span class="sxs-lookup"><span data-stu-id="08139-213">tooverify hello NFS use case, an NFS share from another Azure VM was mounted toohello SAP HANA server VM.</span></span> <span data-ttu-id="08139-214">Hiba történt az semmilyen különleges NFS hangolása alkalmazza.</span><span class="sxs-lookup"><span data-stu-id="08139-214">There was no special NFS tuning applied.</span></span>

![1 óra és 46 perc toodo hello biztonsági mentés közvetlenül tartott](media/sap-hana-backup-file-level/image036.png)

<span data-ttu-id="08139-216">hello NFS-megosztás lett gyors paritásos készletként, például a hello hello SAP HANA-kiszolgálón.</span><span class="sxs-lookup"><span data-stu-id="08139-216">hello NFS share was a fast stripe set, like hello one on hello SAP HANA server.</span></span> <span data-ttu-id="08139-217">Ettől függetlenül végrehajtásának 1 óra és 46 perc toodo hello közvetlenül hello NFS-megosztás helyett 10 perc, a biztonsági mentési tooa helyi paritásos set írása közben.</span><span class="sxs-lookup"><span data-stu-id="08139-217">Nevertheless, it took 1 hour and 46 minutes toodo hello backup directly on hello NFS share instead of 10 minutes, when writing tooa local stripe set.</span></span>

![hello alternatív nem sokkal gyorsabb, 1 óra 43 perc](media/sap-hana-backup-file-level/image037.png)

<span data-ttu-id="08139-219">hello alternatív történt a biztonsági mentési tooa helyi paritásos készletként, és toohello másolása az NFS-megosztások OS szinten (egy egyszerű **cp - avr** parancs) nem sokkal gyorsabb.</span><span class="sxs-lookup"><span data-stu-id="08139-219">hello alternative of doing a backup tooa local stripe set and copying toohello NFS share on OS level (a simple **cp -avr** command) wasn't much quicker.</span></span> <span data-ttu-id="08139-220">Végrehajtásának 1 óra 43 perc.</span><span class="sxs-lookup"><span data-stu-id="08139-220">It took 1 hour and 43 minutes.</span></span>

<span data-ttu-id="08139-221">Így működik, de a teljesítmény nem volt helyes hello 230 GB-os biztonsági mentési teszteléshez.</span><span class="sxs-lookup"><span data-stu-id="08139-221">So it works, but performance wasn't good for hello 230-GB backup test.</span></span> <span data-ttu-id="08139-222">Lenne a több terabájt még rosszabb.</span><span class="sxs-lookup"><span data-stu-id="08139-222">It would look even worse for multi terabytes.</span></span>

## <a name="copy-sap-hana-backup-files-tooazure-file-service"></a><span data-ttu-id="08139-223">Másolja a biztonságimásolat-fájlok tooAzure Fájlszolgáltatás SAP HANA</span><span class="sxs-lookup"><span data-stu-id="08139-223">Copy SAP HANA backup files tooAzure file service</span></span>

<span data-ttu-id="08139-224">Egy Azure fájlmegosztás belül az Azure Linux virtuális gép lehetséges toomount.</span><span class="sxs-lookup"><span data-stu-id="08139-224">It is possible toomount an Azure file share inside an Azure Linux VM.</span></span> <span data-ttu-id="08139-225">hello cikk [hogyan toouse Linux Azure File storage](../../../storage/files/storage-how-to-use-files-linux.md) kapcsolatos részleteket tartalmazza toodo azt.</span><span class="sxs-lookup"><span data-stu-id="08139-225">hello article [How toouse Azure File storage with Linux](../../../storage/files/storage-how-to-use-files-linux.md) provides details on how toodo it.</span></span> <span data-ttu-id="08139-226">Ne feledje, hogy jelenleg egy 5-TB-os kvótakorlátot egy Azure fájlmegosztás és a fájl mérete legfeljebb 1 TB-os fájlonként.</span><span class="sxs-lookup"><span data-stu-id="08139-226">Keep in mind that there is currently a 5-TB quota limit of one Azure file share, and a file size limit of 1 TB per file.</span></span> <span data-ttu-id="08139-227">Lásd: [Azure Storage méretezhetőségi és teljesítménycéloknak](../../../storage/common/storage-scalability-targets.md) tárhelyet olvashat.</span><span class="sxs-lookup"><span data-stu-id="08139-227">See [Azure Storage Scalability and Performance Targets](../../../storage/common/storage-scalability-targets.md) for information on storage limits.</span></span>

<span data-ttu-id="08139-228">Tesztek kimutatták, azonban SAP HANA biztonsági mentési állapotszolgáltatáson &#39; t közvetlenül az ilyen típusú CIFS csatlakoztatási jelenleg működik.</span><span class="sxs-lookup"><span data-stu-id="08139-228">Tests have shown, however, that SAP HANA backup doesn&#39;t currently work directly with this kind of CIFS mount.</span></span> <span data-ttu-id="08139-229">Azt is van megadva a [SAP Megjegyzés 1820529](https://launchpad.support.sap.com/#/notes/1820529) CIFS nem ajánlott.</span><span class="sxs-lookup"><span data-stu-id="08139-229">It is also stated in [SAP Note 1820529](https://launchpad.support.sap.com/#/notes/1820529) that CIFS is not recommended.</span></span>

![Az ábrán látható hiba az SAP HANA Studio hello a biztonsági mentési párbeszédpanelen](media/sap-hana-backup-file-level/image038.png)

<span data-ttu-id="08139-231">Ez a szám tooback közvetlenül tooa CIFS csatlakoztatott Azure fájlmegosztás mentése közben hello a SAP HANA Studio, a biztonsági mentés párbeszédpanelen jelez hibát.</span><span class="sxs-lookup"><span data-stu-id="08139-231">This figure shows an error in hello backup dialog in SAP HANA Studio, when trying tooback up directly tooa CIFS-mounted Azure file share.</span></span> <span data-ttu-id="08139-232">Így egy toodo egy szabványos SAP HANA biztonsági mentéssel rendelkező VM fájl rendszerben először, és majd másolási hello biztonsági mentés fájljainak ott tooAzure file szolgáltatás.</span><span class="sxs-lookup"><span data-stu-id="08139-232">So one has toodo a standard SAP HANA backup into a VM file system first, and then copy hello backup files from there tooAzure file service.</span></span>

![Az ábrán látható, hogy tartott kapcsolatos 929 másodperc toocopy 19 SAP HANA biztonságimásolat-fájlok](media/sap-hana-backup-file-level/image039.png)

<span data-ttu-id="08139-234">Az ábrán látható, hogy tartott 929 másodperc toocopy kapcsolatos 19 SAP HANA biztonságimásolat-fájlok a teljes méret nagyjából 230 GB toohello Azure fájlmegosztás.</span><span class="sxs-lookup"><span data-stu-id="08139-234">This figure shows that it took about 929 seconds toocopy 19 SAP HANA backup files with a total size of roughly 230 GB toohello Azure file share.</span></span>

![hello forrás mappastruktúrát hello SAP HANA VM lett másolt toohello Azure fájlmegosztás](media/sap-hana-backup-file-level/image040.png)

<span data-ttu-id="08139-236">Ezen a képernyőfelvételen látható egy láthatja, hogy hello forrás mappastruktúrát hello SAP HANA VM volt-e a másolt toohello Azure fájlmegosztás: egy könyvtárat (hana\_biztonsági mentési\_fsl\_15 gb) és egyes biztonsági mentési fájlok 19.</span><span class="sxs-lookup"><span data-stu-id="08139-236">In this screenshot, one can see that hello source directory structure on hello SAP HANA VM was copied toohello Azure file share: one directory (hana\_backup\_fsl\_15gb) and 19 individual backup files.</span></span>

<span data-ttu-id="08139-237">SAP HANA biztonságimásolat-fájlok az Azure files tárolása lehet jövőbeni hello érdekes lehetőségek SAP HANA-fájlok biztonsági másolatait közvetlenül támogatja.</span><span class="sxs-lookup"><span data-stu-id="08139-237">Storing SAP HANA backup files on Azure files could be an interesting option in hello future when SAP HANA file backups support it directly.</span></span> <span data-ttu-id="08139-238">Vagy lehetséges válásakor toomount Azure fájlok NFS keresztül, és hello kvótakorlátot jelentősen nagyobb, mint 5 TB.</span><span class="sxs-lookup"><span data-stu-id="08139-238">Or when it becomes possible toomount Azure files via NFS and hello maximum quota limit is considerably higher than 5 TB.</span></span>

## <a name="next-steps"></a><span data-ttu-id="08139-239">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="08139-239">Next steps</span></span>
* <span data-ttu-id="08139-240">[Biztonsági mentési útmutató SAP Hana Azure virtuális gépeken](sap-hana-backup-guide.md) áttekintése és bevezető információkat biztosít.</span><span class="sxs-lookup"><span data-stu-id="08139-240">[Backup guide for SAP HANA on Azure Virtual Machines](sap-hana-backup-guide.md) gives an overview and information on getting started.</span></span>
* <span data-ttu-id="08139-241">[A storage-pillanatfelvételekkel alapján SAP HANA biztonsági mentés](sap-hana-backup-storage-snapshots.md) hello tárolási pillanatkép-alapú biztonsági mentési beállítás ismerteti.</span><span class="sxs-lookup"><span data-stu-id="08139-241">[SAP HANA backup based on storage snapshots](sap-hana-backup-storage-snapshots.md) describes hello storage snapshot-based backup option.</span></span>
* <span data-ttu-id="08139-242">Hogyan tooestablish magas rendelkezésre állású és az Azure (nagy példányokat), az SAP HANA vész-helyreállítási terv: toolearn [SAP HANA (nagy példányok) magas rendelkezésre állási és vészhelyreállítási helyreállítási Azure](hana-overview-high-availability-disaster-recovery.md).</span><span class="sxs-lookup"><span data-stu-id="08139-242">toolearn how tooestablish high availability and plan for disaster recovery of SAP HANA on Azure (large instances), see [SAP HANA (large instances) high availability and disaster recovery on Azure](hana-overview-high-availability-disaster-recovery.md).</span></span>
