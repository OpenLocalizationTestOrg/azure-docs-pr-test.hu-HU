---
title: "SQL Server-adatbázis áttelepítése SQL Server a virtuális gép |} Microsoft Docs"
description: "Ismerje meg az SQL Server egy helyi felhasználói adatbázis áttelepítése egy Azure virtuális gépen."
services: virtual-machines-windows
documentationcenter: 
author: sabotta
manager: jhubbard
editor: 
tags: azure-service-management
ms.assetid: 00fd08c6-98fa-4d62-a3b8-ca20aa5246b1
ms.service: virtual-machines-sql
ms.workload: iaas-sql-server
ms.tgt_pltfrm: vm-windows-sql-server
ms.devlang: na
ms.topic: article
ms.date: 07/17/2017
ms.author: carlasab
ms.openlocfilehash: 68767534298783083a441aa295611914d0df9db0
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 08/29/2017
---
# <a name="migrate-a-sql-server-database-to-sql-server-in-an-azure-vm"></a><span data-ttu-id="a8fca-103">SQL Server-adatbázis áttelepítése Azure-beli virtuális gépen futó SQL Serverre</span><span class="sxs-lookup"><span data-stu-id="a8fca-103">Migrate a SQL Server database to SQL Server in an Azure VM</span></span>

<span data-ttu-id="a8fca-104">Számos módszer a helyszíni SQL Server felhasználói adatbázis áttelepítése SQL Server egy Azure virtuális gép van.</span><span class="sxs-lookup"><span data-stu-id="a8fca-104">There are a number of methods to migrate an on-premises SQL Server user database to SQL Server in an Azure VM.</span></span> <span data-ttu-id="a8fca-105">Ez a cikk röviden ismertetik a különböző módszerekről, és a legjobb módszer különböző forgatókönyvek esetén ajánlott.</span><span class="sxs-lookup"><span data-stu-id="a8fca-105">This article will briefly discuss various methods and recommend the best method for various scenarios.</span></span>

[!INCLUDE [learn-about-deployment-models](../../../../includes/learn-about-deployment-models-both-include.md)]

## <a name="what-are-the-primary-migration-methods"></a><span data-ttu-id="a8fca-106">Mik az elsődleges áttelepítési módszereinek?</span><span class="sxs-lookup"><span data-stu-id="a8fca-106">What are the primary migration methods?</span></span>
<span data-ttu-id="a8fca-107">Az elsődleges áttelepítési megoldások a következők:</span><span class="sxs-lookup"><span data-stu-id="a8fca-107">The primary migration methods are:</span></span>

* <span data-ttu-id="a8fca-108">Tömörítés használatával a helyszíni biztonsági mentés végrehajtásához, és manuálisan másolja a biztonságimásolat-fájl közzététele az Azure virtuális gépen</span><span class="sxs-lookup"><span data-stu-id="a8fca-108">Perform on-premises backup using compression and manually copy the backup file into the Azure virtual machine</span></span>
* <span data-ttu-id="a8fca-109">URL-cím és az Azure virtuális géphez való visszaállítás az URL-címet a biztonsági mentés</span><span class="sxs-lookup"><span data-stu-id="a8fca-109">Perform a backup to URL and restore into the Azure virtual machine from the URL</span></span>
* <span data-ttu-id="a8fca-110">Válassza le, és ezután a adatainak és naplókönyvtárainak fájlokat másolja az Azure blob storage, majd csatlakoztassa SQL Server Azure virtuális gép URL-címről</span><span class="sxs-lookup"><span data-stu-id="a8fca-110">Detach and then copy the data and log files to Azure blob storage and then attach to SQL Server in Azure VM from URL</span></span>
* <span data-ttu-id="a8fca-111">A helyszíni fizikai számítógép átalakítása Hyper-V virtuális merevlemez feltöltése az Azure Blob storage és ezután telepítheti, mint a új virtuális gép használatával feltöltött virtuális merevlemez</span><span class="sxs-lookup"><span data-stu-id="a8fca-111">Convert on-premises physical machine to Hyper-V VHD, upload to Azure Blob storage, and then deploy as new VM using uploaded VHD</span></span>
* <span data-ttu-id="a8fca-112">Küldje el a merevlemez-meghajtóról Windows Import/Export szolgáltatás használata</span><span class="sxs-lookup"><span data-stu-id="a8fca-112">Ship hard drive using Windows Import/Export Service</span></span>
* <span data-ttu-id="a8fca-113">Ha az AlwaysOn központi telepítése a helyszíni, használja a [replika Azure hozzáadása varázsló](../classic/sql-onprem-availability.md) replikájának létrehozása az Azure és feladatátvételi, mutasson a felhasználók a Azure database-példányt</span><span class="sxs-lookup"><span data-stu-id="a8fca-113">If you have an AlwaysOn deployment on-premises, use the [Add Azure Replica Wizard](../classic/sql-onprem-availability.md) to create a replica in Azure and then failover, pointing users to the Azure database instance</span></span>
* <span data-ttu-id="a8fca-114">SQL Server használata [tranzakciós replikáció](https://msdn.microsoft.com/library/ms151176.aspx) előfizetőként az Azure SQL Server-példány konfigurálását, és tiltsa le a replikációt, mutasson a felhasználók a Azure database-példányt</span><span class="sxs-lookup"><span data-stu-id="a8fca-114">Use SQL Server [transactional replication](https://msdn.microsoft.com/library/ms151176.aspx) to configure the Azure SQL Server instance as a subscriber and then disable replication, pointing users to the Azure database instance</span></span>

> [!TIP]
> <span data-ttu-id="a8fca-115">Ezek a technikák segítségével is adatbázisok áthelyezése az Azure SQL Server virtuális gépek között.</span><span class="sxs-lookup"><span data-stu-id="a8fca-115">You can also use these same techniques to move databases between SQL Server VMs in Azure.</span></span> <span data-ttu-id="a8fca-116">Például nincs egy SQL Server galéria-kép VM frissíthet egy verziójához/kiadásához másik támogatott mód.</span><span class="sxs-lookup"><span data-stu-id="a8fca-116">For example, there is no supported way to upgrade a SQL Server gallery-image VM from one version/edition to another.</span></span> <span data-ttu-id="a8fca-117">Ebben az esetben meg kell hozzon létre egy új SQL Server virtuális Gépet az új verziójához/kiadásához, és hajtsa végre az áttelepítési technikák ebben a cikkben az adatbázisok áthelyezése.</span><span class="sxs-lookup"><span data-stu-id="a8fca-117">In this case, you should create a new SQL Server VM with the new version/edition, and then use one of the migration techniques in this article to move your databases.</span></span> 

## <a name="choosing-your-migration-method"></a><span data-ttu-id="a8fca-118">Az áttelepítési módszer kiválasztása</span><span class="sxs-lookup"><span data-stu-id="a8fca-118">Choosing your migration method</span></span>
<span data-ttu-id="a8fca-119">Az optimális adatátvitel alapteljesítményének az Azure virtuális gép tömörített biztonságimásolat-fájl használatával az adatbázisfájlok áttelepíteni.</span><span class="sxs-lookup"><span data-stu-id="a8fca-119">For optimum data transfer performance, migrate the database files into the Azure VM using a compressed backup file.</span></span>

<span data-ttu-id="a8fca-120">Az állásidő minimalizálása érdekében az adatbázis áttelepítési folyamat során, vagy az AlwaysOn szolgáltatását, vagy a tranzakciós replikáció lehetőséget használja.</span><span class="sxs-lookup"><span data-stu-id="a8fca-120">To minimize downtime during the database migration process, use either the AlwaysOn option or the transactional replication option.</span></span>

<span data-ttu-id="a8fca-121">Ha nincs a fenti módszerek használatát, manuálisan telepítse át az adatbázist.</span><span class="sxs-lookup"><span data-stu-id="a8fca-121">If it is not possible to use the above methods, manually migrate your database.</span></span> <span data-ttu-id="a8fca-122">Ezzel a módszerrel Ön általában elindítja egy után az adatbázis biztonsági másolatának az Azure-adatbázis biztonsági másolatából, és végezze el egy adatbázis visszaállítása.</span><span class="sxs-lookup"><span data-stu-id="a8fca-122">Using this method, you will generally start with a database backup followed by a copy of the database backup into Azure and then perform a database restore.</span></span> <span data-ttu-id="a8fca-123">Szeretne másolni az adatbázisfájlokat magukat az Azure, és csatolja őket.</span><span class="sxs-lookup"><span data-stu-id="a8fca-123">You can also copy the database files themselves into Azure and then attach them.</span></span> <span data-ttu-id="a8fca-124">Többféleképpen az adatbázis migrálása az Azure virtuális gép be ehhez a manuális eljáráshoz-megvalósításához.</span><span class="sxs-lookup"><span data-stu-id="a8fca-124">There are several methods by which you can accomplish this manual process of migrating a database into an Azure VM.</span></span>

> [!NOTE]
> <span data-ttu-id="a8fca-125">Az SQL Server 2014 vagy SQL Server 2016 történő frissítéskor az SQL Server régebbi verzióit, érdemes e módosítások szükségesek.</span><span class="sxs-lookup"><span data-stu-id="a8fca-125">When you upgrade to SQL Server 2014 or SQL Server 2016 from older versions of SQL Server, you should consider whether changes are needed.</span></span> <span data-ttu-id="a8fca-126">Azt javasoljuk, hogy kezelje-e az áttelepítés projekt részeként az SQL Server új verziója nem támogatott funkciók összes függőségét.</span><span class="sxs-lookup"><span data-stu-id="a8fca-126">We recommend that you address all dependencies on features not supported by the new version of SQL Server as part of your migration project.</span></span> <span data-ttu-id="a8fca-127">A támogatott kiadásainak és forgatókönyvek további információkért lásd: [frissítsen az SQL Server](https://msdn.microsoft.com/library/bb677622.aspx).</span><span class="sxs-lookup"><span data-stu-id="a8fca-127">For more information on the supported editions and scenarios, see [Upgrade to SQL Server](https://msdn.microsoft.com/library/bb677622.aspx).</span></span>

<span data-ttu-id="a8fca-128">A következő táblázat felsorolja az egyes elsődleges áttelepítési módszerek és mutatjuk be, amikor az egyes módszerek használata leginkább megfelelő.</span><span class="sxs-lookup"><span data-stu-id="a8fca-128">The following table lists each of the primary migration methods and discusses when the use of each method is most appropriate.</span></span>

| <span data-ttu-id="a8fca-129">Módszer</span><span class="sxs-lookup"><span data-stu-id="a8fca-129">Method</span></span> | <span data-ttu-id="a8fca-130">Source adatbázis-verzió</span><span class="sxs-lookup"><span data-stu-id="a8fca-130">Source database version</span></span> | <span data-ttu-id="a8fca-131">Cél adatbázis-verzió</span><span class="sxs-lookup"><span data-stu-id="a8fca-131">Destination database version</span></span> | <span data-ttu-id="a8fca-132">Source adatbázis biztonsági másolatának mérete megkötés</span><span class="sxs-lookup"><span data-stu-id="a8fca-132">Source database backup size constraint</span></span> | <span data-ttu-id="a8fca-133">Megjegyzések</span><span class="sxs-lookup"><span data-stu-id="a8fca-133">Notes</span></span> |
| --- | --- | --- | --- | --- |
| [<span data-ttu-id="a8fca-134">Tömörítés használatával a helyszíni biztonsági mentés végrehajtásához, és manuálisan másolja a biztonságimásolat-fájl közzététele az Azure virtuális gépen</span><span class="sxs-lookup"><span data-stu-id="a8fca-134">Perform on-premises backup using compression and manually copy the backup file into the Azure virtual machine</span></span>](#backup-and-restore) |<span data-ttu-id="a8fca-135">SQL Server 2005 vagy újabb</span><span class="sxs-lookup"><span data-stu-id="a8fca-135">SQL Server 2005 or greater</span></span> |<span data-ttu-id="a8fca-136">SQL Server 2005 vagy újabb</span><span class="sxs-lookup"><span data-stu-id="a8fca-136">SQL Server 2005 or greater</span></span> |[<span data-ttu-id="a8fca-137">Az Azure virtuális gép tárolási kapacitása</span><span class="sxs-lookup"><span data-stu-id="a8fca-137">Azure VM storage limit</span></span>](https://azure.microsoft.com/documentation/articles/azure-subscription-service-limits/) | <span data-ttu-id="a8fca-138">Ez egy olyan nagyon egyszerű és tesztelt eljárás adatbázisok áthelyezése gépek között.</span><span class="sxs-lookup"><span data-stu-id="a8fca-138">This is a very simple and well-tested technique for moving databases across machines.</span></span> |
| [<span data-ttu-id="a8fca-139">URL-cím és az Azure virtuális géphez való visszaállítás az URL-címet a biztonsági mentés</span><span class="sxs-lookup"><span data-stu-id="a8fca-139">Perform a backup to URL and restore into the Azure virtual machine from the URL</span></span>](#backup-to-url-and-restore) |<span data-ttu-id="a8fca-140">SQL Server 2012 SP1 CU2 vagy gyorsabb</span><span class="sxs-lookup"><span data-stu-id="a8fca-140">SQL Server 2012 SP1 CU2 or greater</span></span> |<span data-ttu-id="a8fca-141">SQL Server 2012 SP1 CU2 vagy gyorsabb</span><span class="sxs-lookup"><span data-stu-id="a8fca-141">SQL Server 2012 SP1 CU2 or greater</span></span> |<span data-ttu-id="a8fca-142">< SQL Server 2016, egyébként < 1 TB-os 12.8 TB</span><span class="sxs-lookup"><span data-stu-id="a8fca-142">< 12.8 TB for SQL Server 2016, otherwise < 1 TB</span></span> | <span data-ttu-id="a8fca-143">Ez a módszer egy másik módja a biztonságimásolat-fájl áthelyezése a virtuális Gépet az Azure storage használatával.</span><span class="sxs-lookup"><span data-stu-id="a8fca-143">This method is just another way to move the backup file to the VM using Azure storage.</span></span> |
| [<span data-ttu-id="a8fca-144">Válassza le és majd másolja az Azure blob storage a adatainak és naplókönyvtárainak fájlokat, majd csatlakoztassa SQL Server Azure virtuális gépen az URL-cím</span><span class="sxs-lookup"><span data-stu-id="a8fca-144">Detach and then copy the data and log files to Azure blob storage and then attach to SQL Server in Azure virtual machine from URL</span></span>](#detach-and-attach-from-url) |<span data-ttu-id="a8fca-145">SQL Server 2005 vagy újabb</span><span class="sxs-lookup"><span data-stu-id="a8fca-145">SQL Server 2005 or greater</span></span> |<span data-ttu-id="a8fca-146">SQL Server 2014 vagy újabb</span><span class="sxs-lookup"><span data-stu-id="a8fca-146">SQL Server 2014 or greater</span></span> |[<span data-ttu-id="a8fca-147">Az Azure virtuális gép tárolási kapacitása</span><span class="sxs-lookup"><span data-stu-id="a8fca-147">Azure VM storage limit</span></span>](https://azure.microsoft.com/documentation/articles/azure-subscription-service-limits/) |<span data-ttu-id="a8fca-148">Ezt a módszert használja, ha azt tervezi, hogy [tárolja ezeket a fájlokat az Azure Blob storage szolgáltatással](https://msdn.microsoft.com/library/dn385720.aspx) és csatolja azokat egy Azure virtuális gép, különösen olyan nagyméretű adatbázisok az SQL Serveren</span><span class="sxs-lookup"><span data-stu-id="a8fca-148">Use this method when you plan to [store these files using the Azure Blob storage service](https://msdn.microsoft.com/library/dn385720.aspx) and attach them to SQL Server running in an Azure VM, particularly with very large databases</span></span> |
| [<span data-ttu-id="a8fca-149">A helyszíni számítógép átalakítása Hyper-V virtuális merevlemezeket, töltse fel az Azure Blob storage és majd a feltöltött virtuális merevlemez használatával új virtuális gép telepítése</span><span class="sxs-lookup"><span data-stu-id="a8fca-149">Convert on-premises machine to Hyper-V VHDs, upload to Azure Blob storage, and then deploy a new virtual machine using uploaded VHD</span></span>](#convert-to-vm-and-upload-to-url-and-deploy-as-new-vm) |<span data-ttu-id="a8fca-150">SQL Server 2005 vagy újabb</span><span class="sxs-lookup"><span data-stu-id="a8fca-150">SQL Server 2005 or greater</span></span> |<span data-ttu-id="a8fca-151">SQL Server 2005 vagy újabb</span><span class="sxs-lookup"><span data-stu-id="a8fca-151">SQL Server 2005 or greater</span></span> |[<span data-ttu-id="a8fca-152">Az Azure virtuális gép tárolási kapacitása</span><span class="sxs-lookup"><span data-stu-id="a8fca-152">Azure VM storage limit</span></span>](https://azure.microsoft.com/documentation/articles/azure-subscription-service-limits/) |<span data-ttu-id="a8fca-153">A következő esetekben használja [állapotba hozása a saját SQL Server licence](../../../sql-database/sql-database-paas-vs-sql-server-iaas.md), az áttelepítés alatt egy adatbázist, amely az SQL Server egy régebbi verzióját futtatja, vagy áttelepítésekor rendszer és a felhasználó adatbázisok együtt az adatbázis függ-e más áttelepítés felhasználói adatbázisokat és/vagy rendszer-adatbázisokat.</span><span class="sxs-lookup"><span data-stu-id="a8fca-153">Use when [bringing your own SQL Server license](../../../sql-database/sql-database-paas-vs-sql-server-iaas.md), when migrating a database that you will run on an older version of SQL Server, or when migrating system and user databases together as part of the migration of database dependent on other user databases and/or system databases.</span></span> |
| [<span data-ttu-id="a8fca-154">Küldje el a merevlemez-meghajtóról Windows Import/Export szolgáltatás használata</span><span class="sxs-lookup"><span data-stu-id="a8fca-154">Ship hard drive using Windows Import/Export Service</span></span>](#ship-hard-drive) |<span data-ttu-id="a8fca-155">SQL Server 2005 vagy újabb</span><span class="sxs-lookup"><span data-stu-id="a8fca-155">SQL Server 2005 or greater</span></span> |<span data-ttu-id="a8fca-156">SQL Server 2005 vagy újabb</span><span class="sxs-lookup"><span data-stu-id="a8fca-156">SQL Server 2005 or greater</span></span> |[<span data-ttu-id="a8fca-157">Az Azure virtuális gép tárolási kapacitása</span><span class="sxs-lookup"><span data-stu-id="a8fca-157">Azure VM storage limit</span></span>](https://azure.microsoft.com/documentation/articles/azure-subscription-service-limits/) |<span data-ttu-id="a8fca-158">Használja a [Windows Import/Export szolgáltatás](../../../storage/common/storage-import-export-service.md) manuális másolásának módszere túl lassú, például a nagyon nagy adatbázisok esetén</span><span class="sxs-lookup"><span data-stu-id="a8fca-158">Use the [Windows Import/Export Service](../../../storage/common/storage-import-export-service.md) when manual copy method is too slow, such as with very large databases</span></span> |
| [<span data-ttu-id="a8fca-159">Használja az Azure replika varázsló hozzáadása</span><span class="sxs-lookup"><span data-stu-id="a8fca-159">Use the Add Azure Replica Wizard</span></span>](../classic/sql-onprem-availability.md) |<span data-ttu-id="a8fca-160">SQL Server 2012-es vagy újabb</span><span class="sxs-lookup"><span data-stu-id="a8fca-160">SQL Server 2012 or greater</span></span> |<span data-ttu-id="a8fca-161">SQL Server 2012-es vagy újabb</span><span class="sxs-lookup"><span data-stu-id="a8fca-161">SQL Server 2012 or greater</span></span> |[<span data-ttu-id="a8fca-162">Az Azure virtuális gép tárolási kapacitása</span><span class="sxs-lookup"><span data-stu-id="a8fca-162">Azure VM storage limit</span></span>](https://azure.microsoft.com/documentation/articles/azure-subscription-service-limits/) |<span data-ttu-id="a8fca-163">Állásidőt, akkor használja, ha az AlwaysOn helyszíni üzembe helyezéssel rendelkezik</span><span class="sxs-lookup"><span data-stu-id="a8fca-163">Minimizes downtime, use when you have an AlwaysOn on-premises deployment</span></span> |
| [<span data-ttu-id="a8fca-164">SQL Server tranzakciós replikáció</span><span class="sxs-lookup"><span data-stu-id="a8fca-164">Use SQL Server transactional replication</span></span>](https://msdn.microsoft.com/library/ms151176.aspx) |<span data-ttu-id="a8fca-165">SQL Server 2005 vagy újabb</span><span class="sxs-lookup"><span data-stu-id="a8fca-165">SQL Server 2005 or greater</span></span> |<span data-ttu-id="a8fca-166">SQL Server 2005 vagy újabb</span><span class="sxs-lookup"><span data-stu-id="a8fca-166">SQL Server 2005 or greater</span></span> |[<span data-ttu-id="a8fca-167">Az Azure virtuális gép tárolási kapacitása</span><span class="sxs-lookup"><span data-stu-id="a8fca-167">Azure VM storage limit</span></span>](https://azure.microsoft.com/documentation/articles/azure-subscription-service-limits/) |<span data-ttu-id="a8fca-168">Ha kell, hogy minimalizálják az állásidőt, és nem az AlwaysOn a helyszíni központi telepítése</span><span class="sxs-lookup"><span data-stu-id="a8fca-168">Use when you need to minimize downtime and do not have an AlwaysOn on-premises deployment</span></span> |

## <a name="backup-and-restore"></a><span data-ttu-id="a8fca-169">Biztonsági mentés és visszaállítás</span><span class="sxs-lookup"><span data-stu-id="a8fca-169">Backup and restore</span></span>
<span data-ttu-id="a8fca-170">Adatbázis biztonsági mentése a tömörítést, a biztonsági másolat a virtuális géphez, majd majd állítsa vissza az adatbázist.</span><span class="sxs-lookup"><span data-stu-id="a8fca-170">Back up your database with compression, copy the backup to the VM, and then restore the database.</span></span> <span data-ttu-id="a8fca-171">Ha a biztonságimásolat-fájl mérete nagyobb, mint 1 TB-os, kell paritásos, mert a Virtuálisgép-lemez maximális mérete 1 TB-os.</span><span class="sxs-lookup"><span data-stu-id="a8fca-171">If your backup file is larger than 1 TB, you must stripe it because the maximum size of a VM disk is 1 TB.</span></span> <span data-ttu-id="a8fca-172">A következő általános lépések segítségével a manuális módszerrel felhasználói adatbázis áttelepítése:</span><span class="sxs-lookup"><span data-stu-id="a8fca-172">Use the following general steps to migrate a user database using this manual method:</span></span>

1. <span data-ttu-id="a8fca-173">Adatbázis teljes biztonsági másolat készítése a helyszíni helyre.</span><span class="sxs-lookup"><span data-stu-id="a8fca-173">Perform a full database backup to an on-premises location.</span></span>
2. <span data-ttu-id="a8fca-174">Hozzon létre, vagy töltse fel a szükséges SQL Server-verzió virtuális gépet.</span><span class="sxs-lookup"><span data-stu-id="a8fca-174">Create or upload a virtual machine with the version of SQL Server desired.</span></span>
3. <span data-ttu-id="a8fca-175">A telepítő kapcsolatot a követelmények alapján.</span><span class="sxs-lookup"><span data-stu-id="a8fca-175">Setup connectivity based on your requirements.</span></span> <span data-ttu-id="a8fca-176">Lásd: [csatlakozni egy SQL Server virtuális gépet az Azure (erőforrás-kezelő)](virtual-machines-windows-sql-connect.md).</span><span class="sxs-lookup"><span data-stu-id="a8fca-176">See [Connect to a SQL Server Virtual Machine on Azure (Resource Manager)](virtual-machines-windows-sql-connect.md).</span></span>
4. <span data-ttu-id="a8fca-177">Másolja a biztonságimásolat-készítő (oka) t a virtuális Géphez a távoli asztal, a Windows Explorer vagy a Másolás parancsot a parancssorba.</span><span class="sxs-lookup"><span data-stu-id="a8fca-177">Copy your backup file(s) to your VM using remote desktop, Windows Explorer or the copy command from a command prompt.</span></span>

## <a name="backup-to-url-and-restore"></a><span data-ttu-id="a8fca-178">Biztonsági mentés URL-címet, a visszaállítás</span><span class="sxs-lookup"><span data-stu-id="a8fca-178">Backup to URL and restore</span></span>
<span data-ttu-id="a8fca-179">Biztonsági mentés egy helyi fájl, akkor helyett használhatja a [URL-cím történő biztonsági mentés](https://msdn.microsoft.com/library/dn435916.aspx) a virtuális Gépet, majd visszaállítja a URL-CÍMRŐL.</span><span class="sxs-lookup"><span data-stu-id="a8fca-179">Instead of backing up to a local file, you can use the [backup to URL](https://msdn.microsoft.com/library/dn435916.aspx) and then restore from URL to the VM.</span></span> <span data-ttu-id="a8fca-180">Az SQL Server 2016 csíkozott biztonságimásolat-készletek támogatottak, ajánlott a teljesítmény, és hosszabb legyen, mint a méretkorlátozásokról / blob szükséges.</span><span class="sxs-lookup"><span data-stu-id="a8fca-180">With SQL Server 2016, striped backup sets are supported, are recommended for performance, and required to exceed the size limits per blob.</span></span> <span data-ttu-id="a8fca-181">Nagyon nagy adatbázisok esetén használatát a [Windows Import/Export szolgáltatás](../../../storage/common/storage-import-export-service.md) ajánlott.</span><span class="sxs-lookup"><span data-stu-id="a8fca-181">For very large databases, the use of the [Windows Import/Export Service](../../../storage/common/storage-import-export-service.md) is recommended.</span></span>

## <a name="detach-and-attach-from-url"></a><span data-ttu-id="a8fca-182">Válassza le, és csatlakoztassa az URL-címe</span><span class="sxs-lookup"><span data-stu-id="a8fca-182">Detach and attach from URL</span></span>
<span data-ttu-id="a8fca-183">Válassza le az adatbázis és naplófájlok fájlokat, és ezeket a [Azure Blob Storage tárolóban](https://msdn.microsoft.com/library/dn385720.aspx).</span><span class="sxs-lookup"><span data-stu-id="a8fca-183">Detach your database and log files and transfer them to [Azure Blob storage](https://msdn.microsoft.com/library/dn385720.aspx).</span></span> <span data-ttu-id="a8fca-184">Majd csatolni az adatbázist, az Azure virtuális gépen az URL-címből.</span><span class="sxs-lookup"><span data-stu-id="a8fca-184">Then attach the database from the URL on your Azure VM.</span></span> <span data-ttu-id="a8fca-185">Akkor használja, ha azt szeretné, hogy a fizikai adatbázis fájlok tárolását a Blob Storage tárolóban.</span><span class="sxs-lookup"><span data-stu-id="a8fca-185">Use this if you want the physical database files to reside in Blob storage.</span></span> <span data-ttu-id="a8fca-186">Ez akkor lehet hasznos, ha nagyon nagy méretű adatbázisokhoz.</span><span class="sxs-lookup"><span data-stu-id="a8fca-186">This might be useful for very large databases.</span></span> <span data-ttu-id="a8fca-187">A következő általános lépések segítségével a manuális módszerrel felhasználói adatbázis áttelepítése:</span><span class="sxs-lookup"><span data-stu-id="a8fca-187">Use the following general steps to migrate a user database using this manual method:</span></span>

1. <span data-ttu-id="a8fca-188">Válassza le a helyszíni adatbázispéldány származó adatbázisfájlok.</span><span class="sxs-lookup"><span data-stu-id="a8fca-188">Detach the database files from the on-premises database instance.</span></span>
2. <span data-ttu-id="a8fca-189">A leválasztott adatbázisfájlok másolása az Azure blob storage használata a [AZCopy parancssori segédprogram](../../../storage/common/storage-use-azcopy.md).</span><span class="sxs-lookup"><span data-stu-id="a8fca-189">Copy the detached database files into Azure blob storage using the [AZCopy command-line utility](../../../storage/common/storage-use-azcopy.md).</span></span>
3. <span data-ttu-id="a8fca-190">Az adatbázisfájlok csatolása az Azure URL-ről az Azure virtuális gép az SQL Server-példány.</span><span class="sxs-lookup"><span data-stu-id="a8fca-190">Attach the database files from the Azure URL to the SQL Server instance in the Azure VM.</span></span>

## <a name="convert-to-vm-and-upload-to-url-and-deploy-as-new-vm"></a><span data-ttu-id="a8fca-191">Konvertálás virtuális gépre, feltöltés a megadott URL-címre, majd üzembe helyezés új virtuális gépként</span><span class="sxs-lookup"><span data-stu-id="a8fca-191">Convert to VM and upload to URL and deploy as new VM</span></span>
<span data-ttu-id="a8fca-192">Ezt a módszert a helyszíni SQL Server-példány összes rendszer és a felhasználói adatbázis áttelepítése az Azure virtuális gép.</span><span class="sxs-lookup"><span data-stu-id="a8fca-192">Use this method to migrate all system and user databases in an on-premises SQL Server instance to Azure virtual machine.</span></span> <span data-ttu-id="a8fca-193">Az alábbi általános lépésekkel végezhető használatával telepítse át a teljes SQL Server-példány a manuális módszerrel:</span><span class="sxs-lookup"><span data-stu-id="a8fca-193">Use the following general steps to migrate an entire SQL Server instance using this manual method:</span></span>

1. <span data-ttu-id="a8fca-194">A Hyper-V virtuális merevlemezek fizikai vagy virtuális gépek átalakítása [Microsoft Virtual Machine Converter](https://technet.microsoft.com/library/dn874008(v=ws.11).aspx).</span><span class="sxs-lookup"><span data-stu-id="a8fca-194">Convert physical or virtual machines to Hyper-V VHDs by using [Microsoft Virtual Machine Converter](https://technet.microsoft.com/library/dn874008(v=ws.11).aspx).</span></span>
2. <span data-ttu-id="a8fca-195">VHD-fájlok feltöltése az Azure Storage használatával a [Add-AzureVHD parancsmag](https://msdn.microsoft.com/library/windowsazure/dn495173.aspx).</span><span class="sxs-lookup"><span data-stu-id="a8fca-195">Upload VHD files to Azure Storage by using the [Add-AzureVHD cmdlet](https://msdn.microsoft.com/library/windowsazure/dn495173.aspx).</span></span>
3. <span data-ttu-id="a8fca-196">Új virtuális gép telepítése a feltöltött virtuális merevlemez használatával.</span><span class="sxs-lookup"><span data-stu-id="a8fca-196">Deploy a new virtual machine by using the uploaded VHD.</span></span>

> [!NOTE]
> <span data-ttu-id="a8fca-197">Áttelepítheti egy teljes alkalmazást, érdemes lehet [Azure Site Recovery](../../../site-recovery/site-recovery-overview.md)].</span><span class="sxs-lookup"><span data-stu-id="a8fca-197">To migrate an entire application, consider using [Azure Site Recovery](../../../site-recovery/site-recovery-overview.md)].</span></span>

## <a name="ship-hard-drive"></a><span data-ttu-id="a8fca-198">Küldje el a merevlemez-meghajtó</span><span class="sxs-lookup"><span data-stu-id="a8fca-198">Ship hard drive</span></span>
<span data-ttu-id="a8fca-199">Használja a [Windows Import/Export szolgáltatás metódus](../../../storage/common/storage-import-export-service.md) nagy mennyiségű adatok átvitele Azure Blob Storage tárolóban lévő olyan helyzetekben, ahol a hálózaton keresztül feltöltése elfogadhatatlanul magas vagy nem valósítható meg.</span><span class="sxs-lookup"><span data-stu-id="a8fca-199">Use the [Windows Import/Export Service method](../../../storage/common/storage-import-export-service.md) to transfer large amounts of file data to Azure Blob storage in situations where uploading over the network is prohibitively expensive or not feasible.</span></span> <span data-ttu-id="a8fca-200">Ezzel a szolgáltatással, hogy az adatok egy Azure-adatközpont, amelyen az adatok lesz feltöltve a tárfiókhoz tartalmazó egy vagy több merevlemezek küldése.</span><span class="sxs-lookup"><span data-stu-id="a8fca-200">With this service, you send one or more hard drives containing that data to an Azure data center, where your data will be uploaded to your storage account.</span></span>

## <a name="next-steps"></a><span data-ttu-id="a8fca-201">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="a8fca-201">Next Steps</span></span>
<span data-ttu-id="a8fca-202">További információ az SQL Servert futtató Azure virtuális gépeken: [SQL Server Azure virtuális gépek – áttekintés](virtual-machines-windows-sql-server-iaas-overview.md).</span><span class="sxs-lookup"><span data-stu-id="a8fca-202">For more information about running SQL Server on Azure Virtual Machines, see [SQL Server on Azure Virtual Machines overview](virtual-machines-windows-sql-server-iaas-overview.md).</span></span>

<span data-ttu-id="a8fca-203">Egy Azure SQL Server virtuális gép létrehozása egy rögzített lemezképből, lásd: [tippek & a "klónozást" Azure SQL-virtuális gépek a rögzített lemezképeket trükkök](https://blogs.msdn.microsoft.com/psssql/2016/07/06/tips-tricks-on-cloning-azure-sql-virtual-machines-from-captured-images/) a CSS SQL Server mérnökök blogjában.</span><span class="sxs-lookup"><span data-stu-id="a8fca-203">For instructions on creating an Azure SQL Server Virtual Machine from a captured image, see [Tips & Tricks on ‘cloning’ Azure SQL virtual machines from captured images](https://blogs.msdn.microsoft.com/psssql/2016/07/06/tips-tricks-on-cloning-azure-sql-virtual-machines-from-captured-images/) on the CSS SQL Server Engineers blog.</span></span>

