---
title: "egy SQL Server adatbázis tooSQL kiszolgáló a virtuális gép aaaMigrate |} Microsoft Docs"
description: "További információk a hogyan toomigrate egy helyi felhasználói adatbázis-kiszolgáló tooSQL egy Azure virtuális gépen."
services: virtual-machines-windows
documentationcenter: 
author: sabotta
manager: jhubbard
editor: 
tags: azure-service-management
ms.assetid: 00fd08c6-98fa-4d62-a3b8-ca20aa5246b1
ms.service: virtual-machines-sql
ms.workload: iaas-sql-server
ms.tgt_pltfrm: vm-windows-sql-server
ms.devlang: na
ms.topic: article
ms.date: 07/17/2017
ms.author: carlasab
ms.openlocfilehash: 9c7aba30304ea40796412d2ddc885f6d4a58be2a
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/06/2017
---
# <a name="migrate-a-sql-server-database-toosql-server-in-an-azure-vm"></a><span data-ttu-id="e43d4-103">Egy SQL Server adatbázis tooSQL kiszolgálót egy Azure virtuális gép áttelepítése</span><span class="sxs-lookup"><span data-stu-id="e43d4-103">Migrate a SQL Server database tooSQL Server in an Azure VM</span></span>

<span data-ttu-id="e43d4-104">Nincsenek módszerek toomigrate számos egy helyi SQL Server felhasználói adatbázis tooSQL kiszolgálót egy Azure virtuális gép.</span><span class="sxs-lookup"><span data-stu-id="e43d4-104">There are a number of methods toomigrate an on-premises SQL Server user database tooSQL Server in an Azure VM.</span></span> <span data-ttu-id="e43d4-105">Ez a cikk röviden ismertetik a különböző módszerekről, és hello legjobb módszer különböző forgatókönyvek esetén ajánlott.</span><span class="sxs-lookup"><span data-stu-id="e43d4-105">This article will briefly discuss various methods and recommend hello best method for various scenarios.</span></span>

[!INCLUDE [learn-about-deployment-models](../../../../includes/learn-about-deployment-models-both-include.md)]

## <a name="what-are-hello-primary-migration-methods"></a><span data-ttu-id="e43d4-106">Mik azok a hello elsődleges áttelepítési módszereinek?</span><span class="sxs-lookup"><span data-stu-id="e43d4-106">What are hello primary migration methods?</span></span>
<span data-ttu-id="e43d4-107">hello elsődleges áttelepítési megoldások a következők:</span><span class="sxs-lookup"><span data-stu-id="e43d4-107">hello primary migration methods are:</span></span>

* <span data-ttu-id="e43d4-108">A helyi biztonsági mentés tömörítés, és manuálisan másolási hello biztonságimásolat-fájl használatával történő hello Azure virtuális gép</span><span class="sxs-lookup"><span data-stu-id="e43d4-108">Perform on-premises backup using compression and manually copy hello backup file into hello Azure virtual machine</span></span>
* <span data-ttu-id="e43d4-109">Hajtsa végre a biztonsági mentési tooURL és hello hello URL-ről az Azure virtuális gép üzembe</span><span class="sxs-lookup"><span data-stu-id="e43d4-109">Perform a backup tooURL and restore into hello Azure virtual machine from hello URL</span></span>
* <span data-ttu-id="e43d4-110">Válassza le és hello adatainak és naplókönyvtárainak fájlok tooAzure blob-tároló másolja, majd csatolja a URL-CÍMRŐL tooSQL Server Azure virtuális gépen</span><span class="sxs-lookup"><span data-stu-id="e43d4-110">Detach and then copy hello data and log files tooAzure blob storage and then attach tooSQL Server in Azure VM from URL</span></span>
* <span data-ttu-id="e43d4-111">Alakítsa át a helyszíni fizikai tooHyper-V virtuális gép, feltöltése a Blob-tároló tooAzure, és telepíteni, új virtuális gép használatával feltöltött virtuális merevlemez</span><span class="sxs-lookup"><span data-stu-id="e43d4-111">Convert on-premises physical machine tooHyper-V VHD, upload tooAzure Blob storage, and then deploy as new VM using uploaded VHD</span></span>
* <span data-ttu-id="e43d4-112">Küldje el a merevlemez-meghajtóról Windows Import/Export szolgáltatás használata</span><span class="sxs-lookup"><span data-stu-id="e43d4-112">Ship hard drive using Windows Import/Export Service</span></span>
* <span data-ttu-id="e43d4-113">Ha az AlwaysOn központi telepítése a helyszíni, használja a hello [replika Azure hozzáadása varázsló](../classic/sql-onprem-availability.md) toocreate replika Azure, majd a feladatátvétel után a felhasználók toohello Azure database-példányt mutat</span><span class="sxs-lookup"><span data-stu-id="e43d4-113">If you have an AlwaysOn deployment on-premises, use hello [Add Azure Replica Wizard](../classic/sql-onprem-availability.md) toocreate a replica in Azure and then failover, pointing users toohello Azure database instance</span></span>
* <span data-ttu-id="e43d4-114">SQL Server használata [tranzakciós replikáció](https://msdn.microsoft.com/library/ms151176.aspx) tooconfigure hello Azure SQL Server-példány előfizetőként és majd tiltsa le a replikációt, válassza a felhasználók toohello Azure database-példányt</span><span class="sxs-lookup"><span data-stu-id="e43d4-114">Use SQL Server [transactional replication](https://msdn.microsoft.com/library/ms151176.aspx) tooconfigure hello Azure SQL Server instance as a subscriber and then disable replication, pointing users toohello Azure database instance</span></span>

> [!TIP]
> <span data-ttu-id="e43d4-115">Az azonos technikák toomove adatbázisok SQL Server virtuális gépek Azure-ban is használható.</span><span class="sxs-lookup"><span data-stu-id="e43d4-115">You can also use these same techniques toomove databases between SQL Server VMs in Azure.</span></span> <span data-ttu-id="e43d4-116">Például nincs nem támogatott módon tooupgrade egy SQL Server galéria-lemezkép virtuális gép egy verziójához/kiadásához tooanother.</span><span class="sxs-lookup"><span data-stu-id="e43d4-116">For example, there is no supported way tooupgrade a SQL Server gallery-image VM from one version/edition tooanother.</span></span> <span data-ttu-id="e43d4-117">Ebben az esetben inkább hozzon létre egy új SQL Server virtuális gép hello új verziójához/kiadásához, és majd használatát hello áttelepítési módszerek egyikét a Ez a cikk toomove az adatbázisokat.</span><span class="sxs-lookup"><span data-stu-id="e43d4-117">In this case, you should create a new SQL Server VM with hello new version/edition, and then use one of hello migration techniques in this article toomove your databases.</span></span> 

## <a name="choosing-your-migration-method"></a><span data-ttu-id="e43d4-118">Az áttelepítési módszer kiválasztása</span><span class="sxs-lookup"><span data-stu-id="e43d4-118">Choosing your migration method</span></span>
<span data-ttu-id="e43d4-119">Az optimális adatátvitel alapteljesítményének át hello adatbázisfájlok hello Azure virtuális gép tömörített biztonságimásolat-fájl használatával.</span><span class="sxs-lookup"><span data-stu-id="e43d4-119">For optimum data transfer performance, migrate hello database files into hello Azure VM using a compressed backup file.</span></span>

<span data-ttu-id="e43d4-120">hello adatbázis áttelepítési folyamat során toominimize állásidő hello AlwaysOn szolgáltatását vagy hello tranzakciós replikáció lehetőséget használhatja.</span><span class="sxs-lookup"><span data-stu-id="e43d4-120">toominimize downtime during hello database migration process, use either hello AlwaysOn option or hello transactional replication option.</span></span>

<span data-ttu-id="e43d4-121">Ha nem lehetséges toouse hello a fenti módszerek, manuálisan telepítse át az adatbázist.</span><span class="sxs-lookup"><span data-stu-id="e43d4-121">If it is not possible toouse hello above methods, manually migrate your database.</span></span> <span data-ttu-id="e43d4-122">Ezzel a módszerrel Ön általában elindítja a hello adatbázis biztonsági másolatának követi az Azure-adatbázis biztonsági másolatából, és végezze el egy adatbázis visszaállítása.</span><span class="sxs-lookup"><span data-stu-id="e43d4-122">Using this method, you will generally start with a database backup followed by a copy of hello database backup into Azure and then perform a database restore.</span></span> <span data-ttu-id="e43d4-123">Maguk hello adatbázisfájlokat másolni az Azure, és csatolja őket.</span><span class="sxs-lookup"><span data-stu-id="e43d4-123">You can also copy hello database files themselves into Azure and then attach them.</span></span> <span data-ttu-id="e43d4-124">Többféleképpen az adatbázis migrálása az Azure virtuális gép be ehhez a manuális eljáráshoz-megvalósításához.</span><span class="sxs-lookup"><span data-stu-id="e43d4-124">There are several methods by which you can accomplish this manual process of migrating a database into an Azure VM.</span></span>

> [!NOTE]
> <span data-ttu-id="e43d4-125">Az SQL Server régebbi verzióit tooSQL Server 2014 vagy SQL Server 2016 frissít, gondolja át e módosítások szükségesek.</span><span class="sxs-lookup"><span data-stu-id="e43d4-125">When you upgrade tooSQL Server 2014 or SQL Server 2016 from older versions of SQL Server, you should consider whether changes are needed.</span></span> <span data-ttu-id="e43d4-126">Azt javasoljuk, hogy kezelje-e az áttelepítés projekt részeként hello új verziója az SQL Server nem támogatja a szolgáltatások összes függősége.</span><span class="sxs-lookup"><span data-stu-id="e43d4-126">We recommend that you address all dependencies on features not supported by hello new version of SQL Server as part of your migration project.</span></span> <span data-ttu-id="e43d4-127">Hello támogatott kiadásainak és forgatókönyvek további információkért lásd: [tooSQL Server frissítési](https://msdn.microsoft.com/library/bb677622.aspx).</span><span class="sxs-lookup"><span data-stu-id="e43d4-127">For more information on hello supported editions and scenarios, see [Upgrade tooSQL Server](https://msdn.microsoft.com/library/bb677622.aspx).</span></span>

<span data-ttu-id="e43d4-128">hello a következő táblázat felsorolja az egyes hello elsődleges áttelepítési módszereinek, valamint ismerteti a legmegfelelőbb az egyes módszerek hello használata esetén.</span><span class="sxs-lookup"><span data-stu-id="e43d4-128">hello following table lists each of hello primary migration methods and discusses when hello use of each method is most appropriate.</span></span>

| <span data-ttu-id="e43d4-129">Módszer</span><span class="sxs-lookup"><span data-stu-id="e43d4-129">Method</span></span> | <span data-ttu-id="e43d4-130">Source adatbázis-verzió</span><span class="sxs-lookup"><span data-stu-id="e43d4-130">Source database version</span></span> | <span data-ttu-id="e43d4-131">Cél adatbázis-verzió</span><span class="sxs-lookup"><span data-stu-id="e43d4-131">Destination database version</span></span> | <span data-ttu-id="e43d4-132">Source adatbázis biztonsági másolatának mérete megkötés</span><span class="sxs-lookup"><span data-stu-id="e43d4-132">Source database backup size constraint</span></span> | <span data-ttu-id="e43d4-133">Megjegyzések</span><span class="sxs-lookup"><span data-stu-id="e43d4-133">Notes</span></span> |
| --- | --- | --- | --- | --- |
| [<span data-ttu-id="e43d4-134">A helyi biztonsági mentés tömörítés, és manuálisan másolási hello biztonságimásolat-fájl használatával történő hello Azure virtuális gép</span><span class="sxs-lookup"><span data-stu-id="e43d4-134">Perform on-premises backup using compression and manually copy hello backup file into hello Azure virtual machine</span></span>](#backup-and-restore) |<span data-ttu-id="e43d4-135">SQL Server 2005 vagy újabb</span><span class="sxs-lookup"><span data-stu-id="e43d4-135">SQL Server 2005 or greater</span></span> |<span data-ttu-id="e43d4-136">SQL Server 2005 vagy újabb</span><span class="sxs-lookup"><span data-stu-id="e43d4-136">SQL Server 2005 or greater</span></span> |[<span data-ttu-id="e43d4-137">Az Azure virtuális gép tárolási kapacitása</span><span class="sxs-lookup"><span data-stu-id="e43d4-137">Azure VM storage limit</span></span>](https://azure.microsoft.com/documentation/articles/azure-subscription-service-limits/) | <span data-ttu-id="e43d4-138">Ez egy olyan nagyon egyszerű és tesztelt eljárás adatbázisok áthelyezése gépek között.</span><span class="sxs-lookup"><span data-stu-id="e43d4-138">This is a very simple and well-tested technique for moving databases across machines.</span></span> |
| [<span data-ttu-id="e43d4-139">Hajtsa végre a biztonsági mentési tooURL és hello hello URL-ről az Azure virtuális gép üzembe</span><span class="sxs-lookup"><span data-stu-id="e43d4-139">Perform a backup tooURL and restore into hello Azure virtual machine from hello URL</span></span>](#backup-to-url-and-restore) |<span data-ttu-id="e43d4-140">SQL Server 2012 SP1 CU2 vagy gyorsabb</span><span class="sxs-lookup"><span data-stu-id="e43d4-140">SQL Server 2012 SP1 CU2 or greater</span></span> |<span data-ttu-id="e43d4-141">SQL Server 2012 SP1 CU2 vagy gyorsabb</span><span class="sxs-lookup"><span data-stu-id="e43d4-141">SQL Server 2012 SP1 CU2 or greater</span></span> |<span data-ttu-id="e43d4-142">< SQL Server 2016, egyébként < 1 TB-os 12.8 TB</span><span class="sxs-lookup"><span data-stu-id="e43d4-142">< 12.8 TB for SQL Server 2016, otherwise < 1 TB</span></span> | <span data-ttu-id="e43d4-143">Ez a módszer egy másik módja toomove hello biztonságimásolat-fájl toohello virtuális gép az Azure storage használatával.</span><span class="sxs-lookup"><span data-stu-id="e43d4-143">This method is just another way toomove hello backup file toohello VM using Azure storage.</span></span> |
| [<span data-ttu-id="e43d4-144">Válassza le és hello adatainak és naplókönyvtárainak fájlok tooAzure blob-tároló másolja, majd csatolja a URL-CÍMRŐL tooSQL Server Azure virtuális gépen</span><span class="sxs-lookup"><span data-stu-id="e43d4-144">Detach and then copy hello data and log files tooAzure blob storage and then attach tooSQL Server in Azure virtual machine from URL</span></span>](#detach-and-attach-from-url) |<span data-ttu-id="e43d4-145">SQL Server 2005 vagy újabb</span><span class="sxs-lookup"><span data-stu-id="e43d4-145">SQL Server 2005 or greater</span></span> |<span data-ttu-id="e43d4-146">SQL Server 2014 vagy újabb</span><span class="sxs-lookup"><span data-stu-id="e43d4-146">SQL Server 2014 or greater</span></span> |[<span data-ttu-id="e43d4-147">Az Azure virtuális gép tárolási kapacitása</span><span class="sxs-lookup"><span data-stu-id="e43d4-147">Azure VM storage limit</span></span>](https://azure.microsoft.com/documentation/articles/azure-subscription-service-limits/) |<span data-ttu-id="e43d4-148">Ezt a módszert használja, ha azt tervezi, túl[tárolja ezeket a fájlokat hello Azure Blob storage szolgáltatással](https://msdn.microsoft.com/library/dn385720.aspx) , és csatolja azokat tooSQL kiszolgáló fut egy Azure virtuális gép, különösen olyan nagyon nagy adatbázisok esetén</span><span class="sxs-lookup"><span data-stu-id="e43d4-148">Use this method when you plan too[store these files using hello Azure Blob storage service](https://msdn.microsoft.com/library/dn385720.aspx) and attach them tooSQL Server running in an Azure VM, particularly with very large databases</span></span> |
| [<span data-ttu-id="e43d4-149">A konvertálás helyszíni tooHyper-V virtuális gép feltöltése a Blob-tároló tooAzure és majd a feltöltött virtuális merevlemez használatával új virtuális gép telepítése</span><span class="sxs-lookup"><span data-stu-id="e43d4-149">Convert on-premises machine tooHyper-V VHDs, upload tooAzure Blob storage, and then deploy a new virtual machine using uploaded VHD</span></span>](#convert-to-vm-and-upload-to-url-and-deploy-as-new-vm) |<span data-ttu-id="e43d4-150">SQL Server 2005 vagy újabb</span><span class="sxs-lookup"><span data-stu-id="e43d4-150">SQL Server 2005 or greater</span></span> |<span data-ttu-id="e43d4-151">SQL Server 2005 vagy újabb</span><span class="sxs-lookup"><span data-stu-id="e43d4-151">SQL Server 2005 or greater</span></span> |[<span data-ttu-id="e43d4-152">Az Azure virtuális gép tárolási kapacitása</span><span class="sxs-lookup"><span data-stu-id="e43d4-152">Azure VM storage limit</span></span>](https://azure.microsoft.com/documentation/articles/azure-subscription-service-limits/) |<span data-ttu-id="e43d4-153">A következő esetekben használja [állapotba hozása a saját SQL Server licence](../../../sql-database/sql-database-paas-vs-sql-server-iaas.md), az áttelepítés alatt egy adatbázist, amely az SQL Server egy régebbi verzióját futtatja, vagy ha áttelepítése rendszer és a felhasználói adatbázisokat együtt részeként hello függ-e más adatbázis áttelepítése felhasználói adatbázisokat és/vagy rendszer-adatbázisokat.</span><span class="sxs-lookup"><span data-stu-id="e43d4-153">Use when [bringing your own SQL Server license](../../../sql-database/sql-database-paas-vs-sql-server-iaas.md), when migrating a database that you will run on an older version of SQL Server, or when migrating system and user databases together as part of hello migration of database dependent on other user databases and/or system databases.</span></span> |
| [<span data-ttu-id="e43d4-154">Küldje el a merevlemez-meghajtóról Windows Import/Export szolgáltatás használata</span><span class="sxs-lookup"><span data-stu-id="e43d4-154">Ship hard drive using Windows Import/Export Service</span></span>](#ship-hard-drive) |<span data-ttu-id="e43d4-155">SQL Server 2005 vagy újabb</span><span class="sxs-lookup"><span data-stu-id="e43d4-155">SQL Server 2005 or greater</span></span> |<span data-ttu-id="e43d4-156">SQL Server 2005 vagy újabb</span><span class="sxs-lookup"><span data-stu-id="e43d4-156">SQL Server 2005 or greater</span></span> |[<span data-ttu-id="e43d4-157">Az Azure virtuális gép tárolási kapacitása</span><span class="sxs-lookup"><span data-stu-id="e43d4-157">Azure VM storage limit</span></span>](https://azure.microsoft.com/documentation/articles/azure-subscription-service-limits/) |<span data-ttu-id="e43d4-158">Használjon hello [Windows Import/Export szolgáltatás](../../../storage/common/storage-import-export-service.md) manuális másolásának módszere túl lassú, például a nagyon nagy adatbázisok esetén</span><span class="sxs-lookup"><span data-stu-id="e43d4-158">Use hello [Windows Import/Export Service](../../../storage/common/storage-import-export-service.md) when manual copy method is too slow, such as with very large databases</span></span> |
| [<span data-ttu-id="e43d4-159">Használjon hello Azure replika hozzáadása varázsló</span><span class="sxs-lookup"><span data-stu-id="e43d4-159">Use hello Add Azure Replica Wizard</span></span>](../classic/sql-onprem-availability.md) |<span data-ttu-id="e43d4-160">SQL Server 2012-es vagy újabb</span><span class="sxs-lookup"><span data-stu-id="e43d4-160">SQL Server 2012 or greater</span></span> |<span data-ttu-id="e43d4-161">SQL Server 2012-es vagy újabb</span><span class="sxs-lookup"><span data-stu-id="e43d4-161">SQL Server 2012 or greater</span></span> |[<span data-ttu-id="e43d4-162">Az Azure virtuális gép tárolási kapacitása</span><span class="sxs-lookup"><span data-stu-id="e43d4-162">Azure VM storage limit</span></span>](https://azure.microsoft.com/documentation/articles/azure-subscription-service-limits/) |<span data-ttu-id="e43d4-163">Állásidőt, akkor használja, ha az AlwaysOn helyszíni üzembe helyezéssel rendelkezik</span><span class="sxs-lookup"><span data-stu-id="e43d4-163">Minimizes downtime, use when you have an AlwaysOn on-premises deployment</span></span> |
| [<span data-ttu-id="e43d4-164">SQL Server tranzakciós replikáció</span><span class="sxs-lookup"><span data-stu-id="e43d4-164">Use SQL Server transactional replication</span></span>](https://msdn.microsoft.com/library/ms151176.aspx) |<span data-ttu-id="e43d4-165">SQL Server 2005 vagy újabb</span><span class="sxs-lookup"><span data-stu-id="e43d4-165">SQL Server 2005 or greater</span></span> |<span data-ttu-id="e43d4-166">SQL Server 2005 vagy újabb</span><span class="sxs-lookup"><span data-stu-id="e43d4-166">SQL Server 2005 or greater</span></span> |[<span data-ttu-id="e43d4-167">Az Azure virtuális gép tárolási kapacitása</span><span class="sxs-lookup"><span data-stu-id="e43d4-167">Azure VM storage limit</span></span>](https://azure.microsoft.com/documentation/articles/azure-subscription-service-limits/) |<span data-ttu-id="e43d4-168">Ha a toominimize állásidő kell, és nem rendelkezik az AlwaysOn a helyszíni központi telepítése</span><span class="sxs-lookup"><span data-stu-id="e43d4-168">Use when you need toominimize downtime and do not have an AlwaysOn on-premises deployment</span></span> |

## <a name="backup-and-restore"></a><span data-ttu-id="e43d4-169">Biztonsági mentés és visszaállítás</span><span class="sxs-lookup"><span data-stu-id="e43d4-169">Backup and restore</span></span>
<span data-ttu-id="e43d4-170">Adatbázis biztonsági mentése a tömörítést, hello biztonsági mentési toohello virtuális gép másolása, majd majd a hello adatbázis visszaállítása.</span><span class="sxs-lookup"><span data-stu-id="e43d4-170">Back up your database with compression, copy hello backup toohello VM, and then restore hello database.</span></span> <span data-ttu-id="e43d4-171">Ha a biztonságimásolat-fájl mérete nagyobb, mint 1 TB-os, mivel a Virtuálisgép-lemez maximális méretén hello 1 TB-os kell paritásos.</span><span class="sxs-lookup"><span data-stu-id="e43d4-171">If your backup file is larger than 1 TB, you must stripe it because hello maximum size of a VM disk is 1 TB.</span></span> <span data-ttu-id="e43d4-172">A következő általános lépéseket toomigrate egy felhasználói adatbázis, a manuális módszerrel hello használata:</span><span class="sxs-lookup"><span data-stu-id="e43d4-172">Use hello following general steps toomigrate a user database using this manual method:</span></span>

1. <span data-ttu-id="e43d4-173">Hajtsa végre a teljes adatbázis biztonsági mentési tooan helyszíni helyét.</span><span class="sxs-lookup"><span data-stu-id="e43d4-173">Perform a full database backup tooan on-premises location.</span></span>
2. <span data-ttu-id="e43d4-174">Hozzon létre, vagy töltse fel a virtuális gép hello verziójával, az SQL Server szükséges.</span><span class="sxs-lookup"><span data-stu-id="e43d4-174">Create or upload a virtual machine with hello version of SQL Server desired.</span></span>
3. <span data-ttu-id="e43d4-175">A telepítő kapcsolatot a követelmények alapján.</span><span class="sxs-lookup"><span data-stu-id="e43d4-175">Setup connectivity based on your requirements.</span></span> <span data-ttu-id="e43d4-176">Lásd: [csatlakozzon az SQL Server virtuális gépet az Azure (erőforrás-kezelő) tooa](virtual-machines-windows-sql-connect.md).</span><span class="sxs-lookup"><span data-stu-id="e43d4-176">See [Connect tooa SQL Server Virtual Machine on Azure (Resource Manager)](virtual-machines-windows-sql-connect.md).</span></span>
4. <span data-ttu-id="e43d4-177">Másolja a biztonságimásolat-készítő (oka) t tooyour virtuális gép használata a távoli asztal, a Windows Explorer vagy a hello Másolás parancsot a parancssorból.</span><span class="sxs-lookup"><span data-stu-id="e43d4-177">Copy your backup file(s) tooyour VM using remote desktop, Windows Explorer or hello copy command from a command prompt.</span></span>

## <a name="backup-toourl-and-restore"></a><span data-ttu-id="e43d4-178">Biztonsági mentési tooURL és visszaállítása</span><span class="sxs-lookup"><span data-stu-id="e43d4-178">Backup tooURL and restore</span></span>
<span data-ttu-id="e43d4-179">Ahelyett, hogy a biztonsági másolatot tooa helyi fájlt, használhatja a hello [biztonsági mentési tooURL](https://msdn.microsoft.com/library/dn435916.aspx) majd állítsa vissza az URL-cím toohello virtuális gép.</span><span class="sxs-lookup"><span data-stu-id="e43d4-179">Instead of backing up tooa local file, you can use hello [backup tooURL](https://msdn.microsoft.com/library/dn435916.aspx) and then restore from URL toohello VM.</span></span> <span data-ttu-id="e43d4-180">Az SQL Server 2016 csíkozott biztonságimásolat-készletek támogatottak, javasolt a teljesítmény és tooexceed hello méretkorlátait / blob szükséges.</span><span class="sxs-lookup"><span data-stu-id="e43d4-180">With SQL Server 2016, striped backup sets are supported, are recommended for performance, and required tooexceed hello size limits per blob.</span></span> <span data-ttu-id="e43d4-181">Nagyon nagy adatbázisok esetén hello hello használata [Windows Import/Export szolgáltatás](../../../storage/common/storage-import-export-service.md) ajánlott.</span><span class="sxs-lookup"><span data-stu-id="e43d4-181">For very large databases, hello use of hello [Windows Import/Export Service](../../../storage/common/storage-import-export-service.md) is recommended.</span></span>

## <a name="detach-and-attach-from-url"></a><span data-ttu-id="e43d4-182">Válassza le, és csatlakoztassa az URL-címe</span><span class="sxs-lookup"><span data-stu-id="e43d4-182">Detach and attach from URL</span></span>
<span data-ttu-id="e43d4-183">Válassza le az adatbázis és naplófájlok fájlokat, és helyezze túl[Azure Blob Storage tárolóban](https://msdn.microsoft.com/library/dn385720.aspx).</span><span class="sxs-lookup"><span data-stu-id="e43d4-183">Detach your database and log files and transfer them too[Azure Blob storage](https://msdn.microsoft.com/library/dn385720.aspx).</span></span> <span data-ttu-id="e43d4-184">Majd csatolja hello adatbázis a hello URL-CÍMRŐL az Azure virtuális gépen.</span><span class="sxs-lookup"><span data-stu-id="e43d4-184">Then attach hello database from hello URL on your Azure VM.</span></span> <span data-ttu-id="e43d4-185">Akkor használja, ha azt szeretné, hogy hello fizikai adatbázis fájlok tooreside a Blob Storage tárolóban.</span><span class="sxs-lookup"><span data-stu-id="e43d4-185">Use this if you want hello physical database files tooreside in Blob storage.</span></span> <span data-ttu-id="e43d4-186">Ez akkor lehet hasznos, ha nagyon nagy méretű adatbázisokhoz.</span><span class="sxs-lookup"><span data-stu-id="e43d4-186">This might be useful for very large databases.</span></span> <span data-ttu-id="e43d4-187">A következő általános lépéseket toomigrate egy felhasználói adatbázis, a manuális módszerrel hello használata:</span><span class="sxs-lookup"><span data-stu-id="e43d4-187">Use hello following general steps toomigrate a user database using this manual method:</span></span>

1. <span data-ttu-id="e43d4-188">Válassza le a hello adatbázisfájlja hello helyszíni adatbázispéldány.</span><span class="sxs-lookup"><span data-stu-id="e43d4-188">Detach hello database files from hello on-premises database instance.</span></span>
2. <span data-ttu-id="e43d4-189">Leválasztott hello adatbázisfájlok másolása az Azure blob storage hello használatának [AZCopy parancssori segédprogram](../../../storage/common/storage-use-azcopy.md).</span><span class="sxs-lookup"><span data-stu-id="e43d4-189">Copy hello detached database files into Azure blob storage using hello [AZCopy command-line utility](../../../storage/common/storage-use-azcopy.md).</span></span>
3. <span data-ttu-id="e43d4-190">Fájlcsatolás hello adatbázis a hello Azure URL-cím toohello SQL Server-példányok hello Azure virtuális Gépen.</span><span class="sxs-lookup"><span data-stu-id="e43d4-190">Attach hello database files from hello Azure URL toohello SQL Server instance in hello Azure VM.</span></span>

## <a name="convert-toovm-and-upload-toourl-and-deploy-as-new-vm"></a><span data-ttu-id="e43d4-191">Alakítsa át a tooVM és tooURL feltöltése, új virtuális gép telepítése</span><span class="sxs-lookup"><span data-stu-id="e43d4-191">Convert tooVM and upload tooURL and deploy as new VM</span></span>
<span data-ttu-id="e43d4-192">Használja a metódus toomigrate összes rendszer és a felhasználói adatbázis egy helyi SQL Server példány tooAzure virtuális gépen.</span><span class="sxs-lookup"><span data-stu-id="e43d4-192">Use this method toomigrate all system and user databases in an on-premises SQL Server instance tooAzure virtual machine.</span></span> <span data-ttu-id="e43d4-193">A következő általános lépéseket toomigrate teljes SQL Server-példány a manuális módszerrel hello használata:</span><span class="sxs-lookup"><span data-stu-id="e43d4-193">Use hello following general steps toomigrate an entire SQL Server instance using this manual method:</span></span>

1. <span data-ttu-id="e43d4-194">A konvertálás fizikai vagy virtuális gépek tooHyper-V virtuális merevlemezek használatával [Microsoft Virtual Machine Converter](https://technet.microsoft.com/library/dn874008(v=ws.11).aspx).</span><span class="sxs-lookup"><span data-stu-id="e43d4-194">Convert physical or virtual machines tooHyper-V VHDs by using [Microsoft Virtual Machine Converter](https://technet.microsoft.com/library/dn874008(v=ws.11).aspx).</span></span>
2. <span data-ttu-id="e43d4-195">Töltse fel a VHD-fájlok tooAzure tárolási hello segítségével [Add-AzureVHD parancsmag](https://msdn.microsoft.com/library/windowsazure/dn495173.aspx).</span><span class="sxs-lookup"><span data-stu-id="e43d4-195">Upload VHD files tooAzure Storage by using hello [Add-AzureVHD cmdlet](https://msdn.microsoft.com/library/windowsazure/dn495173.aspx).</span></span>
3. <span data-ttu-id="e43d4-196">Központi telepítése egy új virtuális gép hello segítségével feltöltött virtuális merevlemez.</span><span class="sxs-lookup"><span data-stu-id="e43d4-196">Deploy a new virtual machine by using hello uploaded VHD.</span></span>

> [!NOTE]
> <span data-ttu-id="e43d4-197">Fontolja meg egy egész alkalmazás toomigrate [Azure Site Recovery](../../../site-recovery/site-recovery-overview.md)].</span><span class="sxs-lookup"><span data-stu-id="e43d4-197">toomigrate an entire application, consider using [Azure Site Recovery](../../../site-recovery/site-recovery-overview.md)].</span></span>

## <a name="ship-hard-drive"></a><span data-ttu-id="e43d4-198">Küldje el a merevlemez-meghajtó</span><span class="sxs-lookup"><span data-stu-id="e43d4-198">Ship hard drive</span></span>
<span data-ttu-id="e43d4-199">Használjon hello [Windows Import/Export szolgáltatás metódus](../../../storage/common/storage-import-export-service.md) tootransfer nagy mennyiségű fájl adatok tooAzure olyan helyzetekben, ahol hello hálózaton feltöltése elfogadhatatlanul magas vagy nem valósítható meg a Blob-tároló.</span><span class="sxs-lookup"><span data-stu-id="e43d4-199">Use hello [Windows Import/Export Service method](../../../storage/common/storage-import-export-service.md) tootransfer large amounts of file data tooAzure Blob storage in situations where uploading over hello network is prohibitively expensive or not feasible.</span></span> <span data-ttu-id="e43d4-200">Ezzel a szolgáltatással egyik küldi el, vagy további merevlemez-meghajtókat tartalmazó adott tooan az Azure data adatközpont, amelyen az adatok lesznek feltöltve tooyour tárfiók.</span><span class="sxs-lookup"><span data-stu-id="e43d4-200">With this service, you send one or more hard drives containing that data tooan Azure data center, where your data will be uploaded tooyour storage account.</span></span>

## <a name="next-steps"></a><span data-ttu-id="e43d4-201">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="e43d4-201">Next Steps</span></span>
<span data-ttu-id="e43d4-202">További információ az SQL Servert futtató Azure virtuális gépeken: [SQL Server Azure virtuális gépek – áttekintés](virtual-machines-windows-sql-server-iaas-overview.md).</span><span class="sxs-lookup"><span data-stu-id="e43d4-202">For more information about running SQL Server on Azure Virtual Machines, see [SQL Server on Azure Virtual Machines overview](virtual-machines-windows-sql-server-iaas-overview.md).</span></span>

<span data-ttu-id="e43d4-203">Egy Azure SQL Server virtuális gép létrehozása egy rögzített lemezképből, lásd: [tippek & a "klónozást" Azure SQL-virtuális gépek a rögzített lemezképeket trükkök](https://blogs.msdn.microsoft.com/psssql/2016/07/06/tips-tricks-on-cloning-azure-sql-virtual-machines-from-captured-images/) hello CSS SQL Server mérnökök blogjában.</span><span class="sxs-lookup"><span data-stu-id="e43d4-203">For instructions on creating an Azure SQL Server Virtual Machine from a captured image, see [Tips & Tricks on ‘cloning’ Azure SQL virtual machines from captured images](https://blogs.msdn.microsoft.com/psssql/2016/07/06/tips-tricks-on-cloning-azure-sql-virtual-machines-from-captured-images/) on hello CSS SQL Server Engineers blog.</span></span>

