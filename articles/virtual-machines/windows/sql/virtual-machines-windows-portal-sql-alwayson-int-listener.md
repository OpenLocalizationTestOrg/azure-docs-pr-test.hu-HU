---
title: "egy SQL Server rendelkezésre állási csoport figyelőjének az Azure virtuális gépeken aaaCreate |} Microsoft Docs"
description: "Részletes útmutatást ad a figyelő egy Always On rendelkezésre állási csoport létrehozása az SQL Server Azure virtuális gépeken"
services: virtual-machines
documentationcenter: na
author: MikeRayMSFT
manager: jhubbard
editor: monicar
ms.assetid: d1f291e9-9af2-41ba-9d29-9541e3adcfcf
ms.service: virtual-machines-sql
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: vm-windows-sql-server
ms.workload: iaas-sql-server
ms.date: 05/01/2017
ms.author: mikeray
ms.openlocfilehash: c6a44dc5c7c18b572c2bf5772b4651b7210aacbd
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/06/2017
---
# <a name="configure-a-load-balancer-for-an-always-on-availability-group-in-azure"></a><span data-ttu-id="4921c-103">A terheléselosztó egy Always On rendelkezésre állási csoport konfigurálása az Azure-ban</span><span class="sxs-lookup"><span data-stu-id="4921c-103">Configure a load balancer for an Always On availability group in Azure</span></span>
<span data-ttu-id="4921c-104">Ez a cikk azt ismerteti, hogyan toocreate egy terheléselosztót egy SQL Server Always On rendelkezésre állási csoport az Azure virtuális gépen is fut az Azure Resource Manager eszközzel.</span><span class="sxs-lookup"><span data-stu-id="4921c-104">This article explains how toocreate a load balancer for a SQL Server Always On availability group in Azure virtual machines that are running with Azure Resource Manager.</span></span> <span data-ttu-id="4921c-105">Rendelkezésre állási csoport egy adott terheléselosztóhoz szükséges, ha a hello SQL-kiszolgálópéldányok el vannak az Azure virtuális gépeken.</span><span class="sxs-lookup"><span data-stu-id="4921c-105">An availability group requires a load balancer when hello SQL Server instances are on Azure virtual machines.</span></span> <span data-ttu-id="4921c-106">hello terheléselosztó hello rendelkezésre állási csoport figyelőjének hello IP-címét tárolja.</span><span class="sxs-lookup"><span data-stu-id="4921c-106">hello load balancer stores hello IP address for hello availability group listener.</span></span> <span data-ttu-id="4921c-107">Rendelkezésre állási csoport több régióba is, ha minden egyes régió egy terhelés-kiegyenlítő van szüksége.</span><span class="sxs-lookup"><span data-stu-id="4921c-107">If an availability group spans multiple regions, each region needs a load balancer.</span></span>

<span data-ttu-id="4921c-108">toocomplete ebben a feladatban van szüksége a Resource Manager rendszert futtató Azure virtuális gépeken telepített egy SQL Server rendelkezésre állási csoport toohave.</span><span class="sxs-lookup"><span data-stu-id="4921c-108">toocomplete this task, you need toohave a SQL Server availability group deployed on Azure virtual machines that are running with Resource Manager.</span></span> <span data-ttu-id="4921c-109">Mindkét SQL Server virtuális gépek kell tartozniuk toohello azonos rendelkezésre állási csoportot.</span><span class="sxs-lookup"><span data-stu-id="4921c-109">Both SQL Server virtual machines must belong toohello same availability set.</span></span> <span data-ttu-id="4921c-110">Használhatja a hello [Microsoft sablon](virtual-machines-windows-portal-sql-alwayson-availability-groups.md) tooautomatically hello rendelkezésre állási csoport létrehozására az erőforrás-kezelőben.</span><span class="sxs-lookup"><span data-stu-id="4921c-110">You can use hello [Microsoft template](virtual-machines-windows-portal-sql-alwayson-availability-groups.md) tooautomatically create hello availability group in Resource Manager.</span></span> <span data-ttu-id="4921c-111">Ez a sablon automatikusan létrehoz egy belső terheléselosztót.</span><span class="sxs-lookup"><span data-stu-id="4921c-111">This template automatically creates an internal load balancer for you.</span></span> 

<span data-ttu-id="4921c-112">Ha kívánja, akkor [manuálisan konfigurálnia a rendelkezésre állási csoport](virtual-machines-windows-portal-sql-alwayson-availability-groups-manual.md).</span><span class="sxs-lookup"><span data-stu-id="4921c-112">If you prefer, you can [manually configure an availability group](virtual-machines-windows-portal-sql-alwayson-availability-groups-manual.md).</span></span>

<span data-ttu-id="4921c-113">Ez a cikk megköveteli, hogy a rendelkezésre állási csoportok már be van állítva.</span><span class="sxs-lookup"><span data-stu-id="4921c-113">This article requires that your availability groups are already configured.</span></span>  

<span data-ttu-id="4921c-114">Kapcsolódó témakörök az alábbiak:</span><span class="sxs-lookup"><span data-stu-id="4921c-114">Related topics include:</span></span>

* [<span data-ttu-id="4921c-115">Always On rendelkezésre állási csoportok konfigurálása az Azure virtuális gép (GUI)</span><span class="sxs-lookup"><span data-stu-id="4921c-115">Configure Always On availability groups in Azure VM (GUI)</span></span>](virtual-machines-windows-portal-sql-alwayson-availability-groups-manual.md)   
* [<span data-ttu-id="4921c-116">Egy VNet – VNet-kapcsolat beállítása az Azure Resource Manager és a PowerShell használatával</span><span class="sxs-lookup"><span data-stu-id="4921c-116">Configure a VNet-to-VNet connection by using Azure Resource Manager and PowerShell</span></span>](../../../vpn-gateway/vpn-gateway-vnet-vnet-rm-ps.md)

<span data-ttu-id="4921c-117">Érdekében ez a cikk keresztül, hozzon létre, és konfigurálja a terheléselosztó hello Azure-portálon.</span><span class="sxs-lookup"><span data-stu-id="4921c-117">By walking through this article, you create and configure a load balancer in hello Azure portal.</span></span> <span data-ttu-id="4921c-118">Hello folyamat befejezése után konfigurálnia hello toouse hello IP-címet terheléselosztóról hello hello elérhetőségi csoport figyelője.</span><span class="sxs-lookup"><span data-stu-id="4921c-118">After hello process is complete, you configure hello cluster toouse hello IP address from hello load balancer for hello availability group listener.</span></span>

## <a name="create-and-configure-hello-load-balancer-in-hello-azure-portal"></a><span data-ttu-id="4921c-119">Létrehozhat és konfigurálhat hello terheléselosztó hello Azure-portálon</span><span class="sxs-lookup"><span data-stu-id="4921c-119">Create and configure hello load balancer in hello Azure portal</span></span>
<span data-ttu-id="4921c-120">Az hello ezen részén hello feladat a következő:</span><span class="sxs-lookup"><span data-stu-id="4921c-120">In this portion of hello task, do hello following:</span></span>

1. <span data-ttu-id="4921c-121">Hello terheléselosztó létrehozása hello Azure-portálon, és hello IP-címének beállítása.</span><span class="sxs-lookup"><span data-stu-id="4921c-121">In hello Azure portal, create hello load balancer and configure hello IP address.</span></span>
2. <span data-ttu-id="4921c-122">Hello háttér-készlet beállítása.</span><span class="sxs-lookup"><span data-stu-id="4921c-122">Configure hello back-end pool.</span></span>
3. <span data-ttu-id="4921c-123">Hello mintavétel létrehozása.</span><span class="sxs-lookup"><span data-stu-id="4921c-123">Create hello probe.</span></span> 
4. <span data-ttu-id="4921c-124">Hello terheléselosztási szabályok beállítása.</span><span class="sxs-lookup"><span data-stu-id="4921c-124">Set hello load balancing rules.</span></span>

> [!NOTE]
> <span data-ttu-id="4921c-125">Ha több erőforráscsoportok és régiókban hello SQL Server-példányokat, hajtsa végre az kétszer, egyszer minden erőforráscsoportban.</span><span class="sxs-lookup"><span data-stu-id="4921c-125">If hello SQL Server instances are in multiple resource groups and regions, perform each step twice, once in each resource group.</span></span>
> 
> 

### <a name="step-1-create-hello-load-balancer-and-configure-hello-ip-address"></a><span data-ttu-id="4921c-126">1. lépés: Hello terheléselosztó létrehozása, és hello IP-cím konfigurálása</span><span class="sxs-lookup"><span data-stu-id="4921c-126">Step 1: Create hello load balancer and configure hello IP address</span></span>
<span data-ttu-id="4921c-127">Először hozzon létre hello terheléselosztóhoz.</span><span class="sxs-lookup"><span data-stu-id="4921c-127">First, create hello load balancer.</span></span> 

1. <span data-ttu-id="4921c-128">Hello Azure-portálon nyissa meg hello SQL Server virtuális gépeket tartalmazó erőforráscsoport hello.</span><span class="sxs-lookup"><span data-stu-id="4921c-128">In hello Azure portal, open hello resource group that contains hello SQL Server virtual machines.</span></span> 

2. <span data-ttu-id="4921c-129">Hello erőforráscsoportban, kattintson a **Hozzáadás**.</span><span class="sxs-lookup"><span data-stu-id="4921c-129">In hello resource group, click **Add**.</span></span>

3. <span data-ttu-id="4921c-130">Keresse meg **terheléselosztó** majd hello keresési eredmények között, jelölje ki **terheléselosztó**, által közzétett **Microsoft**.</span><span class="sxs-lookup"><span data-stu-id="4921c-130">Search for **load balancer** and then, in hello search results, select **Load Balancer**, which is published by **Microsoft**.</span></span>

4. <span data-ttu-id="4921c-131">A hello **terheléselosztó** panelen kattintson a **létrehozása**.</span><span class="sxs-lookup"><span data-stu-id="4921c-131">On hello **Load Balancer** blade, click **Create**.</span></span>

5. <span data-ttu-id="4921c-132">A hello **létrehozás terheléselosztó** párbeszédpanel hello terheléselosztó adja meg az alábbiak szerint:</span><span class="sxs-lookup"><span data-stu-id="4921c-132">In hello **Create load balancer** dialog box, configure hello load balancer as follows:</span></span>

   | <span data-ttu-id="4921c-133">Beállítás</span><span class="sxs-lookup"><span data-stu-id="4921c-133">Setting</span></span> | <span data-ttu-id="4921c-134">Érték</span><span class="sxs-lookup"><span data-stu-id="4921c-134">Value</span></span> |
   | --- | --- |
   | <span data-ttu-id="4921c-135">**Name (Név)**</span><span class="sxs-lookup"><span data-stu-id="4921c-135">**Name**</span></span> |<span data-ttu-id="4921c-136">Hello terheléselosztó képviselő szöveges nevét.</span><span class="sxs-lookup"><span data-stu-id="4921c-136">A text name representing hello load balancer.</span></span> <span data-ttu-id="4921c-137">Például **sqlLB**.</span><span class="sxs-lookup"><span data-stu-id="4921c-137">For example, **sqlLB**.</span></span> |
   | <span data-ttu-id="4921c-138">**Típus**</span><span class="sxs-lookup"><span data-stu-id="4921c-138">**Type**</span></span> |<span data-ttu-id="4921c-139">**Belső**: a legtöbb megvalósítások használja egy belső terheléselosztó, amely lehetővé teszi az alkalmazások hello belül azonos virtuális hálózati tooconnect toohello rendelkezésre állási csoport.</span><span class="sxs-lookup"><span data-stu-id="4921c-139">**Internal**: Most implementations use an internal load balancer, which allows applications within hello same virtual network tooconnect toohello availability group.</span></span>  </br> <span data-ttu-id="4921c-140">**Külső**: lehetővé teszi az alkalmazások tooconnect toohello rendelkezésre állási csoport nyilvános internetkapcsolaton keresztül.</span><span class="sxs-lookup"><span data-stu-id="4921c-140">**External**: Allows applications tooconnect toohello availability group through a public Internet connection.</span></span> |
   | <span data-ttu-id="4921c-141">**Virtuális hálózat**</span><span class="sxs-lookup"><span data-stu-id="4921c-141">**Virtual network**</span></span> |<span data-ttu-id="4921c-142">Válassza ki, amelyek hello SQL Server intances hello virtuális hálózat.</span><span class="sxs-lookup"><span data-stu-id="4921c-142">Select hello virtual network that hello SQL Server intances are in.</span></span> |
   | <span data-ttu-id="4921c-143">**Alhálózat**</span><span class="sxs-lookup"><span data-stu-id="4921c-143">**Subnet**</span></span> |<span data-ttu-id="4921c-144">Válassza ki, amelyek az SQL Server-példányokat hello hello alhálózat.</span><span class="sxs-lookup"><span data-stu-id="4921c-144">Select hello subnet that hello SQL Server instances are in.</span></span> |
   | <span data-ttu-id="4921c-145">**IP-cím hozzárendelése**</span><span class="sxs-lookup"><span data-stu-id="4921c-145">**IP address assignment**</span></span> |<span data-ttu-id="4921c-146">**Statikus**</span><span class="sxs-lookup"><span data-stu-id="4921c-146">**Static**</span></span> |
   | <span data-ttu-id="4921c-147">**Magánhálózati IP-cím**</span><span class="sxs-lookup"><span data-stu-id="4921c-147">**Private IP address**</span></span> |<span data-ttu-id="4921c-148">Adja meg a hello alhálózat elérhető IP-címeit.</span><span class="sxs-lookup"><span data-stu-id="4921c-148">Specify an available IP address from hello subnet.</span></span> <span data-ttu-id="4921c-149">Használja az IP-cím, egy figyelő hello fürt létrehozásakor.</span><span class="sxs-lookup"><span data-stu-id="4921c-149">Use this IP address when you create a listener on hello cluster.</span></span> <span data-ttu-id="4921c-150">Egy PowerShell-parancsfájlt, a cikk későbbi részében használni ezt a címet hello `$ILBIP` változó.</span><span class="sxs-lookup"><span data-stu-id="4921c-150">In a PowerShell script, later in this article, use this address for hello `$ILBIP` variable.</span></span> |
   | <span data-ttu-id="4921c-151">**Előfizetés**</span><span class="sxs-lookup"><span data-stu-id="4921c-151">**Subscription**</span></span> |<span data-ttu-id="4921c-152">Ha több előfizetéssel rendelkezik, ez a mező jelenhet meg.</span><span class="sxs-lookup"><span data-stu-id="4921c-152">If you have multiple subscriptions, this field might appear.</span></span> <span data-ttu-id="4921c-153">Válassza ki, hogy szeretné-e az ehhez az erőforráshoz tooassociate hello előfizetést.</span><span class="sxs-lookup"><span data-stu-id="4921c-153">Select hello subscription that you want tooassociate with this resource.</span></span> <span data-ttu-id="4921c-154">Azt az általában hello ugyanahhoz az előfizetéshez hello rendelkezésre állási csoporthoz tartozó összes hello erőforrás.</span><span class="sxs-lookup"><span data-stu-id="4921c-154">It is normally hello same subscription as all hello resources for hello availability group.</span></span> |
   | <span data-ttu-id="4921c-155">**Erőforráscsoport**</span><span class="sxs-lookup"><span data-stu-id="4921c-155">**Resource group**</span></span> |<span data-ttu-id="4921c-156">Válassza ki, amelyek az SQL Server-példányokat hello hello erőforráscsoport.</span><span class="sxs-lookup"><span data-stu-id="4921c-156">Select hello resource group that hello SQL Server instances are in.</span></span> |
   | <span data-ttu-id="4921c-157">**Hely**</span><span class="sxs-lookup"><span data-stu-id="4921c-157">**Location**</span></span> |<span data-ttu-id="4921c-158">Válassza ki a hello Azure-beli hely, amelyek hello SQL Server-példányokat.</span><span class="sxs-lookup"><span data-stu-id="4921c-158">Select hello Azure location that hello SQL Server instances are in.</span></span> |

6. <span data-ttu-id="4921c-159">Kattintson a **Create** (Létrehozás) gombra.</span><span class="sxs-lookup"><span data-stu-id="4921c-159">Click **Create**.</span></span> 

<span data-ttu-id="4921c-160">Azure hello terheléselosztót hoz létre.</span><span class="sxs-lookup"><span data-stu-id="4921c-160">Azure creates hello load balancer.</span></span> <span data-ttu-id="4921c-161">hello terheléselosztóhoz tartozik, adott hálózati tooa, alhálózaton, erőforráscsoportot és helyet.</span><span class="sxs-lookup"><span data-stu-id="4921c-161">hello load balancer belongs tooa specific network, subnet, resource group, and location.</span></span> <span data-ttu-id="4921c-162">Azure hello feladat befejezése után ellenőrizze a hello terheléselosztási beállításokat az Azure-ban.</span><span class="sxs-lookup"><span data-stu-id="4921c-162">After Azure completes hello task, verify hello load balancer settings in Azure.</span></span> 

### <a name="step-2-configure-hello-back-end-pool"></a><span data-ttu-id="4921c-163">2. lépés: Hello háttér-készlet konfigurálása</span><span class="sxs-lookup"><span data-stu-id="4921c-163">Step 2: Configure hello back-end pool</span></span>
<span data-ttu-id="4921c-164">Az Azure hívások hello háttér címkészletet *háttérkészlet*.</span><span class="sxs-lookup"><span data-stu-id="4921c-164">Azure calls hello back-end address pool *backend pool*.</span></span> <span data-ttu-id="4921c-165">Ebben az esetben a hello háttér-készlet hello címek hello két SQL Server-példányok a rendelkezésre állási csoportban.</span><span class="sxs-lookup"><span data-stu-id="4921c-165">In this case, hello back-end pool is hello addresses of hello two SQL Server instances in your availability group.</span></span> 

1. <span data-ttu-id="4921c-166">Az erőforráscsoportban kattintson a létrehozott hello terheléselosztóhoz.</span><span class="sxs-lookup"><span data-stu-id="4921c-166">In your resource group, click hello load balancer that you created.</span></span> 

2. <span data-ttu-id="4921c-167">A **beállítások**, kattintson a **háttérkészletek**.</span><span class="sxs-lookup"><span data-stu-id="4921c-167">On **Settings**, click **Backend pools**.</span></span>

3. <span data-ttu-id="4921c-168">A **háttérkészletek**, kattintson a **Hozzáadás** toocreate egy háttér címkészletet.</span><span class="sxs-lookup"><span data-stu-id="4921c-168">On **Backend pools**, click **Add** toocreate a back-end address pool.</span></span> 

4. <span data-ttu-id="4921c-169">A **háttérkészlet hozzáadása**a **neve**, adjon meg egy nevet hello háttér-készlet.</span><span class="sxs-lookup"><span data-stu-id="4921c-169">On **Add backend pool**, under **Name**, type a name for hello back-end pool.</span></span>

5. <span data-ttu-id="4921c-170">A **virtuális gépek**, kattintson a **adja hozzá a virtuális gépek**.</span><span class="sxs-lookup"><span data-stu-id="4921c-170">Under **Virtual machines**, click **Add a virtual machine**.</span></span> 

6. <span data-ttu-id="4921c-171">A **válassza ki a virtuális gépek**, kattintson a **rendelkezésre állási csoport kiválasztása**, majd adja meg a hello rendelkezésre állási csoportban, hogy hello SQL Server virtuális gépek tartozik.</span><span class="sxs-lookup"><span data-stu-id="4921c-171">Under **Choose virtual machines**, click **Choose an availability set**, and then specify hello availability set that hello SQL Server virtual machines belong to.</span></span>

7. <span data-ttu-id="4921c-172">Hello rendelkezésre állási csoport kiválasztása után kattintson **válassza ki a virtuális gépek hello**, válasszon hello két olyan virtuális gépet, amely az SQL Server-példányokat hello hello rendelkezésre állási csoportban, és kattintson **Válasszon**.</span><span class="sxs-lookup"><span data-stu-id="4921c-172">After you have chosen hello availability set, click **Choose hello virtual machines**, select hello two virtual machines that host hello SQL Server instances in hello availability group, and then click **Select**.</span></span> 

8. <span data-ttu-id="4921c-173">Kattintson a **OK** tooclose hello paneleket az **válassza ki a virtuális gépek**, és **háttérkészlet hozzáadása**.</span><span class="sxs-lookup"><span data-stu-id="4921c-173">Click **OK** tooclose hello blades for **Choose virtual machines**, and **Add backend pool**.</span></span> 

<span data-ttu-id="4921c-174">Azure frissíti hello háttér címkészletet hello beállításait.</span><span class="sxs-lookup"><span data-stu-id="4921c-174">Azure updates hello settings for hello back-end address pool.</span></span> <span data-ttu-id="4921c-175">A rendelkezésre állási csoport már két SQL Server-példányokat készletét.</span><span class="sxs-lookup"><span data-stu-id="4921c-175">Now your availability set has a pool of two SQL Server instances.</span></span>

### <a name="step-3-create-a-probe"></a><span data-ttu-id="4921c-176">3. lépés: A mintavétel létrehozása</span><span class="sxs-lookup"><span data-stu-id="4921c-176">Step 3: Create a probe</span></span>
<span data-ttu-id="4921c-177">hello mintavételi határozza meg, hogyan Azure ellenőrzi, amelyek hello SQL Server-példány éppen birtokolja hello rendelkezésre állási csoport figyelőjét.</span><span class="sxs-lookup"><span data-stu-id="4921c-177">hello probe defines how Azure verifies which of hello SQL Server instances currently owns hello availability group listener.</span></span> <span data-ttu-id="4921c-178">Azure-vizsgálat hello szolgáltatás hello mintavételi létrehozásakor meghatározó port hello IP-címe alapján.</span><span class="sxs-lookup"><span data-stu-id="4921c-178">Azure probes hello service based on hello IP address on a port that you define when you create hello probe.</span></span>

1. <span data-ttu-id="4921c-179">Hello terheléselosztó **beállítások** panelen kattintson a **állapot-mintavételi csomagjai**.</span><span class="sxs-lookup"><span data-stu-id="4921c-179">On hello load balancer **Settings** blade, click **Health probes**.</span></span> 

2. <span data-ttu-id="4921c-180">A hello **állapot-mintavételi csomagjai** panelen kattintson a **Hozzáadás**.</span><span class="sxs-lookup"><span data-stu-id="4921c-180">On hello **Health probes** blade, click **Add**.</span></span>

3. <span data-ttu-id="4921c-181">Hello mintavétel konfigurálása hello **Hozzáadás mintavételi** panelen.</span><span class="sxs-lookup"><span data-stu-id="4921c-181">Configure hello probe on hello **Add probe** blade.</span></span> <span data-ttu-id="4921c-182">A következő értékek tooconfigure hello mintavételi használata hello:</span><span class="sxs-lookup"><span data-stu-id="4921c-182">Use hello following values tooconfigure hello probe:</span></span>

   | <span data-ttu-id="4921c-183">Beállítás</span><span class="sxs-lookup"><span data-stu-id="4921c-183">Setting</span></span> | <span data-ttu-id="4921c-184">Érték</span><span class="sxs-lookup"><span data-stu-id="4921c-184">Value</span></span> |
   | --- | --- |
   | <span data-ttu-id="4921c-185">**Name (Név)**</span><span class="sxs-lookup"><span data-stu-id="4921c-185">**Name**</span></span> |<span data-ttu-id="4921c-186">Hello mintavételi képviselő szöveges nevét.</span><span class="sxs-lookup"><span data-stu-id="4921c-186">A text name representing hello probe.</span></span> <span data-ttu-id="4921c-187">Például **SQLAlwaysOnEndPointProbe**.</span><span class="sxs-lookup"><span data-stu-id="4921c-187">For example, **SQLAlwaysOnEndPointProbe**.</span></span> |
   | <span data-ttu-id="4921c-188">**Protocol (Protokoll)**</span><span class="sxs-lookup"><span data-stu-id="4921c-188">**Protocol**</span></span> |<span data-ttu-id="4921c-189">**TCP**</span><span class="sxs-lookup"><span data-stu-id="4921c-189">**TCP**</span></span> |
   | <span data-ttu-id="4921c-190">**Port**</span><span class="sxs-lookup"><span data-stu-id="4921c-190">**Port**</span></span> |<span data-ttu-id="4921c-191">A rendelkezésre álló portot is használhat.</span><span class="sxs-lookup"><span data-stu-id="4921c-191">You can use any available port.</span></span> <span data-ttu-id="4921c-192">Például *59999*.</span><span class="sxs-lookup"><span data-stu-id="4921c-192">For example, *59999*.</span></span> |
   | <span data-ttu-id="4921c-193">**Időköz**</span><span class="sxs-lookup"><span data-stu-id="4921c-193">**Interval**</span></span> |<span data-ttu-id="4921c-194">*5*</span><span class="sxs-lookup"><span data-stu-id="4921c-194">*5*</span></span> |
   | <span data-ttu-id="4921c-195">**Sérült küszöbérték**</span><span class="sxs-lookup"><span data-stu-id="4921c-195">**Unhealthy threshold**</span></span> |<span data-ttu-id="4921c-196">*2*</span><span class="sxs-lookup"><span data-stu-id="4921c-196">*2*</span></span> |

4.  <span data-ttu-id="4921c-197">Kattintson az **OK** gombra.</span><span class="sxs-lookup"><span data-stu-id="4921c-197">Click **OK**.</span></span> 

> [!NOTE]
> <span data-ttu-id="4921c-198">Győződjön meg arról, hogy a megadott hello port a hello tűzfalat mindkét SQL Server-példányok nyitva-e.</span><span class="sxs-lookup"><span data-stu-id="4921c-198">Make sure that hello port you specify is open on hello firewall of both SQL Server instances.</span></span> <span data-ttu-id="4921c-199">Mindkét esetben szükséges egy bejövő forgalomra vonatkozó szabály hello TCP-portot használja.</span><span class="sxs-lookup"><span data-stu-id="4921c-199">Both instances require an inbound rule for hello TCP port that you use.</span></span> <span data-ttu-id="4921c-200">További információkért lásd: [hozzáadása vagy szerkesztése tűzfalszabály](http://technet.microsoft.com/library/cc753558.aspx).</span><span class="sxs-lookup"><span data-stu-id="4921c-200">For more information, see [Add or Edit Firewall Rule](http://technet.microsoft.com/library/cc753558.aspx).</span></span> 
> 
> 

<span data-ttu-id="4921c-201">Azure hello mintavételi hoz létre, és melyik SQL Server-példány hello figyelő hello rendelkezésre állási csoport rendelkezik tootest használja.</span><span class="sxs-lookup"><span data-stu-id="4921c-201">Azure creates hello probe and then uses it tootest which SQL Server instance has hello listener for hello availability group.</span></span>

### <a name="step-4-set-hello-load-balancing-rules"></a><span data-ttu-id="4921c-202">4. lépés: Hello terheléselosztási szabályok beállítása</span><span class="sxs-lookup"><span data-stu-id="4921c-202">Step 4: Set hello load balancing rules</span></span>
<span data-ttu-id="4921c-203">hello terheléselosztási szabályok konfigurálása, hogyan hello terheléselosztó irányítja a forgalmat toohello SQL Server-példányokat.</span><span class="sxs-lookup"><span data-stu-id="4921c-203">hello load balancing rules configure how hello load balancer routes traffic toohello SQL Server instances.</span></span> <span data-ttu-id="4921c-204">Ez a terheléselosztó engedélyeznie a közvetlen kiszolgálói válasz mert hello két SQL Server-példányok csak az egyik hello rendelkezésre állási csoport figyelőjének erőforrás tulajdonosa egyszerre.</span><span class="sxs-lookup"><span data-stu-id="4921c-204">For this load balancer, you enable direct server return because only one of hello two SQL Server instances owns hello availability group listener resource at a time.</span></span>

1. <span data-ttu-id="4921c-205">Hello terheléselosztó **beállítások** panelen kattintson a **terheléselosztási szabályok**.</span><span class="sxs-lookup"><span data-stu-id="4921c-205">On hello load balancer **Settings** blade, click **Load balancing rules**.</span></span> 

2. <span data-ttu-id="4921c-206">A hello **terheléselosztási szabályok** panelen kattintson a **Hozzáadás**.</span><span class="sxs-lookup"><span data-stu-id="4921c-206">On hello **Load balancing rules** blade, click **Add**.</span></span>

3. <span data-ttu-id="4921c-207">A hello **Hozzáadás terheléselosztási szabályok** panelen hello terheléselosztási szabály konfigurálása.</span><span class="sxs-lookup"><span data-stu-id="4921c-207">On hello **Add load balancing rules** blade, configure hello load balancing rule.</span></span> <span data-ttu-id="4921c-208">A következő beállítások hello használata:</span><span class="sxs-lookup"><span data-stu-id="4921c-208">Use hello following settings:</span></span> 

   | <span data-ttu-id="4921c-209">Beállítás</span><span class="sxs-lookup"><span data-stu-id="4921c-209">Setting</span></span> | <span data-ttu-id="4921c-210">Érték</span><span class="sxs-lookup"><span data-stu-id="4921c-210">Value</span></span> |
   | --- | --- |
   | <span data-ttu-id="4921c-211">**Name (Név)**</span><span class="sxs-lookup"><span data-stu-id="4921c-211">**Name**</span></span> |<span data-ttu-id="4921c-212">Hello terheléselosztási szabályok képviselő szöveges nevét.</span><span class="sxs-lookup"><span data-stu-id="4921c-212">A text name representing hello load balancing rules.</span></span> <span data-ttu-id="4921c-213">Például **SQLAlwaysOnEndPointListener**.</span><span class="sxs-lookup"><span data-stu-id="4921c-213">For example, **SQLAlwaysOnEndPointListener**.</span></span> |
   | <span data-ttu-id="4921c-214">**Protocol (Protokoll)**</span><span class="sxs-lookup"><span data-stu-id="4921c-214">**Protocol**</span></span> |<span data-ttu-id="4921c-215">**TCP**</span><span class="sxs-lookup"><span data-stu-id="4921c-215">**TCP**</span></span> |
   | <span data-ttu-id="4921c-216">**Port**</span><span class="sxs-lookup"><span data-stu-id="4921c-216">**Port**</span></span> |<span data-ttu-id="4921c-217">*1433*</span><span class="sxs-lookup"><span data-stu-id="4921c-217">*1433*</span></span> |
   | <span data-ttu-id="4921c-218">**Háttér-Port**</span><span class="sxs-lookup"><span data-stu-id="4921c-218">**Backend Port**</span></span> |<span data-ttu-id="4921c-219">*1433*. Rendszer figyelmen kívül hagyja ezt az értéket, mert ez a szabály **fix IP-Címek (közvetlen kiszolgálói válasz)**.</span><span class="sxs-lookup"><span data-stu-id="4921c-219">*1433*. This value is ignored because this rule uses **Floating IP (direct server return)**.</span></span> |
   | <span data-ttu-id="4921c-220">**Hálózatfigyelő**</span><span class="sxs-lookup"><span data-stu-id="4921c-220">**Probe**</span></span> |<span data-ttu-id="4921c-221">Hello mintavételi létrehozott hello nevét használni a terheléselosztóhoz.</span><span class="sxs-lookup"><span data-stu-id="4921c-221">Use hello name of hello probe that you created for this load balancer.</span></span> |
   | <span data-ttu-id="4921c-222">**Munkamenet megőrzését**</span><span class="sxs-lookup"><span data-stu-id="4921c-222">**Session persistence**</span></span> |<span data-ttu-id="4921c-223">**Egyik sem**</span><span class="sxs-lookup"><span data-stu-id="4921c-223">**None**</span></span> |
   | <span data-ttu-id="4921c-224">**Üresjárati időkorlátja (perc)**</span><span class="sxs-lookup"><span data-stu-id="4921c-224">**Idle timeout (minutes)**</span></span> |<span data-ttu-id="4921c-225">*4*</span><span class="sxs-lookup"><span data-stu-id="4921c-225">*4*</span></span> |
   | <span data-ttu-id="4921c-226">**Lebegőpontos IP (közvetlen kiszolgálói válasz)**</span><span class="sxs-lookup"><span data-stu-id="4921c-226">**Floating IP (direct server return)**</span></span> |<span data-ttu-id="4921c-227">**Engedélyezve**</span><span class="sxs-lookup"><span data-stu-id="4921c-227">**Enabled**</span></span> |

   > [!NOTE]
   > <span data-ttu-id="4921c-228">Lehetséges, hogy le hello panel tooview tooscroll összes hello-beállítások.</span><span class="sxs-lookup"><span data-stu-id="4921c-228">You might have tooscroll down hello blade tooview all hello settings.</span></span>
   > 

4. <span data-ttu-id="4921c-229">Kattintson az **OK** gombra.</span><span class="sxs-lookup"><span data-stu-id="4921c-229">Click **OK**.</span></span> 
5. <span data-ttu-id="4921c-230">Azure hello terheléselosztási szabály konfigurálása</span><span class="sxs-lookup"><span data-stu-id="4921c-230">Azure configures hello load balancing rule.</span></span> <span data-ttu-id="4921c-231">Hello terheléselosztó most konfigurált tooroute forgalom toohello SQL Server-példány hello figyelő hello rendelkezésre állási csoporthoz.</span><span class="sxs-lookup"><span data-stu-id="4921c-231">Now hello load balancer is configured tooroute traffic toohello SQL Server instance that hosts hello listener for hello availability group.</span></span> 

<span data-ttu-id="4921c-232">Ezen a ponton hello erőforráscsoport rendelkezik olyan terheléselosztóhoz, amely az SQL Server-gépek tooboth csatlakozik.</span><span class="sxs-lookup"><span data-stu-id="4921c-232">At this point, hello resource group has a load balancer that connects tooboth SQL Server machines.</span></span> <span data-ttu-id="4921c-233">hello terheléselosztó hello SQL Server Always On rendelkezésre állási csoport figyelőjét, IP-címet is tartalmazza, hogy bármelyik számítógép válaszolhassanak toorequests hello rendelkezésre állási csoportok számára.</span><span class="sxs-lookup"><span data-stu-id="4921c-233">hello load balancer also contains an IP address for hello SQL Server Always On availability group listener, so that either machine can respond toorequests for hello availability groups.</span></span>

> [!NOTE]
> <span data-ttu-id="4921c-234">Ha az SQL Server-példány két külön régióban, ismételje meg a hello hello a más régióban.</span><span class="sxs-lookup"><span data-stu-id="4921c-234">If your SQL Server instances are in two separate regions, repeat hello steps in hello other region.</span></span> <span data-ttu-id="4921c-235">Minden egyes régió egy terheléselosztót igényel.</span><span class="sxs-lookup"><span data-stu-id="4921c-235">Each region requires a load balancer.</span></span> 
> 
> 

## <a name="configure-hello-cluster-toouse-hello-load-balancer-ip-address"></a><span data-ttu-id="4921c-236">Hello fürt toouse hello load balancer IP-cím konfigurálása</span><span class="sxs-lookup"><span data-stu-id="4921c-236">Configure hello cluster toouse hello load balancer IP address</span></span>
<span data-ttu-id="4921c-237">következő lépés hello tooconfigure hello figyelő hello fürtön, és hello figyelő online állapotba.</span><span class="sxs-lookup"><span data-stu-id="4921c-237">hello next step is tooconfigure hello listener on hello cluster, and bring hello listener online.</span></span> <span data-ttu-id="4921c-238">A következő hello:</span><span class="sxs-lookup"><span data-stu-id="4921c-238">Do hello following:</span></span> 

1. <span data-ttu-id="4921c-239">Hozzon létre hello rendelkezésre állási csoport figyelőjének hello feladatátvevő fürtön.</span><span class="sxs-lookup"><span data-stu-id="4921c-239">Create hello availability group listener on hello failover cluster.</span></span> 

2. <span data-ttu-id="4921c-240">Hello figyelő online állapotba.</span><span class="sxs-lookup"><span data-stu-id="4921c-240">Bring hello listener online.</span></span>

### <a name="step-5-create-hello-availability-group-listener-on-hello-failover-cluster"></a><span data-ttu-id="4921c-241">5. lépés: Hello rendelkezésre állási csoport figyelőjének létrehozása hello feladatátvevő fürtön</span><span class="sxs-lookup"><span data-stu-id="4921c-241">Step 5: Create hello availability group listener on hello failover cluster</span></span>
<span data-ttu-id="4921c-242">Ebben a lépésben kézzel létrehozhat hello rendelkezésre állási csoport figyelőjének a Feladatátvevőfürt-kezelő és az SQL Server Management Studio.</span><span class="sxs-lookup"><span data-stu-id="4921c-242">In this step, you manually create hello availability group listener in Failover Cluster Manager and SQL Server Management Studio.</span></span>

[!INCLUDE [ag-listener-configure](../../../../includes/virtual-machines-ag-listener-configure.md)]

### <a name="verify-hello-configuration-of-hello-listener"></a><span data-ttu-id="4921c-243">Hello figyelő hello konfigurációjának ellenőrzése</span><span class="sxs-lookup"><span data-stu-id="4921c-243">Verify hello configuration of hello listener</span></span>

<span data-ttu-id="4921c-244">Ha hello fürterőforrások és a függőségek helyesen van konfigurálva, az SQL Server Management Studio képes tooview hello figyelő legyen.</span><span class="sxs-lookup"><span data-stu-id="4921c-244">If hello cluster resources and dependencies are correctly configured, you should be able tooview hello listener in SQL Server Management Studio.</span></span> <span data-ttu-id="4921c-245">tooset hello figyelő portja, a következő hello:</span><span class="sxs-lookup"><span data-stu-id="4921c-245">tooset hello listener port, do hello following:</span></span>

1. <span data-ttu-id="4921c-246">Indítsa el az SQL Server Management Studio eszközt, és csatlakoztassa a toohello elsődleges másodpéldány.</span><span class="sxs-lookup"><span data-stu-id="4921c-246">Start SQL Server Management Studio, and then connect toohello primary replica.</span></span>

2. <span data-ttu-id="4921c-247">Nyissa meg túl**AlwaysOn magas rendelkezésre állású** > **rendelkezésre állási csoportok** > **rendelkezésre állási csoport figyelői**.</span><span class="sxs-lookup"><span data-stu-id="4921c-247">Go too**AlwaysOn High Availability** > **Availability Groups** > **Availability Group Listeners**.</span></span>  
    <span data-ttu-id="4921c-248">Most látnia kell a Feladatátvevőfürt-kezelő létrehozta hello figyelő nevét.</span><span class="sxs-lookup"><span data-stu-id="4921c-248">You should now see hello listener name that you created in Failover Cluster Manager.</span></span> 

3. <span data-ttu-id="4921c-249">Kattintson a jobb gombbal a hello figyelőjének nevével, és kattintson **tulajdonságok**.</span><span class="sxs-lookup"><span data-stu-id="4921c-249">Right-click hello listener name, and then click **Properties**.</span></span>

4. <span data-ttu-id="4921c-250">A hello **Port** hello rendelkezésre állási csoport figyelőjének hello portszáma hello segítségével adja meg a korábban használt $EndpointPort (1433 volt hello alapértelmezett), és kattintson a **OK**.</span><span class="sxs-lookup"><span data-stu-id="4921c-250">In hello **Port** box, specify hello port number for hello availability group listener by using hello $EndpointPort you used earlier (1433 was hello default), and then click **OK**.</span></span>

<span data-ttu-id="4921c-251">Most már rendelkezik egy rendelkezésre állási csoport erőforrás-kezelő módban futó Azure virtuális gépeken.</span><span class="sxs-lookup"><span data-stu-id="4921c-251">You now have an availability group in Azure virtual machines running in Resource Manager mode.</span></span> 

## <a name="test-hello-connection-toohello-listener"></a><span data-ttu-id="4921c-252">Teszt hello kapcsolat toohello figyelő</span><span class="sxs-lookup"><span data-stu-id="4921c-252">Test hello connection toohello listener</span></span>
<span data-ttu-id="4921c-253">Hello kapcsolat tesztelése hello következő tevékenységek végrehajtásával:</span><span class="sxs-lookup"><span data-stu-id="4921c-253">Test hello connection by doing hello following:</span></span>

1. <span data-ttu-id="4921c-254">RDP tooa SQL Server-példányt, amely hello azonos virtuális hálózat, de nem saját hello replika.</span><span class="sxs-lookup"><span data-stu-id="4921c-254">RDP tooa SQL Server instance that is in hello same virtual network, but does not own hello replica.</span></span> <span data-ttu-id="4921c-255">A kiszolgáló más SQL Server-példány hello fürt hello is lehet.</span><span class="sxs-lookup"><span data-stu-id="4921c-255">This server can be hello other SQL Server instance in hello cluster.</span></span>

2. <span data-ttu-id="4921c-256">Használjon **sqlcmd** segédprogram tootest hello kapcsolat.</span><span class="sxs-lookup"><span data-stu-id="4921c-256">Use **sqlcmd** utility tootest hello connection.</span></span> <span data-ttu-id="4921c-257">Például a következő parancsfájl hello hoz létre egy **sqlcmd** kapcsolat toohello elsődleges replika hello figyelő Windows-hitelesítés használatával:</span><span class="sxs-lookup"><span data-stu-id="4921c-257">For example, hello following script establishes a **sqlcmd** connection toohello primary replica through hello listener with Windows authentication:</span></span>
   
        sqlcmd -S <listenerName> -E

<span data-ttu-id="4921c-258">hello SQLCMD kapcsolat automatikusan csatlakozik a hello elsődleges másodpéldányt futtató toohello SQL Server-példányt.</span><span class="sxs-lookup"><span data-stu-id="4921c-258">hello SQLCMD connection automatically connects toohello SQL Server instance that hosts hello primary replica.</span></span> 

## <a name="create-an-ip-address-for-an-additional-availability-group"></a><span data-ttu-id="4921c-259">Egy IP-cím, egy további rendelkezésre állási csoport létrehozása</span><span class="sxs-lookup"><span data-stu-id="4921c-259">Create an IP address for an additional availability group</span></span>

<span data-ttu-id="4921c-260">Egyes rendelkezésre állási csoport egy külön figyelő használja.</span><span class="sxs-lookup"><span data-stu-id="4921c-260">Each availability group uses a separate listener.</span></span> <span data-ttu-id="4921c-261">Minden egyes figyelő saját IP-címmel rendelkezik.</span><span class="sxs-lookup"><span data-stu-id="4921c-261">Each listener has its own IP address.</span></span> <span data-ttu-id="4921c-262">Használja az azonos hello további figyelők terheléselosztó toohold hello IP-cím betölteni.</span><span class="sxs-lookup"><span data-stu-id="4921c-262">Use hello same load balancer toohold hello IP address for additional listeners.</span></span> <span data-ttu-id="4921c-263">Miután létrehozott egy rendelkezésre állási csoportban, hello IP cím toohello terheléselosztó hozzáadása, és adja meg hello figyelő.</span><span class="sxs-lookup"><span data-stu-id="4921c-263">After you create an availability group, add hello IP address toohello load balancer, and then configure hello listener.</span></span>

<span data-ttu-id="4921c-264">az IP cím tooa rendelkező terheléselosztó hello Azure-portálon tooadd hello a következő:</span><span class="sxs-lookup"><span data-stu-id="4921c-264">tooadd an IP address tooa load balancer with hello Azure portal, do hello following:</span></span>

1. <span data-ttu-id="4921c-265">Hello Azure-portálon nyissa meg a terheléselosztó hello tartalmazó erőforráscsoportot hello, és kattintson a hello terheléselosztó.</span><span class="sxs-lookup"><span data-stu-id="4921c-265">In hello Azure portal, open hello resource group that contains hello load balancer, and then click hello load balancer.</span></span> 

2. <span data-ttu-id="4921c-266">A **beállítások**, kattintson a **előtér-IP-címkészlet**, és kattintson a **Hozzáadás**.</span><span class="sxs-lookup"><span data-stu-id="4921c-266">Under **SETTINGS**, click **Frontend IP pool**, and then click **Add**.</span></span> 

3. <span data-ttu-id="4921c-267">A **előtérbeli IP-cím hozzáadása**, rendelje hozzá a hello előtér nevét.</span><span class="sxs-lookup"><span data-stu-id="4921c-267">Under **Add frontend IP address**, assign a name for hello front end.</span></span> 

4. <span data-ttu-id="4921c-268">Győződjön meg arról, hogy hello **virtuális hálózati** és hello **alhálózati** megegyezik az SQL Server-példányokat hello hello.</span><span class="sxs-lookup"><span data-stu-id="4921c-268">Verify that hello **Virtual network** and hello **Subnet** are hello same as hello SQL Server instances.</span></span>

5. <span data-ttu-id="4921c-269">Hello figyelő hello IP-címének beállítása.</span><span class="sxs-lookup"><span data-stu-id="4921c-269">Set hello IP address for hello listener.</span></span> 
   
   >[!TIP]
   ><span data-ttu-id="4921c-270">IP-cím toostatic hello beállítása, és adjon meg egy címet, amely jelenleg nincs használatban hello alhálózaton.</span><span class="sxs-lookup"><span data-stu-id="4921c-270">You can set hello IP address toostatic and type an address that is not currently used in hello subnet.</span></span> <span data-ttu-id="4921c-271">Azt is megteheti IP-cím toodynamic hello beállítása és mentése hello új előtér-IP-készlet.</span><span class="sxs-lookup"><span data-stu-id="4921c-271">Alternatively, you can set hello IP address toodynamic and save hello new front-end IP pool.</span></span> <span data-ttu-id="4921c-272">Ha így tesz, hello Azure-portálon automatikusan hozzárendel egy elérhető IP-cím toohello készletből.</span><span class="sxs-lookup"><span data-stu-id="4921c-272">When you do so, hello Azure portal automatically assigns an available IP address toohello pool.</span></span> <span data-ttu-id="4921c-273">Ezután nyissa meg újra a hello előtér-IP-készlet és hello hozzárendelés toostatic módosítása.</span><span class="sxs-lookup"><span data-stu-id="4921c-273">You can then reopen hello front-end IP pool and change hello assignment toostatic.</span></span> 

6. <span data-ttu-id="4921c-274">Mentse a hello figyelő hello IP-címet.</span><span class="sxs-lookup"><span data-stu-id="4921c-274">Save hello IP address for hello listener.</span></span> 

7. <span data-ttu-id="4921c-275">Adja hozzá a állapotmintáihoz hello-beállítások a következő használatával:</span><span class="sxs-lookup"><span data-stu-id="4921c-275">Add a health probe by using hello following settings:</span></span>

   |<span data-ttu-id="4921c-276">Beállítás</span><span class="sxs-lookup"><span data-stu-id="4921c-276">Setting</span></span> |<span data-ttu-id="4921c-277">Érték</span><span class="sxs-lookup"><span data-stu-id="4921c-277">Value</span></span>
   |:-----|:----
   |<span data-ttu-id="4921c-278">**Name (Név)**</span><span class="sxs-lookup"><span data-stu-id="4921c-278">**Name**</span></span> |<span data-ttu-id="4921c-279">A név tooidentify hello mintavétel.</span><span class="sxs-lookup"><span data-stu-id="4921c-279">A name tooidentify hello probe.</span></span>
   |<span data-ttu-id="4921c-280">**Protocol (Protokoll)**</span><span class="sxs-lookup"><span data-stu-id="4921c-280">**Protocol**</span></span> |<span data-ttu-id="4921c-281">TCP</span><span class="sxs-lookup"><span data-stu-id="4921c-281">TCP</span></span>
   |<span data-ttu-id="4921c-282">**Port**</span><span class="sxs-lookup"><span data-stu-id="4921c-282">**Port**</span></span> |<span data-ttu-id="4921c-283">Egy nem használt TCP-port, amelyen az összes virtuális gép rendelkezésre kell állnia.</span><span class="sxs-lookup"><span data-stu-id="4921c-283">An unused TCP port, which must be available on all virtual machines.</span></span> <span data-ttu-id="4921c-284">Semmilyen más célra nem használható.</span><span class="sxs-lookup"><span data-stu-id="4921c-284">It cannot be used for any other purpose.</span></span> <span data-ttu-id="4921c-285">Nincs két figyelői hello használhatja ugyanazt a mintavételi portot.</span><span class="sxs-lookup"><span data-stu-id="4921c-285">No two listeners can use hello same probe port.</span></span> 
   |<span data-ttu-id="4921c-286">**Időköz**</span><span class="sxs-lookup"><span data-stu-id="4921c-286">**Interval**</span></span> |<span data-ttu-id="4921c-287">hello időn közötti mintavételi kísérletek.</span><span class="sxs-lookup"><span data-stu-id="4921c-287">hello amount of time between probe attempts.</span></span> <span data-ttu-id="4921c-288">Hello alapértelmezett (5) használja.</span><span class="sxs-lookup"><span data-stu-id="4921c-288">Use hello default (5).</span></span>
   |<span data-ttu-id="4921c-289">**Sérült küszöbérték**</span><span class="sxs-lookup"><span data-stu-id="4921c-289">**Unhealthy threshold**</span></span> |<span data-ttu-id="4921c-290">egymást követő küszöbértékeket, amelyek a virtuális gép nem kell hello száma nem megfelelő állapotúnak számít.</span><span class="sxs-lookup"><span data-stu-id="4921c-290">hello number of consecutive thresholds that should fail before a virtual machine is considered unhealthy.</span></span>

8. <span data-ttu-id="4921c-291">Kattintson a **OK** toosave hello mintavétel.</span><span class="sxs-lookup"><span data-stu-id="4921c-291">Click **OK** toosave hello probe.</span></span> 

9. <span data-ttu-id="4921c-292">Terheléselosztási szabály létrehozása.</span><span class="sxs-lookup"><span data-stu-id="4921c-292">Create a load balancing rule.</span></span> <span data-ttu-id="4921c-293">Kattintson a **terheléselosztási szabályok**, és kattintson a **Hozzáadás**.</span><span class="sxs-lookup"><span data-stu-id="4921c-293">Click **Load balancing rules**, and then click **Add**.</span></span>

10. <span data-ttu-id="4921c-294">Hello új terheléselosztási szabály használatával a következő beállítások hello konfigurálása:</span><span class="sxs-lookup"><span data-stu-id="4921c-294">Configure hello new load balancing rule by using hello following settings:</span></span>

   |<span data-ttu-id="4921c-295">Beállítás</span><span class="sxs-lookup"><span data-stu-id="4921c-295">Setting</span></span> |<span data-ttu-id="4921c-296">Érték</span><span class="sxs-lookup"><span data-stu-id="4921c-296">Value</span></span>
   |:-----|:----
   |<span data-ttu-id="4921c-297">**Name (Név)**</span><span class="sxs-lookup"><span data-stu-id="4921c-297">**Name**</span></span> |<span data-ttu-id="4921c-298">A név tooidentify hello terheléselosztási szabály betöltése.</span><span class="sxs-lookup"><span data-stu-id="4921c-298">A name tooidentify hello load balancing rule.</span></span> 
   |<span data-ttu-id="4921c-299">**Előtérbeli IP-cím**</span><span class="sxs-lookup"><span data-stu-id="4921c-299">**Frontend IP address**</span></span> |<span data-ttu-id="4921c-300">Válassza ki a létrehozott hello IP-címet.</span><span class="sxs-lookup"><span data-stu-id="4921c-300">Select hello IP address you created.</span></span> 
   |<span data-ttu-id="4921c-301">**Protocol (Protokoll)**</span><span class="sxs-lookup"><span data-stu-id="4921c-301">**Protocol**</span></span> |<span data-ttu-id="4921c-302">TCP</span><span class="sxs-lookup"><span data-stu-id="4921c-302">TCP</span></span>
   |<span data-ttu-id="4921c-303">**Port**</span><span class="sxs-lookup"><span data-stu-id="4921c-303">**Port**</span></span> |<span data-ttu-id="4921c-304">Hello SQL Server-példány által használt hello port használatára.</span><span class="sxs-lookup"><span data-stu-id="4921c-304">Use hello port that hello SQL Server instances are using.</span></span> <span data-ttu-id="4921c-305">Egy alapértelmezett példány 1433-as portot használja, kivéve, ha módosította az.</span><span class="sxs-lookup"><span data-stu-id="4921c-305">A default instance uses port 1433, unless you changed it.</span></span> 
   |<span data-ttu-id="4921c-306">**Háttér-port**</span><span class="sxs-lookup"><span data-stu-id="4921c-306">**Backend port**</span></span> |<span data-ttu-id="4921c-307">Ugyanaz, mint érték használata hello **Port**.</span><span class="sxs-lookup"><span data-stu-id="4921c-307">Use hello same value as **Port**.</span></span>
   |<span data-ttu-id="4921c-308">**Háttérkészlet**</span><span class="sxs-lookup"><span data-stu-id="4921c-308">**Backend pool**</span></span> |<span data-ttu-id="4921c-309">virtuális gépek hello hello SQL Server-példányokat tartalmazó hello készlet.</span><span class="sxs-lookup"><span data-stu-id="4921c-309">hello pool that contains hello virtual machines with hello SQL Server instances.</span></span> 
   |<span data-ttu-id="4921c-310">**Állapotmintáihoz**</span><span class="sxs-lookup"><span data-stu-id="4921c-310">**Health probe**</span></span> |<span data-ttu-id="4921c-311">Válassza ki a létrehozott hello mintavétel.</span><span class="sxs-lookup"><span data-stu-id="4921c-311">Choose hello probe you created.</span></span>
   |<span data-ttu-id="4921c-312">**Munkamenet megőrzését**</span><span class="sxs-lookup"><span data-stu-id="4921c-312">**Session persistence**</span></span> |<span data-ttu-id="4921c-313">None</span><span class="sxs-lookup"><span data-stu-id="4921c-313">None</span></span>
   |<span data-ttu-id="4921c-314">**Üresjárati időkorlátja (perc)**</span><span class="sxs-lookup"><span data-stu-id="4921c-314">**Idle timeout (minutes)**</span></span> |<span data-ttu-id="4921c-315">Alapértelmezett (4)</span><span class="sxs-lookup"><span data-stu-id="4921c-315">Default (4)</span></span>
   |<span data-ttu-id="4921c-316">**Lebegőpontos IP (közvetlen kiszolgálói válasz)**</span><span class="sxs-lookup"><span data-stu-id="4921c-316">**Floating IP (direct server return)**</span></span> | <span data-ttu-id="4921c-317">Engedélyezve</span><span class="sxs-lookup"><span data-stu-id="4921c-317">Enabled</span></span>

### <a name="configure-hello-availability-group-toouse-hello-new-ip-address"></a><span data-ttu-id="4921c-318">Hello rendelkezésre állási csoport toouse hello új IP-cím konfigurálása</span><span class="sxs-lookup"><span data-stu-id="4921c-318">Configure hello availability group toouse hello new IP address</span></span>

<span data-ttu-id="4921c-319">toofinish hello fürt, ismétlődő hello lépéseket követte hello első rendelkezésre állási csoport elküldésekor konfigurálása.</span><span class="sxs-lookup"><span data-stu-id="4921c-319">toofinish configuring hello cluster, repeat hello steps that you followed when you made hello first availability group.</span></span> <span data-ttu-id="4921c-320">Ez azt jelenti, hogy a hello konfigurálása [toouse hello új IP-címe](#configure-the-cluster-to-use-the-load-balancer-ip-address).</span><span class="sxs-lookup"><span data-stu-id="4921c-320">That is, configure hello [cluster toouse hello new IP address](#configure-the-cluster-to-use-the-load-balancer-ip-address).</span></span> 

<span data-ttu-id="4921c-321">Miután hozzáadta a hello figyelő IP-címet, a hello további rendelkezésre állási csoport konfigurálásához hello következő tevékenységek végrehajtásával:</span><span class="sxs-lookup"><span data-stu-id="4921c-321">After you have added an IP address for hello listener, configure hello additional availability group by doing hello following:</span></span> 

1. <span data-ttu-id="4921c-322">Győződjön meg arról, hogy mindkét SQL Server virtuális gépen nyissa meg hello mintavételi portot hello új IP-cím.</span><span class="sxs-lookup"><span data-stu-id="4921c-322">Verify that hello probe port for hello new IP address is open on both SQL Server virtual machines.</span></span> 

2. <span data-ttu-id="4921c-323">[A kezelő hozzáadása hello ügyfél-hozzáférési pont](#addcap).</span><span class="sxs-lookup"><span data-stu-id="4921c-323">[In Cluster Manager, add hello client access point](#addcap).</span></span>

3. <span data-ttu-id="4921c-324">[Hello IP-erőforrás hello rendelkezésre állási csoport konfigurálása](#congroup).</span><span class="sxs-lookup"><span data-stu-id="4921c-324">[Configure hello IP resource for hello availability group](#congroup).</span></span>

   >[!IMPORTANT]
   ><span data-ttu-id="4921c-325">Hello IP-cím létrehozásakor használja, hogy hozzáadta a toohello terheléselosztó hello IP-cím.</span><span class="sxs-lookup"><span data-stu-id="4921c-325">When you create hello IP address, use hello IP address that you added toohello load balancer.</span></span>  

4. <span data-ttu-id="4921c-326">[Ügyfél-hozzáférési pont hello tegyen hello SQL Server rendelkezésre állási csoport erőforrása](#dependencyGroup).</span><span class="sxs-lookup"><span data-stu-id="4921c-326">[Make hello SQL Server availability group resource dependent on hello client access point](#dependencyGroup).</span></span>

5. <span data-ttu-id="4921c-327">[Ellenőrizze a hello ügyfél-hozzáférési pont erőforrás hello IP-címtől függő](#listname).</span><span class="sxs-lookup"><span data-stu-id="4921c-327">[Make hello client access point resource dependent on hello IP address](#listname).</span></span>
 
6. <span data-ttu-id="4921c-328">[A PowerShell hello fürt paraméterek beállítása](#setparam).</span><span class="sxs-lookup"><span data-stu-id="4921c-328">[Set hello cluster parameters in PowerShell](#setparam).</span></span>

<span data-ttu-id="4921c-329">Miután konfigurálta a hello rendelkezésre állási csoport toouse hello új IP-címet, konfigurálja a hello kapcsolat toohello figyelő.</span><span class="sxs-lookup"><span data-stu-id="4921c-329">After you configure hello availability group toouse hello new IP address, configure hello connection toohello listener.</span></span> 

## <a name="next-steps"></a><span data-ttu-id="4921c-330">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="4921c-330">Next steps</span></span>

- [<span data-ttu-id="4921c-331">Különböző régiókban Azure virtuális gépeken futó SQL Server Always On rendelkezésre állási csoport konfigurálása</span><span class="sxs-lookup"><span data-stu-id="4921c-331">Configure a SQL Server Always On availability group on Azure virtual machines in different regions</span></span>](virtual-machines-windows-portal-sql-availability-group-dr.md)
