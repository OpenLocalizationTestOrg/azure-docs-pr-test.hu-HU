---
title: "a távoli asztal aaaDetailed hibaelhárítása az Azure-ban |} Microsoft Docs"
description: "Tekintse át a távoli asztali hibákat. Ha nem tudja tooa Windows virtuális gépek Azure-ban a részletes hibaelhárítási lépéseket"
services: virtual-machines-windows
documentationcenter: 
author: genlin
manager: timlt
editor: 
tags: top-support-issue,azure-service-management,azure-resource-manager
keywords: "nem csatlakozás tooremote asztal, távoli asztal hibaelhárítása a távoli asztal nem lehet kapcsolódni, távoli asztali hibák, a távoli asztal – hibaelhárítás, a távoli asztali problémák"
ms.assetid: 9da36f3d-30dd-44af-824b-8ce5ef07e5e0
ms.service: virtual-machines-windows
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-windows
ms.devlang: na
ms.topic: support-article
ms.date: 07/25/2017
ms.author: genli
ms.openlocfilehash: fcb0d06aa66b748f3ebbbbe3431471d3cbe7c60d
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/06/2017
---
# <a name="detailed-troubleshooting-steps-for-remote-desktop-connection-issues-toowindows-vms-in-azure"></a><span data-ttu-id="a4c70-104">A távoli asztali kapcsolat részletes hibaelhárítási problémák tooWindows virtuális gépek Azure-ban</span><span class="sxs-lookup"><span data-stu-id="a4c70-104">Detailed troubleshooting steps for remote desktop connection issues tooWindows VMs in Azure</span></span>
<span data-ttu-id="a4c70-105">A cikkben részletes hibaelhárítási összetett távoli asztal hibák toodiagnose és javítsa ki az Azure virtuális gépek Windows-alapú.</span><span class="sxs-lookup"><span data-stu-id="a4c70-105">This article provides detailed troubleshooting steps toodiagnose and fix complex Remote Desktop errors for Windows-based Azure virtual machines.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="a4c70-106">tooeliminate hello gyakori távoli asztal hibáit, győződjön meg arról, hogy tooread [a távoli asztal hibaelhárítási cikke alapszintű hello](troubleshoot-rdp-connection.md) a folytatás előtt.</span><span class="sxs-lookup"><span data-stu-id="a4c70-106">tooeliminate hello more common Remote Desktop errors, make sure tooread [hello basic troubleshooting article for Remote Desktop](troubleshoot-rdp-connection.md) before proceeding.</span></span>

<span data-ttu-id="a4c70-107">Felmerülhet a távoli asztal hibaüzenetet, amely nem hasonlítanak hello adott hibaüzenetek ismertetett [hibaelhárítási útmutatója alapszintű távoli asztali hello](troubleshoot-rdp-connection.md).</span><span class="sxs-lookup"><span data-stu-id="a4c70-107">You may encounter a Remote Desktop error message that does not resemble any of hello specific error messages covered in [hello basic Remote Desktop troubleshooting guide](troubleshoot-rdp-connection.md).</span></span> <span data-ttu-id="a4c70-108">Kövesse ezeket lépéseket toodetermine hello távoli asztal (RDP) ügyfél nem tooconnect toohello RDP szolgáltatást az Azure virtuális gép hello oka.</span><span class="sxs-lookup"><span data-stu-id="a4c70-108">Follow these steps toodetermine why hello Remote Desktop (RDP) client is unable tooconnect toohello RDP service on hello Azure VM.</span></span>

[!INCLUDE [learn-about-deployment-models](../../../includes/learn-about-deployment-models-both-include.md)]

<span data-ttu-id="a4c70-109">Ha ez a cikk bármely pontján további segítségre van szüksége, forduljon az Azure-szakértők hello [MSDN Azure hello és fórumok Stack Overflow hello](https://azure.microsoft.com/support/forums/).</span><span class="sxs-lookup"><span data-stu-id="a4c70-109">If you need more help at any point in this article, you can contact hello Azure experts on [hello MSDN Azure and hello Stack Overflow forums](https://azure.microsoft.com/support/forums/).</span></span> <span data-ttu-id="a4c70-110">Másik lehetőségként is fájl is az Azure támogatási incidens.</span><span class="sxs-lookup"><span data-stu-id="a4c70-110">Alternatively, you can also file an Azure support incident.</span></span> <span data-ttu-id="a4c70-111">Nyissa meg toohello [Azure támogatási webhelyén](https://azure.microsoft.com/support/options/) kattintson **támogatás**.</span><span class="sxs-lookup"><span data-stu-id="a4c70-111">Go toohello [Azure Support site](https://azure.microsoft.com/support/options/) and click **Get Support**.</span></span> <span data-ttu-id="a4c70-112">Az Azure támogatási használatával kapcsolatos információkért olvassa el a hello [Microsoft Azure támogatás – gyakori kérdések](https://azure.microsoft.com/support/faq/).</span><span class="sxs-lookup"><span data-stu-id="a4c70-112">For information about using Azure Support, read hello [Microsoft Azure Support FAQ](https://azure.microsoft.com/support/faq/).</span></span>

## <a name="components-of-a-remote-desktop-connection"></a><span data-ttu-id="a4c70-113">Távoli asztali kapcsolat összetevői</span><span class="sxs-lookup"><span data-stu-id="a4c70-113">Components of a Remote Desktop connection</span></span>
<span data-ttu-id="a4c70-114">a következő összetevők hello részt egy RDP-kapcsolat:</span><span class="sxs-lookup"><span data-stu-id="a4c70-114">hello following components are involved in an RDP connection:</span></span>

![](./media/detailed-troubleshoot-rdp/tshootrdp_0.png)

<span data-ttu-id="a4c70-115">A folytatás előtt ellenőrizze, hogy mi módosult az hello utolsó sikeres távoli asztali kapcsolat toohello VM toomentally hasznos lehet.</span><span class="sxs-lookup"><span data-stu-id="a4c70-115">Before proceeding, it might help toomentally review what has changed since hello last successful Remote Desktop connection toohello VM.</span></span> <span data-ttu-id="a4c70-116">Példa:</span><span class="sxs-lookup"><span data-stu-id="a4c70-116">For example:</span></span>

* <span data-ttu-id="a4c70-117">nyilvános IP-cím hello VM vagy hello felhőszolgáltatás hello VM tartalmazó hello (más néven hello virtuális IP-cím [VIP](https://en.wikipedia.org/wiki/Virtual_IP_address)) megváltozott.</span><span class="sxs-lookup"><span data-stu-id="a4c70-117">hello public IP address of hello VM or hello cloud service containing hello VM (also called hello virtual IP address [VIP](https://en.wikipedia.org/wiki/Virtual_IP_address)) has changed.</span></span> <span data-ttu-id="a4c70-118">a DNS-ügyfél gyorsítótára még hello hello RDP hiba okozhatja *korábbi IP-címet* regisztrált hello DNS-nevét.</span><span class="sxs-lookup"><span data-stu-id="a4c70-118">hello RDP failure could be because your DNS client cache still has hello *old IP address* registered for hello DNS name.</span></span> <span data-ttu-id="a4c70-119">A DNS-ügyfél-gyorsítótár ürítése, és próbáljon újra kapcsolódni a virtuális gép hello.</span><span class="sxs-lookup"><span data-stu-id="a4c70-119">Flush your DNS client cache and try connecting hello VM again.</span></span> <span data-ttu-id="a4c70-120">Vagy próbáljon közvetlenül az új VIP hello.</span><span class="sxs-lookup"><span data-stu-id="a4c70-120">Or try connecting directly with hello new VIP.</span></span>
* <span data-ttu-id="a4c70-121">Használ egy külső alkalmazás toomanage a távoli asztali kapcsolatok hello Azure-portál által előállított hello kapcsolat használata helyett.</span><span class="sxs-lookup"><span data-stu-id="a4c70-121">You are using a third-party application toomanage your Remote Desktop connections instead of using hello connection generated by hello Azure portal.</span></span> <span data-ttu-id="a4c70-122">Győződjön meg arról, hogy hello alkalmazás konfigurálása magában foglalja a távoli asztal forgalom hello hello megfelelő TCP-portot.</span><span class="sxs-lookup"><span data-stu-id="a4c70-122">Verify that hello application configuration includes hello correct TCP port for hello Remote Desktop traffic.</span></span> <span data-ttu-id="a4c70-123">Ellenőrizheti, hogy ezt a portot, a klasszikus virtuális gép hello [Azure-portálon](https://portal.azure.com), kattintva hello Virtuálisgép-beállítások > Végpontok.</span><span class="sxs-lookup"><span data-stu-id="a4c70-123">You can check this port for a classic virtual machine in hello [Azure portal](https://portal.azure.com), by clicking hello VM's Settings > Endpoints.</span></span>

## <a name="preliminary-steps"></a><span data-ttu-id="a4c70-124">Első lépések</span><span class="sxs-lookup"><span data-stu-id="a4c70-124">Preliminary steps</span></span>
<span data-ttu-id="a4c70-125">A folytatás előtt toohello részletes hibaelhárítási,</span><span class="sxs-lookup"><span data-stu-id="a4c70-125">Before proceeding toohello detailed troubleshooting,</span></span>

* <span data-ttu-id="a4c70-126">Hello Azure-portál nyilvánvaló probléma merül fel a virtuális gép hello hello állapotának ellenőrzéséhez.</span><span class="sxs-lookup"><span data-stu-id="a4c70-126">Check hello status of hello virtual machine in hello Azure portal for any obvious issues.</span></span>
* <span data-ttu-id="a4c70-127">Hajtsa végre a hello [gyorsjavítást lépéseket közös RDP hibáinak hello alapvető hibaelhárítási útmutató](troubleshoot-rdp-connection.md#quick-troubleshooting-steps).</span><span class="sxs-lookup"><span data-stu-id="a4c70-127">Follow hello [quick fix steps for common RDP errors in hello basic troubleshooting guide](troubleshoot-rdp-connection.md#quick-troubleshooting-steps).</span></span>

<span data-ttu-id="a4c70-128">Próbálja meg a távoli asztalon keresztül a virtuális gép toohello újracsatlakozás után ezeket a lépéseket.</span><span class="sxs-lookup"><span data-stu-id="a4c70-128">Try reconnecting toohello VM via Remote Desktop after these steps.</span></span>

## <a name="detailed-troubleshooting-steps"></a><span data-ttu-id="a4c70-129">Részletes hibaelhárítási útmutató</span><span class="sxs-lookup"><span data-stu-id="a4c70-129">Detailed troubleshooting steps</span></span>
<span data-ttu-id="a4c70-130">hello távoli asztali ügyfél nem feltétlenül tudja tooreach hello távoli asztal szolgáltatás hello Azure virtuális Gépen, a következő források hello esedékes tooissues:</span><span class="sxs-lookup"><span data-stu-id="a4c70-130">hello Remote Desktop client may not be able tooreach hello Remote Desktop service on hello Azure VM due tooissues at hello following sources:</span></span>

* [<span data-ttu-id="a4c70-131">Távoli asztali ügyfél számítógép</span><span class="sxs-lookup"><span data-stu-id="a4c70-131">Remote Desktop client computer</span></span>](#source-1-remote-desktop-client-computer)
* [<span data-ttu-id="a4c70-132">Szervezeti intraneten peremhálózati eszköz</span><span class="sxs-lookup"><span data-stu-id="a4c70-132">Organization intranet edge device</span></span>](#source-2-organization-intranet-edge-device)
* [<span data-ttu-id="a4c70-133">A felhőalapú szolgáltatás végpontjának és hozzáférés-vezérlési lista (ACL)</span><span class="sxs-lookup"><span data-stu-id="a4c70-133">Cloud service endpoint and access control list (ACL)</span></span>](#source-3-cloud-service-endpoint-and-acl)
* [<span data-ttu-id="a4c70-134">Hálózati biztonsági csoportok</span><span class="sxs-lookup"><span data-stu-id="a4c70-134">Network security groups</span></span>](#source-4-network-security-groups)
* [<span data-ttu-id="a4c70-135">Windows-alapú Azure virtuális gép</span><span class="sxs-lookup"><span data-stu-id="a4c70-135">Windows-based Azure VM</span></span>](#source-5-windows-based-azure-vm)

## <a name="source-1-remote-desktop-client-computer"></a><span data-ttu-id="a4c70-136">1. forrás: Távoli asztali ügyfél számítógép</span><span class="sxs-lookup"><span data-stu-id="a4c70-136">Source 1: Remote Desktop client computer</span></span>
<span data-ttu-id="a4c70-137">Győződjön meg arról, hogy a számítógép biztosíthat a távoli asztali kapcsolatok tooanother a helyszínen, a Windows-alapú számítógép.</span><span class="sxs-lookup"><span data-stu-id="a4c70-137">Verify that your computer can make Remote Desktop connections tooanother on-premises, Windows-based computer.</span></span>

![](./media/detailed-troubleshoot-rdp/tshootrdp_1.png)

<span data-ttu-id="a4c70-138">Ha nem, keressen a beállításokat a számítógépen a következő hello:</span><span class="sxs-lookup"><span data-stu-id="a4c70-138">If you cannot, check for hello following settings on your computer:</span></span>

* <span data-ttu-id="a4c70-139">Egy helyi beállítástól, amely blokkolja tűzfal a távoli asztal-forgalmat.</span><span class="sxs-lookup"><span data-stu-id="a4c70-139">A local firewall setting that is blocking Remote Desktop traffic.</span></span>
* <span data-ttu-id="a4c70-140">Helyileg telepített ügyfél proxy szoftver, amely megakadályozza, hogy a távoli asztali kapcsolatok.</span><span class="sxs-lookup"><span data-stu-id="a4c70-140">Locally installed client proxy software that is preventing Remote Desktop connections.</span></span>
* <span data-ttu-id="a4c70-141">Helyileg telepített szoftver, amely megakadályozza, hogy a távoli asztali kapcsolatok hálózatfigyelési.</span><span class="sxs-lookup"><span data-stu-id="a4c70-141">Locally installed network monitoring software that is preventing Remote Desktop connections.</span></span>
* <span data-ttu-id="a4c70-142">Más típusú biztonsági szoftver felügyeljék a forgalmat, vagy a megadott típusú forgalom, amely megakadályozza, hogy a távoli asztali kapcsolatok engedélyezése vagy letiltása.</span><span class="sxs-lookup"><span data-stu-id="a4c70-142">Other types of security software that either monitor traffic or allow/disallow specific types of traffic that is preventing Remote Desktop connections.</span></span>

<span data-ttu-id="a4c70-143">Ilyen esetben ideiglenesen tiltsa le a hello szoftver, és próbálkozzon tooconnect tooan a helyi számítógép távoli asztalon keresztül.</span><span class="sxs-lookup"><span data-stu-id="a4c70-143">In all these cases, temporarily disable hello software and try tooconnect tooan on-premises computer via Remote Desktop.</span></span> <span data-ttu-id="a4c70-144">Hello tényleges OK így talál, ha működik a hálózati rendszergazda toocorrect hello szoftverfrissítési beállítások tooallow távoli asztali kapcsolatok.</span><span class="sxs-lookup"><span data-stu-id="a4c70-144">If you can find out hello actual cause this way, work with your network administrator toocorrect hello software settings tooallow Remote Desktop connections.</span></span>

## <a name="source-2-organization-intranet-edge-device"></a><span data-ttu-id="a4c70-145">2. forrás: Szervezet intranetes peremhálózati eszköz</span><span class="sxs-lookup"><span data-stu-id="a4c70-145">Source 2: Organization intranet edge device</span></span>
<span data-ttu-id="a4c70-146">Ellenőrizze, hogy a számítógép közvetlenül toohello Internet biztosíthat a távoli asztali kapcsolatok tooyour Azure virtuális géphez.</span><span class="sxs-lookup"><span data-stu-id="a4c70-146">Verify that a computer directly connected toohello Internet can make Remote Desktop connections tooyour Azure virtual machine.</span></span>

![](./media/detailed-troubleshoot-rdp/tshootrdp_2.png)

<span data-ttu-id="a4c70-147">Ha még nem rendelkezik olyan számítógépre, amely közvetlenül csatlakoztatott toohello Internet, hozzon létre, és egy új Azure virtuális gép egy erőforrás vagy felhőhatókört szolgáltatás teszteléséhez.</span><span class="sxs-lookup"><span data-stu-id="a4c70-147">If you do not have a computer that is directly connected toohello Internet, create and test with a new Azure virtual machine in a resource group or cloud service.</span></span> <span data-ttu-id="a4c70-148">További információkért lásd: [Windows Azure-ban futó virtuális gép létrehozása](../virtual-machines-windows-hero-tutorial.md).</span><span class="sxs-lookup"><span data-stu-id="a4c70-148">For more information, see [Create a virtual machine running Windows in Azure](../virtual-machines-windows-hero-tutorial.md).</span></span> <span data-ttu-id="a4c70-149">Hello virtuális gép és hello erőforráscsoportba vagy hello felhőalapú szolgáltatás, hello vizsgálat után törölheti.</span><span class="sxs-lookup"><span data-stu-id="a4c70-149">You can delete hello virtual machine and hello resource group or hello cloud service, after hello test.</span></span>

<span data-ttu-id="a4c70-150">Ha egy távoli asztali kapcsolat létrehozhat egy közvetlenül csatlakoztatott számítógép toohello Internet, ellenőrizze a szervezeti intraneten peremhálózati eszköz a:</span><span class="sxs-lookup"><span data-stu-id="a4c70-150">If you can create a Remote Desktop connection with a computer directly attached toohello Internet, check your organization intranet edge device for:</span></span>

* <span data-ttu-id="a4c70-151">Egy belső tűzfal blokkolja a HTTPS-kapcsolatok toohello Internet.</span><span class="sxs-lookup"><span data-stu-id="a4c70-151">An internal firewall blocking HTTPS connections toohello Internet.</span></span>
* <span data-ttu-id="a4c70-152">Megakadályozza a távoli asztali kapcsolatok proxykiszolgálót.</span><span class="sxs-lookup"><span data-stu-id="a4c70-152">A proxy server preventing Remote Desktop connections.</span></span>
* <span data-ttu-id="a4c70-153">Behatolásérzékelési vagy hálózatfigyelési a peremhálózati hálózat, amely megakadályozza, hogy a távoli asztali kapcsolatok eszközökön futó szoftver.</span><span class="sxs-lookup"><span data-stu-id="a4c70-153">Intrusion detection or network monitoring software running on devices in your edge network that is preventing Remote Desktop connections.</span></span>

<span data-ttu-id="a4c70-154">A hálózati rendszergazda toocorrect hello beállításait a szervezeti intraneten peremhálózati eszköz tooallow HTTPS-alapú távoli asztali kapcsolatok toohello Internet dolgozni.</span><span class="sxs-lookup"><span data-stu-id="a4c70-154">Work with your network administrator toocorrect hello settings of your organization intranet edge device tooallow HTTPS-based Remote Desktop connections toohello Internet.</span></span>

## <a name="source-3-cloud-service-endpoint-and-acl"></a><span data-ttu-id="a4c70-155">3. forrás: Felhő szolgáltatásvégpont és hozzáférés-vezérlési lista</span><span class="sxs-lookup"><span data-stu-id="a4c70-155">Source 3: Cloud service endpoint and ACL</span></span>
<span data-ttu-id="a4c70-156">A létrehozott virtuális gépek hello klasszikus telepítési modell segítségével ellenőrizze, hogy egy másik Azure virtuális Gépen, amely a hello ugyanaz a felhőalapú szolgáltatás, vagy virtuális hálózati tehet a távoli asztali kapcsolatok tooyour Azure virtuális Gépen.</span><span class="sxs-lookup"><span data-stu-id="a4c70-156">For VMs created using hello Classic deployment model, verify that another Azure VM that is in hello same cloud service or virtual network can make Remote Desktop connections tooyour Azure VM.</span></span>

![](./media/detailed-troubleshoot-rdp/tshootrdp_3.png)

> [!NOTE]
> <span data-ttu-id="a4c70-157">A virtuális gépek erőforrás-kezelőt hozott létre, hagyja ki túl[forrás 4: hálózati biztonsági csoportok](#source-4-network-security-groups).</span><span class="sxs-lookup"><span data-stu-id="a4c70-157">For virtual machines created in Resource Manager, skip too[Source 4: Network Security Groups](#source-4-network-security-groups).</span></span>

<span data-ttu-id="a4c70-158">Ha nem rendelkezik egy másik virtuális gép ugyanazon a felhőalapú szolgáltatás, vagy a virtuális hálózati hello, hozzon létre egyet.</span><span class="sxs-lookup"><span data-stu-id="a4c70-158">If you do not have another virtual machine in hello same cloud service or virtual network, create one.</span></span> <span data-ttu-id="a4c70-159">Hello kövesse [Windows Azure-ban futó virtuális gép létrehozása](../virtual-machines-windows-hero-tutorial.md).</span><span class="sxs-lookup"><span data-stu-id="a4c70-159">Follow hello steps in [Create a virtual machine running Windows in Azure](../virtual-machines-windows-hero-tutorial.md).</span></span> <span data-ttu-id="a4c70-160">Hello teszt befejezése után hello teszt virtuális gép törlése</span><span class="sxs-lookup"><span data-stu-id="a4c70-160">Delete hello test virtual machine after hello test is completed.</span></span>

<span data-ttu-id="a4c70-161">Ha a távoli asztal tooa virtuális gép hello keresztül is elérheti azonos felhőalapú szolgáltatás vagy a virtuális hálózat, ellenőrizze, hogy ezek a beállítások:</span><span class="sxs-lookup"><span data-stu-id="a4c70-161">If you can connect via Remote Desktop tooa virtual machine in hello same cloud service or virtual network, check for these settings:</span></span>

* <span data-ttu-id="a4c70-162">a távoli asztal forgalmat hello cél virtuális gép hello végpont-konfiguráció: hello titkos TCP-port hello végpont meg kell egyeznie a mely hello a virtuális gép távoli asztal szolgáltatást figyel hello TCP-portot (alapértelmezett érték a 3389-es).</span><span class="sxs-lookup"><span data-stu-id="a4c70-162">hello endpoint configuration for Remote Desktop traffic on hello target VM: hello private TCP port of hello endpoint must match hello TCP port on which hello VM's Remote Desktop service is listening (default is 3389).</span></span>
* <span data-ttu-id="a4c70-163">hozzáférés-vezérlési lista hello hello távoli asztal forgalom végpont hello cél virtuális gép: hozzáférés-vezérlési listák lehetővé teszik toospecify engedélyezett vagy megtagadott a bejövő forgalmat az Internet alapú forrás IP-címe hello.</span><span class="sxs-lookup"><span data-stu-id="a4c70-163">hello ACL for hello Remote Desktop traffic endpoint on hello target VM: ACLs allow you toospecify allowed or denied incoming traffic from hello Internet based on its source IP address.</span></span> <span data-ttu-id="a4c70-164">Helytelenül konfigurált hozzáférés-vezérlési listák előfordulhat, hogy a bejövő távoli asztal forgalom toohello végpont.</span><span class="sxs-lookup"><span data-stu-id="a4c70-164">Misconfigured ACLs can prevent incoming Remote Desktop traffic toohello endpoint.</span></span> <span data-ttu-id="a4c70-165">Ellenőrizze a hozzáférés-vezérlési listák tooensure, amely a proxy vagy más biztonsági kiszolgáló a nyilvános IP-címekről érkező bejövő forgalom engedélyezve van.</span><span class="sxs-lookup"><span data-stu-id="a4c70-165">Check your ACLs tooensure that incoming traffic from your public IP addresses of your proxy or other edge server is allowed.</span></span> <span data-ttu-id="a4c70-166">További információkért lásd: [Mi az a hálózati hozzáférés-vezérlési lista (ACL)?](../../virtual-network/virtual-networks-acl.md)</span><span class="sxs-lookup"><span data-stu-id="a4c70-166">For more information, see [What is a Network Access Control List (ACL)?](../../virtual-network/virtual-networks-acl.md)</span></span>

<span data-ttu-id="a4c70-167">toocheck Ha hello végpont hello forrását hello probléma, távolítsa el a hello aktuális végpont, és hozzon létre egy újat, véletlenszerű port kiválasztásával hello tartomány 49152 – 65535 hello külső port számát.</span><span class="sxs-lookup"><span data-stu-id="a4c70-167">toocheck if hello endpoint is hello source of hello problem, remove hello current endpoint and create a new one, choosing a random port in hello range 49152–65535 for hello external port number.</span></span> <span data-ttu-id="a4c70-168">További információkért lásd: [hogyan végpontok tooa virtuális gép tooset](classic/setup-endpoints.md?toc=%2fazure%2fvirtual-machines%2fwindows%2fclassic%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="a4c70-168">For more information, see [How tooset up endpoints tooa virtual machine](classic/setup-endpoints.md?toc=%2fazure%2fvirtual-machines%2fwindows%2fclassic%2ftoc.json).</span></span>

## <a name="source-4-network-security-groups"></a><span data-ttu-id="a4c70-169">4. forrás: Hálózati biztonsági csoportok</span><span class="sxs-lookup"><span data-stu-id="a4c70-169">Source 4: Network Security Groups</span></span>
<span data-ttu-id="a4c70-170">Hálózati biztonsági csoportok lehetővé teszik a részletesebben vezérelhető, engedélyezett bejövő és kimenő forgalom.</span><span class="sxs-lookup"><span data-stu-id="a4c70-170">Network Security Groups allow more granular control of allowed inbound and outbound traffic.</span></span> <span data-ttu-id="a4c70-171">Alhálózatok átfedés szabályokat hozhat létre, és a felhőalapú szolgáltatások egy Azure virtuális hálózatra.</span><span class="sxs-lookup"><span data-stu-id="a4c70-171">You can create rules spanning subnets and cloud services in an Azure virtual network.</span></span>

<span data-ttu-id="a4c70-172">Használjon [IP folyamata ellenőrizze](../../network-watcher/network-watcher-check-ip-flow-verify-portal.md) tooconfirm, ha egy szabály a hálózati biztonsági csoport egy virtuális gép forgalom tooor blokkolja.</span><span class="sxs-lookup"><span data-stu-id="a4c70-172">Use [IP flow verify](../../network-watcher/network-watcher-check-ip-flow-verify-portal.md) tooconfirm if a rule in a Network Security Group is blocking traffic tooor from a virtual machine.</span></span> <span data-ttu-id="a4c70-173">Emellett áttekintheti a hatékony biztonsági csoport tooensure a "Engedélyezése" NSG bejövő szabályok szabály létezik-e, és a rendszer előrébb RDP-porthoz (3389-es alapértelmezett).</span><span class="sxs-lookup"><span data-stu-id="a4c70-173">You can also review effective security group rules tooensure inbound "Allow" NSG rule exists and is prioritized for RDP port(default 3389).</span></span> <span data-ttu-id="a4c70-174">További információkért lásd: [hatékony biztonsági szabályok használatával tootroubleshoot VM forgalom bonyolódjon](../../virtual-network/virtual-network-nsg-troubleshoot-portal.md#using-effective-security-rules-to-troubleshoot-vm-traffic-flow).</span><span class="sxs-lookup"><span data-stu-id="a4c70-174">For more information, see [Using Effective Security Rules tootroubleshoot VM traffic flow](../../virtual-network/virtual-network-nsg-troubleshoot-portal.md#using-effective-security-rules-to-troubleshoot-vm-traffic-flow).</span></span>

## <a name="source-5-windows-based-azure-vm"></a><span data-ttu-id="a4c70-175">5. forrás: Windows-alapú Azure virtuális gép</span><span class="sxs-lookup"><span data-stu-id="a4c70-175">Source 5: Windows-based Azure VM</span></span>
![](./media/detailed-troubleshoot-rdp/tshootrdp_5.png)

<span data-ttu-id="a4c70-176">Hello utasításait követve [Ez a cikk](reset-rdp.md).</span><span class="sxs-lookup"><span data-stu-id="a4c70-176">Follow hello instructions in [this article](reset-rdp.md).</span></span> <span data-ttu-id="a4c70-177">Ez a cikk hello virtuális gépen hello a távoli asztal szolgáltatás alaphelyzetbe állítása:</span><span class="sxs-lookup"><span data-stu-id="a4c70-177">This article resets hello Remote Desktop service on hello virtual machine:</span></span>

* <span data-ttu-id="a4c70-178">Hello "Távoli asztal" Windows tűzfal alapértelmezett szabály (3389-es TCP-port) engedélyezése.</span><span class="sxs-lookup"><span data-stu-id="a4c70-178">Enable hello "Remote Desktop" Windows Firewall default rule (TCP port 3389).</span></span>
* <span data-ttu-id="a4c70-179">Engedélyezze a távoli asztali kapcsolatok hello HKLM\System\CurrentControlSet\Control\Terminal Server\fDenyTSConnections beállításjegyzékbeli érték too0 beállításával.</span><span class="sxs-lookup"><span data-stu-id="a4c70-179">Enable Remote Desktop connections by setting hello HKLM\System\CurrentControlSet\Control\Terminal Server\fDenyTSConnections registry value too0.</span></span>

<span data-ttu-id="a4c70-180">Próbálja meg hello újra a kapcsolat a számítógépről.</span><span class="sxs-lookup"><span data-stu-id="a4c70-180">Try hello connection from your computer again.</span></span> <span data-ttu-id="a4c70-181">Ha még nem tud tooconnect távoli asztalon keresztül, ellenőrizze a következő lehetséges problémákat hello:</span><span class="sxs-lookup"><span data-stu-id="a4c70-181">If you are still not able tooconnect via Remote Desktop, check for hello following possible problems:</span></span>

* <span data-ttu-id="a4c70-182">hello a távoli asztal szolgáltatás nem fut a hello megcélzott virtuális Gépre.</span><span class="sxs-lookup"><span data-stu-id="a4c70-182">hello Remote Desktop service is not running on hello target VM.</span></span>
* <span data-ttu-id="a4c70-183">a távoli asztal szolgáltatás hello nem figyeli a 3389-es TCP-port.</span><span class="sxs-lookup"><span data-stu-id="a4c70-183">hello Remote Desktop service is not listening on TCP port 3389.</span></span>
* <span data-ttu-id="a4c70-184">A Windows tűzfal vagy egy másik helyi tűzfal van egy kimenő forgalomra vonatkozó szabály, amely megakadályozza a távoli asztal forgalmat.</span><span class="sxs-lookup"><span data-stu-id="a4c70-184">Windows Firewall or another local firewall has an outbound rule that is preventing Remote Desktop traffic.</span></span>
* <span data-ttu-id="a4c70-185">Távoli asztali kapcsolatok behatolásérzékelési vagy hálózatfigyelési hello Azure virtuális gépen futó szoftverek megakadályozza.</span><span class="sxs-lookup"><span data-stu-id="a4c70-185">Intrusion detection or network monitoring software running on hello Azure virtual machine is preventing Remote Desktop connections.</span></span>

<span data-ttu-id="a4c70-186">A virtuális gépek hello klasszikus telepítési modellel készült használhatja a távoli Azure PowerShell-munkamenet toohello Azure virtuális géphez.</span><span class="sxs-lookup"><span data-stu-id="a4c70-186">For VMs created using hello classic deployment model, you can use a remote Azure PowerShell session toohello Azure virtual machine.</span></span> <span data-ttu-id="a4c70-187">Először tooinstall tanúsítvány hello virtuálisgép üzemeltetési felhőalapú szolgáltatás.</span><span class="sxs-lookup"><span data-stu-id="a4c70-187">First, you need tooinstall a certificate for hello virtual machine's hosting cloud service.</span></span> <span data-ttu-id="a4c70-188">Nyissa meg túl[konfigurálása biztonságos távoli PowerShell-elérés tooAzure virtuális gépek](http://gallery.technet.microsoft.com/scriptcenter/Configures-Secure-Remote-b137f2fe) , és töltse le a hello **InstallWinRMCertAzureVM.ps1** parancsfájl fájl tooyour helyi számítógépen.</span><span class="sxs-lookup"><span data-stu-id="a4c70-188">Go too[Configure Secure Remote PowerShell Access tooAzure Virtual Machines](http://gallery.technet.microsoft.com/scriptcenter/Configures-Secure-Remote-b137f2fe) and download hello **InstallWinRMCertAzureVM.ps1** script file tooyour local computer.</span></span>

<span data-ttu-id="a4c70-189">Következő lépésként telepítse az Azure PowerShell, ha még nem tette meg.</span><span class="sxs-lookup"><span data-stu-id="a4c70-189">Next, install Azure PowerShell if you haven't already.</span></span> <span data-ttu-id="a4c70-190">Lásd: [hogyan tooinstall és konfigurálja az Azure Powershellt](/powershell/azure/overview).</span><span class="sxs-lookup"><span data-stu-id="a4c70-190">See [How tooinstall and configure Azure PowerShell](/powershell/azure/overview).</span></span>

<span data-ttu-id="a4c70-191">Ezután nyissa meg az Azure PowerShell-parancssort, és módosítani hello aktuális mappa toohello hello **InstallWinRMCertAzureVM.ps1** parancsfájlt.</span><span class="sxs-lookup"><span data-stu-id="a4c70-191">Next, open an Azure PowerShell command prompt and change hello current folder toohello location of hello **InstallWinRMCertAzureVM.ps1** script file.</span></span> <span data-ttu-id="a4c70-192">az Azure PowerShell-parancsfájl toorun, meg kell adni a hello megfelelő végrehajtási házirendet.</span><span class="sxs-lookup"><span data-stu-id="a4c70-192">toorun an Azure PowerShell script, you must set hello correct execution policy.</span></span> <span data-ttu-id="a4c70-193">Futtassa a hello **Get-ExecutionPolicy** toodetermine az aktuális házirendszint parancsot.</span><span class="sxs-lookup"><span data-stu-id="a4c70-193">Run hello **Get-ExecutionPolicy** command toodetermine your current policy level.</span></span> <span data-ttu-id="a4c70-194">További információ a megfelelő szint hello beállítása: [Set-ExecutionPolicy](https://technet.microsoft.com/library/hh849812.aspx).</span><span class="sxs-lookup"><span data-stu-id="a4c70-194">For information about setting hello appropriate level, see [Set-ExecutionPolicy](https://technet.microsoft.com/library/hh849812.aspx).</span></span>

<span data-ttu-id="a4c70-195">Ezután töltse ki az Azure-előfizetés nevét, hello felhőszolgáltatás neve és a virtuális gép nevét (hello < és > karakter eltávolítása), majd futtassa az alábbi parancsokat.</span><span class="sxs-lookup"><span data-stu-id="a4c70-195">Next, fill in your Azure subscription name, hello cloud service name, and your virtual machine name (removing hello < and > characters), and then run these commands.</span></span>

```powershell
$subscr="<Name of your Azure subscription>"
$serviceName="<Name of hello cloud service that contains hello target virtual machine>"
$vmName="<Name of hello target virtual machine>"
.\InstallWinRMCertAzureVM.ps1 -SubscriptionName $subscr -ServiceName $serviceName -Name $vmName
```

<span data-ttu-id="a4c70-196">Hello megfelelő előfizetés neve letölthető hello *SubscriptionName* hello hello megjelenítését tulajdonságának **Get-AzureSubscription** parancsot.</span><span class="sxs-lookup"><span data-stu-id="a4c70-196">You can get hello correct subscription name from hello *SubscriptionName* property of hello display of hello **Get-AzureSubscription** command.</span></span> <span data-ttu-id="a4c70-197">Hello felhőszolgáltatás neve hello virtuális gép letölthető hello *szolgáltatásnév* a hello hello megjelenített oszlop **Get-AzureVM** parancsot.</span><span class="sxs-lookup"><span data-stu-id="a4c70-197">You can get hello cloud service name for hello virtual machine from hello *ServiceName* column in hello display of hello **Get-AzureVM** command.</span></span>

<span data-ttu-id="a4c70-198">Ellenőrizze, hogy van-e hello új tanúsítványt.</span><span class="sxs-lookup"><span data-stu-id="a4c70-198">Check if you have hello new certificate.</span></span> <span data-ttu-id="a4c70-199">Nyissa meg a tanúsítványok beépülő hello aktuális felhasználó számára, és a hely hello **megbízható legfelső szintű hitelesítésszolgáltatók\Tanúsítványok** mappa.</span><span class="sxs-lookup"><span data-stu-id="a4c70-199">Open a Certificates snap-in for hello current user and look in hello **Trusted Root Certification Authorities\Certificates** folder.</span></span> <span data-ttu-id="a4c70-200">Láthatja, hogy egy tanúsítványt a felhőalapú szolgáltatás, a tulajdonos toocolumn hello hello DNS-nevét (például: cloudservice4testing.cloudapp.net).</span><span class="sxs-lookup"><span data-stu-id="a4c70-200">You should see a certificate with hello DNS name of your cloud service in hello Issued toocolumn (example: cloudservice4testing.cloudapp.net).</span></span>

<span data-ttu-id="a4c70-201">A következő Azure PowerShell távoli munkamenet kezdeményezése az alábbi parancsokkal.</span><span class="sxs-lookup"><span data-stu-id="a4c70-201">Next, initiate a remote Azure PowerShell session by using these commands.</span></span>

```powershell
$uri = Get-AzureWinRMUri -ServiceName $serviceName -Name $vmName
$creds = Get-Credential
Enter-PSSession -ConnectionUri $uri -Credential $creds
```

<span data-ttu-id="a4c70-202">Érvényes rendszergazdai hitelesítő adatok megadása, megtekintheti az Azure PowerShell-parancssorba a következő valami hasonló toohello:</span><span class="sxs-lookup"><span data-stu-id="a4c70-202">After entering valid administrator credentials, you should see something similar toohello following Azure PowerShell prompt:</span></span>

```powershell
[cloudservice4testing.cloudapp.net]: PS C:\Users\User1\Documents>
```

<span data-ttu-id="a4c70-203">hello első a kérdéshez része a felhőszolgáltatás neve, amely tartalmazza a hello megcélzott virtuális Gépre, amely eltér a "cloudservice4testing.cloudapp.net" lehet.</span><span class="sxs-lookup"><span data-stu-id="a4c70-203">hello first part of this prompt is your cloud service name that contains hello target VM, which could be different from "cloudservice4testing.cloudapp.net".</span></span> <span data-ttu-id="a4c70-204">Ezután adja ki a felhőre vonatkozó Azure PowerShell-parancsok szolgáltatás tooinvestigate hello problémák említett és hello-konfiguráció kijavítása.</span><span class="sxs-lookup"><span data-stu-id="a4c70-204">You can now issue Azure PowerShell commands for this cloud service tooinvestigate hello problems mentioned and correct hello configuration.</span></span>

### <a name="toomanually-correct-hello-remote-desktop-services-listening-tcp-port"></a><span data-ttu-id="a4c70-205">toomanually megfelelő hello távoli asztali szolgáltatások figyelő TCP-port</span><span class="sxs-lookup"><span data-stu-id="a4c70-205">toomanually correct hello Remote Desktop Services listening TCP port</span></span>
<span data-ttu-id="a4c70-206">A parancssorból hello távoli Azure PowerShell munkamenetben futtassa a parancsot.</span><span class="sxs-lookup"><span data-stu-id="a4c70-206">At hello remote Azure PowerShell session prompt, run this command.</span></span>

```powershell
Get-ItemProperty -Path "HKLM:\System\CurrentControlSet\Control\Terminal Server\WinStations\RDP-Tcp" -Name "PortNumber"
```

<span data-ttu-id="a4c70-207">hello portszám tulajdonság hello aktuális port számát mutatja.</span><span class="sxs-lookup"><span data-stu-id="a4c70-207">hello PortNumber property shows hello current port number.</span></span> <span data-ttu-id="a4c70-208">Ha szükséges, a parancs segítségével módosítsa a hello távoli asztal port hátsó tooits alapértelmezett számértéket (3389-es).</span><span class="sxs-lookup"><span data-stu-id="a4c70-208">If needed, change hello Remote Desktop port number back tooits default value (3389) by using this command.</span></span>

```powershell
Set-ItemProperty -Path "HKLM:\System\CurrentControlSet\Control\Terminal Server\WinStations\RDP-Tcp" -Name "PortNumber" -Value 3389
```

<span data-ttu-id="a4c70-209">Győződjön meg arról, hogy a hello port megtörtént-e a módosított too3389 a parancs segítségével.</span><span class="sxs-lookup"><span data-stu-id="a4c70-209">Verify that hello port has been changed too3389 by using this command.</span></span>

```powershell
Get-ItemProperty -Path "HKLM:\System\CurrentControlSet\Control\Terminal Server\WinStations\RDP-Tcp" -Name "PortNumber"
```

<span data-ttu-id="a4c70-210">Ezzel a paranccsal bezárásához hello távoli Azure PowerShell-munkamenetben.</span><span class="sxs-lookup"><span data-stu-id="a4c70-210">Exit hello remote Azure PowerShell session by using this command.</span></span>

```powershell
Exit-PSSession
```

<span data-ttu-id="a4c70-211">Győződjön meg arról, hogy a távoli asztal hello Azure virtuális gép végpontja hello is 3398 TCP-portot használja, mint a belső portjára.</span><span class="sxs-lookup"><span data-stu-id="a4c70-211">Verify that hello Remote Desktop endpoint for hello Azure VM is also using TCP port 3398 as its internal port.</span></span> <span data-ttu-id="a4c70-212">Indítsa újra a hello Azure virtuális Gépen, majd próbálja újra a hello távoli asztali kapcsolat.</span><span class="sxs-lookup"><span data-stu-id="a4c70-212">Restart hello Azure VM and try hello Remote Desktop connection again.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="a4c70-213">További források</span><span class="sxs-lookup"><span data-stu-id="a4c70-213">Additional resources</span></span>
[<span data-ttu-id="a4c70-214">Hogyan tooreset jelszó vagy a távoli asztal hello szolgáltatás fut a Windows virtuális gépek</span><span class="sxs-lookup"><span data-stu-id="a4c70-214">How tooreset a password or hello Remote Desktop service for Windows virtual machines</span></span>](reset-rdp.md)

[<span data-ttu-id="a4c70-215">Hogyan tooinstall Azure PowerShell és konfigurálása</span><span class="sxs-lookup"><span data-stu-id="a4c70-215">How tooinstall and configure Azure PowerShell</span></span>](/powershell/azure/overview)

[<span data-ttu-id="a4c70-216">Secure Shell (SSH) kapcsolatok tooa Linux-alapú Azure virtuális gép hibakeresése</span><span class="sxs-lookup"><span data-stu-id="a4c70-216">Troubleshoot Secure Shell (SSH) connections tooa Linux-based Azure virtual machine</span></span>](../linux/troubleshoot-ssh-connection.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)

[<span data-ttu-id="a4c70-217">Egy Azure virtuális gépen futó access tooan alkalmazás hibaelhárítása</span><span class="sxs-lookup"><span data-stu-id="a4c70-217">Troubleshoot access tooan application running on an Azure virtual machine</span></span>](../linux/troubleshoot-app-connection.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)

