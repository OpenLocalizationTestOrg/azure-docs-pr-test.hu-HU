---
title: "Bejelentkezés az OpenID Connect - Azure AD B2C webes |} Microsoft Docs"
description: "Webalkalmazások készítéséhez az Azure Active Directory végrehajtása az OpenID Connect hitelesítési protokoll használatával"
services: active-directory-b2c
documentationcenter: 
author: saeedakhter-msft
manager: krassk
editor: parakhj
ms.assetid: 21d420c8-3c10-4319-b681-adf2e89e7ede
ms.service: active-directory-b2c
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/16/2017
ms.author: saeedakhter-msft
ms.openlocfilehash: b0c33a47dd0cae79eab32ac578448fae8bf59be5
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 08/29/2017
---
# <a name="azure-active-directory-b2c-web-sign-in-with-openid-connect"></a><span data-ttu-id="e7e0a-103">Az Azure Active Directory B2C: Webes bejelentkezés az OpenID Connect</span><span class="sxs-lookup"><span data-stu-id="e7e0a-103">Azure Active Directory B2C: Web sign-in with OpenID Connect</span></span>
<span data-ttu-id="e7e0a-104">OpenID Connect egy olyan hitelesítési protokoll, OAuth 2.0, a biztonságos bejelentkezéshez felhasználók webalkalmazásokhoz használható platformra épül.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-104">OpenID Connect is an authentication protocol, built on top of OAuth 2.0, that can be used to securely sign users in to web applications.</span></span> <span data-ttu-id="e7e0a-105">Az Azure Active Directory B2C segítségével OpenID Connect (Azure AD B2C-vel) végrehajtásával, is erőforrás kihelyezése a regisztráció, bejelentkezés és más Identitáskezelés észlel a webalkalmazások Azure Active Directory (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="e7e0a-105">By using the Azure Active Directory B2C (Azure AD B2C) implementation of OpenID Connect, you can outsource sign-up, sign-in, and other identity management experiences in your web applications to Azure Active Directory (Azure AD).</span></span> <span data-ttu-id="e7e0a-106">Ez az útmutató bemutatja, hogyan nyelvtől független módon.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-106">This guide shows you how to do so in a language-independent manner.</span></span> <span data-ttu-id="e7e0a-107">Bemutatja, hogyan lehet üzeneteket küldjön és fogadjon HTTP a nyílt forráskódú kódtárai bármelyikét használata nélkül.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-107">It describes how to send and receive HTTP messages without using any of our open-source libraries.</span></span>

<span data-ttu-id="e7e0a-108">[OpenID Connect](http://openid.net/specs/openid-connect-core-1_0.html) kibővíti az OAuth 2.0 *engedélyezési* protokollt használni egy *hitelesítési* protokoll.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-108">[OpenID Connect](http://openid.net/specs/openid-connect-core-1_0.html) extends the OAuth 2.0 *authorization* protocol for use as an *authentication* protocol.</span></span> <span data-ttu-id="e7e0a-109">Ez lehetővé teszi, hogy az egyszeri bejelentkezés használatával OAuth végez.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-109">This allows you to perform single sign-on by using OAuth.</span></span> <span data-ttu-id="e7e0a-110">Akkor jelenik meg az egy *azonosító token*, amelyen egy biztonsági jogkivonatot, amely lehetővé teszi a felhasználó identitásának ellenőrzéséhez és a felhasználó alapvető profiladataihoz információt szerezni az ügyfél.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-110">It introduces the concept of an *ID token*, which is a security token that allows the client to verify the identity of the user and obtain basic profile information about the user.</span></span>

<span data-ttu-id="e7e0a-111">OAuth 2.0 terjeszti ki, mert emellett lehetővé teszi az alkalmazások biztonságos megszerzésére *hozzáférési jogkivonatok*.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-111">Because it extends OAuth 2.0, it also enables apps to securely acquire *access tokens*.</span></span> <span data-ttu-id="e7e0a-112">Access_tokens által védett erőforrások eléréséhez használható egy [engedélyezési server](active-directory-b2c-reference-protocols.md#the-basics).</span><span class="sxs-lookup"><span data-stu-id="e7e0a-112">You can use access_tokens to access resources that are secured by an [authorization server](active-directory-b2c-reference-protocols.md#the-basics).</span></span> <span data-ttu-id="e7e0a-113">Ajánlott OpenID Connect, ha a webes alkalmazás, amely a kiszolgálón futtatott és böngészőn keresztül elért most felépítése.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-113">We recommend OpenID Connect if you're building a web application that is hosted on a server and accessed through a browser.</span></span> <span data-ttu-id="e7e0a-114">Ha azt szeretné, az Identitáskezelés hozzáadása a hordozható vagy asztali alkalmazásokhoz az Azure AD B2C használatával, használjon [OAuth 2.0](active-directory-b2c-reference-oauth-code.md) ahelyett, hogy az OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-114">If you want to add identity management to your mobile or desktop applications by using Azure AD B2C, you should use [OAuth 2.0](active-directory-b2c-reference-oauth-code.md) rather than OpenID Connect.</span></span>

<span data-ttu-id="e7e0a-115">Az Azure AD B2C kibővíti az OpenID Connect protokoll szabványt nagyobb, mint az egyszerű hitelesítéshez és engedélyezéshez.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-115">Azure AD B2C extends the standard OpenID Connect protocol to do more than simple authentication and authorization.</span></span> <span data-ttu-id="e7e0a-116">Okozna a [házirend paraméter](active-directory-b2c-reference-policies.md), amely lehetővé teszi az OpenID Connect használatával adhatja hozzá a felhasználói élményt – például a regisztráció, bejelentkezés és a profilkezelés – az alkalmazáshoz.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-116">It introduces the [policy parameter](active-directory-b2c-reference-policies.md), which enables you to use OpenID Connect to add user experiences--such as sign-up, sign-in, and profile management--to your app.</span></span> <span data-ttu-id="e7e0a-117">Itt azt mutatja be valósít meg minden olyan ezeket a szolgáltatásokat a webalkalmazások OpenID Connect és házirendek segítségével.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-117">Here, we show you how to use OpenID Connect and policies to implement each of these experiences in your web applications.</span></span> <span data-ttu-id="e7e0a-118">Is mutat be, hogyan kérhet hozzáférési jogkivonatok webes API-k eléréséhez.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-118">We'll also show you how to get access tokens for accessing web APIs.</span></span>

<span data-ttu-id="e7e0a-119">A példa HTTP-kérelmekre a következő szakaszban használja, a minta B2C-címtárban, fabrikamb2c.onmicrosoft.com, valamint a mintaalkalmazást, https://aadb2cplayground.azurewebsites.net és házirendek.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-119">The example HTTP requests in the next section use our sample B2C directory, fabrikamb2c.onmicrosoft.com, as well as our sample application, https://aadb2cplayground.azurewebsites.net, and policies.</span></span> <span data-ttu-id="e7e0a-120">Szabadon próbálja ki a kérelmek saját kezűleg a ezeket az értékeket, vagy lecserélheti őket a saját.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-120">You're free to try out the requests yourself by using these values, or you can replace them with your own.</span></span>
<span data-ttu-id="e7e0a-121">Megtudhatja, hogyan [saját B2C-bérlő, alkalmazások és házirendek](#use-your-own-b2c-directory).</span><span class="sxs-lookup"><span data-stu-id="e7e0a-121">Learn how to [get your own B2C tenant, application, and policies](#use-your-own-b2c-directory).</span></span>

## <a name="send-authentication-requests"></a><span data-ttu-id="e7e0a-122">Hitelesítési kérések küldése</span><span class="sxs-lookup"><span data-stu-id="e7e0a-122">Send authentication requests</span></span>
<span data-ttu-id="e7e0a-123">Ha a webalkalmazás kell hitelesíteni a felhasználót, majd hajtsa végre egy házirendet, utasíthatja-e a felhasználót, hogy a `/authorize` végpont.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-123">When your web app needs to authenticate the user and execute a policy, it can direct the user to the `/authorize` endpoint.</span></span> <span data-ttu-id="e7e0a-124">Az adatfolyam interaktív része azt, ha a felhasználó végrehajtja a műveletet, attól függően, hogy a házirend.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-124">This is the interactive portion of the flow, where the user takes action, depending on the policy.</span></span>

<span data-ttu-id="e7e0a-125">A kérelem, az ügyfél azt jelzi, szerzi be a felhasználó a szükséges engedélyekkel a `scope` paraméter és a házirendet, a végrehajtást a `p` paraméter.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-125">In this request, the client indicates the permissions that it needs to acquire from the user in the `scope` parameter and the policy to execute in the `p` parameter.</span></span> <span data-ttu-id="e7e0a-126">Három Példák különböző házirend segítségével (sortöréssel olvashatóság érdekében), a következő szakaszban találhatók.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-126">Three examples are provided in the following sections (with line breaks for readability), each using a different policy.</span></span> <span data-ttu-id="e7e0a-127">Követve betekintést nyerhet abba az egyes kérelmek működése, próbálja meg beilleszteni a kérelem egy böngészőbe, és azt futtatja.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-127">To get a feel for how each request works, try pasting the request into a browser and running it.</span></span>

#### <a name="use-a-sign-in-policy"></a><span data-ttu-id="e7e0a-128">A bejelentkezési házirend</span><span class="sxs-lookup"><span data-stu-id="e7e0a-128">Use a sign-in policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code+id_token
&redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
&response_mode=form_post
&scope=openid%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&nonce=12345
&p=b2c_1_sign_in
```

#### <a name="use-a-sign-up-policy"></a><span data-ttu-id="e7e0a-129">A regisztrációs szabályzatban használata</span><span class="sxs-lookup"><span data-stu-id="e7e0a-129">Use a sign-up policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code+id_token
&redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
&response_mode=form_post
&scope=openid%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&nonce=12345
&p=b2c_1_sign_up
```

#### <a name="use-an-edit-profile-policy"></a><span data-ttu-id="e7e0a-130">Egy házirend-profil szerkesztése</span><span class="sxs-lookup"><span data-stu-id="e7e0a-130">Use an edit-profile policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code+id_token
&redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
&response_mode=form_post
&scope=openid%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&nonce=12345
&p=b2c_1_edit_profile
```

| <span data-ttu-id="e7e0a-131">Paraméter</span><span class="sxs-lookup"><span data-stu-id="e7e0a-131">Parameter</span></span> | <span data-ttu-id="e7e0a-132">Kötelező megadni?</span><span class="sxs-lookup"><span data-stu-id="e7e0a-132">Required?</span></span> | <span data-ttu-id="e7e0a-133">Leírás</span><span class="sxs-lookup"><span data-stu-id="e7e0a-133">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="e7e0a-134">client_id</span><span class="sxs-lookup"><span data-stu-id="e7e0a-134">client_id</span></span> |<span data-ttu-id="e7e0a-135">Szükséges</span><span class="sxs-lookup"><span data-stu-id="e7e0a-135">Required</span></span> |<span data-ttu-id="e7e0a-136">Az alkalmazás azonosítója, amely a [Azure-portálon](https://portal.azure.com/) az alkalmazáshoz hozzárendelni.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-136">The application ID that the [Azure portal](https://portal.azure.com/) assigned to your app.</span></span> |
| <span data-ttu-id="e7e0a-137">response_type</span><span class="sxs-lookup"><span data-stu-id="e7e0a-137">response_type</span></span> |<span data-ttu-id="e7e0a-138">Szükséges</span><span class="sxs-lookup"><span data-stu-id="e7e0a-138">Required</span></span> |<span data-ttu-id="e7e0a-139">A válasz-típus, az OpenID Connect tartalmaznia kell egy azonosító jogkivonatot.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-139">The response type, which must include an ID token for OpenID Connect.</span></span> <span data-ttu-id="e7e0a-140">Ha a webalkalmazásnak is kell jogkivonatok hívásakor webes API-k, `code+id_token`, ahogy azt itt régebben már kötöttek.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-140">If your web app also needs tokens for calling a web API, you can use `code+id_token`, as we've done here.</span></span> |
| <span data-ttu-id="e7e0a-141">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="e7e0a-141">redirect_uri</span></span> |<span data-ttu-id="e7e0a-142">Ajánlott</span><span class="sxs-lookup"><span data-stu-id="e7e0a-142">Recommended</span></span> |<span data-ttu-id="e7e0a-143">A `redirect_uri` paraméter az alkalmazás, ahol küldött és az alkalmazás által fogadott a hitelesítési válaszokat.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-143">The `redirect_uri` parameter of your app, where authentication responses can be sent and received by your app.</span></span> <span data-ttu-id="e7e0a-144">Ez pontosan egyeznie kell a `redirect_uri` paramétereket, és regisztrálta a portálon, azzal a különbséggel, hogy az URL-kódolású kell lennie.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-144">It must exactly match one of the `redirect_uri` parameters that you registered in the portal, except that it must be URL encoded.</span></span> |
| <span data-ttu-id="e7e0a-145">Hatókör</span><span class="sxs-lookup"><span data-stu-id="e7e0a-145">scope</span></span> |<span data-ttu-id="e7e0a-146">Szükséges</span><span class="sxs-lookup"><span data-stu-id="e7e0a-146">Required</span></span> |<span data-ttu-id="e7e0a-147">Hatókörök szóközökkel elválasztott listája.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-147">A space-separated list of scopes.</span></span> <span data-ttu-id="e7e0a-148">Egy hatókör érték az Azure AD mindkét kérnek engedélyeket.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-148">A single scope value indicates to Azure AD both permissions that are being requested.</span></span> <span data-ttu-id="e7e0a-149">A `openid` hatókör azt jelzi, a felhasználói azonosító-jogkivonatokat (több, a cikk későbbi részében ezen lesz) formájában adatait, és jelentkezzen be a felhasználó engedélyt.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-149">The `openid` scope indicates a permission to sign in the user and get data about the user in the form of ID tokens (more to come on this later in the article).</span></span> <span data-ttu-id="e7e0a-150">A `offline_access` hatókör megadása nem kötelező web Apps.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-150">The `offline_access` scope is optional for web apps.</span></span> <span data-ttu-id="e7e0a-151">Azt jelzi, hogy az alkalmazás kell egy *frissítési jogkivonat* hosszú élettartamú erőforrások elérése érdekében.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-151">It indicates that your app will need a *refresh token* for long-lived access to resources.</span></span> |
| <span data-ttu-id="e7e0a-152">response_mode</span><span class="sxs-lookup"><span data-stu-id="e7e0a-152">response_mode</span></span> |<span data-ttu-id="e7e0a-153">Ajánlott</span><span class="sxs-lookup"><span data-stu-id="e7e0a-153">Recommended</span></span> |<span data-ttu-id="e7e0a-154">A módszer, amelynek használatával az eredményül kapott engedélyezési kód küldi vissza az alkalmazást.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-154">The method that should be used to send the resulting authorization code back to your app.</span></span> <span data-ttu-id="e7e0a-155">Ez lehet akár `query`, `form_post`, vagy `fragment`.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-155">It can be either `query`, `form_post`, or `fragment`.</span></span>  <span data-ttu-id="e7e0a-156">A `form_post` válasz mód használata ajánlott legjobb biztonsági.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-156">The `form_post` response mode is recommended for best security.</span></span> |
| <span data-ttu-id="e7e0a-157">state</span><span class="sxs-lookup"><span data-stu-id="e7e0a-157">state</span></span> |<span data-ttu-id="e7e0a-158">Ajánlott</span><span class="sxs-lookup"><span data-stu-id="e7e0a-158">Recommended</span></span> |<span data-ttu-id="e7e0a-159">A kérelem is a biztonságijogkivonat-válaszban visszaadott szerepel érték.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-159">A value included in the request that is also returned in the token response.</span></span> <span data-ttu-id="e7e0a-160">Bármely, a kívánt tartalmat karakterlánc lehet.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-160">It can be a string of any content that you want.</span></span> <span data-ttu-id="e7e0a-161">Egy véletlenszerűen generált egyedi érték webhelyközi kérések hamisításának megakadályozása támadások megelőzése általában szolgál.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-161">A randomly generated unique value is typically used for preventing cross-site request forgery attacks.</span></span> <span data-ttu-id="e7e0a-162">Az állapot az alkalmazás a felhasználói állapot információt kódolásához, előtt a hitelesítési kérést, például a lap, amilyenek korábban voltak a is használatos.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-162">The state is also used to encode information about the user's state in the app before the authentication request occurred, such as the page they were on.</span></span> |
| <span data-ttu-id="e7e0a-163">Nonce</span><span class="sxs-lookup"><span data-stu-id="e7e0a-163">nonce</span></span> |<span data-ttu-id="e7e0a-164">Szükséges</span><span class="sxs-lookup"><span data-stu-id="e7e0a-164">Required</span></span> |<span data-ttu-id="e7e0a-165">A kérelem (az alkalmazás által generált), amely szerepelni fog az eredményül kapott azonosító jogkivonat jogcímként szerepel érték.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-165">A value included in the request (generated by the app) that will be included in the resulting ID token as a claim.</span></span> <span data-ttu-id="e7e0a-166">Az alkalmazás ezután ellenőrizheti a hitelesítési karakterláncok ismétlésének támadások mérséklése ezt az értéket.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-166">The app can then verify this value to mitigate token replay attacks.</span></span> <span data-ttu-id="e7e0a-167">Az érték egy véletlenszerű egyedi karakterlánc, amely segítségével azonosíthatja a kérelem forrása általában.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-167">The value is typically a randomized unique string that can be used to identify the origin of the request.</span></span> |
| <span data-ttu-id="e7e0a-168">P</span><span class="sxs-lookup"><span data-stu-id="e7e0a-168">p</span></span> |<span data-ttu-id="e7e0a-169">Szükséges</span><span class="sxs-lookup"><span data-stu-id="e7e0a-169">Required</span></span> |<span data-ttu-id="e7e0a-170">A házirendet, amely végrehajtja.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-170">The policy that will be executed.</span></span> <span data-ttu-id="e7e0a-171">Olyan házirendet, amely a B2C bérlő létrehozása nevét.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-171">It is the name of a policy that is created in your B2C tenant.</span></span> <span data-ttu-id="e7e0a-172">A házirend nevének értékét kell kezdődnie `b2c\_1\_`.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-172">The policy name value should begin with `b2c\_1\_`.</span></span> <span data-ttu-id="e7e0a-173">További információ a házirendek és a [bővíthető szabályzat-keretrendszernek](active-directory-b2c-reference-policies.md).</span><span class="sxs-lookup"><span data-stu-id="e7e0a-173">Learn more about policies and the [extensible policy framework](active-directory-b2c-reference-policies.md).</span></span> |
| <span data-ttu-id="e7e0a-174">parancssor</span><span class="sxs-lookup"><span data-stu-id="e7e0a-174">prompt</span></span> |<span data-ttu-id="e7e0a-175">Optional</span><span class="sxs-lookup"><span data-stu-id="e7e0a-175">Optional</span></span> |<span data-ttu-id="e7e0a-176">A típus a felhasználói beavatkozás szükséges.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-176">The type of user interaction that is required.</span></span> <span data-ttu-id="e7e0a-177">Jelenleg az egyetlen érvényes érték `login`, amely előírja, hogy a felhasználó megadja hitelesítő adataikkal, hogy kérésre.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-177">The only valid value at this time is `login`, which forces the user to enter their credentials on that request.</span></span> <span data-ttu-id="e7e0a-178">Egyszeri bejelentkezés nem lépnek érvénybe.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-178">Single sign-on will not take effect.</span></span> |

<span data-ttu-id="e7e0a-179">Ezen a ponton a felhasználónak kapcsolatba a házirend-munkafolyamat végrehajtásához.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-179">At this point, the user is asked to complete the policy's workflow.</span></span> <span data-ttu-id="e7e0a-180">Ez a felhasználó, írja be a felhasználónevét és jelszavát, bejelentkezés egy közösségi identitás regisztrál a könyvtár, vagy minden más szám lépésből áll, attól függően, hogy hogyan van definiálva a házirend az lehet, hogy magában.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-180">This might involve the user entering their username and password, signing in with a social identity, signing up for the directory, or any other number of steps, depending on how the policy is defined.</span></span>

<span data-ttu-id="e7e0a-181">Miután a felhasználó teljesítette a szabályzat, az Azure AD adja vissza az alkalmazást a jelzett választ `redirect_uri` paraméter megadott módon a `response_mode` paraméter.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-181">After the user completes the policy, Azure AD returns a response to your app at the indicated `redirect_uri` parameter, by using the method that is specified in the `response_mode` parameter.</span></span> <span data-ttu-id="e7e0a-182">A válasz megegyezik a független a házirendet, amely végrehajtja a rendszer a fenti esetek mindegyikét.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-182">The response is the same for each of the preceding cases, independent of the policy that is executed.</span></span>

<span data-ttu-id="e7e0a-183">A sikeres válasz használatával `response_mode=fragment` alábbihoz hasonlóan fog kinézni:</span><span class="sxs-lookup"><span data-stu-id="e7e0a-183">A successful response using `response_mode=fragment` would look like:</span></span>

```
GET https://aadb2cplayground.azurewebsites.net/#
id_token=eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...
&code=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...
&state=arbitrary_data_you_can_receive_in_the_response
```

| <span data-ttu-id="e7e0a-184">Paraméter</span><span class="sxs-lookup"><span data-stu-id="e7e0a-184">Parameter</span></span> | <span data-ttu-id="e7e0a-185">Leírás</span><span class="sxs-lookup"><span data-stu-id="e7e0a-185">Description</span></span> |
| --- | --- |
| <span data-ttu-id="e7e0a-186">id_token</span><span class="sxs-lookup"><span data-stu-id="e7e0a-186">id_token</span></span> |<span data-ttu-id="e7e0a-187">Az alkalmazás által kért azonosítója jogkivonat.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-187">The ID token that the app requested.</span></span> <span data-ttu-id="e7e0a-188">Az azonosító jogkivonat segítségével ellenőrzi a felhasználó identitását, és a felhasználói munkamenet elindításához.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-188">You can use the ID token to verify the user's identity and begin a session with the user.</span></span> <span data-ttu-id="e7e0a-189">További részleteket a azonosító-jogkivonatokat és azok tartalmát szerepelnek a [Azure AD B2C-jogkivonatok referenciájából](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="e7e0a-189">More details on ID tokens and their contents are included in the [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> |
| <span data-ttu-id="e7e0a-190">Kód</span><span class="sxs-lookup"><span data-stu-id="e7e0a-190">code</span></span> |<span data-ttu-id="e7e0a-191">Az engedélyezési kód, amely az alkalmazás kéri, ha használt `response_type=code+id_token`.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-191">The authorization code that the app requested, if you used `response_type=code+id_token`.</span></span> <span data-ttu-id="e7e0a-192">Az alkalmazás az engedélyezési kód segítségével olyan hozzáférési jogkivonatot cél erőforrás igényelhetnek.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-192">The app can use the authorization code to request an access token for a target resource.</span></span> <span data-ttu-id="e7e0a-193">Hitelesítési kódok nagyon rövid élettartamú.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-193">Authorization codes are very short-lived.</span></span> <span data-ttu-id="e7e0a-194">Ezek általában körülbelül 10 perc múlva lejár.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-194">Typically, they expire after about 10 minutes.</span></span> |
| <span data-ttu-id="e7e0a-195">state</span><span class="sxs-lookup"><span data-stu-id="e7e0a-195">state</span></span> |<span data-ttu-id="e7e0a-196">Ha egy `state` paraméter szerepel a kérést, ugyanazt az értéket meg kell jelennie a válaszban.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-196">If a `state` parameter is included in the request, the same value should appear in the response.</span></span> <span data-ttu-id="e7e0a-197">Az alkalmazás győződjön meg arról, hogy a `state` a kérelem és a válaszban szereplő értékek azonosak.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-197">The app should verify that the `state` values in the request and response are identical.</span></span> |

<span data-ttu-id="e7e0a-198">Hibaválaszok is küldhető a `redirect_uri` paramétert, hogy az alkalmazás képes kezelni őket megfelelően:</span><span class="sxs-lookup"><span data-stu-id="e7e0a-198">Error responses can also be sent to the `redirect_uri` parameter so that the app can handle them appropriately:</span></span>

```
GET https://aadb2cplayground.azurewebsites.net/#
error=access_denied
&error_description=the+user+canceled+the+authentication
&state=arbitrary_data_you_can_receive_in_the_response
```

| <span data-ttu-id="e7e0a-199">Paraméter</span><span class="sxs-lookup"><span data-stu-id="e7e0a-199">Parameter</span></span> | <span data-ttu-id="e7e0a-200">Leírás</span><span class="sxs-lookup"><span data-stu-id="e7e0a-200">Description</span></span> |
| --- | --- |
| <span data-ttu-id="e7e0a-201">error</span><span class="sxs-lookup"><span data-stu-id="e7e0a-201">error</span></span> |<span data-ttu-id="e7e0a-202">Egy hibakód karakterlánc típusú hibák előforduló és hibáinak reagálni azokra, amely használható besorolására használható.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-202">An error-code string that can be used to classify types of errors that occur and that can be used to react to errors.</span></span> |
| <span data-ttu-id="e7e0a-203">error_description</span><span class="sxs-lookup"><span data-stu-id="e7e0a-203">error_description</span></span> |<span data-ttu-id="e7e0a-204">Egy adott hibaüzenet, amelyek segítségével a fejlesztők hitelesítési hiba okának azonosításához.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-204">A specific error message that can help a developer identify the root cause of an authentication error.</span></span> |
| <span data-ttu-id="e7e0a-205">state</span><span class="sxs-lookup"><span data-stu-id="e7e0a-205">state</span></span> |<span data-ttu-id="e7e0a-206">Lásd az ebben a szakaszban az első tábla teljes leírását.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-206">See the full description in the first table in this section.</span></span> <span data-ttu-id="e7e0a-207">Ha egy `state` paraméter szerepel a kérést, ugyanazt az értéket meg kell jelennie a válaszban.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-207">If a `state` parameter is included in the request, the same value should appear in the response.</span></span> <span data-ttu-id="e7e0a-208">Az alkalmazás győződjön meg arról, hogy a `state` a kérelem és a válaszban szereplő értékek azonosak.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-208">The app should verify that the `state` values in the request and response are identical.</span></span> |

## <a name="validate-the-id-token"></a><span data-ttu-id="e7e0a-209">Az azonosító token ellenőrzése</span><span class="sxs-lookup"><span data-stu-id="e7e0a-209">Validate the ID token</span></span>
<span data-ttu-id="e7e0a-210">Csak fogadása az azonosító tokent elég nem lehet hitelesíteni a felhasználót.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-210">Just receiving an ID token is not enough to authenticate the user.</span></span> <span data-ttu-id="e7e0a-211">Kell a azonosító jogkivonat-aláírás ellenőrzése és ellenőrizze a jogcímek, az alkalmazás követelményeinek / jogkivonat.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-211">You must validate the ID token's signature and verify the claims in the token per your app's requirements.</span></span> <span data-ttu-id="e7e0a-212">Használja az Azure AD B2C [JSON Web Tokens (JWTs)](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html) és a jogkivonatok aláírásához, és ellenőrizze, hogy azok érvényes nyilvános kulccsal történő titkosítás.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-212">Azure AD B2C uses [JSON Web Tokens (JWTs)](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html) and public key cryptography to sign tokens and verify that they are valid.</span></span>

<span data-ttu-id="e7e0a-213">Nincsenek számos nyílt forráskódú kódtárai elérhető JWTs, attól függően, hogy a nyelvi preferencia szerinti ellenőrzése.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-213">There are many open-source libraries that are available for validating JWTs, depending on your language of preference.</span></span> <span data-ttu-id="e7e0a-214">Javasoljuk, hogy ezek a lehetőségek felfedezése megvalósító egyéni ellenőrzési logika helyett.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-214">We recommend exploring those options rather than implementing your own validation logic.</span></span> <span data-ttu-id="e7e0a-215">Itt az információk hasznosak bizonyulnak a tudja, hogyan megfelelően használhatja a tárak.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-215">The information here will be useful in figuring out how to properly use those libraries.</span></span>

<span data-ttu-id="e7e0a-216">Az Azure AD B2C rendelkezik az OpenID Connect metaadat-végpontjához, amely lehetővé teszi egy alkalmazás futásidőben Azure AD B2C-vel kapcsolatos információk beolvasása.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-216">Azure AD B2C has an OpenID Connect metadata endpoint, which allows an app to fetch information about Azure AD B2C at runtime.</span></span> <span data-ttu-id="e7e0a-217">Ezen információk közé tartozik a végpontok, lexikális elem tartalmának és jogkivonat-aláíró kulcsok.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-217">This information includes endpoints, token contents, and token signing keys.</span></span> <span data-ttu-id="e7e0a-218">Nincs a JSON metaadat-dokumentum-házirendet a B2C-bérlőben.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-218">There is a JSON metadata document for each policy in your B2C tenant.</span></span> <span data-ttu-id="e7e0a-219">Például a metaadat-dokumentum esetében a `b2c_1_sign_in` -szabályzat `fabrikamb2c.onmicrosoft.com` helyen található:</span><span class="sxs-lookup"><span data-stu-id="e7e0a-219">For example, the metadata document for the `b2c_1_sign_in` policy in `fabrikamb2c.onmicrosoft.com` is located at:</span></span>

`https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/v2.0/.well-known/openid-configuration?p=b2c_1_sign_in`

<span data-ttu-id="e7e0a-220">A konfigurációs dokumentum tulajdonságainak egyik `jwks_uri`, amelynek értéke lenne ugyanabban a házirendben:</span><span class="sxs-lookup"><span data-stu-id="e7e0a-220">One of the properties of this configuration document is `jwks_uri`, whose value for the same policy would be:</span></span>

<span data-ttu-id="e7e0a-221">`https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/discovery/v2.0/keys?p=b2c_1_sign_in`.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-221">`https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/discovery/v2.0/keys?p=b2c_1_sign_in`.</span></span>

<span data-ttu-id="e7e0a-222">Annak meghatározásához, hogy mely házirendet használt azonosító aláíró jogkivonat (és a metaadatok beolvasása honnan), két lehetősége van.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-222">To determine which policy was used in signing an ID token (and from where to fetch the metadata), you have two options.</span></span> <span data-ttu-id="e7e0a-223">Először a házirend neve szerepel a `acr` jogcím a Azonosítót jogkivonatban.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-223">First, the policy name is included in the `acr` claim in the ID token.</span></span> <span data-ttu-id="e7e0a-224">A jogcímek egy azonosító jogkivonat elemzése információkért lásd: a [Azure AD B2C-jogkivonatok referenciájából](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="e7e0a-224">For information on how to parse the claims from an ID token, see the [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> <span data-ttu-id="e7e0a-225">A másik lehetőség egy kódolására a házirend az értékét a `state` paraméter küldje a kérelmet, és ezután dekódolni a meghatározásához, hogy mely házirendet lett megadva.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-225">Your other option is to encode the policy in the value of the `state` parameter when you issue the request, and then decode it to determine which policy was used.</span></span> <span data-ttu-id="e7e0a-226">Mindkét módszer esetén érvényes.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-226">Either method is valid.</span></span>

<span data-ttu-id="e7e0a-227">Után jut hozzá a metaadat-dokumentum, az OpenID Connect metaadat-végpontjához, használhatja az RSA 256 nyilvános kulcsot (amely találhatók ezen a végponton) érvényesítése azonosító jogkivonat aláírását.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-227">After you've acquired the metadata document from the OpenID Connect metadata endpoint, you can use the RSA 256 public keys (which are located at this endpoint) to validate the signature of the ID token.</span></span> <span data-ttu-id="e7e0a-228">Előfordulhat, hogy több idő álljon a végponti szereplő kulcsok, minden egyes által azonosított egy `kid` jogcímek.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-228">There might be multiple keys listed at this endpoint at any given point in time, each identified by a `kid` claim.</span></span> <span data-ttu-id="e7e0a-229">A fejléc az azonosító jogkivonat is tartalmaz egy `kid` jogcím, ami azt jelenti, amely ezeket a kulcsokat a Azonosítót jogkivonatban aláírásához használt.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-229">The header of the ID token also contains a `kid` claim, which indicates which of these keys was used to sign the ID token.</span></span> <span data-ttu-id="e7e0a-230">További információkért lásd: a [Azure AD B2C-jogkivonatok referenciájából](active-directory-b2c-reference-tokens.md) (szakaszban [jogkivonatok ellenőrzése](active-directory-b2c-reference-tokens.md#token-validation), különösen).</span><span class="sxs-lookup"><span data-stu-id="e7e0a-230">For more information, see the [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md) (the section on [validating tokens](active-directory-b2c-reference-tokens.md#token-validation), in particular).</span></span>
<!--TODO: Improve the information on this-->

<span data-ttu-id="e7e0a-231">A azonosító jogkivonat aláírása ellenőrzését követően nincsenek vissza kell igazolnia több jogcímeket.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-231">After you've validated the signature of the ID token, there are several claims that you need to verify.</span></span> <span data-ttu-id="e7e0a-232">Például:</span><span class="sxs-lookup"><span data-stu-id="e7e0a-232">For instance:</span></span>

* <span data-ttu-id="e7e0a-233">Érdemes ellenőrizni a `nonce` jogcím-token ismétléses támadások megelőzése érdekében.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-233">You should validate the `nonce` claim to prevent token replay attacks.</span></span> <span data-ttu-id="e7e0a-234">Az értékét a bejelentkezési kérelemben megadott kell lennie.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-234">Its value should be what you specified in the sign-in request.</span></span>
* <span data-ttu-id="e7e0a-235">Érdemes ellenőrizni a `aud` jogcím győződjön meg arról, hogy a Azonosítót jogkivonatban ki az alkalmazást.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-235">You should validate the `aud` claim to ensure that the ID token was issued for your app.</span></span> <span data-ttu-id="e7e0a-236">Az értéknek kell lennie az alkalmazás Azonosítóját a az alkalmazás.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-236">Its value should be the application ID of your app.</span></span>
* <span data-ttu-id="e7e0a-237">Érdemes ellenőrizni a `iat` és `exp` győződjön meg arról, hogy az azonosító jogkivonat nem járt jogcímeket.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-237">You should validate the `iat` and `exp` claims to ensure that the ID token has not expired.</span></span>

<span data-ttu-id="e7e0a-238">Nincsenek is végre kell hajtania néhány további érvényesítést.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-238">There are also several more validations that you should perform.</span></span> <span data-ttu-id="e7e0a-239">Ezek a részletes leírása a [OpenID Connect Core Spec](http://openid.net/specs/openid-connect-core-1_0.html).  Érdemes további ellenőrizhesse, a forgatókönyvtől függően is.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-239">These are described in detail in the [OpenID Connect Core Spec](http://openid.net/specs/openid-connect-core-1_0.html).  You might also want to validate additional claims, depending on your scenario.</span></span> <span data-ttu-id="e7e0a-240">Néhány gyakori érvényesítést a következők:</span><span class="sxs-lookup"><span data-stu-id="e7e0a-240">Some common validations include:</span></span>

* <span data-ttu-id="e7e0a-241">Győződjön meg arról, hogy a felhasználó/szervezeti rendelkezik regisztrálta az alkalmazást.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-241">Ensuring that the user/organization has signed up for the app.</span></span>
* <span data-ttu-id="e7e0a-242">Győződjön meg arról, hogy a felhasználó rendelkezik-e a megfelelő engedélyezési vagy jogosultságokkal.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-242">Ensuring that the user has proper authorization/privileges.</span></span>
* <span data-ttu-id="e7e0a-243">Győződjön meg arról, hogy bizonyos erősségével hitelesítési történt, például az Azure multi-factor Authentication.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-243">Ensuring that a certain strength of authentication has occurred, such as Azure Multi-Factor Authentication.</span></span>

<span data-ttu-id="e7e0a-244">A jogcímek egy Azonosítót jogkivonatban további információkért tekintse meg a [Azure AD B2C-jogkivonatok referenciájából](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="e7e0a-244">For more information on the claims in an ID token, see the [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span>

<span data-ttu-id="e7e0a-245">Az azonosító token ellenőrzése után megkezdheti a munkamenet a felhasználóval.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-245">After you have validated the ID token, you can begin a session with the user.</span></span> <span data-ttu-id="e7e0a-246">A jogcímek az Azonosítót jogkivonatban segítségével a felhasználó információt szerezni az alkalmazásban.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-246">You can use the claims in the ID token to obtain information about the user in your app.</span></span> <span data-ttu-id="e7e0a-247">Ezt az információt használja megjelenített rekordok és engedélyezési tartalmazza.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-247">Uses for this information include display, records, and authorization.</span></span>

## <a name="get-a-token"></a><span data-ttu-id="e7e0a-248">A jogkivonat beolvasása</span><span class="sxs-lookup"><span data-stu-id="e7e0a-248">Get a token</span></span>
<span data-ttu-id="e7e0a-249">Ha csak végrehajtási házirendek webalkalmazás van szüksége, továbbléphet a következő néhány szakasz.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-249">If you need your web app to only execute policies, you can skip the next few sections.</span></span> <span data-ttu-id="e7e0a-250">Ezek a szakaszok csak webes alkalmazásokat, amelyek kell hitelesített hívásokat egy webes API-hoz, és is védi az Azure AD B2C vonatkoznak.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-250">These sections are applicable only to web apps that need to make authenticated calls to a web API and are also protected by Azure AD B2C.</span></span>

<span data-ttu-id="e7e0a-251">Az engedélyezési kód beszerzett is beválthatja (használatával `response_type=code+id_token`) a kívánt erőforrás elküldésével jogkivonat egy `POST` elküldeni a kérelmet a `/token` végpont.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-251">You can redeem the authorization code that you acquired (by using `response_type=code+id_token`) for a token to the desired resource by sending a `POST` request to the `/token` endpoint.</span></span> <span data-ttu-id="e7e0a-252">A jogkivonatot kérhet csak erőforrás jelenleg az alkalmazás saját webes API-t.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-252">Currently, the only resource that you can request a token for is your app's own back-end web API.</span></span> <span data-ttu-id="e7e0a-253">Az a magához jogkivonat kérésével egyezmény, hogy az alkalmazás ügyfél-Azonosítóját használja a hatóköreként:</span><span class="sxs-lookup"><span data-stu-id="e7e0a-253">The convention for requesting a token to yourself is to use your app's client ID as the scope:</span></span>

```
POST fabrikamb2c.onmicrosoft.com/oauth2/v2.0/token?p=b2c_1_sign_in HTTP/1.1
Host: https://login.microsoftonline.com
Content-Type: application/x-www-form-urlencoded

grant_type=authorization_code&client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access&code=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...&redirect_uri=urn:ietf:wg:oauth:2.0:oob&client_secret=<your-application-secret>

```

| <span data-ttu-id="e7e0a-254">Paraméter</span><span class="sxs-lookup"><span data-stu-id="e7e0a-254">Parameter</span></span> | <span data-ttu-id="e7e0a-255">Kötelező megadni?</span><span class="sxs-lookup"><span data-stu-id="e7e0a-255">Required?</span></span> | <span data-ttu-id="e7e0a-256">Leírás</span><span class="sxs-lookup"><span data-stu-id="e7e0a-256">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="e7e0a-257">P</span><span class="sxs-lookup"><span data-stu-id="e7e0a-257">p</span></span> |<span data-ttu-id="e7e0a-258">Szükséges</span><span class="sxs-lookup"><span data-stu-id="e7e0a-258">Required</span></span> |<span data-ttu-id="e7e0a-259">A házirendet, amely szerepel az engedélyezési kód megszerzésére.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-259">The policy that was used to acquire the authorization code.</span></span> <span data-ttu-id="e7e0a-260">A kérelem nem használhatja másik szabályt.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-260">You cannot use a different policy in this request.</span></span> <span data-ttu-id="e7e0a-261">Vegye figyelembe, hogy hozzá ezt a paramétert a lekérdezési karakterlánc nem arra a `POST` törzsében.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-261">Note that you add this parameter to the query string, not to the `POST` body.</span></span> |
| <span data-ttu-id="e7e0a-262">client_id</span><span class="sxs-lookup"><span data-stu-id="e7e0a-262">client_id</span></span> |<span data-ttu-id="e7e0a-263">Szükséges</span><span class="sxs-lookup"><span data-stu-id="e7e0a-263">Required</span></span> |<span data-ttu-id="e7e0a-264">Az alkalmazás azonosítója, amely a [Azure-portálon](https://portal.azure.com/) az alkalmazáshoz hozzárendelni.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-264">The application ID that the [Azure portal](https://portal.azure.com/) assigned to your app.</span></span> |
| <span data-ttu-id="e7e0a-265">grant_type</span><span class="sxs-lookup"><span data-stu-id="e7e0a-265">grant_type</span></span> |<span data-ttu-id="e7e0a-266">Szükséges</span><span class="sxs-lookup"><span data-stu-id="e7e0a-266">Required</span></span> |<span data-ttu-id="e7e0a-267">Az engedély megadása, amelynek támogatnia kell a típusú `authorization_code` a a hitelesítésikód-folyamata.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-267">The type of grant, which must be `authorization_code` for the authorization code flow.</span></span> |
| <span data-ttu-id="e7e0a-268">Hatókör</span><span class="sxs-lookup"><span data-stu-id="e7e0a-268">scope</span></span> |<span data-ttu-id="e7e0a-269">Ajánlott</span><span class="sxs-lookup"><span data-stu-id="e7e0a-269">Recommended</span></span> |<span data-ttu-id="e7e0a-270">Hatókörök szóközökkel elválasztott listája.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-270">A space-separated list of scopes.</span></span> <span data-ttu-id="e7e0a-271">Egy hatókör érték az Azure AD mindkét kérnek engedélyeket.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-271">A single scope value indicates to Azure AD both permissions that are being requested.</span></span> <span data-ttu-id="e7e0a-272">A `openid` hatókör id_token paraméterek formájában a felhasználó adatait, és jelentkezzen be a felhasználó engedélyt jelzi.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-272">The `openid` scope indicates a permission to sign in the user and get data about the user in the form of id_token parameters.</span></span> <span data-ttu-id="e7e0a-273">Az alkalmazás saját webes API, amely alkalmazás azonosítója megegyezik az ügyfél által képviselt-jogkivonat eléréséhez használható.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-273">It can be used to get tokens to your app's own back-end web API, which is represented by the same application ID as the client.</span></span> <span data-ttu-id="e7e0a-274">A `offline_access` hatókör azt jelzi, hogy az alkalmazás egy frissítési jogkivonat kell hosszú élettartamú erőforrások elérése érdekében.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-274">The `offline_access` scope indicates that your app will need a refresh token for long-lived access to resources.</span></span> |
| <span data-ttu-id="e7e0a-275">Kód</span><span class="sxs-lookup"><span data-stu-id="e7e0a-275">code</span></span> |<span data-ttu-id="e7e0a-276">Szükséges</span><span class="sxs-lookup"><span data-stu-id="e7e0a-276">Required</span></span> |<span data-ttu-id="e7e0a-277">A folyamat első szakasza beszerzett engedélyezési kódot.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-277">The authorization code that you acquired in the first leg of the flow.</span></span> |
| <span data-ttu-id="e7e0a-278">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="e7e0a-278">redirect_uri</span></span> |<span data-ttu-id="e7e0a-279">Szükséges</span><span class="sxs-lookup"><span data-stu-id="e7e0a-279">Required</span></span> |<span data-ttu-id="e7e0a-280">A `redirect_uri` paraméter az alkalmazás, ahol kapott engedélyezési kódot.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-280">The `redirect_uri` parameter of the application where you received the authorization code.</span></span> |
| <span data-ttu-id="e7e0a-281">client_secret</span><span class="sxs-lookup"><span data-stu-id="e7e0a-281">client_secret</span></span> |<span data-ttu-id="e7e0a-282">Szükséges</span><span class="sxs-lookup"><span data-stu-id="e7e0a-282">Required</span></span> |<span data-ttu-id="e7e0a-283">A létrehozott alkalmazás titkos kulcs a [Azure-portálon](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="e7e0a-283">The application secret that you generated in the [Azure portal](https://portal.azure.com/).</span></span> <span data-ttu-id="e7e0a-284">Ez az alkalmazástitkok fontos biztonsági összetevő.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-284">This application secret is an important security artifact.</span></span> <span data-ttu-id="e7e0a-285">Meg kell tárolja biztonságos helyen a kiszolgálón.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-285">You should store it securely on your server.</span></span> <span data-ttu-id="e7e0a-286">Az ügyfélkulcs rendszeres időközönként elforgatása is kell.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-286">You should also rotate this client secret on a periodic basis.</span></span> |

<span data-ttu-id="e7e0a-287">A sikeres token válasz néz ki:</span><span class="sxs-lookup"><span data-stu-id="e7e0a-287">A successful token response looks like:</span></span>

```
{
    "not_before": "1442340812",
    "token_type": "Bearer",
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...",
    "scope": "90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access",
    "expires_in": "3600",
    "refresh_token": "AAQfQmvuDy8WtUv-sd0TBwWVQs1rC-Lfxa_NDkLqpg50Cxp5Dxj0VPF1mx2Z...",
}
```
| <span data-ttu-id="e7e0a-288">Paraméter</span><span class="sxs-lookup"><span data-stu-id="e7e0a-288">Parameter</span></span> | <span data-ttu-id="e7e0a-289">Leírás</span><span class="sxs-lookup"><span data-stu-id="e7e0a-289">Description</span></span> |
| --- | --- |
| <span data-ttu-id="e7e0a-290">not_before</span><span class="sxs-lookup"><span data-stu-id="e7e0a-290">not_before</span></span> |<span data-ttu-id="e7e0a-291">Az az idő, amelynél a jogkivonat érvényes, időbeli kortartományon.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-291">The time at which the token is considered valid, in epoch time.</span></span> |
| <span data-ttu-id="e7e0a-292">token_type</span><span class="sxs-lookup"><span data-stu-id="e7e0a-292">token_type</span></span> |<span data-ttu-id="e7e0a-293">A jogkivonat típusa érték.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-293">The token type value.</span></span> <span data-ttu-id="e7e0a-294">Az egyetlen típus, amely az Azure AD által támogatott `Bearer`.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-294">The only type that Azure AD supports is `Bearer`.</span></span> |
| <span data-ttu-id="e7e0a-295">access_token</span><span class="sxs-lookup"><span data-stu-id="e7e0a-295">access_token</span></span> |<span data-ttu-id="e7e0a-296">Az aláírt JWT jogkivonat az Ön által kért.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-296">The signed JWT token that you requested.</span></span> |
| <span data-ttu-id="e7e0a-297">Hatókör</span><span class="sxs-lookup"><span data-stu-id="e7e0a-297">scope</span></span> |<span data-ttu-id="e7e0a-298">A hatókörök, amelynél a jogkivonat érvényes érték.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-298">The scopes for which the token is valid.</span></span> <span data-ttu-id="e7e0a-299">Ezek használhatók a gyorsítótárazáshoz jogkivonatok későbbi használatra.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-299">These can be used for caching tokens for later use.</span></span> |
| <span data-ttu-id="e7e0a-300">expires_in</span><span class="sxs-lookup"><span data-stu-id="e7e0a-300">expires_in</span></span> |<span data-ttu-id="e7e0a-301">Mennyi ideig, amely a hozzáférési jogkivonat érvénytelen (másodpercben).</span><span class="sxs-lookup"><span data-stu-id="e7e0a-301">The length of time that the access token is valid (in seconds).</span></span> |
| <span data-ttu-id="e7e0a-302">refresh_token</span><span class="sxs-lookup"><span data-stu-id="e7e0a-302">refresh_token</span></span> |<span data-ttu-id="e7e0a-303">Az OAuth 2.0-s frissítési jogkivonat.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-303">An OAuth 2.0 refresh token.</span></span> <span data-ttu-id="e7e0a-304">Az alkalmazás a jogkivonat segítségével szerezzen be további jogkivonatok a jelenlegi jogkivonat lejárata után is.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-304">The app can use this token to acquire additional tokens after the current token expires.</span></span> <span data-ttu-id="e7e0a-305">Frissítési jogkivonatok hosszú élettartamú, és erőforrásokhoz való hozzáférés megőrzése huzamosabb ideig használható.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-305">Refresh tokens are long-lived and can be used to retain access to resources for extended periods of time.</span></span> <span data-ttu-id="e7e0a-306">További részletekért tekintse meg a [B2C-jogkivonatok referenciájából](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="e7e0a-306">For more details, refer to the [B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> <span data-ttu-id="e7e0a-307">Megjegyzés: kell használt a hatókör `offline_access` az engedélyezési és egy frissítési jogkivonat fogadásához a jogkivonat-kérelmeket.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-307">Note that you must have used the scope `offline_access` in both the authorization and token requests in order to receive a refresh token.</span></span> |

<span data-ttu-id="e7e0a-308">Hibaválaszok a következőhöz hasonló:</span><span class="sxs-lookup"><span data-stu-id="e7e0a-308">Error responses look like:</span></span>

```
{
    "error": "access_denied",
    "error_description": "The user revoked access to the app.",
}
```

| <span data-ttu-id="e7e0a-309">Paraméter</span><span class="sxs-lookup"><span data-stu-id="e7e0a-309">Parameter</span></span> | <span data-ttu-id="e7e0a-310">Leírás</span><span class="sxs-lookup"><span data-stu-id="e7e0a-310">Description</span></span> |
| --- | --- |
| <span data-ttu-id="e7e0a-311">error</span><span class="sxs-lookup"><span data-stu-id="e7e0a-311">error</span></span> |<span data-ttu-id="e7e0a-312">Egy hibakód karakterlánc típusú hibák előforduló és hibáinak reagálni azokra, amely használható besorolására használható.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-312">An error-code string that can be used to classify types of errors that occur and that can be used to react to errors.</span></span> |
| <span data-ttu-id="e7e0a-313">error_description</span><span class="sxs-lookup"><span data-stu-id="e7e0a-313">error_description</span></span> |<span data-ttu-id="e7e0a-314">Egy adott hibaüzenet, amelyek segítségével a fejlesztők hitelesítési hiba okának azonosításához.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-314">A specific error message that can help a developer identify the root cause of an authentication error.</span></span> |

## <a name="use-the-token"></a><span data-ttu-id="e7e0a-315">A jogkivonat</span><span class="sxs-lookup"><span data-stu-id="e7e0a-315">Use the token</span></span>
<span data-ttu-id="e7e0a-316">Most, hogy olyan hozzáférési jogkivonatot már sikeresen szerezte be, használhatja a token kérelmek számára a háttérben futó webes API-khoz azzal, hogy belefoglalja azt a a `Authorization` fejléc:</span><span class="sxs-lookup"><span data-stu-id="e7e0a-316">Now that you've successfully acquired an access token, you can use the token in requests to your back-end web APIs by including it in the `Authorization` header:</span></span>

```
GET /tasks
Host: https://mytaskwebapi.com
Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...
```

## <a name="refresh-the-token"></a><span data-ttu-id="e7e0a-317">A token frissítése</span><span class="sxs-lookup"><span data-stu-id="e7e0a-317">Refresh the token</span></span>
<span data-ttu-id="e7e0a-318">Azonosító-jogkivonatokat rövid élettartamú.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-318">ID tokens are short-lived.</span></span> <span data-ttu-id="e7e0a-319">Frissítenie kell őket után nem tudnak hozzáférni az erőforrásokhoz a folytatáshoz.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-319">You must refresh them after they expire to continue being able to access resources.</span></span> <span data-ttu-id="e7e0a-320">Megteheti egy másik elküldése `POST` elküldeni a kérelmet a `/token` végpont.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-320">You can do so by submitting another `POST` request to the `/token` endpoint.</span></span> <span data-ttu-id="e7e0a-321">Most, adja meg a `refresh_token` paraméter ahelyett, hogy a `code` paraméter:</span><span class="sxs-lookup"><span data-stu-id="e7e0a-321">This time, provide the `refresh_token` parameter instead of the `code` parameter:</span></span>

```
POST fabrikamb2c.onmicrosoft.com/oauth2/v2.0/token?p=b2c_1_sign_in HTTP/1.1
Host: https://login.microsoftonline.com
Content-Type: application/x-www-form-urlencoded

grant_type=refresh_token&client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6&scope=openid offline_access&refresh_token=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...&redirect_uri=urn:ietf:wg:oauth:2.0:oob&client_secret=<your-application-secret>
```

| <span data-ttu-id="e7e0a-322">Paraméter</span><span class="sxs-lookup"><span data-stu-id="e7e0a-322">Parameter</span></span> | <span data-ttu-id="e7e0a-323">Szükséges</span><span class="sxs-lookup"><span data-stu-id="e7e0a-323">Required</span></span> | <span data-ttu-id="e7e0a-324">Leírás</span><span class="sxs-lookup"><span data-stu-id="e7e0a-324">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="e7e0a-325">P</span><span class="sxs-lookup"><span data-stu-id="e7e0a-325">p</span></span> |<span data-ttu-id="e7e0a-326">Szükséges</span><span class="sxs-lookup"><span data-stu-id="e7e0a-326">Required</span></span> |<span data-ttu-id="e7e0a-327">A házirendet, amely az eredeti frissítési jogkivonat használatával.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-327">The policy that was used to acquire the original refresh token.</span></span> <span data-ttu-id="e7e0a-328">A kérelem nem használhatja másik szabályt.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-328">You cannot use a different policy in this request.</span></span> <span data-ttu-id="e7e0a-329">Vegye figyelembe, hogy ez a paraméter hozzáadása, a lekérdezési karakterláncot, nem a FELADÁS egy vagy több szervezet.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-329">Note that you add this parameter to the query string, not to the POST body.</span></span> |
| <span data-ttu-id="e7e0a-330">client_id</span><span class="sxs-lookup"><span data-stu-id="e7e0a-330">client_id</span></span> |<span data-ttu-id="e7e0a-331">Szükséges</span><span class="sxs-lookup"><span data-stu-id="e7e0a-331">Required</span></span> |<span data-ttu-id="e7e0a-332">Az alkalmazás azonosítója, amely a [Azure-portálon](https://portal.azure.com/) az alkalmazáshoz hozzárendelni.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-332">The application ID that the [Azure portal](https://portal.azure.com/) assigned to your app.</span></span> |
| <span data-ttu-id="e7e0a-333">grant_type</span><span class="sxs-lookup"><span data-stu-id="e7e0a-333">grant_type</span></span> |<span data-ttu-id="e7e0a-334">Szükséges</span><span class="sxs-lookup"><span data-stu-id="e7e0a-334">Required</span></span> |<span data-ttu-id="e7e0a-335">Az engedély megadása, amelynek kell lennie a hitelesítésikód-folyamata ezen szakasza a frissítési jogkivonat típusa.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-335">The type of grant, which must be a refresh token for this leg of the authorization code flow.</span></span> |
| <span data-ttu-id="e7e0a-336">Hatókör</span><span class="sxs-lookup"><span data-stu-id="e7e0a-336">scope</span></span> |<span data-ttu-id="e7e0a-337">Ajánlott</span><span class="sxs-lookup"><span data-stu-id="e7e0a-337">Recommended</span></span> |<span data-ttu-id="e7e0a-338">Hatókörök szóközökkel elválasztott listája.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-338">A space-separated list of scopes.</span></span> <span data-ttu-id="e7e0a-339">Egy hatókör érték az Azure AD mindkét kérnek engedélyeket.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-339">A single scope value indicates to Azure AD both permissions that are being requested.</span></span> <span data-ttu-id="e7e0a-340">A `openid` hatókör azt jelzi, a felhasználói azonosító-jogkivonatokat formájában adatait, és jelentkezzen be a felhasználó engedélyt.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-340">The `openid` scope indicates a permission to sign in the user and get data about the user in the form of ID tokens.</span></span> <span data-ttu-id="e7e0a-341">Az alkalmazás saját webes API, amely alkalmazás azonosítója megegyezik az ügyfél által képviselt-jogkivonat eléréséhez használható.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-341">It can be used to get tokens to your app's own back-end web API, which is represented by the same application ID as the client.</span></span> <span data-ttu-id="e7e0a-342">A `offline_access` hatókör azt jelzi, hogy az alkalmazás egy frissítési jogkivonat kell hosszú élettartamú erőforrások elérése érdekében.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-342">The `offline_access` scope indicates that your app will need a refresh token for long-lived access to resources.</span></span> |
| <span data-ttu-id="e7e0a-343">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="e7e0a-343">redirect_uri</span></span> |<span data-ttu-id="e7e0a-344">Ajánlott</span><span class="sxs-lookup"><span data-stu-id="e7e0a-344">Recommended</span></span> |<span data-ttu-id="e7e0a-345">A `redirect_uri` paraméter az alkalmazás, ahol kapott engedélyezési kódot.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-345">The `redirect_uri` parameter of the application where you received the authorization code.</span></span> |
| <span data-ttu-id="e7e0a-346">refresh_token</span><span class="sxs-lookup"><span data-stu-id="e7e0a-346">refresh_token</span></span> |<span data-ttu-id="e7e0a-347">Szükséges</span><span class="sxs-lookup"><span data-stu-id="e7e0a-347">Required</span></span> |<span data-ttu-id="e7e0a-348">Az eredeti frissítési jogkivonat a folyamat második szakasza beszerzett.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-348">The original refresh token that you acquired in the second leg of the flow.</span></span> <span data-ttu-id="e7e0a-349">Megjegyzés: kell használt a hatókör `offline_access` az engedélyezési és egy frissítési jogkivonat fogadásához a jogkivonat-kérelmeket.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-349">Note that you must have used the scope `offline_access` in both the authorization and token requests in order to receive a refresh token.</span></span> |
| <span data-ttu-id="e7e0a-350">client_secret</span><span class="sxs-lookup"><span data-stu-id="e7e0a-350">client_secret</span></span> |<span data-ttu-id="e7e0a-351">Szükséges</span><span class="sxs-lookup"><span data-stu-id="e7e0a-351">Required</span></span> |<span data-ttu-id="e7e0a-352">A létrehozott alkalmazás titkos kulcs a [Azure-portálon](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="e7e0a-352">The application secret that you generated in the [Azure portal](https://portal.azure.com/).</span></span> <span data-ttu-id="e7e0a-353">Ez az alkalmazástitkok fontos biztonsági összetevő.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-353">This application secret is an important security artifact.</span></span> <span data-ttu-id="e7e0a-354">Meg kell tárolja biztonságos helyen a kiszolgálón.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-354">You should store it securely on your server.</span></span> <span data-ttu-id="e7e0a-355">Az ügyfélkulcs rendszeres időközönként elforgatása is kell.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-355">You should also rotate this client secret on a periodic basis.</span></span> |

<span data-ttu-id="e7e0a-356">A sikeres token válasz néz ki:</span><span class="sxs-lookup"><span data-stu-id="e7e0a-356">A successful token response looks like:</span></span>

```
{
    "not_before": "1442340812",
    "token_type": "Bearer",
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...",
    "scope": "90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access",
    "expires_in": "3600",
    "refresh_token": "AAQfQmvuDy8WtUv-sd0TBwWVQs1rC-Lfxa_NDkLqpg50Cxp5Dxj0VPF1mx2Z...",
}
```
| <span data-ttu-id="e7e0a-357">Paraméter</span><span class="sxs-lookup"><span data-stu-id="e7e0a-357">Parameter</span></span> | <span data-ttu-id="e7e0a-358">Leírás</span><span class="sxs-lookup"><span data-stu-id="e7e0a-358">Description</span></span> |
| --- | --- |
| <span data-ttu-id="e7e0a-359">not_before</span><span class="sxs-lookup"><span data-stu-id="e7e0a-359">not_before</span></span> |<span data-ttu-id="e7e0a-360">Az az idő, amelynél a jogkivonat érvényes, időbeli kortartományon.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-360">The time at which the token is considered valid, in epoch time.</span></span> |
| <span data-ttu-id="e7e0a-361">token_type</span><span class="sxs-lookup"><span data-stu-id="e7e0a-361">token_type</span></span> |<span data-ttu-id="e7e0a-362">A jogkivonat típusa érték.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-362">The token type value.</span></span> <span data-ttu-id="e7e0a-363">Az egyetlen típus, amely az Azure AD által támogatott `Bearer`.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-363">The only type that Azure AD supports is `Bearer`.</span></span> |
| <span data-ttu-id="e7e0a-364">access_token</span><span class="sxs-lookup"><span data-stu-id="e7e0a-364">access_token</span></span> |<span data-ttu-id="e7e0a-365">Az aláírt JWT jogkivonat az Ön által kért.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-365">The signed JWT token that you requested.</span></span> |
| <span data-ttu-id="e7e0a-366">Hatókör</span><span class="sxs-lookup"><span data-stu-id="e7e0a-366">scope</span></span> |<span data-ttu-id="e7e0a-367">A hatókör, amely a jogkivonat érvényes, a későbbi használatra jogkivonatok gyorsítótárazás használható.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-367">The scope that the token is valid for, which can be used for caching tokens for later use.</span></span> |
| <span data-ttu-id="e7e0a-368">expires_in</span><span class="sxs-lookup"><span data-stu-id="e7e0a-368">expires_in</span></span> |<span data-ttu-id="e7e0a-369">Mennyi ideig, amely a hozzáférési jogkivonat érvénytelen (másodpercben).</span><span class="sxs-lookup"><span data-stu-id="e7e0a-369">The length of time that the access token is valid (in seconds).</span></span> |
| <span data-ttu-id="e7e0a-370">refresh_token</span><span class="sxs-lookup"><span data-stu-id="e7e0a-370">refresh_token</span></span> |<span data-ttu-id="e7e0a-371">Az OAuth 2.0-s frissítési jogkivonat.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-371">An OAuth 2.0 refresh token.</span></span> <span data-ttu-id="e7e0a-372">Az alkalmazás a jogkivonat segítségével szerezzen be további jogkivonatok a jelenlegi jogkivonat lejárata után is.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-372">The app can use this token to acquire additional tokens after the current token expires.</span></span>  <span data-ttu-id="e7e0a-373">Frissítési jogkivonatok hosszú élettartamú, és erőforrásokhoz való hozzáférés megőrzése huzamosabb ideig használható.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-373">Refresh tokens are long-lived and can be used to retain access to resources for extended periods of time.</span></span> <span data-ttu-id="e7e0a-374">További részletekért tekintse meg a [B2C-jogkivonatok referenciájából](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="e7e0a-374">For more detail, refer to the [B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> |

<span data-ttu-id="e7e0a-375">Hibaválaszok a következőhöz hasonló:</span><span class="sxs-lookup"><span data-stu-id="e7e0a-375">Error responses look like:</span></span>

```
{
    "error": "access_denied",
    "error_description": "The user revoked access to the app.",
}
```

| <span data-ttu-id="e7e0a-376">Paraméter</span><span class="sxs-lookup"><span data-stu-id="e7e0a-376">Parameter</span></span> | <span data-ttu-id="e7e0a-377">Leírás</span><span class="sxs-lookup"><span data-stu-id="e7e0a-377">Description</span></span> |
| --- | --- |
| <span data-ttu-id="e7e0a-378">error</span><span class="sxs-lookup"><span data-stu-id="e7e0a-378">error</span></span> |<span data-ttu-id="e7e0a-379">Egy hibakód karakterlánc típusú hibák előforduló és hibáinak reagálni azokra, amely használható besorolására használható.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-379">An error-code string that can be used to classify types of errors that occur and that can be used to react to errors.</span></span> |
| <span data-ttu-id="e7e0a-380">error_description</span><span class="sxs-lookup"><span data-stu-id="e7e0a-380">error_description</span></span> |<span data-ttu-id="e7e0a-381">Egy adott hibaüzenet, amelyek segítségével a fejlesztők hitelesítési hiba okának azonosításához.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-381">A specific error message that can help a developer identify the root cause of an authentication error.</span></span> |

## <a name="send-a-sign-out-request"></a><span data-ttu-id="e7e0a-382">Kijelentkezési kérés küldése</span><span class="sxs-lookup"><span data-stu-id="e7e0a-382">Send a sign-out request</span></span>
<span data-ttu-id="e7e0a-383">Ha meg szeretné beléptetni a felhasználót az alkalmazásból, nincs elég törölni kívánja a felhasználói munkamenet az alkalmazás cookie-k vagy más célból.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-383">When you want to sign the user out of the app, it is not enough to clear your app's cookies or otherwise end the session with the user.</span></span> <span data-ttu-id="e7e0a-384">Az Azure AD-kijelentkezés is kell átirányítja a felhasználót. Ha nem sikerül, a felhasználó lehet újból hitelesítésre az alkalmazásnak, hogy a hitelesítő adataik ismételt beírása nélkül.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-384">You must also redirect the user to Azure AD to sign out. If you fail to do so, the user might be able to reauthenticate to your app without entering their credentials again.</span></span> <span data-ttu-id="e7e0a-385">Ennek az az oka érvényes egyszeri bejelentkezés munkamenetet az Azure ad-val rendelkeznek.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-385">This is because they will have a valid single sign-on session with Azure AD.</span></span>

<span data-ttu-id="e7e0a-386">A felhasználó egyszerűen átirányíthatja a `end_session` endpoint OpenID Connect metaadat-dokumentum szereplő korábban az a "Ellenőrizze a Azonosítót jogkivonatban" szakaszban leírt:</span><span class="sxs-lookup"><span data-stu-id="e7e0a-386">You can simply redirect the user to the `end_session` endpoint that is listed in the OpenID Connect metadata document described earlier in the "Validate the ID token" section:</span></span>

```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/logout?
p=b2c_1_sign_in
&post_logout_redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
```

| <span data-ttu-id="e7e0a-387">Paraméter</span><span class="sxs-lookup"><span data-stu-id="e7e0a-387">Parameter</span></span> | <span data-ttu-id="e7e0a-388">Kötelező megadni?</span><span class="sxs-lookup"><span data-stu-id="e7e0a-388">Required?</span></span> | <span data-ttu-id="e7e0a-389">Leírás</span><span class="sxs-lookup"><span data-stu-id="e7e0a-389">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="e7e0a-390">P</span><span class="sxs-lookup"><span data-stu-id="e7e0a-390">p</span></span> |<span data-ttu-id="e7e0a-391">Szükséges</span><span class="sxs-lookup"><span data-stu-id="e7e0a-391">Required</span></span> |<span data-ttu-id="e7e0a-392">A felhasználó kívül az alkalmazás aláírásához használt kívánt házirendet.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-392">The policy that you want to use to sign the user out of your application.</span></span> |
| <span data-ttu-id="e7e0a-393">post_logout_redirect_uri</span><span class="sxs-lookup"><span data-stu-id="e7e0a-393">post_logout_redirect_uri</span></span> |<span data-ttu-id="e7e0a-394">Ajánlott</span><span class="sxs-lookup"><span data-stu-id="e7e0a-394">Recommended</span></span> |<span data-ttu-id="e7e0a-395">Az URL-címet, a felhasználó után a rendszer átirányítja a sikeres kijelentkezési. Ha nincs megadva, az Azure AD B2C a felhasználó egy általános üzenetet jelenít meg.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-395">The URL that the user should be redirected to after successful sign-out. If it is not included, Azure AD B2C shows the user a generic message.</span></span> |

> [!NOTE]
> <span data-ttu-id="e7e0a-396">Bár irányítja a felhasználót, hogy a `end_session` végpont törölni fogja a néhány, a felhasználó állapotának egyszeri bejelentkezés az Azure AD B2C, nem a kívül a közösségi identity provider (IDP) munkamenet a felhasználó alá fogja írni.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-396">Although directing the user to the `end_session` endpoint will clear some of the user's single sign-on state with Azure AD B2C, it will not sign the user out of their social identity provider (IDP) session.</span></span> <span data-ttu-id="e7e0a-397">Ha a felhasználó kijelöli a azonos IDP későbbi bejelentkezés során, akkor lesz hitelesíthető, a hitelesítő adatok megadása nélkül.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-397">If the user selects the same IDP during a subsequent sign-in, they will be reauthenticated, without entering their credentials.</span></span> <span data-ttu-id="e7e0a-398">Ha egy felhasználó kijelentkezik a B2C alkalmazás azt szeretné, hogy nem feltétlenül jelenti szeretne kijelentkezni a Facebook-fiókkal.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-398">If a user wants to sign out of your B2C application, it does not necessarily mean they want to sign out of their Facebook account.</span></span> <span data-ttu-id="e7e0a-399">Azonban helyi fiókok esetében a felhasználói munkamenet véget ér megfelelően.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-399">However, in the case of local accounts, the user's session will be ended properly.</span></span>
> 
> 

## <a name="use-your-own-b2c-tenant"></a><span data-ttu-id="e7e0a-400">A saját B2C-bérlő használata</span><span class="sxs-lookup"><span data-stu-id="e7e0a-400">Use your own B2C tenant</span></span>
<span data-ttu-id="e7e0a-401">Ha meg szeretné próbálni az ilyen kérelmeket szolgáltatást, először hajtsa végre a fenti három lépést, és az cserélje a példaértékeket a saját korábban leírt:</span><span class="sxs-lookup"><span data-stu-id="e7e0a-401">If you want to try these requests for yourself, you must first perform these three steps, and then replace the example values described earlier with your own:</span></span>

1. <span data-ttu-id="e7e0a-402">[A B2C bérlő létrehozása](active-directory-b2c-get-started.md), és a bérlő nevét használja a kérelemben.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-402">[Create a B2C tenant](active-directory-b2c-get-started.md), and use the name of your tenant in the requests.</span></span>
2. <span data-ttu-id="e7e0a-403">[Hozzon létre egy alkalmazást](active-directory-b2c-app-registration.md) beszerzése egy azonosítót.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-403">[Create an application](active-directory-b2c-app-registration.md) to obtain an application ID.</span></span> <span data-ttu-id="e7e0a-404">Vegye fel az alkalmazás egy webes vagy webes API-t.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-404">Include a web app/web API in your app.</span></span> <span data-ttu-id="e7e0a-405">Szükség esetén hozzon létre egy alkalmazás titkos kulcs.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-405">Optionally, create an application secret.</span></span>
3. <span data-ttu-id="e7e0a-406">[A házirendek létrehozása](active-directory-b2c-reference-policies.md) beszerzése a házirend nevét.</span><span class="sxs-lookup"><span data-stu-id="e7e0a-406">[Create your policies](active-directory-b2c-reference-policies.md) to obtain your policy names.</span></span>

