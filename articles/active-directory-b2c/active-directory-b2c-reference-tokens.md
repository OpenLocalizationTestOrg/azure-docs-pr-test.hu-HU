---
title: "Az Azure Active Directory B2C: Lexikális elem: referencia |} Microsoft Docs"
description: "Az Azure Active Directory B2C kiállított jogkivonatokat típusai"
services: active-directory-b2c
documentationcenter: 
author: dstrockis
manager: mbaldwin
editor: 
ms.assetid: 6df79878-65cb-4dfc-98bb-2b328055bc2e
ms.service: active-directory-b2c
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 3/17/2017
ms.author: dastrock
ms.openlocfilehash: 39cfbc1c6dea138fe2f1eb3190770606f3895d40
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 07/11/2017
---
# <a name="azure-ad-b2c-token-reference"></a><span data-ttu-id="042b1-103">Az Azure AD B2C: Token referencia</span><span class="sxs-lookup"><span data-stu-id="042b1-103">Azure AD B2C: Token reference</span></span>
<span data-ttu-id="042b1-104">Az Azure Active Directory B2C (az Azure AD B2C) számos különböző típusú biztonsági jogkivonatokat bocsát ki, amint az feldolgozza azokat egyes [hitelesítési folyamat](active-directory-b2c-apps.md).</span><span class="sxs-lookup"><span data-stu-id="042b1-104">Azure Active Directory B2C (Azure AD B2C) emits several types of security tokens as it processes each [authentication flow](active-directory-b2c-apps.md).</span></span> <span data-ttu-id="042b1-105">Ez a dokumentum ismerteti a formátumát, a biztonsági jellemzőkkel és a különböző típusú lexikális elem tartalmát.</span><span class="sxs-lookup"><span data-stu-id="042b1-105">This document describes the format, security characteristics, and contents of each type of token.</span></span>

## <a name="types-of-tokens"></a><span data-ttu-id="042b1-106">A jogkivonatok típusok</span><span class="sxs-lookup"><span data-stu-id="042b1-106">Types of tokens</span></span>
<span data-ttu-id="042b1-107">Az Azure AD B2C támogatja a [OAuth 2.0 protokoll](active-directory-b2c-reference-protocols.md), amely él mindkét hozzáférési jogkivonatok és frissítési jogkivonatok.</span><span class="sxs-lookup"><span data-stu-id="042b1-107">Azure AD B2C supports the [OAuth 2.0 authorization protocol](active-directory-b2c-reference-protocols.md), which makes use of both access tokens and refresh tokens.</span></span> <span data-ttu-id="042b1-108">Is támogatja a hitelesítés és bejelentkezés keresztül [OpenID Connect](active-directory-b2c-reference-protocols.md), amely bevezet egy harmadik típusú jogkivonat: a Azonosítót jogkivonatban.</span><span class="sxs-lookup"><span data-stu-id="042b1-108">It also supports authentication and sign-in via [OpenID Connect](active-directory-b2c-reference-protocols.md), which introduces a third type of token: the ID token.</span></span> <span data-ttu-id="042b1-109">Egyes ezeket a jogkivonatokat tulajdonosi jogkivonattal jelzi.</span><span class="sxs-lookup"><span data-stu-id="042b1-109">Each of these tokens is represented as a bearer token.</span></span>

<span data-ttu-id="042b1-110">Egy tulajdonosi jogkivonatot egy egyszerűsített biztonsági jogkivonatot, amely védett erőforrásokhoz való hozzáférést a "tulajdonos".</span><span class="sxs-lookup"><span data-stu-id="042b1-110">A bearer token is a lightweight security token that grants the "bearer" access to a protected resource.</span></span> <span data-ttu-id="042b1-111">A tulajdonosi, amely a token is jelenthet félre.</span><span class="sxs-lookup"><span data-stu-id="042b1-111">The bearer is any party that can present the token.</span></span> <span data-ttu-id="042b1-112">Az Azure AD először hitelesíteniük kell egy entitás előtt megkaphatja a tulajdonosi jogkivonattal.</span><span class="sxs-lookup"><span data-stu-id="042b1-112">Azure AD must first authenticate a party before it can receive a bearer token.</span></span> <span data-ttu-id="042b1-113">De ha a szükséges lépéseket a rendszer nem hajtja végre a lexikális elem szerepel az átvitel, illetve tárolás biztosításához, azt is hozzá és egy nem kívánt fél által használt.</span><span class="sxs-lookup"><span data-stu-id="042b1-113">But if the required steps are not taken to secure the token in transmission and storage, it can be intercepted and used by an unintended party.</span></span> <span data-ttu-id="042b1-114">Néhány biztonsági jogkivonatokat rendelkezik egy olyan beépített mechanizmus meggátolja, hogy a nem hitelesített felek használja őket, de tulajdonosi jogkivonatok nem rendelkezik a mechanizmus.</span><span class="sxs-lookup"><span data-stu-id="042b1-114">Some security tokens have a built-in mechanism for preventing unauthorized parties from using them, but bearer tokens do not have this mechanism.</span></span> <span data-ttu-id="042b1-115">Azok a biztonságos csatornákat, például a transport layer security (HTTPS) kell szállítani.</span><span class="sxs-lookup"><span data-stu-id="042b1-115">They must be transported in a secure channel, such as transport layer security (HTTPS).</span></span>

<span data-ttu-id="042b1-116">Ha egy tulajdonosi jogkivonatot kívül egy biztonságos csatornán kerül továbbításra, egy rosszindulatú entitás segítségével a-átjárójának támadás jogkivonat és annak segítségével védett erőforrásokhoz való jogosulatlan hozzáférést.</span><span class="sxs-lookup"><span data-stu-id="042b1-116">If a bearer token is transmitted outside a secure channel, a malicious party can use a man-in-the-middle attack to acquire the token and use it to gain unauthorized access to a protected resource.</span></span> <span data-ttu-id="042b1-117">Az azonos biztonsági elveket alkalmazza, ha a tulajdonosi jogkivonatok tárolt és gyorsítótárba helyezni későbbi használat.</span><span class="sxs-lookup"><span data-stu-id="042b1-117">The same security principles apply when bearer tokens are stored or cached for later use.</span></span> <span data-ttu-id="042b1-118">Mindig győződjön meg arról, hogy az alkalmazás továbbítja, és biztonságos módon tárolja a tulajdonosi jogkivonatokhoz.</span><span class="sxs-lookup"><span data-stu-id="042b1-118">Always ensure that your app transmits and stores bearer tokens in a secure manner.</span></span>

<span data-ttu-id="042b1-119">További biztonsági szempontok a tulajdonosi jogkivonatok, lásd: [RFC 6750 szakasz 5](http://tools.ietf.org/html/rfc6750).</span><span class="sxs-lookup"><span data-stu-id="042b1-119">For additional security considerations on bearer tokens, see [RFC 6750 Section 5](http://tools.ietf.org/html/rfc6750).</span></span>

<span data-ttu-id="042b1-120">Jelentős része az Azure AD B2C kiállított jogkivonatokat használják, mint a JSON webes jogkivonatok (JWTs).</span><span class="sxs-lookup"><span data-stu-id="042b1-120">Many of the tokens that Azure AD B2C issues are implemented as JSON web tokens (JWTs).</span></span> <span data-ttu-id="042b1-121">Jwt-t egy kompakt biztonságos URL-címet a eszközöket információk átvitele a két fél között.</span><span class="sxs-lookup"><span data-stu-id="042b1-121">A JWT is a compact, URL-safe means of transferring information between two parties.</span></span> <span data-ttu-id="042b1-122">JWTs jogcímekként ismert információkat tartalmaznak.</span><span class="sxs-lookup"><span data-stu-id="042b1-122">JWTs contain information known as claims.</span></span> <span data-ttu-id="042b1-123">Ezek a helyességi feltételek kapcsolatban a tulajdonosi és a token tárgyát.</span><span class="sxs-lookup"><span data-stu-id="042b1-123">These are assertions of information about the bearer and the subject of the token.</span></span> <span data-ttu-id="042b1-124">A jogcímek JWTs a JSON-kódolású és továbbítására szerializált objektumok.</span><span class="sxs-lookup"><span data-stu-id="042b1-124">The claims in JWTs are JSON objects that are encoded and serialized for transmission.</span></span> <span data-ttu-id="042b1-125">Mivel az Azure AD B2C által kibocsátott JWTs aláírt, de nincs titkosítva, könnyen vizsgálhatja meg hibakeresési azt jwt-t a tartalmát.</span><span class="sxs-lookup"><span data-stu-id="042b1-125">Because the JWTs issued by Azure AD B2C are signed but not encrypted, you can easily inspect the contents of a JWT to debug it.</span></span> <span data-ttu-id="042b1-126">Több eszközök érhetők el, amely ehhez, beleértve a [calebb.net](http://calebb.net).</span><span class="sxs-lookup"><span data-stu-id="042b1-126">Several tools are available that can do this, including [calebb.net](http://calebb.net).</span></span> <span data-ttu-id="042b1-127">JWTs kapcsolatos további információkért tekintse meg [JWT specifikációk](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html).</span><span class="sxs-lookup"><span data-stu-id="042b1-127">For more information about JWTs, refer to [JWT specifications](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html).</span></span>

### <a name="id-tokens"></a><span data-ttu-id="042b1-128">Azonosító-jogkivonatokat</span><span class="sxs-lookup"><span data-stu-id="042b1-128">ID tokens</span></span>
<span data-ttu-id="042b1-129">Egy azonosító jogkivonat a biztonsági jogkivonatot, amely az alkalmazás az Azure AD B2C fogad egy formája, amely `authorize` és `token` végpontok.</span><span class="sxs-lookup"><span data-stu-id="042b1-129">An ID token is a form of security token that your app receives from the Azure AD B2C `authorize` and `token` endpoints.</span></span> <span data-ttu-id="042b1-130">Azonosító-jogkivonatokat helyettesítik [JWTs](#types-of-tokens), és használatával azonosítsa azokat a felhasználókat az alkalmazás jogcímeket tartalmaznak.</span><span class="sxs-lookup"><span data-stu-id="042b1-130">ID tokens are represented as [JWTs](#types-of-tokens), and they contain claims that you can use to identify users in your app.</span></span> <span data-ttu-id="042b1-131">Ha az azonosító-jogkivonatokat szerezte be a `authorize` végpont, gyakran használt a bejelentkezéshez a felhasználók a webes alkalmazásokhoz.</span><span class="sxs-lookup"><span data-stu-id="042b1-131">When ID tokens are acquired from the `authorize` endpoint, they are often used to sign in users to web applications.</span></span> <span data-ttu-id="042b1-132">Ha az azonosító-jogkivonatokat szerezte be a `token` végpont, küldheti a HTTP-kérelmek az azonos alkalmazáshoz vagy szolgáltatáshoz két összetevői közötti kommunikáció során.</span><span class="sxs-lookup"><span data-stu-id="042b1-132">When ID tokens are acquired from the `token` endpoint, they can be sent in HTTP requests during communication between two components of the same application or service.</span></span> <span data-ttu-id="042b1-133">A jogcímek használata egy Azonosítót jogkivonatban igényei szerint.</span><span class="sxs-lookup"><span data-stu-id="042b1-133">You can use the claims in an ID token as you see fit.</span></span> <span data-ttu-id="042b1-134">Gyakran használják fiók információk megjelenítéséhez vagy egy alkalmazásban a hozzáférés-vezérlési döntéseket.</span><span class="sxs-lookup"><span data-stu-id="042b1-134">They are commonly used to display account information or to make access control decisions in an app.</span></span>  

<span data-ttu-id="042b1-135">Azonosító-jogkivonatokat írt alá, de jelenleg nincsenek titkosítva.</span><span class="sxs-lookup"><span data-stu-id="042b1-135">ID tokens are signed, but they are not currently encrypted.</span></span> <span data-ttu-id="042b1-136">Ha az alkalmazás vagy API kap egy azonosító jogkivonatot, kell [az aláírás érvényesítése](#token-validation) , hogy a token hitelességének igazolásához.</span><span class="sxs-lookup"><span data-stu-id="042b1-136">When your app or API receives an ID token, it must [validate the signature](#token-validation) to prove that the token is authentic.</span></span> <span data-ttu-id="042b1-137">Az alkalmazás vagy API is ellenőrizni kell a jogkivonat érvényes igazolni néhány jogcímeket.</span><span class="sxs-lookup"><span data-stu-id="042b1-137">Your app or API must also validate a few claims in the token to prove that it is valid.</span></span> <span data-ttu-id="042b1-138">Attól függően, hogy a forgatókönyv-követelményeinek, a jogcímek, az alkalmazás által érvényesített eltérőek lehetnek, de az alkalmazás kell végeznie néhány [közös jogcím érvényesítést](#token-validation) minden forgatókönyvben.</span><span class="sxs-lookup"><span data-stu-id="042b1-138">Depending on the scenario requirements, the claims validated by an app can vary, but your app must perform some [common claim validations](#token-validation) in every scenario.</span></span>

#### <a name="sample-id-token"></a><span data-ttu-id="042b1-139">Minta azonosító tokent</span><span class="sxs-lookup"><span data-stu-id="042b1-139">Sample ID token</span></span>
```
// Line breaks for display purposes only

eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6IklkVG9rZW5TaWduaW5nS2V5Q29udGFpbmVyIn0.
eyJleHAiOjE0NDIzNjAwMzQsIm5iZiI6MTQ0MjM1NjQzNCwidmVyIjoiMS4wIiwiaXNzIjoiaHR0cHM6Ly9s
b2dpbi5taWNyb3NvZnRvbmxpbmUuY29tLzc3NTUyN2ZmLTlhMzctNDMwNy04YjNkLWNjMzExZjU4ZDkyNS92
Mi4wLyIsImFjciI6ImIyY18xX3NpZ25faW5fc3RvY2siLCJzdWIiOiJOb3Qgc3VwcG9ydGVkIGN1cnJlbnRs
eS4gVXNlIG9pZCBjbGFpbS4iLCJhdWQiOiI5MGMwZmU2My1iY2YyLTQ0ZDUtOGZiNy1iOGJiYzBiMjlkYzYi
LCJpYXQiOjE0NDIzNTY0MzQsImF1dGhfdGltZSI6MTQ0MjM1NjQzNCwiaWRwIjoiZmFjZWJvb2suY29tIn0.
h-uiKcrT882pSKUtWCpj-_3b3vPs3bOWsESAhPMrL-iIIacKc6_uZrWxaWvIYkLra5czBcGKWrYwrAC8ZvQe
DJWZ50WXQrZYODEW1OUwzaD_I1f1HE0c2uvaWdGXBpDEVdsD3ExKaFlKGjFR2V7F-fPThkVDdKmkUDQX3bVc
yyj2V2nlCQ9jd7aGnokTPfLfpOjuIrTsAdPcGpe5hfSEuwYDmqOJjGs9Jp1f-eSNEiCDQOaTBSvr479L5ptP
XWeQZyX2SypN05Rjr05bjZh3j70ZUimiocfJzjibeoDCaQTz907yAg91WYuFOrQxb-5BaUoR7K-O7vxr2M-_
CQhoFA

```

### <a name="access-tokens"></a><span data-ttu-id="042b1-140">Hozzáférési jogkivonatok</span><span class="sxs-lookup"><span data-stu-id="042b1-140">Access tokens</span></span>
<span data-ttu-id="042b1-141">Olyan hozzáférési jogkivonatot is egy formája, amely a biztonsági jogkivonatot, amely az alkalmazás fogad az Azure AD B2C `authorize` és `token` végpontok.</span><span class="sxs-lookup"><span data-stu-id="042b1-141">An access token is also a form of security token that your app receives from the Azure AD B2C `authorize` and `token` endpoints.</span></span> <span data-ttu-id="042b1-142">Hozzáférési jogkivonatok is helyettesítik [JWTs](#types-of-tokens), és segítségével azonosíthatja a API-k a megadott engedélyekkel jogcímeket tartalmaznak.</span><span class="sxs-lookup"><span data-stu-id="042b1-142">Access tokens are also represented as [JWTs](#types-of-tokens), and they contain claims that you can use to identify the granted permissions to your APIs.</span></span> <span data-ttu-id="042b1-143">Hozzáférési jogkivonatok írt alá, de jelenleg nincsenek titkosítva.</span><span class="sxs-lookup"><span data-stu-id="042b1-143">Access tokens are signed, but they are not currently encrypted.</span></span> <span data-ttu-id="042b1-144">Hozzáférési jogkivonatok használandó API-k és erőforrás-kiszolgálók eléréséhez.</span><span class="sxs-lookup"><span data-stu-id="042b1-144">Access tokens should be used to provide access to APIs and resource servers.</span></span> <span data-ttu-id="042b1-145">További tudnivalók a [használja a hozzáférési jogkivonatok](active-directory-b2c-access-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="042b1-145">Learn more about how to [use access tokens](active-directory-b2c-access-tokens.md).</span></span> 

<span data-ttu-id="042b1-146">Ha az API-t kap egy hozzáférési jogkivonatot, kell [az aláírás érvényesítése](#token-validation) , hogy a token hitelességének igazolásához.</span><span class="sxs-lookup"><span data-stu-id="042b1-146">When your API receives an access token, it must [validate the signature](#token-validation) to prove that the token is authentic.</span></span> <span data-ttu-id="042b1-147">Az API-t is ellenőrizni kell a jogkivonat érvényes igazolni néhány jogcímeket.</span><span class="sxs-lookup"><span data-stu-id="042b1-147">Your API must also validate a few claims in the token to prove that it is valid.</span></span> <span data-ttu-id="042b1-148">Attól függően, hogy a forgatókönyv-követelményeinek, a jogcímek, az alkalmazás által érvényesített eltérőek lehetnek, de az alkalmazás kell végeznie néhány [közös jogcím érvényesítést](#token-validation) minden forgatókönyvben.</span><span class="sxs-lookup"><span data-stu-id="042b1-148">Depending on the scenario requirements, the claims validated by an app can vary, but your app must perform some [common claim validations](#token-validation) in every scenario.</span></span>

### <a name="claims-in-id-and-access-tokens"></a><span data-ttu-id="042b1-149">Az ID és a hozzáférési jogkivonatok jogcímek</span><span class="sxs-lookup"><span data-stu-id="042b1-149">Claims in ID and access tokens</span></span>
<span data-ttu-id="042b1-150">Az Azure AD B2C használatakor befolyásolni részletes a tokenek tartalmát.</span><span class="sxs-lookup"><span data-stu-id="042b1-150">When you use Azure AD B2C, you have fine-grained control over the content of your tokens.</span></span> <span data-ttu-id="042b1-151">Konfigurálható [házirendek](active-directory-b2c-reference-policies.md) bizonyos beállítása felhasználói adatok küldése az alkalmazás a műveleteket igényel jogcímeket.</span><span class="sxs-lookup"><span data-stu-id="042b1-151">You can configure [policies](active-directory-b2c-reference-policies.md) to send certain sets of user data in claims that your app requires for its operations.</span></span> <span data-ttu-id="042b1-152">Ezek a jogcímek tartalmazhatják szabványos tulajdonságait, például a felhasználó `displayName` és `emailAddress`.</span><span class="sxs-lookup"><span data-stu-id="042b1-152">These claims can include standard properties such as the user's `displayName` and `emailAddress`.</span></span> <span data-ttu-id="042b1-153">Tartalmazhatják [felhasználói egyéni attribútumok](active-directory-b2c-reference-custom-attr.md) megadható a B2C-címtárban.</span><span class="sxs-lookup"><span data-stu-id="042b1-153">They can also include [custom user attributes](active-directory-b2c-reference-custom-attr.md) that you can define in your B2C directory.</span></span> <span data-ttu-id="042b1-154">Minden azonosítója és a hozzáférési jogkivonatot kapott biztonsági jogcímek az egyes készletét tartalmazza.</span><span class="sxs-lookup"><span data-stu-id="042b1-154">Every ID and access token that you receive contains a certain set of security-related claims.</span></span> <span data-ttu-id="042b1-155">Az alkalmazások a jogcímek segítségével biztonságosan a felhasználók és a kérelmek hitelesítéséhez.</span><span class="sxs-lookup"><span data-stu-id="042b1-155">Your applications can use these claims to securely authenticate users and requests.</span></span>

<span data-ttu-id="042b1-156">Figyelje meg, hogy bármely adott sorrendben nem lehet megjeleníteni a jogcímek, az azonosító-jogkivonatokat.</span><span class="sxs-lookup"><span data-stu-id="042b1-156">Note that the claims in ID tokens are not returned in any particular order.</span></span> <span data-ttu-id="042b1-157">Emellett új jogcímeket is bevezetni azonosító-jogkivonatokat bármikor.</span><span class="sxs-lookup"><span data-stu-id="042b1-157">In addition, new claims can be introduced in ID tokens at any time.</span></span> <span data-ttu-id="042b1-158">Az alkalmazás nem kell törés az új jogcímeket belépéskor.</span><span class="sxs-lookup"><span data-stu-id="042b1-158">Your app should not break as new claims are introduced.</span></span> <span data-ttu-id="042b1-159">Az alábbiakban való hozzáféréskor a azonosítója és a hozzáférési jogkivonatok az Azure AD B2C által kiadott jogcímeket.</span><span class="sxs-lookup"><span data-stu-id="042b1-159">Here are the claims that you expect to exist in ID and access tokens issued by Azure AD B2C.</span></span> <span data-ttu-id="042b1-160">További jogcímeket házirendek határozzák meg.</span><span class="sxs-lookup"><span data-stu-id="042b1-160">Any additional claims are determined by policies.</span></span> <span data-ttu-id="042b1-161">Eljárás, próbálja ki a minta Azonosítót jogkivonatban a jogcím ellenőrzése illeszti be [calebb.net](http://calebb.net).</span><span class="sxs-lookup"><span data-stu-id="042b1-161">For practice, try inspecting the claims in the sample ID token by pasting it into [calebb.net](http://calebb.net).</span></span> <span data-ttu-id="042b1-162">További részletek találhatók a [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html).</span><span class="sxs-lookup"><span data-stu-id="042b1-162">Further details can be found in the [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html).</span></span>

| <span data-ttu-id="042b1-163">Név</span><span class="sxs-lookup"><span data-stu-id="042b1-163">Name</span></span> | <span data-ttu-id="042b1-164">Jogcím</span><span class="sxs-lookup"><span data-stu-id="042b1-164">Claim</span></span> | <span data-ttu-id="042b1-165">Példaérték</span><span class="sxs-lookup"><span data-stu-id="042b1-165">Example value</span></span> | <span data-ttu-id="042b1-166">Leírás</span><span class="sxs-lookup"><span data-stu-id="042b1-166">Description</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="042b1-167">Célközönség</span><span class="sxs-lookup"><span data-stu-id="042b1-167">Audience</span></span> |`aud` |`90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6` |<span data-ttu-id="042b1-168">Egy célközönség jogcím azonosítja a jogkivonat az illetékes címzett.</span><span class="sxs-lookup"><span data-stu-id="042b1-168">An audience claim identifies the intended recipient of the token.</span></span> <span data-ttu-id="042b1-169">Az Azure AD B2C-ben a célközönség megegyezik az alkalmazás azonosítója, az alkalmazás az app-regisztrációs portálon rendelt.</span><span class="sxs-lookup"><span data-stu-id="042b1-169">For Azure AD B2C, the audience is your app's application ID, as assigned to your app in the app registration portal.</span></span> <span data-ttu-id="042b1-170">Az alkalmazás kell ellenőrizni az értékét, és utasítsa el a jogkivonatot, ha nem felel meg.</span><span class="sxs-lookup"><span data-stu-id="042b1-170">Your app should validate this value and reject the token if it does not match.</span></span> |
| <span data-ttu-id="042b1-171">Kiállító</span><span class="sxs-lookup"><span data-stu-id="042b1-171">Issuer</span></span> |`iss` |`https://login.microsoftonline.com/775527ff-9a37-4307-8b3d-cc311f58d925/v2.0/` |<span data-ttu-id="042b1-172">A jogcím azonosítja a biztonságijogkivonat-szolgáltatás (STS) hoz létre, és a jogkivonatot ad vissza.</span><span class="sxs-lookup"><span data-stu-id="042b1-172">This claim identifies the security token service (STS) that constructs and returns the token.</span></span> <span data-ttu-id="042b1-173">Az Azure AD-címtárat, amelyben a felhasználó hitelesítési is azonosítja.</span><span class="sxs-lookup"><span data-stu-id="042b1-173">It also identifies the Azure AD directory in which the user was authenticated.</span></span> <span data-ttu-id="042b1-174">Az alkalmazás érdemes ellenőrizni a kibocsátó jogcím győződjön meg arról, hogy a jogkivonat származik-e az Azure Active Directory v2.0-végponttól.</span><span class="sxs-lookup"><span data-stu-id="042b1-174">Your app should validate the issuer claim to ensure that the token came from the Azure Active Directory v2.0 endpoint.</span></span> |
| <span data-ttu-id="042b1-175">Ki:</span><span class="sxs-lookup"><span data-stu-id="042b1-175">Issued at</span></span> |`iat` |`1438535543` |<span data-ttu-id="042b1-176">Ezt az igényt az az idő, amelynél a jogkivonat adta ki, epoch idő.</span><span class="sxs-lookup"><span data-stu-id="042b1-176">This claim is the time at which the token was issued, represented in epoch time.</span></span> |
| <span data-ttu-id="042b1-177">Lejárati idő</span><span class="sxs-lookup"><span data-stu-id="042b1-177">Expiration time</span></span> |`exp` |`1438539443` |<span data-ttu-id="042b1-178">A lejárati idő jogcím az az idő, amelynél a jogkivonat érvénytelen, válik képviselt epoch idő.</span><span class="sxs-lookup"><span data-stu-id="042b1-178">The expiration time claim is the time at which the token becomes invalid, represented in epoch time.</span></span> <span data-ttu-id="042b1-179">Az alkalmazás által használandó ezt az igényt a jogkivonatok élettartama érvényességének ellenőrzésére.</span><span class="sxs-lookup"><span data-stu-id="042b1-179">Your app should use this claim to verify the validity of the token lifetime.</span></span> |
| <span data-ttu-id="042b1-180">Hatálybalépési idő</span><span class="sxs-lookup"><span data-stu-id="042b1-180">Not before</span></span> |`nbf` |`1438535543` |<span data-ttu-id="042b1-181">Ezt az igényt az az idő, amelynél a jogkivonat lesz érvényes, az időbeli kortartományon kezeli őket.</span><span class="sxs-lookup"><span data-stu-id="042b1-181">This claim is the time at which the token becomes valid, represented in epoch time.</span></span> <span data-ttu-id="042b1-182">Ez általában akkor ugyanaz, mint az idő a token lett kiállítva.</span><span class="sxs-lookup"><span data-stu-id="042b1-182">This is usually the same as the time the token was issued.</span></span> <span data-ttu-id="042b1-183">Az alkalmazás által használandó ezt az igényt a jogkivonatok élettartama érvényességének ellenőrzésére.</span><span class="sxs-lookup"><span data-stu-id="042b1-183">Your app should use this claim to verify the validity of the token lifetime.</span></span> |
| <span data-ttu-id="042b1-184">Verzió</span><span class="sxs-lookup"><span data-stu-id="042b1-184">Version</span></span> |`ver` |`1.0` |<span data-ttu-id="042b1-185">Ez az azonosító token verziója Azure AD által definiált konfigurációjának kialakításához.</span><span class="sxs-lookup"><span data-stu-id="042b1-185">This is the version of the ID token, as defined by Azure AD.</span></span> |
| <span data-ttu-id="042b1-186">Kód kivonata</span><span class="sxs-lookup"><span data-stu-id="042b1-186">Code hash</span></span> |`c_hash` |`SGCPtt01wxwfgnYZy2VJtQ` |<span data-ttu-id="042b1-187">Kód kivonatát része egy Azonosítót jogkivonatban csak akkor, ha a jogkivonat kiadott együtt egy OAuth 2.0 hitelesítési kódot.</span><span class="sxs-lookup"><span data-stu-id="042b1-187">A code hash is included in an ID token only when the token is issued together with an OAuth 2.0 authorization code.</span></span> <span data-ttu-id="042b1-188">Az engedélyezési kód hitelességének használható kód kivonatát.</span><span class="sxs-lookup"><span data-stu-id="042b1-188">A code hash can be used to validate the authenticity of an authorization code.</span></span> <span data-ttu-id="042b1-189">Az ellenőrzés elvégzéséhez további részletekért lásd: a [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html).</span><span class="sxs-lookup"><span data-stu-id="042b1-189">For more details on how to perform this validation, see the [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html).</span></span>  |
| <span data-ttu-id="042b1-190">Hozzáférési jogkivonat kivonata</span><span class="sxs-lookup"><span data-stu-id="042b1-190">Access token hash</span></span> |`at_hash` |`SGCPtt01wxwfgnYZy2VJtQ` |<span data-ttu-id="042b1-191">Az access token kivonatoló része egy Azonosítót jogkivonatban csak akkor, ha a jogkivonat együtt OAuth 2.0 hozzáférési tokent ad ki.</span><span class="sxs-lookup"><span data-stu-id="042b1-191">An access token hash is included in an ID token only when the token is issued together with an OAuth 2.0 access token.</span></span> <span data-ttu-id="042b1-192">Az access token kivonatoló segítségével hitelességének olyan hozzáférési jogkivonatot.</span><span class="sxs-lookup"><span data-stu-id="042b1-192">An access token hash can be used to validate the authenticity of an access token.</span></span> <span data-ttu-id="042b1-193">Az ellenőrzés elvégzéséhez további részletekért lásd: a [OpenID Connect meghatározása](http://openid.net/specs/openid-connect-core-1_0.html)</span><span class="sxs-lookup"><span data-stu-id="042b1-193">For more details on how to perform this validation, see the [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html)</span></span>  |
| <span data-ttu-id="042b1-194">Nonce</span><span class="sxs-lookup"><span data-stu-id="042b1-194">Nonce</span></span> |`nonce` |`12345` |<span data-ttu-id="042b1-195">Egy egyszeri üzenet hitelesítési karakterláncok ismétlésének támadások mérséklése használt stratégia.</span><span class="sxs-lookup"><span data-stu-id="042b1-195">A nonce is a strategy used to mitigate token replay attacks.</span></span> <span data-ttu-id="042b1-196">Az alkalmazás megadhat egy nonce engedélyezési kérelmet használatával a `nonce` lekérdezési paraméter.</span><span class="sxs-lookup"><span data-stu-id="042b1-196">Your app can specify a nonce in an authorization request by using the `nonce` query parameter.</span></span> <span data-ttu-id="042b1-197">Megadja a kérelemben szereplő érték lesz kibocsátott, a változtatás nélkül a `nonce` jogcím csak egy azonosító jogkivonat.</span><span class="sxs-lookup"><span data-stu-id="042b1-197">The value you provide in the request will be emitted unmodified in the `nonce` claim of an ID token only.</span></span> <span data-ttu-id="042b1-198">Ez lehetővé teszi az alkalmazásnak, hogy ellenőrizze a kérelmet, amely az adott azonosító jogkivonatot az alkalmazás munkamenet társítja azt megadott értékkel értékét.</span><span class="sxs-lookup"><span data-stu-id="042b1-198">This allows your app to verify the value against the value it specified on the request, which associates the app's session with a given ID token.</span></span> <span data-ttu-id="042b1-199">Az alkalmazás végre kell hajtania az ellenőrzés az azonosító jogkivonatok érvényesség-ellenőrzése során.</span><span class="sxs-lookup"><span data-stu-id="042b1-199">Your app should perform this validation during the ID token validation process.</span></span> |
| <span data-ttu-id="042b1-200">Tárgy</span><span class="sxs-lookup"><span data-stu-id="042b1-200">Subject</span></span> |`sub` |`884408e1-2918-4cz0-b12d-3aa027d7563b` |<span data-ttu-id="042b1-201">Ez az a rendszerbiztonsági tag, amelyekről a token állításokat információkat, például egy alkalmazás felhasználói.</span><span class="sxs-lookup"><span data-stu-id="042b1-201">This is the principal about which the token asserts information, such as the user of an app.</span></span> <span data-ttu-id="042b1-202">Ez az érték nem módosítható és nem lehet újbóli hozzárendelése és nem használja fel újra.</span><span class="sxs-lookup"><span data-stu-id="042b1-202">This value is immutable and cannot be reassigned or reused.</span></span> <span data-ttu-id="042b1-203">Az engedélyezési ellenőrzéséhez biztonságosan, például az erőforrások eléréséhez a token használatakor használható.</span><span class="sxs-lookup"><span data-stu-id="042b1-203">It can be used to perform authorization checks safely, such as when the token is used to access a resource.</span></span> <span data-ttu-id="042b1-204">Alapértelmezés szerint a tulajdonos jogcímet a felhasználó a címtárban objektumazonosítójú fel van töltve.</span><span class="sxs-lookup"><span data-stu-id="042b1-204">By default, the subject claim is populated with the object ID of the user in the directory.</span></span> <span data-ttu-id="042b1-205">További tudnivalókért lásd: [Azure Active Directory B2C: Token, munkamenet és egyszeri bejelentkezés konfigurációs](active-directory-b2c-token-session-sso.md).</span><span class="sxs-lookup"><span data-stu-id="042b1-205">To learn more, see [Azure Active Directory B2C: Token, session, and single sign-on configuration](active-directory-b2c-token-session-sso.md).</span></span> |
| <span data-ttu-id="042b1-206">Hitelesítési környezeti osztályait ismertető dokumentációban</span><span class="sxs-lookup"><span data-stu-id="042b1-206">Authentication context class reference</span></span> |`acr` |<span data-ttu-id="042b1-207">Nem alkalmazható</span><span class="sxs-lookup"><span data-stu-id="042b1-207">Not applicable</span></span> |<span data-ttu-id="042b1-208">Jelenleg nem használt, kivéve a régebbi házirendek.</span><span class="sxs-lookup"><span data-stu-id="042b1-208">Not used currently, except in the case of older policies.</span></span> <span data-ttu-id="042b1-209">További tudnivalókért lásd: [Azure Active Directory B2C: Token, munkamenet és egyszeri bejelentkezés konfigurációs](active-directory-b2c-token-session-sso.md).</span><span class="sxs-lookup"><span data-stu-id="042b1-209">To learn more, see [Azure Active Directory B2C: Token, session, and single sign-on configuration](active-directory-b2c-token-session-sso.md).</span></span> |
| <span data-ttu-id="042b1-210">Megbízhatósági keretrendszer házirend</span><span class="sxs-lookup"><span data-stu-id="042b1-210">Trust framework policy</span></span> |`tfp` |`b2c_1_sign_in` |<span data-ttu-id="042b1-211">Ez az azonosító jogkivonat használt a házirend nevét.</span><span class="sxs-lookup"><span data-stu-id="042b1-211">This is the name of the policy that was used to acquire the ID token.</span></span> |
| <span data-ttu-id="042b1-212">Hitelesítési idő</span><span class="sxs-lookup"><span data-stu-id="042b1-212">Authentication time</span></span> |`auth_time` |`1438535543` |<span data-ttu-id="042b1-213">Ezt az igényt az ideje, amellyel egy felhasználó utolsó megadott hitelesítő adatokat, epoch idő.</span><span class="sxs-lookup"><span data-stu-id="042b1-213">This claim is the time at which a user last entered credentials, represented in epoch time.</span></span> |

### <a name="refresh-tokens"></a><span data-ttu-id="042b1-214">Frissítési jogkivonatok</span><span class="sxs-lookup"><span data-stu-id="042b1-214">Refresh tokens</span></span>
<span data-ttu-id="042b1-215">Frissítési jogkivonatok olyan biztonsági jogkivonatok, az alkalmazás segítségével szerezzen be új azonosító-jogkivonatokat, és a hozzáférési jogkivonatok az OAuth 2.0 folyamatból.</span><span class="sxs-lookup"><span data-stu-id="042b1-215">Refresh tokens are security tokens that your app can use to acquire new ID tokens and access tokens in an OAuth 2.0 flow.</span></span> <span data-ttu-id="042b1-216">Azoknak a felhasználóknak való interakció nélkül a hosszú távú a felhasználók nevében erőforrásokhoz való hozzáférést biztosítanak az alkalmazást.</span><span class="sxs-lookup"><span data-stu-id="042b1-216">They provide your app with long-term access to resources on behalf of users without requiring interaction with those users.</span></span>

<span data-ttu-id="042b1-217">Egy frissítési fogadásához token token választ, az alkalmazás kell igényelnie a `offline_acesss` hatókör.</span><span class="sxs-lookup"><span data-stu-id="042b1-217">To receive a refresh token in a token response, your app must request the `offline_acesss` scope.</span></span> <span data-ttu-id="042b1-218">További részletek a `offline_access` hatókörét, tekintse meg a [az Azure AD B2C protokoll referenciája](active-directory-b2c-reference-protocols.md).</span><span class="sxs-lookup"><span data-stu-id="042b1-218">To learn more about the `offline_access` scope, refer to the [Azure AD B2C protocol reference](active-directory-b2c-reference-protocols.md).</span></span>

<span data-ttu-id="042b1-219">Frissítési jogkivonatok, és mindig lesz, az alkalmazás teljesen átlátszó.</span><span class="sxs-lookup"><span data-stu-id="042b1-219">Refresh tokens are, and will always be, completely opaque to your app.</span></span> <span data-ttu-id="042b1-220">Azok az Azure AD által kiállított és ellenőrzött és csak az Azure AD értelmezi.</span><span class="sxs-lookup"><span data-stu-id="042b1-220">They are issued by Azure AD and can be inspected and interpreted only by Azure AD.</span></span> <span data-ttu-id="042b1-221">Hosszú élettartamú, de az alkalmazás nem írható az az elvárás, hogy egy frissítési jogkivonat egy meghatározott ideig tart.</span><span class="sxs-lookup"><span data-stu-id="042b1-221">They are long-lived, but your app should not be written with the expectation that a refresh token will last for a specific period of time.</span></span> <span data-ttu-id="042b1-222">Frissítési jogkivonatokat a számos okból bármikor érvénytelenített lehet.</span><span class="sxs-lookup"><span data-stu-id="042b1-222">Refresh tokens can be invalidated at any moment for a variety of reasons.</span></span> <span data-ttu-id="042b1-223">Csak az alkalmazás tudja, hogy a frissítési jogkivonat érvényes, beváltani azt azáltal, hogy a kérés az Azure AD bejelentkezési kísérletet.</span><span class="sxs-lookup"><span data-stu-id="042b1-223">The only way for your app to know if a refresh token is valid is to attempt to redeem it by making a token request to Azure AD.</span></span>

<span data-ttu-id="042b1-224">Ha beváltja egy frissítési jogkivonat vagy egy új jogkivonatot (és ha az alkalmazás rendelkezik a `offline_access` hatókör), a token választ kap egy új frissítési jogkivonat.</span><span class="sxs-lookup"><span data-stu-id="042b1-224">When you redeem a refresh token for a new token (and if your app has been granted the `offline_access` scope), you will receive a new refresh token in the token response.</span></span> <span data-ttu-id="042b1-225">Az újonnan kiadott frissítési jogkivonat mentse.</span><span class="sxs-lookup"><span data-stu-id="042b1-225">You should save the newly issued refresh token.</span></span> <span data-ttu-id="042b1-226">A kérésben használt frissítési jogkivonat azt kell cserélni.</span><span class="sxs-lookup"><span data-stu-id="042b1-226">It should replace the refresh token you previously used in the request.</span></span> <span data-ttu-id="042b1-227">Ez segít garantálni, hogy a frissítési jogkivonatokat maradnak, amíg érvényes.</span><span class="sxs-lookup"><span data-stu-id="042b1-227">This helps guarantee that your refresh tokens remain valid for as long as possible.</span></span>

## <a name="token-validation"></a><span data-ttu-id="042b1-228">Jogkivonatok érvényesség-ellenőrzése</span><span class="sxs-lookup"><span data-stu-id="042b1-228">Token validation</span></span>
<span data-ttu-id="042b1-229">Egy token ellenőrzéséhez az alkalmazás ellenőrizze az aláírás és a jogcímek jogkivonat.</span><span class="sxs-lookup"><span data-stu-id="042b1-229">To validate a token, your app should check both the signature and claims of the token.</span></span>

<span data-ttu-id="042b1-230">Számos nyílt forráskódú szalagtárak JWTs, attól függően, hogy a választott nyelv ellenőrzésével kapcsolatos érhetők el.</span><span class="sxs-lookup"><span data-stu-id="042b1-230">Many open source libraries are available for validating JWTs, depending on your preferred language.</span></span> <span data-ttu-id="042b1-231">Azt javasoljuk, hogy a saját ellenőrzési logika megvalósítása helyett inkább megismerheti azokat a beállításokat.</span><span class="sxs-lookup"><span data-stu-id="042b1-231">We recommend that you explore those options rather than implement your own validation logic.</span></span> <span data-ttu-id="042b1-232">A jelen útmutató információk segítségére lehetnek a tárak megfelelően használata.</span><span class="sxs-lookup"><span data-stu-id="042b1-232">The information in this guide can help you learn how to properly use those libraries.</span></span>

### <a name="validate-the-signature"></a><span data-ttu-id="042b1-233">Az aláírás érvényesítése</span><span class="sxs-lookup"><span data-stu-id="042b1-233">Validate the signature</span></span>
<span data-ttu-id="042b1-234">A jwt-t tartalmazza az három, szóközzel elválasztva a `.` karakter.</span><span class="sxs-lookup"><span data-stu-id="042b1-234">A JWT contains three segments, separated by the `.` character.</span></span> <span data-ttu-id="042b1-235">Az első szegmens a *fejléc*, a második pedig a *törzs*, és a harmadik pedig a *aláírás*.</span><span class="sxs-lookup"><span data-stu-id="042b1-235">The first segment is the *header*, the second is the *body*, and the third is the *signature*.</span></span> <span data-ttu-id="042b1-236">Az aláírás szegmens segítségével hitelességének a jogkivonatot, hogy az alkalmazás által megbízhatóak.</span><span class="sxs-lookup"><span data-stu-id="042b1-236">The signature segment can be used to validate the authenticity of the token so that it can be trusted by your app.</span></span>

<span data-ttu-id="042b1-237">Az Azure AD B2C-jogkivonatok aláírt szabványos aszimmetrikus titkosítási algoritmusok, például RSA 256.</span><span class="sxs-lookup"><span data-stu-id="042b1-237">Azure AD B2C tokens are signed by using industry-standard asymmetric encryption algorithms, such as RSA 256.</span></span> <span data-ttu-id="042b1-238">A fejléc jogkivonat a token aláírásához használt kulcs és a titkosítási módra vonatkozó információkat tartalmazza:</span><span class="sxs-lookup"><span data-stu-id="042b1-238">The header of the token contains information about the key and encryption method used to sign the token:</span></span>

```
{
        "typ": "JWT",
        "alg": "RS256",
        "kid": "GvnPApfWMdLRi8PDmisFn7bprKg"
}
```

<span data-ttu-id="042b1-239">A `alg` jogcím jelzi a token aláírásához használt algoritmust.</span><span class="sxs-lookup"><span data-stu-id="042b1-239">The `alg` claim indicates the algorithm that was used to sign the token.</span></span> <span data-ttu-id="042b1-240">A `kid` jogcím jelzi az adott a token aláírásához használt nyilvános kulcsot.</span><span class="sxs-lookup"><span data-stu-id="042b1-240">The `kid` claim indicates the particular public key that was used to sign the token.</span></span>

<span data-ttu-id="042b1-241">Egy adott időpontban az Azure AD bármikor beléphet a jogkivonat közül legalább egy nyilvános-titkos kulcspárokat bizonyos készlet használatával.</span><span class="sxs-lookup"><span data-stu-id="042b1-241">At any given time, Azure AD can sign a token by using any one of a certain set of public-private key pairs.</span></span> <span data-ttu-id="042b1-242">Az Azure AD rendszeres időközönként forog kulcsok lehetséges készletét, így az alkalmazás kezelni azokat automatikusan kell írni.</span><span class="sxs-lookup"><span data-stu-id="042b1-242">Azure AD rotates the possible set of keys periodically, so your app should be written to handle those key changes automatically.</span></span> <span data-ttu-id="042b1-243">Az Azure AD által használt nyilvános kulcsok frissítések kereséséhez ésszerű gyakoriságát 24 óránként van.</span><span class="sxs-lookup"><span data-stu-id="042b1-243">A reasonable frequency to check for updates to the public keys used by Azure AD is every 24 hours.</span></span>

<span data-ttu-id="042b1-244">Az Azure AD B2C az OpenID Connect metaadatok végponttal rendelkezik.</span><span class="sxs-lookup"><span data-stu-id="042b1-244">Azure AD B2C has an OpenID Connect metadata endpoint.</span></span> <span data-ttu-id="042b1-245">Ez lehetővé teszi az alkalmazások az Azure AD B2C futásidőben információ beolvasása.</span><span class="sxs-lookup"><span data-stu-id="042b1-245">This allows apps to fetch information about Azure AD B2C at runtime.</span></span> <span data-ttu-id="042b1-246">Ezen információk közé tartozik a végpontok, lexikális elem tartalmának és jogkivonat-aláíró kulcsok.</span><span class="sxs-lookup"><span data-stu-id="042b1-246">This information includes endpoints, token contents, and token signing keys.</span></span> <span data-ttu-id="042b1-247">A B2C-címtárat a JSON-házirendet metaadat-dokumentum tartalmazza.</span><span class="sxs-lookup"><span data-stu-id="042b1-247">Your B2C directory contains a JSON metadata document for each policy.</span></span> <span data-ttu-id="042b1-248">Például a metaadat-dokumentum esetében a `b2c_1_sign_in` -szabályzat `fabrikamb2c.onmicrosoft.com` helyen található:</span><span class="sxs-lookup"><span data-stu-id="042b1-248">For example, the metadata document for the `b2c_1_sign_in` policy in  `fabrikamb2c.onmicrosoft.com` is located at:</span></span>

```
https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/v2.0/.well-known/openid-configuration?p=b2c_1_sign_in
```

<span data-ttu-id="042b1-249">`fabrikamb2c.onmicrosoft.com`a felhasználó hitelesítésére használt B2C címtár és `b2c_1_sign_in` a házirend, a jogkivonat segítségével.</span><span class="sxs-lookup"><span data-stu-id="042b1-249">`fabrikamb2c.onmicrosoft.com` is the B2C directory used to authenticate the user, and `b2c_1_sign_in` is the policy used to acquire the token.</span></span> <span data-ttu-id="042b1-250">Milyen házirend jogkivonat aláírásához használt (és a metaadatok beolvasása hol), két lehetőség közül választhat.</span><span class="sxs-lookup"><span data-stu-id="042b1-250">To determine which policy was used to sign a token (and where to go to fetch the metadata), you have two options.</span></span> <span data-ttu-id="042b1-251">Először a házirend neve szerepel a `acr` jogcím a tokenben.</span><span class="sxs-lookup"><span data-stu-id="042b1-251">First, the policy name is included in the `acr` claim in the token.</span></span> <span data-ttu-id="042b1-252">Jogcímek kívül a jwt-t a szervezet által base-64 dekódolás a szervezet és a JSON-karakterláncban eredmények deszerializálása tudja értelmezni.</span><span class="sxs-lookup"><span data-stu-id="042b1-252">You can parse claims out of the body of the JWT by base-64 decoding the body and deserializing the JSON string that results.</span></span> <span data-ttu-id="042b1-253">A `acr` jogcím lesz, amely használatával a jogkivonatot bocsásson ki a házirend nevét.</span><span class="sxs-lookup"><span data-stu-id="042b1-253">The `acr` claim will be the name of the policy that was used to issue the token.</span></span>  <span data-ttu-id="042b1-254">A másik lehetőség egy kódolására a házirend az értékét a `state` paraméter küldje a kérelmet, és ezután dekódolni a meghatározásához, hogy mely házirendet lett megadva.</span><span class="sxs-lookup"><span data-stu-id="042b1-254">Your other option is to encode the policy in the value of the `state` parameter when you issue the request, and then decode it to determine which policy was used.</span></span> <span data-ttu-id="042b1-255">Mindkét módszer esetén érvényes.</span><span class="sxs-lookup"><span data-stu-id="042b1-255">Either method is valid.</span></span>

<span data-ttu-id="042b1-256">A metaadat-dokumentum néhány hasznos adatot tartalmazó JSON-objektum.</span><span class="sxs-lookup"><span data-stu-id="042b1-256">The metadata document is a JSON object that contains several useful pieces of information.</span></span> <span data-ttu-id="042b1-257">Ezek közé tartozik az OpenID Connect hitelesítési elvégzéséhez szükséges végpontok helyét.</span><span class="sxs-lookup"><span data-stu-id="042b1-257">These include the location of the endpoints required to perform OpenID Connect authentication.</span></span> <span data-ttu-id="042b1-258">Ezek közé tartoznak `jwks_uri`, ami helyét, a nyilvános kulcsok készlete, amelyek használhatók a jogkivonatok aláírására.</span><span class="sxs-lookup"><span data-stu-id="042b1-258">They also include `jwks_uri`, which gives the location of the set of public keys that are used to sign tokens.</span></span> <span data-ttu-id="042b1-259">Hogy a hely itt valósul meg, de a legjobb, ha a hely dinamikusan beolvasni a metaadat-dokumentum használatával, és a kimenő elemzése `jwks_uri`:</span><span class="sxs-lookup"><span data-stu-id="042b1-259">That location is provided here, but it is best to fetch the location dynamically by using the metadata document and parsing out `jwks_uri`:</span></span>

```
https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/discovery/v2.0/keys?p=b2c_1_sign_in
```

<span data-ttu-id="042b1-260">A JSON-dokumentum, az URL-címen található összes a nyilvánoskulcs-adatokat egy adott pillanatban használatban tartalmazza.</span><span class="sxs-lookup"><span data-stu-id="042b1-260">The JSON document located at this URL contains all the public key information in use at a particular moment.</span></span> <span data-ttu-id="042b1-261">Az alkalmazás használhatja a `kid` jogcím jelölje ki a nyilvános kulcsot a JSON-dokumentum, egy adott token aláírásához használt a JWT-fejlécben.</span><span class="sxs-lookup"><span data-stu-id="042b1-261">Your app can use the `kid` claim in the JWT header to select the public key in the JSON document that is used to sign a particular token.</span></span> <span data-ttu-id="042b1-262">Ezután a megfelelő nyilvános kulccsal és a megadott algoritmus használatával végezheti el az aláírás érvényesítése.</span><span class="sxs-lookup"><span data-stu-id="042b1-262">It can then perform signature validation by using the correct public key and the indicated algorithm.</span></span>

<span data-ttu-id="042b1-263">Hogyan aláírás-ellenőrzéshez van ez a dokumentum nem terjed.</span><span class="sxs-lookup"><span data-stu-id="042b1-263">A description of how to perform signature validation is outside the scope of this document.</span></span> <span data-ttu-id="042b1-264">Számos nyílt forráskódú szalagtárak segítséget nyújt a, ha esetleg szükség lenne rá érhetők el.</span><span class="sxs-lookup"><span data-stu-id="042b1-264">Many open source libraries are available to help you with this if you need it.</span></span>

### <a name="validate-the-claims"></a><span data-ttu-id="042b1-265">A jogcímek ellenőrzése</span><span class="sxs-lookup"><span data-stu-id="042b1-265">Validate the claims</span></span>
<span data-ttu-id="042b1-266">Ha az alkalmazás vagy API kap egy azonosító jogkivonatot, azt kell is ellenőrzi a több szemben a Azonosítót jogkivonatban.</span><span class="sxs-lookup"><span data-stu-id="042b1-266">When your app or API receives an ID token, it should also perform several checks against the claims in the ID token.</span></span> <span data-ttu-id="042b1-267">Ezek közé tartozik, de nem korlátozva:</span><span class="sxs-lookup"><span data-stu-id="042b1-267">These include, but are not limited to:</span></span>

* <span data-ttu-id="042b1-268">A **célközönség** igényelni: Ez ellenőrzi, hogy az azonosító jogkivonatot kell fordítani az alkalmazás szándéka.</span><span class="sxs-lookup"><span data-stu-id="042b1-268">The **audience** claim: This verifies that the ID token was intended to be given to your app.</span></span>
* <span data-ttu-id="042b1-269">A **nem előtt** és **lejárati idő** jogcímek: ezek győződjön meg arról, hogy az azonosító jogkivonat nem járt le.</span><span class="sxs-lookup"><span data-stu-id="042b1-269">The **not before** and **expiration time** claims: These verify that the ID token has not expired.</span></span>
* <span data-ttu-id="042b1-270">A **kibocsátó** igényelni: Ez ellenőrzi, hogy a jogkivonat részére adták ki az alkalmazást az Azure ad.</span><span class="sxs-lookup"><span data-stu-id="042b1-270">The **issuer** claim: This verifies that the token was issued to your app by Azure AD.</span></span>
* <span data-ttu-id="042b1-271">A **nonce**: Ez a hitelesítési karakterláncok ismétlésének támadás megoldás stratégiát is.</span><span class="sxs-lookup"><span data-stu-id="042b1-271">The **nonce**: This is a strategy for token replay attack mitigation.</span></span>

<span data-ttu-id="042b1-272">Végre kell hajtania, az alkalmazás érvényesítést teljes listáját lásd a [OpenID Connect specification](https://openid.net).</span><span class="sxs-lookup"><span data-stu-id="042b1-272">For a full list of validations your app should perform, refer to the [OpenID Connect specification](https://openid.net).</span></span> <span data-ttu-id="042b1-273">Ezeket a jogcímeket a várt értékek részletek szerepelnek az előző [szakasz token](#types-of-tokens).</span><span class="sxs-lookup"><span data-stu-id="042b1-273">Details of the expected values for these claims are included in the preceding [token section](#types-of-tokens).</span></span>  

## <a name="token-lifetimes"></a><span data-ttu-id="042b1-274">Token élettartama</span><span class="sxs-lookup"><span data-stu-id="042b1-274">Token lifetimes</span></span>
<span data-ttu-id="042b1-275">A következő token élettartama pedig kiállíthatják a Tudásbázis találhatók.</span><span class="sxs-lookup"><span data-stu-id="042b1-275">The following token lifetimes are provided to further your knowledge.</span></span> <span data-ttu-id="042b1-276">Akkor lehet hasznos, ha Ön által fejlesztett és alkalmazások hibakeresését.</span><span class="sxs-lookup"><span data-stu-id="042b1-276">They can help you when you develop and debug apps.</span></span> <span data-ttu-id="042b1-277">Figyelje meg, hogy az alkalmazások nem írható várható bármelyik ezek élettartama állandó maradjon.</span><span class="sxs-lookup"><span data-stu-id="042b1-277">Note that your apps should not be written to expect any of these lifetimes to remain constant.</span></span> <span data-ttu-id="042b1-278">Akkor is, és változni fog.</span><span class="sxs-lookup"><span data-stu-id="042b1-278">They can and will change.</span></span> <span data-ttu-id="042b1-279">További információ a [token élettartamának testreszabása](active-directory-b2c-token-session-sso.md) az Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="042b1-279">Read more about the [customization of token lifetimes](active-directory-b2c-token-session-sso.md) in Azure AD B2C.</span></span>

| <span data-ttu-id="042b1-280">Token</span><span class="sxs-lookup"><span data-stu-id="042b1-280">Token</span></span> | <span data-ttu-id="042b1-281">Élettartam</span><span class="sxs-lookup"><span data-stu-id="042b1-281">Lifetime</span></span> | <span data-ttu-id="042b1-282">Leírás</span><span class="sxs-lookup"><span data-stu-id="042b1-282">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="042b1-283">Azonosító-jogkivonatokat</span><span class="sxs-lookup"><span data-stu-id="042b1-283">ID tokens</span></span> |<span data-ttu-id="042b1-284">Egy óra</span><span class="sxs-lookup"><span data-stu-id="042b1-284">One hour</span></span> |<span data-ttu-id="042b1-285">Azonosító-jogkivonatokat érvényesek általában egy óra.</span><span class="sxs-lookup"><span data-stu-id="042b1-285">ID tokens are typically valid for an hour.</span></span> <span data-ttu-id="042b1-286">A webalkalmazás a élettartama segítségével a saját munkamenetek karbantartása (ajánlott) felhasználókkal.</span><span class="sxs-lookup"><span data-stu-id="042b1-286">Your web app can use this lifetime to maintain its own sessions with users (recommended).</span></span> <span data-ttu-id="042b1-287">A különböző munkamenetek élettartamát is beállíthatja.</span><span class="sxs-lookup"><span data-stu-id="042b1-287">You can also choose a different session lifetime.</span></span> <span data-ttu-id="042b1-288">Ha az alkalmazás egy új ID-token beszerzése, egyszerűen indítson új bejelentkezési kérelmet az Azure AD kell.</span><span class="sxs-lookup"><span data-stu-id="042b1-288">If your app needs to get a new ID token, it simply needs to make a new sign-in request to Azure AD.</span></span> <span data-ttu-id="042b1-289">Ha egy felhasználó egy érvényes böngésző-munkamenet az Azure ad-vel, hogy a felhasználó előfordulhat, hogy nem kell írja be újra a hitelesítő adatokat.</span><span class="sxs-lookup"><span data-stu-id="042b1-289">If a user has a valid browser session with Azure AD, that user might not be required to enter credentials again.</span></span> |
| <span data-ttu-id="042b1-290">Frissítési jogkivonatok</span><span class="sxs-lookup"><span data-stu-id="042b1-290">Refresh tokens</span></span> |<span data-ttu-id="042b1-291">Legfeljebb 14 nap</span><span class="sxs-lookup"><span data-stu-id="042b1-291">Up to 14 days</span></span> |<span data-ttu-id="042b1-292">Egyetlen frissítési jogkivonat esetén legfeljebb 14 napig érvényes.</span><span class="sxs-lookup"><span data-stu-id="042b1-292">A single refresh token is valid for a maximum of 14 days.</span></span> <span data-ttu-id="042b1-293">Azonban a frissítési jogkivonat válhat érvénytelen számos oka bármikor.</span><span class="sxs-lookup"><span data-stu-id="042b1-293">However, a refresh token can become invalid at any time for a number of reasons.</span></span> <span data-ttu-id="042b1-294">Az alkalmazás továbbra is egy frissítési jogkivonat használatakor, amíg a kérelem sikertelen lesz, vagy az alkalmazás egy új frissítési jogkivonat lecseréli.</span><span class="sxs-lookup"><span data-stu-id="042b1-294">Your app should continue to try to use a refresh token until the request fails, or until your app replaces the refresh token with a new one.</span></span> <span data-ttu-id="042b1-295">A frissítési jogkivonat érvénytelen, ha 90 nap eltelt óta. a felhasználó utoljára megadott hitelesítő adatok is válhat.</span><span class="sxs-lookup"><span data-stu-id="042b1-295">A refresh token can also become invalid if 90 days have passed since the user last entered credentials.</span></span> |
| <span data-ttu-id="042b1-296">Hitelesítési kódok</span><span class="sxs-lookup"><span data-stu-id="042b1-296">Authorization codes</span></span> |<span data-ttu-id="042b1-297">Öt perc</span><span class="sxs-lookup"><span data-stu-id="042b1-297">Five minutes</span></span> |<span data-ttu-id="042b1-298">Hitelesítési kódok szándékosan rövid élettartamú.</span><span class="sxs-lookup"><span data-stu-id="042b1-298">Authorization codes are intentionally short-lived.</span></span> <span data-ttu-id="042b1-299">Akkor kell váltható azonnal a hozzáférési jogkivonatok, azonosító-jogkivonatokat, vagy a frissítési jogkivonatokat érkezésükkor.</span><span class="sxs-lookup"><span data-stu-id="042b1-299">They should be redeemed immediately for access tokens, ID tokens, or refresh tokens when they are received.</span></span> |

