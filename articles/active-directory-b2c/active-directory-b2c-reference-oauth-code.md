---
title: "Hitelesítésikód-folyamata – az Azure AD B2C |} Microsoft Docs"
description: "Ismerje meg, hogyan hozhat létre a webalkalmazásokkal az Azure AD B2C és az OpenID Connect hitelesítési protokoll használatával."
services: active-directory-b2c
documentationcenter: 
author: saeedakhter-msft
manager: krassk
editor: parakhj
ms.assetid: c371aaab-813a-4317-97df-b62e2f53d865
ms.service: active-directory-b2c
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/16/2017
ms.author: saeedakhter-msft
ms.openlocfilehash: dfc4f2e84704307ccbea6141c0dbc8d089733b22
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 08/29/2017
---
# <a name="azure-active-directory-b2c-oauth-20-authorization-code-flow"></a><span data-ttu-id="a222e-103">Az Azure Active Directory B2C: OAuth 2.0 hitelesítésikód-folyamata</span><span class="sxs-lookup"><span data-stu-id="a222e-103">Azure Active Directory B2C: OAuth 2.0 authorization code flow</span></span>
<span data-ttu-id="a222e-104">Az OAuth 2.0 hitelesítésengedélyezési kódot az eszközön telepített alkalmazások segítségével védett erőforrások, például webes API-k eléréséhez.</span><span class="sxs-lookup"><span data-stu-id="a222e-104">You can use the OAuth 2.0 authorization code grant in apps installed on a device to gain access to protected resources, such as web APIs.</span></span> <span data-ttu-id="a222e-105">Az Azure Active Directory B2C segítségével OAuth 2.0 (az Azure AD B2C) végrehajtásával, adhat hozzá a regisztráció, bejelentkezés és egyéb identitás-felügyeleti feladatokat a mobil- és asztali alkalmazásokhoz való.</span><span class="sxs-lookup"><span data-stu-id="a222e-105">By using the Azure Active Directory B2C (Azure AD B2C) implementation of OAuth 2.0, you can add sign-up, sign-in, and other identity management tasks to your mobile and desktop apps.</span></span> <span data-ttu-id="a222e-106">Ez a cikk nyelvfüggetlen.</span><span class="sxs-lookup"><span data-stu-id="a222e-106">This article is language-independent.</span></span> <span data-ttu-id="a222e-107">A cikk azt ismerteti, hogyan küldésére és fogadására a HTTP-üzenetek bármely nyílt forráskódú kódtárai használata nélkül.</span><span class="sxs-lookup"><span data-stu-id="a222e-107">In the article, we describe how to send and receive HTTP messages without using any open-source libraries.</span></span>

<!-- TODO: Need link to libraries -->

<span data-ttu-id="a222e-108">Az OAuth 2.0 hitelesítésikód-folyamata ismertetett [az OAuth 2.0-s szabvány 4.1 szakasz](http://tools.ietf.org/html/rfc6749).</span><span class="sxs-lookup"><span data-stu-id="a222e-108">The OAuth 2.0 authorization code flow is described in [section 4.1 of the OAuth 2.0 specification](http://tools.ietf.org/html/rfc6749).</span></span> <span data-ttu-id="a222e-109">Használhatja a hitelesítéshez és engedélyezéshez a legtöbb alkalmazás típusok, beleértve a [webalkalmazások](active-directory-b2c-apps.md#web-apps) és [natívan telepített alkalmazásokat](active-directory-b2c-apps.md#mobile-and-native-apps).</span><span class="sxs-lookup"><span data-stu-id="a222e-109">You can use it for authentication and authorization in most app types, including [web apps](active-directory-b2c-apps.md#web-apps) and [natively installed apps](active-directory-b2c-apps.md#mobile-and-native-apps).</span></span> <span data-ttu-id="a222e-110">Az OAuth 2.0 hitelesítésikód-folyamata segítségével biztonságosan megszerzése *hozzáférési jogkivonatok* az alkalmazásokat, amelyek használhatók által védett erőforrások eléréséhez az [engedélyezési server](active-directory-b2c-reference-protocols.md#the-basics).</span><span class="sxs-lookup"><span data-stu-id="a222e-110">You can use the OAuth 2.0 authorization code flow to securely acquire *access tokens* for your apps, which can be used to access resources that are secured by an [authorization server](active-directory-b2c-reference-protocols.md#the-basics).</span></span>

<span data-ttu-id="a222e-111">Ez a cikk összpontosít a **nyilvános ügyfelek** OAuth 2.0 hitelesítésikód-folyamata.</span><span class="sxs-lookup"><span data-stu-id="a222e-111">This article focuses on the **public clients** OAuth 2.0 authorization code flow.</span></span> <span data-ttu-id="a222e-112">Egy nyilvános ügyfél bármilyen ügyfélalkalmazást, amely nem lehet biztonságosan egységének fenntartására szolgáló módszert a titkos jelszó megbízható.</span><span class="sxs-lookup"><span data-stu-id="a222e-112">A public client is any client application that cannot be trusted to securely maintain the integrity of a secret password.</span></span> <span data-ttu-id="a222e-113">Ez magában foglalja a mobilalkalmazások, az asztali alkalmazások és a tulajdonképpen bármely olyan alkalmazás a eszközön fut, és meg kell kapnia a hozzáférési jogkivonatok.</span><span class="sxs-lookup"><span data-stu-id="a222e-113">This includes mobile apps, desktop apps, and essentially any application that runs on a device and needs to get access tokens.</span></span> 

> [!NOTE]
> <span data-ttu-id="a222e-114">Az Azure AD B2C segítségével adhat hozzá egy webalkalmazást az Identitáskezelés, [OpenID Connect](active-directory-b2c-reference-oidc.md) OAuth 2.0 helyett.</span><span class="sxs-lookup"><span data-stu-id="a222e-114">To add identity management to a web app by using Azure AD B2C, use [OpenID Connect](active-directory-b2c-reference-oidc.md) instead of OAuth 2.0.</span></span>

<span data-ttu-id="a222e-115">Az Azure AD B2C bővíti a szabványos OAuth 2.0 tehet még többet, mint az egyszerű hitelesítés és engedélyezés zajlik.</span><span class="sxs-lookup"><span data-stu-id="a222e-115">Azure AD B2C extends the standard OAuth 2.0 flows to do more than simple authentication and authorization.</span></span> <span data-ttu-id="a222e-116">Okozna a [házirend paraméter](active-directory-b2c-reference-policies.md).</span><span class="sxs-lookup"><span data-stu-id="a222e-116">It introduces the [policy parameter](active-directory-b2c-reference-policies.md).</span></span> <span data-ttu-id="a222e-117">A beépített házirendek segítségével OAuth 2.0 felhasználói élményt hozzáadása az alkalmazáshoz, például a regisztráció, bejelentkezés és profilok kezelése.</span><span class="sxs-lookup"><span data-stu-id="a222e-117">With built-in policies, you can use OAuth 2.0 to add user experiences to your app, such as sign-up, sign-in, and profile management.</span></span> <span data-ttu-id="a222e-118">Ez a cikk azt mutatja be OAuth 2.0-s és a házirendek használatával valósít meg minden olyan ezeket a szolgáltatásokat a natív alkalmazások.</span><span class="sxs-lookup"><span data-stu-id="a222e-118">In this article, we show you how to use OAuth 2.0 and policies to implement each of these experiences in your native applications.</span></span> <span data-ttu-id="a222e-119">Azt is bemutatják a hozzáférési jogkivonatok lekérésére, webes API-k eléréséhez.</span><span class="sxs-lookup"><span data-stu-id="a222e-119">We also show you how to get access tokens for accessing web APIs.</span></span>

<span data-ttu-id="a222e-120">A minta Azure AD B2C-címtár használjuk a ebben a cikkben példa HTTP-kérelmeket, **fabrikamb2c.onmicrosoft.com**. Is használhatja a mintaalkalmazás és a házirendeket.</span><span class="sxs-lookup"><span data-stu-id="a222e-120">In the example HTTP requests in this article, we use our sample Azure AD B2C directory, **fabrikamb2c.onmicrosoft.com**. We also use our sample application and policies.</span></span> <span data-ttu-id="a222e-121">Megpróbálhatja a kérelmek saját kezűleg ezen értékek használatával, vagy azokat lecserélheti a saját értékeit.</span><span class="sxs-lookup"><span data-stu-id="a222e-121">You can try the requests yourself by using these values, or you can replace them with your own values.</span></span>
<span data-ttu-id="a222e-122">Megtudhatja, hogyan [beolvasása a saját Azure AD B2C directory, az alkalmazás és a házirendek](#use-your-own-azure-ad-b2c-directory).</span><span class="sxs-lookup"><span data-stu-id="a222e-122">Learn how to [get your own Azure AD B2C directory, application, and policies](#use-your-own-azure-ad-b2c-directory).</span></span>

## <a name="1-get-an-authorization-code"></a><span data-ttu-id="a222e-123">1. Az engedélyezési kód beolvasása</span><span class="sxs-lookup"><span data-stu-id="a222e-123">1. Get an authorization code</span></span>
<span data-ttu-id="a222e-124">A hitelesítésikód-folyamata kezdődik irányítja a felhasználót, hogy az ügyfél a `/authorize` végpont.</span><span class="sxs-lookup"><span data-stu-id="a222e-124">The authorization code flow begins with the client directing the user to the `/authorize` endpoint.</span></span> <span data-ttu-id="a222e-125">Ez része az interaktív a folyamatot, ha a felhasználó végrehajtja a műveletet.</span><span class="sxs-lookup"><span data-stu-id="a222e-125">This is the interactive part of the flow, where the user takes action.</span></span> <span data-ttu-id="a222e-126">A kérelem, az ügyfél azt jelzi, az a `scope` paraméter szerzi be a felhasználó szükséges engedélyeket.</span><span class="sxs-lookup"><span data-stu-id="a222e-126">In this request, the client indicates in the `scope` parameter the permissions that it needs to acquire from the user.</span></span> <span data-ttu-id="a222e-127">Az a `p` paraméter azt jelzi, a házirend végrehajtásához.</span><span class="sxs-lookup"><span data-stu-id="a222e-127">In the `p` parameter, it indicates the policy to execute.</span></span> <span data-ttu-id="a222e-128">Az alábbi három példák (olvashatóság érdekében sortöréssel) minden használja egy másik házirendet.</span><span class="sxs-lookup"><span data-stu-id="a222e-128">The following three examples (with line breaks for readability) each use a different policy.</span></span>

### <a name="use-a-sign-in-policy"></a><span data-ttu-id="a222e-129">A bejelentkezési házirend</span><span class="sxs-lookup"><span data-stu-id="a222e-129">Use a sign-in policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code
&redirect_uri=urn%3Aietf%3Awg%3Aoauth%3A2.0%3Aoob
&response_mode=query
&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&p=b2c_1_sign_in
```

### <a name="use-a-sign-up-policy"></a><span data-ttu-id="a222e-130">A regisztrációs szabályzatban használata</span><span class="sxs-lookup"><span data-stu-id="a222e-130">Use a sign-up policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code
&redirect_uri=urn%3Aietf%3Awg%3Aoauth%3A2.0%3Aoob
&response_mode=query
&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&p=b2c_1_sign_up
```

### <a name="use-an-edit-profile-policy"></a><span data-ttu-id="a222e-131">Egy házirend-profil szerkesztése</span><span class="sxs-lookup"><span data-stu-id="a222e-131">Use an edit-profile policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code
&redirect_uri=urn%3Aietf%3Awg%3Aoauth%3A2.0%3Aoob
&response_mode=query
&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&p=b2c_1_edit_profile
```

| <span data-ttu-id="a222e-132">Paraméter</span><span class="sxs-lookup"><span data-stu-id="a222e-132">Parameter</span></span> | <span data-ttu-id="a222e-133">Kötelező megadni?</span><span class="sxs-lookup"><span data-stu-id="a222e-133">Required?</span></span> | <span data-ttu-id="a222e-134">Leírás</span><span class="sxs-lookup"><span data-stu-id="a222e-134">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="a222e-135">client_id</span><span class="sxs-lookup"><span data-stu-id="a222e-135">client_id</span></span> |<span data-ttu-id="a222e-136">Szükséges</span><span class="sxs-lookup"><span data-stu-id="a222e-136">Required</span></span> |<span data-ttu-id="a222e-137">Az alkalmazást a hozzárendelt Alkalmazásazonosító a [Azure-portálon](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="a222e-137">The application ID assigned to your app in the [Azure portal](https://portal.azure.com).</span></span> |
| <span data-ttu-id="a222e-138">response_type</span><span class="sxs-lookup"><span data-stu-id="a222e-138">response_type</span></span> |<span data-ttu-id="a222e-139">Szükséges</span><span class="sxs-lookup"><span data-stu-id="a222e-139">Required</span></span> |<span data-ttu-id="a222e-140">A válasz típusa, amely tartalmazza `code` a a hitelesítésikód-folyamata.</span><span class="sxs-lookup"><span data-stu-id="a222e-140">The response type, which must include `code` for the authorization code flow.</span></span> |
| <span data-ttu-id="a222e-141">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="a222e-141">redirect_uri</span></span> |<span data-ttu-id="a222e-142">Szükséges</span><span class="sxs-lookup"><span data-stu-id="a222e-142">Required</span></span> |<span data-ttu-id="a222e-143">Az átirányítási URI-t, az alkalmazás, ahol hitelesítési válaszokat küldött és az alkalmazás által fogadott.</span><span class="sxs-lookup"><span data-stu-id="a222e-143">The redirect URI of your app, where authentication responses are sent and received by your app.</span></span> <span data-ttu-id="a222e-144">Az pontosan egyeznie kell az átirányítási URI-k, a portál regisztrált azzal a különbséggel, hogy az URL-kódolású kell lennie.</span><span class="sxs-lookup"><span data-stu-id="a222e-144">It must exactly match one of the redirect URIs that you registered in the portal, except that it must be URL-encoded.</span></span> |
| <span data-ttu-id="a222e-145">Hatókör</span><span class="sxs-lookup"><span data-stu-id="a222e-145">scope</span></span> |<span data-ttu-id="a222e-146">Szükséges</span><span class="sxs-lookup"><span data-stu-id="a222e-146">Required</span></span> |<span data-ttu-id="a222e-147">Hatókörök szóközökkel elválasztott listája.</span><span class="sxs-lookup"><span data-stu-id="a222e-147">A space-separated list of scopes.</span></span> <span data-ttu-id="a222e-148">Egy hatókör érték azt jelzi, az Azure Active Directory (Azure AD) mindkét kérnek engedély.</span><span class="sxs-lookup"><span data-stu-id="a222e-148">A single scope value indicates to Azure Active Directory (Azure AD) both of the permissions that are being requested.</span></span> <span data-ttu-id="a222e-149">Használja az ügyfél-azonosító, a hatókör, az azt jelzi, hogy az alkalmazás egy hozzáférési jogkivonatot, amely használható a saját szolgáltatás vagy webes API-t kell-e, képviseli az azonos ügyfél-azonosítót.</span><span class="sxs-lookup"><span data-stu-id="a222e-149">Using the client ID as the scope indicates that your app needs an access token that can be used against your own service or web API, represented by the same client ID.</span></span>  <span data-ttu-id="a222e-150">A `offline_access` hatókör azt jelzi, hogy kell-e az alkalmazást egy frissítési jogkivonat hosszú élettartamú erőforrások elérése érdekében.</span><span class="sxs-lookup"><span data-stu-id="a222e-150">The `offline_access` scope indicates that your app needs a refresh token for long-lived access to resources.</span></span> <span data-ttu-id="a222e-151">Is használhatja a `openid` egy azonosító jogkivonatot kérhet az Azure AD B2C hatókör.</span><span class="sxs-lookup"><span data-stu-id="a222e-151">You also can use the `openid` scope to request an ID token from Azure AD B2C.</span></span> |
| <span data-ttu-id="a222e-152">response_mode</span><span class="sxs-lookup"><span data-stu-id="a222e-152">response_mode</span></span> |<span data-ttu-id="a222e-153">Ajánlott</span><span class="sxs-lookup"><span data-stu-id="a222e-153">Recommended</span></span> |<span data-ttu-id="a222e-154">A módszer, amelynek használatával az eredményül kapott engedélyezési kód küldi vissza az alkalmazást.</span><span class="sxs-lookup"><span data-stu-id="a222e-154">The method that you use to send the resulting authorization code back to your app.</span></span> <span data-ttu-id="a222e-155">Ez lehet a `query`, `form_post`, vagy `fragment`.</span><span class="sxs-lookup"><span data-stu-id="a222e-155">It can be `query`, `form_post`, or `fragment`.</span></span> |
| <span data-ttu-id="a222e-156">state</span><span class="sxs-lookup"><span data-stu-id="a222e-156">state</span></span> |<span data-ttu-id="a222e-157">Ajánlott</span><span class="sxs-lookup"><span data-stu-id="a222e-157">Recommended</span></span> |<span data-ttu-id="a222e-158">A token válaszként visszaadott a kérelemben szereplő érték.</span><span class="sxs-lookup"><span data-stu-id="a222e-158">A value included in the request that is returned in the token response.</span></span> <span data-ttu-id="a222e-159">Bármely, a használni kívánt tartalmat karakterlánc lehet.</span><span class="sxs-lookup"><span data-stu-id="a222e-159">It can be a string of any content that you want to use.</span></span> <span data-ttu-id="a222e-160">Általában egy véletlenszerűen generált egyedi érték használata esetén webhelyközi kérések hamisításának megakadályozása támadások megelőzése érdekében.</span><span class="sxs-lookup"><span data-stu-id="a222e-160">Usually, a randomly generated unique value is  used, to prevent cross-site request forgery attacks.</span></span> <span data-ttu-id="a222e-161">Az állapot is kódolásához használatos a felhasználói állapot az alkalmazás információkat előtt a hitelesítési kérelmet.</span><span class="sxs-lookup"><span data-stu-id="a222e-161">The state also is used to encode information about the user's state in the app before the authentication request occurred.</span></span> <span data-ttu-id="a222e-162">Például az volt a felhasználó oldalon, vagy a házirendet, amely a végrehajtása.</span><span class="sxs-lookup"><span data-stu-id="a222e-162">For example, the page the user was on, or the policy that was being executed.</span></span> |
| <span data-ttu-id="a222e-163">P</span><span class="sxs-lookup"><span data-stu-id="a222e-163">p</span></span> |<span data-ttu-id="a222e-164">Szükséges</span><span class="sxs-lookup"><span data-stu-id="a222e-164">Required</span></span> |<span data-ttu-id="a222e-165">A házirendet, amely végrehajtja a rendszer.</span><span class="sxs-lookup"><span data-stu-id="a222e-165">The policy that is executed.</span></span> <span data-ttu-id="a222e-166">Egy Azure AD B2C-címtárban létrehozott házirend nevét.</span><span class="sxs-lookup"><span data-stu-id="a222e-166">It's the name of a policy that is created in your Azure AD B2C directory.</span></span> <span data-ttu-id="a222e-167">A házirend nevének értékét kell kezdődnie **b2c\_1\_**.</span><span class="sxs-lookup"><span data-stu-id="a222e-167">The policy name value should begin with **b2c\_1\_**.</span></span> <span data-ttu-id="a222e-168">A házirendekkel kapcsolatos további információkért lásd: [beépített házirendek az Azure AD B2C](active-directory-b2c-reference-policies.md).</span><span class="sxs-lookup"><span data-stu-id="a222e-168">To learn more about policies, see [Azure AD B2C built-in policies](active-directory-b2c-reference-policies.md).</span></span> |
| <span data-ttu-id="a222e-169">parancssor</span><span class="sxs-lookup"><span data-stu-id="a222e-169">prompt</span></span> |<span data-ttu-id="a222e-170">Optional</span><span class="sxs-lookup"><span data-stu-id="a222e-170">Optional</span></span> |<span data-ttu-id="a222e-171">A típus a felhasználói beavatkozás szükséges.</span><span class="sxs-lookup"><span data-stu-id="a222e-171">The type of user interaction that is required.</span></span> <span data-ttu-id="a222e-172">Az egyetlen érvényes érték jelenleg `login`, amely előírja, hogy a felhasználó megadja hitelesítő adataikkal, hogy kérésre.</span><span class="sxs-lookup"><span data-stu-id="a222e-172">Currently, the only valid value is `login`, which forces the user to enter their credentials on that request.</span></span> <span data-ttu-id="a222e-173">Egyszeri bejelentkezés nem lépnek érvénybe.</span><span class="sxs-lookup"><span data-stu-id="a222e-173">Single sign-on will not take effect.</span></span> |

<span data-ttu-id="a222e-174">Ezen a ponton a felhasználónak kapcsolatba a házirend-munkafolyamat végrehajtásához.</span><span class="sxs-lookup"><span data-stu-id="a222e-174">At this point, the user is asked to complete the policy's workflow.</span></span> <span data-ttu-id="a222e-175">Ez lehet, hogy magában a írja be a felhasználónevét és jelszavát, felhasználó bejelentkezik egy közösségi identitás regisztrál a könyvtár, vagy több lépésből áll.</span><span class="sxs-lookup"><span data-stu-id="a222e-175">This might involve the user entering their username and password, signing in with a social identity, signing up for the directory, or any other number of steps.</span></span> <span data-ttu-id="a222e-176">Felhasználói műveletek attól függ, hogyan van definiálva a házirendet.</span><span class="sxs-lookup"><span data-stu-id="a222e-176">User actions depend on how the policy is defined.</span></span>

<span data-ttu-id="a222e-177">Miután a felhasználó teljesítette a szabályzat, az Azure AD az alkalmazásban használt értéke a választ ad `redirect_uri`.</span><span class="sxs-lookup"><span data-stu-id="a222e-177">After the user completes the policy, Azure AD returns a response to your app at the value you used for `redirect_uri`.</span></span> <span data-ttu-id="a222e-178">A megadott metódust használja a `response_mode` paraméter.</span><span class="sxs-lookup"><span data-stu-id="a222e-178">It uses the method specified in the `response_mode` parameter.</span></span> <span data-ttu-id="a222e-179">A válasz megegyezik pontosan az egyes felhasználói művelet forgatókönyv, függetlenül a házirend, hogy végre lett hajtva.</span><span class="sxs-lookup"><span data-stu-id="a222e-179">The response is exactly the same for each of the user action scenarios, independent of the policy that was executed.</span></span>

<span data-ttu-id="a222e-180">A sikeres válasz használó `response_mode=query` dolgozunk:</span><span class="sxs-lookup"><span data-stu-id="a222e-180">A successful response that uses `response_mode=query` looks like this:</span></span>

```
GET urn:ietf:wg:oauth:2.0:oob?
code=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...        // the authorization_code, truncated
&state=arbitrary_data_you_can_receive_in_the_response                // the value provided in the request
```

| <span data-ttu-id="a222e-181">Paraméter</span><span class="sxs-lookup"><span data-stu-id="a222e-181">Parameter</span></span> | <span data-ttu-id="a222e-182">Leírás</span><span class="sxs-lookup"><span data-stu-id="a222e-182">Description</span></span> |
| --- | --- |
| <span data-ttu-id="a222e-183">Kód</span><span class="sxs-lookup"><span data-stu-id="a222e-183">code</span></span> |<span data-ttu-id="a222e-184">Az engedélyezési kód, amely az alkalmazás kéri.</span><span class="sxs-lookup"><span data-stu-id="a222e-184">The authorization code that the app requested.</span></span> <span data-ttu-id="a222e-185">Az alkalmazás az engedélyezési kód segítségével olyan hozzáférési jogkivonatot cél erőforrás igényelhetnek.</span><span class="sxs-lookup"><span data-stu-id="a222e-185">The app can use the authorization code to request an access token for a target resource.</span></span> <span data-ttu-id="a222e-186">Hitelesítési kódok nagyon rövid élettartamú.</span><span class="sxs-lookup"><span data-stu-id="a222e-186">Authorization codes are very short-lived.</span></span> <span data-ttu-id="a222e-187">Ezek általában körülbelül 10 perc múlva lejár.</span><span class="sxs-lookup"><span data-stu-id="a222e-187">Typically, they expire after about 10 minutes.</span></span> |
| <span data-ttu-id="a222e-188">state</span><span class="sxs-lookup"><span data-stu-id="a222e-188">state</span></span> |<span data-ttu-id="a222e-189">Tekintse meg a tábla az előző szakaszban leírt teljes leírását.</span><span class="sxs-lookup"><span data-stu-id="a222e-189">See the full description in the table in the preceding section.</span></span> <span data-ttu-id="a222e-190">Ha egy `state` paraméter szerepel a kérést, ugyanazt az értéket meg kell jelennie a válaszban.</span><span class="sxs-lookup"><span data-stu-id="a222e-190">If a `state` parameter is included in the request, the same value should appear in the response.</span></span> <span data-ttu-id="a222e-191">Az alkalmazás győződjön meg arról, hogy a `state` a kérelem és a válaszban szereplő értékek azonosak.</span><span class="sxs-lookup"><span data-stu-id="a222e-191">The app should verify that the `state` values in the request and response are identical.</span></span> |

<span data-ttu-id="a222e-192">Hibaválaszok is küldhetők az átirányítási URI-t, hogy az alkalmazás képes kezelni őket megfelelően:</span><span class="sxs-lookup"><span data-stu-id="a222e-192">Error responses also can be sent to the redirect URI so that the app can handle them appropriately:</span></span>

```
GET urn:ietf:wg:oauth:2.0:oob?
error=access_denied
&error_description=The+user+has+cancelled+entering+self-asserted+information
&state=arbitrary_data_you_can_receive_in_the_response
```

| <span data-ttu-id="a222e-193">Paraméter</span><span class="sxs-lookup"><span data-stu-id="a222e-193">Parameter</span></span> | <span data-ttu-id="a222e-194">Leírás</span><span class="sxs-lookup"><span data-stu-id="a222e-194">Description</span></span> |
| --- | --- |
| <span data-ttu-id="a222e-195">error</span><span class="sxs-lookup"><span data-stu-id="a222e-195">error</span></span> |<span data-ttu-id="a222e-196">Egy hiba kód karakterlánc jelentkező hibákról típusú besorolására használható.</span><span class="sxs-lookup"><span data-stu-id="a222e-196">An error code string that you can use to classify the types of errors that occur.</span></span> <span data-ttu-id="a222e-197">A karakterlánc hibák reagálni is használja.</span><span class="sxs-lookup"><span data-stu-id="a222e-197">You also can use the string to react to errors.</span></span> |
| <span data-ttu-id="a222e-198">error_description</span><span class="sxs-lookup"><span data-stu-id="a222e-198">error_description</span></span> |<span data-ttu-id="a222e-199">Egy adott hibaüzenet, melyek segíthetnek hitelesítési hiba okának azonosításához.</span><span class="sxs-lookup"><span data-stu-id="a222e-199">A specific error message that can help you identify the root cause of an authentication error.</span></span> |
| <span data-ttu-id="a222e-200">state</span><span class="sxs-lookup"><span data-stu-id="a222e-200">state</span></span> |<span data-ttu-id="a222e-201">Lásd az előző táblázatban a teljes leírását.</span><span class="sxs-lookup"><span data-stu-id="a222e-201">See the full description in the preceding table.</span></span> <span data-ttu-id="a222e-202">Ha egy `state` paraméter szerepel a kérést, ugyanazt az értéket meg kell jelennie a válaszban.</span><span class="sxs-lookup"><span data-stu-id="a222e-202">If a `state` parameter is included in the request, the same value should appear in the response.</span></span> <span data-ttu-id="a222e-203">Az alkalmazás győződjön meg arról, hogy a `state` a kérelem és a válaszban szereplő értékek azonosak.</span><span class="sxs-lookup"><span data-stu-id="a222e-203">The app should verify that the `state` values in the request and response are identical.</span></span> |

## <a name="2-get-a-token"></a><span data-ttu-id="a222e-204">2. A jogkivonat beolvasása</span><span class="sxs-lookup"><span data-stu-id="a222e-204">2. Get a token</span></span>
<span data-ttu-id="a222e-205">Most, hogy az engedélyezési kód jut hozzá, akkor is beválthatja a `code` úgy, hogy a POST kérést küld a kívánt erőforrás jogkivonat a `/token` végpont.</span><span class="sxs-lookup"><span data-stu-id="a222e-205">Now that you've acquired an authorization code, you can redeem the `code` for a token to the intended resource by sending a POST request to the `/token` endpoint.</span></span> <span data-ttu-id="a222e-206">Az Azure AD B2C-ben a jogkivonatot kérhet csak erőforrás az alkalmazás saját webes API-t.</span><span class="sxs-lookup"><span data-stu-id="a222e-206">In Azure AD B2C, the only resource that you can request a token for is your app's own back-end web API.</span></span> <span data-ttu-id="a222e-207">Az a magához jogkivonat kérésével használt egyezmény, hogy az alkalmazás ügyfél-Azonosítóját használja a hatóköreként:</span><span class="sxs-lookup"><span data-stu-id="a222e-207">The convention that's used for requesting a token to yourself is to use your app's client ID as the scope:</span></span>

```
POST fabrikamb2c.onmicrosoft.com/oauth2/v2.0/token?p=b2c_1_sign_in HTTP/1.1
Host: https://login.microsoftonline.com
Content-Type: application/x-www-form-urlencoded

grant_type=authorization_code&client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access&code=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...&redirect_uri=urn:ietf:wg:oauth:2.0:oob

```

| <span data-ttu-id="a222e-208">Paraméter</span><span class="sxs-lookup"><span data-stu-id="a222e-208">Parameter</span></span> | <span data-ttu-id="a222e-209">Kötelező megadni?</span><span class="sxs-lookup"><span data-stu-id="a222e-209">Required?</span></span> | <span data-ttu-id="a222e-210">Leírás</span><span class="sxs-lookup"><span data-stu-id="a222e-210">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="a222e-211">P</span><span class="sxs-lookup"><span data-stu-id="a222e-211">p</span></span> |<span data-ttu-id="a222e-212">Szükséges</span><span class="sxs-lookup"><span data-stu-id="a222e-212">Required</span></span> |<span data-ttu-id="a222e-213">A házirendet, amely szerepel az engedélyezési kód megszerzésére.</span><span class="sxs-lookup"><span data-stu-id="a222e-213">The policy that was used to acquire the authorization code.</span></span> <span data-ttu-id="a222e-214">A kérelem nem használhatja másik szabályt.</span><span class="sxs-lookup"><span data-stu-id="a222e-214">You cannot use a different policy in this request.</span></span> <span data-ttu-id="a222e-215">Vegye figyelembe, hogy hozzáadta a paraméter a *lekérdezési karakterlánc*, és nem a FELADÁS egy vagy több szervezet.</span><span class="sxs-lookup"><span data-stu-id="a222e-215">Note that you add this parameter to the *query string*, not in the POST body.</span></span> |
| <span data-ttu-id="a222e-216">client_id</span><span class="sxs-lookup"><span data-stu-id="a222e-216">client_id</span></span> |<span data-ttu-id="a222e-217">Szükséges</span><span class="sxs-lookup"><span data-stu-id="a222e-217">Required</span></span> |<span data-ttu-id="a222e-218">Az alkalmazást a hozzárendelt Alkalmazásazonosító a [Azure-portálon](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="a222e-218">The application ID assigned to your app in the [Azure portal](https://portal.azure.com).</span></span> |
| <span data-ttu-id="a222e-219">grant_type</span><span class="sxs-lookup"><span data-stu-id="a222e-219">grant_type</span></span> |<span data-ttu-id="a222e-220">Szükséges</span><span class="sxs-lookup"><span data-stu-id="a222e-220">Required</span></span> |<span data-ttu-id="a222e-221">A támogatás típusát.</span><span class="sxs-lookup"><span data-stu-id="a222e-221">The type of grant.</span></span> <span data-ttu-id="a222e-222">A hitelesítésikód-folyamata, a megadott típus kell `authorization_code`.</span><span class="sxs-lookup"><span data-stu-id="a222e-222">For the authorization code flow, the grant type must be `authorization_code`.</span></span> |
| <span data-ttu-id="a222e-223">Hatókör</span><span class="sxs-lookup"><span data-stu-id="a222e-223">scope</span></span> |<span data-ttu-id="a222e-224">Ajánlott</span><span class="sxs-lookup"><span data-stu-id="a222e-224">Recommended</span></span> |<span data-ttu-id="a222e-225">Hatókörök szóközökkel elválasztott listája.</span><span class="sxs-lookup"><span data-stu-id="a222e-225">A space-separated list of scopes.</span></span> <span data-ttu-id="a222e-226">Egy hatókör érték azt jelzi, az Azure AD mindkét kérnek engedély.</span><span class="sxs-lookup"><span data-stu-id="a222e-226">A single scope value indicates to Azure AD both of the permissions that are being requested.</span></span> <span data-ttu-id="a222e-227">Használja az ügyfél-azonosító, a hatókör, az azt jelzi, hogy az alkalmazás egy hozzáférési jogkivonatot, amely használható a saját szolgáltatás vagy webes API-t kell-e, képviseli az azonos ügyfél-azonosítót.</span><span class="sxs-lookup"><span data-stu-id="a222e-227">Using the client ID as the scope indicates that your app needs an access token that can be used against your own service or web API, represented by the same client ID.</span></span>  <span data-ttu-id="a222e-228">A `offline_access` hatókör azt jelzi, hogy kell-e az alkalmazást egy frissítési jogkivonat hosszú élettartamú erőforrások elérése érdekében.</span><span class="sxs-lookup"><span data-stu-id="a222e-228">The `offline_access` scope indicates that your app needs a refresh token for long-lived access to resources.</span></span>  <span data-ttu-id="a222e-229">Is használhatja a `openid` egy azonosító jogkivonatot kérhet az Azure AD B2C hatókör.</span><span class="sxs-lookup"><span data-stu-id="a222e-229">You also can use the `openid` scope to request an ID token from Azure AD B2C.</span></span> |
| <span data-ttu-id="a222e-230">Kód</span><span class="sxs-lookup"><span data-stu-id="a222e-230">code</span></span> |<span data-ttu-id="a222e-231">Szükséges</span><span class="sxs-lookup"><span data-stu-id="a222e-231">Required</span></span> |<span data-ttu-id="a222e-232">A folyamat első szakasza beszerzett engedélyezési kódot.</span><span class="sxs-lookup"><span data-stu-id="a222e-232">The authorization code that you acquired in the first leg of the flow.</span></span> |
| <span data-ttu-id="a222e-233">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="a222e-233">redirect_uri</span></span> |<span data-ttu-id="a222e-234">Szükséges</span><span class="sxs-lookup"><span data-stu-id="a222e-234">Required</span></span> |<span data-ttu-id="a222e-235">Az átirányítási URI-t, az alkalmazás, ahol kapott engedélyezési kódot.</span><span class="sxs-lookup"><span data-stu-id="a222e-235">The redirect URI of the application where you received the authorization code.</span></span> |

<span data-ttu-id="a222e-236">A sikeres token válasz így néz ki:</span><span class="sxs-lookup"><span data-stu-id="a222e-236">A successful token response looks like this:</span></span>

```
{
    "not_before": "1442340812",
    "token_type": "Bearer",
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...",
    "scope": "90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access",
    "expires_in": "3600",
    "refresh_token": "AAQfQmvuDy8WtUv-sd0TBwWVQs1rC-Lfxa_NDkLqpg50Cxp5Dxj0VPF1mx2Z...",
}
```
| <span data-ttu-id="a222e-237">Paraméter</span><span class="sxs-lookup"><span data-stu-id="a222e-237">Parameter</span></span> | <span data-ttu-id="a222e-238">Leírás</span><span class="sxs-lookup"><span data-stu-id="a222e-238">Description</span></span> |
| --- | --- |
| <span data-ttu-id="a222e-239">not_before</span><span class="sxs-lookup"><span data-stu-id="a222e-239">not_before</span></span> |<span data-ttu-id="a222e-240">Az az idő, amelynél a jogkivonat érvényes, időbeli kortartományon.</span><span class="sxs-lookup"><span data-stu-id="a222e-240">The time at which the token is considered valid, in epoch time.</span></span> |
| <span data-ttu-id="a222e-241">token_type</span><span class="sxs-lookup"><span data-stu-id="a222e-241">token_type</span></span> |<span data-ttu-id="a222e-242">A jogkivonat típusa érték.</span><span class="sxs-lookup"><span data-stu-id="a222e-242">The token type value.</span></span> <span data-ttu-id="a222e-243">A csak az Azure AD támogató típus tulajdonosi.</span><span class="sxs-lookup"><span data-stu-id="a222e-243">The only type that Azure AD supports is Bearer.</span></span> |
| <span data-ttu-id="a222e-244">access_token</span><span class="sxs-lookup"><span data-stu-id="a222e-244">access_token</span></span> |<span data-ttu-id="a222e-245">Az aláírt JSON webes jogkivonat (JWT) az Ön által kért.</span><span class="sxs-lookup"><span data-stu-id="a222e-245">The signed JSON Web Token (JWT) that you requested.</span></span> |
| <span data-ttu-id="a222e-246">Hatókör</span><span class="sxs-lookup"><span data-stu-id="a222e-246">scope</span></span> |<span data-ttu-id="a222e-247">A hatókörök, amely a token érvényes.</span><span class="sxs-lookup"><span data-stu-id="a222e-247">The scopes that the token is valid for.</span></span> <span data-ttu-id="a222e-248">Is használhatja szerepet, amelyet a gyorsítótár jogkivonatok későbbi használatra.</span><span class="sxs-lookup"><span data-stu-id="a222e-248">You also can use scopes to cache tokens for later use.</span></span> |
| <span data-ttu-id="a222e-249">expires_in</span><span class="sxs-lookup"><span data-stu-id="a222e-249">expires_in</span></span> |<span data-ttu-id="a222e-250">Mennyi ideig, amely a token érvényes (másodpercben).</span><span class="sxs-lookup"><span data-stu-id="a222e-250">The length of time that the token is valid (in seconds).</span></span> |
| <span data-ttu-id="a222e-251">refresh_token</span><span class="sxs-lookup"><span data-stu-id="a222e-251">refresh_token</span></span> |<span data-ttu-id="a222e-252">Az OAuth 2.0-s frissítési jogkivonat.</span><span class="sxs-lookup"><span data-stu-id="a222e-252">An OAuth 2.0 refresh token.</span></span> <span data-ttu-id="a222e-253">Az alkalmazás a jogkivonat segítségével szerezzen be további jogkivonatok a jelenlegi jogkivonat lejárata után is.</span><span class="sxs-lookup"><span data-stu-id="a222e-253">The app can use this token to acquire additional tokens after the current token expires.</span></span> <span data-ttu-id="a222e-254">Frissítési jogkivonatok hosszú élettartamú.</span><span class="sxs-lookup"><span data-stu-id="a222e-254">Refresh tokens are long-lived.</span></span> <span data-ttu-id="a222e-255">Erőforrásokhoz való hozzáférés megőrzése huzamosabb ideig használhatja őket.</span><span class="sxs-lookup"><span data-stu-id="a222e-255">You can use them to retain access to resources for extended periods of time.</span></span> <span data-ttu-id="a222e-256">További információkért lásd: a [Azure AD B2C-jogkivonatok referenciájából](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="a222e-256">For more information, see the [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> |

<span data-ttu-id="a222e-257">Hibaválaszok néznek ki:</span><span class="sxs-lookup"><span data-stu-id="a222e-257">Error responses look like this:</span></span>

```
{
    "error": "access_denied",
    "error_description": "The user revoked access to the app.",
}
```

| <span data-ttu-id="a222e-258">Paraméter</span><span class="sxs-lookup"><span data-stu-id="a222e-258">Parameter</span></span> | <span data-ttu-id="a222e-259">Leírás</span><span class="sxs-lookup"><span data-stu-id="a222e-259">Description</span></span> |
| --- | --- |
| <span data-ttu-id="a222e-260">error</span><span class="sxs-lookup"><span data-stu-id="a222e-260">error</span></span> |<span data-ttu-id="a222e-261">Egy hiba kód karakterlánc jelentkező hibákról típusú besorolására használható.</span><span class="sxs-lookup"><span data-stu-id="a222e-261">An error code string that you can use to classify the types of errors that occur.</span></span> <span data-ttu-id="a222e-262">A karakterlánc hibák reagálni is használja.</span><span class="sxs-lookup"><span data-stu-id="a222e-262">You also can use the string to react to errors.</span></span> |
| <span data-ttu-id="a222e-263">error_description</span><span class="sxs-lookup"><span data-stu-id="a222e-263">error_description</span></span> |<span data-ttu-id="a222e-264">Egy adott hibaüzenet, melyek segíthetnek hitelesítési hiba okának azonosításához.</span><span class="sxs-lookup"><span data-stu-id="a222e-264">A specific error message that can help you identify the root cause of an authentication error.</span></span> |

## <a name="3-use-the-token"></a><span data-ttu-id="a222e-265">3. A jogkivonat</span><span class="sxs-lookup"><span data-stu-id="a222e-265">3. Use the token</span></span>
<span data-ttu-id="a222e-266">Most, hogy olyan hozzáférési jogkivonatot már sikeresen szerezte be, használhatja a token kérelmek számára a háttérben futó webes API-khoz azzal, hogy belefoglalja azt a a `Authorization` fejléc:</span><span class="sxs-lookup"><span data-stu-id="a222e-266">Now that you've successfully acquired an access token, you can use the token in requests to your back-end web APIs by including it in the `Authorization` header:</span></span>

```
GET /tasks
Host: https://mytaskwebapi.com
Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...
```

## <a name="4-refresh-the-token"></a><span data-ttu-id="a222e-267">4. A token frissítése</span><span class="sxs-lookup"><span data-stu-id="a222e-267">4. Refresh the token</span></span>
<span data-ttu-id="a222e-268">Hozzáférési jogkivonatok és azonosító-jogkivonatokat, amelyek rövid élettartamú.</span><span class="sxs-lookup"><span data-stu-id="a222e-268">Access tokens and ID tokens are short-lived.</span></span> <span data-ttu-id="a222e-269">Miután járnak, frissítenie kell a további erőforrások eléréséhez.</span><span class="sxs-lookup"><span data-stu-id="a222e-269">After they expire, you must refresh them to continue to access resources.</span></span> <span data-ttu-id="a222e-270">Ehhez az szükséges, küldje el a POST kérelmet egy másik a `/token` végpont.</span><span class="sxs-lookup"><span data-stu-id="a222e-270">To do this, submit another POST request to the `/token` endpoint.</span></span> <span data-ttu-id="a222e-271">Most, adja meg a `refresh_token` ahelyett, hogy a `code`:</span><span class="sxs-lookup"><span data-stu-id="a222e-271">This time, provide the `refresh_token` instead of the `code`:</span></span>

```
POST fabrikamb2c.onmicrosoft.com/oauth2/v2.0/token?p=b2c_1_sign_in HTTP/1.1
Host: https://login.microsoftonline.com
Content-Type: application/x-www-form-urlencoded

grant_type=refresh_token&client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access&refresh_token=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...&redirect_uri=urn:ietf:wg:oauth:2.0:oob
```

| <span data-ttu-id="a222e-272">Paraméter</span><span class="sxs-lookup"><span data-stu-id="a222e-272">Parameter</span></span> | <span data-ttu-id="a222e-273">Kötelező megadni?</span><span class="sxs-lookup"><span data-stu-id="a222e-273">Required?</span></span> | <span data-ttu-id="a222e-274">Leírás</span><span class="sxs-lookup"><span data-stu-id="a222e-274">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="a222e-275">P</span><span class="sxs-lookup"><span data-stu-id="a222e-275">p</span></span> |<span data-ttu-id="a222e-276">Szükséges</span><span class="sxs-lookup"><span data-stu-id="a222e-276">Required</span></span> |<span data-ttu-id="a222e-277">A házirendet, amely az eredeti frissítési jogkivonat használatával.</span><span class="sxs-lookup"><span data-stu-id="a222e-277">The policy that was used to acquire the original refresh token.</span></span> <span data-ttu-id="a222e-278">A kérelem nem használhatja másik szabályt.</span><span class="sxs-lookup"><span data-stu-id="a222e-278">You cannot use a different policy in this request.</span></span> <span data-ttu-id="a222e-279">Vegye figyelembe, hogy hozzáadta a paraméter a *lekérdezési karakterlánc*, és nem a FELADÁS egy vagy több szervezet.</span><span class="sxs-lookup"><span data-stu-id="a222e-279">Note that you add this parameter to the *query string*, not in the POST body.</span></span> |
| <span data-ttu-id="a222e-280">client_id</span><span class="sxs-lookup"><span data-stu-id="a222e-280">client_id</span></span> |<span data-ttu-id="a222e-281">Ajánlott</span><span class="sxs-lookup"><span data-stu-id="a222e-281">Recommended</span></span> |<span data-ttu-id="a222e-282">Az alkalmazást a hozzárendelt Alkalmazásazonosító a [Azure-portálon](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="a222e-282">The application ID assigned to your app in the [Azure portal](https://portal.azure.com).</span></span> |
| <span data-ttu-id="a222e-283">grant_type</span><span class="sxs-lookup"><span data-stu-id="a222e-283">grant_type</span></span> |<span data-ttu-id="a222e-284">Szükséges</span><span class="sxs-lookup"><span data-stu-id="a222e-284">Required</span></span> |<span data-ttu-id="a222e-285">A támogatás típusát.</span><span class="sxs-lookup"><span data-stu-id="a222e-285">The type of grant.</span></span> <span data-ttu-id="a222e-286">A hitelesítésikód-folyamata ezen szakasza az engedélytípus kell `refresh_token`.</span><span class="sxs-lookup"><span data-stu-id="a222e-286">For this leg of the authorization code flow, the grant type must be `refresh_token`.</span></span> |
| <span data-ttu-id="a222e-287">Hatókör</span><span class="sxs-lookup"><span data-stu-id="a222e-287">scope</span></span> |<span data-ttu-id="a222e-288">Ajánlott</span><span class="sxs-lookup"><span data-stu-id="a222e-288">Recommended</span></span> |<span data-ttu-id="a222e-289">Hatókörök szóközökkel elválasztott listája.</span><span class="sxs-lookup"><span data-stu-id="a222e-289">A space-separated list of scopes.</span></span> <span data-ttu-id="a222e-290">Egy hatókör érték azt jelzi, az Azure AD mindkét kérnek engedély.</span><span class="sxs-lookup"><span data-stu-id="a222e-290">A single scope value indicates to Azure AD both of the permissions that are being requested.</span></span> <span data-ttu-id="a222e-291">Használja az ügyfél-azonosító, a hatókör, az azt jelzi, hogy az alkalmazás egy hozzáférési jogkivonatot, amely használható a saját szolgáltatás vagy webes API-t kell-e, képviseli az azonos ügyfél-azonosítót.</span><span class="sxs-lookup"><span data-stu-id="a222e-291">Using the client ID as the scope indicates that your app needs an access token that can be used against your own service or web API, represented by the same client ID.</span></span>  <span data-ttu-id="a222e-292">A `offline_access` hatókör azt jelzi, hogy az alkalmazás egy frissítési jogkivonat kell hosszú élettartamú erőforrások elérése érdekében.</span><span class="sxs-lookup"><span data-stu-id="a222e-292">The `offline_access` scope indicates that your app will need a refresh token for long-lived access to resources.</span></span>  <span data-ttu-id="a222e-293">Is használhatja a `openid` egy azonosító jogkivonatot kérhet az Azure AD B2C hatókör.</span><span class="sxs-lookup"><span data-stu-id="a222e-293">You also can use the `openid` scope to request an ID token from Azure AD B2C.</span></span> |
| <span data-ttu-id="a222e-294">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="a222e-294">redirect_uri</span></span> |<span data-ttu-id="a222e-295">Optional</span><span class="sxs-lookup"><span data-stu-id="a222e-295">Optional</span></span> |<span data-ttu-id="a222e-296">Az átirányítási URI-t, az alkalmazás, ahol kapott engedélyezési kódot.</span><span class="sxs-lookup"><span data-stu-id="a222e-296">The redirect URI of the application where you received the authorization code.</span></span> |
| <span data-ttu-id="a222e-297">refresh_token</span><span class="sxs-lookup"><span data-stu-id="a222e-297">refresh_token</span></span> |<span data-ttu-id="a222e-298">Szükséges</span><span class="sxs-lookup"><span data-stu-id="a222e-298">Required</span></span> |<span data-ttu-id="a222e-299">Az eredeti frissítési jogkivonat a folyamat második szakasza beszerzett.</span><span class="sxs-lookup"><span data-stu-id="a222e-299">The original refresh token that you acquired in the second leg of the flow.</span></span> |

<span data-ttu-id="a222e-300">A sikeres token válasz így néz ki:</span><span class="sxs-lookup"><span data-stu-id="a222e-300">A successful token response looks like this:</span></span>

```
{
    "not_before": "1442340812",
    "token_type": "Bearer",
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...",
    "scope": "90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access",
    "expires_in": "3600",
    "refresh_token": "AAQfQmvuDy8WtUv-sd0TBwWVQs1rC-Lfxa_NDkLqpg50Cxp5Dxj0VPF1mx2Z...",
}
```
| <span data-ttu-id="a222e-301">Paraméter</span><span class="sxs-lookup"><span data-stu-id="a222e-301">Parameter</span></span> | <span data-ttu-id="a222e-302">Leírás</span><span class="sxs-lookup"><span data-stu-id="a222e-302">Description</span></span> |
| --- | --- |
| <span data-ttu-id="a222e-303">not_before</span><span class="sxs-lookup"><span data-stu-id="a222e-303">not_before</span></span> |<span data-ttu-id="a222e-304">Az az idő, amelynél a jogkivonat érvényes, időbeli kortartományon.</span><span class="sxs-lookup"><span data-stu-id="a222e-304">The time at which the token is considered valid, in epoch time.</span></span> |
| <span data-ttu-id="a222e-305">token_type</span><span class="sxs-lookup"><span data-stu-id="a222e-305">token_type</span></span> |<span data-ttu-id="a222e-306">A jogkivonat típusa érték.</span><span class="sxs-lookup"><span data-stu-id="a222e-306">The token type value.</span></span> <span data-ttu-id="a222e-307">A csak az Azure AD támogató típus tulajdonosi.</span><span class="sxs-lookup"><span data-stu-id="a222e-307">The only type that Azure AD supports is Bearer.</span></span> |
| <span data-ttu-id="a222e-308">access_token</span><span class="sxs-lookup"><span data-stu-id="a222e-308">access_token</span></span> |<span data-ttu-id="a222e-309">Az aláírt jwt-t az Ön által kért.</span><span class="sxs-lookup"><span data-stu-id="a222e-309">The signed JWT that you requested.</span></span> |
| <span data-ttu-id="a222e-310">Hatókör</span><span class="sxs-lookup"><span data-stu-id="a222e-310">scope</span></span> |<span data-ttu-id="a222e-311">A hatókörök, amely a token érvényes.</span><span class="sxs-lookup"><span data-stu-id="a222e-311">The scopes that the token is valid for.</span></span> <span data-ttu-id="a222e-312">Is használhatja a szerepet, amelyet a gyorsítótár jogkivonatok későbbi használatra.</span><span class="sxs-lookup"><span data-stu-id="a222e-312">You also can use the scopes to cache tokens for later use.</span></span> |
| <span data-ttu-id="a222e-313">expires_in</span><span class="sxs-lookup"><span data-stu-id="a222e-313">expires_in</span></span> |<span data-ttu-id="a222e-314">Mennyi ideig, amely a token érvényes (másodpercben).</span><span class="sxs-lookup"><span data-stu-id="a222e-314">The length of time that the token is valid (in seconds).</span></span> |
| <span data-ttu-id="a222e-315">refresh_token</span><span class="sxs-lookup"><span data-stu-id="a222e-315">refresh_token</span></span> |<span data-ttu-id="a222e-316">Az OAuth 2.0-s frissítési jogkivonat.</span><span class="sxs-lookup"><span data-stu-id="a222e-316">An OAuth 2.0 refresh token.</span></span> <span data-ttu-id="a222e-317">Az alkalmazás a jogkivonat segítségével szerezzen be további jogkivonatok a jelenlegi jogkivonat lejárata után is.</span><span class="sxs-lookup"><span data-stu-id="a222e-317">The app can use this token to acquire additional tokens after the current token expires.</span></span> <span data-ttu-id="a222e-318">Frissítési jogkivonatok hosszú élettartamú, és erőforrásokhoz való hozzáférés megőrzése huzamosabb ideig használható.</span><span class="sxs-lookup"><span data-stu-id="a222e-318">Refresh tokens are long-lived, and can be used to retain access to resources for extended periods of time.</span></span> <span data-ttu-id="a222e-319">További információkért lásd: a [Azure AD B2C-jogkivonatok referenciájából](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="a222e-319">For more information, see the [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> |

<span data-ttu-id="a222e-320">Hibaválaszok néznek ki:</span><span class="sxs-lookup"><span data-stu-id="a222e-320">Error responses look like this:</span></span>

```
{
    "error": "access_denied",
    "error_description": "The user revoked access to the app.",
}
```

| <span data-ttu-id="a222e-321">Paraméter</span><span class="sxs-lookup"><span data-stu-id="a222e-321">Parameter</span></span> | <span data-ttu-id="a222e-322">Leírás</span><span class="sxs-lookup"><span data-stu-id="a222e-322">Description</span></span> |
| --- | --- |
| <span data-ttu-id="a222e-323">error</span><span class="sxs-lookup"><span data-stu-id="a222e-323">error</span></span> |<span data-ttu-id="a222e-324">Egy hiba kód karakterlánc típusú előforduló hibák besorolására használható.</span><span class="sxs-lookup"><span data-stu-id="a222e-324">An error code string that you can use to classify types of errors that occur.</span></span> <span data-ttu-id="a222e-325">A karakterlánc hibák reagálni is használja.</span><span class="sxs-lookup"><span data-stu-id="a222e-325">You also can use the string to react to errors.</span></span> |
| <span data-ttu-id="a222e-326">error_description</span><span class="sxs-lookup"><span data-stu-id="a222e-326">error_description</span></span> |<span data-ttu-id="a222e-327">Egy adott hibaüzenet, melyek segíthetnek hitelesítési hiba okának azonosításához.</span><span class="sxs-lookup"><span data-stu-id="a222e-327">A specific error message that can help you identify the root cause of an authentication error.</span></span> |

## <a name="use-your-own-azure-ad-b2c-directory"></a><span data-ttu-id="a222e-328">Használja a saját Azure AD B2C-címtár</span><span class="sxs-lookup"><span data-stu-id="a222e-328">Use your own Azure AD B2C directory</span></span>
<span data-ttu-id="a222e-329">Próbálja meg ezek a kérelmek saját magának, végezze el a következő lépéseket.</span><span class="sxs-lookup"><span data-stu-id="a222e-329">To try these requests yourself, complete the following steps.</span></span> <span data-ttu-id="a222e-330">Cserélje a példaértékeket a saját értékekkel cikkben használtuk.</span><span class="sxs-lookup"><span data-stu-id="a222e-330">Replace the example values we used in this article with your own values.</span></span>

1. <span data-ttu-id="a222e-331">[Az Azure AD B2C címtár létrehozása](active-directory-b2c-get-started.md).</span><span class="sxs-lookup"><span data-stu-id="a222e-331">[Create an Azure AD B2C directory](active-directory-b2c-get-started.md).</span></span> <span data-ttu-id="a222e-332">Annak a könyvtárnak a nevét használja a kérelmeket.</span><span class="sxs-lookup"><span data-stu-id="a222e-332">Use the name of your directory in the requests.</span></span>
2. <span data-ttu-id="a222e-333">[Hozzon létre egy alkalmazást](active-directory-b2c-app-registration.md) a Azonosítóját és egy átirányítási URI-t.</span><span class="sxs-lookup"><span data-stu-id="a222e-333">[Create an application](active-directory-b2c-app-registration.md) to obtain an application ID and a redirect URI.</span></span> <span data-ttu-id="a222e-334">Egy natív ügyfél tartalmazza az alkalmazásban.</span><span class="sxs-lookup"><span data-stu-id="a222e-334">Include a native client in your app.</span></span>
3. <span data-ttu-id="a222e-335">[A házirendek létrehozása](active-directory-b2c-reference-policies.md) beszerzése a házirend nevét.</span><span class="sxs-lookup"><span data-stu-id="a222e-335">[Create your policies](active-directory-b2c-reference-policies.md) to obtain your policy names.</span></span>

