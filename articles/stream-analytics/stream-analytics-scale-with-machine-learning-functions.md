---
title: "az Azure Stream Analytics & AzureML functions méretezése aaaJob |} Microsoft Docs"
description: "Ismerje meg, hogyan tooproperly méretezni a Stream Analytics-feladatok (particionálás, SU mennyiség és egyebek) használata az Azure Machine Learning funkciók."
keywords: 
documentationcenter: 
services: stream-analytics
author: jeffstokes72
manager: jhubbard
editor: cgronlun
ms.assetid: 47ce7c5e-1de1-41ca-9a26-b5ecce814743
ms.service: stream-analytics
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-services
ms.date: 03/28/2017
ms.author: jeffstok
ms.openlocfilehash: 3fbdfaf7e8e86896c56f1d18bbde3a10bd3dca04
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/06/2017
---
# <a name="scale-your-stream-analytics-job-with-azure-machine-learning-functions"></a><span data-ttu-id="9e0bb-103">A Stream Analytics-feladat az Azure Machine Learning functions méretezése</span><span class="sxs-lookup"><span data-stu-id="9e0bb-103">Scale your Stream Analytics job with Azure Machine Learning functions</span></span>
<span data-ttu-id="9e0bb-104">Gyakran egyszerűen tooset fel egy Stream Analytics-feladat, és néhány adatot végigfuttatása.</span><span class="sxs-lookup"><span data-stu-id="9e0bb-104">It is often quite easy tooset up an Stream Analytics job and run some sample data through it.</span></span> <span data-ttu-id="9e0bb-105">Mit kell végezzük amikor toorun hello azonos feladat magasabb adatkötettel fut?</span><span class="sxs-lookup"><span data-stu-id="9e0bb-105">What should we do when we need toorun hello same job with higher data volume?</span></span> <span data-ttu-id="9e0bb-106">Hogyan tooconfigure hello Stream Analytics feladat, hogy azt lehessen méretezni toounderstand igényel velünk.</span><span class="sxs-lookup"><span data-stu-id="9e0bb-106">It requires us toounderstand how tooconfigure hello Stream Analytics job so that it will scale.</span></span> <span data-ttu-id="9e0bb-107">Ebben a dokumentumban tárgyaljuk hello különleges szempontjait méretezési Stream Analytics a Machine Learning funkciók feladatok.</span><span class="sxs-lookup"><span data-stu-id="9e0bb-107">In this document, we will focus on hello special aspects of scaling Stream Analytics jobs with Machine Learning functions.</span></span> <span data-ttu-id="9e0bb-108">Hogyan tooscale Stream Analytics-feladatok általában: hello cikk tájékoztatást [feladatok skálázás](stream-analytics-scale-jobs.md).</span><span class="sxs-lookup"><span data-stu-id="9e0bb-108">For information on how tooscale Stream Analytics jobs in general see hello article [Scaling jobs](stream-analytics-scale-jobs.md).</span></span>

## <a name="what-is-an-azure-machine-learning-function-in-stream-analytics"></a><span data-ttu-id="9e0bb-109">Mi az az Azure Machine Learning függvény a Stream Analytics?</span><span class="sxs-lookup"><span data-stu-id="9e0bb-109">What is an Azure Machine Learning function in Stream Analytics?</span></span>
<span data-ttu-id="9e0bb-110">A Stream Analytics a Machine Learning függvény használható például a Stream Analytics lekérdezési nyelv hello rendszeres függvényhívás.</span><span class="sxs-lookup"><span data-stu-id="9e0bb-110">A Machine Learning function in Stream Analytics can be used like a regular function call in hello Stream Analytics query language.</span></span> <span data-ttu-id="9e0bb-111">Mögött hello helyszín, azonban a hello függvényhívások nem ténylegesen az Azure Machine Learning webszolgáltatás-kérelmeket.</span><span class="sxs-lookup"><span data-stu-id="9e0bb-111">However, behind hello scene, hello function calls are actually Azure Machine Learning Web Service requests.</span></span> <span data-ttu-id="9e0bb-112">Machine Learning web szolgáltatások támogatási "kötegelés" több sort minimális kötegelt nevezzük, a hello azonos a webes API-hívás, tooimprove teljes teljesítményt.</span><span class="sxs-lookup"><span data-stu-id="9e0bb-112">Machine Learning web services support “batching” multiple rows, which is called mini-batch, in hello same web service API call, tooimprove overall throughput.</span></span> <span data-ttu-id="9e0bb-113">Tekintse meg a következő cikkekben olvashat; hello [Azure Machine Learning funkciók a Stream Analytics](https://blogs.technet.microsoft.com/machinelearning/2015/12/10/azure-ml-now-available-as-a-function-in-azure-stream-analytics/) és [Azure Machine Learning webszolgáltatások](../machine-learning/machine-learning-consume-web-services.md).</span><span class="sxs-lookup"><span data-stu-id="9e0bb-113">Please see hello following articles for more details; [Azure Machine Learning functions in Stream Analytics](https://blogs.technet.microsoft.com/machinelearning/2015/12/10/azure-ml-now-available-as-a-function-in-azure-stream-analytics/) and [Azure Machine Learning Web Services](../machine-learning/machine-learning-consume-web-services.md).</span></span>

## <a name="configure-a-stream-analytics-job-with-machine-learning-functions"></a><span data-ttu-id="9e0bb-114">A Stream Analytics-feladat Machine Learning funkciók konfigurálása</span><span class="sxs-lookup"><span data-stu-id="9e0bb-114">Configure a Stream Analytics job with Machine Learning functions</span></span>
<span data-ttu-id="9e0bb-115">A gépi tanulás funkció Stream Analytics-feladat konfigurálásakor nincsenek két paraméterek tooconsider, hello Machine Learning függvényhívások és adatfolyam-egységek (SUs) hello Stream Analytics-feladathoz kiosztott hello hello kötegmérete.</span><span class="sxs-lookup"><span data-stu-id="9e0bb-115">When configuring a Machine Learning function for Stream Analytics job, there are two parameters tooconsider, hello batch size of hello Machine Learning function calls, and hello streaming units (SUs) provisioned for hello Stream Analytics job.</span></span> <span data-ttu-id="9e0bb-116">toodetermine hello megfelelő értékeket ezeket, először egy kell döntést közötti késleltetés és a teljesítményt, ez azt jelenti, hogy hello Stream Analytics-feladat késését, és minden SU átviteli sebességgel.</span><span class="sxs-lookup"><span data-stu-id="9e0bb-116">toodetermine hello appropriate values for these, first a decision must be made between latency and throughput, that is, latency of hello Stream Analytics job, and throughput of each SU.</span></span> <span data-ttu-id="9e0bb-117">SUS-t mindig vehetők tooa feladat tooincrease átviteli jól particionált Stream Analytics-lekérdezés, noha a további SUs növeli a futó hello feladat hello költségét.</span><span class="sxs-lookup"><span data-stu-id="9e0bb-117">SUs may always be added tooa job tooincrease throughput of a well partitioned Stream Analytics query, although additional SUs increases hello cost of running hello job.</span></span>

<span data-ttu-id="9e0bb-118">Ezért ez azért fontos toodetermine hello *tolerancia* késés a Stream Analytics-feladat futtatása.</span><span class="sxs-lookup"><span data-stu-id="9e0bb-118">Therefore it is important toodetermine hello *tolerance* of latency in running a Stream Analytics job.</span></span> <span data-ttu-id="9e0bb-119">Az Azure Machine Learning szolgáltatáskérések futtatásával további késés természetes növeli a kötegelt méretet, amelyet a rendszer összetett hello Stream Analytics-feladat hello késését.</span><span class="sxs-lookup"><span data-stu-id="9e0bb-119">Additional latency from running Azure Machine Learning service requests will naturally increase with batch size, which will compound hello latency of hello Stream Analytics job.</span></span> <span data-ttu-id="9e0bb-120">Hello a köteg méretének növelését, ugyanakkor a Stream Analytics-feladat tooprocess hello lehetővé teszi, hogy * hello további események *ugyanannyi* a Machine Learning webszolgáltatás a szolgáltatáskéréseket.</span><span class="sxs-lookup"><span data-stu-id="9e0bb-120">On hello other hand, increasing batch size allows hello Stream Analytics job tooprocess *more events with hello *same number* of Machine Learning web service requests.</span></span> <span data-ttu-id="9e0bb-121">Gyakran hello Machine Learning web service késés növekedése a köteg méretének növekedése részterv lineáris toohello, ezért fontos tooconsider hello leginkább költséghatékony kötegméret bármely adott helyzetben a Machine Learning webszolgáltatáshoz.</span><span class="sxs-lookup"><span data-stu-id="9e0bb-121">Often hello increase of Machine Learning web service latency is sub-linear toohello increase of batch size so it is important tooconsider hello most cost-efficient batch size for a Machine Learning web service in any given situation.</span></span> <span data-ttu-id="9e0bb-122">hello alapértelmezett kötegméret hello webszolgáltatás kérelmek 1000, előfordulhat, hogy módosítható hello használva [Stream Analytics REST API](https://msdn.microsoft.com/library/mt653706.aspx "Stream Analytics REST API") vagy hello [PowerShell ügyfél a Stream Analytics](stream-analytics-monitor-and-manage-jobs-use-powershell.md "Stream Analytics-ügyfél PowerShell").</span><span class="sxs-lookup"><span data-stu-id="9e0bb-122">hello default batch size for hello web service requests is 1000 and may be modified either by using hello [Stream Analytics REST API](https://msdn.microsoft.com/library/mt653706.aspx "Stream Analytics REST API") or hello [PowerShell client for Stream Analytics](stream-analytics-monitor-and-manage-jobs-use-powershell.md "PowerShell client for Stream Analytics").</span></span>

<span data-ttu-id="9e0bb-123">A Köteg mérete meghatározása után hello mennyisége adatfolyam-egységek (SUs) meghatározható, hello száma alapján események, hogy a hello függvény másodpercenként tooprocess kell.</span><span class="sxs-lookup"><span data-stu-id="9e0bb-123">Once a batch size has been determined, hello amount of streaming units (SUs) can be determined, based on hello number of events that hello function needs tooprocess per second.</span></span> <span data-ttu-id="9e0bb-124">További információ az adatfolyam-egységek: [Stream Analytics feladatok méretezése](stream-analytics-scale-jobs.md).</span><span class="sxs-lookup"><span data-stu-id="9e0bb-124">For more information about streaming units, see [Stream Analytics scale jobs](stream-analytics-scale-jobs.md).</span></span>

<span data-ttu-id="9e0bb-125">Általánosságban nincsenek 20 egyidejű kapcsolatok toohello Machine Learning webszolgáltatáshoz tartozó minden 6 SUS-t, azzal a különbséggel, hogy 1 SU feladatok és a 3 SU feladat kap 20 egyidejű kapcsolatok is.</span><span class="sxs-lookup"><span data-stu-id="9e0bb-125">In general, there are 20 concurrent connections toohello Machine Learning web service for every 6 SUs, except that 1 SU jobs and 3 SU jobs will get 20 concurrent connections also.</span></span>  <span data-ttu-id="9e0bb-126">Például ha hello bemeneti adatok sebessége 200 000 események másodpercenkénti és hello kötegméret marad a 1000 hello eredményül kapott web service késés 1000 események minimális kötegelt toohello alapértelmezett érték 200 MS-os.</span><span class="sxs-lookup"><span data-stu-id="9e0bb-126">For example, if hello input data rate is 200,000 events per second and hello batch size is left toohello default of 1000 hello resulting web service latency with 1000 events mini-batch is 200ms.</span></span> <span data-ttu-id="9e0bb-127">Ez azt jelenti, hogy minden kapcsolat tehet 5 kérelmek toohello Machine Learning webszolgáltatás egy másik.</span><span class="sxs-lookup"><span data-stu-id="9e0bb-127">This means every connection can make 5 requests toohello Machine Learning web service in a second.</span></span> <span data-ttu-id="9e0bb-128">20 kapcsolatok hello Stream Analytics-feladat feldolgozhatja a 20 000 a 200 MS-OS és ezért 100 000 események másodpercenként.</span><span class="sxs-lookup"><span data-stu-id="9e0bb-128">With 20 connections, hello Stream Analytics job can process 20,000 events in 200ms  and therefore 100,000 events in a second.</span></span> <span data-ttu-id="9e0bb-129">Ezért tooprocess 200 000 események másodpercenkénti, hello Stream Analytics-feladatban kell 40 egyidejű kapcsolatok, too12 SUS-t, amely.</span><span class="sxs-lookup"><span data-stu-id="9e0bb-129">So tooprocess 200,000 events per second, hello Stream Analytics job needs 40 concurrent connections, which comes out too12 SUs.</span></span> <span data-ttu-id="9e0bb-130">az alábbi hello diagram azt ábrázolja, hello kérelmeinek hello Stream Analytics feladat toohello Machine Learning webszolgáltatás végpontja – 6 SUS-t minden maximális 20 egyidejű kapcsolatok tooMachine tanulás webszolgáltatás rendelkezik.</span><span class="sxs-lookup"><span data-stu-id="9e0bb-130">hello diagram below illustrates hello requests from hello Stream Analytics job toohello Machine Learning web service endpoint – Every 6 SUs has 20 concurrent connections tooMachine Learning web service at max.</span></span>

<span data-ttu-id="9e0bb-131">![A Stream Analytics méretezése a Machine Learning funkciók 2 feladat példa](./media/stream-analytics-scale-with-ml-functions/stream-analytics-scale-with-ml-functions-00.png "méretezési Stream Analytics a Machine Learning funkciók 2 feladat példa")</span><span class="sxs-lookup"><span data-stu-id="9e0bb-131">![Scale Stream Analytics with Machine Learning Functions 2 job example](./media/stream-analytics-scale-with-ml-functions/stream-analytics-scale-with-ml-functions-00.png "Scale Stream Analytics with Machine Learning Functions 2 job example")</span></span>

<span data-ttu-id="9e0bb-132">Általában ***B*** a Köteg mérete ***L*** hello webes szolgáltatás várakozási kötegméret B ezredmásodpercben, a hello egy Stream Analytics-feladat az átviteli ***N*** SUs van:</span><span class="sxs-lookup"><span data-stu-id="9e0bb-132">In general, ***B*** for batch size, ***L*** for hello web service latency at batch size B in milliseconds, hello throughput of an Stream Analytics job with ***N*** SUs is:</span></span>

<span data-ttu-id="9e0bb-133">![A Stream Analytics a Machine Learning funkciók képlet méretezni](./media/stream-analytics-scale-with-ml-functions/stream-analytics-scale-with-ml-functions-02.png "Stream Analytics a Machine Learning funkciók képlet méretezni")</span><span class="sxs-lookup"><span data-stu-id="9e0bb-133">![Scale Stream Analytics with Machine Learning Functions Formula](./media/stream-analytics-scale-with-ml-functions/stream-analytics-scale-with-ml-functions-02.png "Scale Stream Analytics with Machine Learning Functions Formula")</span></span>

<span data-ttu-id="9e0bb-134">Lehet, hogy egy további figyelembe hello "maximális egyidejű hívások" hello Machine Learning web service ügyféloldali, javasoljuk tooset a toohello maximális értéket (jelenleg 200).</span><span class="sxs-lookup"><span data-stu-id="9e0bb-134">An additional consideration may be hello 'max concurrent calls' on hello Machine Learning web service side, it’s recommended tooset this toohello maximum value (200 currently).</span></span>

<span data-ttu-id="9e0bb-135">Ez a beállítás további tájékoztatást lásd hello [méretezés a cikk a Machine Learning webszolgáltatások](../machine-learning/machine-learning-scaling-webservice.md).</span><span class="sxs-lookup"><span data-stu-id="9e0bb-135">For more information on this setting please review hello [Scaling article for Machine Learning Web Services](../machine-learning/machine-learning-scaling-webservice.md).</span></span>

## <a name="example--sentiment-analysis"></a><span data-ttu-id="9e0bb-136">Példa – véleményeket elemzés</span><span class="sxs-lookup"><span data-stu-id="9e0bb-136">Example – Sentiment Analysis</span></span>
<span data-ttu-id="9e0bb-137">hello alábbi példa tartalmazza a Stream Analytics-feladat hello véleményeket elemzés gépi tanulás funkció, a hello leírtak [Stream Analytics Machine Learning integrációs oktatóanyag](stream-analytics-machine-learning-integration-tutorial.md).</span><span class="sxs-lookup"><span data-stu-id="9e0bb-137">hello following example includes a Stream Analytics job with hello sentiment analysis Machine Learning function, as described in hello [Stream Analytics Machine Learning integration tutorial](stream-analytics-machine-learning-integration-tutorial.md).</span></span>

<span data-ttu-id="9e0bb-138">hello Ez egy egyszerű teljesen particionált lekérdezés hello követ **véleményeket** működik, a lent látható módon:</span><span class="sxs-lookup"><span data-stu-id="9e0bb-138">hello query is a simple fully partitioned query followed by hello **sentiment** function, as shown below:</span></span>

    WITH subquery AS (
        SELECT text, sentiment(text) as result from input
    )

    Select text, result.[Score]
    Into output
    From subquery

<span data-ttu-id="9e0bb-139">Vegye figyelembe a következő forgatókönyv; hello 10 000 Twitter-üzenetek / s átviteli sebességgel a Stream Analytics-feladatban kell létrehozni tooperform véleményeket elemzése hello Twitter-üzeneteket (esemény).</span><span class="sxs-lookup"><span data-stu-id="9e0bb-139">Consider hello following scenario; with a throughput of 10,000 tweets per second a Stream Analytics job must be created tooperform sentiment analysis of hello tweets (events).</span></span> <span data-ttu-id="9e0bb-140">1 SU használ, a Stream Analytics-feladat lehet képes toohandle hello forgalom?</span><span class="sxs-lookup"><span data-stu-id="9e0bb-140">Using 1 SU, could this Stream Analytics job be able toohandle hello traffic?</span></span> <span data-ttu-id="9e0bb-141">Hello alapértelmezett kötegmérete 1000 hello feladat meg kell tudni tookeep mentése hello bevitellel.</span><span class="sxs-lookup"><span data-stu-id="9e0bb-141">Using hello default batch size of 1000 hello job should be able tookeep up with hello input.</span></span> <span data-ttu-id="9e0bb-142">További hello hozzáadni a Machine Learning-függvény legfeljebb egy második, a késés, amely hello általános alapértelmezett késés hello véleményeket elemzési Machine Learning webszolgáltatásba (az alapértelmezett kötegméret 1000) kell létrehozni.</span><span class="sxs-lookup"><span data-stu-id="9e0bb-142">Further hello added Machine Learning function should generate no more than a second of latency, which is hello general default latency of hello sentiment analysis Machine Learning web service (with a default batch size of 1000).</span></span> <span data-ttu-id="9e0bb-143">hello Stream Analytics feladat **általános** vagy végpontok közötti késés állna néhány másodpercig.</span><span class="sxs-lookup"><span data-stu-id="9e0bb-143">hello Stream Analytics job’s **overall** or end-to-end latency would typically be a few seconds.</span></span> <span data-ttu-id="9e0bb-144">További részletes tekintse meg azokat a Stream Analytics-feladat *különösen* Machine Learning függvényhívások hello.</span><span class="sxs-lookup"><span data-stu-id="9e0bb-144">Take a more detailed look into this Stream Analytics job, *especially* hello Machine Learning function calls.</span></span> <span data-ttu-id="9e0bb-145">Hello kötegméret 1000, amelynek, 10 000 események átviteli lépnek körülbelül 10 kérelmek tooweb szolgáltatás.</span><span class="sxs-lookup"><span data-stu-id="9e0bb-145">Having hello batch size as 1000, a throughput of 10,000 events will take about 10 requests tooweb service.</span></span> <span data-ttu-id="9e0bb-146">Még a 1 SU esetén elegendő létesített egyidejű kapcsolatok tooaccommodate ebben a bemeneti forgalmat.</span><span class="sxs-lookup"><span data-stu-id="9e0bb-146">Even with 1 SU, there are enough concurrent connections tooaccommodate this input traffic.</span></span>

<span data-ttu-id="9e0bb-147">De mi történik, ha hello bemeneti események gyakorisága növekszik 100 x, és most hello Stream Analytics-feladatban kell tooprocess 1 000 000 Twitter-üzenetek / másodperc?</span><span class="sxs-lookup"><span data-stu-id="9e0bb-147">But what if hello input event rate increases by 100x and now hello Stream Analytics job needs tooprocess 1,000,000 tweets per second?</span></span> <span data-ttu-id="9e0bb-148">Két lehetőség áll rendelkezésre:</span><span class="sxs-lookup"><span data-stu-id="9e0bb-148">There are two options:</span></span>

1. <span data-ttu-id="9e0bb-149">Növelje a köteg méretének hello, vagy</span><span class="sxs-lookup"><span data-stu-id="9e0bb-149">Increase hello batch size, or</span></span>
2. <span data-ttu-id="9e0bb-150">Partíció hello bemeneti adatfolyam tooprocess hello események párhuzamosan</span><span class="sxs-lookup"><span data-stu-id="9e0bb-150">Partition hello input stream tooprocess hello events in parallel</span></span>

<span data-ttu-id="9e0bb-151">Hello hello első beállítást, a feladat **késés** növeli.</span><span class="sxs-lookup"><span data-stu-id="9e0bb-151">With hello first option, hello job **latency** will increase.</span></span>

<span data-ttu-id="9e0bb-152">Hello második lehetőség több SUs ehhez kiépített toobe kell, és ezért a Machine Learning web service több egyidejű kérelmet létrehozni.</span><span class="sxs-lookup"><span data-stu-id="9e0bb-152">With hello second option, more SUs would need toobe provisioned and therefore generate more concurrent Machine Learning web service requests.</span></span> <span data-ttu-id="9e0bb-153">Ez azt jelenti, hogy a hello feladat **költség** növeli.</span><span class="sxs-lookup"><span data-stu-id="9e0bb-153">This means hello job **cost** will increase.</span></span>

<span data-ttu-id="9e0bb-154">Feltételezik hello késés hello véleményeket elemzési Machine Learning webszolgáltatásba 200 MS-os 1000-esemény kötegek, vagy az alábbi 250ms 5000-esemény kötegek, 10 000-esemény kötegek 300ms vagy 500ms 25 000-esemény kötegek.</span><span class="sxs-lookup"><span data-stu-id="9e0bb-154">Assume hello latency of hello sentiment analysis Machine Learning web service is 200ms for 1000-event batches or below, 250ms for 5,000-event batches, 300ms for 10,000-event batches or 500ms for 25,000-event batches.</span></span>

1. <span data-ttu-id="9e0bb-155">Hello első lehetőséggel, (**nem** több SUs kiépítése), hello köteg mérete túl növekedhet**25 000**.</span><span class="sxs-lookup"><span data-stu-id="9e0bb-155">Using hello first option, (**not** provisioning more SUs), hello batch size could be increased too**25,000**.</span></span> <span data-ttu-id="9e0bb-156">Ez pedig lehetővé teszi hello feladat tooprocess 20 egyidejű kapcsolatok toohello Machine Learning webszolgáltatásba 1 000 000 eseményeket (hívás / 500ms késéssel).</span><span class="sxs-lookup"><span data-stu-id="9e0bb-156">This in turn would allow hello job tooprocess 1,000,000 events with 20 concurrent connections toohello Machine Learning web service (with a latency of 500ms per call).</span></span> <span data-ttu-id="9e0bb-157">Ezért hello hello Stream Analytics-feladat toohello véleményeket függvény kérelmek elleni hello a webszolgáltatási kérelmeket kell emelni a Machine Learning miatt további késését **200 MS-os** túl**500ms**.</span><span class="sxs-lookup"><span data-stu-id="9e0bb-157">So hello additional latency of hello Stream Analytics job due toohello sentiment function requests against hello Machine Learning web service requests would be increased from **200ms** too**500ms**.</span></span> <span data-ttu-id="9e0bb-158">Azonban ügyeljen arra, hogy a köteg méretének **nem** végtelenül növelhető, mivel hello Machine Learning webszolgáltatások hello terhelés méretének egy kérelem 4 MB vagy kisebb webes szolgáltatás kérelmek időtúllépési művelet 100 másodperc múlva.</span><span class="sxs-lookup"><span data-stu-id="9e0bb-158">However, note that batch size **cannot** be increased infinitely as hello Machine Learning web services requires hello payload size of a request be 4MB or smaller web service requests timeout after 100 seconds of operation.</span></span>
2. <span data-ttu-id="9e0bb-159">Hello második beállításának használata esetén hello kötegméret marad, 1000, és 200 MS-os web service késésű, minden 20 egyidejű kapcsolatok toohello webszolgáltatás lenne képes tooprocess 1000 * 20 * 5 események másodpercenkénti 100 000 =.</span><span class="sxs-lookup"><span data-stu-id="9e0bb-159">Using hello second option, hello batch size is left at 1000, with 200ms web service latency, every 20 concurrent connections toohello web service would be able tooprocess 1000 * 20 * 5 events = 100,000 per second.</span></span> <span data-ttu-id="9e0bb-160">Ezért egy második, hello feladat tooprocess 1 000 000 események 60 SUs lenne szükség.</span><span class="sxs-lookup"><span data-stu-id="9e0bb-160">So tooprocess 1,000,000 events per second, hello job would need 60 SUs.</span></span> <span data-ttu-id="9e0bb-161">Összehasonlított toohello első lehetőség, a Stream Analytics-feladat lenne több webalkalmazás-szolgáltatás kötegelt kérelmekben, viszont egy magasabb költsége előállítása érdekében.</span><span class="sxs-lookup"><span data-stu-id="9e0bb-161">Compared toohello first option, Stream Analytics job would make more web service batch requests, in turn generating an increased cost.</span></span>

<span data-ttu-id="9e0bb-162">Az alábbiakban a táblát, hello átviteli sebességgel hello Stream Analytics-feladat van különböző SUS-t és a Köteg mérete (az események másodpercenkénti számát).</span><span class="sxs-lookup"><span data-stu-id="9e0bb-162">Below is a table for hello throughput of hello Stream Analytics job for different SUs and batch sizes (in number of events per second).</span></span>

| <span data-ttu-id="9e0bb-163">Köteg mérete (a gépi tanulás összetevő várakozási ideje)</span><span class="sxs-lookup"><span data-stu-id="9e0bb-163">batch size (ML latency)</span></span> | <span data-ttu-id="9e0bb-164">500 (200 MS-OS)</span><span class="sxs-lookup"><span data-stu-id="9e0bb-164">500 (200ms)</span></span> | <span data-ttu-id="9e0bb-165">1000 (200 MS-OS)</span><span class="sxs-lookup"><span data-stu-id="9e0bb-165">1,000 (200ms)</span></span> | <span data-ttu-id="9e0bb-166">5000 (250ms)</span><span class="sxs-lookup"><span data-stu-id="9e0bb-166">5,000 (250ms)</span></span> | <span data-ttu-id="9e0bb-167">10 000-re (300ms)</span><span class="sxs-lookup"><span data-stu-id="9e0bb-167">10,000 (300ms)</span></span> | <span data-ttu-id="9e0bb-168">25 000 (500ms)</span><span class="sxs-lookup"><span data-stu-id="9e0bb-168">25,000 (500ms)</span></span> |
| --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="9e0bb-169">**1 SU**</span><span class="sxs-lookup"><span data-stu-id="9e0bb-169">**1 SU**</span></span> |<span data-ttu-id="9e0bb-170">2,500</span><span class="sxs-lookup"><span data-stu-id="9e0bb-170">2,500</span></span> |<span data-ttu-id="9e0bb-171">5,000</span><span class="sxs-lookup"><span data-stu-id="9e0bb-171">5,000</span></span> |<span data-ttu-id="9e0bb-172">20,000</span><span class="sxs-lookup"><span data-stu-id="9e0bb-172">20,000</span></span> |<span data-ttu-id="9e0bb-173">30,000</span><span class="sxs-lookup"><span data-stu-id="9e0bb-173">30,000</span></span> |<span data-ttu-id="9e0bb-174">50,000</span><span class="sxs-lookup"><span data-stu-id="9e0bb-174">50,000</span></span> |
| <span data-ttu-id="9e0bb-175">**3 SUS-t**</span><span class="sxs-lookup"><span data-stu-id="9e0bb-175">**3 SUs**</span></span> |<span data-ttu-id="9e0bb-176">2,500</span><span class="sxs-lookup"><span data-stu-id="9e0bb-176">2,500</span></span> |<span data-ttu-id="9e0bb-177">5,000</span><span class="sxs-lookup"><span data-stu-id="9e0bb-177">5,000</span></span> |<span data-ttu-id="9e0bb-178">20,000</span><span class="sxs-lookup"><span data-stu-id="9e0bb-178">20,000</span></span> |<span data-ttu-id="9e0bb-179">30,000</span><span class="sxs-lookup"><span data-stu-id="9e0bb-179">30,000</span></span> |<span data-ttu-id="9e0bb-180">50,000</span><span class="sxs-lookup"><span data-stu-id="9e0bb-180">50,000</span></span> |
| <span data-ttu-id="9e0bb-181">**6 SUS-t**</span><span class="sxs-lookup"><span data-stu-id="9e0bb-181">**6 SUs**</span></span> |<span data-ttu-id="9e0bb-182">2,500</span><span class="sxs-lookup"><span data-stu-id="9e0bb-182">2,500</span></span> |<span data-ttu-id="9e0bb-183">5,000</span><span class="sxs-lookup"><span data-stu-id="9e0bb-183">5,000</span></span> |<span data-ttu-id="9e0bb-184">20,000</span><span class="sxs-lookup"><span data-stu-id="9e0bb-184">20,000</span></span> |<span data-ttu-id="9e0bb-185">30,000</span><span class="sxs-lookup"><span data-stu-id="9e0bb-185">30,000</span></span> |<span data-ttu-id="9e0bb-186">50,000</span><span class="sxs-lookup"><span data-stu-id="9e0bb-186">50,000</span></span> |
| <span data-ttu-id="9e0bb-187">**12 SUS-t**</span><span class="sxs-lookup"><span data-stu-id="9e0bb-187">**12 SUs**</span></span> |<span data-ttu-id="9e0bb-188">5,000</span><span class="sxs-lookup"><span data-stu-id="9e0bb-188">5,000</span></span> |<span data-ttu-id="9e0bb-189">10,000</span><span class="sxs-lookup"><span data-stu-id="9e0bb-189">10,000</span></span> |<span data-ttu-id="9e0bb-190">40,000</span><span class="sxs-lookup"><span data-stu-id="9e0bb-190">40,000</span></span> |<span data-ttu-id="9e0bb-191">60,000</span><span class="sxs-lookup"><span data-stu-id="9e0bb-191">60,000</span></span> |<span data-ttu-id="9e0bb-192">100,000</span><span class="sxs-lookup"><span data-stu-id="9e0bb-192">100,000</span></span> |
| <span data-ttu-id="9e0bb-193">**18 SUS-t**</span><span class="sxs-lookup"><span data-stu-id="9e0bb-193">**18 SUs**</span></span> |<span data-ttu-id="9e0bb-194">7,500</span><span class="sxs-lookup"><span data-stu-id="9e0bb-194">7,500</span></span> |<span data-ttu-id="9e0bb-195">15,000</span><span class="sxs-lookup"><span data-stu-id="9e0bb-195">15,000</span></span> |<span data-ttu-id="9e0bb-196">60,000</span><span class="sxs-lookup"><span data-stu-id="9e0bb-196">60,000</span></span> |<span data-ttu-id="9e0bb-197">90,000</span><span class="sxs-lookup"><span data-stu-id="9e0bb-197">90,000</span></span> |<span data-ttu-id="9e0bb-198">150,000</span><span class="sxs-lookup"><span data-stu-id="9e0bb-198">150,000</span></span> |
| <span data-ttu-id="9e0bb-199">**24 SUS-t**</span><span class="sxs-lookup"><span data-stu-id="9e0bb-199">**24 SUs**</span></span> |<span data-ttu-id="9e0bb-200">10,000</span><span class="sxs-lookup"><span data-stu-id="9e0bb-200">10,000</span></span> |<span data-ttu-id="9e0bb-201">20,000</span><span class="sxs-lookup"><span data-stu-id="9e0bb-201">20,000</span></span> |<span data-ttu-id="9e0bb-202">80,000</span><span class="sxs-lookup"><span data-stu-id="9e0bb-202">80,000</span></span> |<span data-ttu-id="9e0bb-203">120,000</span><span class="sxs-lookup"><span data-stu-id="9e0bb-203">120,000</span></span> |<span data-ttu-id="9e0bb-204">200,000</span><span class="sxs-lookup"><span data-stu-id="9e0bb-204">200,000</span></span> |
| <span data-ttu-id="9e0bb-205">**…**</span><span class="sxs-lookup"><span data-stu-id="9e0bb-205">**…**</span></span> |<span data-ttu-id="9e0bb-206">…</span><span class="sxs-lookup"><span data-stu-id="9e0bb-206">…</span></span> |<span data-ttu-id="9e0bb-207">…</span><span class="sxs-lookup"><span data-stu-id="9e0bb-207">…</span></span> |<span data-ttu-id="9e0bb-208">…</span><span class="sxs-lookup"><span data-stu-id="9e0bb-208">…</span></span> |<span data-ttu-id="9e0bb-209">…</span><span class="sxs-lookup"><span data-stu-id="9e0bb-209">…</span></span> |<span data-ttu-id="9e0bb-210">…</span><span class="sxs-lookup"><span data-stu-id="9e0bb-210">…</span></span> |
| <span data-ttu-id="9e0bb-211">**60 SUS-t**</span><span class="sxs-lookup"><span data-stu-id="9e0bb-211">**60 SUs**</span></span> |<span data-ttu-id="9e0bb-212">25,000</span><span class="sxs-lookup"><span data-stu-id="9e0bb-212">25,000</span></span> |<span data-ttu-id="9e0bb-213">50,000</span><span class="sxs-lookup"><span data-stu-id="9e0bb-213">50,000</span></span> |<span data-ttu-id="9e0bb-214">200,000</span><span class="sxs-lookup"><span data-stu-id="9e0bb-214">200,000</span></span> |<span data-ttu-id="9e0bb-215">300,000</span><span class="sxs-lookup"><span data-stu-id="9e0bb-215">300,000</span></span> |<span data-ttu-id="9e0bb-216">500,000</span><span class="sxs-lookup"><span data-stu-id="9e0bb-216">500,000</span></span> |

<span data-ttu-id="9e0bb-217">Mostanra akkor már rendelkezik Stream Analytics a Machine Learning funkciók működése beható ismerete.</span><span class="sxs-lookup"><span data-stu-id="9e0bb-217">By now, you should already have a good understanding of how Machine Learning functions in Stream Analytics work.</span></span> <span data-ttu-id="9e0bb-218">Valószínűleg is tudomásul veszi, hogy az adatforrások és az egyes "pull" "pull" adatait adja vissza egy kötegelt események Stream Analytics-feladatok hello Stream Analytics-feladat tooprocess.</span><span class="sxs-lookup"><span data-stu-id="9e0bb-218">You likely also understand that Stream Analytics jobs “pull” data from data sources and each “pull” returns a batch of events for hello Stream Analytics job tooprocess.</span></span> <span data-ttu-id="9e0bb-219">Milyen hatással van a ez lekéréses modell hello Machine Learning webszolgáltatás-kérelmek?</span><span class="sxs-lookup"><span data-stu-id="9e0bb-219">How does this pull model impact hello Machine Learning web service requests?</span></span>

<span data-ttu-id="9e0bb-220">A Machine Learning funkciók hivatott hello kötegméret általában pontosan nem osztható hello minden Stream Analytics-feladat "pull" által visszaadott események száma.</span><span class="sxs-lookup"><span data-stu-id="9e0bb-220">Normally, hello batch size we set for Machine Learning functions won’t exactly be divisible by hello number of events returned by each Stream Analytics job “pull”.</span></span> <span data-ttu-id="9e0bb-221">Ha ez történik, hello Machine Learning webszolgáltatáshoz "részleges" kötegek hívja.</span><span class="sxs-lookup"><span data-stu-id="9e0bb-221">When this occurs hello Machine Learning web service will be called with “partial” batches.</span></span> <span data-ttu-id="9e0bb-222">Ebben az esetben toonot fel Önnek további feldolgozás várakozási lekéréses toopull összevonási eseményeit a terhelés.</span><span class="sxs-lookup"><span data-stu-id="9e0bb-222">This is done toonot incur additional job latency overhead in coalescing events from pull toopull.</span></span>

## <a name="new-function-related-monitoring-metrics"></a><span data-ttu-id="9e0bb-223">Új, a függvény kapcsolatos figyelési metrikákat</span><span class="sxs-lookup"><span data-stu-id="9e0bb-223">New function-related monitoring metrics</span></span>
<span data-ttu-id="9e0bb-224">Hello figyelő területét egy Stream Analytics-feladat három további függvény kapcsolatos metrikákat lettek hozzáadva.</span><span class="sxs-lookup"><span data-stu-id="9e0bb-224">In hello Monitor area of a Stream Analytics job, three additional function-related metrics have been added.</span></span> <span data-ttu-id="9e0bb-225">Ahogy az alábbi ábra hello FÜGGVÉNY, FÜGGVÉNY események és sikertelen FÜGGVÉNY KÉRELMEKET.</span><span class="sxs-lookup"><span data-stu-id="9e0bb-225">They are FUNCTION REQUESTS, FUNCTION EVENTS and FAILED FUNCTION REQUESTS, as shown in hello graphic below.</span></span>

<span data-ttu-id="9e0bb-226">![A Stream Analytics a Machine Learning funkciók metrikák méretezése](./media/stream-analytics-scale-with-ml-functions/stream-analytics-scale-with-ml-functions-01.png "Stream Analytics a Machine Learning funkciók metrikák méretezése")</span><span class="sxs-lookup"><span data-stu-id="9e0bb-226">![Scale Stream Analytics with Machine Learning Functions Metrics](./media/stream-analytics-scale-with-ml-functions/stream-analytics-scale-with-ml-functions-01.png "Scale Stream Analytics with Machine Learning Functions Metrics")</span></span>

<span data-ttu-id="9e0bb-227">hello a következők:</span><span class="sxs-lookup"><span data-stu-id="9e0bb-227">hello are defined as follows:</span></span>

<span data-ttu-id="9e0bb-228">**FÜGGVÉNY kérelmek**: hello függvény kérelmek számát jelenti.</span><span class="sxs-lookup"><span data-stu-id="9e0bb-228">**FUNCTION REQUESTS**: hello number of function requests.</span></span>

<span data-ttu-id="9e0bb-229">**FÜGGVÉNY események**: hello számú események hello kérelmek működik.</span><span class="sxs-lookup"><span data-stu-id="9e0bb-229">**FUNCTION EVENTS**: hello number events in hello function requests.</span></span>

<span data-ttu-id="9e0bb-230">**SIKERTELEN FÜGGVÉNY kérelmek**: hello sikertelen függvény kérelmek számát jelenti.</span><span class="sxs-lookup"><span data-stu-id="9e0bb-230">**FAILED FUNCTION REQUESTS**: hello number of failed function requests.</span></span>

## <a name="key-takeaways"></a><span data-ttu-id="9e0bb-231">Kulcs Takeaways</span><span class="sxs-lookup"><span data-stu-id="9e0bb-231">Key Takeaways</span></span>
<span data-ttu-id="9e0bb-232">toosummarize hello főbb pontjai, a rendelés tooscale egy Stream Analytics-feladat a Machine Learning funkciók hello következő elemek figyelembe kell venni:</span><span class="sxs-lookup"><span data-stu-id="9e0bb-232">toosummarize hello main points, in order tooscale an Stream Analytics job with Machine Learning functions, hello following items must be considered:</span></span>

1. <span data-ttu-id="9e0bb-233">hello bemeneti események száma</span><span class="sxs-lookup"><span data-stu-id="9e0bb-233">hello input event rate</span></span>
2. <span data-ttu-id="9e0bb-234">hello megengedett Stream Analytics-feladat futtatása hello késése (és így hello kötegméret hello Machine Learning webszolgáltatás kérelmek)</span><span class="sxs-lookup"><span data-stu-id="9e0bb-234">hello tolerated latency for hello running Stream Analytics job (and thus hello batch size of hello Machine Learning web service requests)</span></span>
3. <span data-ttu-id="9e0bb-235">hello kiépítve a Stream Analytics SUS-t és a gépi tanulás webszolgáltatás-kérelmek (hello további függvény kapcsolatos költségek) hello száma</span><span class="sxs-lookup"><span data-stu-id="9e0bb-235">hello provisioned Stream Analytics SUs and hello number of Machine Learning web service requests (hello additional function-related costs)</span></span>

<span data-ttu-id="9e0bb-236">Egy teljesen particionált Stream Analytics lekérdezési példaként használt.</span><span class="sxs-lookup"><span data-stu-id="9e0bb-236">A fully partitioned Stream Analytics query was used as an example.</span></span> <span data-ttu-id="9e0bb-237">Egy összetettebb lekérdezés van szüksége a hello [Azure Stream Analytics-fórumot](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureStreamAnalytics) kiváló forrást biztosítanak a további segítség hello Stream Analytics csapat van.</span><span class="sxs-lookup"><span data-stu-id="9e0bb-237">If a more complex query is needed hello [Azure Stream Analytics forum](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureStreamAnalytics) is a great resource for getting additional help from hello Stream Analytics team.</span></span>

## <a name="next-steps"></a><span data-ttu-id="9e0bb-238">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="9e0bb-238">Next steps</span></span>
<span data-ttu-id="9e0bb-239">toolearn Stream Analytics kapcsolatos további információkért lásd:</span><span class="sxs-lookup"><span data-stu-id="9e0bb-239">toolearn more about Stream Analytics, see:</span></span>

* <span data-ttu-id="9e0bb-240">[Get started using Azure Stream Analytics](stream-analytics-real-time-fraud-detection.md) (Bevezetés az Azure Stream Analytics használatába)</span><span class="sxs-lookup"><span data-stu-id="9e0bb-240">[Get started using Azure Stream Analytics](stream-analytics-real-time-fraud-detection.md)</span></span>
* <span data-ttu-id="9e0bb-241">[Scale Azure Stream Analytics jobs](stream-analytics-scale-jobs.md) (Azure Stream Analytics-feladatok méretezése)</span><span class="sxs-lookup"><span data-stu-id="9e0bb-241">[Scale Azure Stream Analytics jobs](stream-analytics-scale-jobs.md)</span></span>
* <span data-ttu-id="9e0bb-242">[Azure Stream Analytics Query Language Reference](https://msdn.microsoft.com/library/azure/dn834998.aspx) (Referencia az Azure Stream Analytics lekérdezési nyelvhez)</span><span class="sxs-lookup"><span data-stu-id="9e0bb-242">[Azure Stream Analytics Query Language Reference](https://msdn.microsoft.com/library/azure/dn834998.aspx)</span></span>
* [<span data-ttu-id="9e0bb-243">Az Azure Stream Analytics felügyeleti REST API referenciája</span><span class="sxs-lookup"><span data-stu-id="9e0bb-243">Azure Stream Analytics Management REST API Reference</span></span>](https://msdn.microsoft.com/library/azure/dn835031.aspx)
