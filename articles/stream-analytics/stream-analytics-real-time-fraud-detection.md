# <a name="get-started-using-azure-stream-analytics-real-time-fraud-detection"></a><span data-ttu-id="0d694-101">Az Azure Stream Analytics első lépéseiben: valós idejű csalások felderítése</span><span class="sxs-lookup"><span data-stu-id="0d694-101">Get started using Azure Stream Analytics: Real-time fraud detection</span></span>

<span data-ttu-id="0d694-102">Ez az oktatóanyag illusztrálja végpont Azure Stream Analytics segítségével.</span><span class="sxs-lookup"><span data-stu-id="0d694-102">This tutorial provides an end-to-end illustration of how to use Azure Stream Analytics.</span></span> <span data-ttu-id="0d694-103">Az alábbiak végrehajtásának módját ismerheti meg:</span><span class="sxs-lookup"><span data-stu-id="0d694-103">You learn how to:</span></span> 

* <span data-ttu-id="0d694-104">Kapcsolja a streaming eseményeket az Azure Event Hubs egy példányát.</span><span class="sxs-lookup"><span data-stu-id="0d694-104">Bring streaming events into an instance of Azure Event Hubs.</span></span> <span data-ttu-id="0d694-105">Ebben az oktatóanyagban egy alkalmazást, amely azt adja meg, amely a mobiltelefon metaadat-bejegyzéseket adatfolyam szimulálja fogja használni.</span><span class="sxs-lookup"><span data-stu-id="0d694-105">In this tutorial, you'll use an app that we provide that simulates a stream of mobile-phone metadata records.</span></span>

* <span data-ttu-id="0d694-106">Adatok, szoftverfelügyeleti, vagy csak a következő minták Stream Analytics SQL-szerű lekérdezéseket írhat.</span><span class="sxs-lookup"><span data-stu-id="0d694-106">Write SQL-like Stream Analytics queries to transform data, aggregating information or looking for patterns.</span></span> <span data-ttu-id="0d694-107">Egy lekérdezés segítségével megvizsgálja a bejövő streamből, és keresse meg, előfordulhat, hogy rosszindulatúak hívások jelenik meg.</span><span class="sxs-lookup"><span data-stu-id="0d694-107">You will see how to use a query to examine the incoming stream and look for calls that might be fraudulent.</span></span>

* <span data-ttu-id="0d694-108">Az eredményeket elküldik kimeneti fogadóként (tárolás), amely további betekintést nyerjen elemezheti.</span><span class="sxs-lookup"><span data-stu-id="0d694-108">Send the results to an output sink (storage) that you can analyze for additional insights.</span></span> <span data-ttu-id="0d694-109">Ebben az esetben a gyanús hívás adatokat fog küldeni Azure Blob Storage tárolóban.</span><span class="sxs-lookup"><span data-stu-id="0d694-109">In this case, you'll send the suspicious call data to Azure Blob storage.</span></span>

<span data-ttu-id="0d694-110">Ebben az oktatóanyagban a telefonhívás-adatok alapján valós idejű csalások felderítéséhez példa használjuk.</span><span class="sxs-lookup"><span data-stu-id="0d694-110">In  this tutorial, we use the example of real-time fraud detection based on phone-call data.</span></span> <span data-ttu-id="0d694-111">De az eljárás azt mutatja be olyan is alkalmas más típusú csalások felderítéséhez, például a hitelkártya csalás vagy azonosító adatokkal való visszaéléseket.</span><span class="sxs-lookup"><span data-stu-id="0d694-111">But the technique we illustrate is also suited for other types of fraud detection, such as credit card fraud or identity theft.</span></span> 

## <a name="scenario-telecommunications-and-sim-fraud-detection-in-real-time"></a><span data-ttu-id="0d694-112">Forgatókönyv: Távközlési és SIM csalások felderítéséhez valós időben</span><span class="sxs-lookup"><span data-stu-id="0d694-112">Scenario: Telecommunications and SIM fraud detection in real time</span></span>

<span data-ttu-id="0d694-113">A távközlési vállalat rendelkezik nagy mennyiségű bejövő hívások adatait.</span><span class="sxs-lookup"><span data-stu-id="0d694-113">A telecommunications company has a large volume of data for incoming calls.</span></span> <span data-ttu-id="0d694-114">A vállalat szeretne csalárd hívások valós idejű észlelheti az, hogy a felhasználók értesítése, vagy állítsa le az adott szolgáltatást.</span><span class="sxs-lookup"><span data-stu-id="0d694-114">The company wants to detect fraudulent calls in real time so that they can notify customers or shut down service for a specific number.</span></span> <span data-ttu-id="0d694-115">Egy adott típusú SIM csalás ugyanazzal az identitással körülbelül egy időben, de a földrajzilag különböző helyeken több hívás magában foglalja.</span><span class="sxs-lookup"><span data-stu-id="0d694-115">One type of SIM fraud involves multiple calls from the same identity around the same time but in geographically different locations.</span></span> <span data-ttu-id="0d694-116">Az ilyen típusú csalások észlelése, a vállalatnak foglalkoznia kell a megvizsgálja a bejövő phone rögzíti, és keresse meg adott minták – ebben az esetben az hívásokra a különböző országokban körülbelül egy időben.</span><span class="sxs-lookup"><span data-stu-id="0d694-116">To detect this type of fraud, the company needs to examine incoming phone records and look for specific patterns—in this case, for calls made around the same time in different countries.</span></span> <span data-ttu-id="0d694-117">A telefon azt jelzi, hogy ebbe a kategóriába tartozik kerülnek tárolási további elemzés céljából.</span><span class="sxs-lookup"><span data-stu-id="0d694-117">Any phone records that fall into this category are written to storage for subsequent analysis.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="0d694-118">Előfeltételek</span><span class="sxs-lookup"><span data-stu-id="0d694-118">Prerequisites</span></span>

<span data-ttu-id="0d694-119">Ebben az oktatóanyagban a telefonhívás-adatok szimulálása lesz egy ügyfél-alkalmazással, amely mintát telefonhívás metaadatokat hoz létre.</span><span class="sxs-lookup"><span data-stu-id="0d694-119">In this tutorial, you'll simulate phone-call data by using a client app that generates sample phone call metadata.</span></span> <span data-ttu-id="0d694-120">Néhány rekordot, amely az alkalmazás létrehozza a csalárd hívások tűnik.</span><span class="sxs-lookup"><span data-stu-id="0d694-120">Some of the records that the app produces look like fraudulent calls.</span></span> 

<span data-ttu-id="0d694-121">Mielőtt elkezdené, győződjön meg arról, hogy a következő:</span><span class="sxs-lookup"><span data-stu-id="0d694-121">Before you start, make sure you have the following:</span></span>

* <span data-ttu-id="0d694-122">Egy Azure-fiók.</span><span class="sxs-lookup"><span data-stu-id="0d694-122">An Azure account.</span></span>
* <span data-ttu-id="0d694-123">A hívás-esemény készítő alkalmazást.</span><span class="sxs-lookup"><span data-stu-id="0d694-123">The call-event generator app.</span></span> <span data-ttu-id="0d694-124">Ez a letöltés kaphat a [TelcoGenerator.zip fájl](http://download.microsoft.com/download/8/B/D/8BD50991-8D54-4F59-AB83-3354B69C8A7E/TelcoGenerator.zip) a Microsoft Download Center webhelyről.</span><span class="sxs-lookup"><span data-stu-id="0d694-124">You can get this by downloading the [TelcoGenerator.zip file](http://download.microsoft.com/download/8/B/D/8BD50991-8D54-4F59-AB83-3354B69C8A7E/TelcoGenerator.zip) from the Microsoft Download Center.</span></span> <span data-ttu-id="0d694-125">Bontsa ki a csomagot egy mappába a számítógépen.</span><span class="sxs-lookup"><span data-stu-id="0d694-125">Unzip this package into a folder on your computer.</span></span> <span data-ttu-id="0d694-126">Ha meg szeretné tekinteni a forrás-kód és az alkalmazás futtatásához a hibakereső, az alkalmazás forráskódjának kaphat [GitHub](https://aka.ms/azure-stream-analytics-telcogenerator).</span><span class="sxs-lookup"><span data-stu-id="0d694-126">If you want to see the source code and run the app in a debugger, you can get the app source code from [GitHub](https://aka.ms/azure-stream-analytics-telcogenerator).</span></span> 

    >[!NOTE]
    ><span data-ttu-id="0d694-127">Windows blokkolhatják a letöltött zip-fájlt.</span><span class="sxs-lookup"><span data-stu-id="0d694-127">Windows might block the downloaded .zip file.</span></span> <span data-ttu-id="0d694-128">Ha Ön nem bontsa ki azt, kattintson jobb gombbal a fájlra, és válassza ki **tulajdonságok**.</span><span class="sxs-lookup"><span data-stu-id="0d694-128">If you can't unzip it, right-click the file and select **Properties**.</span></span> <span data-ttu-id="0d694-129">Ha a "ezt a fájlt egy másik számítógépről érkezett és a számítógép védelme érdekében blokkolhatja" üzenet jelenik meg, válassza ki a **Unblock** lehetőséget, majd kattintson a **alkalmaz**.</span><span class="sxs-lookup"><span data-stu-id="0d694-129">If you see the "This file came from another computer and might be blocked to help protect this computer" message, select the **Unblock** option and then click **Apply**.</span></span>

<span data-ttu-id="0d694-130">Ha meg szeretné vizsgálni a Streaming Analytics-feladat eredményének, is kell egy eszközt az Azure Blob Storage-tároló tartalmának megtekintése.</span><span class="sxs-lookup"><span data-stu-id="0d694-130">If you want to examine the results of the Streaming Analytics job, you also need a tool for viewing the contents of a Azure Blob Storage container.</span></span> <span data-ttu-id="0d694-131">Ha a Visual Studio használata esetén használhatja [Azure Tools for Visual Studio](https://docs.microsoft.com/en-us/azure/vs-azure-tools-storage-resources-server-explorer-browse-manage) vagy [Visual Studio Cloud Explorer](https://docs.microsoft.com/en-us/azure/vs-azure-tools-resources-managing-with-cloud-explorer).</span><span class="sxs-lookup"><span data-stu-id="0d694-131">If you use Visual Studio, you can use [Azure Tools for Visual Studio](https://docs.microsoft.com/en-us/azure/vs-azure-tools-storage-resources-server-explorer-browse-manage) or [Visual Studio Cloud Explorer](https://docs.microsoft.com/en-us/azure/vs-azure-tools-resources-managing-with-cloud-explorer).</span></span> <span data-ttu-id="0d694-132">Másik lehetőségként telepítheti önálló eszközök, például a [Azure Tártallózó](http://storageexplorer.com/) vagy [Azure Explorer](http://www.cerebrata.com/products/azure-explorer/introduction).</span><span class="sxs-lookup"><span data-stu-id="0d694-132">Alternatively, you can install standalone tools like [Azure Storage Explorer](http://storageexplorer.com/) or [Azure Explorer](http://www.cerebrata.com/products/azure-explorer/introduction).</span></span> 

## <a name="create-an-azure-event-hubs-to-ingest-events"></a><span data-ttu-id="0d694-133">Létrehozása az Azure event hubs betöltési események</span><span class="sxs-lookup"><span data-stu-id="0d694-133">Create an Azure event hubs to ingest events</span></span>

<span data-ttu-id="0d694-134">Adatfolyam elemzéséhez, *betöltési* Azure be azt.</span><span class="sxs-lookup"><span data-stu-id="0d694-134">To analyze a data stream, you *ingest* it into Azure.</span></span> <span data-ttu-id="0d694-135">Egy tipikus módja adatok [Azure Event Hubs](../event-hubs/event-hubs-what-is-event-hubs.md), amely lehetővé teszi több millió eseményt másodpercenként és majd feldolgozni, és az eseményadatok tárolására.</span><span class="sxs-lookup"><span data-stu-id="0d694-135">A typical way to ingest data is to use [Azure Event Hubs](../event-hubs/event-hubs-what-is-event-hubs.md), which lets you ingest millions of events per second and then process and store the event information.</span></span> <span data-ttu-id="0d694-136">Ebben az oktatóanyagban létrehoz egy eseményközpontot, és már rendelkezik a hívás adatokat küldeni, hogy az event hubs hívás-esemény készítő alkalmazást.</span><span class="sxs-lookup"><span data-stu-id="0d694-136">For this tutorial, you create an event hub and then have the call-event generator app send call data to that event hub.</span></span> <span data-ttu-id="0d694-137">Az event hubs kapcsolatban bővebben lásd: a [Azure Service Bus-dokumentáció](https://docs.microsoft.com/en-us/azure/service-bus/).</span><span class="sxs-lookup"><span data-stu-id="0d694-137">For more about event hubs, see the [Azure Service Bus documentation](https://docs.microsoft.com/en-us/azure/service-bus/).</span></span>

>[!NOTE]
><span data-ttu-id="0d694-138">Ez az eljárás részletes verziójához, lásd: [hozzon létre egy Event Hubs névtér és egy eseményközpontot, az Azure portál használatával](../event-hubs/event-hubs-create.md).</span><span class="sxs-lookup"><span data-stu-id="0d694-138">For a more detailed version of this procedure, see [Create an Event Hubs namespace and an event hub using the Azure portal](../event-hubs/event-hubs-create.md).</span></span> 

### <a name="create-a-namespace-and-event-hub"></a><span data-ttu-id="0d694-139">A névtér és az event hub létrehozása</span><span class="sxs-lookup"><span data-stu-id="0d694-139">Create a namespace and event hub</span></span>
<span data-ttu-id="0d694-140">Ebben az eljárásban először létre kell hoznia egy event hub névtér, és ezután hozzáadhat egy eseményközpontot, hogy namepsace.</span><span class="sxs-lookup"><span data-stu-id="0d694-140">In this procedure, you first create an event hub namespace, and then you add an event hub to that namepsace.</span></span> <span data-ttu-id="0d694-141">Event hub névterek logikailag csoportosítják a kapcsolódó esemény bus példányok szolgálnak.</span><span class="sxs-lookup"><span data-stu-id="0d694-141">Event hub namespaces are used to logically group related event bus instances.</span></span> 

1. <span data-ttu-id="0d694-142">Jelentkezzen be az Azure-portálon, majd kattintson a **új** > **az eszközök internetes hálózatát** > **Eseményközpont**.</span><span class="sxs-lookup"><span data-stu-id="0d694-142">Log  into the Azure portal and click **New** > **Internet of Things** > **Event Hub**.</span></span> 

2. <span data-ttu-id="0d694-143">Az a **névtér létrehozása** panelen adja meg például a névtér nevét `<yourname>-eh-ns-demo`.</span><span class="sxs-lookup"><span data-stu-id="0d694-143">In the **Create namespace** blade, enter a namespace name such as `<yourname>-eh-ns-demo`.</span></span> <span data-ttu-id="0d694-144">A névtér egy tetszőleges nevet is használhat, de a neve nem érvényes URL- és Azure között egyedinek kell lennie.</span><span class="sxs-lookup"><span data-stu-id="0d694-144">You can use any name for the namespace, but the name must be valid for a URL and it must be unique across Azure.</span></span> 
    
3. <span data-ttu-id="0d694-145">Válasszon egy előfizetést, és hozzon létre vagy válasszon egy erőforráscsoportot, majd kattintson **létrehozása**.</span><span class="sxs-lookup"><span data-stu-id="0d694-145">Select a subscription and create or choose a resource group , then click **Create**.</span></span> 

    ![Az event hub névtér létrehozása](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-eventhub-namespace-new-portal.png)
 
4. <span data-ttu-id="0d694-147">A névtér telepítése befejeződött, amikor az event hub névtér található az Azure-erőforrások listája.</span><span class="sxs-lookup"><span data-stu-id="0d694-147">When the namespace has finished deploying, find the event hub namespace in your list of Azure resources.</span></span> 

5. <span data-ttu-id="0d694-148">Kattintson az új névtéren, és a névtér paneljén kattintson  **+ &nbsp;Eseményközpont**.</span><span class="sxs-lookup"><span data-stu-id="0d694-148">Click the new namespace, and in the namespace blade, click **+&nbsp;Event Hub**.</span></span> 

    ![<span data-ttu-id="0d694-149">Az Eseményközpont hozzáadása gombra egy új eseményközpont létrehozása</span><span class="sxs-lookup"><span data-stu-id="0d694-149">The Add Event Hub button for creating a new event hub</span></span> ](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-eventhub-button-new-portal.png)    
 
6. <span data-ttu-id="0d694-150">Az új eseményközpont neve `sa-eh-frauddetection-demo`.</span><span class="sxs-lookup"><span data-stu-id="0d694-150">Name the new event hub `sa-eh-frauddetection-demo`.</span></span> <span data-ttu-id="0d694-151">Használhat egy másik nevet.</span><span class="sxs-lookup"><span data-stu-id="0d694-151">You can use a different name.</span></span> <span data-ttu-id="0d694-152">Ha így tesz, jegyezze fel, mert később szüksége nevét.</span><span class="sxs-lookup"><span data-stu-id="0d694-152">If you do, make a note of it, because you need the name later.</span></span> <span data-ttu-id="0d694-153">Bármely más vonatkozó beállítások megadása az event hubs most nem kell.</span><span class="sxs-lookup"><span data-stu-id="0d694-153">You don't need to set any other options for the event hub right now.</span></span>

    ![Egy új eseményközpont létrehozása panel](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-eventhub-new-portal.png)
    
 
7. <span data-ttu-id="0d694-155">Kattintson a **Create** (Létrehozás) gombra.</span><span class="sxs-lookup"><span data-stu-id="0d694-155">Click **Create**.</span></span>
### <a name="grant-access-to-the-event-hub-and-get-a-connection-string"></a><span data-ttu-id="0d694-156">Az event hubs hozzáférést, és a kapcsolati karakterlánc beolvasása</span><span class="sxs-lookup"><span data-stu-id="0d694-156">Grant access to the event hub and get a connection string</span></span>

<span data-ttu-id="0d694-157">Egy folyamat adatokat küldhet egy eseményközpontot, az event hubs egy házirendet, amely lehetővé teszi, hogy a megfelelő hozzáféréssel kell rendelkeznie.</span><span class="sxs-lookup"><span data-stu-id="0d694-157">Before a process can send data to an event hub, the event hub must have a policy that allows appropriate access.</span></span> <span data-ttu-id="0d694-158">A hozzáférési házirendet hoz létre egy kapcsolati karakterláncot, amely tartalmazza az engedélyezési adatok.</span><span class="sxs-lookup"><span data-stu-id="0d694-158">The access policy produces a connection string that includes authorization information.</span></span>

1.  <span data-ttu-id="0d694-159">Az esemény névtér paneljén kattintson **Event Hubs** és kattintson az új eseményközpont nevét.</span><span class="sxs-lookup"><span data-stu-id="0d694-159">In the event namespace blade, click **Event Hubs** and then click the name of your new event hub.</span></span>

2.  <span data-ttu-id="0d694-160">Az event hub paneljén kattintson **megosztott elérési házirendek** majd  **+ &nbsp;Hozzáadás**.</span><span class="sxs-lookup"><span data-stu-id="0d694-160">In the event hub blade, click **Shared access policies** and then click **+&nbsp;Add**.</span></span>

    >[!NOTE]
    ><span data-ttu-id="0d694-161">Ellenőrizze, hogy az event hubs, nem az event hub névtér dolgozik.</span><span class="sxs-lookup"><span data-stu-id="0d694-161">Make sure you're working with the event hub, not the event hub namespace.</span></span>

3.  <span data-ttu-id="0d694-162">Nevű házirend hozzáadása `sa-policy-manage-demo` és **jogcím**, jelölje be **kezelése**.</span><span class="sxs-lookup"><span data-stu-id="0d694-162">Add a policy named `sa-policy-manage-demo` and for **Claim**, select **Manage**.</span></span>

    ![Az új esemény központi hozzáférési házirend létrehozása panel](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-shared-access-policy-manage-new-portal.png)
 
4.  <span data-ttu-id="0d694-164">Kattintson a **Create** (Létrehozás) gombra.</span><span class="sxs-lookup"><span data-stu-id="0d694-164">Click **Create**.</span></span>

5.  <span data-ttu-id="0d694-165">A házirend telepítése után kattintson rá a megosztott elérési házirendek listájában.</span><span class="sxs-lookup"><span data-stu-id="0d694-165">After the policy has been deployed, click it in the list of shared access policies.</span></span>

6.  <span data-ttu-id="0d694-166">A mezőben található **KAPCSOLATI karakterlánc elsődleges kulcs** , majd kattintson a Másolás gombra mellett a kapcsolati karakterláncot.</span><span class="sxs-lookup"><span data-stu-id="0d694-166">Find the box labeled **CONNECTION STRING-PRIMARY KEY** and click the copy button next to the connection string.</span></span> 
    
    ![A hozzáférési házirendben az elsődleges kapcsolódási karakterlánc kulcs másolása](./media/stream-analytics-real-time-fraud-detection/stream-analytics-shared-access-policy-copy-connection-string-new-portal.png)
 
7.  <span data-ttu-id="0d694-168">A kapcsolati karakterlánc illessze be a szövegszerkesztőben.</span><span class="sxs-lookup"><span data-stu-id="0d694-168">Paste the connection string into a text editor.</span></span> <span data-ttu-id="0d694-169">Ez a kapcsolati karakterlánc szükséges ahhoz, hogy a következő szakaszban után néhány kisebb módosításokat végez.</span><span class="sxs-lookup"><span data-stu-id="0d694-169">You need this connection string for the next section, after you make some small edits to it.</span></span>

    <span data-ttu-id="0d694-170">A kapcsolati karakterlánc így néz ki:</span><span class="sxs-lookup"><span data-stu-id="0d694-170">The connection string looks like this:</span></span>

        Endpoint=sb://YOURNAME-eh-ns-demo.servicebus.windows.net/;SharedAccessKeyName=sa-policy-manage-demo;SharedAccessKey=Gw2NFZwU1Di+rxA2T+6hJYAtFExKRXaC2oSQa0ZsPkI=;EntityPath=sa-eh-frauddetection-demo

    <span data-ttu-id="0d694-171">Figyelje meg, hogy a kapcsolati karakterlánc tartalmaz-e több kulcs-érték párok, pontosvesszővel elválasztva: `Endpoint`, `SharedAccessKeyName`, `SharedAccessKey`, és `EntityPath`.</span><span class="sxs-lookup"><span data-stu-id="0d694-171">Notice that the connection string contains multiple key-value pairs, separated with semicolons: `Endpoint`, `SharedAccessKeyName`, `SharedAccessKey`, and `EntityPath`.</span></span>  

## <a name="configure-and-start-the-event-generator-application"></a><span data-ttu-id="0d694-172">Konfigurálni és elindítani az esemény-készítő alkalmazás</span><span class="sxs-lookup"><span data-stu-id="0d694-172">Configure and start the event generator application</span></span>

<span data-ttu-id="0d694-173">Mielőtt elkezdené a TelcoGenerator alkalmazást, akkor konfigurálja úgy, hogy hívás rekordok küld az imént létrehozott eseményközpont.</span><span class="sxs-lookup"><span data-stu-id="0d694-173">Before you start the TelcoGenerator app, you configure it so that it will send call records to the event hub you just created.</span></span>

### <a name="configure-the-telcogeneratorapp"></a><span data-ttu-id="0d694-174">A TelcoGeneratorapp konfigurálása</span><span class="sxs-lookup"><span data-stu-id="0d694-174">Configure the TelcoGeneratorapp</span></span>

1.  <span data-ttu-id="0d694-175">A szerkesztőben, ahol kimásolt kapcsolati karakterlánc, jegyezze fel a `EntityPath` értékét, és távolítsa el a `EntityPath` pár (ne feledje, az azt megelőző pontosvessző eltávolítása).</span><span class="sxs-lookup"><span data-stu-id="0d694-175">In the editor where you copied the connection string, make a note of the `EntityPath` value, and then remove the `EntityPath` pair (don't forget to remove the semicolon that precedes it).</span></span> 

2.  <span data-ttu-id="0d694-176">A mappában, amelyben unzipped-e a TelcoGenerator.zip fájlt nyissa meg a telcodatagen.exe.config fájlt valamelyik szerkesztőben.</span><span class="sxs-lookup"><span data-stu-id="0d694-176">In the folder where you unzipped the TelcoGenerator.zip file, open the telcodatagen.exe.config file in an editor.</span></span> <span data-ttu-id="0d694-177">(Nincs több .config kiterjesztésű fájl, ezért ügyeljen arra, hogy nyissa meg a megfelelőt.)</span><span class="sxs-lookup"><span data-stu-id="0d694-177">(There is more than one .config file, so be sure that you open the right one.)</span></span>

3.  <span data-ttu-id="0d694-178">Az a `<appSettings>` elem, ehhez:</span><span class="sxs-lookup"><span data-stu-id="0d694-178">In the `<appSettings>` element, do this:</span></span>

    * <span data-ttu-id="0d694-179">Állítsa a `EventHubName` kulcs az eseményközpont neveként (Ez azt jelenti, hogy az entitás elérési út értékre).</span><span class="sxs-lookup"><span data-stu-id="0d694-179">Set the value of the `EventHubName` key to the event hub name (that is, to the value of the entity path).</span></span>
    * <span data-ttu-id="0d694-180">Állítsa a `Microsoft.ServiceBus.ConnectionString` kulcs a kapcsolati karakterlánc módosításait.</span><span class="sxs-lookup"><span data-stu-id="0d694-180">Set the value of the `Microsoft.ServiceBus.ConnectionString` key to the connection string.</span></span> 

    <span data-ttu-id="0d694-181">A `<appSettings>` szakasz az alábbihoz hasonlóan fog kinézni.</span><span class="sxs-lookup"><span data-stu-id="0d694-181">The `<appSettings>` section will look like the following example.</span></span> <span data-ttu-id="0d694-182">(Az átláthatóság érdekében azt becsomagolt a sorokat és néhány karaktert a az engedélyezési jogkivonat.)</span><span class="sxs-lookup"><span data-stu-id="0d694-182">(For clarity, we wrapped the lines and removed some characters from the authorization token.)</span></span>

    ![Megjeleníti a event hub nevét és a kapcsolati karakterlánc TelcoGenerator app konfigurációs fájl](./media/stream-analytics-real-time-fraud-detection/stream-analytics-telcogenerator-config-file-app-settings.png)
 
4.  <span data-ttu-id="0d694-184">Mentse a fájlt.</span><span class="sxs-lookup"><span data-stu-id="0d694-184">Save the file.</span></span> 

### <a name="start-the-app"></a><span data-ttu-id="0d694-185">Indítsa el az alkalmazást</span><span class="sxs-lookup"><span data-stu-id="0d694-185">Start the app</span></span>
1.  <span data-ttu-id="0d694-186">Nyisson meg egy parancsablakot, és módosítsa a mappát, ahol a TelcoGenerator app tömörítetlen.</span><span class="sxs-lookup"><span data-stu-id="0d694-186">Open a command window and change to the folder where the TelcoGenerator app is unzipped.</span></span>
2.  <span data-ttu-id="0d694-187">Írja be a következő parancsot:</span><span class="sxs-lookup"><span data-stu-id="0d694-187">Enter the following command:</span></span>

        telcodatagen.exe 1000 .2 2

    <span data-ttu-id="0d694-188">A paraméterek a következők:</span><span class="sxs-lookup"><span data-stu-id="0d694-188">The parameters are:</span></span> 

    * <span data-ttu-id="0d694-189">Óránként EK számát.</span><span class="sxs-lookup"><span data-stu-id="0d694-189">Number of CDRs per hour.</span></span> 
    * <span data-ttu-id="0d694-190">SIM kártyával csalás valószínűség: Milyen gyakran összes hívást, hogy az alkalmazás kell szimulálása a csalárd hívás százalékában.</span><span class="sxs-lookup"><span data-stu-id="0d694-190">SIM Card Fraud Probability: How often, as a percentage of all calls, that the app should simulate a fraudulent call.</span></span> <span data-ttu-id="0d694-191">.2 érték azt jelenti, amely körülbelül 20 %-a hívás rekordok fog kinézni csalárd.</span><span class="sxs-lookup"><span data-stu-id="0d694-191">The value .2 means that about 20% of the call records will look fraudulent.</span></span>
    * <span data-ttu-id="0d694-192">Hossza (óra).</span><span class="sxs-lookup"><span data-stu-id="0d694-192">Duration in hours.</span></span> <span data-ttu-id="0d694-193">Az alkalmazás fusson órák száma.</span><span class="sxs-lookup"><span data-stu-id="0d694-193">The number of hours that the app should run.</span></span> <span data-ttu-id="0d694-194">Is leállíthatja, az alkalmazás bármikor parancssori Ctrl + C billentyűt lenyomásával.</span><span class="sxs-lookup"><span data-stu-id="0d694-194">You can also stop the app any time by pressing Ctrl+C at the command line.</span></span>

    <span data-ttu-id="0d694-195">Néhány másodpercen belül az alkalmazás indítása telefonhívás rekordjainak megjelenítéséhez a képernyőn, az event hubs küldi azokat.</span><span class="sxs-lookup"><span data-stu-id="0d694-195">After a few seconds, the app starts displaying phone call records on the screen as it sends them to the event hub.</span></span>

<span data-ttu-id="0d694-196">A valós idejű csalások észlelése alkalmazásban használt kulcsmezők a következő:</span><span class="sxs-lookup"><span data-stu-id="0d694-196">Some of the key fields that you will be using in this real-time fraud detection application are the following:</span></span>

|<span data-ttu-id="0d694-197">**Rekord**</span><span class="sxs-lookup"><span data-stu-id="0d694-197">**Record**</span></span>|<span data-ttu-id="0d694-198">**Meghatározása**</span><span class="sxs-lookup"><span data-stu-id="0d694-198">**Definition**</span></span>|
|----------|--------------|
|`CallrecTime`|<span data-ttu-id="0d694-199">A hívás időbélyegzőjét kezdési időpontja.</span><span class="sxs-lookup"><span data-stu-id="0d694-199">The timestamp for the call start time.</span></span> |
|`SwitchNum`|<span data-ttu-id="0d694-200">A telefon kapcsoló használatával kapcsolódni a hívást.</span><span class="sxs-lookup"><span data-stu-id="0d694-200">The telephone switch used to connect the call.</span></span> <span data-ttu-id="0d694-201">Az ebben a példában a kapcsolók a következők karakterláncok, amelyek megfelelnek a származási (Egyesült Államok, Kína, UK, Németország vagy Ausztrália).</span><span class="sxs-lookup"><span data-stu-id="0d694-201">For this example, the switches are strings that represent the country of origin (US, China, UK, Germany, or Australia).</span></span> |
|`CallingNum`|<span data-ttu-id="0d694-202">A hívó telefonszámát.</span><span class="sxs-lookup"><span data-stu-id="0d694-202">The phone number of the caller.</span></span> |
|`CallingIMSI`|<span data-ttu-id="0d694-203">A nemzetközi mobil előfizető Identity (IMSI).</span><span class="sxs-lookup"><span data-stu-id="0d694-203">The International Mobile Subscriber Identity (IMSI).</span></span> <span data-ttu-id="0d694-204">Ez az a hívó egyedi azonosítóját.</span><span class="sxs-lookup"><span data-stu-id="0d694-204">This is the Unique identifier of the caller.</span></span> |
|`CalledNum`|<span data-ttu-id="0d694-205">A hívás címzettje telefonszámát.</span><span class="sxs-lookup"><span data-stu-id="0d694-205">The phone number of the call recipient.</span></span> |
|`CalledIMSI`|<span data-ttu-id="0d694-206">Nemzetközi mobil előfizető Identity (IMSI).</span><span class="sxs-lookup"><span data-stu-id="0d694-206">International Mobile Subscriber Identity (IMSI).</span></span> <span data-ttu-id="0d694-207">Ez az a hívás címzettje egyedi azonosítóját.</span><span class="sxs-lookup"><span data-stu-id="0d694-207">This is the unique identifier of the call recipient.</span></span> |


## <a name="create-a-stream-analytics-job-to-manage-streaming-data"></a><span data-ttu-id="0d694-208">A streamelési adatok kezelésében a Stream Analytics-feladat létrehozása</span><span class="sxs-lookup"><span data-stu-id="0d694-208">Create a Stream Analytics job to manage streaming data</span></span>

<span data-ttu-id="0d694-209">Most, hogy egy az események streamjét a hívást, beállíthat egy Stream Analytics-feladat.</span><span class="sxs-lookup"><span data-stu-id="0d694-209">Now that you have a stream of call events, you can set up a Stream Analytics job.</span></span> <span data-ttu-id="0d694-210">A feladat adatokat olvasni az Ön által beállított eseményközpontba.</span><span class="sxs-lookup"><span data-stu-id="0d694-210">The job will read data from the event hub that you set up.</span></span> 

### <a name="create-the-job"></a><span data-ttu-id="0d694-211">A feladat létrehozása</span><span class="sxs-lookup"><span data-stu-id="0d694-211">Create the job</span></span> 

1. <span data-ttu-id="0d694-212">Az Azure portálon kattintson **új** > **az eszközök internetes hálózatát** > **Stream Analytics-feladat**.</span><span class="sxs-lookup"><span data-stu-id="0d694-212">In the Azure portal, click **New** > **Internet of Things** > **Stream Analytics job**.</span></span>

2. <span data-ttu-id="0d694-213">A feladat neve `sa_frauddetection_job_demo`, adjon meg egy előfizetési, erőforráscsoportot és helyet.</span><span class="sxs-lookup"><span data-stu-id="0d694-213">Name the job `sa_frauddetection_job_demo`, specify a subscription, resource group, and location.</span></span>

    <span data-ttu-id="0d694-214">Jó ötlet helyezhető el a feladatot, és az event hubs a legjobb teljesítmény érdekében ugyanabban a régióban, és így nem kell fizetnie régiók közötti adattovábbításra.</span><span class="sxs-lookup"><span data-stu-id="0d694-214">It's a good idea to place the job and the event hub in the same region for best performance and so that you don't pay to transfer data between regions.</span></span>

    ![Új Stream Analytics-feladat létrehozása](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-sa-job-new-portal.png)

3. <span data-ttu-id="0d694-216">Kattintson a **Create** (Létrehozás) gombra.</span><span class="sxs-lookup"><span data-stu-id="0d694-216">Click **Create**.</span></span>

    <span data-ttu-id="0d694-217">A feladat jön létre, és a portál megjeleníti a feladat részleteit.</span><span class="sxs-lookup"><span data-stu-id="0d694-217">The job is created and the portal displays job details.</span></span> <span data-ttu-id="0d694-218">Semmi sem fut-e még, azonban – meg kell adnia a feladat, mielőtt indíthatók el.</span><span class="sxs-lookup"><span data-stu-id="0d694-218">Nothing is running yet, though—you have to configure the job before it can be started.</span></span>

### <a name="configure-job-input"></a><span data-ttu-id="0d694-219">Feladat bemeneti konfigurálása</span><span class="sxs-lookup"><span data-stu-id="0d694-219">Configure job input</span></span>

1. <span data-ttu-id="0d694-220">Az irányítópult vagy a **összes erőforrás** panelen, megkeresheti, és válassza ki a `sa_frauddetection_job_demo` Stream Analytics-feladat.</span><span class="sxs-lookup"><span data-stu-id="0d694-220">In the dashboard or the **All resources** blade, find and select the `sa_frauddetection_job_demo` Stream Analytics job.</span></span> 
2. <span data-ttu-id="0d694-221">Az a **feladat topológia** szakasz a Stream Analytics-feladat panelen kattintson a **bemeneti** mezőbe.</span><span class="sxs-lookup"><span data-stu-id="0d694-221">In the **Job Topology** section of the Stream Analytics job blade, click the **Input** box.</span></span>

    ![A topológia beviteli mezőt a Streaming Analytics-feladat panelen](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-input-box-new-portal.png)
 
3. <span data-ttu-id="0d694-223">Kattintson a  **+ &nbsp;Hozzáadás** , és ezután adja meg a panel ezekkel az értékekkel:</span><span class="sxs-lookup"><span data-stu-id="0d694-223">Click **+&nbsp;Add** and then fill out the blade with these values:</span></span>

    * <span data-ttu-id="0d694-224">**A bemeneti alias**: a nevet használja `CallStream`.</span><span class="sxs-lookup"><span data-stu-id="0d694-224">**Input alias**: Use the name `CallStream`.</span></span> <span data-ttu-id="0d694-225">Ha más nevet használjon, jegyezze fel a, mert később szüksége.</span><span class="sxs-lookup"><span data-stu-id="0d694-225">If you use a different name, make a note of it because you'll need it later.</span></span>
    * <span data-ttu-id="0d694-226">**Adatforrás típusa**: válasszon **adatfolyam**.</span><span class="sxs-lookup"><span data-stu-id="0d694-226">**Source type**: Select **Data stream**.</span></span> <span data-ttu-id="0d694-227">(**Referenciaadatok** statikus keresési adatokat, amelyeket az oktatóanyag nem használ hivatkozik.)</span><span class="sxs-lookup"><span data-stu-id="0d694-227">(**Reference data** refers to static lookup data, which you won't use in this tutorial.)</span></span>
    * <span data-ttu-id="0d694-228">**Forrás**: válasszon **eseményközpont**.</span><span class="sxs-lookup"><span data-stu-id="0d694-228">**Source**: Select **Event hub**.</span></span>
    * <span data-ttu-id="0d694-229">**Beállítás importálása**: válasszon **eseményközpont használható a jelenlegi előfizetés**.</span><span class="sxs-lookup"><span data-stu-id="0d694-229">**Import option**: Select **Use event hub from current subscription**.</span></span> 
    * <span data-ttu-id="0d694-230">**Service bus-névtér**: válassza ki a korábban létrehozott event hub névteret (`<yourname>-eh-ns-demo`).</span><span class="sxs-lookup"><span data-stu-id="0d694-230">**Service bus namespace**: Select the event hub namespace that you created earlier (`<yourname>-eh-ns-demo`).</span></span>
    * <span data-ttu-id="0d694-231">**Az Event hubs**: válassza ki a korábban létrehozott eseményközpont (`sa-eh-frauddetection-demo`).</span><span class="sxs-lookup"><span data-stu-id="0d694-231">**Event hub**: Select the event hub that you created earlier (`sa-eh-frauddetection-demo`).</span></span>
    * <span data-ttu-id="0d694-232">**Eseményközpont házirend neve**: válassza ki a korábban létrehozott házirend (`sa-policy-manage-demo`).</span><span class="sxs-lookup"><span data-stu-id="0d694-232">**Event hub policy name**: Select the access policy that you created earlier (`sa-policy-manage-demo`).</span></span>

    ![Új bemeneti Streaming Analytics-feladat létrehozása](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-sa-input-new-portal.png)

4. <span data-ttu-id="0d694-234">Kattintson a **Create** (Létrehozás) gombra.</span><span class="sxs-lookup"><span data-stu-id="0d694-234">Click **Create**.</span></span>

## <a name="create-queries-to-transform-real-time-data"></a><span data-ttu-id="0d694-235">Valós idejű adatok átalakítására lekérdezések létrehozása</span><span class="sxs-lookup"><span data-stu-id="0d694-235">Create queries to transform real-time data</span></span>

<span data-ttu-id="0d694-236">Ezen a ponton rendelkezik egy Stream Analytics-feladat bejövő adatfolyam olvasására beállítása.</span><span class="sxs-lookup"><span data-stu-id="0d694-236">At this point, you have a Stream Analytics job set up to read an incoming data stream.</span></span> <span data-ttu-id="0d694-237">A következő lépés, ha a valós idejű adatok átalakítást.</span><span class="sxs-lookup"><span data-stu-id="0d694-237">The next step is to create a transformation that analyzes the data in real time.</span></span> <span data-ttu-id="0d694-238">Ehhez létrehozhat egy lekérdezést.</span><span class="sxs-lookup"><span data-stu-id="0d694-238">You do this by creating a query.</span></span> <span data-ttu-id="0d694-239">A Stream Analytics egy egyszerű, deklaratív lekérdezési modellel, amely leírja a valós idejű feldolgozással átalakítások támogatja.</span><span class="sxs-lookup"><span data-stu-id="0d694-239">Stream Analytics supports a simple, declarative query model that describes transformations for real-time processing.</span></span> <span data-ttu-id="0d694-240">A lekérdezések használata egy SQL-szerű nyelv, amely néhány meghatározott stream Analytics-bővítményt.</span><span class="sxs-lookup"><span data-stu-id="0d694-240">The queries use a SQL-like language that has some extensions specific to stream analytics.</span></span> 

<span data-ttu-id="0d694-241">Egy nagyon egyszerű lekérdezést egyszerűen előfordulhat, hogy a bejövő adatokat olvasni.</span><span class="sxs-lookup"><span data-stu-id="0d694-241">A very simple query might simply read all the incoming data.</span></span> <span data-ttu-id="0d694-242">Azonban Ön gyakran lekérdezéseket hozhat létre keresse meg a meghatározott adatok vagy az adatok kapcsolatok.</span><span class="sxs-lookup"><span data-stu-id="0d694-242">However, you often create queries that look for specific data or for relationships in the data.</span></span> <span data-ttu-id="0d694-243">Az oktatóanyag ezen részében létrehoz és további elemzés céljából egy bemeneti adatfolyam alakíthatja át néhány módszer több lekérdezések tesztelése.</span><span class="sxs-lookup"><span data-stu-id="0d694-243">In this section of the tutorial, you will create and test several queries to learn a few ways in which you can transform an input stream for analysis.</span></span> 

<span data-ttu-id="0d694-244">Az itt létrehozott lekérdezések csak megjeleníti az átalakított adatok a képernyőre.</span><span class="sxs-lookup"><span data-stu-id="0d694-244">The queries you create here will just display the transformed data to the screen.</span></span> <span data-ttu-id="0d694-245">Egy későbbi szakasz ismerteti konfigurálhatja a kimeneti fogadóként és egy lekérdezést, amely az átalakított adatokat ír az adott fogadó.</span><span class="sxs-lookup"><span data-stu-id="0d694-245">In a later section, you'll configure an output sink and a query that writes the transformed data to that sink.</span></span>

<span data-ttu-id="0d694-246">A nyelvi kapcsolatos további tudnivalókért tekintse meg a [Azure Stream Analytics Query Language Reference](https://msdn.microsoft.com/library/dn834998.aspx).</span><span class="sxs-lookup"><span data-stu-id="0d694-246">To learn more about the language, see the [Azure Stream Analytics Query Language Reference](https://msdn.microsoft.com/library/dn834998.aspx).</span></span>

### <a name="get-sample-data-for-testing-queries"></a><span data-ttu-id="0d694-247">Tesztelési lekérdezések minta-adatok beolvasása</span><span class="sxs-lookup"><span data-stu-id="0d694-247">Get sample data for testing queries</span></span>

<span data-ttu-id="0d694-248">A TelcoGenerator app hívás rekordot küld az event hubs, és a Stream Analytics-feladat úgy van beállítva, az event hubs olvasni.</span><span class="sxs-lookup"><span data-stu-id="0d694-248">The TelcoGenerator app is sending call records to the event hub, and your Stream Analytics job is configured to read from the event hub.</span></span> <span data-ttu-id="0d694-249">Egy lekérdezés segítségével győződjön meg arról, hogy helyesen van-e olvasási feladat ellenőrzése.</span><span class="sxs-lookup"><span data-stu-id="0d694-249">You can use a query to test the job to make sure that it's reading correctly.</span></span> <span data-ttu-id="0d694-250">Az Azure-konzolon a lekérdezés teszteléséhez mintaadatokat kell.</span><span class="sxs-lookup"><span data-stu-id="0d694-250">To  test a query in the Azure console, you need sample data.</span></span> <span data-ttu-id="0d694-251">Ennél a bemutatónál mintaadatok lesz kinyerése az adatforrásból az event hubs az adatfolyam.</span><span class="sxs-lookup"><span data-stu-id="0d694-251">For this walkthrough, you'll extract sample data from the stream that's coming into the event hub.</span></span>

1. <span data-ttu-id="0d694-252">Győződjön meg arról, hogy a TelcoGenerator alkalmazás fut, és termelő hívást rögzíti.</span><span class="sxs-lookup"><span data-stu-id="0d694-252">Make sure that the TelcoGenerator app is running and producing call records.</span></span>
2. <span data-ttu-id="0d694-253">A portálon térjen vissza a Streaming Analytics-feladat panelen.</span><span class="sxs-lookup"><span data-stu-id="0d694-253">In the portal, return to the Streaming Analytics job blade.</span></span> <span data-ttu-id="0d694-254">(Ha korábban bezárta a panelen, keresse meg a `sa_frauddetection_job_demo` a a **összes erőforrás** panel.)</span><span class="sxs-lookup"><span data-stu-id="0d694-254">(If you closed the blade, search for `sa_frauddetection_job_demo` in the **All resources** blade.)</span></span>
3. <span data-ttu-id="0d694-255">Kattintson a **lekérdezés** mezőbe.</span><span class="sxs-lookup"><span data-stu-id="0d694-255">Click the **Query** box.</span></span> <span data-ttu-id="0d694-256">Azure a be- és kimenetekkel, a feladathoz beállított sorolja fel, és lehetővé teszi, hogy hozzon létre egy lekérdezést, amely lehetővé teszi, hogy a bemeneti adatfolyam átalakítása a kimeneti keresztül küldött.</span><span class="sxs-lookup"><span data-stu-id="0d694-256">Azure lists the inputs and outputs that are configured for the job, and lets you create a query that lets you transform the input stream as it is sent to the output.</span></span>
4. <span data-ttu-id="0d694-257">Az a **lekérdezés** panelen kattintson a Tovább gombra a pont a `CallStream` adja meg, és válassza ki **az adatokat a bemeneti**.</span><span class="sxs-lookup"><span data-stu-id="0d694-257">In the **Query** blade, click the dots next to the `CallStream` input and then select **Sample data from input**.</span></span>

    ![A mintaadatokat használja a Streaming Analytics feladat bejegyzést, mintaadatokkal"bemeneti" kiválasztott menüpont](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-sample-data-from-input.png)

    <span data-ttu-id="0d694-259">Ekkor megnyílik egy panel, amely lehetővé teszi, hogy adja meg, mennyi mintaadatok beszerzéséhez definiált mennyi ideig a bemeneti adatfolyam olvasására.</span><span class="sxs-lookup"><span data-stu-id="0d694-259">This opens a blade that lets you specify how much sample data to get, defined in terms of how long to read the input stream.</span></span>

5. <span data-ttu-id="0d694-260">Állítsa be **perc** 3 majd **OK**.</span><span class="sxs-lookup"><span data-stu-id="0d694-260">Set **Minutes** to 3 and then click **OK**.</span></span> 
    
    ![A bemeneti adatfolyam mintavételi a "3 perc" kiválasztott beállítások.](./media/stream-analytics-real-time-fraud-detection/stream-analytics-input-create-sample-data.png)

    <span data-ttu-id="0d694-262">Azure-minták a bemeneti adatfolyam adatait 3 perc alatt érkezett, és értesíti, amikor készen áll a mintaadatok.</span><span class="sxs-lookup"><span data-stu-id="0d694-262">Azure samples 3 minutes' worth of data from the input stream and notifies you when the sample data is ready.</span></span> <span data-ttu-id="0d694-263">(Ez időt vesz igénybe egy rövid ideig.)</span><span class="sxs-lookup"><span data-stu-id="0d694-263">(This takes a short while.)</span></span> 

<span data-ttu-id="0d694-264">A mintaadatok ideiglenesen tárolja, és áll rendelkezésre, míg a lekérdezési ablakban nyissa meg a rendelkezik.</span><span class="sxs-lookup"><span data-stu-id="0d694-264">The sample data is stored temporarily and is available while you have the query window open.</span></span> <span data-ttu-id="0d694-265">Ha bezárja a lekérdezési ablakban, a minta adatait a rendszer törli, és konfigurálnia kell egy új mintaadatok létrehozása.</span><span class="sxs-lookup"><span data-stu-id="0d694-265">If you close the query window, the sample data is discarded, and you'll have to create a new set of sample data.</span></span> 

<span data-ttu-id="0d694-266">Alternatív megoldásként egy .JSON kiterjesztésű fájlt, amely rendelkezik a mintaadatok azt kaphat [a Githubról](https://github.com/Azure/azure-stream-analytics/blob/master/Sample%20Data/telco.json), majd töltse fel az adott .JSON kiterjesztésű fájlt kívánja használni, mint a mintaadatok az `CallStream` bemeneti.</span><span class="sxs-lookup"><span data-stu-id="0d694-266">As an alternative, you can get a .json file that has sample data in it [from GitHub](https://github.com/Azure/azure-stream-analytics/blob/master/Sample%20Data/telco.json), and then upload that .json file to use as sample data for the `CallStream` input .</span></span> 

### <a name="test-using-a-pass-through-query"></a><span data-ttu-id="0d694-267">Csatlakoztatott lekérdezéssel tesztelése</span><span class="sxs-lookup"><span data-stu-id="0d694-267">Test using a pass-through query</span></span>

<span data-ttu-id="0d694-268">Ha archiválni szeretné minden esemény, átadó lekérdezés segítségével olvassa el a tartalom az esemény található összes mezőhöz.</span><span class="sxs-lookup"><span data-stu-id="0d694-268">If you want to archive every event, you can use a pass-through query to read all the fields in the payload of the event.</span></span>

1. <span data-ttu-id="0d694-269">Adja meg a lekérdezést a lekérdezési ablakban:</span><span class="sxs-lookup"><span data-stu-id="0d694-269">In the query window, enter this query:</span></span>

        SELECT 
            *
        FROM 
            CallStream

    >[!NOTE]
    ><span data-ttu-id="0d694-270">Az SQL kulcsszavak nem kis-és nagybetűket, és szóköz nincs jelentős eltérés.</span><span class="sxs-lookup"><span data-stu-id="0d694-270">As with SQL, keywords are not case sensitive, and whitespace is not significant.</span></span>

    <span data-ttu-id="0d694-271">Ebben a lekérdezésben `CallStream` a bemeneti létrehozásakor adott aliasként.</span><span class="sxs-lookup"><span data-stu-id="0d694-271">In this query, `CallStream` is the alias that you specified when you created the input.</span></span> <span data-ttu-id="0d694-272">Ha egy másik aliast, használja az ezen a néven.</span><span class="sxs-lookup"><span data-stu-id="0d694-272">If you used a different alias, use that name instead.</span></span>

2. <span data-ttu-id="0d694-273">Kattintson a **teszt**.</span><span class="sxs-lookup"><span data-stu-id="0d694-273">Click **Test**.</span></span>

    <span data-ttu-id="0d694-274">A Stream Analytics-feladat a lekérdezés a mintaadatok fut, és a kimenet megjelenítése a az ablak alján.</span><span class="sxs-lookup"><span data-stu-id="0d694-274">The Stream Analytics job runs the query against the sample data and displays the output at the bottom of the window.</span></span> <span data-ttu-id="0d694-275">Ez jelzi, hogy az event hubs és a Streaming Analytics-feladat helyesen vannak konfigurálva.</span><span class="sxs-lookup"><span data-stu-id="0d694-275">This tells you that the event hub and the Streaming Analytics job are configured correctly.</span></span> <span data-ttu-id="0d694-276">(Amint azt később fog létrehozni a lekérdezés adatokat írhat kimeneti fogadóként.)</span><span class="sxs-lookup"><span data-stu-id="0d694-276">(As noted, later you'll create an output sink that the query can write data to.)</span></span>

    ![Stream Analytics-feladat kimeneti, előállított 73 rekordok megjelenítése](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-sample-output.png)

    <span data-ttu-id="0d694-278">Látja rekordok teljes száma a rekordok rögzítette a 3 perces minta függ.</span><span class="sxs-lookup"><span data-stu-id="0d694-278">The exact number of records you see will depend on how many records were captured in your 3-minute sample.</span></span>
 
### <a name="reduce-the-number-of-fields-using-a-column-projection"></a><span data-ttu-id="0d694-279">Egy oszlop projekció használata mezők számának csökkentése</span><span class="sxs-lookup"><span data-stu-id="0d694-279">Reduce the number of fields using a column projection</span></span>

<span data-ttu-id="0d694-280">Sok esetben az elemzési bemeneti adatfolyamból összes oszlop nem szükséges.</span><span class="sxs-lookup"><span data-stu-id="0d694-280">In many cases, your analysis doesn't need all the columns from the input stream.</span></span> <span data-ttu-id="0d694-281">Egy lekérdezés segítségével meg kevesebb mint a továbbított lekérdezést visszaadott mezők projektre.</span><span class="sxs-lookup"><span data-stu-id="0d694-281">You can use a query to project a smaller set of returned fields than in the pass-through query.</span></span>

1. <span data-ttu-id="0d694-282">Módosítsa a lekérdezést a kód szerkesztése a következő:</span><span class="sxs-lookup"><span data-stu-id="0d694-282">Change the query in the code editor to the following:</span></span>

        SELECT CallRecTime, SwitchNum, CallingIMSI, CallingNum, CalledNum 
        FROM 
            CallStream

2. <span data-ttu-id="0d694-283">Kattintson a **teszt** újra.</span><span class="sxs-lookup"><span data-stu-id="0d694-283">Click **Test** again.</span></span> 

    ![Stream Analytics-feladat kimeneti kivetítéshez, 25 rekordot generált megjelenítő](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-sample-output-projection.png)
 
### <a name="count-incoming-calls-by-region-tumbling-window-with-aggregation"></a><span data-ttu-id="0d694-285">Count bejövő hívások régió: az összesítő Átfedésmentes ablak</span><span class="sxs-lookup"><span data-stu-id="0d694-285">Count incoming calls by region: Tumbling window with aggregation</span></span>

<span data-ttu-id="0d694-286">Tegyük fel, hogy régiónként beérkező hívások számát.</span><span class="sxs-lookup"><span data-stu-id="0d694-286">Suppose you want to count the number of incoming calls per region.</span></span> <span data-ttu-id="0d694-287">A streamelési adatok, ha el kíván végezni, például a leltárt, az aggregátumfüggvények kell az adatfolyam szegmentálja a historikus egységekbe (mivel az adatfolyamot magát gyakorlatilag végtelen).</span><span class="sxs-lookup"><span data-stu-id="0d694-287">In streaming data, when you want to perform aggregate functions like counting, you need to segment the stream into temporal units (since the data stream itself is effectively endless).</span></span> <span data-ttu-id="0d694-288">Ehhez használja a Streaming Analytics [ablak függvény](stream-analytics-window-functions.md).</span><span class="sxs-lookup"><span data-stu-id="0d694-288">You do this using a Streaming Analytics [window function](stream-analytics-window-functions.md).</span></span> <span data-ttu-id="0d694-289">Majd dolgozhat adott ablakra adatok egységként.</span><span class="sxs-lookup"><span data-stu-id="0d694-289">You can then work with the data inside that window as a unit.</span></span>

<span data-ttu-id="0d694-290">Ez a transzformáció keresi, amely nem fedi át a historikus windows sorozatát – minden ablak adatokat csoportosíthatja, és összesítés diszkrét készlete fog rendelkezni.</span><span class="sxs-lookup"><span data-stu-id="0d694-290">For this transformation, you want a sequence of temporal windows that don't overlap—each window will have a discrete set of data that you can group and aggregate.</span></span> <span data-ttu-id="0d694-291">Az ilyen típusú ablak neve egy *Átfedésmentes ablak* .</span><span class="sxs-lookup"><span data-stu-id="0d694-291">This type of window is referred to as a *Tumbling window* .</span></span> <span data-ttu-id="0d694-292">Az Átfedésmentes ablak belül kaphat szerint csoportosítva a bejövő hívások számát `SwitchNum`, amely az országot, ahol a hívást indító jelenti.</span><span class="sxs-lookup"><span data-stu-id="0d694-292">Within the Tumbling window, you can get a count of the incoming calls grouped by `SwitchNum`, which represents the country where the call originated.</span></span> 

1. <span data-ttu-id="0d694-293">Módosítsa a lekérdezést a kód szerkesztése a következő:</span><span class="sxs-lookup"><span data-stu-id="0d694-293">Change the query in the code editor to the following:</span></span>

        SELECT 
            System.Timestamp as WindowEnd, SwitchNum, COUNT(*) as CallCount 
        FROM
            CallStream TIMESTAMP BY CallRecTime 
        GROUP BY TUMBLINGWINDOW(s, 5), SwitchNum

    <span data-ttu-id="0d694-294">Ez a lekérdezés használja a `Timestamp By` kulcsszót a `FROM` mely időbélyegző mező megadása a bemeneti adatfolyam adhat meg az Átfedésmentes ablak a záradékot.</span><span class="sxs-lookup"><span data-stu-id="0d694-294">This query uses the `Timestamp By` keyword in the `FROM` clause to specify which timestamp field in the input stream to use to define the Tumbling window.</span></span> <span data-ttu-id="0d694-295">Ebben az esetben az ablak szegmensek által az adatok felosztja a `CallRecTime` rekordokban levő mező.</span><span class="sxs-lookup"><span data-stu-id="0d694-295">In this case, the window divides the data into segments by the `CallRecTime` field in each record.</span></span> <span data-ttu-id="0d694-296">(Ha nincs megadva, a leképezési művelet a használja, amely minden esemény érkezik az eseményközpontba.</span><span class="sxs-lookup"><span data-stu-id="0d694-296">(If no field is specified, the windowing operation uses the time that each event arrives at the event hub.</span></span> <span data-ttu-id="0d694-297">"Érkezési idő Visual Studio alkalmazás idő" című [Stream Analytics Query Language Reference](https://msdn.microsoft.com/library/azure/dn834998.aspx).</span><span class="sxs-lookup"><span data-stu-id="0d694-297">See "Arrival Time Vs Application Time" in [Stream Analytics Query Language Reference](https://msdn.microsoft.com/library/azure/dn834998.aspx).</span></span> 

    <span data-ttu-id="0d694-298">A leképezési tartalmaz `System.Timestamp`, az egyes időszak végén az időbélyeg adja vissza, amely.</span><span class="sxs-lookup"><span data-stu-id="0d694-298">The projection includes `System.Timestamp`, which returns a timestamp for the end of each window.</span></span> 

    <span data-ttu-id="0d694-299">Adja meg, hogy szeretné-e használni a Átfedésmentes ablak, használhatja a [TUMBLINGWINDOW](https://msdn.microsoft.com/library/dn835055.aspx) működni a `GROUP BY `záradékban.</span><span class="sxs-lookup"><span data-stu-id="0d694-299">To specify that you want to use a Tumbling window, you use the [TUMBLINGWINDOW](https://msdn.microsoft.com/library/dn835055.aspx) function in the `GROUP BY `clause.</span></span> <span data-ttu-id="0d694-300">A függvény egy időegységet (bárhol az egy napra mikroszekundum) és egy ablak mérete (darabszám) kell megadni.</span><span class="sxs-lookup"><span data-stu-id="0d694-300">In the function, you specify a time unit (anywhere from a microsecond to a day) and a window size (how many units).</span></span> <span data-ttu-id="0d694-301">Ebben a példában az Átfedésmentes ablak áll 5 másodperces időközönként, ország száma a hívások minden 5 másodperc alatt érkezett elérhetővé válik.</span><span class="sxs-lookup"><span data-stu-id="0d694-301">In this example, the Tumbling window consists of 5-second intervals, so you will get a count by country for every 5 seconds' worth of calls.</span></span>

2. <span data-ttu-id="0d694-302">Kattintson a **teszt** újra.</span><span class="sxs-lookup"><span data-stu-id="0d694-302">Click **Test** again.</span></span> <span data-ttu-id="0d694-303">Figyelje meg, hogy az eredmények között, az időbélyegek **WindowEnd** 5 másodperces lépésekben vannak.</span><span class="sxs-lookup"><span data-stu-id="0d694-303">In the results, notice that the timestamps under **WindowEnd** are in 5-second increments.</span></span>

    ![Stream Analytics-feladat kimeneti összesítési, előállított 13 rekordok megjelenítése](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-sample-output-aggregation.png)
 
### <a name="detect-sim-fraud-using-a-self-join"></a><span data-ttu-id="0d694-305">Önillesztés használatával SIM csalások észlelése</span><span class="sxs-lookup"><span data-stu-id="0d694-305">Detect SIM fraud using a self-join</span></span>

<span data-ttu-id="0d694-306">Ebben a példában azt is érdemes megfontolni csalárd használati hívások, amely ugyanahhoz a felhasználóhoz, de különböző helyeken egy másik 5 másodpercen belül kell.</span><span class="sxs-lookup"><span data-stu-id="0d694-306">For this example, we can consider fraudulent usage to be calls that originate from the same user but in different locations within 5 seconds of one another.</span></span> <span data-ttu-id="0d694-307">Például ugyanaz a felhasználó nem szabályosan hívás az USA és Ausztrália egyszerre.</span><span class="sxs-lookup"><span data-stu-id="0d694-307">For example, the same user can't legitimately make a call from the US and Australia at the same time.</span></span> 

<span data-ttu-id="0d694-308">Ellenőrizze az ezekben az esetekben, használhatja a streamelési adatok önillesztés önillesztést az adatfolyam alapján a `CallRecTime` érték.</span><span class="sxs-lookup"><span data-stu-id="0d694-308">To check for these cases, you can use a self-join of the streaming data to join the stream to itself based on the `CallRecTime` value.</span></span> <span data-ttu-id="0d694-309">Majd keressen a hívás where rögzíti a `CallingIMSI` (származó szám) értéke azonos, de a `SwitchNum` (származási) értéke nem ugyanaz.</span><span class="sxs-lookup"><span data-stu-id="0d694-309">You can then look for call records where the `CallingIMSI` value (the originating number) is the same, but the `SwitchNum` value (country of origin) is not the same.</span></span>

<span data-ttu-id="0d694-310">Használatakor a csatlakozzon egy adatfolyam-adatok, az illesztés biztosítania kell néhány milyen távolságban egyező sorok vonatkozó korlátozások időben választhatók el egymástól.</span><span class="sxs-lookup"><span data-stu-id="0d694-310">When you use a join with streaming data, the join must provide some limits on how far the matching rows can be separated in time.</span></span> <span data-ttu-id="0d694-311">(Ahogy azt korábban említettük, a streamelési adatok az gyakorlatilag végtelen.) A kapcsolat ideje határain belül vannak megadva a `ON` az illesztési záradék használatával a `DATEDIFF` függvény.</span><span class="sxs-lookup"><span data-stu-id="0d694-311">(As noted earlier, the streaming data is effectively endless.) The time bounds for the relationship are specified inside the `ON` clause of the join, using the `DATEDIFF` function .</span></span> <span data-ttu-id="0d694-312">Ebben az esetben az illesztés egy 5 másodperces időköze hívás adatok alapján történik.</span><span class="sxs-lookup"><span data-stu-id="0d694-312">In this case, the join is based on a 5-second interval of call data .</span></span>

1. <span data-ttu-id="0d694-313">Módosítsa a lekérdezést a kód szerkesztése a következő:</span><span class="sxs-lookup"><span data-stu-id="0d694-313">Change the query in the code editor to the following:</span></span> 

        SELECT  System.Timestamp as Time, 
            CS1.CallingIMSI, 
            CS1.CallingNum as CallingNum1, 
            CS2.CallingNum as CallingNum2, 
            CS1.SwitchNum as Switch1, 
            CS2.SwitchNum as Switch2 
        FROM CallStream CS1 TIMESTAMP BY CallRecTime 
            JOIN CallStream CS2 TIMESTAMP BY CallRecTime 
            ON CS1.CallingIMSI = CS2.CallingIMSI 
            AND DATEDIFF(ss, CS1, CS2) BETWEEN 1 AND 5 
        WHERE CS1.SwitchNum != CS2.SwitchNum

    <span data-ttu-id="0d694-314">Ez a lekérdezés olyan, mint bármely SQL illesztési kivételével a `DATEDIFF` az illesztés függvényt.</span><span class="sxs-lookup"><span data-stu-id="0d694-314">This query is like any SQL join except for the `DATEDIFF` function in the join.</span></span> <span data-ttu-id="0d694-315">Egy verziója `DATEDIFF` , amely Streaming Analytics, és azt meg kell jelenniük a `ON...BETWEEN` záradékban.</span><span class="sxs-lookup"><span data-stu-id="0d694-315">This is a version of `DATEDIFF` that's specific to Streaming Analytics, and it must appear in the `ON...BETWEEN` clause.</span></span> <span data-ttu-id="0d694-316">Egy időegységet (ebben a példában másodperc) és a csatlakozás a két forrásból aliasok paraméterei.</span><span class="sxs-lookup"><span data-stu-id="0d694-316">The parameters are a time unit (seconds in this example) and the aliases of the two sources for the join.</span></span> <span data-ttu-id="0d694-317">(Ez eltér a szokásos SQL `DATEDIFF` függvény.)</span><span class="sxs-lookup"><span data-stu-id="0d694-317">(This is different from the standard SQL `DATEDIFF` function.)</span></span> 

    <span data-ttu-id="0d694-318">A `WHERE` záradék tartalmaz a feltételt, amely a csalárd hívás: a származó kapcsolók a következők nem ugyanaz.</span><span class="sxs-lookup"><span data-stu-id="0d694-318">The `WHERE` clause includes the condition that flags the fraudulent call: the originating switches are not the same.</span></span> 

2. <span data-ttu-id="0d694-319">Kattintson a **teszt** újra.</span><span class="sxs-lookup"><span data-stu-id="0d694-319">Click **Test** again.</span></span> 

    ![Stream Analytics-feladat kimeneti generált önillesztés, látható 6 rekordok](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-sample-output-self-join.png)

3. <span data-ttu-id="0d694-321">Kattintson a **Save** (Mentés) gombra.</span><span class="sxs-lookup"><span data-stu-id="0d694-321">Click **Save**.</span></span> <span data-ttu-id="0d694-322">Ezzel az önálló join lekérdezés esetén a Streaming Analytics-feladat részeként takaríthat meg.</span><span class="sxs-lookup"><span data-stu-id="0d694-322">This saves the self-join query as part of the Streaming Analytics job.</span></span> <span data-ttu-id="0d694-323">(A mintaadatok nem menti azt.)</span><span class="sxs-lookup"><span data-stu-id="0d694-323">(It doesn't save the sample data.)</span></span>

    ![A Stream Analytics-feladat mentése](./media/stream-analytics-real-time-fraud-detection/stream-analytics-query-editor-save-button-new-portal.png)

## <a name="create-an-output-sink-to-store-transformed-data"></a><span data-ttu-id="0d694-325">Hozzon létre egy kimeneti fogadóját átalakított adatok tárolásához</span><span class="sxs-lookup"><span data-stu-id="0d694-325">Create an output sink to store transformed data</span></span>

<span data-ttu-id="0d694-326">Meghatározta az eseménystream, az eseményközpontok a betöltési események és az adatfolyam keresztül átalakítás végrehajtásához egy lekérdezést adjon meg.</span><span class="sxs-lookup"><span data-stu-id="0d694-326">You've defined an event stream, an event hub input to ingest events, and a query to perform a transformation over the stream.</span></span> <span data-ttu-id="0d694-327">Az utolsó lépése az, hogy adja meg a feladat kimeneti fogadóként – Ez azt jelenti, hogy a hely, az átalakított adatfolyam írni.</span><span class="sxs-lookup"><span data-stu-id="0d694-327">The last step is to define an output sink for the job—that is, a place to write the transformed stream to.</span></span> 

<span data-ttu-id="0d694-328">Kimeneti mosdók is használhatja sok erőforrást – SQL Server-adatbázis, a table storage, Data Lake-tároló, a Power BI és még egy másik eseményközpont.</span><span class="sxs-lookup"><span data-stu-id="0d694-328">You can use many resources as output sinks—a SQL Server database, table storage, Data Lake storage, Power BI, and even another event hub.</span></span> <span data-ttu-id="0d694-329">Ebben az oktatóanyagban az Azure Blob Storage egy tipikus választott eseményadatok újabb elemzés, mivel így alkalmazkodik a strukturálatlan adatok gyűjtéséhez az adatfolyam fog írni.</span><span class="sxs-lookup"><span data-stu-id="0d694-329">For this tutorial, you'll write the stream to Azure Blob Storage, which is a typical choice for collecting event information for later analysis, since it accommodates unstructured data .</span></span>

<span data-ttu-id="0d694-330">Ha egy meglévő blob storage-fiókot, használhatja, amely.</span><span class="sxs-lookup"><span data-stu-id="0d694-330">If you have an existing blob storage account, you can use that.</span></span> <span data-ttu-id="0d694-331">Ebben az oktatóanyagban mutat be, hogyan hozzon létre egy új tárfiókot, csak a jelen oktatóanyag.</span><span class="sxs-lookup"><span data-stu-id="0d694-331">For this tutorial, we'll show you how to create a new storage account just for this tutorial.</span></span>

### <a name="create-an-azure-blob-storage-account"></a><span data-ttu-id="0d694-332">Azure Blob Storage-fiók létrehozása</span><span class="sxs-lookup"><span data-stu-id="0d694-332">Create an Azure Blob Storage account</span></span>

1. <span data-ttu-id="0d694-333">Az Azure portálon térjen vissza a Streaming Analytics-feladat panelen.</span><span class="sxs-lookup"><span data-stu-id="0d694-333">In the Azure portal, return to the Streaming Analytics job blade.</span></span> <span data-ttu-id="0d694-334">(Ha korábban bezárta a panelen, keresse meg a `sa_frauddetection_job_demo` a a **összes erőforrás** panel.)</span><span class="sxs-lookup"><span data-stu-id="0d694-334">(If you closed the blade, search for `sa_frauddetection_job_demo` in the **All resources** blade.)</span></span>
2. <span data-ttu-id="0d694-335">Az a **feladat topológia** területen kattintson a **kimeneti** mezőbe.</span><span class="sxs-lookup"><span data-stu-id="0d694-335">In the **Job Topology** section, click the **Output** box.</span></span> 
3. <span data-ttu-id="0d694-336">Az a **kimenetek** panelen kattintson  **+ &nbsp;Hozzáadás** , és ezután adja meg a panel ezekkel az értékekkel:</span><span class="sxs-lookup"><span data-stu-id="0d694-336">In the **Outputs** blade, click **+&nbsp;Add** and then fill out the blade with these values:</span></span>

    * <span data-ttu-id="0d694-337">**A kimeneti alias**: a nevet használja `CallStream-FraudulentCalls`.</span><span class="sxs-lookup"><span data-stu-id="0d694-337">**Output alias**: Use the name `CallStream-FraudulentCalls`.</span></span> 
    * <span data-ttu-id="0d694-338">**Gyűjtése**: válasszon **Blob-tároló**.</span><span class="sxs-lookup"><span data-stu-id="0d694-338">**Sink**: Select **Blob storage**.</span></span>
    * <span data-ttu-id="0d694-339">**Importálási lehetőségeit**: válasszon **használja a jelenlegi előfizetés blob-tároló**.</span><span class="sxs-lookup"><span data-stu-id="0d694-339">**Import options**: Select **Use blob storage from current subscription**.</span></span>
    * <span data-ttu-id="0d694-340">**A tárfiók**.</span><span class="sxs-lookup"><span data-stu-id="0d694-340">**Storage account**.</span></span> <span data-ttu-id="0d694-341">Válassza ki **hozzon létre új tárfiókot.**</span><span class="sxs-lookup"><span data-stu-id="0d694-341">Select **Create new storage account.**</span></span>
    * <span data-ttu-id="0d694-342">**A tárfiók** (második mezőben).</span><span class="sxs-lookup"><span data-stu-id="0d694-342">**Storage account** (second box).</span></span> <span data-ttu-id="0d694-343">Adja meg `YOURNAMEsademo`, ahol `YOURNAME` a neve, vagy egy másik egyedi karakterlánc.</span><span class="sxs-lookup"><span data-stu-id="0d694-343">Enter `YOURNAMEsademo`, where `YOURNAME` is your name or another unique string.</span></span> <span data-ttu-id="0d694-344">A név csak kisbetűket és számokat használható, és Azure között egyedinek kell lennie.</span><span class="sxs-lookup"><span data-stu-id="0d694-344">The name can use only lowercase letters and numbers, and it must be unique across Azure.</span></span> 
    * <span data-ttu-id="0d694-345">**Tároló**.</span><span class="sxs-lookup"><span data-stu-id="0d694-345">**Container**.</span></span> <span data-ttu-id="0d694-346">Adja meg `sa-fraudulentcalls-demo`.</span><span class="sxs-lookup"><span data-stu-id="0d694-346">Enter `sa-fraudulentcalls-demo`.</span></span>
    <span data-ttu-id="0d694-347">A tárfiók nevét és a tároló neve együttesen arra használják, adjon meg egy URI-t a blob-tároló, ehhez hasonló:</span><span class="sxs-lookup"><span data-stu-id="0d694-347">The storage account name and container name are used together to provide a URI for the blob storage, like this:</span></span> 

    `http://yournamesademo.blob.core.windows.net/sa-fraudulentcalls-demo/...`
    
    ![Panel "Új kimeneti" Stream Analytics-feladat](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-output-blob-storage-new-console.png)
    
4. <span data-ttu-id="0d694-349">Kattintson a **Create** (Létrehozás) gombra.</span><span class="sxs-lookup"><span data-stu-id="0d694-349">Click **Create**.</span></span> 

    <span data-ttu-id="0d694-350">Azure tárolási fiókot hoz létre, és automatikusan létrehoz egy kulcsot.</span><span class="sxs-lookup"><span data-stu-id="0d694-350">Azure creates the storage account and generates a key automatically.</span></span> 

5. <span data-ttu-id="0d694-351">Zárja be a **kimenetek** panelen.</span><span class="sxs-lookup"><span data-stu-id="0d694-351">Close the **Outputs** blade.</span></span> 

## <a name="start-the-streaming-analytics-job"></a><span data-ttu-id="0d694-352">A Streaming Analytics-feladat indítása</span><span class="sxs-lookup"><span data-stu-id="0d694-352">Start the Streaming Analytics job</span></span>

<span data-ttu-id="0d694-353">A feladat konfigurálva van.</span><span class="sxs-lookup"><span data-stu-id="0d694-353">The job is now configured.</span></span> <span data-ttu-id="0d694-354">A megadott bemeneti (az event hubs), átalakítás (a csalárd hívások keres lekérdezés) és egy kimeneti (blob-tároló).</span><span class="sxs-lookup"><span data-stu-id="0d694-354">You've specified an input (the event hub), a transformation (the query to look for fraudulent calls), and an output (blob storage).</span></span> <span data-ttu-id="0d694-355">Most elindíthatja a feladatot.</span><span class="sxs-lookup"><span data-stu-id="0d694-355">You can now start the job.</span></span> 

1. <span data-ttu-id="0d694-356">Ellenőrizze, fut-e a TelcoGenerator alkalmazást.</span><span class="sxs-lookup"><span data-stu-id="0d694-356">Make sure the TelcoGenerator app is running.</span></span>

2. <span data-ttu-id="0d694-357">A feladat panelen kattintson **Start**.</span><span class="sxs-lookup"><span data-stu-id="0d694-357">In the job blade, click **Start**.</span></span>

    ![A Stream Analytics-feladat indítása](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-start-output.png)

3. <span data-ttu-id="0d694-359">Az a **indítási feladat** panelen, a feladat kimenete kezdési időpontja, jelölje be a **most**.</span><span class="sxs-lookup"><span data-stu-id="0d694-359">In the **Start job** blade, for Job output start time, select **Now**.</span></span> 

4. <span data-ttu-id="0d694-360">Kattintson a **Start**.</span><span class="sxs-lookup"><span data-stu-id="0d694-360">Click **Start**.</span></span> 

    ![A Stream Analytics-feladat "Feladat start" panel](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-start-job-blade.png)

    <span data-ttu-id="0d694-362">Azure értesíti, amikor a feladat elindult, és a feladat panelen megjelenik az állapota **futtató**.</span><span class="sxs-lookup"><span data-stu-id="0d694-362">Azure notifies you when the job has started, and in the job blade, the status is displayed as **Running**.</span></span>

    ![Stream Analytics-feladat állapotát, a "Fut" megjelenítése](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-running-status.png)
    

## <a name="examine-the-transformed-data"></a><span data-ttu-id="0d694-364">Vizsgálja meg az átalakított adatok</span><span class="sxs-lookup"><span data-stu-id="0d694-364">Examine the transformed data</span></span>

<span data-ttu-id="0d694-365">Most már rendelkezik egy teljes Streaming Analytics-feladathoz.</span><span class="sxs-lookup"><span data-stu-id="0d694-365">You now have a complete Streaming Analytics job.</span></span> <span data-ttu-id="0d694-366">A feladat vizsgálata folyamatban van a telefonhívás metaadatok adatfolyam, valós idejű csalárd telefonhívásokat keres, és ezek tárolási csalárd hívásainak kapcsolatos adatok írásakor.</span><span class="sxs-lookup"><span data-stu-id="0d694-366">The job is examining a stream of phone call metadata, looking for fraudulent phone calls in real time, and writing information about those fraudulent calls to storage.</span></span> 

<span data-ttu-id="0d694-367">Az oktatóanyag elvégzéséhez, érdemes megtekinteni az adatokat a Streaming Analytics-feladat által.</span><span class="sxs-lookup"><span data-stu-id="0d694-367">To complete this tutorial, you might want to look at the data being captured by the Streaming Analytics job.</span></span> <span data-ttu-id="0d694-368">Az adattömbök (fájlok) az adatok írása Azure Blog Storage.</span><span class="sxs-lookup"><span data-stu-id="0d694-368">The data is being written to Azure Blog Storage in chunks (files).</span></span> <span data-ttu-id="0d694-369">Bármely Azure Blob Storage olvasó eszközt is használhatja.</span><span class="sxs-lookup"><span data-stu-id="0d694-369">You can use any tool that reads Azure Blob Storage.</span></span> <span data-ttu-id="0d694-370">Amint az Előfeltételek című rész, használhatja a Visual Studio Azure-bővítményeket, vagy használhatja egy eszköz, például [Azure Tártallózó](http://storageexplorer.com/) vagy [Azure Explorer](http://www.cerebrata.com/products/azure-explorer/introduction).</span><span class="sxs-lookup"><span data-stu-id="0d694-370">As noted in the Prerequisites section, you can use Azure extensions in Visual Studio, or you can use a tool like [Azure Storage Explorer](http://storageexplorer.com/) or [Azure Explorer](http://www.cerebrata.com/products/azure-explorer/introduction).</span></span> 

<span data-ttu-id="0d694-371">A blob Storage tárolóban fájl tartalmának vizsgálja meg, lásd a következő hasonlót:</span><span class="sxs-lookup"><span data-stu-id="0d694-371">When you examine the contents of a file in blob storage, you see something like the following :</span></span>

![Az Azure blob storage Streaming Analytics kimenet](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-blob-storage-view.png)
 

## <a name="clean-up-resources"></a><span data-ttu-id="0d694-373">Az erőforrások eltávolítása</span><span class="sxs-lookup"><span data-stu-id="0d694-373">Clean up resources</span></span>

<span data-ttu-id="0d694-374">Jelenleg áll, folytassa a csalások észlelés forgatókönyv, és ebben az oktatóanyagban létrehozott erőforrások használatára, amely további cikkek.</span><span class="sxs-lookup"><span data-stu-id="0d694-374">We have additional articles that continue with the fraud-detection scenario and that use the resources that you've created in this tutorial.</span></span> <span data-ttu-id="0d694-375">Ha folytatja, tekintse meg a javaslatok alapján **további lépések** később.</span><span class="sxs-lookup"><span data-stu-id="0d694-375">If you want to continue, see the suggestions under **Next steps** later.</span></span>

<span data-ttu-id="0d694-376">Azonban ha elkészült, és nincs szükség a létrehozott erőforrások, törölheti őket, hogy a szükségtelen Azure költségek.</span><span class="sxs-lookup"><span data-stu-id="0d694-376">However, if you're done and you don't need the resources you've created, you can delete them so that you don't incur unnecessary Azure charges.</span></span> <span data-ttu-id="0d694-377">Ebben az esetben javasoljuk, hogy tegye a következőket:</span><span class="sxs-lookup"><span data-stu-id="0d694-377">In that case, we suggest that you do the following:</span></span>

1. <span data-ttu-id="0d694-378">A Streaming Analytics-feladat leállítása.</span><span class="sxs-lookup"><span data-stu-id="0d694-378">Stop the Streaming Analytics job.</span></span> <span data-ttu-id="0d694-379">Az a **feladatok** panelen kattintson a **leállítása** tetején.</span><span class="sxs-lookup"><span data-stu-id="0d694-379">In the **Jobs** blade, click **Stop** at the top.</span></span>
2. <span data-ttu-id="0d694-380">Állítsa le a Telco készítő alkalmazást.</span><span class="sxs-lookup"><span data-stu-id="0d694-380">Stop the Telco Generator app.</span></span> <span data-ttu-id="0d694-381">A parancssori ablakban, ahol az alkalmazás indításakor nyomja le a Ctrl + C.</span><span class="sxs-lookup"><span data-stu-id="0d694-381">In the command window where you started the app, press Ctrl+C.</span></span>
3. <span data-ttu-id="0d694-382">Ha új blob storage-fiók ebben az oktatóanyagban az imént létrehozott, törölje azt.</span><span class="sxs-lookup"><span data-stu-id="0d694-382">If you created a new blob storage account just for this tutorial, delete it.</span></span> 
4. <span data-ttu-id="0d694-383">Törölje a Streaming Analytics-feladathoz.</span><span class="sxs-lookup"><span data-stu-id="0d694-383">Delete the Streaming Analytics job.</span></span>
5. <span data-ttu-id="0d694-384">Törölje az eseményközpontba.</span><span class="sxs-lookup"><span data-stu-id="0d694-384">Delete the event hub.</span></span>
6. <span data-ttu-id="0d694-385">Törölje a event hub névteret.</span><span class="sxs-lookup"><span data-stu-id="0d694-385">Delete the event hub namespace.</span></span>

## <a name="get-support"></a><span data-ttu-id="0d694-386">Támogatás kérése</span><span class="sxs-lookup"><span data-stu-id="0d694-386">Get support</span></span>

<span data-ttu-id="0d694-387">Ha további segítségre van szüksége, próbálkozzon a [Azure Stream Analytics-fórumot](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureStreamAnalytics).</span><span class="sxs-lookup"><span data-stu-id="0d694-387">For further assistance, try our [Azure Stream Analytics forum](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureStreamAnalytics).</span></span>

## <a name="next-steps"></a><span data-ttu-id="0d694-388">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="0d694-388">Next steps</span></span>

<span data-ttu-id="0d694-389">Ez az oktatóanyag a következő cikkek továbbra is:</span><span class="sxs-lookup"><span data-stu-id="0d694-389">You can continue this tutorial with the following articles:</span></span>

* <span data-ttu-id="0d694-390">[A Stream Analytics és a Power BI: az adatfolyamként történő adatok valós idejű elemzési irányítópult](stream-analytics-power-bi-dashboard.md).</span><span class="sxs-lookup"><span data-stu-id="0d694-390">[Stream Analytics and Power BI: A real-time analytics dashboard for streaming data](stream-analytics-power-bi-dashboard.md).</span></span> <span data-ttu-id="0d694-391">Ez a cikk bemutatja, hogyan küldhet a Stream Analytics-feladat eredményének TelCo Power bi-bA valós idejű képi megjelenítés és elemzésére.</span><span class="sxs-lookup"><span data-stu-id="0d694-391">This article shows you how to send the TelCo output of the Stream Analytics job to Power BI for real-time visualization and analysis.</span></span>
* <span data-ttu-id="0d694-392">[Azure Stream Analytics adatok tárolása az az Azure Redis Cache használata az Azure Functions](stream-analytics-functions-redis.md).</span><span class="sxs-lookup"><span data-stu-id="0d694-392">[How to store data from Azure Stream Analytics in an Azure Redis Cache using Azure Functions](stream-analytics-functions-redis.md).</span></span> <span data-ttu-id="0d694-393">Ez a cikk bemutatja, hogyan használja az Azure Functions az Azure Redis cache-keresztül a Service Bus-üzenetsorba csalárd hívások.</span><span class="sxs-lookup"><span data-stu-id="0d694-393">This article shows how to use Azure Functions to write fraudulent calls to an Azure Redis cache via a Service Bus queue.</span></span>

<span data-ttu-id="0d694-394">További információ a Stream Analytics általában próbálja ki az alábbi cikkek:</span><span class="sxs-lookup"><span data-stu-id="0d694-394">For more information about Stream Analytics in general, try these articles:</span></span>

* [<span data-ttu-id="0d694-395">Az Azure Stream Analytics bemutatása</span><span class="sxs-lookup"><span data-stu-id="0d694-395">Introduction to Azure Stream Analytics</span></span>](stream-analytics-introduction.md)
* <span data-ttu-id="0d694-396">[Scale Azure Stream Analytics jobs](stream-analytics-scale-jobs.md) (Azure Stream Analytics-feladatok méretezése)</span><span class="sxs-lookup"><span data-stu-id="0d694-396">[Scale Azure Stream Analytics jobs](stream-analytics-scale-jobs.md)</span></span>
* <span data-ttu-id="0d694-397">[Azure Stream Analytics Query Language Reference](https://msdn.microsoft.com/library/azure/dn834998.aspx) (Referencia az Azure Stream Analytics lekérdezési nyelvhez)</span><span class="sxs-lookup"><span data-stu-id="0d694-397">[Azure Stream Analytics Query Language Reference](https://msdn.microsoft.com/library/azure/dn834998.aspx)</span></span>
* [<span data-ttu-id="0d694-398">Az Azure Stream Analytics felügyeleti REST API referenciája</span><span class="sxs-lookup"><span data-stu-id="0d694-398">Azure Stream Analytics Management REST API Reference</span></span>](https://msdn.microsoft.com/library/azure/dn835031.aspx)
