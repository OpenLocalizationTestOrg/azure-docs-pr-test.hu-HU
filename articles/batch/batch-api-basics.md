---
title: "Az Azure Batch áttekintése fejlesztők számára | Microsoft Docs"
description: "Megismerheti a Batch szolgáltatás funkcióit és API-jait a fejlesztés szempontjából."
services: batch
documentationcenter: .net
author: tamram
manager: timlt
editor: 
ms.assetid: 416b95f8-2d7b-4111-8012-679b0f60d204
ms.service: batch
ms.devlang: multiple
ms.topic: get-started-article
ms.tgt_pltfrm: na
ms.workload: big-compute
ms.date: 06/28/2017
ms.author: tamram
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: c2f2a878414e4efd626d674ef9a182ae52eeb1ff
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 08/29/2017
---
# <a name="develop-large-scale-parallel-compute-solutions-with-batch"></a><span data-ttu-id="edcc0-103">Nagy léptékű párhuzamos számítási megoldások fejlesztése a Batch segítségével</span><span class="sxs-lookup"><span data-stu-id="edcc0-103">Develop large-scale parallel compute solutions with Batch</span></span>

<span data-ttu-id="edcc0-104">Ebben a cikkben áttekintjük az Azure Batch legfontosabb alkotóelemeit, valamint szót ejtünk a szolgáltatás elsődleges funkcióiról és erőforrásairól, amelyek segítenek a Batch-fejlesztőknek nagy léptékű párhuzamos számítási megoldásokat létrehozni.</span><span class="sxs-lookup"><span data-stu-id="edcc0-104">In this overview of the core components of the Azure Batch service, we discuss the primary service features and resources that Batch developers can use to build large-scale parallel compute solutions.</span></span>

<span data-ttu-id="edcc0-105">Akár olyan elosztott számítási alkalmazást vagy szolgáltatást fejleszt, amely közvetlen [REST API][batch_rest_api]-hívásokkal működik, akár valamelyik [Batch SDK-t](batch-apis-tools.md#azure-accounts-for-batch-development) használja, biztosan szüksége lesz a cikkben tárgyalt erőforrásokra és funkciókra.</span><span class="sxs-lookup"><span data-stu-id="edcc0-105">Whether you're developing a distributed computational application or service that issues direct [REST API][batch_rest_api] calls or you're using one of the [Batch SDKs](batch-apis-tools.md#azure-accounts-for-batch-development), you'll use many of the resources and features discussed in this article.</span></span>

> [!TIP]
> <span data-ttu-id="edcc0-106">A Batch szolgáltatás részletesebb leírásáért olvassa el a következő cikket: [Basics of Azure Batch](batch-technical-overview.md) (Az Azure Batch alapjai).</span><span class="sxs-lookup"><span data-stu-id="edcc0-106">For a higher-level introduction to the Batch service, see [Basics of Azure Batch](batch-technical-overview.md).</span></span>
>
>

## <a name="batch-service-workflow"></a><span data-ttu-id="edcc0-107">A Batch szolgáltatás munkafolyamata</span><span class="sxs-lookup"><span data-stu-id="edcc0-107">Batch service workflow</span></span>
<span data-ttu-id="edcc0-108">Az alább olvasható elméleti szintű munkafolyamat gyakorlatilag a Batch szolgáltatást párhuzamos számítási feladatok feldolgozására használó összes alkalmazásra és szolgáltatásra érvényes:</span><span class="sxs-lookup"><span data-stu-id="edcc0-108">The following high-level workflow is typical of nearly all applications and services that use the Batch service for processing parallel workloads:</span></span>

1. <span data-ttu-id="edcc0-109">Töltse fel a feldolgozni kívánt **adatfájlokat** egy [Azure Storage][azure_storage]-fiókba.</span><span class="sxs-lookup"><span data-stu-id="edcc0-109">Upload the **data files** that you want to process to an [Azure Storage][azure_storage] account.</span></span> <span data-ttu-id="edcc0-110">A Batch beépített támogatást biztosít az Azure Blob-tárhelyekhez, így a tevékenységek futtatásakor a rendszer le tudja tölteni a fájlokat a [számítási csomópontokra](#compute-node).</span><span class="sxs-lookup"><span data-stu-id="edcc0-110">Batch includes built-in support for accessing Azure Blob storage, and your tasks can download these files to [compute nodes](#compute-node) when the tasks are run.</span></span>
2. <span data-ttu-id="edcc0-111">Töltse fel az **alkalmazásfájlokat**, amelyeket a tevékenységek futtatni fognak.</span><span class="sxs-lookup"><span data-stu-id="edcc0-111">Upload the **application files** that your tasks will run.</span></span> <span data-ttu-id="edcc0-112">Ezek lehetnek bináris fájlok vagy parancsfájlok, illetve ezek függőségei, futtatásukat a feladatokban lévő tevékenységek végzik.</span><span class="sxs-lookup"><span data-stu-id="edcc0-112">These files can be binaries or scripts and their dependencies, and are executed by the tasks in your jobs.</span></span> <span data-ttu-id="edcc0-113">A tevékenységek képesek letölteni ezeket a fájlokat az Ön tárfiókjából, de az alkalmazások felügyeletére és üzembe helyezésére a Batch [alkalmazáscsomagok](#application-packages) funkcióját is használhatja.</span><span class="sxs-lookup"><span data-stu-id="edcc0-113">Your tasks can download these files from your Storage account, or you can use the [application packages](#application-packages) feature of Batch for application management and deployment.</span></span>
3. <span data-ttu-id="edcc0-114">Hozza létre a számítási csomópontok [készletét](#pool).</span><span class="sxs-lookup"><span data-stu-id="edcc0-114">Create a [pool](#pool) of compute nodes.</span></span> <span data-ttu-id="edcc0-115">A készlet létrehozásakor meg kell adnia a készletbe tartozó számítási csomópontok számát, méretét, valamint a használt operációs rendszer típusát.</span><span class="sxs-lookup"><span data-stu-id="edcc0-115">When you create a pool, you specify the number of compute nodes for the pool, their size, and the operating system.</span></span> <span data-ttu-id="edcc0-116">Amikor a rendszer lefuttatja a feladatokat, végrehajtásuk céljából hozzájuk rendeli a készlet egyik csomópontját.</span><span class="sxs-lookup"><span data-stu-id="edcc0-116">When each task in your job runs, it's assigned to execute on one of the nodes in your pool.</span></span>
4. <span data-ttu-id="edcc0-117">Hozzon létre egy [feladatot](#job).</span><span class="sxs-lookup"><span data-stu-id="edcc0-117">Create a [job](#job).</span></span> <span data-ttu-id="edcc0-118">A feladatok tevékenységek gyűjteményeit kezelik.</span><span class="sxs-lookup"><span data-stu-id="edcc0-118">A job manages a collection of tasks.</span></span> <span data-ttu-id="edcc0-119">Az egyes feladatokat konkrét készlethez kell rendelni; itt fognak lefutni a feladathoz tartozó tevékenységek.</span><span class="sxs-lookup"><span data-stu-id="edcc0-119">You associate each job to a specific pool where that job's tasks will run.</span></span>
5. <span data-ttu-id="edcc0-120">Adjon hozzá [tevékenységeket](#task) a feladathoz.</span><span class="sxs-lookup"><span data-stu-id="edcc0-120">Add [tasks](#task) to the job.</span></span> <span data-ttu-id="edcc0-121">A tevékenységek lefuttatják az Ön által korábban feltöltött alkalmazást vagy parancsfájlt, és feldolgozzák a tárfiókból letöltött adatfájlokat.</span><span class="sxs-lookup"><span data-stu-id="edcc0-121">Each task runs the application or script that you uploaded to process the data files it downloads from your Storage account.</span></span> <span data-ttu-id="edcc0-122">Amikor befejeződnek a tevékenységek, feltöltik az eredményüket az Azure Storage-fiókba.</span><span class="sxs-lookup"><span data-stu-id="edcc0-122">As each task completes, it can upload its output to Azure Storage.</span></span>
6. <span data-ttu-id="edcc0-123">Kövesse figyelemmel a tevékenység előrehaladását, és kérje le a feladatok eredményét az Azure Storage-fiókból.</span><span class="sxs-lookup"><span data-stu-id="edcc0-123">Monitor job progress and retrieve the task output from Azure Storage.</span></span>

<span data-ttu-id="edcc0-124">A következő részekben bemutatjuk a Batch fentiekben említett funkcióit és más erőforrásait, amelyek segítségével létrehozhatja elosztott számítási megoldásait.</span><span class="sxs-lookup"><span data-stu-id="edcc0-124">The following sections discuss these and the other resources of Batch that enable your distributed computational scenario.</span></span>

> [!NOTE]
> <span data-ttu-id="edcc0-125">A Batch szolgáltatás használatához [Batch-fiókra](#account) van szüksége.</span><span class="sxs-lookup"><span data-stu-id="edcc0-125">You need a [Batch account](#account) to use the Batch service.</span></span> <span data-ttu-id="edcc0-126">A legtöbb Batch-megoldás esetében szükség van [Azure Storage][azure_storage]-fiókra is a fájlok tárolásához és lekéréséhez.</span><span class="sxs-lookup"><span data-stu-id="edcc0-126">Most Batch solutions also use an [Azure Storage][azure_storage] account for file storage and retrieval.</span></span> <span data-ttu-id="edcc0-127">A Batch jelenleg kizárólag az **általános célú** tárfióktípust támogatja, amelynek leírása a [Tudnivalók az Azure Storage-fiókokról](../storage/common/storage-create-storage-account.md) fejezet 5., [Tárfiók létrehozása](../storage/common/storage-create-storage-account.md#create-a-storage-account) című szakaszában található.</span><span class="sxs-lookup"><span data-stu-id="edcc0-127">Batch currently supports only the **general-purpose** storage account type, as described in step 5 of [Create a storage account](../storage/common/storage-create-storage-account.md#create-a-storage-account) in [About Azure storage accounts](../storage/common/storage-create-storage-account.md).</span></span>
>
>

## <a name="batch-service-resources"></a><span data-ttu-id="edcc0-128">A Batch szolgáltatáshoz szükséges erőforrások</span><span class="sxs-lookup"><span data-stu-id="edcc0-128">Batch service resources</span></span>
<span data-ttu-id="edcc0-129">Egyes erőforrásokra (fiókokra, számítási csomópontokra, készletekre, feladatokra és tevékenységekre) a Batch szolgáltatást használó összes megoldáshoz szükség van.</span><span class="sxs-lookup"><span data-stu-id="edcc0-129">Some of the following resources--accounts, compute nodes, pools, jobs, and tasks--are required by all solutions that use the Batch service.</span></span> <span data-ttu-id="edcc0-130">Mások, például a feladatütemezések vagy az alkalmazáscsomagok ugyan hasznosak, de használatuk nem kötelező.</span><span class="sxs-lookup"><span data-stu-id="edcc0-130">Others, like job schedules and application packages, are helpful, but optional, features.</span></span>

* [<span data-ttu-id="edcc0-131">Fiók</span><span class="sxs-lookup"><span data-stu-id="edcc0-131">Account</span></span>](#account)
* [<span data-ttu-id="edcc0-132">Számítási csomópont</span><span class="sxs-lookup"><span data-stu-id="edcc0-132">Compute node</span></span>](#compute-node)
* [<span data-ttu-id="edcc0-133">Készlet</span><span class="sxs-lookup"><span data-stu-id="edcc0-133">Pool</span></span>](#pool)
* [<span data-ttu-id="edcc0-134">Feladat</span><span class="sxs-lookup"><span data-stu-id="edcc0-134">Job</span></span>](#job)

  * [<span data-ttu-id="edcc0-135">Feladatütemezések</span><span class="sxs-lookup"><span data-stu-id="edcc0-135">Job schedules</span></span>](#scheduled-jobs)
* [<span data-ttu-id="edcc0-136">Tevékenység</span><span class="sxs-lookup"><span data-stu-id="edcc0-136">Task</span></span>](#task)

  * [<span data-ttu-id="edcc0-137">Indítási tevékenység</span><span class="sxs-lookup"><span data-stu-id="edcc0-137">Start task</span></span>](#start-task)
  * [<span data-ttu-id="edcc0-138">Feladatkezelő-tevékenység</span><span class="sxs-lookup"><span data-stu-id="edcc0-138">Job manager task</span></span>](#job-manager-task)
  * [<span data-ttu-id="edcc0-139">Feladat-előkészítési és -kiadási tevékenységek</span><span class="sxs-lookup"><span data-stu-id="edcc0-139">Job preparation and release tasks</span></span>](#job-preparation-and-release-tasks)
  * [<span data-ttu-id="edcc0-140">Többpéldányos tevékenység (MPI)</span><span class="sxs-lookup"><span data-stu-id="edcc0-140">Multi-instance task (MPI)</span></span>](#multi-instance-tasks)
  * [<span data-ttu-id="edcc0-141">Tevékenységfüggőségek</span><span class="sxs-lookup"><span data-stu-id="edcc0-141">Task dependencies</span></span>](#task-dependencies)
* [<span data-ttu-id="edcc0-142">Alkalmazáscsomagok</span><span class="sxs-lookup"><span data-stu-id="edcc0-142">Application packages</span></span>](#application-packages)

## <a name="account"></a><span data-ttu-id="edcc0-143">Fiók</span><span class="sxs-lookup"><span data-stu-id="edcc0-143">Account</span></span>
<span data-ttu-id="edcc0-144">A Batch-fiókok a Batch szolgáltatáson belül egyedileg azonosított entitások.</span><span class="sxs-lookup"><span data-stu-id="edcc0-144">A Batch account is a uniquely identified entity within the Batch service.</span></span> <span data-ttu-id="edcc0-145">Minden feldolgozás Batch-fiókkal van társítva.</span><span class="sxs-lookup"><span data-stu-id="edcc0-145">All processing is associated with a Batch account.</span></span>

<span data-ttu-id="edcc0-146">Azure Batch-fiókot az [Azure Portalon](batch-account-create-portal.md)hozhat létre, vagy programozott módon, például a [Batch Management .NET könyvtár](batch-management-dotnet.md) használatával.</span><span class="sxs-lookup"><span data-stu-id="edcc0-146">You can create an Azure Batch account using the [Azure portal](batch-account-create-portal.md) or programmatically, such as with the [Batch Management .NET library](batch-management-dotnet.md).</span></span> <span data-ttu-id="edcc0-147">Egy fiók létrehozásakor társíthatja azt egy Azure Storage-fiókhoz.</span><span class="sxs-lookup"><span data-stu-id="edcc0-147">When creating the account, you can associate an Azure storage account.</span></span>

### <a name="pool-allocation-mode"></a><span data-ttu-id="edcc0-148">Készletlefoglalási mód</span><span class="sxs-lookup"><span data-stu-id="edcc0-148">Pool allocation mode</span></span>

<span data-ttu-id="edcc0-149">Batch-fiók létrehozásakor megadhatja, hogyan történjen a számítási csomópontok [készleteinek](#pool) lefoglalása.</span><span class="sxs-lookup"><span data-stu-id="edcc0-149">When you create a Batch account, you can specify how [pools](#pool) of compute nodes are allocated.</span></span> <span data-ttu-id="edcc0-150">Lefoglalhatja számítási csomópontok készleteit egy, az Azure Batch által kezelt előfizetésben, vagy lefoglalhatja őket saját előfizetésében.</span><span class="sxs-lookup"><span data-stu-id="edcc0-150">You can choose to allocate pools of compute nodes in a subscription managed by Azure Batch, or you can allocate them in your own subscription.</span></span> <span data-ttu-id="edcc0-151">A készletek lefoglalási helyét a fiók *készletlefoglalási mód* tulajdonsága határozza meg.</span><span class="sxs-lookup"><span data-stu-id="edcc0-151">The *pool allocation mode* property for the account determines where pools are allocated.</span></span> 

<span data-ttu-id="edcc0-152">A megfelelő készletlefoglalási mód kiválasztásához gondolja végig, melyik felel meg legjobban az adott forgatókönyvhöz:</span><span class="sxs-lookup"><span data-stu-id="edcc0-152">To decide which pool allocation mode to use, consider which best fits your scenario:</span></span>

* <span data-ttu-id="edcc0-153">**Batch szolgáltatás**: A Batch szolgáltatás az alapértelmezett készletlefoglalási mód, ahol a készleteket a rendszer a háttérben foglalja le Azure által felügyelt előfizetésekben.</span><span class="sxs-lookup"><span data-stu-id="edcc0-153">**Batch Service**: Batch Service is the default pool allocation mode, in which pools are allocated behind the scenes in Azure-managed subscriptions.</span></span> <span data-ttu-id="edcc0-154">A Batch szolgáltatás készletlefoglalási módjával kapcsolatban tartsa szem előtt az alábbi alapvető szempontokat:</span><span class="sxs-lookup"><span data-stu-id="edcc0-154">Keep in mind these key points about the Batch Service pool allocation mode:</span></span>

    - <span data-ttu-id="edcc0-155">A Batch szolgáltatás készletlefoglalási módja a felhőszolgáltatás- és a virtuálisgép-készleteket is támogatja.</span><span class="sxs-lookup"><span data-stu-id="edcc0-155">The Batch Service pool allocation mode supports both Cloud Service and Virtual Machine pools.</span></span>
    - <span data-ttu-id="edcc0-156">A Batch szolgáltatás készletlefoglalási módja a megosztott kulcsos hitelesítést és az [Azure Active Directory-hitelesítést](batch-aad-auth.md) is támogatja.</span><span class="sxs-lookup"><span data-stu-id="edcc0-156">The Batch Service pool allocation mode supports both shared key authentication or [Azure Active Directory authentication](batch-aad-auth.md) (Azure AD).</span></span> 
    - <span data-ttu-id="edcc0-157">A Batch szolgáltatás készletlefoglalási módjával lefoglalt készletekben dedikált vagy alacsony prioritású számítási csomópontok használhatóak.</span><span class="sxs-lookup"><span data-stu-id="edcc0-157">You can use either dedicated or low-priority compute nodes in pools allocated with the Batch Service pool allocation mode.</span></span>
    - <span data-ttu-id="edcc0-158">Ne használja a Batch szolgáltatás készletlefoglalási módját, ha virtuális hálózat használatát tervezi, vagy ha egyéni virtuálisgép-rendszerképekből kíván Azure-beli virtuálisgép-készleteket létrehozni.</span><span class="sxs-lookup"><span data-stu-id="edcc0-158">Do not use the Batch Service pool allocation mode if you plan to create Azure virtual machine pools from custom VM images, or if you plan to use a virtual network.</span></span> <span data-ttu-id="edcc0-159">Ehelyett hozza létre a fiókot a felhasználói előfizetés készletlefoglalási móddal.</span><span class="sxs-lookup"><span data-stu-id="edcc0-159">Create your account with the User Subscription pool allocation mode instead.</span></span>
    - <span data-ttu-id="edcc0-160">A Batch szolgáltatás készletlefoglalási módjával létrehozott fiókban kiépített virtuálisgép-készleteket az [Azure Virtual Machines Marketplace][vm_marketplace] rendszerképeiből kell létrehozni.</span><span class="sxs-lookup"><span data-stu-id="edcc0-160">Virtual Machine pools provisioned in an account created with the Batch Service pool allocation mode must be created from [Azure Virtual Machines Marketplace][vm_marketplace] images.</span></span>

* <span data-ttu-id="edcc0-161">**Felhasználói előfizetés**: A felhasználói előfizetés készletlefoglalási móddal a Batch-készletek azon Azure-előfizetésben lesznek lefoglalva, amelyben a fiókot létrehozták.</span><span class="sxs-lookup"><span data-stu-id="edcc0-161">**User subscription**: With the User Subscription pool allocation mode, Batch pools are allocated in the Azure subscription where the account is created.</span></span> <span data-ttu-id="edcc0-162">A felhasználói előfizetés készletlefoglalási móddal kapcsolatban tartsa szem előtt az alábbi alapvető szempontokat:</span><span class="sxs-lookup"><span data-stu-id="edcc0-162">Keep in mind these key points about the User Subscription pool allocation mode:</span></span>
     
    - <span data-ttu-id="edcc0-163">A felhasználói előfizetés készletlefoglalási mód csak virtuálisgép-készleteket támogat.</span><span class="sxs-lookup"><span data-stu-id="edcc0-163">The User Subscription pool allocation mode supports only Virtual Machine pools.</span></span> <span data-ttu-id="edcc0-164">A Cloud Services-készletek nem támogatottak.</span><span class="sxs-lookup"><span data-stu-id="edcc0-164">It does not support Cloud Services pools.</span></span>
    - <span data-ttu-id="edcc0-165">Virtuálisgép-készletek egyéni virtuálisgép-rendszerképekből való létrehozásához, vagy egy, virtuálisgép-készletekkel rendelkező virtuális hálózat használatához a felhasználói előfizetés készletlefoglalási módot kell használnia.</span><span class="sxs-lookup"><span data-stu-id="edcc0-165">To create Virtual Machine pools from custom VM images or to use a virtual network with Virtual Machine pools, you must use the User Subscription pool allocation mode.</span></span>  
    - <span data-ttu-id="edcc0-166">A felhasználói előfizetésben lefoglalt készletek esetében [Azure Active Directory-hitelesítést](batch-aad-auth.md) kell használni.</span><span class="sxs-lookup"><span data-stu-id="edcc0-166">You must use [Azure Active Directory authentication](batch-aad-auth.md) with pools that are allocated in the user subscription.</span></span> 
    - <span data-ttu-id="edcc0-167">Ha a készletlefoglalási mód Felhasználói előfizetés értékűre van állítva, egy Azure Key Vaultot kell létrehozni a Batch-fiókhoz.</span><span class="sxs-lookup"><span data-stu-id="edcc0-167">You must set up an Azure key vault for your Batch account if the pool allocation mode is set to User Subscription.</span></span> 
    - <span data-ttu-id="edcc0-168">A felhasználói előfizetés készletlefoglalási móddal létrehozott fiókban csak dedikált számítási csomópontok használhatók a készletekben.</span><span class="sxs-lookup"><span data-stu-id="edcc0-168">You can use only dedicated compute nodes in pools in an account created with the User Subscription pool allocation mode.</span></span> <span data-ttu-id="edcc0-169">Alacsony prioritású csomópontok nem támogatottak.</span><span class="sxs-lookup"><span data-stu-id="edcc0-169">Low-priority nodes are not supported.</span></span>
    - <span data-ttu-id="edcc0-170">A felhasználói előfizetés készletlefoglalási móddal rendelkező fiókban kiépített virtuálisgép-készleteket az [Azure Virtual Machines Marketplace][vm_marketplace] rendszerképeiből vagy az Ön által megadott egyéni rendszerképekből lehet létrehozni.</span><span class="sxs-lookup"><span data-stu-id="edcc0-170">Virtual Machine pools provisioned in an account with the User Subscription pool allocation mode can be created either from [Azure Virtual Machines Marketplace][vm_marketplace] images, or from custom images that you provide.</span></span>

<span data-ttu-id="edcc0-171">Az alábbi táblázatban összehasonlítjuk a Batch szolgáltatás és a felhasználói előfizetés készletlefoglalási módot.</span><span class="sxs-lookup"><span data-stu-id="edcc0-171">The following table compares the Batch Service and User Subscription pool allocation modes.</span></span>

| <span data-ttu-id="edcc0-172">**Készletlefoglalási mód**</span><span class="sxs-lookup"><span data-stu-id="edcc0-172">**Pool allocation mode**</span></span>                 | <span data-ttu-id="edcc0-173">**Batch szolgáltatás**</span><span class="sxs-lookup"><span data-stu-id="edcc0-173">**Batch Service**</span></span>                                                                                       | <span data-ttu-id="edcc0-174">**Felhasználói előfizetés**</span><span class="sxs-lookup"><span data-stu-id="edcc0-174">**User Subscription**</span></span>                                                              |
|-------------------------------------------|---------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------|
| <span data-ttu-id="edcc0-175">**A készletek lefoglalásának helye**</span><span class="sxs-lookup"><span data-stu-id="edcc0-175">**Pools are allocated in**</span></span>               | <span data-ttu-id="edcc0-176">Azure által felügyelt előfizetés</span><span class="sxs-lookup"><span data-stu-id="edcc0-176">An Azure-managed subscription</span></span>                                                                           | <span data-ttu-id="edcc0-177">Az a felhasználói előfizetés, amelyben a Batch-fiók létrejött</span><span class="sxs-lookup"><span data-stu-id="edcc0-177">The user subscription in which the Batch account is created</span></span>                        |
| <span data-ttu-id="edcc0-178">**Támogatott konfigurációk**</span><span class="sxs-lookup"><span data-stu-id="edcc0-178">**Supported configurations**</span></span>             | <ul><li><span data-ttu-id="edcc0-179">Felhőszolgáltatás konfigurációja</span><span class="sxs-lookup"><span data-stu-id="edcc0-179">Cloud Service Configuration</span></span></li><li><span data-ttu-id="edcc0-180">Virtuálisgép-konfiguráció (Linux és Windows)</span><span class="sxs-lookup"><span data-stu-id="edcc0-180">Virtual Machine Configuration (Linux and Windows)</span></span></li></ul> | <ul><li><span data-ttu-id="edcc0-181">Virtuálisgép-konfiguráció (Linux és Windows)</span><span class="sxs-lookup"><span data-stu-id="edcc0-181">Virtual Machine Configuration (Linux and Windows)</span></span></li></ul>                |
| <span data-ttu-id="edcc0-182">**Támogatott virtuálisgép-rendszerképek**</span><span class="sxs-lookup"><span data-stu-id="edcc0-182">**Supported VM images**</span></span>                  | <ul><li><span data-ttu-id="edcc0-183">Azure Marketplace-rendszerképek</span><span class="sxs-lookup"><span data-stu-id="edcc0-183">Azure Marketplace images</span></span></li></ul>                                                              | <ul><li><span data-ttu-id="edcc0-184">Azure Marketplace-rendszerképek</span><span class="sxs-lookup"><span data-stu-id="edcc0-184">Azure Marketplace images</span></span></li><li><span data-ttu-id="edcc0-185">Egyéni rendszerképek</span><span class="sxs-lookup"><span data-stu-id="edcc0-185">Custom images</span></span></li></ul>                   |
| <span data-ttu-id="edcc0-186">**Támogatott számításicsomópont-típusok**</span><span class="sxs-lookup"><span data-stu-id="edcc0-186">**Supported compute node types**</span></span>         | <ul><li><span data-ttu-id="edcc0-187">Dedikált csomópontok</span><span class="sxs-lookup"><span data-stu-id="edcc0-187">Dedicated nodes</span></span></li><li><span data-ttu-id="edcc0-188">Alacsony prioritású csomópontok</span><span class="sxs-lookup"><span data-stu-id="edcc0-188">Low-priority nodes</span></span></li></ul>                                            | <ul><li><span data-ttu-id="edcc0-189">Dedikált csomópontok</span><span class="sxs-lookup"><span data-stu-id="edcc0-189">Dedicated nodes</span></span></li></ul>                                                  |
| <span data-ttu-id="edcc0-190">**Támogatott hitelesítés**</span><span class="sxs-lookup"><span data-stu-id="edcc0-190">**Supported authentication**</span></span>             | <ul><li><span data-ttu-id="edcc0-191">Megosztott kulcsos</span><span class="sxs-lookup"><span data-stu-id="edcc0-191">Shared Key</span></span></li><li><span data-ttu-id="edcc0-192">Azure AD</span><span class="sxs-lookup"><span data-stu-id="edcc0-192">Azure AD</span></span></li></ul>                                                           | <ul><li><span data-ttu-id="edcc0-193">Azure AD</span><span class="sxs-lookup"><span data-stu-id="edcc0-193">Azure AD</span></span></li></ul>                                                         |
| <span data-ttu-id="edcc0-194">**Azure Key Vault szükséges**</span><span class="sxs-lookup"><span data-stu-id="edcc0-194">**Azure Key Vault required**</span></span>             | <span data-ttu-id="edcc0-195">Nem</span><span class="sxs-lookup"><span data-stu-id="edcc0-195">No</span></span>                                                                                                      | <span data-ttu-id="edcc0-196">Igen</span><span class="sxs-lookup"><span data-stu-id="edcc0-196">Yes</span></span>                                                                                |
| <span data-ttu-id="edcc0-197">**Magkvóta**</span><span class="sxs-lookup"><span data-stu-id="edcc0-197">**Core quota**</span></span>                           | <span data-ttu-id="edcc0-198">A Batch-magkvóta határozza meg</span><span class="sxs-lookup"><span data-stu-id="edcc0-198">Determined by Batch core quota</span></span>                                                                          | <span data-ttu-id="edcc0-199">Az előfizetés magkvótája határozza meg</span><span class="sxs-lookup"><span data-stu-id="edcc0-199">Determined by subscription core quota</span></span>                                              |
| <span data-ttu-id="edcc0-200">**Azure Virtual Network- (Vnet-) támogatás**</span><span class="sxs-lookup"><span data-stu-id="edcc0-200">**Azure Virtual Network (Vnet) support**</span></span> | <span data-ttu-id="edcc0-201">Felhőszolgáltatás-konfigurációval létrehozott készletek</span><span class="sxs-lookup"><span data-stu-id="edcc0-201">Pools created with the Cloud Service Configuration</span></span>                                                      | <span data-ttu-id="edcc0-202">Virtuálisgép-konfigurációval létrehozott készletek</span><span class="sxs-lookup"><span data-stu-id="edcc0-202">Pools created with the Virtual Machine Configuration</span></span>                               |
| <span data-ttu-id="edcc0-203">**Vnet üzembehelyezési modell támogatása**</span><span class="sxs-lookup"><span data-stu-id="edcc0-203">**Vnet deployment model supported**</span></span>      | <span data-ttu-id="edcc0-204">Klasszikus üzemi modellel létrehozott Vnetek</span><span class="sxs-lookup"><span data-stu-id="edcc0-204">Vnets created with classic deployment model</span></span>                                                             | <span data-ttu-id="edcc0-205">Klasszikus üzemi modellel vagy Azure Resource Managerrel létrehozott Vnetek</span><span class="sxs-lookup"><span data-stu-id="edcc0-205">Vnets created with either the classic deployment model or Azure   Resource Manager</span></span> |

## <a name="azure-storage-account"></a><span data-ttu-id="edcc0-206">Azure Storage-fiók</span><span class="sxs-lookup"><span data-stu-id="edcc0-206">Azure Storage account</span></span>

<span data-ttu-id="edcc0-207">Az erőforrásfájlok és a kimeneti fájlok tárolására a legtöbb Batch-megoldás az Azure Storage-ot használja.</span><span class="sxs-lookup"><span data-stu-id="edcc0-207">Most Batch solutions use Azure Storage for storing resource files and output files.</span></span>  

<span data-ttu-id="edcc0-208">A Batch jelenleg kizárólag az általános célú tárfióktípust támogatja, amelynek leírása a [Tudnivalók az Azure Storage-fiókokról](../storage/common/storage-create-storage-account.md) fejezet 5., [Tárfiók létrehozása](../storage/common/storage-create-storage-account.md#create-a-storage-account) című szakaszában található.</span><span class="sxs-lookup"><span data-stu-id="edcc0-208">Batch currently supports only the general-purpose storage account type, as described in step 5 of [Create a storage account](../storage/common/storage-create-storage-account.md#create-a-storage-account) in [About Azure storage accounts](../storage/common/storage-create-storage-account.md).</span></span> <span data-ttu-id="edcc0-209">A Batch-tevékenységeknek (beleértve a szabványos tevékenységeket, az indítási tevékenységeket, a feladat-előkészítési és a feladatkiadási tevékenységeket) olyan erőforrásfájlokat kell meghatározniuk, amelyek általános célú tárfiókokban találhatóak.</span><span class="sxs-lookup"><span data-stu-id="edcc0-209">Your Batch tasks (including standard tasks, start tasks, job preparation tasks, and job release tasks) must specify resource files that reside in general-purpose storage accounts.</span></span>


## <a name="compute-node"></a><span data-ttu-id="edcc0-210">Számítási csomópont</span><span class="sxs-lookup"><span data-stu-id="edcc0-210">Compute node</span></span>
<span data-ttu-id="edcc0-211">A számítási csomópontok olyan Azure-alapú virtuális gépek vagy Cloud Service-virtuális gépek, amelyek az alkalmazás adott számítási feladatának feldolgozására vannak kijelölve.</span><span class="sxs-lookup"><span data-stu-id="edcc0-211">A compute node is an Azure virtual machine (VM) or cloud service VM that is dedicated to processing a portion of your application's workload.</span></span> <span data-ttu-id="edcc0-212">A csomópont mérete határozza meg a CPU-magok számát, a memóriakapacitást és a csomóponthoz lefoglalt helyi fájlrendszeri méretet.</span><span class="sxs-lookup"><span data-stu-id="edcc0-212">The size of a node determines the number of CPU cores, memory capacity, and local file system size that is allocated to the node.</span></span> <span data-ttu-id="edcc0-213">Windows- és Linux-csomópontokból az Azure Cloud Services, az [Azure Virtual Machines Marketplace][vm_marketplace]-ről származó rendszerképek vagy az Ön által előkészített egyéni rendszerképek segítségével hozhat létre készleteket.</span><span class="sxs-lookup"><span data-stu-id="edcc0-213">You can create pools of Windows or Linux nodes by using Azure Cloud Services, images from the [Azure Virtual Machines Marketplace][vm_marketplace], or custom images that you prepare.</span></span> <span data-ttu-id="edcc0-214">Ezekről a lehetőségekről további információkat tudhat meg az alábbi, [Készlet](#pool) című fejezetben.</span><span class="sxs-lookup"><span data-stu-id="edcc0-214">See the following [Pool](#pool) section for more information on these options.</span></span>

<span data-ttu-id="edcc0-215">A csomópontok minden olyan végrehajtható fájlt vagy parancsprogramot képesek futtatni, amelyet a csomópont operációsrendszer-környezete támogat.</span><span class="sxs-lookup"><span data-stu-id="edcc0-215">Nodes can run any executable or script that is supported by the operating system environment of the node.</span></span> <span data-ttu-id="edcc0-216">Ezek közé Windows esetén az \*.exe-, a \*.cmd-, a \*.bat-fájlok és a PowerShell-parancsfájlok tartoznak, Linux esetén pedig a bináris fájlok, valamint rendszerhéj- és Python-parancsfájlok.</span><span class="sxs-lookup"><span data-stu-id="edcc0-216">This includes \*.exe, \*.cmd, \*.bat and PowerShell scripts for Windows--and binaries, shell, and Python scripts for Linux.</span></span>

<span data-ttu-id="edcc0-217">A Batch szolgáltatásban működő számítási csomópontok emellett a következőket is tartalmazzák:</span><span class="sxs-lookup"><span data-stu-id="edcc0-217">All compute nodes in Batch also include:</span></span>

* <span data-ttu-id="edcc0-218">Szabványos [mappastruktúra](#files-and-directories), valamint az ehhez tartozó [környezeti változók](#environment-settings-for-tasks), amelyekre a tevékenységek hivatkozni tudnak.</span><span class="sxs-lookup"><span data-stu-id="edcc0-218">A standard [folder structure](#files-and-directories) and associated [environment variables](#environment-settings-for-tasks) that are available for reference by tasks.</span></span>
* <span data-ttu-id="edcc0-219">A hozzáférés vezérléséhez konfigurált **tűzfalbeállítások**.</span><span class="sxs-lookup"><span data-stu-id="edcc0-219">**Firewall** settings that are configured to control access.</span></span>
* <span data-ttu-id="edcc0-220">[Távelérés](#connecting-to-compute-nodes) a windowsos (RDP-) és a linuxos (SSH-) csomópontokhoz.</span><span class="sxs-lookup"><span data-stu-id="edcc0-220">[Remote access](#connecting-to-compute-nodes) to both Windows (Remote Desktop Protocol (RDP)) and Linux (Secure Shell (SSH)) nodes.</span></span>

## <a name="pool"></a><span data-ttu-id="edcc0-221">Készlet</span><span class="sxs-lookup"><span data-stu-id="edcc0-221">Pool</span></span>
<span data-ttu-id="edcc0-222">A készletek olyan csomópontok gyűjteményei, amelyeken az alkalmazás fut.</span><span class="sxs-lookup"><span data-stu-id="edcc0-222">A pool is a collection of nodes that your application runs on.</span></span> <span data-ttu-id="edcc0-223">A készletet manuálisan létrehozhatja Ön, vagy beállíthatja, hogy a Batch szolgáltatás hozza létre automatikusan az elvégezni kívánt munka meghatározásakor.</span><span class="sxs-lookup"><span data-stu-id="edcc0-223">The pool can be created manually by you, or automatically by the Batch service when you specify the work to be done.</span></span> <span data-ttu-id="edcc0-224">Érdemes olyan készletet létrehozni és felügyelni, amely megfelel az alkalmazás erőforrásigényeinek.</span><span class="sxs-lookup"><span data-stu-id="edcc0-224">You can create and manage a pool that meets the resource requirements of your application.</span></span> <span data-ttu-id="edcc0-225">A készleteket kizárólag az a Batch-fiók használhatja, amelyben létrehozták őket.</span><span class="sxs-lookup"><span data-stu-id="edcc0-225">A pool can be used only by the Batch account in which it was created.</span></span> <span data-ttu-id="edcc0-226">Egy Batch-fiók több készlettel is rendelkezhet.</span><span class="sxs-lookup"><span data-stu-id="edcc0-226">A Batch account can have more than one pool.</span></span>

<span data-ttu-id="edcc0-227">Az Azure Batch-fiókok az Azure számítási platformjára épülnek.</span><span class="sxs-lookup"><span data-stu-id="edcc0-227">Azure Batch pools build on top of the core Azure compute platform.</span></span> <span data-ttu-id="edcc0-228">A készletek nagy méretű lefoglalást, alkalmazástelepítést, adatelosztást és állapotfigyelést biztosítanak, valamint a készletben működő számítási csomópontok számának rugalmas módosítását (azaz a [skálázást](#scaling-compute-resources)) is lehetővé teszik.</span><span class="sxs-lookup"><span data-stu-id="edcc0-228">They provide large-scale allocation, application installation, data distribution, health monitoring, and flexible adjustment of the number of compute nodes within a pool ([scaling](#scaling-compute-resources)).</span></span>

<span data-ttu-id="edcc0-229">A készlethez adott minden csomóponthoz egyedi név és IP-cím van rendelve.</span><span class="sxs-lookup"><span data-stu-id="edcc0-229">Every node that is added to a pool is assigned a unique name and IP address.</span></span> <span data-ttu-id="edcc0-230">Amikor eltávolít egy csomópontot a készletből, elveszíti az operációs rendszeren vagy a fájlokon végzett módosításokat, és a rendszer kiadja a csomópont nevét és IP-címét további használatra.</span><span class="sxs-lookup"><span data-stu-id="edcc0-230">When a node is removed from a pool, any changes that are made to the operating system or files are lost, and its name and IP address are released for future use.</span></span> <span data-ttu-id="edcc0-231">Amikor egy csomópont kikerül egy készletből, vége van az élettartamának.</span><span class="sxs-lookup"><span data-stu-id="edcc0-231">When a node leaves a pool, its lifetime is over.</span></span>

<span data-ttu-id="edcc0-232">Készlet létrehozásakor a következő attribútumokat adhatja meg.</span><span class="sxs-lookup"><span data-stu-id="edcc0-232">When you create a pool, you can specify the following attributes.</span></span> <span data-ttu-id="edcc0-233">Néhány beállítás a Batch-[fiók](#account) készletlefoglalási módjától függően eltérő:</span><span class="sxs-lookup"><span data-stu-id="edcc0-233">Some settings differ, depending on the pool allocation mode of the Batch [account](#account):</span></span>

- <span data-ttu-id="edcc0-234">A számítási csomópont operációs rendszere és verziója</span><span class="sxs-lookup"><span data-stu-id="edcc0-234">Compute node operating system and version</span></span>
- <span data-ttu-id="edcc0-235">A számítási csomópont típusa és a csomópontok kívánt száma</span><span class="sxs-lookup"><span data-stu-id="edcc0-235">Compute node type and target number of nodes</span></span>
- <span data-ttu-id="edcc0-236">A számítási csomópontok mérete</span><span class="sxs-lookup"><span data-stu-id="edcc0-236">Size of the compute nodes</span></span>
- <span data-ttu-id="edcc0-237">Skálázási szabályzat</span><span class="sxs-lookup"><span data-stu-id="edcc0-237">Scaling policy</span></span>
- <span data-ttu-id="edcc0-238">Tevékenységütemezési szabályzat</span><span class="sxs-lookup"><span data-stu-id="edcc0-238">Task scheduling policy</span></span>
- <span data-ttu-id="edcc0-239">A számítási csomópontok kommunikációs állapota</span><span class="sxs-lookup"><span data-stu-id="edcc0-239">Communication status for compute nodes</span></span>
- <span data-ttu-id="edcc0-240">A számítási csomópontok indítási tevékenységei</span><span class="sxs-lookup"><span data-stu-id="edcc0-240">Start tasks for compute nodes</span></span>
- <span data-ttu-id="edcc0-241">Alkalmazáscsomagok</span><span class="sxs-lookup"><span data-stu-id="edcc0-241">Application packages</span></span>
- <span data-ttu-id="edcc0-242">Hálózati konfiguráció</span><span class="sxs-lookup"><span data-stu-id="edcc0-242">Network configuration</span></span>

<span data-ttu-id="edcc0-243">Ezen beállítások részletesebb leírását az alábbi szakaszokban találja.</span><span class="sxs-lookup"><span data-stu-id="edcc0-243">Each of these settings is described in more detail in the following sections.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="edcc0-244">A Batch szolgáltatás készletlefoglalási módjával létrehozott Batch-fiókokhoz alapértelmezett kvóta tartozik, amely korlátozza a magok számát a Batch-fiókokban.</span><span class="sxs-lookup"><span data-stu-id="edcc0-244">Batch accounts created with the Batch Service pool allocation mode have a default quota that limits the number of cores in a Batch account.</span></span> <span data-ttu-id="edcc0-245">A magok száma a számítási csomópontok számának felel meg.</span><span class="sxs-lookup"><span data-stu-id="edcc0-245">The number of cores corresponds to the number of compute nodes.</span></span> <span data-ttu-id="edcc0-246">Az alapértelmezett kvótákat és a [kvóták növelésével](batch-quota-limit.md#increase-a-quota) kapcsolatos útmutatásokat [Quotas and limits for the Azure Batch service](batch-quota-limit.md) (Az Azure Batch szolgáltatás kvótái és korlátai) című témakörben találja.</span><span class="sxs-lookup"><span data-stu-id="edcc0-246">You can find the default quotas and instructions on how to [increase a quota](batch-quota-limit.md#increase-a-quota) in [Quotas and limits for the Azure Batch service](batch-quota-limit.md).</span></span> <span data-ttu-id="edcc0-247">A magkvóta lehet az oka, hogy a készlet esetleg nem éri el a csomópontok kitűzött számát.</span><span class="sxs-lookup"><span data-stu-id="edcc0-247">If your pool is not achieving its target number of nodes, the core quota might be the reason.</span></span>
>
><span data-ttu-id="edcc0-248">A felhasználói előfizetés készletlefoglalási móddal létrehozott Batch-fiókok nem veszik figyelembe a Batch szolgáltatás kvótáit.</span><span class="sxs-lookup"><span data-stu-id="edcc0-248">Batch accounts created with the User Subscription pool allocation mode do not observe the Batch service quotas.</span></span> <span data-ttu-id="edcc0-249">Ehelyett az előfizetés számára megadott magkvótán osztoznak.</span><span class="sxs-lookup"><span data-stu-id="edcc0-249">Instead, they share in the core quota for the specified subscription.</span></span> <span data-ttu-id="edcc0-250">További információkért lásd [az Azure-előfizetésekre és -szolgáltatásokra vonatkozó korlátozásokat, kvótákat és megkötéseket](../azure-subscription-service-limits.md) ismertető témakör [a virtuális gépek korlátaira](../azure-subscription-service-limits.md#virtual-machines-limits) vonatkozó részét.</span><span class="sxs-lookup"><span data-stu-id="edcc0-250">For more information, see [Virtual Machines limits](../azure-subscription-service-limits.md#virtual-machines-limits) in [Azure subscription and service limits, quotas, and constraints](../azure-subscription-service-limits.md).</span></span>
>
>

### <a name="compute-node-operating-system-and-version"></a><span data-ttu-id="edcc0-251">A számítási csomópont operációs rendszere és verziója</span><span class="sxs-lookup"><span data-stu-id="edcc0-251">Compute node operating system and version</span></span>

<span data-ttu-id="edcc0-252">A Batch-készlet létrehozásakor megadhatja az Azure virtuálisgép-konfigurációt és a készlet egyes számítási csomópontokon futtatni kívánt operációs rendszer típusát.</span><span class="sxs-lookup"><span data-stu-id="edcc0-252">When you create a Batch pool, you can specify the Azure virtual machine configuration and the type of operating system you want to run on each compute node in the pool.</span></span> <span data-ttu-id="edcc0-253">A Batch szolgáltatásban az alábbi két konfigurációtípus használható:</span><span class="sxs-lookup"><span data-stu-id="edcc0-253">The two types of configurations available in Batch are:</span></span>

- <span data-ttu-id="edcc0-254">A **Virtuális gépek konfigurációja** megadja, hogy a készlet Azure virtuális gépekből áll.</span><span class="sxs-lookup"><span data-stu-id="edcc0-254">The **Virtual Machine Configuration**, which specifies that the pool is comprised of Azure virtual machines.</span></span> <span data-ttu-id="edcc0-255">Ezek a virtuális gépek Linux- vagy Windows-rendszerképből is létrehozhatók.</span><span class="sxs-lookup"><span data-stu-id="edcc0-255">These VMs may be created from either Linux or Windows images.</span></span> 

    <span data-ttu-id="edcc0-256">Ha a virtuálisgép-konfiguráción alapuló készletet hoz létre, a csomópontok mérete és a létrehozásukhoz használt rendszerképek forrása mellett a **virtuális gép képhivatkozását** és a csomópontokra telepítendő **Batch-csomóponti ügynök SKU-ját** is meg kell adnia.</span><span class="sxs-lookup"><span data-stu-id="edcc0-256">When you create a pool based on the Virtual Machine Configuration, you must specify not only the size of the nodes and the source of the images used to create them, but also the **virtual machine image reference** and the Batch **node agent SKU** to be installed on the nodes.</span></span> <span data-ttu-id="edcc0-257">A készlet e tulajdonságainak megadásával kapcsolatos további információk: [Provision Linux compute nodes in Azure Batch pools](batch-linux-nodes.md) (Linuxos számítási csomópontok kiépítése Azure Batch-készletekben).</span><span class="sxs-lookup"><span data-stu-id="edcc0-257">For more information about specifying these pool properties, see [Provision Linux compute nodes in Azure Batch pools](batch-linux-nodes.md).</span></span>

- <span data-ttu-id="edcc0-258">A **Cloud Services-konfiguráció**, amely megadja, hogy a készlet Azure Cloud Services-csomópontokból áll.</span><span class="sxs-lookup"><span data-stu-id="edcc0-258">The **Cloud Services Configuration**, which specifies that the pool is comprised of Azure Cloud Services nodes.</span></span> <span data-ttu-id="edcc0-259">A Cloud Services *kizárólag* windowsos számítási csomópontok létrehozására használható.</span><span class="sxs-lookup"><span data-stu-id="edcc0-259">Cloud Services provide Windows compute nodes *only*.</span></span>

    <span data-ttu-id="edcc0-260">A Cloud Services-konfigurációval beállított készletekhez elérhető operációs rendszerek listáját az [Azure Guest OS releases and SDK compatibility matrix](../cloud-services/cloud-services-guestos-update-matrix.md) (Vendég operációs rendszerek kiadásai és SDK-kompatibilitási mátrix az Azure-hoz) című cikk ismerteti.</span><span class="sxs-lookup"><span data-stu-id="edcc0-260">Available operating systems for Cloud Services Configuration pools are listed in the [Azure Guest OS releases and SDK compatibility matrix](../cloud-services/cloud-services-guestos-update-matrix.md).</span></span> <span data-ttu-id="edcc0-261">Ha Cloud Services-konfigurációt használó csomópontokat tartalmazó készletet hoz létre, meg kell adnia a csomópont méretét és az *operációsrendszer-családot*.</span><span class="sxs-lookup"><span data-stu-id="edcc0-261">When you create a pool that contains Cloud Services nodes, you need to specify the node size and its *OS Family*.</span></span> <span data-ttu-id="edcc0-262">A Cloud Services gyorsabban üzembe helyezhető az Azure-ban, mint a Windows rendszerű virtuális gépek.</span><span class="sxs-lookup"><span data-stu-id="edcc0-262">Cloud Services are deployed to Azure more quickly than virtual machines running Windows.</span></span> <span data-ttu-id="edcc0-263">Ha windowsos számítási csomópontok készleteire van szükség, előfordulhat, hogy a Cloud Services üzembe helyezési idő szempontjából teljesítményelőnyt nyújt.</span><span class="sxs-lookup"><span data-stu-id="edcc0-263">If you want pools of Windows compute nodes, you may find that Cloud Services provide a performance benefit in terms of deployment time.</span></span>

    * <span data-ttu-id="edcc0-264">Az *operációsrendszer-család* azt is meghatározza, hogy a .NET melyik verziója van telepítve az operációs rendszerrel.</span><span class="sxs-lookup"><span data-stu-id="edcc0-264">The *OS Family* also determines which versions of .NET are installed with the OS.</span></span>
    * <span data-ttu-id="edcc0-265">Ahogy a Cloud Services feldolgozói szerepkörei esetében, itt is megadhatja az *operációs rendszer verzióját* (a feldolgozói szerepkörökkel kapcsolatos további információkért olvassa el a [Cloud Services overview](../cloud-services/cloud-services-choose-me.md) (A Cloud Services áttekintése) című cikk [Tell me about cloud services](../cloud-services/cloud-services-choose-me.md#tell-me-about-cloud-services) (További információk a Cloud Servicesről) című fejezetét).</span><span class="sxs-lookup"><span data-stu-id="edcc0-265">As with worker roles within Cloud Services, you can specify an *OS Version* (for more information on worker roles, see the [Tell me about cloud services](../cloud-services/cloud-services-choose-me.md#tell-me-about-cloud-services) section in the [Cloud Services overview](../cloud-services/cloud-services-choose-me.md)).</span></span>
    * <span data-ttu-id="edcc0-266">A feldolgozói szerepkörökhöz hasonlóan ajánlott a `*` értéket megadni az *Operációs rendszer verziója* beállításnál, hogy a csomópontok automatikusan frissüljenek, és ne kelljen semmilyen műveletet végeznie, ha új verzió jelenik meg.</span><span class="sxs-lookup"><span data-stu-id="edcc0-266">As with worker roles, we recommend that you specify `*` for the *OS Version* so that the nodes are automatically upgraded, and there is no work required to cater to newly released versions.</span></span> <span data-ttu-id="edcc0-267">Azért tanácsos megadni a konkrét operációsrendszer-verziót, mert így garantálható az alkalmazások kompatibilitása, hogy így a korábbi verziókkal való kompatibilitási tesztet lehessen végezni a verziófrissítés engedélyezése előtt.</span><span class="sxs-lookup"><span data-stu-id="edcc0-267">The primary use case for selecting a specific OS version is to ensure application compatibility, which allows backward compatibility testing to be performed before allowing the version to be updated.</span></span> <span data-ttu-id="edcc0-268">Az ellenőrzést követően frissítheti a készlet *operációsrendszer-verzióját*, és telepítheti az új operációsrendszer-képet. A rendszer ilyenkor megszakítja a futó feladatokat, és újból a várólistára helyezi őket.</span><span class="sxs-lookup"><span data-stu-id="edcc0-268">After validation, the *OS Version* for the pool can be updated and the new OS image can be installed--any running tasks are interrupted and requeued.</span></span>

<span data-ttu-id="edcc0-269">Készletek létrehozásakor ki kell választania a megfelelő **nodeAgentSkuId** értéket a virtuális merevlemez alapképének operációs rendszerétől függően.</span><span class="sxs-lookup"><span data-stu-id="edcc0-269">When you create a pool, you need to select the appropriate **nodeAgentSkuId**, depending on the OS of the base image of your VHD.</span></span> <span data-ttu-id="edcc0-270">A rendelkezésre álló csomóponti ügynök SKU-knak az operációsrendszerkép-hivatkozásokra való leképezéséhez hívhatja [Támogatott csomóponti ügynökök SKU-azonosítói](https://docs.microsoft.com/rest/api/batchservice/list-supported-node-agent-skus) műveletet.</span><span class="sxs-lookup"><span data-stu-id="edcc0-270">You can get a mapping of available node agent SKU ID's to their OS Image references by calling the [List Supported Node Agent SKUs](https://docs.microsoft.com/rest/api/batchservice/list-supported-node-agent-skus) operation.</span></span>

<span data-ttu-id="edcc0-271">A [Fiók](#account) szakaszban olvashat a készletlefoglalási mód beállításáról a Batch-fiók létrehozásakor.</span><span class="sxs-lookup"><span data-stu-id="edcc0-271">See the [Account](#account) section for information on setting the pool allocation mode when you create a Batch account.</span></span>

#### <a name="custom-images-for-virtual-machine-pools"></a><span data-ttu-id="edcc0-272">Egyéni rendszerképek virtuálisgép-készletekhez</span><span class="sxs-lookup"><span data-stu-id="edcc0-272">Custom images for Virtual Machine pools</span></span>

<span data-ttu-id="edcc0-273">Ahhoz, hogy egyéni lemezképeket használhasson virtuálisgép-készletek kiépítéséhez, a felhasználói előfizetés készletlefoglalási móddal hozza létre Batch-fiókját.</span><span class="sxs-lookup"><span data-stu-id="edcc0-273">To use a custom image to provision Virtual Machine pools, create your Batch account with the User Subscription pool allocation mode.</span></span> <span data-ttu-id="edcc0-274">Ennek a módnak a használatakor a Batch-készletek abban az előfizetésben lesznek lefoglalva, amelyben a fiók található.</span><span class="sxs-lookup"><span data-stu-id="edcc0-274">With this mode, Batch pools are allocated into the subscription where the account resides.</span></span> <span data-ttu-id="edcc0-275">A [Fiók](#account) szakaszban olvashat a készletlefoglalási mód beállításáról a Batch-fiók létrehozásakor.</span><span class="sxs-lookup"><span data-stu-id="edcc0-275">See the [Account](#account) section for information on setting the pool allocation mode when you create a Batch account.</span></span>

<span data-ttu-id="edcc0-276">Egyéni rendszerkép használatához elő kell készítenie a rendszerképet annak normalizálásával.</span><span class="sxs-lookup"><span data-stu-id="edcc0-276">To use a custom image, you'll need to prepare the image by generalizing it.</span></span> <span data-ttu-id="edcc0-277">További tudnivalókat az Azure-beli virtuális gépekről származó egyéni Linux-rendszerképek előkészítéséről az [Azure-beli, Linux rendszerű virtuális gépek sablonként történő használathoz való rögzítését ismertető](../virtual-machines/linux/capture-image-nodejs.md) cikkben találhat.</span><span class="sxs-lookup"><span data-stu-id="edcc0-277">For information about preparing custom Linux images from Azure VMs, see [Capture an Azure Linux VM to use as a template](../virtual-machines/linux/capture-image-nodejs.md).</span></span> <span data-ttu-id="edcc0-278">További tudnivalókat az Azure-beli virtuális gépekről származó egyéni Windows-rendszerképek előkészítéséről az [egyéni virtuálisgép-rendszerképek Azure PowerShell-lel való létrehozását ismertető](../virtual-machines/windows/tutorial-custom-images.md) cikkben találhat.</span><span class="sxs-lookup"><span data-stu-id="edcc0-278">For information about preparing custom Windows images from Azure VMs, see [Create custom VM images with Azure PowerShell](../virtual-machines/windows/tutorial-custom-images.md).</span></span> 

> [!IMPORTANT]
> <span data-ttu-id="edcc0-279">Az egyéni rendszerkép előkészítésekor tartsa szem előtt a következőket:</span><span class="sxs-lookup"><span data-stu-id="edcc0-279">When preparing your custom image, keep in mind the following:</span></span>
> - <span data-ttu-id="edcc0-280">Ellenőrizze, hogy a Batch-készletek kiépítéséhez használt alap operációsrendszer-képen nincs-e semmilyen előre telepített Azure-bővítmény, például egyéni szkriptbővítmény.</span><span class="sxs-lookup"><span data-stu-id="edcc0-280">Ensure that the base OS image you use to provision your Batch pools does not have any pre-installed Azure extensions, such as the Custom Script extension.</span></span> <span data-ttu-id="edcc0-281">Ha a rendszerkép előre telepített bővítményt tartalmaz, az Azure problémába ütközhet a virtuális gép üzembe helyezése során.</span><span class="sxs-lookup"><span data-stu-id="edcc0-281">If the image contains a pre-installed extension, Azure may encounter problems deploying the VM.</span></span>
> - <span data-ttu-id="edcc0-282">Ügyeljen rá, hogy az Ön által biztosított alap operációsrendszer-kép az alapértelmezett ideiglenes meghajtót használja, mivel a Batch-csomópontügynök jelenleg ezt várja el.</span><span class="sxs-lookup"><span data-stu-id="edcc0-282">Ensure that the base OS image you provide uses the default temp drive, as the Batch node agent currently expects the default temp drive.</span></span>
>
>

<span data-ttu-id="edcc0-283">Virtuálisgép-konfigurációs készletek egyéni rendszerkép használatával való létrehozása esetén az egyéni virtuálismerevlemez-képek tárolásához szüksége lesz egy vagy több szabványos Azure Storage-tárfiókra.</span><span class="sxs-lookup"><span data-stu-id="edcc0-283">To create a Virtual Machine Configuration pool using a custom image, you'll need one or more standard Azure Storage accounts to store your custom VHD images.</span></span> <span data-ttu-id="edcc0-284">Az egyéni lemezképek blobként vannak tárolva.</span><span class="sxs-lookup"><span data-stu-id="edcc0-284">Custom images are stored as blobs.</span></span> <span data-ttu-id="edcc0-285">A készletek létrehozásakor az egyéni rendszerképekre való hivatkozáshoz a [virtualMachineConfiguration](https://docs.microsoft.com/rest/api/batchservice/add-a-pool-to-an-account#bk_vmconf) tulajdonság [osDisk](https://docs.microsoft.com/rest/api/batchservice/add-a-pool-to-an-account#bk_osdisk) tulajdonságához adja meg az egyéni virtuálismerevlemez-blobok URI-azonosítóját.</span><span class="sxs-lookup"><span data-stu-id="edcc0-285">To reference your custom images when you create a pool, specify the URIs of the custom image VHD blobs for the [osDisk](https://docs.microsoft.com/rest/api/batchservice/add-a-pool-to-an-account#bk_osdisk) property of the [virtualMachineConfiguration](https://docs.microsoft.com/rest/api/batchservice/add-a-pool-to-an-account#bk_vmconf) property.</span></span>

<span data-ttu-id="edcc0-286">Győződjön meg arról, hogy a tárfiókok megfelelnek a következő feltételeknek:</span><span class="sxs-lookup"><span data-stu-id="edcc0-286">Make sure that your storage accounts meet the following criteria:</span></span>   

- <span data-ttu-id="edcc0-287">Az egyéni virtuálismerevlemez-blobokat tartalmazó tárfiókoknak ugyanahhoz az előfizetéshez kell tartozniuk, mint a Batch-fióknak (az előfizetett felhasználónak).</span><span class="sxs-lookup"><span data-stu-id="edcc0-287">The storage accounts containing the custom image VHD blobs need to be in the same subscription as the Batch account (the user subscription).</span></span>
- <span data-ttu-id="edcc0-288">A megadott tárfiókoknak ugyanabban a régióban kell lennie, mint a Batch-fióknak.</span><span class="sxs-lookup"><span data-stu-id="edcc0-288">The specified storage accounts need to be in the same region as the Batch account.</span></span>
- <span data-ttu-id="edcc0-289">Jelenleg csak a standard szintű, általános célú tárfiókok támogatottak.</span><span class="sxs-lookup"><span data-stu-id="edcc0-289">Only standard general-purpose storage accounts are currently supported.</span></span> <span data-ttu-id="edcc0-290">A jövőben a prémium szintű Azure Storage is támogatott lesz.</span><span class="sxs-lookup"><span data-stu-id="edcc0-290">Azure Premium storage will be supported in the future.</span></span>
- <span data-ttu-id="edcc0-291">Megadhat több egyéni virtuálismerevlemez-blobbal rendelkező tárfiókot, vagy több tárfiókot egyetlen blobhoz.</span><span class="sxs-lookup"><span data-stu-id="edcc0-291">You can specify one storage account with multiple custom VHD blobs or multiple storage accounts each having a single blob.</span></span> <span data-ttu-id="edcc0-292">A jobb teljesítmény érdekében javasolt több tárfiókot használni.</span><span class="sxs-lookup"><span data-stu-id="edcc0-292">We recommend you to use multiple storage accounts to get a better performance.</span></span>
- <span data-ttu-id="edcc0-293">Egyetlen egyedi egyéni lemezkép virtuálismerevlemez-blobja legfeljebb 40 linuxos virtuálisgép-példányt vagy 20 windowsos virtuálisgép-példányt képes támogatni.</span><span class="sxs-lookup"><span data-stu-id="edcc0-293">One unique custom image VHD blob can support up to 40 Linux VM instances or 20 Windows VM instances.</span></span> <span data-ttu-id="edcc0-294">Több virtuális géppel rendelkező készletek létrehozásához másolatokat kell készíteni a virtuálismerevlemez-blobról.</span><span class="sxs-lookup"><span data-stu-id="edcc0-294">You will need to create copies of the VHD blob to create pools with more VMs.</span></span> <span data-ttu-id="edcc0-295">Például egy 200 Windows rendszerű virtuális géppel rendelkező készlethez 10 egyedi virtuálismerevlemez-blobot kell megadni az **osDisk** tulajdonságban.</span><span class="sxs-lookup"><span data-stu-id="edcc0-295">For example, a pool with 200 Windows VMs needs 10 unique VHD blobs specified for the **osDisk** property.</span></span>

<span data-ttu-id="edcc0-296">Készlet készítése egyéni lemezképből az Azure Portal használatával:</span><span class="sxs-lookup"><span data-stu-id="edcc0-296">To create a pool from a custom image using the Azure portal:</span></span>

1. <span data-ttu-id="edcc0-297">Az Azure portálon lépjen Batch-fiókjára.</span><span class="sxs-lookup"><span data-stu-id="edcc0-297">Navigate to your Batch account in the Azure portal.</span></span>
2. <span data-ttu-id="edcc0-298">A **Beállítások** panelen válassza a **Készletek** menüpontot.</span><span class="sxs-lookup"><span data-stu-id="edcc0-298">On the **Settings** blade, select the **Pools** menu item.</span></span>
3. <span data-ttu-id="edcc0-299">A **Készletek** panelen válassza a **Hozzáadás** parancsot; a **Készlet hozzáadása** panel fog megjelenni.</span><span class="sxs-lookup"><span data-stu-id="edcc0-299">On the **Pools** blade, select the **Add** command; the **Add pool** blade will be displayed.</span></span>
4. <span data-ttu-id="edcc0-300">A **Lemezkép típusa** legördülő menüben válassza az **Egyéni lemezkép (Linux/Windows)** elemet.</span><span class="sxs-lookup"><span data-stu-id="edcc0-300">Select **Custom Image (Linux/Windows)** from the **Image Type** dropdown.</span></span> <span data-ttu-id="edcc0-301">A portál megjeleníti az **Egyéni lemezkép** választóvezérlőt.</span><span class="sxs-lookup"><span data-stu-id="edcc0-301">The portal displays the **Custom Image** picker.</span></span> <span data-ttu-id="edcc0-302">Jelöljön ki egy vagy több VHD-fájlt ugyanazon tárolóból, majd kattintson a **Kijelölés** gombra.</span><span class="sxs-lookup"><span data-stu-id="edcc0-302">Choose one or more VHDs from the same container and click the **Select** button.</span></span> 
    <span data-ttu-id="edcc0-303">A jövőben támogatni fogjuk a több, különböző tárfiókokban és különböző tárolókban található virtuális merevlemezt is.</span><span class="sxs-lookup"><span data-stu-id="edcc0-303">Support for multiple VHDs from different storage accounts and different containers will be added in the future.</span></span>
5. <span data-ttu-id="edcc0-304">Jelölje ki a megfelelő **Gyártó/ajánlat/Sku** elemet az egyéni virtuális merevlemezekhez, válassza ki a kívánt **gyorsítótárazási** módot, majd töltse ki a készlet összes többi paraméterét.</span><span class="sxs-lookup"><span data-stu-id="edcc0-304">Select the correct **Publisher/Offer/Sku** for your custom VHDs, select the desired **Caching** mode, then fill in all the other parameters for the pool.</span></span>
6. <span data-ttu-id="edcc0-305">Annak ellenőrzéséhez, hogy egyéni rendszerképen alapul-e a készlet, tekintse meg az **Operációs rendszer** tulajdonságot az erőforrás adatai között a **Készlet** panelen.</span><span class="sxs-lookup"><span data-stu-id="edcc0-305">To check if a pool is based on a custom image, see the **Operating System** property in the resource summary section of the **Pool** blade.</span></span> <span data-ttu-id="edcc0-306">A tulajdonság értéke **Egyéni virtuálisgép-rendszerkép** kell, hogy legyen.</span><span class="sxs-lookup"><span data-stu-id="edcc0-306">The value of this property should be **Custom VM image**.</span></span>
7. <span data-ttu-id="edcc0-307">A készlethez társított összes egyéni virtuális merevlemez megjelenik a készlet **Tulajdonságok** paneljén.</span><span class="sxs-lookup"><span data-stu-id="edcc0-307">All custom VHDs associated with a pool are displayed on the pool's **Properties** blade.</span></span>

### <a name="compute-node-type-and-target-number-of-nodes"></a><span data-ttu-id="edcc0-308">A számítási csomópont típusa és a csomópontok kívánt száma</span><span class="sxs-lookup"><span data-stu-id="edcc0-308">Compute node type and target number of nodes</span></span>

<span data-ttu-id="edcc0-309">Készlet létrehozásakor megadható, hogy milyen típusú számítási csomópontokat és azokból mennyit kíván.</span><span class="sxs-lookup"><span data-stu-id="edcc0-309">When you create a pool, you can specify which types of compute nodes you want and the target number for each.</span></span> <span data-ttu-id="edcc0-310">A számítási csomópontok két típusa:</span><span class="sxs-lookup"><span data-stu-id="edcc0-310">The two types of compute nodes are:</span></span>

- <span data-ttu-id="edcc0-311">**Dedikált számítási csomópontok.**</span><span class="sxs-lookup"><span data-stu-id="edcc0-311">**Dedicated compute nodes.**</span></span> <span data-ttu-id="edcc0-312">A dedikált számítási csomópontok az adott feladatra vannak fenntartva.</span><span class="sxs-lookup"><span data-stu-id="edcc0-312">Dedicated compute nodes are reserved for your workloads.</span></span> <span data-ttu-id="edcc0-313">Költségesebbek az alacsony prioritású csomópontoknál, de biztosan nem szorulnak háttérbe.</span><span class="sxs-lookup"><span data-stu-id="edcc0-313">They are more expensive than low-priority nodes, but they are guaranteed to never be preempted.</span></span>

- <span data-ttu-id="edcc0-314">**Alacsony prioritású számítási csomópontok.**</span><span class="sxs-lookup"><span data-stu-id="edcc0-314">**Low-priority compute nodes.**</span></span> <span data-ttu-id="edcc0-315">Az alacsony prioritású csomópontok az Azure többletkapacitását használják ki a Batch-feladatok futtatásához.</span><span class="sxs-lookup"><span data-stu-id="edcc0-315">Low-priority nodes take advantage of surplus capacity in Azure to run your Batch workloads.</span></span> <span data-ttu-id="edcc0-316">Az alacsony prioritású csomópontok olcsóbbak óránként, mint a dedikáltak, és nagy számítási teljesítményt igénylő feladatok futtatását teszik lehetővé.</span><span class="sxs-lookup"><span data-stu-id="edcc0-316">Low-priority nodes are less expensive per hour than dedicated nodes, and enable workloads requiring a lot of compute power.</span></span> <span data-ttu-id="edcc0-317">További információ: [Alacsony prioritású virtuális gépek használata a Batch szolgáltatással](batch-low-pri-vms.md).</span><span class="sxs-lookup"><span data-stu-id="edcc0-317">For more information, see [Use low-priority VMs with Batch](batch-low-pri-vms.md).</span></span>

    <span data-ttu-id="edcc0-318">Az alacsony prioritású számítási csomópontok háttérbe szorulhatnak, ha az Azure-ban nem áll rendelkezése elég többletkapacitás.</span><span class="sxs-lookup"><span data-stu-id="edcc0-318">Low-priority compute nodes may be preempted when Azure has insufficient surplus capacity.</span></span> <span data-ttu-id="edcc0-319">Amennyiben egy csomópont feladatok futása közben szorul háttérbe, akkor a feladatok visszakerülnek a várakozási sorba, és újra futnak, amikor a számítási csomópont ismét elérhetővé válik.</span><span class="sxs-lookup"><span data-stu-id="edcc0-319">If a node is preempted while running tasks, the tasks are requeued and run again once a compute node becomes available again.</span></span> <span data-ttu-id="edcc0-320">Az alacsony prioritású csomópontokat akkor érdemes választani, ha a feladat végrehajtási ideje rugalmas, és a munka sok csomóponton oszlik meg.</span><span class="sxs-lookup"><span data-stu-id="edcc0-320">Low-priority nodes are a good option for workloads where the job completion time is flexible and the work is distributed across many nodes.</span></span> <span data-ttu-id="edcc0-321">Mielőtt az alacsony prioritású csomópontok használata mellett döntene, győződjön meg arról, hogy az előzetes lefoglalás miatt elveszett munka minimális és könnyen újra létrehozható lesz-e.</span><span class="sxs-lookup"><span data-stu-id="edcc0-321">Before you decide to use low-priority nodes for your scenario, make sure that any work lost due to preemption will be minimal and easy to recreate.</span></span>

    <span data-ttu-id="edcc0-322">Alacsony prioritású számítási csomópontok csak **Batch szolgáltatás** foglalási módban létrehozott Batch-fiókokkal állnak rendelkezésre.</span><span class="sxs-lookup"><span data-stu-id="edcc0-322">Low-priority compute nodes are available only for Batch accounts created with the pool allocation mode set to **Batch Service**.</span></span>

<span data-ttu-id="edcc0-323">Ugyanabban a készletben alacsony prioritású és dedikált csomópontok is lehetnek.</span><span class="sxs-lookup"><span data-stu-id="edcc0-323">You can have both low-priority and dedicated compute nodes in the same pool.</span></span> <span data-ttu-id="edcc0-324">Mindkét csomóponttípus (&mdash;az alacsony prioritású és a dedikált&mdash; is) saját célbeállításokkal rendelkezik, amelyhez megadható a csomópontok kívánt száma.</span><span class="sxs-lookup"><span data-stu-id="edcc0-324">Each type of node &mdash; low-priority and dedicated &mdash; has its own target setting, for which you can specify the desired number of nodes.</span></span> 
    
<span data-ttu-id="edcc0-325">A számítási csomópontok számát azért nevezzük *cél*-értéknek, mert előfordulhat, hogy a készletben nem lehet a kívánt számú csomópontot alkalmazni.</span><span class="sxs-lookup"><span data-stu-id="edcc0-325">The number of compute nodes is referred to as a *target* because, in some situations, your pool might not reach the desired number of nodes.</span></span> <span data-ttu-id="edcc0-326">Egy készlet például nem érheti el a célértéket, ha először a Batch-fiók [magkvótáját](batch-quota-limit.md) éri el.</span><span class="sxs-lookup"><span data-stu-id="edcc0-326">For example, a pool might not achieve the target if it reaches the [core quota](batch-quota-limit.md) for your Batch account first.</span></span> <span data-ttu-id="edcc0-327">Az is előfordulhat, hogy a készlet azért nem éri el a célértéket, mert automatikusan skálázó képlet van megadva hozzá a csomópontok maximális számának korlátozására.</span><span class="sxs-lookup"><span data-stu-id="edcc0-327">Or, the pool might not achieve the target if you have applied an auto-scaling formula to the pool that limits the maximum number of nodes.</span></span>

<span data-ttu-id="edcc0-328">Az alacsony prioritású és dedikált számítási csomópontok díjszabását a [Batch díjszabása](https://azure.microsoft.com/pricing/details/batch/) írja le.</span><span class="sxs-lookup"><span data-stu-id="edcc0-328">For pricing information for both low-priority and dedicated compute nodes, see [Batch Pricing](https://azure.microsoft.com/pricing/details/batch/).</span></span>

### <a name="size-of-the-compute-nodes"></a><span data-ttu-id="edcc0-329">A számítási csomópontok mérete</span><span class="sxs-lookup"><span data-stu-id="edcc0-329">Size of the compute nodes</span></span>

<span data-ttu-id="edcc0-330">A **Cloud Services-konfigurációt** használó számítási csomópontok méretét a [Sizes for Cloud Services](../cloud-services/cloud-services-sizes-specs.md) (A Cloud Servicesben érvényes méretek) című cikk tartalmazza.</span><span class="sxs-lookup"><span data-stu-id="edcc0-330">**Cloud Services Configuration** compute node sizes are listed in [Sizes for Cloud Services](../cloud-services/cloud-services-sizes-specs.md).</span></span> <span data-ttu-id="edcc0-331">A Batch az `ExtraSmall`, `STANDARD_A1_V2` és `STANDARD_A2_V2` kivételével az összes Cloud Services-méretet támogatja.</span><span class="sxs-lookup"><span data-stu-id="edcc0-331">Batch supports all Cloud Services sizes except `ExtraSmall`, `STANDARD_A1_V2`, and `STANDARD_A2_V2`.</span></span>

<span data-ttu-id="edcc0-332">A **virtuálisgép-konfigurációt** használó számítási csomópontok méretét a [Sizes for virtual machines in Azure](../virtual-machines/linux/sizes.md) (Virtuális gépek mérete az Azure-ban, Linux) és a [Sizes for virtual machines in Azure](../virtual-machines/windows/sizes.md) (Virtuális gépek mérete az Azure-ban, Windows) című cikk tartalmazza.</span><span class="sxs-lookup"><span data-stu-id="edcc0-332">**Virtual Machine Configuration** compute node sizes are listed in [Sizes for virtual machines in Azure](../virtual-machines/linux/sizes.md) (Linux) and [Sizes for virtual machines in Azure](../virtual-machines/windows/sizes.md) (Windows).</span></span> <span data-ttu-id="edcc0-333">A Batch a `STANDARD_A0`, illetve a Premium Storage típusú méretek (`STANDARD_GS`, `STANDARD_DS` és `STANDARD_DSV2` sorozat) kivételével az összes Azure virtuálisgép-méretet támogatja.</span><span class="sxs-lookup"><span data-stu-id="edcc0-333">Batch supports all Azure VM sizes except `STANDARD_A0` and those with premium storage (`STANDARD_GS`, `STANDARD_DS`, and `STANDARD_DSV2` series).</span></span>

<span data-ttu-id="edcc0-334">A számítási csomópont méretének kiválasztásakor vegye figyelembe a csomóponton futtatni kívánt alkalmazások jellemzőit és követelményeit.</span><span class="sxs-lookup"><span data-stu-id="edcc0-334">When selecting a compute node size, consider the characteristics and requirements of the applications you'll run on the nodes.</span></span> <span data-ttu-id="edcc0-335">Az olyan szempontok, mint hogy az alkalmazás többszálú-e vagy mennyi memóriát fogyaszt, segíthetnek meghatározni a legmegfelelőbb és legköltséghatékonyabb csomópontméretet.</span><span class="sxs-lookup"><span data-stu-id="edcc0-335">Aspects like whether the application is multithreaded and how much memory it consumes can help determine the most suitable and cost-effective node size.</span></span> <span data-ttu-id="edcc0-336">A csomópont méretének kiválasztásakor általában az feltételezhető, hogy egyszerre egy tevékenység fog futni a csomóponton.</span><span class="sxs-lookup"><span data-stu-id="edcc0-336">It's typical to select a node size assuming one task will run on a node at a time.</span></span> <span data-ttu-id="edcc0-337">Azonban lehetséges egyszerre több tevékenységet (és így több alkalmazáspéldányt) [párhuzamosan is futtatni](batch-parallel-node-tasks.md) egy számítási csomóponton a feladat végrehajtása során.</span><span class="sxs-lookup"><span data-stu-id="edcc0-337">However, it is possible to have multiple tasks (and therefore multiple application instances) [run in parallel](batch-parallel-node-tasks.md) on compute nodes during job execution.</span></span> <span data-ttu-id="edcc0-338">Ebben az esetben a párhuzamos tevékenység-végrehajtás megnövekedett igényének kielégítése érdekében általában nagyobb csomópontméretet választanak.</span><span class="sxs-lookup"><span data-stu-id="edcc0-338">In this case, it is common to choose a larger node size to accommodate the increased demand of parallel task execution.</span></span> <span data-ttu-id="edcc0-339">A további információkat a [Tevékenységütemezési szabályzat](#task-scheduling-policy) tartalmazza.</span><span class="sxs-lookup"><span data-stu-id="edcc0-339">See [Task scheduling policy](#task-scheduling-policy) for more information.</span></span>

<span data-ttu-id="edcc0-340">A készlethez csak azonos méretű csomópontok tartozhatnak.</span><span class="sxs-lookup"><span data-stu-id="edcc0-340">All of the nodes in a pool are the same size.</span></span> <span data-ttu-id="edcc0-341">Ha eltérő rendszerigényű és/vagy terhelési szintű alkalmazásokat szándékozik futtatni, javasoljuk, hogy használjon különálló készleteket.</span><span class="sxs-lookup"><span data-stu-id="edcc0-341">If you intend to run applications with differing system requirements and/or load levels, we recommend that you use separate pools.</span></span>

### <a name="scaling-policy"></a><span data-ttu-id="edcc0-342">Skálázási szabályzat</span><span class="sxs-lookup"><span data-stu-id="edcc0-342">Scaling policy</span></span>

<span data-ttu-id="edcc0-343">Dinamikus számítási feladatoknál megírhat egy [automatikus skálázási képletet](#scaling-compute-resources), amelyet aztán alkalmazhat a készletre.</span><span class="sxs-lookup"><span data-stu-id="edcc0-343">For dynamic workloads, you can write and apply an [auto-scaling formula](#scaling-compute-resources) to a pool.</span></span> <span data-ttu-id="edcc0-344">A Batch szolgáltatás rendszeresen ellenőrzi a készletet a képlet alapján, és az Ön által megadott, a készletre, a feladatokra és a tevékenységekre vonatkozó paraméterek alapján szükség esetén módosítja a készletben lévő csomópontok számát.</span><span class="sxs-lookup"><span data-stu-id="edcc0-344">The Batch service periodically evaluates your formula and adjusts the number of nodes within the pool based on various pool, job, and task parameters that you can specify.</span></span>

### <a name="task-scheduling-policy"></a><span data-ttu-id="edcc0-345">Tevékenységütemezési szabályzat</span><span class="sxs-lookup"><span data-stu-id="edcc0-345">Task scheduling policy</span></span>

<span data-ttu-id="edcc0-346">A [csomópontonkénti maximális tevékenység](batch-parallel-node-tasks.md) konfigurációs lehetőség határozza meg a készleten belüli egyes számítási csomópontokon egyidejűleg futtatható tevékenységek maximális számát.</span><span class="sxs-lookup"><span data-stu-id="edcc0-346">The [max tasks per node](batch-parallel-node-tasks.md) configuration option determines the maximum number of tasks that can be run in parallel on each compute node within the pool.</span></span>

<span data-ttu-id="edcc0-347">Az alapértelmezett konfiguráció meghatározza, hogy egyszerre egy tevékenység fut egy csomóponton, de bizonyos esetekben előnyös lehet, ha kettő vagy több feladat is végrehajtható egyszerre egy csomóponton.</span><span class="sxs-lookup"><span data-stu-id="edcc0-347">The default configuration specifies that one task at a time runs on a node, but there are scenarios where it is beneficial to have two or more tasks executed on a node simultaneously.</span></span> <span data-ttu-id="edcc0-348">Nézze meg a [csomópontokon végzett egyidejű tevékenységekről szóló cikkben](batch-parallel-node-tasks.md) szereplő [mintaforgatókönyvet](batch-parallel-node-tasks.md#example-scenario), ha kíváncsi rá, hogy milyen esetekben lehet hasznos, ha több tevékenység fut az egyes csomópontokon.</span><span class="sxs-lookup"><span data-stu-id="edcc0-348">See the [example scenario](batch-parallel-node-tasks.md#example-scenario) in the [concurrent node tasks](batch-parallel-node-tasks.md) article to see how you can benefit from multiple tasks per node.</span></span>

<span data-ttu-id="edcc0-349">Megadhatja a *kitöltéstípust* is, amely azt határozza meg, hogy a Batch egyenletesen ossza-e el a tevékenységeket a készletben szereplő csomópontok között, vagy először töltse ki az egyes csomópontok teljes tevékenységkapacitását, és csak ezt követően lépjen tovább a következő csomópontra.</span><span class="sxs-lookup"><span data-stu-id="edcc0-349">You can also specify a *fill type* which determines whether Batch spreads the tasks evenly across all nodes in a pool, or packs each node with the maximum number of tasks before assigning tasks to another node.</span></span>

### <a name="communication-status-for-compute-nodes"></a><span data-ttu-id="edcc0-350">A számítási csomópontok kommunikációs állapota</span><span class="sxs-lookup"><span data-stu-id="edcc0-350">Communication status for compute nodes</span></span>

<span data-ttu-id="edcc0-351">A legtöbb esetben a tevékenységek egymástól függetlenül működnek, nincs szükség közöttük kommunikációra.</span><span class="sxs-lookup"><span data-stu-id="edcc0-351">In most scenarios, tasks operate independently and do not need to communicate with one another.</span></span> <span data-ttu-id="edcc0-352">Vannak azonban olyan alkalmazások (például [MPI-megoldások](batch-mpi.md)), ahol a tevékenységeknek kommunikálniuk kell egymással.</span><span class="sxs-lookup"><span data-stu-id="edcc0-352">However, there are some applications in which tasks must communicate, like [MPI scenarios](batch-mpi.md).</span></span>

<span data-ttu-id="edcc0-353">Beállíthatja, hogy a készlet engedélyezze a **csomópontok közötti kommunikációt**, hogy az egy készleten belüli csomópontok kommunikáljanak futás közben.</span><span class="sxs-lookup"><span data-stu-id="edcc0-353">You can configure a pool to allow **internode communication**, so that nodes within a pool can communicate at runtime.</span></span> <span data-ttu-id="edcc0-354">Ha engedélyezte a csomópontok közötti kommunikációt, a Cloud Services-konfigurációt használó készletekben működő csomópontok az 1100-nál magasabb portszámú portokon, a virtuálisgép-konfigurációs készletek csomópontjai pedig bármely porton képesek lesznek kommunikálni egymással.</span><span class="sxs-lookup"><span data-stu-id="edcc0-354">When internode communication is enabled, nodes in Cloud Services Configuration pools can communicate with each other on ports greater than 1100, and Virtual Machine Configuration pools do not restrict traffic on any port.</span></span>

<span data-ttu-id="edcc0-355">Ne feledje, hogy a csomópontok közötti kommunikáció engedélyezése hatással lesz a csomópontok fürtökben való elhelyezkedésére, illetve azt, hogy az üzembe helyezés korlátozásai következtében ez korlátozhatja a készletben használható csomópontok maximális számát.</span><span class="sxs-lookup"><span data-stu-id="edcc0-355">Note that enabling internode communication also impacts the placement of the nodes within clusters and might limit the maximum number of nodes in a pool because of deployment restrictions.</span></span> <span data-ttu-id="edcc0-356">Ha az alkalmazáshoz nincs szükség a csomópontok közötti kommunikációra, a Batch szolgáltatás nagy számú csomópont lefoglalására képes a készlethez számos különböző fürtből és adatközpontból, hogy lehetővé tegye a nagyobb párhuzamos feldolgozási teljesítményt.</span><span class="sxs-lookup"><span data-stu-id="edcc0-356">If your application does not require communication between nodes, the Batch service can allocate a potentially large number of nodes to the pool from many different clusters and datacenters to enable increased parallel processing power.</span></span>

### <a name="start-tasks-for-compute-nodes"></a><span data-ttu-id="edcc0-357">A számítási csomópontok indítási tevékenységei</span><span class="sxs-lookup"><span data-stu-id="edcc0-357">Start tasks for compute nodes</span></span>

<span data-ttu-id="edcc0-358">Ha szeretne, *indítási tevékenységet* is beállíthat, amelyet a rendszer minden alkalommal végrehajt, amikor egy csomópont csatlakozik a készlethez, vagy amikor a csomópontot újraindítják, vagy rendszerképét alaphelyzetbe állítják.</span><span class="sxs-lookup"><span data-stu-id="edcc0-358">The optional *start task* executes on each node as that node joins the pool, and each time a node is restarted or reimaged.</span></span> <span data-ttu-id="edcc0-359">Az indítási tevékenység különösen hasznos a számítási csomópontok tevékenységek végrehajtására való előkészítéséhez, például a tevékenységek által a számítási csomópontokon futtatott alkalmazások telepítéséhez.</span><span class="sxs-lookup"><span data-stu-id="edcc0-359">The start task is especially useful for preparing compute nodes for the execution of tasks, like installing the applications that your tasks run on the compute nodes.</span></span>

### <a name="application-packages"></a><span data-ttu-id="edcc0-360">Alkalmazáscsomagok</span><span class="sxs-lookup"><span data-stu-id="edcc0-360">Application packages</span></span>

<span data-ttu-id="edcc0-361">A készlethez tartozó számítási csomópontokra üzembe helyezni kívánt [alkalmazáscsomagokat](#application-packages) is meghatározhatja.</span><span class="sxs-lookup"><span data-stu-id="edcc0-361">You can specify [application packages](#application-packages) to deploy to the compute nodes in the pool.</span></span> <span data-ttu-id="edcc0-362">Az alkalmazáscsomagok leegyszerűsítik a tevékenységek által futtatott alkalmazások üzembe helyezését és verziókezelését.</span><span class="sxs-lookup"><span data-stu-id="edcc0-362">Application packages provide simplified deployment and versioning of the applications that your tasks run.</span></span> <span data-ttu-id="edcc0-363">A készlethez beállított alkalmazáscsomagokat a rendszer a készlethez csatlakozó összes csomópontra telepíti, illetve minden alkalommal telepíti őket, amikor egy csomópontot újraindítanak vagy rendszerképét alaphelyzetbe állítják.</span><span class="sxs-lookup"><span data-stu-id="edcc0-363">Application packages that you specify for a pool are installed on every node that joins that pool, and every time a node is rebooted or reimaged.</span></span>

> [!NOTE]
> <span data-ttu-id="edcc0-364">Az alkalmazáscsomagok az összes 2017. július 5. után létrehozott Batch-készleten támogatottak.</span><span class="sxs-lookup"><span data-stu-id="edcc0-364">Application packages are supported on all Batch pools created after 5 July 2017.</span></span> <span data-ttu-id="edcc0-365">A 2016. március 10. és 2017. július 5. között létrehozott Batch-készletek esetében csak akkor támogatottak, ha a készlet felhőszolgáltatás-konfigurációval lett létrehozva.</span><span class="sxs-lookup"><span data-stu-id="edcc0-365">They are supported on Batch pools created between 10 March 2016 and 5 July 2017 only if the pool was created using a Cloud Service configuration.</span></span> <span data-ttu-id="edcc0-366">A 2016. március 10. előtt létrehozott Batch-készletek nem támogatják az alkalmazáscsomagokat.</span><span class="sxs-lookup"><span data-stu-id="edcc0-366">Batch pools created prior to 10 March 2016 do not support application packages.</span></span> <span data-ttu-id="edcc0-367">További információkat az alkalmazások a Batch-csomópontokon alkalmazáscsomagok használatával történő központi telepítéséről a [Batch-alkalmazáscsomagokkal számítási csomópontokra végzett alkalmazástelepítést](batch-application-packages.md) ismertető cikkben talál.</span><span class="sxs-lookup"><span data-stu-id="edcc0-367">For more information about using application packages to deploy your applications to your Batch nodes, see [Deploy applications to compute nodes with Batch application packages](batch-application-packages.md).</span></span>
>
>

### <a name="network-configuration"></a><span data-ttu-id="edcc0-368">Hálózati konfiguráció</span><span class="sxs-lookup"><span data-stu-id="edcc0-368">Network configuration</span></span>

<span data-ttu-id="edcc0-369">Megadhatja annak az Azure [virtuális hálózatnak (VNet)](../virtual-network/virtual-networks-overview.md) alhálózatát, amelyen létre szeretné hozni a készlet számítási csomópontjait.</span><span class="sxs-lookup"><span data-stu-id="edcc0-369">You can specify the subnet of an Azure [virtual network (VNet)](../virtual-network/virtual-networks-overview.md) in which the pool's compute nodes should be created.</span></span> <span data-ttu-id="edcc0-370">További információért lásd a [Készlet hálózati konfigurációja](#pool-network-configuration) című szakaszt.</span><span class="sxs-lookup"><span data-stu-id="edcc0-370">See the [Pool network configuration](#pool-network-configuration) section for more information.</span></span>


## <a name="job"></a><span data-ttu-id="edcc0-371">Feladat</span><span class="sxs-lookup"><span data-stu-id="edcc0-371">Job</span></span>
<span data-ttu-id="edcc0-372">A feladatok tevékenységek gyűjteményei.</span><span class="sxs-lookup"><span data-stu-id="edcc0-372">A job is a collection of tasks.</span></span> <span data-ttu-id="edcc0-373">A feladatok határozzák meg, hogyan végezzék el a hozzájuk tartozó tevékenységek a számítási feladatokat a készlet számítási csomópontjaiban.</span><span class="sxs-lookup"><span data-stu-id="edcc0-373">It manages how computation is performed by its tasks on the compute nodes in a pool.</span></span>

* <span data-ttu-id="edcc0-374">A feladat meghatározza azt a **készletet**, amelyben a munkának futnia kell.</span><span class="sxs-lookup"><span data-stu-id="edcc0-374">The job specifies the **pool** in which the work is to be run.</span></span> <span data-ttu-id="edcc0-375">Az egyes feladatokhoz saját készletet hozhat létre, de egyetlen készletet is használhat több feladathoz.</span><span class="sxs-lookup"><span data-stu-id="edcc0-375">You can create a new pool for each job, or use one pool for many jobs.</span></span> <span data-ttu-id="edcc0-376">A feladatütemezésbe tartozó egyes feladatokhoz külön-külön készletet hozhat létre, vagy létrehozhat egy készletet, amely a feladatütemezésbe tartozó összes feladatot tartalmazza.</span><span class="sxs-lookup"><span data-stu-id="edcc0-376">You can create a pool for each job that is associated with a job schedule, or for all jobs that are associated with a job schedule.</span></span>
* <span data-ttu-id="edcc0-377">Ha szeretné, megadhatja a **feladatok prioritását** is.</span><span class="sxs-lookup"><span data-stu-id="edcc0-377">You can specify an optional **job priority**.</span></span> <span data-ttu-id="edcc0-378">Amikor az aktuálisan folyamatban lévő feladatoknál magasabb prioritású feladatot küld el, a rendszer az alacsonyabb prioritású feladatok elé helyezi el a magasabb prioritású feladat tevékenységeit a várólistán.</span><span class="sxs-lookup"><span data-stu-id="edcc0-378">When a job is submitted with a higher priority than jobs that are currently in progress, the tasks for the higher-priority job are inserted into the queue ahead of tasks for the lower-priority jobs.</span></span> <span data-ttu-id="edcc0-379">Ezek azonban nem előzik meg a már futó alacsonyabb prioritású feladat tevékenységeit.</span><span class="sxs-lookup"><span data-stu-id="edcc0-379">Tasks in lower-priority jobs that are already running are not preempted.</span></span>
* <span data-ttu-id="edcc0-380">A feladatok **korlátozásai** segítségével korlátokat szabhat a feladatokhoz:</span><span class="sxs-lookup"><span data-stu-id="edcc0-380">You can use job **constraints** to specify certain limits for your jobs:</span></span>

    <span data-ttu-id="edcc0-381">Beállíthatja a **maximális valós időt**, ami azt jelenti, hogy ha egy feladat az itt megadott időtartamnál hosszabban fut, a rendszer leállítja a feladatot és a hozzá tartozó összes tevékenységet.</span><span class="sxs-lookup"><span data-stu-id="edcc0-381">You can set a **maximum wallclock time**, so that if a job runs for longer than the maximum wallclock time that is specified, the job and all of its tasks are terminated.</span></span>

    <span data-ttu-id="edcc0-382">A Batch képes észlelni, ha egy tevékenység sikertelen volt, és megpróbálni újra elvégezni.</span><span class="sxs-lookup"><span data-stu-id="edcc0-382">Batch can detect and then retry failed tasks.</span></span> <span data-ttu-id="edcc0-383">Korlátozásként a **tevékenység-újrapróbálások maximális száma** is beállítható, beleértve azt is, hogy a rendszer *mindig* vagy *soha ne* próbálja meg újra elvégezni az adott tevékenységet.</span><span class="sxs-lookup"><span data-stu-id="edcc0-383">You can specify the **maximum number of task retries** as a constraint, including whether a task is *always* or *never* retried.</span></span> <span data-ttu-id="edcc0-384">A tevékenységek újrapróbálása azt jelenti, hogy a tevékenység ismét a várólistára kerül, hogy a rendszer lefuttathassa.</span><span class="sxs-lookup"><span data-stu-id="edcc0-384">Retrying a task means that the task is requeued to be run again.</span></span>
* <span data-ttu-id="edcc0-385">Tevékenységeket az ügyfélalkalmazás is adhat a feladatokhoz, vagy megadhat egy [feladatkezelői tevékenységet](#job-manager-task) is.</span><span class="sxs-lookup"><span data-stu-id="edcc0-385">Your client application can add tasks to a job, or you can specify a [job manager task](#job-manager-task).</span></span> <span data-ttu-id="edcc0-386">A feladatkezelői tevékenységek tartalmazzák a feladatok tevékenységeinek létrehozásához szükséges információkat, és a készlet egyik számítási csomópontján futnak.</span><span class="sxs-lookup"><span data-stu-id="edcc0-386">A job manager task contains the information that is necessary to create the required tasks for a job, with the job manager task being run on one of the compute nodes in the pool.</span></span> <span data-ttu-id="edcc0-387">A feladatkezelői tevékenységet a Batch kezeli – a feladat létrehozásakor ez a tevékenység azonnal a várólistára kerül, és ha sikertelen, újraindul.</span><span class="sxs-lookup"><span data-stu-id="edcc0-387">The job manager task is handled specifically by Batch--it is queued as soon as the job is created, and is restarted if it fails.</span></span> <span data-ttu-id="edcc0-388">A *feladatütemezés* által létrehozott feladatokhoz [kötelező](#scheduled-jobs) feladatkezelői tevékenységet beállítani, mivel ez az egyetlen mód arra, hogy még a példányosítás előtt meghatározza a tevékenységeket.</span><span class="sxs-lookup"><span data-stu-id="edcc0-388">A job manager task is *required* for jobs that are created by a [job schedule](#scheduled-jobs) because it is the only way to define the tasks before the job is instantiated.</span></span>
* <span data-ttu-id="edcc0-389">Alapértelmezés szerint a feladatok akkor is aktív állapotban maradnak, ha már a hozzájuk tartozó összes tevékenység lefutott.</span><span class="sxs-lookup"><span data-stu-id="edcc0-389">By default, jobs remain in the active state when all tasks within the job are complete.</span></span> <span data-ttu-id="edcc0-390">Ezt módosíthatja, és beállíthatja, hogy a rendszer automatikusan megszüntesse a feladatot, amikor az ahhoz tartozó összes tevékenység befejeződött.</span><span class="sxs-lookup"><span data-stu-id="edcc0-390">You can change this behavior so that the job is automatically terminated when all tasks in the job are complete.</span></span> <span data-ttu-id="edcc0-391">Állítsa a feladat **onAllTasksComplete** tulajdonságát ([OnAllTasksComplete][net_onalltaskscomplete] a Batch .NET-ben) a *terminatejob* értékre, ha azt szeretné, hogy a rendszer automatikusan megszüntesse a feladatot, amikor a hozzá tartozó összes tevékenység befejezett állapotba kerül.</span><span class="sxs-lookup"><span data-stu-id="edcc0-391">Set the job's **onAllTasksComplete** property ([OnAllTasksComplete][net_onalltaskscomplete] in Batch .NET) to *terminatejob* to automatically terminate the job when all of its tasks are in the completed state.</span></span>

    <span data-ttu-id="edcc0-392">Vegye figyelembe, hogy a Batch szolgáltatás úgy tekinti, hogy az összes tevékenység befejeződött, ha a feladathoz *nem* tartoznak tevékenységek.</span><span class="sxs-lookup"><span data-stu-id="edcc0-392">Note that the Batch service considers a job with *no* tasks to have all of its tasks completed.</span></span> <span data-ttu-id="edcc0-393">Ezért ezt a funkciót általában egy [feladatkezelői tevékenységgel](#job-manager-task) használjuk.</span><span class="sxs-lookup"><span data-stu-id="edcc0-393">Therefore, this option is most commonly used with a [job manager task](#job-manager-task).</span></span> <span data-ttu-id="edcc0-394">Ha feladatkezelő nélkül szeretné használni az automatikus feladatmegszüntetési funkciót, először állítsa az új feladat **onAllTasksComplete** tulajdonságát a *noaction* értékre, és csak akkor állítsa be a *terminatejob* értéket, ha már az összes kívánt tevékenységet hozzáadta a feladathoz.</span><span class="sxs-lookup"><span data-stu-id="edcc0-394">If you want to use automatic job termination without a job manager, you should initially set a new job's **onAllTasksComplete** property to *noaction*, then set it to *terminatejob* only after you've finished adding tasks to the job.</span></span>

### <a name="job-priority"></a><span data-ttu-id="edcc0-395">A feladatok prioritása</span><span class="sxs-lookup"><span data-stu-id="edcc0-395">Job priority</span></span>
<span data-ttu-id="edcc0-396">A Batch szolgáltatásban létrehozott feladatokhoz prioritást rendelhet.</span><span class="sxs-lookup"><span data-stu-id="edcc0-396">You can assign a priority to jobs that you create in Batch.</span></span> <span data-ttu-id="edcc0-397">A Batch szolgáltatás a feladat prioritási értékével határozza meg a feladatütemezés sorrendjét a fiókokon belül (ez nem tévesztendő össze az [ütemezett feladatokkal](#scheduled-jobs)).</span><span class="sxs-lookup"><span data-stu-id="edcc0-397">The Batch service uses the priority value of the job to determine the order of job scheduling within an account (this is not to be confused with a [scheduled job](#scheduled-jobs)).</span></span> <span data-ttu-id="edcc0-398">A prioritási értékek –1000 és 1000 közöttiek, ahol a –1000 a legalacsonyabb prioritás, az 1000 pedig a legmagasabb.</span><span class="sxs-lookup"><span data-stu-id="edcc0-398">The priority values range from -1000 to 1000, with -1000 being the lowest priority and 1000 being the highest.</span></span> <span data-ttu-id="edcc0-399">A feladatok prioritásának frissítése a [Feladat tulajdonságainak frissítése][rest_update_job] művelettel (Batch REST) vagy a [CloudJob.Priority][net_cloudjob_priority] tulajdonság (Batch .NET) módosításával lehetséges.</span><span class="sxs-lookup"><span data-stu-id="edcc0-399">To update the priority of a job, call the [Update the properties of a job][rest_update_job] operation (Batch REST), or modify the [CloudJob.Priority][net_cloudjob_priority] property (Batch .NET).</span></span>

<span data-ttu-id="edcc0-400">Egy adott fiókban a magasabb prioritású feladatok élveznek elsőbbséget az ütemezésben az alacsonyabb prioritású feladatokkal szemben.</span><span class="sxs-lookup"><span data-stu-id="edcc0-400">Within the same account, higher-priority jobs have scheduling precedence over lower-priority jobs.</span></span> <span data-ttu-id="edcc0-401">Egy fiók magasabb prioritási értékű feladatai nem élveznek elsőbbséget egy másik fiók alacsonyabb prioritási értékű másik feladatával szemben.</span><span class="sxs-lookup"><span data-stu-id="edcc0-401">A job with a higher-priority value in one account does not have scheduling precedence over another job with a lower-priority value in a different account.</span></span>

<span data-ttu-id="edcc0-402">A készletek között a feladatok ütemezése egymástól független.</span><span class="sxs-lookup"><span data-stu-id="edcc0-402">Job scheduling across pools is independent.</span></span> <span data-ttu-id="edcc0-403">Különböző készletek között nem garantált, hogy a rendszer egy magasabb prioritású feladatot előbbre ütemez, ha annak társított készletében nincsenek tétlen csomópontok.</span><span class="sxs-lookup"><span data-stu-id="edcc0-403">Between different pools, it is not guaranteed that a higher-priority job is scheduled first if its associated pool is short of idle nodes.</span></span> <span data-ttu-id="edcc0-404">Egy adott készletben az azonos prioritású munkák ütemezésére ugyanannyi esély van.</span><span class="sxs-lookup"><span data-stu-id="edcc0-404">In the same pool, jobs with the same priority level have an equal chance of being scheduled.</span></span>

### <a name="scheduled-jobs"></a><span data-ttu-id="edcc0-405">Ütemezett feladatok</span><span class="sxs-lookup"><span data-stu-id="edcc0-405">Scheduled jobs</span></span>
<span data-ttu-id="edcc0-406">A [Feladatütemezéssel][rest_job_schedules] rendszeresen előforduló feladatokat ütemezhet a Batch szolgáltatásban.</span><span class="sxs-lookup"><span data-stu-id="edcc0-406">[Job schedules][rest_job_schedules] enable you to create recurring jobs within the Batch service.</span></span> <span data-ttu-id="edcc0-407">A feladatütemezés meghatározza, mikor fussanak a feladatok, és tartalmazza a futtatandó feladatok specifikációit.</span><span class="sxs-lookup"><span data-stu-id="edcc0-407">A job schedule specifies when to run jobs and includes the specifications for the jobs to be run.</span></span> <span data-ttu-id="edcc0-408">Megadhatja az ütemezés időtartamát is (azaz azt, hogy mennyi ideig, és mikor legyen érvényes az ütemezés), valamint azt, hogy a rendszer milyen gyakran hozzon létre feladatokat az ütemezett időtartam alatt.</span><span class="sxs-lookup"><span data-stu-id="edcc0-408">You can specify the duration of the schedule--how long and when the schedule is in effect--and how frequently jobs are created during the scheduled period.</span></span>

## <a name="task"></a><span data-ttu-id="edcc0-409">Tevékenység</span><span class="sxs-lookup"><span data-stu-id="edcc0-409">Task</span></span>
<span data-ttu-id="edcc0-410">A tevékenységek olyan számítási egységek, amelyek feladathoz vannak társítva,</span><span class="sxs-lookup"><span data-stu-id="edcc0-410">A task is a unit of computation that is associated with a job.</span></span> <span data-ttu-id="edcc0-411">és egy csomóponton futnak.</span><span class="sxs-lookup"><span data-stu-id="edcc0-411">It runs on a node.</span></span> <span data-ttu-id="edcc0-412">A tevékenységek egy csomóponthoz vannak társítva futtatáshoz, vagy a várólistán vannak, amíg egy csomópont szabaddá válik.</span><span class="sxs-lookup"><span data-stu-id="edcc0-412">Tasks are assigned to a node for execution, or are queued until a node becomes free.</span></span> <span data-ttu-id="edcc0-413">Egyszerűen fogalmazva a tevékenységek egy vagy több programot vagy parancsfájlt futtatnak a számítási csomóponton, és ezzel elvégzik az Önnek szükséges feladatokat.</span><span class="sxs-lookup"><span data-stu-id="edcc0-413">Put simply, a task runs one or more programs or scripts on a compute node to perform the work you need done.</span></span>

<span data-ttu-id="edcc0-414">Amikor létrehozza a tevékenységet, a következőket kell megadnia:</span><span class="sxs-lookup"><span data-stu-id="edcc0-414">When you create a task, you can specify:</span></span>

* <span data-ttu-id="edcc0-415">A tevékenységhez tartozó **parancssort**.</span><span class="sxs-lookup"><span data-stu-id="edcc0-415">The **command line** for the task.</span></span> <span data-ttu-id="edcc0-416">Ez a parancssor futtatja az alkalmazást vagy parancsfájlt a számítási csomóponton.</span><span class="sxs-lookup"><span data-stu-id="edcc0-416">This is the command line that runs your application or script on the compute node.</span></span>

    <span data-ttu-id="edcc0-417">Vegye figyelembe, hogy a parancssor nem rendszerhéj alatt fut.</span><span class="sxs-lookup"><span data-stu-id="edcc0-417">It is important to note that the command line does not actually run under a shell.</span></span> <span data-ttu-id="edcc0-418">Így nem tudja natívan kihasználni a rendszerhéj előnyeit, például a [környezeti változók](#environment-settings-for-tasks) értékének behelyettesítését (ide tartozik a `PATH` is).</span><span class="sxs-lookup"><span data-stu-id="edcc0-418">Therefore, it cannot natively take advantage of shell features like [environment variable](#environment-settings-for-tasks) expansion (this includes the `PATH`).</span></span> <span data-ttu-id="edcc0-419">E funkciók használatához meg kell hívnia a rendszerhéjat a parancssorból, windowsos csomópontokon például a `cmd.exe` elindításával, Linuxon pedig a `/bin/sh` paranccsal:</span><span class="sxs-lookup"><span data-stu-id="edcc0-419">To take advantage of such features, you must invoke the shell in the command line--for example, by launching `cmd.exe` on Windows nodes or `/bin/sh` on Linux:</span></span>

    `cmd /c MyTaskApplication.exe %MY_ENV_VAR%`

    `/bin/sh -c MyTaskApplication $MY_ENV_VAR`

    <span data-ttu-id="edcc0-420">Ha a tevékenységeknek olyan alkalmazást vagy parancsfájlt is futtatniuk kell, amely nem tartozik a csomópont `PATH`- vagy referenciakörnyezet-változói közé, hívja meg explicit módon a rendszerhéját a feladat parancssorából.</span><span class="sxs-lookup"><span data-stu-id="edcc0-420">If your tasks need to run an application or script that is not in the node's `PATH` or reference environment variables, invoke the shell explicitly in the task command line.</span></span>
* <span data-ttu-id="edcc0-421">A feldolgozni kívánt adatokat tartalmazó **erőforrásfájlok**.</span><span class="sxs-lookup"><span data-stu-id="edcc0-421">**Resource files** that contain the data to be processed.</span></span> <span data-ttu-id="edcc0-422">Ezeket a fájlokat a rendszer automatikusan a csomópontra másolja egy általános célú Azure Storage-fiók Blob Storage-tárhelyéből, mielőtt végrehajtja a tevékenység parancssorát.</span><span class="sxs-lookup"><span data-stu-id="edcc0-422">These files are automatically copied to the node from Blob storage in a general-purpose Azure Storage account before the task's command line is executed.</span></span> <span data-ttu-id="edcc0-423">További információkért olvassa el az [Indítási tevékenység](#start-task) és a [Fájlok és könyvtárak](#files-and-directories) című fejezetet.</span><span class="sxs-lookup"><span data-stu-id="edcc0-423">For more information, see the sections [Start task](#start-task) and [Files and directories](#files-and-directories).</span></span>
* <span data-ttu-id="edcc0-424">Az alkalmazás számára szükséges **környezeti változók**.</span><span class="sxs-lookup"><span data-stu-id="edcc0-424">The **environment variables** that are required by your application.</span></span> <span data-ttu-id="edcc0-425">További információkért olvassa el a [Környezeti beállítások tevékenységekhez](#environment-settings-for-tasks) című fejezetet.</span><span class="sxs-lookup"><span data-stu-id="edcc0-425">For more information, see the [Environment settings for tasks](#environment-settings-for-tasks) section.</span></span>
* <span data-ttu-id="edcc0-426">Azok a **korlátozások**, amelyeken belül a tevékenység végrehajtható.</span><span class="sxs-lookup"><span data-stu-id="edcc0-426">The **constraints** under which the task should execute.</span></span> <span data-ttu-id="edcc0-427">Korlátozás például a maximális időtartam, ameddig a tevékenység futhat, a meghiúsult tevékenységek újrapróbálásának maximális száma, valamint a tevékenység munkakönyvtárában tárolt fájlok megőrzésének maximális ideje.</span><span class="sxs-lookup"><span data-stu-id="edcc0-427">For example, constraints include the maximum time that the task is allowed to run, the maximum number of times a failed task should be retried, and the maximum time that files in the task's working directory are retained.</span></span>
* <span data-ttu-id="edcc0-428">Az ütemezett tevékenység futtatására beállított számítási csomópontra üzembe helyezni kívánt **alkalmazáscsomagok**.</span><span class="sxs-lookup"><span data-stu-id="edcc0-428">**Application packages** to deploy to the compute node on which the task is scheduled to run.</span></span> <span data-ttu-id="edcc0-429">Az [alkalmazáscsomagok](#application-packages) leegyszerűsítik a tevékenységek által futtatott alkalmazások üzembe helyezését és verziókezelését.</span><span class="sxs-lookup"><span data-stu-id="edcc0-429">[Application packages](#application-packages) provide simplified deployment and versioning of the applications that your tasks run.</span></span> <span data-ttu-id="edcc0-430">A tevékenységszintű alkalmazáscsomagok különösen megosztott készletes környezetekben hasznosak, ahol a különböző feladatok egy készletben futnak, és a rendszer nem törli a készletet a feladat befejezésekor.</span><span class="sxs-lookup"><span data-stu-id="edcc0-430">Task-level application packages are especially useful in shared-pool environments, where different jobs are run on one pool, and the pool is not deleted when a job is completed.</span></span> <span data-ttu-id="edcc0-431">Ha a feladatnál a készletben kevesebb a tevékenység, mint a csomópont, az alkalmazáscsomagok használatával csökkentheti az adatátviteli igényt, mivel így a rendszer csak azokon a csomópontokon helyezi üzembe az alkalmazást, amelyek ténylegesen futtatják a tevékenységeket.</span><span class="sxs-lookup"><span data-stu-id="edcc0-431">If your job has fewer tasks than nodes in the pool, task application packages can minimize data transfer since your application is deployed only to the nodes that run tasks.</span></span>

<span data-ttu-id="edcc0-432">A csomóponton a számítások elvégzéséhez meghatározott tevékenységek mellett a Batch szolgáltatás a következő speciális tevékenységek használatát is lehetővé teszi:</span><span class="sxs-lookup"><span data-stu-id="edcc0-432">In addition to tasks you define to perform computation on a node, the following special tasks are also provided by the Batch service:</span></span>

* [<span data-ttu-id="edcc0-433">Indítási tevékenység</span><span class="sxs-lookup"><span data-stu-id="edcc0-433">Start task</span></span>](#start-task)
* [<span data-ttu-id="edcc0-434">Feladatkezelő-tevékenység</span><span class="sxs-lookup"><span data-stu-id="edcc0-434">Job manager task</span></span>](#job-manager-task)
* [<span data-ttu-id="edcc0-435">Feladat-előkészítési és -kiadási tevékenységek</span><span class="sxs-lookup"><span data-stu-id="edcc0-435">Job preparation and release tasks</span></span>](#job-preparation-and-release-tasks)
* [<span data-ttu-id="edcc0-436">Többpéldányos tevékenységek (MPI)</span><span class="sxs-lookup"><span data-stu-id="edcc0-436">Multi-instance tasks (MPI)</span></span>](#multi-instance-tasks)
* [<span data-ttu-id="edcc0-437">Tevékenységfüggőségek</span><span class="sxs-lookup"><span data-stu-id="edcc0-437">Task dependencies</span></span>](#task-dependencies)

### <a name="start-task"></a><span data-ttu-id="edcc0-438">Indítási tevékenység</span><span class="sxs-lookup"><span data-stu-id="edcc0-438">Start task</span></span>
<span data-ttu-id="edcc0-439">A készlethez társított **indítási tevékenység** segítségével előkészítheti a csomópontok működési környezetét.</span><span class="sxs-lookup"><span data-stu-id="edcc0-439">By associating a **start task** with a pool, you can prepare the operating environment of its nodes.</span></span> <span data-ttu-id="edcc0-440">Elvégeztethet például különböző műveleteket, például a tevékenységek által futtatandó alkalmazások telepítését, illetve a háttérfolyamatok elindítását.</span><span class="sxs-lookup"><span data-stu-id="edcc0-440">For example, you can perform actions like installing the applications that your tasks run or starting background processes.</span></span> <span data-ttu-id="edcc0-441">Az indítási tevékenység minden csomópontindításkor fut, mindaddig, amíg a csomópont a készletben van, például akkor is, amikor a csomópontot először adja a készlethez, vagy amikor a csomópontot újraindítják, vagy rendszerképét alaphelyzetbe állítják.</span><span class="sxs-lookup"><span data-stu-id="edcc0-441">The start task runs every time a node starts, for as long as it remains in the pool--including when the node is first added to the pool and when it is restarted or reimaged.</span></span>

<span data-ttu-id="edcc0-442">Az indítási tevékenység elsődleges előnye, hogy tartalmazhatja a számítási csomópontok konfigurálásához szükséges, illetve a feladatok végrehajtásához szükséges alkalmazások telepítéséhez szükséges összes információt.</span><span class="sxs-lookup"><span data-stu-id="edcc0-442">A primary benefit of the start task is that it can contain all of the information that is necessary to configure a compute node and install the applications that are required for task execution.</span></span> <span data-ttu-id="edcc0-443">Így a készletekben működő csomópontok számának növelése rendkívül egyszerű, csupán a csomópontok új tervezett számát kell meghatároznia.</span><span class="sxs-lookup"><span data-stu-id="edcc0-443">Therefore, increasing the number of nodes in a pool is as simple as specifying the new target node count.</span></span> <span data-ttu-id="edcc0-444">Az indítási tevékenység biztosítja a Batch szolgáltatás számára az új csomópontok konfigurálásához, illetve a tevékenységek fogadásához szükséges összes információt.</span><span class="sxs-lookup"><span data-stu-id="edcc0-444">The start task provides the Batch service the information that is needed to configure the new nodes and get them ready for accepting tasks.</span></span>

<span data-ttu-id="edcc0-445">Ahogy a többi Azure Batch-tevékenységnél, itt is megadhatja az [Azure Storage][azure_storage]-tárterületen tárolt **erőforrásfájlokat**, illetve a futtatandó **parancssort**.</span><span class="sxs-lookup"><span data-stu-id="edcc0-445">As with any Azure Batch task, you can specify a list of **resource files** in [Azure Storage][azure_storage], in addition to a **command line** to be executed.</span></span> <span data-ttu-id="edcc0-446">A Batch szolgáltatás először az erőforrásfájlokat másolja a csomópontra az Azure Storage-tárterületből, majd futtatja a megadott parancssort.</span><span class="sxs-lookup"><span data-stu-id="edcc0-446">The Batch service first copies the resource files to the node from Azure Storage, and then runs the command line.</span></span> <span data-ttu-id="edcc0-447">A készletekhez tartozó indítási tevékenységek esetében a fájllista általában a tevékenységhez tartozó alkalmazást és annak függőségeit tartalmazza.</span><span class="sxs-lookup"><span data-stu-id="edcc0-447">For a pool start task, the file list typically contains the task application and its dependencies.</span></span>

<span data-ttu-id="edcc0-448">Ezeken felül azonban szerepelhetnek az indítási tevékenységben a számítási csomóponton futó összes tevékenység számára felhasználható referenciaadatok is.</span><span class="sxs-lookup"><span data-stu-id="edcc0-448">However, the start task could also include reference data to be used by all tasks that are running on the compute node.</span></span> <span data-ttu-id="edcc0-449">Az indítási tevékenység parancssora például egy `robocopy` művelet elvégzésével képes az indítási feladat [munkakönyvtárából](#files-and-directories) a [megosztott mappába](#files-and-directories) másolni az alkalmazás fájljait (amelyeket erőforrásfájlokként definiált, és letöltött a csomópontra), majd lefuttatni egy MSI-fájlt vagy egy `setup.exe`-t.</span><span class="sxs-lookup"><span data-stu-id="edcc0-449">For example, a start task's command line could perform a `robocopy` operation to copy application files (which were specified as resource files and downloaded to the node) from the start task's [working directory](#files-and-directories) to the [shared folder](#files-and-directories), and then run an MSI or `setup.exe`.</span></span>

<span data-ttu-id="edcc0-450">Általában célszerű, hogy a Batch szolgáltatás megvárja az indítási tevékenység befejezését, mielőtt a csomópontot késznek ítéli tevékenységek hozzárendelésére, de ez konfigurálható.</span><span class="sxs-lookup"><span data-stu-id="edcc0-450">It is typically desirable for the Batch service to wait for the start task to complete before considering the node ready to be assigned tasks, but you can configure this.</span></span>

<span data-ttu-id="edcc0-451">Ha egy indítási tevékenység meghiúsul egy számítási csomóponton, akkor a csomópont állapota úgy frissül, hogy tükrözze a hibát, és a csomóponthoz nem lesz hozzárendelve egyetlen tevékenység sem.</span><span class="sxs-lookup"><span data-stu-id="edcc0-451">If a start task fails on a compute node, then the state of the node is updated to reflect the failure, and the node is not assigned any tasks.</span></span> <span data-ttu-id="edcc0-452">Az indítási tevékenység meghiúsulhat, ha hiba történik az erőforrásfájloknak a tárterületről való másolásakor, illetve ha a parancssor által futtatott folyamat nullától eltérő kilépési kódot ad vissza.</span><span class="sxs-lookup"><span data-stu-id="edcc0-452">A start task can fail if there is an issue copying its resource files from storage, or if the process executed by its command line returns a nonzero exit code.</span></span>

<span data-ttu-id="edcc0-453">Amikor meglévő készlethez ad indítási tevékenységet, vagy ilyen készlethez tartozó tevékenységet frissít, újra kell indítania a számítási csomópontokat, hogy a rendszer az összes csomópontra alkalmazza az indítási tevékenységet.</span><span class="sxs-lookup"><span data-stu-id="edcc0-453">If you add or update the start task for an existing pool, you must reboot its compute nodes for the start task to be applied to the nodes.</span></span>

>[!NOTE]
> <span data-ttu-id="edcc0-454">Az indítási tevékenységek összesített mérete nem lehet nagyobb, mint 32768 karaktert, beleértve az erőforrásfájlokat és a környezeti változókat.</span><span class="sxs-lookup"><span data-stu-id="edcc0-454">The total size of a start task must be less than or equal to 32768 characters, including resource files and environment variables.</span></span> <span data-ttu-id="edcc0-455">Két módszer egyikét használhatja annak ellenőrzésére, hogy az indítási tevékenység megfelel-e ennek a követelménynek:</span><span class="sxs-lookup"><span data-stu-id="edcc0-455">To ensure that your start task meets this requirement, you can use one of two approaches:</span></span>
>
> 1. <span data-ttu-id="edcc0-456">Az alkalmazáscsomagok segítségével alkalmazások vagy adatok terjeszthetők a Batch-készlet összes csomópontján.</span><span class="sxs-lookup"><span data-stu-id="edcc0-456">You can use application packages to distribute applications or data across each node in your Batch pool.</span></span> <span data-ttu-id="edcc0-457">Az alkalmazáscsomagokkal kapcsolatban további információkat a [Batch-alkalmazáscsomagokkal számítási csomópontokra végzett alkalmazástelepítést](batch-application-packages.md) ismertető cikkben talál.</span><span class="sxs-lookup"><span data-stu-id="edcc0-457">For more information about application packages, see [Deploy applications to compute nodes with Batch application packages](batch-application-packages.md).</span></span>
> 2. <span data-ttu-id="edcc0-458">Manuálisan is létrehozhatja az alkalmazások fájljait tartalmazó tömörített archívumot.</span><span class="sxs-lookup"><span data-stu-id="edcc0-458">You can manually create a zipped archive containing your applications files.</span></span> <span data-ttu-id="edcc0-459">Töltse fel a tömörített archívumot az Azure Storage-ba blobként.</span><span class="sxs-lookup"><span data-stu-id="edcc0-459">Upload your zipped archive to Azure Storage as a blob.</span></span> <span data-ttu-id="edcc0-460">Adja meg a kezdő tevékenységhez erőforrásfájlként a ZIP-archívumot.</span><span class="sxs-lookup"><span data-stu-id="edcc0-460">Specify the zipped archive as a resource file for your start task.</span></span> <span data-ttu-id="edcc0-461">A kezdő tevékenység parancssorának futtatása előtt csomagolja ki a parancssorból az archívumot.</span><span class="sxs-lookup"><span data-stu-id="edcc0-461">Before you run the command line for your start task, unzip the archive from the command line.</span></span> 
>
>    <span data-ttu-id="edcc0-462">Az archívum kibontásához használhatja az Ön által választott archiválási eszközt.</span><span class="sxs-lookup"><span data-stu-id="edcc0-462">To unzip the archive, you can use the archiving tool of your choice.</span></span> <span data-ttu-id="edcc0-463">Mellékelnie kell azt az eszközt, amellyel az archívumot kicsomagolja a kezdő tevékenység erőforrás-fájljaként.</span><span class="sxs-lookup"><span data-stu-id="edcc0-463">You will need to include the tool that you use to unzip the archive as a resource file for the start task.</span></span>
>
>

### <a name="job-manager-task"></a><span data-ttu-id="edcc0-464">Feladatkezelő tevékenység</span><span class="sxs-lookup"><span data-stu-id="edcc0-464">Job manager task</span></span>
<span data-ttu-id="edcc0-465">A feladatok végrehajtásának szabályozása és/vagy figyelése általában egy **feladatkezelői tevékenység** segítségével történik, például ez végzi a feladatokhoz tartozó tevékenységek létrehozását és beküldését, a további futtatandó tevékenységek meghatározását, illetve ez határozza meg, hogy mikor fejeződött be a művelet.</span><span class="sxs-lookup"><span data-stu-id="edcc0-465">You typically use a **job manager task** to control and/or monitor job execution--for example, to create and submit the tasks for a job, determine additional tasks to run, and determine when work is complete.</span></span> <span data-ttu-id="edcc0-466">A feladatkezelői tevékenység azonban más célokra is használható,</span><span class="sxs-lookup"><span data-stu-id="edcc0-466">However, a job manager task is not restricted to these activities.</span></span> <span data-ttu-id="edcc0-467">hiszen ez is egy teljes értékű tevékenység, amely a feladathoz szükséges bármilyen művelet elvégzésére alkalmas.</span><span class="sxs-lookup"><span data-stu-id="edcc0-467">It is a fully fledged task that can perform any actions that are required for the job.</span></span> <span data-ttu-id="edcc0-468">A feladatkezelői tevékenység például letöltheti a paraméterként meghatározott fájlt, elemezheti a fájl tartalmát, és további tevékenységeket küldhet el a tartalom alapján.</span><span class="sxs-lookup"><span data-stu-id="edcc0-468">For example, a job manager task might download a file that is specified as a parameter, analyze the contents of that file, and submit additional tasks based on those contents.</span></span>

<span data-ttu-id="edcc0-469">A rendszer minden más feladat előtt indítja el a feladatkezelői tevékenységeket.</span><span class="sxs-lookup"><span data-stu-id="edcc0-469">A job manager task is started before all other tasks.</span></span> <span data-ttu-id="edcc0-470">Ez a tevékenység a következő jellemzőkkel bír:</span><span class="sxs-lookup"><span data-stu-id="edcc0-470">It provides the following features:</span></span>

* <span data-ttu-id="edcc0-471">A Batch szolgáltatás automatikusan küldi el ezeket tevékenységekként a feladat létrehozásakor.</span><span class="sxs-lookup"><span data-stu-id="edcc0-471">It is automatically submitted as a task by the Batch service when the job is created.</span></span>
* <span data-ttu-id="edcc0-472">Úgy vannak ütemezve, hogy a feladatok más tevékenységei előtt fussanak.</span><span class="sxs-lookup"><span data-stu-id="edcc0-472">It is scheduled to execute before the other tasks in a job.</span></span>
* <span data-ttu-id="edcc0-473">A hozzájuk társított csomópontot távolítja el a rendszer utoljára a készletből a készlet méretének csökkentésekor.</span><span class="sxs-lookup"><span data-stu-id="edcc0-473">Its associated node is the last to be removed from a pool when the pool is being downsized.</span></span>
* <span data-ttu-id="edcc0-474">A befejezésük a feladat összes tevékenységének befejezéséhez köthető.</span><span class="sxs-lookup"><span data-stu-id="edcc0-474">Its termination can be tied to the termination of all tasks in the job.</span></span>
* <span data-ttu-id="edcc0-475">A feladatkezelői tevékenység a legmagasabb prioritást kapja, ha újra kell indítani.</span><span class="sxs-lookup"><span data-stu-id="edcc0-475">A job manager task is given the highest priority when it needs to be restarted.</span></span> <span data-ttu-id="edcc0-476">Ha egy tétlen csomópont nem érhető el, a Batch szolgáltatás leállíthatja valamelyik másik futó tevékenységet a készletben, hogy helyet szabadítson fel a feladatkezelői tevékenység futtatásához.</span><span class="sxs-lookup"><span data-stu-id="edcc0-476">If an idle node is not available, the Batch service might terminate one of the other running tasks in the pool to make room for the job manager task to run.</span></span>
* <span data-ttu-id="edcc0-477">Az egyik feladat feladatkezelő tevékenysége nem rendelkezik nagyobb prioritással, mint más feladatok tevékenységei.</span><span class="sxs-lookup"><span data-stu-id="edcc0-477">A job manager task in one job does not have priority over the tasks of other jobs.</span></span> <span data-ttu-id="edcc0-478">A feladatok között csak a feladatszintű prioritások érvényesek.</span><span class="sxs-lookup"><span data-stu-id="edcc0-478">Across jobs, only job-level priorities are observed.</span></span>

### <a name="job-preparation-and-release-tasks"></a><span data-ttu-id="edcc0-479">Feladat-előkészítési és -kiadási tevékenységek</span><span class="sxs-lookup"><span data-stu-id="edcc0-479">Job preparation and release tasks</span></span>
<span data-ttu-id="edcc0-480">A Batch a feladatok előtt elvégzendő beállításokhoz feladat-előkészítési tevékenységeket biztosít.</span><span class="sxs-lookup"><span data-stu-id="edcc0-480">Batch provides job preparation tasks for pre-job execution setup.</span></span> <span data-ttu-id="edcc0-481">A feladatkiadási tevékenységek ezzel szemben a feladat elvégzése utáni karbantartási vagy takarítási műveletekhez használhatók.</span><span class="sxs-lookup"><span data-stu-id="edcc0-481">Job release tasks are for post-job maintenance or cleanup.</span></span>

* <span data-ttu-id="edcc0-482">**Feladat-előkészítési tevékenység**: a feladat-előkészítési tevékenységek a tevékenységek futtatására ütemezett összes számítási csomóponton, minden más tevékenység végrehajtása előtt lefutnak.</span><span class="sxs-lookup"><span data-stu-id="edcc0-482">**Job preparation task**: A job preparation task runs on all compute nodes that are scheduled to run tasks, before any of the other job tasks are executed.</span></span> <span data-ttu-id="edcc0-483">A feladat-előkészítési tevékenység használható például az összes tevékenységre jellemző, de a feladat esetében egyedi adatok másolására.</span><span class="sxs-lookup"><span data-stu-id="edcc0-483">You can use a job preparation task to copy data that is shared by all tasks, but is unique to the job, for example.</span></span>
* <span data-ttu-id="edcc0-484">**Feladatkiadási tevékenység**: amikor egy feladat befejeződött, a feladatkiadási tevékenység a készlet minden csomópontján lefut, amely legalább egy tevékenységet elvégzett.</span><span class="sxs-lookup"><span data-stu-id="edcc0-484">**Job release task**: When a job has completed, a job release task runs on each node in the pool that executed at least one task.</span></span> <span data-ttu-id="edcc0-485">A feladatkiadási tevékenységgel törölheti a feladat-előkészítési tevékenység által másolt adatokat, vagy például tömörítheti, majd feltöltheti a diagnosztikai naplóadatokat.</span><span class="sxs-lookup"><span data-stu-id="edcc0-485">You can use a job release task to delete data that is copied by the job preparation task, or to compress and upload diagnostic log data, for example.</span></span>

<span data-ttu-id="edcc0-486">Mind a feladat-előkészítési, mind a feladatkiadási tevékenységeknél megadhat egy parancssort, amelyet futtatni szeretne a tevékenység meghívásakor.</span><span class="sxs-lookup"><span data-stu-id="edcc0-486">Both job preparation and release tasks allow you to specify a command line to run when the task is invoked.</span></span> <span data-ttu-id="edcc0-487">Ezek segítségével számos különböző funkciót érhet el, például fájlokat tölthet le, emelt jogosultsági szintű futtatást végezhet, egyéni környezeti változókat adhat meg, illetve beállíthatja a maximális végrehajtási időt, az újrapróbálások számát, illetve a fájlmegőrzési időt.</span><span class="sxs-lookup"><span data-stu-id="edcc0-487">They offer features like file download, elevated execution, custom environment variables, maximum execution duration, retry count, and file retention time.</span></span>

<span data-ttu-id="edcc0-488">A feladatelőkészítési és -kiadási tevékenységekkel kapcsolatos további információért lásd: [Feladat-előkészítési és -befejezési műveletek futtatása Azure Batch számítási csomópontokon](batch-job-prep-release.md).</span><span class="sxs-lookup"><span data-stu-id="edcc0-488">For more information on job preparation and release tasks, see [Run job preparation and completion tasks on Azure Batch compute nodes](batch-job-prep-release.md).</span></span>

### <a name="multi-instance-task"></a><span data-ttu-id="edcc0-489">Többpéldányos tevékenység</span><span class="sxs-lookup"><span data-stu-id="edcc0-489">Multi-instance task</span></span>
<span data-ttu-id="edcc0-490">A [többpéldányos tevékenységek](batch-mpi.md) olyan tevékenységek, amelyek több számítási csomóponton való egyidejű futtatásra vannak konfigurálva.</span><span class="sxs-lookup"><span data-stu-id="edcc0-490">A [multi-instance task](batch-mpi.md) is a task that is configured to run on more than one compute node simultaneously.</span></span> <span data-ttu-id="edcc0-491">Többpéldányos tevékenységek esetén olyan nagy teljesítményű számítási megoldásokat használhat, amelyeknél a rendszer számítási csomópontok egy csoportját együtt foglalja le egyetlen közös számítási feladat (például a Message Passing Interface (MPI)) feldolgozásához.</span><span class="sxs-lookup"><span data-stu-id="edcc0-491">With multi-instance tasks, you can enable high-performance computing scenarios that require a group of compute nodes that are allocated together to process a single workload (like Message Passing Interface (MPI)).</span></span>

<span data-ttu-id="edcc0-492">A Batch szolgáltatásban az MPI-feladatok Batch .NET-könyvtárral való futtatásának részletes leírásáért lásd: [Use multi-instance tasks to run Message Passing Interface (MPI) applications in Azure Batch](batch-mpi.md) (Többpéldányos tevékenységek használata Message Passing Interface- (MPI-) alkalmazások futtatásához az Azure Batch szolgáltatásban).</span><span class="sxs-lookup"><span data-stu-id="edcc0-492">For a detailed discussion on running MPI jobs in Batch by using the Batch .NET library, check out [Use multi-instance tasks to run Message Passing Interface (MPI) applications in Azure Batch](batch-mpi.md).</span></span>

### <a name="task-dependencies"></a><span data-ttu-id="edcc0-493">Tevékenységfüggőségek</span><span class="sxs-lookup"><span data-stu-id="edcc0-493">Task dependencies</span></span>
<span data-ttu-id="edcc0-494">Ahogyan a név is jelzi, a [tevékenységfüggőségek](batch-task-dependencies.md) segítségével beállíthatja, hogy egy tevékenység végrehajtásához más tevékenységek előzetes befejezése legyen szükséges.</span><span class="sxs-lookup"><span data-stu-id="edcc0-494">[Task dependencies](batch-task-dependencies.md), as the name implies, allow you to specify that a task depends on the completion of other tasks before its execution.</span></span> <span data-ttu-id="edcc0-495">Ez a funkció olyan helyzetekben lehet hasznos, amikor egy „alsóbb rétegbeli” tevékenység egy „felsőbb rétegbeli” tevékenység kimenetét használja, vagy amikor egy felsőbb rétegbeli tevékenység alsóbb rétegbeli tevékenység által igényelt inicializálást végez.</span><span class="sxs-lookup"><span data-stu-id="edcc0-495">This feature provides support for situations in which a "downstream" task consumes the output of an "upstream" task--or when an upstream task performs some initialization that is required by a downstream task.</span></span> <span data-ttu-id="edcc0-496">Ezen funkció használatához először engedélyeznie kell a tevékenységfüggőségeket a Batch-feladatban.</span><span class="sxs-lookup"><span data-stu-id="edcc0-496">To use this feature, you must first enable task dependencies on your Batch job.</span></span> <span data-ttu-id="edcc0-497">Ezután az egy másik (vagy sok másik) tevékenységtől függő mindegyik tevékenységhez meg kell adnia azokat a tevékenységeket, amelyektől függnek.</span><span class="sxs-lookup"><span data-stu-id="edcc0-497">Then, for each task that depends on another (or many others), you specify the tasks which that task depends on.</span></span>

<span data-ttu-id="edcc0-498">A tevékenységfüggőségekkel a következőkhöz hasonló forgatókönyveket konfigurálhat:</span><span class="sxs-lookup"><span data-stu-id="edcc0-498">With task dependencies, you can configure scenarios like the following:</span></span>

* <span data-ttu-id="edcc0-499">A *taskB* a *taskA* tevékenységtől függ (a *taskB* végrehajtása nem kezdődik meg a *taskA* befejeződéséig).</span><span class="sxs-lookup"><span data-stu-id="edcc0-499">*taskB* depends on *taskA* (*taskB* will not begin execution until *taskA* has completed).</span></span>
* <span data-ttu-id="edcc0-500">A *taskC* a *taskA* és a *taskB* tevékenységtől is függ.</span><span class="sxs-lookup"><span data-stu-id="edcc0-500">*taskC* depends on both *taskA* and *taskB*.</span></span>
* <span data-ttu-id="edcc0-501">A *taskD* egy tevékenységtartománytól függ, például az *1* – *10.* tevékenység befejeződéséig nem hajtja végre a rendszer.</span><span class="sxs-lookup"><span data-stu-id="edcc0-501">*taskD* depends on a range of tasks, such as tasks *1* through *10*, before it executes.</span></span>

<span data-ttu-id="edcc0-502">A funkció részletesebb bemutatásért olvassa el a [Task dependencies in Azure Batch](batch-task-dependencies.md) (Tevékenységfüggőségek az Azure Batch szolgáltatásban) című cikket, vagy tekintse meg a Github [azure-batch-samples][github_samples] nevű adattárában található [TaskDependencies][github_sample_taskdeps] kódmintát.</span><span class="sxs-lookup"><span data-stu-id="edcc0-502">Check out [Task dependencies in Azure Batch](batch-task-dependencies.md) and the [TaskDependencies][github_sample_taskdeps] code sample in the [azure-batch-samples][github_samples] GitHub repository for more in-depth details on this feature.</span></span>

## <a name="environment-settings-for-tasks"></a><span data-ttu-id="edcc0-503">Környezeti beállítások tevékenységekhez</span><span class="sxs-lookup"><span data-stu-id="edcc0-503">Environment settings for tasks</span></span>
<span data-ttu-id="edcc0-504">A Batch-szolgáltatás által végrehajtott minden egyes feladat hozzáférhet azokhoz a környezeti változókhoz, amelyeket a számítási csomópontokon beállít.</span><span class="sxs-lookup"><span data-stu-id="edcc0-504">Each task executed by the Batch service has access to environment variables that it sets on compute nodes.</span></span> <span data-ttu-id="edcc0-505">Ez magában foglalja a Batch szolgáltatás által definiált környezeti változókat ([service-defined][msdn_env_vars]) és a tevékenységek számára definiálható egyéni környezeti változókat.</span><span class="sxs-lookup"><span data-stu-id="edcc0-505">This includes environment variables defined by the Batch service ([service-defined][msdn_env_vars]) and custom environment variables that you can define for your tasks.</span></span> <span data-ttu-id="edcc0-506">A tevékenységek által végrehajtott alkalmazások és parancsfájlok a végrehajtás során szintén elérik ezeket a környezeti változókat.</span><span class="sxs-lookup"><span data-stu-id="edcc0-506">The applications and scripts your tasks execute have access to these environment variables during execution.</span></span>

<span data-ttu-id="edcc0-507">Az egyéni környezeti változókat a tevékenységek és a feladatok szintjén is megadhatja: ehhez töltse ki a kívánt elemek *környezeti beállítások* tulajdonságait.</span><span class="sxs-lookup"><span data-stu-id="edcc0-507">You can set custom environment variables at the task or job level by populating the *environment settings* property for these entities.</span></span> <span data-ttu-id="edcc0-508">Ilyen például az [Add a task to a job][rest_add_task] (Tevékenység hozzáadása feladathoz) művelet (Batch REST API), vagy a Batch .NET [CloudTask.EnvironmentSettings][net_cloudtask_env] és [CloudJob.CommonEnvironmentSettings][net_job_env] tulajdonsága.</span><span class="sxs-lookup"><span data-stu-id="edcc0-508">For example, see the [Add a task to a job][rest_add_task] operation (Batch REST API), or the [CloudTask.EnvironmentSettings][net_cloudtask_env] and [CloudJob.CommonEnvironmentSettings][net_job_env] properties in Batch .NET.</span></span>

<span data-ttu-id="edcc0-509">Az ügyfélalkalmazás vagy szolgáltatás a [Get information about a task][rest_get_task_info] (Tevékenység információinak lekérése) művelet (Batch REST) segítségével, vagy a [CloudTask.EnvironmentSettings][net_cloudtask_env] tulajdonság (Batch .NET) elérésével képes beszerezni a tevékenység (szolgáltatás által meghatározott és egyéni) környezeti változóit.</span><span class="sxs-lookup"><span data-stu-id="edcc0-509">Your client application or service can obtain a task's environment variables, both service-defined and custom, by using the [Get information about a task][rest_get_task_info] operation (Batch REST) or by accessing the [CloudTask.EnvironmentSettings][net_cloudtask_env] property (Batch .NET).</span></span> <span data-ttu-id="edcc0-510">A számítási csomóponton végrehajtott folyamatok például a közismert `%VARIABLE_NAME%` (Windows) vagy a `$VARIABLE_NAME` (Linux) szintaxis segítségével képesek elérni ezeket és más környezeti változókat a csomóponton.</span><span class="sxs-lookup"><span data-stu-id="edcc0-510">Processes executing on a compute node can access these and other environment variables on the node, for example, by using the familiar `%VARIABLE_NAME%` (Windows) or `$VARIABLE_NAME` (Linux) syntax.</span></span>

<span data-ttu-id="edcc0-511">Az összes szolgáltatás által definiált környezeti változót tartalmazó teljes listát megtalálja a [Számítási csomópont környezeti változói][msdn_env_vars] című részben.</span><span class="sxs-lookup"><span data-stu-id="edcc0-511">You can find a full list of all service-defined environment variables in [Compute node environment variables][msdn_env_vars].</span></span>

## <a name="files-and-directories"></a><span data-ttu-id="edcc0-512">Fájlok és könyvtárak</span><span class="sxs-lookup"><span data-stu-id="edcc0-512">Files and directories</span></span>
<span data-ttu-id="edcc0-513">Minden tevékenységhez tartozik egy *munkakönyvtár*, amelyben a tevékenység létrehozza a további fájlokat és alkönyvtárakat, ha ilyenekre szükség van.</span><span class="sxs-lookup"><span data-stu-id="edcc0-513">Each task has a *working directory* under which it creates zero or more files and directories.</span></span> <span data-ttu-id="edcc0-514">Ez a munkakönyvtár használható a tevékenység által futtatott program, az ez által feldolgozott adatok, valamint az eredményként létrejövő kimenet tárolására.</span><span class="sxs-lookup"><span data-stu-id="edcc0-514">This working directory can be used for storing the program that is run by the task, the data that it processes, and the output of the processing it performs.</span></span> <span data-ttu-id="edcc0-515">A tevékenységhez tartozó összes fájlnak és könyvtárnak a tevékenység felhasználója a tulajdonosa.</span><span class="sxs-lookup"><span data-stu-id="edcc0-515">All files and directories of a task are owned by the task user.</span></span>

<span data-ttu-id="edcc0-516">A Batch szolgáltatás *gyökérkönyvtárként* megjeleníti a csomóponton lévő fájlrendszer egy részét.</span><span class="sxs-lookup"><span data-stu-id="edcc0-516">The Batch service exposes a portion of the file system on a node as the *root directory*.</span></span> <span data-ttu-id="edcc0-517">A tevékenységek az `AZ_BATCH_NODE_ROOT_DIR` környezeti változóra hivatkozva tudják elérni a gyökérkönyvtárat.</span><span class="sxs-lookup"><span data-stu-id="edcc0-517">Tasks can access the root directory by referencing the `AZ_BATCH_NODE_ROOT_DIR` environment variable.</span></span> <span data-ttu-id="edcc0-518">A környezeti változók használatával kapcsolatos további információért lásd: [Környezeti beállítások tevékenységekhez](#environment-settings-for-tasks).</span><span class="sxs-lookup"><span data-stu-id="edcc0-518">For more information about using environment variables, see [Environment settings for tasks](#environment-settings-for-tasks).</span></span>

<span data-ttu-id="edcc0-519">A gyökérkönyvtár a következő könyvtárstruktúrát tartalmazza:</span><span class="sxs-lookup"><span data-stu-id="edcc0-519">The root directory contains the following directory structure:</span></span>

![Számítási csomópont könyvtárstruktúrája][1]

* <span data-ttu-id="edcc0-521">**shared**: ez a könyvtár olvasási/írási hozzáférést nyújt a csomóponton futó *összes* tevékenység számára.</span><span class="sxs-lookup"><span data-stu-id="edcc0-521">**shared**: This directory provides read/write access to *all* tasks that run on a node.</span></span> <span data-ttu-id="edcc0-522">Ebben a könyvtárban a csomóponton futó összes tevékenység jogosult fájlokat létrehozni, olvasni, módosítani és törölni.</span><span class="sxs-lookup"><span data-stu-id="edcc0-522">Any task that runs on the node can create, read, update, and delete files in this directory.</span></span> <span data-ttu-id="edcc0-523">A tevékenységek az `AZ_BATCH_NODE_SHARED_DIR` környezeti változóra hivatkozva tudják elérni ezt a könyvtárat.</span><span class="sxs-lookup"><span data-stu-id="edcc0-523">Tasks can access this directory by referencing the `AZ_BATCH_NODE_SHARED_DIR` environment variable.</span></span>
* <span data-ttu-id="edcc0-524">**startup**: az indítási tevékenység ezt a könyvtárat használja munkakönyvtárként.</span><span class="sxs-lookup"><span data-stu-id="edcc0-524">**startup**: This directory is used by a start task as its working directory.</span></span> <span data-ttu-id="edcc0-525">Az indítási tevékenység által a csomópontra letöltött összes fájlt ez a könyvtár tárolja.</span><span class="sxs-lookup"><span data-stu-id="edcc0-525">All of the files that are downloaded to the node by the start task are stored here.</span></span> <span data-ttu-id="edcc0-526">Ebben a könyvtárban az indítási tevékenység jogosult fájlokat létrehozni, olvasni, módosítani és törölni.</span><span class="sxs-lookup"><span data-stu-id="edcc0-526">The start task can create, read, update, and delete files under this directory.</span></span> <span data-ttu-id="edcc0-527">A tevékenységek az `AZ_BATCH_NODE_STARTUP_DIR` környezeti változóra hivatkozva tudják elérni ezt a könyvtárat.</span><span class="sxs-lookup"><span data-stu-id="edcc0-527">Tasks can access this directory by referencing the `AZ_BATCH_NODE_STARTUP_DIR` environment variable.</span></span>
* <span data-ttu-id="edcc0-528">**Tasks**: létrejön egy könyvtár a csomóponton futó minden egyes feladathoz.</span><span class="sxs-lookup"><span data-stu-id="edcc0-528">**Tasks**: A directory is created for each task that runs on the node.</span></span> <span data-ttu-id="edcc0-529">Ez a könyvtár a `AZ_BATCH_TASK_DIR` környezeti változóra való hivatkozással érhető el.</span><span class="sxs-lookup"><span data-stu-id="edcc0-529">It is accessed by referencing the `AZ_BATCH_TASK_DIR` environment variable.</span></span>

    <span data-ttu-id="edcc0-530">A Batch szolgáltatás minden tevékenységkönyvtárban létrehoz egy munkakönyvtárat (`wd`), amelynek egyedi elérési útját a(z) `AZ_BATCH_TASK_WORKING_DIR` környezeti változó határozza meg.</span><span class="sxs-lookup"><span data-stu-id="edcc0-530">Within each task directory, the Batch service creates a working directory (`wd`) whose unique path is specified by the `AZ_BATCH_TASK_WORKING_DIR` environment variable.</span></span> <span data-ttu-id="edcc0-531">Ez a könyvtár olvasási/írási hozzáférést nyújt a tevékenységhez.</span><span class="sxs-lookup"><span data-stu-id="edcc0-531">This directory provides read/write access to the task.</span></span> <span data-ttu-id="edcc0-532">A tevékenység jogosult fájlokat létrehozni, olvasni, módosítani és törölni ebben a könyvtárban.</span><span class="sxs-lookup"><span data-stu-id="edcc0-532">The task can create, read, update, and delete files under this directory.</span></span> <span data-ttu-id="edcc0-533">A rendszer a tevékenységhez beállított *RetentionTime* korlátozás értékének megfelelően őrzi meg a könyvtárat.</span><span class="sxs-lookup"><span data-stu-id="edcc0-533">This directory is retained based on the *RetentionTime* constraint that is specified for the task.</span></span>

    <span data-ttu-id="edcc0-534">`stdout.txt` és `stderr.txt`: a rendszer ezeket a fájlokat írja a tevékenységmappába a tevékenység futtatásakor.</span><span class="sxs-lookup"><span data-stu-id="edcc0-534">`stdout.txt` and `stderr.txt`: These files are written to the task folder during the execution of the task.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="edcc0-535">Amikor eltávolít egy csomópontot a készletből, a csomóponton tárolt *összes* fájlt is eltávolítja.</span><span class="sxs-lookup"><span data-stu-id="edcc0-535">When a node is removed from the pool, *all* of the files that are stored on the node are removed.</span></span>
>
>

## <a name="application-packages"></a><span data-ttu-id="edcc0-536">Alkalmazáscsomagok</span><span class="sxs-lookup"><span data-stu-id="edcc0-536">Application packages</span></span>
<span data-ttu-id="edcc0-537">Az [alkalmazáscsomagok](batch-application-packages.md) funkció az alkalmazások egyszerű kezelését és üzembe helyezését nyújtja a készletek számítási csomópontjain.</span><span class="sxs-lookup"><span data-stu-id="edcc0-537">The [application packages](batch-application-packages.md) feature provides easy management and deployment of applications to the compute nodes in your pools.</span></span> <span data-ttu-id="edcc0-538">A tevékenységek által futtatott alkalmazásokból, illetve ezek bináris és támogatófájljaiból több különböző verziót is feltölthet és kezelhet.</span><span class="sxs-lookup"><span data-stu-id="edcc0-538">You can upload and manage multiple versions of the applications run by your tasks, including their binaries and support files.</span></span> <span data-ttu-id="edcc0-539">Ezt követően automatikusan üzembe helyezheti ezeket az alkalmazásokat a készletben működő számítási csomópontokon.</span><span class="sxs-lookup"><span data-stu-id="edcc0-539">Then you can automatically deploy one or more of these applications to the compute nodes in your pool.</span></span>

<span data-ttu-id="edcc0-540">Az alkalmazáscsomagokat a készletek és a tevékenységek szintjén is beállíthatja.</span><span class="sxs-lookup"><span data-stu-id="edcc0-540">You can specify application packages at the pool and task level.</span></span> <span data-ttu-id="edcc0-541">Ha készletszintű alkalmazáscsomagokat állít be, a rendszer a készlet összes csomópontján üzembe helyezi az alkalmazást.</span><span class="sxs-lookup"><span data-stu-id="edcc0-541">When you specify pool application packages, the application is deployed to every node in the pool.</span></span> <span data-ttu-id="edcc0-542">Ha tevékenységszintű alkalmazáscsomagokat állít be, a rendszer csak azokon a csomópontokon helyezi üzembe az alkalmazást, amelyen a feladathoz kapcsolódó tevékenységek közül legalább egy futásra van beütemezve. Az üzembe helyezés közvetlenül a tevékenység parancssorának futtatása előtt történik.</span><span class="sxs-lookup"><span data-stu-id="edcc0-542">When you specify task application packages, the application is deployed only to nodes that are scheduled to run at least one of the job's tasks, just before the task's command line is run.</span></span>

<span data-ttu-id="edcc0-543">Az Azure Storage-tárfiókkal való együttműködés részleteit a Batch kezeli: a rendszer itt tárolja az alkalmazáscsomagokat, és innen helyezi őket üzembe a számítási csomópontokra, így a kód és a felügyelet is egyszerűbbé válik.</span><span class="sxs-lookup"><span data-stu-id="edcc0-543">Batch handles the details of working with Azure Storage to store your application packages and deploy them to compute nodes, so both your code and management overhead can be simplified.</span></span>

<span data-ttu-id="edcc0-544">Az alkalmazáscsomag szolgáltatással kapcsolatos további részletekért lásd: [Alkalmazások telepítése számítási csomópontokon Batch-alkalmazáscsomagokkal](batch-application-packages.md).</span><span class="sxs-lookup"><span data-stu-id="edcc0-544">To find out more about the application package feature, check out [Deploy applications to compute nodes with Batch application packages](batch-application-packages.md).</span></span>

> [!NOTE]
> <span data-ttu-id="edcc0-545">Ha egy *meglévő* készlethez ad készletszintű alkalmazáscsomagokat, ahhoz, hogy a rendszer üzembe tudja helyezni ezeket a csomópontokon, újra kell indítania a számítási csomópontokat.</span><span class="sxs-lookup"><span data-stu-id="edcc0-545">If you add pool application packages to an *existing* pool, you must reboot its compute nodes for the application packages to be deployed to the nodes.</span></span>
>
>

## <a name="pool-and-compute-node-lifetime"></a><span data-ttu-id="edcc0-546">Készlet és számítási csomópont élettartama</span><span class="sxs-lookup"><span data-stu-id="edcc0-546">Pool and compute node lifetime</span></span>
<span data-ttu-id="edcc0-547">Az Azure Batch-megoldás tervezésekor el kell döntenie, hogy hogyan és mikor jöjjenek létre a készletek, illetve, hogy mennyi ideig legyenek elérhetőek a készletekben lévő számítási csomópontok.</span><span class="sxs-lookup"><span data-stu-id="edcc0-547">When you design your Azure Batch solution, you have to make a design decision about how and when pools are created, and how long compute nodes within those pools are kept available.</span></span>

<span data-ttu-id="edcc0-548">Az egyik szélsőség, ha azt állítja be, hogy a rendszer hozza létre a készletet az Ön által elküldött egyes feladatokhoz, és azonnal törölje a készletet, amint az egyes feladatok tevékenységeinek végrehajtása befejeződött.</span><span class="sxs-lookup"><span data-stu-id="edcc0-548">On one end of the spectrum, you can create a pool for each job that you submit, and delete the pool as soon as its tasks finish execution.</span></span> <span data-ttu-id="edcc0-549">Ez maximalizálja a kihasználtságot, mivel a rendszer csak akkor foglalja le a csomópontokat, amikor szükség van rájuk, és rögtön leállítja őket, amint tétlenek lesznek.</span><span class="sxs-lookup"><span data-stu-id="edcc0-549">This maximizes utilization because the nodes are only allocated when needed, and shut down as soon as they're idle.</span></span> <span data-ttu-id="edcc0-550">Bár ez azt jelenti, hogy a feladatnak meg kell várnia a csomópontok lefoglalását, fontos megjegyezni, hogy a tevékenységek ütemezve lesznek a végrehajtásra, amint a csomópontok önállóan elérhetővé válnak, le vannak foglalva, és amint az indítási tevékenység befejeződött.</span><span class="sxs-lookup"><span data-stu-id="edcc0-550">While this means that the job must wait for the nodes to be allocated, it's important to note that tasks are scheduled for execution as soon as nodes are individually available, allocated, and the start task has completed.</span></span> <span data-ttu-id="edcc0-551">A Batch *nem* vár addig a tevékenységek csomópontokhoz rendelésével, amíg a készletben lévő összes csomópont elérhetővé válik.</span><span class="sxs-lookup"><span data-stu-id="edcc0-551">Batch does *not* wait until all nodes within a pool are available before assigning tasks to the nodes.</span></span> <span data-ttu-id="edcc0-552">Így garantálható az összes elérhető csomópont maximális kihasználtsága.</span><span class="sxs-lookup"><span data-stu-id="edcc0-552">This ensures maximum utilization of all available nodes.</span></span>

<span data-ttu-id="edcc0-553">A másik végletet akkor érdemes választani, ha a feladatok azonnali indítása a legfontosabb: ilyenkor a feladatok elküldése előtt hozza létre a készletet, és tegye elérhetővé a csomópontokat.</span><span class="sxs-lookup"><span data-stu-id="edcc0-553">At the other end of the spectrum, if having jobs start immediately is the highest priority, you can create a pool ahead of time and make its nodes available before jobs are submitted.</span></span> <span data-ttu-id="edcc0-554">Ebben a megoldásban a tevékenységek azonnal indulhatnak, de a csomópontok tétlenek lehetnek a tevékenységek hozzárendeléséig.</span><span class="sxs-lookup"><span data-stu-id="edcc0-554">In this scenario, tasks can start immediately, but nodes might sit idle while waiting for them to be assigned.</span></span>

<span data-ttu-id="edcc0-555">A változó természetű, ám folyamatos terhelések kezeléséhez általában a fenti két megoldás kombinációját használjuk.</span><span class="sxs-lookup"><span data-stu-id="edcc0-555">A combined approach is typically used for handling a variable, but ongoing, load.</span></span> <span data-ttu-id="edcc0-556">Létrehozhat egy készletet, amelynek akár több feladatot is el lehet küldeni, de beállíthatja, hogy a rendszer a feladathoz tartozó terhelés alapján csökkentse vagy növelje a csomópontok számát (lásd a következő, [A számítási erőforrások méretezése](#scaling-compute-resources) című fejezetet).</span><span class="sxs-lookup"><span data-stu-id="edcc0-556">You can have a pool that multiple jobs are submitted to, but can scale the number of nodes up or down according to the job load (see [Scaling compute resources](#scaling-compute-resources) in the following section).</span></span> <span data-ttu-id="edcc0-557">Ez reaktív módon, az aktuális terhelés alapján is elvégezhető, de proaktív módszert is használhat, ha a terhelés előrejelezhető.</span><span class="sxs-lookup"><span data-stu-id="edcc0-557">You can do this reactively, based on current load, or proactively, if load can be predicted.</span></span>

## <a name="virtual-network-vnet-and-firewall-configuration"></a><span data-ttu-id="edcc0-558">A virtuális hálózat (VNet) és a tűzfal konfigurálása</span><span class="sxs-lookup"><span data-stu-id="edcc0-558">Virtual network (VNet) and firewall configuration</span></span> 

<span data-ttu-id="edcc0-559">Amikor számítási csomópontok készletét hozza létre az Azure Batchben, hozzárendelheti a készletet egy Azure [virtuális hálózat (VNet)](../virtual-network/virtual-networks-overview.md) alhálózatához.</span><span class="sxs-lookup"><span data-stu-id="edcc0-559">When you provision a pool of compute nodes in Azure Batch, you can associate the pool with a subnet of an Azure [virtual network (VNet)](../virtual-network/virtual-networks-overview.md).</span></span> <span data-ttu-id="edcc0-560">További információkat VNetek alhálózatokkal történő létrehozásáról az [alhálózatokkal rendelkező Azure virtuális hálózat létrehozását ismertető](../virtual-network/virtual-networks-create-vnet-arm-pportal.md) cikkben találhat.</span><span class="sxs-lookup"><span data-stu-id="edcc0-560">To learn more about creating a VNet with subnets, see [Create an Azure virtual network with subnets](../virtual-network/virtual-networks-create-vnet-arm-pportal.md).</span></span> 

 * <span data-ttu-id="edcc0-561">A készlethez tartozó VNetnek a következő követelményeknek kell megfelelnie:</span><span class="sxs-lookup"><span data-stu-id="edcc0-561">The VNet associated with a pool must be:</span></span>

   * <span data-ttu-id="edcc0-562">Az Azure Batch-fiókkal megegyező **Azure-régióban** kell lennie.</span><span class="sxs-lookup"><span data-stu-id="edcc0-562">In the same Azure **region** as the Azure Batch account.</span></span>
   * <span data-ttu-id="edcc0-563">Az Azure Batch-fiókkal megegyező **előfizetésben** kell lennie.</span><span class="sxs-lookup"><span data-stu-id="edcc0-563">In the same **subscription** as the Azure Batch account.</span></span>

* <span data-ttu-id="edcc0-564">A támogatott virtuálishálózat-típus attól függ, hogyan kerülnek lefoglalásra a készletek a Batch-fiókhoz:</span><span class="sxs-lookup"><span data-stu-id="edcc0-564">The type of VNet supported depends on how pools are being allocated for the Batch account:</span></span>

    - <span data-ttu-id="edcc0-565">Ha a Batch-fiók készletlefoglalási módja a Batch szolgáltatás, akkor csak azokhoz a készletekhez rendelhet VNetet, amelyek a **felhőszolgáltatás-konfigurációval** lettek létrehozva.</span><span class="sxs-lookup"><span data-stu-id="edcc0-565">If the pool allocation mode for your Batch account is set to Batch Service, then you can assign a VNet only to pools created with the **Cloud Services Configuration**.</span></span> <span data-ttu-id="edcc0-566">Továbbá a megadott VNetet a klasszikus üzemi modellel kell létrehozni.</span><span class="sxs-lookup"><span data-stu-id="edcc0-566">Additionally, the specified VNet must be created with the classic deployment model.</span></span> <span data-ttu-id="edcc0-567">Az Azure Resource Manager-alapú üzemi modellel létrehozott VNetek nem támogatottak.</span><span class="sxs-lookup"><span data-stu-id="edcc0-567">VNets created with the Azure Resource Manager deployment model are not supported.</span></span>
 
    - <span data-ttu-id="edcc0-568">Ha a Batch-fiók készletlefoglalási módja a Felhasználói előfizetés, akkor csak azokhoz a készletekhez rendelhet VNetet, amelyek a **virtuálisgép-konfigurációval** lettek létrehozva.</span><span class="sxs-lookup"><span data-stu-id="edcc0-568">If the pool allocation mode for your Batch account is set to User Subscription, then you can assign a VNet only to pools created with the **Virtual Machine Configuration**.</span></span> <span data-ttu-id="edcc0-569">A **felhőszolgáltatás-konfigurációval** létrehozott készletek nem támogatottak.</span><span class="sxs-lookup"><span data-stu-id="edcc0-569">Pools created with the **Cloud Service Configuration** are not supported.</span></span> <span data-ttu-id="edcc0-570">A társított VNet a klasszikus üzemi modellel vagy az Azure Resource Manager-alapú üzemi modellel hozható létre.</span><span class="sxs-lookup"><span data-stu-id="edcc0-570">The associated VNet may be created with either the Azure Resource Manager deployment model or the classic deployment model.</span></span>

    <span data-ttu-id="edcc0-571">A készletlefoglalási mód szerinti VNet-támogatást összegző táblázatot lásd a [Készletlefoglalási mód](#pool-allocation-mode) szakaszban.</span><span class="sxs-lookup"><span data-stu-id="edcc0-571">For a table summarizing VNet support according to pool allocation mode, see the [Pool allocation mode](#pool-allocation-mode) section.</span></span>

* <span data-ttu-id="edcc0-572">Ha a Batch-fiók készletlefoglalási módja a Batch szolgáltatás, akkor meg kell adnia a Batch egyszerű szolgáltatása számára a megfelelő engedélyeket a VNet eléréséhez.</span><span class="sxs-lookup"><span data-stu-id="edcc0-572">If the pool allocation mode for your Batch account is set to Batch Service, then you must provide permissions for the Batch service principal to access the VNet.</span></span> <span data-ttu-id="edcc0-573">A VNetnek hozzá kell rendelnie a [Klasszikus virtuális gép közreműködő szerepköralapú hozzáférés-vezérlés (RBAC)](https://azure.microsoft.com/documentation/articles/role-based-access-built-in-roles/#classic-virtual-machine-contributor) szerepkört a Batch egyszerű szolgáltatásához.</span><span class="sxs-lookup"><span data-stu-id="edcc0-573">The VNet must assign the [Classic Virtual Machine Contributor Role-Based Access Control (RBAC)](https://azure.microsoft.com/documentation/articles/role-based-access-built-in-roles/#classic-virtual-machine-contributor) role to the Batch service principal.</span></span> <span data-ttu-id="edcc0-574">Ha a megadott RBAC-szerepkör nem áll rendelkezésre, a Batch szolgáltatás 400 (Hibás kérés) hibakódot adja vissza.</span><span class="sxs-lookup"><span data-stu-id="edcc0-574">If the specified RBAC role is not provided, the Batch service returns 400 (Bad Request).</span></span> <span data-ttu-id="edcc0-575">A szerepkör hozzáadása az Azure Portalon:</span><span class="sxs-lookup"><span data-stu-id="edcc0-575">To add the role in the Azure portal:</span></span>

    1. <span data-ttu-id="edcc0-576">Válassza ki a **VNetet**, majd kattintson a **Hozzáférés-vezérlés (IAM)** > **Szerepkörök** > **Virtuálisgép-közreműködő** > **Hozzáadás** elemre.</span><span class="sxs-lookup"><span data-stu-id="edcc0-576">Select the **VNet**, then **Access control (IAM)** > **Roles** > **Virtual Machine Contributor** > **Add**.</span></span>
    2. <span data-ttu-id="edcc0-577">Az **Engedélyek hozzáadása** panelen válassza ki a **Virtuálisgép-közreműködő** szerepkört.</span><span class="sxs-lookup"><span data-stu-id="edcc0-577">On the **Add permissions** blade, select the **Virtual Machine Contributor** role.</span></span>
    3. <span data-ttu-id="edcc0-578">Az **Engedélyek hozzáadása** panelen keressen rá a Batch API kifejezésre.</span><span class="sxs-lookup"><span data-stu-id="edcc0-578">On the **Add permissions** blade, search for the Batch API.</span></span> <span data-ttu-id="edcc0-579">Egymás után keressen rá az egyes karakterláncokra, amíg meg nem találja az API-t:</span><span class="sxs-lookup"><span data-stu-id="edcc0-579">Search for each of these strings in turn until you find the API:</span></span>
        1. <span data-ttu-id="edcc0-580">**MicrosoftAzureBatch**.</span><span class="sxs-lookup"><span data-stu-id="edcc0-580">**MicrosoftAzureBatch**.</span></span>
        2. <span data-ttu-id="edcc0-581">**Microsoft Azure Batch**.</span><span class="sxs-lookup"><span data-stu-id="edcc0-581">**Microsoft Azure Batch**.</span></span> <span data-ttu-id="edcc0-582">Újabb Azure AD-bérlők ezt a nevet használhatják.</span><span class="sxs-lookup"><span data-stu-id="edcc0-582">Newer Azure AD tenants may use this name.</span></span>
        3. <span data-ttu-id="edcc0-583">A **ddbf3205-c6bd-46ae-8127-60eb93363864** a Batch API azonosítója.</span><span class="sxs-lookup"><span data-stu-id="edcc0-583">**ddbf3205-c6bd-46ae-8127-60eb93363864** is the ID for the Batch API.</span></span> 
    3. <span data-ttu-id="edcc0-584">Válassza ki a Batch API egyszerű szolgáltatását.</span><span class="sxs-lookup"><span data-stu-id="edcc0-584">Select the Batch API service principal.</span></span> 
    4. <span data-ttu-id="edcc0-585">Kattintson a **Save** (Mentés) gombra.</span><span class="sxs-lookup"><span data-stu-id="edcc0-585">Click **Save**.</span></span>

        ![Virtuálisgép-közreműködői szerepkör hozzárendelése a Batch egyszerű szolgáltatásához](./media/batch-api-basics/iam-add-role.png)


* <span data-ttu-id="edcc0-587">A megadott alhálózatnak elegendő szabad **IP-címmel** kell rendelkeznie a célcsomópontok teljes számához, azaz a készlet `targetDedicatedNodes` és `targetLowPriorityNodes` tulajdonságának összegéhez.</span><span class="sxs-lookup"><span data-stu-id="edcc0-587">The specified subnet should have enough free **IP addresses** to accommodate the total number of target nodes; that is, the sum of the `targetDedicatedNodes` and `targetLowPriorityNodes` properties of the pool.</span></span> <span data-ttu-id="edcc0-588">Ha az alhálózaton nincs elegendő szabad IP-cím, akkor a Batch szolgáltatás részlegesen lefoglalja a készlet számítási csomópontjait, és átméretezési hibát jelez.</span><span class="sxs-lookup"><span data-stu-id="edcc0-588">If the subnet doesn't have enough free IP addresses, the Batch service partially allocates the compute nodes in the pool and returns a resize error.</span></span>

* <span data-ttu-id="edcc0-589">A megadott alhálózatnak engedélyeznie kell a Batch szolgáltatástól kiinduló kommunikációt, hogy képes legyen feladatok ütemezésére a számítási csomópontokon.</span><span class="sxs-lookup"><span data-stu-id="edcc0-589">The specified subnet must allow communication from the Batch service to be able to schedule tasks on the compute nodes.</span></span> <span data-ttu-id="edcc0-590">Ha a számítási csomópontok felé irányuló kommunikációt a VNethez társított **Hálózati biztonsági csoport (NSG)** letiltja, akkor a Batch szolgáltatás **nem használhatóra** állítja a számítási csomópontok állapotát.</span><span class="sxs-lookup"><span data-stu-id="edcc0-590">If communication to the compute nodes is denied by a **Network Security Group (NSG)** associated with the VNet, then the Batch service sets the state of the compute nodes to **unusable**.</span></span>

* <span data-ttu-id="edcc0-591">Ha a megadott VNethez **hálózati biztonsági csoportok (NSG)** és/vagy **tűzfal** van társítva, néhány fenntartott rendszerportot engedélyezni kell a bejövő kommunikációhoz:</span><span class="sxs-lookup"><span data-stu-id="edcc0-591">If the specified VNet has associated **Network Security Groups (NSGs)** and/or a **firewall**, then a few reserved system ports must be enabled for inbound communication:</span></span>

- <span data-ttu-id="edcc0-592">A virtuálisgép-konfigurációval létrehozott készletek esetén engedélyezze a 29876-os és a 29877-es portokat, valamint a 22-es portot Linux, illetve a 3389-es portot Windows rendszer esetén.</span><span class="sxs-lookup"><span data-stu-id="edcc0-592">For pools created with a virtual machine configuration, enable ports 29876 and 29877, as well as port 22 for Linux and port 3389 for Windows.</span></span> 
- <span data-ttu-id="edcc0-593">A felhőszolgáltatás-konfigurációval létrehozott készletek esetén engedélyezze a 10100-as, 20100-as és 30100-as portokat.</span><span class="sxs-lookup"><span data-stu-id="edcc0-593">For pools created with a cloud service configuration, enable ports 10100, 20100, and 30100.</span></span> 
- <span data-ttu-id="edcc0-594">Engedélyezze az Azure Storage-hoz a 443-as porton a kimenő kapcsolatokat.</span><span class="sxs-lookup"><span data-stu-id="edcc0-594">Enable outbound connections to Azure Storage on port 443.</span></span> <span data-ttu-id="edcc0-595">Arról is győződjön meg, hogy az Azure Storage-végpont feloldható bármely, a VNET-et kiszolgáló egyéni DNS-kiszolgáló által.</span><span class="sxs-lookup"><span data-stu-id="edcc0-595">Also, ensure that your Azure Storage endpoint can be resolved by any custom DNS servers that serve your VNET.</span></span> <span data-ttu-id="edcc0-596">Az `<account>.table.core.windows.net` űrlap URL-címének feloldhatónak kell lennie.</span><span class="sxs-lookup"><span data-stu-id="edcc0-596">Specifically, a URL of the form `<account>.table.core.windows.net` should be resolvable.</span></span>

    <span data-ttu-id="edcc0-597">A virtuálisgép-konfigurációval létrehozott készletek esetén engedélyezendő bejövő portokat a következő táblázat ismerteti:</span><span class="sxs-lookup"><span data-stu-id="edcc0-597">The following table describes the inbound ports that you need to enable for pools that you created with the virtual machine configuration:</span></span>

    |    <span data-ttu-id="edcc0-598">Célport(ok)</span><span class="sxs-lookup"><span data-stu-id="edcc0-598">Destination Port(s)</span></span>    |    <span data-ttu-id="edcc0-599">Forrás IP-címe</span><span class="sxs-lookup"><span data-stu-id="edcc0-599">Source IP address</span></span>      |    <span data-ttu-id="edcc0-600">Hozzáad a Batch NSG-ket?</span><span class="sxs-lookup"><span data-stu-id="edcc0-600">Does Batch add NSGs?</span></span>    |    <span data-ttu-id="edcc0-601">Szükséges a virtuális gép használatához?</span><span class="sxs-lookup"><span data-stu-id="edcc0-601">Required for VM to be usable?</span></span>    |    <span data-ttu-id="edcc0-602">Felhasználói művelet</span><span class="sxs-lookup"><span data-stu-id="edcc0-602">Action from user</span></span>   |
    |---------------------------|---------------------------|----------------------------|-------------------------------------|-----------------------|
    |    <ul><li><span data-ttu-id="edcc0-603">Virtuálisgép-konfigurációval létrehozott készletek esetén: 29876, 29877</span><span class="sxs-lookup"><span data-stu-id="edcc0-603">For pools created with the virtual machine configuration: 29876, 29877</span></span></li><li><span data-ttu-id="edcc0-604">Felhőszolgáltatás-konfigurációval létrehozott készletek esetén: 10100, 20100, 30100</span><span class="sxs-lookup"><span data-stu-id="edcc0-604">For pools created with the cloud service configuration: 10100, 20100, 30100</span></span></li></ul>         |    <span data-ttu-id="edcc0-605">Csak a Batch szolgáltatási szerepkör IP-címei</span><span class="sxs-lookup"><span data-stu-id="edcc0-605">Only Batch service role IP addresses</span></span> |    <span data-ttu-id="edcc0-606">Igen.</span><span class="sxs-lookup"><span data-stu-id="edcc0-606">Yes.</span></span> <span data-ttu-id="edcc0-607">A Batch az NSG-ket a virtuális gépekhez kapcsolt hálózati adapterek (NIC) szintjén adja hozzá.</span><span class="sxs-lookup"><span data-stu-id="edcc0-607">Batch adds NSGs at the level of network interfaces (NIC) attached to VMs.</span></span> <span data-ttu-id="edcc0-608">Ezek az NSG-k csak a Batch szolgáltatási szerepkör IP-címeiről érkező forgalmat engedélyezik.</span><span class="sxs-lookup"><span data-stu-id="edcc0-608">These NSGs allow traffic only from Batch service role IP addresses.</span></span> <span data-ttu-id="edcc0-609">Még ha meg is nyitja ezeket a portokat a teljes web felé, a forgalom blokkolva lesz a hálózati adapteren.</span><span class="sxs-lookup"><span data-stu-id="edcc0-609">Even if you open these ports for the  entire web, the traffic will get blocked at the NIC.</span></span> |    <span data-ttu-id="edcc0-610">Igen</span><span class="sxs-lookup"><span data-stu-id="edcc0-610">Yes</span></span>  |  <span data-ttu-id="edcc0-611">Nem kell megadnia NSG-t, mert a Batch szolgáltatás csak a Batch IP-címeit engedélyezi.</span><span class="sxs-lookup"><span data-stu-id="edcc0-611">You do not need to specify an NSG, because Batch allows only Batch IP addresses.</span></span> <br /><br /> <span data-ttu-id="edcc0-612">Ha azonban NSG-t ad meg, győződjön meg arról, hogy ezek a portok nyitva vannak a bejövő forgalom számára.</span><span class="sxs-lookup"><span data-stu-id="edcc0-612">However, if you do specify an NSG, please ensure that these ports are open for inbound traffic.</span></span> <br /><br /> <span data-ttu-id="edcc0-613">A Batch akkor is hozzáadja az NSG-ket a virtuális gépekhez csatlakoztatott hálózati adapter szintjén, ha az NSG-ben a forrás IP-címeként * van megadva.</span><span class="sxs-lookup"><span data-stu-id="edcc0-613">If you specify * as the source IP in your NSG, Batch still adds NSGs at the level of NIC attached to VMs.</span></span> |
    |    <span data-ttu-id="edcc0-614">3389, 22</span><span class="sxs-lookup"><span data-stu-id="edcc0-614">3389, 22</span></span>               |    <span data-ttu-id="edcc0-615">Felhasználói, hibakeresési célra használt gépek a virtuális gép távolról való eléréséhez.</span><span class="sxs-lookup"><span data-stu-id="edcc0-615">User machines, used for debugging purposes, so that you can remotely access the VM.</span></span>    |    <span data-ttu-id="edcc0-616">Nem</span><span class="sxs-lookup"><span data-stu-id="edcc0-616">No</span></span>                                    |    <span data-ttu-id="edcc0-617">Nem</span><span class="sxs-lookup"><span data-stu-id="edcc0-617">No</span></span>                     |    <span data-ttu-id="edcc0-618">Adjon hozzá NSG-ket, ha engedélyezni szeretné a távoli elérést (RDP/SSH) a virtuális géphez.</span><span class="sxs-lookup"><span data-stu-id="edcc0-618">Add NSGs if you want to permit remote access (RDP/SSH) to the VM.</span></span>   |                 

    <span data-ttu-id="edcc0-619">A következő táblázat ismerteti az Azure Storage elérésének engedélyezéséhez engedélyezendő kimenő portot:</span><span class="sxs-lookup"><span data-stu-id="edcc0-619">The following table describes the outbound port that you need to enable to permit access to Azure Storage:</span></span>

    |    <span data-ttu-id="edcc0-620">Kimenő port(ok)</span><span class="sxs-lookup"><span data-stu-id="edcc0-620">Outbound Port(s)</span></span>    |    <span data-ttu-id="edcc0-621">Cél</span><span class="sxs-lookup"><span data-stu-id="edcc0-621">Destination</span></span>    |    <span data-ttu-id="edcc0-622">Hozzáad a Batch NSG-ket?</span><span class="sxs-lookup"><span data-stu-id="edcc0-622">Does Batch add NSGs?</span></span>    |    <span data-ttu-id="edcc0-623">Szükséges a virtuális gép használatához?</span><span class="sxs-lookup"><span data-stu-id="edcc0-623">Required for VM to be usable?</span></span>    |    <span data-ttu-id="edcc0-624">Felhasználói művelet</span><span class="sxs-lookup"><span data-stu-id="edcc0-624">Action from user</span></span>    |
    |------------------------|-------------------|----------------------------|-------------------------------------|------------------------|
    |    <span data-ttu-id="edcc0-625">443</span><span class="sxs-lookup"><span data-stu-id="edcc0-625">443</span></span>    |    <span data-ttu-id="edcc0-626">Azure Storage</span><span class="sxs-lookup"><span data-stu-id="edcc0-626">Azure Storage</span></span>    |    <span data-ttu-id="edcc0-627">Nem</span><span class="sxs-lookup"><span data-stu-id="edcc0-627">No</span></span>    |    <span data-ttu-id="edcc0-628">Igen</span><span class="sxs-lookup"><span data-stu-id="edcc0-628">Yes</span></span>    |    <span data-ttu-id="edcc0-629">Ha hozzáadott NSG-t, győződjön meg arról, hogy nyitva van a port a kimenő forgalom számára.</span><span class="sxs-lookup"><span data-stu-id="edcc0-629">If you add any NSGs, then ensure that this port is open to outbound   traffic.</span></span>    |


## <a name="scaling-compute-resources"></a><span data-ttu-id="edcc0-630">A számítási erőforrások méretezése</span><span class="sxs-lookup"><span data-stu-id="edcc0-630">Scaling compute resources</span></span>
<span data-ttu-id="edcc0-631">Az [automatikus méretezéssel](batch-automatic-scaling.md) megadhatja, hogy a Batch szolgáltatás dinamikusan állítsa be a számítási csomópontok számát a készletben az aktuális számítási feladatok és a számítási forgatókönyv erőforrás-használata alapján.</span><span class="sxs-lookup"><span data-stu-id="edcc0-631">With [automatic scaling](batch-automatic-scaling.md), you can have the Batch service dynamically adjust the number of compute nodes in a pool according to the current workload and resource usage of your compute scenario.</span></span> <span data-ttu-id="edcc0-632">Ez lehetővé teszi az alkalmazásfuttatás teljes költségeinek csökkentését, mivel csak a szükséges erőforrásokat használja, és felszabadítja a szükségteleneket.</span><span class="sxs-lookup"><span data-stu-id="edcc0-632">This allows you to lower the overall cost of running your application by using only the resources you need, and releasing those you don't need.</span></span>

<span data-ttu-id="edcc0-633">Az automatikus skálázáshoz írnia kell egy [automatikus skálázási képletet](batch-automatic-scaling.md#automatic-scaling-formulas), amelyet aztán társítania kell a készlethez.</span><span class="sxs-lookup"><span data-stu-id="edcc0-633">You enable automatic scaling by writing an [automatic scaling formula](batch-automatic-scaling.md#automatic-scaling-formulas) and associating that formula with a pool.</span></span> <span data-ttu-id="edcc0-634">A Batch szolgáltatás ezzel a képlettel határozza meg a készletben működő csomópontok célszámát a következő skálázási intervallumhoz (amelyet Ön állíthat be).</span><span class="sxs-lookup"><span data-stu-id="edcc0-634">The Batch service uses the formula to determine the target number of nodes in the pool for the next scaling interval (an interval that you can configure).</span></span> <span data-ttu-id="edcc0-635">A készlet automatikus skálázását a készlet létrehozásakor és később egyaránt bekapcsolhatja.</span><span class="sxs-lookup"><span data-stu-id="edcc0-635">You can specify the automatic scaling settings for a pool when you create it, or enable scaling on a pool later.</span></span> <span data-ttu-id="edcc0-636">A skálázási beállításokat a skálázás bekapcsolása után is módosíthatja.</span><span class="sxs-lookup"><span data-stu-id="edcc0-636">You can also update the scaling settings on a scaling-enabled pool.</span></span>

<span data-ttu-id="edcc0-637">Előfordulhat például, hogy az adott feladathoz rendkívül nagyszámú végrehajtandó tevékenység tartozik.</span><span class="sxs-lookup"><span data-stu-id="edcc0-637">As an example, perhaps a job requires that you submit a very large number of tasks to be executed.</span></span> <span data-ttu-id="edcc0-638">Ekkor skálázási képletet rendelhet a készlethez, amely a sorban álló tevékenységek aktuális száma és a feladathoz tartozó tevékenységek befejezettségi állapota alapján határozza meg a készletben működő csomópontok számát.</span><span class="sxs-lookup"><span data-stu-id="edcc0-638">You can assign a scaling formula to the pool that adjusts the number of nodes in the pool based on the current number of queued tasks and the completion rate of the tasks in the job.</span></span> <span data-ttu-id="edcc0-639">A Batch szolgáltatás időnként kiértékeli a képletet és átméretezi a készletet a számítási feladatok és a képlet egyéb beállításai alapján.</span><span class="sxs-lookup"><span data-stu-id="edcc0-639">The Batch service periodically evaluates the formula and resizes the pool, based on workload and your other formula settings.</span></span> <span data-ttu-id="edcc0-640">A szolgáltatás szükség szerint csomópontokat ad hozzá, amikor nagy számú tevékenység van a várakozási sorban, és eltávolít csomópontokat, amikor nincs futó tevékenység a várakozási sorban.</span><span class="sxs-lookup"><span data-stu-id="edcc0-640">The service adds nodes as needed when there are a large number of queued tasks, and removes nodes when there are no queued or running tasks.</span></span>

<span data-ttu-id="edcc0-641">A méretezési képletek a következő mérőszámokon alapulhatnak:</span><span class="sxs-lookup"><span data-stu-id="edcc0-641">A scaling formula can be based on the following metrics:</span></span>

* <span data-ttu-id="edcc0-642">Az **időmérőszámok** a megadott számú órák során öt percenként gyűjtött statisztikák alapján kaphatók meg.</span><span class="sxs-lookup"><span data-stu-id="edcc0-642">**Time metrics** are based on statistics collected every five minutes in the specified number of hours.</span></span>
* <span data-ttu-id="edcc0-643">Az **erőforrás-mérőszámok** a CPU-használat, a sávszélesség-használat, a memóriahasználat és a csomópontok száma alapján számíthatók ki.</span><span class="sxs-lookup"><span data-stu-id="edcc0-643">**Resource metrics** are based on CPU usage, bandwidth usage, memory usage, and number of nodes.</span></span>
* <span data-ttu-id="edcc0-644">A **tevékenységmetrikák** alapját a tevékenységállapotok, például *Aktív* (sorban áll), *Fut* vagy *Befejezve* képezik.</span><span class="sxs-lookup"><span data-stu-id="edcc0-644">**Task metrics** are based on task state, such as *Active* (queued), *Running*, or *Completed*.</span></span>

<span data-ttu-id="edcc0-645">Amikor az automatikus skálázás csökkenti a készletben működő csomópontok számát, érdemes megfontolni, hogy mi történjen a csökkentési művelet idején még futó tevékenységekkel.</span><span class="sxs-lookup"><span data-stu-id="edcc0-645">When automatic scaling decreases the number of compute nodes in a pool, you must consider how to handle tasks that are running at the time of the decrease operation.</span></span> <span data-ttu-id="edcc0-646">A Batch *csomópont-felszabadítási funkciót* kínál ennek megkönnyítésére, amelyet felvehet a képletbe.</span><span class="sxs-lookup"><span data-stu-id="edcc0-646">To accommodate this, Batch provides a *node deallocation option* that you can include in your formulas.</span></span> <span data-ttu-id="edcc0-647">Megadhatja például, hogy a rendszer azonnal leállítsa a futó tevékenységeket, majd egy másik csomóponton sorba állítsa a tevékenységeket végrehajtás céljából, vagy hagyja őket lefutni, és csak ezt követően távolítsa el a csomópontot a készletből.</span><span class="sxs-lookup"><span data-stu-id="edcc0-647">For example, you can specify that running tasks are stopped immediately, stopped immediately and then requeued for execution on another node, or allowed to finish before the node is removed from the pool.</span></span>

<span data-ttu-id="edcc0-648">Az alkalmazások automatikus méretezésével kapcsolatos további információért lásd: [Számítási csomópontok automatikus méretezése egy Azure Batch-készletben](batch-automatic-scaling.md).</span><span class="sxs-lookup"><span data-stu-id="edcc0-648">For more information about automatically scaling an application, see [Automatically scale compute nodes in an Azure Batch pool](batch-automatic-scaling.md).</span></span>

> [!TIP]
> <span data-ttu-id="edcc0-649">A számítási erőforrások kihasználtságának maximalizálása érdekében állítsa nullára a csomópontok célszámát a feladatok végén, de engedélyezze a futó tevékenységek befejeződését.</span><span class="sxs-lookup"><span data-stu-id="edcc0-649">To maximize compute resource utilization, set the target number of nodes to zero at the end of a job, but allow running tasks to finish.</span></span>
>
>

## <a name="security-with-certificates"></a><span data-ttu-id="edcc0-650">Biztonság tanúsítványokkal</span><span class="sxs-lookup"><span data-stu-id="edcc0-650">Security with certificates</span></span>
<span data-ttu-id="edcc0-651">Általában tanúsítványokat kell használnia tevékenységek bizalmas információinak, például az [Azure Storage-fiókok][azure_storage] kulcsának titkosításakor vagy visszafejtésekor.</span><span class="sxs-lookup"><span data-stu-id="edcc0-651">You typically need to use certificates when you encrypt or decrypt sensitive information for tasks, like the key for an [Azure Storage account][azure_storage].</span></span> <span data-ttu-id="edcc0-652">Ehhez tanúsítványokat telepíthet a csomópontokra.</span><span class="sxs-lookup"><span data-stu-id="edcc0-652">To support this, you can install certificates on nodes.</span></span> <span data-ttu-id="edcc0-653">A titkosított titkos kulcsok parancssori paraméterek segítségével vagy valamelyik tevékenység-erőforrásba ágyazva jutnak el a tevékenységekhez, és a telepített tanúsítványokkal fejthetők vissza.</span><span class="sxs-lookup"><span data-stu-id="edcc0-653">Encrypted secrets are passed to tasks via command-line parameters or embedded in one of the task resources, and the installed certificates can be used to decrypt them.</span></span>

<span data-ttu-id="edcc0-654">A [Tanúsítvány hozzáadása][rest_add_cert] művelettel (Batch REST) vagy a [CertificateOperations.CreateCertificate][net_create_cert] metódussal (Batch .NET) adhat tanúsítványt Batch-fiókhoz.</span><span class="sxs-lookup"><span data-stu-id="edcc0-654">You use the [Add certificate][rest_add_cert] operation (Batch REST) or [CertificateOperations.CreateCertificate][net_create_cert] method (Batch .NET) to add a certificate to a Batch account.</span></span> <span data-ttu-id="edcc0-655">Ezután a tanúsítványt új vagy meglévő készlethez társíthatja.</span><span class="sxs-lookup"><span data-stu-id="edcc0-655">You can then associate the certificate with a new or existing pool.</span></span> <span data-ttu-id="edcc0-656">Amikor egy tanúsítvány egy készlethez van társítva, a Batch szolgáltatás telepíti a tanúsítványt a készlet minden csomópontján.</span><span class="sxs-lookup"><span data-stu-id="edcc0-656">When a certificate is associated with a pool, the Batch service installs the certificate on each node in the pool.</span></span> <span data-ttu-id="edcc0-657">A Batch szolgáltatás a csomópont indulásakor, még a tevékenységek (ideértve az indítási és a feladatkezelői tevékenységeket is) indítása előtt telepíti a megfelelő tanúsítványokat.</span><span class="sxs-lookup"><span data-stu-id="edcc0-657">The Batch service installs the appropriate certificates when the node starts up, before launching any tasks (including the start task and job manager task).</span></span>

<span data-ttu-id="edcc0-658">Amikor *meglévő* készlethez ad tanúsítványokat, újra kell indítania a számítási csomópontokat, hogy a rendszer az összes csomópontra alkalmazza a tanúsítványokat.</span><span class="sxs-lookup"><span data-stu-id="edcc0-658">If you add certificates to an *existing* pool, you must reboot its compute nodes for the certificates to be applied to the nodes.</span></span>

## <a name="error-handling"></a><span data-ttu-id="edcc0-659">Hibakezelés</span><span class="sxs-lookup"><span data-stu-id="edcc0-659">Error handling</span></span>
<span data-ttu-id="edcc0-660">Szükség lehet a Batch megoldáson belül a tevékenység és az alkalmazások hibáinak a kezelése is.</span><span class="sxs-lookup"><span data-stu-id="edcc0-660">You might find it necessary to handle both task and application failures within your Batch solution.</span></span>

### <a name="task-failure-handling"></a><span data-ttu-id="edcc0-661">Tevékenységhibák kezelése</span><span class="sxs-lookup"><span data-stu-id="edcc0-661">Task failure handling</span></span>
<span data-ttu-id="edcc0-662">A tevékenységhibák a következő kategóriákba esnek:</span><span class="sxs-lookup"><span data-stu-id="edcc0-662">Task failures fall into these categories:</span></span>

* <span data-ttu-id="edcc0-663">**Előfeldolgozási hibák**</span><span class="sxs-lookup"><span data-stu-id="edcc0-663">**Pre-processing failures**</span></span>

    <span data-ttu-id="edcc0-664">Ha egy tevékenység nem indul el, a tevékenységhez egy előfeldolgozási hiba lesz beállítva.</span><span class="sxs-lookup"><span data-stu-id="edcc0-664">If a task fails to start, a pre-processing error is set for the task.</span></span>  

    <span data-ttu-id="edcc0-665">Előfeldolgozási hibák akkor fordulhatnak elő, ha a tevékenység erőforrásfájljait áthelyezték, a tárfiók már nem érhető el, vagy más olyan hiba történt, amely meggátolta a fájlok másolását a csomópontra.</span><span class="sxs-lookup"><span data-stu-id="edcc0-665">Pre-processing errors can occur if the task's resource files have moved, the Storage account is no longer available, or another issue was encountered that prevented the successful copying of files to the node.</span></span>

* <span data-ttu-id="edcc0-666">**Sikertelen fájlfeltöltés**</span><span class="sxs-lookup"><span data-stu-id="edcc0-666">**File upload failures**</span></span>

    <span data-ttu-id="edcc0-667">Ha egy tevékenységhez megadott fájlok feltöltése valamilyen okból meghiúsul, a rendszer a feltöltési hiba állapotot társítja a tevékenységhez.</span><span class="sxs-lookup"><span data-stu-id="edcc0-667">If uploading files that are specified for a task fails for any reason, a file upload error is set for the task.</span></span>

    <span data-ttu-id="edcc0-668">Fájlfeltöltési hiba akkor fordulhat elő, ha az Azure Storage eléréséhez megadott közös hozzáférésű jogosultságkód (SAS) érvénytelen vagy nem biztosít írási jogosultságot, ha a tárfiók már nem érhető el, vagy egyéb probléma miatt nem sikerült a fájlok másolása a csomópontról.</span><span class="sxs-lookup"><span data-stu-id="edcc0-668">File upload errors can occur if the SAS supplied for accessing Azure Storage is invalid or does not provide write permissions, if the storage account is no longer available, or if another issue was encountered that prevented the successful copying of files from the node.</span></span>    

* <span data-ttu-id="edcc0-669">**Alkalmazáshibák**</span><span class="sxs-lookup"><span data-stu-id="edcc0-669">**Application failures**</span></span>

    <span data-ttu-id="edcc0-670">A tevékenység parancssora által meghatározott folyamat is meghiúsulhat.</span><span class="sxs-lookup"><span data-stu-id="edcc0-670">The process that is specified by the task's command line can also fail.</span></span> <span data-ttu-id="edcc0-671">A folyamat sikertelennek minősül, amikor nullától eltérő kilépési kódot ad vissza a tevékenység által végrehajtott folyamat (lásd az alábbi, *Tevékenységekhez tartozó kilépési kódok* című fejezetet).</span><span class="sxs-lookup"><span data-stu-id="edcc0-671">The process is deemed to have failed when a nonzero exit code is returned by the process that is executed by the task (see *Task exit codes* in the next section).</span></span>

    <span data-ttu-id="edcc0-672">Alkalmazáshibák esetén úgy konfigurálhatja a Batch szolgáltatást, hogy az automatikusan újrapróbálja a tevékenységet a megadott számú alkalommal.</span><span class="sxs-lookup"><span data-stu-id="edcc0-672">For application failures, you can configure Batch to automatically retry the task up to a specified number of times.</span></span>

* <span data-ttu-id="edcc0-673">**Korlátozáshibák**</span><span class="sxs-lookup"><span data-stu-id="edcc0-673">**Constraint failures**</span></span>

    <span data-ttu-id="edcc0-674">Olyan korlátozás is beállítható, amely meghatározza a feladat vagy a tevékenység maximális végrehajtási időtartamát. Ez a *maxWallClockTime* érték.</span><span class="sxs-lookup"><span data-stu-id="edcc0-674">You can set a constraint that specifies the maximum execution duration for a job or task, the *maxWallClockTime*.</span></span> <span data-ttu-id="edcc0-675">Ez olyan feladatok leállításához lehet hasznos, amelyek nem haladnak.</span><span class="sxs-lookup"><span data-stu-id="edcc0-675">This can be useful for terminating tasks that fail to progress.</span></span>

    <span data-ttu-id="edcc0-676">Ha eltelik a maximális időtartam, a tevékenység *befejezve* állapotot kap, de a kilépési kódhoz a `0xC000013A` értéket, a *schedulingError* mezőhöz pedig a `{ category:"ServerError", code="TaskEnded"}` értéket társítja a rendszer.</span><span class="sxs-lookup"><span data-stu-id="edcc0-676">When the maximum amount of time has been exceeded, the task is marked as *completed*, but the exit code is set to `0xC000013A` and the *schedulingError* field is marked as `{ category:"ServerError", code="TaskEnded"}`.</span></span>

### <a name="debugging-application-failures"></a><span data-ttu-id="edcc0-677">Alkalmazáshibák keresése</span><span class="sxs-lookup"><span data-stu-id="edcc0-677">Debugging application failures</span></span>
* <span data-ttu-id="edcc0-678">`stderr` és `stdout`</span><span class="sxs-lookup"><span data-stu-id="edcc0-678">`stderr` and `stdout`</span></span>

    <span data-ttu-id="edcc0-679">A futtatás során az alkalmazások diagnosztikai kimenetet készíthetnek, amely felhasználható a hibák elhárításához.</span><span class="sxs-lookup"><span data-stu-id="edcc0-679">During execution, an application might produce diagnostic output that you can use to troubleshoot issues.</span></span> <span data-ttu-id="edcc0-680">A fenti [Fájlok és könyvtárak](#files-and-directories) fejezetben említettek szerint a Batch szolgáltatás a számítási csomópont tevékenységkönyvtárában helyezi el a standard kimeneti és a standard hibakimeneti adatokat tartalmazó `stdout.txt` és `stderr.txt` fájlokat.</span><span class="sxs-lookup"><span data-stu-id="edcc0-680">As mentioned in the earlier section [Files and directories](#files-and-directories), the Batch service writes standard output and standard error output to `stdout.txt` and `stderr.txt` files in the task directory on the compute node.</span></span> <span data-ttu-id="edcc0-681">A fájlokat az Azure Portal webhelyről vagy valamelyik Batch SDK útján lehet letölteni.</span><span class="sxs-lookup"><span data-stu-id="edcc0-681">You can use the Azure portal or one of the Batch SDKs to download these files.</span></span> <span data-ttu-id="edcc0-682">Ezeket, illetve más hibaelhárítási célú fájlokat letöltheti például a [ComputeNode.GetNodeFile][net_getfile_node] és a [CloudTask.GetNodeFile][net_getfile_task] metódussal, amely a Batch .NET-kódtárában érhető el.</span><span class="sxs-lookup"><span data-stu-id="edcc0-682">For example, you can retrieve these and other files for troubleshooting purposes by using [ComputeNode.GetNodeFile][net_getfile_node] and [CloudTask.GetNodeFile][net_getfile_task] in the Batch .NET library.</span></span>

* <span data-ttu-id="edcc0-683">**Tevékenységek kilépési kódjai**</span><span class="sxs-lookup"><span data-stu-id="edcc0-683">**Task exit codes**</span></span>

    <span data-ttu-id="edcc0-684">Ahogy azt korábban említettük, a Batch szolgáltatás sikertelenként értékeli a tevékenységet, ha a tevékenység által végrehajtott folyamat kilépési kódja nullától eltérő.</span><span class="sxs-lookup"><span data-stu-id="edcc0-684">As mentioned earlier, a task is marked as failed by the Batch service if the process that is executed by the task returns a nonzero exit code.</span></span> <span data-ttu-id="edcc0-685">Amikor a tevékenységek folyamatokat hajtanak végre, a Batch a *folyamat visszatérési kódjával* tölti ki a tevékenység kilépési kód tulajdonságát.</span><span class="sxs-lookup"><span data-stu-id="edcc0-685">When a task executes a process, Batch populates the task's exit code property with the *return code of the process*.</span></span> <span data-ttu-id="edcc0-686">Fontos tudni, hogy a tevékenységek kilépési kódját **nem** a Batch szolgáltatás határozza meg.</span><span class="sxs-lookup"><span data-stu-id="edcc0-686">It is important to note that a task's exit code is **not** determined by the Batch service.</span></span> <span data-ttu-id="edcc0-687">Egy tevékenység kilépési kódját maga a folyamat határozza meg, vagy az operációs rendszer, amelyen a folyamatot végrehajtották.</span><span class="sxs-lookup"><span data-stu-id="edcc0-687">A task's exit code is determined by the process itself or the operating system on which the process executed.</span></span>

### <a name="accounting-for-task-failures-or-interruptions"></a><span data-ttu-id="edcc0-688">Tevékenységhibák vagy -megszakítások kezelése</span><span class="sxs-lookup"><span data-stu-id="edcc0-688">Accounting for task failures or interruptions</span></span>
<span data-ttu-id="edcc0-689">A tevékenységek időnként meghiúsulhatnak vagy megszakadhatnak.</span><span class="sxs-lookup"><span data-stu-id="edcc0-689">Tasks might occasionally fail or be interrupted.</span></span> <span data-ttu-id="edcc0-690">Maga a tevékenységalkalmazás is meghiúsulhat, vagy újraindulhat a tevékenységet futtató csomópont, vagy a rendszer eltávolíthatja a csomópontot a készletből egy átméretezési művelet során, ha a készlet felszabadítási szabályzatát úgy állították be, hogy ne várja meg a tevékenységek befejeződését, hanem azonnal távolítsa el a csomópontokat.</span><span class="sxs-lookup"><span data-stu-id="edcc0-690">The task application itself might fail, the node on which the task is running might be rebooted, or the node might be removed from the pool during a resize operation if the pool's deallocation policy is set to remove nodes immediately without waiting for tasks to finish.</span></span> <span data-ttu-id="edcc0-691">A tevékenységet a Batch minden esetben képes automatikusan újra a várólistára helyezni, hogy egy másik csomópont hajtsa végre.</span><span class="sxs-lookup"><span data-stu-id="edcc0-691">In all cases, the task can be automatically requeued by Batch for execution on another node.</span></span>

<span data-ttu-id="edcc0-692">Az is előfordulhat, hogy egy ismétlődő hiba miatt egy tevékenység lefagy, vagy túl sok ideig tart a végrehajtása.</span><span class="sxs-lookup"><span data-stu-id="edcc0-692">It is also possible for an intermittent issue to cause a task to hang or take too long to execute.</span></span> <span data-ttu-id="edcc0-693">Beállíthatja a tevékenységekhez engedélyezett maximális végrehajtási intervallumot is.</span><span class="sxs-lookup"><span data-stu-id="edcc0-693">You can set the maximum execution interval for a task.</span></span> <span data-ttu-id="edcc0-694">Ha átlépi a maximális végrehajtási intervallumot, a Batch szolgáltatás megszakítja a tevékenységalkalmazást.</span><span class="sxs-lookup"><span data-stu-id="edcc0-694">If the maximum execution interval is exceeded, the Batch service interrupts the task application.</span></span>

### <a name="connecting-to-compute-nodes"></a><span data-ttu-id="edcc0-695">Csatlakozás számítási csomópontokhoz</span><span class="sxs-lookup"><span data-stu-id="edcc0-695">Connecting to compute nodes</span></span>
<span data-ttu-id="edcc0-696">Ha távolról bejelentkezik a számítási csomópontra, további hibakeresési lehetőségeket használhat.</span><span class="sxs-lookup"><span data-stu-id="edcc0-696">You can perform additional debugging and troubleshooting by signing in to a compute node remotely.</span></span> <span data-ttu-id="edcc0-697">Az Azure Portal webhely segítségével letöltheti az RDP-fájlt a windowsos csomópontokra, vagy beszerezheti az SSH-kapcsolathoz szükséges információkat a linuxos csomópontokhoz.</span><span class="sxs-lookup"><span data-stu-id="edcc0-697">You can use the Azure portal to download a Remote Desktop Protocol (RDP) file for Windows nodes and obtain Secure Shell (SSH) connection information for Linux nodes.</span></span> <span data-ttu-id="edcc0-698">Ez a Batch API-k, például a [Batch .NET][net_rdpfile] vagy a [Batch Python](batch-linux-nodes.md#connect-to-linux-nodes-using-ssh) segítségével is megvalósítható.</span><span class="sxs-lookup"><span data-stu-id="edcc0-698">You can also do this by using the Batch APIs--for example, with [Batch .NET][net_rdpfile] or [Batch Python](batch-linux-nodes.md#connect-to-linux-nodes-using-ssh).</span></span>

> [!IMPORTANT]
> <span data-ttu-id="edcc0-699">Ha RDP-n vagy SSH-n keresztül szeretne csatlakozni a csomóponthoz, először létre kell hoznia egy felhasználót a csomóponton.</span><span class="sxs-lookup"><span data-stu-id="edcc0-699">To connect to a node via RDP or SSH, you must first create a user on the node.</span></span> <span data-ttu-id="edcc0-700">Ehhez használja az Azure Portal webhelyet: [adjon hozzá egy felhasználót a csomóponthoz][rest_create_user] a Batch REST API segítségével, és hívja meg a [ComputeNode.CreateComputeNodeUser][net_create_user] metódust a Batch .NET-ben, vagy az [add_user][py_add_user] metódust a Batch Python modulban.</span><span class="sxs-lookup"><span data-stu-id="edcc0-700">To do this, you can use the Azure portal, [add a user account to a node][rest_create_user] by using the Batch REST API, call the [ComputeNode.CreateComputeNodeUser][net_create_user] method in Batch .NET, or call the [add_user][py_add_user] method in the Batch Python module.</span></span>
>
>

### <a name="troubleshooting-problematic-compute-nodes"></a><span data-ttu-id="edcc0-701">Problémás számítási csomópontok hibaelhárítása</span><span class="sxs-lookup"><span data-stu-id="edcc0-701">Troubleshooting problematic compute nodes</span></span>
<span data-ttu-id="edcc0-702">Olyan esetekben, ahol néhány tevékenység meghiúsul, a Batch ügyfélalkalmazás vagy szolgáltatás megvizsgálhatja a meghiúsult tevékenységek metaadatait a rosszul működő csomópontok azonosítása érdekében.</span><span class="sxs-lookup"><span data-stu-id="edcc0-702">In situations where some of your tasks are failing, your Batch client application or service can examine the metadata of the failed tasks to identify a misbehaving node.</span></span> <span data-ttu-id="edcc0-703">A készletek minden csomópontja egyedi azonosítót kap, és a tevékenységet futtató csomópont szerepel a tevékenység metaadataiban.</span><span class="sxs-lookup"><span data-stu-id="edcc0-703">Each node in a pool is given a unique ID, and the node on which a task runs is included in the task metadata.</span></span> <span data-ttu-id="edcc0-704">Ha sikerült azonosítani a problematikus csomópontot, számos különböző műveletet elvégezhet vele:</span><span class="sxs-lookup"><span data-stu-id="edcc0-704">After you've identified a problem node, you can take several actions with it:</span></span>

* <span data-ttu-id="edcc0-705">**Újraindíthatja a csomópontot** ([REST][rest_reboot] | [.NET][net_reboot])</span><span class="sxs-lookup"><span data-stu-id="edcc0-705">**Reboot the node** ([REST][rest_reboot] | [.NET][net_reboot])</span></span>

    <span data-ttu-id="edcc0-706">A csomópont újraindítása néha segít a rejtett problémák, például az elakadt vagy összeomlott folyamatok megoldásában.</span><span class="sxs-lookup"><span data-stu-id="edcc0-706">Restarting the node can sometimes clear up latent issues like stuck or crashed processes.</span></span> <span data-ttu-id="edcc0-707">Vegye figyelembe, hogy ha a készlet indítási tevékenységet használ, vagy a feladat feladat-előkészítési tevékenységet használ, ezeket a rendszer a csomópont újraindításakor végrehajtja.</span><span class="sxs-lookup"><span data-stu-id="edcc0-707">Note that if your pool uses a start task or your job uses a job preparation task, they are executed when the node restarts.</span></span>
* <span data-ttu-id="edcc0-708">**Alaphelyzetbe állíthatja a csomópont rendszerképét** ([REST][rest_reimage] | [.NET][net_reimage])</span><span class="sxs-lookup"><span data-stu-id="edcc0-708">**Reimage the node** ([REST][rest_reimage] | [.NET][net_reimage])</span></span>

    <span data-ttu-id="edcc0-709">Ez újratelepíti az operációs rendszert a csomóponton.</span><span class="sxs-lookup"><span data-stu-id="edcc0-709">This reinstalls the operating system on the node.</span></span> <span data-ttu-id="edcc0-710">A csomópontok újraindításához hasonlóan újrafuttatja az indítási tevékenységeket és a feladat-előkészítési tevékenységeket a csomópont rendszerképének alaphelyzetbe állítása után.</span><span class="sxs-lookup"><span data-stu-id="edcc0-710">As with rebooting a node, start tasks and job preparation tasks are rerun after the node has been reimaged.</span></span>
* <span data-ttu-id="edcc0-711">**Eltávolíthatja a csomópontot a készletből** ([REST][rest_remove] | [.NET][net_remove])</span><span class="sxs-lookup"><span data-stu-id="edcc0-711">**Remove the node from the pool** ([REST][rest_remove] | [.NET][net_remove])</span></span>

    <span data-ttu-id="edcc0-712">Néha teljesen el kell távolítani a csomópontot a készletből.</span><span class="sxs-lookup"><span data-stu-id="edcc0-712">Sometimes it is necessary to completely remove the node from the pool.</span></span>
* <span data-ttu-id="edcc0-713">**Letilthatja a tevékenységütemezést a csomóponton** ([REST][rest_offline] | [.NET][net_offline])</span><span class="sxs-lookup"><span data-stu-id="edcc0-713">**Disable task scheduling on the node** ([REST][rest_offline] | [.NET][net_offline])</span></span>

    <span data-ttu-id="edcc0-714">Ez tulajdonképpen offline állapotba helyezi a csomópontot, így ahhoz nem rendel további tevékenységeket, de engedélyezi, hogy a csomópont továbbra is fusson a készletben.</span><span class="sxs-lookup"><span data-stu-id="edcc0-714">This effectively takes the node offline so that no further tasks are assigned to it, but allows the node to remain running and in the pool.</span></span> <span data-ttu-id="edcc0-715">Ez lehetővé teszi, hogy tovább vizsgálja a hibák okait a meghiúsult tevékenység adatainak elvesztése nélkül, és anélkül, hogy a csomópont további tevékenységhibákat okozna.</span><span class="sxs-lookup"><span data-stu-id="edcc0-715">This enables you to perform further investigation into the cause of the failures without losing the failed task's data, and without the node causing additional task failures.</span></span> <span data-ttu-id="edcc0-716">Letilthatja például a tevékenységütemezést a csomóponton, majd [távolról bejelentkezhet](#connecting-to-compute-nodes) a csomópont eseménynaplóinak megvizsgálása vagy egyéb hibaelhárítás elvégzése érdekében.</span><span class="sxs-lookup"><span data-stu-id="edcc0-716">For example, you can disable task scheduling on the node, then [sign in remotely](#connecting-to-compute-nodes) to examine the node's event logs or perform other troubleshooting.</span></span> <span data-ttu-id="edcc0-717">Ha végzett a vizsgálattal, online állapotba állíthatja a csomópontot a tevékenységütemezés engedélyezésével ([REST][rest_online] | [.NET][net_online]), vagy a fentiekben említett más műveletek egyikét is elvégezheti.</span><span class="sxs-lookup"><span data-stu-id="edcc0-717">After you've finished your investigation, you can then bring the node back online by enabling task scheduling ([REST][rest_online] | [.NET][net_online]), or perform one of the other actions discussed earlier.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="edcc0-718">A fejezetben leírt műveletekkel (újraindítás, rendszerkép alaphelyzetbe állítása, eltávolítás, tevékenységütemezés letiltása) meghatározhatja, hogy a rendszer hogyan kezelje a csomópontokon aktuálisan futó tevékenységeket a művelet elvégzésekor.</span><span class="sxs-lookup"><span data-stu-id="edcc0-718">With each action that is described in this section--reboot, reimage, remove, and disable task scheduling--you are able to specify how tasks currently running on the node are handled when you perform the action.</span></span> <span data-ttu-id="edcc0-719">Amikor például a Batch .NET ügyfélkódtára segítségével letiltja a tevékenységütemezést egy csomóponton, megadhat egy [DisableComputeNodeSchedulingOption][net_offline_option] enumerálási értéket, amellyel megszabhatja, hogy mit szeretne tenni: **leállítani** a futó tevékenységeket, **újból várólistára helyezni** azokat más csomópontokon való ütemezéshez, vagy engedélyezni a futó tevékenységek befejezését a művelet elvégzése előtt (**TaskCompletion**).</span><span class="sxs-lookup"><span data-stu-id="edcc0-719">For example, when you disable task scheduling on a node by using the Batch .NET client library, you can specify a [DisableComputeNodeSchedulingOption][net_offline_option] enum value to specify whether to **Terminate** running tasks, **Requeue** them for scheduling on other nodes, or allow running tasks to complete before performing the action (**TaskCompletion**).</span></span>
>
>

## <a name="next-steps"></a><span data-ttu-id="edcc0-720">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="edcc0-720">Next steps</span></span>
* <span data-ttu-id="edcc0-721">Megismerheti a Batch-megoldások fejlesztéséhez rendelkezésre álló [Batch API-kat és eszközöket](batch-apis-tools.md).</span><span class="sxs-lookup"><span data-stu-id="edcc0-721">Learn about the [Batch APIs and tools](batch-apis-tools.md) available for building Batch solutions.</span></span>
* <span data-ttu-id="edcc0-722">Tekintsen át lépésről lépésre egy Batch-mintaalkalmazást az [Ismerkedés az Azure Batch .NET-es kódtárával](batch-dotnet-get-started.md) című cikkben.</span><span class="sxs-lookup"><span data-stu-id="edcc0-722">Walk through a sample Batch application step-by-step in [Get started with the Azure Batch Library for .NET](batch-dotnet-get-started.md).</span></span> <span data-ttu-id="edcc0-723">Az oktatóanyagból [Python-verzió](batch-python-tutorial.md) is elérhető, amelyben a számítási feladat linuxos számítási csomópontokon fut.</span><span class="sxs-lookup"><span data-stu-id="edcc0-723">There is also a [Python version](batch-python-tutorial.md) of the tutorial that runs a workload on Linux compute nodes.</span></span>
* <span data-ttu-id="edcc0-724">Töltse le és állítsa össze a [Batch Explorer][github_batchexplorer] mintaprojektet, amelyet bármikor felhasználhat, ha a Batch-megoldások fejlesztése során segítségre van szüksége.</span><span class="sxs-lookup"><span data-stu-id="edcc0-724">Download and build the [Batch Explorer][github_batchexplorer] sample project for use while you develop your Batch solutions.</span></span> <span data-ttu-id="edcc0-725">A Batch Explorerrel többek között a következőket végezheti el:</span><span class="sxs-lookup"><span data-stu-id="edcc0-725">Using the Batch Explorer, you can perform the following and more:</span></span>

  * <span data-ttu-id="edcc0-726">Készletek, feladatok és tevékenységek megfigyelése és módosítása a Batch-fiókban</span><span class="sxs-lookup"><span data-stu-id="edcc0-726">Monitor and manipulate pools, jobs, and tasks within your Batch account</span></span>
  * <span data-ttu-id="edcc0-727">A `stdout.txt`, az `stderr.txt` és más fájlok letöltése csomópontokról</span><span class="sxs-lookup"><span data-stu-id="edcc0-727">Download `stdout.txt`, `stderr.txt`, and other files from nodes</span></span>
  * <span data-ttu-id="edcc0-728">Felhasználók létrehozása csomópontokon és RDP-fájlok letöltése távoli bejelentkezéshez</span><span class="sxs-lookup"><span data-stu-id="edcc0-728">Create users on nodes and download RDP files for remote login</span></span>
* <span data-ttu-id="edcc0-729">Tanulja meg, hogyan hozhat létre [készletet linuxos számítási csomópontokból](batch-linux-nodes.md).</span><span class="sxs-lookup"><span data-stu-id="edcc0-729">Learn how to [create pools of Linux compute nodes](batch-linux-nodes.md).</span></span>
* <span data-ttu-id="edcc0-730">Keresse fel az [Azure Batch fórumot][batch_forum] az MSDN-en.</span><span class="sxs-lookup"><span data-stu-id="edcc0-730">Visit the [Azure Batch forum][batch_forum] on MSDN.</span></span> <span data-ttu-id="edcc0-731">Akár még csak most tanulja a Batch használatát, akár képzett szakértőnek számít, a fórum remek terepet biztosít, ahol felteheti kérdéseit.</span><span class="sxs-lookup"><span data-stu-id="edcc0-731">The forum is a good place to ask questions, whether you are just learning or are an expert in using Batch.</span></span>

[1]: ./media/batch-api-basics/node-folder-structure.png

[azure_storage]: https://azure.microsoft.com/services/storage/
[batch_forum]: https://social.msdn.microsoft.com/Forums/en-US/home?forum=azurebatch
[cloud_service_sizes]: ../cloud-services/cloud-services-sizes-specs.md
[msmpi]: https://msdn.microsoft.com/library/bb524831.aspx
[github_samples]: https://github.com/Azure/azure-batch-samples
[github_sample_taskdeps]:  https://github.com/Azure/azure-batch-samples/tree/master/CSharp/ArticleProjects/TaskDependencies
[github_batchexplorer]: https://github.com/Azure/azure-batch-samples/tree/master/CSharp/BatchExplorer
[batch_net_api]: https://msdn.microsoft.com/library/azure/mt348682.aspx
[msdn_env_vars]: https://msdn.microsoft.com/library/azure/mt743623.aspx
[net_cloudjob_jobmanagertask]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.cloudjob.jobmanagertask.aspx
[net_cloudjob_priority]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.cloudjob.priority.aspx
[net_cloudpool_starttask]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.cloudpool.starttask.aspx
[net_cloudtask_env]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.cloudtask.environmentsettings.aspx
[net_create_cert]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.certificateoperations.createcertificate.aspx
[net_create_user]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.computenode.createcomputenodeuser.aspx
[net_getfile_node]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.computenode.getnodefile.aspx
[net_getfile_task]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.cloudtask.getnodefile.aspx
[net_job_env]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.cloudjob.commonenvironmentsettings.aspx
[net_multiinstancesettings]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.multiinstancesettings.aspx
[net_onalltaskscomplete]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.cloudjob.onalltaskscomplete.aspx
[net_rdp]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.computenode.getrdpfile.aspx
[net_reboot]: https://msdn.microsoft.com/library/azure/mt631495.aspx
[net_reimage]: https://msdn.microsoft.com/library/azure/mt631496.aspx
[net_remove]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.pooloperations.removefrompoolasync.aspx
[net_offline]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.computenode.disableschedulingasync.aspx
[net_online]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.computenode.enableschedulingasync.aspx
[net_offline_option]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.common.disablecomputenodeschedulingoption.aspx
[net_rdpfile]: https://msdn.microsoft.com/library/azure/Mt272127.aspx
[vnet]: https://msdn.microsoft.com/library/azure/dn820174.aspx#bk_netconf

[py_add_user]: http://azure-sdk-for-python.readthedocs.io/en/latest/ref/azure.batch.operations.html#azure.batch.operations.ComputeNodeOperations.add_user

[batch_rest_api]: https://msdn.microsoft.com/library/azure/Dn820158.aspx
[rest_add_job]: https://msdn.microsoft.com/library/azure/mt282178.aspx
[rest_add_pool]: https://msdn.microsoft.com/library/azure/dn820174.aspx
[rest_add_cert]: https://msdn.microsoft.com/library/azure/dn820169.aspx
[rest_add_task]: https://msdn.microsoft.com/library/azure/dn820105.aspx
[rest_create_user]: https://msdn.microsoft.com/library/azure/dn820137.aspx
[rest_get_task_info]: https://msdn.microsoft.com/library/azure/dn820133.aspx
[rest_job_schedules]: https://msdn.microsoft.com/library/azure/mt282179.aspx
[rest_multiinstance]: https://msdn.microsoft.com/library/azure/mt637905.aspx
[rest_multiinstancesettings]: https://msdn.microsoft.com/library/azure/dn820105.aspx#multiInstanceSettings
[rest_update_job]: https://msdn.microsoft.com/library/azure/dn820162.aspx
[rest_rdp]: https://msdn.microsoft.com/library/azure/dn820120.aspx
[rest_reboot]: https://msdn.microsoft.com/library/azure/dn820171.aspx
[rest_reimage]: https://msdn.microsoft.com/library/azure/dn820157.aspx
[rest_remove]: https://msdn.microsoft.com/library/azure/dn820194.aspx
[rest_offline]: https://msdn.microsoft.com/library/azure/mt637904.aspx
[rest_online]: https://msdn.microsoft.com/library/azure/mt637907.aspx

[vm_marketplace]: https://azure.microsoft.com/marketplace/virtual-machines/
