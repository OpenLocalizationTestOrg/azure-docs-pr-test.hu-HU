---
title: "Visual Studio projektsablonjai - Azure Batch megoldások készítésével aaaStart |} Microsoft Docs"
description: "Ismerje meg, hogyan Visual Studio projektsablonjai segítségével valósítja meg, és futtassa a számítási-igényes munkaterhelések Azure Batch."
services: batch
documentationcenter: .net
author: fayora
manager: timlt
editor: 
ms.assetid: 5e041ae2-25af-4882-a79e-3aa63c4bfb20
ms.service: batch
ms.devlang: multiple
ms.topic: article
ms.tgt_pltfrm: vm-windows
ms.workload: big-compute
ms.date: 02/27/2017
ms.author: tamram
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: a61c480ddc4dffd66c01220a137a3e852e39c338
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/06/2017
---
# <a name="use-visual-studio-project-templates-toojump-start-batch-solutions"></a><span data-ttu-id="60abc-103">Visual Studio projekt sablonok toojump indítási kötegelt megoldások</span><span class="sxs-lookup"><span data-stu-id="60abc-103">Use Visual Studio project templates toojump-start Batch solutions</span></span>

<span data-ttu-id="60abc-104">Hello **Feladatkezelő** és **feladat processzor Visual Studio sablonok** kötegelt adja meg a kódot toohelp tooimplement, és futtassa a kötegben a számítási-igényes munkaterhelések hello legalább erőfeszítést.</span><span class="sxs-lookup"><span data-stu-id="60abc-104">hello **Job Manager** and **Task Processor Visual Studio templates** for Batch provide code toohelp you tooimplement and run your compute-intensive workloads on Batch with hello least amount of effort.</span></span> <span data-ttu-id="60abc-105">Ez a dokumentum ismerteti ezeket a sablonokat, és nyújt útmutatást toouse őket.</span><span class="sxs-lookup"><span data-stu-id="60abc-105">This document describes these templates and provides guidance for how toouse them.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="60abc-106">Ez a cikk ismerteti, amelyek csak információk alkalmazható toothese két sablonok, és feltételezi, hogy Ön ismeri a hello Batch szolgáltatás és a kapcsolódó tooit főbb fogalmait:-készletek, a számítási csomópontok, feladatok és feladatokat, feladat manager-feladatokkal, környezeti változók és más vonatkozó információ.</span><span class="sxs-lookup"><span data-stu-id="60abc-106">This article discusses only information applicable toothese two templates, and assumes that you are familiar with hello Batch service and key concepts related tooit: pools, compute nodes, jobs and tasks, job manager tasks, environment variables, and other relevant information.</span></span> <span data-ttu-id="60abc-107">További információt a [alapjai az Azure Batch](batch-technical-overview.md), [Batch funkcióinak áttekintése a fejlesztők](batch-api-basics.md), és [hello Azure Batch könyvtár az első lépései a .NET-keretrendszerhez készült](batch-dotnet-get-started.md).</span><span class="sxs-lookup"><span data-stu-id="60abc-107">You can find more information in [Basics of Azure Batch](batch-technical-overview.md), [Batch feature overview for developers](batch-api-basics.md), and [Get started with hello Azure Batch library for .NET](batch-dotnet-get-started.md).</span></span>
> 
> 

## <a name="high-level-overview"></a><span data-ttu-id="60abc-108">Áttekintés</span><span class="sxs-lookup"><span data-stu-id="60abc-108">High-level overview</span></span>
<span data-ttu-id="60abc-109">hello Job Manager eszköz és a feladat processzor sablonok lehet használt toocreate két hasznos összetevői:</span><span class="sxs-lookup"><span data-stu-id="60abc-109">hello Job Manager and Task Processor templates can be used toocreate two useful components:</span></span>

* <span data-ttu-id="60abc-110">Egy feladat manager feladat, amely egy, amely képes felosztása a feladat több feladat is önállóan, párhuzamosan futó feladat elválasztó.</span><span class="sxs-lookup"><span data-stu-id="60abc-110">A job manager task that implements a job splitter that can break a job down into multiple tasks that can run independently, in parallel.</span></span>
* <span data-ttu-id="60abc-111">Egy feladat processzor használt tooperform előtti és utáni feldolgozást egy alkalmazás parancs sora környékén használható.</span><span class="sxs-lookup"><span data-stu-id="60abc-111">A task processor that can be used tooperform pre-processing and post-processing around an application command line.</span></span>

<span data-ttu-id="60abc-112">Például movie megjelenítési esetben hello feladat elválasztó volna ikonná egy egyetlen movie feladat több száz vagy ezer a különböző feladatokhoz, amelyek feldolgozzák egyes keretek külön-külön kellene.</span><span class="sxs-lookup"><span data-stu-id="60abc-112">For example, in a movie rendering scenario, hello job splitter would turn a single movie job into hundreds or thousands of separate tasks that would process individual frames separately.</span></span> <span data-ttu-id="60abc-113">Ennek megfelelően hello feladat processzor lenne meghívása hello alkalmazás és minden függő folyamatok szükséges toorender minden keret megjelenítése, valamint minden további műveleteket (például másolása megjelenítve hello keret tooa tárolási helyét).</span><span class="sxs-lookup"><span data-stu-id="60abc-113">Correspondingly, hello task processor would invoke hello rendering application and all dependent processes that are needed toorender each frame, as well as perform any additional actions (for example, copying hello rendered frame tooa storage location).</span></span>

> [!NOTE]
> <span data-ttu-id="60abc-114">hello Job Manager eszköz és a feladat processzor sablonok függetlenek egymástól, ezért is toouse mindegyikét, vagy csak az egyik, a számítási feladatok és preferenciák hello követelményeitől függően.</span><span class="sxs-lookup"><span data-stu-id="60abc-114">hello Job Manager and Task Processor templates are independent of each other, so you can choose toouse both, or only one of them, depending on hello requirements of your compute job and on your preferences.</span></span>
> 
> 

<span data-ttu-id="60abc-115">Ahogy az az alábbi ábrán hello, a számítási feladat által használt ezeket a sablonokat végighaladnia három fázisból áll:</span><span class="sxs-lookup"><span data-stu-id="60abc-115">As shown in hello diagram below, a compute job that uses these templates will go through three stages:</span></span>

1. <span data-ttu-id="60abc-116">hello Ügyfélkód (pl. alkalmazások, webes szolgáltatás, stb.) küldi el a feladat toohello Batch szolgáltatás Azure, adja meg a feladat manager feladat hello-manager programot.</span><span class="sxs-lookup"><span data-stu-id="60abc-116">hello client code (e.g., application, web service, etc.) submits a job toohello Batch service on Azure, specifying as its job manager task hello job manager program.</span></span>
2. <span data-ttu-id="60abc-117">hello Batch szolgáltatás hello manager feladat futtatja egy számítási csomóponton, és hello feladat elválasztó elindítja hello meghatározott feladat processzor feladatot, a különböző számítási csomópontokkal igény szerint hello paraméterek és hello feladat elválasztó kód specifikációk alapján.</span><span class="sxs-lookup"><span data-stu-id="60abc-117">hello Batch service runs hello job manager task on a compute node and hello job splitter launches hello specified number of task processor tasks, on as many compute nodes as required, based on hello parameters and specifications in hello job splitter code.</span></span>
3. <span data-ttu-id="60abc-118">hello feladat processzor feladatok egymástól függetlenül, párhuzamosan futnak, tooprocess hello bemeneti adatokat, és hozhat létre hello kimeneti adatokat.</span><span class="sxs-lookup"><span data-stu-id="60abc-118">hello task processor tasks run independently, in parallel, tooprocess hello input data and generate hello output data.</span></span>

![Hogyan kommunikál az Ügyfélkód hello Batch szolgáltatás ábrája][diagram01]

## <a name="prerequisites"></a><span data-ttu-id="60abc-120">Előfeltételek</span><span class="sxs-lookup"><span data-stu-id="60abc-120">Prerequisites</span></span>
<span data-ttu-id="60abc-121">toouse hello kötegelt sablonok, szüksége lesz a következő hello:</span><span class="sxs-lookup"><span data-stu-id="60abc-121">toouse hello Batch templates, you will need hello following:</span></span>

* <span data-ttu-id="60abc-122">Egy számítógép, amelyen telepítve a Visual Studio 2015.</span><span class="sxs-lookup"><span data-stu-id="60abc-122">A computer with Visual Studio 2015 installed.</span></span> <span data-ttu-id="60abc-123">Kötegelt sablonok jelenleg csak a Visual Studio 2015 esetében támogatott.</span><span class="sxs-lookup"><span data-stu-id="60abc-123">Batch templates are currently only supported for Visual Studio 2015.</span></span>
* <span data-ttu-id="60abc-124">hello kötegelt sablonok, amelyek érhetők el a hello [Visual Studio galériában] [ vs_gallery] Visual Studio kiterjesztéseket.</span><span class="sxs-lookup"><span data-stu-id="60abc-124">hello Batch templates, which are available from hello [Visual Studio Gallery][vs_gallery] as Visual Studio extensions.</span></span> <span data-ttu-id="60abc-125">Két módon tooget hello sablonokat:</span><span class="sxs-lookup"><span data-stu-id="60abc-125">There are two ways tooget hello templates:</span></span>
  
  * <span data-ttu-id="60abc-126">Hello sablonok használatával hello telepítése **bővítmények és frissítések** párbeszédpanel a Visual Studio (további információkért lásd: [keresés és a Visual Studio-bővítmények használatával][vs_find_use_ext]).</span><span class="sxs-lookup"><span data-stu-id="60abc-126">Install hello templates using hello **Extensions and Updates** dialog box in Visual Studio (for more information, see [Finding and Using Visual Studio Extensions][vs_find_use_ext]).</span></span> <span data-ttu-id="60abc-127">A hello **bővítmények és frissítések** keresés és a letöltési hello két bővítmény a következő párbeszédpanelen:</span><span class="sxs-lookup"><span data-stu-id="60abc-127">In hello **Extensions and Updates** dialog box, search and download hello following two extensions:</span></span>
    
    * <span data-ttu-id="60abc-128">A feladat elválasztó Azure Batch Feladatkezelő</span><span class="sxs-lookup"><span data-stu-id="60abc-128">Azure Batch Job Manager with Job Splitter</span></span>
    * <span data-ttu-id="60abc-129">Az Azure Batch feladat processzor</span><span class="sxs-lookup"><span data-stu-id="60abc-129">Azure Batch Task Processor</span></span>
  * <span data-ttu-id="60abc-130">Hello sablonok letöltésére hello online katalógusból a Visual Studio: [Projektsablonjai a Microsoft Azure Batch][vs_gallery_templates]</span><span class="sxs-lookup"><span data-stu-id="60abc-130">Download hello templates from hello online gallery for Visual Studio: [Microsoft Azure Batch Project Templates][vs_gallery_templates]</span></span>
* <span data-ttu-id="60abc-131">Ha azt tervezi, hogy toouse hello [alkalmazáscsomagok](batch-application-packages.md) szolgáltatás toodeploy hello job manager eszköz és a feladat processzor toohello Batch számítási csomópontjain, toolink a tárolási fiók tooyour Batch-fiók szükséges.</span><span class="sxs-lookup"><span data-stu-id="60abc-131">If you plan toouse hello [Application Packages](batch-application-packages.md) feature toodeploy hello job manager and task processor toohello Batch compute nodes, you need toolink a storage account tooyour Batch account.</span></span>

## <a name="preparation"></a><span data-ttu-id="60abc-132">Előkészítése</span><span class="sxs-lookup"><span data-stu-id="60abc-132">Preparation</span></span>
<span data-ttu-id="60abc-133">Azt javasoljuk, hogy a Feladatkezelő, valamint a feladat processzor tartalmazhat megoldás létrehozásával, mert ez teheti, hogy könnyebben tooshare kód a Feladatkezelőt és a feladat feldolgozó programok között.</span><span class="sxs-lookup"><span data-stu-id="60abc-133">We recommend creating a solution that can contain your job manager as well as your task processor, because this can make it easier tooshare code between your job manager and task processor programs.</span></span> <span data-ttu-id="60abc-134">toocreate ebben az esetben kövesse az alábbi lépéseket:</span><span class="sxs-lookup"><span data-stu-id="60abc-134">toocreate this solution, follow these steps:</span></span>

1. <span data-ttu-id="60abc-135">Nyissa meg a Visual Studio, és válassza ki **fájl** > **új** > **projekt**.</span><span class="sxs-lookup"><span data-stu-id="60abc-135">Open Visual Studio and select **File** > **New** > **Project**.</span></span>
2. <span data-ttu-id="60abc-136">A **sablonok**, bontsa ki a **egyéb projekttípusok**, kattintson **Visual Studio megoldás**, majd válassza ki **üres megoldás**.</span><span class="sxs-lookup"><span data-stu-id="60abc-136">Under **Templates**, expand **Other Project Types**, click **Visual Studio Solutions**, and then select **Blank Solution**.</span></span>
3. <span data-ttu-id="60abc-137">Adjon meg egy nevet, amely leírja az ebben a megoldásban (pl. "LitwareBatchTaskPrograms") alkalmazás és hello célját.</span><span class="sxs-lookup"><span data-stu-id="60abc-137">Type a name that describes your application and hello purpose of this solution (e.g., "LitwareBatchTaskPrograms").</span></span>
4. <span data-ttu-id="60abc-138">toocreate hello új megoldás, kattintson a **OK**.</span><span class="sxs-lookup"><span data-stu-id="60abc-138">toocreate hello new solution, click **OK**.</span></span>

## <a name="job-manager-template"></a><span data-ttu-id="60abc-139">Feladatkezelő sablon</span><span class="sxs-lookup"><span data-stu-id="60abc-139">Job Manager template</span></span>
<span data-ttu-id="60abc-140">hello Feladatkezelő sablon segítségével egy hajthat végre a következő műveletek hello manager feladat tooimplement:</span><span class="sxs-lookup"><span data-stu-id="60abc-140">hello Job Manager template helps you tooimplement a job manager task that can perform hello following actions:</span></span>

* <span data-ttu-id="60abc-141">A feladatok felosztása több feladat.</span><span class="sxs-lookup"><span data-stu-id="60abc-141">Split a job into multiple tasks.</span></span>
* <span data-ttu-id="60abc-142">Küldje el azokat a kötegelt feladatok toorun.</span><span class="sxs-lookup"><span data-stu-id="60abc-142">Submit those tasks toorun on Batch.</span></span>

> [!NOTE]
> <span data-ttu-id="60abc-143">Feladat manager feladatokkal kapcsolatos további információkért lásd: [Batch funkcióinak áttekintése a fejlesztők](batch-api-basics.md#job-manager-task).</span><span class="sxs-lookup"><span data-stu-id="60abc-143">For more information about job manager tasks, see [Batch feature overview for developers](batch-api-basics.md#job-manager-task).</span></span>
> 
> 

### <a name="create-a-job-manager-using-hello-template"></a><span data-ttu-id="60abc-144">A feladat-kezelőt hello sablon létrehozása</span><span class="sxs-lookup"><span data-stu-id="60abc-144">Create a Job Manager using hello template</span></span>
<span data-ttu-id="60abc-145">egy feladat manager toohello megoldás, amely korábban létrehozott tooadd kövesse az alábbi lépéseket:</span><span class="sxs-lookup"><span data-stu-id="60abc-145">tooadd a job manager toohello solution that you created earlier, follow these steps:</span></span>

1. <span data-ttu-id="60abc-146">Nyissa meg a meglévő megoldást a Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="60abc-146">Open your existing solution in Visual Studio.</span></span>
2. <span data-ttu-id="60abc-147">A Megoldáskezelőben kattintson a jobb gombbal a hello megoldásban kattintson **Hozzáadás** > **új projekt**.</span><span class="sxs-lookup"><span data-stu-id="60abc-147">In Solution Explorer, right-click hello solution, click **Add** > **New Project**.</span></span>
3. <span data-ttu-id="60abc-148">A **Visual C#**, kattintson a **felhő**, és kattintson a **Azure Batch Job Manager használatát a feladat elválasztó**.</span><span class="sxs-lookup"><span data-stu-id="60abc-148">Under **Visual C#**, click **Cloud**, and then click **Azure Batch Job Manager with Job Splitter**.</span></span>
4. <span data-ttu-id="60abc-149">Adjon meg egy nevet, amely ismerteti az alkalmazást, és úgy azonosítja a projekt, hello job manager használatát (pl. "LitwareJobManager").</span><span class="sxs-lookup"><span data-stu-id="60abc-149">Type a name that describes your application and identifies this project as hello job manager (e.g. "LitwareJobManager").</span></span>
5. <span data-ttu-id="60abc-150">toocreate hello projektben kattintson **OK**.</span><span class="sxs-lookup"><span data-stu-id="60abc-150">toocreate hello project, click **OK**.</span></span>
6. <span data-ttu-id="60abc-151">Végezetül build hello projekt tooforce Visual Studio tooload minden hivatkozott NuGet-csomagok és, hogy a projekt hello tooverify érvényes módosításához megkezdése előtt.</span><span class="sxs-lookup"><span data-stu-id="60abc-151">Finally, build hello project tooforce Visual Studio tooload all referenced NuGet packages and tooverify that hello project is valid before you start modifying it.</span></span>

### <a name="job-manager-template-files-and-their-purpose"></a><span data-ttu-id="60abc-152">Feladatkezelő sablonfájlokat és célját</span><span class="sxs-lookup"><span data-stu-id="60abc-152">Job Manager template files and their purpose</span></span>
<span data-ttu-id="60abc-153">A projekt hello Feladatkezelő sablon létrehozásakor három fájlcsoportok kódot állít elő:</span><span class="sxs-lookup"><span data-stu-id="60abc-153">When you create a project using hello Job Manager template, it generates three groups of code files:</span></span>

* <span data-ttu-id="60abc-154">hello fő programfájl (Program.cs).</span><span class="sxs-lookup"><span data-stu-id="60abc-154">hello main program file (Program.cs).</span></span> <span data-ttu-id="60abc-155">Hello program a belépési pont és a legfelső szintű kivételkezelést tartalmazza.</span><span class="sxs-lookup"><span data-stu-id="60abc-155">This contains hello program entry point and top-level exception handling.</span></span> <span data-ttu-id="60abc-156">Nem szabad általában toomodify ez szükséges.</span><span class="sxs-lookup"><span data-stu-id="60abc-156">You shouldn't normally need toomodify this.</span></span>
* <span data-ttu-id="60abc-157">hello keretrendszer könyvtára.</span><span class="sxs-lookup"><span data-stu-id="60abc-157">hello Framework directory.</span></span> <span data-ttu-id="60abc-158">Ez tartalmazza a hello fájlok felelős hello "bolierplate" dolgozott hello feladat manager program – kicsomagolása paraméterek hozzáadásával toohello kötegelt feladatok stb. Nem megfelelően szükséges toomodify ezeket a fájlokat.</span><span class="sxs-lookup"><span data-stu-id="60abc-158">This contains hello files responsible for hello 'boilerplate' work done by hello job manager program – unpacking parameters, adding tasks toohello Batch job, etc. You shouldn't normally need toomodify these files.</span></span>
* <span data-ttu-id="60abc-159">hello feladat elválasztó fájlt (JobSplitter.cs).</span><span class="sxs-lookup"><span data-stu-id="60abc-159">hello job splitter file (JobSplitter.cs).</span></span> <span data-ttu-id="60abc-160">Ez azért, ahol az alkalmazás-specifikus logika vágását meghatározó egy feladatot a feladatok helyezzük el.</span><span class="sxs-lookup"><span data-stu-id="60abc-160">This is where you will put your application-specific logic for splitting a job into tasks.</span></span>

<span data-ttu-id="60abc-161">Természetesen szerint is felvehet további fájlok szükséges toosupport a feladat elválasztó kódot, attól függően, hogy a felosztás logika hello feladat hello összetettsége.</span><span class="sxs-lookup"><span data-stu-id="60abc-161">Of course you can add additional files as required toosupport your job splitter code, depending on hello complexity of hello job splitting logic.</span></span>

<span data-ttu-id="60abc-162">hello sablon is létrehoz a szabványos .NET project fájlok például .csproj fájlhoz, app.config, packages.config, stb.</span><span class="sxs-lookup"><span data-stu-id="60abc-162">hello template also generates standard .NET project files such as a .csproj file, app.config, packages.config, etc.</span></span>

<span data-ttu-id="60abc-163">Ez a szakasz többi hello hello más fájlokat és a kód szerkezete ismerteti, és minden egyes osztály funkciója ismerteti.</span><span class="sxs-lookup"><span data-stu-id="60abc-163">hello rest of this section describes hello different files and their code structure, and explains what each class does.</span></span>

![A Visual Studio Megoldáskezelőben hello Feladatkezelő sablon megoldás][solution_explorer01]

<span data-ttu-id="60abc-165">**Keretrendszer fájlok**</span><span class="sxs-lookup"><span data-stu-id="60abc-165">**Framework files**</span></span>

* <span data-ttu-id="60abc-166">`Configuration.cs`: A feladat konfigurációs adatok, például kötegelt fiókadatok, csatolt tárfiók hitelesítő adatainak, feladat- és információk és a feladat paramétereit hello betöltését magában foglalja.</span><span class="sxs-lookup"><span data-stu-id="60abc-166">`Configuration.cs`: Encapsulates hello loading of job configuration data such as Batch account details, linked storage account credentials, job and task information, and job parameters.</span></span> <span data-ttu-id="60abc-167">Is hozzáférést biztosít a tooBatch által definiált környezeti változók (lásd a környezeti beállítások feladatokhoz hello kötegelt dokumentációjának) keresztül hello Configuration.EnvironmentVariable osztály.</span><span class="sxs-lookup"><span data-stu-id="60abc-167">It also provides access tooBatch-defined environment variables (see Environment settings for tasks, in hello Batch documentation) via hello Configuration.EnvironmentVariable class.</span></span>
* <span data-ttu-id="60abc-168">`IConfiguration.cs`: Kivonatok hello hello Configuration osztály végrehajtására, a egység tesztelése a feladatok elválasztó egy hamis vagy utánzatait konfigurációs objektuma használja.</span><span class="sxs-lookup"><span data-stu-id="60abc-168">`IConfiguration.cs`: Abstracts hello implementation of hello Configuration class, so that you can unit test your job splitter using a fake or mock configuration object.</span></span>
* <span data-ttu-id="60abc-169">`JobManager.cs`: Frissítés hello feladat manager program hello összetevői.</span><span class="sxs-lookup"><span data-stu-id="60abc-169">`JobManager.cs`: Orchestrates hello components of hello job manager program.</span></span> <span data-ttu-id="60abc-170">Felelős hello hello feladat elválasztó meghívása hello feladat elválasztó, inicializálása és hello feladat elválasztó toohello feladat küldő által visszaadott hello feladatok terjesztéséhez.</span><span class="sxs-lookup"><span data-stu-id="60abc-170">It is responsible for hello initializing hello job splitter, invoking hello job splitter, and dispatching hello tasks returned by hello job splitter toohello task submitter.</span></span>
* <span data-ttu-id="60abc-171">`JobManagerException.cs`: Hiba hello feladat manager tooterminate igénylő jelöli.</span><span class="sxs-lookup"><span data-stu-id="60abc-171">`JobManagerException.cs`: Represents an error that requires hello job manager tooterminate.</span></span> <span data-ttu-id="60abc-172">JobManagerException használt toowrap "várt" hibák, ahol a diagnosztikai információk lezárást részeként megadható.</span><span class="sxs-lookup"><span data-stu-id="60abc-172">JobManagerException is used toowrap 'expected' errors where specific diagnostic information can be provided as part of termination.</span></span>
* <span data-ttu-id="60abc-173">`TaskSubmitter.cs`: Ez az osztály hello feladat elválasztó toohello kötegelt által visszaadott felelős tooadding feladatok.</span><span class="sxs-lookup"><span data-stu-id="60abc-173">`TaskSubmitter.cs`: This class is responsible tooadding tasks returned by hello job splitter toohello Batch job.</span></span> <span data-ttu-id="60abc-174">hello JobManager osztály hello tevékenységsorozat történő hatékony, de időben történő hozzáadását toohello feladat kötegek összesíti, majd meghívja a TaskSubmitter.SubmitTasks a háttérszálon az egyes kötegekben.</span><span class="sxs-lookup"><span data-stu-id="60abc-174">hello JobManager class aggregates hello sequence of tasks into batches for efficient but timely addition toohello job, then calls TaskSubmitter.SubmitTasks on a background thread for each batch.</span></span>

<span data-ttu-id="60abc-175">**Feladat elválasztó**</span><span class="sxs-lookup"><span data-stu-id="60abc-175">**Job Splitter**</span></span>

<span data-ttu-id="60abc-176">`JobSplitter.cs`: Ez az osztály tartalmazza az alkalmazás-specifikus logika vágását meghatározó hello feladatot a feladatok.</span><span class="sxs-lookup"><span data-stu-id="60abc-176">`JobSplitter.cs`: This class contains application-specific logic for splitting hello job into tasks.</span></span> <span data-ttu-id="60abc-177">hello keretrendszer hív hello JobSplitter.Split metódus tooobtain feladatokat, melyekhez hozzáadja sorozatát toohello feladat hello módszerként adja vissza őket.</span><span class="sxs-lookup"><span data-stu-id="60abc-177">hello framework invokes hello JobSplitter.Split method tooobtain a sequence of tasks, which it adds toohello job as hello method returns them.</span></span> <span data-ttu-id="60abc-178">Ez az osztály hello hol fogja tölteni a feladat hello logikát.</span><span class="sxs-lookup"><span data-stu-id="60abc-178">This is hello class where you will inject hello logic of your job.</span></span> <span data-ttu-id="60abc-179">Hello vegyes metódus tooreturn CloudTask példányok képviselő szeretné toopartition hello feladat hello feladatok sorozata megvalósításához.</span><span class="sxs-lookup"><span data-stu-id="60abc-179">Implement hello Split method tooreturn a sequence of CloudTask instances representing hello tasks into which you want toopartition hello job.</span></span>

<span data-ttu-id="60abc-180">**Standard szintű .NET parancssori project fájlok**</span><span class="sxs-lookup"><span data-stu-id="60abc-180">**Standard .NET command line project files**</span></span>

* <span data-ttu-id="60abc-181">`App.config`: Standard .NET alkalmazás konfigurációs fájljában.</span><span class="sxs-lookup"><span data-stu-id="60abc-181">`App.config`: Standard .NET application configuration file.</span></span>
* <span data-ttu-id="60abc-182">`Packages.config`: Standard NuGet csomag függőségi fájlt.</span><span class="sxs-lookup"><span data-stu-id="60abc-182">`Packages.config`: Standard NuGet package dependency file.</span></span>
* <span data-ttu-id="60abc-183">`Program.cs`: Hello program a belépési pont és a legfelső szintű kivételkezelést tartalmazza.</span><span class="sxs-lookup"><span data-stu-id="60abc-183">`Program.cs`: Contains hello program entry point and top-level exception handling.</span></span>

### <a name="implementing-hello-job-splitter"></a><span data-ttu-id="60abc-184">Végrehajtási hello feladat elválasztó</span><span class="sxs-lookup"><span data-stu-id="60abc-184">Implementing hello job splitter</span></span>
<span data-ttu-id="60abc-185">Hello Feladatkezelő sablonprojekt megnyitásakor hello projekt lesz hello JobSplitter.cs fájl nyissa meg alapértelmezettként.</span><span class="sxs-lookup"><span data-stu-id="60abc-185">When you open hello Job Manager template project, hello project will have hello JobSplitter.cs file open by default.</span></span> <span data-ttu-id="60abc-186">Ossza fel a számítási feladatok hello feladatainak logika hello Split() módszer megjelenítése az alábbi használatával hello valósíthatja meg:</span><span class="sxs-lookup"><span data-stu-id="60abc-186">You can implement hello split logic for hello tasks in your workload by using hello Split() method show below:</span></span>

```csharp
/// <summary>
/// Gets hello tasks into which toosplit hello job. This is where you inject
/// your application-specific logic for decomposing hello job into tasks.
///
/// hello job manager framework invokes hello Split method for you; you need
/// only tooimplement it, not toocall it yourself. Typically, your
/// implementation should return tasks lazily, for example using a C#
/// iterator and hello "yield return" statement; this allows tasks toobe added
/// and toostart running while splitting is still in progress.
/// </summary>
/// <returns>hello tasks toobe added toohello job. Tasks are added automatically
/// by hello job manager framework as they are returned by this method.</returns>
public IEnumerable<CloudTask> Split()
{
    // Your code for hello split logic goes here.
    int startFrame = Convert.ToInt32(_parameters["StartFrame"]);
    int endFrame = Convert.ToInt32(_parameters["EndFrame"]);

    for (int i = startFrame; i <= endFrame; i++)
    {
        yield return new CloudTask("myTask" + i, "cmd /c dir");
    }
}
```

> [!NOTE]
> <span data-ttu-id="60abc-187">hello feliratozva hello szakasz `Split()` metódus hello hello Feladatkezelő sablon kódot, amelyet Ön toomodify hozzáadásával hello logika toosplit a feladatok a különböző feladatok csak szakasza.</span><span class="sxs-lookup"><span data-stu-id="60abc-187">hello annotated section in hello `Split()` method is hello only section of hello Job Manager template code that is intended for you toomodify by adding hello logic toosplit your jobs into different tasks.</span></span> <span data-ttu-id="60abc-188">Ha azt szeretné, hogy egy másik szakasz hello sablon toomodify, győződjön meg arról, kötegelt működése, a rendszer familiarized és hello néhány kipróbálásához [Batch-Kódminták][github_samples].</span><span class="sxs-lookup"><span data-stu-id="60abc-188">If you want toomodify a different section of hello template, please ensure you are familiarized with how Batch works, and try out a few of hello [Batch code samples][github_samples].</span></span>
> 
> 

<span data-ttu-id="60abc-189">A Split() megvalósítás hozzáféréssel rendelkezik:</span><span class="sxs-lookup"><span data-stu-id="60abc-189">Your Split() implementation has access to:</span></span>

* <span data-ttu-id="60abc-190">feladat paramétereit keresztül hello hello `_parameters` mező.</span><span class="sxs-lookup"><span data-stu-id="60abc-190">hello job parameters, via hello `_parameters` field.</span></span>
* <span data-ttu-id="60abc-191">hello CloudJob objektumot képviselő hello feladat, keresztül hello `_job` mező.</span><span class="sxs-lookup"><span data-stu-id="60abc-191">hello CloudJob object representing hello job, via hello `_job` field.</span></span>
* <span data-ttu-id="60abc-192">hello CloudTask objektumot képviselő hello manager feladata, keresztül hello `_jobManagerTask` mező.</span><span class="sxs-lookup"><span data-stu-id="60abc-192">hello CloudTask object representing hello job manager task, via hello `_jobManagerTask` field.</span></span>

<span data-ttu-id="60abc-193">A `Split()` megvalósítása nem kell közvetlenül tooadd feladatok toohello feladat.</span><span class="sxs-lookup"><span data-stu-id="60abc-193">Your `Split()` implementation does not need tooadd tasks toohello job directly.</span></span> <span data-ttu-id="60abc-194">Ehelyett a kód CloudTask objektumok sorozatát kell visszaadnia, és ezek felveszi toohello feladat automatikusan hello feladat elválasztó meghívása hello keretrendszer osztályok által.</span><span class="sxs-lookup"><span data-stu-id="60abc-194">Instead, your code should return a sequence of CloudTask objects, and these will be added toohello job automatically by hello framework classes that invoke hello job splitter.</span></span> <span data-ttu-id="60abc-195">Közös toouse C# tartozó iterátor (`yield return`) tooimplement feladat elválasztókat a beállítást, mivel ez lehetővé teszi, hogy fut a lehető leghamarabb hello feladatok toostart, ahelyett hogy számított összes feladatok toobe vár.</span><span class="sxs-lookup"><span data-stu-id="60abc-195">It's common toouse C#'s iterator (`yield return`) feature tooimplement job splitters as this allows hello tasks toostart running as soon as possible rather than waiting for all tasks toobe calculated.</span></span>

<span data-ttu-id="60abc-196">**A feladat elválasztó sikertelen**</span><span class="sxs-lookup"><span data-stu-id="60abc-196">**Job splitter failure**</span></span>

<span data-ttu-id="60abc-197">Ha a feladat elválasztó hibát észlel, azt kell vagy:</span><span class="sxs-lookup"><span data-stu-id="60abc-197">If your job splitter encounters an error, it should either:</span></span>

* <span data-ttu-id="60abc-198">Hello C# használatával hello feladatütemezési leáll `yield break` utasítást, amelyben eset hello Feladatkezelő kezeli a program sikeres; vagy</span><span class="sxs-lookup"><span data-stu-id="60abc-198">Terminate hello sequence using hello C# `yield break` statement, in which case hello job manager will be treated as successful; or</span></span>
* <span data-ttu-id="60abc-199">Kivételt jelez, amelyben eset hello Feladatkezelő számítanak, nem sikerült, és előfordulhat, hogy ismételhető attól függően, hogy hogyan hello ügyfél van konfigurálva).</span><span class="sxs-lookup"><span data-stu-id="60abc-199">Throw an exception, in which case hello job manager will be treated as failed and may be retried depending on how hello client has configured it).</span></span>

<span data-ttu-id="60abc-200">Mindkét esetben hello feladat elválasztó már vissza olyan feladatokat, és hozzáadott toohello kötegelt jogosult toorun lesz.</span><span class="sxs-lookup"><span data-stu-id="60abc-200">In both cases, any tasks already returned by hello job splitter and added toohello Batch job will be eligible toorun.</span></span> <span data-ttu-id="60abc-201">Ha nem szeretné a toohappen, majd meg a következőket teheti:</span><span class="sxs-lookup"><span data-stu-id="60abc-201">If you don't want this toohappen, then you could:</span></span>

* <span data-ttu-id="60abc-202">Állítsa le a hello feladat hello feladat elválasztó visszatérése előtt</span><span class="sxs-lookup"><span data-stu-id="60abc-202">Terminate hello job before returning from hello job splitter</span></span>
* <span data-ttu-id="60abc-203">Állítson össze hello feladat teljes gyűjteményhez való visszaküldés előtt. (Ez azt jelenti, hogy vissza egy `ICollection<CloudTask>` vagy `IList<CloudTask>` helyett a feladat felosztó használatával egy C# iterátor megvalósítása)</span><span class="sxs-lookup"><span data-stu-id="60abc-203">Formulate hello entire task collection before returning it (that is, return an `ICollection<CloudTask>` or `IList<CloudTask>` instead of implementing your job splitter using a C# iterator)</span></span>
* <span data-ttu-id="60abc-204">Feladat függőségek toomake hello Feladatkezelő hello sikeres befejezését függő feladatok használata</span><span class="sxs-lookup"><span data-stu-id="60abc-204">Use task dependencies toomake all tasks depend on hello successful completion of hello job manager</span></span>

<span data-ttu-id="60abc-205">**Feladat manager újrapróbálkozások**</span><span class="sxs-lookup"><span data-stu-id="60abc-205">**Job manager retries**</span></span>

<span data-ttu-id="60abc-206">Hello Feladatkezelő sikertelen lesz, ha azt hello Batch szolgáltatás hello ügyfél újrapróbálkozási beállításoktól függően előfordulhat, hogy ismételhető.</span><span class="sxs-lookup"><span data-stu-id="60abc-206">If hello job manager fails, it may be retried by hello Batch service depending on hello client retry settings.</span></span> <span data-ttu-id="60abc-207">Ez általában biztonságos, mert ha hello keretrendszer hozzáadja a feladatok toohello feladat, figyelmen kívül hagyja minden feladatot, amely már létezik.</span><span class="sxs-lookup"><span data-stu-id="60abc-207">In general, this is safe, because when hello framework adds tasks toohello job, it ignores any tasks that already exist.</span></span> <span data-ttu-id="60abc-208">Azonban ha feladatok kiszámítása költséges, előfordulhat, hogy nem kívánja tooincur hello költségét újraszámításakor már hozzáadott toohello feladat; feladatok Ezzel szemben ha hello futtassa újra a van nem garantált toogenerate hello tevékenység ugyanazokat az azonosítókat ezután hello "figyelmen kívül az ismétlődő" viselkedés nem lesz indítsa.</span><span class="sxs-lookup"><span data-stu-id="60abc-208">However, if calculating tasks is expensive, you may not wish tooincur hello cost of recalculating tasks that have already been added toohello job; conversely, if hello re-run is not guaranteed toogenerate hello same task IDs then hello 'ignore duplicates' behavior will not kick in.</span></span> <span data-ttu-id="60abc-209">Ezekben az esetekben akkor tervezzen a feladat elválasztó toodetect hello munkáját, hogy már megtörtént, és ismétlődik, például egy CloudJob.ListTasks elvégzésével tooyield feladatok megkezdése előtt.</span><span class="sxs-lookup"><span data-stu-id="60abc-209">In these cases you should design your job splitter toodetect hello work that has already been done and not repeat it, for example by performing a CloudJob.ListTasks before starting tooyield tasks.</span></span>

### <a name="exit-codes-and-exceptions-in-hello-job-manager-template"></a><span data-ttu-id="60abc-210">Lépjen ki a kódok és kivételek hello Feladatkezelő sablonban</span><span class="sxs-lookup"><span data-stu-id="60abc-210">Exit codes and exceptions in hello Job Manager template</span></span>
<span data-ttu-id="60abc-211">Olyan kilépési kódot és kivételeket egy mechanizmus toodetermine hello eredményeit a program fut, és segíthetnek tooidentify hello program végrehajtását hello problémákat.</span><span class="sxs-lookup"><span data-stu-id="60abc-211">Exit codes and exceptions provide a mechanism toodetermine hello outcome of running a program, and they can help tooidentify any problems with hello execution of hello program.</span></span> <span data-ttu-id="60abc-212">hello Feladatkezelő sablon hello kilépési kódot és a jelen szakaszban ismertetett kivételek valósítja meg.</span><span class="sxs-lookup"><span data-stu-id="60abc-212">hello Job Manager template implements hello exit codes and exceptions described in this section.</span></span>

<span data-ttu-id="60abc-213">A kezelő feladata hello Feladatkezelő sablonnal megvalósított visszatérhet három lehetséges kilépési kód:</span><span class="sxs-lookup"><span data-stu-id="60abc-213">A job manager task that is implemented with hello Job Manager template can return three possible exit codes:</span></span>

| <span data-ttu-id="60abc-214">Kód</span><span class="sxs-lookup"><span data-stu-id="60abc-214">Code</span></span> | <span data-ttu-id="60abc-215">Leírás</span><span class="sxs-lookup"><span data-stu-id="60abc-215">Description</span></span> |
| --- | --- |
| <span data-ttu-id="60abc-216">0</span><span class="sxs-lookup"><span data-stu-id="60abc-216">0</span></span> |<span data-ttu-id="60abc-217">hello Feladatkezelő sikeresen befejeződött.</span><span class="sxs-lookup"><span data-stu-id="60abc-217">hello job manager completed successfully.</span></span> <span data-ttu-id="60abc-218">A feladat elválasztó kódot toocompletion lefutott, és minden feladat lettek hozzáadva toohello feladat.</span><span class="sxs-lookup"><span data-stu-id="60abc-218">Your job splitter code ran toocompletion, and all tasks were added toohello job.</span></span> |
| <span data-ttu-id="60abc-219">1</span><span class="sxs-lookup"><span data-stu-id="60abc-219">1</span></span> |<span data-ttu-id="60abc-220">hello manager feladat hello program "várt" részében kivételhiba miatt sikertelen.</span><span class="sxs-lookup"><span data-stu-id="60abc-220">hello job manager task failed with an exception in an 'expected' part of hello program.</span></span> <span data-ttu-id="60abc-221">hello kivételhiba lefordított tooa JobManagerException diagnosztikai információkat, és ha lehetséges, kapcsolatos javaslatok hello hiba.</span><span class="sxs-lookup"><span data-stu-id="60abc-221">hello exception was translated tooa JobManagerException with diagnostic information and, where possible, suggestions for resolving hello failure.</span></span> |
| <span data-ttu-id="60abc-222">2</span><span class="sxs-lookup"><span data-stu-id="60abc-222">2</span></span> |<span data-ttu-id="60abc-223">hello manager feladata egy "nem várt" kivétel miatt sikertelen volt.</span><span class="sxs-lookup"><span data-stu-id="60abc-223">hello job manager task failed with an 'unexpected' exception.</span></span> <span data-ttu-id="60abc-224">hello kivételhiba kimeneti naplózott toostandard, de hello Feladatkezelő nem tooadd további diagnosztikai vagy javítási adatokat.</span><span class="sxs-lookup"><span data-stu-id="60abc-224">hello exception was logged toostandard output, but hello job manager was unable tooadd any additional diagnostic or remediation information.</span></span> |

<span data-ttu-id="60abc-225">A feladat manager feladat sikertelen a hello esetben egyes feladatok továbbra is hozzáadható toohello szolgáltatás előtt hello hiba történt.</span><span class="sxs-lookup"><span data-stu-id="60abc-225">In hello case of job manager task failure, some tasks may still have been added toohello service before hello error occurred.</span></span> <span data-ttu-id="60abc-226">Ezek a feladatok szokásos módon indul el.</span><span class="sxs-lookup"><span data-stu-id="60abc-226">These tasks will run as normal.</span></span> <span data-ttu-id="60abc-227">"Feladat elválasztó sikertelen" fent látható kód elérési út leírását.</span><span class="sxs-lookup"><span data-stu-id="60abc-227">See "Job Splitter Failure" above for discussion of this code path.</span></span>

<span data-ttu-id="60abc-228">Kivételek által visszaadott összes hello adatok stdout.txt és stderr.txt fájlok íródtak.</span><span class="sxs-lookup"><span data-stu-id="60abc-228">All hello information returned by exceptions is written into stdout.txt and stderr.txt files.</span></span> <span data-ttu-id="60abc-229">További információkért lásd: [hiba kezelése](batch-api-basics.md#error-handling).</span><span class="sxs-lookup"><span data-stu-id="60abc-229">For more information, see [Error Handling](batch-api-basics.md#error-handling).</span></span>

### <a name="client-considerations"></a><span data-ttu-id="60abc-230">Az ügyfelek szempontjai</span><span class="sxs-lookup"><span data-stu-id="60abc-230">Client considerations</span></span>
<span data-ttu-id="60abc-231">Ez a szakasz ismerteti a végrehajtása néhány ügyfélkövetelmények, a Feladatkezelő, ez a sablon alapján való meghívásakor.</span><span class="sxs-lookup"><span data-stu-id="60abc-231">This section describes some client implementation requirements when invoking a job manager based on this template.</span></span> <span data-ttu-id="60abc-232">Lásd: [hogyan toopass paraméterek és a környezeti változókat hello Ügyfélkód](#pass-environment-settings) paraméterek-környezet beállításait, és leírását.</span><span class="sxs-lookup"><span data-stu-id="60abc-232">See [How toopass parameters and environment variables from hello client code](#pass-environment-settings) for details on passing parameters and environment settings.</span></span>

<span data-ttu-id="60abc-233">**Kötelező hitelesítő adatok**</span><span class="sxs-lookup"><span data-stu-id="60abc-233">**Mandatory credentials**</span></span>

<span data-ttu-id="60abc-234">Rendelés tooadd feladatok toohello Azure kötegelt hello manager feladata az Azure Batch-fiók URL-címe és a kulcs használatához szükséges.</span><span class="sxs-lookup"><span data-stu-id="60abc-234">In order tooadd tasks toohello Azure Batch job, hello job manager task requires your Azure Batch account URL and key.</span></span> <span data-ttu-id="60abc-235">Át kell adnia ezeket a környezeti változók neve YOUR_BATCH_URL és YOUR_BATCH_KEY.</span><span class="sxs-lookup"><span data-stu-id="60abc-235">You must pass these in environment variables named YOUR_BATCH_URL and YOUR_BATCH_KEY.</span></span> <span data-ttu-id="60abc-236">Állíthatja be ezeket az hello Feladatkezelő tevékenység környezeti beállításokat.</span><span class="sxs-lookup"><span data-stu-id="60abc-236">You can set these in hello Job Manager task environment settings.</span></span> <span data-ttu-id="60abc-237">Például a C# ügyfél:</span><span class="sxs-lookup"><span data-stu-id="60abc-237">For example, in a C# client:</span></span>

```csharp
job.JobManagerTask.EnvironmentSettings = new [] {
    new EnvironmentSetting("YOUR_BATCH_URL", "https://account.region.batch.azure.com"),
    new EnvironmentSetting("YOUR_BATCH_KEY", "{your_base64_encoded_account_key}"),
};
```
<span data-ttu-id="60abc-238">**Tároló hitelesítő adatait**</span><span class="sxs-lookup"><span data-stu-id="60abc-238">**Storage credentials**</span></span>

<span data-ttu-id="60abc-239">Általában hello ügyfélnek nincs szüksége tooprovide hello csatolt tárolási fiók hitelesítő adatait toohello manager feladat, mert a legtöbb feladatot kezelők nem szükséges tooexplicitly hozzáférés hello kapcsolódó tárfiók, és (b) hello kapcsolt tárfiókra gyakran biztosítja hello feladat általános környezet beállítása tooall feladatokat.</span><span class="sxs-lookup"><span data-stu-id="60abc-239">Typically, hello client does not need tooprovide hello linked storage account credentials toohello job manager task because (a) most job managers do not need tooexplicitly access hello linked storage account and (b) hello linked storage account is often provided tooall tasks as a common environment setting for hello job.</span></span> <span data-ttu-id="60abc-240">Ha nem ad hello kapcsolódó tárfiók keresztül hello közös környezeti beállításokat, és hello Feladatkezelő szükséges toolinked tároló elérése, akkor meg kell adnia az kapcsolódó hello tárolási hitelesítő adatokat az alábbiak szerint:</span><span class="sxs-lookup"><span data-stu-id="60abc-240">If you are not providing hello linked storage account via hello common environment settings, and hello job manager requires access toolinked storage, then you should supply hello linked storage credentials as follows:</span></span>

```csharp
job.JobManagerTask.EnvironmentSettings = new [] {
    /* other environment settings */
    new EnvironmentSetting("LINKED_STORAGE_ACCOUNT", "{storageAccountName}"),
    new EnvironmentSetting("LINKED_STORAGE_KEY", "{storageAccountKey}"),
};
```

<span data-ttu-id="60abc-241">**Feladat manager feladatbeállítások**</span><span class="sxs-lookup"><span data-stu-id="60abc-241">**Job manager task settings**</span></span>

<span data-ttu-id="60abc-242">hello ügyfél kell beállítania hello Feladatkezelő *killJobOnCompletion* túl jelzőt**hamis**.</span><span class="sxs-lookup"><span data-stu-id="60abc-242">hello client should set hello job manager *killJobOnCompletion* flag too**false**.</span></span>

<span data-ttu-id="60abc-243">Hello ügyfél tooset esetében általában biztonságosan *runExclusive* túl**hamis**.</span><span class="sxs-lookup"><span data-stu-id="60abc-243">It is usually safe for hello client tooset *runExclusive* too**false**.</span></span>

<span data-ttu-id="60abc-244">hello ügyfélnek használnia kell a hello *resourceFiles* vagy *applicationPackageReferences* gyűjtemény toohave hello Feladatkezelő végrehajtható (és a szükséges DLL-ek) központi telepítése toohello számítási csomópont.</span><span class="sxs-lookup"><span data-stu-id="60abc-244">hello client should use hello *resourceFiles* or *applicationPackageReferences* collection toohave hello job manager executable (and its required DLLs) deployed toohello compute node.</span></span>

<span data-ttu-id="60abc-245">Alapértelmezés szerint hello Feladatkezelő nem úja sikertelen.</span><span class="sxs-lookup"><span data-stu-id="60abc-245">By default, hello job manager will not be retried if it fails.</span></span> <span data-ttu-id="60abc-246">Attól függően, hogy a feladat manager logika hello ügyfél azt szeretné, hogy tooenable újrapróbálkozások keresztül *megkötések*/*maxTaskRetryCount*.</span><span class="sxs-lookup"><span data-stu-id="60abc-246">Depending on your job manager logic, hello client may want tooenable retries via *constraints*/*maxTaskRetryCount*.</span></span>

<span data-ttu-id="60abc-247">**Feladatbeállítások**</span><span class="sxs-lookup"><span data-stu-id="60abc-247">**Job settings**</span></span>

<span data-ttu-id="60abc-248">Hello feladat elválasztó függőségekkel rendelkező feladatok bocsát ki, ha hello ügyfél hello feladat usesTaskDependencies tootrue be kell állítani.</span><span class="sxs-lookup"><span data-stu-id="60abc-248">If hello job splitter emits tasks with dependencies, hello client must set hello job's usesTaskDependencies tootrue.</span></span>

<span data-ttu-id="60abc-249">Hello feladat elválasztó modell, az ügyfelek toowish tooadd feladatok toojobs feletti milyen hello feladat elválasztó hoz létre a szokatlan is.</span><span class="sxs-lookup"><span data-stu-id="60abc-249">In hello job splitter model, it is unusual for clients toowish tooadd tasks toojobs over and above what hello job splitter creates.</span></span> <span data-ttu-id="60abc-250">hello ügyfél ezért általában kitűzni hello feladat *onAllTasksComplete* túl**terminatejob**.</span><span class="sxs-lookup"><span data-stu-id="60abc-250">hello client should therefore normally set hello job's *onAllTasksComplete* too**terminatejob**.</span></span>

## <a name="task-processor-template"></a><span data-ttu-id="60abc-251">Processzor sablon</span><span class="sxs-lookup"><span data-stu-id="60abc-251">Task Processor template</span></span>
<span data-ttu-id="60abc-252">Egy feladat processzor sablon tooimplement egy feladat processzor által elvégezhető műveletek a következő hello segítségével:</span><span class="sxs-lookup"><span data-stu-id="60abc-252">A Task Processor template helps you tooimplement a task processor that can perform hello following actions:</span></span>

* <span data-ttu-id="60abc-253">Állítson be minden kötegelt feladat toorun által kért hello információkat.</span><span class="sxs-lookup"><span data-stu-id="60abc-253">Set up hello information required by each Batch task toorun.</span></span>
* <span data-ttu-id="60abc-254">Minden kötegelt feladat által igényelt összes műveletek futtatása.</span><span class="sxs-lookup"><span data-stu-id="60abc-254">Run all actions required by each Batch task.</span></span>
* <span data-ttu-id="60abc-255">A feladat kimenetének toopersistent tárolási mentéséhez.</span><span class="sxs-lookup"><span data-stu-id="60abc-255">Save task outputs toopersistent storage.</span></span>

<span data-ttu-id="60abc-256">Egy feladat processzor, de nem szükséges toorun feladatokat a kötegelt hello kulcs egy feladat processzor előnye biztosítja a burkoló tooimplement összes feladatütemezés végrehajtási műveletek egyetlen helyen.</span><span class="sxs-lookup"><span data-stu-id="60abc-256">Although a task processor is not required toorun tasks on Batch, hello key advantage of using a task processor is that it provides a wrapper tooimplement all task execution actions in one location.</span></span> <span data-ttu-id="60abc-257">Például ha toorun hello környezetben minden egyes feladat több alkalmazás van szüksége, vagy ha szüksége toopersistent adattárolás toocopy befejezése után minden feladat.</span><span class="sxs-lookup"><span data-stu-id="60abc-257">For example, if you need toorun several applications in hello context of each task, or if you need toocopy data toopersistent storage after completing each task.</span></span>

<span data-ttu-id="60abc-258">hello feladat processzor által végzett hello műveletek lehet egyszerű vagy összetett, és annyi, vagy kevés a munkaterhelés szerint szükség szerint.</span><span class="sxs-lookup"><span data-stu-id="60abc-258">hello actions performed by hello task processor can be as simple or complex, and as many or as few, as required by your workload.</span></span> <span data-ttu-id="60abc-259">Emellett egy feladat processzor az összes feladat műveletek alkalmazásával könnyen frissítése vagy is műveletek módosítások tooapplications vagy munkaterhelés követelmények alapján.</span><span class="sxs-lookup"><span data-stu-id="60abc-259">Additionally, by implementing all task actions into one task processor, you can readily update or add actions based on changes tooapplications or workload requirements.</span></span> <span data-ttu-id="60abc-260">Azonban bizonyos esetekben egy feladat processzor nem feltétlenül hello optimális megoldás megvalósítását, azt is hozzáadhat a szükségtelen összetettségét, például amikor fut, amely egy egyszerű parancssorból gyorsan indítható feladatok.</span><span class="sxs-lookup"><span data-stu-id="60abc-260">However, in some cases a task processor might not be hello optimal solution for your implementation as it can add unnecessary complexity, for example when running jobs that can be quickly started from a simple command line.</span></span>

### <a name="create-a-task-processor-using-hello-template"></a><span data-ttu-id="60abc-261">Hozzon létre egy hello sablonnal feladat processzor</span><span class="sxs-lookup"><span data-stu-id="60abc-261">Create a Task Processor using hello template</span></span>
<span data-ttu-id="60abc-262">egy feladat processzor toohello megoldás, amely korábban létrehozott tooadd kövesse az alábbi lépéseket:</span><span class="sxs-lookup"><span data-stu-id="60abc-262">tooadd a task processor toohello solution that you created earlier, follow these steps:</span></span>

1. <span data-ttu-id="60abc-263">Nyissa meg a meglévő megoldást a Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="60abc-263">Open your existing solution in Visual Studio.</span></span>
2. <span data-ttu-id="60abc-264">A Megoldáskezelőben kattintson a jobb gombbal a hello megoldásban kattintson **Hozzáadás**, és kattintson a **új projekt**.</span><span class="sxs-lookup"><span data-stu-id="60abc-264">In Solution Explorer, right-click hello solution, click **Add**, and then click **New Project**.</span></span>
3. <span data-ttu-id="60abc-265">A **Visual C#**, kattintson a **felhő**, és kattintson a **Azure kötegelt feladat processzor**.</span><span class="sxs-lookup"><span data-stu-id="60abc-265">Under **Visual C#**, click **Cloud**, and then click **Azure Batch Task Processor**.</span></span>
4. <span data-ttu-id="60abc-266">Adjon meg egy nevet, amely ismerteti az alkalmazást, és azonosítja a projekt, hello (pl. a tevékenység processzor "LitwareTaskProcessor").</span><span class="sxs-lookup"><span data-stu-id="60abc-266">Type a name that describes your application and identifies this project as hello task processor (e.g. "LitwareTaskProcessor").</span></span>
5. <span data-ttu-id="60abc-267">toocreate hello projektben kattintson **OK**.</span><span class="sxs-lookup"><span data-stu-id="60abc-267">toocreate hello project, click **OK**.</span></span>
6. <span data-ttu-id="60abc-268">Végezetül build hello projekt tooforce Visual Studio tooload minden hivatkozott NuGet-csomagok és, hogy a projekt hello tooverify érvényes módosításához megkezdése előtt.</span><span class="sxs-lookup"><span data-stu-id="60abc-268">Finally, build hello project tooforce Visual Studio tooload all referenced NuGet packages and tooverify that hello project is valid before you start modifying it.</span></span>

### <a name="task-processor-template-files-and-their-purpose"></a><span data-ttu-id="60abc-269">Feladat processzor sablonfájlokat és célját</span><span class="sxs-lookup"><span data-stu-id="60abc-269">Task Processor template files and their purpose</span></span>
<span data-ttu-id="60abc-270">A projekt hello processzor sablon létrehozásakor három fájlcsoportok kódot állít elő:</span><span class="sxs-lookup"><span data-stu-id="60abc-270">When you create a project using hello task processor template, it generates three groups of code files:</span></span>

* <span data-ttu-id="60abc-271">hello fő programfájl (Program.cs).</span><span class="sxs-lookup"><span data-stu-id="60abc-271">hello main program file (Program.cs).</span></span> <span data-ttu-id="60abc-272">Hello program a belépési pont és a legfelső szintű kivételkezelést tartalmazza.</span><span class="sxs-lookup"><span data-stu-id="60abc-272">This contains hello program entry point and top-level exception handling.</span></span> <span data-ttu-id="60abc-273">Nem szabad általában toomodify ez szükséges.</span><span class="sxs-lookup"><span data-stu-id="60abc-273">You shouldn't normally need toomodify this.</span></span>
* <span data-ttu-id="60abc-274">hello keretrendszer könyvtára.</span><span class="sxs-lookup"><span data-stu-id="60abc-274">hello Framework directory.</span></span> <span data-ttu-id="60abc-275">Ez tartalmazza a hello fájlok felelős hello "bolierplate" dolgozott hello feladat manager program – kicsomagolása paraméterek hozzáadásával toohello kötegelt feladatok stb. Nem megfelelően szükséges toomodify ezeket a fájlokat.</span><span class="sxs-lookup"><span data-stu-id="60abc-275">This contains hello files responsible for hello 'boilerplate' work done by hello job manager program – unpacking parameters, adding tasks toohello Batch job, etc. You shouldn't normally need toomodify these files.</span></span>
* <span data-ttu-id="60abc-276">hello feladat processzor fájl (TaskProcessor.cs).</span><span class="sxs-lookup"><span data-stu-id="60abc-276">hello task processor file (TaskProcessor.cs).</span></span> <span data-ttu-id="60abc-277">Ez az meg, ahová a az alkalmazás-specifikus logika egy feladat végrehajtása (általában meghívásával tooan létező végrehajtható fájl ki) a rendszer.</span><span class="sxs-lookup"><span data-stu-id="60abc-277">This is where you will put your application-specific logic for executing a task (typically by calling out tooan existing executable).</span></span> <span data-ttu-id="60abc-278">Előtti és utáni feldolgozási kódok, például a további adatok letöltése vagy eredmény fájlok feltöltése is ide kerül.</span><span class="sxs-lookup"><span data-stu-id="60abc-278">Pre- and post-processing code, such as downloading additional data or uploading result files, also goes here.</span></span>

<span data-ttu-id="60abc-279">Természetesen is hozzáadhat további fájlok szükséges toosupport, a processzor feladatkód, attól függően, hogy a felosztás logika hello feladat hello összetettsége.</span><span class="sxs-lookup"><span data-stu-id="60abc-279">Of course you can add additional files as required toosupport your task processor code, depending on hello complexity of hello job splitting logic.</span></span>

<span data-ttu-id="60abc-280">hello sablon is létrehoz a szabványos .NET project fájlok például .csproj fájlhoz, app.config, packages.config, stb.</span><span class="sxs-lookup"><span data-stu-id="60abc-280">hello template also generates standard .NET project files such as a .csproj file, app.config, packages.config, etc.</span></span>

<span data-ttu-id="60abc-281">Ez a szakasz többi hello hello más fájlokat és a kód szerkezete ismerteti, és minden egyes osztály funkciója ismerteti.</span><span class="sxs-lookup"><span data-stu-id="60abc-281">hello rest of this section describes hello different files and their code structure, and explains what each class does.</span></span>

![A Visual Studio Megoldáskezelőben hello feladat processzor sablon megoldás][solution_explorer02]

<span data-ttu-id="60abc-283">**Keretrendszer fájlok**</span><span class="sxs-lookup"><span data-stu-id="60abc-283">**Framework files**</span></span>

* <span data-ttu-id="60abc-284">`Configuration.cs`: A feladat konfigurációs adatok, például kötegelt fiókadatok, csatolt tárfiók hitelesítő adatainak, feladat- és információk és a feladat paramétereit hello betöltését magában foglalja.</span><span class="sxs-lookup"><span data-stu-id="60abc-284">`Configuration.cs`: Encapsulates hello loading of job configuration data such as Batch account details, linked storage account credentials, job and task information, and job parameters.</span></span> <span data-ttu-id="60abc-285">Is hozzáférést biztosít a tooBatch által definiált környezeti változók (lásd a környezeti beállítások feladatokhoz hello kötegelt dokumentációjának) keresztül hello Configuration.EnvironmentVariable osztály.</span><span class="sxs-lookup"><span data-stu-id="60abc-285">It also provides access tooBatch-defined environment variables (see Environment settings for tasks, in hello Batch documentation) via hello Configuration.EnvironmentVariable class.</span></span>
* <span data-ttu-id="60abc-286">`IConfiguration.cs`: Kivonatok hello hello Configuration osztály végrehajtására, a egység tesztelése a feladatok elválasztó egy hamis vagy utánzatait konfigurációs objektuma használja.</span><span class="sxs-lookup"><span data-stu-id="60abc-286">`IConfiguration.cs`: Abstracts hello implementation of hello Configuration class, so that you can unit test your job splitter using a fake or mock configuration object.</span></span>
* <span data-ttu-id="60abc-287">`TaskProcessorException.cs`: Hiba hello feladat manager tooterminate igénylő jelöli.</span><span class="sxs-lookup"><span data-stu-id="60abc-287">`TaskProcessorException.cs`: Represents an error that requires hello job manager tooterminate.</span></span> <span data-ttu-id="60abc-288">TaskProcessorException használt toowrap "várt" hibák, ahol a diagnosztikai információk lezárást részeként megadható.</span><span class="sxs-lookup"><span data-stu-id="60abc-288">TaskProcessorException is used toowrap 'expected' errors where specific diagnostic information can be provided as part of termination.</span></span>

<span data-ttu-id="60abc-289">**A feladat processzor**</span><span class="sxs-lookup"><span data-stu-id="60abc-289">**Task Processor**</span></span>

* <span data-ttu-id="60abc-290">`TaskProcessor.cs`: Hello feladat fut.</span><span class="sxs-lookup"><span data-stu-id="60abc-290">`TaskProcessor.cs`: Runs hello task.</span></span> <span data-ttu-id="60abc-291">hello keretrendszer hello TaskProcessor.Run metódus meghívja.</span><span class="sxs-lookup"><span data-stu-id="60abc-291">hello framework invokes hello TaskProcessor.Run method.</span></span> <span data-ttu-id="60abc-292">Ez az osztály hello hol fogja tölteni a feladat hello az alkalmazás-specifikus logika.</span><span class="sxs-lookup"><span data-stu-id="60abc-292">This is hello class where you will inject hello application-specific logic of your task.</span></span> <span data-ttu-id="60abc-293">Valósítsa meg hello Futtatás metódust:</span><span class="sxs-lookup"><span data-stu-id="60abc-293">Implement hello Run method to:</span></span>
  * <span data-ttu-id="60abc-294">Elemzése és a tevékenység paramétereket ellenőrzése</span><span class="sxs-lookup"><span data-stu-id="60abc-294">Parse and validate any task parameters</span></span>
  * <span data-ttu-id="60abc-295">Hello parancssori összeállítása bármely külső program tooinvoke keresi</span><span class="sxs-lookup"><span data-stu-id="60abc-295">Compose hello command line for any external program you want tooinvoke</span></span>
  * <span data-ttu-id="60abc-296">A diagnosztikai adatok lehet szükség a hibakereséshez</span><span class="sxs-lookup"><span data-stu-id="60abc-296">Log any diagnostic information you may require for debugging purposes</span></span>
  * <span data-ttu-id="60abc-297">A folyamat a parancssor használatával</span><span class="sxs-lookup"><span data-stu-id="60abc-297">Start a process using that command line</span></span>
  * <span data-ttu-id="60abc-298">Várjon, amíg hello folyamat tooexit</span><span class="sxs-lookup"><span data-stu-id="60abc-298">Wait for hello process tooexit</span></span>
  * <span data-ttu-id="60abc-299">Hello kilépési kód hello folyamat toodetermine rögzítését, ha ez sikeres vagy sikertelen volt</span><span class="sxs-lookup"><span data-stu-id="60abc-299">Capture hello exit code of hello process toodetermine if it succeeded or failed</span></span>
  * <span data-ttu-id="60abc-300">Mentse a kimeneti fájlokat, kívánt tookeep toopersistent tároló</span><span class="sxs-lookup"><span data-stu-id="60abc-300">Save any output files you want tookeep toopersistent storage</span></span>

<span data-ttu-id="60abc-301">**Standard szintű .NET parancssori project fájlok**</span><span class="sxs-lookup"><span data-stu-id="60abc-301">**Standard .NET command line project files**</span></span>

* <span data-ttu-id="60abc-302">`App.config`: Standard .NET alkalmazás konfigurációs fájljában.</span><span class="sxs-lookup"><span data-stu-id="60abc-302">`App.config`: Standard .NET application configuration file.</span></span>
* <span data-ttu-id="60abc-303">`Packages.config`: Standard NuGet csomag függőségi fájlt.</span><span class="sxs-lookup"><span data-stu-id="60abc-303">`Packages.config`: Standard NuGet package dependency file.</span></span>
* <span data-ttu-id="60abc-304">`Program.cs`: Hello program a belépési pont és a legfelső szintű kivételkezelést tartalmazza.</span><span class="sxs-lookup"><span data-stu-id="60abc-304">`Program.cs`: Contains hello program entry point and top-level exception handling.</span></span>

## <a name="implementing-hello-task-processor"></a><span data-ttu-id="60abc-305">Végrehajtási hello feladat processzor</span><span class="sxs-lookup"><span data-stu-id="60abc-305">Implementing hello task processor</span></span>
<span data-ttu-id="60abc-306">Hello feladat processzor sablonprojekt megnyitásakor hello projekt lesz hello TaskProcessor.cs fájl nyissa meg alapértelmezettként.</span><span class="sxs-lookup"><span data-stu-id="60abc-306">When you open hello Task Processor template project, hello project will have hello TaskProcessor.cs file open by default.</span></span> <span data-ttu-id="60abc-307">A számítási feladatok a hello feladatok futtatása hello logikát valósíthatja meg metódussal hello Run() alább látható:</span><span class="sxs-lookup"><span data-stu-id="60abc-307">You can implement hello run logic for hello tasks in your workload by using hello Run() method shown below:</span></span>

```csharp
/// <summary>
/// Runs hello task processing logic. This is where you inject
/// your application-specific logic for decomposing hello job into tasks.
///
/// hello task processor framework invokes hello Run method for you; you need
/// only tooimplement it, not toocall it yourself. Typically, your
/// implementation will execute an external program (from resource files or
/// an application package), check hello exit code of that program and
/// save output files toopersistent storage.
/// </summary>
public async Task<int> Run()

{
    try
    {
        //Your code for hello task processor goes here.
        var command = $"compare {_parameters["Frame1"]} {_parameters["Frame2"]} compare.gif";
        using (var process = Process.Start($"cmd /c {command}"))
        {
            process.WaitForExit();
            var taskOutputStorage = new TaskOutputStorage(
            _configuration.StorageAccount,
            _configuration.JobId,
            _configuration.TaskId
            );
            await taskOutputStorage.SaveAsync(
            TaskOutputKind.TaskOutput,
            @"..\stdout.txt",
            @"stdout.txt"
            );
            return process.ExitCode;
        }
    }
    catch (Exception ex)
    {
        throw new TaskProcessorException(
        $"{ex.GetType().Name} exception in run task processor: {ex.Message}",
        ex
        );
    }
}
```
> [!NOTE]
> <span data-ttu-id="60abc-308">hello hello Run() metódus megjegyzésekkel ellátott szakaszában hello csak szakasza hello feladat processzor sablon kódot, amelyet Ön toomodify a számítási feladatok futtatása hello logika hello tevékenységek hozzáadásával.</span><span class="sxs-lookup"><span data-stu-id="60abc-308">hello annotated section in hello Run() method is hello only section of hello Task Processor template code that is intended for you toomodify by adding hello run logic for hello tasks in your workload.</span></span> <span data-ttu-id="60abc-309">Ha azt szeretné, hogy egy másik szakasz hello sablon toomodify, adjon először megismerje a kötegelt működése hello kötegelt dokumentációja, illetve próbálhatja ki hello kötegelt mintakódok néhány által.</span><span class="sxs-lookup"><span data-stu-id="60abc-309">If you want toomodify a different section of hello template, please first familiarize yourself with how Batch works by reviewing hello Batch documentation and trying out a few of hello Batch code samples.</span></span>
> 
> 

<span data-ttu-id="60abc-310">hello Run() módszer hello parancssor megnyitása, egy vagy több folyamatok, várakozik az összes folyamat toocomplete, hello eredmények mentése, és végül a kilépési kóddal vissza.</span><span class="sxs-lookup"><span data-stu-id="60abc-310">hello Run() method is responsible for launching hello command line, starting one or more processes, waiting for all process toocomplete, saving hello results, and finally returning with an exit code.</span></span> <span data-ttu-id="60abc-311">hello Run() módszer, ahol a tevékenységek logika feldolgozási hello valósítja meg.</span><span class="sxs-lookup"><span data-stu-id="60abc-311">hello Run() method is where you implement hello processing logic for your tasks.</span></span> <span data-ttu-id="60abc-312">hello feladat processzor keretrendszer hello Run() metódus hív meg; nem kell toocall azt saját maga.</span><span class="sxs-lookup"><span data-stu-id="60abc-312">hello task processor framework invokes hello Run() method for you; you do not need toocall it yourself.</span></span>

<span data-ttu-id="60abc-313">A Run() megvalósítás hozzáféréssel rendelkezik:</span><span class="sxs-lookup"><span data-stu-id="60abc-313">Your Run() implementation has access to:</span></span>

* <span data-ttu-id="60abc-314">tevékenység-paraméterek, keresztül hello hello `_parameters` mező.</span><span class="sxs-lookup"><span data-stu-id="60abc-314">hello task parameters, via hello `_parameters` field.</span></span>
* <span data-ttu-id="60abc-315">feladat- és azonosítók keresztül hello hello `_jobId` és `_taskId` mezőket.</span><span class="sxs-lookup"><span data-stu-id="60abc-315">hello job and task ids, via hello `_jobId` and `_taskId` fields.</span></span>
* <span data-ttu-id="60abc-316">hello feladat konfigurációja keresztül hello `_configuration` mező.</span><span class="sxs-lookup"><span data-stu-id="60abc-316">hello task configuration, via hello `_configuration` field.</span></span>

<span data-ttu-id="60abc-317">**A feladat sikertelen**</span><span class="sxs-lookup"><span data-stu-id="60abc-317">**Task failure**</span></span>

<span data-ttu-id="60abc-318">Hiba, esetén hello Run() metódus által egy kivétel kiváltása kiléphet, de ez hagyja hello felső szintű kivételkezelő hello feladat kilépési kód irányítását.</span><span class="sxs-lookup"><span data-stu-id="60abc-318">In case of failure, you can exit hello Run() method by throwing an exception, but this leaves hello top level exception handler in control of hello task exit code.</span></span> <span data-ttu-id="60abc-319">Ha toocontrol hello kilépési kóddal kell, hogy a különböző típusú hiba, például képes megkülönböztetni, diagnosztikai célokra, vagy mert az egyes meghibásodási módok kell állítanunk hello feladat, míg mások nem kell-e, majd vissza kell hello Run() metódus kilép egy nem nulla kilépési kódot.</span><span class="sxs-lookup"><span data-stu-id="60abc-319">If you need toocontrol hello exit code so that you can distinguish different types of failure, for example for diagnostic purposes or because some failure modes should terminate hello job and others should not, then you should exit hello Run() method by returning a non-zero exit code.</span></span> <span data-ttu-id="60abc-320">Erre akkor van hello feladat kilépési kódot.</span><span class="sxs-lookup"><span data-stu-id="60abc-320">This becomes hello task exit code.</span></span>

### <a name="exit-codes-and-exceptions-in-hello-task-processor-template"></a><span data-ttu-id="60abc-321">Lépjen ki a kódok és kivételek hello feladat processzor sablonban</span><span class="sxs-lookup"><span data-stu-id="60abc-321">Exit codes and exceptions in hello Task Processor template</span></span>
<span data-ttu-id="60abc-322">Olyan kilépési kódot és kivételeket egy mechanizmus toodetermine hello eredményeit a program fut, és segíthetnek hello program végrehajtását hello problémákat azonosítása.</span><span class="sxs-lookup"><span data-stu-id="60abc-322">Exit codes and exceptions provide a mechanism toodetermine hello outcome of running a program, and they can help identify any problems with hello execution of hello program.</span></span> <span data-ttu-id="60abc-323">hello feladat processzor sablon hello kilépési kódot és a jelen szakaszban ismertetett kivételek valósítja meg.</span><span class="sxs-lookup"><span data-stu-id="60abc-323">hello Task Processor template implements hello exit codes and exceptions described in this section.</span></span>

<span data-ttu-id="60abc-324">Egy feladat processzor feladat hello feladat processzor sablonnal megvalósított visszatérhessen három lehetséges kilépési kód:</span><span class="sxs-lookup"><span data-stu-id="60abc-324">A task processor task that is implemented with hello Task Processor template can return three possible exit codes:</span></span>

| <span data-ttu-id="60abc-325">Kód</span><span class="sxs-lookup"><span data-stu-id="60abc-325">Code</span></span> | <span data-ttu-id="60abc-326">Leírás</span><span class="sxs-lookup"><span data-stu-id="60abc-326">Description</span></span> |
| --- | --- |
| <span data-ttu-id="60abc-327">[Process.ExitCode][process_exitcode]</span><span class="sxs-lookup"><span data-stu-id="60abc-327">[Process.ExitCode][process_exitcode]</span></span> |<span data-ttu-id="60abc-328">hello feladat processzor toocompletion futott.</span><span class="sxs-lookup"><span data-stu-id="60abc-328">hello task processor ran toocompletion.</span></span> <span data-ttu-id="60abc-329">Vegye figyelembe, hogy ez nem feltétlenül jelenti azt, a meghívott hello program sikeres volt, – csak hello feladat processzorral sikeresen elindítva, és végre semmilyen utófeldolgozás kivételek nélkül.</span><span class="sxs-lookup"><span data-stu-id="60abc-329">Note that this does not imply that hello program you invoked was successful – only that hello task processor invoked it successfully and performed any post-processing without exceptions.</span></span> <span data-ttu-id="60abc-330">hello kilépési kód hello szerinti meghívott hello programtól függ, – általában kilépési kód 0 azt jelenti, hogy hello program sikeres volt, és bármely más kilépési kód azt jelenti, hogy hello programot nem sikerült.</span><span class="sxs-lookup"><span data-stu-id="60abc-330">hello meaning of hello exit code depends on hello invoked program – typically exit code 0 means hello program succeeded and any other exit code means hello program failed.</span></span> |
| <span data-ttu-id="60abc-331">1</span><span class="sxs-lookup"><span data-stu-id="60abc-331">1</span></span> |<span data-ttu-id="60abc-332">hello feladat processzor hello program "várt" részében kivételhiba miatt sikertelen.</span><span class="sxs-lookup"><span data-stu-id="60abc-332">hello task processor failed with an exception in an 'expected' part of hello program.</span></span> <span data-ttu-id="60abc-333">hello kivételhiba lefordított tooa `TaskProcessorException` diagnosztikai információkat, és ha lehetséges, kapcsolatos javaslatok hello hiba.</span><span class="sxs-lookup"><span data-stu-id="60abc-333">hello exception was translated tooa `TaskProcessorException` with diagnostic information and, where possible, suggestions for resolving hello failure.</span></span> |
| <span data-ttu-id="60abc-334">2</span><span class="sxs-lookup"><span data-stu-id="60abc-334">2</span></span> |<span data-ttu-id="60abc-335">hello feladat processzor "Váratlan" kivétel miatt sikertelen.</span><span class="sxs-lookup"><span data-stu-id="60abc-335">hello task processor failed with an 'unexpected' exception.</span></span> <span data-ttu-id="60abc-336">hello kivételhiba kimeneti naplózott toostandard, de hello feladat processzor nem tooadd további diagnosztikai vagy javítási adatokat.</span><span class="sxs-lookup"><span data-stu-id="60abc-336">hello exception was logged toostandard output, but hello task processor was unable tooadd any additional diagnostic or remediation information.</span></span> |

> [!NOTE]
> <span data-ttu-id="60abc-337">Ha indításakor hello program kilépési kódokat 1 és 2 tooindicate hiba módot használ, a feladat processzor hibákat 1 és 2 kilépési kód használata nem egyértelmű.</span><span class="sxs-lookup"><span data-stu-id="60abc-337">If hello program you invoke uses exit codes 1 and 2 tooindicate specific failure modes, then using exit codes 1 and 2 for task processor errors is ambiguous.</span></span> <span data-ttu-id="60abc-338">A feladat processzor kódok toodistinctive kilépési hibakódok hello kivétel esetekben hello Program.cs fájl szerkesztésével módosíthatja.</span><span class="sxs-lookup"><span data-stu-id="60abc-338">You can change these task processor error codes toodistinctive exit codes by editing hello exception cases in hello Program.cs file.</span></span>
> 
> 

<span data-ttu-id="60abc-339">Kivételek által visszaadott összes hello adatok stdout.txt és stderr.txt fájlok íródtak.</span><span class="sxs-lookup"><span data-stu-id="60abc-339">All hello information returned by exceptions is written into stdout.txt and stderr.txt files.</span></span> <span data-ttu-id="60abc-340">További információkért lásd: hiba kezelése, a hello dokumentációt.</span><span class="sxs-lookup"><span data-stu-id="60abc-340">For more information, see Error Handling, in hello Batch documentation.</span></span>

### <a name="client-considerations"></a><span data-ttu-id="60abc-341">Az ügyfelek szempontjai</span><span class="sxs-lookup"><span data-stu-id="60abc-341">Client considerations</span></span>
<span data-ttu-id="60abc-342">**Tároló hitelesítő adatait**</span><span class="sxs-lookup"><span data-stu-id="60abc-342">**Storage credentials**</span></span>

<span data-ttu-id="60abc-343">Ha a feladat processzor használja az Azure blob storage toopersist kimenetek, például használatával hello fájl egyezmények segédkódtárba helyezni, akkor azt hozzá kell férnie túl*vagy* felhő tárfiók hitelesítő adatainak hello *vagy* egy blob tároló URL-címet, amely tartalmazza a közös hozzáférésű jogosultságkód (SAS).</span><span class="sxs-lookup"><span data-stu-id="60abc-343">If your task processor uses Azure blob storage toopersist outputs, for example using hello file conventions helper library, then it needs access too*either* hello cloud storage account credentials *or* a blob container URL that includes a shared access signature (SAS).</span></span> <span data-ttu-id="60abc-344">hello sablon közös környezeti változók hitelesítő adatokat biztosító támogatását is magában foglalja.</span><span class="sxs-lookup"><span data-stu-id="60abc-344">hello template includes support for providing credentials via common environment variables.</span></span> <span data-ttu-id="60abc-345">Az ügyfél a következőképpen teljen hello tároló hitelesítő adatait:</span><span class="sxs-lookup"><span data-stu-id="60abc-345">Your client can pass hello storage credentials as follows:</span></span>

```csharp
job.CommonEnvironmentSettings = new [] {
    new EnvironmentSetting("LINKED_STORAGE_ACCOUNT", "{storageAccountName}"),
    new EnvironmentSetting("LINKED_STORAGE_KEY", "{storageAccountKey}"),
};
```

<span data-ttu-id="60abc-346">hello tárfiók majd érhető el hello TaskProcessor osztály keresztül hello `_configuration.StorageAccount` tulajdonság.</span><span class="sxs-lookup"><span data-stu-id="60abc-346">hello storage account is then available in hello TaskProcessor class via hello `_configuration.StorageAccount` property.</span></span>

<span data-ttu-id="60abc-347">A tároló SAS URL-cím toouse tetszés szerint is átadhatja ezt keresztül feladat közös környezeti beállításokat, de hello processzor sablon jelenleg nem tartalmaz ez beépített támogatása.</span><span class="sxs-lookup"><span data-stu-id="60abc-347">If you prefer toouse a container URL with SAS, you can also pass this via an job common environment setting, but hello task processor template does not currently include built-in support for this.</span></span>

<span data-ttu-id="60abc-348">**Tárolás beállítása**</span><span class="sxs-lookup"><span data-stu-id="60abc-348">**Storage setup**</span></span>

<span data-ttu-id="60abc-349">E hello ügyfél vagy a feladatot manager feladat létrehozása tárolókkal szükséges feladatok hello feladatok toohello feladat hozzáadása előtt ajánlott.</span><span class="sxs-lookup"><span data-stu-id="60abc-349">It is recommended that hello client or job manager task create any containers required by tasks before adding hello tasks toohello job.</span></span> <span data-ttu-id="60abc-350">Ez a kötelező SAS tároló URL-címet használja, ha ilyen URL-cím nem tartalmaz engedély toocreate hello tároló.</span><span class="sxs-lookup"><span data-stu-id="60abc-350">This is mandatory if you use a container URL with SAS, as such a URL does not include permission toocreate hello container.</span></span> <span data-ttu-id="60abc-351">Minden tevékenység toocall CloudBlobContainer.CreateIfNotExistsAsync gyakorló hello tároló menti, ajánlott akkor is, ha a tárfiók hitelesítő adatait, adja meg.</span><span class="sxs-lookup"><span data-stu-id="60abc-351">It is recommended even if you pass storage account credentials, as it saves every task having toocall CloudBlobContainer.CreateIfNotExistsAsync on hello container.</span></span>

## <a name="pass-parameters-and-environment-variables"></a><span data-ttu-id="60abc-352">Paraméterek és a környezeti változók</span><span class="sxs-lookup"><span data-stu-id="60abc-352">Pass parameters and environment variables</span></span>
### <a name="pass-environment-settings"></a><span data-ttu-id="60abc-353">Pass-környezet beállításaiban</span><span class="sxs-lookup"><span data-stu-id="60abc-353">Pass environment settings</span></span>
<span data-ttu-id="60abc-354">Egy ügyfél továbbíthatja az információt toohello manager feladata a tesztkörnyezet beállításainak hello formájában.</span><span class="sxs-lookup"><span data-stu-id="60abc-354">A client can pass information toohello job manager task in hello form of environment settings.</span></span> <span data-ttu-id="60abc-355">Ez az információ majd használni hello manager feladat által előállítása hello feladat processzor feladatok hello részeként futó számítási feladatok.</span><span class="sxs-lookup"><span data-stu-id="60abc-355">This information can then be used by hello job manager task when generating hello task processor tasks that will run as part of hello compute job.</span></span> <span data-ttu-id="60abc-356">Hello információk, amelyek átadhatók környezeti beállításokat, például a következők:</span><span class="sxs-lookup"><span data-stu-id="60abc-356">Examples of hello information that you can pass as environment settings are:</span></span>

* <span data-ttu-id="60abc-357">Név és fiókkulcs tárfiókkulcsok</span><span class="sxs-lookup"><span data-stu-id="60abc-357">Storage account name and account keys</span></span>
* <span data-ttu-id="60abc-358">Batch-fiók URL-címe</span><span class="sxs-lookup"><span data-stu-id="60abc-358">Batch account URL</span></span>
* <span data-ttu-id="60abc-359">Kötegelt fiókkulcs</span><span class="sxs-lookup"><span data-stu-id="60abc-359">Batch account key</span></span>

<span data-ttu-id="60abc-360">Batch-szolgáltatás hello rendelkezik egy egyszerű módszer toopass környezet beállítások tooa manager feladat hello segítségével `EnvironmentSettings` tulajdonság [Microsoft.Azure.Batch.JobManagerTask][net_jobmanagertask].</span><span class="sxs-lookup"><span data-stu-id="60abc-360">hello Batch service has a simple mechanism toopass environment settings tooa job manager task by using hello `EnvironmentSettings` property in [Microsoft.Azure.Batch.JobManagerTask][net_jobmanagertask].</span></span>

<span data-ttu-id="60abc-361">Például tooget hello `BatchClient` példány környezeti változók hello ügyfélről code hello URL-címet, és megosztott kulcs hitelesítő adatai hello Batch-fiókhoz is át a Batch-fiókhoz.</span><span class="sxs-lookup"><span data-stu-id="60abc-361">For example, tooget hello `BatchClient` instance for a Batch account, you can pass as environment variables from hello client code hello URL and shared key credentials for hello Batch account.</span></span> <span data-ttu-id="60abc-362">Hasonlóképpen tooaccess hello tárfiókja, amely toohello Batch-fiókhoz kapcsolódó, átadhatók hello a tárfiók neve vagy hello tárfiók hívóbetűjét, a környezeti változók.</span><span class="sxs-lookup"><span data-stu-id="60abc-362">Likewise, tooaccess hello storage account that is linked toohello Batch account, you can pass hello storage account name and hello storage account key as environment variables.</span></span>

### <a name="pass-parameters-toohello-job-manager-template"></a><span data-ttu-id="60abc-363">Paraméterek toohello Feladatkezelő sablon fázis</span><span class="sxs-lookup"><span data-stu-id="60abc-363">Pass parameters toohello Job Manager template</span></span>
<span data-ttu-id="60abc-364">Sok esetben hasznos toopass Feladatonkénti paraméterek toohello feladat manager feladat, vagy toocontrol hello folyamat felosztásával, vagy tooconfigure hello feladatok hello feladat.</span><span class="sxs-lookup"><span data-stu-id="60abc-364">In many cases, it's useful toopass per-job parameters toohello job manager task, either toocontrol hello job splitting process or tooconfigure hello tasks for hello job.</span></span> <span data-ttu-id="60abc-365">Ehhez a parameters.json nevű hello manager feladata az erőforrás-fájlként JSON-fájl feltöltésével.</span><span class="sxs-lookup"><span data-stu-id="60abc-365">You can do this by uploading a JSON file named parameters.json as a resource file for hello job manager task.</span></span> <span data-ttu-id="60abc-366">hello paraméterek tudja majd válnak elérhetővé hello `JobSplitter._parameters` hello Feladatkezelő sablon mezőbe.</span><span class="sxs-lookup"><span data-stu-id="60abc-366">hello parameters can then become available in hello `JobSplitter._parameters` field in hello Job Manager template.</span></span>

> [!NOTE]
> <span data-ttu-id="60abc-367">hello beépített paraméter kezelő csak karakterlánc-karakterlánc szótárak támogatja.</span><span class="sxs-lookup"><span data-stu-id="60abc-367">hello built-in parameter handler supports only string-to-string dictionaries.</span></span> <span data-ttu-id="60abc-368">Ha azt szeretné, hogy toopass összetett JSON értékek paraméter értékeként, akkor lesz toopass ezek karakterláncként kell és hello feladat elválasztó elemzett őket, vagy módosítsa hello keretrendszer `Configuration.GetJobParameters` metódust.</span><span class="sxs-lookup"><span data-stu-id="60abc-368">If you want toopass complex JSON values as parameter values, you will need toopass these as strings and parse them in hello job splitter, or modify hello framework's `Configuration.GetJobParameters` method.</span></span>
> 
> 

### <a name="pass-parameters-toohello-task-processor-template"></a><span data-ttu-id="60abc-369">Paraméterek toohello feladat processzor sablon fázis</span><span class="sxs-lookup"><span data-stu-id="60abc-369">Pass parameters toohello Task Processor template</span></span>
<span data-ttu-id="60abc-370">Is átadhatja paraméterek tooindividual feladatok hello feladat processzor sablonnal megvalósítva.</span><span class="sxs-lookup"><span data-stu-id="60abc-370">You can also pass parameters tooindividual tasks implemented using hello Task Processor template.</span></span> <span data-ttu-id="60abc-371">Ahogy hello feladat manager sablon, hello processzor sablon keresi nevű erőforrásfájl</span><span class="sxs-lookup"><span data-stu-id="60abc-371">Just as with hello job manager template, hello task processor template looks for a resource file named</span></span>

<span data-ttu-id="60abc-372">Parameters.JSON, és ha találhatók, mint hello paraméterek szótár betölti azt.</span><span class="sxs-lookup"><span data-stu-id="60abc-372">parameters.json, and if found it loads it as hello parameters dictionary.</span></span> <span data-ttu-id="60abc-373">Többféle hogyan toopass paraméterek toohello feladat processzor feladatok beállításait:</span><span class="sxs-lookup"><span data-stu-id="60abc-373">There are a couple of options for how toopass parameters toohello task processor tasks:</span></span>

* <span data-ttu-id="60abc-374">Hello feladatparaméter JSON felhasználhatja.</span><span class="sxs-lookup"><span data-stu-id="60abc-374">Reuse hello job parameters JSON.</span></span> <span data-ttu-id="60abc-375">Ez a módszer jól, ha hello csak paraméterei feladat kiterjedő (például a leképezési magassága és szélessége) is.</span><span class="sxs-lookup"><span data-stu-id="60abc-375">This works well if hello only parameters are job-wide ones (for example, a render height and width).</span></span> <span data-ttu-id="60abc-376">toodo, egy CloudTask hello feladat elválasztó, létrehozásakor hozzáadása egy hivatkozás toohello parameters.json fájl objektum hello feladat manager feladat ResourceFiles (`JobSplitter._jobManagerTask.ResourceFiles`) toohello CloudTask ResourceFiles gyűjtemény.</span><span class="sxs-lookup"><span data-stu-id="60abc-376">toodo this, when creating a CloudTask in hello job splitter, add a reference toohello parameters.json resource file object from hello job manager task's ResourceFiles (`JobSplitter._jobManagerTask.ResourceFiles`) toohello CloudTask's ResourceFiles collection.</span></span>
* <span data-ttu-id="60abc-377">Készítése és feladatspecifikus parameters.json dokumentum feltöltése feladatok elválasztó végrehajtásának részeként, és hivatkozni, hogy a blob hello feladat erőforrás fájlok gyűjteményben.</span><span class="sxs-lookup"><span data-stu-id="60abc-377">Generate and upload a task-specific parameters.json document as part of job splitter execution, and reference that blob in hello task's resource files collection.</span></span> <span data-ttu-id="60abc-378">Ez azért szükséges, ha a különböző feladatok más paraméterekkel rendelkeznek.</span><span class="sxs-lookup"><span data-stu-id="60abc-378">This is necessary if different tasks have different parameters.</span></span> <span data-ttu-id="60abc-379">Például lehet egy 3D megjelenítés forgatókönyv, ahol hello keret index átadása toohello feladat paraméterként.</span><span class="sxs-lookup"><span data-stu-id="60abc-379">An example might be a 3D rendering scenario where hello frame index is passed toohello task as a parameter.</span></span>

> [!NOTE]
> <span data-ttu-id="60abc-380">hello beépített paraméter kezelő csak karakterlánc-karakterlánc szótárak támogatja.</span><span class="sxs-lookup"><span data-stu-id="60abc-380">hello built-in parameter handler supports only string-to-string dictionaries.</span></span> <span data-ttu-id="60abc-381">Ha azt szeretné, hogy toopass összetett JSON értékek paraméter értékeként, akkor lesz toopass ezek karakterláncként kell és hello feladat processzor elemzett őket, vagy módosítsa hello keretrendszer `Configuration.GetTaskParameters` metódust.</span><span class="sxs-lookup"><span data-stu-id="60abc-381">If you want toopass complex JSON values as parameter values, you will need toopass these as strings and parse them in hello task processor, or modify hello framework's `Configuration.GetTaskParameters` method.</span></span>
> 
> 

## <a name="next-steps"></a><span data-ttu-id="60abc-382">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="60abc-382">Next steps</span></span>
### <a name="persist-job-and-task-output-tooazure-storage"></a><span data-ttu-id="60abc-383">Feladat megmaradnak, és a kimeneti tooAzure tárolási feladat</span><span class="sxs-lookup"><span data-stu-id="60abc-383">Persist job and task output tooAzure Storage</span></span>
<span data-ttu-id="60abc-384">Egy másik hasznos eszköz a kötegelt megoldás fejlesztési [Azure Batch fájl egyezmények][nuget_package].</span><span class="sxs-lookup"><span data-stu-id="60abc-384">Another helpful tool in Batch solution development is [Azure Batch File Conventions][nuget_package].</span></span> <span data-ttu-id="60abc-385">A .NET osztálykönyvtár (jelenleg előzetes verzió) található Batch .NET-alkalmazások tooeasily tárolt, és a feladat kimenetének tooand lekérdezni az Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="60abc-385">Use this .NET class library (currently in preview) in your Batch .NET applications tooeasily store and retrieve task outputs tooand from Azure Storage.</span></span> <span data-ttu-id="60abc-386">[Azure Batch feladat- és kimeneti megőrzéséhez](batch-task-output.md) hello szalagtár és a használati ismertetését tartalmazza.</span><span class="sxs-lookup"><span data-stu-id="60abc-386">[Persist Azure Batch job and task output](batch-task-output.md) contains a full discussion of hello library and its usage.</span></span>

### <a name="batch-forum"></a><span data-ttu-id="60abc-387">Batch fórum</span><span class="sxs-lookup"><span data-stu-id="60abc-387">Batch Forum</span></span>
<span data-ttu-id="60abc-388">Hello [Azure Batch fórum] [ forum] MSDN nagyszerű toodiscuss kötegelt helyezze, és hello szolgáltatás kérdése.</span><span class="sxs-lookup"><span data-stu-id="60abc-388">hello [Azure Batch Forum][forum] on MSDN is a great place toodiscuss Batch and ask questions about hello service.</span></span> <span data-ttu-id="60abc-389">Központi a keresztül a hasznos "kapcsolódó" bejegyzések, és a kötegelt megoldások létrehozása során felmerülő kérdéseit.</span><span class="sxs-lookup"><span data-stu-id="60abc-389">Head on over for helpful "sticky" posts, and post your questions as they arise while you build your Batch solutions.</span></span>

[forum]: https://social.msdn.microsoft.com/forums/azure/en-US/home?forum=azurebatch
[net_jobmanagertask]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.jobmanagertask.aspx
[github_samples]: https://github.com/Azure/azure-batch-samples
[nuget_package]: https://www.nuget.org/packages/Microsoft.Azure.Batch.Conventions.Files
[process_exitcode]: https://msdn.microsoft.com/library/system.diagnostics.process.exitcode.aspx
[vs_gallery]: https://visualstudiogallery.msdn.microsoft.com/
[vs_gallery_templates]: https://go.microsoft.com/fwlink/?linkid=820714
[vs_find_use_ext]: https://msdn.microsoft.com/library/dd293638.aspx

[diagram01]: ./media/batch-visual-studio-templates/diagram01.png
[solution_explorer01]: ./media/batch-visual-studio-templates/solution_explorer01.png
[solution_explorer02]: ./media/batch-visual-studio-templates/solution_explorer02.png
