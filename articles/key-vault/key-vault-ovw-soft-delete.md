---
ms.assetid: 
title: "Az Azure Key Vault helyreállítható törlésre |} Microsoft Docs"
ms.service: key-vault
author: BrucePerlerMS
ms.author: bruceper
manager: mbaldwin
ms.date: 07/10/2017
ms.openlocfilehash: c873b153ef9c7d5f55672a5918c9dc4fb7256701
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 08/03/2017
---
# <a name="azure-key-vault-soft-delete-overview"></a><span data-ttu-id="63239-102">Az Azure Key Vault soft-törlés áttekintése</span><span class="sxs-lookup"><span data-stu-id="63239-102">Azure Key Vault soft-delete overview</span></span>

<span data-ttu-id="63239-103">Key Vault helyreállítható törlés funkció lehetővé teszi, hogy a törölt tárolók és a tároló objektumok soft-törlés néven ismert.</span><span class="sxs-lookup"><span data-stu-id="63239-103">Key Vault's soft delete feature allows recovery of the deleted vaults and vault objects, known as soft-delete.</span></span> <span data-ttu-id="63239-104">Pontosabban oldjuk az alábbi esetekben:</span><span class="sxs-lookup"><span data-stu-id="63239-104">Specifically, we address the following scenarios:</span></span>

- <span data-ttu-id="63239-105">Helyreállítható törlésre kerültek a kulcstároló támogatása</span><span class="sxs-lookup"><span data-stu-id="63239-105">Support for recoverable deletion of a key vault</span></span>
- <span data-ttu-id="63239-106">Támogatási helyreállítható törlésre kulcstároló-objektumok (például)</span><span class="sxs-lookup"><span data-stu-id="63239-106">Support for recoverable deletion of key vault objects (ex.</span></span> <span data-ttu-id="63239-107">kulcsok, a titkos kulcsokat, a tanúsítványok)</span><span class="sxs-lookup"><span data-stu-id="63239-107">keys, secrets, certificates)</span></span>

## <a name="supporting-interfaces"></a><span data-ttu-id="63239-108">Kapcsolatok támogatása</span><span class="sxs-lookup"><span data-stu-id="63239-108">Supporting interfaces</span></span>

<span data-ttu-id="63239-109">A soft-törlés funkció kezdetben érhető el a többi, .NET útján / C# és PowerShell-felületek.</span><span class="sxs-lookup"><span data-stu-id="63239-109">The soft-delete feature is initially available through the REST, .NET/C# and PowerShell interfaces.</span></span> <span data-ttu-id="63239-110">Ezeket a további részletekért tekintse meg a hivatkozások [Key Vault hivatkozás](https://docs.microsoft.com/azure/key-vault/).</span><span class="sxs-lookup"><span data-stu-id="63239-110">Refer to the references for these for more details, [Key Vault Reference](https://docs.microsoft.com/azure/key-vault/).</span></span>

## <a name="scenarios"></a><span data-ttu-id="63239-111">Forgatókönyvek</span><span class="sxs-lookup"><span data-stu-id="63239-111">Scenarios</span></span>

<span data-ttu-id="63239-112">Az Azure Key tárolók nyomon követett, Azure Resource Manager által kezelt erőforrások.</span><span class="sxs-lookup"><span data-stu-id="63239-112">Azure Key Vaults are tracked resources, managed by Azure Resource Manager.</span></span> <span data-ttu-id="63239-113">Az Azure Resource Manager is törlésre, amely megköveteli, hogy egy sikeres törlési művelet eredménye nem érhető el többé erőforrás jól meghatározott tulajdonság határozza meg.</span><span class="sxs-lookup"><span data-stu-id="63239-113">Azure Resource Manager also specifies a well-defined behavior for deletion, which requires that a successful DELETE operation must result in that resource not being accessible anymore.</span></span> <span data-ttu-id="63239-114">A soft-törlés funkció a törölt objektumok helyreállítási megoldást, hogy a törlés véletlen vagy szándékos volt.</span><span class="sxs-lookup"><span data-stu-id="63239-114">The soft-delete feature addresses the recovery of the deleted object, whether the deletion was accidental or intentional.</span></span>

1. <span data-ttu-id="63239-115">Az a jellemző forgatókönyv a felhasználó véletlenül törölték a kulcstároló vagy kulcstároló objektum; Ha, amely kulcs tárolóhoz vagy a kulcs tároló objektum egy előre meghatározott ideig állíthatók el, a felhasználó előfordulhat, hogy a Törlés visszavonása, és az adatok helyreállítása.</span><span class="sxs-lookup"><span data-stu-id="63239-115">In the typical scenario, a user may have inadvertently deleted a key vault or a key vault object; if that key vault or key vault object were to be recoverable for a predetermined period, the user may undo the deletion and recover their data.</span></span>

2. <span data-ttu-id="63239-116">Más esetben egy rosszindulatú felhasználó megkísérli kulcstároló vagy kulcstároló-objektum, például egy tárolót, egy üzleti problémákat okozhat belül kulcs törlése.</span><span class="sxs-lookup"><span data-stu-id="63239-116">In a different scenario, a rogue user may attempt to delete a key vault or a key vault object, such as a key inside a vault, to cause a business disruption.</span></span> <span data-ttu-id="63239-117">A Törlés a kulcstartót vagy kulcstároló objektum mappától a tényleges adatok törlését is használhatók, biztonsági intézkedésként például Adattörlés egy másik, a jogosultságok korlátozása révén megbízható szerepkört.</span><span class="sxs-lookup"><span data-stu-id="63239-117">Separating the deletion of the key vault or key vault object from the actual deletion of the underlying data can be used as a safety measure by, for instance, restricting permissions on data deletion to a different, trusted role.</span></span> <span data-ttu-id="63239-118">Ez a megközelítés hatékonyan igényel kvórum egy műveletet, amelyek egyébként egy azonnali adatvesztés.</span><span class="sxs-lookup"><span data-stu-id="63239-118">This approach effectively requires quorum for an operation which might otherwise result in an immediate data loss.</span></span>

### <a name="soft-delete-behavior"></a><span data-ttu-id="63239-119">Helyreállítható törlési viselkedés</span><span class="sxs-lookup"><span data-stu-id="63239-119">Soft-delete behavior</span></span>

<span data-ttu-id="63239-120">Ezzel a funkcióval a törlési művelet kulcstároló vagy kulcstároló objektum a soft-törlés, az erőforrások hatékony tartó egy adott megőrzési időszak alatt a megjelenítési módja, hogy az objektum törlése közben.</span><span class="sxs-lookup"><span data-stu-id="63239-120">With this feature, the DELETE operation on a key vault or key vault object is a soft-delete, effectively holding the resources for a given retention period, while giving the appearance that the object is deleted.</span></span> <span data-ttu-id="63239-121">A szolgáltatás további lehetővé teszi a helyreállítás lényegében a törlésének visszavonása a törölt objektum.</span><span class="sxs-lookup"><span data-stu-id="63239-121">The service further provides a mechanism for recovering the deleted object, essentially undoing the deletion.</span></span> 

<span data-ttu-id="63239-122">Soft-törlés választható Key Vault viselkedése és **alapértelmezés szerint nincs engedélyezve** ebben a kiadásban.</span><span class="sxs-lookup"><span data-stu-id="63239-122">Soft-delete is an optional Key Vault behavior and is **not enabled by default** in this release.</span></span> <span data-ttu-id="63239-123">További információ a soft-törlésének a kulcstartót engedélyezése: a konkrét útmutatást a hivatkozás a kapcsolat a kiválasztott [Key Vault hivatkozás](https://docs.microsoft.com/azure/key-vault/).</span><span class="sxs-lookup"><span data-stu-id="63239-123">For details on enabling soft-delete for your key vault, see the specific guidance in the reference for the interface of your choice, [Key Vault Reference](https://docs.microsoft.com/azure/key-vault/).</span></span>

### <a name="key-vault-recovery"></a><span data-ttu-id="63239-124">Kulcstároló-helyreállítás</span><span class="sxs-lookup"><span data-stu-id="63239-124">Key vault recovery</span></span>

<span data-ttu-id="63239-125">Kulcstároló törlése, akkor a szolgáltatás hoz létre, az előfizetésben, a helyreállítás megfelelő metaadatok hozzáadása a proxy erőforrás.</span><span class="sxs-lookup"><span data-stu-id="63239-125">Upon deleting a key vault, the service creates a proxy resource under the subscription, adding sufficient metadata for recovery.</span></span> <span data-ttu-id="63239-126">A proxy erőforrás tárolt objektumot, és a törölt-tárolónak ugyanazon a helyen rendelkezésre áll.</span><span class="sxs-lookup"><span data-stu-id="63239-126">The proxy resource is a stored object, available in the same location as the deleted key vault.</span></span> 

### <a name="key-vault-object-recovery"></a><span data-ttu-id="63239-127">Kulcstároló objektum-helyreállítást</span><span class="sxs-lookup"><span data-stu-id="63239-127">Key vault object recovery</span></span>

<span data-ttu-id="63239-128">Egy kulcstartót objektumot, például a kulcs törlése után a szolgáltatás helyezi el a következő objektum törölt állapotban, így teszi elérhetetlenné a bármely adatbeolvasási műveletekkel.</span><span class="sxs-lookup"><span data-stu-id="63239-128">Upon deleting a key vault object, such as a key, the service will place the object in a deleted state, thus making it inaccessible to any retrieval operations.</span></span> <span data-ttu-id="63239-129">Ebben az állapotban lévő a kulcstartót objektum is csak akkor jelenik meg, helyreállított vagy kényszerített módon/véglegesen törlődik.</span><span class="sxs-lookup"><span data-stu-id="63239-129">While in this state, the key vault object can only be listed, recovered, or forcefully/permanently deleted.</span></span> 

<span data-ttu-id="63239-130">Egy időben a Key Vault a törölt kulcstároló vagy kulcstároló objektum egy előre meghatározott megőrzési időtartam után végrehajtásra megfelelő adatok törlését művelet ütemezi.</span><span class="sxs-lookup"><span data-stu-id="63239-130">At the same time, Key Vault will schedule the deletion of the underlying data corresponding to the deleted key vault or key vault object for execution after a predetermined retention interval.</span></span> <span data-ttu-id="63239-131">A DNS-rekord, a tároló megfelelő is megőrzi a megőrzési időtartama.</span><span class="sxs-lookup"><span data-stu-id="63239-131">The DNS record corresponding to the vault is also retained for the duration of the retention interval.</span></span>

### <a name="soft-delete-retention-period"></a><span data-ttu-id="63239-132">Soft-törlése a megőrzési időtartam</span><span class="sxs-lookup"><span data-stu-id="63239-132">Soft-delete retention period</span></span>

<span data-ttu-id="63239-133">Letölthető törölt erőforrásokat a beállított időn belül, 90 nap jelennek meg.</span><span class="sxs-lookup"><span data-stu-id="63239-133">Soft deleted resources are retained for a set period of time, 90 days.</span></span> <span data-ttu-id="63239-134">A soft-törlés megőrzési időszakban a következő apply:</span><span class="sxs-lookup"><span data-stu-id="63239-134">During the soft-delete retention interval, the following apply:</span></span>

- <span data-ttu-id="63239-135">Előfordulhat, hogy lista összes kulcstárolójának és kulcstároló objektumok a soft-törlés állapotú a előfizetés, valamint a rájuk vonatkozó törlése és a helyreállítási adatok eléréséhez.</span><span class="sxs-lookup"><span data-stu-id="63239-135">You may list all of the key vaults and key vault objects in the soft-delete state for your subscription as well as access deletion and recovery information about them.</span></span>
    - <span data-ttu-id="63239-136">Csak különleges engedélyekkel rendelkező felhasználók is listázhatja törölve tárolók.</span><span class="sxs-lookup"><span data-stu-id="63239-136">Only users with special permissions can list deleted vaults.</span></span> <span data-ttu-id="63239-137">Azt javasoljuk, hogy a felhasználók egyéni szerepkör létrehozása kezelési törölt tárolók ezek különleges engedélyekkel.</span><span class="sxs-lookup"><span data-stu-id="63239-137">We recommend that our users create a custom role with these special permissions for handling deleted vaults.</span></span>
- <span data-ttu-id="63239-138">Kulcstároló ugyanazzal a névvel nem hozható létre ugyanazon a helyen; Ennek megfelelően a kulcstároló objektum nem hozható létre egy adott tárolóban Ha adott kulcstároló tartalmaz egy objektumot az azonos nevű, és amely törölt állapotban van.</span><span class="sxs-lookup"><span data-stu-id="63239-138">A key vault with the same name cannot be created in the same location; correspondingly, a key vault object cannot be created in a given vault if that key vault contains an object with the same name and which is in a deleted state</span></span> 
- <span data-ttu-id="63239-139">Csak a kifejezetten kiemelt felhasználó kulcstároló vagy kulcstároló objektum lehet, hogy visszaállítása a helyreállítás parancsot a megfelelő proxy erőforráson.</span><span class="sxs-lookup"><span data-stu-id="63239-139">Only a specifically privileged user may restore a key vault or key vault object by issuing a recover command on the corresponding proxy resource.</span></span>
    - <span data-ttu-id="63239-140">Az egyéni szerepkör tagja, a jogosultsággal az erőforráscsoportba tartozó kulcstároló létrehozása a felhasználó visszaállíthatja a tárolóban.</span><span class="sxs-lookup"><span data-stu-id="63239-140">The user, member of the custom role, who has the privilege to create a key vault under the resource group can restore the vault.</span></span>
- <span data-ttu-id="63239-141">Csak a kifejezetten jogosultsággal rendelkező felhasználó lehet, hogy kényszerített kulcstároló vagy kulcstároló objektum törlése a Törlés parancsot a a megfelelő proxy erőforráson.</span><span class="sxs-lookup"><span data-stu-id="63239-141">Only a specifically privileged user may forcibly delete a key vault or key vault object by issuing a delete command on the corresponding proxy resource.</span></span>

<span data-ttu-id="63239-142">Kivéve, ha egy kulcstartót vagy kulcstároló objektum helyre lett állítva, a megőrzési időszak végén a szolgáltatás a kiürítést végző a helyreállíthatóan törölt kulcstároló vagy a kulcstároló objektum és a benne lévő tartalom.</span><span class="sxs-lookup"><span data-stu-id="63239-142">Unless a key vault or key vault object is recovered, at the end of the retention interval the service performs a purge of the soft-deleted key vault or key vault object and its content.</span></span> <span data-ttu-id="63239-143">Erőforrás törlése nem lehetséges, hogy újraütemezte.</span><span class="sxs-lookup"><span data-stu-id="63239-143">Resource deletion may not be rescheduled.</span></span>

### <a name="permitted-purge"></a><span data-ttu-id="63239-144">Engedélyezett kiürítése</span><span class="sxs-lookup"><span data-stu-id="63239-144">Permitted purge</span></span>

<span data-ttu-id="63239-145">Véglegesen törli kiürítése, kulcstároló alkalmazáson keresztül a POST műveletet az erőforrás-proxy, amely különleges jogosultságokra van szüksége.</span><span class="sxs-lookup"><span data-stu-id="63239-145">Permanently deleting, purging, a key vault is possible via a POST operation on the proxy resource and requires special privileges.</span></span> <span data-ttu-id="63239-146">Általában csak az előfizetés tulajdonosa fog tudni kulcstároló törlése.</span><span class="sxs-lookup"><span data-stu-id="63239-146">Generally, only the subscription owner will be able to purge a key vault.</span></span> <span data-ttu-id="63239-147">A POST műveletet váltja ki, hogy a tároló azonnali és helyreállíthatatlan törlését.</span><span class="sxs-lookup"><span data-stu-id="63239-147">The POST operation triggers the immediate and irrecoverable deletion of that vault.</span></span> 

<span data-ttu-id="63239-148">Kivétel ez alól a helyzet, amikor az Azure-előfizetés jelölésű *undeletable*.</span><span class="sxs-lookup"><span data-stu-id="63239-148">An exception to this is the case when the Azure subscription has been marked as *undeletable*.</span></span> <span data-ttu-id="63239-149">Csak a szolgáltatás ebben az esetben előfordulhat, hogy végezze el a tényleges törlés, és így tesz, ütemezett folyamatként.</span><span class="sxs-lookup"><span data-stu-id="63239-149">In this case, only the service may then perform the actual deletion, and does so as a scheduled process.</span></span> 



