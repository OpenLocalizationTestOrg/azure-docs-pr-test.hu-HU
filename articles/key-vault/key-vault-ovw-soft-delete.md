---
ms.assetid: 
title: "aaaAzure Key Vault helyreállítható törlésre |} Microsoft Docs"
ms.service: key-vault
author: BrucePerlerMS
ms.author: bruceper
manager: mbaldwin
ms.date: 07/10/2017
ms.openlocfilehash: 1b402c58db6f25ae4ae5e2720786fa81eb0e839a
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/06/2017
---
# <a name="azure-key-vault-soft-delete-overview"></a><span data-ttu-id="1caac-102">Az Azure Key Vault soft-törlés áttekintése</span><span class="sxs-lookup"><span data-stu-id="1caac-102">Azure Key Vault soft-delete overview</span></span>

<span data-ttu-id="1caac-103">Key Vault helyreállítható törlés funkcióval törölt hello tárolók és a tároló objektumok soft-törlés néven ismert.</span><span class="sxs-lookup"><span data-stu-id="1caac-103">Key Vault's soft delete feature allows recovery of hello deleted vaults and vault objects, known as soft-delete.</span></span> <span data-ttu-id="1caac-104">Pontosabban a következő forgatókönyvek hello oldjuk:</span><span class="sxs-lookup"><span data-stu-id="1caac-104">Specifically, we address hello following scenarios:</span></span>

- <span data-ttu-id="1caac-105">Helyreállítható törlésre kerültek a kulcstároló támogatása</span><span class="sxs-lookup"><span data-stu-id="1caac-105">Support for recoverable deletion of a key vault</span></span>
- <span data-ttu-id="1caac-106">Támogatási helyreállítható törlésre kulcstároló-objektumok (például)</span><span class="sxs-lookup"><span data-stu-id="1caac-106">Support for recoverable deletion of key vault objects (ex.</span></span> <span data-ttu-id="1caac-107">kulcsok, a titkos kulcsokat, a tanúsítványok)</span><span class="sxs-lookup"><span data-stu-id="1caac-107">keys, secrets, certificates)</span></span>

## <a name="supporting-interfaces"></a><span data-ttu-id="1caac-108">Kapcsolatok támogatása</span><span class="sxs-lookup"><span data-stu-id="1caac-108">Supporting interfaces</span></span>

<span data-ttu-id="1caac-109">hello soft-törlés funkció érhető el eredetileg keresztül hello REST, .NET / C# és PowerShell-felületek.</span><span class="sxs-lookup"><span data-stu-id="1caac-109">hello soft-delete feature is initially available through hello REST, .NET/C# and PowerShell interfaces.</span></span> <span data-ttu-id="1caac-110">Ezeket a további részletekért tekintse meg a toohello hivatkozások [Key Vault hivatkozás](https://docs.microsoft.com/azure/key-vault/).</span><span class="sxs-lookup"><span data-stu-id="1caac-110">Refer toohello references for these for more details, [Key Vault Reference](https://docs.microsoft.com/azure/key-vault/).</span></span>

## <a name="scenarios"></a><span data-ttu-id="1caac-111">Forgatókönyvek</span><span class="sxs-lookup"><span data-stu-id="1caac-111">Scenarios</span></span>

<span data-ttu-id="1caac-112">Az Azure Key tárolók nyomon követett, Azure Resource Manager által kezelt erőforrások.</span><span class="sxs-lookup"><span data-stu-id="1caac-112">Azure Key Vaults are tracked resources, managed by Azure Resource Manager.</span></span> <span data-ttu-id="1caac-113">Az Azure Resource Manager is törlésre, amely megköveteli, hogy egy sikeres törlési művelet eredménye nem érhető el többé erőforrás jól meghatározott tulajdonság határozza meg.</span><span class="sxs-lookup"><span data-stu-id="1caac-113">Azure Resource Manager also specifies a well-defined behavior for deletion, which requires that a successful DELETE operation must result in that resource not being accessible anymore.</span></span> <span data-ttu-id="1caac-114">hello soft-törlés funkció címek hello helyreállítási hello törölt objektum, hogy hello törlés véletlen vagy szándékos volt.</span><span class="sxs-lookup"><span data-stu-id="1caac-114">hello soft-delete feature addresses hello recovery of hello deleted object, whether hello deletion was accidental or intentional.</span></span>

1. <span data-ttu-id="1caac-115">Hello szokásos esetben a felhasználó véletlenül törölték a kulcstároló vagy kulcstároló objektum; Ha adott kulcstároló vagy kulcsot használó objektum toobe helyreállítható volt előre meghatározott időtartamra, hello felhasználói hello visszavonni, és az adatok helyreállítását.</span><span class="sxs-lookup"><span data-stu-id="1caac-115">In hello typical scenario, a user may have inadvertently deleted a key vault or a key vault object; if that key vault or key vault object were toobe recoverable for a predetermined period, hello user may undo hello deletion and recover their data.</span></span>

2. <span data-ttu-id="1caac-116">Más esetben egy rosszindulatú felhasználó megkísérelhet toodelete kulcstároló vagy kulcstároló-objektum, például egy kulcsot a tároló, a business szüneteltetése toocause belül.</span><span class="sxs-lookup"><span data-stu-id="1caac-116">In a different scenario, a rogue user may attempt toodelete a key vault or a key vault object, such as a key inside a vault, toocause a business disruption.</span></span> <span data-ttu-id="1caac-117">Hello törlése, hello Kulcstároló Kulcstároló objektum mappától hello tényleges hello alapjául szolgáló adatok törlését is használhatók, biztonsági intézkedésként például adatok törlését tooa különböző, a jogosultságok korlátozása révén megbízható szerepkört.</span><span class="sxs-lookup"><span data-stu-id="1caac-117">Separating hello deletion of hello key vault or key vault object from hello actual deletion of hello underlying data can be used as a safety measure by, for instance, restricting permissions on data deletion tooa different, trusted role.</span></span> <span data-ttu-id="1caac-118">Ez a megközelítés hatékonyan igényel kvórum egy műveletet, amelyek egyébként egy azonnali adatvesztés.</span><span class="sxs-lookup"><span data-stu-id="1caac-118">This approach effectively requires quorum for an operation which might otherwise result in an immediate data loss.</span></span>

### <a name="soft-delete-behavior"></a><span data-ttu-id="1caac-119">Helyreállítható törlési viselkedés</span><span class="sxs-lookup"><span data-stu-id="1caac-119">Soft-delete behavior</span></span>

<span data-ttu-id="1caac-120">Ezzel a funkcióval kulcstároló a törlési művelet hello vagy kulcstároló objektum soft-törlési, hatékonyan tartó hello erőforrásokhoz egy adott megőrzési időszak jogosultságot ad a hello megjelenését hello objektum törlése közben.</span><span class="sxs-lookup"><span data-stu-id="1caac-120">With this feature, hello DELETE operation on a key vault or key vault object is a soft-delete, effectively holding hello resources for a given retention period, while giving hello appearance that hello object is deleted.</span></span> <span data-ttu-id="1caac-121">További hello szolgáltatás lehetővé teszi a helyreállítás hello törölt objektum, tulajdonképpen a hello törlés visszavonása.</span><span class="sxs-lookup"><span data-stu-id="1caac-121">hello service further provides a mechanism for recovering hello deleted object, essentially undoing hello deletion.</span></span> 

<span data-ttu-id="1caac-122">Soft-törlés választható Key Vault viselkedése és **alapértelmezés szerint nincs engedélyezve** ebben a kiadásban.</span><span class="sxs-lookup"><span data-stu-id="1caac-122">Soft-delete is an optional Key Vault behavior and is **not enabled by default** in this release.</span></span> <span data-ttu-id="1caac-123">További információ a key vaultban, soft-törlésének engedélyezése: hello konkrét útmutatást hello útmutatóban hello interfész az Ön által választott [Key Vault hivatkozás](https://docs.microsoft.com/azure/key-vault/).</span><span class="sxs-lookup"><span data-stu-id="1caac-123">For details on enabling soft-delete for your key vault, see hello specific guidance in hello reference for hello interface of your choice, [Key Vault Reference](https://docs.microsoft.com/azure/key-vault/).</span></span>

### <a name="key-vault-recovery"></a><span data-ttu-id="1caac-124">Kulcstároló-helyreállítás</span><span class="sxs-lookup"><span data-stu-id="1caac-124">Key vault recovery</span></span>

<span data-ttu-id="1caac-125">Hello szolgáltatást kulcstároló törlése, akkor hoz létre a hello előfizetésben, a helyreállítás megfelelő metaadatok hozzáadása a proxy erőforrás.</span><span class="sxs-lookup"><span data-stu-id="1caac-125">Upon deleting a key vault, hello service creates a proxy resource under hello subscription, adding sufficient metadata for recovery.</span></span> <span data-ttu-id="1caac-126">hello proxy erőforrás elérhető hello tárolt objektum törölt hello kulcs tárolóval megegyező helyen.</span><span class="sxs-lookup"><span data-stu-id="1caac-126">hello proxy resource is a stored object, available in hello same location as hello deleted key vault.</span></span> 

### <a name="key-vault-object-recovery"></a><span data-ttu-id="1caac-127">Kulcstároló objektum-helyreállítást</span><span class="sxs-lookup"><span data-stu-id="1caac-127">Key vault object recovery</span></span>

<span data-ttu-id="1caac-128">A kulcstároló objektumot, például a kulcs törlése után hello szolgáltatás helyezi el a következő hello objektum törölt állapotban, így azt nem érhető el tooany adatbeolvasási műveletekkel.</span><span class="sxs-lookup"><span data-stu-id="1caac-128">Upon deleting a key vault object, such as a key, hello service will place hello object in a deleted state, thus making it inaccessible tooany retrieval operations.</span></span> <span data-ttu-id="1caac-129">Ebben az állapotban lévő hello kulcstároló objektum is csak akkor jelenik meg, helyreállított vagy kényszerített módon/véglegesen törlődik.</span><span class="sxs-lookup"><span data-stu-id="1caac-129">While in this state, hello key vault object can only be listed, recovered, or forcefully/permanently deleted.</span></span> 

<span data-ttu-id="1caac-130">Hello: azonos idő, a kulcs tároló beütemezett alapjául szolgáló adatok megfelelő toohello törölt hello hello törlésének kulcstároló vagy kulcstároló objektum egy előre meghatározott megőrzési időtartam után végrehajtásra.</span><span class="sxs-lookup"><span data-stu-id="1caac-130">At hello same time, Key Vault will schedule hello deletion of hello underlying data corresponding toohello deleted key vault or key vault object for execution after a predetermined retention interval.</span></span> <span data-ttu-id="1caac-131">hello DNS rekord megfelelő toohello tárolót is megmarad hello adatmegőrzési időköz hello időtartama.</span><span class="sxs-lookup"><span data-stu-id="1caac-131">hello DNS record corresponding toohello vault is also retained for hello duration of hello retention interval.</span></span>

### <a name="soft-delete-retention-period"></a><span data-ttu-id="1caac-132">Soft-törlése a megőrzési időtartam</span><span class="sxs-lookup"><span data-stu-id="1caac-132">Soft-delete retention period</span></span>

<span data-ttu-id="1caac-133">Letölthető törölt erőforrásokat a beállított időn belül, 90 nap jelennek meg.</span><span class="sxs-lookup"><span data-stu-id="1caac-133">Soft deleted resources are retained for a set period of time, 90 days.</span></span> <span data-ttu-id="1caac-134">Során hello soft-törlés megőrzési idejét, a következő apply hello:</span><span class="sxs-lookup"><span data-stu-id="1caac-134">During hello soft-delete retention interval, hello following apply:</span></span>

- <span data-ttu-id="1caac-135">Előfordulhat, hogy listában összes hello kulcstárolójának és kulcstároló objektumok hello soft-törlés állapotú a előfizetés, valamint a rájuk vonatkozó törlése és a helyreállítási adatok eléréséhez.</span><span class="sxs-lookup"><span data-stu-id="1caac-135">You may list all of hello key vaults and key vault objects in hello soft-delete state for your subscription as well as access deletion and recovery information about them.</span></span>
    - <span data-ttu-id="1caac-136">Csak különleges engedélyekkel rendelkező felhasználók is listázhatja törölve tárolók.</span><span class="sxs-lookup"><span data-stu-id="1caac-136">Only users with special permissions can list deleted vaults.</span></span> <span data-ttu-id="1caac-137">Azt javasoljuk, hogy a felhasználók egyéni szerepkör létrehozása kezelési törölt tárolók ezek különleges engedélyekkel.</span><span class="sxs-lookup"><span data-stu-id="1caac-137">We recommend that our users create a custom role with these special permissions for handling deleted vaults.</span></span>
- <span data-ttu-id="1caac-138">A kulcstároló ugyanazzal a névvel nem hozható létre hello hello ugyanazon a helyen; Ennek megfelelően egy kulcstároló objektum nem hozható létre egy adott tárolóban, ha adott kulcstároló hello objektum tartalmazza ugyanazt a nevet, és amely törölt állapotban van.</span><span class="sxs-lookup"><span data-stu-id="1caac-138">A key vault with hello same name cannot be created in hello same location; correspondingly, a key vault object cannot be created in a given vault if that key vault contains an object with hello same name and which is in a deleted state</span></span> 
- <span data-ttu-id="1caac-139">Csak a kifejezetten kiemelt felhasználó kulcstároló vagy kulcstároló objektum lehet, hogy visszaállítása a helyreállítás parancsot a hello megfelelő proxy erőforráson.</span><span class="sxs-lookup"><span data-stu-id="1caac-139">Only a specifically privileged user may restore a key vault or key vault object by issuing a recover command on hello corresponding proxy resource.</span></span>
    - <span data-ttu-id="1caac-140">hello felhasználói hello egyéni biztonsági szerepkört, hello jogosultság toocreate hello erőforráscsoportba tartozó kulcstároló, aki tagja hello tároló visszaállításához.</span><span class="sxs-lookup"><span data-stu-id="1caac-140">hello user, member of hello custom role, who has hello privilege toocreate a key vault under hello resource group can restore hello vault.</span></span>
- <span data-ttu-id="1caac-141">Csak a kifejezetten jogosultsággal rendelkező felhasználó lehet, hogy kényszerített kulcstároló vagy kulcstároló objektum törlése a Törlés parancsot a hello megfelelő proxy erőforráson.</span><span class="sxs-lookup"><span data-stu-id="1caac-141">Only a specifically privileged user may forcibly delete a key vault or key vault object by issuing a delete command on hello corresponding proxy resource.</span></span>

<span data-ttu-id="1caac-142">Kivéve, ha egy kulcstartót vagy kulcstároló objektum helyre lett állítva, hello: hello adatmegőrzési időköz hello szolgáltatás végét a kiürítést végző helyreállíthatóan törölt hello kulcstároló vagy a kulcstároló objektum és a benne lévő tartalom.</span><span class="sxs-lookup"><span data-stu-id="1caac-142">Unless a key vault or key vault object is recovered, at hello end of hello retention interval hello service performs a purge of hello soft-deleted key vault or key vault object and its content.</span></span> <span data-ttu-id="1caac-143">Erőforrás törlése nem lehetséges, hogy újraütemezte.</span><span class="sxs-lookup"><span data-stu-id="1caac-143">Resource deletion may not be rescheduled.</span></span>

### <a name="permitted-purge"></a><span data-ttu-id="1caac-144">Engedélyezett kiürítése</span><span class="sxs-lookup"><span data-stu-id="1caac-144">Permitted purge</span></span>

<span data-ttu-id="1caac-145">Végleg törlése végleges törlése, kulcstároló alkalmazáson keresztül a POST műveletet hello proxy erőforráson, amely speciális jogosultságra van szükség.</span><span class="sxs-lookup"><span data-stu-id="1caac-145">Permanently deleting, purging, a key vault is possible via a POST operation on hello proxy resource and requires special privileges.</span></span> <span data-ttu-id="1caac-146">Általában csak a hello előfizetés tulajdonosa lesz képes toopurge kulcstároló.</span><span class="sxs-lookup"><span data-stu-id="1caac-146">Generally, only hello subscription owner will be able toopurge a key vault.</span></span> <span data-ttu-id="1caac-147">hello POST művelet eseményindítók hello azonnali és helyreállíthatatlan, hogy a tároló törlése.</span><span class="sxs-lookup"><span data-stu-id="1caac-147">hello POST operation triggers hello immediate and irrecoverable deletion of that vault.</span></span> 

<span data-ttu-id="1caac-148">Egy kivétel toothis helyzet hello olyankor, amikor hello Azure-előfizetés van megjelölve *undeletable*.</span><span class="sxs-lookup"><span data-stu-id="1caac-148">An exception toothis is hello case when hello Azure subscription has been marked as *undeletable*.</span></span> <span data-ttu-id="1caac-149">Ebben az esetben csak hello szolgáltatást majd végezhet hello tényleges törlésre, és így tesz, ütemezett folyamatként.</span><span class="sxs-lookup"><span data-stu-id="1caac-149">In this case, only hello service may then perform hello actual deletion, and does so as a scheduled process.</span></span> 



