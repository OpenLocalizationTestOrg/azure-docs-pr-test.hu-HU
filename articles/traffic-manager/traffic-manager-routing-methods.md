---
title: "a Traffic Manager - aaaAzure forgalom-útválasztási módszerei |} Microsoft Docs"
description: "Ez a cikk, valamit megismerheti hello különböző forgalom-útválasztási módszerekkel Traffic Manager által használt"
services: traffic-manager
documentationcenter: 
author: KumudD
manager: timlt
editor: 
ms.assetid: db1efbf6-6762-4c7a-ac99-675d4eeb54d0
ms.service: traffic-manager
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 07/13/2017
ms.author: kumud
ms.openlocfilehash: b3eeca63ab5f2b9cd4a3a6b6a8fd3e40059e32b5
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/06/2017
---
# <a name="traffic-manager-routing-methods"></a><span data-ttu-id="d35e1-103">Traffic Manager útválasztási módszerek</span><span class="sxs-lookup"><span data-stu-id="d35e1-103">Traffic Manager routing methods</span></span>

<span data-ttu-id="d35e1-104">Az Azure Traffic Manager által támogatott négy forgalom-útválasztási módszert toodetermine hogyan tooroute hálózati forgalom toohello különböző végpontok.</span><span class="sxs-lookup"><span data-stu-id="d35e1-104">Azure Traffic Manager supports four traffic-routing methods toodetermine how tooroute network traffic toohello various service endpoints.</span></span> <span data-ttu-id="d35e1-105">A TRAFFIC Manager hello forgalom-útválasztási módszer tooeach DNS-lekérdezést kap vonatkozik.</span><span class="sxs-lookup"><span data-stu-id="d35e1-105">Traffic Manager applies hello traffic-routing method tooeach DNS query it receives.</span></span> <span data-ttu-id="d35e1-106">hello forgalom-útválasztási módszer határozza meg, melyik végponthoz visszaadott hello DNS-válaszban.</span><span class="sxs-lookup"><span data-stu-id="d35e1-106">hello traffic-routing method determines which endpoint returned in hello DNS response.</span></span>

<span data-ttu-id="d35e1-107">Nincsenek elérhető a Traffic Manager négy forgalom-útválasztási módszerekkel:</span><span class="sxs-lookup"><span data-stu-id="d35e1-107">There are four traffic routing methods available in Traffic Manager:</span></span>

* <span data-ttu-id="d35e1-108">**[Prioritás](#priority):** válasszon **prioritás** amikor elsődleges szolgáltatásvégpont toouse szeretné, hogy minden forgalom, és adja meg a biztonsági mentések hello elsődleges vagy a biztonsági mentési hello végpontok esetén nem érhető el.</span><span class="sxs-lookup"><span data-stu-id="d35e1-108">**[Priority](#priority):** Select **Priority** when you want toouse a primary service endpoint for all traffic, and provide backups in case hello primary or hello backup endpoints are unavailable.</span></span>
* <span data-ttu-id="d35e1-109">**[Weighted](#weighted):** válasszon **Weighted** kívánt toodistribute forgalmat olyan készlete, végpontok közötti vagy egyenletesen vagy függően tooweights, amelyet kell megadni.</span><span class="sxs-lookup"><span data-stu-id="d35e1-109">**[Weighted](#weighted):** Select **Weighted** when you want toodistribute traffic across a set of endpoints, either evenly or according tooweights, which you define.</span></span>
* <span data-ttu-id="d35e1-110">**[Teljesítmény](#performance):** válasszon **teljesítmény** Ha végpontok különböző földrajzi helyeken található rendelkezik, és azt szeretné, hogy a végfelhasználók toouse hello "legközelebbi" végpont hello legkisebb hálózati késést tekintetében.</span><span class="sxs-lookup"><span data-stu-id="d35e1-110">**[Performance](#performance):** Select **Performance** when you have endpoints in different geographic locations and you want end users toouse hello "closest" endpoint in terms of hello lowest network latency.</span></span>
* <span data-ttu-id="d35e1-111">**[Földrajzi](#geographic):** válasszon **földrajzi** , hogy a felhasználók olyan irányított toospecific végpontok (Azure, külső vagy beágyazott), mely földrajzi helye alapján, a DNS-lekérdezés származik.</span><span class="sxs-lookup"><span data-stu-id="d35e1-111">**[Geographic](#geographic):** Select **Geographic** so that users are directed toospecific endpoints (Azure, External, or Nested) based on which geographic location their DNS query originates from.</span></span> <span data-ttu-id="d35e1-112">Ez lehetővé teszi a Traffic Manager ügyfelek tooenable forgatókönyvekben, ahol a felhasználó földrajzi régióban ismerete, és azokat, amelyek alapján útválasztási fontos.</span><span class="sxs-lookup"><span data-stu-id="d35e1-112">This empowers Traffic Manager customers tooenable scenarios where knowing a user’s geographic region and routing them based on that is important.</span></span> <span data-ttu-id="d35e1-113">Például megfelel az adatok közös joghatóság alá megbízás honosítási tartalom & felhasználói felület és a különböző régiókban érkező forgalmat méri.</span><span class="sxs-lookup"><span data-stu-id="d35e1-113">Examples include complying with data sovereignty mandates, localization of content & user experience and measuring traffic from different regions.</span></span>

<span data-ttu-id="d35e1-114">Traffic Manager-profilokat tartalmazza, végpont állapotát és automatikus végpont feladatátvételi figyelését.</span><span class="sxs-lookup"><span data-stu-id="d35e1-114">All Traffic Manager profiles include monitoring of endpoint health and automatic endpoint failover.</span></span> <span data-ttu-id="d35e1-115">További információkért lásd: [Traffic Manager-végpont figyelés](traffic-manager-monitoring.md).</span><span class="sxs-lookup"><span data-stu-id="d35e1-115">For more information, see [Traffic Manager Endpoint Monitoring](traffic-manager-monitoring.md).</span></span> <span data-ttu-id="d35e1-116">Egyetlen Traffic Manager-profil csak egyetlen forgalom-útválasztási módszert használhatja.</span><span class="sxs-lookup"><span data-stu-id="d35e1-116">A single Traffic Manager profile can use only one traffic routing method.</span></span> <span data-ttu-id="d35e1-117">A profil bármikor választhat egy másik forgalom-útválasztási módszert.</span><span class="sxs-lookup"><span data-stu-id="d35e1-117">You can select a different traffic routing method for your profile at any time.</span></span> <span data-ttu-id="d35e1-118">A módosításai érvényesek lesznek egy percen belül, és az állásidő nélkül van szükség.</span><span class="sxs-lookup"><span data-stu-id="d35e1-118">Changes are applied within one minute, and no downtime is incurred.</span></span> <span data-ttu-id="d35e1-119">Forgalom-útválasztási módszer kombinálható is beágyazott Traffic Manager-profilok használatával.</span><span class="sxs-lookup"><span data-stu-id="d35e1-119">Traffic-routing methods can be combined by using nested Traffic Manager profiles.</span></span> <span data-ttu-id="d35e1-120">A beágyazási lehetővé teszi, hogy a kifinomult és rugalmas forgalom-útválasztási konfigurációk, amely nagyobb, összetett alkalmazások hello igényeinek.</span><span class="sxs-lookup"><span data-stu-id="d35e1-120">Nesting enables sophisticated and flexible traffic-routing configurations that meet hello needs of larger, complex applications.</span></span> <span data-ttu-id="d35e1-121">További információkért lásd: [Traffic Manager-profilok beágyazott](traffic-manager-nested-profiles.md).</span><span class="sxs-lookup"><span data-stu-id="d35e1-121">For more information, see [nested Traffic Manager profiles](traffic-manager-nested-profiles.md).</span></span>

## <span data-ttu-id="d35e1-122"><a name = "priority"></a>Prioritás forgalom-útválasztási módszer</span><span class="sxs-lookup"><span data-stu-id="d35e1-122"><a name = "priority"></a>Priority traffic-routing method</span></span>

<span data-ttu-id="d35e1-123">Gyakran egy szervezet szeretne tooprovide megbízhatóság a hozzá tartozó szolgáltatások telepítésével egy vagy több biztonsági mentési szolgáltatást, abban az esetben, ha az elsődleges szolgáltatás leáll.</span><span class="sxs-lookup"><span data-stu-id="d35e1-123">Often an organization wants tooprovide reliability for its services by deploying one or more backup services in case their primary service goes down.</span></span> <span data-ttu-id="d35e1-124">hello "Priority" forgalom-útválasztási módszer lehetővé teszi, hogy az Azure ügyfelek tooeasily valósítja meg a feladatátvételi mintát.</span><span class="sxs-lookup"><span data-stu-id="d35e1-124">hello 'Priority' traffic-routing method allows Azure customers tooeasily implement this failover pattern.</span></span>

![Az Azure Traffic Manager "Priority" forgalom-útválasztási módszer][1]

<span data-ttu-id="d35e1-126">Traffic Manager-profil hello Szolgáltatásvégpontok rangsorolt listáját tartalmazza.</span><span class="sxs-lookup"><span data-stu-id="d35e1-126">hello Traffic Manager profile contains a prioritized list of service endpoints.</span></span> <span data-ttu-id="d35e1-127">Alapértelmezés szerint a Traffic Manager küld minden forgalom toohello elsődleges (legnagyobb prioritás) végpont.</span><span class="sxs-lookup"><span data-stu-id="d35e1-127">By default, Traffic Manager sends all traffic toohello primary (highest-priority) endpoint.</span></span> <span data-ttu-id="d35e1-128">Hello elsődleges végpont nem érhető el, ha a Traffic Manager útvonalak hello forgalom toohello második végpontnak.</span><span class="sxs-lookup"><span data-stu-id="d35e1-128">If hello primary endpoint is not available, Traffic Manager routes hello traffic toohello second endpoint.</span></span> <span data-ttu-id="d35e1-129">Ha mindkét hello elsődleges és másodlagos végpont nem érhetők el, a hello forgalom halad toohello, harmadik, és így tovább.</span><span class="sxs-lookup"><span data-stu-id="d35e1-129">If both hello primary and secondary endpoints are not available, hello traffic goes toohello third, and so on.</span></span> <span data-ttu-id="d35e1-130">Hello végpont rendelkezésre állását konfigurált hello állapota (engedélyezett vagy tiltott) azon alapul, és folyamatban lévő végpontmonitoring kijelző hello.</span><span class="sxs-lookup"><span data-stu-id="d35e1-130">Availability of hello endpoint is based on hello configured status (enabled or disabled) and hello ongoing endpoint monitoring.</span></span>

### <a name="configuring-endpoints"></a><span data-ttu-id="d35e1-131">Végpontok konfigurálása</span><span class="sxs-lookup"><span data-stu-id="d35e1-131">Configuring endpoints</span></span>

<span data-ttu-id="d35e1-132">Az Azure Resource Manager konfigurálása hello végpontprioritás explicit módon tulajdonsággal hello "priority" végpontok.</span><span class="sxs-lookup"><span data-stu-id="d35e1-132">With Azure Resource Manager, you configure hello endpoint priority explicitly using hello 'priority' property for each endpoint.</span></span> <span data-ttu-id="d35e1-133">Ez a tulajdonság értéke 1 és 1000 között.</span><span class="sxs-lookup"><span data-stu-id="d35e1-133">This property is a value between 1 and 1000.</span></span> <span data-ttu-id="d35e1-134">Alacsonyabb értékeket egy nagyobb prioritást jelölnek.</span><span class="sxs-lookup"><span data-stu-id="d35e1-134">Lower values represent a higher priority.</span></span> <span data-ttu-id="d35e1-135">Nem lehetnek közös prioritási értékek.</span><span class="sxs-lookup"><span data-stu-id="d35e1-135">Endpoints cannot share priority values.</span></span> <span data-ttu-id="d35e1-136">Hello tulajdonság beállítása nem kötelező megadni.</span><span class="sxs-lookup"><span data-stu-id="d35e1-136">Setting hello property is optional.</span></span> <span data-ttu-id="d35e1-137">Ha nincs megadva, alapértelmezett prioritást hello végpont sorrendnek használja.</span><span class="sxs-lookup"><span data-stu-id="d35e1-137">When omitted, a default priority based on hello endpoint order is used.</span></span>

##<span data-ttu-id="d35e1-138"><a name = "weighted"></a>Súlyozott forgalom-útválasztási módszer</span><span class="sxs-lookup"><span data-stu-id="d35e1-138"><a name = "weighted"></a>Weighted traffic-routing method</span></span>
<span data-ttu-id="d35e1-139">hello "Weighted" forgalom-útválasztási módszer lehetővé teszi toodistribute forgalom egyenletesen vagy toouse egy előre meghatározott értékek súlyozását.</span><span class="sxs-lookup"><span data-stu-id="d35e1-139">hello 'Weighted' traffic-routing method allows you toodistribute traffic evenly or toouse a pre-defined weighting.</span></span>

![Az Azure Traffic Manager az "Súlyozott" forgalom-útválasztási módszer][2]

<span data-ttu-id="d35e1-141">Hello súlyozott forgalom-útválasztási módszert rendeljen hozzá egy súly tooeach végpont hello Traffic Manager-profil konfiguráció.</span><span class="sxs-lookup"><span data-stu-id="d35e1-141">In hello Weighted traffic-routing method, you assign a weight tooeach endpoint in hello Traffic Manager profile configuration.</span></span> <span data-ttu-id="d35e1-142">hello súlya 1 too1000 hónapjával.</span><span class="sxs-lookup"><span data-stu-id="d35e1-142">hello weight is an integer from 1 too1000.</span></span> <span data-ttu-id="d35e1-143">Ez a paraméter nem kötelező megadni.</span><span class="sxs-lookup"><span data-stu-id="d35e1-143">This parameter is optional.</span></span> <span data-ttu-id="d35e1-144">Ha nincs megadva, a forgalom kezelők "1" alapértelmezett súlyt használja.</span><span class="sxs-lookup"><span data-stu-id="d35e1-144">If omitted, Traffic Managers uses a default weight of '1'.</span></span>

<span data-ttu-id="d35e1-145">Minden egyes megadott DNS-lekérdezés érkezett Traffic Manager véletlenszerűen választ egy elérhető végpontot.</span><span class="sxs-lookup"><span data-stu-id="d35e1-145">For each DNS query received, Traffic Manager randomly chooses an available endpoint.</span></span> <span data-ttu-id="d35e1-146">hello valószínűség kiválasztása a végpont tooall számára elérhető végpontok hozzárendelt hello súlyok alapul.</span><span class="sxs-lookup"><span data-stu-id="d35e1-146">hello probability of choosing an endpoint is based on hello weights assigned tooall available endpoints.</span></span> <span data-ttu-id="d35e1-147">Azonos súlyozási hello segítségével is forgalomeloszlás eredményez az összes végpontok között.</span><span class="sxs-lookup"><span data-stu-id="d35e1-147">Using hello same weight across all endpoints results in an even traffic distribution.</span></span> <span data-ttu-id="d35e1-148">A meghatározott végpontokhoz magasabb vagy alacsonyabb súlyok használatával hatására az adott vissza ritkább vagy gyakoribb hello DNS-válaszok végpontok toobe.</span><span class="sxs-lookup"><span data-stu-id="d35e1-148">Using higher or lower weights on specific endpoints causes those endpoints toobe returned more or less frequently in hello DNS responses.</span></span>

<span data-ttu-id="d35e1-149">súlyozott hello módszer lehetővé teszi, hogy néhány hasznos forgatókönyv:</span><span class="sxs-lookup"><span data-stu-id="d35e1-149">hello weighted method enables some useful scenarios:</span></span>

* <span data-ttu-id="d35e1-150">Az alkalmazásfrissítés fokozatos: forgalom tooroute tooa új végpont százalékát, és fokozatosan hello forgalmat is növekszik adott idő too100 %.</span><span class="sxs-lookup"><span data-stu-id="d35e1-150">Gradual application upgrade: Allocate a percentage of traffic tooroute tooa new endpoint, and gradually increase hello traffic over time too100%.</span></span>
* <span data-ttu-id="d35e1-151">Alkalmazás áttelepítési tooAzure:-profil létrehozása az Azure és a külső végpontok száma.</span><span class="sxs-lookup"><span data-stu-id="d35e1-151">Application migration tooAzure: Create a profile with both Azure and external endpoints.</span></span> <span data-ttu-id="d35e1-152">Beállíthatja a hello végpontok tooprefer hello új végpontok hello súlyt.</span><span class="sxs-lookup"><span data-stu-id="d35e1-152">Adjust hello weight of hello endpoints tooprefer hello new endpoints.</span></span>
* <span data-ttu-id="d35e1-153">Felhőalapú Teljesítménynövelés a további kapacitás-érdekében: gyorsan bontsa ki a Traffic Manager-profil mögött helyezésével egy helyi központi hello felhőbe.</span><span class="sxs-lookup"><span data-stu-id="d35e1-153">Cloud-bursting for additional capacity: Quickly expand an on-premises deployment into hello cloud by putting it behind a Traffic Manager profile.</span></span> <span data-ttu-id="d35e1-154">Ha hello felhő plusz kapacitást, hozzáadása vagy további végpontok engedélyezése, és adja meg, milyen forgalom részét tooeach végpont kerül.</span><span class="sxs-lookup"><span data-stu-id="d35e1-154">When you need extra capacity in hello cloud, you can add or enable more endpoints and specify what portion of traffic goes tooeach endpoint.</span></span>

<span data-ttu-id="d35e1-155">hello Azure Resource Manager portal hello konfigurálása súlyozott a forgalom útválasztásához támogatja.</span><span class="sxs-lookup"><span data-stu-id="d35e1-155">hello Resource Manager Azure portal supports hello configuration of weighted traffic routing.</span></span>  <span data-ttu-id="d35e1-156">Konfigurálhatja az Azure PowerShell, a parancssori felület és a REST API-k hello hello erőforrás-kezelő verzióival súlyt.</span><span class="sxs-lookup"><span data-stu-id="d35e1-156">You can configure weights using hello Resource Manager versions of Azure PowerShell, CLI, and hello REST APIs.</span></span>

<span data-ttu-id="d35e1-157">Fontos fontos toounderstand, hogy a DNS-válaszok gyorsítótárba kerüljenek-e az ügyfelek által, és hello rekurzív DNS-kiszolgálók, ügyfelek hello tooresolve DNS-neveket használja.</span><span class="sxs-lookup"><span data-stu-id="d35e1-157">It is important toounderstand that DNS responses are cached by clients and by hello recursive DNS servers that hello clients use tooresolve DNS names.</span></span> <span data-ttu-id="d35e1-158">A gyorsítótárazás súlyozott forgalom terjesztéseket hatással lehetnek.</span><span class="sxs-lookup"><span data-stu-id="d35e1-158">This caching can have an impact on weighted traffic distributions.</span></span> <span data-ttu-id="d35e1-159">Ha az ügyfelek és a rekurzív DNS-kiszolgálók hello száma túl nagy, forgalomeloszlás megfelelően működik-e.</span><span class="sxs-lookup"><span data-stu-id="d35e1-159">When hello number of clients and recursive DNS servers is large, traffic distribution works as expected.</span></span> <span data-ttu-id="d35e1-160">Azonban ha hello ügyfelek vagy a rekurzív DNS-kiszolgálók száma alacsony, gyorsítótárazás is jelentősen eltolódhat hello forgalomeloszlás.</span><span class="sxs-lookup"><span data-stu-id="d35e1-160">However, when hello number of clients or recursive DNS servers is small, caching can significantly skew hello traffic distribution.</span></span>

<span data-ttu-id="d35e1-161">Gyakori használati esetek a következők:</span><span class="sxs-lookup"><span data-stu-id="d35e1-161">Common use cases include:</span></span>

* <span data-ttu-id="d35e1-162">Fejlesztési és tesztelési környezetek</span><span class="sxs-lookup"><span data-stu-id="d35e1-162">Development and testing environments</span></span>
* <span data-ttu-id="d35e1-163">Alkalmazások kommunikáció</span><span class="sxs-lookup"><span data-stu-id="d35e1-163">Application-to-application communications</span></span>
* <span data-ttu-id="d35e1-164">Alkalmazások célzó egy keskeny felhasználói-talál, amelyek egy közös rekurzív DNS-infrastruktúra (például egy proxyn keresztül történő kapcsolódás vállalati alkalmazottak)</span><span class="sxs-lookup"><span data-stu-id="d35e1-164">Applications aimed at a narrow user-base that share a common recursive DNS infrastructure (for example, employees of company connecting through a proxy)</span></span>

<span data-ttu-id="d35e1-165">A DNS-gyorsítótár hatások azok közös tooall DNS-alapú forgalom útválasztási rendszerek, nem csak az Azure Traffic Manager.</span><span class="sxs-lookup"><span data-stu-id="d35e1-165">These DNS caching effects are common tooall DNS-based traffic routing systems, not just Azure Traffic Manager.</span></span> <span data-ttu-id="d35e1-166">Néhány esetben explicit módon a DNS-gyorsítótár hello törlésével által biztosított megoldás.</span><span class="sxs-lookup"><span data-stu-id="d35e1-166">In some cases, explicitly clearing hello DNS cache may provide a workaround.</span></span> <span data-ttu-id="d35e1-167">Más esetekben alternatív forgalom-útválasztási módszert lehet több.</span><span class="sxs-lookup"><span data-stu-id="d35e1-167">In other cases, an alternative traffic-routing method may be more appropriate.</span></span>

## <span data-ttu-id="d35e1-168"><a name = "performance"></a>Teljesítmény forgalom-útválasztási módszer</span><span class="sxs-lookup"><span data-stu-id="d35e1-168"><a name = "performance"></a>Performance traffic-routing method</span></span>

<span data-ttu-id="d35e1-169">Üzembe helyezése a végpontok két vagy több helyen teljes hello földgömb javíthatja a forgalom toohello útválasztási helytől, amely "legközelebbi" tooyou sok alkalmazások válaszképességének hello.</span><span class="sxs-lookup"><span data-stu-id="d35e1-169">Deploying endpoints in two or more locations across hello globe can improve hello responsiveness of many applications by routing traffic toohello location that is 'closest' tooyou.</span></span> <span data-ttu-id="d35e1-170">hello "Teljesítmény" forgalom-útválasztási módszer biztosítja ezt a lehetőséget.</span><span class="sxs-lookup"><span data-stu-id="d35e1-170">hello 'Performance' traffic-routing method provides this capability.</span></span>

![Az Azure Traffic Manager "Teljesítmény" forgalom-útválasztási módszer][3]

<span data-ttu-id="d35e1-172">hello "legközelebbi" végpont nincs feltétlenül legközelebbi földrajzi távolság mérve.</span><span class="sxs-lookup"><span data-stu-id="d35e1-172">hello 'closest' endpoint is not necessarily closest as measured by geographic distance.</span></span> <span data-ttu-id="d35e1-173">Ehelyett hello "Teljesítmény" forgalom-útválasztási módszer hálózati késés mérésével hello legközelebbi végpont határozza meg.</span><span class="sxs-lookup"><span data-stu-id="d35e1-173">Instead, hello 'Performance' traffic-routing method determines hello closest endpoint by measuring network latency.</span></span> <span data-ttu-id="d35e1-174">A TRAFFIC Manager fenntartja az Internet késés tábla tootrack hello körbejárási között eltelt idő IP-címtartományok és minden Azure-adatközpontban.</span><span class="sxs-lookup"><span data-stu-id="d35e1-174">Traffic Manager maintains an Internet Latency Table tootrack hello round-trip time between IP address ranges and each Azure datacenter.</span></span>

<span data-ttu-id="d35e1-175">A TRAFFIC Manager hello bejövő DNS-kérelem a hello Internet késés tábla hello forrás IP-címét keresi.</span><span class="sxs-lookup"><span data-stu-id="d35e1-175">Traffic Manager looks up hello source IP address of hello incoming DNS request in hello Internet Latency Table.</span></span> <span data-ttu-id="d35e1-176">A TRAFFIC Manager úgy dönt, elérhető a végpont a hello Azure-adatközpontban, amely a legkisebb mértékű késleltetést hello az adott IP-címtartomány, akkor az adott végpontra hello DNS-választ ad vissza.</span><span class="sxs-lookup"><span data-stu-id="d35e1-176">Traffic Manager chooses an available endpoint in hello Azure datacenter that has hello lowest latency for that IP address range, then returns that endpoint in hello DNS response.</span></span>

<span data-ttu-id="d35e1-177">A [Traffic Manager működése](traffic-manager-overview.md#how-traffic-manager-works), a Traffic Manager nem kapja meg DNS-lekérdezések közvetlenül az ügyfelektől.</span><span class="sxs-lookup"><span data-stu-id="d35e1-177">As explained in [How Traffic Manager Works](traffic-manager-overview.md#how-traffic-manager-works), Traffic Manager does not receive DNS queries directly from clients.</span></span> <span data-ttu-id="d35e1-178">Ahelyett, hogy DNS-lekérdezések határozza meg, hogy hello az ügyfelek kapcsolódnak-e a konfigurált toouse hello rekurzív DNS-szolgáltatás.</span><span class="sxs-lookup"><span data-stu-id="d35e1-178">Rather, DNS queries come from hello recursive DNS service that hello clients are configured toouse.</span></span> <span data-ttu-id="d35e1-179">Ezért hello IP-cím toodetermine hello "legközelebbi" végponton nincs hello ügyfél IP-címet, de hello IP-cím hello rekurzív DNS-szolgáltatás.</span><span class="sxs-lookup"><span data-stu-id="d35e1-179">Therefore, hello IP address used toodetermine hello 'closest' endpoint is not hello client's IP address, but it is hello IP address of hello recursive DNS service.</span></span> <span data-ttu-id="d35e1-180">A gyakorlatban az IP-cím helyes proxyjaként való hello ügyfél.</span><span class="sxs-lookup"><span data-stu-id="d35e1-180">In practice, this IP address is a good proxy for hello client.</span></span>


<span data-ttu-id="d35e1-181">A TRAFFIC Manager rendszeresen frissítéseket hello Internet késés tábla tooaccount a változásokat a globális internetes és az új Azure-régiók hello.</span><span class="sxs-lookup"><span data-stu-id="d35e1-181">Traffic Manager regularly updates hello Internet Latency Table tooaccount for changes in hello global Internet and new Azure regions.</span></span> <span data-ttu-id="d35e1-182">Azonban az alkalmazások teljesítményének függ a valós idejű változások a terhelési hello interneten keresztül.</span><span class="sxs-lookup"><span data-stu-id="d35e1-182">However, application performance varies based on real-time variations in load across hello Internet.</span></span> <span data-ttu-id="d35e1-183">Teljesítmény forgalom-útválasztás nem figyeli egy adott szolgáltatás végpontjának terhelése.</span><span class="sxs-lookup"><span data-stu-id="d35e1-183">Performance traffic-routing does not monitor load on a given service endpoint.</span></span> <span data-ttu-id="d35e1-184">Azonban a végpont nem érhető el, ha a Traffic Manager foglalja a DNS-válaszokban.</span><span class="sxs-lookup"><span data-stu-id="d35e1-184">However, if an endpoint becomes unavailable, Traffic Manager does not include it in DNS query responses.</span></span>


<span data-ttu-id="d35e1-185">Pontok toonote:</span><span class="sxs-lookup"><span data-stu-id="d35e1-185">Points toonote:</span></span>

* <span data-ttu-id="d35e1-186">Ha a profilban található több végpontok hello azonos Azure-régiót, majd a Traffic Manager elosztása forgalom egyenletesen hello számára elérhető végpontok az adott régióban.</span><span class="sxs-lookup"><span data-stu-id="d35e1-186">If your profile contains multiple endpoints in hello same Azure region, then Traffic Manager distributes traffic evenly across hello available endpoints in that region.</span></span> <span data-ttu-id="d35e1-187">Régión belül egy másik forgalomeloszlás tetszés szerint használhatja [Traffic Manager-profilok beágyazott](traffic-manager-nested-profiles.md).</span><span class="sxs-lookup"><span data-stu-id="d35e1-187">If you prefer a different traffic distribution within a region, you can use [nested Traffic Manager profiles](traffic-manager-nested-profiles.md).</span></span>
* <span data-ttu-id="d35e1-188">Ha minden beállítás engedélyezett legközelebbi hello végpontok Azure-régiót csökkent, a Traffic Manager forgalom toohello végpontok helyez hello következő legközelebbi Azure-régiót.</span><span class="sxs-lookup"><span data-stu-id="d35e1-188">If all enabled endpoints in hello closest Azure region are degraded, Traffic Manager moves traffic toohello endpoints in hello next closest Azure region.</span></span> <span data-ttu-id="d35e1-189">Ha azt szeretné, hogy egy előnyben részesített feladatátvételi feladatütemezési toodefine, [Traffic Manager-profilok beágyazott](traffic-manager-nested-profiles.md).</span><span class="sxs-lookup"><span data-stu-id="d35e1-189">If you want toodefine a preferred failover sequence, use [nested Traffic Manager profiles](traffic-manager-nested-profiles.md).</span></span>
* <span data-ttu-id="d35e1-190">Külső végpontok száma vagy beágyazott végpontok hello teljesítmény forgalom-útválasztási módszert használ, amikor szüksége ezekre a végpontokra toospecify hello helyét.</span><span class="sxs-lookup"><span data-stu-id="d35e1-190">When using hello Performance traffic routing method with external endpoints or nested endpoints, you need toospecify hello location of those endpoints.</span></span> <span data-ttu-id="d35e1-191">Válassza ki a hello Azure-régiót legközelebbi tooyour központi telepítés.</span><span class="sxs-lookup"><span data-stu-id="d35e1-191">Choose hello Azure region closest tooyour deployment.</span></span> <span data-ttu-id="d35e1-192">Azokon a helyeken értékeket hello hello Internet késés tábla által támogatott.</span><span class="sxs-lookup"><span data-stu-id="d35e1-192">Those locations are hello values supported by hello Internet Latency Table.</span></span>
* <span data-ttu-id="d35e1-193">hello algoritmus, amely kiválasztja hello végpont determinisztikus.</span><span class="sxs-lookup"><span data-stu-id="d35e1-193">hello algorithm that chooses hello endpoint is deterministic.</span></span> <span data-ttu-id="d35e1-194">Ismétlődik a DNS-lekérdezéseket a hello ugyanazt az ügyfelet vannak irányítva toohello azonos végpont.</span><span class="sxs-lookup"><span data-stu-id="d35e1-194">Repeated DNS queries from hello same client are directed toohello same endpoint.</span></span> <span data-ttu-id="d35e1-195">Általában a ügyfelek különböző rekurzív DNS-kiszolgálók használata utazás közben.</span><span class="sxs-lookup"><span data-stu-id="d35e1-195">Typically, clients use different recursive DNS servers when traveling.</span></span> <span data-ttu-id="d35e1-196">hello ügyfél irányított tooa másik végpont lehet.</span><span class="sxs-lookup"><span data-stu-id="d35e1-196">hello client may be routed tooa different endpoint.</span></span> <span data-ttu-id="d35e1-197">Útválasztás is is által igényelt frissítések toohello Internet késés tábla.</span><span class="sxs-lookup"><span data-stu-id="d35e1-197">Routing can also be affected by updates toohello Internet Latency Table.</span></span> <span data-ttu-id="d35e1-198">Ezért a forgalom-útválasztási módszer nem garantálható, hogy egy ügyfél mindig teljesítmény hello irányított toohello azonos végpont.</span><span class="sxs-lookup"><span data-stu-id="d35e1-198">Therefore, hello Performance traffic-routing method does not guarantee that a client is always routed toohello same endpoint.</span></span>
* <span data-ttu-id="d35e1-199">Hello Internet késés tábla megváltozásakor Észreveheti, hogy az egyes ügyfelek legyenek irányított tooa másik végpont.</span><span class="sxs-lookup"><span data-stu-id="d35e1-199">When hello Internet Latency Table changes, you may notice that some clients are directed tooa different endpoint.</span></span> <span data-ttu-id="d35e1-200">Az útválasztási módosítása pontosabb aktuális késési adatok alapján.</span><span class="sxs-lookup"><span data-stu-id="d35e1-200">This routing change is more accurate based on current latency data.</span></span> <span data-ttu-id="d35e1-201">Ezek a frissítések alapvető toomaintain hello pontosságát teljesítmény forgalom-útválasztási hello Internet folyamatosan fejlődik, mint.</span><span class="sxs-lookup"><span data-stu-id="d35e1-201">These updates are essential toomaintain hello accuracy of Performance traffic-routing as hello Internet continually evolves.</span></span>

## <span data-ttu-id="d35e1-202"><a name = "geographic"></a>Földrajzi forgalom-útválasztási módszer</span><span class="sxs-lookup"><span data-stu-id="d35e1-202"><a name = "geographic"></a>Geographic traffic-routing method</span></span>

<span data-ttu-id="d35e1-203">Traffic Manager-profilokat lehet konfigurált toouse hello útválasztási módszerrel, hogy a felhasználók a rendszer átirányítja a mely földrajzi helye alapján toospecific végpontok (Azure, külső vagy beágyazott) a DNS-lekérdezés Geographic származik.</span><span class="sxs-lookup"><span data-stu-id="d35e1-203">Traffic Manager profiles can be configured toouse hello Geographic routing method so that users are directed toospecific endpoints (Azure, External or Nested) based on which geographic location their DNS query originates from.</span></span> <span data-ttu-id="d35e1-204">Ez lehetővé teszi a Traffic Manager ügyfelek tooenable forgatókönyvekben, ahol a felhasználó földrajzi régióban ismerete, és azokat, amelyek alapján útválasztási fontos.</span><span class="sxs-lookup"><span data-stu-id="d35e1-204">This empowers Traffic Manager customers tooenable scenarios where knowing a user’s geographic region and routing them based on that is important.</span></span> <span data-ttu-id="d35e1-205">Például megfelel az adatok közös joghatóság alá megbízás honosítási tartalom & felhasználói felület és a különböző régiókban érkező forgalmat méri.</span><span class="sxs-lookup"><span data-stu-id="d35e1-205">Examples include complying with data sovereignty mandates, localization of content & user experience and measuring traffic from different regions.</span></span>
<span data-ttu-id="d35e1-206">Ha egy profil földrajzi útválasztásra van konfigurálva, mindegyik végpont társított, hogy a profil rendelt földrajzi régiókhoz tooit készlete toohave kell.</span><span class="sxs-lookup"><span data-stu-id="d35e1-206">When a profile is configured for geographic routing, each endpoint associated with that profile needs toohave a set of geographic regions assigned tooit.</span></span> <span data-ttu-id="d35e1-207">A földrajzi régió következő részletességi szinteken is lehet.</span><span class="sxs-lookup"><span data-stu-id="d35e1-207">A geographic region can be at following levels of granularity</span></span> 
- <span data-ttu-id="d35e1-208">A globális – bármely régió</span><span class="sxs-lookup"><span data-stu-id="d35e1-208">World– any region</span></span>
- <span data-ttu-id="d35e1-209">Regionális csoportosítás – például Afrika Közel-Kelet, Ausztrália/csendes-óceáni stb.</span><span class="sxs-lookup"><span data-stu-id="d35e1-209">Regional Grouping – for example, Africa, Middle East, Australia/Pacific etc.</span></span> 
- <span data-ttu-id="d35e1-210">Ország vagy régió – például Írországban Perui, Hongkong, KKT stb.</span><span class="sxs-lookup"><span data-stu-id="d35e1-210">Country/Region – for example, Ireland, Peru, Hong Kong SAR etc.</span></span> 
- <span data-ttu-id="d35e1-211">Az állam/megye – például az USA-kaliforniai, Ausztrália-Queensland, Kanada-Alberta stb. (Megjegyzés: a részletesség szintje csak állapotok támogatott / tartományok Ausztrália, Kanada, UK és USA).</span><span class="sxs-lookup"><span data-stu-id="d35e1-211">State/Province – for example, USA-California, Australia-Queensland, Canada-Alberta etc. (note: this granularity level is supported only for states / provinces in Australia, Canada, UK, and USA).</span></span>

<span data-ttu-id="d35e1-212">A régió vagy egy régiók tooan végpont van hozzárendelve, adott helyre érkező kérelmeket irányított csak toothat végpont kap.</span><span class="sxs-lookup"><span data-stu-id="d35e1-212">When a region or a set of regions is assigned tooan endpoint, any requests from those regions gets routed only toothat endpoint.</span></span> <span data-ttu-id="d35e1-213">A TRAFFIC Manager IP-forráscím hello hello DNS lekérdezés toodetermine hello régió, amelyből a kérdezi le, a felhasználó – általában ez a hello hello lekérdezés hello felhasználó nevében módon helyi DNS-feloldási hello IP-címét használja.</span><span class="sxs-lookup"><span data-stu-id="d35e1-213">Traffic Manager uses hello source IP address of hello DNS query toodetermine hello region from which a user is querying from – usually this is hello IP address of hello local DNS resolver doing hello query on behalf of hello user.</span></span>  

![Az Azure Traffic Manager az "Földrajzi" forgalom-útválasztási módszer](./media/traffic-manager-routing-methods/geographic.png)

<span data-ttu-id="d35e1-215">A TRAFFIC Manager hello forrás IP-címe hello DNS-lekérdezés olvas, és úgy dönt, mely földrajzi régióban származó van.</span><span class="sxs-lookup"><span data-stu-id="d35e1-215">Traffic Manager reads hello source IP address of hello DNS query and decides which geographic region it is originating from.</span></span> <span data-ttu-id="d35e1-216">Ha van olyan végponttal, amely a földrajzi régióban leképezve tooit rendelkezik majd jelek toosee.</span><span class="sxs-lookup"><span data-stu-id="d35e1-216">It then looks toosee if there is an endpoint that has this geographic region mapped tooit.</span></span> <span data-ttu-id="d35e1-217">Ez a keresés hello legalacsonyabb szintű részletesség (az állam/megye ahol akkor támogatott, ellenkező esetben hello ország vagy régió szinten) elindul és toohello legmagasabb szinttel, amely minden hello módon kerül **globális**.</span><span class="sxs-lookup"><span data-stu-id="d35e1-217">This lookup starts at hello lowest granularity level (State/Province where it is supported, else at hello Country/Region level) and goes all hello way up toohello highest level, which is **World**.</span></span> <span data-ttu-id="d35e1-218">hello első egyezés hello végpont tooreturn hello lekérdezés válaszként a átjárás használatával van kijelölve.</span><span class="sxs-lookup"><span data-stu-id="d35e1-218">hello first match found using this traversal is designated as hello endpoint tooreturn in hello query response.</span></span> <span data-ttu-id="d35e1-219">Ha egy beágyazott típus végponttal, a gyermek-profilon belül a végpont megfelelő adja vissza, az útválasztási módszer alapján.</span><span class="sxs-lookup"><span data-stu-id="d35e1-219">When matching with a Nested type endpoint, an endpoint within that child profile is returned, based on its routing method.</span></span> <span data-ttu-id="d35e1-220">a következő pontok hello alkalmazható toothis viselkedés:</span><span class="sxs-lookup"><span data-stu-id="d35e1-220">hello following points are applicable toothis behavior:</span></span>

- <span data-ttu-id="d35e1-221">A földrajzi régió lehet csatlakoztatott csak tooone végpont a Traffic Manager-profil földrajzi útválasztási hello útválasztási típus esetén.</span><span class="sxs-lookup"><span data-stu-id="d35e1-221">A geographic region can be mapped only tooone endpoint in a Traffic Manager profile when hello routing type is Geographic Routing.</span></span> <span data-ttu-id="d35e1-222">Ez biztosítja, hogy a felhasználók útválasztási determinisztikus, és ügyfelek forgatókönyv esetén van szükség a egyértelműen földrajzi határok használatával engedélyezheti.</span><span class="sxs-lookup"><span data-stu-id="d35e1-222">This ensures that routing of users is deterministic, and customers can enable scenarios that require unambiguous geographic boundaries.</span></span>
- <span data-ttu-id="d35e1-223">Ha egy felhasználó régió két különböző végpontokhoz földrajzi leképezés, a Traffic Manager hello végpont kiválasztása hello legalacsonyabb lépésköz, és nem veszi figyelembe, hogy régió toohello útválasztási kérelmeinek másik végpontot.</span><span class="sxs-lookup"><span data-stu-id="d35e1-223">If a user’s region comes under two different endpoints’ geographic mapping, Traffic Manager selects hello endpoint with hello lowest granularity and does not consider routing requests from that region toohello other endpoint.</span></span> <span data-ttu-id="d35e1-224">Vegye figyelembe például két végpont - Endpoint1 és Endpoint2 földrajzi útválasztási típus egy profilt.</span><span class="sxs-lookup"><span data-stu-id="d35e1-224">For example, consider a Geographic Routing type profile with two endpoints - Endpoint1 and Endpoint2.</span></span> <span data-ttu-id="d35e1-225">Endpoint1 van konfigurálva Írországban és Endpoint2 tooreceive forgalmát van konfigurálva Európa tooreceive forgalmát.</span><span class="sxs-lookup"><span data-stu-id="d35e1-225">Endpoint1 is configured tooreceive traffic from Ireland and Endpoint2 is configured tooreceive traffic from Europe.</span></span> <span data-ttu-id="d35e1-226">A kérelem Írországban származik, esetén mindig irányított tooEndpoint1.</span><span class="sxs-lookup"><span data-stu-id="d35e1-226">If a request originates from Ireland, it is always routed tooEndpoint1.</span></span>
- <span data-ttu-id="d35e1-227">Egy csatlakoztatott csak tooone végpont lehet, mert a Traffic Manager visszaadja függetlenül attól, hogy hello végpont kifogástalan-e.</span><span class="sxs-lookup"><span data-stu-id="d35e1-227">Since a region can be mapped only tooone endpoint, Traffic Manager returns it regardless of whether hello endpoint is healthy or not.</span></span>

    >[!IMPORTANT]
    ><span data-ttu-id="d35e1-228">Erősen ajánlott, hogy az ügyfelek hello földrajzi útválasztási módszerrel társíthatja hello beágyazott típus végpontok belül legalább két végpontot tartalmazó gyermek profillal.</span><span class="sxs-lookup"><span data-stu-id="d35e1-228">It is strongly recommended that customers using hello geographic routing method associate it with hello Nested type endpoints that has child profiles containing at least two endpoints within each.</span></span>
- <span data-ttu-id="d35e1-229">Ha egy végpont egyezést talál, és adott végpontra a hello **leállítva** állapotba kerül, a Traffic Manager NODATA választ ad.</span><span class="sxs-lookup"><span data-stu-id="d35e1-229">If an endpoint match is found and that endpoint is in hello **Stopped** state, Traffic Manager returns a NODATA response.</span></span> <span data-ttu-id="d35e1-230">Ebben az esetben nincs további keresések legyen feljebb hello földrajzi régióban hierarchiában.</span><span class="sxs-lookup"><span data-stu-id="d35e1-230">In this case, no further lookups is made higher up in hello geographic region hierarchy.</span></span> <span data-ttu-id="d35e1-231">Ez a viselkedés akkor is beágyazott végpont esetében alkalmazható, ha hello gyermek profil van hello **leállítva** vagy **letiltott** állapotát.</span><span class="sxs-lookup"><span data-stu-id="d35e1-231">This behavior is also applicable for nested endpoint types when hello child profile is in hello **Stopped** or **Disabled** state.</span></span>
- <span data-ttu-id="d35e1-232">Ha egy olyan végpont jelenít meg egy **letiltott** állapota, nem fog szerepelni folyamat megfelelő hello régióban.</span><span class="sxs-lookup"><span data-stu-id="d35e1-232">If an endpoint displays a **Disabled** status, it won’t be included in hello region matching process.</span></span> <span data-ttu-id="d35e1-233">Ez a viselkedés akkor is beágyazott végpont esetében alkalmazható, ha hello végpont van hello **letiltott** állapotát.</span><span class="sxs-lookup"><span data-stu-id="d35e1-233">This behavior is also applicable for nested endpoint types when hello endpoint is in hello **Disabled** state.</span></span>
- <span data-ttu-id="d35e1-234">Ha egy lekérdezést a földrajzi régió, amely nem rendelkezik az adott profilhoz érkezik, a Traffic Manager NODATA választ ad.</span><span class="sxs-lookup"><span data-stu-id="d35e1-234">If a query is coming from a geographic region that has no mapping in that profile, Traffic Manager returns a NODATA response.</span></span> <span data-ttu-id="d35e1-235">Ezért erősen ajánlott, hogy az ügyfelek használja-e a földrajzi útválasztási egy végponttal, ideális típusú beágyazott hello gyermek-profilt, hello régió belül legalább két végpontot **globális** tooit rendelve.</span><span class="sxs-lookup"><span data-stu-id="d35e1-235">Therefore, it is strongly recommended that customers use geographic routing with one endpoint, ideally of type Nested with at least two endpoints within hello child profile, with hello region **World** assigned tooit.</span></span> <span data-ttu-id="d35e1-236">Ez biztosítja azt is, hogy bármilyen IP-címek, amelyek nem felelnek meg a tooa régió kezeli.</span><span class="sxs-lookup"><span data-stu-id="d35e1-236">This also ensures that any IP addresses that do not map tooa region are handled.</span></span>

<span data-ttu-id="d35e1-237">A [Traffic Manager működése](traffic-manager-how-traffic-manager-works.md), a Traffic Manager nem kapja meg DNS-lekérdezések közvetlenül az ügyfelektől.</span><span class="sxs-lookup"><span data-stu-id="d35e1-237">As explained in [How Traffic Manager Works](traffic-manager-how-traffic-manager-works.md), Traffic Manager does not receive DNS queries directly from clients.</span></span> <span data-ttu-id="d35e1-238">Ahelyett, hogy DNS-lekérdezések határozza meg, hogy hello az ügyfelek kapcsolódnak-e a konfigurált toouse hello rekurzív DNS-szolgáltatás.</span><span class="sxs-lookup"><span data-stu-id="d35e1-238">Rather, DNS queries come from hello recursive DNS service that hello clients are configured toouse.</span></span> <span data-ttu-id="d35e1-239">Hello IP cím használt toodetermine hello terület ezért nem hello ügyfél IP-címet, de hello IP-cím hello rekurzív DNS-szolgáltatás.</span><span class="sxs-lookup"><span data-stu-id="d35e1-239">Therefore, hello IP address used toodetermine hello region is not hello client's IP address, but it is hello IP address of hello recursive DNS service.</span></span> <span data-ttu-id="d35e1-240">A gyakorlatban az IP-cím helyes proxyjaként való hello ügyfél.</span><span class="sxs-lookup"><span data-stu-id="d35e1-240">In practice, this IP address is a good proxy for hello client.</span></span>


## <a name="next-steps"></a><span data-ttu-id="d35e1-241">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="d35e1-241">Next steps</span></span>

<span data-ttu-id="d35e1-242">Megtudhatja, hogyan toodevelop magas rendelkezésre állású alkalmazások [Traffic Manager-végpont figyelése](traffic-manager-monitoring.md)</span><span class="sxs-lookup"><span data-stu-id="d35e1-242">Learn how toodevelop high-availability applications using [Traffic Manager endpoint monitoring](traffic-manager-monitoring.md)</span></span>

<span data-ttu-id="d35e1-243">Ismerje meg, hogyan túl[Traffic Manager-profil létrehozása](traffic-manager-create-profile.md)</span><span class="sxs-lookup"><span data-stu-id="d35e1-243">Learn how too[create a Traffic Manager profile](traffic-manager-create-profile.md)</span></span>

<!--Image references-->
[1]: ./media/traffic-manager-routing-methods/priority.png
[2]: ./media/traffic-manager-routing-methods/weighted.png
[3]: ./media/traffic-manager-routing-methods/performance.png



