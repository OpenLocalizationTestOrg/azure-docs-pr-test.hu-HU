---
title: "a VMware-replikáció tooAzure aaaReview hello architektúra |} Microsoft Docs"
description: "Ez a cikk áttekintést összetevők és a helyszíni VMware virtuális gépek tooAzure hello Azure Site Recovery szolgáltatásban való replikálása esetén használt architektúra"
services: site-recovery
documentationcenter: 
author: rayne-wiselman
manager: carmonm
editor: 
ms.assetid: c413efcd-d750-4b22-b34b-15bcaa03934a
ms.service: site-recovery
ms.workload: storage-backup-recovery
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/27.017
ms.author: raynew
ms.openlocfilehash: 7acb1d8e83a846dca79e175fd1af9324f2c31e65
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/06/2017
---
# <a name="step-1-review-hello-architecture-for-vmware-replication-tooazure"></a><span data-ttu-id="ae7cd-103">1. lépés:, Tekintse át a VMware-replikáció tooAzure hello architektúrája</span><span class="sxs-lookup"><span data-stu-id="ae7cd-103">Step 1: Review hello architecture for VMware replication tooAzure</span></span>

<span data-ttu-id="ae7cd-104">Ez a cikk ismerteti a hello összetevőiről és folyamataitól használható, ha replikálása a helyszíni VMware virtuális gépek tooAzure hello segítségével [Azure Site Recovery](site-recovery-overview.md) szolgáltatás.</span><span class="sxs-lookup"><span data-stu-id="ae7cd-104">This article describes hello components and processes used when replicating on-premises VMware virtual machines tooAzure using hello [Azure Site Recovery](site-recovery-overview.md) service.</span></span>

<span data-ttu-id="ae7cd-105">Ez a cikk hello alján a megjegyzéseket, vagy kérdései vannak a hello [Azure Recovery Services fórumon](https://social.msdn.microsoft.com/forums/azure/home?forum=hypervrecovmgr).</span><span class="sxs-lookup"><span data-stu-id="ae7cd-105">Post any comments at hello bottom of this article, or ask questions in hello [Azure Recovery Services Forum](https://social.msdn.microsoft.com/forums/azure/home?forum=hypervrecovmgr).</span></span>


## <a name="architectural-components"></a><span data-ttu-id="ae7cd-106">Az architektúra összetevői</span><span class="sxs-lookup"><span data-stu-id="ae7cd-106">Architectural components</span></span>

<span data-ttu-id="ae7cd-107">hello táblázat hello összetevőket foglalja össze.</span><span class="sxs-lookup"><span data-stu-id="ae7cd-107">hello table summarizes hello components you need.</span></span>

<span data-ttu-id="ae7cd-108">**Összetevő**</span><span class="sxs-lookup"><span data-stu-id="ae7cd-108">**Component**</span></span> | <span data-ttu-id="ae7cd-109">**Követelmény**</span><span class="sxs-lookup"><span data-stu-id="ae7cd-109">**Requirement**</span></span> | <span data-ttu-id="ae7cd-110">**Részletek**</span><span class="sxs-lookup"><span data-stu-id="ae7cd-110">**Details**</span></span>
--- | --- | ---
<span data-ttu-id="ae7cd-111">**Azure**</span><span class="sxs-lookup"><span data-stu-id="ae7cd-111">**Azure**</span></span> | <span data-ttu-id="ae7cd-112">Azure-előfizetéssel, egy Azure storage-fiókot és egy Azure-hálózatra van szüksége.</span><span class="sxs-lookup"><span data-stu-id="ae7cd-112">You need an Azure subscription, an Azure storage account, and an Azure network.</span></span> | <span data-ttu-id="ae7cd-113">A replikált adatok hello tárfiók tárolja.</span><span class="sxs-lookup"><span data-stu-id="ae7cd-113">Replicated data is stored in hello storage account.</span></span> <span data-ttu-id="ae7cd-114">Azure virtuális gépek replikálása hello adatokkal jönnek létre, a helyszíni helyről feladatátvétel esetén.</span><span class="sxs-lookup"><span data-stu-id="ae7cd-114">Azure VMs are created with hello replicated data when failover from your on-premises site occurs.</span></span> <span data-ttu-id="ae7cd-115">hello Azure virtuális gépek Azure-beli virtuális hálózat toohello csatlakozás, ha a jönnek létre.</span><span class="sxs-lookup"><span data-stu-id="ae7cd-115">hello Azure VMs connect toohello Azure virtual network when they're created.</span></span>
<span data-ttu-id="ae7cd-116">**Konfigurációs kiszolgáló**</span><span class="sxs-lookup"><span data-stu-id="ae7cd-116">**Configuration server**</span></span> | <span data-ttu-id="ae7cd-117">Egyetlen helyszíni felügyeleti kiszolgáló (a VMware virtuális gép) rendszert futtató összes hello helyszíni Site Recovery összetevők hello központi telepítéshez.</span><span class="sxs-lookup"><span data-stu-id="ae7cd-117">A single on-premises management server (VMware VM) that runs all hello on-premises Site Recovery components for hello deployment.</span></span> <span data-ttu-id="ae7cd-118">Ezek közé tartozik a konfigurációs kiszolgáló, a folyamatkiszolgáló, a fő célkiszolgálón.</span><span class="sxs-lookup"><span data-stu-id="ae7cd-118">These include a configuration server, process server, master target server.</span></span> | <span data-ttu-id="ae7cd-119">hello konfigurációs kiszolgáló összetevő koordinálja a helyszíni és az Azure közötti kommunikáció és kezeli a replikációs adatokat.</span><span class="sxs-lookup"><span data-stu-id="ae7cd-119">hello configuration server component coordinates communications between on-premises and Azure, and manages data replication.</span></span>
 <span data-ttu-id="ae7cd-120">**Folyamatkiszolgáló**:</span><span class="sxs-lookup"><span data-stu-id="ae7cd-120">**Process server**:</span></span>  | <span data-ttu-id="ae7cd-121">Hello konfigurációs kiszolgálón alapértelmezés szerint telepítve.</span><span class="sxs-lookup"><span data-stu-id="ae7cd-121">Installed by default on hello configuration server.</span></span> | <span data-ttu-id="ae7cd-122">Replikációs átjáróként üzemel.</span><span class="sxs-lookup"><span data-stu-id="ae7cd-122">Acts as a replication gateway.</span></span> <span data-ttu-id="ae7cd-123">Kap replikációs adatokat, gyorsítótárazás, tömörítés és titkosítás segítségével optimalizálja őket, és visszaküldi azt tooAzure tárolási.</span><span class="sxs-lookup"><span data-stu-id="ae7cd-123">Receives replication data, optimizes it with caching, compression, and encryption, and sends it tooAzure storage.</span></span><br/><br/> <span data-ttu-id="ae7cd-124">hello folyamatkiszolgáló is leküldéses telepítését hello mobilitási szolgáltatás tooprotected gépek kezeli, és végrehajtja a VMware virtuális gépek automatikus észlelése.</span><span class="sxs-lookup"><span data-stu-id="ae7cd-124">hello process server also handles push installation of hello Mobility service tooprotected machines, and performs automatic discovery of VMware VMs.</span></span><br/><br/> <span data-ttu-id="ae7cd-125">A központi telepítés növekedésével további külön dedikált folyamat kiszolgálók toohandle növelése replikációs forgalom mennyisége is hozzáadhat.</span><span class="sxs-lookup"><span data-stu-id="ae7cd-125">As your deployment grows you can add additional separate dedicated process servers toohandle increasing volumes of replication traffic.</span></span>
 <span data-ttu-id="ae7cd-126">**Fő célkiszolgáló**</span><span class="sxs-lookup"><span data-stu-id="ae7cd-126">**Master target server**</span></span> | <span data-ttu-id="ae7cd-127">Hello helyszíni konfigurációs kiszolgáló alapértelmezés szerint telepítve.</span><span class="sxs-lookup"><span data-stu-id="ae7cd-127">Installed by default on hello on-premises configuration server.</span></span> | <span data-ttu-id="ae7cd-128">Az Azure-ból történő feladat-visszavétel során kezeli a replikációs adatokat.</span><span class="sxs-lookup"><span data-stu-id="ae7cd-128">Handles replication data during failback from Azure.</span></span><br/><br/> <span data-ttu-id="ae7cd-129">Ha a feladat-visszavételi adatforgalom kötetei nagyok, a feladat-visszavételhez üzembe helyezhet egy másik fő célkiszolgálót.</span><span class="sxs-lookup"><span data-stu-id="ae7cd-129">If volumes of failback traffic are high, you can deploy a separate master target server for failback.</span></span>
<span data-ttu-id="ae7cd-130">**VMware-kiszolgálók**</span><span class="sxs-lookup"><span data-stu-id="ae7cd-130">**VMware servers**</span></span> | <span data-ttu-id="ae7cd-131">VMware virtuális gépeket üzemeltető vSphere ESXi-kiszolgálón, és azt javasoljuk a vCenter server toomanage hello gazdagépek.</span><span class="sxs-lookup"><span data-stu-id="ae7cd-131">VMware VMs are hosted on vSphere ESXi servers, and we recommend a vCenter server toomanage hello hosts.</span></span> | <span data-ttu-id="ae7cd-132">VMware kiszolgálók tooyour Recovery Services-tároló hozzáadása</span><span class="sxs-lookup"><span data-stu-id="ae7cd-132">You add VMware servers tooyour Recovery Services vault.</span></span>
<span data-ttu-id="ae7cd-133">**Replikált gépek**</span><span class="sxs-lookup"><span data-stu-id="ae7cd-133">**Replicated machines**</span></span> | <span data-ttu-id="ae7cd-134">hello mobilitási szolgáltatás telepíti az egyes VMware virtuális gépek replikálása.</span><span class="sxs-lookup"><span data-stu-id="ae7cd-134">hello Mobility service will be installed on each VMware VM you replicate.</span></span> <span data-ttu-id="ae7cd-135">Telepíthető manuálisan minden számítógépen, vagy a leküldéses telepítés hello folyamat kiszolgálóról.</span><span class="sxs-lookup"><span data-stu-id="ae7cd-135">It can be installed manually on each machine, or with a push installation from hello process server.</span></span>

<span data-ttu-id="ae7cd-136">**1. ábra: VMware tooAzure összetevők**</span><span class="sxs-lookup"><span data-stu-id="ae7cd-136">**Figure 1: VMware tooAzure components**</span></span>

![Összetevők](./media/vmware-walkthrough-architecture/arch-enhanced.png)

## <a name="replication-process"></a><span data-ttu-id="ae7cd-138">Replikációs folyamat</span><span class="sxs-lookup"><span data-stu-id="ae7cd-138">Replication process</span></span>

1. <span data-ttu-id="ae7cd-139">Hello központi telepítését, beleértve a helyszíni és az Azure összetevők beállítása.</span><span class="sxs-lookup"><span data-stu-id="ae7cd-139">You set up hello deployment, including on-premises and Azure components.</span></span> <span data-ttu-id="ae7cd-140">A Recovery Services-tároló hello megadhatja a hello replikációs forrása és célja, hello konfigurációs kiszolgáló, hozzon létre egy replikációs házirendet, hello mobilitási szolgáltatás üzembe helyezése, engedélyezze a replikálást és feladatátvételi teszt futtatása.</span><span class="sxs-lookup"><span data-stu-id="ae7cd-140">In hello Recovery Services vault, you specify hello replication source and target, set up hello configuration server, create a replication policy, deploy hello Mobility service, enable replication, and run a test failover.</span></span>
2. <span data-ttu-id="ae7cd-141">Gépek replikálásához hello replikációs házirendet, és egy kezdeti másolatot készít hello adatok megfelelően az replikált tooAzure tároló.</span><span class="sxs-lookup"><span data-stu-id="ae7cd-141">Machines replicate in accordance with hello replication policy, and an initial copy of hello data is replicated tooAzure storage.</span></span>
3. <span data-ttu-id="ae7cd-142">Kezdeti replikáció befejezését követően, a különbözeti módosítások tooAzure replikálása kezdődik.</span><span class="sxs-lookup"><span data-stu-id="ae7cd-142">After initial replication finishes, replication of delta changes tooAzure begins.</span></span> <span data-ttu-id="ae7cd-143">A gépek nyomon követett módosításait a rendszer egy .hrl fájlban tárolja.</span><span class="sxs-lookup"><span data-stu-id="ae7cd-143">Tracked changes for a machine are held in a .hrl file.</span></span>
    - <span data-ttu-id="ae7cd-144">Replikáló gépek kommunikálni hello konfigurációs kiszolgáló HTTPS 443-as portot a bejövő, a replikáció kezelését.</span><span class="sxs-lookup"><span data-stu-id="ae7cd-144">Replicating machines communicate with hello configuration server on port HTTPS 443 inbound, for replication management.</span></span>
    - <span data-ttu-id="ae7cd-145">Replikáló gépek küldése replikációs adatok toohello folyamatkiszolgáló HTTPS 9443 porton bejövő (módosítható).</span><span class="sxs-lookup"><span data-stu-id="ae7cd-145">Replicating machines send replication data toohello process server on port HTTPS 9443 inbound (can be modified).</span></span>
    - <span data-ttu-id="ae7cd-146">hello konfigurációs kiszolgáló koordinálja a replikáció kezelését az Azure-ral HTTPS 443-as kimenő porton keresztül.</span><span class="sxs-lookup"><span data-stu-id="ae7cd-146">hello configuration server orchestrates replication management with Azure over port HTTPS 443 outbound.</span></span>
    - <span data-ttu-id="ae7cd-147">hello folyamatkiszolgáló adatokat fogad az forrásgépek, optimalizálja és titkosítja azokat, és elküldi azt tooAzure tárolási 443-as porton keresztül kimenő.</span><span class="sxs-lookup"><span data-stu-id="ae7cd-147">hello process server receives data from source machines, optimizes and encrypts it, and sends it tooAzure storage over port 443 outbound.</span></span>
    - <span data-ttu-id="ae7cd-148">Ha engedélyezi a virtuális Gépre kiterjedő konzisztencia, majd gépek hello replikációs csoport kommunikálnak egymással 20004 porton keresztül.</span><span class="sxs-lookup"><span data-stu-id="ae7cd-148">If you enable multi-VM consistency, then machines in hello replication group communicate with each other over port 20004.</span></span> <span data-ttu-id="ae7cd-149">Több virtuális gépes környezetről akkor beszélünk, ha a gépek feladatátvételkor azonos összeomlásbiztos és alkalmazáskonzisztens helyreállítási pontokat használó replikációs csoportokba vannak rendezve.</span><span class="sxs-lookup"><span data-stu-id="ae7cd-149">Multi-VM is used if you group multiple machines into replication groups that share crash-consistent and app-consistent recovery points when they fail over.</span></span> <span data-ttu-id="ae7cd-150">Ez akkor hasznos, ha a gépek is működnek, ugyanaz az alkalmazás hello és toobe konzisztens kell.</span><span class="sxs-lookup"><span data-stu-id="ae7cd-150">This is useful if machines are running hello same workload and need toobe consistent.</span></span>
4. <span data-ttu-id="ae7cd-151">Akkor replikált tooAzure tárolási nyilvános végpontok, több mint hello internet.</span><span class="sxs-lookup"><span data-stu-id="ae7cd-151">Traffic is replicated tooAzure storage public endpoints, over hello internet.</span></span> <span data-ttu-id="ae7cd-152">Erre a célra az Azure ExpressRoute [nyilvános társviszony-létesítési](../expressroute/expressroute-circuit-peerings.md#public-peering) szolgáltatását is használhatja.</span><span class="sxs-lookup"><span data-stu-id="ae7cd-152">Alternately, you can use Azure ExpressRoute [public peering](../expressroute/expressroute-circuit-peerings.md#public-peering).</span></span> <span data-ttu-id="ae7cd-153">Forgalom replikál egy helyszíni hely tooAzure az a pont-pont VPN-kapcsolaton keresztül nem támogatott.</span><span class="sxs-lookup"><span data-stu-id="ae7cd-153">Replicating traffic over a site-to-site VPN from an on-premises site tooAzure isn't supported.</span></span>


<span data-ttu-id="ae7cd-154">**2. ábra: VMware tooAzure replikáció**</span><span class="sxs-lookup"><span data-stu-id="ae7cd-154">**Figure 2: VMware tooAzure replication**</span></span>

![Továbbfejlesztett](./media/vmware-walkthrough-architecture/v2a-architecture-henry.png)

## <a name="failover-and-failback-process"></a><span data-ttu-id="ae7cd-156">Feladatátvételi és feladat-visszavételi folyamat</span><span class="sxs-lookup"><span data-stu-id="ae7cd-156">Failover and failback process</span></span>

1. <span data-ttu-id="ae7cd-157">Miután meggyőződött a feladatátvételi teszt a várt módon működik, a nem tervezett feladatátvételek tooAzure szükség szerint is futtathatja.</span><span class="sxs-lookup"><span data-stu-id="ae7cd-157">After you verify that test failover is working as expected, you can run unplanned failovers tooAzure as required.</span></span> <span data-ttu-id="ae7cd-158">A tervezett feladatátvétel nem támogatott.</span><span class="sxs-lookup"><span data-stu-id="ae7cd-158">Planned failover isn't supported.</span></span>
2. <span data-ttu-id="ae7cd-159">Egyetlen gép feladatátvételt, vagy hozzon létre [helyreállítási tervek](site-recovery-create-recovery-plans.md), toofail át több virtuális géphez.</span><span class="sxs-lookup"><span data-stu-id="ae7cd-159">You can fail over a single machine, or create [recovery plans](site-recovery-create-recovery-plans.md), toofail over multiple VMs.</span></span>
3. <span data-ttu-id="ae7cd-160">Feladatátvétel futtatásakor az Azure-ban replikaként létrehozott virtuális gépek jönnek létre.</span><span class="sxs-lookup"><span data-stu-id="ae7cd-160">When you run a failover, replica VMs are created in Azure.</span></span> <span data-ttu-id="ae7cd-161">A feladatátvételi toostart elérése során hello munkaterhelés hello replikáról Azure virtuális gép véglegesítése után.</span><span class="sxs-lookup"><span data-stu-id="ae7cd-161">You commit a failover toostart accessing hello workload from hello replica Azure VM.</span></span>
4. <span data-ttu-id="ae7cd-162">Amint az elsődleges helyszíni hely megint elérhetővé válik, visszaadhatja a feladatokat.</span><span class="sxs-lookup"><span data-stu-id="ae7cd-162">When your primary on-premises site is available again, you can fail back.</span></span> <span data-ttu-id="ae7cd-163">A feladat-visszavétel infrastruktúra beállítása, start hello gépek replikálásához hello másodlagos hely toohello elsődleges és egy nem tervezett feladatátvételt hello másodlagos helyekről futtatni.</span><span class="sxs-lookup"><span data-stu-id="ae7cd-163">You set up a failback infrastructure, start replicating hello machine from hello secondary site toohello primary, and run an unplanned failover from hello secondary site.</span></span> <span data-ttu-id="ae7cd-164">Ennél a feladatátvételnél véglegesítést követően adatokat kell vissza a helyszíni, és tooenable replikációs tooAzure újra kell.</span><span class="sxs-lookup"><span data-stu-id="ae7cd-164">After you commit this failover, data will be back on-premises, and you need tooenable replication tooAzure again.</span></span> [<span data-ttu-id="ae7cd-165">További információ</span><span class="sxs-lookup"><span data-stu-id="ae7cd-165">Learn more</span></span>](site-recovery-failback-azure-to-vmware.md)

<span data-ttu-id="ae7cd-166">A feladat-visszavételre vonatkozó követelmények:</span><span class="sxs-lookup"><span data-stu-id="ae7cd-166">There are a few failback requirements:</span></span>


- <span data-ttu-id="ae7cd-167">**Ideiglenes folyamatkiszolgáló az Azure-ban**: Ha feladatátvételt követően az Azure-ból toofail szüksége lesz egy Azure virtuális gépet a konfigurálva folyamatot, az Azure-ból toohandle replikációs tooset.</span><span class="sxs-lookup"><span data-stu-id="ae7cd-167">**Temporary process server in Azure**: If you want toofail back from Azure after failover you'll need tooset up an Azure VM configured as a process server, toohandle replication from Azure.</span></span> <span data-ttu-id="ae7cd-168">Ez a virtuális gép a feladatok visszaadását követően törölhető.</span><span class="sxs-lookup"><span data-stu-id="ae7cd-168">You can delete this VM after failback finishes.</span></span>
- <span data-ttu-id="ae7cd-169">**VPN-kapcsolat**: A feladat-visszavételre szüksége lesz egy VPN-kapcsolat (vagy Azure ExpressRoute) beállítása hello Azure hálózati toohello a helyszíni helyről.</span><span class="sxs-lookup"><span data-stu-id="ae7cd-169">**VPN connection**: For failback you'll need a VPN connection (or Azure ExpressRoute) set up from hello Azure network toohello on-premises site.</span></span>
- <span data-ttu-id="ae7cd-170">**Önálló helyszíni fő célkiszolgáló**: hello a helyszíni fő célkiszolgáló kezeli a feladat-visszavételre.</span><span class="sxs-lookup"><span data-stu-id="ae7cd-170">**Separate on-premises master target server**: hello on-premises master target server handles failback.</span></span> <span data-ttu-id="ae7cd-171">fő célkiszolgáló hello hello felügyeleti kiszolgálón alapértelmezés szerint telepítve van, de nagyobb mértékű forgalom visszavétele esetén érdemes beállítania egy önálló helyszíni fő célkiszolgáló erre a célra.</span><span class="sxs-lookup"><span data-stu-id="ae7cd-171">hello master target server is installed by default on hello management server, but if you're failing back larger volumes of traffic you should set up a separate on-premises master target server for this purpose.</span></span>
- <span data-ttu-id="ae7cd-172">**Feladat-visszavételi házirend**: tooreplicate hátsó tooyour helyszíni hely, egy feladatátvételi házirendhez van szüksége.</span><span class="sxs-lookup"><span data-stu-id="ae7cd-172">**Failback policy**: tooreplicate back tooyour on-premises site, you need a failback policy.</span></span> <span data-ttu-id="ae7cd-173">A replikációs szabályzat létrehozásakor a rendszer ezt automatikusan létrehozza.</span><span class="sxs-lookup"><span data-stu-id="ae7cd-173">This is automatically created when you created your replication policy.</span></span>
- <span data-ttu-id="ae7cd-174">**VMware-infrastruktúra**: meg kell a feladat-visszavételt tooan helyszíni VMware virtuális gép.</span><span class="sxs-lookup"><span data-stu-id="ae7cd-174">**VMware infrastructure**: You must fail back tooan on-premises VMware VM.</span></span> <span data-ttu-id="ae7cd-175">Ez azt jelenti, hogy szükséges egy helyszíni VMware-infrastruktúra, akkor is, ha a helyszíni fizikai kiszolgálók tooAzure replikál.</span><span class="sxs-lookup"><span data-stu-id="ae7cd-175">This means you need an on-premises VMware infrastructure, even if you're replicating on-premises physical servers tooAzure.</span></span>

<span data-ttu-id="ae7cd-176">**3. ábra: VMware-/fizikai gépek közötti feladat-visszavétel**</span><span class="sxs-lookup"><span data-stu-id="ae7cd-176">**Figure 3: VMware/physical failback**</span></span>

![Feladat-visszavétel](./media/vmware-walkthrough-architecture/enhanced-failback.png)


## <a name="next-steps"></a><span data-ttu-id="ae7cd-178">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="ae7cd-178">Next steps</span></span>

<span data-ttu-id="ae7cd-179">Nyissa meg túl[2. lépés: Ellenőrizze az Előfeltételek és korlátozások](vmware-walkthrough-prerequisites.md)</span><span class="sxs-lookup"><span data-stu-id="ae7cd-179">Go too[Step 2: Verify prerequisites and limitations](vmware-walkthrough-prerequisites.md)</span></span>
