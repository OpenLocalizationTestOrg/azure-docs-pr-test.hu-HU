---
title: "Virtuálisgép-méretezési csoportok aaaTroubleshoot automatikusan skálázva |} Microsoft Docs"
description: "Hárítsa el a virtuálisgép-méretezési csoportok automatikusan skálázva. Észlelt gyakran előforduló problémák megértése, hogyan tooresolve őket."
services: virtual-machine-scale-sets
documentationcenter: 
author: gbowerman
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: c7d87b72-ee24-4e52-9377-a42f337f76fa
ms.service: virtual-machine-scale-sets
ms.workload: na
ms.tgt_pltfrm: windows
ms.devlang: na
ms.topic: article
ms.date: 10/28/2016
ms.author: guybo
ms.openlocfilehash: 4c9a70992348d87fb43646421a90a027bf400a17
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/06/2017
---
# <a name="troubleshooting-autoscale-with-virtual-machine-scale-sets"></a><span data-ttu-id="65e0e-104">Virtuálisgép-méretezési csoportok automatikusan skálázva hibaelhárítása</span><span class="sxs-lookup"><span data-stu-id="65e0e-104">Troubleshooting autoscale with Virtual Machine Scale Sets</span></span>
<span data-ttu-id="65e0e-105">**A probléma** – létrehozta az automatikus skálázás infrastruktúra az Azure Resource Manager használatával Virtuálisgép-méretezési készlet – például egy sablont ehhez hasonló telepítésével: https://github.com/Azure/azure-quickstart-templates/tree/master/201- a skálázási szabályok definiált vmss-bottle – automatikus skálázás – rendelkezik, és azt nagyszerű, azzal a különbséggel, hogy mekkora terhelés, akkor helyezhető el virtuális gépek hello, függetlenül azok automatikus skálázás nem fog.</span><span class="sxs-lookup"><span data-stu-id="65e0e-105">**Problem** – you’ve created an autoscaling infrastructure in Azure Resource Manager using VM Scale Sets –  for example by deploying a template like this: https://github.com/Azure/azure-quickstart-templates/tree/master/201-vmss-bottle-autoscale  – you have your scale rules defined and it works great, except that no matter how much load you put on hello VMs, it won’t autoscale.</span></span>

## <a name="troubleshooting-steps"></a><span data-ttu-id="65e0e-106">Hibaelhárítási lépések</span><span class="sxs-lookup"><span data-stu-id="65e0e-106">Troubleshooting steps</span></span>
<span data-ttu-id="65e0e-107">Néhány dolgot tooconsider a következők:</span><span class="sxs-lookup"><span data-stu-id="65e0e-107">Some things tooconsider include:</span></span>

* <span data-ttu-id="65e0e-108">Hány magok minden virtuális gép rendelkezik, és minden core betöltése? Példa hello Azure gyors üzembe helyezési fenti sablon do_work.php parancsfájl, amely betölti a egyetlen mag rendelkezik.</span><span class="sxs-lookup"><span data-stu-id="65e0e-108">How many cores does each VM have, and are you loading each core? hello example Azure Quickstart template above has a do_work.php script, which loads a single core.</span></span> <span data-ttu-id="65e0e-109">Ha például Standard_A1 vagy D1, majd szükség lenne toorun Ez a betöltés többször használ, a virtuális gépek nagyobb, mint egy alapszintű Virtuálisgép-méretet.</span><span class="sxs-lookup"><span data-stu-id="65e0e-109">If you’re using a VM bigger than a single core VM size like Standard_A1 or D1 then you’d need toorun this load multiple times.</span></span> <span data-ttu-id="65e0e-110">Ellenőrizze, hogy hány processzormag, a virtuális gépek megtekintésével [méretek a Windows virtuális gépek Azure-ban](../virtual-machines/windows/sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)</span><span class="sxs-lookup"><span data-stu-id="65e0e-110">Check how many cores your VMs by reviewing [Sizes for Windows virtual machines in Azure](../virtual-machines/windows/sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)</span></span>
* <span data-ttu-id="65e0e-111">Hello Virtuálisgép-méretezési csoportban, hány virtuális gépeinek módon, az egyes munkaelem?</span><span class="sxs-lookup"><span data-stu-id="65e0e-111">How many VMs in hello VM Scale Set, are you doing work on each one?</span></span>
  
    <span data-ttu-id="65e0e-112">A bővített kapacitású esemény csak fog kerül sor, amikor hello átlagos Processzorhasználatának keresztül **összes** méretezési csoportban lévő virtuális gépek hello túllépi hello küszöbértékét, belső hello időbeli hello automatikus skálázási szabályok definiálva.</span><span class="sxs-lookup"><span data-stu-id="65e0e-112">A scale out event will only take place when hello average CPU across **all** hello VMs in a scale set exceeds hello threshold value, over hello time internal defined in hello autoscale rules.</span></span>
* <span data-ttu-id="65e0e-113">Nem hagyott ki méretezési eseményeket?</span><span class="sxs-lookup"><span data-stu-id="65e0e-113">Did you miss any scale events?</span></span>
  
    <span data-ttu-id="65e0e-114">Ellenőrizze az auditnaplókat hello hello Azure-portál a skála események.</span><span class="sxs-lookup"><span data-stu-id="65e0e-114">Check hello audit logs in hello Azure portal for scale events.</span></span> <span data-ttu-id="65e0e-115">Lehet, hogy terjedő skálán fel és le, amely egy méretezési kimaradt.</span><span class="sxs-lookup"><span data-stu-id="65e0e-115">Maybe there was a scale up and a scale down which was missed.</span></span> <span data-ttu-id="65e0e-116">Szűrhet "Méretezési"...</span><span class="sxs-lookup"><span data-stu-id="65e0e-116">You can filter by “Scale”..</span></span>
  
    ![Naplók][audit]
* <span data-ttu-id="65e0e-118">Eltérőek a méretezési és a kibővített küszöbértékeket megfelelően?</span><span class="sxs-lookup"><span data-stu-id="65e0e-118">Are your scale-in and scale-out thresholds sufficiently different?</span></span>
  
    <span data-ttu-id="65e0e-119">Tegyük fel, hogy beállított egy szabály tooscale, amikor átlagos CPU 50 %-nál nagyobb több mint 5 perc és tooscale átlagos CPU esetén 50 %-nál kisebb.</span><span class="sxs-lookup"><span data-stu-id="65e0e-119">Suppose you set a rule tooscale out when average CPU is greater than 50% over 5 minutes, and tooscale in when average CPU is less than 50%.</span></span> <span data-ttu-id="65e0e-120">Emiatt egy "flapping" probléma CPU-használat esetén Bezárás toothis küszöbértéket, a skálázási műveletek folyamatosan növeléséhez és csökkentéséhez hello hello készlet mérete.</span><span class="sxs-lookup"><span data-stu-id="65e0e-120">This would cause a “flapping” problem when CPU usage is close toothis threshold, with scale actions constantly increasing and decreasing hello size of hello set.</span></span> <span data-ttu-id="65e0e-121">Ebből kifolyólag hello automatikus skálázás szolgáltatás megpróbál tooprevent "" ugrál "", is jegyzékfájl nem skálázás, amely.</span><span class="sxs-lookup"><span data-stu-id="65e0e-121">Because of this, hello autoscale service tries tooprevent “flapping”, which can manifest as not scaling.</span></span> <span data-ttu-id="65e0e-122">Ezért győződjön meg arról, hogy a kibővített és skálázási a küszöbértékeket megfelelően különböző tooallow fel Between skálázás helyet.</span><span class="sxs-lookup"><span data-stu-id="65e0e-122">Therefore make sure your scale-out and scale-in thresholds are sufficiently different tooallow some space in between scaling.</span></span>
* <span data-ttu-id="65e0e-123">Volt-e írási saját JSON-sablon?</span><span class="sxs-lookup"><span data-stu-id="65e0e-123">Did you write your own JSON template?</span></span>
  
    <span data-ttu-id="65e0e-124">Könnyen toomake hibák, ezért a sablont, például egy, amely felett bizonyítása toowork hello kezdődnie, és kis növekményes módosításokat.</span><span class="sxs-lookup"><span data-stu-id="65e0e-124">It is easy toomake mistakes, so start with a template like hello one above which is proven toowork, and make small incremental changes.</span></span> 
* <span data-ttu-id="65e0e-125">Ön manuálisan méretezhető bejövő vagy kimenő?</span><span class="sxs-lookup"><span data-stu-id="65e0e-125">Can you manually scale in or out?</span></span>
  
    <span data-ttu-id="65e0e-126">Próbálja meg újratelepíteni hello virtuális gépek különböző "kapacitás" beállítás toochange hello több Virtuálisgép-méretezési csoportban erőforrás manuálisan.</span><span class="sxs-lookup"><span data-stu-id="65e0e-126">Try redeploying hello VM Scale Set resource with a different “capacity” setting toochange hello number of VMs manually.</span></span> <span data-ttu-id="65e0e-127">Egy példa sablon toodo, ez a következő helyen: https://github.com/Azure/azure-quickstart-templates/tree/master/201-vmss-scale-existing – tooedit hello sablon toomake hello van szükség, használja a méretezési mérete azonos számítógépre.</span><span class="sxs-lookup"><span data-stu-id="65e0e-127">An example template toodo this is here: https://github.com/Azure/azure-quickstart-templates/tree/master/201-vmss-scale-existing – you may need tooedit hello template toomake sure it has hello same machine size as your Scale Set is using.</span></span> <span data-ttu-id="65e0e-128">Ha sikeresen módosíthatja a virtuális gépek hello számát manuálisan, majd meg tudja hello probléma elkülönített tooautoscale.</span><span class="sxs-lookup"><span data-stu-id="65e0e-128">If you can successfully change hello number of VMs manually, then you know hello problem is isolated tooautoscale.</span></span>
* <span data-ttu-id="65e0e-129">Ellenőrizze a Microsoft.Compute/virtualMachineScaleSet és hello Microsoft.Insights erőforrások [Azure erőforrás-kezelővel](https://resources.azure.com/)</span><span class="sxs-lookup"><span data-stu-id="65e0e-129">Check your Microsoft.Compute/virtualMachineScaleSet, and Microsoft.Insights resources in hello [Azure Resource Explorer](https://resources.azure.com/)</span></span>
  
    <span data-ttu-id="65e0e-130">Ez az egy nélkülözhetetlen hibaelhárítási eszköz, amely jelzi, hogy hello az Azure Resource Manager erőforrások állapotát.</span><span class="sxs-lookup"><span data-stu-id="65e0e-130">This is an indispensable troubleshooting tool which shows you hello state of your Azure Resource Manager resources.</span></span> <span data-ttu-id="65e0e-131">Kattintson az előfizetését, és nézze meg hello hibaelhárítási erőforráscsoportot.</span><span class="sxs-lookup"><span data-stu-id="65e0e-131">Click on your subscription and look at hello Resource Group you are troubleshooting.</span></span> <span data-ttu-id="65e0e-132">Hello számítási erőforrás-szolgáltató a Virtuálisgép-méretezési csoportban létrehozott hello tekintse meg, és ellenőrizze a hello példányait tartalmazó nézetet, amely jelzi, hogy a központi telepítés állapotának hello.</span><span class="sxs-lookup"><span data-stu-id="65e0e-132">Under hello Compute resource provider look at hello VM Scale Set you created and check hello Instance View, which shows you hello state of a deployment.</span></span> <span data-ttu-id="65e0e-133">Hello példányait tartalmazó nézetet a virtuális gépek a Virtuálisgép-méretezési csoportban hello is ellenőrizheti.</span><span class="sxs-lookup"><span data-stu-id="65e0e-133">Also check hello instance view of VMs in hello VM Scale Set.</span></span> <span data-ttu-id="65e0e-134">Majd állapotba hello Microsoft.Insights erőforrás-szolgáltató, és ellenőrizze a hello automatikus skálázási szabályok szépen.</span><span class="sxs-lookup"><span data-stu-id="65e0e-134">Then go into hello Microsoft.Insights resource provider and check hello autoscale rules look good.</span></span>
* <span data-ttu-id="65e0e-135">Diagnosztikai bővítmény hello használata és teljesítményadatokat kibocsátó?</span><span class="sxs-lookup"><span data-stu-id="65e0e-135">Is hello Diagnostic extension working and emitting performance data?</span></span>
  
    <span data-ttu-id="65e0e-136">**Frissítés:** Azure automatikus skálázás továbbfejlesztett toouse állomás alapú metrikák csővezeték, amelyhez már nem szükséges egy diagnosztikai bővítmény toobe telepítve lett.</span><span class="sxs-lookup"><span data-stu-id="65e0e-136">**Update:** Azure autoscale has been enhanced toouse a host based metrics pipeline which no longer requires a diagnostics extension toobe installed.</span></span> <span data-ttu-id="65e0e-137">Ez azt jelenti, hogy tovább néhány hello bekezdések már nem érvényes, ha létrehoz egy automatikus skálázás alkalmazást hello új kimenetátirányításának segítségével.</span><span class="sxs-lookup"><span data-stu-id="65e0e-137">This means hello next few paragraphs no longer apply if you create an autoscaling application using hello new pipeline.</span></span> <span data-ttu-id="65e0e-138">Azure-sablonok, amelyek konvertált toouse hello állomás csővezeték például: https://github.com/Azure/azure-quickstart-templates/tree/master/201-vmss-bottle-autoscale.</span><span class="sxs-lookup"><span data-stu-id="65e0e-138">An example of Azure templates which have been converted toouse hello host pipeline is: https://github.com/Azure/azure-quickstart-templates/tree/master/201-vmss-bottle-autoscale.</span></span> 
  
    <span data-ttu-id="65e0e-139">A gazdagép alapú metrikák az automatikus skálázási használata jobb, ha a következő okok miatt hello:</span><span class="sxs-lookup"><span data-stu-id="65e0e-139">Using host based metrics for autoscale is better for hello following reasons:</span></span>
  
  * <span data-ttu-id="65e0e-140">Kevesebb mozgó részek nem diagnosztika kiterjesztéseket toobe telepíteni kell.</span><span class="sxs-lookup"><span data-stu-id="65e0e-140">Fewer moving parts as no diagnostics extensions need toobe installed.</span></span>
  * <span data-ttu-id="65e0e-141">Egyszerűbb sablonok.</span><span class="sxs-lookup"><span data-stu-id="65e0e-141">Simpler templates.</span></span> <span data-ttu-id="65e0e-142">Csak hozzáadása insights automatikus skálázási szabályok tooan meglévő méretezési sablont.</span><span class="sxs-lookup"><span data-stu-id="65e0e-142">Just add insights autoscale rules tooan existing scale set template.</span></span>
  * <span data-ttu-id="65e0e-143">További megbízható reporting, és új virtuális gépek gyorsabb indítása.</span><span class="sxs-lookup"><span data-stu-id="65e0e-143">More reliable reporting and faster launching of new VMs.</span></span>
    
    <span data-ttu-id="65e0e-144">hello csak okok miatt érdemes diagnosztikai kiterjesztés tookeep lenne, ha szüksége memória diagnosztika reporting/skálázás.</span><span class="sxs-lookup"><span data-stu-id="65e0e-144">hello only reasons you might want tookeep using a diagnostic extension would be if you need memory diagnostics reporting/scaling.</span></span> <span data-ttu-id="65e0e-145">A gazdagép alapú metrikák nem jelentik a memória.</span><span class="sxs-lookup"><span data-stu-id="65e0e-145">Host based metrics doesn't report memory.</span></span>
    
    <span data-ttu-id="65e0e-146">Vele szem előtt csak ha kövesse az Ez a cikk többi hello diagnosztikai bővítmények továbbra is használja az automatikus skálázást.</span><span class="sxs-lookup"><span data-stu-id="65e0e-146">With that in mind, only follow hello rest of this article if you are still using diagnostic extensions for your autoscaling.</span></span>
    
    <span data-ttu-id="65e0e-147">Az Azure Resource Manager automatikus skálázás együttműködhet (de már nem rendelkezik) protokollt a Virtuálisgép-bővítmény hello diagnosztika bővítmény neve.</span><span class="sxs-lookup"><span data-stu-id="65e0e-147">Autoscale in Azure Resource Manager can work (but no longer has to) by means of a VM extension called hello Diagnostics Extension.</span></span> <span data-ttu-id="65e0e-148">Azt a teljesítmény adatok tooa tárfiók hello sablon meghatározott bocsát ki.</span><span class="sxs-lookup"><span data-stu-id="65e0e-148">It emits performance data tooa storage account you define in hello template.</span></span> <span data-ttu-id="65e0e-149">Ezek az adatok majd hello Azure figyelőszolgáltatás szerint van összesítve.</span><span class="sxs-lookup"><span data-stu-id="65e0e-149">This data is then aggregated by hello Azure Monitor service.</span></span>
    
    <span data-ttu-id="65e0e-150">Hello Insights szolgáltatás hello virtuális gépek adatai nem olvashatók, ha az toosend kellene egy e-mailt – például ha hello virtuális gépeken volt, ezért nézze meg leveleit (hello Azure-fiók létrehozásakor megadott hello).</span><span class="sxs-lookup"><span data-stu-id="65e0e-150">If hello Insights service can’t read data from hello VMs, it is supposed toosend you an email – for example if hello VMs were down, so check your email (hello one you specified when creating hello Azure account).</span></span>
    
    <span data-ttu-id="65e0e-151">Is megnyithatja, és keresse meg hello adatait.</span><span class="sxs-lookup"><span data-stu-id="65e0e-151">You can also go and look at hello data yourself.</span></span> <span data-ttu-id="65e0e-152">Tekintse meg hello Azure storage-fiók egy cloud explorer használatával.</span><span class="sxs-lookup"><span data-stu-id="65e0e-152">Look at hello Azure storage account using a cloud explorer.</span></span> <span data-ttu-id="65e0e-153">Például a hello használatával [Visual Studio Cloud Explorer](https://visualstudiogallery.msdn.microsoft.com/aaef6e67-4d99-40bc-aacf-662237db85a2), jelentkezzen be, és válasszon hello használata Azure-előfizetés és hello diagnosztikai tárfiók neve hivatkozott hello diagnosztika bővítmény definíciójának a központi telepítésben sablon...</span><span class="sxs-lookup"><span data-stu-id="65e0e-153">For example using hello [Visual Studio Cloud Explorer](https://visualstudiogallery.msdn.microsoft.com/aaef6e67-4d99-40bc-aacf-662237db85a2), log in and pick hello Azure subscription you’re using, and hello Diagnostics storage account name referenced in hello Diagnostics extension definition in your deployment template..</span></span>
    
    ![Cloud Explorer][explorer]
    
    <span data-ttu-id="65e0e-155">Itt látni fogja álló, lemezcsoport típusú egyes virtuális gépek hello adatokat tároló tábla.</span><span class="sxs-lookup"><span data-stu-id="65e0e-155">Here you will see a bunch of tables where hello data from each VM is being stored.</span></span> <span data-ttu-id="65e0e-156">Linux- és CPU-metrika példaként hello tart, nézze meg hello utolsó sort.</span><span class="sxs-lookup"><span data-stu-id="65e0e-156">Taking Linux and hello CPU metric as an example, look at hello most recent rows.</span></span> <span data-ttu-id="65e0e-157">hello Visual Studio cloud explorer lekérdezésnyelvet támogatja, így például a lekérdezés futtatása "időbélyeg gt dátum és idő" 2016-02-02T21:20:00Z "" toomake arra, hogy hello megtartott legutóbbi események (feltételezik időpontja UTC szerint).</span><span class="sxs-lookup"><span data-stu-id="65e0e-157">hello Visual Studio cloud explorer supports a query language so you can run a query like “Timestamp gt datetime’2016-02-02T21:20:00Z’” toomake sure you get hello most recent events (assume time is in UTC).</span></span> <span data-ttu-id="65e0e-158">Nem látható hiba tartozik toohello hello adatok méretezése szabályok beállítása?</span><span class="sxs-lookup"><span data-stu-id="65e0e-158">Does hello data you see in there correspond toohello scale rules you set up?</span></span> <span data-ttu-id="65e0e-159">Hello az alábbi példában hello CPU gép 20 elindított too100 % növelése keresztül hello utolsó 5 percig...</span><span class="sxs-lookup"><span data-stu-id="65e0e-159">In hello example below, hello CPU for machine 20 started increasing too100% over hello last 5 minutes..</span></span>
    
    ![Tárolási táblák][tables]
    
    <span data-ttu-id="65e0e-161">Ha hello adatok nem létezik, majd az azt jelenti, hello probléma hello virtuális gépeken futó hello diagnosztikai kiterjesztésű.</span><span class="sxs-lookup"><span data-stu-id="65e0e-161">If hello data is not there, then it implies hello problem is with hello diagnostic extension running in hello VMs.</span></span> <span data-ttu-id="65e0e-162">Ha hello adatok ott, ez arra utalhat, vagy probléma a skálázási szabályok vagy hello Insights szolgáltatással.</span><span class="sxs-lookup"><span data-stu-id="65e0e-162">If hello data is there, it implies there is either a problem with your scale rules, or with hello Insights service.</span></span> <span data-ttu-id="65e0e-163">Ellenőrizze [Azure állapot](https://azure.microsoft.com/status/).</span><span class="sxs-lookup"><span data-stu-id="65e0e-163">Check [Azure Status](https://azure.microsoft.com/status/).</span></span>
    
    <span data-ttu-id="65e0e-164">Amennyiben azt, hogy a fenti lépéseket, ha továbbra is problémák automatikus skálázás hello fórumok megpróbálhatja [MSDN](https://social.msdn.microsoft.com/forums/azure/home?category=windowsazureplatform%2Cazuremarketplace%2Cwindowsazureplatformctp), vagy [veremtúlcsordulás](http://stackoverflow.com/questions/tagged/azure), vagy a támogatási hívás.</span><span class="sxs-lookup"><span data-stu-id="65e0e-164">Once you’ve been through these steps, if you are still having autoscale problems you could try hello forums on [MSDN](https://social.msdn.microsoft.com/forums/azure/home?category=windowsazureplatform%2Cazuremarketplace%2Cwindowsazureplatformctp), or [Stack overflow](http://stackoverflow.com/questions/tagged/azure), or log a support call.</span></span> <span data-ttu-id="65e0e-165">Lehet, előkészített tooshare hello sablon és hello teljesítményadatokat nézetét.</span><span class="sxs-lookup"><span data-stu-id="65e0e-165">Be prepared tooshare hello template and a view of hello performance data.</span></span>

[audit]: ./media/virtual-machine-scale-sets-troubleshoot/image3.png
[explorer]: ./media/virtual-machine-scale-sets-troubleshoot/image1.png
[tables]: ./media/virtual-machine-scale-sets-troubleshoot/image4.png
