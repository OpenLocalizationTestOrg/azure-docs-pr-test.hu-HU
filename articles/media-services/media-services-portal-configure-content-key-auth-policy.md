---
title: "Az Azure portál használatával Tartalomkulcs hitelesítési szabályzatának konfigurálása |} Microsoft Docs"
description: "Útmutató: a tartalomkulcs hitelesítési szabályzatának konfigurálása."
services: media-services
documentationcenter: 
author: juliako
manager: cfowler
editor: 
ms.assetid: ee82a3fa-c34b-48f2-a108-8ba321f1691e
ms.service: media-services
ms.workload: media
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/09/2017
ms.author: juliako
ms.openlocfilehash: 5a35c7255a1c30a693862589c14f6a22a1900790
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 08/29/2017
---
# <a name="configure-content-key-authorization-policy"></a><span data-ttu-id="24b9f-103">Konfigurálja a Tartalomkulcs-hitelesítési házirend</span><span class="sxs-lookup"><span data-stu-id="24b9f-103">Configure Content Key Authorization Policy</span></span>
[!INCLUDE [media-services-selector-content-key-auth-policy](../../includes/media-services-selector-content-key-auth-policy.md)]

## <a name="overview"></a><span data-ttu-id="24b9f-104">Áttekintés</span><span class="sxs-lookup"><span data-stu-id="24b9f-104">Overview</span></span>
<span data-ttu-id="24b9f-105">A Microsoft Azure Media Services lehetővé teszi, hogy MPEG-DASH, Smooth Streaming vagy HTTP-Live-Streaming (HLS) streamjeit az Advanced Encryption Standard (AES) (a 128 bites titkosítási kulcsok használatával) vagy [Microsoft PlayReady DRM](https://www.microsoft.com/playready/overview/).</span><span class="sxs-lookup"><span data-stu-id="24b9f-105">Microsoft Azure Media Services enables you to deliver MPEG-DASH, Smooth Streaming, and HTTP-Live-Streaming (HLS) streams protected with Advanced Encryption Standard (AES) (using 128-bit encryption keys) or [Microsoft PlayReady DRM](https://www.microsoft.com/playready/overview/).</span></span> <span data-ttu-id="24b9f-106">AMS azt is lehetővé teszi, hogy a Widevine DRM titkosított DASH-streameket.</span><span class="sxs-lookup"><span data-stu-id="24b9f-106">AMS also enables you to deliver DASH streams encrypted with Widevine DRM.</span></span> <span data-ttu-id="24b9f-107">Mind a PlayReady, mind a Widevine titkosítása a Common Encryption (ISO/IEC 23001-7 CENC) szabvány specifikációi szerint történik.</span><span class="sxs-lookup"><span data-stu-id="24b9f-107">Both PlayReady and Widevine are encrypted per the Common Encryption (ISO/IEC 23001-7 CENC) specification.</span></span>

<span data-ttu-id="24b9f-108">A Media Services is biztosít a **kulcs/Licenctovábbítási szolgáltatása** , amelyekről az ügyfelek úgy szerezheti be AES-kulcsok vagy a PlayReady vagy Widevine-licencek számára, hogy a titkosított tartalmat.</span><span class="sxs-lookup"><span data-stu-id="24b9f-108">Media Services also provides a **Key/License Delivery Service** from which clients can obtain AES keys or PlayReady/Widevine licenses to play the encrypted content.</span></span>

<span data-ttu-id="24b9f-109">Ez a témakör bemutatja, hogyan használható az Azure-portálon konfigurálja a tartalomkulcs-hitelesítési házirendet.</span><span class="sxs-lookup"><span data-stu-id="24b9f-109">This topic shows how to use the Azure portal to configure the content key authorization policy.</span></span> <span data-ttu-id="24b9f-110">A kulcs később használható a dinamikusan titkosítani.</span><span class="sxs-lookup"><span data-stu-id="24b9f-110">The key can later be used to dynamically encrypt your content.</span></span> <span data-ttu-id="24b9f-111">Vegye figyelembe, hogy jelenleg titkosíthatja a következő adatfolyam-formátumok: HLS, MPEG DASH vagy Smooth Streaming.</span><span class="sxs-lookup"><span data-stu-id="24b9f-111">Note that currently you can encrypt the following streaming formats: HLS, MPEG DASH, and Smooth Streaming.</span></span> <span data-ttu-id="24b9f-112">Progresszív letöltés nem titkosítható.</span><span class="sxs-lookup"><span data-stu-id="24b9f-112">You cannot encrypt progressive downloads.</span></span>

<span data-ttu-id="24b9f-113">Amikor egy player olyan adatfolyamra, amely dinamikusan legyen titkosítva van beállítva, a Media Services a konfigurált kulcs segítségével dinamikusan titkosítani az AES vagy DRM titkosítással.</span><span class="sxs-lookup"><span data-stu-id="24b9f-113">When a player requests a stream that is set to be dynamically encrypted, Media Services uses the configured key to dynamically encrypt your content using AES or DRM encryption.</span></span> <span data-ttu-id="24b9f-114">Az adatfolyam visszafejtése, a Windows Media player a kulcs kézbesítési szolgáltatás fog igényelni a kulcsot.</span><span class="sxs-lookup"><span data-stu-id="24b9f-114">To decrypt the stream, the player will request the key from the key delivery service.</span></span> <span data-ttu-id="24b9f-115">Döntse el, hogy a felhasználó jogosult-e a kulcs eléréséhez, hogy a szolgáltatás értékeli az engedélyezési házirendeket, amelyek a kulcshoz megadott.</span><span class="sxs-lookup"><span data-stu-id="24b9f-115">To decide whether or not the user is authorized to get the key, the service evaluates the authorization policies that you specified for the key.</span></span>

<span data-ttu-id="24b9f-116">Ha azt tervezi, hogy több tartalomkulcs esetleg adjon meg egy **kulcs/Licenctovábbítási szolgáltatása** eltérő a Media Services kulcs kézbesítési szolgáltatás URL-CÍMÉT használja a Media Services .NET SDK-t vagy a REST API-k.</span><span class="sxs-lookup"><span data-stu-id="24b9f-116">If you plan to have multiple content keys or want to specify a **Key/License Delivery Service** URL other than the Media Services key delivery service, use Media Services .NET SDK or REST APIs.</span></span>

[<span data-ttu-id="24b9f-117">Media Services .NET SDK használatával Tartalomkulcs hitelesítési szabályzatának konfigurálása</span><span class="sxs-lookup"><span data-stu-id="24b9f-117">Configure Content Key Authorization Policy using Media Services .NET SDK</span></span>](media-services-dotnet-configure-content-key-auth-policy.md)

[<span data-ttu-id="24b9f-118">Media Services REST API használatával Tartalomkulcs hitelesítési szabályzatának konfigurálása</span><span class="sxs-lookup"><span data-stu-id="24b9f-118">Configure Content Key Authorization Policy using Media Services REST API</span></span>](media-services-rest-configure-content-key-auth-policy.md)

### <a name="some-considerations-apply"></a><span data-ttu-id="24b9f-119">Vegye figyelembe a következőket:</span><span class="sxs-lookup"><span data-stu-id="24b9f-119">Some considerations apply:</span></span>
* <span data-ttu-id="24b9f-120">Az AMS-fiók létrehozásakor egy **alapértelmezett** adatfolyam-továbbítási végpontra a fiókja hozzáadódik a **leállítva** állapotát.</span><span class="sxs-lookup"><span data-stu-id="24b9f-120">When your AMS account is created a **default** streaming endpoint is added  to your account in the **Stopped** state.</span></span> <span data-ttu-id="24b9f-121">Start streaming a tartalmat, és használja fel a dinamikus csomagolás és a dinamikus titkosítás, az adatfolyam-továbbítási végpontjának tartalmaznia kell a **futtató** állapotát.</span><span class="sxs-lookup"><span data-stu-id="24b9f-121">To start streaming your content and take advantage of dynamic packaging and dynamic encryption, your streaming endpoint has to be in the **Running** state.</span></span> 
* <span data-ttu-id="24b9f-122">Az eszköz tartalmaznia kell egy adaptív sávszélességű MP4 vagy Smooth Streaming-fájlsorozattá készletét.</span><span class="sxs-lookup"><span data-stu-id="24b9f-122">Your asset must contain a set of adaptive bitrate MP4s or adaptive bitrate Smooth Streaming files.</span></span> <span data-ttu-id="24b9f-123">További információkért lásd: [kódolása egy eszköz](media-services-encode-asset.md).</span><span class="sxs-lookup"><span data-stu-id="24b9f-123">For more information, see [Encode an asset](media-services-encode-asset.md).</span></span>
* <span data-ttu-id="24b9f-124">A kulcs kézbesítési szolgáltatás 15 percig gyorsítótárazza a ContentKeyAuthorizationPolicy és a kapcsolódó objektumok (házirend-beállítások és korlátozásai).</span><span class="sxs-lookup"><span data-stu-id="24b9f-124">The Key Delivery service caches ContentKeyAuthorizationPolicy and its related objects (policy options and restrictions) for 15 minutes.</span></span>  <span data-ttu-id="24b9f-125">Ha létrehoz egy ContentKeyAuthorizationPolicy, és adja meg, hogy a "Token" korlátozás, tesztelje azt, és majd a házirend "Megnyitás" korlátozás, előtt a házirend vált, a "Megnyitás" verziójának a házirend nagyjából 15 percig tart.</span><span class="sxs-lookup"><span data-stu-id="24b9f-125">If you create a ContentKeyAuthorizationPolicy and specify to use a “Token” restriction, then test it, and then update the policy to “Open” restriction, it will take roughly 15 minutes before the policy switches to the “Open” version of the policy.</span></span>

## <a name="how-to-configure-the-key-authorization-policy"></a><span data-ttu-id="24b9f-126">Útmutató: a hitelesítési házirend konfigurálása</span><span class="sxs-lookup"><span data-stu-id="24b9f-126">How to: configure the key authorization policy</span></span>
<span data-ttu-id="24b9f-127">A hitelesítési házirend konfigurálásához jelölje ki a **TARTALOMVÉDELEM** lap.</span><span class="sxs-lookup"><span data-stu-id="24b9f-127">To configure the key authorization policy, select the **CONTENT PROTECTION** page.</span></span>

<span data-ttu-id="24b9f-128">A Media Services szolgáltatásban több különböző módot is beállíthat, amelynek segítségével a rendszer hitelesítheti a kulcskérelmet küldő felhasználókat.</span><span class="sxs-lookup"><span data-stu-id="24b9f-128">Media Services supports multiple ways of authenticating users who make key requests.</span></span> <span data-ttu-id="24b9f-129">A tartalomkulcs-hitelesítési házirend rendelkezhet **nyissa meg a**, **token**, vagy **IP** engedélyezési korlátozások (**IP** konfigurálható REST- vagy .NET SDK-val).</span><span class="sxs-lookup"><span data-stu-id="24b9f-129">The content key authorization policy can have **open**, **token**, or **IP** authorization restrictions (**IP** can be configured with REST or .NET SDK).</span></span>

### <a name="open-restriction"></a><span data-ttu-id="24b9f-130">Nyissa meg a szoftverkorlátozó</span><span class="sxs-lookup"><span data-stu-id="24b9f-130">Open restriction</span></span>
<span data-ttu-id="24b9f-131">A **nyissa meg a** korlátozás azt jelenti, hogy a rendszer számára, akik egy kulcs kérést fog továbbítani a kulcsot.</span><span class="sxs-lookup"><span data-stu-id="24b9f-131">The **open** restriction means the system will deliver the key to anyone who makes a key request.</span></span> <span data-ttu-id="24b9f-132">Ez a korlátozás tesztelési célokra hasznos lehet.</span><span class="sxs-lookup"><span data-stu-id="24b9f-132">This restriction might be useful for testing purposes.</span></span>

![OpenPolicy][open_policy]

### <a name="token-restriction"></a><span data-ttu-id="24b9f-134">Token korlátozása</span><span class="sxs-lookup"><span data-stu-id="24b9f-134">Token restriction</span></span>
<span data-ttu-id="24b9f-135">A token korlátozott házirend kiválasztásához nyomja le az **TOKEN** gombra.</span><span class="sxs-lookup"><span data-stu-id="24b9f-135">To choose the token restricted policy, press the **TOKEN** button.</span></span>

<span data-ttu-id="24b9f-136">A **token** korlátozott házirend által kiadott tokennek kell fűzni a **Secure Token Service** (STS).</span><span class="sxs-lookup"><span data-stu-id="24b9f-136">The **token** restricted policy must be accompanied by a token issued by a **Secure Token Service** (STS).</span></span> <span data-ttu-id="24b9f-137">A Media Services tokeneket támogatja a **Simple Web Tokens** ([SWT](https://msdn.microsoft.com/library/gg185950.aspx#BKMK_2)) formátumú és **JSON Web Token** (JWT) formátumú.</span><span class="sxs-lookup"><span data-stu-id="24b9f-137">Media Services supports tokens in the **Simple Web Tokens** ([SWT](https://msdn.microsoft.com/library/gg185950.aspx#BKMK_2)) format and **JSON Web Token** (JWT) format.</span></span> <span data-ttu-id="24b9f-138">További információ: [JWT jogkivonat hitelesítési](http://www.gtrifonov.com/2015/01/03/jwt-token-authentication-in-azure-media-services-and-dynamic-encryption/).</span><span class="sxs-lookup"><span data-stu-id="24b9f-138">For information, see [JWT token authentication](http://www.gtrifonov.com/2015/01/03/jwt-token-authentication-in-azure-media-services-and-dynamic-encryption/).</span></span>

<span data-ttu-id="24b9f-139">Nem biztosít a Media Services **Token szolgáltatások biztonságos**.</span><span class="sxs-lookup"><span data-stu-id="24b9f-139">Media Services does not provide **Secure Token Services**.</span></span> <span data-ttu-id="24b9f-140">Hozzon létre egy egyéni STS, vagy probléma jogkivonatokat a Microsoft Azure ACS kihasználja.</span><span class="sxs-lookup"><span data-stu-id="24b9f-140">You can create a custom STS or leverage Microsoft Azure ACS to issue tokens.</span></span> <span data-ttu-id="24b9f-141">Az STS be kell állítani a megadott kulcs és a probléma JOGCÍMEKKEL, amely a token korlátozás konfigurációjában megadott aláírt jogkivonat létrehozásához.</span><span class="sxs-lookup"><span data-stu-id="24b9f-141">The STS must be configured to create a token signed with the specified key and issue claims that you specified in the token restriction configuration.</span></span> <span data-ttu-id="24b9f-142">A Media Services kulcs kézbesítési szolgáltatás a titkosítási kulcs visszatér az ügyfélhez, ha a jogkivonat érvényes, és a jogkivonatában lévő jogcímeket megegyezzenek a tartalomkulcsot.</span><span class="sxs-lookup"><span data-stu-id="24b9f-142">The Media Services key delivery service will return the encryption key to the client if the token is valid and the claims in the token match those configured for the content key.</span></span> <span data-ttu-id="24b9f-143">További információkért lásd: [használata Azure ACS probléma jogkivonatokat a](http://mingfeiy.com/acs-with-key-services).</span><span class="sxs-lookup"><span data-stu-id="24b9f-143">For more information, see [Use Azure ACS to issue tokens](http://mingfeiy.com/acs-with-key-services).</span></span>

<span data-ttu-id="24b9f-144">Konfigurálásakor a **TOKEN** korlátozott házirend, meg kell adni az értékeket **ellenőrző kulcs**, **kibocsátó** és **célközönség**.</span><span class="sxs-lookup"><span data-stu-id="24b9f-144">When configuring the **TOKEN** restricted policy, you must set values for **verification key**, **issuer** and **audience**.</span></span> <span data-ttu-id="24b9f-145">Az elsődleges hitelesítési kulcs, amely a token aláírt kulcsot tartalmazza, a kibocsátó a biztonságos biztonságijogkivonat-szolgáltatás, amely kibocsátja a jogkivonatot.</span><span class="sxs-lookup"><span data-stu-id="24b9f-145">The primary verification key contains the key that the token was signed with, issuer is the secure token service that issues the token.</span></span> <span data-ttu-id="24b9f-146">A célközönség (más néven hatókör) ismerteti a jogkivonat a leképezést, vagy az erőforrás a token engedélyezi a hozzáférést.</span><span class="sxs-lookup"><span data-stu-id="24b9f-146">The audience (sometimes called scope) describes the intent of the token or the resource the token authorizes access to.</span></span> <span data-ttu-id="24b9f-147">A Media Services kulcs kézbesítési szolgáltatás ellenőrzi, hogy ezek az értékek a token egyeznek-e a sablonban szereplő értékeket.</span><span class="sxs-lookup"><span data-stu-id="24b9f-147">The Media Services key delivery service validates that these values in the token match the values in the template.</span></span>

### <a name="playready"></a><span data-ttu-id="24b9f-148">PlayReady</span><span class="sxs-lookup"><span data-stu-id="24b9f-148">PlayReady</span></span>
<span data-ttu-id="24b9f-149">Ha az a tartalmak védelmére **PlayReady**, az egyikét meg kell adni a hitelesítési házirend-e a PlayReady licencsablon definiáló XML-karakterlánc.</span><span class="sxs-lookup"><span data-stu-id="24b9f-149">When protecting your content with **PlayReady**, one of the things you need to specify in your authorization policy is an XML string that defines the PlayReady license template.</span></span> <span data-ttu-id="24b9f-150">Alapértelmezés szerint állítsa be a következő házirendet:</span><span class="sxs-lookup"><span data-stu-id="24b9f-150">By default, the following policy is set:</span></span>

<span data-ttu-id="24b9f-151"><PlayReadyLicenseResponseTemplate xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.microsoft.com/Azure/MediaServices/KeyDelivery/PlayReadyTemplate/v1"><LicenseTemplates> <PlayReadyLicenseTemplate> <AllowTestDevices>igaz</AllowTestDevices> <ContentKey i:type="ContentEncryptionKeyFromHeader" /> <LicenseType>Nonpersistent</LicenseType> <PlayRight> <AllowPassingVideoContentToUnknownOutput>engedélyezett</AllowPassingVideoContentToUnknownOutput> </PlayRight> </PlayReadyLicenseTemplate> </LicenseTemplates></PlayReadyLicenseResponseTemplate></span><span class="sxs-lookup"><span data-stu-id="24b9f-151"><PlayReadyLicenseResponseTemplate xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.microsoft.com/Azure/MediaServices/KeyDelivery/PlayReadyTemplate/v1"> <LicenseTemplates> <PlayReadyLicenseTemplate><AllowTestDevices>true</AllowTestDevices> <ContentKey i:type="ContentEncryptionKeyFromHeader" /> <LicenseType>Nonpersistent</LicenseType> <PlayRight> <AllowPassingVideoContentToUnknownOutput>Allowed</AllowPassingVideoContentToUnknownOutput> </PlayRight> </PlayReadyLicenseTemplate> </LicenseTemplates> </PlayReadyLicenseResponseTemplate></span></span>

<span data-ttu-id="24b9f-152">Kattintson a **importálni a házirend XML-** gombra, és adja meg a különböző XML, amely megfelel a megadott XML-séma [Itt](media-services-playready-license-template-overview.md).</span><span class="sxs-lookup"><span data-stu-id="24b9f-152">You can click the **import policy xml** button and provide a different XML which conforms to the  XML Schema defined [here](media-services-playready-license-template-overview.md).</span></span>

## <a name="next-step"></a><span data-ttu-id="24b9f-153">Következő lépés</span><span class="sxs-lookup"><span data-stu-id="24b9f-153">Next step</span></span>
<span data-ttu-id="24b9f-154">Tekintse át a Media Services képzési terveket.</span><span class="sxs-lookup"><span data-stu-id="24b9f-154">Review Media Services learning paths.</span></span>

[!INCLUDE [media-services-learning-paths-include](../../includes/media-services-learning-paths-include.md)]

## <a name="provide-feedback"></a><span data-ttu-id="24b9f-155">Visszajelzés küldése</span><span class="sxs-lookup"><span data-stu-id="24b9f-155">Provide feedback</span></span>
[!INCLUDE [media-services-user-voice-include](../../includes/media-services-user-voice-include.md)]

[open_policy]: ./media/media-services-portal-configure-content-key-auth-policy/media-services-protect-content-with-open-restriction.png
[token_policy]: ./media/media-services-key-authorization-policy/media-services-protect-content-with-token-restriction.png

