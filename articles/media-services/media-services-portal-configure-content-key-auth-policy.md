---
title: "Azure-portálon aaaConfigure Tartalomkulcs hitelesítési szabályzatának használatával hello |} Microsoft Docs"
description: "Megtudhatja, hogyan tooconfigure a tartalomkulcs az engedélyezési házirend."
services: media-services
documentationcenter: 
author: juliako
manager: cfowler
editor: 
ms.assetid: ee82a3fa-c34b-48f2-a108-8ba321f1691e
ms.service: media-services
ms.workload: media
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/09/2017
ms.author: juliako
ms.openlocfilehash: 157fb691b7f71f4889228817e1dc64555e327d48
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/06/2017
---
# <a name="configure-content-key-authorization-policy"></a><span data-ttu-id="ded0a-103">Konfigurálja a Tartalomkulcs-hitelesítési házirend</span><span class="sxs-lookup"><span data-stu-id="ded0a-103">Configure Content Key Authorization Policy</span></span>
[!INCLUDE [media-services-selector-content-key-auth-policy](../../includes/media-services-selector-content-key-auth-policy.md)]

## <a name="overview"></a><span data-ttu-id="ded0a-104">Áttekintés</span><span class="sxs-lookup"><span data-stu-id="ded0a-104">Overview</span></span>
<span data-ttu-id="ded0a-105">A Microsoft Azure Media Services lehetővé teszi a toodeliver MPEG-DASH, Smooth Streaming vagy HTTP-Live-Streaming (HLS) streamjeit az Advanced Encryption Standard (AES) (a 128 bites titkosítási kulcsok használatával) vagy [Microsoft PlayReady DRM](https://www.microsoft.com/playready/overview/).</span><span class="sxs-lookup"><span data-stu-id="ded0a-105">Microsoft Azure Media Services enables you toodeliver MPEG-DASH, Smooth Streaming, and HTTP-Live-Streaming (HLS) streams protected with Advanced Encryption Standard (AES) (using 128-bit encryption keys) or [Microsoft PlayReady DRM](https://www.microsoft.com/playready/overview/).</span></span> <span data-ttu-id="ded0a-106">AMS azt is lehetővé teszi, hogy a akkor toodeliver DASH-streameket Widevine DRM titkosítva.</span><span class="sxs-lookup"><span data-stu-id="ded0a-106">AMS also enables you toodeliver DASH streams encrypted with Widevine DRM.</span></span> <span data-ttu-id="ded0a-107">Mind a PlayReady, mind a Widevine titkosítása hello Common Encryption (ISO/IEC 23001-7 CENC) megadását.</span><span class="sxs-lookup"><span data-stu-id="ded0a-107">Both PlayReady and Widevine are encrypted per hello Common Encryption (ISO/IEC 23001-7 CENC) specification.</span></span>

<span data-ttu-id="ded0a-108">A Media Services is biztosít a **kulcs/Licenctovábbítási szolgáltatása** , amelyekről az ügyfelek AES-kulcsok úgy szerezheti be, vagy a PlayReady vagy Widevine-licencek tooplay hello titkosított tartalmat.</span><span class="sxs-lookup"><span data-stu-id="ded0a-108">Media Services also provides a **Key/License Delivery Service** from which clients can obtain AES keys or PlayReady/Widevine licenses tooplay hello encrypted content.</span></span>

<span data-ttu-id="ded0a-109">Ez a témakör bemutatja, hogyan toouse hello Azure portál tooconfigure hello tartalomkulcs-hitelesítési szabályzatot.</span><span class="sxs-lookup"><span data-stu-id="ded0a-109">This topic shows how toouse hello Azure portal tooconfigure hello content key authorization policy.</span></span> <span data-ttu-id="ded0a-110">hello kulcs később használható toodynamically a tartalmak titkosításához.</span><span class="sxs-lookup"><span data-stu-id="ded0a-110">hello key can later be used toodynamically encrypt your content.</span></span> <span data-ttu-id="ded0a-111">Vegye figyelembe, hogy jelenleg titkosíthatja hello a következő formátumban: HLS, MPEG DASH vagy Smooth Streaming.</span><span class="sxs-lookup"><span data-stu-id="ded0a-111">Note that currently you can encrypt hello following streaming formats: HLS, MPEG DASH, and Smooth Streaming.</span></span> <span data-ttu-id="ded0a-112">Progresszív letöltés nem titkosítható.</span><span class="sxs-lookup"><span data-stu-id="ded0a-112">You cannot encrypt progressive downloads.</span></span>

<span data-ttu-id="ded0a-113">Amikor egy player olyan adatfolyamra, amely dinamikusan titkosított toobe van beállítva, a Media Services által használt konfigurált hello kulcs toodynamically titkosítása a tartalmat, AES vagy DRM titkosítással történik.</span><span class="sxs-lookup"><span data-stu-id="ded0a-113">When a player requests a stream that is set toobe dynamically encrypted, Media Services uses hello configured key toodynamically encrypt your content using AES or DRM encryption.</span></span> <span data-ttu-id="ded0a-114">toodecrypt hello stream, hello player fog igényelni hello kulcs hello kulcs kézbesítési szolgáltatásból.</span><span class="sxs-lookup"><span data-stu-id="ded0a-114">toodecrypt hello stream, hello player will request hello key from hello key delivery service.</span></span> <span data-ttu-id="ded0a-115">hello felhasználónak van-e toodecide engedélyezett tooget hello kulcs, hello szolgáltatás értékeli az hello kulcshoz megadott hello engedélyezési házirendeket.</span><span class="sxs-lookup"><span data-stu-id="ded0a-115">toodecide whether or not hello user is authorized tooget hello key, hello service evaluates hello authorization policies that you specified for hello key.</span></span>

<span data-ttu-id="ded0a-116">Ha a terv toohave több tartalomkulcs, és szeretné, hogy toospecify egy **kulcs/Licenctovábbítási szolgáltatása** eltérő hello Media Services kulcs kézbesítési szolgáltatás URL-CÍMÉT használja a Media Services .NET SDK-t vagy a REST API-k.</span><span class="sxs-lookup"><span data-stu-id="ded0a-116">If you plan toohave multiple content keys or want toospecify a **Key/License Delivery Service** URL other than hello Media Services key delivery service, use Media Services .NET SDK or REST APIs.</span></span>

[<span data-ttu-id="ded0a-117">Media Services .NET SDK használatával Tartalomkulcs hitelesítési szabályzatának konfigurálása</span><span class="sxs-lookup"><span data-stu-id="ded0a-117">Configure Content Key Authorization Policy using Media Services .NET SDK</span></span>](media-services-dotnet-configure-content-key-auth-policy.md)

[<span data-ttu-id="ded0a-118">Media Services REST API használatával Tartalomkulcs hitelesítési szabályzatának konfigurálása</span><span class="sxs-lookup"><span data-stu-id="ded0a-118">Configure Content Key Authorization Policy using Media Services REST API</span></span>](media-services-rest-configure-content-key-auth-policy.md)

### <a name="some-considerations-apply"></a><span data-ttu-id="ded0a-119">Vegye figyelembe a következőket:</span><span class="sxs-lookup"><span data-stu-id="ded0a-119">Some considerations apply:</span></span>
* <span data-ttu-id="ded0a-120">Az AMS-fiók létrehozásakor egy **alapértelmezett** adatfolyam-továbbítási végpontra tooyour fiók kerül hello **leállítva** állapotát.</span><span class="sxs-lookup"><span data-stu-id="ded0a-120">When your AMS account is created a **default** streaming endpoint is added  tooyour account in hello **Stopped** state.</span></span> <span data-ttu-id="ded0a-121">a dinamikus csomagolás és a dinamikus titkosítás, az adatfolyam-továbbítási végpontjának tartalmat, és hajtsa végre a megfelelő előnyeit streaming toostart toobe rendelkezik hello **futtató** állapotát.</span><span class="sxs-lookup"><span data-stu-id="ded0a-121">toostart streaming your content and take advantage of dynamic packaging and dynamic encryption, your streaming endpoint has toobe in hello **Running** state.</span></span> 
* <span data-ttu-id="ded0a-122">Az eszköz tartalmaznia kell egy adaptív sávszélességű MP4 vagy Smooth Streaming-fájlsorozattá készletét.</span><span class="sxs-lookup"><span data-stu-id="ded0a-122">Your asset must contain a set of adaptive bitrate MP4s or adaptive bitrate Smooth Streaming files.</span></span> <span data-ttu-id="ded0a-123">További információkért lásd: [kódolása egy eszköz](media-services-encode-asset.md).</span><span class="sxs-lookup"><span data-stu-id="ded0a-123">For more information, see [Encode an asset](media-services-encode-asset.md).</span></span>
* <span data-ttu-id="ded0a-124">hello kulcs kézbesítési szolgáltatás 15 percig gyorsítótárazza a ContentKeyAuthorizationPolicy és a kapcsolódó objektumok (házirend-beállítások és korlátozásai).</span><span class="sxs-lookup"><span data-stu-id="ded0a-124">hello Key Delivery service caches ContentKeyAuthorizationPolicy and its related objects (policy options and restrictions) for 15 minutes.</span></span>  <span data-ttu-id="ded0a-125">Ha hozzon létre egy ContentKeyAuthorizationPolicy és toouse "Token" korlátozás, adja meg, majd tesztelje, és frissítse a hello házirend túl "nyissa meg" korlátozás, mielőtt hello kapcsolók toohello "Megnyitás" házirendverzió hello házirend nagyjából 15 percig tart.</span><span class="sxs-lookup"><span data-stu-id="ded0a-125">If you create a ContentKeyAuthorizationPolicy and specify toouse a “Token” restriction, then test it, and then update hello policy too“Open” restriction, it will take roughly 15 minutes before hello policy switches toohello “Open” version of hello policy.</span></span>

## <a name="how-to-configure-hello-key-authorization-policy"></a><span data-ttu-id="ded0a-126">Hogyan: hello hitelesítési házirend konfigurálása</span><span class="sxs-lookup"><span data-stu-id="ded0a-126">How to: configure hello key authorization policy</span></span>
<span data-ttu-id="ded0a-127">tooconfigure hello hitelesítési szabályzatot, jelölje be hello **TARTALOMVÉDELEM** lap.</span><span class="sxs-lookup"><span data-stu-id="ded0a-127">tooconfigure hello key authorization policy, select hello **CONTENT PROTECTION** page.</span></span>

<span data-ttu-id="ded0a-128">A Media Services szolgáltatásban több különböző módot is beállíthat, amelynek segítségével a rendszer hitelesítheti a kulcskérelmet küldő felhasználókat.</span><span class="sxs-lookup"><span data-stu-id="ded0a-128">Media Services supports multiple ways of authenticating users who make key requests.</span></span> <span data-ttu-id="ded0a-129">hello tartalomkulcs-hitelesítési házirend rendelkezhet **nyissa meg a**, **token**, vagy **IP** engedélyezési korlátozások (**IP** konfigurálható REST- vagy .NET SDK-val).</span><span class="sxs-lookup"><span data-stu-id="ded0a-129">hello content key authorization policy can have **open**, **token**, or **IP** authorization restrictions (**IP** can be configured with REST or .NET SDK).</span></span>

### <a name="open-restriction"></a><span data-ttu-id="ded0a-130">Nyissa meg a szoftverkorlátozó</span><span class="sxs-lookup"><span data-stu-id="ded0a-130">Open restriction</span></span>
<span data-ttu-id="ded0a-131">Hello **nyissa meg a** korlátozás azt jelenti, hogy hello rendszer hello kulcs tooanyone kulcs kérést fog továbbítani.</span><span class="sxs-lookup"><span data-stu-id="ded0a-131">hello **open** restriction means hello system will deliver hello key tooanyone who makes a key request.</span></span> <span data-ttu-id="ded0a-132">Ez a korlátozás tesztelési célokra hasznos lehet.</span><span class="sxs-lookup"><span data-stu-id="ded0a-132">This restriction might be useful for testing purposes.</span></span>

![OpenPolicy][open_policy]

### <a name="token-restriction"></a><span data-ttu-id="ded0a-134">Token korlátozása</span><span class="sxs-lookup"><span data-stu-id="ded0a-134">Token restriction</span></span>
<span data-ttu-id="ded0a-135">toochoose hello token korlátozott házirend, nyomja meg az hello **TOKEN** gombra.</span><span class="sxs-lookup"><span data-stu-id="ded0a-135">toochoose hello token restricted policy, press hello **TOKEN** button.</span></span>

<span data-ttu-id="ded0a-136">Hello **token** korlátozott házirend által kiadott tokennek kell fűzni a **Secure Token Service** (STS).</span><span class="sxs-lookup"><span data-stu-id="ded0a-136">hello **token** restricted policy must be accompanied by a token issued by a **Secure Token Service** (STS).</span></span> <span data-ttu-id="ded0a-137">A Media Services hello támogatja a jogkivonatokat **Simple Web Tokens** ([SWT](https://msdn.microsoft.com/library/gg185950.aspx#BKMK_2)) formátumú és **JSON Web Token** (JWT) formátumú.</span><span class="sxs-lookup"><span data-stu-id="ded0a-137">Media Services supports tokens in hello **Simple Web Tokens** ([SWT](https://msdn.microsoft.com/library/gg185950.aspx#BKMK_2)) format and **JSON Web Token** (JWT) format.</span></span> <span data-ttu-id="ded0a-138">További információ: [JWT jogkivonat hitelesítési](http://www.gtrifonov.com/2015/01/03/jwt-token-authentication-in-azure-media-services-and-dynamic-encryption/).</span><span class="sxs-lookup"><span data-stu-id="ded0a-138">For information, see [JWT token authentication](http://www.gtrifonov.com/2015/01/03/jwt-token-authentication-in-azure-media-services-and-dynamic-encryption/).</span></span>

<span data-ttu-id="ded0a-139">Nem biztosít a Media Services **Token szolgáltatások biztonságos**.</span><span class="sxs-lookup"><span data-stu-id="ded0a-139">Media Services does not provide **Secure Token Services**.</span></span> <span data-ttu-id="ded0a-140">Hozzon létre egy egyéni STS, vagy használja a Microsoft Azure ACS tooissue jogkivonatokat.</span><span class="sxs-lookup"><span data-stu-id="ded0a-140">You can create a custom STS or leverage Microsoft Azure ACS tooissue tokens.</span></span> <span data-ttu-id="ded0a-141">hello STS kell lennie a megadott hello aláírt jogkivonat konfigurált toocreate hello token korlátozás a konfigurációban megadott kulcs és a probléma jogcímeket.</span><span class="sxs-lookup"><span data-stu-id="ded0a-141">hello STS must be configured toocreate a token signed with hello specified key and issue claims that you specified in hello token restriction configuration.</span></span> <span data-ttu-id="ded0a-142">hello Media Services kulcs kézbesítési szolgáltatás visszaadható hello titkosítási kulcs toohello ügyfél Ha hello jogkivonat érvényes, és hello hello jogkivonatában lévő jogcímeket egyeznek hello tartalomkulcsot konfigurálva.</span><span class="sxs-lookup"><span data-stu-id="ded0a-142">hello Media Services key delivery service will return hello encryption key toohello client if hello token is valid and hello claims in hello token match those configured for hello content key.</span></span> <span data-ttu-id="ded0a-143">További információkért lásd: [használata Azure ACS tooissue jogkivonatok](http://mingfeiy.com/acs-with-key-services).</span><span class="sxs-lookup"><span data-stu-id="ded0a-143">For more information, see [Use Azure ACS tooissue tokens](http://mingfeiy.com/acs-with-key-services).</span></span>

<span data-ttu-id="ded0a-144">Hello konfigurálásakor **TOKEN** korlátozott házirend, meg kell adni az értékeket **ellenőrző kulcs**, **kibocsátó** és **célközönség**.</span><span class="sxs-lookup"><span data-stu-id="ded0a-144">When configuring hello **TOKEN** restricted policy, you must set values for **verification key**, **issuer** and **audience**.</span></span> <span data-ttu-id="ded0a-145">hello elsődleges hitelesítési kulcsot tartalmazó hello kulcsfontosságú, hogy hello token lett aláírva, illetve kibocsátó hello biztonságos biztonságijogkivonat-szolgáltatás által kiállított hello jogkivonat.</span><span class="sxs-lookup"><span data-stu-id="ded0a-145">hello primary verification key contains hello key that hello token was signed with, issuer is hello secure token service that issues hello token.</span></span> <span data-ttu-id="ded0a-146">hello célközönség (más néven hatókör) hello token hello célját ismerteti, vagy hello erőforrás hello token engedélyezi a hozzáférést.</span><span class="sxs-lookup"><span data-stu-id="ded0a-146">hello audience (sometimes called scope) describes hello intent of hello token or hello resource hello token authorizes access to.</span></span> <span data-ttu-id="ded0a-147">hello Media Services kulcs kézbesítési szolgáltatás ellenőrzi, hogy ezek az értékek hello token értékekre, hello hello sablont.</span><span class="sxs-lookup"><span data-stu-id="ded0a-147">hello Media Services key delivery service validates that these values in hello token match hello values in hello template.</span></span>

### <a name="playready"></a><span data-ttu-id="ded0a-148">PlayReady</span><span class="sxs-lookup"><span data-stu-id="ded0a-148">PlayReady</span></span>
<span data-ttu-id="ded0a-149">Ha az a tartalmak védelmére **PlayReady**, egy hello dolog van szüksége az engedélyezési házirendben toospecify hello PlayReady licencsablon definiáló XML-karakterlánc.</span><span class="sxs-lookup"><span data-stu-id="ded0a-149">When protecting your content with **PlayReady**, one of hello things you need toospecify in your authorization policy is an XML string that defines hello PlayReady license template.</span></span> <span data-ttu-id="ded0a-150">Alapértelmezés szerint a következő házirend hello van beállítva:</span><span class="sxs-lookup"><span data-stu-id="ded0a-150">By default, hello following policy is set:</span></span>

<span data-ttu-id="ded0a-151"><PlayReadyLicenseResponseTemplate xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.microsoft.com/Azure/MediaServices/KeyDelivery/PlayReadyTemplate/v1"><LicenseTemplates> <PlayReadyLicenseTemplate> <AllowTestDevices>igaz</AllowTestDevices> <ContentKey i:type="ContentEncryptionKeyFromHeader" /> <LicenseType>Nonpersistent</LicenseType> <PlayRight> <AllowPassingVideoContentToUnknownOutput>engedélyezett</AllowPassingVideoContentToUnknownOutput> </PlayRight> </PlayReadyLicenseTemplate> </LicenseTemplates></PlayReadyLicenseResponseTemplate></span><span class="sxs-lookup"><span data-stu-id="ded0a-151"><PlayReadyLicenseResponseTemplate xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.microsoft.com/Azure/MediaServices/KeyDelivery/PlayReadyTemplate/v1"> <LicenseTemplates> <PlayReadyLicenseTemplate><AllowTestDevices>true</AllowTestDevices> <ContentKey i:type="ContentEncryptionKeyFromHeader" /> <LicenseType>Nonpersistent</LicenseType> <PlayRight> <AllowPassingVideoContentToUnknownOutput>Allowed</AllowPassingVideoContentToUnknownOutput> </PlayRight> </PlayReadyLicenseTemplate> </LicenseTemplates> </PlayReadyLicenseResponseTemplate></span></span>

<span data-ttu-id="ded0a-152">Kattinthat a hello **importálni a házirend XML-** gombra, és adjon meg egy másik-XML fájlok, amelyek megfelel a megadott XML-séma toohello [Itt](media-services-playready-license-template-overview.md).</span><span class="sxs-lookup"><span data-stu-id="ded0a-152">You can click hello **import policy xml** button and provide a different XML which conforms toohello  XML Schema defined [here](media-services-playready-license-template-overview.md).</span></span>

## <a name="next-step"></a><span data-ttu-id="ded0a-153">Következő lépés</span><span class="sxs-lookup"><span data-stu-id="ded0a-153">Next step</span></span>
<span data-ttu-id="ded0a-154">Tekintse át a Media Services képzési terveket.</span><span class="sxs-lookup"><span data-stu-id="ded0a-154">Review Media Services learning paths.</span></span>

[!INCLUDE [media-services-learning-paths-include](../../includes/media-services-learning-paths-include.md)]

## <a name="provide-feedback"></a><span data-ttu-id="ded0a-155">Visszajelzés küldése</span><span class="sxs-lookup"><span data-stu-id="ded0a-155">Provide feedback</span></span>
[!INCLUDE [media-services-user-voice-include](../../includes/media-services-user-voice-include.md)]

[open_policy]: ./media/media-services-portal-configure-content-key-auth-policy/media-services-protect-content-with-open-restriction.png
[token_policy]: ./media/media-services-key-authorization-policy/media-services-protect-content-with-token-restriction.png

