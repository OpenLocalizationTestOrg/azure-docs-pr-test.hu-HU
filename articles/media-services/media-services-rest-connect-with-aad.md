---
title: "az Azure AD hitelesítési tooaccess Azure Media Services API többi aaaUse |} Microsoft Docs"
description: "Ismerje meg, hogyan REST-tooaccess Azure Media Services API az Azure Active Directory-hitelesítés használatával."
services: media-services
documentationcenter: 
author: willzhan
manager: cfowler
editor: 
ms.service: media-services
ms.workload: media
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/17/2017
ms.author: willzhan;juliako
ms.openlocfilehash: 114f7bdde3a8f5fe6189d712e05b6afdc8a8787a
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/06/2017
---
# <a name="use-azure-ad-authentication-tooaccess-hello-azure-media-services-api-with-rest"></a><span data-ttu-id="3fce5-103">Használja az Azure AD hitelesítési tooaccess hello Azure Media Services API többi</span><span class="sxs-lookup"><span data-stu-id="3fce5-103">Use Azure AD authentication tooaccess hello Azure Media Services API with REST</span></span>

<span data-ttu-id="3fce5-104">hello Azure Media Services team közzétette az Azure Media Services access Azure Active Directory (Azure AD-) hitelesítés támogatása.</span><span class="sxs-lookup"><span data-stu-id="3fce5-104">hello Azure Media Services team has released Azure Active Directory (Azure AD) authentication support for Azure Media Services access.</span></span> <span data-ttu-id="3fce5-105">Azt is bejelentette tervek toodeprecate Azure hozzáférés-vezérlés szolgáltatás hitelesítési a Media Services-hozzáféréshez.</span><span class="sxs-lookup"><span data-stu-id="3fce5-105">It also announced plans toodeprecate Azure Access Control service authentication for Media Services access.</span></span> <span data-ttu-id="3fce5-106">Mivel minden Azure-előfizetés, és minden Media Services-fiók csatolt tooan az Azure AD-bérlőt, az Azure AD hitelesítési támogatás számos lehetőséget kínál számos biztonsági szempontból előnyökkel járhat.</span><span class="sxs-lookup"><span data-stu-id="3fce5-106">Because every Azure subscription, and every Media Services account, is attached tooan Azure AD tenant, Azure AD authentication support brings many security benefits.</span></span> <span data-ttu-id="3fce5-107">A változás- és az áttelepítés (ha az alkalmazás hello Media Services .NET SDK-t használ) kapcsolatos részleteket hello következő blog küldi, és annak:</span><span class="sxs-lookup"><span data-stu-id="3fce5-107">For details about this change and migration (if you use hello Media Services .NET SDK for your app), see hello following blog posts and articles:</span></span>

- [<span data-ttu-id="3fce5-108">Az Azure Media Services időről támogatás az Azure AD és a hozzáférés-vezérlés hitelesítési elavulása</span><span class="sxs-lookup"><span data-stu-id="3fce5-108">Azure Media Services announces support for Azure AD and deprecation of Access Control authentication</span></span>](https://azure.microsoft.com/blog/azure%20media%20service%20aad%20auth%20and%20acs%20deprecation)
- [<span data-ttu-id="3fce5-109">Access Azure Media Services API az Azure AD-hitelesítés használatával</span><span class="sxs-lookup"><span data-stu-id="3fce5-109">Access Azure Media Services API by using Azure AD authentication</span></span>](media-services-use-aad-auth-to-access-ams-api.md)
- [<span data-ttu-id="3fce5-110">Az Azure AD hitelesítési tooaccess Azure Media Services API használata a Microsoft .NET használatával</span><span class="sxs-lookup"><span data-stu-id="3fce5-110">Use Azure AD authentication tooaccess Azure Media Services API by using Microsoft .NET</span></span>](media-services-dotnet-get-started-with-aad.md)
- [<span data-ttu-id="3fce5-111">Ismerkedés az Azure AD-alapú hitelesítés használatával hello Azure-portálon</span><span class="sxs-lookup"><span data-stu-id="3fce5-111">Getting started with Azure AD authentication by using hello Azure portal</span></span>](media-services-portal-get-started-with-aad.md)

<span data-ttu-id="3fce5-112">Néhány szükséges toodevelop a Media Services-megoldások hello megkötések a következő alapján:</span><span class="sxs-lookup"><span data-stu-id="3fce5-112">Some customers need toodevelop their Media Services solutions under hello following constraints:</span></span>

*   <span data-ttu-id="3fce5-113">Microsoft .NET vagy C# programozási nyelven használata, vagy hello futtatókörnyezetben nincs Windows.</span><span class="sxs-lookup"><span data-stu-id="3fce5-113">They use a programming language that is not Microsoft .NET or C#, or hello runtime environment is not Windows.</span></span>
*   <span data-ttu-id="3fce5-114">Az Azure AD szalagtárak, például az Active Directory hitelesítési Kódtárai válnak elérhetővé a programozási nyelv hello, vagy nem használható a futtatókörnyezetben.</span><span class="sxs-lookup"><span data-stu-id="3fce5-114">Azure AD libraries such as Active Directory Authentication Libraries are not available for hello programming language or can't be used for their runtime environment.</span></span>

<span data-ttu-id="3fce5-115">Egyes ügyfelek alkalmazások hozzáférés-vezérlés hitelesítéséhez és access Azure Media Services REST API használatával fejlesztett ki.</span><span class="sxs-lookup"><span data-stu-id="3fce5-115">Some customers have developed applications by using REST API for both Access Control authentication and Azure Media Services access.</span></span> <span data-ttu-id="3fce5-116">Ezek az ügyfelek olyan módon toouse csak hello REST API-t az Azure AD-alapú hitelesítés van szüksége, és további Azure Media Services eléréséhez.</span><span class="sxs-lookup"><span data-stu-id="3fce5-116">For these customers, you need a way toouse only hello REST API for Azure AD authentication and subsequent Azure Media Services access.</span></span> <span data-ttu-id="3fce5-117">Toonot kell bármelyik hello Azure AD-tárak vagy a Media Services .NET SDK hello támaszkodjon.</span><span class="sxs-lookup"><span data-stu-id="3fce5-117">You need toonot rely on any of hello Azure AD libraries or on hello Media Services .NET SDK.</span></span> <span data-ttu-id="3fce5-118">Ez a cikk azt írják le a megoldást, és adja meg mintakód ehhez a forgatókönyvhöz.</span><span class="sxs-lookup"><span data-stu-id="3fce5-118">In this article, we describe a solution and provide sample code for this scenario.</span></span> <span data-ttu-id="3fce5-119">Mivel hello kód minden REST API-hívásokkal, minden Azure ad-val nem függőség vagy az Azure Media Services library, hello kód könnyen lehet lefordított tooany más programozási nyelv.</span><span class="sxs-lookup"><span data-stu-id="3fce5-119">Because hello code is all REST API calls, with no dependency on any Azure AD or Azure Media Services library, hello code can easily be translated tooany other programming language.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="3fce5-120">Jelenleg a Media Services hello Azure hozzáférés-vezérlés szolgáltatások hitelesítési modellt támogatja.</span><span class="sxs-lookup"><span data-stu-id="3fce5-120">Currently, Media Services supports hello Azure Access Control services authentication model.</span></span> <span data-ttu-id="3fce5-121">Azonban hozzáférés-vezérlés hitelesítési elavulttá válik 2018. június 1.</span><span class="sxs-lookup"><span data-stu-id="3fce5-121">However, Access Control authentication will be deprecated June 1, 2018.</span></span> <span data-ttu-id="3fce5-122">Azt javasoljuk, hogy az áttelepített toohello az Azure AD hitelesítési modell lehető legrövidebb időn belül.</span><span class="sxs-lookup"><span data-stu-id="3fce5-122">We recommend that you migrate toohello Azure AD authentication model as soon as possible.</span></span>


## <a name="design"></a><span data-ttu-id="3fce5-123">Tervezés</span><span class="sxs-lookup"><span data-stu-id="3fce5-123">Design</span></span>

<span data-ttu-id="3fce5-124">Ez a cikk a következő hitelesítési és engedélyezési tervezési hello használjuk:</span><span class="sxs-lookup"><span data-stu-id="3fce5-124">In this article, we use hello following authentication and authorization design:</span></span>

*  <span data-ttu-id="3fce5-125">Protokoll: OAuth 2.0-s.</span><span class="sxs-lookup"><span data-stu-id="3fce5-125">Authorization protocol: OAuth 2.0.</span></span> <span data-ttu-id="3fce5-126">OAuth 2.0 olyan webes biztonsági szabvány, amely lefedi a hitelesítést és az engedélyezést.</span><span class="sxs-lookup"><span data-stu-id="3fce5-126">OAuth 2.0 is a web security standard that covers both authentication and authorization.</span></span> <span data-ttu-id="3fce5-127">Azt támogatják Google, a Microsoft, a Facebook-on és a PayPal.</span><span class="sxs-lookup"><span data-stu-id="3fce5-127">It is supported by Google, Microsoft, Facebook, and PayPal.</span></span> <span data-ttu-id="3fce5-128">2012. októberi azt lett erősítette meg.</span><span class="sxs-lookup"><span data-stu-id="3fce5-128">It was ratified October 2012.</span></span> <span data-ttu-id="3fce5-129">A Microsoft az OAuth 2.0 és az OpenID Connect erősen támogatja.</span><span class="sxs-lookup"><span data-stu-id="3fce5-129">Microsoft firmly supports OAuth 2.0 and OpenID Connect.</span></span> <span data-ttu-id="3fce5-130">Mindkét ezeknek a szabványoknak támogatottak több szolgáltatások és ügyfél könyvtárak, beleértve az Azure Active Directoryban, Open Web Interface .NET (OWIN) Katana, a és az Azure AD-könyvtárak.</span><span class="sxs-lookup"><span data-stu-id="3fce5-130">Both of these standards are supported in multiple services and client libraries, including Azure Active Directory, Open Web Interface for .NET (OWIN) Katana, and Azure AD libraries.</span></span>
*  <span data-ttu-id="3fce5-131">Támogatás típusa: ügyfél hitelesítő adatai megadják típusa.</span><span class="sxs-lookup"><span data-stu-id="3fce5-131">Grant type: Client credentials grant type.</span></span> <span data-ttu-id="3fce5-132">Ügyfél hitelesítő adatait az OAuth 2.0 hello négy grant típusok egyike.</span><span class="sxs-lookup"><span data-stu-id="3fce5-132">Client credentials is one of hello four grant types in OAuth 2.0.</span></span> <span data-ttu-id="3fce5-133">A Microsoft Azure AD Graph API access gyakran használják azt.</span><span class="sxs-lookup"><span data-stu-id="3fce5-133">It's often used for Azure AD Microsoft Graph API access.</span></span>
*  <span data-ttu-id="3fce5-134">Hitelesítési módszer: egyszerű szolgáltatást.</span><span class="sxs-lookup"><span data-stu-id="3fce5-134">Authentication mode: Service principal.</span></span> <span data-ttu-id="3fce5-135">hello más hitelesítési mód felhasználói vagy interaktív hitelesítés.</span><span class="sxs-lookup"><span data-stu-id="3fce5-135">hello other authentication mode is user or interactive authentication.</span></span>

<span data-ttu-id="3fce5-136">Összesen négy alkalmazáshoz vagy szolgáltatáshoz is érintett hello Azure AD hitelesítési és engedélyezési folyamat a Media Services használatával.</span><span class="sxs-lookup"><span data-stu-id="3fce5-136">A total of four applications or services are involved in hello Azure AD authentication and authorization flow for using Media Services.</span></span> <span data-ttu-id="3fce5-137">hello folyamata, hello alkalmazások és szolgáltatások hello a következő táblázat ismerteti:</span><span class="sxs-lookup"><span data-stu-id="3fce5-137">hello applications and services, and hello flow, are described in hello following table:</span></span>

|<span data-ttu-id="3fce5-138">Alkalmazás típusa</span><span class="sxs-lookup"><span data-stu-id="3fce5-138">Application type</span></span> |<span data-ttu-id="3fce5-139">Alkalmazás</span><span class="sxs-lookup"><span data-stu-id="3fce5-139">Application</span></span> |<span data-ttu-id="3fce5-140">Folyamat</span><span class="sxs-lookup"><span data-stu-id="3fce5-140">Flow</span></span>|
|---|---|---|
|<span data-ttu-id="3fce5-141">Ügyfél</span><span class="sxs-lookup"><span data-stu-id="3fce5-141">Client</span></span> | <span data-ttu-id="3fce5-142">Felhasználói alkalmazás vagy megoldás</span><span class="sxs-lookup"><span data-stu-id="3fce5-142">Customer app or solution</span></span> | <span data-ttu-id="3fce5-143">Ez az alkalmazás (ténylegesen, a proxy), mely hello Azure-előfizetést és hello media szolgáltatásfiók hozni hello Azure AD-bérlő regisztrálva van.</span><span class="sxs-lookup"><span data-stu-id="3fce5-143">This app (actually, its proxy) is registered in hello Azure AD tenant in which hello Azure subscription and hello media service account reside.</span></span> <span data-ttu-id="3fce5-144">hello szolgáltatás egyszerű hello regisztrált alkalmazás majd kap hello Access Control (IAM) hello media szolgáltatásfiók a tulajdonos vagy közreműködő szerepkörrel.</span><span class="sxs-lookup"><span data-stu-id="3fce5-144">hello service principal of hello registered app is then granted with Owner or Contributor role in hello Access Control (IAM) of hello media service account.</span></span> <span data-ttu-id="3fce5-145">hello szolgáltatás egyszerű hello app ID és az ügyfél ügyfélkulcs jelképezi.</span><span class="sxs-lookup"><span data-stu-id="3fce5-145">hello service principal is represented by hello app client ID and client secret.</span></span> |
|<span data-ttu-id="3fce5-146">Az identitásszolgáltató (IDP)</span><span class="sxs-lookup"><span data-stu-id="3fce5-146">Identity Provider (IDP)</span></span> | <span data-ttu-id="3fce5-147">Azure AD szolgáltatásba IDP</span><span class="sxs-lookup"><span data-stu-id="3fce5-147">Azure AD as IDP</span></span> | <span data-ttu-id="3fce5-148">hello regisztrált alkalmazás egyszerű szolgáltatásnév (ügyfél-azonosító és a titkos ügyfélkódot) hitelesítése az Azure AD szolgáltatásba hello IDP.</span><span class="sxs-lookup"><span data-stu-id="3fce5-148">hello registered app service principal (client ID and client secret) is authenticated by Azure AD as hello IDP.</span></span> <span data-ttu-id="3fce5-149">Ez a hitelesítés a belső és implicit módon történik.</span><span class="sxs-lookup"><span data-stu-id="3fce5-149">This authentication is performed internally and implicitly.</span></span> <span data-ttu-id="3fce5-150">Ügyfél-hitelesítő adatok folyamata, mint hello ügyfél hitelesítése hello felhasználó helyett.</span><span class="sxs-lookup"><span data-stu-id="3fce5-150">As in client credentials flow, hello client is authenticated instead of hello user.</span></span> |
|<span data-ttu-id="3fce5-151">Secure Token Service (STS) / OAuth-kiszolgáló</span><span class="sxs-lookup"><span data-stu-id="3fce5-151">Secure Token Service (STS)/OAuth server</span></span> | <span data-ttu-id="3fce5-152">Azure AD szolgáltatásba STS</span><span class="sxs-lookup"><span data-stu-id="3fce5-152">Azure AD as STS</span></span> | <span data-ttu-id="3fce5-153">Hello IDP (vagy az OAuth 2.0 feltételeit OAuth-kiszolgáló) a hitelesítés után egy hozzáférési jogkivonat vagy JSON webes jogkivonat (JWT) által kiadott STS/OAuth-kiszolgálójaként, az Azure AD hozzáférési toohello középső rétegbeli erőforrás: hello ebben az esetben a Media Services REST API végpontra.</span><span class="sxs-lookup"><span data-stu-id="3fce5-153">After authentication by hello IDP (or OAuth Server in OAuth 2.0 terms), an access token or JSON Web Token (JWT) is issued by Azure AD as STS/OAuth Server for access toohello middle-tier resource: in our case, hello Media Services REST API endpoint.</span></span> |
|<span data-ttu-id="3fce5-154">Erőforrás</span><span class="sxs-lookup"><span data-stu-id="3fce5-154">Resource</span></span> | <span data-ttu-id="3fce5-155">Media Services REST API-k</span><span class="sxs-lookup"><span data-stu-id="3fce5-155">Media Services REST API</span></span> | <span data-ttu-id="3fce5-156">Minden Media Services REST API hívása olyan hozzáférési jogkivonatot STS vagy hello OAuth kiszolgálóként az Azure AD által kiadott engedélyezve van.</span><span class="sxs-lookup"><span data-stu-id="3fce5-156">Every Media Services REST API call is authorized by an access token that is issued by Azure AD as STS or hello OAuth server.</span></span> |

<span data-ttu-id="3fce5-157">Hello mintakód futtatja, és rögzítheti a jwt-t vagy a hozzáférési tokent, ha a hello JWT rendelkezik a következő attribútumok hello:</span><span class="sxs-lookup"><span data-stu-id="3fce5-157">If you run hello sample code and capture a JWT or an access token, hello JWT has hello following attributes:</span></span>

    aud: "https://rest.media.azure.net",

    iss: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/",

    iat: 1497146280,

    nbf: 1497146280,
    exp: 1497150180,

    aio: "Y2ZgYDjuy7SptPzO/muf+uRu1B+ZDQA=",

    appid: "02ed1e8e-af8b-477e-af3d-7e7219a99ac6",

    appidacr: "1",

    idp: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/",

    oid: "a938cfcc-d3de-479c-b0dd-d4ffe6f50f7c",

    sub: "a938cfcc-d3de-479c-b0dd-d4ffe6f50f7c",

    tid: "72f988bf-86f1-41af-91ab-2d7cd011db47",

<span data-ttu-id="3fce5-158">Íme hello hozzárendelések hello attribútumok hello jwt-t és hello négy alkalmazásokban vagy a tábla megelőző hello szolgáltatást között:</span><span class="sxs-lookup"><span data-stu-id="3fce5-158">Here are hello mappings between hello attributes in hello JWT and hello four applications or services in hello preceding table:</span></span>

|<span data-ttu-id="3fce5-159">Alkalmazás típusa</span><span class="sxs-lookup"><span data-stu-id="3fce5-159">Application type</span></span> |<span data-ttu-id="3fce5-160">Alkalmazás</span><span class="sxs-lookup"><span data-stu-id="3fce5-160">Application</span></span> |<span data-ttu-id="3fce5-161">JWT-attribútum</span><span class="sxs-lookup"><span data-stu-id="3fce5-161">JWT attribute</span></span> |
|---|---|---|
|<span data-ttu-id="3fce5-162">Ügyfél</span><span class="sxs-lookup"><span data-stu-id="3fce5-162">Client</span></span> |<span data-ttu-id="3fce5-163">Felhasználói alkalmazás vagy megoldás</span><span class="sxs-lookup"><span data-stu-id="3fce5-163">Customer app or solution</span></span> |<span data-ttu-id="3fce5-164">AppID: "02ed1e8e-af8b-477e-af3d-7e7219a99ac6".</span><span class="sxs-lookup"><span data-stu-id="3fce5-164">appid: "02ed1e8e-af8b-477e-af3d-7e7219a99ac6".</span></span> <span data-ttu-id="3fce5-165">hello ügyfél-Azonosítóját az alkalmazás regisztrálni fogja tooAzure AD hello a következő szakaszban.</span><span class="sxs-lookup"><span data-stu-id="3fce5-165">hello client ID of an application you will register tooAzure AD in hello next section.</span></span> |
|<span data-ttu-id="3fce5-166">Az identitásszolgáltató (IDP)</span><span class="sxs-lookup"><span data-stu-id="3fce5-166">Identity Provider (IDP)</span></span> | <span data-ttu-id="3fce5-167">Azure AD szolgáltatásba IDP</span><span class="sxs-lookup"><span data-stu-id="3fce5-167">Azure AD as IDP</span></span> |<span data-ttu-id="3fce5-168">IDP: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/".</span><span class="sxs-lookup"><span data-stu-id="3fce5-168">idp: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/".</span></span>  <span data-ttu-id="3fce5-169">hello GUID az hello azonosítója a Microsoft bérlő (microsoft.onmicrosoft.com).</span><span class="sxs-lookup"><span data-stu-id="3fce5-169">hello GUID is hello ID of Microsoft tenant (microsoft.onmicrosoft.com).</span></span> <span data-ttu-id="3fce5-170">Mindegyik bérlő saját, egyedi azonosítóval rendelkezik</span><span class="sxs-lookup"><span data-stu-id="3fce5-170">Each tenant has its own, unique ID.</span></span> |
|<span data-ttu-id="3fce5-171">Secure Token Service (STS) / OAuth-kiszolgáló</span><span class="sxs-lookup"><span data-stu-id="3fce5-171">Secure Token Service (STS)/OAuth server</span></span> |<span data-ttu-id="3fce5-172">Azure AD szolgáltatásba STS</span><span class="sxs-lookup"><span data-stu-id="3fce5-172">Azure AD as STS</span></span> | <span data-ttu-id="3fce5-173">iss: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/".</span><span class="sxs-lookup"><span data-stu-id="3fce5-173">iss: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/".</span></span> <span data-ttu-id="3fce5-174">hello GUID az hello azonosítója a Microsoft bérlő (microsoft.onmicrosoft.com).</span><span class="sxs-lookup"><span data-stu-id="3fce5-174">hello GUID is hello ID of Microsoft tenant (microsoft.onmicrosoft.com).</span></span> |
|<span data-ttu-id="3fce5-175">Erőforrás</span><span class="sxs-lookup"><span data-stu-id="3fce5-175">Resource</span></span> | <span data-ttu-id="3fce5-176">Media Services REST API-k</span><span class="sxs-lookup"><span data-stu-id="3fce5-176">Media Services REST API</span></span> |<span data-ttu-id="3fce5-177">és: "https://rest.media.azure.net".</span><span class="sxs-lookup"><span data-stu-id="3fce5-177">aud: "https://rest.media.azure.net".</span></span> <span data-ttu-id="3fce5-178">hello címzett vagy a célközönség hello hozzáférési jogkivonat.</span><span class="sxs-lookup"><span data-stu-id="3fce5-178">hello recipient or audience of hello access token.</span></span> |

## <a name="steps-for-setup"></a><span data-ttu-id="3fce5-179">A telepítés lépései</span><span class="sxs-lookup"><span data-stu-id="3fce5-179">Steps for setup</span></span>

<span data-ttu-id="3fce5-180">tooregister, és állítsa be az Azure AD-alapú hitelesítés és tooobtain hello Azure Media Services REST API-végpont, a következő lépéseket teljes hello meghívása a hozzáférési token egy Azure AD-alkalmazást:</span><span class="sxs-lookup"><span data-stu-id="3fce5-180">tooregister and set up an Azure AD application for Azure AD authentication, and tooobtain an access token for calling hello Azure Media Services REST API endpoint, complete hello following steps:</span></span>

1.  <span data-ttu-id="3fce5-181">A hello [a klasszikus Azure portálon](http://go.microsoft.com/fwlink/?LinkID=213885), regisztrálja az Azure AD alkalmazás (például wzmediaservice) toohello az Azure AD-bérlő (például microsoft.onmicrosoft.com).</span><span class="sxs-lookup"><span data-stu-id="3fce5-181">In hello [Azure classic portal](http://go.microsoft.com/fwlink/?LinkID=213885), register an Azure AD application (for example, wzmediaservice) toohello Azure AD tenant (for example, microsoft.onmicrosoft.com).</span></span> <span data-ttu-id="3fce5-182">Nem számít, hogy Ön a webes alkalmazás vagy a natív alkalmazással regisztrált-e.</span><span class="sxs-lookup"><span data-stu-id="3fce5-182">It doesn't matter whether you registered as web app or native app.</span></span> <span data-ttu-id="3fce5-183">Választhat is, a bejelentkezés és válasz URL-címe (például mindkét http://wzmediaservice.com).</span><span class="sxs-lookup"><span data-stu-id="3fce5-183">Also, you can choose any sign-on URL and reply URL (for example, http://wzmediaservice.com for both).</span></span>
2. <span data-ttu-id="3fce5-184">A hello [a klasszikus Azure portálon](http://go.microsoft.com/fwlink/?LinkID=213885), nyissa meg toohello **konfigurálása** fülre az alkalmazás.</span><span class="sxs-lookup"><span data-stu-id="3fce5-184">In hello [Azure classic portal](http://go.microsoft.com/fwlink/?LinkID=213885), go toohello **Configure** tab of your application.</span></span> <span data-ttu-id="3fce5-185">Megjegyzés: hello **ügyfél-azonosító**.</span><span class="sxs-lookup"><span data-stu-id="3fce5-185">Note hello **client ID**.</span></span> <span data-ttu-id="3fce5-186">Ekkor a **kulcsok**, létrehozni egy **ügyfélkulcsot** (titkos).</span><span class="sxs-lookup"><span data-stu-id="3fce5-186">Then, under **Keys**, generate a **client key** (client secret).</span></span> 

    > [!NOTE] 
    > <span data-ttu-id="3fce5-187">Jegyezze fel a hello titkos ügyfélkulcsot.</span><span class="sxs-lookup"><span data-stu-id="3fce5-187">Take note of hello client secret.</span></span> <span data-ttu-id="3fce5-188">Ez nem jeleníthető meg újra.</span><span class="sxs-lookup"><span data-stu-id="3fce5-188">It won't be shown again.</span></span>
    
3.  <span data-ttu-id="3fce5-189">A hello [Azure-portálon](http://ms.portal.azure.com), nyissa meg toohello Media Services-fiók.</span><span class="sxs-lookup"><span data-stu-id="3fce5-189">In hello [Azure portal](http://ms.portal.azure.com), go toohello Media Services account.</span></span> <span data-ttu-id="3fce5-190">Jelölje be hello **hozzáférés-vezérlés** (IAM) ablak.</span><span class="sxs-lookup"><span data-stu-id="3fce5-190">Select hello **Access Control** (IAM) pane.</span></span> <span data-ttu-id="3fce5-191">Adja hozzá egy új tag a hello tulajdonos vagy a hello közreműködői szerepkört.</span><span class="sxs-lookup"><span data-stu-id="3fce5-191">Add a new member that has either hello Owner or hello Contributor role.</span></span> <span data-ttu-id="3fce5-192">Hello egyszerű keressen rá a hello alkalmazás neve (a példában wzmediaservice) 1. lépésben regisztrált.</span><span class="sxs-lookup"><span data-stu-id="3fce5-192">For hello principal, search for hello application name you registered in step 1 (in this example, wzmediaservice).</span></span>

## <a name="info-toocollect"></a><span data-ttu-id="3fce5-193">Információ toocollect</span><span class="sxs-lookup"><span data-stu-id="3fce5-193">Info toocollect</span></span>

<span data-ttu-id="3fce5-194">tooprepare REST-kódolási, a következő adatok pontok tooinclude hello kódban hello gyűjtése:</span><span class="sxs-lookup"><span data-stu-id="3fce5-194">tooprepare REST coding, collect hello following data points tooinclude in hello code:</span></span>

*   <span data-ttu-id="3fce5-195">Azure AD szolgáltatásba STS-végpont: https://login.microsoftonline.com/microsoft.onmicrosoft.com/oauth2/token.</span><span class="sxs-lookup"><span data-stu-id="3fce5-195">Azure AD as an STS endpoint: https://login.microsoftonline.com/microsoft.onmicrosoft.com/oauth2/token.</span></span> <span data-ttu-id="3fce5-196">Az ehhez a végponthoz a JWT jogkivonat van szükség.</span><span class="sxs-lookup"><span data-stu-id="3fce5-196">From this endpoint, a JWT access token is requested.</span></span> <span data-ttu-id="3fce5-197">Ezen kívül, az IDP tooserving, az Azure AD is szolgál az STS szolgáltatással.</span><span class="sxs-lookup"><span data-stu-id="3fce5-197">In addition tooserving as an IDP, Azure AD also serves as an STS.</span></span> <span data-ttu-id="3fce5-198">Az Azure AD kibocsát egy jwt-t, az erőforrások eléréséhez (hozzáférési jogkivonat).</span><span class="sxs-lookup"><span data-stu-id="3fce5-198">Azure AD issues a JWT for resource access (an access token).</span></span> <span data-ttu-id="3fce5-199">A JWT jogkivonat különböző jogcímek rendelkezik.</span><span class="sxs-lookup"><span data-stu-id="3fce5-199">A JWT token has various claims.</span></span>
*   <span data-ttu-id="3fce5-200">Az Azure Media Services REST API erőforrás vagy a célközönség: https://rest.media.azure.net.</span><span class="sxs-lookup"><span data-stu-id="3fce5-200">Azure Media Services REST API as resource or audience: https://rest.media.azure.net.</span></span>
*   <span data-ttu-id="3fce5-201">Ügyfél-azonosító: Lásd a 2. lépés a [lépéseket a telepítés](#steps-for-setup).</span><span class="sxs-lookup"><span data-stu-id="3fce5-201">Client ID: See step 2 in [Steps for setup](#steps-for-setup).</span></span>
*   <span data-ttu-id="3fce5-202">Ügyfélkulcs: 2 lépés lásd: [lépéseket a telepítés](#steps-for-setup).</span><span class="sxs-lookup"><span data-stu-id="3fce5-202">Client secret: See step 2 in  [Steps for setup](#steps-for-setup).</span></span>
*   <span data-ttu-id="3fce5-203">A Media Services REST API-végpont a következő formátum hello fiókja:</span><span class="sxs-lookup"><span data-stu-id="3fce5-203">Your Media Services account REST API endpoint in hello following format:</span></span>

    <span data-ttu-id="3fce5-204">https://[media_service_account_name].restv2. [data_center].media.azure.net/API</span><span class="sxs-lookup"><span data-stu-id="3fce5-204">https://[media_service_account_name].restv2.[data_center].media.azure.net/API</span></span> 

    <span data-ttu-id="3fce5-205">Ez a elleni mely összes Media Services REST API-t az alkalmazás hívások végrehajtott hello végpont.</span><span class="sxs-lookup"><span data-stu-id="3fce5-205">This is hello endpoint against which all Media Services REST API calls in your application are made.</span></span> <span data-ttu-id="3fce5-206">Például https://willzhanmswjapan.restv2.japanwest.media.azure.net/API.</span><span class="sxs-lookup"><span data-stu-id="3fce5-206">For example, https://willzhanmswjapan.restv2.japanwest.media.azure.net/API.</span></span>

<span data-ttu-id="3fce5-207">Ezek a paraméterek öt majd be a web.config vagy az app.config fájlt, a kódban toouse.</span><span class="sxs-lookup"><span data-stu-id="3fce5-207">You can then put these five parameters in your web.config or app.config file, toouse in your code.</span></span>

## <a name="sample-code"></a><span data-ttu-id="3fce5-208">Mintakód</span><span class="sxs-lookup"><span data-stu-id="3fce5-208">Sample code</span></span>

<span data-ttu-id="3fce5-209">Mintakód hello található [az Azure AD-alapú hitelesítés az Azure Media Services Access: mindkét REST API-n keresztül](https://github.com/willzhan/WAMSRESTSoln).</span><span class="sxs-lookup"><span data-stu-id="3fce5-209">You can find hello sample code in [Azure AD Authentication for Azure Media Services Access: Both via REST API](https://github.com/willzhan/WAMSRESTSoln).</span></span>

<span data-ttu-id="3fce5-210">hello példakód két részből áll:</span><span class="sxs-lookup"><span data-stu-id="3fce5-210">hello sample code has two parts:</span></span>

*   <span data-ttu-id="3fce5-211">A dll-fájl hordozhatóosztálytár-projektjének, amely rendelkezik az összes hello REST API kód az Azure AD-alapú hitelesítés és engedélyezés céljából.</span><span class="sxs-lookup"><span data-stu-id="3fce5-211">A DLL library project that has all hello REST API code for Azure AD authentication and authorization.</span></span> <span data-ttu-id="3fce5-212">Adja meg a megfelelő REST API hívások toohello Media Services REST API-végpont, hello jogkivonatokkal metódust is tartalmaz.</span><span class="sxs-lookup"><span data-stu-id="3fce5-212">It also has a method for making REST API calls toohello Media Services REST API endpoint, with hello access token.</span></span>
*   <span data-ttu-id="3fce5-213">Konzol teszt ügyfél, amely kezdeményezi az Azure AD-alapú hitelesítés, és különböző Media Services REST API-t hívja.</span><span class="sxs-lookup"><span data-stu-id="3fce5-213">A console test client, which initiates Azure AD authentication and calls different Media Services REST API.</span></span>

<span data-ttu-id="3fce5-214">hello mintaprojektet a három lehetőséggel rendelkezik:</span><span class="sxs-lookup"><span data-stu-id="3fce5-214">hello sample project has three features:</span></span>

*   <span data-ttu-id="3fce5-215">Az Azure AD hitelesítési keresztül hello ügyfél hitelesítő adatait adja meg csak hello REST API használatával.</span><span class="sxs-lookup"><span data-stu-id="3fce5-215">Azure AD authentications via hello client credentials grant by using only hello REST API.</span></span>
*   <span data-ttu-id="3fce5-216">Azure Media Services hozzáférés csak hello REST API használatával.</span><span class="sxs-lookup"><span data-stu-id="3fce5-216">Azure Media Services access by using only hello REST API.</span></span>
*   <span data-ttu-id="3fce5-217">Az Azure Storage access használatával csak hello REST API-t (a használt toocreate Media Services-fiók, REST API használatával).</span><span class="sxs-lookup"><span data-stu-id="3fce5-217">Azure Storage access by using only hello REST API (as used toocreate a Media Services account, by using REST API).</span></span>


## <a name="where-is-hello-refresh-token"></a><span data-ttu-id="3fce5-218">Hol található hello frissítési jogkivonat?</span><span class="sxs-lookup"><span data-stu-id="3fce5-218">Where is hello refresh token?</span></span>

<span data-ttu-id="3fce5-219">Néhány olvasók kérheti: hello frissítési jogkivonat hol van?</span><span class="sxs-lookup"><span data-stu-id="3fce5-219">Some readers might ask: Where is hello refresh token?</span></span> <span data-ttu-id="3fce5-220">Miért nem használja a frissítési jogkivonat Itt?</span><span class="sxs-lookup"><span data-stu-id="3fce5-220">Why not use a refresh token here?</span></span>

<span data-ttu-id="3fce5-221">hello egy frissítési jogkivonat célja nem toorefresh olyan hozzáférési jogkivonatot.</span><span class="sxs-lookup"><span data-stu-id="3fce5-221">hello purpose of a refresh token is not toorefresh an access token.</span></span> <span data-ttu-id="3fce5-222">Ehelyett tervezett toobypass végfelhasználói hitelesítési vagy felhasználói beavatkozás és egy érvényes jogkivonat továbbra is megjelenik, amikor egy korábbi jogkivonat lejár.</span><span class="sxs-lookup"><span data-stu-id="3fce5-222">Instead, it is designed toobypass end-user authentication or user intervention and still get a valid access token when an earlier token expires.</span></span> <span data-ttu-id="3fce5-223">A frissítési jogkivonat jobb nevét lehet, hogy valami like "kihagyása a felhasználó újra-sign-in jogkivonatát."</span><span class="sxs-lookup"><span data-stu-id="3fce5-223">A better name for a refresh token might be something like "bypass user re-sign-in token."</span></span>

<span data-ttu-id="3fce5-224">Hello OAuth 2.0 engedélyezési adja meg a folyamat (felhasználónévvel és jelszóval, egy felhasználó nevében eljáró) használatakor a frissítési jogkivonat segítséget nyújt a megújított access token beszerzése a kért felhasználói beavatkozás nélkül.</span><span class="sxs-lookup"><span data-stu-id="3fce5-224">If you use hello OAuth 2.0 authorization grant flow (username and password, acting on behalf of a user), a refresh token helps you get a renewed access token without requesting user intervention.</span></span> <span data-ttu-id="3fce5-225">Azonban hello OAuth 2.0 ügyfél hitelesítő adatai megadják a folyamat, amely ebben a cikkben azt ismertetik, hello ügyfél működik a saját nevében.</span><span class="sxs-lookup"><span data-stu-id="3fce5-225">However, for hello OAuth 2.0 client credentials grant flow that we describe in this article, hello client acts on its own behalf.</span></span> <span data-ttu-id="3fce5-226">Minden felhasználói beavatkozás nem szükséges, és hello engedélyezési server túl nem szükséges (és nem) adjon meg egy frissítési jogkivonat.</span><span class="sxs-lookup"><span data-stu-id="3fce5-226">You don't need user intervention at all, and hello authorization server doesn't need too(and won't) give you a refresh token.</span></span> <span data-ttu-id="3fce5-227">Ha hello hibakeresése **GetUrlEncodedJWT** metódust, akkor figyelje meg, hogy hello válaszát hello token-végpont rendelkezik-e a hozzáférési tokent, de nincs frissítési jogkivonat.</span><span class="sxs-lookup"><span data-stu-id="3fce5-227">If you debug hello **GetUrlEncodedJWT** method, you notice that hello response from hello token endpoint has an access token, but no refresh token.</span></span>

## <a name="next-steps"></a><span data-ttu-id="3fce5-228">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="3fce5-228">Next steps</span></span>

<span data-ttu-id="3fce5-229">Ismerkedés a [fájlok feltöltése a tooyour fiók](media-services-dotnet-upload-files.md).</span><span class="sxs-lookup"><span data-stu-id="3fce5-229">Get started with [uploading files tooyour account](media-services-dotnet-upload-files.md).</span></span>
