---
title: "Azure Media Services API többi eléréséhez használja az Azure AD hitelesítési |} Microsoft Docs"
description: "Útmutató: Azure Active Directory-hitelesítéssel Azure Media Services API hozzáférhet a többi."
services: media-services
documentationcenter: 
author: willzhan
manager: cfowler
editor: 
ms.service: media-services
ms.workload: media
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/17/2017
ms.author: willzhan;juliako
ms.openlocfilehash: 1c62857699fb29b3583363e1c6f2dc7874635f40
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 08/29/2017
---
# <a name="use-azure-ad-authentication-to-access-the-azure-media-services-api-with-rest"></a><span data-ttu-id="349e3-103">Az Azure Media Services API REST eléréséhez használja az Azure AD-alapú hitelesítés</span><span class="sxs-lookup"><span data-stu-id="349e3-103">Use Azure AD authentication to access the Azure Media Services API with REST</span></span>

<span data-ttu-id="349e3-104">Az Azure Media Services team közzétette az Azure Media Services access Azure Active Directory (Azure AD-) hitelesítés támogatása.</span><span class="sxs-lookup"><span data-stu-id="349e3-104">The Azure Media Services team has released Azure Active Directory (Azure AD) authentication support for Azure Media Services access.</span></span> <span data-ttu-id="349e3-105">A jelentette be Azure hozzáférés-vezérlés szolgáltatás hitelesítési a Media Services hozzáféréshez érvényteleníthető terveket is.</span><span class="sxs-lookup"><span data-stu-id="349e3-105">It also announced plans to deprecate Azure Access Control service authentication for Media Services access.</span></span> <span data-ttu-id="349e3-106">Minden Azure-előfizetés, és minden Media Services-fiók, az Azure AD-bérlő van csatolva, az Azure AD hitelesítési támogatás számos lehetőséget kínál számos biztonsági szempontból előnyökkel járhat.</span><span class="sxs-lookup"><span data-stu-id="349e3-106">Because every Azure subscription, and every Media Services account, is attached to an Azure AD tenant, Azure AD authentication support brings many security benefits.</span></span> <span data-ttu-id="349e3-107">A változás- és (ha az alkalmazás használja a Media Services .NET SDK) áttelepítési kapcsolatos részletekért lásd: a következő blogbejegyzések és cikkek:</span><span class="sxs-lookup"><span data-stu-id="349e3-107">For details about this change and migration (if you use the Media Services .NET SDK for your app), see the following blog posts and articles:</span></span>

- [<span data-ttu-id="349e3-108">Az Azure Media Services időről támogatás az Azure AD és a hozzáférés-vezérlés hitelesítési elavulása</span><span class="sxs-lookup"><span data-stu-id="349e3-108">Azure Media Services announces support for Azure AD and deprecation of Access Control authentication</span></span>](https://azure.microsoft.com/blog/azure%20media%20service%20aad%20auth%20and%20acs%20deprecation)
- [<span data-ttu-id="349e3-109">Access Azure Media Services API az Azure AD-hitelesítés használatával</span><span class="sxs-lookup"><span data-stu-id="349e3-109">Access Azure Media Services API by using Azure AD authentication</span></span>](media-services-use-aad-auth-to-access-ams-api.md)
- [<span data-ttu-id="349e3-110">Azure Media Services API hozzáférhet a Microsoft .NET hitelesítés használata az Azure AD</span><span class="sxs-lookup"><span data-stu-id="349e3-110">Use Azure AD authentication to access Azure Media Services API by using Microsoft .NET</span></span>](media-services-dotnet-get-started-with-aad.md)
- [<span data-ttu-id="349e3-111">Ismerkedés az Azure AD-alapú hitelesítés az Azure portál használatával</span><span class="sxs-lookup"><span data-stu-id="349e3-111">Getting started with Azure AD authentication by using the Azure portal</span></span>](media-services-portal-get-started-with-aad.md)

<span data-ttu-id="349e3-112">Egyes ügyfelek alapján a következő korlátozások vonatkoznak a Media Services-megoldások kifejlesztésére lesz szükség:</span><span class="sxs-lookup"><span data-stu-id="349e3-112">Some customers need to develop their Media Services solutions under the following constraints:</span></span>

*   <span data-ttu-id="349e3-113">Microsoft .NET vagy C# programozási nyelven használata, vagy a futtatókörnyezet nincs Windows.</span><span class="sxs-lookup"><span data-stu-id="349e3-113">They use a programming language that is not Microsoft .NET or C#, or the runtime environment is not Windows.</span></span>
*   <span data-ttu-id="349e3-114">Az Azure AD szalagtárak, például az Active Directory hitelesítési Kódtárai nem érhetők el a programozási nyelven, vagy nem használható a futtatókörnyezetben.</span><span class="sxs-lookup"><span data-stu-id="349e3-114">Azure AD libraries such as Active Directory Authentication Libraries are not available for the programming language or can't be used for their runtime environment.</span></span>

<span data-ttu-id="349e3-115">Egyes ügyfelek alkalmazások hozzáférés-vezérlés hitelesítéséhez és access Azure Media Services REST API használatával fejlesztett ki.</span><span class="sxs-lookup"><span data-stu-id="349e3-115">Some customers have developed applications by using REST API for both Access Control authentication and Azure Media Services access.</span></span> <span data-ttu-id="349e3-116">Ezek az ügyfelek szükségük van egy módszerre, csak a REST API-t használja az Azure AD-alapú hitelesítés és további Azure Media Services-hozzáférést.</span><span class="sxs-lookup"><span data-stu-id="349e3-116">For these customers, you need a way to use only the REST API for Azure AD authentication and subsequent Azure Media Services access.</span></span> <span data-ttu-id="349e3-117">Támaszkodjon az Azure AD-tárak bármelyikét, vagy a Media Services .NET SDK kell.</span><span class="sxs-lookup"><span data-stu-id="349e3-117">You need to not rely on any of the Azure AD libraries or on the Media Services .NET SDK.</span></span> <span data-ttu-id="349e3-118">Ez a cikk azt írják le a megoldást, és adja meg mintakód ehhez a forgatókönyvhöz.</span><span class="sxs-lookup"><span data-stu-id="349e3-118">In this article, we describe a solution and provide sample code for this scenario.</span></span> <span data-ttu-id="349e3-119">Mivel a kódot minden REST API-hívásokkal, minden Azure ad-val nem függőség vagy az Azure Media Services library, a kód könnyen fordítható bármely más programozási nyelv.</span><span class="sxs-lookup"><span data-stu-id="349e3-119">Because the code is all REST API calls, with no dependency on any Azure AD or Azure Media Services library, the code can easily be translated to any other programming language.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="349e3-120">A Media Services jelenleg az Azure hozzáférés-vezérlés hitelesítési modell.</span><span class="sxs-lookup"><span data-stu-id="349e3-120">Currently, Media Services supports the Azure Access Control services authentication model.</span></span> <span data-ttu-id="349e3-121">Azonban hozzáférés-vezérlés hitelesítési elavulttá válik 2018. június 1.</span><span class="sxs-lookup"><span data-stu-id="349e3-121">However, Access Control authentication will be deprecated June 1, 2018.</span></span> <span data-ttu-id="349e3-122">Azt javasoljuk, hogy telepítse át az Azure AD hitelesítési modell lehető legrövidebb időn belül.</span><span class="sxs-lookup"><span data-stu-id="349e3-122">We recommend that you migrate to the Azure AD authentication model as soon as possible.</span></span>


## <a name="design"></a><span data-ttu-id="349e3-123">Tervezés</span><span class="sxs-lookup"><span data-stu-id="349e3-123">Design</span></span>

<span data-ttu-id="349e3-124">Ez a cikk a következő hitelesítési és engedélyezési tervezési használjuk:</span><span class="sxs-lookup"><span data-stu-id="349e3-124">In this article, we use the following authentication and authorization design:</span></span>

*  <span data-ttu-id="349e3-125">Protokoll: OAuth 2.0-s.</span><span class="sxs-lookup"><span data-stu-id="349e3-125">Authorization protocol: OAuth 2.0.</span></span> <span data-ttu-id="349e3-126">OAuth 2.0 olyan webes biztonsági szabvány, amely lefedi a hitelesítést és az engedélyezést.</span><span class="sxs-lookup"><span data-stu-id="349e3-126">OAuth 2.0 is a web security standard that covers both authentication and authorization.</span></span> <span data-ttu-id="349e3-127">Azt támogatják Google, a Microsoft, a Facebook-on és a PayPal.</span><span class="sxs-lookup"><span data-stu-id="349e3-127">It is supported by Google, Microsoft, Facebook, and PayPal.</span></span> <span data-ttu-id="349e3-128">2012. októberi azt lett erősítette meg.</span><span class="sxs-lookup"><span data-stu-id="349e3-128">It was ratified October 2012.</span></span> <span data-ttu-id="349e3-129">A Microsoft az OAuth 2.0 és az OpenID Connect erősen támogatja.</span><span class="sxs-lookup"><span data-stu-id="349e3-129">Microsoft firmly supports OAuth 2.0 and OpenID Connect.</span></span> <span data-ttu-id="349e3-130">Mindkét ezeknek a szabványoknak támogatottak több szolgáltatások és ügyfél könyvtárak, beleértve az Azure Active Directoryban, Open Web Interface .NET (OWIN) Katana, a és az Azure AD-könyvtárak.</span><span class="sxs-lookup"><span data-stu-id="349e3-130">Both of these standards are supported in multiple services and client libraries, including Azure Active Directory, Open Web Interface for .NET (OWIN) Katana, and Azure AD libraries.</span></span>
*  <span data-ttu-id="349e3-131">Támogatás típusa: ügyfél hitelesítő adatai megadják típusa.</span><span class="sxs-lookup"><span data-stu-id="349e3-131">Grant type: Client credentials grant type.</span></span> <span data-ttu-id="349e3-132">Ügyfél hitelesítő adatait a négy grant típusok, az OAuth 2.0 egyike.</span><span class="sxs-lookup"><span data-stu-id="349e3-132">Client credentials is one of the four grant types in OAuth 2.0.</span></span> <span data-ttu-id="349e3-133">A Microsoft Azure AD Graph API access gyakran használják azt.</span><span class="sxs-lookup"><span data-stu-id="349e3-133">It's often used for Azure AD Microsoft Graph API access.</span></span>
*  <span data-ttu-id="349e3-134">Hitelesítési módszer: egyszerű szolgáltatást.</span><span class="sxs-lookup"><span data-stu-id="349e3-134">Authentication mode: Service principal.</span></span> <span data-ttu-id="349e3-135">A hitelesítési mód a felhasználó vagy az interaktív hitelesítés.</span><span class="sxs-lookup"><span data-stu-id="349e3-135">The other authentication mode is user or interactive authentication.</span></span>

<span data-ttu-id="349e3-136">Összesen négy alkalmazáshoz vagy szolgáltatáshoz is érintett a Azure AD hitelesítési és engedélyezési folyamata Media Services használatával.</span><span class="sxs-lookup"><span data-stu-id="349e3-136">A total of four applications or services are involved in the Azure AD authentication and authorization flow for using Media Services.</span></span> <span data-ttu-id="349e3-137">A folyamatot, az alkalmazások és szolgáltatások a következő táblázat ismerteti:</span><span class="sxs-lookup"><span data-stu-id="349e3-137">The applications and services, and the flow, are described in the following table:</span></span>

|<span data-ttu-id="349e3-138">Alkalmazás típusa</span><span class="sxs-lookup"><span data-stu-id="349e3-138">Application type</span></span> |<span data-ttu-id="349e3-139">Alkalmazás</span><span class="sxs-lookup"><span data-stu-id="349e3-139">Application</span></span> |<span data-ttu-id="349e3-140">Folyamat</span><span class="sxs-lookup"><span data-stu-id="349e3-140">Flow</span></span>|
|---|---|---|
|<span data-ttu-id="349e3-141">Ügyfél</span><span class="sxs-lookup"><span data-stu-id="349e3-141">Client</span></span> | <span data-ttu-id="349e3-142">Felhasználói alkalmazás vagy megoldás</span><span class="sxs-lookup"><span data-stu-id="349e3-142">Customer app or solution</span></span> | <span data-ttu-id="349e3-143">Ez az alkalmazás (ténylegesen, a proxy) regisztrálva van az Azure AD-bérlőt, amelyben az Azure-előfizetés és a media service fiók található.</span><span class="sxs-lookup"><span data-stu-id="349e3-143">This app (actually, its proxy) is registered in the Azure AD tenant in which the Azure subscription and the media service account reside.</span></span> <span data-ttu-id="349e3-144">A szolgáltatás egyszerű, a regisztrált alkalmazás majd kapnak a tulajdonos vagy közreműködő szerepkörrel a a hozzáférést vezérlő (IAM) a media service fiók.</span><span class="sxs-lookup"><span data-stu-id="349e3-144">The service principal of the registered app is then granted with Owner or Contributor role in the Access Control (IAM) of the media service account.</span></span> <span data-ttu-id="349e3-145">A szolgáltatás egyszerű a app ID és az ügyfél ügyfélkulcs jelképezi.</span><span class="sxs-lookup"><span data-stu-id="349e3-145">The service principal is represented by the app client ID and client secret.</span></span> |
|<span data-ttu-id="349e3-146">Az identitásszolgáltató (IDP)</span><span class="sxs-lookup"><span data-stu-id="349e3-146">Identity Provider (IDP)</span></span> | <span data-ttu-id="349e3-147">Azure AD szolgáltatásba IDP</span><span class="sxs-lookup"><span data-stu-id="349e3-147">Azure AD as IDP</span></span> | <span data-ttu-id="349e3-148">A regisztrált alkalmazás egyszerű szolgáltatásnév (ügyfél-azonosító és a titkos ügyfélkódot) hitelesítése az Azure AD szolgáltatásba a kiállító terjesztési hely.</span><span class="sxs-lookup"><span data-stu-id="349e3-148">The registered app service principal (client ID and client secret) is authenticated by Azure AD as the IDP.</span></span> <span data-ttu-id="349e3-149">Ez a hitelesítés a belső és implicit módon történik.</span><span class="sxs-lookup"><span data-stu-id="349e3-149">This authentication is performed internally and implicitly.</span></span> <span data-ttu-id="349e3-150">Ügyfél-hitelesítő adatok folyamata, mint az ügyfél helyett a felhasználó hitelesítése.</span><span class="sxs-lookup"><span data-stu-id="349e3-150">As in client credentials flow, the client is authenticated instead of the user.</span></span> |
|<span data-ttu-id="349e3-151">Secure Token Service (STS) / OAuth-kiszolgáló</span><span class="sxs-lookup"><span data-stu-id="349e3-151">Secure Token Service (STS)/OAuth server</span></span> | <span data-ttu-id="349e3-152">Azure AD szolgáltatásba STS</span><span class="sxs-lookup"><span data-stu-id="349e3-152">Azure AD as STS</span></span> | <span data-ttu-id="349e3-153">A kiállító terjesztési hely (vagy az OAuth kiszolgáló OAuth 2.0 feltételeit) hitelesítést követően egy hozzáférési jogkivonat vagy JSON webes jogkivonat (JWT) által kiadott STS/OAuth-kiszolgálóként a hozzáférés az Azure AD a középső rétegbeli erőforrásra: Ebben az esetben a Media Services REST API végpontra.</span><span class="sxs-lookup"><span data-stu-id="349e3-153">After authentication by the IDP (or OAuth Server in OAuth 2.0 terms), an access token or JSON Web Token (JWT) is issued by Azure AD as STS/OAuth Server for access to the middle-tier resource: in our case, the Media Services REST API endpoint.</span></span> |
|<span data-ttu-id="349e3-154">Erőforrás</span><span class="sxs-lookup"><span data-stu-id="349e3-154">Resource</span></span> | <span data-ttu-id="349e3-155">Media Services REST API-k</span><span class="sxs-lookup"><span data-stu-id="349e3-155">Media Services REST API</span></span> | <span data-ttu-id="349e3-156">Minden Media Services REST API hívása olyan hozzáférési jogkivonatot STS vagy az OAuth-kiszolgálóként az Azure AD által kiadott engedélyezve van.</span><span class="sxs-lookup"><span data-stu-id="349e3-156">Every Media Services REST API call is authorized by an access token that is issued by Azure AD as STS or the OAuth server.</span></span> |

<span data-ttu-id="349e3-157">Ha a mintakódot futtatja, és rögzítheti a jwt-t vagy a hozzáférési tokent, a jwt-t az alábbi attribútumok tartoznak:</span><span class="sxs-lookup"><span data-stu-id="349e3-157">If you run the sample code and capture a JWT or an access token, the JWT has the following attributes:</span></span>

    aud: "https://rest.media.azure.net",

    iss: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/",

    iat: 1497146280,

    nbf: 1497146280,
    exp: 1497150180,

    aio: "Y2ZgYDjuy7SptPzO/muf+uRu1B+ZDQA=",

    appid: "02ed1e8e-af8b-477e-af3d-7e7219a99ac6",

    appidacr: "1",

    idp: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/",

    oid: "a938cfcc-d3de-479c-b0dd-d4ffe6f50f7c",

    sub: "a938cfcc-d3de-479c-b0dd-d4ffe6f50f7c",

    tid: "72f988bf-86f1-41af-91ab-2d7cd011db47",

<span data-ttu-id="349e3-158">A jwt-t és a négy alkalmazások attribútumokat vagy az előző táblázatban szereplő szolgáltatások között az alábbiakban a leképezéseket:</span><span class="sxs-lookup"><span data-stu-id="349e3-158">Here are the mappings between the attributes in the JWT and the four applications or services in the preceding table:</span></span>

|<span data-ttu-id="349e3-159">Alkalmazás típusa</span><span class="sxs-lookup"><span data-stu-id="349e3-159">Application type</span></span> |<span data-ttu-id="349e3-160">Alkalmazás</span><span class="sxs-lookup"><span data-stu-id="349e3-160">Application</span></span> |<span data-ttu-id="349e3-161">JWT-attribútum</span><span class="sxs-lookup"><span data-stu-id="349e3-161">JWT attribute</span></span> |
|---|---|---|
|<span data-ttu-id="349e3-162">Ügyfél</span><span class="sxs-lookup"><span data-stu-id="349e3-162">Client</span></span> |<span data-ttu-id="349e3-163">Felhasználói alkalmazás vagy megoldás</span><span class="sxs-lookup"><span data-stu-id="349e3-163">Customer app or solution</span></span> |<span data-ttu-id="349e3-164">AppID: "02ed1e8e-af8b-477e-af3d-7e7219a99ac6".</span><span class="sxs-lookup"><span data-stu-id="349e3-164">appid: "02ed1e8e-af8b-477e-af3d-7e7219a99ac6".</span></span> <span data-ttu-id="349e3-165">A következő szakaszban regisztrálni fogja az Azure AD-alkalmazás ügyfél-azonosító.</span><span class="sxs-lookup"><span data-stu-id="349e3-165">The client ID of an application you will register to Azure AD in the next section.</span></span> |
|<span data-ttu-id="349e3-166">Az identitásszolgáltató (IDP)</span><span class="sxs-lookup"><span data-stu-id="349e3-166">Identity Provider (IDP)</span></span> | <span data-ttu-id="349e3-167">Azure AD szolgáltatásba IDP</span><span class="sxs-lookup"><span data-stu-id="349e3-167">Azure AD as IDP</span></span> |<span data-ttu-id="349e3-168">IDP: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/".</span><span class="sxs-lookup"><span data-stu-id="349e3-168">idp: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/".</span></span>  <span data-ttu-id="349e3-169">A globálisan egyedi Azonosítót az az azonosítója a Microsoft-bérlő (microsoft.onmicrosoft.com).</span><span class="sxs-lookup"><span data-stu-id="349e3-169">The GUID is the ID of Microsoft tenant (microsoft.onmicrosoft.com).</span></span> <span data-ttu-id="349e3-170">Mindegyik bérlő saját, egyedi azonosítóval rendelkezik</span><span class="sxs-lookup"><span data-stu-id="349e3-170">Each tenant has its own, unique ID.</span></span> |
|<span data-ttu-id="349e3-171">Secure Token Service (STS) / OAuth-kiszolgáló</span><span class="sxs-lookup"><span data-stu-id="349e3-171">Secure Token Service (STS)/OAuth server</span></span> |<span data-ttu-id="349e3-172">Azure AD szolgáltatásba STS</span><span class="sxs-lookup"><span data-stu-id="349e3-172">Azure AD as STS</span></span> | <span data-ttu-id="349e3-173">iss: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/".</span><span class="sxs-lookup"><span data-stu-id="349e3-173">iss: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/".</span></span> <span data-ttu-id="349e3-174">A globálisan egyedi Azonosítót az az azonosítója a Microsoft-bérlő (microsoft.onmicrosoft.com).</span><span class="sxs-lookup"><span data-stu-id="349e3-174">The GUID is the ID of Microsoft tenant (microsoft.onmicrosoft.com).</span></span> |
|<span data-ttu-id="349e3-175">Erőforrás</span><span class="sxs-lookup"><span data-stu-id="349e3-175">Resource</span></span> | <span data-ttu-id="349e3-176">Media Services REST API-k</span><span class="sxs-lookup"><span data-stu-id="349e3-176">Media Services REST API</span></span> |<span data-ttu-id="349e3-177">és: "https://rest.media.azure.net".</span><span class="sxs-lookup"><span data-stu-id="349e3-177">aud: "https://rest.media.azure.net".</span></span> <span data-ttu-id="349e3-178">A címzett, vagy a célközönség és a hozzáférési jogkivonat.</span><span class="sxs-lookup"><span data-stu-id="349e3-178">The recipient or audience of the access token.</span></span> |

## <a name="steps-for-setup"></a><span data-ttu-id="349e3-179">A telepítés lépései</span><span class="sxs-lookup"><span data-stu-id="349e3-179">Steps for setup</span></span>

<span data-ttu-id="349e3-180">Regisztrálja, és állítson be egy Azure AD-alkalmazást az Azure AD-alapú hitelesítés, és egy hozzáférési jogkivonatot az Azure Media Services REST API-végpont meghívása az beszerzése, kövesse az alábbi lépéseket:</span><span class="sxs-lookup"><span data-stu-id="349e3-180">To register and set up an Azure AD application for Azure AD authentication, and to obtain an access token for calling the Azure Media Services REST API endpoint, complete the following steps:</span></span>

1.  <span data-ttu-id="349e3-181">Az a [a klasszikus Azure portálon](http://go.microsoft.com/fwlink/?LinkID=213885), (például wzmediaservice) az Azure AD alkalmazás regisztrálása az Azure AD-bérlő (például microsoft.onmicrosoft.com).</span><span class="sxs-lookup"><span data-stu-id="349e3-181">In the [Azure classic portal](http://go.microsoft.com/fwlink/?LinkID=213885), register an Azure AD application (for example, wzmediaservice) to the Azure AD tenant (for example, microsoft.onmicrosoft.com).</span></span> <span data-ttu-id="349e3-182">Nem számít, hogy Ön a webes alkalmazás vagy a natív alkalmazással regisztrált-e.</span><span class="sxs-lookup"><span data-stu-id="349e3-182">It doesn't matter whether you registered as web app or native app.</span></span> <span data-ttu-id="349e3-183">Választhat is, a bejelentkezés és válasz URL-címe (például mindkét http://wzmediaservice.com).</span><span class="sxs-lookup"><span data-stu-id="349e3-183">Also, you can choose any sign-on URL and reply URL (for example, http://wzmediaservice.com for both).</span></span>
2. <span data-ttu-id="349e3-184">Az a [a klasszikus Azure portálon](http://go.microsoft.com/fwlink/?LinkID=213885), navigáljon a **konfigurálása** az alkalmazás lapon.</span><span class="sxs-lookup"><span data-stu-id="349e3-184">In the [Azure classic portal](http://go.microsoft.com/fwlink/?LinkID=213885), go to the **Configure** tab of your application.</span></span> <span data-ttu-id="349e3-185">Megjegyzés: a **ügyfél-azonosító**.</span><span class="sxs-lookup"><span data-stu-id="349e3-185">Note the **client ID**.</span></span> <span data-ttu-id="349e3-186">Ekkor a **kulcsok**, létrehozni egy **ügyfélkulcsot** (titkos).</span><span class="sxs-lookup"><span data-stu-id="349e3-186">Then, under **Keys**, generate a **client key** (client secret).</span></span> 

    > [!NOTE] 
    > <span data-ttu-id="349e3-187">Jegyezze fel a titkos ügyfélkulcsot.</span><span class="sxs-lookup"><span data-stu-id="349e3-187">Take note of the client secret.</span></span> <span data-ttu-id="349e3-188">Ez nem jeleníthető meg újra.</span><span class="sxs-lookup"><span data-stu-id="349e3-188">It won't be shown again.</span></span>
    
3.  <span data-ttu-id="349e3-189">Az a [Azure-portálon](http://ms.portal.azure.com), keresse fel a Media Services-fiók.</span><span class="sxs-lookup"><span data-stu-id="349e3-189">In the [Azure portal](http://ms.portal.azure.com), go to the Media Services account.</span></span> <span data-ttu-id="349e3-190">Válassza ki a **hozzáférés-vezérlés** (IAM) ablak.</span><span class="sxs-lookup"><span data-stu-id="349e3-190">Select the **Access Control** (IAM) pane.</span></span> <span data-ttu-id="349e3-191">Adja hozzá egy új tag a tulajdonosa vagy a közreműködő szerepkört.</span><span class="sxs-lookup"><span data-stu-id="349e3-191">Add a new member that has either the Owner or the Contributor role.</span></span> <span data-ttu-id="349e3-192">A rendszerbiztonsági tag keressen rá az 1. lépésben (a példában wzmediaservice) regisztrált alkalmazás nevét.</span><span class="sxs-lookup"><span data-stu-id="349e3-192">For the principal, search for the application name you registered in step 1 (in this example, wzmediaservice).</span></span>

## <a name="info-to-collect"></a><span data-ttu-id="349e3-193">Adatok összegyűjtése</span><span class="sxs-lookup"><span data-stu-id="349e3-193">Info to collect</span></span>

<span data-ttu-id="349e3-194">REST-kódolási előkészítéséhez gyűjtse össze a kód felvenni a következő adatpontokhoz:</span><span class="sxs-lookup"><span data-stu-id="349e3-194">To prepare REST coding, collect the following data points to include in the code:</span></span>

*   <span data-ttu-id="349e3-195">Azure AD szolgáltatásba STS-végpont: https://login.microsoftonline.com/microsoft.onmicrosoft.com/oauth2/token.</span><span class="sxs-lookup"><span data-stu-id="349e3-195">Azure AD as an STS endpoint: https://login.microsoftonline.com/microsoft.onmicrosoft.com/oauth2/token.</span></span> <span data-ttu-id="349e3-196">Az ehhez a végponthoz a JWT jogkivonat van szükség.</span><span class="sxs-lookup"><span data-stu-id="349e3-196">From this endpoint, a JWT access token is requested.</span></span> <span data-ttu-id="349e3-197">Az IDP szolgál, mellett az Azure AD is szolgál az STS szolgáltatással.</span><span class="sxs-lookup"><span data-stu-id="349e3-197">In addition to serving as an IDP, Azure AD also serves as an STS.</span></span> <span data-ttu-id="349e3-198">Az Azure AD kibocsát egy jwt-t, az erőforrások eléréséhez (hozzáférési jogkivonat).</span><span class="sxs-lookup"><span data-stu-id="349e3-198">Azure AD issues a JWT for resource access (an access token).</span></span> <span data-ttu-id="349e3-199">A JWT jogkivonat különböző jogcímek rendelkezik.</span><span class="sxs-lookup"><span data-stu-id="349e3-199">A JWT token has various claims.</span></span>
*   <span data-ttu-id="349e3-200">Az Azure Media Services REST API erőforrás vagy a célközönség: https://rest.media.azure.net.</span><span class="sxs-lookup"><span data-stu-id="349e3-200">Azure Media Services REST API as resource or audience: https://rest.media.azure.net.</span></span>
*   <span data-ttu-id="349e3-201">Ügyfél-azonosító: Lásd a 2. lépés a [lépéseket a telepítés](#steps-for-setup).</span><span class="sxs-lookup"><span data-stu-id="349e3-201">Client ID: See step 2 in [Steps for setup](#steps-for-setup).</span></span>
*   <span data-ttu-id="349e3-202">Ügyfélkulcs: 2 lépés lásd: [lépéseket a telepítés](#steps-for-setup).</span><span class="sxs-lookup"><span data-stu-id="349e3-202">Client secret: See step 2 in  [Steps for setup](#steps-for-setup).</span></span>
*   <span data-ttu-id="349e3-203">A Media Services-fiók REST API-végpont a következő formátumban:</span><span class="sxs-lookup"><span data-stu-id="349e3-203">Your Media Services account REST API endpoint in the following format:</span></span>

    <span data-ttu-id="349e3-204">https://[media_service_account_name].restv2. [data_center].media.azure.net/API</span><span class="sxs-lookup"><span data-stu-id="349e3-204">https://[media_service_account_name].restv2.[data_center].media.azure.net/API</span></span> 

    <span data-ttu-id="349e3-205">Ez az a végpont, mely összes Media Services REST API elleni hívások az alkalmazásban végrehajtott.</span><span class="sxs-lookup"><span data-stu-id="349e3-205">This is the endpoint against which all Media Services REST API calls in your application are made.</span></span> <span data-ttu-id="349e3-206">Például https://willzhanmswjapan.restv2.japanwest.media.azure.net/API.</span><span class="sxs-lookup"><span data-stu-id="349e3-206">For example, https://willzhanmswjapan.restv2.japanwest.media.azure.net/API.</span></span>

<span data-ttu-id="349e3-207">Ezek a paraméterek öt majd be a web.config vagy az app.config fájl használata a kódban.</span><span class="sxs-lookup"><span data-stu-id="349e3-207">You can then put these five parameters in your web.config or app.config file, to use in your code.</span></span>

## <a name="sample-code"></a><span data-ttu-id="349e3-208">Mintakód</span><span class="sxs-lookup"><span data-stu-id="349e3-208">Sample code</span></span>

<span data-ttu-id="349e3-209">A mintakódot található [az Azure AD-alapú hitelesítés az Azure Media Services Access: mindkét REST API-n keresztül](https://github.com/willzhan/WAMSRESTSoln).</span><span class="sxs-lookup"><span data-stu-id="349e3-209">You can find the sample code in [Azure AD Authentication for Azure Media Services Access: Both via REST API](https://github.com/willzhan/WAMSRESTSoln).</span></span>

<span data-ttu-id="349e3-210">A mintakód két részből áll:</span><span class="sxs-lookup"><span data-stu-id="349e3-210">The sample code has two parts:</span></span>

*   <span data-ttu-id="349e3-211">A dll-fájl hordozhatóosztálytár-projektjének, amely rendelkezik az Azure AD hitelesítési és engedélyezési REST API-kódban.</span><span class="sxs-lookup"><span data-stu-id="349e3-211">A DLL library project that has all the REST API code for Azure AD authentication and authorization.</span></span> <span data-ttu-id="349e3-212">A Media Services REST API végpontra, a hozzáférési jogkivonat a REST API-hívások metódust is tartalmaz.</span><span class="sxs-lookup"><span data-stu-id="349e3-212">It also has a method for making REST API calls to the Media Services REST API endpoint, with the access token.</span></span>
*   <span data-ttu-id="349e3-213">Konzol teszt ügyfél, amely kezdeményezi az Azure AD-alapú hitelesítés, és különböző Media Services REST API-t hívja.</span><span class="sxs-lookup"><span data-stu-id="349e3-213">A console test client, which initiates Azure AD authentication and calls different Media Services REST API.</span></span>

<span data-ttu-id="349e3-214">A minta projekt három lehetőséggel rendelkezik:</span><span class="sxs-lookup"><span data-stu-id="349e3-214">The sample project has three features:</span></span>

*   <span data-ttu-id="349e3-215">Az Azure AD hitelesítési keresztül az ügyfél hitelesítő adatait adja meg csak a REST API használatával.</span><span class="sxs-lookup"><span data-stu-id="349e3-215">Azure AD authentications via the client credentials grant by using only the REST API.</span></span>
*   <span data-ttu-id="349e3-216">Azure Media Services hozzáférés csak a REST API használatával.</span><span class="sxs-lookup"><span data-stu-id="349e3-216">Azure Media Services access by using only the REST API.</span></span>
*   <span data-ttu-id="349e3-217">Azure Storage hozzáférés csak a REST API használatával (a REST API használatával egy Media Services-fiók létrehozásához használt).</span><span class="sxs-lookup"><span data-stu-id="349e3-217">Azure Storage access by using only the REST API (as used to create a Media Services account, by using REST API).</span></span>


## <a name="where-is-the-refresh-token"></a><span data-ttu-id="349e3-218">Hol található a frissítési jogkivonat?</span><span class="sxs-lookup"><span data-stu-id="349e3-218">Where is the refresh token?</span></span>

<span data-ttu-id="349e3-219">Néhány olvasók kérheti: hol található a frissítési jogkivonat?</span><span class="sxs-lookup"><span data-stu-id="349e3-219">Some readers might ask: Where is the refresh token?</span></span> <span data-ttu-id="349e3-220">Miért nem használja a frissítési jogkivonat Itt?</span><span class="sxs-lookup"><span data-stu-id="349e3-220">Why not use a refresh token here?</span></span>

<span data-ttu-id="349e3-221">A frissítési jogkivonat célja nem egy hozzáférési jogkivonatot frissítése.</span><span class="sxs-lookup"><span data-stu-id="349e3-221">The purpose of a refresh token is not to refresh an access token.</span></span> <span data-ttu-id="349e3-222">Ehelyett tervezték végfelhasználói hitelesítési vagy felhasználói beavatkozás kihagyásával még mindig érvényes jogkivonat, ha egy korábbi jogkivonat lejár.</span><span class="sxs-lookup"><span data-stu-id="349e3-222">Instead, it is designed to bypass end-user authentication or user intervention and still get a valid access token when an earlier token expires.</span></span> <span data-ttu-id="349e3-223">A frissítési jogkivonat jobb nevét lehet, hogy valami like "kihagyása a felhasználó újra-sign-in jogkivonatát."</span><span class="sxs-lookup"><span data-stu-id="349e3-223">A better name for a refresh token might be something like "bypass user re-sign-in token."</span></span>

<span data-ttu-id="349e3-224">Használja az OAuth 2.0 engedélyezési folyamata (felhasználónévvel és jelszóval, egy felhasználó nevében eljáró) adja meg, ha a frissítési jogkivonat segítséget nyújt a megújított access token beszerzése a kért felhasználói beavatkozás nélkül.</span><span class="sxs-lookup"><span data-stu-id="349e3-224">If you use the OAuth 2.0 authorization grant flow (username and password, acting on behalf of a user), a refresh token helps you get a renewed access token without requesting user intervention.</span></span> <span data-ttu-id="349e3-225">Azonban az OAuth 2.0 ügyfél hitelesítő adatai megadják a folyamatot leíró cikkben azt, az ügyfél működik a saját nevében.</span><span class="sxs-lookup"><span data-stu-id="349e3-225">However, for the OAuth 2.0 client credentials grant flow that we describe in this article, the client acts on its own behalf.</span></span> <span data-ttu-id="349e3-226">Minden felhasználói beavatkozás nem szükséges, és a hitelesítési kiszolgáló nem szükséges (és nem) adjon meg egy frissítési jogkivonat.</span><span class="sxs-lookup"><span data-stu-id="349e3-226">You don't need user intervention at all, and the authorization server doesn't need to (and won't) give you a refresh token.</span></span> <span data-ttu-id="349e3-227">Ha hibakeresése a **GetUrlEncodedJWT** metódust, akkor figyelje meg, hogy a jogkivonat végpontjához válaszát rendelkezik-e a hozzáférési tokent, de nincs frissítési jogkivonat.</span><span class="sxs-lookup"><span data-stu-id="349e3-227">If you debug the **GetUrlEncodedJWT** method, you notice that the response from the token endpoint has an access token, but no refresh token.</span></span>

## <a name="next-steps"></a><span data-ttu-id="349e3-228">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="349e3-228">Next steps</span></span>

<span data-ttu-id="349e3-229">Ismerkedés a [fájlok feltöltése a fiókjához](media-services-dotnet-upload-files.md).</span><span class="sxs-lookup"><span data-stu-id="349e3-229">Get started with [uploading files to your account](media-services-dotnet-upload-files.md).</span></span>
