---
title: "A Service Bus kézbesítetlen levelek várólistájának |} Microsoft Docs"
description: "Azure Service Bus kézbesítetlen levelek várólistájának áttekintése"
services: service-bus-messaging
documentationcenter: .net
author: sethmanheim
manager: timlt
editor: 
ms.assetid: 68b2aa38-dba7-491a-9c26-0289bc15d397
ms.service: service-bus-messaging
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 05/17/2017
ms.author: clemensv;sethm
ms.openlocfilehash: c16bcf30ab96f79e59404a41852e4cd227e28b08
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 07/11/2017
---
# <a name="overview-of-service-bus-dead-letter-queues"></a><span data-ttu-id="1c13e-103">A Service Bus kézbesítetlen levelek várólistájának áttekintése</span><span class="sxs-lookup"><span data-stu-id="1c13e-103">Overview of Service Bus dead-letter queues</span></span>

<span data-ttu-id="1c13e-104">Service Bus-üzenetsorok, előfizetések kaphatják meg egy másodlagos alárendelt várólista nevű egy *kézbesítetlen levelek várólistájára* (DLQ).</span><span class="sxs-lookup"><span data-stu-id="1c13e-104">Service Bus queues and topic subscriptions provide a secondary sub-queue, called a *dead-letter queue* (DLQ).</span></span> <span data-ttu-id="1c13e-105">A kézbesítetlen levelek várólistájára nem kell explicit módon hozható létre és nem törölhető, illetve egyéb felügyelt független a fő entitás.</span><span class="sxs-lookup"><span data-stu-id="1c13e-105">The dead-letter queue does not need to be explicitly created and cannot be deleted or otherwise managed independent of the main entity.</span></span>

<span data-ttu-id="1c13e-106">A cikk ismerteti az Azure Service Bus kézbesítetlen levelek várólistájának.</span><span class="sxs-lookup"><span data-stu-id="1c13e-106">This article discusses dead-letter queues in Azure Service Bus.</span></span> <span data-ttu-id="1c13e-107">Nagy részét a vitafórum ezt a [kézbesítetlen levelek várólistájának minta](https://github.com/Azure/azure-service-bus/tree/master/samples/DotNet/Microsoft.ServiceBus.Messaging/DeadletterQueue) a Githubon.</span><span class="sxs-lookup"><span data-stu-id="1c13e-107">Much of the discussion is illustrated by the [Dead-Letter Queues sample](https://github.com/Azure/azure-service-bus/tree/master/samples/DotNet/Microsoft.ServiceBus.Messaging/DeadletterQueue) on GitHub.</span></span>
 
## <a name="the-dead-letter-queue"></a><span data-ttu-id="1c13e-108">A kézbesítetlen levelek várólistájára</span><span class="sxs-lookup"><span data-stu-id="1c13e-108">The dead-letter queue</span></span>

<span data-ttu-id="1c13e-109">A kézbesítetlen levelek várólistájára célja üzeneteket egyetlen fogadó nem kézbesíthetők, vagy nem dolgozható fel üzenetek tárolásához.</span><span class="sxs-lookup"><span data-stu-id="1c13e-109">The purpose of the dead-letter queue is to hold messages that cannot be delivered to any receiver, or messages that could not be processed.</span></span> <span data-ttu-id="1c13e-110">Üzenetek majd eltávolítja a DLQ és megvizsgálni.</span><span class="sxs-lookup"><span data-stu-id="1c13e-110">Messages can then be removed from the DLQ and inspected.</span></span> <span data-ttu-id="1c13e-111">Egy alkalmazás előfordulhat, operátor segítségével, javítsa ki a problémákat és küldje el újra a message, naplózza, hogy hiba történt, és intézkedéseket.</span><span class="sxs-lookup"><span data-stu-id="1c13e-111">An application might, with help of an operator, correct issues and resubmit the message, log the fact that there was an error, and take corrective action.</span></span> 

<span data-ttu-id="1c13e-112">API és a protokoll szempontból a DLQ hasonlít többnyire más várólista, azzal a különbséggel, hogy az üzenetek csak küldheti el a fölérendelt entitás a kézbesítetlen levelek kézmozdulat keresztül.</span><span class="sxs-lookup"><span data-stu-id="1c13e-112">From an API and protocol perspective, the DLQ is mostly similar to any other queue, except that messages can only be submitted via the dead-letter gesture of the parent entity.</span></span> <span data-ttu-id="1c13e-113">Idő a működés közbeni ezenkívül nem teljesülnek, és nem lehet kézbesítetlen egy DLQ üzenetét.</span><span class="sxs-lookup"><span data-stu-id="1c13e-113">In addition, time-to-live is not observed, and you can't dead-letter a message from a DLQ.</span></span> <span data-ttu-id="1c13e-114">A kézbesítetlen levelek várólistájára teljes mértékben támogatja a betekintés-lock kézbesítési és tranzakciós műveletek.</span><span class="sxs-lookup"><span data-stu-id="1c13e-114">The dead-letter queue fully supports peek-lock delivery and transactional operations.</span></span>

<span data-ttu-id="1c13e-115">Vegye figyelembe, hogy van-e a DLQ nincs automatikus karbantartása.</span><span class="sxs-lookup"><span data-stu-id="1c13e-115">Note that there is no automatic cleanup of the DLQ.</span></span> <span data-ttu-id="1c13e-116">Üzenetek a DLQ maradnak, amíg meg explicit módon le azokat a DLQ és hívás [Complete()](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_CompleteAsync) a kézbesítetlen levelek üzenethez.</span><span class="sxs-lookup"><span data-stu-id="1c13e-116">Messages remain in the DLQ until you explicitly retrieve them from the DLQ and call [Complete()](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_CompleteAsync) on the dead-letter message.</span></span>

## <a name="moving-messages-to-the-dlq"></a><span data-ttu-id="1c13e-117">A DLQ üzenetek áthelyezése</span><span class="sxs-lookup"><span data-stu-id="1c13e-117">Moving messages to the DLQ</span></span>

<span data-ttu-id="1c13e-118">Nincsenek Service Bus több olyan tevékenységet, a DLQ belül az üzenetkezelési motor magát a az beszerzése leküldött üzenetek okozhatja.</span><span class="sxs-lookup"><span data-stu-id="1c13e-118">There are several activities in Service Bus that cause messages to get pushed to the DLQ from within the messaging engine itself.</span></span> <span data-ttu-id="1c13e-119">Az alkalmazás a DLQ üzeneteket is explicit módon helyezheti.</span><span class="sxs-lookup"><span data-stu-id="1c13e-119">An application can also explicitly move messages to the DLQ.</span></span> 

<span data-ttu-id="1c13e-120">Az üzenet a broker által lekérdezi áthelyezték, két tulajdonságok fel lettek véve az üzenetek a broker meghívja a belső verzióját a [kézbesítetlen levelek](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_DeadLetter_System_String_System_String_) metódust a üzenethez: `DeadLetterReason` és `DeadLetterErrorDescription`.</span><span class="sxs-lookup"><span data-stu-id="1c13e-120">As the message gets moved by the broker, two properties are added to the message as the broker calls its internal version of the [DeadLetter](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_DeadLetter_System_String_System_String_) method on the message: `DeadLetterReason` and `DeadLetterErrorDescription`.</span></span>

<span data-ttu-id="1c13e-121">Alkalmazások saját kódokat adhat meg a `DeadLetterReason` tulajdonságot, de a rendszer beállítja a következő értékeket.</span><span class="sxs-lookup"><span data-stu-id="1c13e-121">Applications can define their own codes for the `DeadLetterReason` property, but the system sets the following values.</span></span>

| <span data-ttu-id="1c13e-122">Az állapot</span><span class="sxs-lookup"><span data-stu-id="1c13e-122">Condition</span></span> | <span data-ttu-id="1c13e-123">DeadLetterReason</span><span class="sxs-lookup"><span data-stu-id="1c13e-123">DeadLetterReason</span></span> | <span data-ttu-id="1c13e-124">DeadLetterErrorDescription</span><span class="sxs-lookup"><span data-stu-id="1c13e-124">DeadLetterErrorDescription</span></span> |
| --- | --- | --- |
| <span data-ttu-id="1c13e-125">Mindig</span><span class="sxs-lookup"><span data-stu-id="1c13e-125">Always</span></span> |<span data-ttu-id="1c13e-126">HeaderSizeExceeded</span><span class="sxs-lookup"><span data-stu-id="1c13e-126">HeaderSizeExceeded</span></span> |<span data-ttu-id="1c13e-127">Ez az adatfolyam üzenetméret-kvótája túl lett lépve.</span><span class="sxs-lookup"><span data-stu-id="1c13e-127">The size quota for this stream has been exceeded.</span></span> |
| <span data-ttu-id="1c13e-128">! TopicDescription.</span><span class="sxs-lookup"><span data-stu-id="1c13e-128">!TopicDescription.</span></span><br /><span data-ttu-id="1c13e-129">EnableFilteringMessagesBeforePublishing és SubscriptionDescription.</span><span class="sxs-lookup"><span data-stu-id="1c13e-129">EnableFilteringMessagesBeforePublishing and SubscriptionDescription.</span></span><br /><span data-ttu-id="1c13e-130">EnableDeadLetteringOnFilterEvaluationExceptions</span><span class="sxs-lookup"><span data-stu-id="1c13e-130">EnableDeadLetteringOnFilterEvaluationExceptions</span></span> |<span data-ttu-id="1c13e-131">Kivétel történt. GetType(). név</span><span class="sxs-lookup"><span data-stu-id="1c13e-131">exception.GetType().Name</span></span> |<span data-ttu-id="1c13e-132">Kivétel történt. Üzenet</span><span class="sxs-lookup"><span data-stu-id="1c13e-132">exception.Message</span></span> |
| <span data-ttu-id="1c13e-133">EnableDeadLetteringOnMessageExpiration</span><span class="sxs-lookup"><span data-stu-id="1c13e-133">EnableDeadLetteringOnMessageExpiration</span></span> |<span data-ttu-id="1c13e-134">TTLExpiredException</span><span class="sxs-lookup"><span data-stu-id="1c13e-134">TTLExpiredException</span></span> |<span data-ttu-id="1c13e-135">Az üzenet lejárt, és nem volt lettered.</span><span class="sxs-lookup"><span data-stu-id="1c13e-135">The message expired and was dead lettered.</span></span> |
| <span data-ttu-id="1c13e-136">SubscriptionDescription.RequiresSession</span><span class="sxs-lookup"><span data-stu-id="1c13e-136">SubscriptionDescription.RequiresSession</span></span> |<span data-ttu-id="1c13e-137">Munkamenet-azonosító értéke null.</span><span class="sxs-lookup"><span data-stu-id="1c13e-137">Session id is null.</span></span> |<span data-ttu-id="1c13e-138">A munkamenet engedélyezve entitás nem engedélyezi egy üzenetet, amelynek a munkamenet-azonosító értéke null.</span><span class="sxs-lookup"><span data-stu-id="1c13e-138">Session enabled entity doesn't allow a message whose session identifier is null.</span></span> |
| <span data-ttu-id="1c13e-139">! halott levél várósor</span><span class="sxs-lookup"><span data-stu-id="1c13e-139">!dead letter queue</span></span> |<span data-ttu-id="1c13e-140">MaxTransferHopCountExceeded</span><span class="sxs-lookup"><span data-stu-id="1c13e-140">MaxTransferHopCountExceeded</span></span> |<span data-ttu-id="1c13e-141">NULL értékű</span><span class="sxs-lookup"><span data-stu-id="1c13e-141">Null</span></span> |
| <span data-ttu-id="1c13e-142">Explicit dead megnevezéséhez alkalmazás</span><span class="sxs-lookup"><span data-stu-id="1c13e-142">Application explicit dead lettering</span></span> |<span data-ttu-id="1c13e-143">A megadott alkalmazás.</span><span class="sxs-lookup"><span data-stu-id="1c13e-143">Specified by application</span></span> |<span data-ttu-id="1c13e-144">A megadott alkalmazás.</span><span class="sxs-lookup"><span data-stu-id="1c13e-144">Specified by application</span></span> |

## <a name="exceeding-maxdeliverycount"></a><span data-ttu-id="1c13e-145">MaxDeliveryCount túllépését eredményezi</span><span class="sxs-lookup"><span data-stu-id="1c13e-145">Exceeding MaxDeliveryCount</span></span>
<span data-ttu-id="1c13e-146">A várólisták és előfizetések is egy [QueueDescription.MaxDeliveryCount](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_MaxDeliveryCount) és [SubscriptionDescription.MaxDeliveryCount](/dotnet/api/microsoft.servicebus.messaging.subscriptiondescription#Microsoft_ServiceBus_Messaging_SubscriptionDescription_MaxDeliveryCount) tulajdonság az alapértelmezett értéke 10.</span><span class="sxs-lookup"><span data-stu-id="1c13e-146">Queues and subscriptions each have a [QueueDescription.MaxDeliveryCount](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_MaxDeliveryCount) and [SubscriptionDescription.MaxDeliveryCount](/dotnet/api/microsoft.servicebus.messaging.subscriptiondescription#Microsoft_ServiceBus_Messaging_SubscriptionDescription_MaxDeliveryCount) property respectively; the default value is 10.</span></span> <span data-ttu-id="1c13e-147">Amikor egy üzenet kézbesítése megtörtént a zárolást ([ReceiveMode.PeekLock](/dotnet/api/microsoft.servicebus.messaging.receivemode)), de lett vagy explicit módon elhagyott vagy lejárt a zárolási, az üzenet [BrokeredMessage.DeliveryCount](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_DeliveryCount) van minden.</span><span class="sxs-lookup"><span data-stu-id="1c13e-147">Whenever a message has been delivered under a lock ([ReceiveMode.PeekLock](/dotnet/api/microsoft.servicebus.messaging.receivemode)), but has been either explicitly abandoned or the lock has expired, the message's [BrokeredMessage.DeliveryCount](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_DeliveryCount) is incremented.</span></span> <span data-ttu-id="1c13e-148">Ha [DeliveryCount](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_DeliveryCount) meghaladja [MaxDeliveryCount](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_MaxDeliveryCount), az üzenet átkerül a DLQ megadása a `MaxDeliveryCountExceeded` okkód.</span><span class="sxs-lookup"><span data-stu-id="1c13e-148">When [DeliveryCount](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_DeliveryCount) exceeds [MaxDeliveryCount](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_MaxDeliveryCount), the message is moved to the DLQ, specifying the `MaxDeliveryCountExceeded` reason code.</span></span>

<span data-ttu-id="1c13e-149">Ez a viselkedés nem lehet letiltani, de beállíthatja [MaxDeliveryCount](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_MaxDeliveryCount) nagyon sok.</span><span class="sxs-lookup"><span data-stu-id="1c13e-149">This behavior cannot be disabled, but you can set [MaxDeliveryCount](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_MaxDeliveryCount) to a very large number.</span></span>

## <a name="exceeding-timetolive"></a><span data-ttu-id="1c13e-150">A TimeToLive tulajdonság túllépését eredményezi</span><span class="sxs-lookup"><span data-stu-id="1c13e-150">Exceeding TimeToLive</span></span>
<span data-ttu-id="1c13e-151">Ha a [QueueDescription.EnableDeadLetteringOnMessageExpiration](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_EnableDeadLetteringOnMessageExpiration) vagy [SubscriptionDescription.EnableDeadLetteringOnMessageExpiration](/dotnet/api/microsoft.servicebus.messaging.subscriptiondescription#Microsoft_ServiceBus_Messaging_SubscriptionDescription_EnableDeadLetteringOnMessageExpiration) tulajdonsága **Igaz** (az alapértelmezett érték **hamis**), minden lejáró üzeneteket a rendszer áthelyezi a DLQ megadása a `TTLExpiredException` okkód.</span><span class="sxs-lookup"><span data-stu-id="1c13e-151">When the [QueueDescription.EnableDeadLetteringOnMessageExpiration](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_EnableDeadLetteringOnMessageExpiration) or [SubscriptionDescription.EnableDeadLetteringOnMessageExpiration](/dotnet/api/microsoft.servicebus.messaging.subscriptiondescription#Microsoft_ServiceBus_Messaging_SubscriptionDescription_EnableDeadLetteringOnMessageExpiration) property is set to **true** (the default is **false**), all expiring messages are moved to the DLQ, specifying the  `TTLExpiredException` reason code.</span></span>

<span data-ttu-id="1c13e-152">Vegye figyelembe, hogy a lejárt üzenetek csak törlődnek, és ezért át a DLQ jogosultak-e a fő várakozási sorba vagy előfizetés; legalább egy aktív fogadó esetén adott szándékosan van így.</span><span class="sxs-lookup"><span data-stu-id="1c13e-152">Note that expired messages are only purged and therefore moved to the DLQ when there is at least one active receiver pulling on the main queue or subscription; that behavior is by design.</span></span>

## <a name="errors-while-processing-subscription-rules"></a><span data-ttu-id="1c13e-153">Hiba történt az előfizetési szabályok feldolgozása</span><span class="sxs-lookup"><span data-stu-id="1c13e-153">Errors while processing subscription rules</span></span>
<span data-ttu-id="1c13e-154">Ha a [SubscriptionDescription.EnableDeadLetteringOnFilterEvaluationExceptions](/dotnet/api/microsoft.servicebus.messaging.subscriptiondescription#Microsoft_ServiceBus_Messaging_SubscriptionDescription_EnableDeadLetteringOnFilterEvaluationExceptions) tulajdonság engedélyezve van az előfizetéshez, esetlegesen egy előfizetés SQL szűrési szabály végrehajtása során előforduló hibákat a rendszer rögzíti a mentén DLQ a hibás üzenettel.</span><span class="sxs-lookup"><span data-stu-id="1c13e-154">When the [SubscriptionDescription.EnableDeadLetteringOnFilterEvaluationExceptions](/dotnet/api/microsoft.servicebus.messaging.subscriptiondescription#Microsoft_ServiceBus_Messaging_SubscriptionDescription_EnableDeadLetteringOnFilterEvaluationExceptions) property is enabled for a subscription, any errors that occur while a subscription's SQL filter rule executes are captured in the DLQ along with the offending message.</span></span>

## <a name="application-level-dead-lettering"></a><span data-ttu-id="1c13e-155">Alkalmazásszintű kézbesítetlen levelek kezelése</span><span class="sxs-lookup"><span data-stu-id="1c13e-155">Application-level dead-lettering</span></span>
<span data-ttu-id="1c13e-156">A rendszer által biztosított kézbesítetlen levelek kezelése szolgáltatások alkalmazások is használhatnak a DLQ kifejezetten elutasítja az üzenet nem fogadható el.</span><span class="sxs-lookup"><span data-stu-id="1c13e-156">In addition to the system-provided dead-lettering features, applications can use the DLQ to explicitly reject unacceptable messages.</span></span> <span data-ttu-id="1c13e-157">Ide tartozhat, amely nem lehet megfelelően feldolgozni tetszőleges rendszer probléma miatt üzenetek, helytelen formátumú hasznos adat található rendelkező üzenetek vagy üzeneteket, amelyek bizonyos üzenet szintű biztonsági rendszer használata esetén a hitelesítés sikertelen.</span><span class="sxs-lookup"><span data-stu-id="1c13e-157">This may include messages that cannot be properly processed due to any sort of system issue, messages that hold malformed payloads, or messages that fail authentication when some message-level security scheme is used.</span></span>

## <a name="dead-lettering-in-forwardto-or-sendvia-scenarios"></a><span data-ttu-id="1c13e-158">Kézbesítetlen levelek kezelése ForwardTo vagy SendVia esetekben</span><span class="sxs-lookup"><span data-stu-id="1c13e-158">Dead-lettering in ForwardTo or SendVia scenarios</span></span>

<span data-ttu-id="1c13e-159">Üzenetek kapnak az átviteli kézbesítetlen levelek várólistájára az alábbi feltételek:</span><span class="sxs-lookup"><span data-stu-id="1c13e-159">Messages will be sent to the transfer dead-letter queue under the following conditions:</span></span>

- <span data-ttu-id="1c13e-160">Egy üzenet keresztülhalad várólisták vagy olyan témakörök, amelyek több mint 3 [összeláncolt](service-bus-auto-forwarding.md).</span><span class="sxs-lookup"><span data-stu-id="1c13e-160">A message passes through more than 3 queues or topics that are [chained together](service-bus-auto-forwarding.md).</span></span>
- <span data-ttu-id="1c13e-161">A célvárólista vagy témakör le van tiltva, vagy törölték.</span><span class="sxs-lookup"><span data-stu-id="1c13e-161">The destination queue or topic is disabled or deleted.</span></span>
- <span data-ttu-id="1c13e-162">A célvárólista vagy témakör meghaladja a maximális entitás méretét.</span><span class="sxs-lookup"><span data-stu-id="1c13e-162">The destination queue or topic exceeds the maximum entity size.</span></span>

<span data-ttu-id="1c13e-163">Ezek kézbesítetlen lettered üzeneteket beolvasni, a fogadó használatával hozhat létre a [FormatTransferDeadletterPath](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_FormatTransferDeadLetterPath_System_String_) segédprogram metódust.</span><span class="sxs-lookup"><span data-stu-id="1c13e-163">To retrieve these dead-lettered messages, you can create a receiver using the [FormatTransferDeadletterPath](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_FormatTransferDeadLetterPath_System_String_) utility method.</span></span>

## <a name="example"></a><span data-ttu-id="1c13e-164">Példa</span><span class="sxs-lookup"><span data-stu-id="1c13e-164">Example</span></span>
<span data-ttu-id="1c13e-165">A következő kódrészletet a üzenetet fogadó hoz létre.</span><span class="sxs-lookup"><span data-stu-id="1c13e-165">The following code snippet creates a message receiver.</span></span> <span data-ttu-id="1c13e-166">A fogadási ciklusban a fő várólista, a kód lekéri adatokkal rendelkező üzenetben [Receive(TimeSpan.Zero)](/dotnet/api/microsoft.servicebus.messaging.messagereceiver#Microsoft_ServiceBus_Messaging_MessageReceiver_Receive_System_TimeSpan_), amely rákérdez, hogy a broker azonnal vissza az összes üzenet azonnal elérhetők legyenek, vagy nincs eredményt adja vissza.</span><span class="sxs-lookup"><span data-stu-id="1c13e-166">In the receive loop for the main queue, the code retrieves the message with [Receive(TimeSpan.Zero)](/dotnet/api/microsoft.servicebus.messaging.messagereceiver#Microsoft_ServiceBus_Messaging_MessageReceiver_Receive_System_TimeSpan_), which asks the broker to instantly return any message readily available, or to return with no result.</span></span> <span data-ttu-id="1c13e-167">A kód üzenetet kap, ha azt azonnal használja tovább azt, milyen lépésekkel a `DeliveryCount`.</span><span class="sxs-lookup"><span data-stu-id="1c13e-167">If the code receives a message, it immediately abandons it, which increments the  `DeliveryCount`.</span></span> <span data-ttu-id="1c13e-168">Miután a rendszer az üzenetet a DLQ helyezi, a fő várakozási sorba üres, és a hurok kilépjen-e, mint a [ReceiveAsync](/dotnet/api/microsoft.servicebus.messaging.messagereceiver#Microsoft_ServiceBus_Messaging_MessageReceiver_ReceiveAsync_System_TimeSpan_) adja vissza **null**.</span><span class="sxs-lookup"><span data-stu-id="1c13e-168">Once the system moves the message to the DLQ, the main queue is empty and the loop exits, as [ReceiveAsync](/dotnet/api/microsoft.servicebus.messaging.messagereceiver#Microsoft_ServiceBus_Messaging_MessageReceiver_ReceiveAsync_System_TimeSpan_) returns **null**.</span></span>

```csharp
var receiver = await receiverFactory.CreateMessageReceiverAsync(queueName, ReceiveMode.PeekLock);
while(true)
{
    var msg = await receiver.ReceiveAsync(TimeSpan.Zero);
    if (msg != null)
    {
        Console.WriteLine("Picked up message; DeliveryCount {0}", msg.DeliveryCount);
        await msg.AbandonAsync();
    }
    else
    {
        break;
    }
}
```

## <a name="next-steps"></a><span data-ttu-id="1c13e-169">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="1c13e-169">Next steps</span></span>
<span data-ttu-id="1c13e-170">További információt a Service Bus-üzenetsorok a következő cikkekben talál:</span><span class="sxs-lookup"><span data-stu-id="1c13e-170">See the following articles for more information about Service Bus queues:</span></span>

* [<span data-ttu-id="1c13e-171">Bevezetés a Service Bus által kezelt üzenetsorok használatába</span><span class="sxs-lookup"><span data-stu-id="1c13e-171">Get started with Service Bus queues</span></span>](service-bus-dotnet-get-started-with-queues.md)
* [<span data-ttu-id="1c13e-172">Az Azure várólisták és a Service Bus üzenetsorok képest</span><span class="sxs-lookup"><span data-stu-id="1c13e-172">Azure Queues and Service Bus queues compared</span></span>](service-bus-azure-and-service-bus-queues-compared-contrasted.md)

