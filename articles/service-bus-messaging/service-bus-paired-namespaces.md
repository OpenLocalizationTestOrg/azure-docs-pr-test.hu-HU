---
title: "Az Azure Service Bus párosítva névterek |} Microsoft Docs"
description: "Megvalósítás részletei párosított névtér és a költséghatékonyság"
services: service-bus-messaging
documentationcenter: na
author: sethmanheim
manager: timlt
editor: 
ms.assetid: 2440c8d3-ed2e-47e0-93cf-ab7fbb855d2e
ms.service: service-bus-messaging
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 05/25/2017
ms.author: sethm
ms.openlocfilehash: a200ea7937b9f5296c743928a9408897adfba428
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 07/11/2017
---
# <a name="paired-namespace-implementation-details-and-cost-implications"></a><span data-ttu-id="1cde4-103">Névtér megvalósítás részletei megfeleltetni, ráadásul a költségek gyakorolt hatása</span><span class="sxs-lookup"><span data-stu-id="1cde4-103">Paired namespace implementation details and cost implications</span></span>
<span data-ttu-id="1cde4-104">A [PairNamespaceAsync] [ PairNamespaceAsync] módszer használatával egy [SendAvailabilityPairedNamespaceOptions] [ SendAvailabilityPairedNamespaceOptions] példány, látható feladatokat végez az Ön nevében.</span><span class="sxs-lookup"><span data-stu-id="1cde4-104">The [PairNamespaceAsync][PairNamespaceAsync] method, using a [SendAvailabilityPairedNamespaceOptions][SendAvailabilityPairedNamespaceOptions] instance, performs visible tasks on your behalf.</span></span> <span data-ttu-id="1cde4-105">Nincs vannak költség szempontok a funkció használata esetén, mert működésének megértése ezeket a feladatokat, hogy ez akkor fordul elő, amikor várt viselkedése.</span><span class="sxs-lookup"><span data-stu-id="1cde4-105">Because there are cost considerations when using the feature, it is useful to understand those tasks so that you expect the behavior when it happens.</span></span> <span data-ttu-id="1cde4-106">Az API-t a következő automatikus viselkedés az Ön nevében végez:</span><span class="sxs-lookup"><span data-stu-id="1cde4-106">The API engages the following automatic behavior on your behalf:</span></span>

* <span data-ttu-id="1cde4-107">Várakozó várólisták létrehozása.</span><span class="sxs-lookup"><span data-stu-id="1cde4-107">Creation of backlog queues.</span></span>
* <span data-ttu-id="1cde4-108">Létrehozása egy [MessageSender] [ MessageSender] objektum, amely az üzenetsorok és témakörök-kiszolgálóhoz.</span><span class="sxs-lookup"><span data-stu-id="1cde4-108">Creation of a [MessageSender][MessageSender] object that talks to queues or topics.</span></span>
* <span data-ttu-id="1cde4-109">Amikor egy üzenetküldési entitásra nem érhető el, küld észlelés, ha az érintett entitásként válik elérhetővé újra megpróbálja ping üzeneteket az entitásban.</span><span class="sxs-lookup"><span data-stu-id="1cde4-109">When a messaging entity becomes unavailable, sends ping messages to the entity in an attempt to detect when that entity becomes available again.</span></span>
* <span data-ttu-id="1cde4-110">Választhatóan a "üzenet szivattyúk" gyűjteménye, amelyek áthelyezését a várakozó várólistákról elsődleges várólistára.</span><span class="sxs-lookup"><span data-stu-id="1cde4-110">Optionally creates of a set of “message pumps” that move messages from the backlog queues to the primary queues.</span></span>
* <span data-ttu-id="1cde4-111">Az elsődleges és másodlagos bezárni vagy hibás koordinálja [MessagingFactory] [ MessagingFactory] példányok.</span><span class="sxs-lookup"><span data-stu-id="1cde4-111">Coordinates closing/faulting of the primary and secondary [MessagingFactory][MessagingFactory] instances.</span></span>

<span data-ttu-id="1cde4-112">Magas szinten, a szolgáltatás a következőképpen működik: Ha az elsődleges entitás állapota kifogástalan, nincs viselkedés változások történnek.</span><span class="sxs-lookup"><span data-stu-id="1cde4-112">At a high level, the feature works as follows: when the primary entity is healthy, no behavior changes occur.</span></span> <span data-ttu-id="1cde4-113">Ha a [FailoverInterval] [ FailoverInterval] időtartam eltelte, és az elsődleges entitás nem sikeres láthatják küldése után nem átmeneti [MessagingException] [ MessagingException] vagy egy [TimeoutException][TimeoutException], a következő történik:</span><span class="sxs-lookup"><span data-stu-id="1cde4-113">When the [FailoverInterval][FailoverInterval] duration elapses, and the primary entity sees no successful sends after a non-transient [MessagingException][MessagingException] or a [TimeoutException][TimeoutException], the following behavior occurs:</span></span>

1. <span data-ttu-id="1cde4-114">Az elsődleges entitás műveletek le vannak tiltva, és a rendszer az elsődleges entitás pingeli, amíg a ping-üzenetek kézbesítése sikeresen küldése.</span><span class="sxs-lookup"><span data-stu-id="1cde4-114">Send operations to the primary entity are disabled and the system pings the primary entity until pings can be successfully delivered.</span></span>
2. <span data-ttu-id="1cde4-115">Egy véletlenszerű várakozó várólista van kiválasztva.</span><span class="sxs-lookup"><span data-stu-id="1cde4-115">A random backlog queue is selected.</span></span>
3. <span data-ttu-id="1cde4-116">[BrokeredMessage] [ BrokeredMessage] objektumok legyenek átirányítva a kiválasztott várakozó várólista.</span><span class="sxs-lookup"><span data-stu-id="1cde4-116">[BrokeredMessage][BrokeredMessage] objects are routed to the chosen backlog queue.</span></span>
4. <span data-ttu-id="1cde4-117">A kiválasztott várakozó várólistára küldési művelet sikertelen lesz, ha erre a várólistára lekért elforgatási van, és egy új sor van kiválasztva.</span><span class="sxs-lookup"><span data-stu-id="1cde4-117">If a send operation to the chosen backlog queue fails, that queue is pulled from the rotation and a new queue is selected.</span></span> <span data-ttu-id="1cde4-118">Az összes feladó a [MessagingFactory] [ MessagingFactory] példány ismerje meg a hiba.</span><span class="sxs-lookup"><span data-stu-id="1cde4-118">All senders on the [MessagingFactory][MessagingFactory] instance learn of the failure.</span></span>

<span data-ttu-id="1cde4-119">A következő ábra a feladatütemezési jelzik.</span><span class="sxs-lookup"><span data-stu-id="1cde4-119">The following figures depict the sequence.</span></span> <span data-ttu-id="1cde4-120">A küldő először küld üzeneteket.</span><span class="sxs-lookup"><span data-stu-id="1cde4-120">First, the sender sends messages.</span></span>

![Párhuzamos névterek][0]

<span data-ttu-id="1cde4-122">Elsődleges queue küldendő hiba esetén a küldő megkezdi egy véletlenszerűen kiválasztott várakozó várólista üzenetküldésre.</span><span class="sxs-lookup"><span data-stu-id="1cde4-122">Upon failure to send to the primary queue, the sender begins sending messages to a randomly chosen backlog queue.</span></span> <span data-ttu-id="1cde4-123">Egy időben a ping feladat elindítása.</span><span class="sxs-lookup"><span data-stu-id="1cde4-123">Simultaneously, it starts a ping task.</span></span>

![Párhuzamos névterek][1]

<span data-ttu-id="1cde4-125">Ezen a ponton az üzenetek továbbra a másodlagos várólista és az elsődleges várólistára nem szállított.</span><span class="sxs-lookup"><span data-stu-id="1cde4-125">At this point the messages are still in the secondary queue and have not been delivered to the primary queue.</span></span> <span data-ttu-id="1cde4-126">Az elsődleges queue újra állapota kifogástalan, ha legalább egy folyamat futnia kell a Szifonos.</span><span class="sxs-lookup"><span data-stu-id="1cde4-126">Once the primary queue is healthy again, at least one process should be running the syphon.</span></span> <span data-ttu-id="1cde4-127">A Szifonos továbbítja az üzeneteket a különböző várakozó várólisták a megfelelő cél entitásokat (üzenetsorok és témakörök).</span><span class="sxs-lookup"><span data-stu-id="1cde4-127">The syphon delivers the messages from all the various backlog queues to the proper destination entities (queues and topics).</span></span>

![Párhuzamos névterek][2]

<span data-ttu-id="1cde4-129">Ez a témakör további része darabot működése részleteit ismerteti.</span><span class="sxs-lookup"><span data-stu-id="1cde4-129">The remainder of this topic discusses the specific details of how these pieces work.</span></span>

## <a name="creation-of-backlog-queues"></a><span data-ttu-id="1cde4-130">Várakozó várólista létrehozása</span><span class="sxs-lookup"><span data-stu-id="1cde4-130">Creation of backlog queues</span></span>
<span data-ttu-id="1cde4-131">A [SendAvailabilityPairedNamespaceOptions] [ SendAvailabilityPairedNamespaceOptions] objektum lett átadva a [PairNamespaceAsync] [ PairNamespaceAsync] metódus számát jelzi. Várakozó várólisták szeretne használni.</span><span class="sxs-lookup"><span data-stu-id="1cde4-131">The [SendAvailabilityPairedNamespaceOptions][SendAvailabilityPairedNamespaceOptions] object passed to the [PairNamespaceAsync][PairNamespaceAsync] method indicates the number of backlog queues you want to use.</span></span> <span data-ttu-id="1cde4-132">Minden tartalék várólista létrejön a következő tulajdonságokkal explicit módon beállítva (minden más érték beállítása a [QueueDescription] [ QueueDescription] alapértelmezett):</span><span class="sxs-lookup"><span data-stu-id="1cde4-132">Each backlog queue is then created with the following properties explicitly set (all other values are set to the [QueueDescription][QueueDescription] defaults):</span></span>

| <span data-ttu-id="1cde4-133">Elérési út</span><span class="sxs-lookup"><span data-stu-id="1cde4-133">Path</span></span> | <span data-ttu-id="1cde4-134">[elsődleges névtér] / x-servicebus-átvitel / [index] [0, BacklogQueueCount) érték esetén a [index]</span><span class="sxs-lookup"><span data-stu-id="1cde4-134">[primary namespace]/x-servicebus-transfer/[index] where [index] is a value in [0, BacklogQueueCount)</span></span> |
| --- | --- |
| <span data-ttu-id="1cde4-135">MaxSizeInMegabytes</span><span class="sxs-lookup"><span data-stu-id="1cde4-135">MaxSizeInMegabytes</span></span> |<span data-ttu-id="1cde4-136">5120</span><span class="sxs-lookup"><span data-stu-id="1cde4-136">5120</span></span> |
| <span data-ttu-id="1cde4-137">maxDeliveryCount</span><span class="sxs-lookup"><span data-stu-id="1cde4-137">MaxDeliveryCount</span></span> |<span data-ttu-id="1cde4-138">egész szám. MaxValue</span><span class="sxs-lookup"><span data-stu-id="1cde4-138">int.MaxValue</span></span> |
| <span data-ttu-id="1cde4-139">DefaultMessageTimeToLive</span><span class="sxs-lookup"><span data-stu-id="1cde4-139">DefaultMessageTimeToLive</span></span> |<span data-ttu-id="1cde4-140">TimeSpan.MaxValue</span><span class="sxs-lookup"><span data-stu-id="1cde4-140">TimeSpan.MaxValue</span></span> |
| <span data-ttu-id="1cde4-141">AutoDeleteOnIdle</span><span class="sxs-lookup"><span data-stu-id="1cde4-141">AutoDeleteOnIdle</span></span> |<span data-ttu-id="1cde4-142">TimeSpan.MaxValue</span><span class="sxs-lookup"><span data-stu-id="1cde4-142">TimeSpan.MaxValue</span></span> |
| <span data-ttu-id="1cde4-143">LockDuration</span><span class="sxs-lookup"><span data-stu-id="1cde4-143">LockDuration</span></span> |<span data-ttu-id="1cde4-144">1 perc</span><span class="sxs-lookup"><span data-stu-id="1cde4-144">1 minute</span></span> |
| <span data-ttu-id="1cde4-145">EnableDeadLetteringOnMessageExpiration</span><span class="sxs-lookup"><span data-stu-id="1cde4-145">EnableDeadLetteringOnMessageExpiration</span></span> |<span data-ttu-id="1cde4-146">Igaz</span><span class="sxs-lookup"><span data-stu-id="1cde4-146">true</span></span> |
| <span data-ttu-id="1cde4-147">EnableBatchedOperations</span><span class="sxs-lookup"><span data-stu-id="1cde4-147">EnableBatchedOperations</span></span> |<span data-ttu-id="1cde4-148">Igaz</span><span class="sxs-lookup"><span data-stu-id="1cde4-148">true</span></span> |

<span data-ttu-id="1cde4-149">Például az első várakozó várólistát létrehozott névtér **contoso** nevű `contoso/x-servicebus-transfer/0`.</span><span class="sxs-lookup"><span data-stu-id="1cde4-149">For example, the first backlog queue created for namespace **contoso** is named `contoso/x-servicebus-transfer/0`.</span></span>

<span data-ttu-id="1cde4-150">Az üzenetsorok létrehozása, amikor a kód először ellenőrzi, hogy ilyen a várólista létezik-e.</span><span class="sxs-lookup"><span data-stu-id="1cde4-150">When creating the queues, the code first checks to see if such a queue exists.</span></span> <span data-ttu-id="1cde4-151">Ha a várólista nem létezik, a várólista létrejön.</span><span class="sxs-lookup"><span data-stu-id="1cde4-151">If the queue does not exist, then the queue is created.</span></span> <span data-ttu-id="1cde4-152">A kód nem "extra" Várakozó várólisták karbantartása.</span><span class="sxs-lookup"><span data-stu-id="1cde4-152">The code does not clean up "extra" backlog queues.</span></span> <span data-ttu-id="1cde4-153">Pontosabban Ha az alkalmazás elsődleges névterű **contoso** öt várakozó várólistára, de az elérési úttal rendelkező várakozó várólista kérelmek `contoso/x-servicebus-transfer/7` létezik, várólistához további várakozó továbbra is megtalálható, de nem használatos.</span><span class="sxs-lookup"><span data-stu-id="1cde4-153">Specifically, if the application with the primary namespace **contoso** requests five backlog queues but a backlog queue with the path `contoso/x-servicebus-transfer/7` exists, that extra backlog queue is still present but is not used.</span></span> <span data-ttu-id="1cde4-154">A rendszer explicit módon engedélyezi a felesleges várakozó várólisták is létezhetnek, amelyek nem használhatók.</span><span class="sxs-lookup"><span data-stu-id="1cde4-154">The system explicitly allows extra backlog queues to exist that would not be used.</span></span> <span data-ttu-id="1cde4-155">A névtér tulajdonosaként való telepítésért felelős törölje a nem használt vagy nemkívánatos várakozó üzenetsorokkal.</span><span class="sxs-lookup"><span data-stu-id="1cde4-155">As the namespace owner, you are responsible for cleaning up any unused/unwanted backlog queues.</span></span> <span data-ttu-id="1cde4-156">Ez a döntés oka, hogy a Service Bus nem tudja, milyen célból létezik a következő névtérbeli a várólisták számára.</span><span class="sxs-lookup"><span data-stu-id="1cde4-156">The reason for this decision is that Service Bus cannot know what purposes exist for all the queues in your namespace.</span></span> <span data-ttu-id="1cde4-157">Továbbá ha a várólista létezik-e a megadott névvel, de nem felel meg a feltételezett [QueueDescription][QueueDescription], majd az OK: a saját módosítható az alapértelmezett viselkedés.</span><span class="sxs-lookup"><span data-stu-id="1cde4-157">Furthermore, if a queue exists with the given name but does not meet the assumed [QueueDescription][QueueDescription], then your reasons are your own for changing the default behavior.</span></span> <span data-ttu-id="1cde4-158">Nem garantálja a kód által a várakozó várólisták módosításai legyenek módosítva.</span><span class="sxs-lookup"><span data-stu-id="1cde4-158">No guarantees are made for modifications to the backlog queues by your code.</span></span> <span data-ttu-id="1cde4-159">Győződjön meg arról, hogy alaposan tesztelje a módosításokat.</span><span class="sxs-lookup"><span data-stu-id="1cde4-159">Make sure to test your changes thoroughly.</span></span>

## <a name="custom-messagesender"></a><span data-ttu-id="1cde4-160">Egyéni MessageSender</span><span class="sxs-lookup"><span data-stu-id="1cde4-160">Custom MessageSender</span></span>
<span data-ttu-id="1cde4-161">Küldésekor, az összes üzenet végighaladnia belső [MessageSender] [ MessageSender] objektum, amely a szokásos módon viselkedik, ha minden rendben működik, és átirányítja a felhasználókat a várakozó fájlok számát a várólisták, amikor dolgot "törés."</span><span class="sxs-lookup"><span data-stu-id="1cde4-161">When sending, all messages go through an internal [MessageSender][MessageSender] object that behaves normally when everything works, and redirects to the backlog queues when things "break."</span></span> <span data-ttu-id="1cde4-162">Nem átmeneti hiba fogadását követően a felszabadításakor kezdődik.</span><span class="sxs-lookup"><span data-stu-id="1cde4-162">Upon receiving a non-transient failure, a timer starts.</span></span> <span data-ttu-id="1cde4-163">Után egy [TimeSpan] [ TimeSpan] álló időszak a [FailoverInterval] [ FailoverInterval] során, ami nem sikeres üzenetek küldése történik, tulajdonság értéke a feladatátvételi be kell kapcsolni.</span><span class="sxs-lookup"><span data-stu-id="1cde4-163">After a [TimeSpan][TimeSpan] period consisting of the [FailoverInterval][FailoverInterval] property value during which no successful messages are sent, the failover is engaged.</span></span> <span data-ttu-id="1cde4-164">Ezen a ponton a következőket fordulhat elő, ha minden:</span><span class="sxs-lookup"><span data-stu-id="1cde4-164">At this point, the following things happen for each entity:</span></span>

* <span data-ttu-id="1cde4-165">A ping feladatot hajt végre minden [PingPrimaryInterval] [ PingPrimaryInterval] annak ellenőrzésére, ha az entitás érhető el.</span><span class="sxs-lookup"><span data-stu-id="1cde4-165">A ping task executes every [PingPrimaryInterval][PingPrimaryInterval] to check if the entity is available.</span></span> <span data-ttu-id="1cde4-166">Ez a feladat sikeres, ha az entitás azonnal használó összes ügyfél-kódot elindul, új üzeneteket küld az elsődleges névtér.</span><span class="sxs-lookup"><span data-stu-id="1cde4-166">Once this task succeeds, all client code that uses the entity immediately starts sending new messages to the primary namespace.</span></span>
* <span data-ttu-id="1cde4-167">Bármely más feladóktól küldhet, hogy ugyanaz az entitás későbbi kérelmek eredményez a [BrokeredMessage] [ BrokeredMessage] küldi el a várakozó várólista elhelyezkedik módosítani.</span><span class="sxs-lookup"><span data-stu-id="1cde4-167">Future requests to send to that same entity from any other senders will result in the [BrokeredMessage][BrokeredMessage] being sent to be modified to sit in the backlog queue.</span></span> <span data-ttu-id="1cde4-168">A módosítás eltávolítja az egyes tulajdonságok a [BrokeredMessage] [ BrokeredMessage] objektumra, és a máshol tárolja azokat.</span><span class="sxs-lookup"><span data-stu-id="1cde4-168">The modification removes some properties from the [BrokeredMessage][BrokeredMessage] object and stores them elsewhere.</span></span> <span data-ttu-id="1cde4-169">A következő tulajdonság nincs bejelölve, és hozzáadása az új aliast, a Service Bus és az SDK egységesen üzenetek feldolgozásához:</span><span class="sxs-lookup"><span data-stu-id="1cde4-169">The following properties are cleared and added under a new alias, allowing Service Bus and the SDK to process messages uniformly:</span></span>

| <span data-ttu-id="1cde4-170">Régi tulajdonság neve</span><span class="sxs-lookup"><span data-stu-id="1cde4-170">Old Property Name</span></span> | <span data-ttu-id="1cde4-171">Új tulajdonság neve</span><span class="sxs-lookup"><span data-stu-id="1cde4-171">New Property Name</span></span> |
| --- | --- |
| <span data-ttu-id="1cde4-172">Munkamenet-azonosító</span><span class="sxs-lookup"><span data-stu-id="1cde4-172">SessionId</span></span> |<span data-ttu-id="1cde4-173">x-ms-munkamenet-azonosító</span><span class="sxs-lookup"><span data-stu-id="1cde4-173">x-ms-sessionid</span></span> |
| <span data-ttu-id="1cde4-174">TimeToLive</span><span class="sxs-lookup"><span data-stu-id="1cde4-174">TimeToLive</span></span> |<span data-ttu-id="1cde4-175">az x-ms-élettartam</span><span class="sxs-lookup"><span data-stu-id="1cde4-175">x-ms-timetolive</span></span> |
| <span data-ttu-id="1cde4-176">ScheduledEnqueueTimeUtc</span><span class="sxs-lookup"><span data-stu-id="1cde4-176">ScheduledEnqueueTimeUtc</span></span> |<span data-ttu-id="1cde4-177">x-ms-elérési út</span><span class="sxs-lookup"><span data-stu-id="1cde4-177">x-ms-path</span></span> |

<span data-ttu-id="1cde4-178">Az eredeti elérési utat célként is tárolja az üzenetben x-ms-path nevű tulajdonság.</span><span class="sxs-lookup"><span data-stu-id="1cde4-178">The original destination path is also stored within the message as a property named x-ms-path.</span></span> <span data-ttu-id="1cde4-179">Ez a kialakítás lehetővé teszi, hogy az egyetlen várakozó várólista azonos sok entitásokhoz tartozó üzenetek.</span><span class="sxs-lookup"><span data-stu-id="1cde4-179">This design allows messages for many entities to coexist in a single backlog queue.</span></span> <span data-ttu-id="1cde4-180">A tulajdonságok a Szifonos által van lefordítva.</span><span class="sxs-lookup"><span data-stu-id="1cde4-180">The properties are translated back by the syphon.</span></span>

<span data-ttu-id="1cde4-181">Az egyéni [MessageSender] [ MessageSender] objektum is tapasztal, amikor üzenetek megközelíti a 256 KB-os korlát és feladatátvételi be kell kapcsolni.</span><span class="sxs-lookup"><span data-stu-id="1cde4-181">The custom [MessageSender][MessageSender] object can encounter issues when messages approach the 256-KB limit and failover is engaged.</span></span> <span data-ttu-id="1cde4-182">Az egyéni [MessageSender] [ MessageSender] objektum tárolja az üzeneteket az összes üzenetsorok és témakörök a várakozó várólisták együtt.</span><span class="sxs-lookup"><span data-stu-id="1cde4-182">The custom [MessageSender][MessageSender] object stores messages for all queues and topics together in the backlog queues.</span></span> <span data-ttu-id="1cde4-183">Ez az objektum keveri együtt a várakozó várólistákon sok elsődleges üzeneteit.</span><span class="sxs-lookup"><span data-stu-id="1cde4-183">This object mixes messages from many primaries together within the backlog queues.</span></span> <span data-ttu-id="1cde4-184">Sok ügyfél, amely nem tudja egymás közötti terheléselosztás kezeléséhez, az SDK-val véletlenszerűen választja ki egy várakozó várólista minden [QueueClient] [ QueueClient] vagy [TopicClient] [ TopicClient] hoz létre a kódban.</span><span class="sxs-lookup"><span data-stu-id="1cde4-184">To handle load balancing among many clients that do not know each other, the SDK randomly picks one backlog queue for each [QueueClient][QueueClient] or [TopicClient][TopicClient] you create in code.</span></span>

## <a name="pings"></a><span data-ttu-id="1cde4-185">Ping-üzenetek</span><span class="sxs-lookup"><span data-stu-id="1cde4-185">Pings</span></span>
<span data-ttu-id="1cde4-186">A ping üzenetre egy üres [BrokeredMessage] [ BrokeredMessage] rendelkező a [ContentType] [ ContentType] alkalmazás/vnd.ms-szolgáltatásbusz-ping tulajdonsága és egy [TimeToLive] [ TimeToLive] értéke 1 másodperc.</span><span class="sxs-lookup"><span data-stu-id="1cde4-186">A ping message is an empty [BrokeredMessage][BrokeredMessage] with its [ContentType][ContentType] property set to application/vnd.ms-servicebus-ping and a [TimeToLive][TimeToLive] value of 1 second.</span></span> <span data-ttu-id="1cde4-187">A ping rendelkezik egy különös jellemző a Service Bus: a kiszolgáló soha nem továbbítja a pingelés, ha a hívó kér egy [BrokeredMessage][BrokeredMessage].</span><span class="sxs-lookup"><span data-stu-id="1cde4-187">This ping has one special characteristic in Service Bus: the server never delivers a ping when any caller requests a [BrokeredMessage][BrokeredMessage].</span></span> <span data-ttu-id="1cde4-188">Ebből kifolyólag sosem megtudhatja, hogyan kaphatnak, és figyelmen kívül.</span><span class="sxs-lookup"><span data-stu-id="1cde4-188">Thus, you never have to learn how to receive and ignore these messages.</span></span> <span data-ttu-id="1cde4-189">Minden entitás (egyedi üzenetsor vagy témakör) / [MessagingFactory] [ MessagingFactory] ügyfelenként példányt fog kell program ping üzenetet küld amikor-nek minősíti azokat nem érhető el.</span><span class="sxs-lookup"><span data-stu-id="1cde4-189">Each entity (unique queue or topic) per [MessagingFactory][MessagingFactory] instance per client will be pinged when they are considered to be unavailable.</span></span> <span data-ttu-id="1cde4-190">Alapértelmezés szerint ez akkor fordul elő percenként.</span><span class="sxs-lookup"><span data-stu-id="1cde4-190">By default, this happens once per minute.</span></span> <span data-ttu-id="1cde4-191">Ping üzenetekre rendszeres Service Bus-üzenetek minősülnek, és sávszélesség és üzenetek eredményezhet.</span><span class="sxs-lookup"><span data-stu-id="1cde4-191">Ping messages are considered to be regular Service Bus messages, and can result in charges for bandwidth and messages.</span></span> <span data-ttu-id="1cde4-192">Amint az ügyfelek észlelik, hogy a rendszer nem érhető el, az üzenetek állítsa le.</span><span class="sxs-lookup"><span data-stu-id="1cde4-192">As soon as the clients detect that the system is available, the messages stop.</span></span>

## <a name="the-syphon"></a><span data-ttu-id="1cde4-193">A Szifonos</span><span class="sxs-lookup"><span data-stu-id="1cde4-193">The syphon</span></span>
<span data-ttu-id="1cde4-194">Az alkalmazás legalább egy végrehajtható program aktívan futnia kell a Szifonos.</span><span class="sxs-lookup"><span data-stu-id="1cde4-194">At least one executable program in the application should be actively running the syphon.</span></span> <span data-ttu-id="1cde4-195">A Szifonos hajt végre egy hosszú lekérdezési kap, hogy 15 percig tart.</span><span class="sxs-lookup"><span data-stu-id="1cde4-195">The syphon performs a long poll receive that lasts 15 minutes.</span></span> <span data-ttu-id="1cde4-196">Összes entitás érhető el, és 10 várakozó várólisták, amikor az alkalmazást, amelyen a Szifonos meghívja a fogadási művelet 40 alkalommal óránkénti, napi 960 időpontot és 30 napban 28800 alkalommal.</span><span class="sxs-lookup"><span data-stu-id="1cde4-196">When all entities are available and you have 10 backlog queues, the application that hosts the syphon calls the receive operation 40 times per hour, 960 times per day, and 28800 times in 30 days.</span></span> <span data-ttu-id="1cde4-197">Amikor a Szifonos van aktívan üzenetek a várakozó fájlok számát a elsődleges várólistára, a minden üzenet észlel a következő költségek (az üzenet mérete és a sávszélesség szabványos díja valamennyi szakaszában vonatkozik):</span><span class="sxs-lookup"><span data-stu-id="1cde4-197">When the syphon is actively moving messages from the backlog to the primary queue, each message experiences the following charges (standard charges for message size and bandwidth apply in all stages):</span></span>

1. <span data-ttu-id="1cde4-198">A várakozó fájlok küldése.</span><span class="sxs-lookup"><span data-stu-id="1cde4-198">Send to the backlog.</span></span>
2. <span data-ttu-id="1cde4-199">A várakozó kapott.</span><span class="sxs-lookup"><span data-stu-id="1cde4-199">Receive from the backlog.</span></span>
3. <span data-ttu-id="1cde4-200">Az elsődleges küldeni.</span><span class="sxs-lookup"><span data-stu-id="1cde4-200">Send to the primary.</span></span>
4. <span data-ttu-id="1cde4-201">Az elsődleges kapott.</span><span class="sxs-lookup"><span data-stu-id="1cde4-201">Receive from the primary.</span></span>

## <a name="closefault-behavior"></a><span data-ttu-id="1cde4-202">Zárja be/tartalék viselkedése</span><span class="sxs-lookup"><span data-stu-id="1cde4-202">Close/fault behavior</span></span>
<span data-ttu-id="1cde4-203">Az alkalmazásban, amelyen a Szifonos, miután az elsődleges vagy másodlagos [MessagingFactory] [ MessagingFactory] hibákat, vagy le van zárva, nélkül a partnerrel, lehetőség van a jelzett/zárva, és a Szifonos ebben az állapotban észleli a Szifonos működik.</span><span class="sxs-lookup"><span data-stu-id="1cde4-203">Within an application that hosts the syphon, once the primary or secondary [MessagingFactory][MessagingFactory] faults or is closed without its partner also being faulted/closed and the syphon detects this state, the syphon acts.</span></span> <span data-ttu-id="1cde4-204">Ha a másik [MessagingFactory] [ MessagingFactory] nem zárt 5 másodpercen belül a Szifonos a továbbra is meg van nyitva fog fault [MessagingFactory][MessagingFactory].</span><span class="sxs-lookup"><span data-stu-id="1cde4-204">If the other [MessagingFactory][MessagingFactory] is not closed within 5 seconds, the syphon will fault the still open [MessagingFactory][MessagingFactory].</span></span>

## <a name="next-steps"></a><span data-ttu-id="1cde4-205">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="1cde4-205">Next steps</span></span>
<span data-ttu-id="1cde4-206">Lásd: [aszinkron üzenetkezelési mintákat és magas rendelkezésre állású] [ Asynchronous messaging patterns and high availability] részletes információt a Service Bus aszinkron üzenetkezelési.</span><span class="sxs-lookup"><span data-stu-id="1cde4-206">See [Asynchronous messaging patterns and high availability][Asynchronous messaging patterns and high availability] for a detailed discussion of Service Bus asynchronous messaging.</span></span> 

[PairNamespaceAsync]: /dotnet/api/microsoft.servicebus.messaging.messagingfactory#Microsoft_ServiceBus_Messaging_MessagingFactory_PairNamespaceAsync_Microsoft_ServiceBus_Messaging_PairedNamespaceOptions_
[SendAvailabilityPairedNamespaceOptions]: /dotnet/api/microsoft.servicebus.messaging.sendavailabilitypairednamespaceoptions
[MessageSender]: /dotnet/api/microsoft.servicebus.messaging.messagesender
[MessagingFactory]: /dotnet/api/microsoft.servicebus.messaging.messagingfactory
[FailoverInterval]: /dotnet/api/microsoft.servicebus.messaging.pairednamespaceoptions#Microsoft_ServiceBus_Messaging_PairedNamespaceOptions_FailoverInterval
[MessagingException]: /dotnet/api/microsoft.servicebus.messaging.messagingexception
[TimeoutException]: https://msdn.microsoft.com/library/azure/system.timeoutexception.aspx
[BrokeredMessage]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage
[QueueDescription]: /dotnet/api/microsoft.servicebus.messaging.queuedescription
[TimeSpan]: https://msdn.microsoft.com/library/azure/system.timespan.aspx
[PingPrimaryInterval]: /dotnet/api/microsoft.servicebus.messaging.sendavailabilitypairednamespaceoptions#Microsoft_ServiceBus_Messaging_SendAvailabilityPairedNamespaceOptions_PingPrimaryInterval
[QueueClient]: /dotnet/api/microsoft.servicebus.messaging.queueclient
[TopicClient]: /dotnet/api/microsoft.servicebus.messaging.topicclient
[ContentType]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_ContentType
[TimeToLive]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_TimeToLive
[Asynchronous messaging patterns and high availability]: service-bus-async-messaging.md
[0]: ./media/service-bus-paired-namespaces/IC673405.png
[1]: ./media/service-bus-paired-namespaces/IC673406.png
[2]: ./media/service-bus-paired-namespaces/IC673407.png
