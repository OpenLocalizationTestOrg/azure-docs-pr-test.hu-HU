---
title: "Azure Service Bus-alkalmazást aaaInsulating kimaradások és vészhelyzetek ellen |} Microsoft Docs"
description: "Egy lehetséges a Service Bus leállás tooprotect alkalmazásokat használható megoldásokat ismerteti."
services: service-bus-messaging
documentationcenter: na
author: sethmanheim
manager: timlt
editor: tysonn
ms.assetid: fd9fa8ab-f4c4-43f7-974f-c876df1614d4
ms.service: service-bus-messaging
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 04/12/2017
ms.author: sethm
ms.openlocfilehash: 349b4968456c9f15375753d83495246f5a3ddfdb
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/06/2017
---
# <a name="best-practices-for-insulating-applications-against-service-bus-outages-and-disasters"></a><span data-ttu-id="90b85-103">A Service Bus kimaradások és vészhelyzetek alkalmazások szigetelő ajánlott eljárásai</span><span class="sxs-lookup"><span data-stu-id="90b85-103">Best practices for insulating applications against Service Bus outages and disasters</span></span>
<span data-ttu-id="90b85-104">Kritikus fontosságú alkalmazások kell működniük folyamatosan, még akkor is nem tervezett leállások vagy vészhelyzetek hello jelenlétét.</span><span class="sxs-lookup"><span data-stu-id="90b85-104">Mission-critical applications must operate continuously, even in hello presence of unplanned outages or disasters.</span></span> <span data-ttu-id="90b85-105">Ez a témakör ismerteti a használható tooprotect Service Bus-alkalmazást a potenciális szolgáltatáskimaradás vagy katasztrófa megoldásokat.</span><span class="sxs-lookup"><span data-stu-id="90b85-105">This topic describes techniques you can use tooprotect Service Bus applications against a potential service outage or disaster.</span></span>

<span data-ttu-id="90b85-106">Nem tervezett kimaradás hello elérhetetlenség az Azure Service Bus típusúként van definiálva.</span><span class="sxs-lookup"><span data-stu-id="90b85-106">An outage is defined as hello temporary unavailability of Azure Service Bus.</span></span> <span data-ttu-id="90b85-107">hello kimaradás hatással lehet egyes összetevői a Service Bus, például üzenetküldési tárolóban, vagy még akkor is, hello egész adatközpont.</span><span class="sxs-lookup"><span data-stu-id="90b85-107">hello outage can affect some components of Service Bus, such as a messaging store, or even hello entire datacenter.</span></span> <span data-ttu-id="90b85-108">Hello a probléma kijavítása után a Service Bus ismét elérhetővé válik.</span><span class="sxs-lookup"><span data-stu-id="90b85-108">After hello problem has been fixed, Service Bus becomes available again.</span></span> <span data-ttu-id="90b85-109">Nem tervezett kimaradás általában nem okoznak üzenetek vagy egyéb adatok elvesztését.</span><span class="sxs-lookup"><span data-stu-id="90b85-109">Typically, an outage does not cause loss of messages or other data.</span></span> <span data-ttu-id="90b85-110">Példa összetevőhiba: hello hiányában egy adott üzenetküldési tárolóban.</span><span class="sxs-lookup"><span data-stu-id="90b85-110">An example of a component failure is hello unavailability of a particular messaging store.</span></span> <span data-ttu-id="90b85-111">Példa egy datacenter kiterjedő leállás áramkimaradás hello datacenter, vagy egy hibás datacenter hálózati kapcsoló:.</span><span class="sxs-lookup"><span data-stu-id="90b85-111">An example of a datacenter-wide outage is a power failure of hello datacenter, or a faulty datacenter network switch.</span></span> <span data-ttu-id="90b85-112">Nem tervezett kimaradás néhány perc tooa a tarthat néhány nap múlva.</span><span class="sxs-lookup"><span data-stu-id="90b85-112">An outage can last from a few minutes tooa few days.</span></span>

<span data-ttu-id="90b85-113">Egy olyan vészhelyzet esetén a Service Bus skálázási egység vagy datacenter hello végleges adatvesztést típusúként van definiálva.</span><span class="sxs-lookup"><span data-stu-id="90b85-113">A disaster is defined as hello permanent loss of a Service Bus scale unit or datacenter.</span></span> <span data-ttu-id="90b85-114">hello datacenter is, vagy előfordulhat, hogy nem ismét elérhetővé válik.</span><span class="sxs-lookup"><span data-stu-id="90b85-114">hello datacenter may or may not become available again.</span></span> <span data-ttu-id="90b85-115">Egy olyan vészhelyzet esetén általában néhány vagy az összes üzenetek vagy egyéb adatok elvesztését okozza.</span><span class="sxs-lookup"><span data-stu-id="90b85-115">Typically a disaster causes loss of some or all messages or other data.</span></span> <span data-ttu-id="90b85-116">Katasztrófák példák tűz, elárasztás vagy földrengés.</span><span class="sxs-lookup"><span data-stu-id="90b85-116">Examples of disasters are fire, flooding, or earthquake.</span></span>

## <a name="current-architecture"></a><span data-ttu-id="90b85-117">Aktuális architektúrája</span><span class="sxs-lookup"><span data-stu-id="90b85-117">Current architecture</span></span>
<span data-ttu-id="90b85-118">A Service Bus több üzenetküldési tároló toostore küldött üzenetek tooqueues vagy témakörök használ.</span><span class="sxs-lookup"><span data-stu-id="90b85-118">Service Bus uses multiple messaging stores toostore messages that are sent tooqueues or topics.</span></span> <span data-ttu-id="90b85-119">Nem particionált üzenetsor vagy témakör tooone üzenetküldési tárolóban van hozzárendelve.</span><span class="sxs-lookup"><span data-stu-id="90b85-119">A non-partitioned queue or topic is assigned tooone messaging store.</span></span> <span data-ttu-id="90b85-120">Az üzenetküldési tárolóban nem érhető el, ha az adott üzenetsor vagy témakör összes művelet sikertelen lesz.</span><span class="sxs-lookup"><span data-stu-id="90b85-120">If this messaging store is unavailable, all operations on that queue or topic will fail.</span></span>

<span data-ttu-id="90b85-121">Az összes Service Bus üzenetküldési entitásokat (üzenetsorok, témakörök, továbbítók) egy névtér, amely tagja-e a datacenter találhatók.</span><span class="sxs-lookup"><span data-stu-id="90b85-121">All Service Bus messaging entities (queues, topics, relays) reside in a service namespace, which is affiliated with a datacenter.</span></span> <span data-ttu-id="90b85-122">A Service Bus nem engedélyezi az automatikus georeplikációt adatok, és lehetővé teszi azt, hogy a névtér toospan több adatközpontot.</span><span class="sxs-lookup"><span data-stu-id="90b85-122">Service Bus does not enable automatic geo-replication of data, nor does it allow a namespace toospan multiple datacenters.</span></span>

## <a name="protecting-against-acs-outages"></a><span data-ttu-id="90b85-123">ACS kimaradások elleni védelem</span><span class="sxs-lookup"><span data-stu-id="90b85-123">Protecting against ACS outages</span></span>
<span data-ttu-id="90b85-124">Ha ACS hitelesítő adatokat használ, és az ACS nem érhető el, az ügyfelek már nem kaphatnak jogkivonatokat.</span><span class="sxs-lookup"><span data-stu-id="90b85-124">If you are using ACS credentials, and ACS becomes unavailable, clients can no longer obtain tokens.</span></span> <span data-ttu-id="90b85-125">ACS leáll hello időpontban jogkivonat rendelkező ügyfelek továbbra is toouse Service Bus hello jogkivonatok lejártáig.</span><span class="sxs-lookup"><span data-stu-id="90b85-125">Clients that have a token at hello time ACS goes down can continue toouse Service Bus until hello tokens expire.</span></span> <span data-ttu-id="90b85-126">hello alapértelmezett a jogkivonatok élettartama 3 óra.</span><span class="sxs-lookup"><span data-stu-id="90b85-126">hello default token lifetime is 3 hours.</span></span>

<span data-ttu-id="90b85-127">ACS kimaradások elleni tooprotect használjon közös hozzáférésű Jogosultságkód (SAS) tokeneket.</span><span class="sxs-lookup"><span data-stu-id="90b85-127">tooprotect against ACS outages, use Shared Access Signature (SAS) tokens.</span></span> <span data-ttu-id="90b85-128">Ebben az esetben hello ügyfél végzi a hitelesítést közvetlenül a Service Bus egy önálló minted jogkivonat titkos kulcsával aláírásával.</span><span class="sxs-lookup"><span data-stu-id="90b85-128">In this case, hello client authenticates directly with Service Bus by signing a self-minted token with a secret key.</span></span> <span data-ttu-id="90b85-129">Hívások tooACS már nem szükségesek.</span><span class="sxs-lookup"><span data-stu-id="90b85-129">Calls tooACS are no longer required.</span></span> <span data-ttu-id="90b85-130">További információ a SAS-tokenje: [Service Bus hitelesítési][Service Bus authentication].</span><span class="sxs-lookup"><span data-stu-id="90b85-130">For more information about SAS tokens, see [Service Bus authentication][Service Bus authentication].</span></span>

## <a name="protecting-queues-and-topics-against-messaging-store-failures"></a><span data-ttu-id="90b85-131">Üzenetsorok és témakörök üzenetküldési tároló hibák elleni védelme</span><span class="sxs-lookup"><span data-stu-id="90b85-131">Protecting queues and topics against messaging store failures</span></span>
<span data-ttu-id="90b85-132">Nem particionált üzenetsor vagy témakör tooone üzenetküldési tárolóban van hozzárendelve.</span><span class="sxs-lookup"><span data-stu-id="90b85-132">A non-partitioned queue or topic is assigned tooone messaging store.</span></span> <span data-ttu-id="90b85-133">Az üzenetküldési tárolóban nem érhető el, ha az adott üzenetsor vagy témakör összes művelet sikertelen lesz.</span><span class="sxs-lookup"><span data-stu-id="90b85-133">If this messaging store is unavailable, all operations on that queue or topic will fail.</span></span> <span data-ttu-id="90b85-134">A várólista, a hello ugyanakkor particionálva, több töredék áll.</span><span class="sxs-lookup"><span data-stu-id="90b85-134">A partitioned queue, on hello other hand, consists of multiple fragments.</span></span> <span data-ttu-id="90b85-135">Minden egyes töredék egy másik üzenetküldési tárolóban van tárolva.</span><span class="sxs-lookup"><span data-stu-id="90b85-135">Each fragment is stored in a different messaging store.</span></span> <span data-ttu-id="90b85-136">Egy üzenet elküldésekor tooa particionált üzenetsor vagy témakör, a Service Bus hello üzenet tooone hello töredékek rendeli hozzá.</span><span class="sxs-lookup"><span data-stu-id="90b85-136">When a message is sent tooa partitioned queue or topic, Service Bus assigns hello message tooone of hello fragments.</span></span> <span data-ttu-id="90b85-137">Hello megfelelő üzenetküldési tárolóban nem érhető el, ha a Service Bus írja az hello üzenet tooa különböző töredék, ha lehetséges.</span><span class="sxs-lookup"><span data-stu-id="90b85-137">If hello corresponding messaging store is unavailable, Service Bus writes hello message tooa different fragment, if possible.</span></span> <span data-ttu-id="90b85-138">Particionált entitások kapcsolatos további információkért lásd: [particionált üzenetküldési entitások][Partitioned messaging entities].</span><span class="sxs-lookup"><span data-stu-id="90b85-138">For more information about partitioned entities, see [Partitioned messaging entities][Partitioned messaging entities].</span></span>

## <a name="protecting-against-datacenter-outages-or-disasters"></a><span data-ttu-id="90b85-139">Védelem datacenter kimaradások vagy vészhelyzetek ellen</span><span class="sxs-lookup"><span data-stu-id="90b85-139">Protecting against datacenter outages or disasters</span></span>
<span data-ttu-id="90b85-140">két adatközpont között feladatátvevő tooallow, létrehozhat egy Service Bus-szolgáltatásnévtér mindkét adatközpont.</span><span class="sxs-lookup"><span data-stu-id="90b85-140">tooallow for a failover between two datacenters, you can create a Service Bus service namespace in each datacenter.</span></span> <span data-ttu-id="90b85-141">Például a Service Bus-szolgáltatásnévtér hello **contosoPrimary.servicebus.windows.net** hello az Amerikai Egyesült Államok északi/központi régióban, lehet, hogy található és **contosoSecondary.servicebus.windows.net**lehet, hogy hello Velünk Dél/központi régióban található.</span><span class="sxs-lookup"><span data-stu-id="90b85-141">For example, hello Service Bus service namespace **contosoPrimary.servicebus.windows.net** might be located in hello United States North/Central region, and **contosoSecondary.servicebus.windows.net** might be located in hello US South/Central region.</span></span> <span data-ttu-id="90b85-142">Ha egy Service Bus üzenetküldési entitás egy adatközpontban szolgáltatáskimaradás hello jelenlétét a hozzáférhetőnek kell maradnia, mindkét névtérre is létrehozhat, hogy az entitás.</span><span class="sxs-lookup"><span data-stu-id="90b85-142">If a Service Bus messaging entity must remain accessible in hello presence of a datacenter outage, you can create that entity in both namespaces.</span></span>

<span data-ttu-id="90b85-143">További információkért lásd a "Service Bus egy Azure-adatközpontban belül hiba esetén" című hello [aszinkron üzenetkezelési mintákat és magas rendelkezésre állású][Asynchronous messaging patterns and high availability].</span><span class="sxs-lookup"><span data-stu-id="90b85-143">For more information, see hello "Failure of Service Bus within an Azure datacenter" section in [Asynchronous messaging patterns and high availability][Asynchronous messaging patterns and high availability].</span></span>

## <a name="protecting-relay-endpoints-against-datacenter-outages-or-disasters"></a><span data-ttu-id="90b85-144">Datacenter valamilyen okból kimaradás vagy vészhelyzetek ellen továbbítási végpontok védelme</span><span class="sxs-lookup"><span data-stu-id="90b85-144">Protecting relay endpoints against datacenter outages or disasters</span></span>
<span data-ttu-id="90b85-145">A továbbítási végpontok georeplikáció lehetővé teszi, hogy egy szolgáltatás, amely elérhetővé teszi a továbbítási végpont toobe érhető el a Service Bus kimaradások hello jelenlétét.</span><span class="sxs-lookup"><span data-stu-id="90b85-145">Geo-replication of relay endpoints allows a service that exposes a relay endpoint toobe reachable in hello presence of Service Bus outages.</span></span> <span data-ttu-id="90b85-146">tooachieve georeplikáció, hello szolgáltatás létre kell hoznia két továbbítási végpontok különböző névterekben.</span><span class="sxs-lookup"><span data-stu-id="90b85-146">tooachieve geo-replication, hello service must create two relay endpoints in different namespaces.</span></span> <span data-ttu-id="90b85-147">hello névterek különböző adatközpontokban kell lennie, és két végpontot hello eltérőnek kell lennie.</span><span class="sxs-lookup"><span data-stu-id="90b85-147">hello namespaces must reside in different datacenters and hello two endpoints must have different names.</span></span> <span data-ttu-id="90b85-148">Például egy elsődleges végpont elérhető alatt **contosoPrimary.servicebus.windows.net/myPrimaryService**, míg a másodlagos párjukhoz alatt elérhető **contosoSecondary.servicebus.windows.net/mySecondaryService**.</span><span class="sxs-lookup"><span data-stu-id="90b85-148">For example, a primary endpoint can be reached under **contosoPrimary.servicebus.windows.net/myPrimaryService**, while its secondary counterpart can be reached under **contosoSecondary.servicebus.windows.net/mySecondaryService**.</span></span>

<span data-ttu-id="90b85-149">hello szolgáltatás majd figyeli mindkét végponton, és egy ügyfél hívhat meg hello szolgáltatást vagy a végpont.</span><span class="sxs-lookup"><span data-stu-id="90b85-149">hello service then listens on both endpoints, and a client can invoke hello service via either endpoint.</span></span> <span data-ttu-id="90b85-150">Egy ügyfélalkalmazás véletlenszerűen szerzi hello továbbítók egyikét, az elsődleges végpont hello, és elküldi a kérelmet toohello aktív végpontja.</span><span class="sxs-lookup"><span data-stu-id="90b85-150">A client application randomly picks one of hello relays as hello primary endpoint, and sends its request toohello active endpoint.</span></span> <span data-ttu-id="90b85-151">Hibakódú hello művelet sikertelen lesz, ha a hiba azt jelzi, adott hello továbbítási végpontra nem érhető el.</span><span class="sxs-lookup"><span data-stu-id="90b85-151">If hello operation fails with an error code, this failure indicates that hello relay endpoint is not available.</span></span> <span data-ttu-id="90b85-152">hello alkalmazás megnyílik egy csatorna toohello biztonsági mentési végpontot, és reissues hello kérelem.</span><span class="sxs-lookup"><span data-stu-id="90b85-152">hello application opens a channel toohello backup endpoint and reissues hello request.</span></span> <span data-ttu-id="90b85-153">Ezen a ponton hello aktív és a biztonsági mentési végpontok hello vált szerepkörök: hello ügyfélalkalmazás úgy ítéli meg, hello régi aktív végpontja toobe hello új biztonsági mentési végpont, és hello régi biztonsági mentési végpont toobe hello új aktív végpontot.</span><span class="sxs-lookup"><span data-stu-id="90b85-153">At that point hello active and hello backup endpoints switch roles: hello client application considers hello old active endpoint toobe hello new backup endpoint, and hello old backup endpoint toobe hello new active endpoint.</span></span> <span data-ttu-id="90b85-154">Ha mindkét küldött műveletek sikertelenek, hello szerepkörök hello két entitások változatlan marad, és hibát ad vissza.</span><span class="sxs-lookup"><span data-stu-id="90b85-154">If both send operations fail, hello roles of hello two entities remain unchanged and an error is returned.</span></span>

<span data-ttu-id="90b85-155">Hello [georeplikálási a Service Bus továbbítón keresztüli üzenetek] [ Geo-replication with Service Bus relayed Messages] példa bemutatja, hogyan tooreplicate továbbítja.</span><span class="sxs-lookup"><span data-stu-id="90b85-155">hello [Geo-replication with Service Bus relayed messages][Geo-replication with Service Bus relayed Messages] sample demonstrates how tooreplicate relays.</span></span>

## <a name="protecting-queues-and-topics-against-datacenter-outages-or-disasters"></a><span data-ttu-id="90b85-156">Üzenetsorok és témakörök datacenter valamilyen okból kimaradás vagy vészhelyzetek ellen védi</span><span class="sxs-lookup"><span data-stu-id="90b85-156">Protecting queues and topics against datacenter outages or disasters</span></span>
<span data-ttu-id="90b85-157">tooachieve rugalmasság datacenter valamilyen okból kimaradás során használatával közvetítőalapú üzenettovábbítás ellen, a Service Bus támogatja a két módszer: *aktív* és *passzív* replikációs.</span><span class="sxs-lookup"><span data-stu-id="90b85-157">tooachieve resilience against datacenter outages when using brokered messaging, Service Bus supports two approaches: *active* and *passive* replication.</span></span> <span data-ttu-id="90b85-158">Az egyes módszert használja Ha az adott üzenetsor vagy témakör egy adatközpontban szolgáltatáskimaradás hello jelenlétét a hozzáférhetőnek kell maradnia, a hozhatja létre mindkét névtérre.</span><span class="sxs-lookup"><span data-stu-id="90b85-158">For each approach, if a given queue or topic must remain accessible in hello presence of a datacenter outage, you can create it in both namespaces.</span></span> <span data-ttu-id="90b85-159">Mindkét entitásnak hello is ugyanazzal a névvel.</span><span class="sxs-lookup"><span data-stu-id="90b85-159">Both entities can have hello same name.</span></span> <span data-ttu-id="90b85-160">Elsődleges queue alatt elérhető például **contosoPrimary.servicebus.windows.net/myQueue**, míg a másodlagos párjukhoz alatt elérhető **contosoSecondary.servicebus.windows.net/myQueue**.</span><span class="sxs-lookup"><span data-stu-id="90b85-160">For example, a primary queue can be reached under **contosoPrimary.servicebus.windows.net/myQueue**, while its secondary counterpart can be reached under **contosoSecondary.servicebus.windows.net/myQueue**.</span></span>

<span data-ttu-id="90b85-161">Ha hello alkalmazás nincs szükség folyamatos küldő fogadó kommunikációt, hello alkalmazás tartós ügyféloldali várólista tooprevent üzenet adatvesztéssel és tooshield hello feladójának a Service Bus átmeneti hiba is létrehozható.</span><span class="sxs-lookup"><span data-stu-id="90b85-161">If hello application does not require permanent sender-to-receiver communication, hello application can implement a durable client-side queue tooprevent message loss and tooshield hello sender from any transient Service Bus errors.</span></span>

## <a name="active-replication"></a><span data-ttu-id="90b85-162">Aktív replikációs</span><span class="sxs-lookup"><span data-stu-id="90b85-162">Active replication</span></span>
<span data-ttu-id="90b85-163">Aktív replikációs mindkét névtérre entitások minden művelethez használja.</span><span class="sxs-lookup"><span data-stu-id="90b85-163">Active replication uses entities in both namespaces for every operation.</span></span> <span data-ttu-id="90b85-164">Bármely ügyfél által küldött üzenet küldi hello két példánya ugyanazt az üzenetet.</span><span class="sxs-lookup"><span data-stu-id="90b85-164">Any client that sends a message sends two copies of hello same message.</span></span> <span data-ttu-id="90b85-165">hello első alkalommal küldött toohello elsődleges entitás (például **contosoPrimary.servicebus.windows.net/sales**), és üdvözlőüzenetére hello másodpéldányának toohello másodlagos entitás küldi el (például  **contosoSecondary.servicebus.windows.net/sales**).</span><span class="sxs-lookup"><span data-stu-id="90b85-165">hello first copy is sent toohello primary entity (for example, **contosoPrimary.servicebus.windows.net/sales**), and hello second copy of hello message is sent toohello secondary entity (for example, **contosoSecondary.servicebus.windows.net/sales**).</span></span>

<span data-ttu-id="90b85-166">Egy ügyfél üzeneteket fogad mindkét várólisták.</span><span class="sxs-lookup"><span data-stu-id="90b85-166">A client receives messages from both queues.</span></span> <span data-ttu-id="90b85-167">hello fogadó folyamatok hello első példányát egy üzenetet, és hello másodpéldány le van tiltva.</span><span class="sxs-lookup"><span data-stu-id="90b85-167">hello receiver processes hello first copy of a message, and hello second copy is suppressed.</span></span> <span data-ttu-id="90b85-168">toosuppress duplikált üzenetek, hello küldő címkét kell egy egyedi azonosítóval rendelkező minden üzenetet.</span><span class="sxs-lookup"><span data-stu-id="90b85-168">toosuppress duplicate messages, hello sender must tag each message with a unique identifier.</span></span> <span data-ttu-id="90b85-169">Mindkét üdvözlőüzenetére példányát kell címkézését hello ugyanezzel az azonosítóval.</span><span class="sxs-lookup"><span data-stu-id="90b85-169">Both copies of hello message must be tagged with hello same identifier.</span></span> <span data-ttu-id="90b85-170">Használhatja a hello [BrokeredMessage.MessageId] [ BrokeredMessage.MessageId] vagy [BrokeredMessage.Label] [ BrokeredMessage.Label] tulajdonságait, vagy egy egyéni tulajdonság tootag hello üzenet.</span><span class="sxs-lookup"><span data-stu-id="90b85-170">You can use hello [BrokeredMessage.MessageId][BrokeredMessage.MessageId] or [BrokeredMessage.Label][BrokeredMessage.Label] properties, or a custom property tootag hello message.</span></span> <span data-ttu-id="90b85-171">hello fogadó kezelnie kell az üzeneteket, amelyek már kapott.</span><span class="sxs-lookup"><span data-stu-id="90b85-171">hello receiver must maintain a list of messages that it has already received.</span></span>

<span data-ttu-id="90b85-172">Hello [a Service Bus Közvetítőalapú üzenetek georeplikáció] [ Geo-replication with Service Bus Brokered Messages] az üzenetküldési entitások aktív replikációs mutatja be.</span><span class="sxs-lookup"><span data-stu-id="90b85-172">hello [Geo-replication with Service Bus Brokered Messages][Geo-replication with Service Bus Brokered Messages] sample demonstrates active replication of messaging entities.</span></span>

> [!NOTE]
> <span data-ttu-id="90b85-173">hello aktív replikációs megközelítés megduplázódik hello műveletek számát, ezért ez a megközelítés vezethet toohigher költség.</span><span class="sxs-lookup"><span data-stu-id="90b85-173">hello active replication approach doubles hello number of operations, therefore this approach can lead toohigher cost.</span></span>
> 
> 

## <a name="passive-replication"></a><span data-ttu-id="90b85-174">Passzív replikáció</span><span class="sxs-lookup"><span data-stu-id="90b85-174">Passive replication</span></span>
<span data-ttu-id="90b85-175">Hello hibamentesen esetben passzív replikációs csak egyikét használja hello két üzenetküldési entitások.</span><span class="sxs-lookup"><span data-stu-id="90b85-175">In hello fault-free case, passive replication uses only one of hello two messaging entities.</span></span> <span data-ttu-id="90b85-176">Egy ügyfél küldi hello üzenet toohello aktív entitás.</span><span class="sxs-lookup"><span data-stu-id="90b85-176">A client sends hello message toohello active entity.</span></span> <span data-ttu-id="90b85-177">Ha hello aktív entitás hello művelet sikertelen lesz, és azt jelzi, hogy nem érhető el lehet-e a gazdagépek hello aktív entitás hello datacenter hibakódot, hello ügyfél hello üzenet toohello biztonsági mentési entitás példányát küldi.</span><span class="sxs-lookup"><span data-stu-id="90b85-177">If hello operation on hello active entity fails with an error code that indicates hello datacenter that hosts hello active entity might be unavailable, hello client sends a copy of hello message toohello backup entity.</span></span> <span data-ttu-id="90b85-178">Ezen a ponton hello aktív és a biztonsági mentési entitásokat hello vált szerepkörök: hello küldő ügyfél hello régi aktív entitás toobe hello új biztonsági mentési entitás figyelembe veszi, és hello régi biztonsági mentési entitás hello új aktív entitás.</span><span class="sxs-lookup"><span data-stu-id="90b85-178">At that point hello active and hello backup entities switch roles: hello sending client considers hello old active entity toobe hello new backup entity, and hello old backup entity is hello new active entity.</span></span> <span data-ttu-id="90b85-179">Ha mindkét küldött műveletek sikertelenek, hello szerepkörök hello két entitások változatlan marad, és hibát ad vissza.</span><span class="sxs-lookup"><span data-stu-id="90b85-179">If both send operations fail, hello roles of hello two entities remain unchanged and an error is returned.</span></span>

<span data-ttu-id="90b85-180">Egy ügyfél üzeneteket fogad mindkét várólisták.</span><span class="sxs-lookup"><span data-stu-id="90b85-180">A client receives messages from both queues.</span></span> <span data-ttu-id="90b85-181">Mivel valószínűséggel adott hello fogadó azonos üzenet fogadásakor, hello hello két példányt kap fogadó a duplikált üzenetek kell elrejtése.</span><span class="sxs-lookup"><span data-stu-id="90b85-181">Because there is a chance that hello receiver receives two copies of hello same message, hello receiver must suppress duplicate messages.</span></span> <span data-ttu-id="90b85-182">Tilthatja le lehet azonos hello hasonlóan az aktív replikációs.</span><span class="sxs-lookup"><span data-stu-id="90b85-182">You can suppress duplicates in hello same way as described for active replication.</span></span>

<span data-ttu-id="90b85-183">Passzív replikációs általában gazdaságosabb, mint az aktív replikációs, mert a legtöbb esetben csak egy művelet.</span><span class="sxs-lookup"><span data-stu-id="90b85-183">In general, passive replication is more economical than active replication because in most cases only one operation is performed.</span></span> <span data-ttu-id="90b85-184">Késés, az átviteli sebesség és a pénzügyi költsége azonos toohello nem replikált forgatókönyv.</span><span class="sxs-lookup"><span data-stu-id="90b85-184">Latency, throughput, and monetary cost are identical toohello non-replicated scenario.</span></span>

<span data-ttu-id="90b85-185">Passzív replikációs használatakor hello a következő forgatókönyvek üzenetek néha elvész, vagy kétszer érkezett:</span><span class="sxs-lookup"><span data-stu-id="90b85-185">When using passive replication, in hello following scenarios messages can be lost or received twice:</span></span>

* <span data-ttu-id="90b85-186">**Üzenet késleltetés vagy adatvesztés**: feltételezi, hogy hello küldő sikeresen elküldte-e egy m1 toohello elsődleges üzenetsor, és ezután hello várólista nem érhető el előtt hello fogadó m1 kap.</span><span class="sxs-lookup"><span data-stu-id="90b85-186">**Message delay or loss**: Assume that hello sender successfully sent a message m1 toohello primary queue, and then hello queue becomes unavailable before hello receiver receives m1.</span></span> <span data-ttu-id="90b85-187">a küldő hello rákövetkező állapotüzenetet m2 toohello másodlagos várólista.</span><span class="sxs-lookup"><span data-stu-id="90b85-187">hello sender sends a subsequent message m2 toohello secondary queue.</span></span> <span data-ttu-id="90b85-188">Hello elsődleges várólista átmenetileg nem érhető el, ha hello fogadó m1 kap, miután hello várólista újra lesz elérhető.</span><span class="sxs-lookup"><span data-stu-id="90b85-188">If hello primary queue is temporarily unavailable, hello receiver receives m1 after hello queue becomes available again.</span></span> <span data-ttu-id="90b85-189">Egy vészhelyzet esetén hello fogadó soha nem jelenhet meg m1.</span><span class="sxs-lookup"><span data-stu-id="90b85-189">In case of a disaster, hello receiver may never receive m1.</span></span>
* <span data-ttu-id="90b85-190">**Ismétlődő fogadása**: azt feltételezik, hogy hello küldő m toohello elsődleges várólistához.</span><span class="sxs-lookup"><span data-stu-id="90b85-190">**Duplicate reception**: Assume that hello sender sends a message m toohello primary queue.</span></span> <span data-ttu-id="90b85-191">A Service Bus sikeresen m dolgozza fel, de nem sikerül toosend választ.</span><span class="sxs-lookup"><span data-stu-id="90b85-191">Service Bus successfully processes m but fails toosend a response.</span></span> <span data-ttu-id="90b85-192">Miután hello küldési művelet időtúllépést, hello küldő m toohello másodlagos várólista azonos példányának.</span><span class="sxs-lookup"><span data-stu-id="90b85-192">After hello send operation times out, hello sender sends an identical copy of m toohello secondary queue.</span></span> <span data-ttu-id="90b85-193">Ha hello fogadó képes tooreceive hello első másolás m előtt hello elsődleges queue elérhetetlenné válik, a hello fogadó körülbelül hello m mindkét példányt kap ugyanannyi időt vesz igénybe.</span><span class="sxs-lookup"><span data-stu-id="90b85-193">If hello receiver is able tooreceive hello first copy of m before hello primary queue becomes unavailable, hello receiver receives both copies of m at approximately hello same time.</span></span> <span data-ttu-id="90b85-194">Ha hello fogadó nem tud tooreceive hello első másolás m előtt hello elsődleges queue elérhetetlenné válik, a hello fogadó kezdetben csak hello második másolatot kap m, de m másodpéldányának majd kap, amikor elsődleges queue hello elérhetővé válik.</span><span class="sxs-lookup"><span data-stu-id="90b85-194">If hello receiver is not able tooreceive hello first copy of m before hello primary queue becomes unavailable, hello receiver initially receives only hello second copy of m, but then receives a second copy of m when hello primary queue becomes available.</span></span>

<span data-ttu-id="90b85-195">Hello [georeplikálási a Service Bus közvetítőalapú üzenetek] [ Geo-replication with Service Bus Brokered Messages] az üzenetküldési entitások passzív replikációs mutatja be.</span><span class="sxs-lookup"><span data-stu-id="90b85-195">hello [Geo-replication with Service Bus brokered messages][Geo-replication with Service Bus Brokered Messages] sample demonstrates passive replication of messaging entities.</span></span>

## <a name="next-steps"></a><span data-ttu-id="90b85-196">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="90b85-196">Next steps</span></span>
<span data-ttu-id="90b85-197">További információ a vész-helyreállítási toolearn lásd: ezek a cikkek:</span><span class="sxs-lookup"><span data-stu-id="90b85-197">toolearn more about disaster recovery, see these articles:</span></span>

* <span data-ttu-id="90b85-198">[Az Azure SQL Database üzletmenet folytonossága][Azure SQL Database Business Continuity]</span><span class="sxs-lookup"><span data-stu-id="90b85-198">[Azure SQL Database Business Continuity][Azure SQL Database Business Continuity]</span></span>
* <span data-ttu-id="90b85-199">[Az Azure-rugalmas alkalmazások tervezése][Azure resiliency technical guidance]</span><span class="sxs-lookup"><span data-stu-id="90b85-199">[Designing resilient applications for Azure][Azure resiliency technical guidance]</span></span>

[Service Bus Authentication]: service-bus-authentication-and-authorization.md
[Partitioned messaging entities]: service-bus-partitioning.md
[Asynchronous messaging patterns and high availability]: service-bus-async-messaging.md#failure-of-service-bus-within-an-azure-datacenter
[Geo-replication with Service Bus Relayed Messages]: http://code.msdn.microsoft.com/Geo-replication-with-16dbfecd
[BrokeredMessage.MessageId]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_MessageId
[BrokeredMessage.Label]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Label
[Geo-replication with Service Bus Brokered Messages]: http://code.msdn.microsoft.com/Geo-replication-with-f5688664
[Azure SQL Database Business Continuity]: ../sql-database/sql-database-business-continuity.md
[Azure resiliency technical guidance]: /azure/architecture/resiliency
