---
title: "Azure Service Bus-üzenettémák és előfizetések használó aaaCreate alkalmazások |} Microsoft Docs"
description: "Bevezetés toohello közzétételi-feliratkozási képességek a Service Bus-üzenettémák és előfizetések által kínált."
services: service-bus-messaging
documentationcenter: na
author: sethmanheim
manager: timlt
editor: 
ms.assetid: a48fc9b0-b7b0-464e-8187-a517bf8b4eb4
ms.service: service-bus-messaging
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 04/07/2017
ms.author: sethm
ms.openlocfilehash: f6d7de46ace7bd5b49de612db213ced789308d91
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/06/2017
---
# <a name="create-applications-that-use-service-bus-topics-and-subscriptions"></a><span data-ttu-id="e8546-103">Alkalmazások, amelyek a Service Bus-üzenettémák és előfizetések létrehozása</span><span class="sxs-lookup"><span data-stu-id="e8546-103">Create applications that use Service Bus topics and subscriptions</span></span>
<span data-ttu-id="e8546-104">Az Azure Service Bus felhőalapú, üzenet célú köztes technológiák – például a megbízható üzenetsor és a tartós közzétételi/előfizetési üzenetküldési támogat.</span><span class="sxs-lookup"><span data-stu-id="e8546-104">Azure Service Bus supports a set of cloud-based, message-oriented middleware technologies including reliable message queuing and durable publish/subscribe messaging.</span></span> <span data-ttu-id="e8546-105">Ebben a cikkben található információk hello épít [létrehozása a Service Bus-üzenetsorokat használó alkalmazásokat](service-bus-create-queues.md) és a Bevezetés a Service Bus-témakörök által kínált toohello közzétételi/előfizetési képességeket biztosít.</span><span class="sxs-lookup"><span data-stu-id="e8546-105">This article builds on hello information provided in [Create applications that use Service Bus queues](service-bus-create-queues.md) and offers an introduction toohello publish/subscribe capabilities offered by Service Bus topics.</span></span>

## <a name="evolving-retail-scenario"></a><span data-ttu-id="e8546-106">Fenyegető kereskedelmi forgatókönyv</span><span class="sxs-lookup"><span data-stu-id="e8546-106">Evolving retail scenario</span></span>
<span data-ttu-id="e8546-107">Ez a cikk továbbra is hello kereskedelmi forgatókönyvben használt [létrehozása a Service Bus-üzenetsorokat használó alkalmazásokat](service-bus-create-queues.md).</span><span class="sxs-lookup"><span data-stu-id="e8546-107">This article continues hello retail scenario used in [Create applications that use Service Bus queues](service-bus-create-queues.md).</span></span> <span data-ttu-id="e8546-108">Visszahívása, hogy egyes pénztári pont (POS) részére értékesítési adatait irányított tooan készletkezelő rendszer adott adatok toodetermine használja, ha készlet toobe feltöltést kell lennie.</span><span class="sxs-lookup"><span data-stu-id="e8546-108">Recall that sales data from individual Point of Sale (POS) terminals must be routed tooan inventory management system which uses that data toodetermine when stock has toobe replenished.</span></span> <span data-ttu-id="e8546-109">Minden egyes POS terminál jelent az értékesítési adatokat küldött üzenetek toohello **DataCollectionQueue** várólista, ahol azok marad által hello készletkezelő rendszer esetén, itt látható módon:</span><span class="sxs-lookup"><span data-stu-id="e8546-109">Each POS terminal reports its sales data by sending messages toohello **DataCollectionQueue** queue, where they remain until they are received by hello inventory management system, as shown here:</span></span>

![A Service Bus 1](./media/service-bus-create-topics-subscriptions/IC657161.gif)

<span data-ttu-id="e8546-111">Ebben az esetben egy új követelményt lett tooevolve toohello rendszer hozzáadott: hello áruház gazdája által toobe képes toomonitor hogyan hello azonosításakor valós időben.</span><span class="sxs-lookup"><span data-stu-id="e8546-111">tooevolve this scenario, a new requirement has been added toohello system: hello store owner wants toobe able toomonitor how hello store is performing in real time.</span></span>

<span data-ttu-id="e8546-112">tooaddress ezt a követelményt hello rendszer kell "koppintson a" hello értékesítési adatfolyam ki.</span><span class="sxs-lookup"><span data-stu-id="e8546-112">tooaddress this requirement, hello system must "tap" off hello sales data stream.</span></span> <span data-ttu-id="e8546-113">Szeretnénk továbbra is minden által küldött üzenet hello POS terminálok toobe toohello készletkezelő rendszer esetén, mielőtt küldött, de azt szeretnénk, hogy használhatunk toopresent hello irányítópult nézet toohello áruház gazdája minden üzenetet egy másik példánya.</span><span class="sxs-lookup"><span data-stu-id="e8546-113">We still want each message sent by hello POS terminals toobe sent toohello inventory management system as before, but we want another copy of each message that we can use toopresent hello dashboard view toohello store owner.</span></span>

<span data-ttu-id="e8546-114">Ez minden üzenet toobe több felek által felhasznált szükség például minden helyzetben is használhatja a Service Bus *témakörök*.</span><span class="sxs-lookup"><span data-stu-id="e8546-114">In any situation such as this, in which you require each message toobe consumed by multiple parties, you can use Service Bus *topics*.</span></span> <span data-ttu-id="e8546-115">A témakörök a közzététel/előfizetés mintát, amelyben egyes közzétett üzenetek tooone elérhetővé szeretné tenni, vagy legalább egy előfizetésre regisztrálva a hello témakör.</span><span class="sxs-lookup"><span data-stu-id="e8546-115">Topics provide a publish/subscribe pattern in which each published message is made available tooone or more subscriptions registered with hello topic.</span></span> <span data-ttu-id="e8546-116">Ezzel szemben az üzenetsorok minden üzenetet kapja egy-egy fogyasztó.</span><span class="sxs-lookup"><span data-stu-id="e8546-116">In contrast, with queues each message is received by a single consumer.</span></span>

<span data-ttu-id="e8546-117">Üzenetek küldése tooa témakör hello azonos módon tooa várólista elküldi őket.</span><span class="sxs-lookup"><span data-stu-id="e8546-117">Messages are sent tooa topic in hello same way as they are sent tooa queue.</span></span> <span data-ttu-id="e8546-118">Azonban üzenetek nem érkező hello témakör közvetlenül; az előfizetések kaptak.</span><span class="sxs-lookup"><span data-stu-id="e8546-118">However, messages are not received from hello topic directly; they are received from subscriptions.</span></span> <span data-ttu-id="e8546-119">Az eltolásokat tekintheti egy előfizetés tooa témakör, amely megkapja a hello toothat témakör küldött üzenetek példányait virtuális várólista.</span><span class="sxs-lookup"><span data-stu-id="e8546-119">You can think of a subscription tooa topic as a virtual queue that receives copies of hello messages that are sent toothat topic.</span></span> <span data-ttu-id="e8546-120">Üzenetek fogadása egy előfizetésből hello ugyanaz, mint az üzenetsorból érkező.</span><span class="sxs-lookup"><span data-stu-id="e8546-120">Messages are received from a subscription hello same way as they are received from a queue.</span></span>

<span data-ttu-id="e8546-121">Ha visszalép toohello kereskedelmi forgatókönyv, hello várólista helyébe a témakör és előfizetés jelenik meg, melyik hello készlet felügyeleti rendszerösszetevő használhatja.</span><span class="sxs-lookup"><span data-stu-id="e8546-121">Going back toohello retail scenario, hello queue is replaced by a topic, and a subscription is added, which hello inventory management system component can use.</span></span> <span data-ttu-id="e8546-122">hello rendszer megjelenik a következőképpen:</span><span class="sxs-lookup"><span data-stu-id="e8546-122">hello system now appears as follows:</span></span>

![A Service Bus 2](./media/service-bus-create-topics-subscriptions/IC657165.gif)

<span data-ttu-id="e8546-124">Itt hello konfigurációs azonos toohello előző várólista alapú tervezési végez.</span><span class="sxs-lookup"><span data-stu-id="e8546-124">hello configuration here performs identically toohello previous queue-based design.</span></span> <span data-ttu-id="e8546-125">Ez azt jelenti, hogy toohello témakör küldött üzenetek irányított toohello **készlet** előfizetést, mely hello **készletkezelő rendszer** használ fel őket.</span><span class="sxs-lookup"><span data-stu-id="e8546-125">That is, messages sent toohello topic are routed toohello **Inventory** subscription, from which hello **Inventory Management System** consumes them.</span></span>

<span data-ttu-id="e8546-126">A rendelés toosupport hello kezelési irányítópult azt hozzon létre egy második előfizetés hello témakör, itt látható módon:</span><span class="sxs-lookup"><span data-stu-id="e8546-126">In order toosupport hello management dashboard, we create a second subscription on hello topic, as shown here:</span></span>

![A Service Bus 3](./media/service-bus-create-topics-subscriptions/IC657166.gif)

<span data-ttu-id="e8546-128">Ezzel a konfigurációval a minden üzenet hello POS részére legyen elérhető tooboth hello **irányítópult** és **készlet** előfizetések.</span><span class="sxs-lookup"><span data-stu-id="e8546-128">With this configuration, each message from hello POS terminals is made available tooboth hello **Dashboard** and **Inventory** subscriptions.</span></span>

## <a name="show-me-hello-code"></a><span data-ttu-id="e8546-129">Hello kód megjelenítése</span><span class="sxs-lookup"><span data-stu-id="e8546-129">Show me hello code</span></span>
<span data-ttu-id="e8546-130">hello cikk [létrehozása a Service Bus-üzenetsorokat használó alkalmazásokat](service-bus-create-queues.md) ismerteti, hogyan toosign Azure-fiókot és létre kell hoznia egy szolgáltatásnévteret.</span><span class="sxs-lookup"><span data-stu-id="e8546-130">hello article [Create applications that use Service Bus queues](service-bus-create-queues.md) describes how toosign up for an Azure account and create a service namespace.</span></span> <span data-ttu-id="e8546-131">hello legegyszerűbb módja tooreference Service Bus-függőséggel a Service Bus tooinstall hello [Nuget-csomag](https://www.nuget.org/packages/WindowsAzure.ServiceBus/).</span><span class="sxs-lookup"><span data-stu-id="e8546-131">hello easiest way tooreference Service Bus dependencies is tooinstall hello Service Bus [Nuget package](https://www.nuget.org/packages/WindowsAzure.ServiceBus/).</span></span> <span data-ttu-id="e8546-132">Megtalálhat hello Service Bus-kódtárak hello Azure SDK részeként.</span><span class="sxs-lookup"><span data-stu-id="e8546-132">You can also find hello Service Bus libraries as part of hello Azure SDK.</span></span> <span data-ttu-id="e8546-133">hello letöltési érhető el: hello [Azure SDK letöltési oldala](https://azure.microsoft.com/downloads/).</span><span class="sxs-lookup"><span data-stu-id="e8546-133">hello download is available at hello [Azure SDK download page](https://azure.microsoft.com/downloads/).</span></span>

### <a name="create-hello-topic-and-subscriptions"></a><span data-ttu-id="e8546-134">Hello témakör és előfizetés létrehozása</span><span class="sxs-lookup"><span data-stu-id="e8546-134">Create hello topic and subscriptions</span></span>
<span data-ttu-id="e8546-135">Felügyeleti műveletek a Service Bus üzenetküldési entitásokat (üzenetsorok és a közzétételi/előfizetési témakörök) hello keresztül hajtja végre [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) osztály.</span><span class="sxs-lookup"><span data-stu-id="e8546-135">Management operations for Service Bus messaging entities (queues and publish/subscribe topics) are performed via hello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) class.</span></span> <span data-ttu-id="e8546-136">Megfelelő hitelesítő adatok szükségesek a rendelés toocreate egy **NamespaceManager** egy adott névtér-példányt.</span><span class="sxs-lookup"><span data-stu-id="e8546-136">Appropriate credentials are required in order toocreate a **NamespaceManager** instance for a particular namespace.</span></span> <span data-ttu-id="e8546-137">A Service Bus használ egy [közös hozzáférésű Jogosultságkód (SAS)](service-bus-sas.md) -alapú biztonsági modellt.</span><span class="sxs-lookup"><span data-stu-id="e8546-137">Service Bus uses a [Shared Access Signature (SAS)](service-bus-sas.md) based security model.</span></span> <span data-ttu-id="e8546-138">Hello [TokenProvider](/dotnet/api/microsoft.servicebus.tokenprovider#microsoft_servicebus_tokenprovider) osztály vissza néhány jól ismert jogkivonat-szolgáltatót beépített gyári metódusokat tartalmazó jelenti a biztonsági jogkivonat-szolgáltató.</span><span class="sxs-lookup"><span data-stu-id="e8546-138">hello [TokenProvider](/dotnet/api/microsoft.servicebus.tokenprovider#microsoft_servicebus_tokenprovider) class represents a security token provider with built-in factory methods returning some well-known token providers.</span></span> <span data-ttu-id="e8546-139">Fogjuk használni egy [CreateSharedAccessSignatureTokenProvider](/dotnet/api/microsoft.servicebus.tokenprovider#Microsoft_ServiceBus_TokenProvider_CreateSharedAccessSignatureTokenProvider_System_String_) metódus toohold hello SAS-hitelesítőadatait.</span><span class="sxs-lookup"><span data-stu-id="e8546-139">We’ll use a [CreateSharedAccessSignatureTokenProvider](/dotnet/api/microsoft.servicebus.tokenprovider#Microsoft_ServiceBus_TokenProvider_CreateSharedAccessSignatureTokenProvider_System_String_) method toohold hello SAS credentials.</span></span> <span data-ttu-id="e8546-140">Hello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) példány majd össze hello alapszintű címéből hello Service Bus-névtér és jogkivonat-szolgáltató hello.</span><span class="sxs-lookup"><span data-stu-id="e8546-140">hello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) instance is then constructed with hello base address of hello Service Bus namespace and hello token provider.</span></span>

<span data-ttu-id="e8546-141">Hello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) osztály módszerek toocreate biztosít, enumerálása és üzenetküldési entitások törlése.</span><span class="sxs-lookup"><span data-stu-id="e8546-141">hello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) class provides methods toocreate, enumerate and delete messaging entities.</span></span> <span data-ttu-id="e8546-142">az itt látható, hogyan hello látható szövegrészt kód hello **NamespaceManager** példány létrehozott és használt toocreate hello **DataCollectionTopic** témakör.</span><span class="sxs-lookup"><span data-stu-id="e8546-142">hello code that is shown here shows how hello **NamespaceManager** instance is created and used toocreate hello **DataCollectionTopic** topic.</span></span>

```csharp
Uri uri = ServiceBusEnvironment.CreateServiceUri("sb", "test-blog", string.Empty);
string name = "RootManageSharedAccessKey";
string key = "abcdefghijklmopqrstuvwxyz";

TokenProvider tokenProvider = TokenProvider.CreateSharedAccessSignatureTokenProvider(name, key);
NamespaceManager namespaceManager = new NamespaceManager(uri, tokenProvider);

namespaceManager.CreateTopic("DataCollectionTopic");
```

<span data-ttu-id="e8546-143">Vegye figyelembe, hogy vannak-e a hello túlterhelések [CreateTopic](/dotnet/api/microsoft.servicebus.namespacemanager#Microsoft_ServiceBus_NamespaceManager_CreateTopic_System_String_) , amelyek lehetővé teszik hello témakör tulajdonságainak tooset metódust.</span><span class="sxs-lookup"><span data-stu-id="e8546-143">Note that there are overloads of hello [CreateTopic](/dotnet/api/microsoft.servicebus.namespacemanager#Microsoft_ServiceBus_NamespaceManager_CreateTopic_System_String_) method that enable you tooset properties of hello topic.</span></span> <span data-ttu-id="e8546-144">Például beállíthat (hello alapértelmezett--élettartama TTL) értékének toohello témakör üzeneteket.</span><span class="sxs-lookup"><span data-stu-id="e8546-144">For example, you can set hello default time-to-live (TTL) value for messages sent toohello topic.</span></span> <span data-ttu-id="e8546-145">Ezután adja hozzá a hello **készlet** és **irányítópult** előfizetések.</span><span class="sxs-lookup"><span data-stu-id="e8546-145">Next, add hello **Inventory** and **Dashboard** subscriptions.</span></span>

```csharp
namespaceManager.CreateSubscription("DataCollectionTopic", "Inventory");
namespaceManager.CreateSubscription("DataCollectionTopic", "Dashboard");
```

### <a name="send-messages-toohello-topic"></a><span data-ttu-id="e8546-146">Üzenetek toohello témakör küldése</span><span class="sxs-lookup"><span data-stu-id="e8546-146">Send messages toohello topic</span></span>
<span data-ttu-id="e8546-147">A futásidejű műveletek a Service Bus-entitások; például üzenetek küldése és fogadása, egy alkalmazás először létre kell hoznia egy [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory#microsoft_servicebus_messaging_messagingfactory) objektum.</span><span class="sxs-lookup"><span data-stu-id="e8546-147">For run-time operations on Service Bus entities; for example, sending and receiving messages, an application must first create a [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory#microsoft_servicebus_messaging_messagingfactory) object.</span></span> <span data-ttu-id="e8546-148">Hasonló toohello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) osztály, hello **MessagingFactory** hello alapszintű címéből hello szolgáltatás névtér és jogkivonat-szolgáltató hello példány készült.</span><span class="sxs-lookup"><span data-stu-id="e8546-148">Similar toohello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) class, hello **MessagingFactory** instance is created from hello base address of hello service namespace and hello token provider.</span></span>

```
MessagingFactory factory = MessagingFactory.Create(uri, tokenProvider);
```

<span data-ttu-id="e8546-149">A Service Bus-témaköröktől, kapott küldött üzenetek tooand hello példánya [BrokeredMessage](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage) osztály.</span><span class="sxs-lookup"><span data-stu-id="e8546-149">Messages sent tooand received from Service Bus topics, are instances of hello [BrokeredMessage](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage) class.</span></span> <span data-ttu-id="e8546-150">Ez az osztály áll szabványos tulajdonságait (például [címke](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.label?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_BrokeredMessage_Label) és [TimeToLive](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.timetolive?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_BrokeredMessage_TimeToLive)), amely használt toohold alkalmazás tulajdonságait, valamint egy tetszőleges alkalmazásadatokból álló törzzsel.</span><span class="sxs-lookup"><span data-stu-id="e8546-150">This class consists of a set of standard properties (such as [Label](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.label?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_BrokeredMessage_Label) and [TimeToLive](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage.timetolive?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_BrokeredMessage_TimeToLive)), a dictionary that is used toohold application properties, and a body of arbitrary application data.</span></span> <span data-ttu-id="e8546-151">Az alkalmazás beállíthatja hello törzs történő bármilyen szerializálható objektumnak a (hello alábbi példa továbbítja a egy **SalesData** hello értékesítési adatait a hello POS terminál képviselő objektum), amely fogja használni a hello [ DataContractSerializer](https://msdn.microsoft.com/library/system.runtime.serialization.datacontractserializer.aspx) tooserialize hello objektum.</span><span class="sxs-lookup"><span data-stu-id="e8546-151">An application can set hello body by passing in any serializable object (hello following example passes in a **SalesData** object that represents hello sales data from hello POS terminal), which will use hello [DataContractSerializer](https://msdn.microsoft.com/library/system.runtime.serialization.datacontractserializer.aspx) tooserialize hello object.</span></span> <span data-ttu-id="e8546-152">Másik megoldásként egy [adatfolyam](https://msdn.microsoft.com/library/system.io.stream.aspx) objektum megadható.</span><span class="sxs-lookup"><span data-stu-id="e8546-152">Alternatively, a [Stream](https://msdn.microsoft.com/library/system.io.stream.aspx) object can be provided.</span></span>

```csharp
BrokeredMessage bm = new BrokeredMessage(salesData);
bm.Label = "SalesReport";
bm.Properties["StoreName"] = "Redmond";
bm.Properties["MachineID"] = "POS_1";
```

<span data-ttu-id="e8546-153">hello legegyszerűbb módja toosend üzenetek toohello témakör toouse [CreateMessageSender](/dotnet/api/microsoft.servicebus.messaging.messagingfactory#Microsoft_ServiceBus_Messaging_MessagingFactory_CreateMessageSender_System_String_) toocreate egy [MessageSender](/dotnet/api/microsoft.servicebus.messaging.messagesender) objektum közvetlenül hello [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory) példány:</span><span class="sxs-lookup"><span data-stu-id="e8546-153">hello easiest way toosend messages toohello topic is toouse [CreateMessageSender](/dotnet/api/microsoft.servicebus.messaging.messagingfactory#Microsoft_ServiceBus_Messaging_MessagingFactory_CreateMessageSender_System_String_) toocreate a [MessageSender](/dotnet/api/microsoft.servicebus.messaging.messagesender) object directly from hello [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory) instance:</span></span>

```csharp
MessageSender sender = factory.CreateMessageSender("DataCollectionTopic");
sender.Send(bm);
```

### <a name="receive-messages-from-a-subscription"></a><span data-ttu-id="e8546-154">Üzenetek fogadása egy előfizetés</span><span class="sxs-lookup"><span data-stu-id="e8546-154">Receive messages from a subscription</span></span>
<span data-ttu-id="e8546-155">Hasonló toousing várólistákat, is használhat előfizetés üzeneteit tooreceive egy [MessageReceiver](/dotnet/api/microsoft.servicebus.messaging.messagereceiver) objektumhoz, melyhez közvetlenül hoz létre hello [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory) használatával [ CreateMessageReceiver](/dotnet/api/microsoft.servicebus.messaging.messagingfactory#Microsoft_ServiceBus_Messaging_MessagingFactory_CreateMessageReceiver_System_String_).</span><span class="sxs-lookup"><span data-stu-id="e8546-155">Similar toousing queues, tooreceive messages from a subscription you can use a [MessageReceiver](/dotnet/api/microsoft.servicebus.messaging.messagereceiver) object which you create directly from hello [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory) using [CreateMessageReceiver](/dotnet/api/microsoft.servicebus.messaging.messagingfactory#Microsoft_ServiceBus_Messaging_MessagingFactory_CreateMessageReceiver_System_String_).</span></span> <span data-ttu-id="e8546-156">Használhatja a hello két különböző kap módok (**ReceiveAndDelete** és **PeekLock**), a bemutatott [létrehozása a Service Bus-üzenetsorokat használó alkalmazásokat](service-bus-create-queues.md).</span><span class="sxs-lookup"><span data-stu-id="e8546-156">You can use one of hello two different receive modes (**ReceiveAndDelete** and **PeekLock**), as discussed in [Create applications that use Service Bus queues](service-bus-create-queues.md).</span></span>

<span data-ttu-id="e8546-157">Vegye figyelembe, hogy amikor létrehoz egy **MessageReceiver** előfizetések hello *entityPath* paraméter hello űrlap `topicPath/subscriptions/subscriptionName`.</span><span class="sxs-lookup"><span data-stu-id="e8546-157">Note that when you create a **MessageReceiver** for subscriptions, hello *entityPath* parameter is of hello form `topicPath/subscriptions/subscriptionName`.</span></span> <span data-ttu-id="e8546-158">Ezért toocreate egy **MessageReceiver** a hello **készlet** hello-előfizetése **DataCollectionTopic** témakörben *entityPath*be kell állítani túl`DataCollectionTopic/subscriptions/Inventory`.</span><span class="sxs-lookup"><span data-stu-id="e8546-158">Therefore, toocreate a **MessageReceiver** for hello **Inventory** subscription of hello **DataCollectionTopic** topic, *entityPath* must be set too`DataCollectionTopic/subscriptions/Inventory`.</span></span> <span data-ttu-id="e8546-159">hello kódot a következőképpen jelenik meg:</span><span class="sxs-lookup"><span data-stu-id="e8546-159">hello code appears as follows:</span></span>

```csharp
MessageReceiver receiver = factory.CreateMessageReceiver("DataCollectionTopic/subscriptions/Inventory");
BrokeredMessage receivedMessage = receiver.Receive();
try
{
    ProcessMessage(receivedMessage);
    receivedMessage.Complete();
}
catch (Exception e)
{
    receivedMessage.Abandon();
}
```

## <a name="subscription-filters"></a><span data-ttu-id="e8546-160">Előfizetés-szűrők</span><span class="sxs-lookup"><span data-stu-id="e8546-160">Subscription filters</span></span>
<span data-ttu-id="e8546-161">Ebben a forgatókönyvben az eddigi toohello témakör küldött összes üzenet válnak regisztrált elérhető tooall előfizetések.</span><span class="sxs-lookup"><span data-stu-id="e8546-161">So far, in this scenario all messages sent toohello topic are made available tooall registered subscriptions.</span></span> <span data-ttu-id="e8546-162">hello itt kulcs kifejezés "legyen elérhető."</span><span class="sxs-lookup"><span data-stu-id="e8546-162">hello key phrase here is "made available."</span></span> <span data-ttu-id="e8546-163">Miközben Service Bus-előfizetések toohello témakör küldött összes üzenet megtekintéséhez másolhatja azokat üzenetek toohello virtuális előfizetés üzenetsorába csak egy részét.</span><span class="sxs-lookup"><span data-stu-id="e8546-163">While Service Bus subscriptions see all messages sent toohello topic, you can copy only a subset of those messages toohello virtual subscription queue.</span></span> <span data-ttu-id="e8546-164">Ez történik, az előfizetést *szűrők*.</span><span class="sxs-lookup"><span data-stu-id="e8546-164">This is performed using subscription *filters*.</span></span> <span data-ttu-id="e8546-165">Előfizetés létrehozásakor megadhat egy kifejezést üdvözlőüzenetére hello tulajdonságainak keresztül működő SQL92 stílus predikátum hello formájában, mindkét rendszer tulajdonságai hello (például [címke](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Label)) és hello alkalmazás Tulajdonságok, például a **storename –** hello előző példában.</span><span class="sxs-lookup"><span data-stu-id="e8546-165">When you create a subscription, you can supply a filter expression in hello form of a SQL92 style predicate that operates over hello properties of hello message, both hello system properties (for example, [Label](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Label)) and hello application properties, such as **StoreName** in hello previous example.</span></span>

<span data-ttu-id="e8546-166">Folyamatosan változó hello forgatókönyv tooillustrate ez, egy második tároló a toobe hozzáadott tooour kereskedelmi lehetőséget.</span><span class="sxs-lookup"><span data-stu-id="e8546-166">Evolving hello scenario tooillustrate this, a second store is toobe added tooour retail scenario.</span></span> <span data-ttu-id="e8546-167">Az összes hello POS terminálok mindkét áruházakból ábrázolhatja az értékesítési adatokat továbbra is fennáll irányított toobe központi toohello készletkezelő rendszer esetén, de egy tárolókezelő hello irányítópult eszközzel csak érdekli hello teljesítményének ezt a tárolót.</span><span class="sxs-lookup"><span data-stu-id="e8546-167">Sales data from all of hello POS terminals from both stores still have toobe routed toohello centralized inventory management system, but a store manager using hello dashboard tool is only interested in hello performance of that store.</span></span> <span data-ttu-id="e8546-168">Szűrés tooachieve ez előfizetéseket használhat.</span><span class="sxs-lookup"><span data-stu-id="e8546-168">You can use subscription filtering tooachieve this.</span></span> <span data-ttu-id="e8546-169">Vegye figyelembe, hogy közzétételekor hello POS terminálok üzenetek, azokat be hello **storename –** üdvözlőüzenetére alkalmazás tulajdonságát.</span><span class="sxs-lookup"><span data-stu-id="e8546-169">Note that when hello POS terminals publish messages, they set hello **StoreName** application property on hello message.</span></span> <span data-ttu-id="e8546-170">Két áruházak, például adott **Redmond** és **Budapest**, hello Redmond hello POS terminálok tárolja az üzeneteket az értékesítési adatokat stamp egy **storename –** túl egyenlő **Redmond**, mivel hello Budapest tárolására POS terminálok használja egy **storename –** túl egyenlő**Budapest**.</span><span class="sxs-lookup"><span data-stu-id="e8546-170">Given two stores, for example **Redmond** and **Seattle**, hello POS terminals in hello Redmond store stamp their sales data messages with a **StoreName** equal too**Redmond**, whereas hello Seattle store POS terminals use a **StoreName** equal too**Seattle**.</span></span> <span data-ttu-id="e8546-171">hello tárolókezelő hello Redmond tárolására csak a szeretne toosee adatok a POS részére.</span><span class="sxs-lookup"><span data-stu-id="e8546-171">hello store manager of hello Redmond store only wants toosee data from its POS terminals.</span></span> <span data-ttu-id="e8546-172">hello rendszer a következőképpen jelenik meg:</span><span class="sxs-lookup"><span data-stu-id="e8546-172">hello system appears as follows:</span></span>

![Szolgáltatás-Bus4](./media/service-bus-create-topics-subscriptions/IC657167.gif)

<span data-ttu-id="e8546-174">az Útválasztás tooset, létrehozhat hello **irányítópult** előfizetés az alábbiak szerint:</span><span class="sxs-lookup"><span data-stu-id="e8546-174">tooset up this routing, you create hello **Dashboard** subscription as follows:</span></span>

```csharp
SqlFilter dashboardFilter = new SqlFilter("StoreName = 'Redmond'");
namespaceManager.CreateSubscription("DataCollectionTopic", "Dashboard", dashboardFilter);
```

<span data-ttu-id="e8546-175">Ennek [előfizetésszűrő](/dotnet/api/microsoft.servicebus.messaging.sqlfilter), csak a hello üzenetek **storename –** tulajdonsága túl**Redmond** lesz másolt toohello virtuális várólistája hello **Irányítópult** előfizetés.</span><span class="sxs-lookup"><span data-stu-id="e8546-175">With this [subscription filter](/dotnet/api/microsoft.servicebus.messaging.sqlfilter), only messages that have hello **StoreName** property set too**Redmond** will be copied toohello virtual queue for hello **Dashboard** subscription.</span></span> <span data-ttu-id="e8546-176">Szűrés, azonban sokkal több toosubscription van.</span><span class="sxs-lookup"><span data-stu-id="e8546-176">There is much more toosubscription filtering, however.</span></span> <span data-ttu-id="e8546-177">Alkalmazások is rendelkeznek több Állapotszűrő szabályok hozzáadása toohello képességét toomodify hello tulajdonságai üzenet előfizetésenként tooa előfizetés virtuális üzenetsorában adja át.</span><span class="sxs-lookup"><span data-stu-id="e8546-177">Applications can have multiple filter rules per subscription in addition toohello ability toomodify hello properties of a message as it passes tooa subscription's virtual queue.</span></span>

## <a name="summary"></a><span data-ttu-id="e8546-178">Összefoglalás</span><span class="sxs-lookup"><span data-stu-id="e8546-178">Summary</span></span>
<span data-ttu-id="e8546-179">Összes hello okok toouse queuing ismertetett [létrehozása a Service Bus-üzenetsorokat használó alkalmazásokat](service-bus-create-queues.md) alkalmazni tootopics, kifejezetten is:</span><span class="sxs-lookup"><span data-stu-id="e8546-179">All of hello reasons toouse queuing described in [Create applications that use Service Bus queues](service-bus-create-queues.md) also apply tootopics, specifically:</span></span>

* <span data-ttu-id="e8546-180">Időbeli elválasztás – üzenetek létrehozói és felhasználói nem rendelkezik toobe online hello ugyanannyi időt vesz igénybe.</span><span class="sxs-lookup"><span data-stu-id="e8546-180">Temporal decoupling – message producers and consumers do not have toobe online at hello same time.</span></span>
* <span data-ttu-id="e8546-181">Terheléselosztás – hello témakör engedélyezése helyett csúcsterhelés átlagos terheléssel kiépítve fogyasztó alkalmazások toobe által az csúcsait a terhelés vannak Görbített.</span><span class="sxs-lookup"><span data-stu-id="e8546-181">Load leveling – peaks in load are smoothed out by hello topic enabling consuming applications toobe provisioned for average load instead of peak load.</span></span>
* <span data-ttu-id="e8546-182">Terheléselosztás – hasonló tooa várólista, akkor segítségével figyelést egy-egy előfizetéshez, a minden üzenet tooonly hello fogyasztók, ezáltal terheléselosztás feladatkiosztás több versengő fogyasztó számára.</span><span class="sxs-lookup"><span data-stu-id="e8546-182">Load balancing – similar tooa queue, you can have multiple competing consumers listening on a single subscription, with each message handed off tooonly one of hello consumers, thereby balancing load.</span></span>
* <span data-ttu-id="e8546-183">Laza kapcsoló – akkor is fejlődnek hello hálózati üzenetküldési nem befolyásolja a már meglévő végpontok; például előfizetések hozzáadásának vagy kicserélésének szűrők tooa témakör tooallow új fogyasztók számára.</span><span class="sxs-lookup"><span data-stu-id="e8546-183">Loose coupling – you can evolve hello messaging network without affecting existing endpoints; for example, adding subscriptions or changing filters tooa topic tooallow for new consumers.</span></span>

## <a name="next-steps"></a><span data-ttu-id="e8546-184">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="e8546-184">Next steps</span></span>

<span data-ttu-id="e8546-185">Lásd: [létrehozása a Service Bus-üzenetsorokat használó alkalmazásokat](service-bus-create-queues.md) hogyan toouse várólisták hello POS kereskedelmi forgatókönyvben kapcsolatos információkat.</span><span class="sxs-lookup"><span data-stu-id="e8546-185">See [Create applications that use Service Bus queues](service-bus-create-queues.md) for information about how toouse queues in hello POS retail scenario.</span></span>

