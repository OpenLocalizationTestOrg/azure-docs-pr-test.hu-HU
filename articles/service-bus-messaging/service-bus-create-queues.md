---
title: "Azure Service Bus-üzenetsorokat használó alkalmazásokat aaaWrite |} Microsoft Docs"
description: "Hogyan toowrite egy egyszerű várólista-alapú alkalmazás Azure Service Bus."
services: service-bus-messaging
documentationcenter: na
author: sethmanheim
manager: timlt
editor: 
ms.assetid: 754d91b3-1426-405e-84b4-fd36d65b114a
ms.service: service-bus-messaging
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/07/2017
ms.author: sethm
ms.openlocfilehash: 93b75902a06becd6e33e05298e09f5669d0e2aef
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/06/2017
---
# <a name="create-applications-that-use-service-bus-queues"></a><span data-ttu-id="35563-103">Service Bus-üzenetsorokat használó alkalmazások készítése</span><span class="sxs-lookup"><span data-stu-id="35563-103">Create applications that use Service Bus queues</span></span>
<span data-ttu-id="35563-104">Ez a témakör ismerteti a Service Bus-üzenetsorok, és bemutatja, hogyan toowrite várólista alapú egy egyszerű alkalmazást, amely a Service Bus használja.</span><span class="sxs-lookup"><span data-stu-id="35563-104">This topic describes Service Bus queues and shows how toowrite a simple queue-based application that uses Service Bus.</span></span>

<span data-ttu-id="35563-105">Vegye figyelembe a kiskereskedelmi értékesítési adatait az egyes Point-of-Sale (POS) terminálok kell lennie történik irányítása tooan készletkezelő rendszer által használt hello adatok toodetermine, ha készlet feltöltést toobe hello world egy olyan forgatókönyvet.</span><span class="sxs-lookup"><span data-stu-id="35563-105">Consider a scenario from hello world of retail in which sales data from individual Point-of-Sale (POS) terminals must be routed tooan inventory management system that uses hello data toodetermine when stock has toobe replenished.</span></span> <span data-ttu-id="35563-106">A megoldás az, hogy a Service Bus üzenetkezelés hello kommunikációját hello terminálok és hello készletkezelő rendszer, a következő ábra hello ismertetett módon:</span><span class="sxs-lookup"><span data-stu-id="35563-106">This solution uses Service Bus messaging for hello communication between hello terminals and hello inventory management system, as illustrated in hello following figure:</span></span>

![Service Bus-üzenetsorok kép 1](./media/service-bus-create-queues/IC657161.gif)

<span data-ttu-id="35563-108">Minden egyes POS terminál jelent az értékesítési adatokat küldött üzenetek toohello **DataCollectionQueue**.</span><span class="sxs-lookup"><span data-stu-id="35563-108">Each POS terminal reports its sales data by sending messages toohello **DataCollectionQueue**.</span></span> <span data-ttu-id="35563-109">Ezek az üzenetek ebből a várólistából maradni, amíg lehívás hello készletkezelő rendszer által.</span><span class="sxs-lookup"><span data-stu-id="35563-109">These messages remain in this queue until they are retrieved by hello inventory management system.</span></span> <span data-ttu-id="35563-110">Ezt a mintát gyakran nevezik *aszinkron üzenetkezelési*, mert hello POS terminál nincs toowait válaszára a hello készlet felügyeleti rendszer toocontinue feldolgozása.</span><span class="sxs-lookup"><span data-stu-id="35563-110">This pattern is often termed *asynchronous messaging*, because hello POS terminal does not have toowait for a reply from hello inventory management system toocontinue processing.</span></span>

## <a name="why-queuing"></a><span data-ttu-id="35563-111">Ezért queuing?</span><span class="sxs-lookup"><span data-stu-id="35563-111">Why queuing?</span></span>
<span data-ttu-id="35563-112">Előtt úgy tekintünk hello kódot a szükséges tooset fel ezt az alkalmazást, gondolja át, hello előnyei várólista ebben a forgatókönyvben, ahelyett, hogy hello POS terminálok beszélgetés közvetlen (szinkron) toohello szoftverleltár-kezelő rendszer.</span><span class="sxs-lookup"><span data-stu-id="35563-112">Before we look at hello code that is required tooset up this application, consider hello advantages of using a queue in this scenario instead of having hello POS terminals talk directly (synchronously) toohello inventory management system.</span></span>

### <a name="temporal-decoupling"></a><span data-ttu-id="35563-113">Időbeli elválasztás</span><span class="sxs-lookup"><span data-stu-id="35563-113">Temporal decoupling</span></span>
<span data-ttu-id="35563-114">Hello aszinkron üzenettovábbítási mintának köszönhetően létrehozóknak és a felhasználóknak nem kell toobe online: hello ugyanannyi időt vesz igénybe.</span><span class="sxs-lookup"><span data-stu-id="35563-114">With hello asynchronous messaging pattern, producers and consumers do not have toobe online at hello same time.</span></span> <span data-ttu-id="35563-115">hello üzenetküldési infrastruktúra megbízhatóan tárolja az üzeneteket csak hello fogyasztó fél készen tooreceive őket.</span><span class="sxs-lookup"><span data-stu-id="35563-115">hello messaging infrastructure reliably stores messages until hello consuming party is ready tooreceive them.</span></span> <span data-ttu-id="35563-116">Ez azt jelenti, hogy hello elosztott alkalmazások összetevői hello is leválasztását, akár önkéntesen; például karbantartás céljából, vagy tooa összetevő összeomlása, az nem befolyásolja a teljes rendszer hello miatt.</span><span class="sxs-lookup"><span data-stu-id="35563-116">This means hello components of hello distributed application can be disconnected, either voluntarily; for example, for maintenance, or due tooa component crash, without affecting hello whole system.</span></span> <span data-ttu-id="35563-117">Ezenkívül hello fel az alkalmazás csak lehet toobe online hello nap bizonyos időpontjaiban.</span><span class="sxs-lookup"><span data-stu-id="35563-117">Furthermore, hello consuming application may only have toobe online during certain times of hello day.</span></span> <span data-ttu-id="35563-118">Például ilyenkor kereskedelmi hello készletkezelő rendszer esetén csak rendelkezhetnek toocome online hello munkanap hello vége után.</span><span class="sxs-lookup"><span data-stu-id="35563-118">For example, in this retail scenario, hello inventory management system may only have toocome online after hello end of hello business day.</span></span>

### <a name="load-leveling"></a><span data-ttu-id="35563-119">Terheléselosztás</span><span class="sxs-lookup"><span data-stu-id="35563-119">Load leveling</span></span>
<span data-ttu-id="35563-120">Számos alkalmazás rendszerterhelés időnként eltérő, mivel az egyes Munkaegységek szükséges hello feldolgozási idő jellemzően állandó marad.</span><span class="sxs-lookup"><span data-stu-id="35563-120">In many applications system load varies over time, whereas hello processing time required for each unit of work is typically constant.</span></span> <span data-ttu-id="35563-121">Létrehozói és felhasználói egy sor azt jelenti, hogy hello fogyasztó alkalmazás (hello munkavégző) csak akkor van toobe közé üzenet helyett a csúcsterhelés betölteni az átlagos tooservice kiépítve.</span><span class="sxs-lookup"><span data-stu-id="35563-121">Intermediating message producers and consumers with a queue means that hello consuming application (hello worker) only has toobe provisioned tooservice an average load rather than a peak load.</span></span> <span data-ttu-id="35563-122">hello mélysége hello várólista mérete akkor nő, és szerződés, a bejövő terhelés hello függően változik.</span><span class="sxs-lookup"><span data-stu-id="35563-122">hello depth of hello queue will grow and contract as hello incoming load varies.</span></span> <span data-ttu-id="35563-123">Ez közvetlen megtakarításokkal pénz infrastruktúra szükséges tooservice hello alkalmazásterhelés toohello mennyiségű figyelembe véve.</span><span class="sxs-lookup"><span data-stu-id="35563-123">This directly saves money with regard toohello amount of infrastructure required tooservice hello application load.</span></span>

![Service Bus-üzenetsorok kép 2](./media/service-bus-create-queues/IC657162.gif)

### <a name="load-balancing"></a><span data-ttu-id="35563-125">Terheléselosztás</span><span class="sxs-lookup"><span data-stu-id="35563-125">Load balancing</span></span>
<span data-ttu-id="35563-126">Hello szerint a terhelés növekedésével, további feldolgozó folyamatok hozzáadott tooread hello munkavégző várólistában lehet.</span><span class="sxs-lookup"><span data-stu-id="35563-126">As hello load increases, more worker processes can be added tooread from hello worker queue.</span></span> <span data-ttu-id="35563-127">Minden üzenetet csak az egyik hello munkavégző folyamatok dolgoz fel.</span><span class="sxs-lookup"><span data-stu-id="35563-127">Each message is processed by only one of hello worker processes.</span></span> <span data-ttu-id="35563-128">Továbbá a lekérésalapú terheléselosztás lehetővé teszi az optimális használat hello munkavégző számítógépek akkor is, ha hello munkavégző számítógépek térnek el egymástól, amely legutóbb tooprocessing rendelkezik, kérik le a saját maximális díj üzenetek.</span><span class="sxs-lookup"><span data-stu-id="35563-128">Furthermore, this pull-based load balancing allows for optimum usage of hello worker computers even if hello worker computers differ with regard tooprocessing power, as they will pull messages at their own maximum rate.</span></span> <span data-ttu-id="35563-129">Ezt a mintát gyakran nevezik hello versengő fogyasztó mintát.</span><span class="sxs-lookup"><span data-stu-id="35563-129">This pattern is often termed hello competing consumer pattern.</span></span>

![Service Bus-üzenetsorok kép 3](./media/service-bus-create-queues/IC657163.gif)

### <a name="loose-coupling"></a><span data-ttu-id="35563-131">Laza kapcsoló</span><span class="sxs-lookup"><span data-stu-id="35563-131">Loose coupling</span></span>
<span data-ttu-id="35563-132">Message queuing toointermediate közötti üzenetek létrehozói és felhasználói használatának hello összetevői között egy belső laza kapcsoló.</span><span class="sxs-lookup"><span data-stu-id="35563-132">Using message queuing toointermediate between message producers and consumers provides an intrinsic loose coupling between hello components.</span></span> <span data-ttu-id="35563-133">Mivel létrehozói és felhasználói nem kompatibilis, minden más, a fogyasztó frissítése anélkül, hogy hello készítő hatással.</span><span class="sxs-lookup"><span data-stu-id="35563-133">Because producers and consumers are not aware of each other, a consumer can be upgraded without having any effect on hello producer.</span></span> <span data-ttu-id="35563-134">Ezenkívül topológia üzenetküldési hello is fejlődnek hello meglévő végpontok befolyásolása nélkül.</span><span class="sxs-lookup"><span data-stu-id="35563-134">Furthermore, hello messaging topology can evolve without affecting hello existing endpoints.</span></span> <span data-ttu-id="35563-135">Mutatjuk Ez több amikor döntésről bővebben közzétételi/előfizetési.</span><span class="sxs-lookup"><span data-stu-id="35563-135">We’ll discuss this more when we talk about publish/subscribe.</span></span>

## <a name="show-me-hello-code"></a><span data-ttu-id="35563-136">Hello kód megjelenítése</span><span class="sxs-lookup"><span data-stu-id="35563-136">Show me hello code</span></span>
<span data-ttu-id="35563-137">a következő szakasz bemutatja hogyan hello toouse Service Bus toobuild ezt az alkalmazást.</span><span class="sxs-lookup"><span data-stu-id="35563-137">hello following section shows how toouse Service Bus toobuild this application.</span></span>

### <a name="sign-up-for-an-azure-account"></a><span data-ttu-id="35563-138">Regisztráljon az Azure-fiók</span><span class="sxs-lookup"><span data-stu-id="35563-138">Sign up for an Azure account</span></span>
<span data-ttu-id="35563-139">Rendelés toostart Service Bus használata egy Azure-fiókra lesz szüksége.</span><span class="sxs-lookup"><span data-stu-id="35563-139">You’ll need an Azure account in order toostart working with Service Bus.</span></span> <span data-ttu-id="35563-140">Ha még nem rendelkezik egy, egy ingyenes fiókot regisztrálhat [Itt](https://azure.microsoft.com/pricing/free-trial/?WT.mc_id=A85619ABF).</span><span class="sxs-lookup"><span data-stu-id="35563-140">If you do not already have one, you can sign up for a free account [here](https://azure.microsoft.com/pricing/free-trial/?WT.mc_id=A85619ABF).</span></span>

### <a name="create-a-namespace"></a><span data-ttu-id="35563-141">Névtér létrehozása</span><span class="sxs-lookup"><span data-stu-id="35563-141">Create a namespace</span></span>
<span data-ttu-id="35563-142">Ha rendelkezik előfizetéssel, akkor [létre kell hoznia egy szolgáltatásnévteret](service-bus-create-namespace-portal.md).</span><span class="sxs-lookup"><span data-stu-id="35563-142">Once you have a subscription, you can [create a service namespace](service-bus-create-namespace-portal.md).</span></span> <span data-ttu-id="35563-143">Minden névtér egy hatókörkezelési tárolót állítja be a Service Bus-entitások funkcionál.</span><span class="sxs-lookup"><span data-stu-id="35563-143">Each namespace acts as a scoping container for a set of Service Bus entities.</span></span> <span data-ttu-id="35563-144">Az új névtér adjon meg egy egyedi nevet összes Service Bus-fiók.</span><span class="sxs-lookup"><span data-stu-id="35563-144">Give your new namespace a unique name across all Service Bus accounts.</span></span> 

### <a name="install-hello-nuget-package"></a><span data-ttu-id="35563-145">Hello NuGet-csomag telepítése</span><span class="sxs-lookup"><span data-stu-id="35563-145">Install hello NuGet package</span></span>
<span data-ttu-id="35563-146">toouse hello Service Bus-névtér, egy alkalmazás hello Service Bus-összeállításra, konkrétan Microsoft.ServiceBus.dll kell hivatkoznia.</span><span class="sxs-lookup"><span data-stu-id="35563-146">toouse hello Service Bus namespace, an application must reference hello Service Bus assembly, specifically Microsoft.ServiceBus.dll.</span></span> <span data-ttu-id="35563-147">A Microsoft Azure SDK hello részeként szerelvény található, és hello letöltési érhető el: hello [Azure SDK letöltési oldala](https://azure.microsoft.com/downloads/).</span><span class="sxs-lookup"><span data-stu-id="35563-147">You can find this assembly as part of hello Microsoft Azure SDK, and hello download is available at hello [Azure SDK download page](https://azure.microsoft.com/downloads/).</span></span> <span data-ttu-id="35563-148">Azonban hello [Service Bus NuGet-csomag](https://www.nuget.org/packages/WindowsAzure.ServiceBus) hello legegyszerűbb módja tooget hello Service Bus API és tooconfigure az alkalmazás az összes Service Bus-függőséggel hello van.</span><span class="sxs-lookup"><span data-stu-id="35563-148">However, hello [Service Bus NuGet package](https://www.nuget.org/packages/WindowsAzure.ServiceBus) is hello easiest way tooget hello Service Bus API and tooconfigure your application with all of hello Service Bus dependencies.</span></span>

### <a name="create-hello-queue"></a><span data-ttu-id="35563-149">Hello várólista létrehozása</span><span class="sxs-lookup"><span data-stu-id="35563-149">Create hello queue</span></span>
<span data-ttu-id="35563-150">Felügyeleti műveletek a Service Bus üzenetküldési entitásokat (üzenetsorok és a közzétételi/előfizetési témakörök) hello keresztül hajtja végre [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager) osztály.</span><span class="sxs-lookup"><span data-stu-id="35563-150">Management operations for Service Bus messaging entities (queues and publish/subscribe topics) are performed via hello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager) class.</span></span> <span data-ttu-id="35563-151">A Service Bus használ egy [közös hozzáférésű Jogosultságkód (SAS)](service-bus-sas.md) -alapú biztonsági modellt.</span><span class="sxs-lookup"><span data-stu-id="35563-151">Service Bus uses a [Shared Access Signature (SAS)](service-bus-sas.md) based security model.</span></span> <span data-ttu-id="35563-152">Hello [TokenProvider](/dotnet/api/microsoft.servicebus.tokenprovider) osztály vissza néhány jól ismert jogkivonat-szolgáltatót beépített gyári metódusokat tartalmazó jelenti a biztonsági jogkivonat-szolgáltató.</span><span class="sxs-lookup"><span data-stu-id="35563-152">hello [TokenProvider](/dotnet/api/microsoft.servicebus.tokenprovider) class represents a security token provider with built-in factory methods returning some well-known token providers.</span></span> <span data-ttu-id="35563-153">Fogjuk használni egy [CreateSharedAccessSignatureTokenProvider](/dotnet/api/microsoft.servicebus.tokenprovider#Microsoft_ServiceBus_TokenProvider_CreateSharedAccessSignatureTokenProvider_System_String_) metódus toohold hello SAS-hitelesítőadatait.</span><span class="sxs-lookup"><span data-stu-id="35563-153">We’ll use a [CreateSharedAccessSignatureTokenProvider](/dotnet/api/microsoft.servicebus.tokenprovider#Microsoft_ServiceBus_TokenProvider_CreateSharedAccessSignatureTokenProvider_System_String_) method toohold hello SAS credentials.</span></span> <span data-ttu-id="35563-154">Hello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager) példány majd össze hello alapszintű címéből hello Service Bus-névtér és jogkivonat-szolgáltató hello.</span><span class="sxs-lookup"><span data-stu-id="35563-154">hello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager) instance is then constructed with hello base address of hello Service Bus namespace and hello token provider.</span></span>

<span data-ttu-id="35563-155">Hello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager) osztály módszerek toocreate biztosít, enumerálása és üzenetküldési entitások törlése.</span><span class="sxs-lookup"><span data-stu-id="35563-155">hello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager) class provides methods toocreate, enumerate and delete messaging entities.</span></span> <span data-ttu-id="35563-156">az itt látható, hogyan hello látható szövegrészt kód hello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager) példány létrehozott és használt toocreate hello **DataCollectionQueue** várólista.</span><span class="sxs-lookup"><span data-stu-id="35563-156">hello code that is shown here shows how hello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager) instance is created and used toocreate hello **DataCollectionQueue** queue.</span></span>

```csharp
Uri uri = ServiceBusEnvironment.CreateServiceUri("sb", 
                "test-blog", string.Empty);
string name = "RootManageSharedAccessKey";
string key = "abcdefghijklmopqrstuvwxyz";

TokenProvider tokenProvider = 
    TokenProvider.CreateSharedAccessSignatureTokenProvider(name, key);
NamespaceManager namespaceManager = 
    new NamespaceManager(uri, tokenProvider);
namespaceManager.CreateQueue("DataCollectionQueue");
```

<span data-ttu-id="35563-157">Vegye figyelembe, hogy vannak-e a hello túlterhelések [CreateQueue](/dotnet/api/microsoft.servicebus.namespacemanager#Microsoft_ServiceBus_NamespaceManager_CreateQueue_System_String_) , amelyek lehetővé teszik a hello várólista toobe beállított tulajdonságainak metódust.</span><span class="sxs-lookup"><span data-stu-id="35563-157">Note that there are overloads of hello [CreateQueue](/dotnet/api/microsoft.servicebus.namespacemanager#Microsoft_ServiceBus_NamespaceManager_CreateQueue_System_String_) method that enable properties of hello queue toobe tuned.</span></span> <span data-ttu-id="35563-158">Megadhatja például, hogy (hello alapértelmezett--élettartama TTL) értékének toohello várólistára küldött üzenet.</span><span class="sxs-lookup"><span data-stu-id="35563-158">For example, you can set hello default time-to-live (TTL) value for messages sent toohello queue.</span></span>

### <a name="send-messages-toohello-queue"></a><span data-ttu-id="35563-159">Üzenetek toohello várólista küldése</span><span class="sxs-lookup"><span data-stu-id="35563-159">Send messages toohello queue</span></span>
<span data-ttu-id="35563-160">A futásidejű műveletek a Service Bus-entitások; például üzenetek küldése és fogadása, egy alkalmazás először létre kell hoznia egy [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory) objektum.</span><span class="sxs-lookup"><span data-stu-id="35563-160">For run-time operations on Service Bus entities; for example, sending and receiving messages, an application must first create a [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory) object.</span></span> <span data-ttu-id="35563-161">Hasonló toohello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager) osztály, hello [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory) hello alapszintű címéből hello szolgáltatás névtér és jogkivonat-szolgáltató hello példány készült.</span><span class="sxs-lookup"><span data-stu-id="35563-161">Similar toohello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager) class, hello [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory) instance is created from hello base address of hello service namespace and hello token provider.</span></span>

```csharp
 BrokeredMessage bm = new BrokeredMessage(salesData);
 bm.Label = "SalesReport";
 bm.Properties["StoreName"] = "Redmond";
 bm.Properties["MachineID"] = "POS_1";
```

<span data-ttu-id="35563-162">Küldött üzeneteket, és kapott a Service Bus üzenetsorok hello példánya [BrokeredMessage](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage) osztály.</span><span class="sxs-lookup"><span data-stu-id="35563-162">Messages sent to, and received from Service Bus queues are instances of hello [BrokeredMessage](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage) class.</span></span> <span data-ttu-id="35563-163">Ez az osztály áll szabványos tulajdonságait (például [címke](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Label) és [TimeToLive](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_TimeToLive)), amely használt toohold alkalmazás tulajdonságait, valamint egy tetszőleges alkalmazásadatokból álló törzzsel.</span><span class="sxs-lookup"><span data-stu-id="35563-163">This class consists of a set of standard properties (such as [Label](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Label) and [TimeToLive](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_TimeToLive)), a dictionary that is used toohold application properties, and a body of arbitrary application data.</span></span> <span data-ttu-id="35563-164">Az alkalmazás beállíthatja hello törzs történő bármilyen szerializálható objektumnak a (hello alábbi példa továbbítja a egy **SalesData** hello értékesítési adatait a hello POS terminál képviselő objektum), amely fogja használni a hello [ DataContractSerializer](https://msdn.microsoft.com/library/system.runtime.serialization.datacontractserializer.aspx) tooserialize hello objektum.</span><span class="sxs-lookup"><span data-stu-id="35563-164">An application can set hello body by passing in any serializable object (hello following example passes in a **SalesData** object that represents hello sales data from hello POS terminal), which will use hello [DataContractSerializer](https://msdn.microsoft.com/library/system.runtime.serialization.datacontractserializer.aspx) tooserialize hello object.</span></span> <span data-ttu-id="35563-165">Másik megoldásként egy [adatfolyam](https://msdn.microsoft.com/library/system.io.stream.aspx) objektum megadható.</span><span class="sxs-lookup"><span data-stu-id="35563-165">Alternatively, a [Stream](https://msdn.microsoft.com/library/system.io.stream.aspx) object can be provided.</span></span>

<span data-ttu-id="35563-166">Ennek legegyszerűbb módja toosend üzenetek tooa megadott várólista, a nagybetűk hello hello **DataCollectionQueue**, toouse van [CreateMessageSender](/dotnet/api/microsoft.servicebus.messaging.messagingfactory#Microsoft_ServiceBus_Messaging_MessagingFactory_CreateMessageSender_System_String_) toocreate egy [MessageSender](/dotnet/api/microsoft.servicebus.messaging.messagesender) objektum közvetlenül a hello [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory) példány.</span><span class="sxs-lookup"><span data-stu-id="35563-166">hello easiest way toosend messages tooa given queue, in our case hello **DataCollectionQueue**, is toouse [CreateMessageSender](/dotnet/api/microsoft.servicebus.messaging.messagingfactory#Microsoft_ServiceBus_Messaging_MessagingFactory_CreateMessageSender_System_String_) toocreate a [MessageSender](/dotnet/api/microsoft.servicebus.messaging.messagesender) object directly from hello [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory) instance.</span></span>

```csharp
MessageSender sender = factory.CreateMessageSender("DataCollectionQueue");
sender.Send(bm);
```

### <a name="receiving-messages-from-hello-queue"></a><span data-ttu-id="35563-167">Üzenetek fogadása hello várólista</span><span class="sxs-lookup"><span data-stu-id="35563-167">Receiving messages from hello queue</span></span>
<span data-ttu-id="35563-168">hello várólistában lévő üzenetek tooreceive, használhatja a [MessageReceiver](/dotnet/api/microsoft.servicebus.messaging.messagereceiver) objektumhoz, melyhez közvetlenül hoz létre hello [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory) használatával [CreateMessageReceiver](/dotnet/api/microsoft.servicebus.messaging.messagingfactory#Microsoft_ServiceBus_Messaging_MessagingFactory_CreateMessageReceiver_System_String_).</span><span class="sxs-lookup"><span data-stu-id="35563-168">tooreceive messages from hello queue, you can use a [MessageReceiver](/dotnet/api/microsoft.servicebus.messaging.messagereceiver) object which you create directly from hello [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory) using [CreateMessageReceiver](/dotnet/api/microsoft.servicebus.messaging.messagingfactory#Microsoft_ServiceBus_Messaging_MessagingFactory_CreateMessageReceiver_System_String_).</span></span> <span data-ttu-id="35563-169">Üzenet fogadók a két különböző módban tudnak működni: **ReceiveAndDelete** és **PeekLock**.</span><span class="sxs-lookup"><span data-stu-id="35563-169">Message receivers can work in two different modes: **ReceiveAndDelete** and **PeekLock**.</span></span> <span data-ttu-id="35563-170">Hello [ReceiveMode](/dotnet/api/microsoft.servicebus.messaging.receivemode) van beállítva, amikor hello üzenetet fogadó jön létre, mint egy paraméterrel toohello [CreateMessageReceiver](/dotnet/api/microsoft.servicebus.messaging.messagingfactory?redirectedfrom=MSDN#Microsoft_ServiceBus_Messaging_MessagingFactory_CreateMessageReceiver_System_String_Microsoft_ServiceBus_Messaging_ReceiveMode_) hívható meg.</span><span class="sxs-lookup"><span data-stu-id="35563-170">hello [ReceiveMode](/dotnet/api/microsoft.servicebus.messaging.receivemode) is set when hello message receiver is created, as a parameter toohello [CreateMessageReceiver](/dotnet/api/microsoft.servicebus.messaging.messagingfactory?redirectedfrom=MSDN#Microsoft_ServiceBus_Messaging_MessagingFactory_CreateMessageReceiver_System_String_Microsoft_ServiceBus_Messaging_ReceiveMode_) call.</span></span>

<span data-ttu-id="35563-171">Hello használatakor **ReceiveAndDelete** módban hello kap egy egylépéses művelet; Ez azt jelenti, hogy a Service Bus hello kérelmet kap, ha azt hello üzenetet, feldolgozottként jelöli meg és toohello alkalmazás visszaadja.</span><span class="sxs-lookup"><span data-stu-id="35563-171">When using hello **ReceiveAndDelete** mode, hello receive is a single-shot operation; that is, when Service Bus receives hello request, it marks hello message as being consumed and returns it toohello application.</span></span> <span data-ttu-id="35563-172">**ReceiveAndDelete** mód hello legegyszerűbb modell, és működik a legjobban, mely hello az alkalmazás működését nem dolgoz fel üzenetet, ha a hiba toooccur forgatókönyvek esetén.</span><span class="sxs-lookup"><span data-stu-id="35563-172">**ReceiveAndDelete** mode is hello simplest model and works best for scenarios in which hello application can tolerate not processing a message if a failure were toooccur.</span></span> <span data-ttu-id="35563-173">toounderstand, ez egy olyan esetet esetén, amikor hello fogyasztói hello kérés fogadásához, és majd összeomlik a feldolgozása előtt.</span><span class="sxs-lookup"><span data-stu-id="35563-173">toounderstand this, consider a scenario in which hello consumer issues hello receive request and then crashes before processing it.</span></span> <span data-ttu-id="35563-174">Mivel a Service Bus hello üzenetet, feldolgozottként jelölte meg, amikor hello alkalmazás újraindul, és az üzenetek újbóli felhasználása indítása ki fogja hagyni hello hello összeomlás előtt feldolgozott üzenetet.</span><span class="sxs-lookup"><span data-stu-id="35563-174">Since Service Bus marked hello message as being consumed, when hello application restarts and starts consuming messages again, it will have missed hello message that was consumed before hello crash.</span></span>

<span data-ttu-id="35563-175">A **PeekLock** módban hello kap, így a lehető toosupport alkalmazások, amelyek működését zavarják a hiányzó üzenetek kétszakaszos művelet lesz.</span><span class="sxs-lookup"><span data-stu-id="35563-175">In **PeekLock** mode, hello receive becomes a two-stage operation, which makes it possible toosupport applications that cannot tolerate missing messages.</span></span> <span data-ttu-id="35563-176">A Service Bus hello kérelmet kap, ha úgy találja, hello tovább üzenet toobe felhasznált, lezárja tooprevent más fogyasztók fogadni, és toohello alkalmazás visszaadása.</span><span class="sxs-lookup"><span data-stu-id="35563-176">When Service Bus receives hello request, it finds hello next message toobe consumed, locks it tooprevent other consumers receiving it, and then returns it toohello application.</span></span> <span data-ttu-id="35563-177">Miután hello alkalmazás befejezi hello üzenet feldolgozását (vagy megbízható módon tárolja a jövőbeli feldolgozáshoz), végrehajtja hello második hello fogadási folyamata meghívásával [Complete](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Complete) hello érkezett üzenet.</span><span class="sxs-lookup"><span data-stu-id="35563-177">After hello application finishes processing hello message (or stores it reliably for future processing), it completes hello second stage of hello receive process by calling [Complete](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Complete) on hello received message.</span></span> <span data-ttu-id="35563-178">Amikor a Service Bus látja a hello [Complete](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Complete) hívás, hello üzenetet, feldolgozottként jelöli.</span><span class="sxs-lookup"><span data-stu-id="35563-178">When Service Bus sees hello [Complete](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Complete) call, it marks hello message as being consumed.</span></span>

<span data-ttu-id="35563-179">Két más eredményekkel is előfordulhatnak.</span><span class="sxs-lookup"><span data-stu-id="35563-179">Two other outcomes are possible.</span></span> <span data-ttu-id="35563-180">Először, ha hello alkalmazás nem tudja tooprocess hello üzenet valamilyen okból kifolyólag, akkor meghívhatja [Abandon](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Abandon) hello fogadott üzenet (ahelyett, hogy [Complete](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Complete)).</span><span class="sxs-lookup"><span data-stu-id="35563-180">First, if hello application is unable tooprocess hello message for some reason, it can call [Abandon](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Abandon) on hello received message (instead of [Complete](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Complete)).</span></span> <span data-ttu-id="35563-181">Ez a Service Bus toounlock üdvözlőüzenetére okoz, és könnyebben elérhető toobe újbóli fogadását, vagy azonos felhasználói hello vagy épp egy másik fogyasztó.</span><span class="sxs-lookup"><span data-stu-id="35563-181">This causes Service Bus toounlock hello message and make it available toobe received again, either by hello same consumer or by another completing consumer.</span></span> <span data-ttu-id="35563-182">Második egy társított hello zárolási időtúllépés van, és ha hello alkalmazás nem tudja feldolgozni a üdvözlőüzenetére hello zárolási idő lejárta előtt (például ha hello alkalmazás összeomlik), majd a Service Bus feloldást üzenet hello révén elérhető toobe ismételt fogadását (lényegében hajt végre egy [Abandon](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Abandon) művelet alapértelmezés szerint).</span><span class="sxs-lookup"><span data-stu-id="35563-182">Second, there is a time-out associated with hello lock and if hello application cannot process hello message before hello lock time-out expires (for example, if hello application crashes), then Service Bus will unlock hello message and make it available toobe received again (essentially performing an [Abandon](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Abandon) operation by default).</span></span>

<span data-ttu-id="35563-183">Vegye figyelembe, hogy ha hello alkalmazás összeomlása után üdvözlőüzenetére feldolgozza, még mielőtt hello [Complete](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Complete) kérelmet adtak ki, üdvözlőüzenetére újra toohello alkalmazás lesz, amikor újraindul.</span><span class="sxs-lookup"><span data-stu-id="35563-183">Note that if hello application crashes after it processes hello message but before hello [Complete](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Complete) request was issued, hello message will be redelivered toohello application when it restarts.</span></span> <span data-ttu-id="35563-184">Ezt gyakran nevezik * legalább egyszer * feldolgozása.</span><span class="sxs-lookup"><span data-stu-id="35563-184">This is often termed *At Least Once * processing.</span></span> <span data-ttu-id="35563-185">Ez azt jelenti, hogy minden üzenet legalább egyszer dolgoz fel, de bizonyos helyzetekben hello a ugyanazon üzenet újbóli kézbesítése is lehet.</span><span class="sxs-lookup"><span data-stu-id="35563-185">This means that each message will be processed at least once but in certain situations hello same message may be redelivered.</span></span> <span data-ttu-id="35563-186">Ha hello forgatókönyvben nem lehetségesek, majd további logikát kell megadni hello alkalmazás toodetect duplikált elemek.</span><span class="sxs-lookup"><span data-stu-id="35563-186">If hello scenario cannot tolerate duplicate processing, then additional logic is required in hello application toodetect duplicates.</span></span> <span data-ttu-id="35563-187">Ez megvalósítható hello alapján [MessageId](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_MessageId) hello üzenet tulajdonságát.</span><span class="sxs-lookup"><span data-stu-id="35563-187">This can be achieved based on hello [MessageId](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_MessageId) property of hello message.</span></span> <span data-ttu-id="35563-188">Ez a tulajdonság értékének hello állandó marad a kézbesítési kísérletek során.</span><span class="sxs-lookup"><span data-stu-id="35563-188">hello value of this property remains constant across delivery attempts.</span></span> <span data-ttu-id="35563-189">Ezt nevezik *pontosan egyszer* feldolgozása.</span><span class="sxs-lookup"><span data-stu-id="35563-189">This is termed *Exactly Once* processing.</span></span>

<span data-ttu-id="35563-190">hello kód itt látható fogadó és feldolgozó hello üzeneteket **PeekLock** módban, amely hello alapértelmezett Ha nincs [ReceiveMode](/dotnet/api/microsoft.servicebus.messaging.receivemode) érték explicit módon valósul meg.</span><span class="sxs-lookup"><span data-stu-id="35563-190">hello code that is shown here receives and processes a message using hello **PeekLock** mode, which is hello default if no [ReceiveMode](/dotnet/api/microsoft.servicebus.messaging.receivemode) value is explicitly provided.</span></span>

```csharp
MessageReceiver receiver = factory.CreateMessageReceiver("DataCollectionQueue");
BrokeredMessage receivedMessage = receiver.Receive();
try
{
    ProcessMessage(receivedMessage);
    receivedMessage.Complete();
}
catch (Exception e)
{
    receivedMessage.Abandon();
}
```

### <a name="use-hello-queue-client"></a><span data-ttu-id="35563-191">Hello várólista-ügyfél használata</span><span class="sxs-lookup"><span data-stu-id="35563-191">Use hello queue client</span></span>
<span data-ttu-id="35563-192">Példák korábbi részében létrehozott hello [MessageSender](/dotnet/api/microsoft.servicebus.messaging.messagesender) és [MessageReceiver](/dotnet/api/microsoft.servicebus.messaging.messagereceiver) objektumok közvetlenül a hello [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory) toosend és az üzenetek fogadásához hello várólistában illetve.</span><span class="sxs-lookup"><span data-stu-id="35563-192">hello examples earlier in this section created [MessageSender](/dotnet/api/microsoft.servicebus.messaging.messagesender) and [MessageReceiver](/dotnet/api/microsoft.servicebus.messaging.messagereceiver) objects directly from hello [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory) toosend and receive messages from hello queue, respectively.</span></span> <span data-ttu-id="35563-193">Egy másik módszert toouse egy [QueueClient](/dotnet/api/microsoft.servicebus.messaging.queueclient) objektum, amely támogatja a műveletek küldésének és fogadásának hozzáadása toomore a speciális funkció, például munkamenetek.</span><span class="sxs-lookup"><span data-stu-id="35563-193">An alternative approach is toouse a [QueueClient](/dotnet/api/microsoft.servicebus.messaging.queueclient) object, which supports both send and receive operations in addition toomore advanced features, such as sessions.</span></span>

```csharp
QueueClient queueClient = factory.CreateQueueClient("DataCollectionQueue");
queueClient.Send(bm);

BrokeredMessage message = queueClient.Receive();

try
{
    ProcessMessage(message);
    message.Complete();
}
catch (Exception e)
{
    message.Abandon();
} 
```

## <a name="next-steps"></a><span data-ttu-id="35563-194">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="35563-194">Next steps</span></span>
<span data-ttu-id="35563-195">Most, hogy megismerte a várólisták hello alapjait, lásd: [alkalmazásokat, amelyek a Service Bus-üzenettémák és előfizetések](service-bus-create-topics-subscriptions.md) toocontinue hello közzétételi/előfizetési képességeket a Service Bus-üzenettémakörök használata az ismertető és előfizetések.</span><span class="sxs-lookup"><span data-stu-id="35563-195">Now that you've learned hello basics of queues, see [Create applications that use Service Bus topics and subscriptions](service-bus-create-topics-subscriptions.md) toocontinue this discussion using hello publish/subscribe capabilities of Service Bus topics and subscriptions.</span></span>

