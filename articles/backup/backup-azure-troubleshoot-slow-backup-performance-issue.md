---
title: "Lassú biztonsági mentési fájlok és mappák, az Azure Backup hibaelhárítása |} Microsoft Docs"
description: "Az Azure Backup teljesítményproblémák okait diagnosztizálása hibaelhárítási útmutatást nyújt"
services: backup
documentationcenter: 
author: genlin
manager: cshepard
editor: 
ms.assetid: e379180a-db13-4e0c-90e4-28e5dd6f5b14
ms.service: backup
ms.workload: storage-backup-recovery
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/13/2017
ms.author: genli
ms.openlocfilehash: 1688846957df3fbf0df747a6cd2a94b481d851b4
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 07/11/2017
---
# <a name="troubleshoot-slow-backup-of-files-and-folders-in-azure-backup"></a><span data-ttu-id="ac064-103">Az Azure Backup-fájlok és -mappák lassú biztonsági mentésének hibaelhárítása</span><span class="sxs-lookup"><span data-stu-id="ac064-103">Troubleshoot slow backup of files and folders in Azure Backup</span></span>
<span data-ttu-id="ac064-104">Ez a cikk nyújt hibaelhárítási útmutatót okának fájlok és mappák biztonsági mentési teljesítménycsökkenést használatakor Azure Backup segítségével.</span><span class="sxs-lookup"><span data-stu-id="ac064-104">This article provides troubleshooting guidance to help you diagnose the cause of slow backup performance for files and folders when you're using Azure Backup.</span></span> <span data-ttu-id="ac064-105">Fájlok biztonsági mentése az Azure Backup szolgáltatás ügynöke használatakor a biztonsági mentési folyamat hosszabb ideig eltarthat.</span><span class="sxs-lookup"><span data-stu-id="ac064-105">When you use the Azure Backup agent to back up files, the backup process might take longer than expected.</span></span> <span data-ttu-id="ac064-106">Ez a késés oka lehet az alábbiak közül:</span><span class="sxs-lookup"><span data-stu-id="ac064-106">This delay might be caused by one or more of the following:</span></span>

* [<span data-ttu-id="ac064-107">Nincsenek szűk keresztmetszetek a számítógépen, amelyek biztonsági mentése van folyamatban.</span><span class="sxs-lookup"><span data-stu-id="ac064-107">There are performance bottlenecks on the computer that’s being backed up.</span></span>](#cause1)
* [<span data-ttu-id="ac064-108">Egy másik folyamat vagy a víruskereső szoftver ütközik az Azure biztonsági mentési folyamat során.</span><span class="sxs-lookup"><span data-stu-id="ac064-108">Another process or antivirus software is interfering with the Azure Backup process.</span></span>](#cause2)
* [<span data-ttu-id="ac064-109">A Backup szolgáltatás ügynökének futása egy Azure virtuális gépen (VM).</span><span class="sxs-lookup"><span data-stu-id="ac064-109">The Backup agent is running on an Azure virtual machine (VM).</span></span>](#cause3)  
* [<span data-ttu-id="ac064-110">Biztonsági mentést készít a fájlok sok (több millió).</span><span class="sxs-lookup"><span data-stu-id="ac064-110">You're backing up a large number (millions) of files.</span></span>](#cause4)

<span data-ttu-id="ac064-111">Mielőtt elkezdené a problémák elhárításához, azt javasoljuk, hogy töltse le és telepítse a [legújabb Azure Backup szolgáltatás ügynökének](http://aka.ms/azurebackup_agent).</span><span class="sxs-lookup"><span data-stu-id="ac064-111">Before you start troubleshooting issues, we recommend that you download and install the [latest Azure Backup agent](http://aka.ms/azurebackup_agent).</span></span> <span data-ttu-id="ac064-112">Gyakori frissítések különböző kapcsolatos problémák megoldása, a szolgáltatások hozzáadása és a teljesítmény javítása a biztonsági mentés Agent biztosítjuk.</span><span class="sxs-lookup"><span data-stu-id="ac064-112">We make frequent updates to the Backup agent to fix various issues, add features, and improve performance.</span></span>

<span data-ttu-id="ac064-113">Emellett ajánlott áttekinteni a [Azure Backup szolgáltatás – gyakori kérdések](backup-azure-backup-faq.md) győződjön meg arról, hogy nem minden a közös konfigurációs problémák tapasztalhatók a.</span><span class="sxs-lookup"><span data-stu-id="ac064-113">We also strongly recommend that you review the [Azure Backup service FAQ](backup-azure-backup-faq.md) to make sure you're not experiencing any of the common configuration issues.</span></span>

[!INCLUDE [support-disclaimer](../../includes/support-disclaimer.md)]

<a id="cause1"></a>

## <a name="cause-performance-bottlenecks-on-the-computer"></a><span data-ttu-id="ac064-114">OK: Szűk keresztmetszetek a számítógépen</span><span class="sxs-lookup"><span data-stu-id="ac064-114">Cause: Performance bottlenecks on the computer</span></span>
<span data-ttu-id="ac064-115">A szűk keresztmetszetek a számítógépen, amely biztonsági mentése van folyamatban késést okozhat.</span><span class="sxs-lookup"><span data-stu-id="ac064-115">Bottlenecks on the computer that's being backed up can cause delays.</span></span> <span data-ttu-id="ac064-116">Például a számítógép képes olvasni vagy írni lemezre vagy küldhet adatokat a hálózaton keresztül a rendelkezésre álló sávszélesség szűk keresztmetszetek okozhat.</span><span class="sxs-lookup"><span data-stu-id="ac064-116">For example, the computer's ability to read or write to disk, or available bandwidth to send data over the network, can cause bottlenecks.</span></span>

<span data-ttu-id="ac064-117">A Windows beépített eszközt nevezett biztosít [Teljesítményfigyelő](https://technet.microsoft.com/magazine/2008.08.pulse.aspx) (Perfmon) a szűk keresztmetszetek észleléséhez.</span><span class="sxs-lookup"><span data-stu-id="ac064-117">Windows provides a built-in tool that's called [Performance Monitor](https://technet.microsoft.com/magazine/2008.08.pulse.aspx) (Perfmon) to detect these bottlenecks.</span></span>

<span data-ttu-id="ac064-118">Íme, néhány teljesítményszámlálók és a tartományt a szűk keresztmetszetek optimális biztonsági másolatok diagnosztizálásához hasznos lehet.</span><span class="sxs-lookup"><span data-stu-id="ac064-118">Here are some performance counters and ranges that can be helpful in diagnosing bottlenecks for optimal backups.</span></span>

| <span data-ttu-id="ac064-119">A számláló</span><span class="sxs-lookup"><span data-stu-id="ac064-119">Counter</span></span> | <span data-ttu-id="ac064-120">status</span><span class="sxs-lookup"><span data-stu-id="ac064-120">Status</span></span> |
| --- | --- |
| <span data-ttu-id="ac064-121">Logikai lemez (fizikai lemez) – üresjárati %</span><span class="sxs-lookup"><span data-stu-id="ac064-121">Logical Disk(Physical Disk)--%idle</span></span> |<span data-ttu-id="ac064-122">• 100 %-os üresjárati 50 %-os üresjárati = kifogástalan</span><span class="sxs-lookup"><span data-stu-id="ac064-122">• 100% idle to 50% idle = Healthy</span></span></br><span data-ttu-id="ac064-123">• 49 % 20 %-át üresjárati üresjárati = figyelmeztetés vagy a figyelő</span><span class="sxs-lookup"><span data-stu-id="ac064-123">• 49% idle to 20% idle = Warning or Monitor</span></span></br><span data-ttu-id="ac064-124">• 19 % 0 % üresjárati üresjárati kritikus vagy kívüli Spec =</span><span class="sxs-lookup"><span data-stu-id="ac064-124">• 19% idle to 0% idle = Critical or Out of Spec</span></span> |
| <span data-ttu-id="ac064-125">Logikai lemez (fizikai lemez) – % Átl.</span><span class="sxs-lookup"><span data-stu-id="ac064-125">Logical Disk(Physical Disk)--%Avg.</span></span> <span data-ttu-id="ac064-126">Lemez mp Olvasás vagy írás</span><span class="sxs-lookup"><span data-stu-id="ac064-126">Disk Sec Read or Write</span></span> |<span data-ttu-id="ac064-127">• 0,015 MS 0,001 ms = kifogástalan</span><span class="sxs-lookup"><span data-stu-id="ac064-127">• 0.001 ms to 0.015 ms  = Healthy</span></span></br><span data-ttu-id="ac064-128">• 0,025 MS 0,015 ms = figyelmeztetés vagy a figyelő</span><span class="sxs-lookup"><span data-stu-id="ac064-128">• 0.015 ms to 0.025 ms = Warning or Monitor</span></span></br><span data-ttu-id="ac064-129">• 0.026 ms vagy kritikus vagy kívüli Spec már =</span><span class="sxs-lookup"><span data-stu-id="ac064-129">• 0.026 ms or longer = Critical or Out of Spec</span></span> |
| <span data-ttu-id="ac064-130">Logikai lemez (fizikai lemez) – Lemezvárólista jelenlegi hossza (az összes példányra)</span><span class="sxs-lookup"><span data-stu-id="ac064-130">Logical Disk(Physical Disk)--Current Disk Queue Length (for all instances)</span></span> |<span data-ttu-id="ac064-131">80 kérelem 6 percnél hosszabb ideig</span><span class="sxs-lookup"><span data-stu-id="ac064-131">80 requests for more than 6 minutes</span></span> |
| <span data-ttu-id="ac064-132">Memória – nem lapozható memória</span><span class="sxs-lookup"><span data-stu-id="ac064-132">Memory--Pool Non Paged Bytes</span></span> |<span data-ttu-id="ac064-133">• Felhasznált készlet 60 %-nál kisebb = kifogástalan</span><span class="sxs-lookup"><span data-stu-id="ac064-133">• Less than 60% of pool consumed = Healthy</span></span><br><span data-ttu-id="ac064-134">• 61 % és 80 %-készlet felhasznált = figyelmeztetés vagy a figyelő</span><span class="sxs-lookup"><span data-stu-id="ac064-134">• 61% to 80% of pool consumed = Warning or Monitor</span></span></br><span data-ttu-id="ac064-135">• Nagyobb, mint a 80 %-készlet felhasznált kritikus vagy kívüli Spec =</span><span class="sxs-lookup"><span data-stu-id="ac064-135">• Greater than 80% pool consumed = Critical or Out of Spec</span></span> |
| <span data-ttu-id="ac064-136">Memória – lapozható készlet mérete bájtban</span><span class="sxs-lookup"><span data-stu-id="ac064-136">Memory--Pool Paged Bytes</span></span> |<span data-ttu-id="ac064-137">• Felhasznált készlet 60 %-nál kisebb = kifogástalan</span><span class="sxs-lookup"><span data-stu-id="ac064-137">• Less than 60% of pool consumed = Healthy</span></span></br><span data-ttu-id="ac064-138">• 61 % és 80 %-készlet felhasznált = figyelmeztetés vagy a figyelő</span><span class="sxs-lookup"><span data-stu-id="ac064-138">• 61% to 80% of pool consumed = Warning or Monitor</span></span></br><span data-ttu-id="ac064-139">• Nagyobb, mint a 80 %-készlet felhasznált kritikus vagy kívüli Spec =</span><span class="sxs-lookup"><span data-stu-id="ac064-139">• Greater than 80% pool consumed = Critical or Out of Spec</span></span> |
| <span data-ttu-id="ac064-140">Memória – rendelkezésre álló hely MB-ban</span><span class="sxs-lookup"><span data-stu-id="ac064-140">Memory--Available Megabytes</span></span> |<span data-ttu-id="ac064-141">• 50 %-a rendelkezésre álló szabad memória vagy további = kifogástalan</span><span class="sxs-lookup"><span data-stu-id="ac064-141">• 50% of free memory available or more = Healthy</span></span></br><span data-ttu-id="ac064-142">• 25 %-a rendelkezésre álló szabad memória = figyelője</span><span class="sxs-lookup"><span data-stu-id="ac064-142">• 25% of free memory available = Monitor</span></span></br><span data-ttu-id="ac064-143">• 10 %-a rendelkezésre álló szabad memória = figyelmeztetés</span><span class="sxs-lookup"><span data-stu-id="ac064-143">• 10% of free memory available = Warning</span></span></br><span data-ttu-id="ac064-144">• Kevesebb mint 100 MB vagy 5 %-a rendelkezésre álló szabad memória kritikus vagy kívüli Spec =</span><span class="sxs-lookup"><span data-stu-id="ac064-144">• Less than 100 MB or 5% of free memory available = Critical or Out of Spec</span></span> |
| <span data-ttu-id="ac064-145">Processzor –\%processzor kihasználtsága ()</span><span class="sxs-lookup"><span data-stu-id="ac064-145">Processor--\%Processor Time (all instances)</span></span> |<span data-ttu-id="ac064-146">• 60 %-nál kisebb felhasznált = kifogástalan</span><span class="sxs-lookup"><span data-stu-id="ac064-146">• Less than 60% consumed = Healthy</span></span></br><span data-ttu-id="ac064-147">• 61 – 90 %-felhasznált = figyelő vagy figyelmeztetés</span><span class="sxs-lookup"><span data-stu-id="ac064-147">• 61% to 90% consumed = Monitor or Caution</span></span></br><span data-ttu-id="ac064-148">• 91-100 % felhasznált kritikus =</span><span class="sxs-lookup"><span data-stu-id="ac064-148">• 91% to 100% consumed = Critical</span></span> |

> [!NOTE]
> <span data-ttu-id="ac064-149">Ha azt állapítja meg, hogy az infrastruktúra-e a probléma oka, azt javasoljuk, hogy a lemezek, rendszeresen a jobb teljesítmény töredezettségmentesítése.</span><span class="sxs-lookup"><span data-stu-id="ac064-149">If you determine that the infrastructure is the culprit, we recommend that you defragment the disks regularly for better performance.</span></span>
>
>

<a id="cause2"></a>

## <a name="cause-another-process-or-antivirus-software-interfering-with-azure-backup"></a><span data-ttu-id="ac064-150">OK: Egy másik folyamat vagy az Azure Backup zavarja, a víruskereső szoftver</span><span class="sxs-lookup"><span data-stu-id="ac064-150">Cause: Another process or antivirus software interfering with Azure Backup</span></span>
<span data-ttu-id="ac064-151">Ahol más folyamatok, a Windows rendszerben az Azure Backup szolgáltatás ügynökének folyamatánál teljesítményét negatívan befolyásolt több példányt is láttuk.</span><span class="sxs-lookup"><span data-stu-id="ac064-151">We've seen several instances where other processes in the Windows system have negatively affected performance of the Azure Backup agent process.</span></span> <span data-ttu-id="ac064-152">Például ha használja az Azure Backup szolgáltatás ügynöke egy másik program adatok biztonsági mentéséhez, vagy ha víruskereső fut, és zárolta a fájlok biztonsági mentését, az a többszörös zárolja a fájlok okozhat versengés.</span><span class="sxs-lookup"><span data-stu-id="ac064-152">For example, if you use both the Azure Backup agent and another program to back up data, or if antivirus software is running and has a lock on files to be backed up, the multiple locks on files might cause contention.</span></span> <span data-ttu-id="ac064-153">Ebben a helyzetben a biztonsági mentés sikertelen lehet, vagy a feladat a vártnál hosszabb ideig is tarthat.</span><span class="sxs-lookup"><span data-stu-id="ac064-153">In this situation, the backup might fail, or the job might take longer than expected.</span></span>

<span data-ttu-id="ac064-154">A legjobb javasoljuk ebben a forgatókönyvben, megtekintéséhez, hogy megváltozik-e a biztonsági mentési időt, hogy az Azure Backup szolgáltatás ügynöke más biztonsági mentési program kikapcsolása.</span><span class="sxs-lookup"><span data-stu-id="ac064-154">The best recommendation in this scenario is to turn off the other backup program to see whether the backup time for the Azure Backup agent changes.</span></span> <span data-ttu-id="ac064-155">Általában annak biztosítása, hogy több biztonsági mentési feladatok nem futnak egyszerre is használhatók, nehogy azok egymással.</span><span class="sxs-lookup"><span data-stu-id="ac064-155">Usually, making sure that multiple backup jobs are not running at the same time is sufficient to prevent them from affecting each other.</span></span>

<span data-ttu-id="ac064-156">A víruskereső programok azt javasoljuk, hogy a következő fájlok és helyek kizárása:</span><span class="sxs-lookup"><span data-stu-id="ac064-156">For antivirus programs, we recommend that you exclude the following files and locations:</span></span>

* <span data-ttu-id="ac064-157">C:\Program Files\Microsoft Azure Recovery Services Agent\bin\cbengine.exe folyamatként</span><span class="sxs-lookup"><span data-stu-id="ac064-157">C:\Program Files\Microsoft Azure Recovery Services Agent\bin\cbengine.exe as a process</span></span>
* <span data-ttu-id="ac064-158">C:\Program Files\Microsoft Azure Recovery Services Agent\ mappák</span><span class="sxs-lookup"><span data-stu-id="ac064-158">C:\Program Files\Microsoft Azure Recovery Services Agent\ folders</span></span>
* <span data-ttu-id="ac064-159">Ideiglenes helyre (Ha nem használja a szokásos helyre)</span><span class="sxs-lookup"><span data-stu-id="ac064-159">Scratch location (if you're not using the standard location)</span></span>

<a id="cause3"></a>

## <a name="cause-backup-agent-running-on-an-azure-virtual-machine"></a><span data-ttu-id="ac064-160">OK: Egy Azure virtuális gépen futó Backup szolgáltatás ügynökének</span><span class="sxs-lookup"><span data-stu-id="ac064-160">Cause: Backup agent running on an Azure virtual machine</span></span>
<span data-ttu-id="ac064-161">Ha a virtuális gép futtatja a biztonsági mentési ügynök, teljesítmény lesz lassabb, mint ha is futtat, a fizikai gépen.</span><span class="sxs-lookup"><span data-stu-id="ac064-161">If you're running the Backup agent on a VM, performance will be slower than when you run it on a physical machine.</span></span> <span data-ttu-id="ac064-162">Ez egy várható üzenet, IOPS korlátozásai miatt.</span><span class="sxs-lookup"><span data-stu-id="ac064-162">This is expected due to IOPS limitations.</span></span>  <span data-ttu-id="ac064-163">A teljesítmény azonban a adatok meghajtókat, amelyek biztonsági mentése folyamatban prémium szintű Azure Storage váltásával is optimalizálhatja.</span><span class="sxs-lookup"><span data-stu-id="ac064-163">However, you can optimize the performance by switching the data drives that are being backed up to Azure Premium Storage.</span></span> <span data-ttu-id="ac064-164">A probléma megoldásán dolgozunk, és a javítás egy későbbi kiadásban elérhető lesz.</span><span class="sxs-lookup"><span data-stu-id="ac064-164">We're working on fixing this issue, and the fix will be available in a future release.</span></span>

<a id="cause4"></a>

## <a name="cause-backing-up-a-large-number-millions-of-files"></a><span data-ttu-id="ac064-165">OK: Biztonsági másolatának fájljait sok (több millió)</span><span class="sxs-lookup"><span data-stu-id="ac064-165">Cause: Backing up a large number (millions) of files</span></span>
<span data-ttu-id="ac064-166">Nagy mennyiségű adat áthelyezését-nál kisebb mennyiségű adat áthelyezését hosszabb ideig tart.</span><span class="sxs-lookup"><span data-stu-id="ac064-166">Moving a large volume of data will take longer than moving a smaller volume of data.</span></span> <span data-ttu-id="ac064-167">Bizonyos esetekben nem csupán az adatokat, hanem a fájlok vagy mappák száma méretétől biztonságimásolat-készítési időpont vezethető vissza.</span><span class="sxs-lookup"><span data-stu-id="ac064-167">In some cases, backup time is related to not only the size of the data, but also the number of files or folders.</span></span> <span data-ttu-id="ac064-168">Ez akkor különösen igaz olyan esetben, ha több millió kis fájlt (néhány kilobájtostól néhány bájtok) biztonsági mentése van folyamatban.</span><span class="sxs-lookup"><span data-stu-id="ac064-168">This is especially true when millions of small files (a few bytes to a few kilobytes) are being backed up.</span></span>

<span data-ttu-id="ac064-169">Ez akkor fordul elő, mert az adatok biztonsági mentése és áthelyezni, ha az Azure-ba, amíg Azure egyidejűleg katalogizálni a fájlokat.</span><span class="sxs-lookup"><span data-stu-id="ac064-169">This behavior occurs because while you're backing up the data and moving it to Azure, Azure is simultaneously cataloging your files.</span></span> <span data-ttu-id="ac064-170">Bizonyos ritka esetekben a katalógus művelet hosszabb ideig is tarthat.</span><span class="sxs-lookup"><span data-stu-id="ac064-170">In some rare scenarios, the catalog operation might take longer than expected.</span></span>

<span data-ttu-id="ac064-171">A következő mutatók segítségére lehetnek a szűk keresztmetszetek ismertetése, és ennek megfelelően működni a következő lépéseket:</span><span class="sxs-lookup"><span data-stu-id="ac064-171">The following indicators can help you understand the bottleneck and accordingly work on the next steps:</span></span>

* <span data-ttu-id="ac064-172">**Felhasználói felület folyamatban láthatók az adatátvitel**.</span><span class="sxs-lookup"><span data-stu-id="ac064-172">**UI is showing progress for the data transfer**.</span></span> <span data-ttu-id="ac064-173">A továbbra is adatátvitel.</span><span class="sxs-lookup"><span data-stu-id="ac064-173">The data is still being transferred.</span></span> <span data-ttu-id="ac064-174">A hálózati sávszélesség vagy adatok mérete okozza késést.</span><span class="sxs-lookup"><span data-stu-id="ac064-174">The network bandwidth or the size of data might be causing delays.</span></span>
* <span data-ttu-id="ac064-175">**Felhasználói felület nem látható folyamatban van az adatok átvitele**.</span><span class="sxs-lookup"><span data-stu-id="ac064-175">**UI is not showing progress for the data transfer**.</span></span> <span data-ttu-id="ac064-176">Nyissa meg a naplók helye: C:\Microsoft Azure Recovery Services Agent\Temp, és ellenőrizze a naplókat a FileProvider::EndData bejegyzést.</span><span class="sxs-lookup"><span data-stu-id="ac064-176">Open the logs located at C:\Microsoft Azure Recovery Services Agent\Temp, and then check for the FileProvider::EndData entry in the logs.</span></span> <span data-ttu-id="ac064-177">Ez a bejegyzés azt jelzi, hogy, hogy az adatok átvitele befejeződött, és a katalógus művelet történik.</span><span class="sxs-lookup"><span data-stu-id="ac064-177">This entry signifies that the data transfer finished and the catalog operation is happening.</span></span> <span data-ttu-id="ac064-178">A biztonsági mentési feladat nem szakítható meg.</span><span class="sxs-lookup"><span data-stu-id="ac064-178">Don't cancel the backup jobs.</span></span> <span data-ttu-id="ac064-179">Ehelyett Várjon, amíg már kissé a katalógus művelet befejezéséhez.</span><span class="sxs-lookup"><span data-stu-id="ac064-179">Instead, wait a little longer for the catalog operation to finish.</span></span> <span data-ttu-id="ac064-180">Ha a probléma továbbra is fennáll, forduljon a [az Azure támogatási](https://portal.azure.com/#create/Microsoft.Support).</span><span class="sxs-lookup"><span data-stu-id="ac064-180">If the problem persists, contact [Azure support](https://portal.azure.com/#create/Microsoft.Support).</span></span>
