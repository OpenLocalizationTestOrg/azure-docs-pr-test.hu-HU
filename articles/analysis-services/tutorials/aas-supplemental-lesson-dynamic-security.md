---
title: "Azure Analysis Services oktatóanyag – kiegészítő lecke: Dinamikus biztonság | Microsoft Docs"
description: "Ismerteti a dinamikus biztonság sorszűrőkkel való használatát az Azure Analysis Services oktatóanyagban."
services: analysis-services
documentationcenter: 
author: minewiskan
manager: erikre
editor: 
tags: 
ms.assetid: 
ms.service: analysis-services
ms.devlang: NA
ms.topic: get-started-article
ms.tgt_pltfrm: NA
ms.workload: na
ms.date: 05/26/2017
ms.author: owend
ms.openlocfilehash: 4e97a558ae1a2601b5275a73164b483351f03857
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 08/03/2017
---
# <a name="supplemental-lesson---dynamic-security"></a><span data-ttu-id="ee5fb-103">Kiegészítő lecke – Dinamikus biztonság</span><span class="sxs-lookup"><span data-stu-id="ee5fb-103">Supplemental lesson - Dynamic security</span></span>

[!INCLUDE[analysis-services-appliesto-aas-sql2017-later](../../../includes/analysis-services-appliesto-aas-sql2017-later.md)]

<span data-ttu-id="ee5fb-104">Ebben a kiegészítő leckében további, dinamikus biztonságot megvalósító szerepkört hoz létre.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-104">In this supplemental lesson, you create an additional role that implements dynamic security.</span></span> <span data-ttu-id="ee5fb-105">A dinamikus biztonság sorszintű biztonságot biztosít az aktuálisan bejelentkezett felhasználó felhasználóneve vagy bejelentkezési azonosítója alapján.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-105">Dynamic security provides row-level security based on the user name or login id of the user currently logged on.</span></span> 
  
<span data-ttu-id="ee5fb-106">A dinamikus biztonság megvalósítása érdekében hozzáadhat egy táblázatot az azon felhasználók felhasználóneveit tartalmazó modellhez, akik csatlakozhatnak a modellhez, és kereshetnek a modell objektumai és adatai között.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-106">To implement dynamic security, you add a table to your model containing the user names of those users that can connect to the model and browse model objects and data.</span></span> <span data-ttu-id="ee5fb-107">Az ezen oktatóanyag segítségével létrehozott modell az Adventure Works környezetében található; azonban a lecke elvégzéséhez a saját tartományából származó felhasználókat tartalmazó táblázatot kell hozzáadnia.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-107">The model you create using this tutorial is in the context of Adventure Works; however, to complete this lesson, you must add a table containing users from your own domain.</span></span> <span data-ttu-id="ee5fb-108">Nincs szükség a hozzáadott felhasználónevekhez tartozó jelszavakra.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-108">You do not need the passwords for the user names that are added.</span></span> <span data-ttu-id="ee5fb-109">EmployeeSecurity tábla létrehozásához, amely a saját tartományából tartalmaz néhány felhasználót példaként, használhatja a Beillesztés funkciót, amellyel alkalmazotti adatokat illeszthet be egy Excel-táblázatból.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-109">To create an EmployeeSecurity table, with a small sample of users from your own domain, you use the Paste feature, pasting employee data from an Excel spreadsheet.</span></span> <span data-ttu-id="ee5fb-110">A valós forgatókönyvekben a felhasználóneveket tartalmazó táblázat általában egy adatforrásként szolgáló valódi adatbázisból származna, például egy valódi DimEmployee táblából.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-110">In a real-world scenario, the table containing user names would typically be a table from an actual database as a data source; for example, a real DimEmployee table.</span></span>  
  
<span data-ttu-id="ee5fb-111">A dinamikus biztonság beállításához két DAX-függvényt használhat: [USERNAME függvény (DAX)](http://msdn.microsoft.com/22dddc4b-1648-4c89-8c93-f1151162b93f) és [LOOKUPVALUE függvény (DAX)](http://msdn.microsoft.com/73a51c4d-131c-4c33-a139-b1342d10caab).</span><span class="sxs-lookup"><span data-stu-id="ee5fb-111">To implement dynamic security, you use two DAX functions: [USERNAME Function (DAX)](http://msdn.microsoft.com/22dddc4b-1648-4c89-8c93-f1151162b93f) and [LOOKUPVALUE Function (DAX)](http://msdn.microsoft.com/73a51c4d-131c-4c33-a139-b1342d10caab).</span></span> <span data-ttu-id="ee5fb-112">Ezek a függvények a sorszűrő képletben alkalmazva egy új szerepkörben vannak meghatározva.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-112">These functions, applied in a row filter formula, are defined in a new role.</span></span> <span data-ttu-id="ee5fb-113">A LOOKUPVALUE függvény használatával a képlet az EmployeeSecurity táblából ad meg egy értéket.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-113">By using the LOOKUPVALUE function, the formula specifies a value from the EmployeeSecurity table.</span></span> <span data-ttu-id="ee5fb-114">Ezután a képlet továbbadja az értéket a USERNAME függvénynek, amely megadja az ehhez a szerepkörhöz tartozó, bejelentkezett felhasználó felhasználónevét.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-114">The formula then passes that value to the USERNAME function, which specifies the user name of the user logged on belongs to this role.</span></span> <span data-ttu-id="ee5fb-115">A felhasználó ezután csak a szerepkör sorszűrői által megadott adatokat böngészheti.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-115">The user can then browse only data specified by the role’s row filters.</span></span> <span data-ttu-id="ee5fb-116">Ebben a forgatókönyvben megadhatja, hogy az értékesítési alkalmazottak csak olyan értékesítési területek internetes értékesítési adatai között kereshetnek, amelyben tagok.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-116">In this scenario, you specify that sales employees can only browse Internet sales data for the sales territories in which they are a member.</span></span>  
  
<span data-ttu-id="ee5fb-117">Azok a feladatok, amelyek erre az Adventure Work táblázatos modellezési forgatókönyvre jellemzők, de nem feltétlenül vonatkoznak egy valós forgatókönyvre, ilyenként meg vannak jelölve.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-117">Those tasks that are unique to this Adventure Works tabular model scenario, but would not necessarily apply to a real-world scenario are identified as such.</span></span> <span data-ttu-id="ee5fb-118">Mindegyik feladat a feladat célját leíró, kiegészítő információkat is tartalmaz.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-118">Each task includes additional information describing the purpose of the task.</span></span>  
  
<span data-ttu-id="ee5fb-119">A lecke elvégzésének várható időtartama: **30 perc**.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-119">Estimated time to complete this lesson: **30 minutes**</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="ee5fb-120">Előfeltételek</span><span class="sxs-lookup"><span data-stu-id="ee5fb-120">Prerequisites</span></span>  
<span data-ttu-id="ee5fb-121">Ez a kiegészítőlecke-témakör a táblázatos modellezésről szóló oktatóanyag része, amelyet sorrendben kell elvégezni.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-121">This supplemental lesson topic is part of a tabular modeling tutorial, which should be completed in order.</span></span> <span data-ttu-id="ee5fb-122">Az ebben a kiegészítő leckében található feladatok végrehajtása előtt be kell fejeznie minden előző leckét.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-122">Before performing the tasks in this supplemental lesson, you should have completed all previous lessons.</span></span>  
  
## <a name="add-the-dimsalesterritory-table-to-the-aw-internet-sales-tabular-model-project"></a><span data-ttu-id="ee5fb-123">A DimSalesTerritory tábla hozzáadása az AW internetes értékesítés táblázatos modellprojekthez</span><span class="sxs-lookup"><span data-stu-id="ee5fb-123">Add the DimSalesTerritory table to the AW Internet Sales Tabular Model Project</span></span>  
<span data-ttu-id="ee5fb-124">A dinamikus biztonság beállításához ehhez az Adventure Works-forgatókönyvhöz való hozzá kell adnia két további táblázatot a modellhez.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-124">To implement dynamic security for this Adventure Works scenario, you must add two additional tables to your model.</span></span> <span data-ttu-id="ee5fb-125">Az első hozzáadott táblázat a DimSalesTerritory (Értékesítési területként) ugyanabból az AdventureWorksDW-adatbázisból.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-125">The first table you add is DimSalesTerritory (as Sales Territory) from the same AdventureWorksDW database.</span></span> <span data-ttu-id="ee5fb-126">Később sorszűrőt alkalmazhat a SalesTerritory táblára, amely meghatározza azokat az adatokat, amelyeket a bejelentkezett felhasználó kereshet.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-126">You later apply a row filter to the SalesTerritory table that defines the particular data the logged on user can browse.</span></span>  
  
#### <a name="to-add-the-dimsalesterritory-table"></a><span data-ttu-id="ee5fb-127">DimSalesTerritory tábla hozzáadása</span><span class="sxs-lookup"><span data-stu-id="ee5fb-127">To add the DimSalesTerritory table</span></span>  
  
1.  <span data-ttu-id="ee5fb-128">A Táblázatos modelltallózó **Adatforrások** szakaszában kattintson a jobb gombbal a kapcsolatra, majd kattintson az **Új táblázatok importálása** gombra.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-128">In Tabular Model Explorer > **Data Sources**, right-click your connection, and then click **Import New Tables**.</span></span>  

    <span data-ttu-id="ee5fb-129">Ha megjelenik a Megszemélyesítési hitelesítő adatok párbeszédpanel, írja be a 2., Adatok hozzáadása című leckében használt megszemélyesítési hitelesítő adatokat.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-129">If the Impersonation Credentials dialog box appears, type the impersonation credentials you used in Lesson 2: Add Data.</span></span>
  
2.  <span data-ttu-id="ee5fb-130">A Kezelőben válassza a **DimSalesTerritory** táblát, majd kattintson az **OK** lehetőségre.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-130">In Navigator, select the **DimSalesTerritory** table, and then click **OK**.</span></span>    
  
3.  <span data-ttu-id="ee5fb-131">A Lekérdezésszerkesztőben kattintson a **DimSalesTerritory** lekérdezésre, majd távolítsa el a **SalesTerritoryAlternateKey** oszlopot.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-131">In Query Editor, click the **DimSalesTerritory** query, and then remove **SalesTerritoryAlternateKey** column.</span></span>  
  
7.  <span data-ttu-id="ee5fb-132">Kattintson az **Importálás** gombra.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-132">Click **Import**.</span></span>  
  
    <span data-ttu-id="ee5fb-133">Ezzel az új táblázat hozzáadódik a modell munkaterületéhez.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-133">The new table is added to the model workspace.</span></span> <span data-ttu-id="ee5fb-134">A forrásként szolgáló DimSalesTerritory táblából származó objektumok és adatok ezután importálva lesznek az AW internetes értékesítés táblázatos modellbe.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-134">Objects and data from the source DimSalesTerritory table are then imported into your AW Internet Sales Tabular Model.</span></span>  
  
9. <span data-ttu-id="ee5fb-135">A táblázat sikeres importálása után kattintson a **Bezárás** gombra.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-135">After the table has been imported successfully, click **Close**.</span></span>  

## <a name="add-a-table-with-user-name-data"></a><span data-ttu-id="ee5fb-136">A felhasználónevekre vonatkozó adatokat tartalmazó táblázat hozzáadása</span><span class="sxs-lookup"><span data-stu-id="ee5fb-136">Add a table with user name data</span></span>  
<span data-ttu-id="ee5fb-137">Az AdventureWorksDW-mintaadatbázisban található DimEmployee tábla az AdventureWorks tartomány felhasználóit tartalmazza.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-137">The DimEmployee table in the AdventureWorksDW sample database contains users from the AdventureWorks domain.</span></span> <span data-ttu-id="ee5fb-138">Ezek a felhasználónevek nem léteznek a saját környezetében.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-138">Those user names do not exist in your own environment.</span></span> <span data-ttu-id="ee5fb-139">A modellben létre kell hoznia egy táblázatot, amely a szervezet aktuális felhasználói közül tartalmaz néhányat példaként (legalább hármat).</span><span class="sxs-lookup"><span data-stu-id="ee5fb-139">You must create a table in your model that contains a small sample (at least three) of actual users from your organization.</span></span> <span data-ttu-id="ee5fb-140">Ezután tagként kell hozzáadnia ezeket a felhasználókat az új szerepkörhöz.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-140">You then add these users as members to the new role.</span></span> <span data-ttu-id="ee5fb-141">Nincs szükség a hozzáadott minta-felhasználónevekhez tartozó jelszavakra, de szükség van létező, a saját környezetéből származó Windows-felhasználónevekre.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-141">You do not need the passwords for the sample user names, but you do need actual Windows user names from your own domain.</span></span>  
  
#### <a name="to-add-an-employeesecurity-table"></a><span data-ttu-id="ee5fb-142">EmployeeSecurity tábla hozzáadása</span><span class="sxs-lookup"><span data-stu-id="ee5fb-142">To add an EmployeeSecurity table</span></span>  
  
1.  <span data-ttu-id="ee5fb-143">Nyissa meg a Microsoft Excelt, és hozzon létre egy munkalapot.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-143">Open Microsoft Excel, creating a worksheet.</span></span>  
  
2.  <span data-ttu-id="ee5fb-144">Másolja le a következő táblázatot a fejlécsorral együtt, majd illessze be a munkalapra.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-144">Copy the following table, including the header row, and then paste it into the worksheet.</span></span>  

    ```
      |EmployeeId|SalesTerritoryId|FirstName|LastName|LoginId|  
      |---------------|----------------------|--------------|-------------|------------|  
      |1|2|<user first name>|<user last name>|\<domain\username>|  
      |1|3|<user first name>|<user last name>|\<domain\username>|  
      |2|4|<user first name>|<user last name>|\<domain\username>|  
      |3|5|<user first name>|<user last name>|\<domain\username>|  
    ```

3.  <span data-ttu-id="ee5fb-145">Cserélje ki az utónevet, a vezetéknevet és a tartomány/felhasználónevet a szervezet három felhasználójának nevére és bejelentkezési azonosítójára.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-145">Replace the first name, last name, and domain\username with the names and login ids of three users in your organization.</span></span> <span data-ttu-id="ee5fb-146">Helyezze ugyanazt a felhasználót az EmployeeId 1 első két sorába, ezzel jelezve, hogy a felhasználó több értékesítési területhez tartozik.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-146">Put the same user on the first two rows, for EmployeeId 1, showing this user belongs to more than one sales territory.</span></span> <span data-ttu-id="ee5fb-147">Az EmployeeId és a SalesTerritoryId mezőket ne módosítsa.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-147">Leave the EmployeeId and SalesTerritoryId fields as they are.</span></span>  
  
4.  <span data-ttu-id="ee5fb-148">Mentse a munkalapot **SampleEmployee** néven.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-148">Save the worksheet as **SampleEmployee**.</span></span>  
  
5.  <span data-ttu-id="ee5fb-149">A munkalapon válassza ki az alkalmazottak adatait tartalmazó összes cellát, beleértve a fejléceket is, majd kattintson a jobb gombbal a kiválasztott adatokra, és kattintson a **Másolás** gombra.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-149">In the worksheet, select all the cells with employee data, including the headers, then right-click the selected data, and then click **Copy**.</span></span>  
  
6.  <span data-ttu-id="ee5fb-150">Az SSDT-ben kattintson a **Szerkesztés** menüre, majd a **Beillesztés** elemre.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-150">In SSDT, click the **Edit** menu, and then click **Paste**.</span></span>  
  
    <span data-ttu-id="ee5fb-151">Ha a Beillesztés gomb inaktív, kattintson bármely táblázat bármely oszlopába a modelltervező ablakban, majd próbálja meg újra.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-151">If Paste is grayed out, click any column in any table in the model designer window, and try again.</span></span>  
  
7.  <span data-ttu-id="ee5fb-152">A **Beillesztés villámnézete** párbeszédpanel **Táblázat neve** részbe írja be az **EmployeeSecurity** kifejezést.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-152">In the **Paste Preview** dialog box, in **Table Name**, type **EmployeeSecurity**.</span></span>  
  
8.  <span data-ttu-id="ee5fb-153">A **Beillesztésre váró adatok** résznél ellenőrizze, hogy az adatok tartalmazzák-e az összes felhasználói adatot és fejlécet a SampleEmployee munkalapról.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-153">In **Data to be pasted**, verify the data includes all the user data and headers from the SampleEmployee worksheet.</span></span>  
  
9. <span data-ttu-id="ee5fb-154">Ellenőrizze, hogy az **Első sor elemeinek használata oszlopfejlécként** be van-e jelölve, majd kattintson az **OK** gombra.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-154">Verify **Use first row as column headers** is checked, and then click **Ok**.</span></span>  
  
    <span data-ttu-id="ee5fb-155">Létrejön egy EmployeeSecurity nevű, új tábla, amely a SampleEmployee munkalapról másolt alkalmazotti adatokat tartalmazza.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-155">A new table named EmployeeSecurity with employee data copied from the SampleEmployee worksheet is created.</span></span>  
  
## <a name="create-relationships-between-factinternetsales-dimgeography-and-dimsalesterritory-table"></a><span data-ttu-id="ee5fb-156">Kapcsolatok létrehozása a FactInternetSales, a DimGeography és a DimSalesTerritory táblák között</span><span class="sxs-lookup"><span data-stu-id="ee5fb-156">Create relationships between FactInternetSales, DimGeography, and DimSalesTerritory table</span></span>  
<span data-ttu-id="ee5fb-157">A FactInternetSales, a DimGeography és a DimSalesTerritory táblák mindegyike tartalmaz egy közös SalesTerritoryId nevű oszlopot.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-157">The FactInternetSales, DimGeography, and DimSalesTerritory table all contain a common column, SalesTerritoryId.</span></span> <span data-ttu-id="ee5fb-158">A DimSalesTerritory tábla SalesTerritoryId oszlopa különböző azonosítóval rendelkező értékeket tartalmaz minden értékesítési területhez.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-158">The SalesTerritoryId column in the DimSalesTerritory table contains values with a different Id for each sales territory.</span></span>  
  
#### <a name="to-create-relationships-between-the-factinternetsales-dimgeography-and-the-dimsalesterritory-table"></a><span data-ttu-id="ee5fb-159">Kapcsolatok létrehozásának módja a FactInternetSales, a DimGeography és a DimSalesTerritory táblázat között</span><span class="sxs-lookup"><span data-stu-id="ee5fb-159">To create relationships between the FactInternetSales, DimGeography, and the DimSalesTerritory table</span></span>  
  
1.  <span data-ttu-id="ee5fb-160">A Diagramnézetben a **DimGeography** táblában kattintson a **SalesTerritoryId** oszlopra, és a gombot lenyomva húzza a mutatót a **DimSalesTerritory** tábla **SalesTerritoryId** oszlopára, majd engedje el a gombot.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-160">In Diagram View, in the **DimGeography** table, click, and hold on the **SalesTerritoryId** column, then drag the cursor to the **SalesTerritoryId** column in the **DimSalesTerritory** table, and then release.</span></span>  
  
2.  <span data-ttu-id="ee5fb-161">A **FactInternetSales** táblában kattintson a **SalesTerritoryId** oszlopra, és a gombot lenyomva húzza a mutatót a **DimSalesTerritory** tábla **SalesTerritoryId** oszlopára, majd engedje el a gombot.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-161">In the **FactInternetSales** table, click, and hold on the **SalesTerritoryId** column, then drag the cursor to the **SalesTerritoryId** column in the **DimSalesTerritory** table, and then release.</span></span>  
  
    <span data-ttu-id="ee5fb-162">Vegye észre, hogy a kapcsolat Aktív tulajdonsága Hamis, ami inaktívat jelent.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-162">Notice the Active property for this relationship is False, meaning it's inactive.</span></span> <span data-ttu-id="ee5fb-163">A FactInternetSales tábla már rendelkezik egy másik aktív kapcsolattal.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-163">The FactInternetSales table already has another active relationship.</span></span>  
  
## <a name="hide-the-employeesecurity-table-from-client-applications"></a><span data-ttu-id="ee5fb-164">Az EmployeeSecurity tábla elrejtése az ügyfélalkalmazásokból</span><span class="sxs-lookup"><span data-stu-id="ee5fb-164">Hide the EmployeeSecurity Table from client applications</span></span>  
<span data-ttu-id="ee5fb-165">Ebben a feladatban elrejtheti az EmployeeSecurity táblát, ezzel megakadályozva, hogy az megjelenjen az ügyfélalkalmazás mezőlistájában.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-165">In this task, you hide the EmployeeSecurity table, keeping it from appearing in a client application’s field list.</span></span> <span data-ttu-id="ee5fb-166">Ne feledje, hogy a táblázat elrejtése nem nyújt a táblázat számára védelmet.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-166">Keep in mind that hiding a table does not secure it.</span></span> <span data-ttu-id="ee5fb-167">A felhasználók továbbra is lekérdezhetik az EmployeeSecurity tábla adatait, ha tisztában vannak annak módjával.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-167">Users can still query EmployeeSecurity table data if they know how.</span></span> <span data-ttu-id="ee5fb-168">Az EmployeeSecurity tábla adatainak védelméhez, azaz annak megakadályozásához, hogy a felhasználók adatokat kérdezhessenek le a táblázatból, egy későbbi feladatban szűrőt alkalmazhat.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-168">To secure the EmployeeSecurity table data, preventing users from being able to query any of its data, you apply a filter in a later task.</span></span>  
  
#### <a name="to-hide-the-employeesecurity-table-from-client-applications"></a><span data-ttu-id="ee5fb-169">Az EmployeeSecurity tábla elrejtése az ügyfélalkalmazásokból</span><span class="sxs-lookup"><span data-stu-id="ee5fb-169">To hide the EmployeeSecurity table from client applications</span></span>  
  
-   <span data-ttu-id="ee5fb-170">A modelltervező Diagramnézetében kattintson a jobb gombbal az **Alkalmazott** táblázatfejlécére, majd kattintson az **Elrejtés az ügyféleszközök elől** lehetőségre.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-170">In the model designer, in Diagram View, right-click the **Employee** table heading, and then click **Hide from Client Tools**.</span></span>  
  
## <a name="create-a-sales-employees-by-territory-user-role"></a><span data-ttu-id="ee5fb-171">Területenkénti értékesítési alkalmazottak felhasználói szerepkör létrehozása</span><span class="sxs-lookup"><span data-stu-id="ee5fb-171">Create a Sales Employees by Territory user role</span></span>  
<span data-ttu-id="ee5fb-172">Ebben a feladatban egy felhasználói szerepkört hozhat létre.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-172">In this task, you create a user role.</span></span> <span data-ttu-id="ee5fb-173">Ez a szerepkör egy olyan sorszűrőt tartalmaz, amely meghatározza, hogy a DimSalesTerritory tábla mely sorait láthatják a felhasználók.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-173">This role includes a row filter defining which rows of the DimSalesTerritory table are visible to users.</span></span> <span data-ttu-id="ee5fb-174">A szűrő ezután alkalmazva lesz az egy-a-többhöz típusú kapcsolati irányban minden egyéb, a DimSalesTerritoryhoz kapcsolódó táblázathoz.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-174">The filter is then applied in the one-to-many relationship direction to all other tables related to DimSalesTerritory.</span></span> <span data-ttu-id="ee5fb-175">Egy olyan szűrőt is alkalmazhat, amely az egész EmployeeSecurity táblát lekérdezhetetlenné teszi azon felhasználók számára, akik tagjai a szerepkörnek.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-175">You also apply a filter that secures the entire EmployeeSecurity table from being queryable by any user that is a member of the role.</span></span>  
  
> [!NOTE]  
> <span data-ttu-id="ee5fb-176">Az ebben a leckében létrehozott Területenkénti értékesítési alkalmazottak szerepkör azt a korlátozást tartalmazza, hogy a tagok csak arról az értékesítési területről kereshetnek (vagy kérdezhetnek le) értékesítési adatokat, amelybe tartoznak.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-176">The Sales Employees by Territory role you create in this lesson restricts members to browse (or query) only sales data for the sales territory to which they belong.</span></span> <span data-ttu-id="ee5fb-177">Ha olyan felhasználót ad hozzá tagként a Területenkénti értékesítési alkalmazottak szerepkörhöz, aki már tagja egy, a [11. lecke: Szerepkörök létrehozása](../tutorials/aas-lesson-11-create-roles.md) részben létrehozott szerepkörnek, akkor az engedélyek kombinációját kapja.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-177">If you add a user as a member to the Sales Employees by Territory role that also exists as a member in a role created in [Lesson 11: Create Roles](../tutorials/aas-lesson-11-create-roles.md), you get a combination of permissions.</span></span> <span data-ttu-id="ee5fb-178">Ha a felhasználó egyszerre több szerepkörnek is tagja, akkor az engedélyek és az egyes szerepkörökhöz meghatározott sorszűrők összeadódnak.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-178">When a user is a member of multiple roles, the permissions, and row filters defined for each role are cumulative.</span></span> <span data-ttu-id="ee5fb-179">Ez azt jelenti, hogy a felhasználó a szerepkörök kombinációja által megadott nagyobb engedélyekkel rendelkezik.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-179">That is, the user has the greater permissions determined by the combination of roles.</span></span>  
  
#### <a name="to-create-a-sales-employees-by-territory-user-role"></a><span data-ttu-id="ee5fb-180">Területenkénti értékesítési alkalmazottak felhasználói szerepkör létrehozásának módja</span><span class="sxs-lookup"><span data-stu-id="ee5fb-180">To create a Sales Employees by Territory user role</span></span>  
  
1.  <span data-ttu-id="ee5fb-181">Az SSDT-ben kattintson a **Modell** menüre, majd a **Szerepkörök** elemre.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-181">In SSDT, click the **Model** menu, and then click **Roles**.</span></span>  
  
2.  <span data-ttu-id="ee5fb-182">A **Szerepkörkezelőben** kattintson az **Új** lehetőségre.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-182">In **Role Manager**, click **New**.</span></span>  
  
    <span data-ttu-id="ee5fb-183">Egy új szerepkör Nincs engedéllyel hozzá lesz adva a listához.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-183">A new role with the None permission is added to the list.</span></span>  
  
3.  <span data-ttu-id="ee5fb-184">Kattintson az új szerepkör elemre, majd a **Név** oszlopban nevezze át a szerepkört a következőre: **Területenkénti értékesítési alkalmazottak**.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-184">Click the new role, and then in the **Name** column, rename the role to **Sales Employees by Territory**.</span></span>  
  
4.  <span data-ttu-id="ee5fb-185">Az **Engedélyek** oszlopban kattintson a legördülő listára, majd válassza az **Olvasás** engedélyt.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-185">In the **Permissions** column, click the dropdown list, and then select the **Read** permission.</span></span>  
  
5.  <span data-ttu-id="ee5fb-186">Kattintson a **Tagok** lapra, majd a **Hozzáadás** gombra.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-186">Click the **Members** tab, and then click **Add**.</span></span>  
  
6.  <span data-ttu-id="ee5fb-187">A **Felhasználó vagy csoport kiválasztása** párbeszédpanelen az **Írja be a kijelölendő objektum nevét** mezőbe írja be az EmployeeSecurity tábla létrehozásakor használt első minta-felhasználónevet.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-187">In the **Select User or Group** dialog box, in **Enter the object named to select**, type the first sample user name you used when creating the EmployeeSecurity table.</span></span> <span data-ttu-id="ee5fb-188">Kattintson a **Névellenőrzés** lehetőségre a felhasználónév érvényességének ellenőrzéséhez, majd kattintson az **OK** gombra.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-188">Click **Check Names** to verify the user name is valid, and then click **Ok**.</span></span>  
  
    <span data-ttu-id="ee5fb-189">Ismételje meg ezt a lépést, hozzáadva a többi minta-felhasználónevet, amelyeket az EmployeeSecurity tábla létrehozása során használt.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-189">Repeat this step, adding the other sample user names you used when creating the EmployeeSecurity table.</span></span>  
  
7.  <span data-ttu-id="ee5fb-190">Kattintson a **Sorszűrők** lapra.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-190">Click the **Row Filters** tab.</span></span>  
  
8.  <span data-ttu-id="ee5fb-191">Az **EmployeeSecurity** tábla a **DAX-szűrő** oszlopába írja be a következő képletet:</span><span class="sxs-lookup"><span data-stu-id="ee5fb-191">For the **EmployeeSecurity** table, in the **DAX Filter** column, type the following formula:</span></span>  
  
    ```
      =FALSE()  
    ```
  
    <span data-ttu-id="ee5fb-192">Ez a képlet megadja, hogy minden oszlop feloldható a hamis logikai állapotra.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-192">This formula specifies that all columns resolve to the false Boolean condition.</span></span> <span data-ttu-id="ee5fb-193">Az EmployeeSecurity tábla egyik oszlopát sem kérdezhetik le a Területenkénti értékesítési alkalmazottak felhasználói szerepkör tagjai.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-193">No columns for the EmployeeSecurity table can be queried by a member of the Sales Employees by Territory user role.</span></span>  
  
9. <span data-ttu-id="ee5fb-194">A **DimSalesTerritory** táblába írja be a következő képletet:</span><span class="sxs-lookup"><span data-stu-id="ee5fb-194">For the **DimSalesTerritory** table, type the following formula:</span></span>  

    ```  
    ='Sales Territory'[Sales Territory Id]=LOOKUPVALUE('Employee Security'[Sales Territory Id], 
      'Employee Security'[Login Id], USERNAME(), 
      'Employee Security'[Sales Territory Id], 
      'Sales Territory'[Sales Territory Id]) 
    ```
  
    <span data-ttu-id="ee5fb-195">Ebben a képletben a LOOKUPVALUE függvény a DimEmployeeSecurtiy[SalesTerritoryId] oszlop minden értékét visszaadja, ahol az EmployeeSecurity[LoginId] megegyezik az aktuálisan bejelentkezett Windows-felhasználónévvel, az EmployeeSecurity[SalesTerritoryId] pedig ugyanaz, mint a DimSalesTerritory[SalesTerritoryId].</span><span class="sxs-lookup"><span data-stu-id="ee5fb-195">In this formula, the LOOKUPVALUE function returns all values for the DimEmployeeSecurity[SalesTerritoryId] column, where the EmployeeSecurity[LoginId] is the same as the current logged on Windows user name, and EmployeeSecurity[SalesTerritoryId] is the same as the DimSalesTerritory[SalesTerritoryId].</span></span>  
  
    <span data-ttu-id="ee5fb-196">A LOOKUPVALUE által visszaadott értékesítési területi azonosítók készletét ezután a DimSalesTerritory tábla sorainak korlátozására használja a rendszer.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-196">The set of sales territory IDs returned by LOOKUPVALUE is then used to restrict the rows shown in the DimSalesTerritory table.</span></span> <span data-ttu-id="ee5fb-197">Csak azok a sorok jelennek meg, ahol a sorhoz tartozó SalesTerritoryID megtalálható a LOOKUPVALUE függvény által visszaadott azonosítók készletében.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-197">Only rows where the SalesTerritoryID for the row is in the set of IDs returned by the LOOKUPVALUE function are displayed.</span></span>  
  
10. <span data-ttu-id="ee5fb-198">A Szerepkörkezelőben kattintson az **OK** gombra.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-198">In Role Manager, click **Ok**.</span></span>  
  
## <a name="test-the-sales-employees-by-territory-user-role"></a><span data-ttu-id="ee5fb-199">Területenkénti értékesítési alkalmazottak felhasználói szerepkör tesztelése</span><span class="sxs-lookup"><span data-stu-id="ee5fb-199">Test the Sales Employees by Territory User Role</span></span>  
<span data-ttu-id="ee5fb-200">Ebben a feladatban az SSDT-ben található Elemzés az Excelben szolgáltatást használhatja a Területenkénti értékesítési alkalmazottak felhasználói szerepkör hatékonyságának tesztelésére.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-200">In this task, you use the Analyze in Excel feature in SSDT to test the efficacy of the Sales Employees by Territory user role.</span></span> <span data-ttu-id="ee5fb-201">Adja meg az EmployeeSecurity táblához hozzáadott és a szerepkör tagjává tett egyik felhasználónevet.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-201">You specify one of the user names you added to the EmployeeSecurity table and as a member of the role.</span></span> <span data-ttu-id="ee5fb-202">Ez a felhasználónév hatályos felhasználónévként lesz használatos az Excel és a modell között létrehozott kapcsolatban.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-202">This user name is then used as the effective user name in the connection created between Excel and the model.</span></span>  
  
#### <a name="to-test-the-sales-employees-by-territory-user-role"></a><span data-ttu-id="ee5fb-203">A Területenkénti értékesítési alkalmazottak felhasználói szerepkör tesztelése</span><span class="sxs-lookup"><span data-stu-id="ee5fb-203">To test the Sales Employees by Territory user role</span></span>  
  
1.  <span data-ttu-id="ee5fb-204">Az SSDT-ben kattintson a **Modell** menüre, majd az **Elemzés az Excelben** elemre.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-204">In SSDT, click the **Model** menu, and then click **Analyze in Excel**.</span></span>  
  
2.  <span data-ttu-id="ee5fb-205">Az **Elemzés az Excelben** párbeszédpanelen az **Adja meg a modellhez való kapcsolódáshoz használandó felhasználónevet vagy szerepkört** részen válassza az **A Windows másik felhasználója** elemet, majd kattintson a **Tallózás** gombra.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-205">In the **Analyze in Excel** dialog box, in **Specify the user name or role to use to connect to the model**, select **Other Windows User**, and then click **Browse**.</span></span>  
  
3.  <span data-ttu-id="ee5fb-206">A **Felhasználó vagy csoport kiválasztása** párbeszédpanelen az **Írja be a kijelölendő objektum nevét** mezőbe írja be azt a felhasználónevet, amelyet az EmployeeSecurity táblában adott meg, majd kattintson a **Nevek ellenőrzése** lehetőségre.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-206">In the **Select User or Group** dialog box, in **Enter the object name to select**, type a user name you included in the EmployeeSecurity table, and then click **Check Names**.</span></span>  
  
4.  <span data-ttu-id="ee5fb-207">A **Felhasználó vagy csoport kiválasztása** párbeszédpanel bezárásához kattintson az **OK** gombra, majd kattintson ismét az **OK** gombra az **Elemzés az Excelben** párbeszédpanel bezárásához.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-207">Click **Ok** to close the **Select User or Group** dialog box, and then click **Ok** to close the **Analyze in Excel** dialog box.</span></span>  
  
    <span data-ttu-id="ee5fb-208">Megnyílik az Excel, és megjelenít egy új munkafüzetet.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-208">Excel opens with a new workbook.</span></span> <span data-ttu-id="ee5fb-209">Ekkor automatikusan létrejön egy kimutatás.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-209">A PivotTable is automatically created.</span></span> <span data-ttu-id="ee5fb-210">A Kimutatás mezők listája az új modellben elérhető legtöbb adatmezőt tartalmazza.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-210">The PivotTable Fields list includes most of the data fields available in your new model.</span></span>  
  
    <span data-ttu-id="ee5fb-211">Vegye figyelembe, hogy az EmployeeSecurity tábla nem látható a Kimutatás mezők listájában.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-211">Notice the EmployeeSecurity table is not visible in the PivotTable Fields list.</span></span> <span data-ttu-id="ee5fb-212">Ezt a táblázatot elrejtette az ügyféleszközök elől az előző feladatban.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-212">You hid this table from client tools in a previous task.</span></span>  
  
5.  <span data-ttu-id="ee5fb-213">A **Mezők** listában az **∑ Internetes értékesítés** (mértékek) részen válassza az **InternetTotalSales** mértéket.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-213">In the **Fields** list, in **∑ Internet Sales** (measures), select the **InternetTotalSales** measure.</span></span> <span data-ttu-id="ee5fb-214">Ezt a mértéket az **Értékek** mezőkbe írja be a rendszer.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-214">The measure is entered into the **Values** fields.</span></span>  
  
6.  <span data-ttu-id="ee5fb-215">Válassza a **SalesTerritoryId** elemet a **DimSalesTerritory** táblából.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-215">Select the **SalesTerritoryId** column from the **DimSalesTerritory** table.</span></span> <span data-ttu-id="ee5fb-216">A rendszer bejegyzi az oszlopot a **Sorfeliratok** mezőkbe.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-216">The column is entered into the **Row Labels** fields.</span></span>  
  
    <span data-ttu-id="ee5fb-217">Az internetes értékesítési adatok csak ahhoz a régióhoz jelennek meg, amelyhez a használt hatályos felhasználónév tartozik.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-217">Notice Internet sales figures appear only for the one region to which the effective user name you used belongs.</span></span> <span data-ttu-id="ee5fb-218">Ha egy másik oszlopot választ ki, például a DimGeography tábla Város lehetőségét Sorfelirat-mezőként, akkor csak azok a városok jelennek meg, amelyek azon az értékesítési területen vannak, ahova a hatályos felhasználó tartozik.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-218">If you select another column, like City from the DimGeography table as Row Label field, only cities in the sales territory to which the effective user belongs are displayed.</span></span>  
  
    <span data-ttu-id="ee5fb-219">Ez a felhasználó nem kereshet vagy kérdezhet le semmilyen internetes értékesítési adatot olyan területekről, amelyikhez nem tartozik.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-219">This user cannot browse or query any Internet sales data for territories other than the one they belong to.</span></span> <span data-ttu-id="ee5fb-220">Ez a korlátozás azért áll fenn, mert a DimSalesTerritory táblához a Területenkénti értékesítési alkalmazottak felhasználói szerepkörben megadott sorszűrő védelmet biztosít az egyéb értékesítési területekhez kapcsolódó adatoknak.</span><span class="sxs-lookup"><span data-stu-id="ee5fb-220">This restriction is because the row filter defined for the DimSalesTerritory table, in the Sales Employees by Territory user role, secures data for all data related to other sales territories.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="ee5fb-221">Lásd még:</span><span class="sxs-lookup"><span data-stu-id="ee5fb-221">See Also</span></span>  
[<span data-ttu-id="ee5fb-222">USERNAME függvény (DAX)</span><span class="sxs-lookup"><span data-stu-id="ee5fb-222">USERNAME Function (DAX)</span></span>](https://msdn.microsoft.com/library/hh230954.aspx)  
[<span data-ttu-id="ee5fb-223">LOOKUPVALUE függvény (DAX)</span><span class="sxs-lookup"><span data-stu-id="ee5fb-223">LOOKUPVALUE Function (DAX)</span></span>](https://msdn.microsoft.com/library/gg492170.aspx)  
[<span data-ttu-id="ee5fb-224">CUSTOMDATA függvény (DAX)</span><span class="sxs-lookup"><span data-stu-id="ee5fb-224">CUSTOMDATA Function (DAX)</span></span>](https://msdn.microsoft.com/library/hh213140.aspx)  