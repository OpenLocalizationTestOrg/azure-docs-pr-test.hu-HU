---
title: "aaaAzure Cosmos DB tűzfaltámogatás & IP hozzáférés-vezérlés |} Microsoft Docs"
description: "Ismerje meg, hogyan támogatják a toouse IP hozzáférés-vezérlési házirendeket tűzfal az Azure Cosmos DB adatbázis fiókot."
keywords: "IP-hozzáférés-vezérlés, tűzfaltámogatás"
services: cosmos-db
author: shahankur11
manager: jhubbard
editor: 
tags: azure-resource-manager
documentationcenter: 
ms.assetid: c1b9ede0-ed93-411a-ac9a-62c113a8e887
ms.service: cosmos-db
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/22/2017
ms.author: ankshah
ms.openlocfilehash: b5cdbdb28e9d7ee0fd0ea54aad277167b699929f
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/06/2017
---
# <a name="azure-cosmos-db-firewall-support"></a><span data-ttu-id="41340-104">Az Azure Cosmos DB-tűzfaltámogatás</span><span class="sxs-lookup"><span data-stu-id="41340-104">Azure Cosmos DB firewall support</span></span>
<span data-ttu-id="41340-105">toosecure egy Azure Cosmos DB adatbázisfiók tárolt adatok, Azure Cosmos DB nyújtott támogatás a titkos kulcs alapú [engedélyezési modellt](https://msdn.microsoft.com/library/azure/dn783368.aspx) , amely erős kivonat-alapú üzenethitelesítő kódot (HMAC) használja.</span><span class="sxs-lookup"><span data-stu-id="41340-105">toosecure data stored in an Azure Cosmos DB database account, Azure Cosmos DB has provided support for a secret based [authorization model](https://msdn.microsoft.com/library/azure/dn783368.aspx) that utilizes a strong Hash-based message authentication code (HMAC).</span></span> <span data-ttu-id="41340-106">Most továbbá toohello titkos kulcs alapú engedélyezési modellt, Azure Cosmos DB támogatja az IP-alapú hozzáférés-vezérléssel bejövő tűzfaltámogatás vezérelt házirend.</span><span class="sxs-lookup"><span data-stu-id="41340-106">Now, in addition toohello secret based authorization model, Azure Cosmos DB supports policy driven IP-based access controls for inbound firewall support.</span></span> <span data-ttu-id="41340-107">Ez a modell toohello tűzfalszabályok nagyon hasonló a hagyományos adatbázis rendszer, és egy további biztonsági toohello Azure Cosmos DB adatbázisfiók szintet.</span><span class="sxs-lookup"><span data-stu-id="41340-107">This model is very similar toohello firewall rules of a traditional database system and provides an additional level of security toohello Azure Cosmos DB database account.</span></span> <span data-ttu-id="41340-108">Ebben a modellben most is konfigurálhatja egy Azure Cosmos DB adatbázis fiók toobe csak egy jóváhagyott gépek halmazát jelenti érhetők el vagy a felhőalapú szolgáltatások.</span><span class="sxs-lookup"><span data-stu-id="41340-108">With this model, you can now configure an Azure Cosmos DB database account toobe accessible only from an approved set of machines and/or cloud services.</span></span> <span data-ttu-id="41340-109">Hozzáférés tooAzure Cosmos DB erőforrásokhoz a gépek és szolgáltatások jóváhagyott halmazok továbbra is szükséges hello hívó toopresent érvényes engedélyezési jogkivonatot.</span><span class="sxs-lookup"><span data-stu-id="41340-109">Access tooAzure Cosmos DB resources from these approved sets of machines and services still require hello caller toopresent a valid authorization token.</span></span>

## <a name="ip-access-control-overview"></a><span data-ttu-id="41340-110">IP hozzáférés-vezérlés áttekintése</span><span class="sxs-lookup"><span data-stu-id="41340-110">IP access control overview</span></span>
<span data-ttu-id="41340-111">Alapértelmezés szerint egy Azure Cosmos DB adatbázisfiók nem érhető el a nyilvános interneten számít hello kérelem érvényes engedélyezési jogkivonatot együtt.</span><span class="sxs-lookup"><span data-stu-id="41340-111">By default, an Azure Cosmos DB database account is accessible from public internet as long as hello request is accompanied by a valid authorization token.</span></span> <span data-ttu-id="41340-112">tooconfigure IP csoportházirend-alapú hozzáférés-vezérlés, hello felhasználónak meg kell adnia IP-címek vagy IP-címtartományok engedélyezettek listájához, az ügyfél IP-címek egy adott adatbázis fiókjához tartozó hello néven CIDR formátumban toobe a hello készlete.</span><span class="sxs-lookup"><span data-stu-id="41340-112">tooconfigure IP policy-based access control, hello user must provide hello set of IP addresses or IP address ranges in CIDR form toobe included as hello allowed list of client IPs for a given database account.</span></span> <span data-ttu-id="41340-113">Ha ez a konfiguráció van érvényben, kívül az engedélyezett bővítmények listájához készülékekről származó összes kérelem le lesz tiltva hello kiszolgáló.</span><span class="sxs-lookup"><span data-stu-id="41340-113">Once this configuration is applied, all requests originating from machines outside this allowed list will be blocked by hello server.</span></span>  <span data-ttu-id="41340-114">hello IP-alapú hozzáférés-vezérlés folyamata feldolgozása hello kapcsolat a következő diagram hello.</span><span class="sxs-lookup"><span data-stu-id="41340-114">hello connection processing flow for hello IP-based access control is described in hello following diagram.</span></span>

![IP-alapú hozzáférés-vezérlési hello kapcsolódási folyamatot bemutató ábra](./media/firewall-support/firewall-support-flow.png)

## <a name="connections-from-cloud-services"></a><span data-ttu-id="41340-116">Felhőszolgáltatások közötti kapcsolatok</span><span class="sxs-lookup"><span data-stu-id="41340-116">Connections from cloud services</span></span>
<span data-ttu-id="41340-117">Az Azure felhőszolgáltatások, amelyek egy nagyon gyakori középső réteg szolgáltatás logika Azure Cosmos DB használatával üzemeltetéséhez.</span><span class="sxs-lookup"><span data-stu-id="41340-117">In Azure, cloud services are a very common way for hosting middle tier service logic using Azure Cosmos DB.</span></span> <span data-ttu-id="41340-118">tooenable hozzáférés tooan Azure Cosmos DB adatbázisfiókot az egy felhőszolgáltatás, hello nyilvános IP-cím hello felhőalapú szolgáltatás által az Azure Cosmos DB adatbázisfiók társított IP-címek listája engedélyezett hozzáadott toohello kell lennie [konfigurálása hozzáférés-vezérlési házirend IP hello](#configure-ip-policy).</span><span class="sxs-lookup"><span data-stu-id="41340-118">tooenable access tooan Azure Cosmos DB database account from a cloud service, hello public IP address of hello cloud service must be added toohello allowed list of IP addresses associated with your Azure Cosmos DB database account by [configuring hello IP access control policy](#configure-ip-policy).</span></span>  <span data-ttu-id="41340-119">Ez biztosítja, hogy a felhőszolgáltatások szerepkör példányainak hozzáférés tooyour Azure Cosmos DB adatbázisfiók.</span><span class="sxs-lookup"><span data-stu-id="41340-119">This ensures that all role instances of cloud services have access tooyour Azure Cosmos DB database account.</span></span> <span data-ttu-id="41340-120">IP-címek kérheti le a felhőszolgáltatások hello Azure-portálon, ahogy az alábbi képernyőfelvétel a hello.</span><span class="sxs-lookup"><span data-stu-id="41340-120">You can retrieve IP addresses for your cloud services in hello Azure portal, as shown in hello following screenshot.</span></span>

![Képernyőfelvétel a hello Azure-portálon jelenik meg a felhőalapú szolgáltatás hello nyilvános IP-cím](./media/firewall-support/public-ip-addresses.png)

<span data-ttu-id="41340-122">A horizontális a felhőszolgáltatás további szerepkör-példányokat, hozzáadásával, ha új logikailemez automatikusan rendelkezik hozzáférési toohello Azure Cosmos DB adatbázisfiók mert azok hello része megegyezik a felhőalapú szolgáltatás.</span><span class="sxs-lookup"><span data-stu-id="41340-122">When you scale out your cloud service by adding additional role instance(s), those new instances will automatically have access toohello Azure Cosmos DB database account since they are part of hello same cloud service.</span></span>

## <a name="connections-from-virtual-machines"></a><span data-ttu-id="41340-123">Virtuális gépek közötti kapcsolatok</span><span class="sxs-lookup"><span data-stu-id="41340-123">Connections from virtual machines</span></span>
<span data-ttu-id="41340-124">[Virtuális gépek](https://azure.microsoft.com/services/virtual-machines/) vagy [virtuálisgép-méretezési csoportok](../virtual-machine-scale-sets/virtual-machine-scale-sets-overview.md) is használt toohost középső réteg szolgáltatások, Azure Cosmos DB használatával.</span><span class="sxs-lookup"><span data-stu-id="41340-124">[Virtual machines](https://azure.microsoft.com/services/virtual-machines/) or [virtual machine scale sets](../virtual-machine-scale-sets/virtual-machine-scale-sets-overview.md) can also be used toohost middle tier services using Azure Cosmos DB.</span></span>  <span data-ttu-id="41340-125">tooconfigure hello Azure Cosmos DB adatbázis fiók tooallow hozzáférést a virtuális gépek, virtuális gép és/vagy a virtuálisgép-méretezési csoport nyilvános IP-címeket úgy kell konfigurálni a rendelkezésre álló IP-címek az Azure Cosmos DB adatbázisfiók által engedélyezett hello [hello IP hozzáférés-vezérlési házirend beállítása](#configure-ip-policy).</span><span class="sxs-lookup"><span data-stu-id="41340-125">tooconfigure hello Azure Cosmos DB database account tooallow access from virtual machines, public IP addresses of virtual machine and/or virtual machine scale set must be configured as one of hello allowed IP addresses for your Azure Cosmos DB database account by [configuring hello IP access control policy](#configure-ip-policy).</span></span> <span data-ttu-id="41340-126">Ahogy az alábbi képernyőfelvétel a hello le hello Azure-portálon, a virtuális gépek IP-címet.</span><span class="sxs-lookup"><span data-stu-id="41340-126">You can retrieve IP addresses for virtual machines in hello Azure portal, as shown in hello following screenshot.</span></span>

![Képernyőfelvétel egy nyilvános IP-címet a virtuális gép hello Azure-portálon jelenik meg](./media/firewall-support/public-ip-addresses-dns.png)

<span data-ttu-id="41340-128">Amikor további virtuális gép toohello példánycsoport, azok számára automatikusan biztosított hozzáférés tooyour Azure Cosmos DB adatbázisfiók.</span><span class="sxs-lookup"><span data-stu-id="41340-128">When you add additional virtual machine instances toohello group, they are automatically provided access tooyour Azure Cosmos DB database account.</span></span>

## <a name="connections-from-hello-internet"></a><span data-ttu-id="41340-129">A kapcsolatok hello internet</span><span class="sxs-lookup"><span data-stu-id="41340-129">Connections from hello internet</span></span>
<span data-ttu-id="41340-130">Amikor access, az Azure Cosmos DB adatbázisról egy számítógép-fiókot a hello internet, hello ügyfél IP-cím vagy IP-címtartomány hello gép kell hozzáadott toohello engedélyezett hello Azure Cosmos DB adatbázisfiók tartozó IP-címek listáját.</span><span class="sxs-lookup"><span data-stu-id="41340-130">When you access an Azure Cosmos DB database account from a computer on hello internet, hello client IP address or IP address range of hello machine must be added toohello allowed list of IP address for hello Azure Cosmos DB database account.</span></span> 

## <span data-ttu-id="41340-131"><a id="configure-ip-policy"></a>Hello IP hozzáférés-vezérlési házirend beállítása</span><span class="sxs-lookup"><span data-stu-id="41340-131"><a id="configure-ip-policy"></a> Configuring hello IP access control policy</span></span>
<span data-ttu-id="41340-132">hello IP hozzáférés-vezérlési szabályzatok állíthatók hello Azure-portálon vagy programozottan [Azure CLI](cli-samples.md), [Azure Powershell](powershell-samples.md), vagy hello [REST API](/rest/api/documentdb/) hello frissítésével`ipRangeFilter` tulajdonság.</span><span class="sxs-lookup"><span data-stu-id="41340-132">hello IP access control policy can be set in hello Azure portal, or programmatically through [Azure CLI](cli-samples.md), [Azure Powershell](powershell-samples.md), or hello [REST API](/rest/api/documentdb/) by updating hello `ipRangeFilter` property.</span></span> <span data-ttu-id="41340-133">IP-címeken/tartományokon vesszővel elválasztott, és nem tartalmazhat szóközt kell lennie.</span><span class="sxs-lookup"><span data-stu-id="41340-133">IP addresses/ranges must be comma separated and must not contain any spaces.</span></span> <span data-ttu-id="41340-134">Példa: "13.91.6.132,13.91.6.1/24".</span><span class="sxs-lookup"><span data-stu-id="41340-134">Example: "13.91.6.132,13.91.6.1/24".</span></span> <span data-ttu-id="41340-135">Az adatbázisfiók keresztül ezen módszerek frissítésekor legyen, hogy toopopulate összes hello tulajdonságok tooprevent toodefault-beállításainak visszaállításáról.</span><span class="sxs-lookup"><span data-stu-id="41340-135">When updating your database account through these methods, be sure toopopulate all of hello properties tooprevent resetting toodefault settings.</span></span>

> [!NOTE]
> <span data-ttu-id="41340-136">Azáltal, hogy IP hozzáférés-vezérlési szabályzatok Azure Cosmos DB adatbázis fiókjához, minden hozzáférési tooyour gépekről kívül konfigurált hello Azure Cosmos DB adatbázisfiók engedélyezett IP-címtartományok listájának le vannak tiltva.</span><span class="sxs-lookup"><span data-stu-id="41340-136">By enabling an IP access control policy for your Azure Cosmos DB database account, all access tooyour Azure Cosmos DB database account from machines outside hello configured allowed list of IP address ranges are blocked.</span></span> <span data-ttu-id="41340-137">Ez a modell alapján böngészés vezérlősík Adatműveletek hello hello portálról is letiltott tooensure hello integritását, hozzáférés-vezérlés.</span><span class="sxs-lookup"><span data-stu-id="41340-137">By virtue of this model, browsing hello data plane operation from hello portal will also be blocked tooensure hello integrity of access control.</span></span>

<span data-ttu-id="41340-138">toosimplify fejlesztési hello Azure portál segítségével azonosítsa és hello IP, az ügyfél gépek toohello engedélyezettek listájához, adja meg, hogy a gépen futó alkalmazások hozzáférhessenek hello Azure Cosmos DB fiók.</span><span class="sxs-lookup"><span data-stu-id="41340-138">toosimplify development, hello Azure portal helps you identify and add hello IP of your client machine toohello allowed list, so that apps running your machine can access hello Azure Cosmos DB account.</span></span> <span data-ttu-id="41340-139">Ügyeljen arra, hogy az hello ügyfél IP-cím szerinti hello portal észleli-e.</span><span class="sxs-lookup"><span data-stu-id="41340-139">Note that hello client IP address here is detected as seen by hello portal.</span></span> <span data-ttu-id="41340-140">Hello ügyfél IP-cím a gép lehet, de az is lehet a hálózati átjáró hello IP-címe.</span><span class="sxs-lookup"><span data-stu-id="41340-140">It may be hello client IP address of your machine, but it could also be hello IP address of your network gateway.</span></span> <span data-ttu-id="41340-141">Ne feledje tooremove, amelyet tooproduction előtt.</span><span class="sxs-lookup"><span data-stu-id="41340-141">Do not forget tooremove it before going tooproduction.</span></span>

<span data-ttu-id="41340-142">tooset hello IP hozzáférés-vezérlési szabályzat az Azure-portálon hello toohello Azure Cosmos DB-fiók panelen keresse meg, kattintson a **tűzfal** hello navigációs menüben, majd kattintson a **ON**</span><span class="sxs-lookup"><span data-stu-id="41340-142">tooset hello IP access control policy in hello Azure portal, navigate toohello Azure Cosmos DB account blade, click **Firewall** in hello navigation menu, then click **ON**</span></span> 

![Hogyan tooopen hello tűzfal panel az Azure-portálon hello ábrázoló képernyőfelvétel](./media/firewall-support/azure-portal-firewall.png)

<span data-ttu-id="41340-144">Hello új panelen adja meg, hogy hello Azure-portálon is hello fiók eléréséhez és más címek és tartományok hozzáadása szükség szerint, majd kattintson **mentése**.</span><span class="sxs-lookup"><span data-stu-id="41340-144">In hello new pane, specify whether hello Azure portal can access hello account, and add other addresses and ranges as appropriate, then click **Save**.</span></span>  

> [!NOTE]
> <span data-ttu-id="41340-145">Egy IP-hozzáférés-vezérlési házirend engedélyezésekor hello Azure portál toomaintain hozzáférést kell tooadd hello IP-cím.</span><span class="sxs-lookup"><span data-stu-id="41340-145">When you enable an IP access control policy, you need tooadd hello IP address for hello Azure portal toomaintain access.</span></span> <span data-ttu-id="41340-146">hello portál IP-címek a következők:</span><span class="sxs-lookup"><span data-stu-id="41340-146">hello portal IP addresses are:</span></span>
> |<span data-ttu-id="41340-147">Régió</span><span class="sxs-lookup"><span data-stu-id="41340-147">Region</span></span>|<span data-ttu-id="41340-148">IP-cím</span><span class="sxs-lookup"><span data-stu-id="41340-148">IP address</span></span>|
> |------|----------|
> |<span data-ttu-id="41340-149">Minden egyes megadott kivéve alatt</span><span class="sxs-lookup"><span data-stu-id="41340-149">All regions except those specified below</span></span>| <span data-ttu-id="41340-150">104.42.195.92</span><span class="sxs-lookup"><span data-stu-id="41340-150">104.42.195.92</span></span>|
> |<span data-ttu-id="41340-151">Németország</span><span class="sxs-lookup"><span data-stu-id="41340-151">Germany</span></span>|<span data-ttu-id="41340-152">51.4.229.218</span><span class="sxs-lookup"><span data-stu-id="41340-152">51.4.229.218</span></span>|
> |<span data-ttu-id="41340-153">Kína</span><span class="sxs-lookup"><span data-stu-id="41340-153">China</span></span>|<span data-ttu-id="41340-154">139.217.8.252</span><span class="sxs-lookup"><span data-stu-id="41340-154">139.217.8.252</span></span>|
> |<span data-ttu-id="41340-155">USA-beli államigazgatás – Arizona</span><span class="sxs-lookup"><span data-stu-id="41340-155">US Gov Arizona</span></span>|<span data-ttu-id="41340-156">52.244.48.71</span><span class="sxs-lookup"><span data-stu-id="41340-156">52.244.48.71</span></span>|
>

![Képernyőfelvétel egy hogyan tooconfigure tűzfal beállításaival hello Azure-portálon](./media/firewall-support/azure-portal-firewall-configure.png)

## <a name="troubleshooting-hello-ip-access-control-policy"></a><span data-ttu-id="41340-158">Hibaelhárítási hello IP hozzáférés-vezérlési házirend</span><span class="sxs-lookup"><span data-stu-id="41340-158">Troubleshooting hello IP access control policy</span></span>
### <a name="portal-operations"></a><span data-ttu-id="41340-159">Portál műveletek</span><span class="sxs-lookup"><span data-stu-id="41340-159">Portal operations</span></span>
<span data-ttu-id="41340-160">Azáltal, hogy IP hozzáférés-vezérlési szabályzatok Azure Cosmos DB adatbázis fiókjához, minden hozzáférési tooyour gépekről kívül konfigurált hello Azure Cosmos DB adatbázisfiók engedélyezett IP-címtartományok listájának le vannak tiltva.</span><span class="sxs-lookup"><span data-stu-id="41340-160">By enabling an IP access control policy for your Azure Cosmos DB database account, all access tooyour Azure Cosmos DB database account from machines outside hello configured allowed list of IP address ranges are blocked.</span></span> <span data-ttu-id="41340-161">Ezért ha azt szeretné, hogy tooenable portál adatok vezérlősík műveletek tartoznak, mint a gyűjtemények és dokumentumok lekérdezés tallózása, meg kell tooexplicitly hozzáférést Azure portál használatával hello **tűzfal** hello portál panel.</span><span class="sxs-lookup"><span data-stu-id="41340-161">Therefore if you want tooenable portal data plane operations like browsing collections and query documents, you need tooexplicitly allow Azure portal access using hello **Firewall** blade in hello portal.</span></span> 

![Képernyőfelvétel egy hogyan tooenable hozzáférés toohello Azure-portálon](./media/firewall-support/azure-portal-access-firewall.png)

### <a name="sdk--rest-api"></a><span data-ttu-id="41340-163">SDK & Rest API</span><span class="sxs-lookup"><span data-stu-id="41340-163">SDK & Rest API</span></span>
<span data-ttu-id="41340-164">A biztonsági okokból nem engedélyezettek listájához hello gépek SDK vagy a REST API-n keresztül hozzáférést egy általános 404-es nem található response további részletek nem ad vissza.</span><span class="sxs-lookup"><span data-stu-id="41340-164">For security reasons, access via SDK or REST API from machines not on hello allowed list will return a generic 404 Not Found response with no additional details.</span></span> <span data-ttu-id="41340-165">Ellenőrizze, hogy hello IP az engedélyezett listában konfigurálva az Azure Cosmos DB adatbázis fiók tooensure hello megfelelő házirendeket alkalmazott tooyour Azure Cosmos-adatbázis adatbázis-fiók.</span><span class="sxs-lookup"><span data-stu-id="41340-165">Please verify hello IP allowed list configured for your Azure Cosmos DB database account tooensure hello correct policy configuration is applied tooyour Azure Cosmos DB database account.</span></span>

## <a name="next-steps"></a><span data-ttu-id="41340-166">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="41340-166">Next steps</span></span>
<span data-ttu-id="41340-167">További információ a hálózati kapcsolatos teljesítményadatokat tippek: [teljesítmény tippek](performance-tips.md).</span><span class="sxs-lookup"><span data-stu-id="41340-167">For information about network related performance tips, see [Performance tips](performance-tips.md).</span></span>

