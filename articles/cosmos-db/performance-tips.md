---
title: aaaPerformance tippek - Azure Cosmos DB NoSQL |} Microsoft Docs
description: "Ismerje meg az ügyfél konfigurációs beállítások tooimprove Azure Cosmos DB adatbázis teljesítménye"
keywords: "Hogyan tooimprove adatbázis-teljesítmény"
services: cosmos-db
author: mimig1
manager: jhubbard
editor: 
documentationcenter: 
ms.assetid: 94ff155e-f9bc-488f-8c7a-5e7037091bb9
ms.service: cosmos-db
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 02/23/2017
ms.author: mimig
ms.openlocfilehash: 4f3e82ae5048e3dbc20b0fd891a2d3aa22adf3fc
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/06/2017
---
# <a name="performance-tips-for-azure-cosmos-db"></a><span data-ttu-id="1c558-104">Teljesítmény tippek az Azure Cosmos DB rendszerhez</span><span class="sxs-lookup"><span data-stu-id="1c558-104">Performance tips for Azure Cosmos DB</span></span>
<span data-ttu-id="1c558-105">Azure Cosmos-adatbázis egy gyors és rugalmas elosztott adatbázis, amely zökkenőmentesen méretezi, garantált késéssel és átviteli sebesség.</span><span class="sxs-lookup"><span data-stu-id="1c558-105">Azure Cosmos DB is a fast and flexible distributed database that scales seamlessly with guaranteed latency and throughput.</span></span> <span data-ttu-id="1c558-106">Nem toomake fő architektúra változásai vagy írási komplex kódot tooscale Cosmos DB az adatbázisokat.</span><span class="sxs-lookup"><span data-stu-id="1c558-106">You do not have toomake major architecture changes or write complex code tooscale your database with Cosmos DB.</span></span> <span data-ttu-id="1c558-107">Felfelé és lefelé skálázás be lehető legkönnyebben egyetlen API-hívás vagy [SDK metódus hívása](set-throughput.md#set-throughput-sdk).</span><span class="sxs-lookup"><span data-stu-id="1c558-107">Scaling up and down is as easy as making a single API call or [SDK method call](set-throughput.md#set-throughput-sdk).</span></span> <span data-ttu-id="1c558-108">Azonban mivel Cosmos DB keresztül érhető el a hálózati hívások nem ügyféloldali optimalizálás tooachieve csúcsteljesítmény végezheti el.</span><span class="sxs-lookup"><span data-stu-id="1c558-108">However, because Cosmos DB is accessed via network calls there are client-side optimizations you can make tooachieve peak performance.</span></span>

<span data-ttu-id="1c558-109">Ezért ha még kérése "Hogyan javítható az adatbázis teljesítménye?"</span><span class="sxs-lookup"><span data-stu-id="1c558-109">So if you're asking "How can I improve my database performance?"</span></span> <span data-ttu-id="1c558-110">Vegye figyelembe az alábbi beállítások hello:</span><span class="sxs-lookup"><span data-stu-id="1c558-110">consider hello following options:</span></span>

## <a name="networking"></a><span data-ttu-id="1c558-111">Hálózat</span><span class="sxs-lookup"><span data-stu-id="1c558-111">Networking</span></span>
<a id="direct-connection"></a>

1. <span data-ttu-id="1c558-112">**Kapcsolat házirend: közvetlen kapcsolat mód használata**</span><span class="sxs-lookup"><span data-stu-id="1c558-112">**Connection policy: Use direct connection mode**</span></span>

    <span data-ttu-id="1c558-113">Hogyan csatlakozzon az ügyfél a tooCosmos DB rendelkezik fontos gyakorolt hatása a teljesítményre, különös tekintettel az megfigyelt ügyféloldali késés.</span><span class="sxs-lookup"><span data-stu-id="1c558-113">How a client connects tooCosmos DB has important implications on performance, especially in terms of observed client-side latency.</span></span> <span data-ttu-id="1c558-114">Nincsenek elérhető az ügyfél kapcsolatkezelési házirendet – hello kapcsolat konfigurálása két fő konfigurációs beállítások *mód* és hello [kapcsolat *protokoll*](#connection-protocol).</span><span class="sxs-lookup"><span data-stu-id="1c558-114">There are two key configuration settings available for configuring client Connection Policy – hello connection *mode* and hello [connection *protocol*](#connection-protocol).</span></span>  <span data-ttu-id="1c558-115">hello két elérhető módok a következők:</span><span class="sxs-lookup"><span data-stu-id="1c558-115">hello two available modes are:</span></span>

   1. <span data-ttu-id="1c558-116">Átjáró mód (alapértelmezés)</span><span class="sxs-lookup"><span data-stu-id="1c558-116">Gateway Mode (default)</span></span>
   2. <span data-ttu-id="1c558-117">Közvetlen mód</span><span class="sxs-lookup"><span data-stu-id="1c558-117">Direct Mode</span></span>

      <span data-ttu-id="1c558-118">Átjáró mód minden SDK-platformon támogatott, és hello konfigurált alapértelmezett.</span><span class="sxs-lookup"><span data-stu-id="1c558-118">Gateway Mode is supported on all SDK platforms and is hello configured default.</span></span>  <span data-ttu-id="1c558-119">Ha az alkalmazás fut a vállalati hálózatról szigorú tűzfal korlátozások, a átjáró mód nem hello legjobb választás, mivel hello szabványos HTTPS-port és egy végpontot.</span><span class="sxs-lookup"><span data-stu-id="1c558-119">If your application runs within a corporate network with strict firewall restrictions, Gateway Mode is hello best choice since it uses hello standard HTTPS port and a single endpoint.</span></span> <span data-ttu-id="1c558-120">hello teljesítmény kompromisszumot, azonban, hogy az átjáró mód érint egy további hálózati ugrások minden alkalommal, amikor adatait olvasása vagy írása tooCosmos DB.</span><span class="sxs-lookup"><span data-stu-id="1c558-120">hello performance tradeoff, however, is that Gateway Mode involves an additional network hop every time data is read or written tooCosmos DB.</span></span> <span data-ttu-id="1c558-121">Emiatt a közvetlen üzemmódban miatt toofewer hálózati ugrásokat jobb teljesítményt nyújt.</span><span class="sxs-lookup"><span data-stu-id="1c558-121">Because of this, Direct Mode offers better performance due toofewer network hops.</span></span>
<a id="use-tcp"></a>
2. <span data-ttu-id="1c558-122">**Kapcsolat házirend: hello TCP protokoll**</span><span class="sxs-lookup"><span data-stu-id="1c558-122">**Connection policy: Use hello TCP protocol**</span></span>

    <span data-ttu-id="1c558-123">Ha közvetlen módot, két módon protokoll érhető el:</span><span class="sxs-lookup"><span data-stu-id="1c558-123">When using Direct Mode, there are two protocol options available:</span></span>

   * <span data-ttu-id="1c558-124">TCP</span><span class="sxs-lookup"><span data-stu-id="1c558-124">TCP</span></span>
   * <span data-ttu-id="1c558-125">HTTPS</span><span class="sxs-lookup"><span data-stu-id="1c558-125">HTTPS</span></span>

     <span data-ttu-id="1c558-126">Cosmos DB nyújt egy egyszerű, és nyissa meg a RESTful programozási modellt HTTPS-KAPCSOLATON keresztül.</span><span class="sxs-lookup"><span data-stu-id="1c558-126">Cosmos DB offers a simple and open RESTful programming model over HTTPS.</span></span> <span data-ttu-id="1c558-127">Emellett kínál egy hatékony TCP protokoll, amely egyben a RESTful a kommunikációs modellben és hello .NET ügyfél SDK keresztül érhető el.</span><span class="sxs-lookup"><span data-stu-id="1c558-127">Additionally, it offers an efficient TCP protocol, which is also RESTful in its communication model and is available through hello .NET client SDK.</span></span> <span data-ttu-id="1c558-128">Közvetlen TCP és a HTTPS egyaránt SSL használata a kezdeti hitelesítési és titkosítási forgalom.</span><span class="sxs-lookup"><span data-stu-id="1c558-128">Both Direct TCP and HTTPS use SSL for initial authentication and encrypting traffic.</span></span> <span data-ttu-id="1c558-129">A legjobb teljesítmény érdekében használjon hello TCP protokollt, ha lehetséges.</span><span class="sxs-lookup"><span data-stu-id="1c558-129">For best performance, use hello TCP protocol when possible.</span></span>

     <span data-ttu-id="1c558-130">Ha TCP az átjáró módban, TCP 443-as Port hello Cosmos DB port, továbbá 10255 hello MongoDB API port.</span><span class="sxs-lookup"><span data-stu-id="1c558-130">When using TCP in Gateway Mode, TCP Port 443 is hello Cosmos DB port, and 10255 is hello MongoDB API port.</span></span> <span data-ttu-id="1c558-131">Továbbá toohello átjáró portok, közvetlen módban a TCP használatakor portra van szüksége tooensure hello 10000 és 20000 között nyitva, mert a Cosmos DB dinamikus TCP-portot használja.</span><span class="sxs-lookup"><span data-stu-id="1c558-131">When using TCP in Direct Mode, in addition toohello Gateway ports, you need tooensure hello port range between 10000 and 20000 is open because Cosmos DB uses dynamic TCP ports.</span></span> <span data-ttu-id="1c558-132">Ha ezeket a portokat nem nyitva, és megpróbál toouse TCP, hibaüzenet 503-as szolgáltatás nem érhető el.</span><span class="sxs-lookup"><span data-stu-id="1c558-132">If these ports are not open and you attempt toouse TCP, you receive a 503 Service Unavailable error.</span></span>

     <span data-ttu-id="1c558-133">hello csatlakozási mód során hello konstrukció hello DocumentClient példány hello ConnectionPolicy paraméterrel van konfigurálva.</span><span class="sxs-lookup"><span data-stu-id="1c558-133">hello Connectivity Mode is configured during hello construction of hello DocumentClient instance with hello ConnectionPolicy parameter.</span></span> <span data-ttu-id="1c558-134">Közvetlen mód használata esetén hello protokollt is hello ConnectionPolicy paraméter belül állítható be.</span><span class="sxs-lookup"><span data-stu-id="1c558-134">If Direct Mode is used, hello Protocol can also be set within hello ConnectionPolicy parameter.</span></span>

    ```C#
    var serviceEndpoint = new Uri("https://contoso.documents.net");
    var authKey = new "your authKey from hello Azure portal";
    DocumentClient client = new DocumentClient(serviceEndpoint, authKey,
    new ConnectionPolicy
    {
        ConnectionMode = ConnectionMode.Direct,
        ConnectionProtocol = Protocol.Tcp
    });
    ```

    <span data-ttu-id="1c558-135">TCP csak akkor támogatott a közvetlen mód, ha átjáró módot használ, mert hello mindig van HTTPS protokollt használja az átjáró hello toocommunicate és hello protokollértéket hello ConnectionPolicy a rendszer figyelmen kívül hagyja.</span><span class="sxs-lookup"><span data-stu-id="1c558-135">Because TCP is only supported in Direct Mode, if Gateway Mode is used, then hello HTTPS protocol is always used toocommunicate with hello Gateway and hello Protocol value in hello ConnectionPolicy is ignored.</span></span>

    ![Hello Azure Cosmos DB kapcsolatkezelési házirendet ábrája](./media/performance-tips/connection-policy.png)

3. <span data-ttu-id="1c558-137">**OpenAsync tooavoid indítási késleltetés hívja az első kérésre**</span><span class="sxs-lookup"><span data-stu-id="1c558-137">**Call OpenAsync tooavoid startup latency on first request**</span></span>

    <span data-ttu-id="1c558-138">Alapértelmezés szerint hello első kérelem egy nagyobb késleltetéssel járhat van, mert toofetch hello cím útválasztási táblázathoz.</span><span class="sxs-lookup"><span data-stu-id="1c558-138">By default, hello first request has a higher latency because it has toofetch hello address routing table.</span></span> <span data-ttu-id="1c558-139">az indítási késleltetés a hello először igényelnie, meg kell hívni OpenAsync() egyszer az inicializálás során az alábbiak szerint tooavoid.</span><span class="sxs-lookup"><span data-stu-id="1c558-139">tooavoid this startup latency on hello first request, you should call OpenAsync() once during initialization as follows.</span></span>

        await client.OpenAsync();
   <a id="same-region"></a>
4. <span data-ttu-id="1c558-140">**A teljesítmény azonos Azure régióban ügyfelek elhelyezésének engedélyezése**</span><span class="sxs-lookup"><span data-stu-id="1c558-140">**Collocate clients in same Azure region for performance**</span></span>

    <span data-ttu-id="1c558-141">Ha lehetséges, Cosmos DB hívja alkalmazások és ugyanabban a régióban hello hely hello Cosmos DB adatbázisban.</span><span class="sxs-lookup"><span data-stu-id="1c558-141">When possible, place any applications calling Cosmos DB in hello same region as hello Cosmos DB database.</span></span> <span data-ttu-id="1c558-142">Hozzávetőleges összehasonlításhoz meghívja a 1-2 ms, de hello késés hello Nyugat és az USA hello keleti part közötti belül végrehajtani ugyanabban a régióban hello belül DB tooCosmos > 50 ms.</span><span class="sxs-lookup"><span data-stu-id="1c558-142">For an approximate comparison, calls tooCosmos DB within hello same region complete within 1-2 ms, but hello latency between hello West and East coast of hello US is >50 ms.</span></span> <span data-ttu-id="1c558-143">A késés valószínűleg kérelem toorequest hello kérés hajtja végre, mivel a hello ügyfél toohello Azure datacenter határ haladnak hello útvonal függően változhat.</span><span class="sxs-lookup"><span data-stu-id="1c558-143">This latency can likely vary from request toorequest depending on hello route taken by hello request as it passes from hello client toohello Azure datacenter boundary.</span></span> <span data-ttu-id="1c558-144">hello legalacsonyabb lehetséges késést hello hívása biztosításával valósul alkalmazást hello belül helyezkedik el egy Azure-régióban van hello kiépített Cosmos DB végpont.</span><span class="sxs-lookup"><span data-stu-id="1c558-144">hello lowest possible latency is achieved by ensuring hello calling application is located within hello same Azure region as hello provisioned Cosmos DB endpoint.</span></span> <span data-ttu-id="1c558-145">Elérhető régiók listáját lásd: [Azure-régiókat](https://azure.microsoft.com/regions/#services).</span><span class="sxs-lookup"><span data-stu-id="1c558-145">For a list of available regions, see [Azure Regions](https://azure.microsoft.com/regions/#services).</span></span>

    <span data-ttu-id="1c558-146">![Hello Azure Cosmos DB kapcsolatkezelési házirendet ábrája](./media/performance-tips/same-region.png)
   <a id="increase-threads"></a></span><span class="sxs-lookup"><span data-stu-id="1c558-146">![Illustration of hello Azure Cosmos DB connection policy](./media/performance-tips/same-region.png)
<a id="increase-threads"></a></span></span>
5. <span data-ttu-id="1c558-147">**Növeli a szálak/feladatok száma**</span><span class="sxs-lookup"><span data-stu-id="1c558-147">**Increase number of threads/tasks**</span></span>

    <span data-ttu-id="1c558-148">Hívások tooAzure Cosmos DB hello hálózaton keresztül történik, mert szükség lehet a kérelmek párhuzamossági toovary hello fok, hogy az ügyfélalkalmazás hello fordít várakozó kérelmek között nagyon rövid ideig.</span><span class="sxs-lookup"><span data-stu-id="1c558-148">Since calls tooAzure Cosmos DB are made over hello network, you may need toovary hello degree of parallelism of your requests so that hello client application spends very little time waiting between requests.</span></span> <span data-ttu-id="1c558-149">Ha például használata. NET tartozó [feladat párhuzamos könyvtár](https://msdn.microsoft.com//library/dd460717.aspx), 100-as egység feladatok olvasása vagy írása tooCosmos DB hello sorrendben létrehozása.</span><span class="sxs-lookup"><span data-stu-id="1c558-149">For example, if you're using .NET's [Task Parallel Library](https://msdn.microsoft.com//library/dd460717.aspx), create in hello order of 100s of Tasks reading or writing tooCosmos DB.</span></span>

## <a name="sdk-usage"></a><span data-ttu-id="1c558-150">SDK használata</span><span class="sxs-lookup"><span data-stu-id="1c558-150">SDK Usage</span></span>
1. <span data-ttu-id="1c558-151">**Telepítse legújabb SDK hello**</span><span class="sxs-lookup"><span data-stu-id="1c558-151">**Install hello most recent SDK**</span></span>

    <span data-ttu-id="1c558-152">hello Cosmos DB SDK-k folyamatosan folyamatban van a továbbfejlesztett tooprovide hello legjobb teljesítmény érdekében.</span><span class="sxs-lookup"><span data-stu-id="1c558-152">hello Cosmos DB SDKs are constantly being improved tooprovide hello best performance.</span></span> <span data-ttu-id="1c558-153">Lásd: hello [Cosmos DB SDK](documentdb-sdk-dotnet.md) lapok toodetermine hello legutóbbi SDK, és tekintse át a fejlesztései.</span><span class="sxs-lookup"><span data-stu-id="1c558-153">See hello [Cosmos DB SDK](documentdb-sdk-dotnet.md) pages toodetermine hello most recent SDK and review improvements.</span></span>
2. <span data-ttu-id="1c558-154">**Egypéldányos Cosmos DB ügyfél használata a hello élettartama**</span><span class="sxs-lookup"><span data-stu-id="1c558-154">**Use a singleton Cosmos DB client for hello lifetime of your application**</span></span>

    <span data-ttu-id="1c558-155">Vegye figyelembe, hogy minden DocumentClient példány szálbiztos, és végrehajtja a hatékony kapcsolat kezelése és a címek gyorsítótárazása, ha közvetlen módban működik.</span><span class="sxs-lookup"><span data-stu-id="1c558-155">Note that each DocumentClient instance is thread-safe and performs efficient connection management and address caching when operating in Direct Mode.</span></span> <span data-ttu-id="1c558-156">tooallow hatékony kapcsolat kezelése és a jobb teljesítmény DocumentClient által ajánlott toouse egyetlen példány futhat egy AppDomain DocumentClient hello hello élettartama.</span><span class="sxs-lookup"><span data-stu-id="1c558-156">tooallow efficient connection management and better performance by DocumentClient, it is recommended toouse a single instance of DocumentClient per AppDomain for hello lifetime of hello application.</span></span>

   <a id="max-connection"></a>
3. <span data-ttu-id="1c558-157">**Növelhető a System.NET névtérbeli MaxConnections állomásonként, ha az átjáró módban**</span><span class="sxs-lookup"><span data-stu-id="1c558-157">**Increase System.Net MaxConnections per host when using Gateway mode**</span></span>

    <span data-ttu-id="1c558-158">Cosmos DB kérelmek átjáró üzemmódban HTTPS/REST keresztül történik, és vetni toohello alapértelmezett kapcsolat felső határ az egyes állomásnév vagy IP-címét.</span><span class="sxs-lookup"><span data-stu-id="1c558-158">Cosmos DB requests are made over HTTPS/REST when using Gateway mode, and are subjected toohello default connection limit per hostname or IP address.</span></span> <span data-ttu-id="1c558-159">Így hello ügyféloldali kódtár nyújthatnak több egyidejű kapcsolatok tooCosmos DB szükség lehet tooset hello MaxConnections tooa magasabb érték (100-1000).</span><span class="sxs-lookup"><span data-stu-id="1c558-159">You may need tooset hello MaxConnections tooa higher value (100-1000) so that hello client library can utilize multiple simultaneous connections tooCosmos DB.</span></span> <span data-ttu-id="1c558-160">A .NET SDK 1.8.0 hello és újabb verzióiban hello alapértelmezett értéke [ServicePointManager.DefaultConnectionLimit](https://msdn.microsoft.com/library/system.net.servicepointmanager.defaultconnectionlimit.aspx) van 50 és toochange hello érték, beállíthatja a hello [Documents.Client.ConnectionPolicy.MaxConnectionLimit ](https://msdn.microsoft.com/library/azure/microsoft.azure.documents.client.connectionpolicy.maxconnectionlimit.aspx) tooa nagyobb értéket.</span><span class="sxs-lookup"><span data-stu-id="1c558-160">In hello .NET SDK 1.8.0 and above, hello default value for [ServicePointManager.DefaultConnectionLimit](https://msdn.microsoft.com/library/system.net.servicepointmanager.defaultconnectionlimit.aspx) is 50 and toochange hello value, you can set hello [Documents.Client.ConnectionPolicy.MaxConnectionLimit](https://msdn.microsoft.com/library/azure/microsoft.azure.documents.client.connectionpolicy.maxconnectionlimit.aspx) tooa higher value.</span></span>   
4. <span data-ttu-id="1c558-161">**A particionált gyűjtemények párhuzamos lekérdezések hangolása**</span><span class="sxs-lookup"><span data-stu-id="1c558-161">**Tuning parallel queries for partitioned collections**</span></span>

     <span data-ttu-id="1c558-162">A DocumentDB .NET SDK verzió 1.9.0 és támogatási párhuzamos lekérdezések, amelyek lehetővé teszik egy particionált gyűjtemény párhuzamosan tooquery fent (lásd: [hello SDK-k használata](documentdb-partition-data.md#working-with-the-azure-cosmos-db-sdks) és a kapcsolódó hello [Kódminták](https://github.com/Azure/azure-documentdb-dotnet/blob/master/samples/code-samples/Queries/Program.cs) a További információ:).</span><span class="sxs-lookup"><span data-stu-id="1c558-162">DocumentDB .NET SDK version 1.9.0 and above support parallel queries, which enable you tooquery a partitioned collection in parallel (see [Working with hello SDKs](documentdb-partition-data.md#working-with-the-azure-cosmos-db-sdks) and hello related [code samples](https://github.com/Azure/azure-documentdb-dotnet/blob/master/samples/code-samples/Queries/Program.cs) for more info).</span></span> <span data-ttu-id="1c558-163">Párhuzamos lekérdezések a tervezett tooimprove lekérdezés-késleltetés és a teljesítményt a soros megfelelőjére keresztül történik.</span><span class="sxs-lookup"><span data-stu-id="1c558-163">Parallel queries are designed tooimprove query latency and throughput over their serial counterpart.</span></span> <span data-ttu-id="1c558-164">Párhuzamos lekérdezések két paramétert adja meg, hogy felhasználók észlelheti a toocustom méretezése rájuk vonatkozó követelményeket, a MaxDegreeOfParallelism: toocontrol hello több partíció majd lekérdezhetők, és (b) MaxBufferedItemCount: toocontrol hello száma előre lehívott eredmények.</span><span class="sxs-lookup"><span data-stu-id="1c558-164">Parallel queries provide two parameters that users can tune toocustom-fit their requirements, (a) MaxDegreeOfParallelism: toocontrol hello maximum number of partitions then can be queried in parallel, and (b) MaxBufferedItemCount: toocontrol hello number of pre-fetched results.</span></span>

    <span data-ttu-id="1c558-165">(a) ***hangolása MaxDegreeOfParallelism\: *** párhuzamos lekérdezés works több partíció párhuzamosan lekérdezésével.</span><span class="sxs-lookup"><span data-stu-id="1c558-165">(a) ***Tuning MaxDegreeOfParallelism\:*** Parallel query works by querying multiple partitions in parallel.</span></span> <span data-ttu-id="1c558-166">Azonban az egyes particionált összegyűjtendő adatok beolvassa Feladattervek tekintetben toohello lekérdezéssel.</span><span class="sxs-lookup"><span data-stu-id="1c558-166">However, data from an individual partitioned collect is fetched serially with respect toohello query.</span></span> <span data-ttu-id="1c558-167">Igen beállítás hello MaxDegreeOfParallelism toohello partíciók száma rendelkezik hello maximális esélyét elérése érdekében a legtöbb performant lekérdezés hello, megadott összes többi rendszer feltételei továbbra is hello azonos.</span><span class="sxs-lookup"><span data-stu-id="1c558-167">So, setting hello MaxDegreeOfParallelism toohello number of partitions has hello maximum chance of achieving hello most performant query, provided all other system conditions remain hello same.</span></span> <span data-ttu-id="1c558-168">Ha nem ismeri a partíciók számának hello, beállíthatja a hello MaxDegreeOfParallelism tooa nagy száma, és hello rendszer hello minimális (partíciók, felhasználó által megadott bemeneti száma) úgy dönt, mivel hello MaxDegreeOfParallelism.</span><span class="sxs-lookup"><span data-stu-id="1c558-168">If you don't know hello number of partitions, you can set hello MaxDegreeOfParallelism tooa high number, and hello system chooses hello minimum (number of partitions, user provided input) as hello MaxDegreeOfParallelism.</span></span>

    <span data-ttu-id="1c558-169">Fontos, hogy a párhuzamos lekérdezések által előállított hello legjobb előnyöket, ha hello adatok egyenletesen vannak elosztva a tekintetben toohello lekérdezéssel összes partíciójára toonote.</span><span class="sxs-lookup"><span data-stu-id="1c558-169">It is important toonote that parallel queries produce hello best benefits if hello data is evenly distributed across all partitions with respect toohello query.</span></span> <span data-ttu-id="1c558-170">Ha hello particionált gyűjtemény particionálása oly módon, hogy az összes vagy egy lekérdezés által visszaadott hello adatok többsége néhány partíciók (egy partíciót a legrosszabb esetben) a koncentrált van, majd hello teljesítmény hello lekérdezés volna kell szűk keresztmetszetét adja ki ezeket a partíció.</span><span class="sxs-lookup"><span data-stu-id="1c558-170">If hello partitioned collection is partitioned such a way that all or a majority of hello data returned by a query is concentrated in a few partitions (one partition in worst case), then hello performance of hello query would be bottlenecked by those partitions.</span></span>

    <span data-ttu-id="1c558-171">(b) ***hangolása MaxBufferedItemCount\: *** párhuzamos lekérdezések tervezett toopre-fetch eredményeket addig, amíg a hello aktuális köteg eredmények által feldolgozott hello ügyfél.</span><span class="sxs-lookup"><span data-stu-id="1c558-171">(b) ***Tuning MaxBufferedItemCount\:*** Parallel query is designed toopre-fetch results while hello current batch of results is being processed by hello client.</span></span> <span data-ttu-id="1c558-172">hello lehívását segíti a lekérdezések teljes késést javítása.</span><span class="sxs-lookup"><span data-stu-id="1c558-172">hello pre-fetching helps in overall latency improvement of a query.</span></span> <span data-ttu-id="1c558-173">MaxBufferedItemCount hello paraméter toolimit hello előre lehívott eredmények száma.</span><span class="sxs-lookup"><span data-stu-id="1c558-173">MaxBufferedItemCount is hello parameter toolimit hello number of pre-fetched results.</span></span> <span data-ttu-id="1c558-174">Beállítás MaxBufferedItemCount toohello várt, száma eredményének (vagy magasabb azonosítószámot) lehetővé teszi, hogy a hello lekérdezés tooreceive maximális hasznos lehívását.</span><span class="sxs-lookup"><span data-stu-id="1c558-174">Setting MaxBufferedItemCount toohello expected number of results returned (or a higher number) allows hello query tooreceive maximum benefit from pre-fetching.</span></span>

    <span data-ttu-id="1c558-175">Ne feledje, hogy előre lekérdezésekor works hello azonos módon megadásától hello MaxDegreeOfParallelism, az összes partíció hello adatokat egyetlen puffert van.</span><span class="sxs-lookup"><span data-stu-id="1c558-175">Note that pre-fetching works hello same way irrespective of hello MaxDegreeOfParallelism, and there is a single buffer for hello data from all partitions.</span></span>  
5. <span data-ttu-id="1c558-176">**Kiszolgálóoldali GC bekapcsolása**</span><span class="sxs-lookup"><span data-stu-id="1c558-176">**Turn on server-side GC**</span></span>

    <span data-ttu-id="1c558-177">Bizonyos esetekben segíthet a szemétgyűjtés hello gyakoriságának csökkentését.</span><span class="sxs-lookup"><span data-stu-id="1c558-177">Reducing hello frequency of garbage collection may help in some cases.</span></span> <span data-ttu-id="1c558-178">A .NET, állítsa be [gcServer](https://msdn.microsoft.com/library/ms229357.aspx) tootrue.</span><span class="sxs-lookup"><span data-stu-id="1c558-178">In .NET, set [gcServer](https://msdn.microsoft.com/library/ms229357.aspx) tootrue.</span></span>
6. <span data-ttu-id="1c558-179">**Leállítási RetryAfter időközönként megvalósítása**</span><span class="sxs-lookup"><span data-stu-id="1c558-179">**Implement backoff at RetryAfter intervals**</span></span>

    <span data-ttu-id="1c558-180">Teljesítmény tesztelés során terhelés csak a kis mértékben kérelmek get halmozódni növelje meg.</span><span class="sxs-lookup"><span data-stu-id="1c558-180">During performance testing, you should increase load until a small rate of requests get throttled.</span></span> <span data-ttu-id="1c558-181">Ha szabályozva, hello ügyfélalkalmazás kell a kiszolgáló által megadott hello a késleltetési leállítási újrapróbálkozási időköz.</span><span class="sxs-lookup"><span data-stu-id="1c558-181">If throttled, hello client application should backoff on throttle for hello server-specified retry interval.</span></span> <span data-ttu-id="1c558-182">Hello leállítási tiszteletben biztosítja, hogy az újrapróbálkozások közötti várakozási idő a lehető legrövidebb idő.</span><span class="sxs-lookup"><span data-stu-id="1c558-182">Respecting hello backoff ensures that you spend minimal amount of time waiting between retries.</span></span> <span data-ttu-id="1c558-183">Újrapróbálkozási házirend támogatása a rendszer része, a verzió 1.8.0 és az újabb a hello DocumentDB [.NET](documentdb-sdk-dotnet.md) és [Java](documentdb-sdk-java.md), 1.9.0 verzió vagy újabb verzió a hello [Node.js](documentdb-sdk-node.md) és [ Python](documentdb-sdk-python.md), és az összes támogatott verziója hello [.NET Core](documentdb-sdk-dotnet-core.md) SDK-k.</span><span class="sxs-lookup"><span data-stu-id="1c558-183">Retry policy support is included in Version 1.8.0 and above of hello DocumentDB [.NET](documentdb-sdk-dotnet.md) and [Java](documentdb-sdk-java.md), version 1.9.0 and above of hello [Node.js](documentdb-sdk-node.md) and [Python](documentdb-sdk-python.md), and all supported versions of hello [.NET Core](documentdb-sdk-dotnet-core.md) SDKs.</span></span> <span data-ttu-id="1c558-184">További információkért lásd: [Exceeding fenntartott átviteli sebességének korlátai](request-units.md#RequestRateTooLarge) és [RetryAfter](https://msdn.microsoft.com/library/microsoft.azure.documents.documentclientexception.retryafter.aspx).</span><span class="sxs-lookup"><span data-stu-id="1c558-184">For more information, see [Exceeding reserved throughput limits](request-units.md#RequestRateTooLarge) and [RetryAfter](https://msdn.microsoft.com/library/microsoft.azure.documents.documentclientexception.retryafter.aspx).</span></span>
7. <span data-ttu-id="1c558-185">**Horizontális felskálázás az ügyfél-alkalmazások és szolgáltatások**</span><span class="sxs-lookup"><span data-stu-id="1c558-185">**Scale out your client-workload**</span></span>

    <span data-ttu-id="1c558-186">Ha nagy átviteli szinten teszteli (> 50 000 RU/mp), hello ügyfélalkalmazás hello szűk toohello gép határértékét el a Processzor- vagy hálózati kihasználtsága miatt válhat.</span><span class="sxs-lookup"><span data-stu-id="1c558-186">If you are testing at high throughput levels (>50,000 RU/s), hello client application may become hello bottleneck due toohello machine capping out on CPU or Network utilization.</span></span> <span data-ttu-id="1c558-187">Ha eléri ezt a pontot, folytathatja a toopush hello Cosmos DB fiók további által az ügyfélalkalmazások kiterjesztése több kiszolgáló között.</span><span class="sxs-lookup"><span data-stu-id="1c558-187">If you reach this point, you can continue toopush hello Cosmos DB account further by scaling out your client applications across multiple servers.</span></span>
8. <span data-ttu-id="1c558-188">**Gyorsítótár-dokumentum URI-azonosítók az alsó olvasási késleltetés**</span><span class="sxs-lookup"><span data-stu-id="1c558-188">**Cache document URIs for lower read latency**</span></span>

    <span data-ttu-id="1c558-189">Gyorsítótár-dokumentum URI-k, amikor csak lehetséges hello olvasási teljesítménye.</span><span class="sxs-lookup"><span data-stu-id="1c558-189">Cache document URIs whenever possible for hello best read performance.</span></span>
   <a id="tune-page-size"></a>
9. <span data-ttu-id="1c558-190">**A jobb teljesítmény lekérdezések/olvasás hírcsatornák hello lapmérete hangolása**</span><span class="sxs-lookup"><span data-stu-id="1c558-190">**Tune hello page size for queries/read feeds for better performance**</span></span>

    <span data-ttu-id="1c558-191">Olvasási hírcsatorna funkciók (például ReadDocumentFeedAsync) használó dokumentumokat, vagy a tömeges végrehajtása olvasási, a DocumentDB SQL-lekérdezést kiállításához, hello eredményeinek szegmentált módon ha hello eredménykészlet túl nagy.</span><span class="sxs-lookup"><span data-stu-id="1c558-191">When performing a bulk read of documents using read feed functionality (for example, ReadDocumentFeedAsync) or when issuing a DocumentDB SQL query, hello results are returned in a segmented fashion if hello result set is too large.</span></span> <span data-ttu-id="1c558-192">Alapértelmezés szerint eredményeinek 100 elemet vagy 1 MB adattömböket, bármelyik korlát találati első.</span><span class="sxs-lookup"><span data-stu-id="1c558-192">By default, results are returned in chunks of 100 items or 1 MB, whichever limit is hit first.</span></span>

    <span data-ttu-id="1c558-193">tooreduce hello száma hálózati szükséges adatváltások tooretrieve vonatkozó összes eredményt, hello oldalméret x-ms-maximális elem-darabszám kérelem fejléc tooup too1000 használatával növelhető.</span><span class="sxs-lookup"><span data-stu-id="1c558-193">tooreduce hello number of network round trips required tooretrieve all applicable results, you can increase hello page size using x-ms-max-item-count request header tooup too1000.</span></span> <span data-ttu-id="1c558-194">Azokban az esetekben, ahol kell toodisplay, csak néhány eredményeket például a felhasználói felület vagy a kérelem API visszatérési értéke csak 10 egyszerre annak az eredménye, hello oldal méretét too10 tooreduce hello átviteli Olvasás, mind a lekérdezések felhasznált is csökkentheti.</span><span class="sxs-lookup"><span data-stu-id="1c558-194">In cases where you need toodisplay only a few results, for example, if your user interface or application API returns only 10 results a time, you can also decrease hello page size too10 tooreduce hello throughput consumed for reads and queries.</span></span>

    <span data-ttu-id="1c558-195">Hello oldalméret állíthatók elérhető Cosmos DB SDK-k használatával hello.</span><span class="sxs-lookup"><span data-stu-id="1c558-195">You may also set hello page size using hello available Cosmos DB SDKs.</span></span>  <span data-ttu-id="1c558-196">Példa:</span><span class="sxs-lookup"><span data-stu-id="1c558-196">For example:</span></span>

        IQueryable<dynamic> authorResults = client.CreateDocumentQuery(documentCollection.SelfLink, "SELECT p.Author FROM Pages p WHERE p.Title = 'About Seattle'", new FeedOptions { MaxItemCount = 1000 });
10. <span data-ttu-id="1c558-197">**Növeli a szálak/feladatok száma**</span><span class="sxs-lookup"><span data-stu-id="1c558-197">**Increase number of threads/tasks**</span></span>

    <span data-ttu-id="1c558-198">Lásd: [szálak/feladatok számának növelése](#increase-threads) hello hálózatkezelés szakaszban található.</span><span class="sxs-lookup"><span data-stu-id="1c558-198">See [Increase number of threads/tasks](#increase-threads) in hello Networking section.</span></span>

11. <span data-ttu-id="1c558-199">**Használja a 64 bites állomás feldolgozása**</span><span class="sxs-lookup"><span data-stu-id="1c558-199">**Use 64-bit host processing**</span></span>

    <span data-ttu-id="1c558-200">a DocumentDB .NET SDK 1.11.4 verzió használata esetén, illetve újabb hello DocumentDB SDK-t állomás 32 bites folyamatként működik.</span><span class="sxs-lookup"><span data-stu-id="1c558-200">hello DocumentDB SDK works in a 32-bit host process when you are using DocumentDB .NET SDK version 1.11.4 and above.</span></span> <span data-ttu-id="1c558-201">Azonban használatakor alhálózatok közötti partíció lekérdezések, 64 bites állomás feldolgozása ajánlott javítja a teljesítményt.</span><span class="sxs-lookup"><span data-stu-id="1c558-201">However, if you are using cross partition queries, 64-bit host processing is recommended for improved performance.</span></span> <span data-ttu-id="1c558-202">a következő típusú alkalmazásokat hello van 32 bites gazda hello alapértelmezett dolgozni, így ahhoz, hogy too64 bites toochange, a kövesse az alábbi lépéseket az alkalmazás hello típusától függően:</span><span class="sxs-lookup"><span data-stu-id="1c558-202">hello following types of applications have 32-bit host process as hello default, so in order toochange that too64-bit, follow these steps based on hello type of your application:</span></span>

    - <span data-ttu-id="1c558-203">Végrehajtható alkalmazások esetében ezt úgy teheti eszközhitelesítést hello **előnyben részesítik a 32 bites** hello beállítása **projekt Tulajdonságok** ablakban a hello **Build** fülre.</span><span class="sxs-lookup"><span data-stu-id="1c558-203">For Executable applications, this can be done by unchecking hello **Prefer 32-bit** option in hello **Project Properties** window, on hello **Build** tab.</span></span>

    - <span data-ttu-id="1c558-204">VSTest alapú teszt projektek, ehhez kiválasztásával **tesztelése**->**beállítások ellenőrzése**->**X64 processzorarchitektúrát alapértelmezett**, a hello **Visual Studio Test** menüjét.</span><span class="sxs-lookup"><span data-stu-id="1c558-204">For VSTest based test projects, this can be done by selecting **Test**->**Test Settings**->**Default Processor Architecture as X64**, from hello **Visual Studio Test** menu option.</span></span>

    - <span data-ttu-id="1c558-205">Helyileg telepített ASP.NET webes alkalmazásokhoz, ehhez hello ellenőrzésével **használata hello 64-bit-es verzió az IIS Express a webhelyek és projektek**a **eszközök** ->  **Beállítások**->**projektek és megoldások**->**webes projektek**.</span><span class="sxs-lookup"><span data-stu-id="1c558-205">For locally deployed ASP.NET Web applications, this can be done by checking hello **Use hello 64-bit version of IIS Express for web sites and projects**, under **Tools**->**Options**->**Projects and Solutions**->**Web Projects**.</span></span>

    - <span data-ttu-id="1c558-206">ASP.NET webes alkalmazásokhoz, Azure rendszerbe, ehhez hello kiválasztásával **64 bites platformok** a hello **Alkalmazásbeállítások** a hello Azure-portálon.</span><span class="sxs-lookup"><span data-stu-id="1c558-206">For ASP.NET Web applications deployed on Azure, this can be done by choosing hello **Platform as 64-bit** in hello **Application Settings** on hello Azure portal.</span></span>

## <a name="indexing-policy"></a><span data-ttu-id="1c558-207">Indexelési házirendet</span><span class="sxs-lookup"><span data-stu-id="1c558-207">Indexing Policy</span></span>
1. <span data-ttu-id="1c558-208">**Használja a Lusta indexelő adatfeldolgozást díjszabás gyorsabb maximális idő**</span><span class="sxs-lookup"><span data-stu-id="1c558-208">**Use lazy indexing for faster peak time ingestion rates**</span></span>

    <span data-ttu-id="1c558-209">Cosmos DB toospecify – hello adatgyűjtési szint – az indexelési házirendet, amely lehetővé teszi toochoose Ha azt szeretné, hogy egy gyűjtemény toobe, vagy nem automatikusan indexelt dokumentumok hello segítségével.</span><span class="sxs-lookup"><span data-stu-id="1c558-209">Cosmos DB allows you toospecify – at hello collection level – an indexing policy, which enables you toochoose if you want hello documents in a collection toobe automatically indexed or not.</span></span>  <span data-ttu-id="1c558-210">Ezenkívül azt is választhatnak (Consistent) szinkron és aszinkron (Lazy) index frissítések.</span><span class="sxs-lookup"><span data-stu-id="1c558-210">In addition, you may also choose between synchronous (Consistent) and asynchronous (Lazy) index updates.</span></span> <span data-ttu-id="1c558-211">Alapértelmezés szerint hello index frissítése szinkron módon minden insert, replace vagy dokumentum toohello gyűjtemény törlése.</span><span class="sxs-lookup"><span data-stu-id="1c558-211">By default, hello index is updated synchronously on each insert, replace, or delete of a document toohello collection.</span></span> <span data-ttu-id="1c558-212">Szinkron módon mód lehetővé teszi, hogy hello lekérdezések toohonor hello azonos [konzisztenciaszint](consistency-levels.md) legyen, mint hello dokumentum beolvasása nélkül hello index késedelmes túl "szinkronizálásához".</span><span class="sxs-lookup"><span data-stu-id="1c558-212">Synchronously mode enables hello queries toohonor hello same [consistency level](consistency-levels.md) as that of hello document reads without any delay for hello index too“catch up".</span></span>

    <span data-ttu-id="1c558-213">A lusta indexelési forgatókönyvek, amelyben adatot ír a felszakadásáig tekinthetők, és szeretné tooamortize hello szükséges munka tooindex tartalom egy hosszabb időtartamra vonatkozóan.</span><span class="sxs-lookup"><span data-stu-id="1c558-213">Lazy indexing may be considered for scenarios in which data is written in bursts, and you want tooamortize hello work required tooindex content over a longer period of time.</span></span> <span data-ttu-id="1c558-214">A lusta indexelési is lehetővé teszi a toouse a hatékonyan kiosztott átviteli sebesség és a minimális késéssel szolgálnak írási az csúcsidőben kérelmek.</span><span class="sxs-lookup"><span data-stu-id="1c558-214">Lazy indexing also allows you toouse your provisioned throughput effectively and serve write requests at peak times with minimal latency.</span></span> <span data-ttu-id="1c558-215">Fontos toonote, azonban, hogy ha Lusta indexelő engedélyezve van, lekérdezés eredményei idővel konzisztenssé hello Cosmos DB fiókok hello konzisztenciaszint függetlenül is.</span><span class="sxs-lookup"><span data-stu-id="1c558-215">It is important toonote, however, that when lazy indexing is enabled, query results are eventually consistent regardless of hello consistency level configured for hello Cosmos DB account.</span></span>

    <span data-ttu-id="1c558-216">Azt eredményezi, ezért konzisztens indexelési mód (IndexingPolicy.IndexingMode tooConsistent beállítása) hello legmagasabb kérelem egység kell fizetni írásonkénti közben (IndexingPolicy.IndexingMode tooLazy beállítása) módot, és nem indexelő indexelő Lazy azok háromszorosa (IndexingPolicy.Automatic beállítása tooFalse) nulla indexelési költség rendelkezik írási hello időpontjában.</span><span class="sxs-lookup"><span data-stu-id="1c558-216">Hence, Consistent indexing mode (IndexingPolicy.IndexingMode is set tooConsistent) incurs hello highest request unit charge per write, while Lazy indexing mode (IndexingPolicy.IndexingMode is set tooLazy) and no indexing (IndexingPolicy.Automatic is set tooFalse) have zero indexing cost at hello time of write.</span></span>
2. <span data-ttu-id="1c558-217">**Nem használt elérési utak kizárása a gyorsabb írási az indexelő**</span><span class="sxs-lookup"><span data-stu-id="1c558-217">**Exclude unused paths from indexing for faster writes**</span></span>

    <span data-ttu-id="1c558-218">Cosmos DB tartozó indexelési házirendet is lehetővé teszi-dokumentum elérési utak tooinclude, vagy zárja ki a indexelő elérési utakon található (IndexingPolicy.IncludedPaths IndexingPolicy.ExcludedPaths), ami indexelő toospecify.</span><span class="sxs-lookup"><span data-stu-id="1c558-218">Cosmos DB’s indexing policy also allows you toospecify which document paths tooinclude or exclude from indexing by leveraging Indexing Paths (IndexingPolicy.IncludedPaths and IndexingPolicy.ExcludedPaths).</span></span> <span data-ttu-id="1c558-219">az elérési utak indexelési hello használata kínálhat javított teljesítménye és alacsonyabb index tárolási mely hello lekérdezési mintáinak ismert előzetesen, amennyi az indexelő költségek közvetlenül forgatókönyvek korrelált indexelt egyedi elérési utak toohello száma.</span><span class="sxs-lookup"><span data-stu-id="1c558-219">hello use of indexing paths can offer improved write performance and lower index storage for scenarios in which hello query patterns are known beforehand, as indexing costs are directly correlated toohello number of unique paths indexed.</span></span>  <span data-ttu-id="1c558-220">Például hello a következő kód bemutatja, hogyan tooexclude egy teljes szakaszáról hello dokumentumok (más néven</span><span class="sxs-lookup"><span data-stu-id="1c558-220">For example, hello following code shows how tooexclude an entire section of hello documents (a.k.a.</span></span> <span data-ttu-id="1c558-221">egy részfája) használatával hello indexelésének "*" helyettesítő karakter.</span><span class="sxs-lookup"><span data-stu-id="1c558-221">a subtree) from indexing using hello "*" wildcard.</span></span>

    ```C#
    var collection = new DocumentCollection { Id = "excludedPathCollection" };
    collection.IndexingPolicy.IncludedPaths.Add(new IncludedPath { Path = "/*" });
    collection.IndexingPolicy.ExcludedPaths.Add(new ExcludedPath { Path = "/nonIndexedContent/*");
    collection = await client.CreateDocumentCollectionAsync(UriFactory.CreateDatabaseUri("db"), excluded);
    ```

    <span data-ttu-id="1c558-222">További információkért lásd: [Azure Cosmos DB házirendek indexelő](indexing-policies.md).</span><span class="sxs-lookup"><span data-stu-id="1c558-222">For more information, see [Azure Cosmos DB indexing policies](indexing-policies.md).</span></span>

## <a name="throughput"></a><span data-ttu-id="1c558-223">Teljesítmény</span><span class="sxs-lookup"><span data-stu-id="1c558-223">Throughput</span></span>
<a id="measure-rus"></a>

1. <span data-ttu-id="1c558-224">**Mérését meg és hangolható alacsonyabb kérelem egység/másodperc kihasználtsága**</span><span class="sxs-lookup"><span data-stu-id="1c558-224">**Measure and tune for lower request units/second usage**</span></span>

    <span data-ttu-id="1c558-225">Cosmos DB kínál széles választéka, beleértve a felhasználó által megadott függvények, tárolt eljárások és eseményindítók – hello dokumentumok adatbázis gyűjteményben lévő összes működési hierarchikus és relációs lekérdezések az adatbázis-művelet.</span><span class="sxs-lookup"><span data-stu-id="1c558-225">Cosmos DB offers a rich set of database operations including relational and hierarchical queries with UDFs, stored procedures, and triggers – all operating on hello documents within a database collection.</span></span> <span data-ttu-id="1c558-226">e műveletek társított hello költség hello CPU IO és számára szükséges memória toocomplete hello művelet függ.</span><span class="sxs-lookup"><span data-stu-id="1c558-226">hello cost associated with each of these operations varies based on hello CPU, IO, and memory required toocomplete hello operation.</span></span> <span data-ttu-id="1c558-227">Továbbléphetnek és hardver-erőforrások kezelése helyett tulajdonképpen egy kérelem egységet (RU) hello erőforrások szükséges tooperform az egyetlen intézkedésként különböző adatbázis-műveletek és a szolgáltatás egy alkalmazás kérelme.</span><span class="sxs-lookup"><span data-stu-id="1c558-227">Instead of thinking about and managing hardware resources, you can think of a request unit (RU) as a single measure for hello resources required tooperform various database operations and service an application request.</span></span>

    <span data-ttu-id="1c558-228">[Kérelem egységek](request-units.md) minden egyes megvásárolt kapacitásegység hello számú adatbázis fiókjához tartozó törlődnek.</span><span class="sxs-lookup"><span data-stu-id="1c558-228">[Request units](request-units.md) are provisioned for each database account based on hello number of capacity units that you purchase.</span></span> <span data-ttu-id="1c558-229">Kérelem egység fogyasztás másodpercenkénti történik.</span><span class="sxs-lookup"><span data-stu-id="1c558-229">Request unit consumption is evaluated as a rate per second.</span></span> <span data-ttu-id="1c558-230">Alkalmazások, amelyek mérete meghaladja a hello kiosztott kérelem egység értékelje a fiókjuk korlátozva, amíg hello arány szint fenntartott hello fiók hello alá süllyed.</span><span class="sxs-lookup"><span data-stu-id="1c558-230">Applications that exceed hello provisioned request unit rate for their account is limited until hello rate drops below hello reserved level for hello account.</span></span> <span data-ttu-id="1c558-231">Ha az alkalmazás egy magasabb szintű teljesítmény, vásárolhat további kapacitást egység.</span><span class="sxs-lookup"><span data-stu-id="1c558-231">If your application requires a higher level of throughput, you can purchase additional capacity units.</span></span>

    <span data-ttu-id="1c558-232">a lekérdezés hello összetettsége hatással van kérelem egységek művelet végrehajtásánál.</span><span class="sxs-lookup"><span data-stu-id="1c558-232">hello complexity of a query impacts how many Request Units are consumed for an operation.</span></span> <span data-ttu-id="1c558-233">predikátumok hello száma, hello predikátumok, felhasználó által megadott függvények száma, valamint hello forrás adatkészlet összes befolyásolják hello költségét hello mérete jellege lekérdezési műveletek.</span><span class="sxs-lookup"><span data-stu-id="1c558-233">hello number of predicates, nature of hello predicates, number of UDFs, and hello size of hello source data set all influence hello cost of query operations.</span></span>

    <span data-ttu-id="1c558-234">toomeasure hello terhelését, semmilyen művelet (létrehozása, frissítése vagy törlése), hello x-ms-kérelem-kell fizetni fejléc vizsgálata (vagy egyenértékű RequestCharge tulajdonság ResourceResponse hello<T> vagy FeedResponse<T> a .NET SDK hello) toomeasure Ezeket a műveleteket által felhasznált kérelemegység hello száma.</span><span class="sxs-lookup"><span data-stu-id="1c558-234">toomeasure hello overhead of any operation (create, update, or delete), inspect hello x-ms-request-charge header (or hello equivalent RequestCharge property in ResourceResponse<T> or FeedResponse<T> in hello .NET SDK) toomeasure hello number of request units consumed by these operations.</span></span>

    ```C#
    // Measure hello performance (request units) of writes
    ResourceResponse<Document> response = await client.CreateDocumentAsync(collectionSelfLink, myDocument);
    Console.WriteLine("Insert of document consumed {0} request units", response.RequestCharge);
    // Measure hello performance (request units) of queries
    IDocumentQuery<dynamic> queryable = client.CreateDocumentQuery(collectionSelfLink, queryString).AsDocumentQuery();
    while (queryable.HasMoreResults)
         {
              FeedResponse<dynamic> queryResponse = await queryable.ExecuteNextAsync<dynamic>();
              Console.WriteLine("Query batch consumed {0} request units", queryResponse.RequestCharge);
         }
    ```             

    <span data-ttu-id="1c558-235">hello vissza ezt a fejlécet, kérelmet kell fizetni az részét a létesített átviteli sebesség (azaz 2000 RUs / másodperc).</span><span class="sxs-lookup"><span data-stu-id="1c558-235">hello request charge returned in this header is a fraction of your provisioned throughput (i.e., 2000 RUs / second).</span></span> <span data-ttu-id="1c558-236">Például ha hello előző lekérdezés függvény 1000 1KB-dokumentumok, hello művelet hello költségét érték 1000.</span><span class="sxs-lookup"><span data-stu-id="1c558-236">For example, if hello preceding query returns 1000 1KB-documents, hello cost of hello operation is 1000.</span></span> <span data-ttu-id="1c558-237">Ilyen belül egy második, hello kiszolgáló eleget tegyen csak két ilyen kérelmeket előtt szabályozás későbbi kérelmeket.</span><span class="sxs-lookup"><span data-stu-id="1c558-237">As such, within one second, hello server honors only two such requests before throttling subsequent requests.</span></span> <span data-ttu-id="1c558-238">További információkért lásd: [egységek kérelem](request-units.md) és hello [kérelem egység Számológép](https://www.documentdb.com/capacityplanner).</span><span class="sxs-lookup"><span data-stu-id="1c558-238">For more information, see [Request units](request-units.md) and hello [request unit calculator](https://www.documentdb.com/capacityplanner).</span></span>
<a id="429"></a>
2. <span data-ttu-id="1c558-239">**Kezeli a sebesség korlátozása/kérelmek aránya túl nagy**</span><span class="sxs-lookup"><span data-stu-id="1c558-239">**Handle rate limiting/request rate too large**</span></span>

    <span data-ttu-id="1c558-240">Amikor az ügyfél tooexceed hello fenntartott átviteli egy olyan fiók, nincs teljesítmény csökkenése nélkül működhet hello kiszolgálón és átviteli sebesség fenntartott hello szint nincs használatban.</span><span class="sxs-lookup"><span data-stu-id="1c558-240">When a client attempts tooexceed hello reserved throughput for an account, there is no performance degradation at hello server and no use of throughput capacity beyond hello reserved level.</span></span> <span data-ttu-id="1c558-241">hello server megelőző jelleggel véget ér hello kérelem RequestRateTooLarge (HTTP-állapotkód: 429) és a visszatérési hello x-ms-újrapróbálkozási-után-ms-fejléc jelző idő, ezredmásodpercben, felhasználói hello hello mennyiségét kell várnia, megoldódhat hello kérelem előtt.</span><span class="sxs-lookup"><span data-stu-id="1c558-241">hello server will preemptively end hello request with RequestRateTooLarge (HTTP status code 429) and return hello x-ms-retry-after-ms header indicating hello amount of time, in milliseconds, that hello user must wait before reattempting hello request.</span></span>

        HTTP Status 429,
        Status Line: RequestRateTooLarge
        x-ms-retry-after-ms :100

    <span data-ttu-id="1c558-242">hello SDK-k minden implicit módon dolgozza fel ezt a választ, figyelembe vegyék hello kiszolgáló által megadott újrapróbálkozási után fejlécet, és próbálja megismételni a hello kérelem.</span><span class="sxs-lookup"><span data-stu-id="1c558-242">hello SDKs all implicitly catch this response, respect hello server-specified retry-after header, and retry hello request.</span></span> <span data-ttu-id="1c558-243">Kivéve, ha a fiók egyszerre több ügyfél által is hozzáférnek, hello legközelebbi újrapróbálkozás sikeres lesz.</span><span class="sxs-lookup"><span data-stu-id="1c558-243">Unless your account is being accessed concurrently by multiple clients, hello next retry will succeed.</span></span>

    <span data-ttu-id="1c558-244">Ha egynél több ügyfél felett hello kérelmek aránya következetesen összesítve működő, hello alapértelmezett újrapróbálkozások száma jelenleg nem elegendők set too9 hello ügyfél által belsőleg; Ebben az esetben a hello ügyfél egy DocumentClientException alkalmazással állapot kód 429-es jelű toohello jelez.</span><span class="sxs-lookup"><span data-stu-id="1c558-244">If you have more than one client cumulatively operating consistently above hello request rate, hello default retry count currently set too9 internally by hello client may not suffice; in this case, hello client throws a DocumentClientException with status code 429 toohello application.</span></span> <span data-ttu-id="1c558-245">beállítás hello RetryOptions hello ConnectionPolicy példányon módosíthatja hello alapértelmezett újrapróbálkozások maximális számát.</span><span class="sxs-lookup"><span data-stu-id="1c558-245">hello default retry count can be changed by setting hello RetryOptions on hello ConnectionPolicy instance.</span></span> <span data-ttu-id="1c558-246">Alapértelmezés szerint hello DocumentClientException állapotkóddal 429 esetén visszaadott 30 másodperc halmozódó várakozási idő után hello kérés továbbra is toooperate fent hello kérelmek aránya.</span><span class="sxs-lookup"><span data-stu-id="1c558-246">By default, hello DocumentClientException with status code 429 is returned after a cumulative wait time of 30 seconds if hello request continues toooperate above hello request rate.</span></span> <span data-ttu-id="1c558-247">Ez akkor fordul elő, még ha hello aktuális újrapróbálkozások száma nem éri el hello maximális újrapróbálkozások maximális számát, azt hello alapértelmezett 9 vagy egy felhasználó által definiált értéket.</span><span class="sxs-lookup"><span data-stu-id="1c558-247">This occurs even when hello current retry count is less than hello max retry count, be it hello default of 9 or a user-defined value.</span></span>

    <span data-ttu-id="1c558-248">Amíg hello automatikus újrapróbálkozásra segít tooimprove rugalmasság és a használhatóság hello a legtöbb alkalmazást, előfordulhat, hogy térjen bármikor odds teljesítménymutatókat, különösen ha mérési késleltetés során.</span><span class="sxs-lookup"><span data-stu-id="1c558-248">While hello automated retry behavior helps tooimprove resiliency and usability for hello most applications, it might come at odds when doing performance benchmarks, especially when measuring latency.</span></span>  <span data-ttu-id="1c558-249">hello ügyfél megfigyelt késés lefoglalását lesz, ha hello kísérlet hello server késleltetési találatok, és leállítja a hello ügyfél SDK toosilently újra.</span><span class="sxs-lookup"><span data-stu-id="1c558-249">hello client-observed latency will spike if hello experiment hits hello server throttle and causes hello client SDK toosilently retry.</span></span> <span data-ttu-id="1c558-250">tooavoid késleltetés napra teljesítmény kísérletek során minden művelet által visszaadott mérték hello kell fizetni, és győződjön meg arról, hogy a kérelmek működnek-e alatt hello fenntartott kérelmek aránya.</span><span class="sxs-lookup"><span data-stu-id="1c558-250">tooavoid latency spikes during performance experiments, measure hello charge returned by each operation and ensure that requests are operating below hello reserved request rate.</span></span> <span data-ttu-id="1c558-251">További információkért lásd: [egységek kérelem](request-units.md).</span><span class="sxs-lookup"><span data-stu-id="1c558-251">For more information, see [Request units](request-units.md).</span></span>
3. <span data-ttu-id="1c558-252">**Nagyobb átviteli sebesség eléréséhez kisebb dokumentumok kialakítása**</span><span class="sxs-lookup"><span data-stu-id="1c558-252">**Design for smaller documents for higher throughput**</span></span>

    <span data-ttu-id="1c558-253">hello kérelem költség (azaz Kérelemfeldolgozás költség) egy adott művelet van közvetlenül korrelált hello dokumentum toohello méretét.</span><span class="sxs-lookup"><span data-stu-id="1c558-253">hello request charge (i.e. request processing cost) of a given operation is directly correlated toohello size of hello document.</span></span> <span data-ttu-id="1c558-254">Műveletek nagy dokumentumok drágább, mint műveletek kis dokumentumokhoz.</span><span class="sxs-lookup"><span data-stu-id="1c558-254">Operations on large documents cost more than operations for small documents.</span></span>

## <a name="next-steps"></a><span data-ttu-id="1c558-255">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="1c558-255">Next steps</span></span>
<span data-ttu-id="1c558-256">Egy minta használt alkalmazás tooevaluate Cosmos DB nagy teljesítményű forgatókönyvek néhány ügyfélszámítógépekre, lásd: [teljesítmény és méretezhetőség Cosmos DB tesztelték](performance-testing.md).</span><span class="sxs-lookup"><span data-stu-id="1c558-256">For a sample application used tooevaluate Cosmos DB for high-performance scenarios on a few client machines, see [Performance and scale testing with Cosmos DB](performance-testing.md).</span></span>

<span data-ttu-id="1c558-257">Azt is ellenőrizze, a méretezés és magas szintű teljesítmény, az alkalmazás több tervezéséről toolearn [particionálás és az Azure Cosmos Adatbázisba skálázás](partition-data.md).</span><span class="sxs-lookup"><span data-stu-id="1c558-257">Also, toolearn more about designing your application for scale and high performance, see [Partitioning and scaling in Azure Cosmos DB](partition-data.md).</span></span>
