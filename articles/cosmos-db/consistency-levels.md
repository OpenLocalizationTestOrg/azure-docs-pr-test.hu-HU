---
title: "Az Azure Cosmos Adatbázisba konzisztenciaszintek |} Microsoft Docs"
description: "Azure Cosmos-adatbázis segítségével egyenleg végleges konzisztencia, a rendelkezésre állás és a késleltetés kompromisszumot öt konzisztenciaszintek rendelkezik."
keywords: "az azure végleges konzisztencia cosmos db, azure, a Microsoft azure"
services: cosmos-db
author: mimig1
manager: jhubbard
editor: cgronlun
documentationcenter: 
ms.assetid: 3fe51cfa-a889-4a4a-b320-16bf871fe74c
ms.service: cosmos-db
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/16/2017
ms.author: mimig
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: a1ebec2285982c70aa9dc49950769fe18e2e2d0d
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 08/03/2017
---
# <a name="tunable-data-consistency-levels-in-azure-cosmos-db"></a><span data-ttu-id="98e42-104">Az Azure Cosmos Adatbázisba hangolható konzisztencia szintek</span><span class="sxs-lookup"><span data-stu-id="98e42-104">Tunable data consistency levels in Azure Cosmos DB</span></span>
<span data-ttu-id="98e42-105">Azure Cosmos-adatbázis úgy van kialakítva egészen az alapoktól fel a globális terjesztési szem előtt az összes adatmodell.</span><span class="sxs-lookup"><span data-stu-id="98e42-105">Azure Cosmos DB is designed from the ground up with global distribution in mind for every data model.</span></span> <span data-ttu-id="98e42-106">Előre jelezhető késés garanciák, egy 99,99 % rendelkezésre állási SLA-t, és több jól meghatározott laza konzisztencia modellek tervezték.</span><span class="sxs-lookup"><span data-stu-id="98e42-106">It is designed to offer predictable low latency guarantees, a 99.99% availability SLA, and multiple well-defined relaxed consistency models.</span></span> <span data-ttu-id="98e42-107">Jelenleg az Azure Cosmos DB biztosít öt konzisztenciaszintek: erős, kötött elavulás, munkamenet, egységes előtag, és végleges.</span><span class="sxs-lookup"><span data-stu-id="98e42-107">Currently, Azure Cosmos DB provides five consistency levels: strong, bounded-staleness, session, consistent prefix, and eventual.</span></span> 

<span data-ttu-id="98e42-108">Emellett **erős** és **végleges konzisztencia** modellek gyakran által nyújtott elosztott adatbázisok Azure Cosmos DB három további gondosan kódolt és operationalized konzisztencia modellt biztosít, és a valós életben használati esetek elleni hasznosságát érvényesített.</span><span class="sxs-lookup"><span data-stu-id="98e42-108">Besides **strong** and **eventual consistency** models commonly offered by distributed databases, Azure Cosmos DB offers three more carefully codified and operationalized consistency models, and has validated their usefulness against real world use cases.</span></span> <span data-ttu-id="98e42-109">Ezek a **kötött elavulási**, **munkamenet**, és **konzisztens előtag** konzisztenciaszintek.</span><span class="sxs-lookup"><span data-stu-id="98e42-109">These are the **bounded staleness**, **session**, and **consistent prefix** consistency levels.</span></span> <span data-ttu-id="98e42-110">Együttesen ezek öt konzisztenciaszintek lehetővé teszi végre jól indokolt kompromisszumot konzisztencia, a rendelkezésre állás és a késleltetés között.</span><span class="sxs-lookup"><span data-stu-id="98e42-110">Collectively these five consistency levels enable you to make well-reasoned trade-offs between consistency, availability, and latency.</span></span> 

## <a name="distributed-databases-and-consistency"></a><span data-ttu-id="98e42-111">Elosztott adatbázisok és a konzisztencia</span><span class="sxs-lookup"><span data-stu-id="98e42-111">Distributed databases and consistency</span></span>
<span data-ttu-id="98e42-112">A kereskedelmi forgalomban elérhető adatbázisok két kategóriába sorolhatók: az egyik egyáltalán nem kínál jól definiált és bizonyítható konzisztencialehetőségeket, a másik pedig két szélsőséges programozási lehetőséget nyújt (erős vagy végleges konzisztencia).</span><span class="sxs-lookup"><span data-stu-id="98e42-112">Commercial distributed databases fall into two categories: databases that do not offer well-defined, provable consistency choices at all, and databases which offer two extreme programmability choices (strong vs. eventual consistency).</span></span> 

<span data-ttu-id="98e42-113">Az előbbi replikációs protokolljainak részletessége komoly fejfájást okozhat az alkalmazásfejlesztőknek, ráadásul rajtuk múlik az egyensúlyi állapot megteremtése a konzisztencia, a rendelkezésre állás, a késés és az átviteli sebesség között.</span><span class="sxs-lookup"><span data-stu-id="98e42-113">The former burdens application developers with minutia of their replication protocols and expects them to make difficult tradeoffs between consistency, availability, latency, and throughput.</span></span> <span data-ttu-id="98e42-114">Az utóbbinál pedig komoly terhet jelent a választás a két véglet közül.</span><span class="sxs-lookup"><span data-stu-id="98e42-114">The latter puts a pressure to choose one of the two extremes.</span></span> <span data-ttu-id="98e42-115">A kutatási adatok bősége és a több mint 50 konzisztenciamodellre vonatkozó javaslatok ellenére az elosztott adatbázisok közössége eleddig nem volt képes az erős és végleges konzisztencián túl szabványosítani a konzisztenciaszinteket.</span><span class="sxs-lookup"><span data-stu-id="98e42-115">Despite the abundance of research and proposals for more than 50 consistency models, the distributed database community has not been able to commercialize consistency levels beyond strong and eventual consistency.</span></span> <span data-ttu-id="98e42-116">Cosmos DB lehetővé teszi a fejlesztők számára öt jól meghatározott konzisztencia modellek mentén konzisztencia pontszámot – erős, kötött elavulás, választhat [munkamenet](http://dl.acm.org/citation.cfm?id=383631), egységes előtag, és végleges.</span><span class="sxs-lookup"><span data-stu-id="98e42-116">Cosmos DB allows developers to choose between five well-defined consistency models along the consistency spectrum – strong, bounded staleness, [session](http://dl.acm.org/citation.cfm?id=383631), consistent prefix, and eventual.</span></span> 

![Az Azure Cosmos DB több jól definiált (enyhén korlátozott) konzisztenciamodellt is elérhetővé tesz](./media/consistency-levels/five-consistency-levels.png)

<span data-ttu-id="98e42-118">Az alábbi táblázat azt illusztrálja, hogy melyik konzisztenciaszint milyen garanciákat biztosít.</span><span class="sxs-lookup"><span data-stu-id="98e42-118">The following table illustrates the specific guarantees each consistency level provides.</span></span>
 
<span data-ttu-id="98e42-119">**Konzisztenciaszintek és garanciák**</span><span class="sxs-lookup"><span data-stu-id="98e42-119">**Consistency Levels and guarantees**</span></span>

| <span data-ttu-id="98e42-120">Konzisztenciaszint</span><span class="sxs-lookup"><span data-stu-id="98e42-120">Consistency Level</span></span> | <span data-ttu-id="98e42-121">Garanciák</span><span class="sxs-lookup"><span data-stu-id="98e42-121">Guarantees</span></span> |
| --- | --- |
| <span data-ttu-id="98e42-122">Erős</span><span class="sxs-lookup"><span data-stu-id="98e42-122">Strong</span></span> | <span data-ttu-id="98e42-123">Linearizálhatóság</span><span class="sxs-lookup"><span data-stu-id="98e42-123">Linearizability</span></span> |
| <span data-ttu-id="98e42-124">Kötött elavulás</span><span class="sxs-lookup"><span data-stu-id="98e42-124">Bounded Staleness</span></span> | <span data-ttu-id="98e42-125">Konzisztens előtag.</span><span class="sxs-lookup"><span data-stu-id="98e42-125">Consistent Prefix.</span></span> <span data-ttu-id="98e42-126">Az olvasások k verzióval vagy t időközzel követik az írásokat</span><span class="sxs-lookup"><span data-stu-id="98e42-126">Reads lag behind writes by k prefixes or t interval</span></span> |
| <span data-ttu-id="98e42-127">Munkamenet</span><span class="sxs-lookup"><span data-stu-id="98e42-127">Session</span></span>   | <span data-ttu-id="98e42-128">Konzisztens előtag.</span><span class="sxs-lookup"><span data-stu-id="98e42-128">Consistent Prefix.</span></span> <span data-ttu-id="98e42-129">Monoton olvasások, monoton írások, írás utáni visszaolvasás, beolvasás utáni írás</span><span class="sxs-lookup"><span data-stu-id="98e42-129">Monotonic reads, monotonic writes, read-your-writes, write-follows-reads</span></span> |
| <span data-ttu-id="98e42-130">Konzisztens előtag</span><span class="sxs-lookup"><span data-stu-id="98e42-130">Consistent Prefix</span></span> | <span data-ttu-id="98e42-131">A visszaadott frissítések között az összes frissítés néhány egymást követő verziója szerepel, mindig megfelelő sorrendben</span><span class="sxs-lookup"><span data-stu-id="98e42-131">Updates returned are some prefix of all the updates, with no gaps</span></span> |
| <span data-ttu-id="98e42-132">Végleges</span><span class="sxs-lookup"><span data-stu-id="98e42-132">Eventual</span></span>  | <span data-ttu-id="98e42-133">Nem sorrendben történő olvasások</span><span class="sxs-lookup"><span data-stu-id="98e42-133">Out of order reads</span></span> |

<span data-ttu-id="98e42-134">Konfigurálhatja az alapértelmezett konzisztenciaszintet Cosmos DB-fiókjában (és később felülbírálhatja a konzisztenciát egy adott olvasási kérésen).</span><span class="sxs-lookup"><span data-stu-id="98e42-134">You can configure the default consistency level on your Cosmos DB account (and later override the consistency on a specific read request).</span></span> <span data-ttu-id="98e42-135">Belsőleg az alapértelmezett konzisztencia szint a partíció készletek, amelyek esetleg régiók adatainak vonatkozik.</span><span class="sxs-lookup"><span data-stu-id="98e42-135">Internally, the default consistency level applies to data within the partition sets which may span regions.</span></span> <span data-ttu-id="98e42-136">A bérlők körülbelül 73 %-át használja a munkamenet-konzisztencia, és a kötött elavulási előnyben részesítik a 20 %-át.</span><span class="sxs-lookup"><span data-stu-id="98e42-136">About 73% of our tenants use session consistency and 20% prefer bounded staleness.</span></span> <span data-ttu-id="98e42-137">Azt láthatja, hogy a felhasználók körülbelül 3 % kísérletezhet különböző konzisztenciaszintek kezdetben előtt az adott konzisztencia téve az alkalmazásokban a rendezése.</span><span class="sxs-lookup"><span data-stu-id="98e42-137">We observe that approximately 3% of our customers experiment with various consistency levels initially before settling on a specific consistency choice for their application.</span></span> <span data-ttu-id="98e42-138">Azt is láthatja, hogy a bérlők számára csak 2 % felülbírálása konzisztenciaszintek kérelmek száma alapján.</span><span class="sxs-lookup"><span data-stu-id="98e42-138">We also observe that only 2% of our tenants override consistency levels on a per request basis.</span></span> 

<span data-ttu-id="98e42-139">A Cosmos DB olvasási kiszolgált munkamenetben, egységes előtag és végleges konzisztencia kétszer szerint olcsó, olvasások erős, vagy a kötött elavulási konzisztencia.</span><span class="sxs-lookup"><span data-stu-id="98e42-139">In Cosmos DB, reads served at session, consistent prefix and eventual consistency are twice as cheap as reads with strong or bounded staleness consistency.</span></span> <span data-ttu-id="98e42-140">Cosmos DB rendelkezik iparágvezető átfogó 99,99 % SLA-k többek között a rendelkezésre állás, az átviteli sebesség és a késleltetés mellett konzisztencia biztosítja.</span><span class="sxs-lookup"><span data-stu-id="98e42-140">Cosmos DB has industry leading comprehensive 99.99% SLAs including consistency guarantees along with availability, throughput, and latency.</span></span> <span data-ttu-id="98e42-141">Alkalmazott egy [linearizability ellenőrző](http://dl.acm.org/citation.cfm?id=1806634), amely folyamatosan működik a szolgáltatás telemetriai, és nyilvánosan jelentéseket bármely konzisztencia megsértését jelenti meg.</span><span class="sxs-lookup"><span data-stu-id="98e42-141">We employ a [linearizability checker](http://dl.acm.org/citation.cfm?id=1806634), which continuously operates over our service telemetry and openly reports any consistency violations to you.</span></span> <span data-ttu-id="98e42-142">A kötött elavulási azt megfigyelése és jelentése bármely k és t határainak megsértését jelenti.</span><span class="sxs-lookup"><span data-stu-id="98e42-142">For bounded staleness, we monitor and report any violations to k and t bounds.</span></span> <span data-ttu-id="98e42-143">Az összes öt laza konzisztenciaszintek, azt is jelentheti a [probabilisztikus a kötött elavulási metrika](http://dl.acm.org/citation.cfm?id=2212359) előfizetve.</span><span class="sxs-lookup"><span data-stu-id="98e42-143">For all five relaxed consistency levels, we also report the [probabilistic bounded staleness metric](http://dl.acm.org/citation.cfm?id=2212359) directly to you.</span></span>  

## <a name="scope-of-consistency"></a><span data-ttu-id="98e42-144">Konzisztencia hatóköre</span><span class="sxs-lookup"><span data-stu-id="98e42-144">Scope of consistency</span></span>
<span data-ttu-id="98e42-145">A lépésköz legyen konzisztencia egy felhasználói kérelem hatókörét.</span><span class="sxs-lookup"><span data-stu-id="98e42-145">The granularity of consistency is scoped to a single user request.</span></span> <span data-ttu-id="98e42-146">Egy írási kérelem egy insert, replace, upsert vannak rendelve, vagy törölhető a tranzakció.</span><span class="sxs-lookup"><span data-stu-id="98e42-146">A write request may correspond to an insert, replace, upsert, or delete transaction.</span></span> <span data-ttu-id="98e42-147">Írási műveleteket, mint a olvasás/lekérdezés tranzakció is egy felhasználói kérelem hatókörét.</span><span class="sxs-lookup"><span data-stu-id="98e42-147">As with writes, a read/query transaction is also scoped to a single user request.</span></span> <span data-ttu-id="98e42-148">A felhasználó előfordulhat, hogy szükséges kattintva megjelenítheti a nagy keresztül eredménykészlet, az átfedés több partíció, de egyes olvassa el a tranzakció egyetlen oldalra hatókörű, és a belül egyetlen partícióra kiszolgált.</span><span class="sxs-lookup"><span data-stu-id="98e42-148">The user may be required to paginate over a large result-set, spanning multiple partitions, but each read transaction is scoped to a single page and served from within a single partition.</span></span>

## <a name="consistency-levels"></a><span data-ttu-id="98e42-149">Konzisztenciaszintek</span><span class="sxs-lookup"><span data-stu-id="98e42-149">Consistency levels</span></span>
<span data-ttu-id="98e42-150">A Cosmos DB fiókját az adatbázis-fiókra, amely az összes gyűjteményt (és adatbázisok) egy alapértelmezett konzisztenciaszint adhat meg.</span><span class="sxs-lookup"><span data-stu-id="98e42-150">You can configure a default consistency level on your database account that applies to all collections (and databases) under your Cosmos DB account.</span></span> <span data-ttu-id="98e42-151">Alapértelmezés szerint minden olvasási és a felhasználó által definiált erőforrások állították ki lekérdezések használja a következő adatbázisfiókot beállított alapértelmezett konzisztencia szint.</span><span class="sxs-lookup"><span data-stu-id="98e42-151">By default, all reads and queries issued against the user-defined resources use the default consistency level specified on the database account.</span></span> <span data-ttu-id="98e42-152">A meghatározott olvasás/lekérdezési kérelmek használatával az egyes támogatott API-k konzisztenciaszint is enyhíteni.</span><span class="sxs-lookup"><span data-stu-id="98e42-152">You can relax the consistency level of a specific read/query request using in each of the supported APIs.</span></span> <span data-ttu-id="98e42-153">Öt típusa van konzisztenciaszintek az Azure Cosmos DB replikációs protokoll által támogatott, adjon meg egy egyértelmű kompromisszum között adott konzisztencia biztosítja, és a teljesítmény, ebben a szakaszban leírtak szerint.</span><span class="sxs-lookup"><span data-stu-id="98e42-153">There are five types of consistency levels supported by the Azure Cosmos DB replication protocol that provide a clear trade-off between specific consistency guarantees and performance, as described in this section.</span></span>

<span data-ttu-id="98e42-154">**Erős**:</span><span class="sxs-lookup"><span data-stu-id="98e42-154">**Strong**:</span></span> 

* <span data-ttu-id="98e42-155">Erős konzisztenciát biztosít egy [linearizability](https://aphyr.com/posts/313-strong-consistency-models) garantálja az olvasási garantált, hogy a legfrissebb elemet adja vissza.</span><span class="sxs-lookup"><span data-stu-id="98e42-155">Strong consistency offers a [linearizability](https://aphyr.com/posts/313-strong-consistency-models) guarantee with the reads guaranteed to return the most recent version of an item.</span></span> 
* <span data-ttu-id="98e42-156">Az erős konzisztencia biztosítja, hogy egy írási csak látható után már tartósan által a replikák többsége kvórum.</span><span class="sxs-lookup"><span data-stu-id="98e42-156">Strong consistency guarantees that a write is only visible after it is committed durably by the majority quorum of replicas.</span></span> <span data-ttu-id="98e42-157">Írás már vagy szinkron módon tartósan használta az elsődleges, mind a kvórum több másodlagos adatbázist, vagy azt végrehajtása megszakadt.</span><span class="sxs-lookup"><span data-stu-id="98e42-157">A write is either synchronously committed durably by both the primary and the quorum of secondaries, or it is aborted.</span></span> <span data-ttu-id="98e42-158">Egy olvasási mindig nyugtázta a legtöbb, olvassa el a kvórum, az ügyfél egy nem véglegesített vagy részleges írási soha nem látható, és mindig olvassa el a legújabb nyugtázott írási garantáltan.</span><span class="sxs-lookup"><span data-stu-id="98e42-158">A read is always acknowledged by the majority read quorum, a client can never see an uncommitted or partial write and is always guaranteed to read the latest acknowledged write.</span></span> 
* <span data-ttu-id="98e42-159">Az erős konzisztencia használatára konfigurált Azure Cosmos DB fiókok nem társítható egynél több Azure-régiót Azure Cosmos DB fiókkal.</span><span class="sxs-lookup"><span data-stu-id="98e42-159">Azure Cosmos DB accounts that are configured to use strong consistency cannot associate more than one Azure region with their Azure Cosmos DB account.</span></span> 
* <span data-ttu-id="98e42-160">Egy olvasási művelet költsége (a [egységek kérelem](request-units.md) felhasznált) erős konzisztencia értéke nagyobb, mint a munkamenet és végleges, de ugyanaz, mint a kötött elavulási.</span><span class="sxs-lookup"><span data-stu-id="98e42-160">The cost of a read operation (in terms of [request units](request-units.md) consumed) with strong consistency is higher than session and eventual, but the same as bounded staleness.</span></span>

<span data-ttu-id="98e42-161">**A kötött elavulási**:</span><span class="sxs-lookup"><span data-stu-id="98e42-161">**Bounded staleness**:</span></span> 

* <span data-ttu-id="98e42-162">A kötött elavulási konzisztencia biztosítja, hogy az lehet, hogy legfeljebb olvasási késés által írt *K* verziója vagy az előtagok elem vagy *t* időköz.</span><span class="sxs-lookup"><span data-stu-id="98e42-162">Bounded staleness consistency guarantees that the reads may lag behind writes by at most *K* versions or prefixes of an item or *t* time-interval.</span></span> 
* <span data-ttu-id="98e42-163">Ezért kiválasztása kötött elavulási, a "elavulási" konfigurálható kétféleképpen: verziók száma *K* az elem, amely olvasási verziót használják, és az időtartam alatt a írási *t*</span><span class="sxs-lookup"><span data-stu-id="98e42-163">Therefore, when choosing bounded staleness, the "staleness" can be configured in two ways: number of versions *K* of the item by which the reads lag behind the writes, and the time interval *t*</span></span> 
* <span data-ttu-id="98e42-164">A kötött elavulási ajánlatok teljes globális sorrendjét kivételével a "elavulási időszakban."</span><span class="sxs-lookup"><span data-stu-id="98e42-164">Bounded staleness offers total global order except within the "staleness window."</span></span> <span data-ttu-id="98e42-165">A monoton olvasási garanciák létezik belül és kívül egyaránt a "elavulási ablak." régión belül</span><span class="sxs-lookup"><span data-stu-id="98e42-165">The monotonic read guarantees exists within a region both inside and outside the "staleness window."</span></span> 
* <span data-ttu-id="98e42-166">A kötött elavulási konzisztencia erősebb garancia munkamenet, illetve a végleges konzisztencia biztosítja.</span><span class="sxs-lookup"><span data-stu-id="98e42-166">Bounded staleness provides a stronger consistency guarantee than session or eventual consistency.</span></span> <span data-ttu-id="98e42-167">Globálisan elosztott alkalmazásokhoz javasoljuk, használja a kötött elavulási forgatókönyvek hova kerüljenek az erős konzisztencia rendelkezik, de is érdemes a rendelkezésre állás 99,99 % és kis késleltetése.</span><span class="sxs-lookup"><span data-stu-id="98e42-167">For globally distributed applications, we recommend you use bounded staleness for scenarios where you would like to have strong consistency but also want 99.99% availability and low latency.</span></span> 
* <span data-ttu-id="98e42-168">A kötött elavulási konzisztencia konfigurált Azure Cosmos DB fiókok tetszőleges számú Azure-régiók társíthatja Azure Cosmos DB fiókjuk.</span><span class="sxs-lookup"><span data-stu-id="98e42-168">Azure Cosmos DB accounts that are configured with bounded staleness consistency can associate any number of Azure regions with their Azure Cosmos DB account.</span></span> 
* <span data-ttu-id="98e42-169">Egy olvasási művelet (tekintetében felhasznált RUs) költsége a kötött elavulási, azaz magasabb-munkamenet és végleges konzisztencia, de ugyanaz, mint az erős konzisztencia.</span><span class="sxs-lookup"><span data-stu-id="98e42-169">The cost of a read operation (in terms of RUs consumed) with bounded staleness is higher than session and eventual consistency, but the same as strong consistency.</span></span>

<span data-ttu-id="98e42-170">**Munkamenet**:</span><span class="sxs-lookup"><span data-stu-id="98e42-170">**Session**:</span></span> 

* <span data-ttu-id="98e42-171">A Globális konzisztenciahiba modellek erős és a kötött elavulási konzisztencia szintek által kínált, eltérően a munkamenet-konzisztencia ügyfél hatókörét.</span><span class="sxs-lookup"><span data-stu-id="98e42-171">Unlike the global consistency models offered by strong and bounded staleness consistency levels, session consistency is scoped to a client session.</span></span> 
* <span data-ttu-id="98e42-172">A munkamenet-konzisztencia minden olyan esetekben, ahol van szó egy eszközre vagy felhasználóra vonatkozik-munkamenetet, mivel azt biztosítja, hogy monoton olvasási, monoton írás és Olvasás saját írási műveletek (RYW) biztosítja, hogy az ideális.</span><span class="sxs-lookup"><span data-stu-id="98e42-172">Session consistency is ideal for all scenarios where a device or user session is involved since it guarantees monotonic reads, monotonic writes, and read your own writes (RYW) guarantees.</span></span> 
* <span data-ttu-id="98e42-173">Munkamenet-konzisztencia kiszámítható konzisztencia biztosít egy munkamenet esetében, és a maximális átviteli sebesség olvasási, miközben a legkisebb késés írási és olvasási műveletek.</span><span class="sxs-lookup"><span data-stu-id="98e42-173">Session consistency provides predictable consistency for a session, and maximum read throughput while offering the lowest latency writes and reads.</span></span> 
* <span data-ttu-id="98e42-174">A munkamenet-konzisztencia konfigurált Azure Cosmos DB fiókok tetszőleges számú Azure-régiók társíthatja Azure Cosmos DB fiókjuk.</span><span class="sxs-lookup"><span data-stu-id="98e42-174">Azure Cosmos DB accounts that are configured with session consistency can associate any number of Azure regions with their Azure Cosmos DB account.</span></span> 
* <span data-ttu-id="98e42-175">Egy olvasási művelet (tekintetében felhasznált RUs) költségét munkamenet konzisztenciaszint nem kisebb, mint erős és a kötött elavulási, de több mint végleges konzisztencia</span><span class="sxs-lookup"><span data-stu-id="98e42-175">The cost of a read operation (in terms of RUs consumed) with session consistency level is less than strong and bounded staleness, but more than eventual consistency</span></span>

<span data-ttu-id="98e42-176"><a id="consistent-prefix"></a>
**Egységes előtag**:</span><span class="sxs-lookup"><span data-stu-id="98e42-176"><a id="consistent-prefix"></a>
**Consistent Prefix**:</span></span> 

* <span data-ttu-id="98e42-177">Egységes előtag garantálja, hogy bármilyen további írás hiányában a csoportban lévő replikák végül össze vonva.</span><span class="sxs-lookup"><span data-stu-id="98e42-177">Consistent prefix guarantees that in absence of any further writes, the replicas within the group eventually converge.</span></span> 
* <span data-ttu-id="98e42-178">Egységes előtag biztosítja, hogy az, hogy olvasási műveletek nem veszi észre üzemen kívüli írási műveleteket.</span><span class="sxs-lookup"><span data-stu-id="98e42-178">Consistent prefix guarantees that reads never see out of order writes.</span></span> <span data-ttu-id="98e42-179">Ha sorrendben végrehajtott írási műveletek `A, B, C`, ügyfél látja el, majd `A`, `A,B`, vagy `A,B,C`, de soha nem megfelelő sorrendben például `A,C` vagy `B,A,C`.</span><span class="sxs-lookup"><span data-stu-id="98e42-179">If writes were performed in the order `A, B, C`, then a client sees either `A`, `A,B`, or `A,B,C`, but never out of order like `A,C` or `B,A,C`.</span></span>
* <span data-ttu-id="98e42-180">Egységes előtag konzisztencia konfigurált Azure Cosmos DB fiókok tetszőleges számú Azure-régiók társíthatja Azure Cosmos DB fiókjuk.</span><span class="sxs-lookup"><span data-stu-id="98e42-180">Azure Cosmos DB accounts that are configured with consistent prefix consistency can associate any number of Azure regions with their Azure Cosmos DB account.</span></span> 

<span data-ttu-id="98e42-181">**Végső**:</span><span class="sxs-lookup"><span data-stu-id="98e42-181">**Eventual**:</span></span> 

* <span data-ttu-id="98e42-182">Végleges konzisztencia biztosítja, hogy bármilyen további írás hiányában a csoportban lévő replikák végül össze vonva.</span><span class="sxs-lookup"><span data-stu-id="98e42-182">Eventual consistency guarantees that in absence of any further writes, the replicas within the group eventually converge.</span></span> 
* <span data-ttu-id="98e42-183">Végleges konzisztencia formája, amely a leggyengébb konzisztencia, ahol az adott ügyfél lehet, hogy a régebbi, mint a korábban látott értékek le.</span><span class="sxs-lookup"><span data-stu-id="98e42-183">Eventual consistency is the weakest form of consistency where a client may get the values that are older than the ones it had seen before.</span></span>
* <span data-ttu-id="98e42-184">Végleges konzisztencia nyújtja a leggyengébb olvasási konzisztenciát, de a legkisebb mértékű késleltetést biztosítja mind az Olvasás, mind az írás.</span><span class="sxs-lookup"><span data-stu-id="98e42-184">Eventual consistency provides the weakest read consistency but offers the lowest latency for both reads and writes.</span></span>
* <span data-ttu-id="98e42-185">A végleges konzisztencia konfigurált Azure Cosmos DB fiókok tetszőleges számú Azure-régiók társíthatja Azure Cosmos DB fiókjuk.</span><span class="sxs-lookup"><span data-stu-id="98e42-185">Azure Cosmos DB accounts that are configured with eventual consistency can associate any number of Azure regions with their Azure Cosmos DB account.</span></span> 
* <span data-ttu-id="98e42-186">Egy olvasási művelet (tekintetében felhasznált RUs) költsége a végleges konzisztencia szintje a legalacsonyabb az Azure Cosmos DB konzisztenciaszintek.</span><span class="sxs-lookup"><span data-stu-id="98e42-186">The cost of a read operation (in terms of RUs consumed) with the eventual consistency level is the lowest of all the Azure Cosmos DB consistency levels.</span></span>

## <a name="configuring-the-default-consistency-level"></a><span data-ttu-id="98e42-187">Az alapértelmezett konzisztencia szint konfigurálása</span><span class="sxs-lookup"><span data-stu-id="98e42-187">Configuring the default consistency level</span></span>
1. <span data-ttu-id="98e42-188">Az a [Azure-portálon](https://portal.azure.com/), az ugrósávon kattintson **Azure Cosmos DB**.</span><span class="sxs-lookup"><span data-stu-id="98e42-188">In the [Azure portal](https://portal.azure.com/), in the Jumpbar, click **Azure Cosmos DB**.</span></span>
2. <span data-ttu-id="98e42-189">Az a **Azure Cosmos DB** panelen válassza az adatbázis-fiók módosítása.</span><span class="sxs-lookup"><span data-stu-id="98e42-189">In the **Azure Cosmos DB** blade, select the database account to modify.</span></span>
3. <span data-ttu-id="98e42-190">A fiók paneljén kattintson **alapértelmezett konzisztencia**.</span><span class="sxs-lookup"><span data-stu-id="98e42-190">In the account blade, click **Default consistency**.</span></span>
4. <span data-ttu-id="98e42-191">Az a **alapértelmezett konzisztencia** panelen válassza ki az új konzisztenciaszint, és kattintson a **mentése**.</span><span class="sxs-lookup"><span data-stu-id="98e42-191">In the **Default Consistency** blade, select the new consistency level and click **Save**.</span></span>
   
    ![Képernyőfelvétel a beállítások ikonra, és alapértelmezett konzisztencia bejegyzés kiemelve](./media/consistency-levels/database-consistency-level-1.png)

## <a name="consistency-levels-for-queries"></a><span data-ttu-id="98e42-193">A lekérdezések konzisztenciaszintek</span><span class="sxs-lookup"><span data-stu-id="98e42-193">Consistency levels for queries</span></span>
<span data-ttu-id="98e42-194">Alapértelmezés szerint a felhasználó által definiált erőforrások a lekérdezések konzisztenciaszint megegyezik a konzisztenciaszint olvasása.</span><span class="sxs-lookup"><span data-stu-id="98e42-194">By default, for user-defined resources, the consistency level for queries is the same as the consistency level for reads.</span></span> <span data-ttu-id="98e42-195">Alapértelmezés szerint az index frissítése szinkron módon minden insert, replace vagy a Cosmos DB tárolóhoz elem törlése.</span><span class="sxs-lookup"><span data-stu-id="98e42-195">By default, the index is updated synchronously on each insert, replace, or delete of an item to the Cosmos DB container.</span></span> <span data-ttu-id="98e42-196">Ez lehetővé teszi, hogy a konzisztencia szinttel azonos pont olvasások tiszteletben lekérdezések.</span><span class="sxs-lookup"><span data-stu-id="98e42-196">This enables the queries to honor the same consistency level as that of point reads.</span></span> <span data-ttu-id="98e42-197">Míg Azure Cosmos DB írási optimalizált, és írási műveletek, a szinkron index karbantartási és a kiszolgáló konzisztens lekérdezések tartós köteteket támogatja, egyes gyűjtemények indexét lazily frissítésére is konfigurálhat.</span><span class="sxs-lookup"><span data-stu-id="98e42-197">While Azure Cosmos DB is write optimized and supports sustained volumes of writes, synchronous index maintenance and serving consistent queries, you can configure certain collections to update their index lazily.</span></span> <span data-ttu-id="98e42-198">További Lusta indexelő a írási hanghatások és ideális tömeges adatfeldolgozást forgatókönyvek esetén, ha egy munkaterhelés elsősorban olvasási műveleteket.</span><span class="sxs-lookup"><span data-stu-id="98e42-198">Lazy indexing further boosts the write performance and is ideal for bulk ingestion scenarios when a workload is primarily read-heavy.</span></span>  

| <span data-ttu-id="98e42-199">Az indexelő mód</span><span class="sxs-lookup"><span data-stu-id="98e42-199">Indexing Mode</span></span> | <span data-ttu-id="98e42-200">Olvassa be</span><span class="sxs-lookup"><span data-stu-id="98e42-200">Reads</span></span> | <span data-ttu-id="98e42-201">Lekérdezések</span><span class="sxs-lookup"><span data-stu-id="98e42-201">Queries</span></span> |
| --- | --- | --- |
| <span data-ttu-id="98e42-202">A CONSISTENT (alapértelmezett)</span><span class="sxs-lookup"><span data-stu-id="98e42-202">Consistent (default)</span></span> |<span data-ttu-id="98e42-203">Válassza ki az erős, kötött elavulási, munkamenet, egységes előtag, vagy végleges</span><span class="sxs-lookup"><span data-stu-id="98e42-203">Select from strong, bounded staleness, session, consistent prefix, or eventual</span></span> |<span data-ttu-id="98e42-204">Válassza ki az erős, kötött elavulás, munkamenet, vagy végleges</span><span class="sxs-lookup"><span data-stu-id="98e42-204">Select from strong, bounded staleness, session, or eventual</span></span> |
| <span data-ttu-id="98e42-205">Lassú</span><span class="sxs-lookup"><span data-stu-id="98e42-205">Lazy</span></span> |<span data-ttu-id="98e42-206">Válassza ki az erős, kötött elavulási, munkamenet, egységes előtag, vagy végleges</span><span class="sxs-lookup"><span data-stu-id="98e42-206">Select from strong, bounded staleness, session, consistent prefix, or eventual</span></span> |<span data-ttu-id="98e42-207">Végleges</span><span class="sxs-lookup"><span data-stu-id="98e42-207">Eventual</span></span> |
| <span data-ttu-id="98e42-208">None</span><span class="sxs-lookup"><span data-stu-id="98e42-208">None</span></span> |<span data-ttu-id="98e42-209">Válassza ki az erős, kötött elavulási, munkamenet, egységes előtag, vagy végleges</span><span class="sxs-lookup"><span data-stu-id="98e42-209">Select from strong, bounded staleness, session, consistent prefix, or eventual</span></span> |<span data-ttu-id="98e42-210">Nem alkalmazható</span><span class="sxs-lookup"><span data-stu-id="98e42-210">Not applicable</span></span> |

<span data-ttu-id="98e42-211">Mint az olvasási kéréseket csökkenthető a konzisztenciaszint minden API-ban meghatározott lekérdezési kérelem.</span><span class="sxs-lookup"><span data-stu-id="98e42-211">As with read requests, you can lower the consistency level of a specific query request in each API.</span></span>

## <a name="next-steps"></a><span data-ttu-id="98e42-212">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="98e42-212">Next steps</span></span>
<span data-ttu-id="98e42-213">Ha azt szeretné, további elolvasása konzisztenciaszintek és kompromisszumot elvégzéséhez, a következőket javasoljuk:</span><span class="sxs-lookup"><span data-stu-id="98e42-213">If you'd like to do more reading about consistency levels and tradeoffs, we recommend the following resources:</span></span>

* <span data-ttu-id="98e42-214">Doug Terry.</span><span class="sxs-lookup"><span data-stu-id="98e42-214">Doug Terry.</span></span> <span data-ttu-id="98e42-215">A replikált adatok konzisztencia viszonylag baseball (videó) keresztül.</span><span class="sxs-lookup"><span data-stu-id="98e42-215">Replicated Data Consistency explained through baseball (video).</span></span>   
  [<span data-ttu-id="98e42-216">https://www.YouTube.com/Watch?v=gluIh8zd26I</span><span class="sxs-lookup"><span data-stu-id="98e42-216">https://www.youtube.com/watch?v=gluIh8zd26I</span></span>](https://www.youtube.com/watch?v=gluIh8zd26I)
* <span data-ttu-id="98e42-217">Doug Terry.</span><span class="sxs-lookup"><span data-stu-id="98e42-217">Doug Terry.</span></span> <span data-ttu-id="98e42-218">A replikált adatok konzisztencia viszonylag baseball keresztül.</span><span class="sxs-lookup"><span data-stu-id="98e42-218">Replicated Data Consistency explained through baseball.</span></span>   
  [<span data-ttu-id="98e42-219">http://Research.microsoft.com/Pubs/157411/ConsistencyAndBaseballReport.PDF</span><span class="sxs-lookup"><span data-stu-id="98e42-219">http://research.microsoft.com/pubs/157411/ConsistencyAndBaseballReport.pdf</span></span>](http://research.microsoft.com/pubs/157411/ConsistencyAndBaseballReport.pdf)
* <span data-ttu-id="98e42-220">Doug Terry.</span><span class="sxs-lookup"><span data-stu-id="98e42-220">Doug Terry.</span></span> <span data-ttu-id="98e42-221">Munkamenet garanciák gyengén konzisztens replikált adatok.</span><span class="sxs-lookup"><span data-stu-id="98e42-221">Session Guarantees for Weakly Consistent Replicated Data.</span></span>   
  [<span data-ttu-id="98e42-222">http://DL.ACM.org/CITATION.cfm?ID=383631</span><span class="sxs-lookup"><span data-stu-id="98e42-222">http://dl.acm.org/citation.cfm?id=383631</span></span>](http://dl.acm.org/citation.cfm?id=383631)
* <span data-ttu-id="98e42-223">Daniel Abadi.</span><span class="sxs-lookup"><span data-stu-id="98e42-223">Daniel Abadi.</span></span> <span data-ttu-id="98e42-224">Konzisztencia mellékhatásokkal Modern elosztott adatbázis rendszerek kialakításában: CAP csak a szövegegység része ".</span><span class="sxs-lookup"><span data-stu-id="98e42-224">Consistency Tradeoffs in Modern Distributed Database Systems Design: CAP is only part of the story”.</span></span>   
  [<span data-ttu-id="98e42-225">http://Computer.org/CSDL/mags/Co/2012/02/mco2012020037-ABS.HTML</span><span class="sxs-lookup"><span data-stu-id="98e42-225">http://computer.org/csdl/mags/co/2012/02/mco2012020037-abs.html</span></span>](http://computer.org/csdl/mags/co/2012/02/mco2012020037-abs.html)
* <span data-ttu-id="98e42-226">Peter Bailis, Shivaram Venkataraman, Michael J. tw, Joseph M. Hellerstein, adatmegőrzési Stoica.</span><span class="sxs-lookup"><span data-stu-id="98e42-226">Peter Bailis, Shivaram Venkataraman, Michael J. Franklin, Joseph M. Hellerstein, Ion Stoica.</span></span> <span data-ttu-id="98e42-227">Probabilisztikus kötött elavulási (PBS) a gyakorlati részleges határozatképességére.</span><span class="sxs-lookup"><span data-stu-id="98e42-227">Probabilistic Bounded Staleness (PBS) for Practical Partial Quorums.</span></span>   
  [<span data-ttu-id="98e42-228">http://vldb.org/pvldb/vol5/p776_peterbailis_vldb2012.PDF</span><span class="sxs-lookup"><span data-stu-id="98e42-228">http://vldb.org/pvldb/vol5/p776_peterbailis_vldb2012.pdf</span></span>](http://vldb.org/pvldb/vol5/p776_peterbailis_vldb2012.pdf)
* <span data-ttu-id="98e42-229">Wernernek Vogels.</span><span class="sxs-lookup"><span data-stu-id="98e42-229">Werner Vogels.</span></span> <span data-ttu-id="98e42-230">Végső konzisztens - javított változat.</span><span class="sxs-lookup"><span data-stu-id="98e42-230">Eventual Consistent - Revisited.</span></span>    
  [<span data-ttu-id="98e42-231">http://allthingsdistributed.com/2008/12/eventually_consistent.HTML</span><span class="sxs-lookup"><span data-stu-id="98e42-231">http://allthingsdistributed.com/2008/12/eventually_consistent.html</span></span>](http://allthingsdistributed.com/2008/12/eventually_consistent.html)
* <span data-ttu-id="98e42-232">MONi Naor, Avishai gyapjú, a betöltés, a kapacitás és kvórum rendszerek, a számítástechnikai, v.27 n.2, p.423 447, 1998. április SIAM napló rendelkezésre állását.</span><span class="sxs-lookup"><span data-stu-id="98e42-232">Moni Naor , Avishai Wool, The Load, Capacity, and Availability of Quorum Systems, SIAM Journal on Computing, v.27 n.2, p.423-447, April 1998.</span></span>
  [<span data-ttu-id="98e42-233">http://epubs.Siam.org/DOI/ABS/10.1137/S0097539795281232</span><span class="sxs-lookup"><span data-stu-id="98e42-233">http://epubs.siam.org/doi/abs/10.1137/S0097539795281232</span></span>](http://epubs.siam.org/doi/abs/10.1137/S0097539795281232)
* <span data-ttu-id="98e42-234">Sebastian Burckhardt, Chris Dern, Macanal Musuvathi, Roy Tan, Line-up: a teljes és automatikus linearizability-ellenőrző eljárás a 2010-es ACM SIGPLAN konferencia programozási nyelv tervezési és megvalósítási, június 05-10-es, 2010, Toronto, Ontario, Kanada [doi > 10.1145/1806596.1806634] [http://dl.acm.org/citation.cfm?id=1806634](http://dl.acm.org/citation.cfm?id=1806634)</span><span class="sxs-lookup"><span data-stu-id="98e42-234">Sebastian Burckhardt, Chris Dern, Macanal Musuvathi, Roy Tan, Line-up: a complete and automatic linearizability checker, Proceedings of the 2010 ACM SIGPLAN conference on Programming language design and implementation, June 05-10, 2010, Toronto, Ontario, Canada  [doi>10.1145/1806596.1806634] [http://dl.acm.org/citation.cfm?id=1806634](http://dl.acm.org/citation.cfm?id=1806634)</span></span>
* <span data-ttu-id="98e42-235">Peter Bailis, Shivaram Venkataraman, Michael J. tw, Joseph M. Hellerstein adatmegőrzési Stoica Probabilistically kötött elavulási gyakorlati részleges határozatképességére, a VLDB dotációs, még az v.5 n.8, p.776 787, 2012 áprilisi eljárásai az [http://dl.acm.org/citation.cfm?id=2212359](http://dl.acm.org/citation.cfm?id=2212359)</span><span class="sxs-lookup"><span data-stu-id="98e42-235">Peter Bailis, Shivaram Venkataraman, Michael J. Franklin, Joseph M. Hellerstein , Ion Stoica, Probabilistically bounded staleness for practical partial quorums, Proceedings of the VLDB Endowment, v.5 n.8, p.776-787, April 2012 [http://dl.acm.org/citation.cfm?id=2212359](http://dl.acm.org/citation.cfm?id=2212359)</span></span>
