---
title: "Az Azure Cosmos DB erőforrás-modellje és fogalmai |} Microsoft Docs"
description: "További információk a hierarchikus modell Azure Cosmos DB adatbázisok, gyűjtemények, felhasználó által definiált függvény (UDF), dokumentumok, erőforrások és még sok más kezeléséhez szükséges jogokat kapjon."
keywords: Hierarchikus modell cosmosdb, az azure, a Microsoft azure
services: cosmos-db
documentationcenter: 
author: AndrewHoh
manager: jhubbard
editor: monicar
ms.assetid: ef9d5c0c-0867-4317-bb1b-98e219799fd5
ms.service: cosmos-db
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/24/2017
ms.author: anhoh
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: 8051742c7c368d1ed84bcd90ab75b20f62105e2f
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 08/03/2017
---
# <a name="azure-cosmos-db-hierarchical-resource-model-and-core-concepts"></a><span data-ttu-id="e5843-104">Az Azure Cosmos DB hierarchikus erőforrás-modellje és alapfogalmai</span><span class="sxs-lookup"><span data-stu-id="e5843-104">Azure Cosmos DB hierarchical resource model and core concepts</span></span>
<span data-ttu-id="e5843-105">Az Azure Cosmos DB kezelő adatbázis entitásokat nevezzük **erőforrások**.</span><span class="sxs-lookup"><span data-stu-id="e5843-105">The database entities that Azure Cosmos DB manages are referred to as **resources**.</span></span> <span data-ttu-id="e5843-106">Az egyes erőforrások egyedileg azonosít egy logikai URI-t.</span><span class="sxs-lookup"><span data-stu-id="e5843-106">Each resource is uniquely identified by a logical URI.</span></span> <span data-ttu-id="e5843-107">Az erőforrások szabványos HTTP-műveletek, a kérelem/válasz fejlécek és a állapotkódokat alállapotkódok használatával kommunikálhat.</span><span class="sxs-lookup"><span data-stu-id="e5843-107">You can interact with the resources using standard HTTP verbs, request/response headers and status codes.</span></span> 

<span data-ttu-id="e5843-108">Ez a cikk olvasásával képes lesz a következő kérdések megválaszolásához:</span><span class="sxs-lookup"><span data-stu-id="e5843-108">By reading this article, you'll be able to answer the following questions:</span></span>

* <span data-ttu-id="e5843-109">Mi az erőforrás-modellje Cosmos DB?</span><span class="sxs-lookup"><span data-stu-id="e5843-109">What is Cosmos DB's resource model?</span></span>
* <span data-ttu-id="e5843-110">Mik azok a rendszer meghatározott erőforrások felhasználó által definiált erőforrások figyelésekor?</span><span class="sxs-lookup"><span data-stu-id="e5843-110">What are system defined resources as opposed to user defined resources?</span></span>
* <span data-ttu-id="e5843-111">Hogyan kezelje a egy erőforrást?</span><span class="sxs-lookup"><span data-stu-id="e5843-111">How do I address a resource?</span></span>
* <span data-ttu-id="e5843-112">Hogyan működik a gyűjteményekkel?</span><span class="sxs-lookup"><span data-stu-id="e5843-112">How do I work with collections?</span></span>
* <span data-ttu-id="e5843-113">Hogyan működik a tárolt eljárások, eseményindítók és felhasználó által megadott funkciókat (UDF)?</span><span class="sxs-lookup"><span data-stu-id="e5843-113">How do I work with stored procedures, triggers and User Defined Functions (UDFs)?</span></span>

## <a name="hierarchical-resource-model"></a><span data-ttu-id="e5843-114">Hierarchikus erőforrás-modellje</span><span class="sxs-lookup"><span data-stu-id="e5843-114">Hierarchical resource model</span></span>
<span data-ttu-id="e5843-115">Az az alábbi ábrán látható módon, a hierarchikus Cosmos DB **erőforrás-modellje** áll egy adatbázis-fiók, logikai és állandó URI segítségével minden egyes megcímezhető alatt lévő erőforrások csoportja.</span><span class="sxs-lookup"><span data-stu-id="e5843-115">As the following diagram illustrates, the Cosmos DB hierarchical **resource model** consists of sets of resources under a database account, each addressable via a logical and stable URI.</span></span> <span data-ttu-id="e5843-116">Több erőforrást fog hivatkozni a **hírcsatorna** ebben a cikkben.</span><span class="sxs-lookup"><span data-stu-id="e5843-116">A set of resources will be referred to as a **feed** in this article.</span></span> 

> [!NOTE]
> <span data-ttu-id="e5843-117">Azure Cosmos DB kínál a rendkívül hatékony TCP protokoll, amely egyben a RESTful a kommunikációt a modellben elérhető a [DocumentDB .NET ügyfél API-ja](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="e5843-117">Azure Cosmos DB offers a highly efficient TCP protocol which is also RESTful in its communication model, available through the [DocumentDB .NET client API](documentdb-sdk-dotnet.md).</span></span>
> 
> 

<span data-ttu-id="e5843-118">![Az Azure Cosmos DB hierarchikus erőforrás-modellje][1]</span><span class="sxs-lookup"><span data-stu-id="e5843-118">![Azure Cosmos DB hierarchical resource model][1]</span></span>  
<span data-ttu-id="e5843-119">**Hierarchikus erőforrás-modellje**</span><span class="sxs-lookup"><span data-stu-id="e5843-119">**Hierarchical resource model**</span></span>   

<span data-ttu-id="e5843-120">Erőforrások munkakezdéshez kell [adatbázisfiók létrehozása](create-documentdb-dotnet.md) használata az Azure-előfizetéshez.</span><span class="sxs-lookup"><span data-stu-id="e5843-120">To start working with resources, you must [create a database account](create-documentdb-dotnet.md) using your Azure subscription.</span></span> <span data-ttu-id="e5843-121">Az adatbázisfiók állhat egy **adatbázisok**, több tartalmazó **gyűjtemények**, minden egyes, viszont tartalmazó **tárolt eljárások, eseményindítók, felhasználó által megadott függvények, dokumentumok**és kapcsolódó **mellékletek**.</span><span class="sxs-lookup"><span data-stu-id="e5843-121">A database account can consist of a set of **databases**, each containing multiple **collections**, each of which in turn contain **stored procedures, triggers, UDFs, documents** and related **attachments**.</span></span> <span data-ttu-id="e5843-122">Egy adatbázis is vannak társítva **felhasználók**, egyes számú **engedélyek** gyűjtemények, tárolt eljárások, eseményindítók, felhasználó által megadott függvények, dokumentumok és mellékletek eléréséhez.</span><span class="sxs-lookup"><span data-stu-id="e5843-122">A database also has associated **users**, each with a set of **permissions** to access collections, stored procedures, triggers, UDFs, documents or attachments.</span></span> <span data-ttu-id="e5843-123">Míg adatbázisok, felhasználókat és gyűjtemények rendszer által meghatározott erőforrások jól ismert sémákkal rendelkező, dokumentumok és mellékletek tartalmaznak tetszőleges, felhasználó által megadott JSON-tartalmak.</span><span class="sxs-lookup"><span data-stu-id="e5843-123">While databases, users, permissions and collections are system-defined resources with well-known schemas, documents and attachments contain arbitrary, user defined JSON content.</span></span>  

| <span data-ttu-id="e5843-124">Erőforrás</span><span class="sxs-lookup"><span data-stu-id="e5843-124">Resource</span></span> | <span data-ttu-id="e5843-125">Leírás</span><span class="sxs-lookup"><span data-stu-id="e5843-125">Description</span></span> |
| --- | --- |
| <span data-ttu-id="e5843-126">Adatbázis-fiók</span><span class="sxs-lookup"><span data-stu-id="e5843-126">Database account</span></span> |<span data-ttu-id="e5843-127">Az adatbázisfiók adatbázisok és a rögzített méretű mellékletek blob-tároló állítja be hozzá rendelve.</span><span class="sxs-lookup"><span data-stu-id="e5843-127">A database account is associated with a set of databases and a fixed amount of blob storage for attachments.</span></span> <span data-ttu-id="e5843-128">Létrehozhat egy vagy több adatbázis fiókot az Azure-előfizetését használja.</span><span class="sxs-lookup"><span data-stu-id="e5843-128">You can create one or more database accounts using your Azure subscription.</span></span> <span data-ttu-id="e5843-129">További tudnivalókért keresse fel a [árképzést ismertető oldalra](https://azure.microsoft.com/pricing/details/cosmos-db/).</span><span class="sxs-lookup"><span data-stu-id="e5843-129">For more information, visit our [pricing page](https://azure.microsoft.com/pricing/details/cosmos-db/).</span></span> |
| <span data-ttu-id="e5843-130">Adatbázis</span><span class="sxs-lookup"><span data-stu-id="e5843-130">Database</span></span> |<span data-ttu-id="e5843-131">Egy adatbázis a dokumentumtároló gyűjtemények között particionált logikai tárolója.</span><span class="sxs-lookup"><span data-stu-id="e5843-131">A database is a logical container of document storage partitioned across collections.</span></span> <span data-ttu-id="e5843-132">Akkor is a felhasználók tárolójába kerülnek.</span><span class="sxs-lookup"><span data-stu-id="e5843-132">It is also a users container.</span></span> |
| <span data-ttu-id="e5843-133">Felhasználó</span><span class="sxs-lookup"><span data-stu-id="e5843-133">User</span></span> |<span data-ttu-id="e5843-134">Az engedélyek hatókörének logikai névtere.</span><span class="sxs-lookup"><span data-stu-id="e5843-134">The logical namespace for scoping permissions.</span></span> |
| <span data-ttu-id="e5843-135">Engedély</span><span class="sxs-lookup"><span data-stu-id="e5843-135">Permission</span></span> |<span data-ttu-id="e5843-136">Egy adott erőforráshoz való hozzáférés egy felhasználó társított engedélyezési jogkivonatot.</span><span class="sxs-lookup"><span data-stu-id="e5843-136">An authorization token associated with a user for access to a specific resource.</span></span> |
| <span data-ttu-id="e5843-137">Gyűjtemény</span><span class="sxs-lookup"><span data-stu-id="e5843-137">Collection</span></span> |<span data-ttu-id="e5843-138">A gyűjtemény egy JSON-dokumentumokat és a kapcsolódó JavaScript-alkalmazáslogikát tartalmazó tároló.</span><span class="sxs-lookup"><span data-stu-id="e5843-138">A collection is a container of JSON documents and the associated JavaScript application logic.</span></span> <span data-ttu-id="e5843-139">Egy gyűjtemény egy számlázható entitás, ahol a [költség](performance-levels.md) a gyűjteményhez társított teljesítményszint határozza meg.</span><span class="sxs-lookup"><span data-stu-id="e5843-139">A collection is a billable entity, where the [cost](performance-levels.md) is determined by the performance level associated with the collection.</span></span> <span data-ttu-id="e5843-140">A gyűjtemények egy vagy több partícióra/kiszolgálóra is kiterjedhetnek, valamint gyakorlatilag korlátlan mennyiségű tárterület vagy átviteli sebesség kezelésére méretezhetők.</span><span class="sxs-lookup"><span data-stu-id="e5843-140">Collections can span one or more partitions/servers and can scale to handle practically unlimited volumes of storage or throughput.</span></span> |
| <span data-ttu-id="e5843-141">Tárolt eljárás</span><span class="sxs-lookup"><span data-stu-id="e5843-141">Stored Procedure</span></span> |<span data-ttu-id="e5843-142">Egy gyűjtemény regisztrált és tranzakciós úton futtatásuk az adatbázismotor JavaScript nyelven írt alkalmazás logikáját.</span><span class="sxs-lookup"><span data-stu-id="e5843-142">Application logic written in JavaScript which is registered with a collection and transactionally executed within the database engine.</span></span> |
| <span data-ttu-id="e5843-143">Eseményindító</span><span class="sxs-lookup"><span data-stu-id="e5843-143">Trigger</span></span> |<span data-ttu-id="e5843-144">Az alkalmazáslogikát végrehajtása előtt vagy után vagy egy INSERT utasítás, JavaScript nyelven írt cseréje vagy törlési művelet.</span><span class="sxs-lookup"><span data-stu-id="e5843-144">Application logic written in JavaScript executed before or after either an insert, replace or delete operation.</span></span> |
| <span data-ttu-id="e5843-145">AZ UDF</span><span class="sxs-lookup"><span data-stu-id="e5843-145">UDF</span></span> |<span data-ttu-id="e5843-146">JavaScript nyelven írt alkalmazás logikáját.</span><span class="sxs-lookup"><span data-stu-id="e5843-146">Application logic written in JavaScript.</span></span> <span data-ttu-id="e5843-147">Felhasználó által megadott függvények lehetővé teszik egy egyéni lekérdezés operátor modell, és ezáltal a DocumentDB API lekérdezési nyelv alapvető kiterjesztése.</span><span class="sxs-lookup"><span data-stu-id="e5843-147">UDFs enable you to model a custom query operator and thereby extend the core DocumentDB API query language.</span></span> |
| <span data-ttu-id="e5843-148">A dokumentum</span><span class="sxs-lookup"><span data-stu-id="e5843-148">Document</span></span> |<span data-ttu-id="e5843-149">Felhasználó által definiált (tetszőleges) JSON-tartalmak.</span><span class="sxs-lookup"><span data-stu-id="e5843-149">User defined (arbitrary) JSON content.</span></span> <span data-ttu-id="e5843-150">Alapértelmezés szerint nem tartozik séma kell definiálni, sem másodlagos indexek kell adni a gyűjteménybe felvett összes dokumentumot.</span><span class="sxs-lookup"><span data-stu-id="e5843-150">By default, no schema needs to be defined nor do secondary indices need to be provided for all the documents added to a collection.</span></span> |
| <span data-ttu-id="e5843-151">Melléklet</span><span class="sxs-lookup"><span data-stu-id="e5843-151">Attachment</span></span> |<span data-ttu-id="e5843-152">Egy mellékletet tartalmazó hivatkozásokat és a külső blob/médiához kapcsolódó metaadatok különleges dokumentumot.</span><span class="sxs-lookup"><span data-stu-id="e5843-152">An attachment is a special document containing references and associated metadata for external blob/media.</span></span> <span data-ttu-id="e5843-153">A fejlesztői választhat Cosmos DB kezeli a blob rendelkezik, vagy tárolja el azt egy külső blob-szolgáltatónál, például a onedrive-on, Dropbox, stb.</span><span class="sxs-lookup"><span data-stu-id="e5843-153">The developer can choose to have the blob managed by Cosmos DB or store it with an external blob service provider such as OneDrive, Dropbox, etc.</span></span> |

## <a name="system-vs-user-defined-resources"></a><span data-ttu-id="e5843-154">A rendszer és a felhasználó által definiált erőforrások</span><span class="sxs-lookup"><span data-stu-id="e5843-154">System vs. user defined resources</span></span>
<span data-ttu-id="e5843-155">Erőforrások, például adatbázis-fiókokat, adatbázisok, gyűjtemények, felhasználók, engedélyek, tárolt eljárások, eseményindítók és felhasználó által megadott függvények - rögzített sémájába rendelkeznek, és rendszererőforrásokat nevezzük.</span><span class="sxs-lookup"><span data-stu-id="e5843-155">Resources such as database accounts, databases, collections, users, permissions, stored procedures, triggers, and UDFs - all have a fixed schema and are called system resources.</span></span> <span data-ttu-id="e5843-156">Ezzel szemben erőforrások, például a dokumentumok és mellékletek nincs korlátozás a séma rendelkezik, és példák felhasználó által definiált erőforrások.</span><span class="sxs-lookup"><span data-stu-id="e5843-156">In contrast, resources such as documents and attachments have no restrictions on the schema and are examples of user defined resources.</span></span> <span data-ttu-id="e5843-157">A Cosmos DB, rendszer és a felhasználó definiált erőforrások képviselt és standard-kompatibilis JSON-ként kezeli.</span><span class="sxs-lookup"><span data-stu-id="e5843-157">In Cosmos DB, both system and user defined resources are represented and managed as standard-compliant JSON.</span></span> <span data-ttu-id="e5843-158">Minden erőforrás, a rendszer vagy felhasználó által definiált, a következő közös jellemzőkkel rendelkezik.</span><span class="sxs-lookup"><span data-stu-id="e5843-158">All resources, system or user defined, have the following common properties.</span></span>

> [!NOTE]
> <span data-ttu-id="e5843-159">Vegye figyelembe, hogy az összes rendszer az erőforrás tulajdonságai létre fűzve előtagként a saját JSON-megjelenítés aláhúzással (_).</span><span class="sxs-lookup"><span data-stu-id="e5843-159">Note that all system generated properties in a resource are prefixed with an underscore (_) in their JSON representation.</span></span>
> 
> 

<table>
    <tbody>
        <tr>
            <td valign="top"><p><span data-ttu-id="e5843-160"><strong>Tulajdonság</strong></span><span class="sxs-lookup"><span data-stu-id="e5843-160"><strong>Property</strong></span></span></p></td>
            <td valign="top"><p><span data-ttu-id="e5843-161"><strong>Állítható be a felhasználó vagy rendszer által létrehozott?</strong></span><span class="sxs-lookup"><span data-stu-id="e5843-161"><strong>User settable or system generated?</strong></span></span></p></td>
            <td valign="top"><p><span data-ttu-id="e5843-162"><strong>Cél</strong></span><span class="sxs-lookup"><span data-stu-id="e5843-162"><strong>Purpose</strong></span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="e5843-163">_rid</span><span class="sxs-lookup"><span data-stu-id="e5843-163">_rid</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="e5843-164">Rendszer által létrehozott</span><span class="sxs-lookup"><span data-stu-id="e5843-164">System generated</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="e5843-165">Rendszer által létrehozott, az erőforrás hierarchikus és egyedi azonosítója</span><span class="sxs-lookup"><span data-stu-id="e5843-165">System generated, unique and hierarchical identifier of the resource</span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="e5843-166">_etag</span><span class="sxs-lookup"><span data-stu-id="e5843-166">_etag</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="e5843-167">Rendszer által létrehozott</span><span class="sxs-lookup"><span data-stu-id="e5843-167">System generated</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="e5843-168">az egyidejű hozzáférések optimista vezérlését a szükséges erőforrás ETag</span><span class="sxs-lookup"><span data-stu-id="e5843-168">etag of the resource required for optimistic concurrency control</span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="e5843-169">_ts</span><span class="sxs-lookup"><span data-stu-id="e5843-169">_ts</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="e5843-170">Rendszer által létrehozott</span><span class="sxs-lookup"><span data-stu-id="e5843-170">System generated</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="e5843-171">Az erőforrás utolsó frissített időbélyegzője</span><span class="sxs-lookup"><span data-stu-id="e5843-171">Last updated timestamp of the resource</span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="e5843-172">_self</span><span class="sxs-lookup"><span data-stu-id="e5843-172">_self</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="e5843-173">Rendszer által létrehozott</span><span class="sxs-lookup"><span data-stu-id="e5843-173">System generated</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="e5843-174">Az erőforrás egyedi címmel rendelkező URI-azonosító</span><span class="sxs-lookup"><span data-stu-id="e5843-174">Unique addressable URI of the resource</span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="e5843-175">id</span><span class="sxs-lookup"><span data-stu-id="e5843-175">id</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="e5843-176">Rendszer által létrehozott</span><span class="sxs-lookup"><span data-stu-id="e5843-176">System generated</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="e5843-177">Felhasználó által definiált egyedi nevet az erőforrás (az azonos partíciós kulcs értéke).</span><span class="sxs-lookup"><span data-stu-id="e5843-177">User defined unique name of the resource (with the same partition key value).</span></span> <span data-ttu-id="e5843-178">Ha a felhasználó nem adja meg az azonosítót, egy azonosítót kell-e a rendszer által létrehozott</span><span class="sxs-lookup"><span data-stu-id="e5843-178">If the user does not specify an id, an id will be system generated</span></span></p></td>
        </tr>
    </tbody>
</table>

### <a name="wire-representation-of-resources"></a><span data-ttu-id="e5843-179">Átviteli megjelenítésűre erőforrások</span><span class="sxs-lookup"><span data-stu-id="e5843-179">Wire representation of resources</span></span>
<span data-ttu-id="e5843-180">Cosmos DB határozza meg, hogy saját fejlesztésű kiterjesztések számára a JSON standard vagy különleges kódolások; standard megfelelő JSON-dokumentumok együttműködik.</span><span class="sxs-lookup"><span data-stu-id="e5843-180">Cosmos DB does not mandate any proprietary extensions to the JSON standard or special encodings; it works with standard compliant JSON documents.</span></span>  

### <a name="addressing-a-resource"></a><span data-ttu-id="e5843-181">Egy erőforrás címzés</span><span class="sxs-lookup"><span data-stu-id="e5843-181">Addressing a resource</span></span>
<span data-ttu-id="e5843-182">Minden erőforrás URI-címmel rendelkező.</span><span class="sxs-lookup"><span data-stu-id="e5843-182">All resources are URI addressable.</span></span> <span data-ttu-id="e5843-183">Értékét a **_self** erőforrás tulajdonság adja meg az erőforrás relatív URI.</span><span class="sxs-lookup"><span data-stu-id="e5843-183">The value of the **_self** property of a resource represents the relative URI of the resource.</span></span> <span data-ttu-id="e5843-184">Az URI formátuma áll a /\<hírcsatorna\>/ {_rid} szegmenst:</span><span class="sxs-lookup"><span data-stu-id="e5843-184">The format of the URI consists of the /\<feed\>/{_rid} path segments:</span></span>  

| <span data-ttu-id="e5843-185">A _self értéke</span><span class="sxs-lookup"><span data-stu-id="e5843-185">Value of the _self</span></span> | <span data-ttu-id="e5843-186">Leírás</span><span class="sxs-lookup"><span data-stu-id="e5843-186">Description</span></span> |
| --- | --- |
| <span data-ttu-id="e5843-187">/dbs</span><span class="sxs-lookup"><span data-stu-id="e5843-187">/dbs</span></span> |<span data-ttu-id="e5843-188">Adatcsatorna adatbázisok egy adatbázis-fiókkal</span><span class="sxs-lookup"><span data-stu-id="e5843-188">Feed of databases under a database account</span></span> |
| <span data-ttu-id="e5843-189">/dbs/ {%{dbname/}</span><span class="sxs-lookup"><span data-stu-id="e5843-189">/dbs/{dbName}</span></span> |<span data-ttu-id="e5843-190">{%{Dbname/} értékével egyező azonosítójú adatbázis</span><span class="sxs-lookup"><span data-stu-id="e5843-190">Database with an id matching the value {dbName}</span></span> |
| <span data-ttu-id="e5843-191">{%{dbname/} /dbs/ /colls/</span><span class="sxs-lookup"><span data-stu-id="e5843-191">/dbs/{dbName}/colls/</span></span> |<span data-ttu-id="e5843-192">A gyűjtemények az adatbázis adatcsatorna</span><span class="sxs-lookup"><span data-stu-id="e5843-192">Feed of collections under a database</span></span> |
| <span data-ttu-id="e5843-193">{%{dbname/} /dbs/ /colls/ {collName}</span><span class="sxs-lookup"><span data-stu-id="e5843-193">/dbs/{dbName}/colls/{collName}</span></span> |<span data-ttu-id="e5843-194">{CollName} értékével egyező azonosítójú gyűjtemény</span><span class="sxs-lookup"><span data-stu-id="e5843-194">Collection with an id matching the value {collName}</span></span> |
| <span data-ttu-id="e5843-195">{%{dbname/} /dbs/ /colls/ {collName} / docs</span><span class="sxs-lookup"><span data-stu-id="e5843-195">/dbs/{dbName}/colls/{collName}/docs</span></span> |<span data-ttu-id="e5843-196">A gyűjtemény dokumentumok adatcsatorna</span><span class="sxs-lookup"><span data-stu-id="e5843-196">Feed of documents under a collection</span></span> |
| <span data-ttu-id="e5843-197">{%{dbname/} /dbs/ /colls/ {collName} /docs/ {dokumentumazonosító}</span><span class="sxs-lookup"><span data-stu-id="e5843-197">/dbs/{dbName}/colls/{collName}/docs/{docId}</span></span> |<span data-ttu-id="e5843-198">{Doc} értékével egyező azonosítójú dokumentálása</span><span class="sxs-lookup"><span data-stu-id="e5843-198">Document with an id matching the value {doc}</span></span> |
| <span data-ttu-id="e5843-199">{%{dbname/} /dbs/ /felhasználók/</span><span class="sxs-lookup"><span data-stu-id="e5843-199">/dbs/{dbName}/users/</span></span> |<span data-ttu-id="e5843-200">A felhasználók egy adatbázist a hírcsatorna</span><span class="sxs-lookup"><span data-stu-id="e5843-200">Feed of users under a database</span></span> |
| <span data-ttu-id="e5843-201">{%{dbname/} /dbs/ /felhasználók/ {userId}</span><span class="sxs-lookup"><span data-stu-id="e5843-201">/dbs/{dbName}/users/{userId}</span></span> |<span data-ttu-id="e5843-202">{Felhasználó} értékével egyező azonosítójú felhasználó</span><span class="sxs-lookup"><span data-stu-id="e5843-202">User with an id matching the value {user}</span></span> |
| <span data-ttu-id="e5843-203">{%{dbname/} /dbs/ /felhasználók/ {userId} / engedélyek</span><span class="sxs-lookup"><span data-stu-id="e5843-203">/dbs/{dbName}/users/{userId}/permissions</span></span> |<span data-ttu-id="e5843-204">Adatcsatorna egy felhasználói engedélyek</span><span class="sxs-lookup"><span data-stu-id="e5843-204">Feed of permissions under a user</span></span> |
| <span data-ttu-id="e5843-205">{%{dbname/} /dbs/ /felhasználók/ {userId} /permissions/ {permissionId}</span><span class="sxs-lookup"><span data-stu-id="e5843-205">/dbs/{dbName}/users/{userId}/permissions/{permissionId}</span></span> |<span data-ttu-id="e5843-206">{Engedély} értékével egyező azonosítójú engedély</span><span class="sxs-lookup"><span data-stu-id="e5843-206">Permission with an id matching the value {permission}</span></span> |

<span data-ttu-id="e5843-207">Minden erőforrás azonosítója tulajdonságon keresztül elérhetővé tett egyedi felhasználó által megadott névvel rendelkezik.</span><span class="sxs-lookup"><span data-stu-id="e5843-207">Each resource has a unique user defined name exposed via the id property.</span></span> <span data-ttu-id="e5843-208">Megjegyzés: a dokumentumok, ha a felhasználó nem adja meg az azonosító, a támogatott SDK-k automatikusan létrehoz egy egyedi azonosítót a dokumentum.</span><span class="sxs-lookup"><span data-stu-id="e5843-208">Note: for documents, if the user does not specify an id, our supported SDKs will automatically generate a unique id for the document.</span></span> <span data-ttu-id="e5843-209">Felhasználó által megadott karakterláncot, legfeljebb 256 karakter, amely egy adott szülő erőforrás keretén belül egyedi kell az azonosítót.</span><span class="sxs-lookup"><span data-stu-id="e5843-209">The id is a user defined string, of up to 256 characters that is unique within the context of a specific parent resource.</span></span> 

<span data-ttu-id="e5843-210">Az egyes erőforrások is rendelkeznek, a rendszer által létrehozott hierarchikus erőforrás-azonosítója (más néven a relatív AZONOSÍTÓK), _rid tulajdonságon keresztül elérhető.</span><span class="sxs-lookup"><span data-stu-id="e5843-210">Each resource also has a system generated hierarchical resource identifier (also referred to as an RID), which is available via the _rid property.</span></span> <span data-ttu-id="e5843-211">A relatív AZONOSÍTÓK kódolja a teljes hierarchia egy adott erőforrás és a hivatkozási integritás elosztott módon használt kényelmes belső megjelenítése.</span><span class="sxs-lookup"><span data-stu-id="e5843-211">The RID encodes the entire hierarchy of a given resource and it is a convenient internal representation used to enforce referential integrity in a distributed manner.</span></span> <span data-ttu-id="e5843-212">A relatív AZONOSÍTÓK egyedi belül egy adatbázis-fiókot, és belső használható Cosmos DB anélkül, hogy több partíció keresések hatékony útválasztást.</span><span class="sxs-lookup"><span data-stu-id="e5843-212">The RID is unique within a database account and it is internally used by Cosmos DB for efficient routing without requiring cross partition lookups.</span></span> <span data-ttu-id="e5843-213">A _self és _rid tulajdonságainak értékei erőforrás mind a másodlagos, és a kanonikus ábrázolásai.</span><span class="sxs-lookup"><span data-stu-id="e5843-213">The values of the _self and the  _rid properties are both alternate and canonical representations of a resource.</span></span> 

<span data-ttu-id="e5843-214">A REST API-k erőforrások címzést és útválasztást kérelem az azonosítója és a _rid tulajdonságok is támogatja.</span><span class="sxs-lookup"><span data-stu-id="e5843-214">The REST APIs support addressing of resources and routing of requests by both the id and the _rid properties.</span></span>

## <a name="database-accounts"></a><span data-ttu-id="e5843-215">Adatbázis-fiókok</span><span class="sxs-lookup"><span data-stu-id="e5843-215">Database accounts</span></span>
<span data-ttu-id="e5843-216">Megadhat egy vagy több Cosmos DB adatbázis fiókot az Azure-előfizetését használja.</span><span class="sxs-lookup"><span data-stu-id="e5843-216">You can provision one or more Cosmos DB database accounts using your Azure subscription.</span></span>

<span data-ttu-id="e5843-217">Létrehozhat és az Azure portálon: Cosmos DB adatbázis fiókok kezelése [http://portal.azure.com/](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="e5843-217">You can create and manage Cosmos DB database accounts via the Azure Portal at [http://portal.azure.com/](https://portal.azure.com/).</span></span> <span data-ttu-id="e5843-218">Létrehozását és kezelését egy adatbázis-fiók rendszergazdai hozzáférésre van szüksége, és csak az Azure-előfizetéshez tartozó hajtható végre.</span><span class="sxs-lookup"><span data-stu-id="e5843-218">Creating and managing a database account requires administrative access and can only be performed under your Azure subscription.</span></span> 

### <a name="database-account-properties"></a><span data-ttu-id="e5843-219">Adatbázis-fiók tulajdonságai</span><span class="sxs-lookup"><span data-stu-id="e5843-219">Database account properties</span></span>
<span data-ttu-id="e5843-220">Kiépítése és kezelése az adatbázisfiók részeként konfigurálja, és olvassa el a következő tulajdonságokkal:</span><span class="sxs-lookup"><span data-stu-id="e5843-220">As part of provisioning and managing a database account you can configure and read the following properties:</span></span>  

<table border="0" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td valign="top"><p><span data-ttu-id="e5843-221"><strong>Tulajdonság neve</strong></span><span class="sxs-lookup"><span data-stu-id="e5843-221"><strong>Property Name</strong></span></span></p></td>
            <td valign="top"><p><span data-ttu-id="e5843-222"><strong>Leírás</strong></span><span class="sxs-lookup"><span data-stu-id="e5843-222"><strong>Description</strong></span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="e5843-223">Konzisztencia-házirend</span><span class="sxs-lookup"><span data-stu-id="e5843-223">Consistency Policy</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="e5843-224">Állítsa ezt a tulajdonságot, konfigurálhatja az adatbázis-fiókjában a gyűjtemények alapértelmezett konzisztencia szintjét.</span><span class="sxs-lookup"><span data-stu-id="e5843-224">Set this property to configure the default consistency level for all the collections under your database account.</span></span> <span data-ttu-id="e5843-225">Felülírhatja a konzisztenciaszint használatával [x-ms-konzisztencia-szint] kérelemfejléc egy kérelem alapon.</span><span class="sxs-lookup"><span data-stu-id="e5843-225">You can override the consistency level on a per request basis using the [x-ms-consistency-level] request header.</span></span> <p><p><span data-ttu-id="e5843-226">Vegye figyelembe, hogy ez a tulajdonság csak vonatkozik a <i>felhasználó által definiált erőforrások</i>.</span><span class="sxs-lookup"><span data-stu-id="e5843-226">Note that this property only applies to the <i>user defined resources</i>.</span></span> <span data-ttu-id="e5843-227">Meghatározott források támogatására vannak konfigurálva az összes rendszer olvasás/lekérdezések erős konzisztencia.</span><span class="sxs-lookup"><span data-stu-id="e5843-227">All system defined resources are configured to support reads/queries with strong consistency.</span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="e5843-228">Engedélyezési kulcsok</span><span class="sxs-lookup"><span data-stu-id="e5843-228">Authorization Keys</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="e5843-229">Ezek azok az elsődleges és másodlagos fő- és a csak olvasható kulcsok, amelyek az erőforrásokat az adatbázis-fiókjában rendszergazdai hozzáférést biztosítanak.</span><span class="sxs-lookup"><span data-stu-id="e5843-229">These are the primary and secondary master and readonly keys that provide administrative access to all of the resources under the database account.</span></span></p></td>
        </tr>
    </tbody>
</table>

<span data-ttu-id="e5843-230">Vegye figyelembe, hogy mellett kiépítés, konfigurálása és kezelése a adatbázisfiókot az Azure portálon is szoftveresen is létrehozásakor és kezelésekor Cosmos DB adatbázis fiókok használatával a [Azure Cosmos DB REST API-k](/rest/api/documentdb/) , valamint [ügyfél SDK-k](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="e5843-230">Note that in addition to provisioning, configuring and managing your database account from the Azure Portal, you can also programmatically create and manage Cosmos DB database accounts by using the [Azure Cosmos DB REST APIs](/rest/api/documentdb/) as well as [client SDKs](documentdb-sdk-dotnet.md).</span></span>  

## <a name="databases"></a><span data-ttu-id="e5843-231">Adatbázisok</span><span class="sxs-lookup"><span data-stu-id="e5843-231">Databases</span></span>
<span data-ttu-id="e5843-232">Egy Cosmos DB adatbázisa egy logikai tároló egy vagy több gyűjtemények és a felhasználók, az alábbi ábrán látható módon.</span><span class="sxs-lookup"><span data-stu-id="e5843-232">A Cosmos DB database is a logical container of one or more collections and users, as shown in the following diagram.</span></span> <span data-ttu-id="e5843-233">Tetszőleges számú adatbázishoz egy Cosmos DB adatbázis fiókkal ajánlat korlátai hozhat létre.</span><span class="sxs-lookup"><span data-stu-id="e5843-233">You can create any number of databases under a Cosmos DB database account subject to offer limits.</span></span>  

<span data-ttu-id="e5843-234">![Fiók és a gyűjtemények hierarchikus adatbázismodell][2]</span><span class="sxs-lookup"><span data-stu-id="e5843-234">![Database account and collections hierarchical model][2]</span></span>  
<span data-ttu-id="e5843-235">**Egy adatbázis egy olyan logikai tároló, a felhasználók és gyűjtemények**</span><span class="sxs-lookup"><span data-stu-id="e5843-235">**A Database is a logical container of users and collections**</span></span>

<span data-ttu-id="e5843-236">Egy adatbázis gyakorlatilag korlátlan dokumentumtároló gyűjtemények belül particionált tartalmazhat.</span><span class="sxs-lookup"><span data-stu-id="e5843-236">A database can contain virtually unlimited document storage partitioned within collections.</span></span>

### <a name="elastic-scale-of-a-cosmos-db-database"></a><span data-ttu-id="e5843-237">Rugalmasan méretezhető Cosmos DB-adatbázis</span><span class="sxs-lookup"><span data-stu-id="e5843-237">Elastic scale of a Cosmos DB database</span></span>
<span data-ttu-id="e5843-238">A Cosmos DB adatbázisa alapértelmezés – petabájt dokumentumtároló biztonsági SSD és a létesített átviteli sebesség és a néhány GB közötti rugalmas.</span><span class="sxs-lookup"><span data-stu-id="e5843-238">A Cosmos DB database is elastic by default – ranging from a few GB to petabytes of SSD backed document storage and provisioned throughput.</span></span> 

<span data-ttu-id="e5843-239">Ellentétben a hagyományos RDBMS adatbázis Cosmos-adatbázis egy adatbázis nem egyetlen gép hatókörét.</span><span class="sxs-lookup"><span data-stu-id="e5843-239">Unlike a database in traditional RDBMS, a database in Cosmos DB is not scoped to a single machine.</span></span> <span data-ttu-id="e5843-240">A Cosmos DB az alkalmazás skálázási igények nő, létrehozhat több gyűjteményt, adatbázisok vagy mindkettőt.</span><span class="sxs-lookup"><span data-stu-id="e5843-240">With Cosmos DB, as your application’s scale needs to grow, you can create more collections, databases, or both.</span></span> <span data-ttu-id="e5843-241">Valóban különböző első felek alkalmazásainak a Microsofton belül használt Cosmos DB egy fogyasztói léptékű által a dokumentumtároló terabájt az egyes gyűjtemények tartalmazó ezer rendkívül nagy Cosmos DB adatbázisok létrehozásához.</span><span class="sxs-lookup"><span data-stu-id="e5843-241">Indeed, various first party applications within Microsoft have been using Cosmos DB at a consumer scale by creating extremely large Cosmos DB databases each containing thousands of collections with terabytes of document storage.</span></span> <span data-ttu-id="e5843-242">Növekedhet, és egy adatbázis zsugorítása hozzáadásával vagy eltávolításával a gyűjtemények az alkalmazás méretezési követelmények teljesítéséhez.</span><span class="sxs-lookup"><span data-stu-id="e5843-242">You can grow or shrink a database by adding or removing collections to meet your application’s scale requirements.</span></span> 

<span data-ttu-id="e5843-243">Az ajánlat függvényében adatbázisban lévő gyűjtemények tetszőleges számú hozhat létre.</span><span class="sxs-lookup"><span data-stu-id="e5843-243">You can create any number of collections within a database subject to the offer.</span></span> <span data-ttu-id="e5843-244">Minden gyűjtemény rendelkezik, a biztonsági SSD-tárolóba, a kiválasztott teljesítményszint függvényében meg kiosztott átviteli sebesség.</span><span class="sxs-lookup"><span data-stu-id="e5843-244">Each collection has SSD backed storage and throughput provisioned for you depending on the selected performance tier.</span></span>

<span data-ttu-id="e5843-245">A Cosmos DB adatbázis is egy olyan tároló, a felhasználók.</span><span class="sxs-lookup"><span data-stu-id="e5843-245">A Cosmos DB database is also a container of users.</span></span> <span data-ttu-id="e5843-246">Egy felhasználó, szolgálna, az engedélyek egy készletét, amely minden részletre kiterjedő engedélyezési és a gyűjtemények, dokumentumok és mellékletek eléréséhez logikai névterét.</span><span class="sxs-lookup"><span data-stu-id="e5843-246">A user, in-turn, is a logical namespace for a set of permissions that provides fine-grained authorization and access to collections, documents and attachments.</span></span>  

<span data-ttu-id="e5843-247">Egyéb erőforrásokat a Cosmos DB erőforrás-modellje, adatbázisokat hozhatja létre, cserélni, törlése, olvasása, illetve a segítségével könnyen számba a [REST API-k](/rest/api/documentdb/) vagy annak bármelyik a [ügyfél SDK-k](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="e5843-247">As with other resources in the Cosmos DB resource model, databases can be created, replaced, deleted, read or enumerated easily using either the [REST APIs](/rest/api/documentdb/) or any of the [client SDKs](documentdb-sdk-dotnet.md).</span></span> <span data-ttu-id="e5843-248">Cosmos DB vagy kérdez le a metaadatokat egy adatbázis-erőforrást az erős konzisztencia biztosítja.</span><span class="sxs-lookup"><span data-stu-id="e5843-248">Cosmos DB guarantees strong consistency for reading or querying the metadata of a database resource.</span></span> <span data-ttu-id="e5843-249">Egy adatbázis törlése automatikusan biztosítja, hogy nem tud hozzáférni a gyűjtemények vagy az abban szereplő felhasználók.</span><span class="sxs-lookup"><span data-stu-id="e5843-249">Deleting a database automatically ensures that you cannot access any of the collections or users contained within it.</span></span>   

## <a name="collections"></a><span data-ttu-id="e5843-250">Gyűjtemények</span><span class="sxs-lookup"><span data-stu-id="e5843-250">Collections</span></span>
<span data-ttu-id="e5843-251">A Cosmos DB gyűjtemény egy olyan tároló, a JSON-dokumentumok.</span><span class="sxs-lookup"><span data-stu-id="e5843-251">A Cosmos DB collection is a container for your JSON documents.</span></span> 

### <a name="elastic-ssd-backed-document-storage"></a><span data-ttu-id="e5843-252">Rugalmas biztonsági SSD-dokumentumtároló</span><span class="sxs-lookup"><span data-stu-id="e5843-252">Elastic SSD backed document storage</span></span>
<span data-ttu-id="e5843-253">Egy gyűjtemény belsőleg rugalmas – automatikusan növekszik, és vegye fel vagy távolítsa el a dokumentumok mértékben változik.</span><span class="sxs-lookup"><span data-stu-id="e5843-253">A collection is intrinsically elastic - it automatically grows and shrinks as you add or remove documents.</span></span> <span data-ttu-id="e5843-254">Gyűjtemények logikai erőforrások, egy vagy több fizikai partíciók, sem kiszolgálók is kiterjedhetnek.</span><span class="sxs-lookup"><span data-stu-id="e5843-254">Collections are logical resources and can span one or more physical partitions or servers.</span></span> <span data-ttu-id="e5843-255">A gyűjteményen belül partíciók száma Cosmos DB a tárhely méretét és a létesített átviteli sebesség a gyűjtemény alapján határozza meg.</span><span class="sxs-lookup"><span data-stu-id="e5843-255">The number of partitions within a collection is determined by Cosmos DB based on the storage size and the provisioned throughput of your collection.</span></span> <span data-ttu-id="e5843-256">Minden partíció Cosmos DB SSD-biztonsági tárolási társítva a rögzített méretű rendelkezik, és a magas rendelkezésre állású replikálódik.</span><span class="sxs-lookup"><span data-stu-id="e5843-256">Every partition in Cosmos DB has a fixed amount of SSD-backed storage associated with it, and is replicated for high availability.</span></span> <span data-ttu-id="e5843-257">Partíció felügyeleti teljes mértékben felügyelt Azure Cosmos DB, és komplex kódot írnia, vagy a partíciók kezelésére nem rendelkeznek.</span><span class="sxs-lookup"><span data-stu-id="e5843-257">Partition management is fully managed by Azure Cosmos DB, and you do not have to write complex code or manage your partitions.</span></span> <span data-ttu-id="e5843-258">A cosmos DB gyűjtemények **gyakorlatilag korlátlan** tárolási és átviteli tekintetében.</span><span class="sxs-lookup"><span data-stu-id="e5843-258">Cosmos DB collections are **practically unlimited** in terms of storage and throughput.</span></span> 

### <a name="automatic-indexing-of-collections"></a><span data-ttu-id="e5843-259">Az automatikus indexeléshez gyűjtemények</span><span class="sxs-lookup"><span data-stu-id="e5843-259">Automatic indexing of collections</span></span>
<span data-ttu-id="e5843-260">Cosmos DB egy valódi sémamentes adatbázisrendszer.</span><span class="sxs-lookup"><span data-stu-id="e5843-260">Cosmos DB is a true schema-free database system.</span></span> <span data-ttu-id="e5843-261">Az feltételez vagy igényel semmilyen sémát a JSON-dokumentumok.</span><span class="sxs-lookup"><span data-stu-id="e5843-261">It does not assume or require any schema for the JSON documents.</span></span> <span data-ttu-id="e5843-262">Egy gyűjteményhez való hozzáadása során dokumentumok, Cosmos DB automatikusan elvégzi a őket, és elérhetők lekérdezését.</span><span class="sxs-lookup"><span data-stu-id="e5843-262">As you add documents to a collection, Cosmos DB automatically indexes them and they are available for you to query.</span></span> <span data-ttu-id="e5843-263">Automatikus indexelés dokumentumok anélkül, hogy a séma vagy a másodlagos indexek Cosmos-adatbázis kulcs képesség és írási optimalizált, a zárolás szabad és a naplószerkezetű karbantartási eljárások szerint engedélyezve van.</span><span class="sxs-lookup"><span data-stu-id="e5843-263">Automatic indexing of documents without requiring schema or secondary indexes is a key capability of Cosmos DB and is enabled by write-optimized, lock-free and log-structured index maintenance techniques.</span></span> <span data-ttu-id="e5843-264">Cosmos DB konzisztens lekérdezések szolgálatban nagyon gyorsan írások tartós kötet támogatja.</span><span class="sxs-lookup"><span data-stu-id="e5843-264">Cosmos DB supports sustained volume of extremely fast writes while still serving consistent queries.</span></span> <span data-ttu-id="e5843-265">A dokumentum és a index tárolási rendszer kiszámítja a minden gyűjtemény által felhasznált tárterület.</span><span class="sxs-lookup"><span data-stu-id="e5843-265">Both document and index storage are used to calculate the storage consumed by each collection.</span></span> <span data-ttu-id="e5843-266">A tárterületi és teljesítménybeli kompromisszumot társított indexelő az indexelési házirendet egy gyűjtemény konfigurálásával szabályozhatja.</span><span class="sxs-lookup"><span data-stu-id="e5843-266">You can control the storage and performance trade-offs associated with indexing by configuring the indexing policy for a collection.</span></span> 

### <a name="configuring-the-indexing-policy-of-a-collection"></a><span data-ttu-id="e5843-267">Az indexelési házirendet gyűjtemény konfigurálása</span><span class="sxs-lookup"><span data-stu-id="e5843-267">Configuring the indexing policy of a collection</span></span>
<span data-ttu-id="e5843-268">Az indexelési házirendet az egyes gyűjtemények lehetővé teszi, hogy a teljesítmény- és tárolási kompromisszumot indexelő társított.</span><span class="sxs-lookup"><span data-stu-id="e5843-268">The indexing policy of each collection allows you to make performance and storage trade-offs associated with indexing.</span></span> <span data-ttu-id="e5843-269">Az alábbi beállítások érhetők el Önnek az indexelő konfiguráció részeként:</span><span class="sxs-lookup"><span data-stu-id="e5843-269">The following options are available to you as part of indexing configuration:</span></span>  

* <span data-ttu-id="e5843-270">Válassza ki, hogy a gyűjtemény automatikusan elvégzi a valamennyi dokumentumot vagy sem.</span><span class="sxs-lookup"><span data-stu-id="e5843-270">Choose whether the collection automatically indexes all of the documents or not.</span></span> <span data-ttu-id="e5843-271">Alapértelmezés szerint automatikusan indexeli ugyan összes dokumentumot.</span><span class="sxs-lookup"><span data-stu-id="e5843-271">By default, all documents are automatically indexed.</span></span> <span data-ttu-id="e5843-272">Ha szeretné, kapcsolja ki az automatikus indexeléshez, és csak bizonyos dokumentumokhoz szelektív felvétele az index.</span><span class="sxs-lookup"><span data-stu-id="e5843-272">You can choose to turn off automatic indexing and selectively add only specific documents to the index.</span></span> <span data-ttu-id="e5843-273">Ezzel szemben dönthet úgy, szelektív módon kizárása csak bizonyos dokumentumokhoz.</span><span class="sxs-lookup"><span data-stu-id="e5843-273">Conversely, you can selectively choose to exclude only specific documents.</span></span> <span data-ttu-id="e5843-274">Ez érhet el, az automatikus tulajdonság igaz vagy hamis, a gyűjtemény indexingPolicy beállítása és használata [x-ms-indexingdirective] kérelemfejléc beszúrni, cseréje vagy dokumentum törlése közben.</span><span class="sxs-lookup"><span data-stu-id="e5843-274">You can achieve this by setting the automatic property to be true or false on the indexingPolicy of a collection and using the [x-ms-indexingdirective] request header while inserting, replacing or deleting a document.</span></span>  
* <span data-ttu-id="e5843-275">Válasszon, hogy vagy egyedi elérési utak vagy dokumentumok minták kizárja az indexből.</span><span class="sxs-lookup"><span data-stu-id="e5843-275">Choose whether to include or exclude specific paths or patterns in your documents from the index.</span></span> <span data-ttu-id="e5843-276">Érhet el ez a beállítás includedPaths és a gyűjtemény indexingPolicy excludedPaths rendre.</span><span class="sxs-lookup"><span data-stu-id="e5843-276">You can achieve this by setting includedPaths and excludedPaths on the indexingPolicy of a collection respectively.</span></span> <span data-ttu-id="e5843-277">A tárterületi és teljesítménybeli kompromisszumot ideális tartomány- és kivonatoló a megadott elérési út minták is konfigurálhatja.</span><span class="sxs-lookup"><span data-stu-id="e5843-277">You can also configure the storage and performance trade-offs for range and hash queries for specific path patterns.</span></span> 
* <span data-ttu-id="e5843-278">Itt választhat szinkron (konzisztens) és aszinkron (lazy) index frissítéseket.</span><span class="sxs-lookup"><span data-stu-id="e5843-278">Choose between synchronous (consistent) and asynchronous (lazy) index updates.</span></span> <span data-ttu-id="e5843-279">Alapértelmezés szerint az index frissítése szinkron módon minden insert, replace vagy egy dokumentumot – így a gyűjtemény törlése.</span><span class="sxs-lookup"><span data-stu-id="e5843-279">By default, the index is updated synchronously on each insert, replace or delete of a document to the collection.</span></span> <span data-ttu-id="e5843-280">Ez lehetővé teszi, hogy a lekérdezések tiszteletben konzisztencia szintjét, a dokumentum olvasása.</span><span class="sxs-lookup"><span data-stu-id="e5843-280">This enables the queries to honor the same consistency level as that of the document reads.</span></span> <span data-ttu-id="e5843-281">Cosmos DB írási optimalizálva, és támogatja a tartós kötetek dokumentum írások szinkron index karbantartási és egységes lekérdezések szolgáltató együtt, konfigurálhatja az egyes gyűjtemények indexét lazily frissítése.</span><span class="sxs-lookup"><span data-stu-id="e5843-281">While Cosmos DB is write optimized and supports sustained volumes of document writes along with synchronous index maintenance and serving consistent queries, you can configure certain collections to update their index lazily.</span></span> <span data-ttu-id="e5843-282">A lusta indexelési a hanghatások írási további, és tömeges adatfeldolgozást forgatókönyvek elsősorban az olvasási műveleteket gyűjtemények ideális.</span><span class="sxs-lookup"><span data-stu-id="e5843-282">Lazy indexing boosts the write performance further and is ideal for bulk ingestion scenarios for primarily read-heavy collections.</span></span>

<span data-ttu-id="e5843-283">Az indexelési házirendet a gyűjteményen hajtja végre a PUT módosítható.</span><span class="sxs-lookup"><span data-stu-id="e5843-283">The indexing policy can be changed by executing a PUT on the collection.</span></span> <span data-ttu-id="e5843-284">Ez lehet érhető el, vagy a [ügyfél SDK](documentdb-sdk-dotnet.md), a [Azure Portal](https://portal.azure.com) vagy a [REST API-k](/rest/api/documentdb/).</span><span class="sxs-lookup"><span data-stu-id="e5843-284">This can be achieved either through the [client SDK](documentdb-sdk-dotnet.md), the [Azure Portal](https://portal.azure.com) or the [REST APIs](/rest/api/documentdb/).</span></span>

### <a name="querying-a-collection"></a><span data-ttu-id="e5843-285">A gyűjtemény lekérdezése</span><span class="sxs-lookup"><span data-stu-id="e5843-285">Querying a collection</span></span>
<span data-ttu-id="e5843-286">A dokumentumok a gyűjteményen belül lehet tetszőleges sémák és lekérdezheti a dokumentumok egy gyűjteményen belül anélkül, hogy semmilyen sémát, illetve másodlagos indexek előzetes megfizetése esetén.</span><span class="sxs-lookup"><span data-stu-id="e5843-286">The documents within a collection can have arbitrary schemas and you can query documents within a collection without providing any schema or secondary indices upfront.</span></span> <span data-ttu-id="e5843-287">A gyűjtemény segítségével lekérheti a [Azure Cosmos DB DocumentDB API: SQL-szintaxis hivatkozás](https://msdn.microsoft.com/library/azure/dn782250.aspx), pedig a gazdag hierarchikus, relációs és térbeli operátorokat és bővíthetőséget JavaScript-alapú felhasználó által megadott függvények biztosítja.</span><span class="sxs-lookup"><span data-stu-id="e5843-287">You can query the collection using the [Azure Cosmos DB DocumentDB API: SQL syntax reference](https://msdn.microsoft.com/library/azure/dn782250.aspx), which provides rich hierarchical, relational, and spatial operators and extensibility via JavaScript-based UDFs.</span></span> <span data-ttu-id="e5843-288">A JSON-szintaxis lehetővé teszi, hogy a fa csomópontjai címkék JSON-dokumentumok fákként modellezési.</span><span class="sxs-lookup"><span data-stu-id="e5843-288">JSON grammar allows for modeling JSON documents as trees with labels as the tree nodes.</span></span> <span data-ttu-id="e5843-289">Ez lehet kihasználni a egyaránt DocumentDB API automatikus indexelési technikái, valamint a DocumentDB API SQL dialektusa szerint.</span><span class="sxs-lookup"><span data-stu-id="e5843-289">This is exploited both by DocumentDB API’s automatic indexing techniques as well as DocumentDB API's SQL dialect.</span></span> <span data-ttu-id="e5843-290">A DocumetDB API lekérdezési nyelv három fő szempontjait foglalja magában:</span><span class="sxs-lookup"><span data-stu-id="e5843-290">The DocumetDB API query language consists of three main aspects:</span></span>   

1. <span data-ttu-id="e5843-291">A lekérdezési műveletek, amelyek kapcsolódnak a faszerkezetben, beleértve a hierarchikus lekérdezések és leképezések természetes egy kis készletét.</span><span class="sxs-lookup"><span data-stu-id="e5843-291">A small set of query operations that map naturally to the tree structure including hierarchical queries and projections.</span></span> 
2. <span data-ttu-id="e5843-292">Egy relációs műveleteket, köztük a összeállításban, szűrő, leképezések, összesítések és automatikus illesztések részét.</span><span class="sxs-lookup"><span data-stu-id="e5843-292">A subset of relational operations including composition, filter, projections, aggregates and self joins.</span></span> 
3. <span data-ttu-id="e5843-293">Tiszta JavaScript-alapú, amelyek használhatók a felhasználó által megadott függvények (1) és (2).</span><span class="sxs-lookup"><span data-stu-id="e5843-293">Pure JavaScript based UDFs that work with (1) and (2).</span></span>  

<span data-ttu-id="e5843-294">A Cosmos DB lekérdezési modelljét megkísérli egyensúlyt biztosítanak a funkciót, hatékonyságát és egyszerűség között.</span><span class="sxs-lookup"><span data-stu-id="e5843-294">The Cosmos DB query model attempts to strike a balance between functionality, efficiency and simplicity.</span></span> <span data-ttu-id="e5843-295">A Cosmos-adatbázis adatbázis-kezelő natív módon lefordítja a, és az SQL lekérdezési utasítás végrehajtása.</span><span class="sxs-lookup"><span data-stu-id="e5843-295">The Cosmos DB database engine natively compiles and executes the SQL query statements.</span></span> <span data-ttu-id="e5843-296">A gyűjtemény segítségével lekérheti a [REST API-k](/rest/api/documentdb/) vagy annak bármelyik a [ügyfél SDK-k](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="e5843-296">You can query a collection using the [REST APIs](/rest/api/documentdb/) or any of the [client SDKs](documentdb-sdk-dotnet.md).</span></span> <span data-ttu-id="e5843-297">A .NET SDK tartalmaz egy LINQ szolgáltatónál.</span><span class="sxs-lookup"><span data-stu-id="e5843-297">The .NET SDK comes with a LINQ provider.</span></span>

> [!TIP]
> <span data-ttu-id="e5843-298">Próbálja ki a DocumentDB API-t, és az adatkészletet az SQL-lekérdezések futtatásához a [Tesztlekérdezéseket](https://www.documentdb.com/sql/demo).</span><span class="sxs-lookup"><span data-stu-id="e5843-298">You can try out the DocumentDB API and run SQL queries against our dataset in the [Query Playground](https://www.documentdb.com/sql/demo).</span></span>
> 
> 

## <a name="multi-document-transactions"></a><span data-ttu-id="e5843-299">Többdokumentumos tranzakció</span><span class="sxs-lookup"><span data-stu-id="e5843-299">Multi-document transactions</span></span>
<span data-ttu-id="e5843-300">Adatbázis-tranzakció biztonságos és megbízható programozási modellt biztosít a való egyidejű adatokban bekövetkező változásokat.</span><span class="sxs-lookup"><span data-stu-id="e5843-300">Database transactions provide a safe and predictable programming model for dealing with concurrent changes to the data.</span></span> <span data-ttu-id="e5843-301">RDBMS, az üzleti logika írását a hagyományos módon, hogy írási **tárolt eljárások** és/vagy **eseményindítók** töltse az adatbázis-kiszolgáló tranzakciós végrehajtásához.</span><span class="sxs-lookup"><span data-stu-id="e5843-301">In RDBMS, the traditional way to write business logic is to write **stored-procedures** and/or **triggers** and ship it to the database server for transactional execution.</span></span> <span data-ttu-id="e5843-302">A RDBMS az alkalmazás-programozó két különböző programnyelveken kezeléséhez szükséges:</span><span class="sxs-lookup"><span data-stu-id="e5843-302">In RDBMS, the application programmer is required to deal with two disparate programming languages:</span></span> 

* <span data-ttu-id="e5843-303">A (nem tranzakciós) alkalmazás programozási nyelv (pl. JavaScript, Python, C#, Java, stb.)</span><span class="sxs-lookup"><span data-stu-id="e5843-303">The (non-transactional) application programming language (e.g. JavaScript, Python, C#, Java, etc.)</span></span>
* <span data-ttu-id="e5843-304">T-SQL, a tranzakciós programozási nyelv, amely natív módon futtatja az adatbázis</span><span class="sxs-lookup"><span data-stu-id="e5843-304">T-SQL, the transactional programming language which is natively executed by the database</span></span>

<span data-ttu-id="e5843-305">Alapján a mély elkötelezettségének JavaScript és JSON közvetlenül az adatbázis motorján belül, Cosmos DB egy intuitív programozási modellt biztosít feldolgozás alatt álló alapú JavaScript-alkalmazáslogika közvetlenül a gyűjtemények, tárolt eljárások és eseményindítók tekintetében.</span><span class="sxs-lookup"><span data-stu-id="e5843-305">By virtue of its deep commitment to JavaScript and JSON directly within the database engine, Cosmos DB provides an intuitive programming model for executing JavaScript based application logic directly on the collections in terms of stored procedures and triggers.</span></span> <span data-ttu-id="e5843-306">Ez lehetővé teszi, hogy mind a következők:</span><span class="sxs-lookup"><span data-stu-id="e5843-306">This allows for both of the following:</span></span>

* <span data-ttu-id="e5843-307">Párhuzamossági hatékony végrehajtásának szabályozásához helyreállítási, automatikus a JSON objektumgrafikonok közvetlenül a az adatbázismotor indexelése</span><span class="sxs-lookup"><span data-stu-id="e5843-307">Efficient implementation of concurrency control, recovery, automatic indexing of the JSON object graphs directly in the database engine</span></span>
* <span data-ttu-id="e5843-308">Természetesen kifejező folyamatábrán, változó hatókörének, hozzárendelése és kivételkezelő primitívek az adatbázis tranzakcióihoz közvetlenül tekintetében a JavaScript programozási nyelv integrációja</span><span class="sxs-lookup"><span data-stu-id="e5843-308">Naturally expressing control flow, variable scoping, assignment and integration of exception handling primitives with database transactions directly in terms of the JavaScript programming language</span></span>

<span data-ttu-id="e5843-309">A JavaScript-logika regisztrálva, a gyűjtemény szintjén majd adhat ki az adott gyűjtemény a dokumentumok a Helyadatbázis-műveletek.</span><span class="sxs-lookup"><span data-stu-id="e5843-309">The JavaScript logic registered at a collection level can then issue database operations on the documents of the given collection.</span></span> <span data-ttu-id="e5843-310">A cosmos DB implicit módon becsomagolja a JavaScript-alapú tárolt eljárások és eseményindítók belül egy környezeti ACID-tranzakciókat pillanatkép-elkülönítéssel egy gyűjteményen belül dokumentumok között.</span><span class="sxs-lookup"><span data-stu-id="e5843-310">Cosmos DB implicitly wraps the JavaScript based stored procedures and triggers within an ambient ACID transactions with snapshot isolation across documents within a collection.</span></span> <span data-ttu-id="e5843-311">Ha a futtatása során a JavaScript kivételt jelez, a teljes tranzakció megszakad.</span><span class="sxs-lookup"><span data-stu-id="e5843-311">During the course of its execution, if the JavaScript throws an exception, then the entire transaction is aborted.</span></span> <span data-ttu-id="e5843-312">Az eredményül kapott programozási modell egy nagyon egyszerű még hatékony.</span><span class="sxs-lookup"><span data-stu-id="e5843-312">The resulting programming model is a very simple yet powerful.</span></span> <span data-ttu-id="e5843-313">JavaScript fejlesztők "tartós" programozási modellt kap a szalagtár primitívek, valamint a megszokott nyelvi szerkezetek továbbra is használatakor.</span><span class="sxs-lookup"><span data-stu-id="e5843-313">JavaScript developers get a “durable” programming model while still using their familiar language constructs and library primitives.</span></span>   

<span data-ttu-id="e5843-314">JavaScript végrehajtása közvetlenül az adatbázismotor ugyanazt a címtartományt, a pufferkészlet belül teszi lehetővé teszi, hogy performant és adatbázis-művelet a dokumentumokon végzett gyűjtemény tranzakciós végrehajtását.</span><span class="sxs-lookup"><span data-stu-id="e5843-314">The ability to execute JavaScript directly within the database engine in the same address space as the buffer pool enables performant and transactional execution of database operations against the documents of a collection.</span></span> <span data-ttu-id="e5843-315">Cosmos-adatbázis adatbázis-kezelő lehetővé teszi a JSON mély kötelezettségvállalás továbbá JavaScript megszünteti az a típus rendszerek alkalmazás és az adatbázis bármely impedancia eltérő.</span><span class="sxs-lookup"><span data-stu-id="e5843-315">Furthermore, Cosmos DB database engine makes a deep commitment to the JSON and JavaScript eliminates any impedance mismatch between the type systems of application and the database.</span></span>   

<span data-ttu-id="e5843-316">Gyűjtemény létrehozása után is regisztrált tárolt eljárások, eseményindítók és felhasználó által megadott függvények egy gyűjtemény használja a [REST API-k](/rest/api/documentdb/) vagy annak bármelyik a [ügyfél SDK-k](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="e5843-316">After creating a collection, you can register stored procedures, triggers and UDFs with a collection using the [REST APIs](/rest/api/documentdb/) or any of the [client SDKs](documentdb-sdk-dotnet.md).</span></span> <span data-ttu-id="e5843-317">A regisztrációt követően hivatkoznak, és azokat hajtható végre.</span><span class="sxs-lookup"><span data-stu-id="e5843-317">After registration, you can reference and execute them.</span></span> <span data-ttu-id="e5843-318">Vegye figyelembe a következő tárolt eljárás teljesen JavaScript nyelven írt, az alábbi kódot két argumentummal (könyv nevét és Szerző neve) és új dokumentum létrehozása, lekérdezi egy dokumentumot, és frissíti azt – összes egy implicit ACID-tranzakción belül.</span><span class="sxs-lookup"><span data-stu-id="e5843-318">Consider the following stored procedure written entirely in JavaScript, the code below takes two arguments (book name and author name) and creates a new document, queries for a document and then updates it – all within an implicit ACID transaction.</span></span> <span data-ttu-id="e5843-319">A végrehajtás során bármikor Ha a JavaScript kivételt vált ki, a teljes tranzakció megszakítása.</span><span class="sxs-lookup"><span data-stu-id="e5843-319">At any point during the execution, if a JavaScript exception is thrown, the entire transaction aborts.</span></span>

    function businessLogic(name, author) {
        var context = getContext();
        var collectionManager = context.getCollection();        
        var collectionLink = collectionManager.getSelfLink()

        // create a new document.
        collectionManager.createDocument(collectionLink,
            {id: name, author: author},
            function(err, documentCreated) {
                if(err) throw new Error(err.message);

                // filter documents by author
                var filterQuery = "SELECT * from root r WHERE r.author = 'George R.'";
                collectionManager.queryDocuments(collectionLink,
                    filterQuery,
                    function(err, matchingDocuments) {
                        if(err) throw new Error(err.message);

                        context.getResponse().setBody(matchingDocuments.length);

                        // Replace the author name for all documents that satisfied the query.
                        for (var i = 0; i < matchingDocuments.length; i++) {
                            matchingDocuments[i].author = "George R. R. Martin";
                            // we don’t need to execute a callback because they are in parallel
                            collectionManager.replaceDocument(matchingDocuments[i]._self,
                                matchingDocuments[i]);   
                        }
                    })
            })
    };

<span data-ttu-id="e5843-320">Az ügyfél "elküldhet a" via HTTP POST tranzakciós végrehajtásához az adatbázishoz a fenti JavaScript-logika.</span><span class="sxs-lookup"><span data-stu-id="e5843-320">The client can “ship” the above JavaScript logic to the database for transactional execution via HTTP POST.</span></span> <span data-ttu-id="e5843-321">HTTP-metódus használatával kapcsolatos további információkért lásd: [Azure Cosmos DB erőforrások RESTful interakció](https://msdn.microsoft.com/library/azure/mt622086.aspx).</span><span class="sxs-lookup"><span data-stu-id="e5843-321">For more information about using HTTP methods, see [RESTful interactions with Azure Cosmos DB resources](https://msdn.microsoft.com/library/azure/mt622086.aspx).</span></span> 

    client.createStoredProcedureAsync(collection._self, {id: "CRUDProc", body: businessLogic})
       .then(function(createdStoredProcedure) {
            return client.executeStoredProcedureAsync(createdStoredProcedure.resource._self,
                "NoSQL Distilled",
                "Martin Fowler");
        })
        .then(function(result) {
            console.log(result);
        },
        function(error) {
            console.log(error);
        });


<span data-ttu-id="e5843-322">Figyelje meg, hogy az adatbázis natív módon együttműködik a JSON és a JavaScript, mert nincs nincs rendszer eltérés, "OR leképezés" vagy kód generálása magic szükséges.</span><span class="sxs-lookup"><span data-stu-id="e5843-322">Notice that because the database natively understands JSON and JavaScript, there is no type system mismatch, no “OR mapping” or code generation magic required.</span></span>   

<span data-ttu-id="e5843-323">Tárolt eljárások és eseményindítók kommunikálni egy gyűjtemény és a dokumentumok egy gyűjtemény egy jól meghatározott hálózatiobjektum-modellje, amely az aktuális gyűjtemény környezetben keresztül.</span><span class="sxs-lookup"><span data-stu-id="e5843-323">Stored procedures and triggers interact with a collection and the documents in a collection through a well-defined object model, which exposes the current collection context.</span></span>  

<span data-ttu-id="e5843-324">A DocumentDB API lehet gyűjteményeket létrehozni, törölt, olvasási vagy felsorolt segítségével egyszerűen a [REST API-k](/rest/api/documentdb/) vagy annak bármelyik a [ügyfél SDK-k](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="e5843-324">Collections in the DocumentDB API can be created, deleted, read or enumerated easily using either the [REST APIs](/rest/api/documentdb/) or any of the [client SDKs](documentdb-sdk-dotnet.md).</span></span> <span data-ttu-id="e5843-325">A DocumentDB API mindig vagy a metaadat-gyűjtemény lekérdezése az erős konzisztencia biztosítja.</span><span class="sxs-lookup"><span data-stu-id="e5843-325">The DocumentDB API always provides strong consistency for reading or querying the metadata of a collection.</span></span> <span data-ttu-id="e5843-326">A gyűjtemény törlése automatikusan biztosítja, hogy a dokumentumok, a mellékleteket, a tárolt eljárások, eseményindítók sem tudja már használni, és az abban szereplő felhasználó által megadott függvények.</span><span class="sxs-lookup"><span data-stu-id="e5843-326">Deleting a collection automatically ensures that you cannot access any of the documents, attachments, stored procedures, triggers, and UDFs contained within it.</span></span>   

## <a name="stored-procedures-triggers-and-user-defined-functions-udf"></a><span data-ttu-id="e5843-327">Tárolt eljárások, eseményindítók és felhasználó definiált függvény (UDF)</span><span class="sxs-lookup"><span data-stu-id="e5843-327">Stored procedures, triggers and User Defined Functions (UDF)</span></span>
<span data-ttu-id="e5843-328">Az előző szakaszban leírtak írhat az alkalmazáslogikát, hogy közvetlenül az adatbázis motorján belül tranzakción belül futtatni.</span><span class="sxs-lookup"><span data-stu-id="e5843-328">As described in the previous section, you can write application logic to run directly within a transaction inside of the database engine.</span></span> <span data-ttu-id="e5843-329">Az alkalmazáslogika teljes egészében a JavaScript írhatók, és a tárolt eljárás, eseményindító vagy egy UDF modellezhető.</span><span class="sxs-lookup"><span data-stu-id="e5843-329">The application logic can be written entirely in JavaScript and can be modeled as a stored procedure, trigger or a UDF.</span></span> <span data-ttu-id="e5843-330">A tárolt eljárás vagy eseményindító JavaScript-kód beszúrása, cserélje le, törlése, olvasása vagy a lekérdezés dokumentumok egy gyűjteményen belül.</span><span class="sxs-lookup"><span data-stu-id="e5843-330">The JavaScript code within a stored procedure or a trigger can insert, replace, delete, read or query documents within a collection.</span></span> <span data-ttu-id="e5843-331">Másrészről, egy UDF belül a JavaScript nem lehet beszúrni, cserélje le, vagy törölhetnek dokumentumokat.</span><span class="sxs-lookup"><span data-stu-id="e5843-331">On the other hand, the JavaScript within a UDF cannot insert, replace, or delete documents.</span></span> <span data-ttu-id="e5843-332">Felhasználó által megadott függvények számba venni a lekérdezés eredményhalmazából dokumentumok, és előállít egy másik eredményhalmaz.</span><span class="sxs-lookup"><span data-stu-id="e5843-332">UDFs enumerate the documents of a query's result set and produce another result set.</span></span> <span data-ttu-id="e5843-333">A több-bérlős Cosmos DB egy szigorú foglalás alapú erőforrás irányítás érvénybe lépteti.</span><span class="sxs-lookup"><span data-stu-id="e5843-333">For multi-tenancy, Cosmos DB enforces a strict reservation based resource governance.</span></span> <span data-ttu-id="e5843-334">Minden egyes tárolt eljárást, eseményindító vagy egy UDF lekérdezi a rögzített quantum az operációs rendszer-erőforrás a munkájuk elvégzéséhez.</span><span class="sxs-lookup"><span data-stu-id="e5843-334">Each stored procedure, trigger or a UDF gets a fixed quantum of operating system resources to do its work.</span></span> <span data-ttu-id="e5843-335">Továbbá a tárolt eljárások, eseményindítók vagy felhasználó által megadott függvények külső JavaScript szalagtárak szemben nem lehet csatolni, és is feketelistára teszi a számukra kiosztott erőforrás költségvetések túllépése esetén.</span><span class="sxs-lookup"><span data-stu-id="e5843-335">Furthermore, stored procedures, triggers or UDFs cannot link against external JavaScript libraries and are blacklisted if they exceed the resource budgets allocated to them.</span></span> <span data-ttu-id="e5843-336">Regisztrálja, a tárolt eljárások, eseményindítók vagy felhasználó által megadott függvények gyűjtemény regisztrációját a REST API-k használatával.</span><span class="sxs-lookup"><span data-stu-id="e5843-336">You can register, unregister stored procedures, triggers or UDFs with a collection by using the REST APIs.</span></span>  <span data-ttu-id="e5843-337">Regisztráláskor tárolt eljárás, eseményindító vagy egy UDF, előre összeállított és a rendszer, bájt kód, amely később hajtsa végre.</span><span class="sxs-lookup"><span data-stu-id="e5843-337">Upon registration a stored procedure, trigger, or a UDF is pre-compiled and stored as byte code which gets executed later.</span></span> <span data-ttu-id="e5843-338">A következő szakasz bemutatják, hogyan használhatja a Cosmos DB JavaScript SDK regisztrálásához, hajtható végre, és a tárolt eljárás, eseményindító és egy UDF.</span><span class="sxs-lookup"><span data-stu-id="e5843-338">The following section illustrate how you can use the Cosmos DB JavaScript SDK to register, execute, and unregister a stored procedure, trigger, and a UDF.</span></span> <span data-ttu-id="e5843-339">A JavaScript SDK egy egyszerű burkoló felett. a [REST API-k](/rest/api/documentdb/).</span><span class="sxs-lookup"><span data-stu-id="e5843-339">The JavaScript SDK is a simple wrapper over the [REST APIs](/rest/api/documentdb/).</span></span> 

### <a name="registering-a-stored-procedure"></a><span data-ttu-id="e5843-340">A tárolt eljárás regisztrálása</span><span class="sxs-lookup"><span data-stu-id="e5843-340">Registering a stored procedure</span></span>
<span data-ttu-id="e5843-341">Regisztrációs tárolt eljárás egy új tárolt eljárás erőforrás egy gyűjtemény HTTP POST használatával hoz létre.</span><span class="sxs-lookup"><span data-stu-id="e5843-341">Registration of a stored procedure creates a new stored procedure resource on a collection via HTTP POST.</span></span>  

    var storedProc = {
        id: "validateAndCreate",
        body: function (documentToCreate) {
            documentToCreate.id = documentToCreate.id.toUpperCase();

            var collectionManager = getContext().getCollection();
            collectionManager.createDocument(collectionManager.getSelfLink(),
                documentToCreate,
                function(err, documentCreated) {
                    if(err) throw new Error('Error while creating document: ' + err.message;
                    getContext().getResponse().setBody('success - created ' + 
                            documentCreated.name);
                });
        }
    };

    client.createStoredProcedureAsync(collection._self, storedProc)
        .then(function (createdStoredProcedure) {
            console.log("Successfully created stored procedure");
        }, function(error) {
            console.log("Error");
        });

### <a name="executing-a-stored-procedure"></a><span data-ttu-id="e5843-342">A tárolt eljárás végrehajtása</span><span class="sxs-lookup"><span data-stu-id="e5843-342">Executing a stored procedure</span></span>
<span data-ttu-id="e5843-343">A következő tárolt eljárás végrehajtása egy HTTP POST meglévő tárolt eljárás erőforrás ellen úgy, hogy a kérelem törzsében szereplő eljárás paraméterek kiállításával történik.</span><span class="sxs-lookup"><span data-stu-id="e5843-343">Execution of a stored procedure is done by issuing an HTTP POST against an existing stored procedure resource by passing parameters to the procedure in the request body.</span></span>

    var inputDocument = {id : "document1", author: "G. G. Marquez"};
    client.executeStoredProcedureAsync(createdStoredProcedure.resource._self, inputDocument)
        .then(function(executionResult) {
            assert.equal(executionResult, "success - created DOCUMENT1");
        }, function(error) {
            console.log("Error");
        });

### <a name="unregistering-a-stored-procedure"></a><span data-ttu-id="e5843-344">A regisztráció megszüntetését tárolt eljárás</span><span class="sxs-lookup"><span data-stu-id="e5843-344">Unregistering a stored procedure</span></span>
<span data-ttu-id="e5843-345">Beállításjegyzékből való törlésekor a tárolt eljárás egy HTTP DELETE elleni meglévő tárolt eljárás erőforrás kiállításával egyszerűen történik.</span><span class="sxs-lookup"><span data-stu-id="e5843-345">Unregistering a stored procedure is simply done by issuing an HTTP DELETE against an existing stored procedure resource.</span></span>   

    client.deleteStoredProcedureAsync(createdStoredProcedure.resource._self)
        .then(function (response) {
            return;
        }, function(error) {
            console.log("Error");
        });


### <a name="registering-a-pre-trigger"></a><span data-ttu-id="e5843-346">Regisztrálás előtti eseményindító</span><span class="sxs-lookup"><span data-stu-id="e5843-346">Registering a pre-trigger</span></span>
<span data-ttu-id="e5843-347">Új eseményindító erőforrás létrehozása egy gyűjteményen keresztül HTTP POST regisztrációs eseményindító végezhető el.</span><span class="sxs-lookup"><span data-stu-id="e5843-347">Registration of a trigger is done by creating a new trigger resource on a collection via HTTP POST.</span></span> <span data-ttu-id="e5843-348">Megadhatja, ha az eseményindító nem előre, vagy a feladás egy vagy több eseményindító és a műveletnek a típusát (pl. létrehozása, Replace, Delete vagy az összes) társított lehet.</span><span class="sxs-lookup"><span data-stu-id="e5843-348">You can specify if the trigger is a pre or a post trigger and the type of operation it can be associated with (e.g. Create, Replace, Delete, or All).</span></span>   

    var preTrigger = {
        id: "upperCaseId",
        body: function() {
                var item = getContext().getRequest().getBody();
                item.id = item.id.toUpperCase();
                getContext().getRequest().setBody(item);
        },
        triggerType: TriggerType.Pre,
        triggerOperation: TriggerOperation.All
    }

    client.createTriggerAsync(collection._self, preTrigger)
        .then(function (createdPreTrigger) {
            console.log("Successfully created trigger");
        }, function(error) {
            console.log("Error");
        });

### <a name="executing-a-pre-trigger"></a><span data-ttu-id="e5843-349">Egy előtti eseményindító végrehajtása</span><span class="sxs-lookup"><span data-stu-id="e5843-349">Executing a pre-trigger</span></span>
<span data-ttu-id="e5843-350">Egy eseményindító végrehajtása egy meglévő eseményindító nevét megadó a FELADÁS egy vagy több/PUT vagy DELETE kérelmet egy dokumentum erőforrás a kérelem fejléce időpontjában történik.</span><span class="sxs-lookup"><span data-stu-id="e5843-350">Execution of a trigger is done by specifying the name of an existing trigger at the time of issuing the POST/PUT/DELETE request of a document resource via the request header.</span></span>  

    client.createDocumentAsync(collection._self, { id: "doc1", key: "Love in the Time of Cholera" }, { preTriggerInclude: "upperCaseId" })
        .then(function(createdDocument) {
            assert.equal(createdDocument.resource.id, "DOC1");
        }, function(error) {
            console.log("Error");
        });

### <a name="unregistering-a-pre-trigger"></a><span data-ttu-id="e5843-351">A regisztráció megszüntetését előtti eseményindító</span><span class="sxs-lookup"><span data-stu-id="e5843-351">Unregistering a pre-trigger</span></span>
<span data-ttu-id="e5843-352">Egy eseményindító regisztrációját kiadása egy HTTP DELETE eseményindító erőforrással ellen használatával egyszerűen történik.</span><span class="sxs-lookup"><span data-stu-id="e5843-352">Unregistering a trigger is simply done via issuing an HTTP DELETE against an existing trigger resource.</span></span>  

    client.deleteTriggerAsync(createdPreTrigger._self);
        .then(function(response) {
            return;
        }, function(error) {
            console.log("Error");
        });

### <a name="registering-a-udf"></a><span data-ttu-id="e5843-353">Egy UDF regisztrálása</span><span class="sxs-lookup"><span data-stu-id="e5843-353">Registering a UDF</span></span>
<span data-ttu-id="e5843-354">Egy UDF-regisztráció UDF új erőforrás létrehozása egy gyűjteményen keresztül HTTP POST végezhető el.</span><span class="sxs-lookup"><span data-stu-id="e5843-354">Registration of a UDF is done by creating a new UDF resource on a collection via HTTP POST.</span></span>  

    var udf = { 
        id: "mathSqrt",
        body: function(number) {
                return Math.sqrt(number);
        },
    };
    client.createUserDefinedFunctionAsync(collection._self, udf)
        .then(function (createdUdf) {
            console.log("Successfully created stored procedure");
        }, function(error) {
            console.log("Error");
        });

### <a name="executing-a-udf-as-part-of-the-query"></a><span data-ttu-id="e5843-355">A lekérdezés részeként egy UDF végrehajtása</span><span class="sxs-lookup"><span data-stu-id="e5843-355">Executing a UDF as part of the query</span></span>
<span data-ttu-id="e5843-356">Egy UDF adható meg az SQL-lekérdezés részeként pedig a rendszer a core kiterjeszteni úgy [API-hoz. a DocumentDB SQL lekérdező nyelve](https://msdn.microsoft.com/library/azure/dn782250.aspx).</span><span class="sxs-lookup"><span data-stu-id="e5843-356">A UDF can be specified as part of the SQL query and is used as a way to extend the core [SQL query language for the DocumentDB API](https://msdn.microsoft.com/library/azure/dn782250.aspx).</span></span>

    var filterQuery = "SELECT udf.mathSqrt(r.Age) AS sqrtAge FROM root r WHERE r.FirstName='John'";
    client.queryDocuments(collection._self, filterQuery).toArrayAsync();
        .then(function(queryResponse) {
            var queryResponseDocuments = queryResponse.feed;
        }, function(error) {
            console.log("Error");
        });

### <a name="unregistering-a-udf"></a><span data-ttu-id="e5843-357">A regisztráció megszüntetését olyan UDF-ben</span><span class="sxs-lookup"><span data-stu-id="e5843-357">Unregistering a UDF</span></span>
<span data-ttu-id="e5843-358">Beállításjegyzékből való törlésekor a UDF egy HTTP DELETE elleni meglévő UDF erőforrás kiállításával egyszerűen történik.</span><span class="sxs-lookup"><span data-stu-id="e5843-358">Unregistering a UDF is simply done by issuing an HTTP DELETE against an existing UDF resource.</span></span>  

    client.deleteUserDefinedFunctionAsync(createdUdf._self)
        .then(function(response) {
            return;
        }, function(error) {
            console.log("Error");
        });

<span data-ttu-id="e5843-359">Bár a fenti kódtöredékek bemutatta a regisztrációs (POST), a regisztrációjának (PUT), az olvasás/lista (GET) és a végrehajtási (POST) keresztül a [JavaScript SDK](https://github.com/Azure/azure-documentdb-js), használhatja a [REST API-k](/rest/api/documentdb/) vagy más [ ügyfél SDK-k](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="e5843-359">Although the snippets above showed the registration (POST), unregistration (PUT), read/list (GET) and execution (POST) via the [JavaScript SDK](https://github.com/Azure/azure-documentdb-js), you can also use the [REST APIs](/rest/api/documentdb/) or other [client SDKs](documentdb-sdk-dotnet.md).</span></span> 

## <a name="documents"></a><span data-ttu-id="e5843-360">Dokumentumok</span><span class="sxs-lookup"><span data-stu-id="e5843-360">Documents</span></span>
<span data-ttu-id="e5843-361">Insert, cserélje le, törlése, olvashatja, számbavétele és lekérdezni egy gyűjtemény tetszőleges JSON-dokumentumokat.</span><span class="sxs-lookup"><span data-stu-id="e5843-361">You can insert, replace, delete, read, enumerate and query arbitrary JSON documents in a collection.</span></span> <span data-ttu-id="e5843-362">Cosmos DB határozza meg, hogy semmilyen sémát, és nem igényel másodlagos indexek támogatása érdekében egy gyűjtemény dokumentumok lekérdezését.</span><span class="sxs-lookup"><span data-stu-id="e5843-362">Cosmos DB does not mandate any schema and does not require secondary indexes in order to support querying over documents in a collection.</span></span> <span data-ttu-id="e5843-363">A dokumentum maximális mérete 2 MB.</span><span class="sxs-lookup"><span data-stu-id="e5843-363">The maximum size for a document is 2 MB.</span></span>   

<span data-ttu-id="e5843-364">Folyamatban egy valóban megnyitott adatbázis-szolgáltatás, Cosmos DB nem készlet semmilyen speciális adattípusok (pl. dátum idő) vagy adott kódolások JSON-dokumentumok.</span><span class="sxs-lookup"><span data-stu-id="e5843-364">Being a truly open database service, Cosmos DB does not invent any specialized data types (e.g. date time) or specific encodings for JSON documents.</span></span> <span data-ttu-id="e5843-365">Vegye figyelembe, hogy Cosmos DB nincs szükség semmilyen különleges JSON egyezmények kodifikálni a különböző dokumentumok; közötti kapcsolatok a Cosmos-adatbázis SQL-szintaxis szolgáló lekérdezés és a projekt dokumentumok különleges jegyzeteket vagy dokumentumok közötti kapcsolatok kodifikálni kell nélkül megkülönböztető tulajdonságok nagyon hatékony hierarchikus és relációs lekérdezés biztosít.</span><span class="sxs-lookup"><span data-stu-id="e5843-365">Note that Cosmos DB does not require any special JSON conventions to codify the relationships among various documents; the SQL syntax of Cosmos DB provides very powerful hierarchical and relational query operators to query and project documents without any special annotations or need to codify relationships among documents using distinguished properties.</span></span>  

<span data-ttu-id="e5843-366">Mint minden más erőforrásnál dokumentumok hozhatók létre, cseréje esetén törlése, olvasása, számba, és könnyen használatával a REST API-k vagy annak bármelyik lekérdezése a [ügyfél SDK-k](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="e5843-366">As with all other resources, documents can be created, replaced, deleted, read, enumerated and queried easily using either REST APIs or any of the [client SDKs](documentdb-sdk-dotnet.md).</span></span> <span data-ttu-id="e5843-367">Dokumentum törlése azonnal területet szabadít fel a megfelelő összes beágyazott melléklet kvótát.</span><span class="sxs-lookup"><span data-stu-id="e5843-367">Deleting a document instantly frees up the quota corresponding to all of the nested attachments.</span></span> <span data-ttu-id="e5843-368">A dokumentumok olvasási konzisztenciát mértékét az adatbázis-fiókot a konzisztencia-házirend következik.</span><span class="sxs-lookup"><span data-stu-id="e5843-368">The read consistency level of documents follows the consistency policy on the database account.</span></span> <span data-ttu-id="e5843-369">Ez a házirend attól függően, hogy az adatok konzisztenciájának követelményeinek, az alkalmazás kérelem alapon felülbírálható.</span><span class="sxs-lookup"><span data-stu-id="e5843-369">This policy can be overridden on a per-request basis depending on data consistency requirements of your application.</span></span> <span data-ttu-id="e5843-370">Dokumentumok lekérdezésekor az olvasási konzisztenciával követi a indexelési mód beállítása a gyűjteményben.</span><span class="sxs-lookup"><span data-stu-id="e5843-370">When querying documents, the read consistency follows the indexing mode set on the collection.</span></span> <span data-ttu-id="e5843-371">A "konzisztens" Ez a következő a fiók konzisztencia házirend.</span><span class="sxs-lookup"><span data-stu-id="e5843-371">For “consistent”, this follows the account’s consistency policy.</span></span> 

## <a name="attachments-and-media"></a><span data-ttu-id="e5843-372">Mellékletek és az adathordozó</span><span class="sxs-lookup"><span data-stu-id="e5843-372">Attachments and media</span></span>
<span data-ttu-id="e5843-373">Cosmos DB tárolását teszi bináris blobok/media vagy Cosmos DB (legfeljebb 2 GB fiókonként) vagy a saját távoli médiatárbeli.</span><span class="sxs-lookup"><span data-stu-id="e5843-373">Cosmos DB allows you to store binary blobs/media either with Cosmos DB (maximum of 2 GB per account) or to your own remote media store.</span></span> <span data-ttu-id="e5843-374">Lehetővé teszi egy adathordozó melléklet nevű különleges dokumentum tekintetében a metaadatokat képviseli.</span><span class="sxs-lookup"><span data-stu-id="e5843-374">It also allows you to represent the metadata of a media in terms of a special document called attachment.</span></span> <span data-ttu-id="e5843-375">A Cosmos DB mellékletet egy különleges (JSON) dokumentumot, amely a media/blob máshol tárolt hivatkozik.</span><span class="sxs-lookup"><span data-stu-id="e5843-375">An attachment in Cosmos DB is a special (JSON) document that references the media/blob stored elsewhere.</span></span> <span data-ttu-id="e5843-376">Csatolmány egyszerűen egy különleges dokumentumot, amely a metaadatokat (például hely, Szerző stb.) egy olyan távoli media storage-ban tárolt adathordozó rögzíti.</span><span class="sxs-lookup"><span data-stu-id="e5843-376">An attachment is simply a special document that captures the metadata (e.g. location, author etc.) of a media stored in a remote media storage.</span></span> 

<span data-ttu-id="e5843-377">Fontolja meg egy közösségi olvasási alkalmazást, amely Cosmos-adatbázis segítségével tárolja a szabadkézi széljegyzeteket, és megjegyzéseket, beleértve a metaadatok kiemeli, könyvjelzők, minősítések, kedveli/dislikes egy adott felhasználó e-könyv társított stb.</span><span class="sxs-lookup"><span data-stu-id="e5843-377">Consider a social reading application which uses Cosmos DB to store ink annotations, and metadata including comments, highlights, bookmarks, ratings, likes/dislikes etc. associated for an e-book of a given user.</span></span>   

* <span data-ttu-id="e5843-378">A könyv maga a tartalom vagy tárolódik a média-tároló vagy egy távoli médiatárbeli Cosmos DB adatbázisfiók részeként érhető el.</span><span class="sxs-lookup"><span data-stu-id="e5843-378">The content of the book itself is stored in the media storage either available as part of Cosmos DB database account or a remote media store.</span></span> 
* <span data-ttu-id="e5843-379">Az alkalmazás minden felhasználó tárolhatjuk egy különálló dokumentumként – pl. /colls/joe/docs/book1 által hivatkozott dokumentum Füzet1 Joe metaadatait tárolja.</span><span class="sxs-lookup"><span data-stu-id="e5843-379">An application may store each user’s metadata as a distinct document -- e.g. Joe’s metadata for book1 is stored in a document referenced by /colls/joe/docs/book1.</span></span> 
* <span data-ttu-id="e5843-380">Egy felhasználó egy adott könyv tartalom lapok mutató melléklet tárolási alatt az megfelelő dokumentum pl. /colls/joe/docs/book1/chapter1 /colls/joe/docs/book1/chapter2 stb.</span><span class="sxs-lookup"><span data-stu-id="e5843-380">Attachments pointing to the content pages of a given book of a user are stored under the corresponding document e.g. /colls/joe/docs/book1/chapter1, /colls/joe/docs/book1/chapter2 etc.</span></span> 

<span data-ttu-id="e5843-381">Vegye figyelembe, hogy a fenti példák segítségével rövid azonosítók átadja az erőforrás-hierarchiában.</span><span class="sxs-lookup"><span data-stu-id="e5843-381">Note that the examples listed above use friendly ids to convey the resource hierarchy.</span></span> <span data-ttu-id="e5843-382">Erőforrások keresztül egyedi erőforrás-azonosítókat megtalálhatja a REST API-kon keresztül érhetők el.</span><span class="sxs-lookup"><span data-stu-id="e5843-382">Resources are accessed via the REST APIs through unique resource ids.</span></span> 

<span data-ttu-id="e5843-383">A melléklet _media tulajdonságának a médiához Cosmos DB által kezelt, az adathordozó által az URI hivatkozik.</span><span class="sxs-lookup"><span data-stu-id="e5843-383">For the media that is managed by Cosmos DB, the _media property of the attachment will reference the media by its URI.</span></span> <span data-ttu-id="e5843-384">A cosmos DB biztosíthatja, hogy az adathordozó a szemétgyűjtési gyűjtése, ha az összes fennmaradó hivatkozást a rendszer eldobja.</span><span class="sxs-lookup"><span data-stu-id="e5843-384">Cosmos DB will ensure to garbage collect the media when all of the outstanding references are dropped.</span></span> <span data-ttu-id="e5843-385">Cosmos DB automatikusan hoz létre a mellékletet, ha az új adathordozó feltöltött tölti fel a _media úgy, hogy az újonnan hozzáadott adathordozó mutasson.</span><span class="sxs-lookup"><span data-stu-id="e5843-385">Cosmos DB automatically generates the attachment when you upload the new media and populates the _media to point to the newly added media.</span></span> <span data-ttu-id="e5843-386">Ha az adathordozó tárolása egy távoli blob-tároló felügyeli azt (például a OneDrive, az Azure Storage DropBox stb.) választja, való hivatkozáshoz az adathordozó továbbra is használhatja a mellékleteket.</span><span class="sxs-lookup"><span data-stu-id="e5843-386">If you choose to store the media in a remote blob store managed by you (e.g. OneDrive, Azure Storage, DropBox etc), you can still use attachments to reference the media.</span></span> <span data-ttu-id="e5843-387">Ebben az esetben fog létrehozni a mellékletet, és feltölti a _media tulajdonsága.</span><span class="sxs-lookup"><span data-stu-id="e5843-387">In this case, you will create the attachment yourself and populate its _media property.</span></span>   

<span data-ttu-id="e5843-388">Csakúgy, mint minden más erőforrásnál mellékletek hozhatók létre, cserélni, törlése, olvassa el vagy számba egyszerűen a REST API-k vagy bármely, az ügyfél SDK-k használatával.</span><span class="sxs-lookup"><span data-stu-id="e5843-388">As with all other resources, attachments can be created, replaced, deleted, read or enumerated easily using either REST APIs or any of the client SDKs.</span></span> <span data-ttu-id="e5843-389">Csakúgy, mint a dokumentumok, az olvasási konzisztenciával szintű mellékletek következik a konzisztencia-házirend az adatbázis-fiókot.</span><span class="sxs-lookup"><span data-stu-id="e5843-389">As with documents, the read consistency level of attachments follows the consistency policy on the database account.</span></span> <span data-ttu-id="e5843-390">Ez a házirend attól függően, hogy az adatok konzisztenciájának követelményeinek, az alkalmazás kérelem alapon felülbírálható.</span><span class="sxs-lookup"><span data-stu-id="e5843-390">This policy can be overridden on a per-request basis depending on data consistency requirements of your application.</span></span> <span data-ttu-id="e5843-391">Mellékletek lekérdezésekor az olvasási konzisztenciával követi az indexelési mód beállítása a gyűjtemény.</span><span class="sxs-lookup"><span data-stu-id="e5843-391">When querying for attachments, the read consistency follows the indexing mode set on the collection.</span></span> <span data-ttu-id="e5843-392">A "konzisztens" Ez a következő a fiók konzisztencia házirend.</span><span class="sxs-lookup"><span data-stu-id="e5843-392">For “consistent”, this follows the account’s consistency policy.</span></span> 
 

## <a name="users"></a><span data-ttu-id="e5843-393">Felhasználók</span><span class="sxs-lookup"><span data-stu-id="e5843-393">Users</span></span>
<span data-ttu-id="e5843-394">A Cosmos DB felhasználói engedélyek csoportosítása logikai névterének jelöli.</span><span class="sxs-lookup"><span data-stu-id="e5843-394">A Cosmos DB user represents a logical namespace for grouping permissions.</span></span> <span data-ttu-id="e5843-395">A felhasználó egy Cosmos DB felhasználói az identity management rendszer vagy egy előre megadott alkalmazás-szerepkör lehet rendelve.</span><span class="sxs-lookup"><span data-stu-id="e5843-395">A Cosmos DB user may correspond to a user in an identity management system or a predefined application role.</span></span> <span data-ttu-id="e5843-396">Cosmos DB a felhasználó egyszerűen jelenti absztrakciós engedélyekkel az adatbázis csoportba.</span><span class="sxs-lookup"><span data-stu-id="e5843-396">For Cosmos DB, a user simply represents an abstraction to group a set of permissions under a database.</span></span>   

<span data-ttu-id="e5843-397">Több vállalat kiszolgálása megvalósítása az alkalmazásban, a felhasználók létrehozhat az Cosmos DB, amely megfelel a tényleges felhasználók vagy a bérlők számára az alkalmazás.</span><span class="sxs-lookup"><span data-stu-id="e5843-397">For implementing multi-tenancy in your application, you can create users in Cosmos DB which corresponds to your actual users or the tenants of your application.</span></span> <span data-ttu-id="e5843-398">Ezután létrehozhat egy adott felhasználó engedélyeit, hogy a hozzáférés-vezérlés keresztül különböző gyűjtemények, dokumentumok, a mellékletek, stb.</span><span class="sxs-lookup"><span data-stu-id="e5843-398">You can then create permissions for a given user that correspond to the access control over various collections, documents, attachments, etc.</span></span>   

<span data-ttu-id="e5843-399">Az alkalmazások a felhasználó növekedési méretezést van, az adatok különböző módokon shard is elfogadja.</span><span class="sxs-lookup"><span data-stu-id="e5843-399">As your applications need to scale with your user growth, you can adopt various ways to shard your data.</span></span> <span data-ttu-id="e5843-400">A felhasználók az alábbiak szerint is modell:</span><span class="sxs-lookup"><span data-stu-id="e5843-400">You can model each of your users as follows:</span></span>   

* <span data-ttu-id="e5843-401">Minden felhasználói adatbázis van leképezve.</span><span class="sxs-lookup"><span data-stu-id="e5843-401">Each user maps to a database.</span></span>
* <span data-ttu-id="e5843-402">Minden felhasználó egy gyűjtemény van leképezve.</span><span class="sxs-lookup"><span data-stu-id="e5843-402">Each user maps to a collection.</span></span> 
* <span data-ttu-id="e5843-403">Több felhasználó dokumentumokat nyissa meg a kijelölt gyűjteményhez.</span><span class="sxs-lookup"><span data-stu-id="e5843-403">Documents corresponding to multiple users go to a dedicated collection.</span></span> 
* <span data-ttu-id="e5843-404">Több felhasználó dokumentumokat olyan készletek Ugrás.</span><span class="sxs-lookup"><span data-stu-id="e5843-404">Documents corresponding to multiple users go to a set of collections.</span></span>   

<span data-ttu-id="e5843-405">A megadott horizontális skálázási stratégia függetlenül választja, a tényleges felhasználók modell Cosmos DB adatbázisban felhasználóként, és az egyes felhasználók részletes engedélyeket társítani.</span><span class="sxs-lookup"><span data-stu-id="e5843-405">Regardless of the specific sharding strategy you choose, you can model your actual users as users in Cosmos DB database and associate fine grained permissions to each user.</span></span>  

<span data-ttu-id="e5843-406">![Felhasználói gyűjtemények][3]</span><span class="sxs-lookup"><span data-stu-id="e5843-406">![User collections][3]</span></span>  
<span data-ttu-id="e5843-407">**Horizontális azokat a stratégiákat és modellezési felhasználók**</span><span class="sxs-lookup"><span data-stu-id="e5843-407">**Sharding strategies and modeling users**</span></span>

<span data-ttu-id="e5843-408">Más erőforrások, például felhasználói Cosmos DB hozhatók létre, helyett, törlése, olvasása vagy számba egyszerűen a REST API-k vagy bármely, az ügyfél SDK-k használatával.</span><span class="sxs-lookup"><span data-stu-id="e5843-408">Like all other resources, users in Cosmos DB can be created, replaced, deleted, read or enumerated easily using either REST APIs or any of the client SDKs.</span></span> <span data-ttu-id="e5843-409">Cosmos DB mindig vagy egy felhasználói erőforrás metaadatait lekérdezése az erős konzisztencia biztosítja.</span><span class="sxs-lookup"><span data-stu-id="e5843-409">Cosmos DB always provides strong consistency for reading or querying the metadata of a user resource.</span></span> <span data-ttu-id="e5843-410">Válassza, hogy nem tud hozzáférni az abban szereplő engedélyeit biztosítja, hogy automatikusan törli a felhasználó érdemes.</span><span class="sxs-lookup"><span data-stu-id="e5843-410">It is worth pointing out that deleting a user automatically ensures that you cannot access any of the permissions contained within it.</span></span> <span data-ttu-id="e5843-411">Annak ellenére, hogy a Cosmos DB úgy szabadít fel a engedélyeit a kvóta a törölt felhasználói a háttérben részeként, a törölt engedélyek érhető el azonnal újra lesz szükség.</span><span class="sxs-lookup"><span data-stu-id="e5843-411">Even though the Cosmos DB reclaims the quota of the permissions as part of the deleted user in the background, the deleted permissions is available instantly again for you to use.</span></span>  

## <a name="permissions"></a><span data-ttu-id="e5843-412">Engedélyek</span><span class="sxs-lookup"><span data-stu-id="e5843-412">Permissions</span></span>
<span data-ttu-id="e5843-413">Access control szempontból, erőforrások, például adatbázis-fiókokat, adatbázisok, felhasználók és engedéllyel minősülnek *felügyeleti* erőforrásokat, mivel ezek a rendszergazdai engedélyek szükségesek.</span><span class="sxs-lookup"><span data-stu-id="e5843-413">From an access control perspective, resources such as database accounts, databases, users and permission are considered *administrative* resources since these require administrative permissions.</span></span> <span data-ttu-id="e5843-414">Másrészről, erőforrások, például a gyűjtemények, dokumentumok, a mellékleteket, tárolt eljárások, eseményindítók, és a felhasználó által megadott függvények alapján egy adott adatbázisnak hatókörű, és figyelembe veendő *alkalmazás-erőforrásokat*.</span><span class="sxs-lookup"><span data-stu-id="e5843-414">On the other hand, resources including the collections, documents, attachments, stored procedures, triggers, and UDFs are scoped under a given database and considered *application resources*.</span></span> <span data-ttu-id="e5843-415">A két típusú erőforrások és a szerepköröket, amelyek elérhet (azaz a rendszergazdai és felhasználói) megfelelő, a használt engedélyezési modellt meghatározása kétféle *hívóbetűk*: *főkulcs* és  *Az erőforráskulcs*.</span><span class="sxs-lookup"><span data-stu-id="e5843-415">Corresponding to the two types of resources and the roles that access them (namely the administrator and user), the authorization model defines two types of *access keys*: *master key* and *resource key*.</span></span> <span data-ttu-id="e5843-416">A főkulcs a következő adatbázisfiókot része, és a rendszer átadja a fejlesztői (vagy a rendszergazda) ki van kiépítés az adatbázis-fiókot.</span><span class="sxs-lookup"><span data-stu-id="e5843-416">The master key is a part of the database account and is provided to the developer (or administrator) who is provisioning the database account.</span></span> <span data-ttu-id="e5843-417">A főkulcs szemantikájú rendszergazda, abban, hogy a felügyeleti és a alkalmazás erőforrásokhoz való hozzáférés engedélyezésére használható.</span><span class="sxs-lookup"><span data-stu-id="e5843-417">This master key has administrator semantics, in that it can be used to authorize access to both administrative and application resources.</span></span> <span data-ttu-id="e5843-418">Ezzel szemben egy erőforrás kulcsa a részletes elérési kulcsot, amely lehetővé teszi a hozzáférést egy *adott* alkalmazás erőforrás.</span><span class="sxs-lookup"><span data-stu-id="e5843-418">In contrast, a resource key is a granular access key that allows access to a *specific* application resource.</span></span> <span data-ttu-id="e5843-419">Ebből kifolyólag rögzíti a felhasználó az adatbázis és az engedélyek a felhasználó rendelkezik-e egy adott erőforráshoz (pl. gyűjteményt, a dokumentum, melléklet, tárolt eljárás, eseményindító vagy UDF) közötti kapcsolat.</span><span class="sxs-lookup"><span data-stu-id="e5843-419">Thus, it captures the relationship between the user of a database and the permissions the user has for a specific resource (e.g. collection, document, attachment, stored procedure, trigger, or UDF).</span></span>   

<span data-ttu-id="e5843-420">A csak egy erőforrás-kulcs beszerzése, egy adott felhasználói engedélyt erőforrás létrehozása.</span><span class="sxs-lookup"><span data-stu-id="e5843-420">The only way to obtain a resource key is by creating a permission resource under a given user.</span></span> <span data-ttu-id="e5843-421">Vegye figyelembe, hogy létrehozásához vagy engedély beolvasni, főkulcs biztosítani kell a hitelesítési fejléc.</span><span class="sxs-lookup"><span data-stu-id="e5843-421">Note that In order to create or retrieve a permission, a master key must be presented in the authorization header.</span></span> <span data-ttu-id="e5843-422">Engedély erőforrás kötelékek az erőforrás, a hozzáférés és a felhasználó.</span><span class="sxs-lookup"><span data-stu-id="e5843-422">A permission resource ties the resource, its access and the user.</span></span> <span data-ttu-id="e5843-423">A felhasználó engedélye erőforrás létrehozása után csak kell a társított erőforráskulcs ahhoz, hogy a megfelelő erőforrás eléréséhez jelenthet.</span><span class="sxs-lookup"><span data-stu-id="e5843-423">After creating a permission resource, the user only needs to present the associated resource key in order to gain access to the relevant resource.</span></span> <span data-ttu-id="e5843-424">Egy erőforrás-kulcsot, ezért a logikai és kompakt megjelenítése az engedély erőforrás tekinthetők.</span><span class="sxs-lookup"><span data-stu-id="e5843-424">Hence, a resource key can be viewed as a logical and compact representation of the permission resource.</span></span>  

<span data-ttu-id="e5843-425">Összes többi erőforrása, Cosmos DB tartozó engedélyek hozhatók létre, helyett, törlése, olvasása vagy számba egyszerűen a REST API-k vagy bármely, az ügyfél SDK-k segítségével.</span><span class="sxs-lookup"><span data-stu-id="e5843-425">As with all other resources, permissions in Cosmos DB can be created, replaced, deleted, read or enumerated easily using either REST APIs or any of the client SDKs.</span></span> <span data-ttu-id="e5843-426">Cosmos DB mindig vagy kérdez le a metaadatokat az engedély az erős konzisztencia biztosítja.</span><span class="sxs-lookup"><span data-stu-id="e5843-426">Cosmos DB always provides strong consistency for reading or querying the metadata of a permission.</span></span> 

## <a name="next-steps"></a><span data-ttu-id="e5843-427">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="e5843-427">Next steps</span></span>
<span data-ttu-id="e5843-428">További tudnivalókat a HTTP-parancsokat kell használnia, erőforrásokkal [Cosmos DB erőforrások RESTful interakció](https://msdn.microsoft.com/library/azure/mt622086.aspx).</span><span class="sxs-lookup"><span data-stu-id="e5843-428">Learn more about working with resources by using HTTP commands in [RESTful interactions with Cosmos DB resources](https://msdn.microsoft.com/library/azure/mt622086.aspx).</span></span>

[1]: media/documentdb-resources/resources1.png
[2]: media/documentdb-resources/resources2.png
[3]: media/documentdb-resources/resources3.png

