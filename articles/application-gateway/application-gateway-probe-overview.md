---
title: "figyelési áttekintés az Azure Application Gateway aaaHealth |} Microsoft Docs"
description: "Figyelési képességek az Azure alkalmazás átjáró hello megismerése"
services: application-gateway
documentationcenter: na
author: georgewallace
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 7eeba328-bb2d-4d3e-bdac-7552e7900b7f
ms.service: application-gateway
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 12/14/2016
ms.author: gwallace
ms.openlocfilehash: 5091d80394a354ff849ce7ccee8cc9d2fd0456db
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/06/2017
---
# <a name="application-gateway-health-monitoring-overview"></a><span data-ttu-id="2864d-103">Átjáró állapotfigyelő figyelési – áttekintés</span><span class="sxs-lookup"><span data-stu-id="2864d-103">Application Gateway health monitoring overview</span></span>

<span data-ttu-id="2864d-104">Alapértelmezés szerint az Azure Application Gateway figyeli a hello állapotát a háttér-készletben erőforrásait, és automatikusan eltávolítja az összes erőforrás hello készlet megfelelő állapotúnak számít.</span><span class="sxs-lookup"><span data-stu-id="2864d-104">Azure Application Gateway by default monitors hello health of all resources in its back-end pool and automatically removes any resource considered unhealthy from hello pool.</span></span> <span data-ttu-id="2864d-105">Alkalmazásátjáró toomonitor hello sérült példányok folytatódik, és hozzáadja őket biztonsági toohello kifogástalan háttér-készlet, amennyiben azok elérhetővé válnak, és válaszoljon toohealth-vizsgálat.</span><span class="sxs-lookup"><span data-stu-id="2864d-105">Application Gateway continues toomonitor hello unhealthy instances and adds them back toohello healthy back-end pool once they become available and respond toohealth probes.</span></span> <span data-ttu-id="2864d-106">Alkalmazásátjáró küldi hello állapotfigyelő mintavételt a hello ugyanazt a portot definiált hello háttér HTTP-beállítások.</span><span class="sxs-lookup"><span data-stu-id="2864d-106">Application gateway sends hello health probes with hello same port that is defined in hello back-end HTTP settings.</span></span> <span data-ttu-id="2864d-107">Ez a konfiguráció biztosítja, hogy hello mintavételi azonos port, hogy az ügyfelek dolgozna tooconnect toohello háttér hello teszteli.</span><span class="sxs-lookup"><span data-stu-id="2864d-107">This configuration ensures that hello probe is testing hello same port that customers would be using tooconnect toohello backend.</span></span>

![alkalmazás átjáró mintavételi – példa][1]

<span data-ttu-id="2864d-109">Továbbá toousing alapértelmezett mintavételi állapotfigyelés, is testreszabhatja hello állapotfigyelő mintavételi toosuit az alkalmazás követelményeinek.</span><span class="sxs-lookup"><span data-stu-id="2864d-109">In addition toousing default health probe monitoring, you can also customize hello health probe toosuit your application's requirements.</span></span> <span data-ttu-id="2864d-110">Ebben a cikkben alapértelmezett és egyéni állapotteljesítmény tartoznak.</span><span class="sxs-lookup"><span data-stu-id="2864d-110">In this article, both default and custom health probes are covered.</span></span>

> [!NOTE]
> <span data-ttu-id="2864d-111">Ha Alkalmazásátjáró alhálózat egy NSG-t, porttartományok 65503-65534 meg kell nyitni bejövő forgalom hello Alkalmazásátjáró alhálózaton.</span><span class="sxs-lookup"><span data-stu-id="2864d-111">If there is an NSG on Application Gateway subnet, port ranges 65503-65534 should be opened on hello Application Gateway subnet for Inbound traffic.</span></span> <span data-ttu-id="2864d-112">Ezeket a portokat hello háttér állapotfigyelő API toowork szükségesek.</span><span class="sxs-lookup"><span data-stu-id="2864d-112">These ports are required for hello backend health API toowork.</span></span>

## <a name="default-health-probe"></a><span data-ttu-id="2864d-113">Alapértelmezett állapotmintáihoz</span><span class="sxs-lookup"><span data-stu-id="2864d-113">Default health probe</span></span>

<span data-ttu-id="2864d-114">Alkalmazásátjáró automatikusan meghatározza, hogy egy alapértelmezett állapotmintáihoz nem állít be egyéni mintavételi beállításra.</span><span class="sxs-lookup"><span data-stu-id="2864d-114">An application gateway automatically configures a default health probe when you don't set up any custom probe configuration.</span></span> <span data-ttu-id="2864d-115">hello viselkedésének figyelése elvégzése egy HTTP-kérelem toohello IP-címek hello háttér-készlet beállítása során.</span><span class="sxs-lookup"><span data-stu-id="2864d-115">hello monitoring behavior works by making an HTTP request toohello IP addresses configured for hello back-end pool.</span></span> <span data-ttu-id="2864d-116">Az alapértelmezett mintavételt hello backendhttpsettings osztályhoz vannak konfigurálva, a HTTPS-hez, ha hello mintavételi használja HTTPS hello háttérkiszolgálókon jól tootest állapotát.</span><span class="sxs-lookup"><span data-stu-id="2864d-116">For default probes if hello backend http settings are configured for HTTPS, hello probe uses HTTPS as well tootest health of hello backends.</span></span>

<span data-ttu-id="2864d-117">Például: konfigurálhatja az alkalmazás átjáró toouse háttérkiszolgálók A, B és C tooreceive HTTP hálózati forgalom 80-as porton.</span><span class="sxs-lookup"><span data-stu-id="2864d-117">For example: You configure your application gateway toouse back-end servers A, B, and C tooreceive HTTP network traffic on port 80.</span></span> <span data-ttu-id="2864d-118">hello három kiszolgáló hello alapértelmezett állapotfigyelés tesztek 30 másodpercenként kifogástalan HTTP-választ.</span><span class="sxs-lookup"><span data-stu-id="2864d-118">hello default health monitoring tests hello three servers every 30 seconds for a healthy HTTP response.</span></span> <span data-ttu-id="2864d-119">Rendelkezik a megfelelő HTTP-válasz egy [állapotkód](https://msdn.microsoft.com/library/aa287675.aspx) 200 és 399 között.</span><span class="sxs-lookup"><span data-stu-id="2864d-119">A healthy HTTP response has a [status code](https://msdn.microsoft.com/library/aa287675.aspx) between 200 and 399.</span></span>

<span data-ttu-id="2864d-120">Hello alapértelmezett mintavétel-ellenőrzés sikertelen, A kiszolgáló, ha hello Alkalmazásátjáró automatikusan eltávolítja a háttér-készlet, és a hálózati forgalom leállítja toothis server továbbítására.</span><span class="sxs-lookup"><span data-stu-id="2864d-120">If hello default probe check fails for server A, hello application gateway removes it from its back-end pool, and network traffic stops flowing toothis server.</span></span> <span data-ttu-id="2864d-121">hello alapértelmezett mintavétel egy 30 másodpercenként továbbra is fennáll toocheck kiszolgáló.</span><span class="sxs-lookup"><span data-stu-id="2864d-121">hello default probe still continues toocheck for server A every 30 seconds.</span></span> <span data-ttu-id="2864d-122">A kiszolgáló válaszol sikeresen tooone kérelem érkező egy alapértelmezett állapotmintáihoz, amikor felveszik vissza megfelelő toohello háttér-készlet, valamint a forgalom megkezdődésekor toohello server újra.</span><span class="sxs-lookup"><span data-stu-id="2864d-122">When server A responds successfully tooone request from a default health probe, it is added back as healthy toohello back-end pool, and traffic starts flowing toohello server again.</span></span>

### <a name="default-health-probe-settings"></a><span data-ttu-id="2864d-123">Alapértelmezett állapotfigyelő mintavételi beállításai</span><span class="sxs-lookup"><span data-stu-id="2864d-123">Default health probe settings</span></span>

| <span data-ttu-id="2864d-124">Mintavételi tulajdonság</span><span class="sxs-lookup"><span data-stu-id="2864d-124">Probe property</span></span> | <span data-ttu-id="2864d-125">Érték</span><span class="sxs-lookup"><span data-stu-id="2864d-125">Value</span></span> | <span data-ttu-id="2864d-126">Leírás</span><span class="sxs-lookup"><span data-stu-id="2864d-126">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="2864d-127">A mintavételi URL-címe</span><span class="sxs-lookup"><span data-stu-id="2864d-127">Probe URL</span></span> |<span data-ttu-id="2864d-128">http://127.0.0.1:\<port\>/</span><span class="sxs-lookup"><span data-stu-id="2864d-128">http://127.0.0.1:\<port\>/</span></span> |<span data-ttu-id="2864d-129">URL-címe</span><span class="sxs-lookup"><span data-stu-id="2864d-129">URL path</span></span> |
| <span data-ttu-id="2864d-130">időköz</span><span class="sxs-lookup"><span data-stu-id="2864d-130">Interval</span></span> |<span data-ttu-id="2864d-131">30</span><span class="sxs-lookup"><span data-stu-id="2864d-131">30</span></span> |<span data-ttu-id="2864d-132">Mintavételi időköz másodpercben</span><span class="sxs-lookup"><span data-stu-id="2864d-132">Probe interval in seconds</span></span> |
| <span data-ttu-id="2864d-133">Időtúllépés</span><span class="sxs-lookup"><span data-stu-id="2864d-133">Time-out</span></span> |<span data-ttu-id="2864d-134">30</span><span class="sxs-lookup"><span data-stu-id="2864d-134">30</span></span> |<span data-ttu-id="2864d-135">Mintavételi időkorlátja másodpercben</span><span class="sxs-lookup"><span data-stu-id="2864d-135">Probe time-out in seconds</span></span> |
| <span data-ttu-id="2864d-136">Sérült küszöbérték</span><span class="sxs-lookup"><span data-stu-id="2864d-136">Unhealthy threshold</span></span> |<span data-ttu-id="2864d-137">3</span><span class="sxs-lookup"><span data-stu-id="2864d-137">3</span></span> |<span data-ttu-id="2864d-138">Mintavételi újrapróbálkozások maximális számát.</span><span class="sxs-lookup"><span data-stu-id="2864d-138">Probe retry count.</span></span> <span data-ttu-id="2864d-139">hello háttér-kiszolgáló van megjelölve, miután hello egymást követő mintavételi hiba száma eléri a hello sérült küszöbérték.</span><span class="sxs-lookup"><span data-stu-id="2864d-139">hello back-end server is marked down after hello consecutive probe failure count reaches hello unhealthy threshold.</span></span> |

> [!NOTE]
> <span data-ttu-id="2864d-140">hello port van hello azonos port hello háttér HTTP-beállításként.</span><span class="sxs-lookup"><span data-stu-id="2864d-140">hello port is hello same port as hello back-end HTTP settings.</span></span>

<span data-ttu-id="2864d-141">hello alapértelmezett mintavétel ellenőrzi, hogy csak az http://127.0.0.1:\<port\> toodetermine állapotát.</span><span class="sxs-lookup"><span data-stu-id="2864d-141">hello default probe looks only at http://127.0.0.1:\<port\> toodetermine health status.</span></span> <span data-ttu-id="2864d-142">Ha tooconfigure hello állapotfigyelő mintavételi toogo tooa egyéni URL-címhez kell, vagy bármely egyéb beállítások módosítása, a következő lépéseket hello egyéni mintavételt kell használnia:</span><span class="sxs-lookup"><span data-stu-id="2864d-142">If you need tooconfigure hello health probe toogo tooa custom URL or modify any other settings, you must use custom probes as described in hello following steps:</span></span>

## <a name="custom-health-probe"></a><span data-ttu-id="2864d-143">Egyéni állapotmintáihoz</span><span class="sxs-lookup"><span data-stu-id="2864d-143">Custom health probe</span></span>

<span data-ttu-id="2864d-144">Egyéni mintavételt toohave hello állapotfigyelés részletesebb szabályozhatják engedélyezése.</span><span class="sxs-lookup"><span data-stu-id="2864d-144">Custom probes allow you toohave a more granular control over hello health monitoring.</span></span> <span data-ttu-id="2864d-145">Egyéni mintavételt használata esetén konfigurálhatja hello mintavétel gyakoriságát, hello URL-cím és az elérési út tootest, hogy hány sikertelen válaszok tooaccept hello háttér-készlet példány sérültként való megjelölése előtt.</span><span class="sxs-lookup"><span data-stu-id="2864d-145">When using custom probes, you can configure hello probe interval, hello URL and path tootest, and how many failed responses tooaccept before marking hello back-end pool instance as unhealthy.</span></span>

### <a name="custom-health-probe-settings"></a><span data-ttu-id="2864d-146">Egyéni állapotfigyelő mintavételi beállítások</span><span class="sxs-lookup"><span data-stu-id="2864d-146">Custom health probe settings</span></span>

<span data-ttu-id="2864d-147">hello következő tábla biztosít jelentésdefiníciókat hello tulajdonságának értéke egy egyéni állapotmintáihoz.</span><span class="sxs-lookup"><span data-stu-id="2864d-147">hello following table provides definitions for hello properties of a custom health probe.</span></span>

| <span data-ttu-id="2864d-148">Mintavételi tulajdonság</span><span class="sxs-lookup"><span data-stu-id="2864d-148">Probe property</span></span> | <span data-ttu-id="2864d-149">Leírás</span><span class="sxs-lookup"><span data-stu-id="2864d-149">Description</span></span> |
| --- | --- |
| <span data-ttu-id="2864d-150">Név</span><span class="sxs-lookup"><span data-stu-id="2864d-150">Name</span></span> |<span data-ttu-id="2864d-151">Hello mintavétel neve.</span><span class="sxs-lookup"><span data-stu-id="2864d-151">Name of hello probe.</span></span> <span data-ttu-id="2864d-152">Ez a név foglalt toorefer toohello mintavételi a háttér-HTTP-beállítások.</span><span class="sxs-lookup"><span data-stu-id="2864d-152">This name is used toorefer toohello probe in back-end HTTP settings.</span></span> |
| <span data-ttu-id="2864d-153">Protokoll</span><span class="sxs-lookup"><span data-stu-id="2864d-153">Protocol</span></span> |<span data-ttu-id="2864d-154">Toosend hello mintavételi használt protokoll.</span><span class="sxs-lookup"><span data-stu-id="2864d-154">Protocol used toosend hello probe.</span></span> <span data-ttu-id="2864d-155">hello mintavételi hello háttér HTTP-beállítások között megadott hello protokollt használja</span><span class="sxs-lookup"><span data-stu-id="2864d-155">hello probe uses hello protocol defined in hello back-end HTTP settings</span></span> |
| <span data-ttu-id="2864d-156">Gazdagép</span><span class="sxs-lookup"><span data-stu-id="2864d-156">Host</span></span> |<span data-ttu-id="2864d-157">Gazdagép neve toosend hello mintavétel.</span><span class="sxs-lookup"><span data-stu-id="2864d-157">Host name toosend hello probe.</span></span> <span data-ttu-id="2864d-158">Alkalmazandó csak akkor, ha több hely van beállítva az alkalmazás-átjárón, ellenkező esetben használja a "127.0.0.1".</span><span class="sxs-lookup"><span data-stu-id="2864d-158">Applicable only when multi-site is configured on Application Gateway, otherwise use '127.0.0.1'.</span></span> <span data-ttu-id="2864d-159">Ez az érték eltér a virtuális gép állomásnevét.</span><span class="sxs-lookup"><span data-stu-id="2864d-159">This value is different from VM host name.</span></span> |
| <span data-ttu-id="2864d-160">Elérési út</span><span class="sxs-lookup"><span data-stu-id="2864d-160">Path</span></span> |<span data-ttu-id="2864d-161">Hello mintavételi relatív elérési út.</span><span class="sxs-lookup"><span data-stu-id="2864d-161">Relative path of hello probe.</span></span> <span data-ttu-id="2864d-162">hello érvényes elérési út elindítja a "/".</span><span class="sxs-lookup"><span data-stu-id="2864d-162">hello valid path starts from '/'.</span></span> |
| <span data-ttu-id="2864d-163">időköz</span><span class="sxs-lookup"><span data-stu-id="2864d-163">Interval</span></span> |<span data-ttu-id="2864d-164">Mintavételi időköz másodpercben.</span><span class="sxs-lookup"><span data-stu-id="2864d-164">Probe interval in seconds.</span></span> <span data-ttu-id="2864d-165">Ez az érték két egymást követő mintavételek menüpontban hello időközét.</span><span class="sxs-lookup"><span data-stu-id="2864d-165">This value is hello time interval between two consecutive probes.</span></span> |
| <span data-ttu-id="2864d-166">Időtúllépés</span><span class="sxs-lookup"><span data-stu-id="2864d-166">Time-out</span></span> |<span data-ttu-id="2864d-167">Mintavételi időtúllépés másodpercben.</span><span class="sxs-lookup"><span data-stu-id="2864d-167">Probe time-out in seconds.</span></span> <span data-ttu-id="2864d-168">Ha az időkorláton belül nem érkezik meg egy érvényes válasz, hello mintavételi hibás jelölést.</span><span class="sxs-lookup"><span data-stu-id="2864d-168">If a valid response is not received within this time-out period, hello probe is marked as failed.</span></span>  |
| <span data-ttu-id="2864d-169">Sérült küszöbérték</span><span class="sxs-lookup"><span data-stu-id="2864d-169">Unhealthy threshold</span></span> |<span data-ttu-id="2864d-170">Mintavételi újrapróbálkozások maximális számát.</span><span class="sxs-lookup"><span data-stu-id="2864d-170">Probe retry count.</span></span> <span data-ttu-id="2864d-171">hello háttér-kiszolgáló van megjelölve, miután hello egymást követő mintavételi hiba száma eléri a hello sérült küszöbérték.</span><span class="sxs-lookup"><span data-stu-id="2864d-171">hello back-end server is marked down after hello consecutive probe failure count reaches hello unhealthy threshold.</span></span> |

> [!IMPORTANT]
> <span data-ttu-id="2864d-172">Ha Alkalmazásátjáró egy adott hely van beállítva, alapértelmezett hello állomás által nevét kell megadni a "127.0.0.1", kivéve, ha az egyéni tesztműveleti egyéb konfigurálni.</span><span class="sxs-lookup"><span data-stu-id="2864d-172">If Application Gateway is configured for a single site, by default hello Host name should be specified as '127.0.0.1', unless otherwise configured in custom probe.</span></span>
> <span data-ttu-id="2864d-173">Hivatkozás egy egyéni mintavételt továbbítja a rendszer túl\<protokoll\>://\<állomás\>:\<port\>\<elérési\>.</span><span class="sxs-lookup"><span data-stu-id="2864d-173">For reference a custom probe is sent too\<protocol\>://\<host\>:\<port\>\<path\>.</span></span> <span data-ttu-id="2864d-174">hello használt port lesz hello ugyanazt a portot, a hello háttér HTTP-beállításait.</span><span class="sxs-lookup"><span data-stu-id="2864d-174">hello port used will be hello same port as defined in hello back-end HTTP settings.</span></span>

## <a name="next-steps"></a><span data-ttu-id="2864d-175">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="2864d-175">Next steps</span></span>
<span data-ttu-id="2864d-176">Alkalmazásátjáró állapotfigyelés megismerését követően konfigurálhatja a [egyéni állapotmintáihoz](application-gateway-create-probe-portal.md) hello Azure-portálon az vagy egy [egyéni állapotmintáihoz](application-gateway-create-probe-ps.md) PowerShell és a hello Azure Resource Manager használatával üzembe helyezési modellben.</span><span class="sxs-lookup"><span data-stu-id="2864d-176">After learning about Application Gateway health monitoring, you can configure a [custom health probe](application-gateway-create-probe-portal.md) in hello Azure portal or a [custom health probe](application-gateway-create-probe-ps.md) using PowerShell and hello Azure Resource Manager deployment model.</span></span>

[1]: ./media/application-gateway-probe-overview/appgatewayprobe.png
