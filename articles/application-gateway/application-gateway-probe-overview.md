---
title: "Az Azure Application Gateway állapotfigyelési áttekintése |} Microsoft Docs"
description: "További tudnivalók az Azure alkalmazás átjáró a megfigyelési lehetőségek"
services: application-gateway
documentationcenter: na
author: georgewallace
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 7eeba328-bb2d-4d3e-bdac-7552e7900b7f
ms.service: application-gateway
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 12/14/2016
ms.author: gwallace
ms.openlocfilehash: 899115d213e626f17e58c2e5f01313f760f9e7f4
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 07/11/2017
---
# <a name="application-gateway-health-monitoring-overview"></a><span data-ttu-id="2890f-103">Átjáró állapotfigyelő figyelési – áttekintés</span><span class="sxs-lookup"><span data-stu-id="2890f-103">Application Gateway health monitoring overview</span></span>

<span data-ttu-id="2890f-104">Azure Application Gateway alapértelmezés szerint a háttér-készlet összes erőforrások állapotát figyeli, és automatikusan eltávolítja az összes erőforrást, a készlet megfelelő állapotúnak számít.</span><span class="sxs-lookup"><span data-stu-id="2890f-104">Azure Application Gateway by default monitors the health of all resources in its back-end pool and automatically removes any resource considered unhealthy from the pool.</span></span> <span data-ttu-id="2890f-105">Alkalmazásátjáró továbbra is figyeli a nem megfelelő példányok, és hozzáadja őket a megfelelő háttér-készlet számára, amennyiben az rendelkezésre állására, és állapotteljesítmény válaszolni.</span><span class="sxs-lookup"><span data-stu-id="2890f-105">Application Gateway continues to monitor the unhealthy instances and adds them back to the healthy back-end pool once they become available and respond to health probes.</span></span> <span data-ttu-id="2890f-106">Alkalmazásátjáró küldi az állapot-mintavételi csomagjai a meghatározott a háttér-HTTP-beállítások ugyanazt a portot.</span><span class="sxs-lookup"><span data-stu-id="2890f-106">Application gateway sends the health probes with the same port that is defined in the back-end HTTP settings.</span></span> <span data-ttu-id="2890f-107">Ez a konfiguráció biztosítja, hogy a mintavétel ellenőrzi, hogy az ügyfelek akkor használja a háttérrendszerhez való csatlakozáshoz ugyanazt a portot.</span><span class="sxs-lookup"><span data-stu-id="2890f-107">This configuration ensures that the probe is testing the same port that customers would be using to connect to the backend.</span></span>

![alkalmazás átjáró mintavételi – példa][1]

<span data-ttu-id="2890f-109">Mellett alapértelmezett mintavételi állapotfigyelés, testreszabhatja a állapotmintáihoz az alkalmazás követelményeinek megfelelően.</span><span class="sxs-lookup"><span data-stu-id="2890f-109">In addition to using default health probe monitoring, you can also customize the health probe to suit your application's requirements.</span></span> <span data-ttu-id="2890f-110">Ebben a cikkben alapértelmezett és egyéni állapotteljesítmény tartoznak.</span><span class="sxs-lookup"><span data-stu-id="2890f-110">In this article, both default and custom health probes are covered.</span></span>

> [!NOTE]
> <span data-ttu-id="2890f-111">Ha Alkalmazásátjáró alhálózat egy NSG-t, porttartományok 65503-65534 meg kell nyitni bejövő forgalom az Alkalmazásátjáró alhálózaton.</span><span class="sxs-lookup"><span data-stu-id="2890f-111">If there is an NSG on Application Gateway subnet, port ranges 65503-65534 should be opened on the Application Gateway subnet for Inbound traffic.</span></span> <span data-ttu-id="2890f-112">Ezeket a portokat a háttérrendszer állapotfigyelő API működéséhez szükségesek.</span><span class="sxs-lookup"><span data-stu-id="2890f-112">These ports are required for the backend health API to work.</span></span>

## <a name="default-health-probe"></a><span data-ttu-id="2890f-113">Alapértelmezett állapotmintáihoz</span><span class="sxs-lookup"><span data-stu-id="2890f-113">Default health probe</span></span>

<span data-ttu-id="2890f-114">Alkalmazásátjáró automatikusan meghatározza, hogy egy alapértelmezett állapotmintáihoz nem állít be egyéni mintavételi beállításra.</span><span class="sxs-lookup"><span data-stu-id="2890f-114">An application gateway automatically configures a default health probe when you don't set up any custom probe configuration.</span></span> <span data-ttu-id="2890f-115">A figyelési viselkedés HTTP-kérelem a háttér-készlet konfigurált IP-címeit, így működik.</span><span class="sxs-lookup"><span data-stu-id="2890f-115">The monitoring behavior works by making an HTTP request to the IP addresses configured for the back-end pool.</span></span> <span data-ttu-id="2890f-116">Az alapértelmezett mintavételt a backendhttpsettings osztályhoz vannak konfigurálva, a HTTPS-hez, ha a mintavételi HTTPS PROTOKOLLT használ, valamint a háttérkiszolgálókon állapotának ellenőrzéséhez.</span><span class="sxs-lookup"><span data-stu-id="2890f-116">For default probes if the backend http settings are configured for HTTPS, the probe uses HTTPS as well to test health of the backends.</span></span>

<span data-ttu-id="2890f-117">Például: az alkalmazás átjárót háttérkiszolgálók A, B és C használja a 80-as porton, HTTP-hálózati forgalom fogadására konfigurálja.</span><span class="sxs-lookup"><span data-stu-id="2890f-117">For example: You configure your application gateway to use back-end servers A, B, and C to receive HTTP network traffic on port 80.</span></span> <span data-ttu-id="2890f-118">A három kiszolgáló az alapértelmezett állapotfigyelés tesztek 30 másodpercenként kifogástalan HTTP-választ.</span><span class="sxs-lookup"><span data-stu-id="2890f-118">The default health monitoring tests the three servers every 30 seconds for a healthy HTTP response.</span></span> <span data-ttu-id="2890f-119">Rendelkezik a megfelelő HTTP-válasz egy [állapotkód](https://msdn.microsoft.com/library/aa287675.aspx) 200 és 399 között.</span><span class="sxs-lookup"><span data-stu-id="2890f-119">A healthy HTTP response has a [status code](https://msdn.microsoft.com/library/aa287675.aspx) between 200 and 399.</span></span>

<span data-ttu-id="2890f-120">Ha a kiszolgáló az alapértelmezett mintavételi ellenőrzése sikertelen, az Alkalmazásátjáró automatikusan eltávolítja a háttér-készlet, és a hálózati forgalom leállítja a kiszolgáló halad.</span><span class="sxs-lookup"><span data-stu-id="2890f-120">If the default probe check fails for server A, the application gateway removes it from its back-end pool, and network traffic stops flowing to this server.</span></span> <span data-ttu-id="2890f-121">Az alapértelmezett mintavétel továbbra is ellenőrizze a kiszolgáló egy 30 másodpercenként.</span><span class="sxs-lookup"><span data-stu-id="2890f-121">The default probe still continues to check for server A every 30 seconds.</span></span> <span data-ttu-id="2890f-122">Amikor a kiszolgáló válaszol sikeresen egy kérést a egy alapértelmezett állapotmintáihoz, kerül ismét kifogástalan a háttér-készlet, és forgalom elindul, a kiszolgáló ismét halad.</span><span class="sxs-lookup"><span data-stu-id="2890f-122">When server A responds successfully to one request from a default health probe, it is added back as healthy to the back-end pool, and traffic starts flowing to the server again.</span></span>

### <a name="default-health-probe-settings"></a><span data-ttu-id="2890f-123">Alapértelmezett állapotfigyelő mintavételi beállításai</span><span class="sxs-lookup"><span data-stu-id="2890f-123">Default health probe settings</span></span>

| <span data-ttu-id="2890f-124">Mintavételi tulajdonság</span><span class="sxs-lookup"><span data-stu-id="2890f-124">Probe property</span></span> | <span data-ttu-id="2890f-125">Érték</span><span class="sxs-lookup"><span data-stu-id="2890f-125">Value</span></span> | <span data-ttu-id="2890f-126">Leírás</span><span class="sxs-lookup"><span data-stu-id="2890f-126">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="2890f-127">A mintavételi URL-címe</span><span class="sxs-lookup"><span data-stu-id="2890f-127">Probe URL</span></span> |<span data-ttu-id="2890f-128">http://127.0.0.1:\<port\>/</span><span class="sxs-lookup"><span data-stu-id="2890f-128">http://127.0.0.1:\<port\>/</span></span> |<span data-ttu-id="2890f-129">URL-címe</span><span class="sxs-lookup"><span data-stu-id="2890f-129">URL path</span></span> |
| <span data-ttu-id="2890f-130">időköz</span><span class="sxs-lookup"><span data-stu-id="2890f-130">Interval</span></span> |<span data-ttu-id="2890f-131">30</span><span class="sxs-lookup"><span data-stu-id="2890f-131">30</span></span> |<span data-ttu-id="2890f-132">Mintavételi időköz másodpercben</span><span class="sxs-lookup"><span data-stu-id="2890f-132">Probe interval in seconds</span></span> |
| <span data-ttu-id="2890f-133">Időtúllépés</span><span class="sxs-lookup"><span data-stu-id="2890f-133">Time-out</span></span> |<span data-ttu-id="2890f-134">30</span><span class="sxs-lookup"><span data-stu-id="2890f-134">30</span></span> |<span data-ttu-id="2890f-135">Mintavételi időkorlátja másodpercben</span><span class="sxs-lookup"><span data-stu-id="2890f-135">Probe time-out in seconds</span></span> |
| <span data-ttu-id="2890f-136">Sérült küszöbérték</span><span class="sxs-lookup"><span data-stu-id="2890f-136">Unhealthy threshold</span></span> |<span data-ttu-id="2890f-137">3</span><span class="sxs-lookup"><span data-stu-id="2890f-137">3</span></span> |<span data-ttu-id="2890f-138">Mintavételi újrapróbálkozások maximális számát.</span><span class="sxs-lookup"><span data-stu-id="2890f-138">Probe retry count.</span></span> <span data-ttu-id="2890f-139">A háttér-kiszolgálófiók van megjelölve, miután az egymást követő mintavételi hiba száma eléri a sérült küszöbérték.</span><span class="sxs-lookup"><span data-stu-id="2890f-139">The back-end server is marked down after the consecutive probe failure count reaches the unhealthy threshold.</span></span> |

> [!NOTE]
> <span data-ttu-id="2890f-140">A port, a háttér-HTTP-beállítások ugyanazt a portot.</span><span class="sxs-lookup"><span data-stu-id="2890f-140">The port is the same port as the back-end HTTP settings.</span></span>

<span data-ttu-id="2890f-141">Az alapértelmezett vizsgálat ellenőrzi, hogy csak az http://127.0.0.1:\<port\> állapot meghatározásához.</span><span class="sxs-lookup"><span data-stu-id="2890f-141">The default probe looks only at http://127.0.0.1:\<port\> to determine health status.</span></span> <span data-ttu-id="2890f-142">Ha az állapotfigyelő mintavétel nyissa meg egy egyéni URL-címre, vagy egyéb beállításait módosítani kell, a következő lépésekben leírtaknak egyéni mintavételt kell használnia:</span><span class="sxs-lookup"><span data-stu-id="2890f-142">If you need to configure the health probe to go to a custom URL or modify any other settings, you must use custom probes as described in the following steps:</span></span>

## <a name="custom-health-probe"></a><span data-ttu-id="2890f-143">Egyéni állapotmintáihoz</span><span class="sxs-lookup"><span data-stu-id="2890f-143">Custom health probe</span></span>

<span data-ttu-id="2890f-144">Egyéni mintavételt lehetővé teszik az állapotfigyelés részletesebb vezérlésére.</span><span class="sxs-lookup"><span data-stu-id="2890f-144">Custom probes allow you to have a more granular control over the health monitoring.</span></span> <span data-ttu-id="2890f-145">Egyéni mintavételt használata esetén konfigurálhatja a mintavételi időköznek, az URL-cím és elérési útja tesztelése és fogadja el, hogy megsérült a háttér-készlet példányhoz való megjelölése előtt hány hibás válaszokat.</span><span class="sxs-lookup"><span data-stu-id="2890f-145">When using custom probes, you can configure the probe interval, the URL and path to test, and how many failed responses to accept before marking the back-end pool instance as unhealthy.</span></span>

### <a name="custom-health-probe-settings"></a><span data-ttu-id="2890f-146">Egyéni állapotfigyelő mintavételi beállítások</span><span class="sxs-lookup"><span data-stu-id="2890f-146">Custom health probe settings</span></span>

<span data-ttu-id="2890f-147">A következő táblázat a definíciók tulajdonságait a egyéni állapotmintáihoz.</span><span class="sxs-lookup"><span data-stu-id="2890f-147">The following table provides definitions for the properties of a custom health probe.</span></span>

| <span data-ttu-id="2890f-148">Mintavételi tulajdonság</span><span class="sxs-lookup"><span data-stu-id="2890f-148">Probe property</span></span> | <span data-ttu-id="2890f-149">Leírás</span><span class="sxs-lookup"><span data-stu-id="2890f-149">Description</span></span> |
| --- | --- |
| <span data-ttu-id="2890f-150">Név</span><span class="sxs-lookup"><span data-stu-id="2890f-150">Name</span></span> |<span data-ttu-id="2890f-151">A mintavétel neve.</span><span class="sxs-lookup"><span data-stu-id="2890f-151">Name of the probe.</span></span> <span data-ttu-id="2890f-152">Ez a név segítségével tekintse meg a mintavétel a háttér-HTTP-beállításait.</span><span class="sxs-lookup"><span data-stu-id="2890f-152">This name is used to refer to the probe in back-end HTTP settings.</span></span> |
| <span data-ttu-id="2890f-153">Protokoll</span><span class="sxs-lookup"><span data-stu-id="2890f-153">Protocol</span></span> |<span data-ttu-id="2890f-154">A mintavétel küldéséhez használt protokoll.</span><span class="sxs-lookup"><span data-stu-id="2890f-154">Protocol used to send the probe.</span></span> <span data-ttu-id="2890f-155">A mintavétel a háttér-HTTP-beállítások között megadott protokollt használ.</span><span class="sxs-lookup"><span data-stu-id="2890f-155">The probe uses the protocol defined in the back-end HTTP settings</span></span> |
| <span data-ttu-id="2890f-156">Gazdagép</span><span class="sxs-lookup"><span data-stu-id="2890f-156">Host</span></span> |<span data-ttu-id="2890f-157">A mintavétel küldendő állomásnevet.</span><span class="sxs-lookup"><span data-stu-id="2890f-157">Host name to send the probe.</span></span> <span data-ttu-id="2890f-158">Alkalmazandó csak akkor, ha több hely van beállítva az alkalmazás-átjárón, ellenkező esetben használja a "127.0.0.1".</span><span class="sxs-lookup"><span data-stu-id="2890f-158">Applicable only when multi-site is configured on Application Gateway, otherwise use '127.0.0.1'.</span></span> <span data-ttu-id="2890f-159">Ez az érték eltér a virtuális gép állomásnevét.</span><span class="sxs-lookup"><span data-stu-id="2890f-159">This value is different from VM host name.</span></span> |
| <span data-ttu-id="2890f-160">Elérési út</span><span class="sxs-lookup"><span data-stu-id="2890f-160">Path</span></span> |<span data-ttu-id="2890f-161">A mintavétel relatív elérési útja.</span><span class="sxs-lookup"><span data-stu-id="2890f-161">Relative path of the probe.</span></span> <span data-ttu-id="2890f-162">Az érvényes elérési utat elindítja a "/".</span><span class="sxs-lookup"><span data-stu-id="2890f-162">The valid path starts from '/'.</span></span> |
| <span data-ttu-id="2890f-163">időköz</span><span class="sxs-lookup"><span data-stu-id="2890f-163">Interval</span></span> |<span data-ttu-id="2890f-164">Mintavételi időköz másodpercben.</span><span class="sxs-lookup"><span data-stu-id="2890f-164">Probe interval in seconds.</span></span> <span data-ttu-id="2890f-165">Ez az érték pedig az időköz, két egymást követő mintavételek menüpontban között.</span><span class="sxs-lookup"><span data-stu-id="2890f-165">This value is the time interval between two consecutive probes.</span></span> |
| <span data-ttu-id="2890f-166">Időtúllépés</span><span class="sxs-lookup"><span data-stu-id="2890f-166">Time-out</span></span> |<span data-ttu-id="2890f-167">Mintavételi időtúllépés másodpercben.</span><span class="sxs-lookup"><span data-stu-id="2890f-167">Probe time-out in seconds.</span></span> <span data-ttu-id="2890f-168">Egy érvényes válasz nem érkezett meg a megadott időn belül, ha a mintavételi hibás jelölést.</span><span class="sxs-lookup"><span data-stu-id="2890f-168">If a valid response is not received within this time-out period, the probe is marked as failed.</span></span>  |
| <span data-ttu-id="2890f-169">Sérült küszöbérték</span><span class="sxs-lookup"><span data-stu-id="2890f-169">Unhealthy threshold</span></span> |<span data-ttu-id="2890f-170">Mintavételi újrapróbálkozások maximális számát.</span><span class="sxs-lookup"><span data-stu-id="2890f-170">Probe retry count.</span></span> <span data-ttu-id="2890f-171">A háttér-kiszolgálófiók van megjelölve, miután az egymást követő mintavételi hiba száma eléri a sérült küszöbérték.</span><span class="sxs-lookup"><span data-stu-id="2890f-171">The back-end server is marked down after the consecutive probe failure count reaches the unhealthy threshold.</span></span> |

> [!IMPORTANT]
> <span data-ttu-id="2890f-172">Ha Alkalmazásátjáró egy adott hely van konfigurálva, a gazdagépen alapértelmezés szerint nevét kell megadni a "127.0.0.1", kivéve, ha az egyéni tesztműveleti egyéb konfigurálni.</span><span class="sxs-lookup"><span data-stu-id="2890f-172">If Application Gateway is configured for a single site, by default the Host name should be specified as '127.0.0.1', unless otherwise configured in custom probe.</span></span>
> <span data-ttu-id="2890f-173">Referenciaként egy egyéni mintavételt küldött \<protokoll\>://\<állomás\>:\<port\>\<elérési\>.</span><span class="sxs-lookup"><span data-stu-id="2890f-173">For reference a custom probe is sent to \<protocol\>://\<host\>:\<port\>\<path\>.</span></span> <span data-ttu-id="2890f-174">A háttér-HTTP-beállítások között megadott használt port válik, ugyanazt a portot.</span><span class="sxs-lookup"><span data-stu-id="2890f-174">The port used will be the same port as defined in the back-end HTTP settings.</span></span>

## <a name="next-steps"></a><span data-ttu-id="2890f-175">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="2890f-175">Next steps</span></span>
<span data-ttu-id="2890f-176">Alkalmazásátjáró állapotfigyelés megismerését követően konfigurálhatja a [egyéni állapotmintáihoz](application-gateway-create-probe-portal.md) az Azure portálon vagy egy [egyéni állapotmintáihoz](application-gateway-create-probe-ps.md) PowerShell és az Azure Resource Manager használatával üzembe helyezési modellben.</span><span class="sxs-lookup"><span data-stu-id="2890f-176">After learning about Application Gateway health monitoring, you can configure a [custom health probe](application-gateway-create-probe-portal.md) in the Azure portal or a [custom health probe](application-gateway-create-probe-ps.md) using PowerShell and the Azure Resource Manager deployment model.</span></span>

[1]: ./media/application-gateway-probe-overview/appgatewayprobe.png
