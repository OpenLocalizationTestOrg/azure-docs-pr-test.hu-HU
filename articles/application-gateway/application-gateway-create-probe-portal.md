---
title: "Hozzon létre egy egyéni mintavételt - Azure Application Gateway - Azure portálon |} Microsoft Docs"
description: "Megtudhatja, hogyan hozzon létre egy egyéni mintavétel az Alkalmazásátjáró a portál használatával"
services: application-gateway
documentationcenter: na
author: georgewallace
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 33fd5564-43a7-4c54-a9ec-b1235f661f97
ms.service: application-gateway
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 04/26/2017
ms.author: gwallace
ms.openlocfilehash: 65e9bba4ce9ac41ae2a9a8c3fa7f661165fc1403
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 08/03/2017
---
# <a name="create-a-custom-probe-for-application-gateway-by-using-the-portal"></a><span data-ttu-id="29fdd-103">Hozzon létre egy egyéni mintavétel az Alkalmazásátjáró a portál használatával</span><span class="sxs-lookup"><span data-stu-id="29fdd-103">Create a custom probe for Application Gateway by using the portal</span></span>

> [!div class="op_single_selector"]
> * [<span data-ttu-id="29fdd-104">Azure Portal</span><span class="sxs-lookup"><span data-stu-id="29fdd-104">Azure portal</span></span>](application-gateway-create-probe-portal.md)
> * [<span data-ttu-id="29fdd-105">Azure Resource Manager PowerShell</span><span class="sxs-lookup"><span data-stu-id="29fdd-105">Azure Resource Manager PowerShell</span></span>](application-gateway-create-probe-ps.md)
> * [<span data-ttu-id="29fdd-106">Klasszikus Azure PowerShell</span><span class="sxs-lookup"><span data-stu-id="29fdd-106">Azure Classic PowerShell</span></span>](application-gateway-create-probe-classic-ps.md)

<span data-ttu-id="29fdd-107">Ebben a cikkben ad hozzá egy egyéni mintavételt meglévő Alkalmazásátjáró az Azure portálon keresztül.</span><span class="sxs-lookup"><span data-stu-id="29fdd-107">In this article, you add a custom probe to an existing application gateway through the Azure portal.</span></span> <span data-ttu-id="29fdd-108">Egyéni mintavételt az alkalmazásokat, amelyek egy adott állapotának ellenőrzése lapon vagy az alapértelmezett webes alkalmazás a sikeres válasz nem biztosító alkalmazások hasznosak.</span><span class="sxs-lookup"><span data-stu-id="29fdd-108">Custom probes are useful for applications that have a specific health check page or for applications that do not provide a successful response on the default web application.</span></span>

## <a name="before-you-begin"></a><span data-ttu-id="29fdd-109">Előkészületek</span><span class="sxs-lookup"><span data-stu-id="29fdd-109">Before you begin</span></span>

<span data-ttu-id="29fdd-110">Ha még nem rendelkezik olyan átjárót, látogasson el [Alkalmazásátjáró létrehozása](application-gateway-create-gateway-portal.md) történő együttműködésre Alkalmazásátjáró létrehozása.</span><span class="sxs-lookup"><span data-stu-id="29fdd-110">If you do not already have an application gateway, visit [Create an Application Gateway](application-gateway-create-gateway-portal.md) to create an application gateway to work with.</span></span>

## <span data-ttu-id="29fdd-111"><a name="createprobe"></a>A mintavétel létrehozása</span><span class="sxs-lookup"><span data-stu-id="29fdd-111"><a name="createprobe"></a>Create the probe</span></span>

<span data-ttu-id="29fdd-112">Mintavételt egy kétlépéses folyamat, a portálon keresztül lehet konfigurálni.</span><span class="sxs-lookup"><span data-stu-id="29fdd-112">Probes are configured in a two-step process through the portal.</span></span> <span data-ttu-id="29fdd-113">Az első lépés, ha a mintavételi.</span><span class="sxs-lookup"><span data-stu-id="29fdd-113">The first step is to create the probe.</span></span> <span data-ttu-id="29fdd-114">A második lépésben adja hozzá a mintavétel a backendhttpsettings osztályhoz az Alkalmazásátjáró.</span><span class="sxs-lookup"><span data-stu-id="29fdd-114">In the second step, you add the probe to the backend http settings of the application gateway.</span></span>

1. <span data-ttu-id="29fdd-115">Jelentkezzen be az [Azure portálra](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="29fdd-115">Log in to the [Azure portal](https://portal.azure.com).</span></span> <span data-ttu-id="29fdd-116">Ha már nincs fiókja, regisztrálhat az egy [ingyenes egy hónapos próbaverzió](https://azure.microsoft.com/free)</span><span class="sxs-lookup"><span data-stu-id="29fdd-116">If you don't already have an account, you can sign up for a [free one-month trial](https://azure.microsoft.com/free)</span></span>

1. <span data-ttu-id="29fdd-117">Az Azure portál Kedvencek ablaktábláján kattintson összes erőforrást.</span><span class="sxs-lookup"><span data-stu-id="29fdd-117">In the Azure portal Favorites pane, click All resources.</span></span> <span data-ttu-id="29fdd-118">Kattintson az összes erőforrások panelen az Alkalmazásátjáró.</span><span class="sxs-lookup"><span data-stu-id="29fdd-118">Click the application gateway in the All resources blade.</span></span> <span data-ttu-id="29fdd-119">Ha már kijelölt előfizetésben több erőforrást tartalmaz, megadhatja partners.contoso.net a szűrő név szerint...</span><span class="sxs-lookup"><span data-stu-id="29fdd-119">If the subscription you selected already has several resources in it, you can enter partners.contoso.net in the Filter by name…</span></span> <span data-ttu-id="29fdd-120">mezőbe.</span><span class="sxs-lookup"><span data-stu-id="29fdd-120">box to easily access the application gateway.</span></span>

1. <span data-ttu-id="29fdd-121">Kattintson a **vizsgálat** , és kattintson a **hozzáadása** vizsgálatok hozzáadása gomb.</span><span class="sxs-lookup"><span data-stu-id="29fdd-121">Click **Probes** and click the **Add** button to add a probe.</span></span>

  ![Adja hozzá a mintavételi panel tölti ki adatokkal][1]

1. <span data-ttu-id="29fdd-123">Az a **Hozzáadás állapotmintáihoz** panelen, töltse ki a mintavétel a szükséges adatokat, és kattintson teljes **OK**.</span><span class="sxs-lookup"><span data-stu-id="29fdd-123">On the **Add health probe** blade, fill out the required information for the probe, and when complete click **OK**.</span></span>

  |<span data-ttu-id="29fdd-124">**Beállítás**</span><span class="sxs-lookup"><span data-stu-id="29fdd-124">**Setting**</span></span> | <span data-ttu-id="29fdd-125">**Érték**</span><span class="sxs-lookup"><span data-stu-id="29fdd-125">**Value**</span></span> | <span data-ttu-id="29fdd-126">**Részletek**</span><span class="sxs-lookup"><span data-stu-id="29fdd-126">**Details**</span></span>|
  |---|---|---|
  |<span data-ttu-id="29fdd-127">**Name (Név)**</span><span class="sxs-lookup"><span data-stu-id="29fdd-127">**Name**</span></span>|<span data-ttu-id="29fdd-128">customProbe</span><span class="sxs-lookup"><span data-stu-id="29fdd-128">customProbe</span></span>|<span data-ttu-id="29fdd-129">Ez az érték egy rövid nevet az vizsgálatot, amely elérhető a portál.</span><span class="sxs-lookup"><span data-stu-id="29fdd-129">This value is a friendly name to the probe that is accessible in the portal.</span></span>|
  |<span data-ttu-id="29fdd-130">**Protocol (Protokoll)**</span><span class="sxs-lookup"><span data-stu-id="29fdd-130">**Protocol**</span></span>|<span data-ttu-id="29fdd-131">HTTP vagy HTTPS</span><span class="sxs-lookup"><span data-stu-id="29fdd-131">HTTP or HTTPS</span></span> | <span data-ttu-id="29fdd-132">A protokoll, amely a állapotmintáihoz használja.</span><span class="sxs-lookup"><span data-stu-id="29fdd-132">The protocol that the health probe uses.</span></span>|
  |<span data-ttu-id="29fdd-133">**Állomás**</span><span class="sxs-lookup"><span data-stu-id="29fdd-133">**Host**</span></span>|<span data-ttu-id="29fdd-134">Egytényezős</span><span class="sxs-lookup"><span data-stu-id="29fdd-134">i.e</span></span> <span data-ttu-id="29fdd-135">contoso.com</span><span class="sxs-lookup"><span data-stu-id="29fdd-135">contoso.com</span></span>|<span data-ttu-id="29fdd-136">Ez az érték a gazdagép neve a mintavétel használt.</span><span class="sxs-lookup"><span data-stu-id="29fdd-136">This value is the host name that is used for the probe.</span></span> <span data-ttu-id="29fdd-137">Alkalmazandó csak akkor, ha több hely van beállítva az alkalmazás-átjárón, ellenkező esetben használja a "127.0.0.1".</span><span class="sxs-lookup"><span data-stu-id="29fdd-137">Applicable only when multi-site is configured on Application Gateway, otherwise use '127.0.0.1'.</span></span> <span data-ttu-id="29fdd-138">Ez az érték eltér a virtuális gép állomásnevét.</span><span class="sxs-lookup"><span data-stu-id="29fdd-138">This value is different from the VM host name.</span></span>|
  |<span data-ttu-id="29fdd-139">**Elérési út**</span><span class="sxs-lookup"><span data-stu-id="29fdd-139">**Path**</span></span>|<span data-ttu-id="29fdd-140">/ vagy egy másik elérési utat</span><span class="sxs-lookup"><span data-stu-id="29fdd-140">/ or another path</span></span>|<span data-ttu-id="29fdd-141">A teljes URL-címet az egyéni vizsgálat további része.</span><span class="sxs-lookup"><span data-stu-id="29fdd-141">The remainder of the full url for the custom probe.</span></span> <span data-ttu-id="29fdd-142">Érvényes elérési utat kezdődik "/".</span><span class="sxs-lookup"><span data-stu-id="29fdd-142">A valid path starts with '/'.</span></span> <span data-ttu-id="29fdd-143">Az alapértelmezett elérési útja pedig csak http://contoso.com használja "/"</span><span class="sxs-lookup"><span data-stu-id="29fdd-143">For the default path of http://contoso.com just use '/'</span></span> |
  |<span data-ttu-id="29fdd-144">**Időtartam (másodperc)**</span><span class="sxs-lookup"><span data-stu-id="29fdd-144">**Interval (secs)**</span></span>|<span data-ttu-id="29fdd-145">30</span><span class="sxs-lookup"><span data-stu-id="29fdd-145">30</span></span>|<span data-ttu-id="29fdd-146">Milyen gyakran a mintavétel futtassa a állapotának ellenőrzése.</span><span class="sxs-lookup"><span data-stu-id="29fdd-146">How often the probe is run to check for health.</span></span> <span data-ttu-id="29fdd-147">Nem ajánlott beállítani az alacsonyabb mint 30 másodperc.</span><span class="sxs-lookup"><span data-stu-id="29fdd-147">It is not recommended to set the lower than 30 seconds.</span></span>|
  |<span data-ttu-id="29fdd-148">**Időkorlátja (másodperc)**</span><span class="sxs-lookup"><span data-stu-id="29fdd-148">**Timeout (secs)**</span></span>|<span data-ttu-id="29fdd-149">30</span><span class="sxs-lookup"><span data-stu-id="29fdd-149">30</span></span>|<span data-ttu-id="29fdd-150">A mintavétel vár, mielőtt túllépné idő mennyiségét.</span><span class="sxs-lookup"><span data-stu-id="29fdd-150">The amount of time the probe waits before timing out.</span></span> <span data-ttu-id="29fdd-151">Az időkorlát kell lennie, elég nagy, hogy egy http hívni is győződjön meg arról, a háttér health-oldal érhető el.</span><span class="sxs-lookup"><span data-stu-id="29fdd-151">The timeout interval needs to be high enough that an http call can be made to ensure the backend health page is available.</span></span>|
  |<span data-ttu-id="29fdd-152">**Sérült küszöbérték**</span><span class="sxs-lookup"><span data-stu-id="29fdd-152">**Unhealthy threshold**</span></span>|<span data-ttu-id="29fdd-153">3</span><span class="sxs-lookup"><span data-stu-id="29fdd-153">3</span></span>|<span data-ttu-id="29fdd-154">Akkor, ha a nem megfelelő sikertelen bejelentkezési kísérletek számát.</span><span class="sxs-lookup"><span data-stu-id="29fdd-154">Number of failed attempts to be considered unhealthy.</span></span> <span data-ttu-id="29fdd-155">0, akkor a küszöbérték, ha a rendszerállapot-ellenőrzés sikertelen a háttér-határozza meg. a nem megfelelő azonnal.</span><span class="sxs-lookup"><span data-stu-id="29fdd-155">A threshold of 0 means that if a health check fails the back-end is determined unhealthy immediately.</span></span>|

  > [!IMPORTANT]
  > <span data-ttu-id="29fdd-156">Az állomás neve megegyezik nem a kiszolgáló nevét.</span><span class="sxs-lookup"><span data-stu-id="29fdd-156">The host name is not the same as server name.</span></span> <span data-ttu-id="29fdd-157">Ez az érték az alkalmazáskiszolgáló fut a virtuális gazdagép nevét.</span><span class="sxs-lookup"><span data-stu-id="29fdd-157">This value is the name of the virtual host running on the application server.</span></span> <span data-ttu-id="29fdd-158">A mintavétel a rendszer elküldi http://(host name):(port from httpsetting)/urlPath</span><span class="sxs-lookup"><span data-stu-id="29fdd-158">The probe is sent to http://(host name):(port from httpsetting)/urlPath</span></span>

## <a name="add-probe-to-the-gateway"></a><span data-ttu-id="29fdd-159">Mintavételi hozzáadása az átjáró</span><span class="sxs-lookup"><span data-stu-id="29fdd-159">Add probe to the gateway</span></span>

<span data-ttu-id="29fdd-160">Most, hogy a mintavétel létrehozása után adja hozzá az átjáró időt is.</span><span class="sxs-lookup"><span data-stu-id="29fdd-160">Now that the probe has been created, it is time to add it to the gateway.</span></span> <span data-ttu-id="29fdd-161">A backendhttpsettings osztályhoz az Alkalmazásátjáró mintavételi beállítások vannak megadva.</span><span class="sxs-lookup"><span data-stu-id="29fdd-161">Probe settings are set on the backend http settings of the application gateway.</span></span>

1. <span data-ttu-id="29fdd-162">Kattintson a **HTTP-beállítások** az alkalmazás-átjárón nyissa meg a konfigurációs panelen kattintson az aktuális háttér http-beállítások szerepel az ablak.</span><span class="sxs-lookup"><span data-stu-id="29fdd-162">Click **HTTP settings** on the application gateway, to bring up the configuration blade click the current backend http settings listed in the window.</span></span>

  ![HTTPS-beállítások ablak][2]

1. <span data-ttu-id="29fdd-164">Az a **appGatewayBackEndHttpSettings** beállítások panelen ellenőrizze a **használata egyéni tesztműveleti** jelölőnégyzetet, és válassza ki a létrehozott mintavétel a [a mintavétel létrehozása](#createprobe) szakaszt, a  **Egyéni tesztműveleti** legördülő...</span><span class="sxs-lookup"><span data-stu-id="29fdd-164">On the **appGatewayBackEndHttpSettings** settings blade, check the **Use custom probe** checkbox and choose the probe created in the [Create the probe](#createprobe) section on the **Custom probe** drop-down..</span></span>
<span data-ttu-id="29fdd-165">Amikor végzett, kattintson **mentése** és a beállítások lesznek alkalmazva.</span><span class="sxs-lookup"><span data-stu-id="29fdd-165">When complete, click **Save** and the settings are applied.</span></span>

<span data-ttu-id="29fdd-166">Az alapértelmezett mintavétel az alapértelmezett hozzáférési webalkalmazás ellenőrzi.</span><span class="sxs-lookup"><span data-stu-id="29fdd-166">The default probe checks the default access to the web application.</span></span> <span data-ttu-id="29fdd-167">Most, hogy egy egyéni mintavétel létrehozása után az Alkalmazásátjáró használja a háttérkiszolgálókhoz állapotának figyeléséhez definiált egyéni elérési utat.</span><span class="sxs-lookup"><span data-stu-id="29fdd-167">Now that a custom probe has been created, the application gateway uses the custom path defined to monitor health for the backend servers.</span></span> <span data-ttu-id="29fdd-168">A megadott feltétel alapján, az Alkalmazásátjáró ellenőrzi a mintavétel a megadott elérési út.</span><span class="sxs-lookup"><span data-stu-id="29fdd-168">Based on the criteria that was defined, the application gateway checks the path specified in the probe.</span></span> <span data-ttu-id="29fdd-169">Ha a gazdagép és a portszám hívása / elérési út nem ad vissza egy HTTP 200-399 állapotválasz, a kiszolgáló kívül Elforgatás használatban van, a sérült küszöbérték elérése után.</span><span class="sxs-lookup"><span data-stu-id="29fdd-169">If the call to host:Port/path does not return an HTTP 200-399 status response, the server is taken out of rotation after the unhealthy threshold is reached.</span></span> <span data-ttu-id="29fdd-170">Probing továbbra is a nem megfelelő állapotú példányon megállapítani, hogy mikor válik kifogástalan újra.</span><span class="sxs-lookup"><span data-stu-id="29fdd-170">Probing continues on the unhealthy instance to determine when it becomes healthy again.</span></span> <span data-ttu-id="29fdd-171">A példány vissza megfelelő kiszolgálókészlethez hozzáadott, forgalom kezdődik áramló rá, és a példányra probing továbbra is fennáll, mint a normál felhasználói megadott időközönként.</span><span class="sxs-lookup"><span data-stu-id="29fdd-171">Once the instance is added back to healthy server pool, traffic begins flowing to it again and probing to the instance continues at user specified interval as normal.</span></span>

## <a name="next-steps"></a><span data-ttu-id="29fdd-172">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="29fdd-172">Next steps</span></span>

<span data-ttu-id="29fdd-173">SSL-Feladatkiszervezést konfigurálása Azure Application Gateway kapcsolatban [SSL-kiszervezés konfigurálása](application-gateway-ssl-portal.md)</span><span class="sxs-lookup"><span data-stu-id="29fdd-173">To learn how to configure SSL Offloading with Azure Application Gateway, see [Configure SSL Offload](application-gateway-ssl-portal.md)</span></span>

[1]: ./media/application-gateway-create-probe-portal/figure1.png
[2]: ./media/application-gateway-create-probe-portal/figure2.png

