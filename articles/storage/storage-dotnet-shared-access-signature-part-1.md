---
title: "Megosztott hozzáférésű jogosultságkódokat (SAS) az Azure Storage használata |} Microsoft Docs"
description: "Ismerkedjen meg az Azure Storage-erőforrások, például a BLOB, üzenetsorok, táblák és fájlok hozzáférést biztosíthat a közös hozzáférésű jogosultságkód (SAS) segítségével."
services: storage
documentationcenter: 
author: mmacy
manager: timlt
editor: tysonn
ms.assetid: 46fd99d7-36b3-4283-81e3-f214b29f1152
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: dotnet
ms.topic: article
ms.date: 04/18/2017
ms.author: marsma
ms.openlocfilehash: ae944eae4e62132e47bf9069d83817a1a6779ff7
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 07/11/2017
---
# <a name="using-shared-access-signatures-sas"></a><span data-ttu-id="1069e-103">Közös hozzáférésű jogosultságkód (SAS) használatával</span><span class="sxs-lookup"><span data-stu-id="1069e-103">Using shared access signatures (SAS)</span></span>

<span data-ttu-id="1069e-104">A közös hozzáférésű jogosultságkód (SAS) biztosít jogokat a tárfiókban lévő objektumokhoz való korlátozott hozzáférésre más ügyfelek számára anélkül, hogy a fiókkulcs.</span><span class="sxs-lookup"><span data-stu-id="1069e-104">A shared access signature (SAS) provides you with a way to grant limited access to objects in your storage account to other clients, without exposing your account key.</span></span> <span data-ttu-id="1069e-105">Ez a cikk azt a SAS-modell áttekintése, SAS ajánlott eljárásokat, és tekintse meg néhány példa.</span><span class="sxs-lookup"><span data-stu-id="1069e-105">In this article, we provide an overview of the SAS model, review SAS best practices, and look at some examples.</span></span>

<span data-ttu-id="1069e-106">Kód itt bemutatott ruházzák SAS használatával tekintse meg a [Ismerkedés az Azure Blob Storage a .NET](https://azure.microsoft.com/documentation/samples/storage-blob-dotnet-getting-started/) és más elérhető mintákat a [Azure mintakódok](https://azure.microsoft.com/documentation/samples/?service=storage) könyvtár.</span><span class="sxs-lookup"><span data-stu-id="1069e-106">For additional code examples using SAS beyond those presented here, see [Getting Started with Azure Blob Storage in .NET](https://azure.microsoft.com/documentation/samples/storage-blob-dotnet-getting-started/) and other samples available in the [Azure Code Samples](https://azure.microsoft.com/documentation/samples/?service=storage) library.</span></span> <span data-ttu-id="1069e-107">A mintaalkalmazások letöltése és futtathatja őket, vagy keresse meg a kódot a Githubon.</span><span class="sxs-lookup"><span data-stu-id="1069e-107">You can download the sample applications and run them, or browse the code on GitHub.</span></span>

## <a name="what-is-a-shared-access-signature"></a><span data-ttu-id="1069e-108">Mi az a közös hozzáférésű jogosultságkód?</span><span class="sxs-lookup"><span data-stu-id="1069e-108">What is a shared access signature?</span></span>
<span data-ttu-id="1069e-109">A közös hozzáférésű jogosultságkód a tárfiókban lévő erőforrások delegált hozzáférést biztosít.</span><span class="sxs-lookup"><span data-stu-id="1069e-109">A shared access signature provides delegated access to resources in your storage account.</span></span> <span data-ttu-id="1069e-110">SAS-kód, az ügyfelek hozzáférést biztosíthat erőforrásokhoz a tárfiókban lévő megosztása a kulcsait nélkül.</span><span class="sxs-lookup"><span data-stu-id="1069e-110">With a SAS, you can grant clients access to resources in your storage account, without sharing your account keys.</span></span> <span data-ttu-id="1069e-111">Ez az a közös hozzáférésű jogosultságkód a lényeg az alkalmazásokban – SAS módja a biztonságos tároló-erőforrások megosztása a kulcsait veszélyeztetése nélkül.</span><span class="sxs-lookup"><span data-stu-id="1069e-111">This is the key point of using shared access signatures in your applications--a SAS is a secure way to share your storage resources without compromising your account keys.</span></span>

[!INCLUDE [storage-account-key-note-include](../../includes/storage-account-key-note-include.md)]

<span data-ttu-id="1069e-112">SAS-kód lehetővé teszi részletes szabályozását a típusú rendelkező az SA-kat, beleértve az ügyfelek számára biztosítson hozzáférést:</span><span class="sxs-lookup"><span data-stu-id="1069e-112">A SAS gives you granular control over the type of access you grant to clients who have the SAS, including:</span></span>

* <span data-ttu-id="1069e-113">A keresztül, amely a SAS érvényességi időtartama, beleértve a kezdési idő és a lejárati időpont.</span><span class="sxs-lookup"><span data-stu-id="1069e-113">The interval over which the SAS is valid, including the start time and the expiry time.</span></span>
* <span data-ttu-id="1069e-114">A biztonsági Társítások engedélyekre.</span><span class="sxs-lookup"><span data-stu-id="1069e-114">The permissions granted by the SAS.</span></span> <span data-ttu-id="1069e-115">Például blob SAS-kód előfordulhat, hogy adjon olvasási és írási engedéllyel, hogy a blob, de nem törli az engedélyeket.</span><span class="sxs-lookup"><span data-stu-id="1069e-115">For example, a SAS for a blob might grant read and write permissions to that blob, but not delete permissions.</span></span>
* <span data-ttu-id="1069e-116">Nem kötelező IP-cím vagy az IP-címek tartománya, amelyből Azure Storage elfogadja az SA-kat.</span><span class="sxs-lookup"><span data-stu-id="1069e-116">An optional IP address or range of IP addresses from which Azure Storage will accept the SAS.</span></span> <span data-ttu-id="1069e-117">Például megadhatja egy adott IP-címek a szervezethez tartozó.</span><span class="sxs-lookup"><span data-stu-id="1069e-117">For example, you might specify a range of IP addresses belonging to your organization.</span></span>
* <span data-ttu-id="1069e-118">A protokoll, amelyben Azure Storage fogja fogadni az SA-kat.</span><span class="sxs-lookup"><span data-stu-id="1069e-118">The protocol over which Azure Storage will accept the SAS.</span></span> <span data-ttu-id="1069e-119">Ez nem kötelező paraméter használatával korlátozza a hozzáférést az ügyfelek HTTPS-kapcsolaton keresztül.</span><span class="sxs-lookup"><span data-stu-id="1069e-119">You can use this optional parameter to restrict access to clients using HTTPS.</span></span>

## <a name="when-should-you-use-a-shared-access-signature"></a><span data-ttu-id="1069e-120">Mikor kell használni a közös hozzáférésű jogosultságkód?</span><span class="sxs-lookup"><span data-stu-id="1069e-120">When should you use a shared access signature?</span></span>
<span data-ttu-id="1069e-121">SAS-kód is használhatja, ha lehetővé szeretné tenni a tárfiókban lévő erőforrásokhoz való hozzáférés minden olyan ügyfél, amelyek nem rendelkeznek a tárfiók tárelérési kulcsok.</span><span class="sxs-lookup"><span data-stu-id="1069e-121">You can use a SAS when you want to provide access to resources in your storage account to any client not possessing your storage account's access keys.</span></span> <span data-ttu-id="1069e-122">A tárfiók egy elsődleges és másodlagos elérési kulcsot, mindkettő felügyeleti hozzáférési jogot a fióknak, és hozzá tartozó összes erőforrást tartalmaz.</span><span class="sxs-lookup"><span data-stu-id="1069e-122">Your storage account includes both a primary and secondary access key, both of which grant administrative access to your account, and all resources within it.</span></span> <span data-ttu-id="1069e-123">Ezek a kulcsok az ilyen megnyitja a lehetőségét, amely rosszindulatú vagy gondatlan használja a fiókját.</span><span class="sxs-lookup"><span data-stu-id="1069e-123">Exposing either of these keys opens your account to the possibility of malicious or negligent use.</span></span> <span data-ttu-id="1069e-124">Közös hozzáférésű jogosultságkód adjon meg egy biztonságos megoldás, amely engedélyezi az ügyfeleknek olvasási, írási és törlési az Ön kifejezetten biztosított engedélyek alapján, és fiókkulcs nélkül a tárfiókban lévő adatokat.</span><span class="sxs-lookup"><span data-stu-id="1069e-124">Shared access signatures provide a safe alternative that allows clients to read, write, and delete data in your storage account according to the permissions you've explicitly granted, and without need for an account key.</span></span>

<span data-ttu-id="1069e-125">Egy gyakori forgatókönyv, ahol a biztonsági Társítások akkor hasznos, egy olyan szolgáltatás, ahol a felhasználók olvashatják és saját adataikat a tárolási fiók írásához.</span><span class="sxs-lookup"><span data-stu-id="1069e-125">A common scenario where a SAS is useful is a service where users read and write their own data to your storage account.</span></span> <span data-ttu-id="1069e-126">Forgatókönyv esetében, ahol a tárfiók tárolja a felhasználói adatok a rendszer két jellemző tervezési mintáról olvashat:</span><span class="sxs-lookup"><span data-stu-id="1069e-126">In a scenario where a storage account stores user data, there are two typical design patterns:</span></span>

1. <span data-ttu-id="1069e-127">Ügyfelek töltse fel, és töltse le adatokat, amely végrehajtja a hitelesítési előtér-proxy szolgáltatáson keresztül.</span><span class="sxs-lookup"><span data-stu-id="1069e-127">Clients upload and download data via a front-end proxy service, which performs authentication.</span></span> <span data-ttu-id="1069e-128">Az előtér-proxyszolgáltatás azzal az előnnyel jár, hogy az üzleti szabályok érvényesítési, de nagy mennyiségű adatok vagy tranzakciók nagy az igény szerinti egyeztetéshez is méretezhető szolgáltatás létrehozása lehet költséges vagy nehézkes.</span><span class="sxs-lookup"><span data-stu-id="1069e-128">This front-end proxy service has the advantage of allowing validation of business rules, but for large amounts of data or high-volume transactions, creating a service that can scale to match demand may be expensive or difficult.</span></span>

  ![A forgatókönyv diagramja: előtér-proxyszolgáltatás][sas-storage-fe-proxy-service]

1. <span data-ttu-id="1069e-130">Egy egyszerűsített szolgáltatás hitelesíti az ügyfelet, igény szerint, és akkor hoz létre a SAS-kód.</span><span class="sxs-lookup"><span data-stu-id="1069e-130">A lightweight service authenticates the client as needed and then generates a SAS.</span></span> <span data-ttu-id="1069e-131">Miután az ügyfél akkor kapja meg az SA-kat, közvetlenül a alatt engedélyez az SA-kat és a SAS határozzák engedélyeivel tárfiók erőforrásainak eléréséhez.</span><span class="sxs-lookup"><span data-stu-id="1069e-131">Once the client receives the SAS, they can access storage account resources directly with the permissions defined by the SAS and for the interval allowed by the SAS.</span></span> <span data-ttu-id="1069e-132">A SAS azzal csökkenti az összes adat az előtér-proxy szolgáltatás útválasztási van szükség.</span><span class="sxs-lookup"><span data-stu-id="1069e-132">The SAS mitigates the need for routing all data through the front-end proxy service.</span></span>

  ![A forgatókönyv diagramja: SAS-szolgáltató szolgáltatás][sas-storage-provider-service]

<span data-ttu-id="1069e-134">Számos valós szolgáltatás használhat egy hibrid két megoldás.</span><span class="sxs-lookup"><span data-stu-id="1069e-134">Many real-world services may use a hybrid of these two approaches.</span></span> <span data-ttu-id="1069e-135">Például bizonyos adatok feldolgozása lehet, és az előtér-proxyn keresztül történő érvényesítése közben egyéb adatok mentése és/vagy olvasása közvetlenül a SAS használatával.</span><span class="sxs-lookup"><span data-stu-id="1069e-135">For example, some data might be processed and validated via the front-end proxy, while other data is saved and/or read directly using SAS.</span></span>

<span data-ttu-id="1069e-136">Ezen felül kell hitelesítenie a forrásobjektumot, a másolási műveletek bizonyos esetekben a SAS használatával:</span><span class="sxs-lookup"><span data-stu-id="1069e-136">Additionally, you will need to use a SAS to authenticate the source object in a copy operation in certain scenarios:</span></span>

* <span data-ttu-id="1069e-137">Egy blobot egy másik, amely egy másik tárfiókban található blobba másolásakor SAS kell használnia a forrás blob hitelesítéséhez.</span><span class="sxs-lookup"><span data-stu-id="1069e-137">When you copy a blob to another blob that resides in a different storage account, you must use a SAS to authenticate the source blob.</span></span> <span data-ttu-id="1069e-138">A SAS segítségével opcionálisan hitelesítéséhez, valamint a cél blob.</span><span class="sxs-lookup"><span data-stu-id="1069e-138">You can optionally use a SAS to authenticate the destination blob as well.</span></span>
* <span data-ttu-id="1069e-139">Egy fájl másik fájlba, amely egy másik tárfiókban található másolásakor a SAS-kód hitelesítéséhez a forrásfájl kell használnia.</span><span class="sxs-lookup"><span data-stu-id="1069e-139">When you copy a file to another file that resides in a different storage account, you must use a SAS to authenticate the source file.</span></span> <span data-ttu-id="1069e-140">SAS segítségével hitelesítéséhez, valamint a célfájl nem kötelező.</span><span class="sxs-lookup"><span data-stu-id="1069e-140">You can optionally use a SAS to authenticate the destination file as well.</span></span>
* <span data-ttu-id="1069e-141">Egy blobot egy fájlba, vagy egy fájlt egy blobba másolásakor kell használnia egy SAS hitelesítenie a forrásobjektumot, még akkor is, ha a forrás és cél-objektumai találhatók a tárfiókon belül.</span><span class="sxs-lookup"><span data-stu-id="1069e-141">When you copy a blob to a file, or a file to a blob, you must use a SAS to authenticate the source object, even if the source and destination objects reside within the same storage account.</span></span>

## <a name="types-of-shared-access-signatures"></a><span data-ttu-id="1069e-142">Közös hozzáférésű jogosultságkód típusai</span><span class="sxs-lookup"><span data-stu-id="1069e-142">Types of shared access signatures</span></span>
<span data-ttu-id="1069e-143">Közös hozzáférésű jogosultságkód két típusa hozható létre:</span><span class="sxs-lookup"><span data-stu-id="1069e-143">You can create two types of shared access signatures:</span></span>

* <span data-ttu-id="1069e-144">**SAS-szolgáltatás.**</span><span class="sxs-lookup"><span data-stu-id="1069e-144">**Service SAS.**</span></span> <span data-ttu-id="1069e-145">A szolgáltatásalapú SAS csak egy társzolgáltatás (a Blob, a Queue, a Table vagy a File szolgáltatás) egy erőforrásához biztosít hozzáférést.</span><span class="sxs-lookup"><span data-stu-id="1069e-145">The service SAS delegates access to a resource in just one of the storage services: the Blob, Queue, Table, or File service.</span></span> <span data-ttu-id="1069e-146">Lásd: [hozhat létre, egy szolgáltatás SAS](https://msdn.microsoft.com/library/dn140255.aspx) és [szolgáltatás SAS példák](https://msdn.microsoft.com/library/dn140256.aspx) részletes információ a SAS-jogkivonat létrehozásával.</span><span class="sxs-lookup"><span data-stu-id="1069e-146">See [Constructing a Service SAS](https://msdn.microsoft.com/library/dn140255.aspx) and [Service SAS Examples](https://msdn.microsoft.com/library/dn140256.aspx) for in-depth information about constructing the service SAS token.</span></span>
* <span data-ttu-id="1069e-147">**SAS-fiók.**</span><span class="sxs-lookup"><span data-stu-id="1069e-147">**Account SAS.**</span></span> <span data-ttu-id="1069e-148">A fiók SAS delegáltak erőforrások elérését egy vagy több, a tárolási szolgáltatások.</span><span class="sxs-lookup"><span data-stu-id="1069e-148">The account SAS delegates access to resources in one or more of the storage services.</span></span> <span data-ttu-id="1069e-149">A biztonsági Társítások szolgáltatáson keresztül elérhető műveleteket is elérhetők SAS fiók használatával.</span><span class="sxs-lookup"><span data-stu-id="1069e-149">All of the operations available via a service SAS are also available via an account SAS.</span></span> <span data-ttu-id="1069e-150">Emellett SAS fiókkal is adhat hozzáférést egy adott szolgáltatáshoz, például a vonatkozó műveletek **Get vagy Set szolgáltatástulajdonságok** és **első szolgáltatás-statisztikák**.</span><span class="sxs-lookup"><span data-stu-id="1069e-150">Additionally, with the account SAS, you can delegate access to operations that apply to a given service, such as **Get/Set Service Properties** and **Get Service Stats**.</span></span> <span data-ttu-id="1069e-151">A blobtárolók, táblák, üzenetsorok és fájlmegosztások olvasási, írási és törlési műveleteihez is hozzáférést biztosíthat, amelyeket a szolgáltatásalapú SAS nem engedélyez.</span><span class="sxs-lookup"><span data-stu-id="1069e-151">You can also delegate access to read, write, and delete operations on blob containers, tables, queues, and file shares that are not permitted with a service SAS.</span></span> <span data-ttu-id="1069e-152">Lásd: [hozhat létre egy fiókot SAS](https://msdn.microsoft.com/library/mt584140.aspx) hozhat létre, a fiók SAS-jogkivonat részletesebb információt.</span><span class="sxs-lookup"><span data-stu-id="1069e-152">See [Constructing an Account SAS](https://msdn.microsoft.com/library/mt584140.aspx) for in-depth information about constructing the account SAS token.</span></span>

## <a name="how-a-shared-access-signature-works"></a><span data-ttu-id="1069e-153">A közös hozzáférésű jogosultságkód működése</span><span class="sxs-lookup"><span data-stu-id="1069e-153">How a shared access signature works</span></span>
<span data-ttu-id="1069e-154">A közös hozzáférésű jogosultságkód egy vagy több tároló-erőforrások mutat, és a lekérdezési paraméterek különleges készletét tartalmazó jogkivonatok tartalmazó aláírt URI.</span><span class="sxs-lookup"><span data-stu-id="1069e-154">A shared access signature is a signed URI that points to one or more storage resources and includes a token that contains a special set of query parameters.</span></span> <span data-ttu-id="1069e-155">A jogkivonat azt jelzi, hogyan az erőforrásokat érhetik el az ügyfelet.</span><span class="sxs-lookup"><span data-stu-id="1069e-155">The token indicates how the resources may be accessed by the client.</span></span> <span data-ttu-id="1069e-156">Az aláírás lekérdezés-paraméterek egyike a SAS-paraméterek értékekből összeállított és a fiók kulccsal aláírva.</span><span class="sxs-lookup"><span data-stu-id="1069e-156">One of the query parameters, the signature, is constructed from the SAS parameters and signed with the account key.</span></span> <span data-ttu-id="1069e-157">Az aláírás hitelesítéséhez a biztonsági Társítások Azure Storage használják.</span><span class="sxs-lookup"><span data-stu-id="1069e-157">This signature is used by Azure Storage to authenticate the SAS.</span></span>

<span data-ttu-id="1069e-158">Példa SAS URI, megjeleníti az erőforrás URI azonosítója és a SAS-jogkivonat:</span><span class="sxs-lookup"><span data-stu-id="1069e-158">Here's an example of a SAS URI, showing the resource URI and the SAS token:</span></span>

![A SAS URI-összetevők][sas-storage-uri]

<span data-ttu-id="1069e-160">A SAS-jogkivonat: hoz létre a karakterlánc a *ügyfél* ügyféloldali (lásd a [SAS példák](#sas-examples) kódpéldák szakaszát).</span><span class="sxs-lookup"><span data-stu-id="1069e-160">The SAS token is a string you generate on the *client* side (see the [SAS examples](#sas-examples) section for code examples).</span></span> <span data-ttu-id="1069e-161">Egy SAS-jogkivonatot hoz létre, és a storage ügyféloldali kódtár, például a nyomkövetés nem Azure Storage bármilyen módon.</span><span class="sxs-lookup"><span data-stu-id="1069e-161">A SAS token you generate with the storage client library, for example, is not tracked by Azure Storage in any way.</span></span> <span data-ttu-id="1069e-162">SAS-tokenje korlátlan számú az ügyféloldalon is létrehozhat.</span><span class="sxs-lookup"><span data-stu-id="1069e-162">You can create an unlimited number of SAS tokens on the client side.</span></span>

<span data-ttu-id="1069e-163">Ha az ügyfél egy SAS URI-t Azure Storage megad egy kérelem részeként, a szolgáltatás ellenőrzi a SAS-paraméterek és győződjön meg arról, hogy a kérés hitelesítéséhez érvényes aláírást.</span><span class="sxs-lookup"><span data-stu-id="1069e-163">When a client provides a SAS URI to Azure Storage as part of a request, the service checks the SAS parameters and signature to verify that it is valid for authenticating the request.</span></span> <span data-ttu-id="1069e-164">Ha a szolgáltatás ellenőrzi, hogy az aláírás érvényes, akkor a kérelem hitelesítése.</span><span class="sxs-lookup"><span data-stu-id="1069e-164">If the service verifies that the signature is valid, then the request is authenticated.</span></span> <span data-ttu-id="1069e-165">Ellenkező esetben elutasította a kérést az hibakód 403 (tiltott).</span><span class="sxs-lookup"><span data-stu-id="1069e-165">Otherwise, the request is declined with error code 403 (Forbidden).</span></span>

## <a name="shared-access-signature-parameters"></a><span data-ttu-id="1069e-166">Megosztott hozzáférési aláírást paraméterek</span><span class="sxs-lookup"><span data-stu-id="1069e-166">Shared access signature parameters</span></span>
<span data-ttu-id="1069e-167">A fiók SAS és a SAS-tokenje néhány általános paramétereket tartalmaz, és is igénybe vehet néhány paramétert, amely különböző.</span><span class="sxs-lookup"><span data-stu-id="1069e-167">The account SAS and service SAS tokens include some common parameters, and also take a few parameters that that are different.</span></span>

### <a name="parameters-common-to-account-sas-and-service-sas-tokens"></a><span data-ttu-id="1069e-168">A paraméterek közös SAS-fiókhoz és a SAS-tokenje</span><span class="sxs-lookup"><span data-stu-id="1069e-168">Parameters common to account SAS and service SAS tokens</span></span>
* <span data-ttu-id="1069e-169">**API-verzió** egy nem kötelező paraméter, amely meghatározza a tárolás szolgáltatás verziót kell használni a kérelem végrehajtása.</span><span class="sxs-lookup"><span data-stu-id="1069e-169">**Api version** An optional parameter that specifies the storage service version to use to execute the request.</span></span>
* <span data-ttu-id="1069e-170">**Verziójú** egyik kötelező paraméter, amely meghatározza a tároló verziója használandó hitelesíteni a kérelmet.</span><span class="sxs-lookup"><span data-stu-id="1069e-170">**Service version** A required parameter that specifies the storage service version to use to authenticate the request.</span></span>
* <span data-ttu-id="1069e-171">**Kezdési időpontja.**</span><span class="sxs-lookup"><span data-stu-id="1069e-171">**Start time.**</span></span> <span data-ttu-id="1069e-172">Ez az az idő, ahol a biztonsági Társítások hatályba lép.</span><span class="sxs-lookup"><span data-stu-id="1069e-172">This is the time at which the SAS becomes valid.</span></span> <span data-ttu-id="1069e-173">A közös hozzáférésű jogosultságkód kezdési időpontja nem kötelező megadni.</span><span class="sxs-lookup"><span data-stu-id="1069e-173">The start time for a shared access signature is optional.</span></span> <span data-ttu-id="1069e-174">Ha a kezdő időpont nincs megadva, a biztonsági Társítások azonnal hatékony.</span><span class="sxs-lookup"><span data-stu-id="1069e-174">If a start time is omitted, the SAS is effective immediately.</span></span> <span data-ttu-id="1069e-175">A kezdési időpontot kell megadni az UTC (egyezményes világidő), egy különös UTC jelzéssel ("Z"), például `1994-11-05T13:15:30Z`.</span><span class="sxs-lookup"><span data-stu-id="1069e-175">The start time must be expressed in UTC (Coordinated Universal Time), with a special UTC designator ("Z"), for example `1994-11-05T13:15:30Z`.</span></span>
* <span data-ttu-id="1069e-176">**Lejárati idő.**</span><span class="sxs-lookup"><span data-stu-id="1069e-176">**Expiry time.**</span></span> <span data-ttu-id="1069e-177">Ez az az idő, amely után a biztonsági Társítások már nem érvényes.</span><span class="sxs-lookup"><span data-stu-id="1069e-177">This is the time after which the SAS is no longer valid.</span></span> <span data-ttu-id="1069e-178">A bevált gyakorlat része, hogy adja meg a lejárat időpontjának tartozó SAS korlátozására, vagy rendelje hozzá azt a tárolt házirend.</span><span class="sxs-lookup"><span data-stu-id="1069e-178">Best practices recommend that you either specify an expiry time for a SAS, or associate it with a stored access policy.</span></span> <span data-ttu-id="1069e-179">A lejárati időpont kell megadni az UTC (egyezményes világidő), egy különös UTC jelzéssel ("Z"), például `1994-11-05T13:15:30Z` (további információk alatt).</span><span class="sxs-lookup"><span data-stu-id="1069e-179">The expiry time must be expressed in UTC (Coordinated Universal Time), with a special UTC designator ("Z"), for example `1994-11-05T13:15:30Z` (see more below).</span></span>
* <span data-ttu-id="1069e-180">**Engedélyek.**</span><span class="sxs-lookup"><span data-stu-id="1069e-180">**Permissions.**</span></span> <span data-ttu-id="1069e-181">Az engedélyeket a biztonsági Társítások megadott azt jelzi, hogy az ügyfél a tárolási erőforrások a SAS használatával szemben hajthat végre műveleteket.</span><span class="sxs-lookup"><span data-stu-id="1069e-181">The permissions specified on the SAS indicate what operations the client can perform against the storage resource using the SAS.</span></span> <span data-ttu-id="1069e-182">Elérhető engedélyek a SAS fiók és a szolgáltatásalapú SAS térnek el egymástól.</span><span class="sxs-lookup"><span data-stu-id="1069e-182">Available permissions differ for an account SAS and a service SAS.</span></span>
* <span data-ttu-id="1069e-183">**IP-CÍMET.**</span><span class="sxs-lookup"><span data-stu-id="1069e-183">**IP.**</span></span> <span data-ttu-id="1069e-184">Egy nem kötelező paraméter, amely megadja egy IP-címet vagy egy Azure-on kívüli az IP-címek (című szakaszában talál [útválasztás munkamenet-konfiguráció állapota](../expressroute/expressroute-workflows.md#routing-session-configuration-state) az Express Route), amelyből kérelmek fogadására.</span><span class="sxs-lookup"><span data-stu-id="1069e-184">An optional parameter that specifies an IP address or a range of IP addresses outside of Azure (see the section [Routing session configuration state](../expressroute/expressroute-workflows.md#routing-session-configuration-state) for Express Route) from which to accept requests.</span></span>
* <span data-ttu-id="1069e-185">**Protokoll.**</span><span class="sxs-lookup"><span data-stu-id="1069e-185">**Protocol.**</span></span> <span data-ttu-id="1069e-186">Egy nem kötelező paraméter, amely meghatározza a protokoll érkező kérelmek végrehajtására megengedett.</span><span class="sxs-lookup"><span data-stu-id="1069e-186">An optional parameter that specifies the protocol permitted for a request.</span></span> <span data-ttu-id="1069e-187">Lehetséges értékei a HTTPS és a HTTP (`https,http`), amely a az alapértelmezett érték, vagy HTTPS csak (`https`).</span><span class="sxs-lookup"><span data-stu-id="1069e-187">Possible values are both HTTPS and HTTP (`https,http`), which is the default value, or HTTPS only (`https`).</span></span> <span data-ttu-id="1069e-188">Vegye figyelembe, hogy HTTP csak nem megengedett értéket.</span><span class="sxs-lookup"><span data-stu-id="1069e-188">Note that HTTP only is not a permitted value.</span></span>
* <span data-ttu-id="1069e-189">**Aláírás.**</span><span class="sxs-lookup"><span data-stu-id="1069e-189">**Signature.**</span></span> <span data-ttu-id="1069e-190">Az aláírás a többi paraméter megadott rész jogkivonatot, és titkosítja, majd értékekből összeállított.</span><span class="sxs-lookup"><span data-stu-id="1069e-190">The signature is constructed from the other parameters specified as part token and then encrypted.</span></span> <span data-ttu-id="1069e-191">A biztonsági Társítások hitelesítésére szolgál.</span><span class="sxs-lookup"><span data-stu-id="1069e-191">It's used to authenticate the SAS.</span></span>

### <a name="parameters-for-a-service-sas-token"></a><span data-ttu-id="1069e-192">A szolgáltatás SAS-jogkivonat paraméterek</span><span class="sxs-lookup"><span data-stu-id="1069e-192">Parameters for a service SAS token</span></span>
* <span data-ttu-id="1069e-193">**Tároló-erőforrás.**</span><span class="sxs-lookup"><span data-stu-id="1069e-193">**Storage resource.**</span></span> <span data-ttu-id="1069e-194">Tároló-erőforrások, amelynek is adhat hozzáférést egy olyan biztonsági Társítások tartalmazzák:</span><span class="sxs-lookup"><span data-stu-id="1069e-194">Storage resources for which you can delegate access with a service SAS include:</span></span>
  * <span data-ttu-id="1069e-195">Tárolók és blobok</span><span class="sxs-lookup"><span data-stu-id="1069e-195">Containers and blobs</span></span>
  * <span data-ttu-id="1069e-196">A fájlmegosztások és fájlok</span><span class="sxs-lookup"><span data-stu-id="1069e-196">File shares and files</span></span>
  * <span data-ttu-id="1069e-197">Üzenetsorok</span><span class="sxs-lookup"><span data-stu-id="1069e-197">Queues</span></span>
  * <span data-ttu-id="1069e-198">Táblák és a táblaentitásokat tartományait.</span><span class="sxs-lookup"><span data-stu-id="1069e-198">Tables and ranges of table entities.</span></span>

### <a name="parameters-for-an-account-sas-token"></a><span data-ttu-id="1069e-199">Egy fiók SAS-jogkivonat paramétereinek</span><span class="sxs-lookup"><span data-stu-id="1069e-199">Parameters for an account SAS token</span></span>
* <span data-ttu-id="1069e-200">**Szolgáltatás vagy a szolgáltatások.**</span><span class="sxs-lookup"><span data-stu-id="1069e-200">**Service or services.**</span></span> <span data-ttu-id="1069e-201">Egy fiók SAS is adhat hozzáférést a tárolási szolgáltatások közül.</span><span class="sxs-lookup"><span data-stu-id="1069e-201">An account SAS can delegate access to one or more of the storage services.</span></span> <span data-ttu-id="1069e-202">Például, hogy a delegáltak hozzáférést a Blob és a fájl szolgáltatás fiók SAS is létrehozhat.</span><span class="sxs-lookup"><span data-stu-id="1069e-202">For example, you can create an account SAS that delegates access to the Blob and File service.</span></span> <span data-ttu-id="1069e-203">Vagy, hogy mind a négy delegáltak hozzáférést szolgálja (Blob, várólista, a táblának és fájl) Készletével hozhat létre.</span><span class="sxs-lookup"><span data-stu-id="1069e-203">Or you can create a SAS that delegates access to all four services (Blob, Queue, Table, and File).</span></span>
* <span data-ttu-id="1069e-204">**Erőforrás-típusú tárolókat.**</span><span class="sxs-lookup"><span data-stu-id="1069e-204">**Storage resource types.**</span></span> <span data-ttu-id="1069e-205">Egy fiók SAS egy vagy több osztályt a tárolási erőforrások ahelyett, hogy egy adott erőforrás vonatkozik.</span><span class="sxs-lookup"><span data-stu-id="1069e-205">An account SAS applies to one or more classes of storage resources, rather than a specific resource.</span></span> <span data-ttu-id="1069e-206">Egy fiók való hozzáférés delegálásához SAS hozhat létre:</span><span class="sxs-lookup"><span data-stu-id="1069e-206">You can create an account SAS to delegate access to:</span></span>
  * <span data-ttu-id="1069e-207">Szolgáltatás szintű API-k, a tárolási fiók erőforrások elleni néven.</span><span class="sxs-lookup"><span data-stu-id="1069e-207">Service-level APIs, which are called against the storage account resource.</span></span> <span data-ttu-id="1069e-208">Példák **Get vagy Set szolgáltatástulajdonságok**, **első szolgáltatás-statisztikák**, és **tárolók/várólisták/táblák, megosztások listája**.</span><span class="sxs-lookup"><span data-stu-id="1069e-208">Examples include **Get/Set Service Properties**, **Get Service Stats**, and **List Containers/Queues/Tables/Shares**.</span></span>
  * <span data-ttu-id="1069e-209">Tároló szintű API-k, a tároló objektumokon az egyes szolgáltatásokhoz néven: blob-tároló, a várólisták, a táblák és fájlmegosztások.</span><span class="sxs-lookup"><span data-stu-id="1069e-209">Container-level APIs, which are called against the container objects for each service: blob containers, queues, tables, and file shares.</span></span> <span data-ttu-id="1069e-210">Példák **létrehozása vagy törlése tároló**, **létrehozása vagy törlése-várólista**, **tábla létrehozása vagy törlése**, **létrehozása vagy törlése megosztás**, és **lista Blobok/fájlok és könyvtárak**.</span><span class="sxs-lookup"><span data-stu-id="1069e-210">Examples include **Create/Delete Container**, **Create/Delete Queue**, **Create/Delete Table**, **Create/Delete Share**, and **List Blobs/Files and Directories**.</span></span>
  * <span data-ttu-id="1069e-211">Objektum szintű API-k, blobok, az üzenetsor-üzeneteket, a táblaentitásokat és a fájlok elleni néven.</span><span class="sxs-lookup"><span data-stu-id="1069e-211">Object-level APIs, which are called against blobs, queue messages, table entities, and files.</span></span> <span data-ttu-id="1069e-212">Például **Put Blob**, **lekérdezés entitás**, **üzeneteket beolvasni**, és **fájl létrehozása**.</span><span class="sxs-lookup"><span data-stu-id="1069e-212">For example, **Put Blob**, **Query Entity**, **Get Messages**, and **Create File**.</span></span>

## <a name="examples-of-sas-uris"></a><span data-ttu-id="1069e-213">Példák SAS URI-azonosítók</span><span class="sxs-lookup"><span data-stu-id="1069e-213">Examples of SAS URIs</span></span>

### <a name="service-sas-uri-example"></a><span data-ttu-id="1069e-214">Szolgáltatás SAS URI-példa</span><span class="sxs-lookup"><span data-stu-id="1069e-214">Service SAS URI example</span></span>

<span data-ttu-id="1069e-215">Íme egy példa a SAS URI-t, amely olvasási és írási engedéllyel a blob szolgáltatás.</span><span class="sxs-lookup"><span data-stu-id="1069e-215">Here is an example of a service SAS URI that provides read and write permissions to a blob.</span></span> <span data-ttu-id="1069e-216">A tábla megértése, hogyan hozzájárul a SAS URI részét képező összes megszakad:</span><span class="sxs-lookup"><span data-stu-id="1069e-216">The table breaks down each part of the URI to understand how it contributes to the SAS:</span></span>

```
https://myaccount.blob.core.windows.net/sascontainer/sasblob.txt?sv=2015-04-05&st=2015-04-29T22%3A18%3A26Z&se=2015-04-30T02%3A23%3A26Z&sr=b&sp=rw&sip=168.1.5.60-168.1.5.70&spr=https&sig=Z%2FRHIX5Xcg0Mq2rqI3OlWTjEg2tYkboXr1P9ZUXDtkk%3D
```

| <span data-ttu-id="1069e-217">Név</span><span class="sxs-lookup"><span data-stu-id="1069e-217">Name</span></span> | <span data-ttu-id="1069e-218">SAS részére</span><span class="sxs-lookup"><span data-stu-id="1069e-218">SAS portion</span></span> | <span data-ttu-id="1069e-219">Leírás</span><span class="sxs-lookup"><span data-stu-id="1069e-219">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="1069e-220">A BLOB URI</span><span class="sxs-lookup"><span data-stu-id="1069e-220">Blob URI</span></span> |`https://myaccount.blob.core.windows.net/sascontainer/sasblob.txt` |<span data-ttu-id="1069e-221">A blob címe.</span><span class="sxs-lookup"><span data-stu-id="1069e-221">The address of the blob.</span></span> <span data-ttu-id="1069e-222">Vegye figyelembe, hogy a HTTPS-kapcsolaton keresztül erősen ajánlott.</span><span class="sxs-lookup"><span data-stu-id="1069e-222">Note that using HTTPS is highly recommended.</span></span> |
| <span data-ttu-id="1069e-223">Storage services, verziószám:</span><span class="sxs-lookup"><span data-stu-id="1069e-223">Storage services version</span></span> |`sv=2015-04-05` |<span data-ttu-id="1069e-224">A tárolási szolgáltatások 2012-02-12-es és újabb, ez a paraméter azt jelzi, melyik verziót kell használni.</span><span class="sxs-lookup"><span data-stu-id="1069e-224">For storage services version 2012-02-12 and later, this parameter indicates the version to use.</span></span> |
| <span data-ttu-id="1069e-225">Kezdési idő</span><span class="sxs-lookup"><span data-stu-id="1069e-225">Start time</span></span> |`st=2015-04-29T22%3A18%3A26Z` |<span data-ttu-id="1069e-226">UTC idő szerint megadva.</span><span class="sxs-lookup"><span data-stu-id="1069e-226">Specified in UTC time.</span></span> <span data-ttu-id="1069e-227">Ha azt szeretné, hogy a biztonsági Társítások azonnal érvényes legyen, hagyja ki a kezdési időpontot.</span><span class="sxs-lookup"><span data-stu-id="1069e-227">If you want the SAS to be valid immediately, omit the start time.</span></span> |
| <span data-ttu-id="1069e-228">Lejárati idő</span><span class="sxs-lookup"><span data-stu-id="1069e-228">Expiry time</span></span> |`se=2015-04-30T02%3A23%3A26Z` |<span data-ttu-id="1069e-229">UTC idő szerint megadva.</span><span class="sxs-lookup"><span data-stu-id="1069e-229">Specified in UTC time.</span></span> |
| <span data-ttu-id="1069e-230">Erőforrás</span><span class="sxs-lookup"><span data-stu-id="1069e-230">Resource</span></span> |`sr=b` |<span data-ttu-id="1069e-231">Az erőforrás egy blob.</span><span class="sxs-lookup"><span data-stu-id="1069e-231">The resource is a blob.</span></span> |
| <span data-ttu-id="1069e-232">Engedélyek</span><span class="sxs-lookup"><span data-stu-id="1069e-232">Permissions</span></span> |`sp=rw` |<span data-ttu-id="1069e-233">A biztonsági Társítások engedélyekre Read (r) és írjunk (w).</span><span class="sxs-lookup"><span data-stu-id="1069e-233">The permissions granted by the SAS include Read (r) and Write (w).</span></span> |
| <span data-ttu-id="1069e-234">IP-címtartomány</span><span class="sxs-lookup"><span data-stu-id="1069e-234">IP range</span></span> |`sip=168.1.5.60-168.1.5.70` |<span data-ttu-id="1069e-235">Az az IP-címek tartománya, amelyből a kérelem fogja elfogadni.</span><span class="sxs-lookup"><span data-stu-id="1069e-235">The range of IP addresses from which a request will be accepted.</span></span> |
| <span data-ttu-id="1069e-236">Protokoll</span><span class="sxs-lookup"><span data-stu-id="1069e-236">Protocol</span></span> |`spr=https` |<span data-ttu-id="1069e-237">Csak a HTTPS-kapcsolaton keresztül kérelmek engedélyezettek.</span><span class="sxs-lookup"><span data-stu-id="1069e-237">Only requests using HTTPS are permitted.</span></span> |
| <span data-ttu-id="1069e-238">Aláírás</span><span class="sxs-lookup"><span data-stu-id="1069e-238">Signature</span></span> |`sig=Z%2FRHIX5Xcg0Mq2rqI3OlWTjEg2tYkboXr1P9ZUXDtkk%3D` |<span data-ttu-id="1069e-239">A blob való hozzáférés hitelesítéséhez használt.</span><span class="sxs-lookup"><span data-stu-id="1069e-239">Used to authenticate access to the blob.</span></span> <span data-ttu-id="1069e-240">Az aláírás egy HMAC egy karakterlánc-bejelentkezési és az SHA-256 algoritmussal kulcs felett, és ezután a Base64 kódolás használatával kódolt.</span><span class="sxs-lookup"><span data-stu-id="1069e-240">The signature is an HMAC computed over a string-to-sign and key using the SHA256 algorithm, and then encoded using Base64 encoding.</span></span> |

### <a name="account-sas-uri-example"></a><span data-ttu-id="1069e-241">Fiók SAS URI-példa</span><span class="sxs-lookup"><span data-stu-id="1069e-241">Account SAS URI example</span></span>

<span data-ttu-id="1069e-242">Íme egy példa egy olyan fiók, amely a gyakori paramétereket használ a jogkivonat SAS.</span><span class="sxs-lookup"><span data-stu-id="1069e-242">Here is an example of an account SAS that uses the same common parameters on the token.</span></span> <span data-ttu-id="1069e-243">Mivel ezek a paraméterek fent ismerteti, hogy a dokumentum nem ismerteti.</span><span class="sxs-lookup"><span data-stu-id="1069e-243">Since these parameters are described above, they are not described here.</span></span> <span data-ttu-id="1069e-244">Csak a paraméterek, amelyek adott, az alábbi táblázat ismerteti a SAS-fiókhoz.</span><span class="sxs-lookup"><span data-stu-id="1069e-244">Only the parameters that are specific to account SAS are described in the table below.</span></span>

```
https://myaccount.blob.core.windows.net/?restype=service&comp=properties&sv=2015-04-05&ss=bf&srt=s&st=2015-04-29T22%3A18%3A26Z&se=2015-04-30T02%3A23%3A26Z&sr=b&sp=rw&sip=168.1.5.60-168.1.5.70&spr=https&sig=F%6GRVAZ5Cdj2Pw4tgU7IlSTkWgn7bUkkAg8P6HESXwmf%4B
```

| <span data-ttu-id="1069e-245">Név</span><span class="sxs-lookup"><span data-stu-id="1069e-245">Name</span></span> | <span data-ttu-id="1069e-246">SAS részére</span><span class="sxs-lookup"><span data-stu-id="1069e-246">SAS portion</span></span> | <span data-ttu-id="1069e-247">Leírás</span><span class="sxs-lookup"><span data-stu-id="1069e-247">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="1069e-248">Erőforrás URI azonosítója</span><span class="sxs-lookup"><span data-stu-id="1069e-248">Resource URI</span></span> |`https://myaccount.blob.core.windows.net/?restype=service&comp=properties` |<span data-ttu-id="1069e-249">A Blob-szolgáltatásvégpont, a szolgáltatás Tulajdonságok (Ha hívása GET) vagy (készlettel meghívásakor) szolgáltatási tulajdonságainak beállítása paraméterekkel.</span><span class="sxs-lookup"><span data-stu-id="1069e-249">The Blob service endpoint, with parameters for getting service properties (when called with GET) or setting service properties (when called with SET).</span></span> |
| <span data-ttu-id="1069e-250">Szolgáltatások</span><span class="sxs-lookup"><span data-stu-id="1069e-250">Services</span></span> |`ss=bf` |<span data-ttu-id="1069e-251">A Blob és a fájl szolgáltatásra vonatkozik, a biztonsági Társítások</span><span class="sxs-lookup"><span data-stu-id="1069e-251">The SAS applies to the Blob and File services</span></span> |
| <span data-ttu-id="1069e-252">Típusú erőforrások</span><span class="sxs-lookup"><span data-stu-id="1069e-252">Resource types</span></span> |`srt=s` |<span data-ttu-id="1069e-253">A biztonsági Társítások szolgáltatásszintű műveletekhez vonatkozik.</span><span class="sxs-lookup"><span data-stu-id="1069e-253">The SAS applies to service-level operations.</span></span> |
| <span data-ttu-id="1069e-254">Engedélyek</span><span class="sxs-lookup"><span data-stu-id="1069e-254">Permissions</span></span> |`sp=rw` |<span data-ttu-id="1069e-255">Az engedélyek hozzáférést olvasási és írási műveletet.</span><span class="sxs-lookup"><span data-stu-id="1069e-255">The permissions grant access to read and write operations.</span></span> |

<span data-ttu-id="1069e-256">Fényében, hogy a szolgáltatási szint engedélyek korlátozódnak, vannak-e elérhető műveletek a biztonsági Társítások **Blob szolgáltatástulajdonságok** (olvasás) és **Blob szolgáltatás tulajdonságainak beállítása** (írás).</span><span class="sxs-lookup"><span data-stu-id="1069e-256">Given that permissions are restricted to the service level, accessible operations with this SAS are **Get Blob Service Properties** (read) and **Set Blob Service Properties** (write).</span></span> <span data-ttu-id="1069e-257">Azonban egy másik erőforrás URI, azonos SAS-jogkivonat is használható való hozzáférés delegálására **lekérése Blob szolgáltatás statisztikák** (olvasás).</span><span class="sxs-lookup"><span data-stu-id="1069e-257">However, with a different resource URI, the same SAS token could also be used to delegate access to **Get Blob Service Stats** (read).</span></span>

## <a name="controlling-a-sas-with-a-stored-access-policy"></a><span data-ttu-id="1069e-258">A biztonsági Társítások tárolt hozzáférési házirenddel vezérlése</span><span class="sxs-lookup"><span data-stu-id="1069e-258">Controlling a SAS with a stored access policy</span></span>
<span data-ttu-id="1069e-259">A közös hozzáférésű jogosultságkód két űrlap valamelyikét hajthatja végre:</span><span class="sxs-lookup"><span data-stu-id="1069e-259">A shared access signature can take one of two forms:</span></span>

* <span data-ttu-id="1069e-260">**Ad hoc biztonsági Társítások:** hoz létre az ad hoc SAS-a kezdési ideje, a lejárat időpontjának, és a SAS engedélyeinek összes SAS URI azonosítójában megadott (vagy vélelmezett, abban az esetben, ha nincs megadva kezdő időpont).</span><span class="sxs-lookup"><span data-stu-id="1069e-260">**Ad hoc SAS:** When you create an ad hoc SAS, the start time, expiry time, and permissions for the SAS are all specified in the SAS URI (or implied, in the case where start time is omitted).</span></span> <span data-ttu-id="1069e-261">Az ilyen típusú SAS SAS fiók vagy a szolgáltatásalapú SAS hozhatók létre.</span><span class="sxs-lookup"><span data-stu-id="1069e-261">This type of SAS can be created as an account SAS or a service SAS.</span></span>
* <span data-ttu-id="1069e-262">**SAS tárolt hozzáférési házirenddel:** egy tárolt hozzáférési házirend egy erőforrás tároló – egy blob tároló van definiálva, tábla, várólista, vagy fájlmegosztásba--és legalább egy közös hozzáférésű jogosultságkód megkötéseit kezelésére használható.</span><span class="sxs-lookup"><span data-stu-id="1069e-262">**SAS with stored access policy:** A stored access policy is defined on a resource container--a blob container, table, queue, or file share--and can be used to manage constraints for one or more shared access signatures.</span></span> <span data-ttu-id="1069e-263">SAS-kód társítása a tárolt házirend, a SAS örökli a megkötések – a kezdő időpont lejárati idejének és engedélyek – a tárolt házirend.</span><span class="sxs-lookup"><span data-stu-id="1069e-263">When you associate a SAS with a stored access policy, the SAS inherits the constraints--the start time, expiry time, and permissions--defined for the stored access policy.</span></span>

> [!NOTE]
> <span data-ttu-id="1069e-264">Egy fiók SAS jelenleg egy ad hoc biztonsági Társítások kell lennie.</span><span class="sxs-lookup"><span data-stu-id="1069e-264">Currently, an account SAS must be an ad hoc SAS.</span></span> <span data-ttu-id="1069e-265">Hozzáférési házirendek még nem támogatottak fiók SAS tárolja.</span><span class="sxs-lookup"><span data-stu-id="1069e-265">Stored access policies are not yet supported for account SAS.</span></span>

<span data-ttu-id="1069e-266">A különbség a két űrlap fontos egyik-forgatókönyvben: visszavont tanúsítványok.</span><span class="sxs-lookup"><span data-stu-id="1069e-266">The difference between the two forms is important for one key scenario: revocation.</span></span> <span data-ttu-id="1069e-267">Mivel a SAS URI-t egy URL-címet, bárki beolvassa a biztonsági Társítások használható, függetlenül attól, aki eredetileg létrehozott.</span><span class="sxs-lookup"><span data-stu-id="1069e-267">Because a SAS URI is a URL, anyone that obtains the SAS can use it, regardless of who originally created it.</span></span> <span data-ttu-id="1069e-268">Ha SAS-kód nyilvánosságra, bárki a világ használhatná.</span><span class="sxs-lookup"><span data-stu-id="1069e-268">If a SAS is published publicly, it can be used by anyone in the world.</span></span> <span data-ttu-id="1069e-269">SAS-kód ad hozzáférést az erőforrásokhoz való bárki csak négy dolog történik, amelyek rendelkeznek:</span><span class="sxs-lookup"><span data-stu-id="1069e-269">A SAS grants access to resources to anyone possessing it until one of four things happens:</span></span>

1. <span data-ttu-id="1069e-270">A lejárat időpontjának a SAS megadott elérésekor.</span><span class="sxs-lookup"><span data-stu-id="1069e-270">The expiry time specified on the SAS is reached.</span></span>
2. <span data-ttu-id="1069e-271">A lejárat időpontjának a tárolt hozzáférési házirendet a biztonsági Társítások által hivatkozott meg (Ha a tárolt házirend hivatkozik, és adja meg a lejárat időpontjának) elérésekor.</span><span class="sxs-lookup"><span data-stu-id="1069e-271">The expiry time specified on the stored access policy referenced by the SAS is reached (if a stored access policy is referenced, and if it specifies an expiry time).</span></span> <span data-ttu-id="1069e-272">Ez akkor fordulhat elő, az időtartam, vagy mert módosította a tárolt hozzáférési házirendet egy lejárati dátuma a múltban, amely az egyik módja a biztonsági Társítások visszavonni.</span><span class="sxs-lookup"><span data-stu-id="1069e-272">This can occur either because the interval elapses, or because you've modified the stored access policy with an expiry time in the past, which is one way to revoke the SAS.</span></span>
3. <span data-ttu-id="1069e-273">A tárolt házirend SAS által hivatkozott törölve van, amely másik módja is visszavonja a biztonsági Társítások.</span><span class="sxs-lookup"><span data-stu-id="1069e-273">The stored access policy referenced by the SAS is deleted, which is another way to revoke the SAS.</span></span> <span data-ttu-id="1069e-274">Vegye figyelembe, hogy a tárolt házirend pontosan ugyanazzal a névvel hozza létre, ha minden meglévő SAS-tokenje újra lesz érvényes (feltéve, hogy, hogy a lejárati idő a biztonsági Társítások nem ment) tárolt hozzáférési házirendhez társított engedélyeinek megfelelően.</span><span class="sxs-lookup"><span data-stu-id="1069e-274">Note that if you recreate the stored access policy with exactly the same name, all existing SAS tokens will again be valid according to the permissions associated with that stored access policy (assuming that the expiry time on the SAS has not passed).</span></span> <span data-ttu-id="1069e-275">Ha visszavonja a biztonsági Társítások szándékos volt, ügyeljen arra, hogy más nevet használjon, ha a hozzáférési házirendben a jövőben egy lejárati idővel hozza létre újra.</span><span class="sxs-lookup"><span data-stu-id="1069e-275">If you are intending to revoke the SAS, be sure to use a different name if you recreate the access policy with an expiry time in the future.</span></span>
4. <span data-ttu-id="1069e-276">A biztonsági Társítások létrehozásához használt fiók kulcs újragenerálják.</span><span class="sxs-lookup"><span data-stu-id="1069e-276">The account key that was used to create the SAS is regenerated.</span></span> <span data-ttu-id="1069e-277">Egy fiók kulcs újragenerálása hatására az összes alkalmazás-összetevő kulccsal történő hitelesítéshez, amíg a többi érvényes fiókkulcs vagy az újonnan újragenerált fiókkulcs használhatja a mezők frissítése sikertelen.</span><span class="sxs-lookup"><span data-stu-id="1069e-277">Regenerating an account key will cause all application components using that key to fail to authenticate until they're updated to use either the other valid account key or the newly regenerated account key.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="1069e-278">A közös hozzáférésű jogosultságkód URI társított aláírásának létrehozására használt fiók a kulccsal, és a társított tárolja hozzáférési házirend (ha van ilyen).</span><span class="sxs-lookup"><span data-stu-id="1069e-278">A shared access signature URI is associated with the account key used to create the signature, and the associated stored access policy (if any).</span></span> <span data-ttu-id="1069e-279">Ha nincs tárolt házirend van megadva, csak visszavonni egy közös hozzáférésű jogosultságkódot, módosíthatja a fiókkulcsot.</span><span class="sxs-lookup"><span data-stu-id="1069e-279">If no stored access policy is specified, the only way to revoke a shared access signature is to change the account key.</span></span>

## <a name="authenticating-from-a-client-application-with-a-sas"></a><span data-ttu-id="1069e-280">A SAS-kód az ügyfélalkalmazás hitelesítése</span><span class="sxs-lookup"><span data-stu-id="1069e-280">Authenticating from a client application with a SAS</span></span>
<span data-ttu-id="1069e-281">Ügyfél, aki rendelkezik egy SAS a SAS használatával hitelesíteni a kérelmet egy tárfiókot, amelynek nem rendelkeznek a kulcsait.</span><span class="sxs-lookup"><span data-stu-id="1069e-281">A client who is in possession of a SAS can use the SAS to authenticate a request against a storage account for which they do not possess the account keys.</span></span> <span data-ttu-id="1069e-282">SAS-kód szerepel a kapcsolati karakterláncot, vagy közvetlenül a megfelelő konstruktort vagy metódust használt.</span><span class="sxs-lookup"><span data-stu-id="1069e-282">A SAS can be included in a connection string, or used directly from the appropriate constructor or method.</span></span>

### <a name="using-a-sas-in-a-connection-string"></a><span data-ttu-id="1069e-283">A kapcsolati karakterláncban a SAS használatával</span><span class="sxs-lookup"><span data-stu-id="1069e-283">Using a SAS in a connection string</span></span>
[!INCLUDE [storage-use-sas-in-connection-string-include](../../includes/storage-use-sas-in-connection-string-include.md)]

### <a name="using-a-sas-in-a-constructor-or-method"></a><span data-ttu-id="1069e-284">Egy konstruktort vagy metódust a SAS használatával</span><span class="sxs-lookup"><span data-stu-id="1069e-284">Using a SAS in a constructor or method</span></span>
<span data-ttu-id="1069e-285">Több Azure Storage ügyfél könyvtár konstruktorok és metódus túlterhelések kínál a SAS-paramétert, az, hogy a SAS-kód a szolgáltatásnak küldött kérelemben hitelesítheti.</span><span class="sxs-lookup"><span data-stu-id="1069e-285">Several Azure Storage client library constructors and method overloads offer a SAS parameter, so that you can authenticate a request to the service with a SAS.</span></span>

<span data-ttu-id="1069e-286">Például itt SAS URI létrehozásához használt blokkblobba hivatkozást.</span><span class="sxs-lookup"><span data-stu-id="1069e-286">For example, here a SAS URI is used to create a reference to a block blob.</span></span> <span data-ttu-id="1069e-287">Az SA-kat biztosít a csak a kérelemhez szükséges hitelesítő adatokat.</span><span class="sxs-lookup"><span data-stu-id="1069e-287">The SAS provides the only credentials needed for the request.</span></span> <span data-ttu-id="1069e-288">A blokk blobhivatkozást írási művelet használja:</span><span class="sxs-lookup"><span data-stu-id="1069e-288">The block blob reference is then used for a write operation:</span></span>

```csharp
string sasUri = "https://storagesample.blob.core.windows.net/sample-container/" +
    "sampleBlob.txt?sv=2015-07-08&sr=b&sig=39Up9JzHkxhUIhFEjEH9594DJxe7w6cIRCg0V6lCGSo%3D" +
    "&se=2016-10-18T21%3A51%3A37Z&sp=rcw";

CloudBlockBlob blob = new CloudBlockBlob(new Uri(sasUri));

// Create operation: Upload a blob with the specified name to the container.
// If the blob does not exist, it will be created. If it does exist, it will be overwritten.
try
{
    MemoryStream msWrite = new MemoryStream(Encoding.UTF8.GetBytes(blobContent));
    msWrite.Position = 0;
    using (msWrite)
    {
        await blob.UploadFromStreamAsync(msWrite);
    }

    Console.WriteLine("Create operation succeeded for SAS {0}", sasUri);
    Console.WriteLine();
}
catch (StorageException e)
{
    if (e.RequestInformation.HttpStatusCode == 403)
    {
        Console.WriteLine("Create operation failed for SAS {0}", sasUri);
        Console.WriteLine("Additional error information: " + e.Message);
        Console.WriteLine();
    }
    else
    {
        Console.WriteLine(e.Message);
        Console.ReadLine();
        throw;
    }
}

```

## <a name="best-practices-when-using-sas"></a><span data-ttu-id="1069e-289">Gyakorlati tanácsok SAS használatával</span><span class="sxs-lookup"><span data-stu-id="1069e-289">Best practices when using SAS</span></span>
<span data-ttu-id="1069e-290">Közös hozzáférésű jogosultságkód az alkalmazásokban való használatakor kell figyelembe vennie két lehetséges kockázatokról:</span><span class="sxs-lookup"><span data-stu-id="1069e-290">When you use shared access signatures in your applications, you need to be aware of two potential risks:</span></span>

* <span data-ttu-id="1069e-291">Ha SAS-kód kiszivárgott, használat bárki, aki szerzi be, ami kedvezőtlenül befolyásolhatja a potenciálisan a tárfiók.</span><span class="sxs-lookup"><span data-stu-id="1069e-291">If a SAS is leaked, it can be used by anyone who obtains it, which can potentially compromise your storage account.</span></span>
* <span data-ttu-id="1069e-292">Ha a megadott SAS-kód ügyfélalkalmazás lejár az alkalmazás nem tudja új SAS-kód beolvasása a szolgáltatástól, majd az alkalmazás működését is akadályozható meg.</span><span class="sxs-lookup"><span data-stu-id="1069e-292">If a SAS provided to a client application expires and the application is unable to retrieve a new SAS from your service, then the application's functionality may be hindered.</span></span>

<span data-ttu-id="1069e-293">A következő javaslatok a közös hozzáférésű jogosultságkód segítségével a kockázatok csökkentése érdekében:</span><span class="sxs-lookup"><span data-stu-id="1069e-293">The following recommendations for using shared access signatures can help mitigate these risks:</span></span>

1. <span data-ttu-id="1069e-294">**Mindig HTTPS PROTOKOLLT használnak** létrehozásához, vagy egy SAS terjesztése.</span><span class="sxs-lookup"><span data-stu-id="1069e-294">**Always use HTTPS** to create or distribute a SAS.</span></span> <span data-ttu-id="1069e-295">Ha SAS-kód átadott HTTP Protokollon keresztül, és elfogta, egy támadó a-átjárójának támadás elolvashassák az SA-kat, és majd a használatával ugyanúgy, mint az arra jogosult felhasználók rendelkezhetnek, potenciálisan bizalmas adatok veszélyeztetése, vagy lehetővé teszi a rosszindulatú felhasználó adatsérülés a.</span><span class="sxs-lookup"><span data-stu-id="1069e-295">If a SAS is passed over HTTP and intercepted, an attacker performing a man-in-the-middle attack is able to read the SAS and then use it just as the intended user could have, potentially compromising sensitive data or allowing for data corruption by the malicious user.</span></span>
2. <span data-ttu-id="1069e-296">**Hivatkozás tárolt hozzáférési házirendeket, ahol csak lehetséges.**</span><span class="sxs-lookup"><span data-stu-id="1069e-296">**Reference stored access policies where possible.**</span></span> <span data-ttu-id="1069e-297">Tárolt hozzáférési házirendek ad lehetőséget anélkül, hogy újragenerálni a tárfiókkulcsokat visszavonni az engedélyeket.</span><span class="sxs-lookup"><span data-stu-id="1069e-297">Stored access policies give you the option to revoke permissions without having to regenerate the storage account keys.</span></span> <span data-ttu-id="1069e-298">A lejárati be ezeket a jövőben nagyon sokkal (vagy végtelen), és győződjön meg arról nagyobb helyezze át a jövőben rendszeresen frissíteni.</span><span class="sxs-lookup"><span data-stu-id="1069e-298">Set the expiration on these very far in the future (or infinite) and make sure it's regularly updated to move it farther into the future.</span></span>
3. <span data-ttu-id="1069e-299">**Az ad hoc biztonsági Társítások near-term lejárati időpontjait használja.**</span><span class="sxs-lookup"><span data-stu-id="1069e-299">**Use near-term expiration times on an ad hoc SAS.**</span></span> <span data-ttu-id="1069e-300">Ily módon még akkor is, ha SAS-kód sérült, érvénytelen, így csak rövid ideig.</span><span class="sxs-lookup"><span data-stu-id="1069e-300">In this way, even if a SAS is compromised, it's valid only for a short time.</span></span> <span data-ttu-id="1069e-301">Ez az eljárás különösen fontos, ha a tárolt házirend nem hivatkozhatnak.</span><span class="sxs-lookup"><span data-stu-id="1069e-301">This practice is especially important if you cannot reference a stored access policy.</span></span> <span data-ttu-id="1069e-302">NEAR-term lejárati időpontjait is korlátozza a csak írható blob töltse fel azt a rendelkezésre álló időt korlátozásával adatmennyiséget.</span><span class="sxs-lookup"><span data-stu-id="1069e-302">Near-term expiration times also limit the amount of data that can be written to a blob by limiting the time available to upload to it.</span></span>
4. <span data-ttu-id="1069e-303">**Ügyfelek automatikusan megújíthatja a SAS szükség van.**</span><span class="sxs-lookup"><span data-stu-id="1069e-303">**Have clients automatically renew the SAS if necessary.**</span></span> <span data-ttu-id="1069e-304">Ügyfelek kell megújítani a lejárat előtt SAS ahhoz, hogy lehetővé tegyék az újrapróbálkozások ideje, ha az SA-kat biztosít a szolgáltatás nem érhető el.</span><span class="sxs-lookup"><span data-stu-id="1069e-304">Clients should renew the SAS well before the expiration, in order to allow time for retries if the service providing the SAS is unavailable.</span></span> <span data-ttu-id="1069e-305">Ha a biztonsági Társítások arra szolgál, hogy néhány azonnali, rövid élettartamú műveletek belül a lejárati idővel várhatóan használható, majd ennek az lehet szükségtelen, mivel a biztonsági Társítások nem várt kell újítani.</span><span class="sxs-lookup"><span data-stu-id="1069e-305">If your SAS is meant to be used for a small number of immediate, short-lived operations that are expected to be completed within the expiration period, then this may be unnecessary as the SAS is not expected to be renewed.</span></span> <span data-ttu-id="1069e-306">Azonban ha ügyfél, amely rendszeresen lehetővé teszi a kérelmek SAS segítségével, majd lejárati lehetőségét előre szerepet.</span><span class="sxs-lookup"><span data-stu-id="1069e-306">However, if you have client that is routinely making requests via SAS, then the possibility of expiration comes into play.</span></span> <span data-ttu-id="1069e-307">A legfontosabb szempont, hogy a SAS-t kell rövid élettartamú szükség elosztása érdekében (korábban is hangsúlyoztuk) Győződjön meg arról, hogy az ügyfél kérelmezi a megújítási korai szükségességének elég (az SA-kat sikeres megújítási előtt lejáró miatt megszűnésének megelőzése érdekében).</span><span class="sxs-lookup"><span data-stu-id="1069e-307">The key consideration is to balance the need for the SAS to be short-lived (as previously stated) with the need to ensure that the client is requesting renewal early enough (to avoid disruption due to the SAS expiring prior to successful renewal).</span></span>
5. <span data-ttu-id="1069e-308">**Ügyeljen arra, SAS kezdési időponttal.**</span><span class="sxs-lookup"><span data-stu-id="1069e-308">**Be careful with SAS start time.**</span></span> <span data-ttu-id="1069e-309">Ha a kezdési időpontot állít egy SAS-t a **most**, majd miatt óra (aktuális ideje alapján különböző gépek különbségeit) döntés, sikertelen lehet figyelni időnként az első kevés perc.</span><span class="sxs-lookup"><span data-stu-id="1069e-309">If you set the start time for a SAS to **now**, then due to clock skew (differences in current time according to different machines), failures may be observed intermittently for the first few minutes.</span></span> <span data-ttu-id="1069e-310">Általánosságban elmondható állítsa be a kezdő időpontja múltbeli legalább 15 perc lehet.</span><span class="sxs-lookup"><span data-stu-id="1069e-310">In general, set the start time to be at least 15 minutes in the past.</span></span> <span data-ttu-id="1069e-311">Vagy, nem minden, ami megkönnyítő azonnal minden esetekben érvényes.</span><span class="sxs-lookup"><span data-stu-id="1069e-311">Or, don't set it at all, which will make it valid immediately in all cases.</span></span> <span data-ttu-id="1069e-312">Ugyanez a lejárati idő, valamint – általában érvényes ne feledje, hogy jelenhet meg 15 percig óra eltérésére kérelmet az mindkét irányban.</span><span class="sxs-lookup"><span data-stu-id="1069e-312">The same generally applies to expiry time as well--remember that you may observe up to 15 minutes of clock skew in either direction on any request.</span></span> <span data-ttu-id="1069e-313">Az ügyfelek előtt 2012-02-12 REST verziójával SAS-kód, amely nem hivatkozik a tárolt házirend engedélyezett maximális időtartam 1 óra, de megadó hosszabb távú sikertelen lesz, mint a szabályzatoknak.</span><span class="sxs-lookup"><span data-stu-id="1069e-313">For clients using a REST version prior to 2012-02-12, the maximum duration for a SAS that does not reference a stored access policy is 1 hour, and any policies specifying longer term than that will fail.</span></span>
6. <span data-ttu-id="1069e-314">**Az erőforrás érhető el az adott legyen.**</span><span class="sxs-lookup"><span data-stu-id="1069e-314">**Be specific with the resource to be accessed.**</span></span> <span data-ttu-id="1069e-315">Biztonsági szempontból ajánlott arra, hogy ellássa a felhasználó a minimálisan szükséges jogosultságokkal.</span><span class="sxs-lookup"><span data-stu-id="1069e-315">A security best practice is to provide a user with the minimum required privileges.</span></span> <span data-ttu-id="1069e-316">Ha a felhasználó csak egyetlen entitáshoz olvasási engedéllyel kell rendelkeznie, adja meg számukra, hogy egyetlen entitás olvasási hozzáféréssel, és nem olvasási, írási és törlési hozzáférés entitásokhoz.</span><span class="sxs-lookup"><span data-stu-id="1069e-316">If a user only needs read access to a single entity, then grant them read access to that single entity, and not read/write/delete access to all entities.</span></span> <span data-ttu-id="1069e-317">Azt is lehetővé teszi a sérülés csökkentheti, ha SAS-kód sérült, mert a biztonsági Társítások kevesebb energiát egy támadó a tagoknál.</span><span class="sxs-lookup"><span data-stu-id="1069e-317">This also helps lessen the damage if a SAS is compromised because the SAS has less power in the hands of an attacker.</span></span>
7. <span data-ttu-id="1069e-318">**Ismerje meg, hogy a fiók lesz terhelve bármely használatra, beleértve, amely a SAS használatával történik.**</span><span class="sxs-lookup"><span data-stu-id="1069e-318">**Understand that your account will be billed for any usage, including that done with SAS.**</span></span> <span data-ttu-id="1069e-319">Ha megad egy blob írási hozzáféréssel, a felhasználó dönthet 200 GB-os blob feltöltése.</span><span class="sxs-lookup"><span data-stu-id="1069e-319">If you provide write access to a blob, a user may choose to upload a 200GB blob.</span></span> <span data-ttu-id="1069e-320">Feljogosított őket olvasási hozzáféréssel is, ha lehetséges, hogy választ 10-szer, töltse le az ezzel járó 2 TB, a kimenő forgalom költségek.</span><span class="sxs-lookup"><span data-stu-id="1069e-320">If you've given them read access as well, they may choose to download it 10 times, incurring 2 TB in egress costs for you.</span></span> <span data-ttu-id="1069e-321">Ebben az esetben adja meg a rosszindulatú felhasználók a potenciális műveletek csökkentése érdekében korlátozott engedélyekkel.</span><span class="sxs-lookup"><span data-stu-id="1069e-321">Again, provide limited permissions to help mitigate the potential actions of malicious users.</span></span> <span data-ttu-id="1069e-322">Rövid élettartamú SAS segítségével csökkentheti a fenyegetést (de vegye figyelembe az óra eltérésére a befejezési).</span><span class="sxs-lookup"><span data-stu-id="1069e-322">Use short-lived SAS to reduce this threat (but be mindful of clock skew on the end time).</span></span>
8. <span data-ttu-id="1069e-323">**SAS használatával írt adatok ellenőrzése.**</span><span class="sxs-lookup"><span data-stu-id="1069e-323">**Validate data written using SAS.**</span></span> <span data-ttu-id="1069e-324">Amikor egy ügyfél-alkalmazás írja az adatokat a tárfiók, tartsa szem előtt, hogy az adatok problémák lehetnek.</span><span class="sxs-lookup"><span data-stu-id="1069e-324">When a client application writes data to your storage account, keep in mind that there can be problems with that data.</span></span> <span data-ttu-id="1069e-325">Ha az alkalmazás adatokat érvényesítve vagy engedélye ahhoz, hogy készen áll a használatra, végre kell hajtania az ellenőrzés az adatok írása után, és az alkalmazás használata előtt.</span><span class="sxs-lookup"><span data-stu-id="1069e-325">If your application requires that that data be validated or authorized before it is ready to use, you should perform this validation after the data is written and before it is used by your application.</span></span> <span data-ttu-id="1069e-326">Ez az eljárás sérült vagy rosszindulatú adat íródik a fiókjához, a felhasználó, aki megfelelően beszerzett SAS, vagy a felhasználó a kiszivárgott SAS kihasználva is véd.</span><span class="sxs-lookup"><span data-stu-id="1069e-326">This practice also protects against corrupt or malicious data being written to your account, either by a user who properly acquired the SAS, or by a user exploiting a leaked SAS.</span></span>
9. <span data-ttu-id="1069e-327">**SAS mindig ne használjon.**</span><span class="sxs-lookup"><span data-stu-id="1069e-327">**Don't always use SAS.**</span></span> <span data-ttu-id="1069e-328">Egyes esetekben a tárfiók egy adott művelethez kapcsolódó kockázatokat járó SAS előnyeit.</span><span class="sxs-lookup"><span data-stu-id="1069e-328">Sometimes the risks associated with a particular operation against your storage account outweigh the benefits of SAS.</span></span> <span data-ttu-id="1069e-329">Az ilyen műveleteket, írja az üzleti végrehajtása után a tárfiókhoz középső rétegbeli szolgáltatás létrehozása érvényesítési, hitelesítési és naplózási szabály.</span><span class="sxs-lookup"><span data-stu-id="1069e-329">For such operations, create a middle-tier service that writes to your storage account after performing business rule validation, authentication, and auditing.</span></span> <span data-ttu-id="1069e-330">Néha sokkal egyszerűbb, egyéb módon kezelésére.</span><span class="sxs-lookup"><span data-stu-id="1069e-330">Also, sometimes it's simpler to manage access in other ways.</span></span> <span data-ttu-id="1069e-331">Például, ha azt szeretné, hogy összes BLOB a tárolóban lévő nyilvánosan olvasható, hogy a tároló nyilvános, ahelyett, hogy hozzáférést biztosító Aláírást minden ügyfél számára.</span><span class="sxs-lookup"><span data-stu-id="1069e-331">For example, if you want to make all blobs in a container publically readable, you can make the container Public, rather than providing a SAS to every client for access.</span></span>
10. <span data-ttu-id="1069e-332">**Storage Analytics segítségével figyelheti az alkalmazást.**</span><span class="sxs-lookup"><span data-stu-id="1069e-332">**Use Storage Analytics to monitor your application.**</span></span> <span data-ttu-id="1069e-333">Naplózási és metrikák használatával bármely csúcs az igények kimaradás miatt fellépő hitelesítési hibákkal láthatja a SAS-szolgáltató szolgáltatás, vagy egy tárolt házirend véletlen eltávolítását.</span><span class="sxs-lookup"><span data-stu-id="1069e-333">You can use logging and metrics to observe any spike in authentication failures due to an outage in your SAS provider service or to the inadvertent removal of a stored access policy.</span></span> <span data-ttu-id="1069e-334">Tekintse meg a [Azure Storage csapat blogja](http://blogs.msdn.com/b/windowsazurestorage/archive/2011/08/03/windows-azure-storage-logging-using-logs-to-track-storage-requests.aspx) további információt.</span><span class="sxs-lookup"><span data-stu-id="1069e-334">See the [Azure Storage Team Blog](http://blogs.msdn.com/b/windowsazurestorage/archive/2011/08/03/windows-azure-storage-logging-using-logs-to-track-storage-requests.aspx) for additional information.</span></span>

## <a name="sas-examples"></a><span data-ttu-id="1069e-335">SAS-példák</span><span class="sxs-lookup"><span data-stu-id="1069e-335">SAS examples</span></span>
<span data-ttu-id="1069e-336">Az alábbiakban néhány példa a megosztott hozzáférési aláírásokkal, SAS fiók mindkét típusú, és a szolgáltatásalapú SAS.</span><span class="sxs-lookup"><span data-stu-id="1069e-336">Below are some examples of both types of shared access signatures, account SAS and service SAS.</span></span>

<span data-ttu-id="1069e-337">Ezekben a példákban a C# futtatásához a következő NuGet-csomagok a projekt hivatkoznia kell:</span><span class="sxs-lookup"><span data-stu-id="1069e-337">To run these C# examples, you need to reference the following NuGet packages in your project:</span></span>

* <span data-ttu-id="1069e-338">[Az Azure Storage ügyféloldali kódtára a .NET](http://www.nuget.org/packages/WindowsAzure.Storage), verziója 6.x vagy újabb (használandó fiók SAS).</span><span class="sxs-lookup"><span data-stu-id="1069e-338">[Azure Storage Client Library for .NET](http://www.nuget.org/packages/WindowsAzure.Storage), version 6.x or later (to use account SAS).</span></span>
* [<span data-ttu-id="1069e-339">Azure Configuration Manager</span><span class="sxs-lookup"><span data-stu-id="1069e-339">Azure Configuration Manager</span></span>](http://www.nuget.org/packages/Microsoft.WindowsAzure.ConfigurationManager)

<span data-ttu-id="1069e-340">További példák, amelyek bemutatják, hogyan és az SAS-kód [mintakódok Azure tárolási](https://azure.microsoft.com/documentation/samples/?service=storage).</span><span class="sxs-lookup"><span data-stu-id="1069e-340">For additional examples that show how to create and test a SAS, see [Azure Code Samples for Storage](https://azure.microsoft.com/documentation/samples/?service=storage).</span></span>

### <a name="example-create-and-use-an-account-sas"></a><span data-ttu-id="1069e-341">Példa: Létrehozása és SAS fiók használatára</span><span class="sxs-lookup"><span data-stu-id="1069e-341">Example: Create and use an account SAS</span></span>
<span data-ttu-id="1069e-342">Az alábbi példakód létrehoz egy fiókot, amely érvényes a Blob és a fájl szolgáltatáshoz, és az ügyfél biztosítja az olvasási engedélyek, írási és listázási engedély szolgáltatásiszint-API-k elérésére SAS.</span><span class="sxs-lookup"><span data-stu-id="1069e-342">The following code example creates an account SAS that is valid for the Blob and File services, and gives the client permissions read, write, and list permissions to access service-level APIs.</span></span> <span data-ttu-id="1069e-343">A fiók SAS korlátozza a protokoll HTTPS-en, a kérelem kell tenni a HTTPS.</span><span class="sxs-lookup"><span data-stu-id="1069e-343">The account SAS restricts the protocol to HTTPS, so the request must be made with HTTPS.</span></span>

```csharp
static string GetAccountSASToken()
{
    // To create the account SAS, you need to use your shared key credentials. Modify for your account.
    const string ConnectionString = "DefaultEndpointsProtocol=https;AccountName=account-name;AccountKey=account-key";
    CloudStorageAccount storageAccount = CloudStorageAccount.Parse(ConnectionString);

    // Create a new access policy for the account.
    SharedAccessAccountPolicy policy = new SharedAccessAccountPolicy()
        {
            Permissions = SharedAccessAccountPermissions.Read | SharedAccessAccountPermissions.Write | SharedAccessAccountPermissions.List,
            Services = SharedAccessAccountServices.Blob | SharedAccessAccountServices.File,
            ResourceTypes = SharedAccessAccountResourceTypes.Service,
            SharedAccessExpiryTime = DateTime.UtcNow.AddHours(24),
            Protocols = SharedAccessProtocol.HttpsOnly
        };

    // Return the SAS token.
    return storageAccount.GetSharedAccessSignature(policy);
}
```

<span data-ttu-id="1069e-344">A Blob szolgáltatás szolgáltatásiszint-API-k elérésére SAS fiók használatához szeretne létrehozni egy Blob objektumot a tárfiók SAS és a Blob storage endpoint használatával.</span><span class="sxs-lookup"><span data-stu-id="1069e-344">To use the account SAS to access service-level APIs for the Blob service, construct a Blob client object using the SAS and the Blob storage endpoint for your storage account.</span></span>

```csharp
static void UseAccountSAS(string sasToken)
{
    // Create new storage credentials using the SAS token.
    StorageCredentials accountSAS = new StorageCredentials(sasToken);
    // Use these credentials and the account name to create a Blob service client.
    CloudStorageAccount accountWithSAS = new CloudStorageAccount(accountSAS, "account-name", endpointSuffix: null, useHttps: true);
    CloudBlobClient blobClientWithSAS = accountWithSAS.CreateCloudBlobClient();

    // Now set the service properties for the Blob client created with the SAS.
    blobClientWithSAS.SetServiceProperties(new ServiceProperties()
    {
        HourMetrics = new MetricsProperties()
        {
            MetricsLevel = MetricsLevel.ServiceAndApi,
            RetentionDays = 7,
            Version = "1.0"
        },
        MinuteMetrics = new MetricsProperties()
        {
            MetricsLevel = MetricsLevel.ServiceAndApi,
            RetentionDays = 7,
            Version = "1.0"
        },
        Logging = new LoggingProperties()
        {
            LoggingOperations = LoggingOperations.All,
            RetentionDays = 14,
            Version = "1.0"
        }
    });

    // The permissions granted by the account SAS also permit you to retrieve service properties.
    ServiceProperties serviceProperties = blobClientWithSAS.GetServiceProperties();
    Console.WriteLine(serviceProperties.HourMetrics.MetricsLevel);
    Console.WriteLine(serviceProperties.HourMetrics.RetentionDays);
    Console.WriteLine(serviceProperties.HourMetrics.Version);
}
```

### <a name="example-create-a-stored-access-policy"></a><span data-ttu-id="1069e-345">Példa: Tárolt hozzáférési házirend létrehozása</span><span class="sxs-lookup"><span data-stu-id="1069e-345">Example: Create a stored access policy</span></span>
<span data-ttu-id="1069e-346">Az alábbi kód létrehoz egy tárolt hozzáférési házirendet tárolóba.</span><span class="sxs-lookup"><span data-stu-id="1069e-346">The following code creates a stored access policy on a container.</span></span> <span data-ttu-id="1069e-347">A hozzáférési házirend segítségével korlátozásokat a szolgáltatásalapú SAS adja meg a tároló, vagy a benne található blobokat.</span><span class="sxs-lookup"><span data-stu-id="1069e-347">You can use the access policy to specify constraints for a service SAS on the container or its blobs.</span></span>

```csharp
private static async Task CreateSharedAccessPolicyAsync(CloudBlobContainer container, string policyName)
{
    // Create a new shared access policy and define its constraints.
    // The access policy provides create, write, read, list, and delete permissions.
    SharedAccessBlobPolicy sharedPolicy = new SharedAccessBlobPolicy()
    {
        // When the start time for the SAS is omitted, the start time is assumed to be the time when the storage service receives the request.
        // Omitting the start time for a SAS that is effective immediately helps to avoid clock skew.
        SharedAccessExpiryTime = DateTime.UtcNow.AddHours(24),
        Permissions = SharedAccessBlobPermissions.Read | SharedAccessBlobPermissions.List |
            SharedAccessBlobPermissions.Write | SharedAccessBlobPermissions.Create | SharedAccessBlobPermissions.Delete
    };

    // Get the container's existing permissions.
    BlobContainerPermissions permissions = await container.GetPermissionsAsync();

    // Add the new policy to the container's permissions, and set the container's permissions.
    permissions.SharedAccessPolicies.Add(policyName, sharedPolicy);
    await container.SetPermissionsAsync(permissions);
}
```

### <a name="example-create-a-service-sas-on-a-container"></a><span data-ttu-id="1069e-348">Példa: A szolgáltatásalapú SAS létrehozása a tárolóba</span><span class="sxs-lookup"><span data-stu-id="1069e-348">Example: Create a service SAS on a container</span></span>
<span data-ttu-id="1069e-349">Az alábbi kód létrehoz egy SAS-tárolóba.</span><span class="sxs-lookup"><span data-stu-id="1069e-349">The following code creates a SAS on a container.</span></span> <span data-ttu-id="1069e-350">Ha egy meglévő tárolt házirend neve van megadva, az adott házirendnek SAS társítva.</span><span class="sxs-lookup"><span data-stu-id="1069e-350">If the name of an existing stored access policy is provided, that policy is associated with the SAS.</span></span> <span data-ttu-id="1069e-351">Ha a nem tárolt házirend valósul meg, majd a kódot a tároló az ad hoc biztonsági Társítások hoz létre.</span><span class="sxs-lookup"><span data-stu-id="1069e-351">If no stored access policy is provided, then the code creates an ad-hoc SAS on the container.</span></span>

```csharp
private static string GetContainerSasUri(CloudBlobContainer container, string storedPolicyName = null)
{
    string sasContainerToken;

    // If no stored policy is specified, create a new access policy and define its constraints.
    if (storedPolicyName == null)
    {
        // Note that the SharedAccessBlobPolicy class is used both to define the parameters of an ad-hoc SAS, and
        // to construct a shared access policy that is saved to the container's shared access policies.
        SharedAccessBlobPolicy adHocPolicy = new SharedAccessBlobPolicy()
        {
            // When the start time for the SAS is omitted, the start time is assumed to be the time when the storage service receives the request.
            // Omitting the start time for a SAS that is effective immediately helps to avoid clock skew.
            SharedAccessExpiryTime = DateTime.UtcNow.AddHours(24),
            Permissions = SharedAccessBlobPermissions.Write | SharedAccessBlobPermissions.List
        };

        // Generate the shared access signature on the container, setting the constraints directly on the signature.
        sasContainerToken = container.GetSharedAccessSignature(adHocPolicy, null);

        Console.WriteLine("SAS for blob container (ad hoc): {0}", sasContainerToken);
        Console.WriteLine();
    }
    else
    {
        // Generate the shared access signature on the container. In this case, all of the constraints for the
        // shared access signature are specified on the stored access policy, which is provided by name.
        // It is also possible to specify some constraints on an ad-hoc SAS and others on the stored access policy.
        sasContainerToken = container.GetSharedAccessSignature(null, storedPolicyName);

        Console.WriteLine("SAS for blob container (stored access policy): {0}", sasContainerToken);
        Console.WriteLine();
    }

    // Return the URI string for the container, including the SAS token.
    return container.Uri + sasContainerToken;
}
```

### <a name="example-create-a-service-sas-on-a-blob"></a><span data-ttu-id="1069e-352">Példa: A szolgáltatásalapú SAS létrehozása a blob</span><span class="sxs-lookup"><span data-stu-id="1069e-352">Example: Create a service SAS on a blob</span></span>
<span data-ttu-id="1069e-353">Az alábbi kód létrehoz egy SAS-a blob.</span><span class="sxs-lookup"><span data-stu-id="1069e-353">The following code creates a SAS on a blob.</span></span> <span data-ttu-id="1069e-354">Ha egy meglévő tárolt házirend neve van megadva, az adott házirendnek SAS társítva.</span><span class="sxs-lookup"><span data-stu-id="1069e-354">If the name of an existing stored access policy is provided, that policy is associated with the SAS.</span></span> <span data-ttu-id="1069e-355">Ha a nem tárolt házirend valósul meg, majd a kódot a blob egy ad hoc biztonsági Társítások hoz létre.</span><span class="sxs-lookup"><span data-stu-id="1069e-355">If no stored access policy is provided, then the code creates an ad-hoc SAS on the blob.</span></span>

```csharp
private static string GetBlobSasUri(CloudBlobContainer container, string blobName, string policyName = null)
{
    string sasBlobToken;

    // Get a reference to a blob within the container.
    // Note that the blob may not exist yet, but a SAS can still be created for it.
    CloudBlockBlob blob = container.GetBlockBlobReference(blobName);

    if (policyName == null)
    {
        // Create a new access policy and define its constraints.
        // Note that the SharedAccessBlobPolicy class is used both to define the parameters of an ad-hoc SAS, and
        // to construct a shared access policy that is saved to the container's shared access policies.
        SharedAccessBlobPolicy adHocSAS = new SharedAccessBlobPolicy()
        {
            // When the start time for the SAS is omitted, the start time is assumed to be the time when the storage service receives the request.
            // Omitting the start time for a SAS that is effective immediately helps to avoid clock skew.
            SharedAccessExpiryTime = DateTime.UtcNow.AddHours(24),
            Permissions = SharedAccessBlobPermissions.Read | SharedAccessBlobPermissions.Write | SharedAccessBlobPermissions.Create
        };

        // Generate the shared access signature on the blob, setting the constraints directly on the signature.
        sasBlobToken = blob.GetSharedAccessSignature(adHocSAS);

        Console.WriteLine("SAS for blob (ad hoc): {0}", sasBlobToken);
        Console.WriteLine();
    }
    else
    {
        // Generate the shared access signature on the blob. In this case, all of the constraints for the
        // shared access signature are specified on the container's stored access policy.
        sasBlobToken = blob.GetSharedAccessSignature(null, policyName);

        Console.WriteLine("SAS for blob (stored access policy): {0}", sasBlobToken);
        Console.WriteLine();
    }

    // Return the URI string for the container, including the SAS token.
    return blob.Uri + sasBlobToken;
}
```

## <a name="conclusion"></a><span data-ttu-id="1069e-356">Összegzés</span><span class="sxs-lookup"><span data-stu-id="1069e-356">Conclusion</span></span>
<span data-ttu-id="1069e-357">Korlátozott engedélyekkel a tárfiókhoz biztosít az ügyfelek nem rendelkezhet a fiókkulcs közös hozzáférésű jogosultságkód hasznosak.</span><span class="sxs-lookup"><span data-stu-id="1069e-357">Shared access signatures are useful for providing limited permissions to your storage account to clients that should not have the account key.</span></span> <span data-ttu-id="1069e-358">Ilyen a biztonsági modellt az Azure Storage használó alkalmazások fontos részei.</span><span class="sxs-lookup"><span data-stu-id="1069e-358">As such, they are a vital part of the security model for any application using Azure Storage.</span></span> <span data-ttu-id="1069e-359">Ha az itt felsorolt ajánlott eljárást követi, SAS segítségével erőforrásokhoz való hozzáférés nagyobb rugalmasságot biztosítanak a tárfiókban lévő az alkalmazás a biztonság csökkenése nélkül.</span><span class="sxs-lookup"><span data-stu-id="1069e-359">If you follow the best practices listed here, you can use SAS to provide greater flexibility of access to resources in your storage account, without compromising the security of your application.</span></span>

## <a name="next-steps"></a><span data-ttu-id="1069e-360">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="1069e-360">Next Steps</span></span>
* [<span data-ttu-id="1069e-361">Tárolók és blobok névtelen olvasási hozzáférés kezelése</span><span class="sxs-lookup"><span data-stu-id="1069e-361">Manage anonymous read access to containers and blobs</span></span>](storage-manage-access-to-resources.md)
* [<span data-ttu-id="1069e-362">Hozzáférés delegálása közös hozzáférésű jogosultságkód használatával</span><span class="sxs-lookup"><span data-stu-id="1069e-362">Delegating Access with a Shared Access Signature</span></span>](http://msdn.microsoft.com/library/azure/ee395415.aspx)
* [<span data-ttu-id="1069e-363">Tábla- és várólista SAS bemutatása</span><span class="sxs-lookup"><span data-stu-id="1069e-363">Introducing Table and Queue SAS</span></span>](http://blogs.msdn.com/b/windowsazurestorage/archive/2012/06/12/introducing-table-sas-shared-access-signature-queue-sas-and-update-to-blob-sas.aspx)

[sas-storage-fe-proxy-service]: ./media/storage-dotnet-shared-access-signature-part-1/sas-storage-fe-proxy-service.png
[sas-storage-provider-service]: ./media/storage-dotnet-shared-access-signature-part-1/sas-storage-provider-service.png
[sas-storage-uri]: ./media/storage-dotnet-shared-access-signature-part-1/sas-storage-uri.png
