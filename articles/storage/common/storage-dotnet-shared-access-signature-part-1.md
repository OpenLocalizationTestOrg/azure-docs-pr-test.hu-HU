---
title: "aaaUsing közös hozzáférésű jogosultságkód (SAS) az Azure Storage |} Microsoft Docs"
description: "Ismerje meg a megosztott toouse hozzáférési jogosultságkódokat (SAS) toodelegate hozzáférés tooAzure tároló-erőforrások, például BLOB, üzenetsorok, táblák és fájlokat."
services: storage
documentationcenter: 
author: mmacy
manager: timlt
editor: tysonn
ms.assetid: 46fd99d7-36b3-4283-81e3-f214b29f1152
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: dotnet
ms.topic: article
ms.date: 04/18/2017
ms.author: marsma
ms.openlocfilehash: 5b75a3c25bcfb9f1ceb81f31dc2d42376bd105cb
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/06/2017
---
# <a name="using-shared-access-signatures-sas"></a><span data-ttu-id="702b0-103">Közös hozzáférésű jogosultságkód (SAS) használatával</span><span class="sxs-lookup"><span data-stu-id="702b0-103">Using shared access signatures (SAS)</span></span>

<span data-ttu-id="702b0-104">A közös hozzáférésű jogosultságkód (SAS) biztosít egy módon toogrant korlátozott hozzáférés tooobjects a tárfiókban lévő ügyfelek tooother, anélkül, hogy a fiókkulcs.</span><span class="sxs-lookup"><span data-stu-id="702b0-104">A shared access signature (SAS) provides you with a way toogrant limited access tooobjects in your storage account tooother clients, without exposing your account key.</span></span> <span data-ttu-id="702b0-105">Ebben a cikkben azt az SAS-modell hello nyújt áttekintést, SAS ajánlott eljárásokat, és tekintse meg néhány példa.</span><span class="sxs-lookup"><span data-stu-id="702b0-105">In this article, we provide an overview of hello SAS model, review SAS best practices, and look at some examples.</span></span>

<span data-ttu-id="702b0-106">Kód itt bemutatott ruházzák SAS használatával tekintse meg a [Ismerkedés az Azure Blob Storage a .NET](https://azure.microsoft.com/documentation/samples/storage-blob-dotnet-getting-started/) és egyéb hello elérhető mintákat [Azure mintakódok](https://azure.microsoft.com/documentation/samples/?service=storage) könyvtár.</span><span class="sxs-lookup"><span data-stu-id="702b0-106">For additional code examples using SAS beyond those presented here, see [Getting Started with Azure Blob Storage in .NET](https://azure.microsoft.com/documentation/samples/storage-blob-dotnet-getting-started/) and other samples available in hello [Azure Code Samples](https://azure.microsoft.com/documentation/samples/?service=storage) library.</span></span> <span data-ttu-id="702b0-107">Hello mintaalkalmazások letöltése és futtatni azokat, vagy keresse meg a hello kódja a Githubon.</span><span class="sxs-lookup"><span data-stu-id="702b0-107">You can download hello sample applications and run them, or browse hello code on GitHub.</span></span>

## <a name="what-is-a-shared-access-signature"></a><span data-ttu-id="702b0-108">Mi az a közös hozzáférésű jogosultságkód?</span><span class="sxs-lookup"><span data-stu-id="702b0-108">What is a shared access signature?</span></span>
<span data-ttu-id="702b0-109">A közös hozzáférésű jogosultságkód delegált hozzáférést tooresources a tárfiókban lévő biztosít.</span><span class="sxs-lookup"><span data-stu-id="702b0-109">A shared access signature provides delegated access tooresources in your storage account.</span></span> <span data-ttu-id="702b0-110">Az SAS-kód megadásához ügyfelek hozzáférhessenek a tárfiókban lévő tooresources anélkül, hogy a kulcsait megosztása.</span><span class="sxs-lookup"><span data-stu-id="702b0-110">With a SAS, you can grant clients access tooresources in your storage account, without sharing your account keys.</span></span> <span data-ttu-id="702b0-111">Ez az hello lényeg az alkalmazásokban – SAS használatával a közös hozzáférésű jogosultságkód van egy biztonságos módon tooshare a tárolási erőforrások a kulcsait veszélyeztetése nélkül.</span><span class="sxs-lookup"><span data-stu-id="702b0-111">This is hello key point of using shared access signatures in your applications--a SAS is a secure way tooshare your storage resources without compromising your account keys.</span></span>

[!INCLUDE [storage-account-key-note-include](../../../includes/storage-account-key-note-include.md)]

<span data-ttu-id="702b0-112">SAS-kód lehetővé teszi részletes szabályozását hello típusú hello SAS, beleértve a rendelkező tooclients számára biztosítson hozzáférést:</span><span class="sxs-lookup"><span data-stu-id="702b0-112">A SAS gives you granular control over hello type of access you grant tooclients who have hello SAS, including:</span></span>

* <span data-ttu-id="702b0-113">hello keresztül mely hello SAS érvényességi időtartama, beleértve hello kezdési ideje és hello lejárati idő.</span><span class="sxs-lookup"><span data-stu-id="702b0-113">hello interval over which hello SAS is valid, including hello start time and hello expiry time.</span></span>
* <span data-ttu-id="702b0-114">hello engedélyekre hello SAS.</span><span class="sxs-lookup"><span data-stu-id="702b0-114">hello permissions granted by hello SAS.</span></span> <span data-ttu-id="702b0-115">Például egy blob SAS-kód előfordulhat, hogy adjon olvasási és írási engedélyek toothat blob, de nem törli az engedélyeket.</span><span class="sxs-lookup"><span data-stu-id="702b0-115">For example, a SAS for a blob might grant read and write permissions toothat blob, but not delete permissions.</span></span>
* <span data-ttu-id="702b0-116">Nem kötelező IP-cím vagy az IP-címek tartománya, amelyből elfogadja az Azure Storage hello SAS.</span><span class="sxs-lookup"><span data-stu-id="702b0-116">An optional IP address or range of IP addresses from which Azure Storage will accept hello SAS.</span></span> <span data-ttu-id="702b0-117">Például előfordulhat, hogy adja meg az IP-címek egy tartozó tooyour szervezet.</span><span class="sxs-lookup"><span data-stu-id="702b0-117">For example, you might specify a range of IP addresses belonging tooyour organization.</span></span>
* <span data-ttu-id="702b0-118">hello protokoll, amelyben az Azure Storage hello SAS fogja fogadni.</span><span class="sxs-lookup"><span data-stu-id="702b0-118">hello protocol over which Azure Storage will accept hello SAS.</span></span> <span data-ttu-id="702b0-119">Ez nem kötelező paraméter toorestrict hozzáférés tooclients HTTPS-kapcsolaton keresztül is használhatja.</span><span class="sxs-lookup"><span data-stu-id="702b0-119">You can use this optional parameter toorestrict access tooclients using HTTPS.</span></span>

## <a name="when-should-you-use-a-shared-access-signature"></a><span data-ttu-id="702b0-120">Mikor kell használni a közös hozzáférésű jogosultságkód?</span><span class="sxs-lookup"><span data-stu-id="702b0-120">When should you use a shared access signature?</span></span>
<span data-ttu-id="702b0-121">SAS-kód is használhatja, ha a tárolási fiók tooany ügyfél, amelyek nem rendelkeznek a tárfiók tárelérési kulcsok tooprovide hozzáférés tooresources szeretne.</span><span class="sxs-lookup"><span data-stu-id="702b0-121">You can use a SAS when you want tooprovide access tooresources in your storage account tooany client not possessing your storage account's access keys.</span></span> <span data-ttu-id="702b0-122">A tárfiók egy elsődleges és másodlagos elérési kulcsot, rendszergazdai hozzáféréssel tooyour fiók adja meg mindkettőt, és hozzá tartozó összes erőforrást tartalmaz.</span><span class="sxs-lookup"><span data-stu-id="702b0-122">Your storage account includes both a primary and secondary access key, both of which grant administrative access tooyour account, and all resources within it.</span></span> <span data-ttu-id="702b0-123">Ezek a kulcsok az ilyen megnyitja a rosszindulatú vagy gondatlan használata fiók toohello lehetőségét.</span><span class="sxs-lookup"><span data-stu-id="702b0-123">Exposing either of these keys opens your account toohello possibility of malicious or negligent use.</span></span> <span data-ttu-id="702b0-124">Közös hozzáférésű jogosultságkód adjon meg egy biztonságos megoldás, amely lehetővé teszi az ügyfelek tooread, írási és törlési adatok tárfiókba Ön kifejezetten biztosított toohello engedélyek alapján történik, és fiókkulcs szükségessége nélkül.</span><span class="sxs-lookup"><span data-stu-id="702b0-124">Shared access signatures provide a safe alternative that allows clients tooread, write, and delete data in your storage account according toohello permissions you've explicitly granted, and without need for an account key.</span></span>

<span data-ttu-id="702b0-125">Egy gyakori forgatókönyv, ahol a biztonsági Társítások akkor hasznos, egy olyan szolgáltatás, amelyben felhasználók írási és olvasási a saját adatok tooyour tárfiók.</span><span class="sxs-lookup"><span data-stu-id="702b0-125">A common scenario where a SAS is useful is a service where users read and write their own data tooyour storage account.</span></span> <span data-ttu-id="702b0-126">Forgatókönyv esetében, ahol a tárfiók tárolja a felhasználói adatok a rendszer két jellemző tervezési mintáról olvashat:</span><span class="sxs-lookup"><span data-stu-id="702b0-126">In a scenario where a storage account stores user data, there are two typical design patterns:</span></span>

1. <span data-ttu-id="702b0-127">Ügyfelek töltse fel, és töltse le adatokat, amely végrehajtja a hitelesítési előtér-proxy szolgáltatáson keresztül.</span><span class="sxs-lookup"><span data-stu-id="702b0-127">Clients upload and download data via a front-end proxy service, which performs authentication.</span></span> <span data-ttu-id="702b0-128">Az előtér-proxyszolgáltatás, ha engedélyezi az üzleti szabályok érvényesítési hello előnnyel rendelkezik, de nagy mennyiségű adatok vagy tranzakciók nagy mennyiségű toomatch igény szerint is méretezhető szolgáltatás létrehozása lehet költséges vagy nehézkes.</span><span class="sxs-lookup"><span data-stu-id="702b0-128">This front-end proxy service has hello advantage of allowing validation of business rules, but for large amounts of data or high-volume transactions, creating a service that can scale toomatch demand may be expensive or difficult.</span></span>

  ![A forgatókönyv diagramja: előtér-proxyszolgáltatás](./media/storage-dotnet-shared-access-signature-part-1/sas-storage-fe-proxy-service.png)   

1. <span data-ttu-id="702b0-130">Egy egyszerűsített szolgáltatás hitelesíti hello ügyfelet, igény szerint, és akkor hoz létre egy SAS.</span><span class="sxs-lookup"><span data-stu-id="702b0-130">A lightweight service authenticates hello client as needed and then generates a SAS.</span></span> <span data-ttu-id="702b0-131">Hello ügyfél hello SAS kap, ha közvetlenül a hello SAS és hello SAS által engedélyezett hello időköz definiált hello engedélyek tárfiók erőforrásainak eléréséhez.</span><span class="sxs-lookup"><span data-stu-id="702b0-131">Once hello client receives hello SAS, they can access storage account resources directly with hello permissions defined by hello SAS and for hello interval allowed by hello SAS.</span></span> <span data-ttu-id="702b0-132">hello SAS azzal csökkenti az útválasztási hello előtér-proxy szolgáltatás összes adat hello szükségességét.</span><span class="sxs-lookup"><span data-stu-id="702b0-132">hello SAS mitigates hello need for routing all data through hello front-end proxy service.</span></span>

  ![A forgatókönyv diagramja: SAS-szolgáltató szolgáltatás](./media/storage-dotnet-shared-access-signature-part-1/sas-storage-provider-service.png)   

<span data-ttu-id="702b0-134">Számos valós szolgáltatás használhat egy hibrid két megoldás.</span><span class="sxs-lookup"><span data-stu-id="702b0-134">Many real-world services may use a hybrid of these two approaches.</span></span> <span data-ttu-id="702b0-135">Például bizonyos adatok feldolgozása lehet, és hello előtér-proxyn keresztül érvényesítése közben egyéb adatok mentése és/vagy olvasása közvetlenül a SAS használatával.</span><span class="sxs-lookup"><span data-stu-id="702b0-135">For example, some data might be processed and validated via hello front-end proxy, while other data is saved and/or read directly using SAS.</span></span>

<span data-ttu-id="702b0-136">Emellett egy SAS tooauthenticate hello adatforrás-objektum bizonyos esetekben a másolási műveletek a toouse lesz szüksége:</span><span class="sxs-lookup"><span data-stu-id="702b0-136">Additionally, you will need toouse a SAS tooauthenticate hello source object in a copy operation in certain scenarios:</span></span>

* <span data-ttu-id="702b0-137">Egy másik tárolási fiókot tartalmazó blob tooanother blob másolásakor forrás blob SAS tooauthenticate hello kell használnia.</span><span class="sxs-lookup"><span data-stu-id="702b0-137">When you copy a blob tooanother blob that resides in a different storage account, you must use a SAS tooauthenticate hello source blob.</span></span> <span data-ttu-id="702b0-138">Opcionálisan SAS tooauthenticate hello cél blob is használhatja.</span><span class="sxs-lookup"><span data-stu-id="702b0-138">You can optionally use a SAS tooauthenticate hello destination blob as well.</span></span>
* <span data-ttu-id="702b0-139">Ha egy másik tárolási fiókot tartalmazó fájl tooanother fájl másolása, SAS tooauthenticate hello forrásfájl kell használnia.</span><span class="sxs-lookup"><span data-stu-id="702b0-139">When you copy a file tooanother file that resides in a different storage account, you must use a SAS tooauthenticate hello source file.</span></span> <span data-ttu-id="702b0-140">Is használhat egy SAS tooauthenticate hello célfájl is.</span><span class="sxs-lookup"><span data-stu-id="702b0-140">You can optionally use a SAS tooauthenticate hello destination file as well.</span></span>
* <span data-ttu-id="702b0-141">Egy blob tooa fájlt, vagy a fájl tooa blob másolásakor kell használnia egy SAS tooauthenticate hello adatforrás-objektum, még akkor is, ha hello forrás és cél-objektumai találhatók hello belül ugyanaz a tárfiók.</span><span class="sxs-lookup"><span data-stu-id="702b0-141">When you copy a blob tooa file, or a file tooa blob, you must use a SAS tooauthenticate hello source object, even if hello source and destination objects reside within hello same storage account.</span></span>

## <a name="types-of-shared-access-signatures"></a><span data-ttu-id="702b0-142">Közös hozzáférésű jogosultságkód típusai</span><span class="sxs-lookup"><span data-stu-id="702b0-142">Types of shared access signatures</span></span>
<span data-ttu-id="702b0-143">Közös hozzáférésű jogosultságkód két típusa hozható létre:</span><span class="sxs-lookup"><span data-stu-id="702b0-143">You can create two types of shared access signatures:</span></span>

* <span data-ttu-id="702b0-144">**SAS-szolgáltatás.**</span><span class="sxs-lookup"><span data-stu-id="702b0-144">**Service SAS.**</span></span> <span data-ttu-id="702b0-145">hello szolgáltatás SAS delegáltak csak egy hello tárolószolgáltatások tooa erőforrás elérésére: hello Blob, a várólista, a tábla vagy a fájl szolgáltatás.</span><span class="sxs-lookup"><span data-stu-id="702b0-145">hello service SAS delegates access tooa resource in just one of hello storage services: hello Blob, Queue, Table, or File service.</span></span> <span data-ttu-id="702b0-146">Lásd: [hozhat létre, egy szolgáltatás SAS](https://msdn.microsoft.com/library/dn140255.aspx) és [szolgáltatás SAS példák](https://msdn.microsoft.com/library/dn140256.aspx) hello szolgáltatás SAS-jogkivonat létrehozásával kapcsolatos részletes információk.</span><span class="sxs-lookup"><span data-stu-id="702b0-146">See [Constructing a Service SAS](https://msdn.microsoft.com/library/dn140255.aspx) and [Service SAS Examples](https://msdn.microsoft.com/library/dn140256.aspx) for in-depth information about constructing hello service SAS token.</span></span>
* <span data-ttu-id="702b0-147">**SAS-fiók.**</span><span class="sxs-lookup"><span data-stu-id="702b0-147">**Account SAS.**</span></span> <span data-ttu-id="702b0-148">hello fiók SAS delegáltak tooresources egy vagy több hello tárolási szolgáltatások eléréséhez.</span><span class="sxs-lookup"><span data-stu-id="702b0-148">hello account SAS delegates access tooresources in one or more of hello storage services.</span></span> <span data-ttu-id="702b0-149">Hello műveleteket elérhető SAS szolgáltatáson keresztül is elérhetők SAS fiók használatával.</span><span class="sxs-lookup"><span data-stu-id="702b0-149">All of hello operations available via a service SAS are also available via an account SAS.</span></span> <span data-ttu-id="702b0-150">Emellett hello fiókkal SAS, delegálhatja szolgáltatás, például a megadott tooa vonatkozó hozzáférési toooperations **Get vagy Set szolgáltatástulajdonságok** és **első szolgáltatás-statisztikák**. Delegálhatja hozzáférés tooread, írási és törlési műveletek a blobtárolók, táblák, üzenetsorok és fájlmegosztások a szolgáltatásalapú SAS nem engedélyezett.</span><span class="sxs-lookup"><span data-stu-id="702b0-150">Additionally, with hello account SAS, you can delegate access toooperations that apply tooa given service, such as **Get/Set Service Properties** and **Get Service Stats**. You can also delegate access tooread, write, and delete operations on blob containers, tables, queues, and file shares that are not permitted with a service SAS.</span></span> <span data-ttu-id="702b0-151">Lásd: [hozhat létre egy fiókot SAS](https://msdn.microsoft.com/library/mt584140.aspx) a hello fiók SAS-jogkivonat létrehozásával kapcsolatos részletesebb információk.</span><span class="sxs-lookup"><span data-stu-id="702b0-151">See [Constructing an Account SAS](https://msdn.microsoft.com/library/mt584140.aspx) for in-depth information about constructing hello account SAS token.</span></span>

## <a name="how-a-shared-access-signature-works"></a><span data-ttu-id="702b0-152">A közös hozzáférésű jogosultságkód működése</span><span class="sxs-lookup"><span data-stu-id="702b0-152">How a shared access signature works</span></span>
<span data-ttu-id="702b0-153">A közös hozzáférésű jogosultságkód tooone vagy több tároló-erőforrások mutat, és a lekérdezési paraméterek különleges készletét tartalmazó jogkivonatok tartalmazó aláírt URI.</span><span class="sxs-lookup"><span data-stu-id="702b0-153">A shared access signature is a signed URI that points tooone or more storage resources and includes a token that contains a special set of query parameters.</span></span> <span data-ttu-id="702b0-154">hello jogkivonat azt jelzi, hogyan hello erőforrásokat érhetik el hello ügyfél.</span><span class="sxs-lookup"><span data-stu-id="702b0-154">hello token indicates how hello resources may be accessed by hello client.</span></span> <span data-ttu-id="702b0-155">A hello lekérdezési paraméterek közül, aláírás hello hello SAS paraméterek értékekből összeállított, amely hello fiók kulccsal aláírva.</span><span class="sxs-lookup"><span data-stu-id="702b0-155">One of hello query parameters, hello signature, is constructed from hello SAS parameters and signed with hello account key.</span></span> <span data-ttu-id="702b0-156">Az aláírás Azure Storage tooauthenticate hello SAS használják.</span><span class="sxs-lookup"><span data-stu-id="702b0-156">This signature is used by Azure Storage tooauthenticate hello SAS.</span></span>

<span data-ttu-id="702b0-157">Íme egy példa a SAS URI-t, ábrázoló hello erőforrás URI és hello SAS-jogkivonat:</span><span class="sxs-lookup"><span data-stu-id="702b0-157">Here's an example of a SAS URI, showing hello resource URI and hello SAS token:</span></span>

![A SAS URI-összetevők](./media/storage-dotnet-shared-access-signature-part-1/sas-storage-uri.png)   

<span data-ttu-id="702b0-159">hello SAS-jogkivonat: a hello létrehozhat karakterlánc *ügyfél* ügyféloldali (lásd: hello [SAS példák](#sas-examples) kódpéldák szakasz).</span><span class="sxs-lookup"><span data-stu-id="702b0-159">hello SAS token is a string you generate on hello *client* side (see hello [SAS examples](#sas-examples) section for code examples).</span></span> <span data-ttu-id="702b0-160">Egy SAS-jogkivonatot hoz létre a hello a storage ügyféloldali kódtára, például a nyomkövetés nem Azure Storage bármilyen módon.</span><span class="sxs-lookup"><span data-stu-id="702b0-160">A SAS token you generate with hello storage client library, for example, is not tracked by Azure Storage in any way.</span></span> <span data-ttu-id="702b0-161">SAS-tokenje korlátlan számú hello ügyféloldalon hozhat létre.</span><span class="sxs-lookup"><span data-stu-id="702b0-161">You can create an unlimited number of SAS tokens on hello client side.</span></span>

<span data-ttu-id="702b0-162">Ha az ügyfél egy SAS URI tooAzure tárolási megad egy kérelem részeként, a hello szolgáltatás ellenőrzi a hello SAS-paraméterek és aláírás tooverify érvényes hello kérelem hitelesítése.</span><span class="sxs-lookup"><span data-stu-id="702b0-162">When a client provides a SAS URI tooAzure Storage as part of a request, hello service checks hello SAS parameters and signature tooverify that it is valid for authenticating hello request.</span></span> <span data-ttu-id="702b0-163">Hello szolgáltatás ellenőrzi, hogy hello aláírás érvényes, ha a hello kérelem hitelesítése.</span><span class="sxs-lookup"><span data-stu-id="702b0-163">If hello service verifies that hello signature is valid, then hello request is authenticated.</span></span> <span data-ttu-id="702b0-164">Ellenkező esetben hello van elutasította a kérelmet hibakód 403 (tiltott).</span><span class="sxs-lookup"><span data-stu-id="702b0-164">Otherwise, hello request is declined with error code 403 (Forbidden).</span></span>

## <a name="shared-access-signature-parameters"></a><span data-ttu-id="702b0-165">Megosztott hozzáférési aláírást paraméterek</span><span class="sxs-lookup"><span data-stu-id="702b0-165">Shared access signature parameters</span></span>
<span data-ttu-id="702b0-166">hello fiók SAS és SAS-tokenje néhány általános paramétereket tartalmaz, és is igénybe vehet néhány paramétert, amely különböző.</span><span class="sxs-lookup"><span data-stu-id="702b0-166">hello account SAS and service SAS tokens include some common parameters, and also take a few parameters that that are different.</span></span>

### <a name="parameters-common-tooaccount-sas-and-service-sas-tokens"></a><span data-ttu-id="702b0-167">Paraméterek közös tooaccount SAS és SAS-tokenje</span><span class="sxs-lookup"><span data-stu-id="702b0-167">Parameters common tooaccount SAS and service SAS tokens</span></span>
* <span data-ttu-id="702b0-168">**API-verzió** egy nem kötelező paraméter, amely meghatározza a hello szolgáltatás verziója toouse tooexecute hello kérelem.</span><span class="sxs-lookup"><span data-stu-id="702b0-168">**Api version** An optional parameter that specifies hello storage service version toouse tooexecute hello request.</span></span>
* <span data-ttu-id="702b0-169">**Verziójú** egyik kötelező paraméter, amely meghatározza a hello szolgáltatás verziója toouse tooauthenticate hello kérelem.</span><span class="sxs-lookup"><span data-stu-id="702b0-169">**Service version** A required parameter that specifies hello storage service version toouse tooauthenticate hello request.</span></span>
* <span data-ttu-id="702b0-170">**Kezdési időpontja.**</span><span class="sxs-lookup"><span data-stu-id="702b0-170">**Start time.**</span></span> <span data-ttu-id="702b0-171">Ez az hello idő, mely hello SAS hatályba lép.</span><span class="sxs-lookup"><span data-stu-id="702b0-171">This is hello time at which hello SAS becomes valid.</span></span> <span data-ttu-id="702b0-172">a közös hozzáférésű jogosultságkód hello kezdési időpontja nem kötelező megadni.</span><span class="sxs-lookup"><span data-stu-id="702b0-172">hello start time for a shared access signature is optional.</span></span> <span data-ttu-id="702b0-173">Ha nincs megadva a kezdési idő, hello SAS azonnal hatékony.</span><span class="sxs-lookup"><span data-stu-id="702b0-173">If a start time is omitted, hello SAS is effective immediately.</span></span> <span data-ttu-id="702b0-174">hello kezdési ideje kell megadni az UTC (egyezményes világidő), egy különös UTC jelzéssel ("Z"), például `1994-11-05T13:15:30Z`.</span><span class="sxs-lookup"><span data-stu-id="702b0-174">hello start time must be expressed in UTC (Coordinated Universal Time), with a special UTC designator ("Z"), for example `1994-11-05T13:15:30Z`.</span></span>
* <span data-ttu-id="702b0-175">**Lejárati idő.**</span><span class="sxs-lookup"><span data-stu-id="702b0-175">**Expiry time.**</span></span> <span data-ttu-id="702b0-176">Ez az hello idő elteltével hello SAS már nem érvényes.</span><span class="sxs-lookup"><span data-stu-id="702b0-176">This is hello time after which hello SAS is no longer valid.</span></span> <span data-ttu-id="702b0-177">A bevált gyakorlat része, hogy adja meg a lejárat időpontjának tartozó SAS korlátozására, vagy rendelje hozzá azt a tárolt házirend.</span><span class="sxs-lookup"><span data-stu-id="702b0-177">Best practices recommend that you either specify an expiry time for a SAS, or associate it with a stored access policy.</span></span> <span data-ttu-id="702b0-178">hello lejárati idejének kell megadni az UTC (egyezményes világidő), egy különös UTC jelzéssel ("Z"), például `1994-11-05T13:15:30Z` (további információk alatt).</span><span class="sxs-lookup"><span data-stu-id="702b0-178">hello expiry time must be expressed in UTC (Coordinated Universal Time), with a special UTC designator ("Z"), for example `1994-11-05T13:15:30Z` (see more below).</span></span>
* <span data-ttu-id="702b0-179">**Engedélyek.**</span><span class="sxs-lookup"><span data-stu-id="702b0-179">**Permissions.**</span></span> <span data-ttu-id="702b0-180">hello SAS megadott hello engedélyek jelző hello ügyfél hello storage erőforrás hello SAS használata elleni hajthat végre műveleteket.</span><span class="sxs-lookup"><span data-stu-id="702b0-180">hello permissions specified on hello SAS indicate what operations hello client can perform against hello storage resource using hello SAS.</span></span> <span data-ttu-id="702b0-181">Elérhető engedélyek a SAS fiók és a szolgáltatásalapú SAS térnek el egymástól.</span><span class="sxs-lookup"><span data-stu-id="702b0-181">Available permissions differ for an account SAS and a service SAS.</span></span>
* <span data-ttu-id="702b0-182">**IP-CÍMET.**</span><span class="sxs-lookup"><span data-stu-id="702b0-182">**IP.**</span></span> <span data-ttu-id="702b0-183">Egy nem kötelező paraméter, amely megadja egy IP-címet vagy egy Azure-on kívüli az IP-címek (hello című [útválasztás munkamenet-konfiguráció állapota](../../expressroute/expressroute-workflows.md#routing-session-configuration-state) az Express Route) a tooaccept kérések.</span><span class="sxs-lookup"><span data-stu-id="702b0-183">An optional parameter that specifies an IP address or a range of IP addresses outside of Azure (see hello section [Routing session configuration state](../../expressroute/expressroute-workflows.md#routing-session-configuration-state) for Express Route) from which tooaccept requests.</span></span>
* <span data-ttu-id="702b0-184">**Protokoll.**</span><span class="sxs-lookup"><span data-stu-id="702b0-184">**Protocol.**</span></span> <span data-ttu-id="702b0-185">Egy nem kötelező paraméter, amely megadja a hello protokollt érkező kérelmek végrehajtására megengedett.</span><span class="sxs-lookup"><span data-stu-id="702b0-185">An optional parameter that specifies hello protocol permitted for a request.</span></span> <span data-ttu-id="702b0-186">Lehetséges értékei a HTTPS és a HTTP (`https,http`), ez az alapértelmezett érték hello, vagy HTTPS csak (`https`).</span><span class="sxs-lookup"><span data-stu-id="702b0-186">Possible values are both HTTPS and HTTP (`https,http`), which is hello default value, or HTTPS only (`https`).</span></span> <span data-ttu-id="702b0-187">Vegye figyelembe, hogy HTTP csak nem megengedett értéket.</span><span class="sxs-lookup"><span data-stu-id="702b0-187">Note that HTTP only is not a permitted value.</span></span>
* <span data-ttu-id="702b0-188">**Aláírás.**</span><span class="sxs-lookup"><span data-stu-id="702b0-188">**Signature.**</span></span> <span data-ttu-id="702b0-189">hello aláírás hello értékekből összeállított rész lexikális elem szerepel, és titkosítja, majd más paramétereket.</span><span class="sxs-lookup"><span data-stu-id="702b0-189">hello signature is constructed from hello other parameters specified as part token and then encrypted.</span></span> <span data-ttu-id="702b0-190">Hogy tooauthenticate hello SAS használják.</span><span class="sxs-lookup"><span data-stu-id="702b0-190">It's used tooauthenticate hello SAS.</span></span>

### <a name="parameters-for-a-service-sas-token"></a><span data-ttu-id="702b0-191">A szolgáltatás SAS-jogkivonat paraméterek</span><span class="sxs-lookup"><span data-stu-id="702b0-191">Parameters for a service SAS token</span></span>
* <span data-ttu-id="702b0-192">**Tároló-erőforrás.**</span><span class="sxs-lookup"><span data-stu-id="702b0-192">**Storage resource.**</span></span> <span data-ttu-id="702b0-193">Tároló-erőforrások, amelynek is adhat hozzáférést egy olyan biztonsági Társítások tartalmazzák:</span><span class="sxs-lookup"><span data-stu-id="702b0-193">Storage resources for which you can delegate access with a service SAS include:</span></span>
  * <span data-ttu-id="702b0-194">Tárolók és blobok</span><span class="sxs-lookup"><span data-stu-id="702b0-194">Containers and blobs</span></span>
  * <span data-ttu-id="702b0-195">A fájlmegosztások és fájlok</span><span class="sxs-lookup"><span data-stu-id="702b0-195">File shares and files</span></span>
  * <span data-ttu-id="702b0-196">Üzenetsorok</span><span class="sxs-lookup"><span data-stu-id="702b0-196">Queues</span></span>
  * <span data-ttu-id="702b0-197">Táblák és a táblaentitásokat tartományait.</span><span class="sxs-lookup"><span data-stu-id="702b0-197">Tables and ranges of table entities.</span></span>

### <a name="parameters-for-an-account-sas-token"></a><span data-ttu-id="702b0-198">Egy fiók SAS-jogkivonat paramétereinek</span><span class="sxs-lookup"><span data-stu-id="702b0-198">Parameters for an account SAS token</span></span>
* <span data-ttu-id="702b0-199">**Szolgáltatás vagy a szolgáltatások.**</span><span class="sxs-lookup"><span data-stu-id="702b0-199">**Service or services.**</span></span> <span data-ttu-id="702b0-200">SAS fiók hozzáférési tooone vagy több hello tárolószolgáltatások is átadhatja.</span><span class="sxs-lookup"><span data-stu-id="702b0-200">An account SAS can delegate access tooone or more of hello storage services.</span></span> <span data-ttu-id="702b0-201">Például hogy a delegáltak toohello Blob és a fájl szolgáltatás hozzáférési fiók SAS is létrehozhat.</span><span class="sxs-lookup"><span data-stu-id="702b0-201">For example, you can create an account SAS that delegates access toohello Blob and File service.</span></span> <span data-ttu-id="702b0-202">Vagy, hogy delegáltak hozzáférjen a tooall négy szolgáltatásokhoz (Blob, várólista, a táblának és fájl) Készletével hozhat létre.</span><span class="sxs-lookup"><span data-stu-id="702b0-202">Or you can create a SAS that delegates access tooall four services (Blob, Queue, Table, and File).</span></span>
* <span data-ttu-id="702b0-203">**Erőforrás-típusú tárolókat.**</span><span class="sxs-lookup"><span data-stu-id="702b0-203">**Storage resource types.**</span></span> <span data-ttu-id="702b0-204">Egy fiók SAS tooone a tárolási erőforrások ahelyett, hogy egy adott erőforrás további osztályait vonatkozik.</span><span class="sxs-lookup"><span data-stu-id="702b0-204">An account SAS applies tooone or more classes of storage resources, rather than a specific resource.</span></span> <span data-ttu-id="702b0-205">Létrehozhat egy fiók SAS toodelegate elérésére:</span><span class="sxs-lookup"><span data-stu-id="702b0-205">You can create an account SAS toodelegate access to:</span></span>
  * <span data-ttu-id="702b0-206">Szolgáltatás szintű API-k, hello tárolóeszközt fiók ellen néven.</span><span class="sxs-lookup"><span data-stu-id="702b0-206">Service-level APIs, which are called against hello storage account resource.</span></span> <span data-ttu-id="702b0-207">Példák **Get vagy Set szolgáltatástulajdonságok**, **első szolgáltatás-statisztikák**, és **tárolók/várólisták/táblák, megosztások listája**.</span><span class="sxs-lookup"><span data-stu-id="702b0-207">Examples include **Get/Set Service Properties**, **Get Service Stats**, and **List Containers/Queues/Tables/Shares**.</span></span>
  * <span data-ttu-id="702b0-208">Tároló szintű API-k, az egyes szolgáltatásokhoz hello tároló objektumokon néven: blob-tároló, a várólisták, a táblák és fájlmegosztások.</span><span class="sxs-lookup"><span data-stu-id="702b0-208">Container-level APIs, which are called against hello container objects for each service: blob containers, queues, tables, and file shares.</span></span> <span data-ttu-id="702b0-209">Példák **létrehozása vagy törlése tároló**, **létrehozása vagy törlése-várólista**, **tábla létrehozása vagy törlése**, **létrehozása vagy törlése megosztás**, és **lista Blobok/fájlok és könyvtárak**.</span><span class="sxs-lookup"><span data-stu-id="702b0-209">Examples include **Create/Delete Container**, **Create/Delete Queue**, **Create/Delete Table**, **Create/Delete Share**, and **List Blobs/Files and Directories**.</span></span>
  * <span data-ttu-id="702b0-210">Objektum szintű API-k, blobok, az üzenetsor-üzeneteket, a táblaentitásokat és a fájlok elleni néven.</span><span class="sxs-lookup"><span data-stu-id="702b0-210">Object-level APIs, which are called against blobs, queue messages, table entities, and files.</span></span> <span data-ttu-id="702b0-211">Például **Put Blob**, **lekérdezés entitás**, **üzeneteket beolvasni**, és **fájl létrehozása**.</span><span class="sxs-lookup"><span data-stu-id="702b0-211">For example, **Put Blob**, **Query Entity**, **Get Messages**, and **Create File**.</span></span>

## <a name="examples-of-sas-uris"></a><span data-ttu-id="702b0-212">Példák SAS URI-azonosítók</span><span class="sxs-lookup"><span data-stu-id="702b0-212">Examples of SAS URIs</span></span>

### <a name="service-sas-uri-example"></a><span data-ttu-id="702b0-213">Szolgáltatás SAS URI-példa</span><span class="sxs-lookup"><span data-stu-id="702b0-213">Service SAS URI example</span></span>

<span data-ttu-id="702b0-214">Íme egy példa a SAS URI-t, amely írási és olvasási engedélyek tooa blob szolgáltatás.</span><span class="sxs-lookup"><span data-stu-id="702b0-214">Here is an example of a service SAS URI that provides read and write permissions tooa blob.</span></span> <span data-ttu-id="702b0-215">hello tábla megszakad hello URI toounderstand részét képező összes toohello SAS hozzájárul módját:</span><span class="sxs-lookup"><span data-stu-id="702b0-215">hello table breaks down each part of hello URI toounderstand how it contributes toohello SAS:</span></span>

```
https://myaccount.blob.core.windows.net/sascontainer/sasblob.txt?sv=2015-04-05&st=2015-04-29T22%3A18%3A26Z&se=2015-04-30T02%3A23%3A26Z&sr=b&sp=rw&sip=168.1.5.60-168.1.5.70&spr=https&sig=Z%2FRHIX5Xcg0Mq2rqI3OlWTjEg2tYkboXr1P9ZUXDtkk%3D
```

| <span data-ttu-id="702b0-216">Név</span><span class="sxs-lookup"><span data-stu-id="702b0-216">Name</span></span> | <span data-ttu-id="702b0-217">SAS részére</span><span class="sxs-lookup"><span data-stu-id="702b0-217">SAS portion</span></span> | <span data-ttu-id="702b0-218">Leírás</span><span class="sxs-lookup"><span data-stu-id="702b0-218">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="702b0-219">A BLOB URI</span><span class="sxs-lookup"><span data-stu-id="702b0-219">Blob URI</span></span> |`https://myaccount.blob.core.windows.net/sascontainer/sasblob.txt` |<span data-ttu-id="702b0-220">hello blob hello címe.</span><span class="sxs-lookup"><span data-stu-id="702b0-220">hello address of hello blob.</span></span> <span data-ttu-id="702b0-221">Vegye figyelembe, hogy a HTTPS-kapcsolaton keresztül erősen ajánlott.</span><span class="sxs-lookup"><span data-stu-id="702b0-221">Note that using HTTPS is highly recommended.</span></span> |
| <span data-ttu-id="702b0-222">Storage services, verziószám:</span><span class="sxs-lookup"><span data-stu-id="702b0-222">Storage services version</span></span> |`sv=2015-04-05` |<span data-ttu-id="702b0-223">A tárolási szolgáltatások 2012-02-12-es verzió, és később, ez a paraméter azt jelzi, hello verzió toouse.</span><span class="sxs-lookup"><span data-stu-id="702b0-223">For storage services version 2012-02-12 and later, this parameter indicates hello version toouse.</span></span> |
| <span data-ttu-id="702b0-224">Kezdési idő</span><span class="sxs-lookup"><span data-stu-id="702b0-224">Start time</span></span> |`st=2015-04-29T22%3A18%3A26Z` |<span data-ttu-id="702b0-225">UTC idő szerint megadva.</span><span class="sxs-lookup"><span data-stu-id="702b0-225">Specified in UTC time.</span></span> <span data-ttu-id="702b0-226">Ha azt szeretné, hello SAS toobe érvényes azonnal, hagyja ki ezt a hello kezdési ideje.</span><span class="sxs-lookup"><span data-stu-id="702b0-226">If you want hello SAS toobe valid immediately, omit hello start time.</span></span> |
| <span data-ttu-id="702b0-227">Lejárati idő</span><span class="sxs-lookup"><span data-stu-id="702b0-227">Expiry time</span></span> |`se=2015-04-30T02%3A23%3A26Z` |<span data-ttu-id="702b0-228">UTC idő szerint megadva.</span><span class="sxs-lookup"><span data-stu-id="702b0-228">Specified in UTC time.</span></span> |
| <span data-ttu-id="702b0-229">Erőforrás</span><span class="sxs-lookup"><span data-stu-id="702b0-229">Resource</span></span> |`sr=b` |<span data-ttu-id="702b0-230">hello erőforrás blob.</span><span class="sxs-lookup"><span data-stu-id="702b0-230">hello resource is a blob.</span></span> |
| <span data-ttu-id="702b0-231">Engedélyek</span><span class="sxs-lookup"><span data-stu-id="702b0-231">Permissions</span></span> |`sp=rw` |<span data-ttu-id="702b0-232">hello SAS hello jogosultságaitól Read (r) és írjunk (w).</span><span class="sxs-lookup"><span data-stu-id="702b0-232">hello permissions granted by hello SAS include Read (r) and Write (w).</span></span> |
| <span data-ttu-id="702b0-233">IP-címtartomány</span><span class="sxs-lookup"><span data-stu-id="702b0-233">IP range</span></span> |`sip=168.1.5.60-168.1.5.70` |<span data-ttu-id="702b0-234">hello az IP-címek tartománya, amelyből a kérelem fogja elfogadni.</span><span class="sxs-lookup"><span data-stu-id="702b0-234">hello range of IP addresses from which a request will be accepted.</span></span> |
| <span data-ttu-id="702b0-235">Protokoll</span><span class="sxs-lookup"><span data-stu-id="702b0-235">Protocol</span></span> |`spr=https` |<span data-ttu-id="702b0-236">Csak a HTTPS-kapcsolaton keresztül kérelmek engedélyezettek.</span><span class="sxs-lookup"><span data-stu-id="702b0-236">Only requests using HTTPS are permitted.</span></span> |
| <span data-ttu-id="702b0-237">Aláírás</span><span class="sxs-lookup"><span data-stu-id="702b0-237">Signature</span></span> |`sig=Z%2FRHIX5Xcg0Mq2rqI3OlWTjEg2tYkboXr1P9ZUXDtkk%3D` |<span data-ttu-id="702b0-238">Tooauthenticate hozzáférés toohello blob használt.</span><span class="sxs-lookup"><span data-stu-id="702b0-238">Used tooauthenticate access toohello blob.</span></span> <span data-ttu-id="702b0-239">hello aláírás egy HMAC egy karakterlánc-bejelentkezési és a kulcs hello SHA-256 algoritmussal felett, és ezután a Base64 kódolás használatával kódolt.</span><span class="sxs-lookup"><span data-stu-id="702b0-239">hello signature is an HMAC computed over a string-to-sign and key using hello SHA256 algorithm, and then encoded using Base64 encoding.</span></span> |

### <a name="account-sas-uri-example"></a><span data-ttu-id="702b0-240">Fiók SAS URI-példa</span><span class="sxs-lookup"><span data-stu-id="702b0-240">Account SAS URI example</span></span>

<span data-ttu-id="702b0-241">Íme egy példa egy olyan fiók SAS, hogy használ hello hello jogkivonat gyakori paramétereket.</span><span class="sxs-lookup"><span data-stu-id="702b0-241">Here is an example of an account SAS that uses hello same common parameters on hello token.</span></span> <span data-ttu-id="702b0-242">Mivel ezek a paraméterek fent ismerteti, hogy a dokumentum nem ismerteti.</span><span class="sxs-lookup"><span data-stu-id="702b0-242">Since these parameters are described above, they are not described here.</span></span> <span data-ttu-id="702b0-243">Csak a hello paraméterek, amelyek adott tooaccount SAS hello az alábbi táblázat ismerteti.</span><span class="sxs-lookup"><span data-stu-id="702b0-243">Only hello parameters that are specific tooaccount SAS are described in hello table below.</span></span>

```
https://myaccount.blob.core.windows.net/?restype=service&comp=properties&sv=2015-04-05&ss=bf&srt=s&st=2015-04-29T22%3A18%3A26Z&se=2015-04-30T02%3A23%3A26Z&sr=b&sp=rw&sip=168.1.5.60-168.1.5.70&spr=https&sig=F%6GRVAZ5Cdj2Pw4tgU7IlSTkWgn7bUkkAg8P6HESXwmf%4B
```

| <span data-ttu-id="702b0-244">Név</span><span class="sxs-lookup"><span data-stu-id="702b0-244">Name</span></span> | <span data-ttu-id="702b0-245">SAS részére</span><span class="sxs-lookup"><span data-stu-id="702b0-245">SAS portion</span></span> | <span data-ttu-id="702b0-246">Leírás</span><span class="sxs-lookup"><span data-stu-id="702b0-246">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="702b0-247">Erőforrás URI azonosítója</span><span class="sxs-lookup"><span data-stu-id="702b0-247">Resource URI</span></span> |`https://myaccount.blob.core.windows.net/?restype=service&comp=properties` |<span data-ttu-id="702b0-248">hello Blob-szolgáltatásvégpont, a szolgáltatás Tulajdonságok (Ha hívása GET) vagy (készlettel meghívásakor) szolgáltatási tulajdonságainak beállítása paraméterekkel.</span><span class="sxs-lookup"><span data-stu-id="702b0-248">hello Blob service endpoint, with parameters for getting service properties (when called with GET) or setting service properties (when called with SET).</span></span> |
| <span data-ttu-id="702b0-249">Szolgáltatások</span><span class="sxs-lookup"><span data-stu-id="702b0-249">Services</span></span> |`ss=bf` |<span data-ttu-id="702b0-250">hello SAS toohello Blob fájl- és vonatkozik</span><span class="sxs-lookup"><span data-stu-id="702b0-250">hello SAS applies toohello Blob and File services</span></span> |
| <span data-ttu-id="702b0-251">Típusú erőforrások</span><span class="sxs-lookup"><span data-stu-id="702b0-251">Resource types</span></span> |`srt=s` |<span data-ttu-id="702b0-252">hello SAS tooservice szintű műveletek vonatkozik.</span><span class="sxs-lookup"><span data-stu-id="702b0-252">hello SAS applies tooservice-level operations.</span></span> |
| <span data-ttu-id="702b0-253">Engedélyek</span><span class="sxs-lookup"><span data-stu-id="702b0-253">Permissions</span></span> |`sp=rw` |<span data-ttu-id="702b0-254">hello engedélyek tooread hozzáférést biztosítani, és az írási műveletek.</span><span class="sxs-lookup"><span data-stu-id="702b0-254">hello permissions grant access tooread and write operations.</span></span> |

<span data-ttu-id="702b0-255">Fényében, hogy az engedélyek korlátozottak toohello szolgáltatási szint, a biztonsági Társítások elérhető műveletek vannak **Blob szolgáltatástulajdonságok** (olvasás) és **Blob szolgáltatás tulajdonságainak beállítása** (írás).</span><span class="sxs-lookup"><span data-stu-id="702b0-255">Given that permissions are restricted toohello service level, accessible operations with this SAS are **Get Blob Service Properties** (read) and **Set Blob Service Properties** (write).</span></span> <span data-ttu-id="702b0-256">Azonban egy másik erőforrás URI hello azonos SAS-tokennel is lehet toodelegate hozzáférés túl használt**lekérése Blob szolgáltatás statisztikák** (olvasás).</span><span class="sxs-lookup"><span data-stu-id="702b0-256">However, with a different resource URI, hello same SAS token could also be used toodelegate access too**Get Blob Service Stats** (read).</span></span>

## <a name="controlling-a-sas-with-a-stored-access-policy"></a><span data-ttu-id="702b0-257">A biztonsági Társítások tárolt hozzáférési házirenddel vezérlése</span><span class="sxs-lookup"><span data-stu-id="702b0-257">Controlling a SAS with a stored access policy</span></span>
<span data-ttu-id="702b0-258">A közös hozzáférésű jogosultságkód két űrlap valamelyikét hajthatja végre:</span><span class="sxs-lookup"><span data-stu-id="702b0-258">A shared access signature can take one of two forms:</span></span>

* <span data-ttu-id="702b0-259">**Ad hoc biztonsági Társítások:** egy alkalmi SAS, a hello kezdési ideje, a lejárat időpontjának létrehozásakor, és a hello SAS engedélyek az összes megadott hello SAS URI-t (vagy azt jelentette, ha nincs megadva kezdő időpont hello esetében).</span><span class="sxs-lookup"><span data-stu-id="702b0-259">**Ad hoc SAS:** When you create an ad hoc SAS, hello start time, expiry time, and permissions for hello SAS are all specified in hello SAS URI (or implied, in hello case where start time is omitted).</span></span> <span data-ttu-id="702b0-260">Az ilyen típusú SAS SAS fiók vagy a szolgáltatásalapú SAS hozhatók létre.</span><span class="sxs-lookup"><span data-stu-id="702b0-260">This type of SAS can be created as an account SAS or a service SAS.</span></span>
* <span data-ttu-id="702b0-261">**SAS tárolt hozzáférési házirenddel:** egy tárolt hozzáférési házirend egy erőforrás tároló – egy blob tároló van definiálva, tábla, várólistára, vagy fájlmegosztásba--és legalább egy közös hozzáférésű jogosultságkód használt toomanage megkötéseit lehet.</span><span class="sxs-lookup"><span data-stu-id="702b0-261">**SAS with stored access policy:** A stored access policy is defined on a resource container--a blob container, table, queue, or file share--and can be used toomanage constraints for one or more shared access signatures.</span></span> <span data-ttu-id="702b0-262">Ha SAS-kód társítja a tárolt házirend, hello SAS örökli hello megkötések – hello kezdési ideje, a lejárati idő és engedélyek – hello tárolt házirend.</span><span class="sxs-lookup"><span data-stu-id="702b0-262">When you associate a SAS with a stored access policy, hello SAS inherits hello constraints--hello start time, expiry time, and permissions--defined for hello stored access policy.</span></span>

> [!NOTE]
> <span data-ttu-id="702b0-263">Egy fiók SAS jelenleg egy ad hoc biztonsági Társítások kell lennie.</span><span class="sxs-lookup"><span data-stu-id="702b0-263">Currently, an account SAS must be an ad hoc SAS.</span></span> <span data-ttu-id="702b0-264">Hozzáférési házirendek még nem támogatottak fiók SAS tárolja.</span><span class="sxs-lookup"><span data-stu-id="702b0-264">Stored access policies are not yet supported for account SAS.</span></span>

<span data-ttu-id="702b0-265">hello hello két űrlapok közötti különbség fontos egyik-forgatókönyvben: visszavont tanúsítványok.</span><span class="sxs-lookup"><span data-stu-id="702b0-265">hello difference between hello two forms is important for one key scenario: revocation.</span></span> <span data-ttu-id="702b0-266">Mivel a SAS URI-t egy URL-címet, bárki jut hozzá a hello SAS használható, függetlenül attól, aki eredetileg létrehozott.</span><span class="sxs-lookup"><span data-stu-id="702b0-266">Because a SAS URI is a URL, anyone that obtains hello SAS can use it, regardless of who originally created it.</span></span> <span data-ttu-id="702b0-267">Ha SAS-kód nyilvánosságra, azt bármely hello world használható.</span><span class="sxs-lookup"><span data-stu-id="702b0-267">If a SAS is published publicly, it can be used by anyone in hello world.</span></span> <span data-ttu-id="702b0-268">A biztonsági Társítások biztosít hozzáférést tooresources tooanyone csak négy dolog történik, amelyek rendelkeznek:</span><span class="sxs-lookup"><span data-stu-id="702b0-268">A SAS grants access tooresources tooanyone possessing it until one of four things happens:</span></span>

1. <span data-ttu-id="702b0-269">hello lejárati idejének megadott hello SAS éri el.</span><span class="sxs-lookup"><span data-stu-id="702b0-269">hello expiry time specified on hello SAS is reached.</span></span>
2. <span data-ttu-id="702b0-270">hello lejárati idejének hello tárolt házirend hello SAS éri el (Ha a tárolt házirend hivatkozik, és adja meg a lejárat időpontjának) által hivatkozott meg.</span><span class="sxs-lookup"><span data-stu-id="702b0-270">hello expiry time specified on hello stored access policy referenced by hello SAS is reached (if a stored access policy is referenced, and if it specifies an expiry time).</span></span> <span data-ttu-id="702b0-271">Ez akkor fordulhat elő, mert hello időtartam, vagy mert tárolt hello hozzáférési házirend egy lejárati idővel a hello korábbi, amely egyirányú toorevoke hello SAS módosította.</span><span class="sxs-lookup"><span data-stu-id="702b0-271">This can occur either because hello interval elapses, or because you've modified hello stored access policy with an expiry time in hello past, which is one way toorevoke hello SAS.</span></span>
3. <span data-ttu-id="702b0-272">hello hivatkozás által hello SAS törlődik, amely egy másik módja toorevoke hello SAS hozzáférési házirendben tárolt.</span><span class="sxs-lookup"><span data-stu-id="702b0-272">hello stored access policy referenced by hello SAS is deleted, which is another way toorevoke hello SAS.</span></span> <span data-ttu-id="702b0-273">Vegye figyelembe, hogy ha a hozzáférési házirendben tárolt hello pontosan hozni hello ugyanazzal a névvel minden meglévő SAS-jogkivonatok fog újra érvényes függően toohello engedélyeket társítani a tárolt házirend (feltéve, hogy még nem múlt el SAS hello hello lejárati idő).</span><span class="sxs-lookup"><span data-stu-id="702b0-273">Note that if you recreate hello stored access policy with exactly hello same name, all existing SAS tokens will again be valid according toohello permissions associated with that stored access policy (assuming that hello expiry time on hello SAS has not passed).</span></span> <span data-ttu-id="702b0-274">Ha a toorevoke hello SAS vannak szándékos volt, esetén meg arról, hogy toouse egy másik nevet hello hozzáférési házirend a jövőbeli hello egy lejárati idővel hozza létre újra.</span><span class="sxs-lookup"><span data-stu-id="702b0-274">If you are intending toorevoke hello SAS, be sure toouse a different name if you recreate hello access policy with an expiry time in hello future.</span></span>
4. <span data-ttu-id="702b0-275">hello kulcsára, de a használt toocreate hello SAS újragenerálják.</span><span class="sxs-lookup"><span data-stu-id="702b0-275">hello account key that was used toocreate hello SAS is regenerated.</span></span> <span data-ttu-id="702b0-276">Egy fiók kulcs újragenerálása eredményezi, hogy a kulcs toofail tooauthenticate segítségével minden alkalmazás-összetevők mindaddig, amíg a mezők frissítése toouse vagy hello más érvényes fiókkulcs vagy újonnan újragenerálni hello kulcsára.</span><span class="sxs-lookup"><span data-stu-id="702b0-276">Regenerating an account key will cause all application components using that key toofail tooauthenticate until they're updated toouse either hello other valid account key or hello newly regenerated account key.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="702b0-277">A közös hozzáférésű jogosultságkód URI hello fiók kulcs használt toocreate hello aláírás társítva, és hello tartozó tárolt házirend (ha van ilyen).</span><span class="sxs-lookup"><span data-stu-id="702b0-277">A shared access signature URI is associated with hello account key used toocreate hello signature, and hello associated stored access policy (if any).</span></span> <span data-ttu-id="702b0-278">Ha nincs tárolt házirend van megadva, hello csak úgy toorevoke egy közös hozzáférésű jogosultságkódot toochange hello fiókkulcs.</span><span class="sxs-lookup"><span data-stu-id="702b0-278">If no stored access policy is specified, hello only way toorevoke a shared access signature is toochange hello account key.</span></span>

## <a name="authenticating-from-a-client-application-with-a-sas"></a><span data-ttu-id="702b0-279">A SAS-kód az ügyfélalkalmazás hitelesítése</span><span class="sxs-lookup"><span data-stu-id="702b0-279">Authenticating from a client application with a SAS</span></span>
<span data-ttu-id="702b0-280">Ügyfél, aki rendelkezik egy SAS használható hello SAS tooauthenticate egy tárfiókot, amelynek nem rendelkeznek hello kulcsait a kérelmet.</span><span class="sxs-lookup"><span data-stu-id="702b0-280">A client who is in possession of a SAS can use hello SAS tooauthenticate a request against a storage account for which they do not possess hello account keys.</span></span> <span data-ttu-id="702b0-281">SAS-kód szerepel a kapcsolati karakterláncot, vagy közvetlenül használt hello megfelelő konstruktort vagy metódust.</span><span class="sxs-lookup"><span data-stu-id="702b0-281">A SAS can be included in a connection string, or used directly from hello appropriate constructor or method.</span></span>

### <a name="using-a-sas-in-a-connection-string"></a><span data-ttu-id="702b0-282">A kapcsolati karakterláncban a SAS használatával</span><span class="sxs-lookup"><span data-stu-id="702b0-282">Using a SAS in a connection string</span></span>
[!INCLUDE [storage-use-sas-in-connection-string-include](../../../includes/storage-use-sas-in-connection-string-include.md)]

### <a name="using-a-sas-in-a-constructor-or-method"></a><span data-ttu-id="702b0-283">Egy konstruktort vagy metódust a SAS használatával</span><span class="sxs-lookup"><span data-stu-id="702b0-283">Using a SAS in a constructor or method</span></span>
<span data-ttu-id="702b0-284">Több Azure Storage ügyfél könyvtár konstruktorok és metódus túlterhelések kínál a SAS-paramétert, az, hogy a SAS-kód kérelem toohello szolgáltatás képes hitelesíteni.</span><span class="sxs-lookup"><span data-stu-id="702b0-284">Several Azure Storage client library constructors and method overloads offer a SAS parameter, so that you can authenticate a request toohello service with a SAS.</span></span>

<span data-ttu-id="702b0-285">Például egy SAS URI ez használt toocreate egy hivatkozás tooa blokkblob.</span><span class="sxs-lookup"><span data-stu-id="702b0-285">For example, here a SAS URI is used toocreate a reference tooa block blob.</span></span> <span data-ttu-id="702b0-286">hello SAS hello csak a hitelesítő adatok hello kérelem biztosít.</span><span class="sxs-lookup"><span data-stu-id="702b0-286">hello SAS provides hello only credentials needed for hello request.</span></span> <span data-ttu-id="702b0-287">hello elérésű blokkblob hivatkozását egy írási művelet használja:</span><span class="sxs-lookup"><span data-stu-id="702b0-287">hello block blob reference is then used for a write operation:</span></span>

```csharp
string sasUri = "https://storagesample.blob.core.windows.net/sample-container/" +
    "sampleBlob.txt?sv=2015-07-08&sr=b&sig=39Up9JzHkxhUIhFEjEH9594DJxe7w6cIRCg0V6lCGSo%3D" +
    "&se=2016-10-18T21%3A51%3A37Z&sp=rcw";

CloudBlockBlob blob = new CloudBlockBlob(new Uri(sasUri));

// Create operation: Upload a blob with hello specified name toohello container.
// If hello blob does not exist, it will be created. If it does exist, it will be overwritten.
try
{
    MemoryStream msWrite = new MemoryStream(Encoding.UTF8.GetBytes(blobContent));
    msWrite.Position = 0;
    using (msWrite)
    {
        await blob.UploadFromStreamAsync(msWrite);
    }

    Console.WriteLine("Create operation succeeded for SAS {0}", sasUri);
    Console.WriteLine();
}
catch (StorageException e)
{
    if (e.RequestInformation.HttpStatusCode == 403)
    {
        Console.WriteLine("Create operation failed for SAS {0}", sasUri);
        Console.WriteLine("Additional error information: " + e.Message);
        Console.WriteLine();
    }
    else
    {
        Console.WriteLine(e.Message);
        Console.ReadLine();
        throw;
    }
}

```

## <a name="best-practices-when-using-sas"></a><span data-ttu-id="702b0-288">Gyakorlati tanácsok SAS használatával</span><span class="sxs-lookup"><span data-stu-id="702b0-288">Best practices when using SAS</span></span>
<span data-ttu-id="702b0-289">Közös hozzáférésű jogosultságkód az alkalmazásokban való használatakor kell toobe két esetleges kockázatokat tudomást:</span><span class="sxs-lookup"><span data-stu-id="702b0-289">When you use shared access signatures in your applications, you need toobe aware of two potential risks:</span></span>

* <span data-ttu-id="702b0-290">Ha SAS-kód kiszivárgott, használat bárki, aki szerzi be, ami kedvezőtlenül befolyásolhatja a potenciálisan a tárfiók.</span><span class="sxs-lookup"><span data-stu-id="702b0-290">If a SAS is leaked, it can be used by anyone who obtains it, which can potentially compromise your storage account.</span></span>
* <span data-ttu-id="702b0-291">Amennyiben egy SAS tooa ügyfélalkalmazás lejár, és hello alkalmazás nem tooretrieve szolgáltatás új SAS, hello alkalmazás funkcióinak előfordulhat, hogy korlátozva.</span><span class="sxs-lookup"><span data-stu-id="702b0-291">If a SAS provided tooa client application expires and hello application is unable tooretrieve a new SAS from your service, then hello application's functionality may be hindered.</span></span>

<span data-ttu-id="702b0-292">hello következő javaslatok a közös hozzáférésű jogosultságkód segítségével a kockázatok csökkentése érdekében:</span><span class="sxs-lookup"><span data-stu-id="702b0-292">hello following recommendations for using shared access signatures can help mitigate these risks:</span></span>

1. <span data-ttu-id="702b0-293">**Mindig HTTPS PROTOKOLLT használnak** toocreate vagy egy SAS terjesztése.</span><span class="sxs-lookup"><span data-stu-id="702b0-293">**Always use HTTPS** toocreate or distribute a SAS.</span></span> <span data-ttu-id="702b0-294">Ha SAS-kód átadott HTTP Protokollon keresztül, és elfogta, a-átjárójának támadás egy támadó képes tooread hello SAS, és majd használni ugyanúgy, mint a hello szánt felhasználói rendelkezhetnek, ezzel együtt a bizalmas adatokat, vagy a program sérült adatokat hello lehetővé rosszindulatú felhasználók.</span><span class="sxs-lookup"><span data-stu-id="702b0-294">If a SAS is passed over HTTP and intercepted, an attacker performing a man-in-the-middle attack is able tooread hello SAS and then use it just as hello intended user could have, potentially compromising sensitive data or allowing for data corruption by hello malicious user.</span></span>
2. <span data-ttu-id="702b0-295">**Hivatkozás tárolt hozzáférési házirendeket, ahol csak lehetséges.**</span><span class="sxs-lookup"><span data-stu-id="702b0-295">**Reference stored access policies where possible.**</span></span> <span data-ttu-id="702b0-296">Hozzáférési házirendek adjon meg beállítás toorevoke engedélyek hello anélkül, hogy tooregenerate hello tárfiókkulcsok tárolja.</span><span class="sxs-lookup"><span data-stu-id="702b0-296">Stored access policies give you hello option toorevoke permissions without having tooregenerate hello storage account keys.</span></span> <span data-ttu-id="702b0-297">Be hello lejárati ezek nagyon, amennyiben az hello jövőbeli (vagy végtelen), és győződjön meg arról, hogy rendszeresen frissített toomove távolabb jövőbeli hello be azt.</span><span class="sxs-lookup"><span data-stu-id="702b0-297">Set hello expiration on these very far in hello future (or infinite) and make sure it's regularly updated toomove it farther into hello future.</span></span>
3. <span data-ttu-id="702b0-298">**Az ad hoc biztonsági Társítások near-term lejárati időpontjait használja.**</span><span class="sxs-lookup"><span data-stu-id="702b0-298">**Use near-term expiration times on an ad hoc SAS.**</span></span> <span data-ttu-id="702b0-299">Ily módon még akkor is, ha SAS-kód sérült, érvénytelen, így csak rövid ideig.</span><span class="sxs-lookup"><span data-stu-id="702b0-299">In this way, even if a SAS is compromised, it's valid only for a short time.</span></span> <span data-ttu-id="702b0-300">Ez az eljárás különösen fontos, ha a tárolt házirend nem hivatkozhatnak.</span><span class="sxs-lookup"><span data-stu-id="702b0-300">This practice is especially important if you cannot reference a stored access policy.</span></span> <span data-ttu-id="702b0-301">NEAR-term lejárati időpontjait is korlátozza a hello adatmennyiséget csak írható tooa blob hello idő elérhető tooupload tooit korlátozásával.</span><span class="sxs-lookup"><span data-stu-id="702b0-301">Near-term expiration times also limit hello amount of data that can be written tooa blob by limiting hello time available tooupload tooit.</span></span>
4. <span data-ttu-id="702b0-302">**Ügyfelek automatikusan megújítani hello SAS szükség van.**</span><span class="sxs-lookup"><span data-stu-id="702b0-302">**Have clients automatically renew hello SAS if necessary.**</span></span> <span data-ttu-id="702b0-303">Ügyfelek kell megújítani hello SAS hello lejárati, ha hello SAS biztosító hello szolgáltatás nem érhető el az újrapróbálkozások rendelés tooallow ideje előtt.</span><span class="sxs-lookup"><span data-stu-id="702b0-303">Clients should renew hello SAS well before hello expiration, in order tooallow time for retries if hello service providing hello SAS is unavailable.</span></span> <span data-ttu-id="702b0-304">Célja, hogy a SAS toobe azonnali kis számú használatos, ha rövid élettartamú műveletek várt toobe hello elévülési időszakon belül fejeződött be, majd a szükségtelen hello SAS nem várt megújítani toobe módon lehet.</span><span class="sxs-lookup"><span data-stu-id="702b0-304">If your SAS is meant toobe used for a small number of immediate, short-lived operations that are expected toobe completed within hello expiration period, then this may be unnecessary as hello SAS is not expected toobe renewed.</span></span> <span data-ttu-id="702b0-305">Azonban ha ügyfél, amely rendszeresen lehetővé teszi a kérelmek SAS segítségével, majd lejárati hello lehetőségét előre szerepet.</span><span class="sxs-lookup"><span data-stu-id="702b0-305">However, if you have client that is routinely making requests via SAS, then hello possibility of expiration comes into play.</span></span> <span data-ttu-id="702b0-306">hello legfontosabb szempont, hogy toobalance hello kell a hello SAS toobe rövid élettartamú (korábban is hangsúlyoztuk), amely az ügyfél hello hello kell tooensure a korai kérelmezi a megújítási elég (tooavoid megszűnésének toohello SAS lejáró előzetes toosuccessful megújítási miatt).</span><span class="sxs-lookup"><span data-stu-id="702b0-306">hello key consideration is toobalance hello need for hello SAS toobe short-lived (as previously stated) with hello need tooensure that hello client is requesting renewal early enough (tooavoid disruption due toohello SAS expiring prior toosuccessful renewal).</span></span>
5. <span data-ttu-id="702b0-307">**Ügyeljen arra, SAS kezdési időponttal.**</span><span class="sxs-lookup"><span data-stu-id="702b0-307">**Be careful with SAS start time.**</span></span> <span data-ttu-id="702b0-308">Ha megadta hello kezdési ideje a SAS-kód túl**most**, majd miatt tooclock döntés (toodifferent gépek szerint aktuális idő eltérései), sikertelen lehet figyelni időnként hello az első néhány perc múlva.</span><span class="sxs-lookup"><span data-stu-id="702b0-308">If you set hello start time for a SAS too**now**, then due tooclock skew (differences in current time according toodifferent machines), failures may be observed intermittently for hello first few minutes.</span></span> <span data-ttu-id="702b0-309">Általában beállítása hello kezdési idő toobe legalább 15 percet az elmúlt hello.</span><span class="sxs-lookup"><span data-stu-id="702b0-309">In general, set hello start time toobe at least 15 minutes in hello past.</span></span> <span data-ttu-id="702b0-310">Vagy, nem minden, ami megkönnyítő azonnal minden esetekben érvényes.</span><span class="sxs-lookup"><span data-stu-id="702b0-310">Or, don't set it at all, which will make it valid immediately in all cases.</span></span> <span data-ttu-id="702b0-311">Ugyanez általában vonatkozik tooexpiry idő is – hello ne feledje, hogy jelenhet meg mentése too15 percek száma, az óra eltérésére kérelmet az mindkét irányban.</span><span class="sxs-lookup"><span data-stu-id="702b0-311">hello same generally applies tooexpiry time as well--remember that you may observe up too15 minutes of clock skew in either direction on any request.</span></span> <span data-ttu-id="702b0-312">A többi verziója előzetes too2012-02-12 használó ügyfelek hello engedélyezett maximális időtartam, amely nem hivatkozik a tárolt házirend SAS esetén 1 óra, és adja meg a hosszú távú, sikertelen lesz, mint a szabályzatoknak.</span><span class="sxs-lookup"><span data-stu-id="702b0-312">For clients using a REST version prior too2012-02-12, hello maximum duration for a SAS that does not reference a stored access policy is 1 hour, and any policies specifying longer term than that will fail.</span></span>
6. <span data-ttu-id="702b0-313">**Meg kell adott hello erőforrás toobe érhető el.**</span><span class="sxs-lookup"><span data-stu-id="702b0-313">**Be specific with hello resource toobe accessed.**</span></span> <span data-ttu-id="702b0-314">Biztonsági szempontból ajánlott az tooprovide hello minimálisan szükséges jogosultsággal.</span><span class="sxs-lookup"><span data-stu-id="702b0-314">A security best practice is tooprovide a user with hello minimum required privileges.</span></span> <span data-ttu-id="702b0-315">Ha egy felhasználónak csak olvasási hozzáféréssel tooa egyetlen entitás van szüksége, adja meg számukra olvasási hozzáférés toothat egyetlen entitás, és nem olvasási/írási és törlési engedélyt tooall entitások.</span><span class="sxs-lookup"><span data-stu-id="702b0-315">If a user only needs read access tooa single entity, then grant them read access toothat single entity, and not read/write/delete access tooall entities.</span></span> <span data-ttu-id="702b0-316">Azt is lehetővé teszi hello kárt csökkentheti, ha SAS-kód sérült, mert hello SAS kevesebb energiát egy támadó hello tagoknál.</span><span class="sxs-lookup"><span data-stu-id="702b0-316">This also helps lessen hello damage if a SAS is compromised because hello SAS has less power in hello hands of an attacker.</span></span>
7. <span data-ttu-id="702b0-317">**Ismerje meg, hogy a fiók lesz terhelve bármely használatra, beleértve, amely a SAS használatával történik.**</span><span class="sxs-lookup"><span data-stu-id="702b0-317">**Understand that your account will be billed for any usage, including that done with SAS.**</span></span> <span data-ttu-id="702b0-318">Ha megadta az írási hozzáférést tooa blob, a felhasználó választhat tooupload 200 GB-os blob.</span><span class="sxs-lookup"><span data-stu-id="702b0-318">If you provide write access tooa blob, a user may choose tooupload a 200GB blob.</span></span> <span data-ttu-id="702b0-319">Feljogosított őket olvasási hozzáféréssel is, ha lehetséges, hogy választ toodownload 10-szer nélül 2 TB, a kimenő forgalom költséggel meg.</span><span class="sxs-lookup"><span data-stu-id="702b0-319">If you've given them read access as well, they may choose toodownload it 10 times, incurring 2 TB in egress costs for you.</span></span> <span data-ttu-id="702b0-320">Ebben az esetben adja meg a korlátozott engedélyekkel toohelp hello lehetséges műveletek a rosszindulatú felhasználók mérsékelni.</span><span class="sxs-lookup"><span data-stu-id="702b0-320">Again, provide limited permissions toohelp mitigate hello potential actions of malicious users.</span></span> <span data-ttu-id="702b0-321">Rövid élettartamú SAS tooreduce használja a fenyegetést (de vegye figyelembe az óra eltérésére a hello befejezési idő).</span><span class="sxs-lookup"><span data-stu-id="702b0-321">Use short-lived SAS tooreduce this threat (but be mindful of clock skew on hello end time).</span></span>
8. <span data-ttu-id="702b0-322">**SAS használatával írt adatok ellenőrzése.**</span><span class="sxs-lookup"><span data-stu-id="702b0-322">**Validate data written using SAS.**</span></span> <span data-ttu-id="702b0-323">Amikor egy ügyfél-alkalmazás írja az adatokat tooyour tárfiók, tartsa szem előtt, hogy az adatok problémák lehetnek.</span><span class="sxs-lookup"><span data-stu-id="702b0-323">When a client application writes data tooyour storage account, keep in mind that there can be problems with that data.</span></span> <span data-ttu-id="702b0-324">Ha az alkalmazás megköveteli, hogy adatokat érvényesítve vagy ahhoz, hogy készen áll a toouse jogosult, végre kell hajtania az ellenőrzés hello adatok írása után, és az alkalmazás használata előtt.</span><span class="sxs-lookup"><span data-stu-id="702b0-324">If your application requires that that data be validated or authorized before it is ready toouse, you should perform this validation after hello data is written and before it is used by your application.</span></span> <span data-ttu-id="702b0-325">Ez az eljárás sérült vagy rosszindulatú adat íródik a tooyour fiók, a felhasználó, aki megfelelően beszerzett hello SAS, vagy egy felhasználó egy kiszivárgott SAS kihasználva is véd.</span><span class="sxs-lookup"><span data-stu-id="702b0-325">This practice also protects against corrupt or malicious data being written tooyour account, either by a user who properly acquired hello SAS, or by a user exploiting a leaked SAS.</span></span>
9. <span data-ttu-id="702b0-326">**SAS mindig ne használjon.**</span><span class="sxs-lookup"><span data-stu-id="702b0-326">**Don't always use SAS.**</span></span> <span data-ttu-id="702b0-327">Egyes esetekben a tárfiók egy adott művelethez társított hello kockázatok járó SAS hello előnyeit.</span><span class="sxs-lookup"><span data-stu-id="702b0-327">Sometimes hello risks associated with a particular operation against your storage account outweigh hello benefits of SAS.</span></span> <span data-ttu-id="702b0-328">Az ilyen műveletek tooyour tárfiók írja az üzleti végrehajtása után középső rétegbeli szolgáltatás létrehozása érvényesítési, hitelesítési és naplózási szabály.</span><span class="sxs-lookup"><span data-stu-id="702b0-328">For such operations, create a middle-tier service that writes tooyour storage account after performing business rule validation, authentication, and auditing.</span></span> <span data-ttu-id="702b0-329">Egyes esetekben sokkal egyszerűbb toomanage hozzáférési más módon.</span><span class="sxs-lookup"><span data-stu-id="702b0-329">Also, sometimes it's simpler toomanage access in other ways.</span></span> <span data-ttu-id="702b0-330">Például, ha azt szeretné toomake a tárolóban lévő összes BLOB nyilvánosan olvasható, hogy hello tároló nyilvános, ahelyett, hogy hozzáférést biztosító SAS tooevery ügyfél.</span><span class="sxs-lookup"><span data-stu-id="702b0-330">For example, if you want toomake all blobs in a container publically readable, you can make hello container Public, rather than providing a SAS tooevery client for access.</span></span>
10. <span data-ttu-id="702b0-331">**Tárolási analitika toomonitor használhassa az alkalmazást.**</span><span class="sxs-lookup"><span data-stu-id="702b0-331">**Use Storage Analytics toomonitor your application.**</span></span> <span data-ttu-id="702b0-332">Használhatja a naplózás és a metrikák tooobserve bármely lefoglalását tooan kívül az a SAS szolgáltató szolgáltatás, vagy toohello véletlen eltávolítása a tárolt házirend miatt a hitelesítés sikertelen.</span><span class="sxs-lookup"><span data-stu-id="702b0-332">You can use logging and metrics tooobserve any spike in authentication failures due tooan outage in your SAS provider service or toohello inadvertent removal of a stored access policy.</span></span> <span data-ttu-id="702b0-333">Lásd: hello [Azure Storage csapat blogja](http://blogs.msdn.com/b/windowsazurestorage/archive/2011/08/03/windows-azure-storage-logging-using-logs-to-track-storage-requests.aspx) további információt.</span><span class="sxs-lookup"><span data-stu-id="702b0-333">See hello [Azure Storage Team Blog](http://blogs.msdn.com/b/windowsazurestorage/archive/2011/08/03/windows-azure-storage-logging-using-logs-to-track-storage-requests.aspx) for additional information.</span></span>

## <a name="sas-examples"></a><span data-ttu-id="702b0-334">SAS-példák</span><span class="sxs-lookup"><span data-stu-id="702b0-334">SAS examples</span></span>
<span data-ttu-id="702b0-335">Az alábbiakban néhány példa a megosztott hozzáférési aláírásokkal, SAS fiók mindkét típusú, és a szolgáltatásalapú SAS.</span><span class="sxs-lookup"><span data-stu-id="702b0-335">Below are some examples of both types of shared access signatures, account SAS and service SAS.</span></span>

<span data-ttu-id="702b0-336">toorun C# példában, a következő NuGet-csomagok a projekt tooreference hello szüksége:</span><span class="sxs-lookup"><span data-stu-id="702b0-336">toorun these C# examples, you need tooreference hello following NuGet packages in your project:</span></span>

* <span data-ttu-id="702b0-337">[Az Azure Storage ügyféloldali kódtára a .NET](http://www.nuget.org/packages/WindowsAzure.Storage), verziója 6.x vagy újabb (toouse fiók SAS).</span><span class="sxs-lookup"><span data-stu-id="702b0-337">[Azure Storage Client Library for .NET](http://www.nuget.org/packages/WindowsAzure.Storage), version 6.x or later (toouse account SAS).</span></span>
* [<span data-ttu-id="702b0-338">Azure Configuration Manager</span><span class="sxs-lookup"><span data-stu-id="702b0-338">Azure Configuration Manager</span></span>](http://www.nuget.org/packages/Microsoft.WindowsAzure.ConfigurationManager)

<span data-ttu-id="702b0-339">További példák hogyan toocreate és egy SAS-teszt: az [mintakódok Azure tárolási](https://azure.microsoft.com/documentation/samples/?service=storage).</span><span class="sxs-lookup"><span data-stu-id="702b0-339">For additional examples that show how toocreate and test a SAS, see [Azure Code Samples for Storage](https://azure.microsoft.com/documentation/samples/?service=storage).</span></span>

### <a name="example-create-and-use-an-account-sas"></a><span data-ttu-id="702b0-340">Példa: Létrehozása és SAS fiók használatára</span><span class="sxs-lookup"><span data-stu-id="702b0-340">Example: Create and use an account SAS</span></span>
<span data-ttu-id="702b0-341">hello alábbi példakód létrehoz egy fiókot, amely érvényes hello Blob fájl- és a SAS, és biztosítja az ügyfél engedélyeket olvasási, írási és listázási engedély hello tooaccess szolgáltatásiszint-API-k.</span><span class="sxs-lookup"><span data-stu-id="702b0-341">hello following code example creates an account SAS that is valid for hello Blob and File services, and gives hello client permissions read, write, and list permissions tooaccess service-level APIs.</span></span> <span data-ttu-id="702b0-342">hello fiók SAS hello protokoll tooHTTPS, korlátozza, így hello kérelem kell tenni a HTTPS.</span><span class="sxs-lookup"><span data-stu-id="702b0-342">hello account SAS restricts hello protocol tooHTTPS, so hello request must be made with HTTPS.</span></span>

```csharp
static string GetAccountSASToken()
{
    // toocreate hello account SAS, you need toouse your shared key credentials. Modify for your account.
    const string ConnectionString = "DefaultEndpointsProtocol=https;AccountName=account-name;AccountKey=account-key";
    CloudStorageAccount storageAccount = CloudStorageAccount.Parse(ConnectionString);

    // Create a new access policy for hello account.
    SharedAccessAccountPolicy policy = new SharedAccessAccountPolicy()
        {
            Permissions = SharedAccessAccountPermissions.Read | SharedAccessAccountPermissions.Write | SharedAccessAccountPermissions.List,
            Services = SharedAccessAccountServices.Blob | SharedAccessAccountServices.File,
            ResourceTypes = SharedAccessAccountResourceTypes.Service,
            SharedAccessExpiryTime = DateTime.UtcNow.AddHours(24),
            Protocols = SharedAccessProtocol.HttpsOnly
        };

    // Return hello SAS token.
    return storageAccount.GetSharedAccessSignature(policy);
}
```

<span data-ttu-id="702b0-343">toouse hello fiók SAS tooaccess szolgáltatás hello Blob szolgáltatás szintű API-k, létrehozni egy Blob ügyfél objektumot hello SAS használatával és a tárfiók a Blob storage végpont hello.</span><span class="sxs-lookup"><span data-stu-id="702b0-343">toouse hello account SAS tooaccess service-level APIs for hello Blob service, construct a Blob client object using hello SAS and hello Blob storage endpoint for your storage account.</span></span>

```csharp
static void UseAccountSAS(string sasToken)
{
    // Create new storage credentials using hello SAS token.
    StorageCredentials accountSAS = new StorageCredentials(sasToken);
    // Use these credentials and hello account name toocreate a Blob service client.
    CloudStorageAccount accountWithSAS = new CloudStorageAccount(accountSAS, "account-name", endpointSuffix: null, useHttps: true);
    CloudBlobClient blobClientWithSAS = accountWithSAS.CreateCloudBlobClient();

    // Now set hello service properties for hello Blob client created with hello SAS.
    blobClientWithSAS.SetServiceProperties(new ServiceProperties()
    {
        HourMetrics = new MetricsProperties()
        {
            MetricsLevel = MetricsLevel.ServiceAndApi,
            RetentionDays = 7,
            Version = "1.0"
        },
        MinuteMetrics = new MetricsProperties()
        {
            MetricsLevel = MetricsLevel.ServiceAndApi,
            RetentionDays = 7,
            Version = "1.0"
        },
        Logging = new LoggingProperties()
        {
            LoggingOperations = LoggingOperations.All,
            RetentionDays = 14,
            Version = "1.0"
        }
    });

    // hello permissions granted by hello account SAS also permit you tooretrieve service properties.
    ServiceProperties serviceProperties = blobClientWithSAS.GetServiceProperties();
    Console.WriteLine(serviceProperties.HourMetrics.MetricsLevel);
    Console.WriteLine(serviceProperties.HourMetrics.RetentionDays);
    Console.WriteLine(serviceProperties.HourMetrics.Version);
}
```

### <a name="example-create-a-stored-access-policy"></a><span data-ttu-id="702b0-344">Példa: Tárolt hozzáférési házirend létrehozása</span><span class="sxs-lookup"><span data-stu-id="702b0-344">Example: Create a stored access policy</span></span>
<span data-ttu-id="702b0-345">hello alábbi kód létrehoz egy tárolt házirend tárolóba.</span><span class="sxs-lookup"><span data-stu-id="702b0-345">hello following code creates a stored access policy on a container.</span></span> <span data-ttu-id="702b0-346">Hello hozzáférési házirend toospecify megkötéseket használ a szolgáltatásalapú SAS hello tárolóra vagy a benne található blobokat.</span><span class="sxs-lookup"><span data-stu-id="702b0-346">You can use hello access policy toospecify constraints for a service SAS on hello container or its blobs.</span></span>

```csharp
private static async Task CreateSharedAccessPolicyAsync(CloudBlobContainer container, string policyName)
{
    // Create a new shared access policy and define its constraints.
    // hello access policy provides create, write, read, list, and delete permissions.
    SharedAccessBlobPolicy sharedPolicy = new SharedAccessBlobPolicy()
    {
        // When hello start time for hello SAS is omitted, hello start time is assumed toobe hello time when hello storage service receives hello request.
        // Omitting hello start time for a SAS that is effective immediately helps tooavoid clock skew.
        SharedAccessExpiryTime = DateTime.UtcNow.AddHours(24),
        Permissions = SharedAccessBlobPermissions.Read | SharedAccessBlobPermissions.List |
            SharedAccessBlobPermissions.Write | SharedAccessBlobPermissions.Create | SharedAccessBlobPermissions.Delete
    };

    // Get hello container's existing permissions.
    BlobContainerPermissions permissions = await container.GetPermissionsAsync();

    // Add hello new policy toohello container's permissions, and set hello container's permissions.
    permissions.SharedAccessPolicies.Add(policyName, sharedPolicy);
    await container.SetPermissionsAsync(permissions);
}
```

### <a name="example-create-a-service-sas-on-a-container"></a><span data-ttu-id="702b0-347">Példa: A szolgáltatásalapú SAS létrehozása a tárolóba</span><span class="sxs-lookup"><span data-stu-id="702b0-347">Example: Create a service SAS on a container</span></span>
<span data-ttu-id="702b0-348">a következő kód hello létrehoz egy SAS-tárolóba.</span><span class="sxs-lookup"><span data-stu-id="702b0-348">hello following code creates a SAS on a container.</span></span> <span data-ttu-id="702b0-349">Ha egy meglévő tárolt hozzáférési házirend hello név van megadva, az adott házirendnek hello SAS társítva.</span><span class="sxs-lookup"><span data-stu-id="702b0-349">If hello name of an existing stored access policy is provided, that policy is associated with hello SAS.</span></span> <span data-ttu-id="702b0-350">Ha a nem tárolt házirend valósul meg, majd hello kód hello tároló az ad hoc biztonsági Társítások hoz létre.</span><span class="sxs-lookup"><span data-stu-id="702b0-350">If no stored access policy is provided, then hello code creates an ad-hoc SAS on hello container.</span></span>

```csharp
private static string GetContainerSasUri(CloudBlobContainer container, string storedPolicyName = null)
{
    string sasContainerToken;

    // If no stored policy is specified, create a new access policy and define its constraints.
    if (storedPolicyName == null)
    {
        // Note that hello SharedAccessBlobPolicy class is used both toodefine hello parameters of an ad-hoc SAS, and
        // tooconstruct a shared access policy that is saved toohello container's shared access policies.
        SharedAccessBlobPolicy adHocPolicy = new SharedAccessBlobPolicy()
        {
            // When hello start time for hello SAS is omitted, hello start time is assumed toobe hello time when hello storage service receives hello request.
            // Omitting hello start time for a SAS that is effective immediately helps tooavoid clock skew.
            SharedAccessExpiryTime = DateTime.UtcNow.AddHours(24),
            Permissions = SharedAccessBlobPermissions.Write | SharedAccessBlobPermissions.List
        };

        // Generate hello shared access signature on hello container, setting hello constraints directly on hello signature.
        sasContainerToken = container.GetSharedAccessSignature(adHocPolicy, null);

        Console.WriteLine("SAS for blob container (ad hoc): {0}", sasContainerToken);
        Console.WriteLine();
    }
    else
    {
        // Generate hello shared access signature on hello container. In this case, all of hello constraints for the
        // shared access signature are specified on hello stored access policy, which is provided by name.
        // It is also possible toospecify some constraints on an ad-hoc SAS and others on hello stored access policy.
        sasContainerToken = container.GetSharedAccessSignature(null, storedPolicyName);

        Console.WriteLine("SAS for blob container (stored access policy): {0}", sasContainerToken);
        Console.WriteLine();
    }

    // Return hello URI string for hello container, including hello SAS token.
    return container.Uri + sasContainerToken;
}
```

### <a name="example-create-a-service-sas-on-a-blob"></a><span data-ttu-id="702b0-351">Példa: A szolgáltatásalapú SAS létrehozása a blob</span><span class="sxs-lookup"><span data-stu-id="702b0-351">Example: Create a service SAS on a blob</span></span>
<span data-ttu-id="702b0-352">a következő kód hello SAS blob hoz létre.</span><span class="sxs-lookup"><span data-stu-id="702b0-352">hello following code creates a SAS on a blob.</span></span> <span data-ttu-id="702b0-353">Ha egy meglévő tárolt hozzáférési házirend hello név van megadva, az adott házirendnek hello SAS társítva.</span><span class="sxs-lookup"><span data-stu-id="702b0-353">If hello name of an existing stored access policy is provided, that policy is associated with hello SAS.</span></span> <span data-ttu-id="702b0-354">Ha a nem tárolt házirend valósul meg, majd hello kód hello blob egy ad hoc biztonsági Társítások hoz létre.</span><span class="sxs-lookup"><span data-stu-id="702b0-354">If no stored access policy is provided, then hello code creates an ad-hoc SAS on hello blob.</span></span>

```csharp
private static string GetBlobSasUri(CloudBlobContainer container, string blobName, string policyName = null)
{
    string sasBlobToken;

    // Get a reference tooa blob within hello container.
    // Note that hello blob may not exist yet, but a SAS can still be created for it.
    CloudBlockBlob blob = container.GetBlockBlobReference(blobName);

    if (policyName == null)
    {
        // Create a new access policy and define its constraints.
        // Note that hello SharedAccessBlobPolicy class is used both toodefine hello parameters of an ad-hoc SAS, and
        // tooconstruct a shared access policy that is saved toohello container's shared access policies.
        SharedAccessBlobPolicy adHocSAS = new SharedAccessBlobPolicy()
        {
            // When hello start time for hello SAS is omitted, hello start time is assumed toobe hello time when hello storage service receives hello request.
            // Omitting hello start time for a SAS that is effective immediately helps tooavoid clock skew.
            SharedAccessExpiryTime = DateTime.UtcNow.AddHours(24),
            Permissions = SharedAccessBlobPermissions.Read | SharedAccessBlobPermissions.Write | SharedAccessBlobPermissions.Create
        };

        // Generate hello shared access signature on hello blob, setting hello constraints directly on hello signature.
        sasBlobToken = blob.GetSharedAccessSignature(adHocSAS);

        Console.WriteLine("SAS for blob (ad hoc): {0}", sasBlobToken);
        Console.WriteLine();
    }
    else
    {
        // Generate hello shared access signature on hello blob. In this case, all of hello constraints for the
        // shared access signature are specified on hello container's stored access policy.
        sasBlobToken = blob.GetSharedAccessSignature(null, policyName);

        Console.WriteLine("SAS for blob (stored access policy): {0}", sasBlobToken);
        Console.WriteLine();
    }

    // Return hello URI string for hello container, including hello SAS token.
    return blob.Uri + sasBlobToken;
}
```

## <a name="conclusion"></a><span data-ttu-id="702b0-355">Összegzés</span><span class="sxs-lookup"><span data-stu-id="702b0-355">Conclusion</span></span>
<span data-ttu-id="702b0-356">Közös hozzáférésű jogosultságkód hasznosak korlátozott engedélyekkel tooyour tárolási fiók tooclients hello kulcsa nem lehet biztosítani.</span><span class="sxs-lookup"><span data-stu-id="702b0-356">Shared access signatures are useful for providing limited permissions tooyour storage account tooclients that should not have hello account key.</span></span> <span data-ttu-id="702b0-357">Ilyen fontos része a biztonsági modell hello Azure Storage használó alkalmazások.</span><span class="sxs-lookup"><span data-stu-id="702b0-357">As such, they are a vital part of hello security model for any application using Azure Storage.</span></span> <span data-ttu-id="702b0-358">Ha az itt felsorolt hello ajánlott eljárást követi, használhatja SAS tooprovide nagyobb rugalmasságot kapott az access tooresources tárfiókba, az alkalmazás hello biztonság csökkenése nélkül.</span><span class="sxs-lookup"><span data-stu-id="702b0-358">If you follow hello best practices listed here, you can use SAS tooprovide greater flexibility of access tooresources in your storage account, without compromising hello security of your application.</span></span>

## <a name="next-steps"></a><span data-ttu-id="702b0-359">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="702b0-359">Next Steps</span></span>
* [<span data-ttu-id="702b0-360">Kezelheti a névtelen olvasási hozzáférés toocontainers és blobok</span><span class="sxs-lookup"><span data-stu-id="702b0-360">Manage anonymous read access toocontainers and blobs</span></span>](../blobs/storage-manage-access-to-resources.md)
* [<span data-ttu-id="702b0-361">Hozzáférés delegálása közös hozzáférésű jogosultságkód használatával</span><span class="sxs-lookup"><span data-stu-id="702b0-361">Delegating Access with a Shared Access Signature</span></span>](http://msdn.microsoft.com/library/azure/ee395415.aspx)
* [<span data-ttu-id="702b0-362">Tábla- és várólista SAS bemutatása</span><span class="sxs-lookup"><span data-stu-id="702b0-362">Introducing Table and Queue SAS</span></span>](http://blogs.msdn.com/b/windowsazurestorage/archive/2012/06/12/introducing-table-sas-shared-access-signature-queue-sas-and-update-to-blob-sas.aspx)
