---
title: "aaaAsymmetric útválasztási |} Microsoft Docs"
description: "Ez a cikk végigvezeti az ügyfél több hivatkozások tooa cél egy hálózatban aszimmetrikus útválasztással előfordulhat, hogy szembesülhetnek hello problémákat."
documentationcenter: na
services: expressroute
author: osamazia
manager: carmonm
editor: 
ms.assetid: a754bff9-95c9-44b5-9796-377fc21e8322
ms.service: expressroute
ms.devlang: na
ms.topic: get-started-article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 10/10/2016
ms.author: osamam
ms.openlocfilehash: 01a16242437a3674dcfe27b074911a829a6c1abd
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/06/2017
---
# <a name="asymmetric-routing-with-multiple-network-paths"></a><span data-ttu-id="64b84-103">Aszimmetrikus útválasztás több hálózati elérési úttal</span><span class="sxs-lookup"><span data-stu-id="64b84-103">Asymmetric routing with multiple network paths</span></span>
<span data-ttu-id="64b84-104">A cikk leírja, hogy hogyan követhet a kimenő és a bejövő hálózati forgalom különböző utakat, amikor a hálózati forrás és cél között több elérési út is rendelkezésre áll.</span><span class="sxs-lookup"><span data-stu-id="64b84-104">This article explains how forward and return network traffic might take different routes when multiple paths are available between network source and destination.</span></span>

<span data-ttu-id="64b84-105">Annak a két fontos toounderstand fogalmak toounderstand aszimmetrikus útválasztást.</span><span class="sxs-lookup"><span data-stu-id="64b84-105">It's important toounderstand two concepts toounderstand asymmetric routing.</span></span> <span data-ttu-id="64b84-106">Egyik hello hatását, hogy több hálózati útvonalat.</span><span class="sxs-lookup"><span data-stu-id="64b84-106">One is hello effect of multiple network paths.</span></span> <span data-ttu-id="64b84-107">más hello hogyan eszközök, például egy tűzfal, tartsa állapotát.</span><span class="sxs-lookup"><span data-stu-id="64b84-107">hello other is how devices, like a firewall, keep state.</span></span> <span data-ttu-id="64b84-108">Az ilyen típusú eszközöket állapot-nyilvántartó eszközöknek nevezzük.</span><span class="sxs-lookup"><span data-stu-id="64b84-108">These types of devices are called stateful devices.</span></span> <span data-ttu-id="64b84-109">Ez a két tényező kombinációja hoz létre a hálózati forgalom dobnak el egy állapotalapú eszköz mert hello állapot-nyilvántartó eszköz nem találta, hogy a forgalom maga hello eszközzel származnak forgatókönyvek.</span><span class="sxs-lookup"><span data-stu-id="64b84-109">A combination of these two factors creates scenarios in which network traffic is dropped by a stateful device because hello stateful device didn't detect that traffic originated with hello device itself.</span></span>

## <a name="multiple-network-paths"></a><span data-ttu-id="64b84-110">Több hálózati elérési út</span><span class="sxs-lookup"><span data-stu-id="64b84-110">Multiple network paths</span></span>
<span data-ttu-id="64b84-111">Ha egy vállalati hálózat rendelkezik, csak az interneten keresztül az internetszolgáltatóval, hello Internet származó összes forgalmat tooand választ egy hivatkozás toohello hello ugyanazt az útvonalat.</span><span class="sxs-lookup"><span data-stu-id="64b84-111">When an enterprise network has only one link toohello Internet through their Internet service provider, all traffic tooand from hello Internet travels hello same path.</span></span> <span data-ttu-id="64b84-112">Gyakran a vállalatok beszerzési több körök, mint redundáns elérési utak, tooimprove hálózati üzemideje.</span><span class="sxs-lookup"><span data-stu-id="64b84-112">Often, companies purchase multiple circuits, as redundant paths, tooimprove network uptime.</span></span> <span data-ttu-id="64b84-113">Ha ez történik, az lehetséges, hogy a hello hálózaton, az Internet, toohello kívüli irányuló forgalom halad át egy hivatkozást, és hello vissza a forgalom halad át egy másik kapcsolat.</span><span class="sxs-lookup"><span data-stu-id="64b84-113">When this happens, it's possible that traffic that goes outside of hello network, toohello Internet, goes through one link, and hello return traffic goes through a different link.</span></span> <span data-ttu-id="64b84-114">Ezt a helyzetet nevezik közkeletűen aszimmetrikus útválasztásnak.</span><span class="sxs-lookup"><span data-stu-id="64b84-114">This is commonly known as asymmetric routing.</span></span> <span data-ttu-id="64b84-115">Aszimmetrikus útválasztási fordított hálózati forgalom egy másik elérési utat hello eredeti adatfolyamban vesz igénybe.</span><span class="sxs-lookup"><span data-stu-id="64b84-115">In asymmetric routing, reverse network traffic takes a different path from hello original flow.</span></span>

![Több elérési úttal rendelkező hálózatok](./media/expressroute-asymmetric-routing/AsymmetricRouting3.png)

<span data-ttu-id="64b84-117">Bár ez elsősorban hello Internet történik, több elérési út tooother kombinációi aszimmetrikus útválasztási is vonatkozik.</span><span class="sxs-lookup"><span data-stu-id="64b84-117">Although it primarily occurs on hello Internet, asymmetric routing also applies tooother combinations of multiple paths.</span></span> <span data-ttu-id="64b84-118">Vonatkozik, például tooan Internet elérési út és a egy belső elérési út, amely toohello ugyanarra a célgépre, és toomultiple titkos elérési út, amely toohello azonos céllal.</span><span class="sxs-lookup"><span data-stu-id="64b84-118">It applies, for example, both tooan Internet path and a private path that go toohello same destination, and toomultiple private paths that go toohello same destination.</span></span>

<span data-ttu-id="64b84-119">Minden hello módon, a forrás toodestination útválasztó kiszámítja hello legjobb elérési tooreach célt.</span><span class="sxs-lookup"><span data-stu-id="64b84-119">Each router along hello way, from source toodestination, computes hello best path tooreach a destination.</span></span> <span data-ttu-id="64b84-120">hello útválasztó megállapíthatja, hogy a lehető legjobb útvonalat alapuló két fő tényezőket:</span><span class="sxs-lookup"><span data-stu-id="64b84-120">hello router's determination of best possible path is based on two main factors:</span></span>

* <span data-ttu-id="64b84-121">A külső hálózatok közötti útválasztást az általában csak BGP néven emlegetett útválasztási protokoll, a peremátjáró protokoll (Border Gateway Protocol) határozza meg.</span><span class="sxs-lookup"><span data-stu-id="64b84-121">Routing between external networks is based on a routing protocol, Border Gateway Protocol (BGP).</span></span> <span data-ttu-id="64b84-122">BGP telik el szomszédok a hirdetmények, és végig a lépéseket toodetermine hello legjobb elérési szánt toohello cél futtatja őket.</span><span class="sxs-lookup"><span data-stu-id="64b84-122">BGP takes advertisements from neighbors and runs them through a series of steps toodetermine hello best path toohello intended destination.</span></span> <span data-ttu-id="64b84-123">Hello legjobb útvonalat az útválasztási táblázatot tárolja.</span><span class="sxs-lookup"><span data-stu-id="64b84-123">It stores hello best path in its routing table.</span></span>
* <span data-ttu-id="64b84-124">egy útvonal társított alhálózati maszk hosszának hello hogyan befolyásolja az útválasztási útvonalat.</span><span class="sxs-lookup"><span data-stu-id="64b84-124">hello length of a subnet mask associated with a route influences routing paths.</span></span> <span data-ttu-id="64b84-125">Ha útválasztója kap a több hirdetménnyel hello azonos IP-címet, de különböző alhálózati maszkokkal a hello útválasztó hello hirdetmény hosszabb alhálózati maszkkal inkább, mert egy pontosabb útvonal figyelembe.</span><span class="sxs-lookup"><span data-stu-id="64b84-125">If a router receives multiple advertisements for hello same IP address but with different subnet masks, hello router prefers hello advertisement with a longer subnet mask because it's considered a more specific route.</span></span>

## <a name="stateful-devices"></a><span data-ttu-id="64b84-126">Állapot-nyilvántartó eszközök</span><span class="sxs-lookup"><span data-stu-id="64b84-126">Stateful devices</span></span>
<span data-ttu-id="64b84-127">Útválasztók tekintse meg a csomagok IP-fejlécének hello útválasztási célokra.</span><span class="sxs-lookup"><span data-stu-id="64b84-127">Routers look at hello IP header of a packet for routing purposes.</span></span> <span data-ttu-id="64b84-128">Egyes eszközök is mélyebb hello csomagba keresse meg.</span><span class="sxs-lookup"><span data-stu-id="64b84-128">Some devices look even deeper inside hello packet.</span></span> <span data-ttu-id="64b84-129">Általában ezek az eszközök a 4. rétegbeli (Transmission Control Protocol, azaz TCP vagy User Datagram Protocol, azaz UDP), sőt akár a 7. rétegbeli (alkalmazási réteg) fejléceket vizsgálják.</span><span class="sxs-lookup"><span data-stu-id="64b84-129">Typically, these devices look at Layer4 (Transmission Control Protocol, or TCP; or User Datagram Protocol, or UDP), or even Layer7 (Application Layer) headers.</span></span> <span data-ttu-id="64b84-130">Ezek az eszközök általában biztonsági vagy sávszélesség-optimalizáló eszközök.</span><span class="sxs-lookup"><span data-stu-id="64b84-130">These kinds of devices are either security devices or bandwidth-optimization devices.</span></span> 

<span data-ttu-id="64b84-131">Gyakori állapot-nyilvántartó eszközök például a tűzfalak.</span><span class="sxs-lookup"><span data-stu-id="64b84-131">A firewall is a common example of a stateful device.</span></span> <span data-ttu-id="64b84-132">A tűzfal engedélyezi, vagy egy csomag toopass a különböző mezők például protokoll, az TCP/UDP-port és a URL-cím fejlécek alapján felületeken keresztül megtagadja.</span><span class="sxs-lookup"><span data-stu-id="64b84-132">A firewall allows or denies a packet toopass through its interfaces based on various fields such as protocol, TCP/UDP port, and URL headers.</span></span> <span data-ttu-id="64b84-133">Ezt a magas fokú Csomagvizsgálat feldolgozási terhelésének hello eszközön nagy helyezi.</span><span class="sxs-lookup"><span data-stu-id="64b84-133">This level of packet inspection puts a heavy processing load on hello device.</span></span> <span data-ttu-id="64b84-134">tooimprove teljesítmény hello tűzfal hello első csomag folyamat megvizsgálja.</span><span class="sxs-lookup"><span data-stu-id="64b84-134">tooimprove performance, hello firewall inspects hello first packet of a flow.</span></span> <span data-ttu-id="64b84-135">Lehetővé teszi a hello csomagok tooproceed, ha az állapot tábla tartja hello folyamata adatokat.</span><span class="sxs-lookup"><span data-stu-id="64b84-135">If it allows hello packet tooproceed, it keeps hello flow information in its state table.</span></span> <span data-ttu-id="64b84-136">Az összes későbbi csomagok kapcsolódó toothis folyamata engedélyezettek hello kezdeti meghatározása alapján.</span><span class="sxs-lookup"><span data-stu-id="64b84-136">All subsequent packets related toothis flow are allowed based on hello initial determination.</span></span> <span data-ttu-id="64b84-137">Egy csomagot, amely egy meglévő folyamat része lehet, hogy hello tűzfal érkeznie.</span><span class="sxs-lookup"><span data-stu-id="64b84-137">A packet that is part of an existing flow might arrive at hello firewall.</span></span> <span data-ttu-id="64b84-138">Ha hello tűzfalának nincs előzetes állapot arra vonatkozó információval, hello tűzfal megállítja az olyan hello csomagot.</span><span class="sxs-lookup"><span data-stu-id="64b84-138">If hello firewall has no prior state information about it, hello firewall drops hello packet.</span></span>

## <a name="asymmetric-routing-with-expressroute"></a><span data-ttu-id="64b84-139">Aszimmetrikus útválasztás az ExpressRoute-tal</span><span class="sxs-lookup"><span data-stu-id="64b84-139">Asymmetric routing with ExpressRoute</span></span>
<span data-ttu-id="64b84-140">Amikor tooMicrosoft Azure ExpressRoute keresztül csatlakozik, a hálózati módosítások módja:</span><span class="sxs-lookup"><span data-stu-id="64b84-140">When you connect tooMicrosoft through Azure ExpressRoute, your network changes like this:</span></span>

* <span data-ttu-id="64b84-141">Lehetősége van több hivatkozások tooMicrosoft.</span><span class="sxs-lookup"><span data-stu-id="64b84-141">You have multiple links tooMicrosoft.</span></span> <span data-ttu-id="64b84-142">Egy kapcsolat meglévő internetkapcsolat, és más hello ExpressRoute keresztül.</span><span class="sxs-lookup"><span data-stu-id="64b84-142">One link is your existing Internet connection, and hello other is via ExpressRoute.</span></span> <span data-ttu-id="64b84-143">Előfordulhat, hogy néhány forgalom tooMicrosoft hello interneten keresztül, de a térjen vissza a ExpressRoute keresztül, vagy fordítva.</span><span class="sxs-lookup"><span data-stu-id="64b84-143">Some traffic tooMicrosoft might go through hello Internet but come back via ExpressRoute, or vice versa.</span></span>
* <span data-ttu-id="64b84-144">Az ExpressRoute konkrétabb IP-címeket küld.</span><span class="sxs-lookup"><span data-stu-id="64b84-144">You receive more specific IP addresses via ExpressRoute.</span></span> <span data-ttu-id="64b84-145">Igen a hálózati tooMicrosoft ExpressRoute keresztül felajánlott szolgáltatásokhoz érkező forgalom, az útválasztók mindig inkább ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="64b84-145">So, for traffic from your network tooMicrosoft for services offered via ExpressRoute, routers always prefer ExpressRoute.</span></span>

<span data-ttu-id="64b84-146">a hálózaton van két módosítások toounderstand hello hatás Mérlegeljük, bizonyos esetekben.</span><span class="sxs-lookup"><span data-stu-id="64b84-146">toounderstand hello effect these two changes have on a network, let’s consider some scenarios.</span></span> <span data-ttu-id="64b84-147">Tegyük fel csak egy kör toohello Internet rendelkezik, és a felhasznált hello Internet minden Microsoft a szolgáltatásokat.</span><span class="sxs-lookup"><span data-stu-id="64b84-147">As an example, you have only one circuit toohello Internet and you consume all Microsoft services via hello Internet.</span></span> <span data-ttu-id="64b84-148">a hálózati tooMicrosoft és vissza traverses hello forgalmát hello azonos Internet kapcsolat és fázisok hello tűzfalon keresztül.</span><span class="sxs-lookup"><span data-stu-id="64b84-148">hello traffic from your network tooMicrosoft and back traverses hello same Internet link and passes through hello firewall.</span></span> <span data-ttu-id="64b84-149">hello tűzfal rekordok hello folyamata, hello első csomag látja, és adja vissza, mert hello folyamata hello állapot tábla létezik csomagját.</span><span class="sxs-lookup"><span data-stu-id="64b84-149">hello firewall records hello flow as it sees hello first packet and return packets are allowed because hello flow exists in hello state table.</span></span>

![Aszimmetrikus útválasztás az ExpressRoute-tal](./media/expressroute-asymmetric-routing/AsymmetricRouting1.png)

<span data-ttu-id="64b84-151">Ezután bekapcsolja az ExpressRoute-ot, és a Microsoft-szolgáltatásokat az ExpressRoute-on keresztül veszi igénybe.</span><span class="sxs-lookup"><span data-stu-id="64b84-151">Then, you turn on ExpressRoute and consume services offered by Microsoft over ExpressRoute.</span></span> <span data-ttu-id="64b84-152">A Microsoft egyéb szolgáltatások felhasznált hello interneten keresztül.</span><span class="sxs-lookup"><span data-stu-id="64b84-152">All other services from Microsoft are consumed over hello Internet.</span></span> <span data-ttu-id="64b84-153">A peremhálózaton, amely csatlakoztatott tooExpressRoute telepít egy külön tűzfal.</span><span class="sxs-lookup"><span data-stu-id="64b84-153">You deploy a separate firewall at your edge that is connected tooExpressRoute.</span></span> <span data-ttu-id="64b84-154">Microsoft pontosabb előtagok tooyour hálózati ExpressRoute keresztül az adott szolgáltatások hirdeti.</span><span class="sxs-lookup"><span data-stu-id="64b84-154">Microsoft advertises more specific prefixes tooyour network over ExpressRoute for specific services.</span></span> <span data-ttu-id="64b84-155">Az útválasztási infrastruktúrán úgy dönt, ExpressRoute hello ezen előtagok az elsődleges elérési útjával.</span><span class="sxs-lookup"><span data-stu-id="64b84-155">Your routing infrastructure chooses ExpressRoute as hello preferred path for those prefixes.</span></span> <span data-ttu-id="64b84-156">Ha, amelyek nem forgalmaz hirdetményt a nyilvános IP-címek tooMicrosoft ExpressRoute keresztül, a Microsoft a nyilvános IP-címek hello interneten keresztül kommunikál.</span><span class="sxs-lookup"><span data-stu-id="64b84-156">If you are not advertising your public IP addresses tooMicrosoft over ExpressRoute, Microsoft communicates with your public IP addresses via hello Internet.</span></span> <span data-ttu-id="64b84-157">A hálózati tooMicrosoft a forgalom ExpressRoute, és fordított forgalmát a Microsoft hello Internet használja.</span><span class="sxs-lookup"><span data-stu-id="64b84-157">Forward traffic from your network tooMicrosoft uses ExpressRoute, and reverse traffic from Microsoft uses hello Internet.</span></span> <span data-ttu-id="64b84-158">Amikor hello tűzfal hello peremhálózaton az a folyamat, amely nem található az hello állapottáblázat válaszcsomagot látja, hello forgalom elutasítja azokat.</span><span class="sxs-lookup"><span data-stu-id="64b84-158">When hello firewall at hello edge sees a response packet for a flow that it does not find in hello state table, it drops hello return traffic.</span></span>

<span data-ttu-id="64b84-159">Ha úgy dönt, hogy azonos hálózati címfordítás (NAT) tárolókészlet ExpressRoute és az hello Internet toouse hello, láthatja hasonló problémák hello ügyfelekkel a magánhálózati IP-címét a hálózaton.</span><span class="sxs-lookup"><span data-stu-id="64b84-159">If you choose toouse hello same network address translation (NAT) pool for ExpressRoute and for hello Internet, you'll see similar issues with hello clients in your network on private IP addresses.</span></span> <span data-ttu-id="64b84-160">A szolgáltatásokat, mint a Windows Update kérelmek tud hello interneten keresztül, mert a IP-címek a szolgáltatások hirdetése ExpressRoute keresztül nem történik.</span><span class="sxs-lookup"><span data-stu-id="64b84-160">Requests for services like Windows Update go via hello Internet because IP addresses for these services are not advertised via ExpressRoute.</span></span> <span data-ttu-id="64b84-161">Azonban hello forgalom ismét elérhető lesz az ExpressRoute keresztül.</span><span class="sxs-lookup"><span data-stu-id="64b84-161">However, hello return traffic comes back via ExpressRoute.</span></span> <span data-ttu-id="64b84-162">Ha a Microsoft az IP-címet kap hello azonos hello Internet az alhálózati maszk és ExpressRoute, ExpressRoute szívesebben hello interneten keresztül.</span><span class="sxs-lookup"><span data-stu-id="64b84-162">If Microsoft receives an IP address with hello same subnet mask from hello Internet and ExpressRoute, it prefers ExpressRoute over hello Internet.</span></span> <span data-ttu-id="64b84-163">Ha egy tűzfal vagy egy másik állapot-nyilvántartó eszköz, amely a hálózat széle és az ExpressRoute irányuló a hello folyamata nem előzetes információ, hello csomagok toothat folyamata tartozó elutasítja azokat.</span><span class="sxs-lookup"><span data-stu-id="64b84-163">If a firewall or another stateful device that is on your network edge and facing ExpressRoute has no prior information about hello flow, it drops hello packets that belong toothat flow.</span></span>

## <a name="asymmetric-routing-solutions"></a><span data-ttu-id="64b84-164">Megoldások az aszimmetrikus útválasztásra</span><span class="sxs-lookup"><span data-stu-id="64b84-164">Asymmetric routing solutions</span></span>
<span data-ttu-id="64b84-165">Két fő lehetőség közül választhat toosolve hello probléma aszimmetrikus útválasztási rendelkezik.</span><span class="sxs-lookup"><span data-stu-id="64b84-165">You have two main options toosolve hello problem of asymmetric routing.</span></span> <span data-ttu-id="64b84-166">Egy útválasztási keresztül van, és más hello forrás-alapú hálózati Címfordítás (SNAT) használatával.</span><span class="sxs-lookup"><span data-stu-id="64b84-166">One is through routing, and hello other is by using source-based NAT (SNAT).</span></span>

### <a name="routing"></a><span data-ttu-id="64b84-167">Útválasztás</span><span class="sxs-lookup"><span data-stu-id="64b84-167">Routing</span></span>
<span data-ttu-id="64b84-168">Győződjön meg arról, hogy a nyilvános IP-címek hirdetett tooappropriate nagy kiterjedésű hálózati (WAN) kapcsolatok.</span><span class="sxs-lookup"><span data-stu-id="64b84-168">Ensure that your public IP addresses are advertised tooappropriate wide area network (WAN) links.</span></span> <span data-ttu-id="64b84-169">Például ha szeretne toouse hello internetes hitelesítési forgalmat és ExpressRoute az e-mail forgalom, meg kell hirdetményt az Active Directory összevonási szolgáltatások (AD FS) nyilvános IP-címek ExpressRoute keresztül.</span><span class="sxs-lookup"><span data-stu-id="64b84-169">For example, if you want toouse hello Internet for authentication traffic and ExpressRoute for your mail traffic, you should not advertise your Active Directory Federation Services (AD FS) public IP addresses over ExpressRoute.</span></span> <span data-ttu-id="64b84-170">Hasonlóképpen, győződjön meg nem tooexpose egy helyszíni AD FS kiszolgálói tooIP címeket útválasztó hello fogad ExpressRoute keresztül.</span><span class="sxs-lookup"><span data-stu-id="64b84-170">Similarly, be sure not tooexpose an on-premises AD FS server tooIP addresses that hello router receives over ExpressRoute.</span></span> <span data-ttu-id="64b84-171">Útvonalak fogadása történik az ExpressRoute több vonatkoznak, így az általuk végrehajtott ExpressRoute hello elérési útnak a hitelesítési forgalom tooMicrosoft.</span><span class="sxs-lookup"><span data-stu-id="64b84-171">Routes received over ExpressRoute are more specific so they make ExpressRoute hello preferred path for authentication traffic tooMicrosoft.</span></span> <span data-ttu-id="64b84-172">Ez aszimmetrikus útválasztáshoz vezet.</span><span class="sxs-lookup"><span data-stu-id="64b84-172">This causes asymmetric routing.</span></span>

<span data-ttu-id="64b84-173">Ha toouse ExpressRoute hitelesítéshez, győződjön meg arról, hogy hirdetési AD FS nyilvános IP-címek keresztül ExpressRoute nélkül hálózati címfordítást.</span><span class="sxs-lookup"><span data-stu-id="64b84-173">If you want toouse ExpressRoute for authentication, make sure that you are advertising AD FS public IP addresses over ExpressRoute without NAT.</span></span> <span data-ttu-id="64b84-174">Ezzel a módszerrel a Microsofttól származnak, és tooan kerül forgalom a helyszíni AD FS-kiszolgálón keresztül ExpressRoute kerül.</span><span class="sxs-lookup"><span data-stu-id="64b84-174">This way, traffic that originates from Microsoft and goes tooan on-premises AD FS server goes over ExpressRoute.</span></span> <span data-ttu-id="64b84-175">Ügyfél tooMicrosoft visszatérési forgalmát ExpressRoute használja, mert az előnyben részesített útvonal hello hello interneten keresztül.</span><span class="sxs-lookup"><span data-stu-id="64b84-175">Return traffic from customer tooMicrosoft uses ExpressRoute because it's hello preferred route over hello Internet.</span></span>

### <a name="source-based-nat"></a><span data-ttu-id="64b84-176">Forrásalapú NAT</span><span class="sxs-lookup"><span data-stu-id="64b84-176">Source-based NAT</span></span>
<span data-ttu-id="64b84-177">Az aszimmetrikus útválasztás által okozott problémák megoldásának másik módját az SNAT használata jelenti.</span><span class="sxs-lookup"><span data-stu-id="64b84-177">Another way of solving asymmetric routing issues is by using SNAT.</span></span> <span data-ttu-id="64b84-178">Például akkor rendelkezik nem meghirdetett hello nyilvános IP-cím egy helyszíni Simple Mail Transfer Protocol (SMTP) kiszolgáló ExpressRoute keresztül, mert azt tervezi, hogy az ilyen típusú kommunikáció Internet toouse hello.</span><span class="sxs-lookup"><span data-stu-id="64b84-178">For example, you have not advertised hello public IP address of an on-premises Simple Mail Transfer Protocol (SMTP) server over ExpressRoute because you intend toouse hello Internet for this type of communication.</span></span> <span data-ttu-id="64b84-179">A kérelmeket, amelyek a Microsoft származik, és megnyitja tooyour helyszíni SMTP-kiszolgáló internetes hello halad át.</span><span class="sxs-lookup"><span data-stu-id="64b84-179">A request that originates with Microsoft and then goes tooyour on-premises SMTP server traverses hello Internet.</span></span> <span data-ttu-id="64b84-180">Ön SNAT hello bejövő kérelem tooan belső IP-cím.</span><span class="sxs-lookup"><span data-stu-id="64b84-180">You SNAT hello incoming request tooan internal IP address.</span></span> <span data-ttu-id="64b84-181">Hello SMTP-kiszolgáló fordított forgalmát toohello peremhálózati tűzfal (amely a NAT számára) helyett ExpressRoute keresztül kerül.</span><span class="sxs-lookup"><span data-stu-id="64b84-181">Reverse traffic from hello SMTP server goes toohello edge firewall (which you use for NAT) instead of through ExpressRoute.</span></span> <span data-ttu-id="64b84-182">hello forgalom Visszalépés hello interneten keresztül.</span><span class="sxs-lookup"><span data-stu-id="64b84-182">hello return traffic goes back via hello Internet.</span></span>

![A forrásalapú NAT hálózati konfigurációja](./media/expressroute-asymmetric-routing/AsymmetricRouting2.png)

## <a name="asymmetric-routing-detection"></a><span data-ttu-id="64b84-184">Az aszimmetrikus útválasztás észlelése</span><span class="sxs-lookup"><span data-stu-id="64b84-184">Asymmetric routing detection</span></span>
<span data-ttu-id="64b84-185">Útválasztás nyomkövetése hello legjobb módja toomake meg arról, hogy a hálózati forgalom áthaladó hello várt elérési út.</span><span class="sxs-lookup"><span data-stu-id="64b84-185">Traceroute is hello best way toomake sure that your network traffic is traversing hello expected path.</span></span> <span data-ttu-id="64b84-186">Ha a várt forgalom a helyszíni SMTP server tooMicrosoft tootake hello Internet elérési útról, hello várt traceroute a hello SMTP server tooOffice 365.</span><span class="sxs-lookup"><span data-stu-id="64b84-186">If you expect traffic from your on-premises SMTP server tooMicrosoft tootake hello Internet path, hello expected traceroute is from hello SMTP server tooOffice 365.</span></span> <span data-ttu-id="64b84-187">hello eredményt ellenőrzi, hogy forgalom valóban hagyja el a hálózaton hello Internet felé, és nem ExpressRoute felé.</span><span class="sxs-lookup"><span data-stu-id="64b84-187">hello result validates that traffic is indeed leaving your network toward hello Internet and not toward ExpressRoute.</span></span>

