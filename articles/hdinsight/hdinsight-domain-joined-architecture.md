---
title: "aaaDomain csatlakoztatott Azure HDInsight-architektúra |} Microsoft Docs"
description: "Ismerje meg, hogyan tooplan tartományhoz HDInsight."
services: hdinsight
documentationcenter: 
author: saurinsh
manager: jhubbard
editor: cgronlun
tags: azure-portal
ms.assetid: 7dc6847d-10d4-4b5c-9c83-cc513cf91965
ms.service: hdinsight
ms.custom: hdinsightactive
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 02/03/2017
ms.author: saurinsh
ms.openlocfilehash: 1c3ecedf3739b4f8fa54160225be9c1d6e2ca6cc
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/06/2017
---
# <a name="plan-azure-domain-joined-hadoop-clusters-in-hdinsight"></a><span data-ttu-id="b0325-103">Azure-tartományhoz csatlakoztatott Hadoop-fürtök tervezése a HDInsightban</span><span class="sxs-lookup"><span data-stu-id="b0325-103">Plan Azure domain-joined Hadoop clusters in HDInsight</span></span>

<span data-ttu-id="b0325-104">hello hagyományos Hadoop egyfelhasználós fürt.</span><span class="sxs-lookup"><span data-stu-id="b0325-104">hello traditional Hadoop is a single-user cluster.</span></span> <span data-ttu-id="b0325-105">Ez megfelel a legtöbb olyan cégnek, amelyekben kisebb alkalmazásfejlesztő csapatok dolgoznak a nagy adatszámítási feladatok kiépítésén.</span><span class="sxs-lookup"><span data-stu-id="b0325-105">It is suitable for most companies that have smaller application teams building large data workloads.</span></span> <span data-ttu-id="b0325-106">A Hadoop növekvő népszerűségével, sok vállalat vált olyan modellre, ahol a fürtöket az informatikai csapatok felügyelik, és több alkalmazásfejlesztő csapat is dolgozik ugyanazokon a fürtökön.</span><span class="sxs-lookup"><span data-stu-id="b0325-106">As Hadoop gains popularity, many enterprises are moving toward a model in which clusters are managed by IT teams and multiple application teams share clusters.</span></span> <span data-ttu-id="b0325-107">Így a funkciói közé tartoznak, amely többfelhasználós fürtök hello Azure hdinsight leginkább kért funkciók.</span><span class="sxs-lookup"><span data-stu-id="b0325-107">Thus, functionalities involving multiuser clusters are among hello most requested functionalities in Azure HDInsight.</span></span>

<span data-ttu-id="b0325-108">Helyett a saját többfelhasználós hitelesítési és engedélyezési felépítése, HDInsight hello legnépszerűbb identitásszolgáltató – Active Directory (AD) alapul.</span><span class="sxs-lookup"><span data-stu-id="b0325-108">Instead of building its own multiuser authentication and authorization, HDInsight relies on hello most popular identity provider--Active Directory (AD).</span></span> <span data-ttu-id="b0325-109">hello hatékony biztonsági funkciókat az ad-ben használt toomanage többfelhasználós engedélyezési hdinsight lehet.</span><span class="sxs-lookup"><span data-stu-id="b0325-109">hello powerful security functionality in AD can be used toomanage multiuser authorization in HDInsight.</span></span> <span data-ttu-id="b0325-110">Az ad-val a HDInsight integrálásával kommunikálhat hello fürtök AD hitelesítő adataival.</span><span class="sxs-lookup"><span data-stu-id="b0325-110">By integrating HDInsight with AD, you can communicate with hello clusters by using your AD credentials.</span></span> <span data-ttu-id="b0325-111">HDInsight hozzárendeli egy AD felhasználó tooa helyi Hadoop felhasználót, így az összes hello hdinsighton futó szolgáltatások (Ambari, kiszolgáló, idejére Spark thrift Hive server és a mások) munkahelyi zökkenőmentesen hello hitelesített felhasználó számára.</span><span class="sxs-lookup"><span data-stu-id="b0325-111">HDInsight maps an AD user tooa local Hadoop user, so all hello services running on HDInsight (Ambari, Hive server, Ranger, Spark thrift server, and others) work seamlessly for hello authenticated user.</span></span>

## <a name="integrate-hdinsight-with-ad-and-ad-on-iaas-vm"></a><span data-ttu-id="b0325-112">HDInsight integrálása AD és az AD IaaS virtuális gépen</span><span class="sxs-lookup"><span data-stu-id="b0325-112">Integrate HDInsight with AD and AD on IaaS VM</span></span>

<span data-ttu-id="b0325-113">HDInsight integrálása az Azure AD vagy AD Iaas virtuális gépen, hello HDInsight-fürtcsomóponton található, a tartományhoz csatlakoztatott tooa tartomány.</span><span class="sxs-lookup"><span data-stu-id="b0325-113">By integrating HDInsight with Azure AD or AD on Iaas VM, hello HDInsight cluster nodes are domain-joined tooa domain.</span></span> <span data-ttu-id="b0325-114">HDInsight hoz létre a hello szolgáltatásnevekről hello fürtben futó Hadoop-szolgáltatás, és az Azure AD vagy ad szolgáltatásokba, az infrastruktúra-szolgáltatási virtuális gép egy adott szervezeti egység (OU) belül helyezi azokat.</span><span class="sxs-lookup"><span data-stu-id="b0325-114">HDInsight creates service principals for hello Hadoop services running on hello cluster and places them within a specified organizational unit (OU) in Azure AD or AD on IaaS VM.</span></span> <span data-ttu-id="b0325-115">HDInsight is létrehoz címfeloldási DNS-hozzárendelések hello hello tartomány, a tartományhoz csatlakoztatott toohello hello csomópontok IP-címét.</span><span class="sxs-lookup"><span data-stu-id="b0325-115">HDInsight also creates reverse DNS mappings in hello domain for hello IP addresses of hello nodes that are joined toohello domain.</span></span>

<span data-ttu-id="b0325-116">Ezt a beállítást többféle architektúra használatával érheti el.</span><span class="sxs-lookup"><span data-stu-id="b0325-116">You can achieve this setup by using multiple architectures.</span></span> <span data-ttu-id="b0325-117">A következő architektúrák hello közül választhat.</span><span class="sxs-lookup"><span data-stu-id="b0325-117">You can choose from hello following architectures.</span></span>

<span data-ttu-id="b0325-118">**A HDInsight az Azure infrastruktúra-szolgáltatáson futó AD-vel integrált**</span><span class="sxs-lookup"><span data-stu-id="b0325-118">**HDInsight integrated with AD running on Azure IaaS**</span></span>

<span data-ttu-id="b0325-119">Ez a legegyszerűbb architektúra hello HDInsight integrálható az Active Directoryban.</span><span class="sxs-lookup"><span data-stu-id="b0325-119">This is hello simplest architecture for integrating HDInsight with Active Directory.</span></span> <span data-ttu-id="b0325-120">egy (vagy több) virtuális gépek (VM) az Azure AD-tartományvezérlő hello fut.</span><span class="sxs-lookup"><span data-stu-id="b0325-120">hello AD domain controller runs on one (or multiple) virtual machines (VMs) in Azure.</span></span> <span data-ttu-id="b0325-121">Ezek a virtuális gépek általában egy virtuális hálózatot alkotnak.</span><span class="sxs-lookup"><span data-stu-id="b0325-121">These VMs are usually in a virtual network.</span></span> <span data-ttu-id="b0325-122">Állít be egy másik virtuális hálózati hello HDInsight-fürthöz.</span><span class="sxs-lookup"><span data-stu-id="b0325-122">You set up another virtual network for hello HDInsight cluster.</span></span> <span data-ttu-id="b0325-123">A HDInsight toohave egy sor a láthatáron tooActive könyvtár, kell toopeer ezek a virtuális hálózatok használatával [VNet – VNet társviszony-létesítés](../virtual-network/virtual-network-create-peering.md).</span><span class="sxs-lookup"><span data-stu-id="b0325-123">For HDInsight toohave a line of sight tooActive Directory, you need toopeer these virtual networks by using [VNet-to-VNet peering](../virtual-network/virtual-network-create-peering.md).</span></span> <span data-ttu-id="b0325-124">Ha hoz létre az ARM ESZKÖZBEN, az Active Directory hello, akkor létrehozhat hello Active Directory és a HDInsight hello ugyanazt a virtuális hálózatot, és nincs szükség toodo társviszony-létesítés.</span><span class="sxs-lookup"><span data-stu-id="b0325-124">If you create hello Active Directory in ARM, then you can create hello Active Directory and HDInsight in hello same VNet and you don't need toodo peering.</span></span> 

![Tartományhoz csatlakoztatott HDInsight-fürtök topológiája](./media/hdinsight-domain-joined-architecture/hdinsight-domain-joined-architecture_1.png)

> [!NOTE]
> <span data-ttu-id="b0325-126">Ebben az architektúrában nem használható az Azure Data Lake Store hello HDInsight-fürthöz.</span><span class="sxs-lookup"><span data-stu-id="b0325-126">In this architecture, you cannot use Azure Data Lake Store with hello HDInsight cluster.</span></span>


<span data-ttu-id="b0325-127">Az Active Directory előfeltételei:</span><span class="sxs-lookup"><span data-stu-id="b0325-127">Prerequisites for Active Directory:</span></span>

* <span data-ttu-id="b0325-128">Egy [szervezeti egység](../active-directory-domain-services/active-directory-ds-admin-guide-create-ou.md) belül kell létrehoznia, amely hová kívánja helyezni a HDInsight-fürt virtuális gépek hello és hello fürt által használt szolgáltatásnevekről hello.</span><span class="sxs-lookup"><span data-stu-id="b0325-128">An [organizational unit](../active-directory-domain-services/active-directory-ds-admin-guide-create-ou.md) must be created, within which you place hello HDInsight cluster VMs and hello service principals used by hello cluster.</span></span>
* <span data-ttu-id="b0325-129">[Lightweight Directory Access protokollok](../active-directory-domain-services/active-directory-ds-admin-guide-configure-secure-ldap.md) (LDAPs) be kell állítani a az ad-vel való kommunikációhoz.</span><span class="sxs-lookup"><span data-stu-id="b0325-129">[Lightweight Directory Access Protocols](../active-directory-domain-services/active-directory-ds-admin-guide-configure-secure-ldap.md) (LDAPs) must be set up for communicating with AD.</span></span> <span data-ttu-id="b0325-130">hello használt tanúsítvány tooset LDAPS be valós tanúsítványnak (nem egy önaláírt tanúsítvány) kell lennie.</span><span class="sxs-lookup"><span data-stu-id="b0325-130">hello certificate used tooset up LDAPS must be a real certificate (not a self-signed certificate).</span></span>
* <span data-ttu-id="b0325-131">Névkeresési DNS-zónák hello tartomány hello IP-címtartomány hello HDInsight alhálózat (például az előző ábrán hello 10.2.0.0/24) léteznie kell.</span><span class="sxs-lookup"><span data-stu-id="b0325-131">Reverse DNS zones must be created on hello domain for hello IP address range of hello HDInsight subnet (for example, 10.2.0.0/24 in hello previous picture).</span></span>
* <span data-ttu-id="b0325-132">Szükséges egy szolgáltatásfiók vagy egy felhasználói fiók is.</span><span class="sxs-lookup"><span data-stu-id="b0325-132">A service account or a user account is needed.</span></span> <span data-ttu-id="b0325-133">A fiók toocreate hello HDInsight-fürt használatára.</span><span class="sxs-lookup"><span data-stu-id="b0325-133">Use this account toocreate hello HDInsight cluster.</span></span> <span data-ttu-id="b0325-134">Ennek a fióknak hello a következő engedélyekkel kell rendelkeznie:</span><span class="sxs-lookup"><span data-stu-id="b0325-134">This account must have hello following permissions:</span></span>

    - <span data-ttu-id="b0325-135">Engedélyek toocreate szolgáltatás egyszerű és gép objektumok belül hello szervezeti egység</span><span class="sxs-lookup"><span data-stu-id="b0325-135">Permissions toocreate service principal objects and machine objects within hello organizational unit</span></span>
    - <span data-ttu-id="b0325-136">Engedélyek toocreate címfeloldási DNS proxy szabályok</span><span class="sxs-lookup"><span data-stu-id="b0325-136">Permissions toocreate reverse DNS proxy rules</span></span>
    - <span data-ttu-id="b0325-137">Engedélyek toojoin gépek toohello Active Directory-tartomány</span><span class="sxs-lookup"><span data-stu-id="b0325-137">Permissions toojoin machines toohello Active Directory domain</span></span>

<span data-ttu-id="b0325-138">**Kizárólag felhőalapú Azure AD-vel integrált HDInsight**</span><span class="sxs-lookup"><span data-stu-id="b0325-138">**HDInsight integrated with cloud-only Azure AD**</span></span>

<span data-ttu-id="b0325-139">A kizárólag felhőalapú Azure AD esetében konfiguráljon egy tartományvezérlőt, hogy a HDInsight integrálható legyen az Azure AD-vel.</span><span class="sxs-lookup"><span data-stu-id="b0325-139">For cloud-only Azure AD, configure a domain controller so that HDInsight can be integrated with Azure AD.</span></span> <span data-ttu-id="b0325-140">Ehhez a [Azure Active Directory tartományi szolgáltatások](../active-directory-domain-services/active-directory-ds-overview.md) (az Azure AD DS).</span><span class="sxs-lookup"><span data-stu-id="b0325-140">This is achieved by using [Azure Active Directory Domain Services](../active-directory-domain-services/active-directory-ds-overview.md) (Azure AD DS).</span></span> <span data-ttu-id="b0325-141">Az Azure Active Directory tartományi szolgáltatások tartományvezérlő gépeket tartományt hoz hello felhő, és IP-címek biztosít.</span><span class="sxs-lookup"><span data-stu-id="b0325-141">Azure AD DS creates domain controller machines on hello cloud and provides IP addresses for them.</span></span> <span data-ttu-id="b0325-142">Két tartományvezérlőt hoz létre a magas rendelkezésre állás érdekében.</span><span class="sxs-lookup"><span data-stu-id="b0325-142">It creates two domain controllers for high availability.</span></span>

<span data-ttu-id="b0325-143">Az Azure AD DS jelenleg kizárólag klasszikus virtuális hálózatokon létezik.</span><span class="sxs-lookup"><span data-stu-id="b0325-143">Currently, Azure AD DS exists only in classic virtual networks.</span></span> <span data-ttu-id="b0325-144">Csak elérhető hello klasszikus Azure portál használatával.</span><span class="sxs-lookup"><span data-stu-id="b0325-144">It is only accessible by using hello Azure classic portal.</span></span> <span data-ttu-id="b0325-145">virtuális hálózat szerepel a hello Azure-portálon, amelyekre szüksége van a toobe HDInsight hello a VNet – VNet-társviszony létesítése – társviszonyban hello klasszikus virtuális hálózattal.</span><span class="sxs-lookup"><span data-stu-id="b0325-145">hello HDInsight virtual network exists in hello Azure portal, which needs toobe peered with hello classic virtual network by using VNet-to-VNet peering.</span></span>

> [!NOTE]
> <span data-ttu-id="b0325-146">A klasszikus virtuális hálózatot és a virtuális hálózat szükséges, hogy mindkét virtuális hálózat legyen-e az Azure Resource Manager-társviszony létesítése – hello ugyanabban a régióban, és a hello azonos Azure-előfizetés.</span><span class="sxs-lookup"><span data-stu-id="b0325-146">Peering between a classic virtual network and an Azure Resource Manager virtual network requires that both virtual networks are in hello same region and under hello same Azure subscription.</span></span>

![Tartományhoz csatlakoztatott HDInsight-fürtök topológiája](./media/hdinsight-domain-joined-architecture/hdinsight-domain-joined-architecture_2.png)

<span data-ttu-id="b0325-148">Az Azure AD előfeltételei:</span><span class="sxs-lookup"><span data-stu-id="b0325-148">Prerequisites for Azure AD:</span></span>

* <span data-ttu-id="b0325-149">Egy [szervezeti egység](../active-directory-domain-services/active-directory-ds-admin-guide-create-ou.md) belül, amely helyezi-e létre kell hozni a HDInsight-fürt virtuális gépek hello és hello fürt által használt szolgáltatásnevekről hello.</span><span class="sxs-lookup"><span data-stu-id="b0325-149">An [organizational unit](../active-directory-domain-services/active-directory-ds-admin-guide-create-ou.md) must be created within which you place hello HDInsight cluster VMs and hello service principals used by hello cluster.</span></span>
* <span data-ttu-id="b0325-150">Az [LDAPS-t](../active-directory-domain-services/active-directory-ds-admin-guide-configure-secure-ldap.md) is konfigurálni kell az Azure AD DS konfigurálásakor.</span><span class="sxs-lookup"><span data-stu-id="b0325-150">[LDAPS](../active-directory-domain-services/active-directory-ds-admin-guide-configure-secure-ldap.md) must be set up when you configure Azure AD DS.</span></span> <span data-ttu-id="b0325-151">hello használt tanúsítvány tooset LDAPS be valós tanúsítványnak (nem egy önaláírt tanúsítvány) kell lennie.</span><span class="sxs-lookup"><span data-stu-id="b0325-151">hello certificate used tooset up LDAPS must be a real certificate (not a self-signed certificate).</span></span>
* <span data-ttu-id="b0325-152">Névkeresési DNS-zónák hello tartomány hello IP-címtartomány hello HDInsight alhálózat (például az előző ábrán hello 10.2.0.0/24) léteznie kell.</span><span class="sxs-lookup"><span data-stu-id="b0325-152">Reverse DNS zones must be created on hello domain for hello IP address range of hello HDInsight subnet (for example, 10.2.0.0/24 in hello previous picture).</span></span>
* <span data-ttu-id="b0325-153">[Jelszó-kivonatok](../active-directory-domain-services/active-directory-ds-getting-started-password-sync.md) kell szinkronizálva az Azure AD tooAzure Active Directory tartományi Szolgáltatásokban.</span><span class="sxs-lookup"><span data-stu-id="b0325-153">[Password hashes](../active-directory-domain-services/active-directory-ds-getting-started-password-sync.md) must be synced from Azure AD tooAzure AD DS.</span></span>
* <span data-ttu-id="b0325-154">Szükséges egy szolgáltatásfiók vagy egy felhasználói fiók is.</span><span class="sxs-lookup"><span data-stu-id="b0325-154">A service account or a user account is needed.</span></span> <span data-ttu-id="b0325-155">A fiók toocreate hello HDInsight-fürt használatára.</span><span class="sxs-lookup"><span data-stu-id="b0325-155">Use this account toocreate hello HDInsight cluster.</span></span> <span data-ttu-id="b0325-156">Ennek a fióknak hello a következő engedélyekkel kell rendelkeznie:</span><span class="sxs-lookup"><span data-stu-id="b0325-156">This account must have hello following permissions:</span></span>

    - <span data-ttu-id="b0325-157">Engedélyek toocreate szolgáltatás egyszerű és gép objektumok belül hello szervezeti egység</span><span class="sxs-lookup"><span data-stu-id="b0325-157">Permissions toocreate service principal objects and machine objects within hello organizational unit</span></span>
    - <span data-ttu-id="b0325-158">Engedélyek toocreate címfeloldási DNS proxy szabályok</span><span class="sxs-lookup"><span data-stu-id="b0325-158">Permissions toocreate reverse DNS proxy rules</span></span>
    - <span data-ttu-id="b0325-159">Engedélyek toojoin gépek toohello az Azure AD-tartomány</span><span class="sxs-lookup"><span data-stu-id="b0325-159">Permissions toojoin machines toohello Azure AD domain</span></span>

## <a name="next-steps"></a><span data-ttu-id="b0325-160">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="b0325-160">Next steps</span></span>
* <span data-ttu-id="b0325-161">tooconfigure egy tartományhoz csatlakozó HDInsight-fürtöt, tekintse meg [konfigurálása tartományhoz a HDInsight-fürtök](hdinsight-domain-joined-configure.md).</span><span class="sxs-lookup"><span data-stu-id="b0325-161">tooconfigure a domain-joined HDInsight cluster, see [Configure domain-joined HDInsight clusters](hdinsight-domain-joined-configure.md).</span></span>
* <span data-ttu-id="b0325-162">toomanage tartományhoz a HDInsight-fürtök, lásd: [tartományhoz HDInsight-fürtök kezelése](hdinsight-domain-joined-manage.md).</span><span class="sxs-lookup"><span data-stu-id="b0325-162">toomanage domain-joined HDInsight clusters, see [Manage domain-joined HDInsight clusters](hdinsight-domain-joined-manage.md).</span></span>
* <span data-ttu-id="b0325-163">tooconfigure Hive házirendek és a Hive-lekérdezések futtatása [házirendek konfigurálása Hive HDInsight-fürtök tartományhoz](hdinsight-domain-joined-run-hive.md).</span><span class="sxs-lookup"><span data-stu-id="b0325-163">tooconfigure Hive policies and run Hive queries, see [Configure Hive policies for domain-joined HDInsight clusters](hdinsight-domain-joined-run-hive.md).</span></span>
* <span data-ttu-id="b0325-164">Hive-lekérdezések toorun SSH segítségével tartományhoz HDInsight-fürtök, lásd: [az SSH a Hdinsighttal](hdinsight-hadoop-linux-use-ssh-unix.md).</span><span class="sxs-lookup"><span data-stu-id="b0325-164">toorun Hive queries by using SSH on domain-joined HDInsight clusters, see [Use SSH with HDInsight](hdinsight-hadoop-linux-use-ssh-unix.md).</span></span>
