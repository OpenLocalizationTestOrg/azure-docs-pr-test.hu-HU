---
title: "Az Azure Search teljesítmény- és optimalizálási szempontok |} Microsoft Docs"
description: "Azure Search teljesítmény hangolására és optimális méretezési konfigurálása"
services: search
documentationcenter: 
author: LiamCavanagh
manager: pablocas
editor: 
ms.assetid: 4d3cd864-29d2-4921-be0d-a3f1a819de46
ms.service: search
ms.devlang: rest-api
ms.workload: search
ms.topic: article
ms.tgt_pltfrm: na
ms.date: 05/01/2017
ms.author: liamca
ms.openlocfilehash: f4e371fc16bc57e6963f1ec51c0ea864fa568f0c
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 07/11/2017
---
# <a name="azure-search-performance-and-optimization-considerations"></a><span data-ttu-id="80b66-103">Az Azure Search teljesítmény- és optimalizálási kapcsolatos szempontok</span><span class="sxs-lookup"><span data-stu-id="80b66-103">Azure Search performance and optimization considerations</span></span>
<span data-ttu-id="80b66-104">Egy remek keresési élményt biztosít az a kulcs sikeres sok Mobile és webes alkalmazásokhoz.</span><span class="sxs-lookup"><span data-stu-id="80b66-104">A great search experience is a key to success for many mobile and web applications.</span></span> <span data-ttu-id="80b66-105">Ingatlan, a car Piacterek online katalógusok használni gyors keresés és a vonatkozó eredményeket hatással lesz a felhasználói élmény.</span><span class="sxs-lookup"><span data-stu-id="80b66-105">From real estate, to used car marketplaces to online catalogs, fast search and relevant results will affect the customer experience.</span></span> <span data-ttu-id="80b66-106">Ez a dokumentum azt tapasztalja, ajánlott eljárások a legtöbbet hozhatja ki Azure Search, különösen ha speciális célú méretezhetőségi kifinomult követelményeit beszélő hogyan támogatja a súgót, vagy egyéni rangsorolási készült.</span><span class="sxs-lookup"><span data-stu-id="80b66-106">This document is intended to help you discover best practices for how to get the most out of Azure Search, especially for advanced scenarios with sophisticated requirements for scalability, multi-language support, or custom ranking.</span></span>  <span data-ttu-id="80b66-107">Emellett ez a dokumentum belső ismerteti, és ismerteti a különböző módszer valós felhasználói alkalmazásokban hatékonyan működjön.</span><span class="sxs-lookup"><span data-stu-id="80b66-107">In addition, this document outlines internals and covers approaches that work effectively in real-world customer apps.</span></span>

## <a name="performance-and-scale-tuning-for-search-services"></a><span data-ttu-id="80b66-108">Teljesítmény és méretezés hangolása keresési szolgáltatások</span><span class="sxs-lookup"><span data-stu-id="80b66-108">Performance and scale tuning for Search services</span></span>
<span data-ttu-id="80b66-109">Azt minden segítségével keresőprogramok például a Bing és Google és a nagy teljesítményt biztosítanak.</span><span class="sxs-lookup"><span data-stu-id="80b66-109">We are all used to search engines such as Bing and Google and the high performance they offer.</span></span>  <span data-ttu-id="80b66-110">Ennek eredményeképpen, amikor az ügyfelek használja a keresés-t vagy a mobilalkalmazás, azok fog várhatóan hasonló teljesítményt nyújt.</span><span class="sxs-lookup"><span data-stu-id="80b66-110">As a result, when customers use your search-enabled web or mobile application, they will expect similar performance characteristics.</span></span>  <span data-ttu-id="80b66-111">A keresési teljesítmény optimalizálása, amikor a legjobb módszer egyik késés, amely a lekérdezés idejét befejeződését, majd adja vissza az eredményeket összpontosítanak.</span><span class="sxs-lookup"><span data-stu-id="80b66-111">When optimizing for search performance, one of the best approaches is to focus on latency, which is the time a query takes to complete and return results.</span></span>  <span data-ttu-id="80b66-112">Optimalizálja a keresési késés esetén fontos, hogy:</span><span class="sxs-lookup"><span data-stu-id="80b66-112">When optimizing for search latency it is important to:</span></span>

1. <span data-ttu-id="80b66-113">Egy tipikus keresési kérő célként megadott várakozási ideje (vagy maximális időtartama) gyorsabban befejezéséhez mentse.</span><span class="sxs-lookup"><span data-stu-id="80b66-113">Pick a target latency (or maximum amount of time) that a typical search request should take to complete.</span></span>
2. <span data-ttu-id="80b66-114">Hozzon létre, és a keresési szolgáltatás várakozási ideje sebesség mérésére reális adatkészletben szemben a valódi munkaterhelés teszteléséhez.</span><span class="sxs-lookup"><span data-stu-id="80b66-114">Create and test a real workload against your search service with a realistic dataset to measure these latency rates.</span></span>
3. <span data-ttu-id="80b66-115">Kevés lekérdezések / másodperc (QPS) kezdődnie, és továbbra is a teszt végrehajtása, csak a meghatározott cél várakozási alá csökken a lekérdezés-késleltetés számának növeléséhez.</span><span class="sxs-lookup"><span data-stu-id="80b66-115">Start with a low number of queries per second (QPS) and continue to increase the number executed in the test until the query latency drops below the defined target latency.</span></span>  <span data-ttu-id="80b66-116">Ez az egy fontos teljesítményteszt használata során az alkalmazás növekedésével a lépték tervezéséhez nyújtanak segítséget.</span><span class="sxs-lookup"><span data-stu-id="80b66-116">This is an important benchmark to help you plan for scale as your application grows in usage.</span></span>
4. <span data-ttu-id="80b66-117">Ahol lehetséges, felhasználhatja a HTTP-kapcsolatoknál.</span><span class="sxs-lookup"><span data-stu-id="80b66-117">Wherever possible, reuse HTTP connections.</span></span>  <span data-ttu-id="80b66-118">Ha az Azure Search .NET SDK-t használ, ez azt jelenti, hogy szabad újra egy példányát, vagy [SearchIndexClient](https://docs.microsoft.com/dotnet/api/microsoft.azure.search.searchindexclient) példányt, és a REST API-t használ, ha egyetlen HttpClient szabad újra.</span><span class="sxs-lookup"><span data-stu-id="80b66-118">If you are using the Azure Search .NET SDK, this means you should reuse an instance or [SearchIndexClient](https://docs.microsoft.com/dotnet/api/microsoft.azure.search.searchindexclient) instance, and if you are using the REST API, you should reuse a single HttpClient.</span></span>

<span data-ttu-id="80b66-119">Ezek létrehozása során a munkaterhelések tesztelése, van néhány szem előtt tartani az Azure Search jellemzői:</span><span class="sxs-lookup"><span data-stu-id="80b66-119">While creating these test workloads, there are some characteristics of Azure Search to keep in mind:</span></span>

1. <span data-ttu-id="80b66-120">Lehetőség leküldéses, lekérdezi egy időben sok keresési, hogy az Azure Search szolgáltatás elérhető erőforrások túl sok a rendszer.</span><span class="sxs-lookup"><span data-stu-id="80b66-120">It is possible to push so many search queries at one time, that the resources available in your Azure Search service will be overwhelmed.</span></span>  <span data-ttu-id="80b66-121">Ha ez történik, megjelenik a HTTP 503-as válaszkódot.</span><span class="sxs-lookup"><span data-stu-id="80b66-121">When this happens, you will see HTTP 503 response codes.</span></span>  <span data-ttu-id="80b66-122">Emiatt tanácsos a search kérelemmel késés díjszabás különbségeit megjelenítéséhez, amikor további keresési kérelmeket különböző tartományait elindítása.</span><span class="sxs-lookup"><span data-stu-id="80b66-122">For this reason, it is best to start with various ranges of search requests to see the differences in latency rates as you add more search requests.</span></span>
2. <span data-ttu-id="80b66-123">Az Azure Search tartalom feltöltését átfogó teljesítményét és az Azure Search szolgáltatás várakozási ideje hatással van.</span><span class="sxs-lookup"><span data-stu-id="80b66-123">Uploading of content to Azure Search will impact the overall performance and latency of the Azure Search service.</span></span>  <span data-ttu-id="80b66-124">Ha várhatóan küldhet adatokat, amíg a felhasználók keresést hajt végre, fontos a tesztek munkaterhelés figyelembe venni.</span><span class="sxs-lookup"><span data-stu-id="80b66-124">If you expect to send data while users are performing searches, it is important to take this workload into account in your tests.</span></span>
3. <span data-ttu-id="80b66-125">Nem minden keresési lekérdezés teljesítmény mértékben hajt végre.</span><span class="sxs-lookup"><span data-stu-id="80b66-125">Not every search query will perform at the same performance levels.</span></span>  <span data-ttu-id="80b66-126">Például egy dokumentum keresési vagy keresési javaslat általában végrehajtják gyorsabb, mint az értékkorlátozás és a szűrők jelentős számú lekérdezés.</span><span class="sxs-lookup"><span data-stu-id="80b66-126">For example, a document lookup or search suggestion will typically perform faster than a query with a significant number of facets and filters.</span></span>  <span data-ttu-id="80b66-127">Érdemes a különböző lekérdezések a várt figyelembe a tesztek fejlesztéskor igénybe vehet.</span><span class="sxs-lookup"><span data-stu-id="80b66-127">It is best to take the various queries you expect to see into account when building your tests.</span></span>  
4. <span data-ttu-id="80b66-128">A search kérelemmel mértékben eltérő változata fontos, mert ugyanaz a search kérelemmel folyamatosan hajtható végre, ha az adatok gyorsítótárazása megkezdik teljesítmény hely nagyobb, mint előfordulhat, hogy több különböző lekérdezéssel állítva, akkor győződjön.</span><span class="sxs-lookup"><span data-stu-id="80b66-128">Variation of search requests is important because if you continually execute the same search requests, caching of data will start to make performance look better than it might with a more disparate query set.</span></span>

> [!NOTE]
> <span data-ttu-id="80b66-129">[A Visual Studio terhelés tesztelés](https://www.visualstudio.com/docs/test/performance-testing/run-performance-tests-app-before-release) valóban módon hajtsa végre a javasolt teszteli, mert a HTTP-kérések végrehajtásához esetén egyébként használnia az Azure Search lekérdezések végrehajtása, és lehetővé teszi a kérelmek párhuzamos folyamatkezelést biztosítja.</span><span class="sxs-lookup"><span data-stu-id="80b66-129">[Visual Studio Load Testing](https://www.visualstudio.com/docs/test/performance-testing/run-performance-tests-app-before-release) is a really good way to perform your benchmark tests as it allows you to execute HTTP requests as you would need for executing queries against Azure Search and enables parallelization of requests.</span></span>
> 
> 

## <a name="scaling-azure-search-for-high-query-rates-and-throttled-requests"></a><span data-ttu-id="80b66-130">Azure Search szolgáltatást a lekérdezési díjszabás méretezés és szabályozva kérelmek</span><span class="sxs-lookup"><span data-stu-id="80b66-130">Scaling Azure Search for high query rates and throttled requests</span></span>
<span data-ttu-id="80b66-131">Túl sok szabályozottan halmozott kérelmet kap, illetve haladhatja meg a célként megadott várakozási ideje díjszabás egy nagyobb lekérdezés terhelését a meggyőződhet, csökkenti a késést sebességét az alábbi két módszer egyikével:</span><span class="sxs-lookup"><span data-stu-id="80b66-131">When you are receiving too many throttled requests or exceed your target latency rates from an increased query load, you can look to decrease latency rates in one of two ways:</span></span>

1. <span data-ttu-id="80b66-132">**Növelje a replikák:** replika olyan, mint az Azure Search kérések történő terheléselosztásához a több példány szemben így adatok másolatát.</span><span class="sxs-lookup"><span data-stu-id="80b66-132">**Increase Replicas:**  A replica is like a copy of your data allowing Azure Search to load balance requests against the multiple copies.</span></span>  <span data-ttu-id="80b66-133">Összes az terheléselosztás és a replikák között adatainak replikálása az Azure Search kezeli, és módosíthatja a szolgáltatás bármikor lefoglalt replikák száma.</span><span class="sxs-lookup"><span data-stu-id="80b66-133">All load balancing and replication of data across replicas is managed by Azure Search and you can alter the number of replicas allocated for your service at any time.</span></span>  <span data-ttu-id="80b66-134">Legfeljebb 12 replikák Standard keresési szolgáltatást, és egy egyszerű keresés szolgáltatásban 3 replikák foglalhatja.</span><span class="sxs-lookup"><span data-stu-id="80b66-134">You can allocate up to 12 replicas in a Standard search service and 3 replicas in a Basic search service.</span></span> <span data-ttu-id="80b66-135">Replikák lehet beállítani származhatnak a [Azure-portálon](search-create-service-portal.md) vagy [PowerShell](search-manage-powershell.md).</span><span class="sxs-lookup"><span data-stu-id="80b66-135">Replicas can be adjusted either from the [Azure portal](search-create-service-portal.md) or [PowerShell](search-manage-powershell.md).</span></span>
2. <span data-ttu-id="80b66-136">**Növelje keresési réteg:** az Azure Search érkezik egy [a rétegek száma](https://azure.microsoft.com/pricing/details/search/) , valamint ezek a rétegek egyes különböző teljesítményszintet.</span><span class="sxs-lookup"><span data-stu-id="80b66-136">**Increase Search Tier:**  Azure Search comes in a [number of tiers](https://azure.microsoft.com/pricing/details/search/) and each of these tiers offers different levels of performance.</span></span>  <span data-ttu-id="80b66-137">Bizonyos esetekben előfordulhat, hogy a réteg nem adhatók meg elég alacsony késési igényű díjszabás, akkor is, ha a replikákat a rendszer kimenő kihasználtságában sok lekérdezések.</span><span class="sxs-lookup"><span data-stu-id="80b66-137">In some cases, you may have so many queries that the tier you are on cannot provide sufficiently low latency rates, even when replicas are maxed out.</span></span>  <span data-ttu-id="80b66-138">Ebben az esetben érdemes figyelembe venni, ami a magasabb keresési rétegek, például az Azure Search S3 réteghez, amelynek kiválóan alkalmas a dokumentumok és a rendkívül nagy lekérdezés munkaterhelés nagy számú forgatókönyvek közül.</span><span class="sxs-lookup"><span data-stu-id="80b66-138">In this case, you may want to consider leveraging one of the higher search tiers such as the Azure Search S3 tier that is well suited for scenarios with large numbers of documents and extremely high query workloads.</span></span>

## <a name="scaling-azure-search-for-slow-individual-queries"></a><span data-ttu-id="80b66-139">Azure Search lassú egyes lekérdezések skálázás</span><span class="sxs-lookup"><span data-stu-id="80b66-139">Scaling Azure Search for slow individual queries</span></span>
<span data-ttu-id="80b66-140">Miért késés díjszabás lassú lehet akkor egy egyetlen lekérdezés túl sokáig tart.</span><span class="sxs-lookup"><span data-stu-id="80b66-140">Another reason why latency rates can be slow is from a single query taking too long to complete.</span></span>  <span data-ttu-id="80b66-141">Ebben az esetben replikák hozzáadása nem növeli a késés sebességét.</span><span class="sxs-lookup"><span data-stu-id="80b66-141">In this case, adding replicas will not improve latency rates.</span></span>  <span data-ttu-id="80b66-142">Ebben az esetben két módon érhető el:</span><span class="sxs-lookup"><span data-stu-id="80b66-142">For this case there are two options available:</span></span>

1. <span data-ttu-id="80b66-143">**Növelje a partíciók** partíció egy olyan mechanizmus az adatok között további erőforrásokat a felosztás.</span><span class="sxs-lookup"><span data-stu-id="80b66-143">**Increase Partitions** A partition is a mechanism for splitting your data across extra resources.</span></span>  <span data-ttu-id="80b66-144">Emiatt egy második partíció hozzáadásakor az adatok beolvasása felosztása két.</span><span class="sxs-lookup"><span data-stu-id="80b66-144">For this reason, when you add a second partition, your data gets split into two.</span></span>  <span data-ttu-id="80b66-145">Egy harmadik partíciót az index felosztja a három stb.  Ennek is hatása az, hogy bizonyos esetekben lassú lekérdezések gyorsabban fog miatt számítás a párhuzamos folyamatkezelést biztosítja.</span><span class="sxs-lookup"><span data-stu-id="80b66-145">A third partition splits your index into three, etc.  This also has the effect that in some cases, slow queries will perform faster due to the parallelization of computation.</span></span>  <span data-ttu-id="80b66-146">Van néhány példa ahol úgy találtuk, ez működnek jól rendkívül alacsony szelektivitás lekérdezések tartalmazó lekérdezések párhuzamos folyamatkezelést biztosítja.</span><span class="sxs-lookup"><span data-stu-id="80b66-146">There are a few examples of where we have seen this parallelization work extremely well with queries that have low selectivity queries.</span></span>  <span data-ttu-id="80b66-147">Ez sok dokumentum megfelelő, vagy ha értékkorlátozás kell megadni. érintett keresztül nagyszámú dokumentumok lekérdezések áll.</span><span class="sxs-lookup"><span data-stu-id="80b66-147">This consists of queries that match many documents or when faceting needs to provide counts over large numbers of documents.</span></span>  <span data-ttu-id="80b66-148">Mivel nincs szükség a dokumentumok alkalmazhatóságát pontozása céljából, és a számok dokumentumok száma számítási számos, további partíciók hozzáadása segítséget nyújtanak további számítási.</span><span class="sxs-lookup"><span data-stu-id="80b66-148">Since there is a lot of computation needed to score the relevancy of the documents or to count the numbers of documents, adding extra partitions can help to provide additional computation.</span></span>  
   
   <span data-ttu-id="80b66-149">Legfeljebb 12 Standard keresési szolgáltatást a partíciók száma és az egyszerű keresés szolgáltatásban 1 partíció lehet.</span><span class="sxs-lookup"><span data-stu-id="80b66-149">There can be a maximum of 12 partitions in Standard search service and 1 partition in the basic search service.</span></span>  <span data-ttu-id="80b66-150">Partíciók lehet beállítani származhatnak a [Azure-portálon](search-create-service-portal.md) vagy [PowerShell](search-manage-powershell.md).</span><span class="sxs-lookup"><span data-stu-id="80b66-150">Partitions can be adjusted either from the [Azure portal](search-create-service-portal.md) or [PowerShell](search-manage-powershell.md).</span></span>
2. <span data-ttu-id="80b66-151">**Korlát nagy számosságot mezők:** egy kategorizálható vagy a szűrhető mezője, amely jelentős mennyiségű egyedi értékkel rendelkezik, és emiatt tart, az erőforrásokat a számítási eredmények keresztül sok nagy számosságot mezőt tartalmaz.</span><span class="sxs-lookup"><span data-stu-id="80b66-151">**Limit High Cardinality Fields:** A high cardinality field consists of a facetable or filterable field that has a significant number of unique values, and as a result, takes a lot of resources to compute results over.</span></span>   <span data-ttu-id="80b66-152">Például termék azonosító vagy leírás mező beállítása kategorizálható szűrhető tenné a nagy számosságot mert dokumentumhoz dokumentum értékei a legtöbb egyedi.</span><span class="sxs-lookup"><span data-stu-id="80b66-152">For example, setting a Product ID or Description field as facetable/filterable would make for high cardinality because most of the values from document to document are unique.</span></span> <span data-ttu-id="80b66-153">Ahol lehetséges, nagy számosságot mezők számának korlátozása.</span><span class="sxs-lookup"><span data-stu-id="80b66-153">Wherever possible, limit the number of high cardinality fields.</span></span>
3. <span data-ttu-id="80b66-154">**Növelje keresési réteg:** áthelyezése legfeljebb egy magasabb szintű Azure Search használható lehet egy másik lassú lekérdezések teljesítményének javítása érdekében.</span><span class="sxs-lookup"><span data-stu-id="80b66-154">**Increase Search Tier:**  Moving up to a higher Azure Search tier can be another way to improve performance of slow queries.</span></span>  <span data-ttu-id="80b66-155">Minden magasabb réteg emellett gyorsabb CPU, illetve több memóriával, amely pozitív hatással lehet a lekérdezések teljesítményét.</span><span class="sxs-lookup"><span data-stu-id="80b66-155">Each higher tier also provides faster CPU’s and more memory which can have a positive impact on query performance.</span></span>

## <a name="scaling-for-availability"></a><span data-ttu-id="80b66-156">Rendelkezésre állási csoportok skálázási módjának</span><span class="sxs-lookup"><span data-stu-id="80b66-156">Scaling for availability</span></span>
<span data-ttu-id="80b66-157">Replikák nem csak lekérdezés késés csökkentése érdekében, de lehetővé teszi a magas rendelkezésre állásra.</span><span class="sxs-lookup"><span data-stu-id="80b66-157">Replicas not only help reduce query latency but can also allow for high availability.</span></span>  <span data-ttu-id="80b66-158">Az egy replikához számíthat rendszeres leállás miatt a kiszolgáló újraindítása után a szoftverfrissítések vagy egyéb karbantartási események esedékes.</span><span class="sxs-lookup"><span data-stu-id="80b66-158">With a single replica, you should expect periodic downtime due to server reboots after software updates or for other maintenance events that will occur.</span></span>  <span data-ttu-id="80b66-159">Emiatt fontos figyelembe venni, ha az alkalmazás által magas rendelkezésre állású keresések (lekérdezések), továbbá az írási műveletek (indexelési események).</span><span class="sxs-lookup"><span data-stu-id="80b66-159">As a result, it is important to consider if your application requires high availability of searches (queries) as well as writes (indexing events).</span></span>  <span data-ttu-id="80b66-160">Az Azure Search szolgáltatásiszint-szerződés beállítások a következő attribútumokkal fizetett keresési ajánlatok kínálja:</span><span class="sxs-lookup"><span data-stu-id="80b66-160">Azure Search offers SLA options on all the paid search offerings with the following attributes:</span></span>

* <span data-ttu-id="80b66-161">a csak olvasható munkaterhelések (lekérdezések) magas rendelkezésre állás 2-replikával</span><span class="sxs-lookup"><span data-stu-id="80b66-161">2 replicas for high availability of read-only workloads (queries)</span></span>
* <span data-ttu-id="80b66-162">a magas rendelkezésre állás írható-olvasható munkaterhelések (lekérdezések és az indexelés) 3 vagy több replikák</span><span class="sxs-lookup"><span data-stu-id="80b66-162">3 or more replicas for high availability of read-write workloads (queries and indexing)</span></span>

<span data-ttu-id="80b66-163">A további részletekért tekintse meg a [Azure Search szolgáltatásiszint-megállapodás](https://azure.microsoft.com/support/legal/sla/search/v1_0/).</span><span class="sxs-lookup"><span data-stu-id="80b66-163">For more details on this, please visit the [Azure Search Service Level Agreement](https://azure.microsoft.com/support/legal/sla/search/v1_0/).</span></span>

<span data-ttu-id="80b66-164">Mivel a replikákat az adatok másolatát, több replika segítségével Azure Search újraindítások és karbantartási egy másodpéldány elleni számítógépre, miközben lehetővé teszi lekérdezések továbbra is hajtható végre, szemben a többi replikához egyszerre.</span><span class="sxs-lookup"><span data-stu-id="80b66-164">Since replicas are copies of your data, having multiple replicas allows Azure Search to do machine reboots and maintenance against one replica at a time while allowing queries to continue to be executed against the other replicas.</span></span>  <span data-ttu-id="80b66-165">Ezért is szüksége lesz kell figyelembe venni, hogyan üzemszünet hatással lehet, hogy most már rendelkezik az adatok egy kisebb példányán végrehajtandó lekérdezéseket.</span><span class="sxs-lookup"><span data-stu-id="80b66-165">For that reason, you will also need to consider how this downtime may impact the queries that now have to be executed against one less copy of the data.</span></span>

## <a name="scaling-geo-distributed-workloads-and-provide-geo-redundancy"></a><span data-ttu-id="80b66-166">Földrajzilag elosztott munkaterhelések méretezés és földrajzi redundancia</span><span class="sxs-lookup"><span data-stu-id="80b66-166">Scaling geo-distributed workloads and provide geo-redundancy</span></span>
<span data-ttu-id="80b66-167">Földrajzilag elosztott munkaterheléseknél találja, hogy az adatközpont, amelyen az Azure Search szolgáltatás található távol lévő felhasználók rendelkeznek-e a késés nagyobb sebesség.</span><span class="sxs-lookup"><span data-stu-id="80b66-167">For geo-distributed workloads, you will find that users located far from the data center where your Azure Search service is hosted will have higher latency rates.</span></span>  <span data-ttu-id="80b66-168">Ezért fontos gyakran több keresési szolgáltatások rendelkeznie azokban a régiókban, amelyek ezekre a felhasználókra szorosabb közelében.</span><span class="sxs-lookup"><span data-stu-id="80b66-168">For this reason, it is often important to have multiple search services in regions that are in closer proximity to these users.</span></span>  <span data-ttu-id="80b66-169">Az Azure Search jelenleg nem biztosít egy földrajzi replikálása Azure Search-indexek automatikus módszerrel régiók között, de néhány technikák használható használhat, amelyek a folyamat egyszerű megvalósítása és kezelése.</span><span class="sxs-lookup"><span data-stu-id="80b66-169">Azure Search does not currently provide an automated method of geo-replicating Azure Search indexes across regions, but there are some techniques that can be used that can make this process simple to implement and manage.</span></span> <span data-ttu-id="80b66-170">Ezek a következő néhány szakaszokban lévő eljárásokat.</span><span class="sxs-lookup"><span data-stu-id="80b66-170">These are outlined in the next few sections.</span></span>

<span data-ttu-id="80b66-171">Keresési szolgáltatások egy földrajzilag elosztott csoportját célja, hogy rendelkezik elérhető két vagy több indexek két vagy több régiókban, ahol a felhasználó továbbítja az Azure Search szolgáltatás, amely a legkisebb mértékű késleltetést biztosítja az ebben a példában látható módon:</span><span class="sxs-lookup"><span data-stu-id="80b66-171">The goal of a geo-distributed set of search services is to have two or more indexes available in two or more regions where a user will be routed to the Azure Search service that provides the lowest latency as seen in this example:</span></span>

   ![Kereszt-régiói lapja][1]

### <a name="keeping-data-in-sync-across-multiple-azure-search-services"></a><span data-ttu-id="80b66-173">Adatok szinkronban tartása több Azure Search szolgáltatásban</span><span class="sxs-lookup"><span data-stu-id="80b66-173">Keeping data in sync across multiple Azure Search services</span></span>
<span data-ttu-id="80b66-174">Két lehetőség, hogy az elosztott keresési szolgáltatások szinkronban álló segítségével a [Azure Search-indexelőt](search-indexer-overview.md) vagy a leküldéses API (más néven a [Azure Search REST API](https://docs.microsoft.com/rest/api/searchservice/)).</span><span class="sxs-lookup"><span data-stu-id="80b66-174">There are two options for keeping your distributed search services in sync which consist of either using the [Azure Search Indexer](search-indexer-overview.md) or the Push API (also referred to as the [Azure Search REST API](https://docs.microsoft.com/rest/api/searchservice/)).</span></span>  

### <a name="azure-search-indexers"></a><span data-ttu-id="80b66-175">Az Azure Search indexelő</span><span class="sxs-lookup"><span data-stu-id="80b66-175">Azure Search Indexers</span></span>
<span data-ttu-id="80b66-176">Az Azure Search-indexelőt használ, ha már importálás adatváltozásokat például az Azure SQL Database vagy az Azure Cosmos DB központi adattárolót.</span><span class="sxs-lookup"><span data-stu-id="80b66-176">If you are using the Azure Search Indexer, you are already importing data changes from a central datastore such as Azure SQL DB or Azure Cosmos DB.</span></span> <span data-ttu-id="80b66-177">Amikor létrehoz egy új keresés szolgáltatás, akkor egyszerűen is létrehozhat egy új Azure Search-indexelőt, hogy a szolgáltatás, amely a ugyanazon adattár mutat.</span><span class="sxs-lookup"><span data-stu-id="80b66-177">When you create a new search Service, you simply also create a new Azure Search Indexer for that service that points to this same datastore.</span></span> <span data-ttu-id="80b66-178">Ha a módosításokat az adattárba lépnek akkor lesz majd indexelve által a különböző indexelők.</span><span class="sxs-lookup"><span data-stu-id="80b66-178">That way, whenever new changes come into the data store, they will then be indexed by the various Indexers.</span></span>  

<span data-ttu-id="80b66-179">Íme egy példa mi néz ki az architektúra.</span><span class="sxs-lookup"><span data-stu-id="80b66-179">Here is an example of what that architecture would look like.</span></span>

   ![Az elosztott indexelő és kombinációja egyetlen adatforrás][2]

### <a name="push-api"></a><span data-ttu-id="80b66-181">Leküldéses API</span><span class="sxs-lookup"><span data-stu-id="80b66-181">Push API</span></span>
<span data-ttu-id="80b66-182">Ha az Azure Search-leküldéses API használatával az [az Azure Search-index a tartalom frissítése](https://docs.microsoft.com/rest/api/searchservice/update-index), megtarthatja a különböző keresési szolgáltatások szinkronban módosítások összes keresőszolgáltatást küldésével, amikor szükség egy frissítésre.</span><span class="sxs-lookup"><span data-stu-id="80b66-182">If you are using the Azure Search Push API to [update content in your Azure Search index](https://docs.microsoft.com/rest/api/searchservice/update-index), you can keep your various search services in sync by pushing changes to all search services whenever an update is required.</span></span>  <span data-ttu-id="80b66-183">Ennek során fontos, ügyeljen arra, hogy az esetek, amelyekben egy keresési szolgáltatás frissítése sikertelen, és egy vagy több frissítés sikeres kezelésére.</span><span class="sxs-lookup"><span data-stu-id="80b66-183">When doing this it is important to make sure to handle cases where an update to one search service fails and one or more updates succeed.</span></span>

## <a name="leveraging-azure-traffic-manager"></a><span data-ttu-id="80b66-184">Az Azure Traffic Manager kihasználva</span><span class="sxs-lookup"><span data-stu-id="80b66-184">Leveraging Azure Traffic Manager</span></span>
<span data-ttu-id="80b66-185">[Az Azure Traffic Manager](../traffic-manager/traffic-manager-overview.md) lehetővé teszi a több földrajzi található webhelyeket, amelyeket majd üzemelnek több Azure Search szolgáltatás kérelmek.</span><span class="sxs-lookup"><span data-stu-id="80b66-185">[Azure Traffic Manager](../traffic-manager/traffic-manager-overview.md) allows you to route requests to multiple geo-located websites that are then backed by multiple Azure Search Services.</span></span>  <span data-ttu-id="80b66-186">Egy a Traffic Manager előnye, hogy azt is mintavételi Azure Search győződjön meg arról, hogy az elérhető, és átirányíthatja felhasználók alternatív keresési szolgáltatások leállás esetén.</span><span class="sxs-lookup"><span data-stu-id="80b66-186">One advantage of the Traffic Manager is that it can probe Azure Search to ensure that it is available and route users to alternate search services in the event of downtime.</span></span>  <span data-ttu-id="80b66-187">Ezenkívül ha a search kérelmek használatával az Azure webhelyek útválasztáson Azure Traffic Manager lehetővé teszi, hogy egyenleg esetben, ha a webhely mentése betöltésére, de nem az Azure Search.</span><span class="sxs-lookup"><span data-stu-id="80b66-187">In addition, if you are routing search requests through Azure Web Sites, Azure Traffic Manager allows you to load balance cases where the Website is up but not Azure Search.</span></span>  <span data-ttu-id="80b66-188">Íme egy példa, amely kihasználja a Traffic Manager milyen architektúrája.</span><span class="sxs-lookup"><span data-stu-id="80b66-188">Here is an example of what the architecture that leverages Traffic Manager.</span></span>

   ![Kereszt-lapján régiói, a központi Traffic Managerrel][3]

## <a name="monitoring-performance"></a><span data-ttu-id="80b66-190">A teljesítmény figyelése</span><span class="sxs-lookup"><span data-stu-id="80b66-190">Monitoring performance</span></span>
<span data-ttu-id="80b66-191">Az Azure Search segítségével elvégezheti a elemzése és a szolgáltatás teljesítményének figyeléséhez [keresési forgalom Analytics (STA)](search-traffic-analytics.md).</span><span class="sxs-lookup"><span data-stu-id="80b66-191">Azure Search offers the ability to analyze and monitor the performance of your service through [Search Traffic Analytics (STA)](search-traffic-analytics.md).</span></span> <span data-ttu-id="80b66-192">Keresztül STA opcionálisan jelentkezhet az egyes keresési műveleteket, valamint a összesített metrikák majd elemzés érdekében dolgoz fel vagy a Power BI ábrázolt Azure Storage-fiók.</span><span class="sxs-lookup"><span data-stu-id="80b66-192">Through STA, you can optionally log the individual search operations as well as aggregated metrics to an Azure Storage account that can then be processed for analysis or visualized in Power BI.</span></span>  <span data-ttu-id="80b66-193">STA metrikákat használ, például a lekérdezések vagy lekérdezési válaszidőt átlagos száma teljesítménystatisztikáit tekintheti meg.</span><span class="sxs-lookup"><span data-stu-id="80b66-193">Using STA metrics, you can review performance statistics such as average number of queries or query response times.</span></span>  <span data-ttu-id="80b66-194">Emellett a műveleti naplózás lehetővé teszi elemezze a megadott keresési műveletek részleteit.</span><span class="sxs-lookup"><span data-stu-id="80b66-194">In addition, the operation logging allows you to drill into details of specific search operations.</span></span>

<span data-ttu-id="80b66-195">STA megérteni, hogy az Azure Search szempontjából késés díjszabás hasznos eszköze.</span><span class="sxs-lookup"><span data-stu-id="80b66-195">STA is a valuable tool to understand latency rates from that Azure Search perspective.</span></span>  <span data-ttu-id="80b66-196">Mivel a lekérdezés Teljesítményelemzési értékek, a rendszer naplózza a lekérdezés idejét (az erre vonatkozó kérés érkezik történő elküldésekor az idő) az Azure Search teljes körűen feldolgozandó alapulnak, le is tudja ennek segítségével állapítsa meg, ha késési problémák vannak az Azure Search szolgáltatás ügyféloldali vagy elemek a szolgáltatás, például hálózati késés ide.</span><span class="sxs-lookup"><span data-stu-id="80b66-196">Since the query performance metrics logged are based on the time a query takes to be fully processed in Azure Search (from the time it is requested to when it is sent out), you are able to use this to determine if latency issues are from the Azure Search service side or outside of the service, such as from network latency.</span></span>  

## <a name="next-steps"></a><span data-ttu-id="80b66-197">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="80b66-197">Next steps</span></span>
<span data-ttu-id="80b66-198">További információt a árképzési szinteket, és a szolgáltatások korlátok mindegyik, lásd: [szolgáltatási korlátait, az Azure Search](search-limits-quotas-capacity.md).</span><span class="sxs-lookup"><span data-stu-id="80b66-198">To learn more about the pricing tiers and services limits for each one, see [Service limits in Azure Search](search-limits-quotas-capacity.md).</span></span>

<span data-ttu-id="80b66-199">Látogasson el [kapacitástervezés](search-capacity-planning.md) partícióazonosító és másodpéldány kombinációk tájékozódhat.</span><span class="sxs-lookup"><span data-stu-id="80b66-199">Visit [Capacity planning](search-capacity-planning.md) to learn more about partition and replica combinations.</span></span>

<span data-ttu-id="80b66-200">A(z) további a teljesítményre, és tekintse meg a cikkben szereplő optimalizálásokat megvalósításának néhány bemutatók tekintse meg a következő videót:</span><span class="sxs-lookup"><span data-stu-id="80b66-200">For more drilldown on performance and to see some demonstrations of how to implement the optimizations discussed in this article, watch the following video:</span></span>

> [!VIDEO https://channel9.msdn.com/Events/Microsoft-Azure/AzureCon-2015/ACON319/player]
> 
> 

<!--Image references-->
[1]: ./media/search-performance-optimization/geo-redundancy.png
[2]: ./media/search-performance-optimization/scale-indexers.png
[3]: ./media/search-performance-optimization/geo-search-traffic-mgr.png
