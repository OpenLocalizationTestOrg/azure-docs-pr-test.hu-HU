---
title: "Python machine learning parancsfájlok végrehajtása |} Microsoft Docs"
description: "Vázol fel tervezési alapelvek az alapul szolgáló Azure Machine Learning és alapvető használati forgatókönyvek, képességekre és korlátozásokra Python parancsfájlok támogatása."
keywords: "Python gépi tanulási, pandas, a python pandas, a python-parancsfájlok, python-parancsfájl végrehajtása"
services: machine-learning
documentationcenter: 
author: bradsev
manager: jhubbard
editor: cgronlun
ms.assetid: ee9eb764-0d3e-4104-a797-19fc29345d39
ms.service: machine-learning
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/26/2017
ms.author: bradsev
ms.openlocfilehash: e8d6377bc939e6711a96e521b5f574fc8d060929
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 08/03/2017
---
# <a name="execute-python-machine-learning-scripts-in-azure-machine-learning-studio"></a><span data-ttu-id="27f66-104">A Python Machine Learning parancsfájlok végrehajtása az Azure Machine Learning Studióban</span><span class="sxs-lookup"><span data-stu-id="27f66-104">Execute Python machine learning scripts in Azure Machine Learning Studio</span></span>

<span data-ttu-id="27f66-105">Ez a témakör ismerteti a tervezési alapelvek az alapul szolgáló Python-parancsfájl az Azure Machine Learning aktuális támogatása.</span><span class="sxs-lookup"><span data-stu-id="27f66-105">This topic describes the design principles underlying the current support for Python scripts in Azure Machine Learning.</span></span> <span data-ttu-id="27f66-106">A fő képesség azt is, beleértve:</span><span class="sxs-lookup"><span data-stu-id="27f66-106">The main capabilities provided are also outlined, including:</span></span>

- <span data-ttu-id="27f66-107">a végrehajtás alapvető használati forgatókönyvek</span><span class="sxs-lookup"><span data-stu-id="27f66-107">execute basic usage scenarios</span></span>
- <span data-ttu-id="27f66-108">a kísérlet pontozása egy webszolgáltatás</span><span class="sxs-lookup"><span data-stu-id="27f66-108">score an experiment in a web service</span></span>
- <span data-ttu-id="27f66-109">importálja a meglévő kód támogatása</span><span class="sxs-lookup"><span data-stu-id="27f66-109">support for importing existing code</span></span>
- <span data-ttu-id="27f66-110">képi megjelenítések exportálása</span><span class="sxs-lookup"><span data-stu-id="27f66-110">export visualizations</span></span>
- <span data-ttu-id="27f66-111">hajtsa végre a felügyelt szolgáltatás kiválasztása</span><span class="sxs-lookup"><span data-stu-id="27f66-111">perform supervised feature selection</span></span>
- <span data-ttu-id="27f66-112">bizonyos korlátozások megértése</span><span class="sxs-lookup"><span data-stu-id="27f66-112">understand some limitations</span></span>

<span data-ttu-id="27f66-113">[Python](https://www.python.org/) a sok adatszakértőkön eszköz mellkasát elengedhetetlen eszköz.</span><span class="sxs-lookup"><span data-stu-id="27f66-113">[Python](https://www.python.org/) is an indispensable tool in the tool chest of many data scientists.</span></span> <span data-ttu-id="27f66-114">Rendelkezik:</span><span class="sxs-lookup"><span data-stu-id="27f66-114">It has:</span></span>

* <span data-ttu-id="27f66-115">egy elegáns és tömör szintaxis</span><span class="sxs-lookup"><span data-stu-id="27f66-115">an elegant and concise syntax,</span></span> 
* <span data-ttu-id="27f66-116">többplatformos támogatást,</span><span class="sxs-lookup"><span data-stu-id="27f66-116">cross-platform support,</span></span> 
* <span data-ttu-id="27f66-117">hatékony szalagtárak hatalmas és</span><span class="sxs-lookup"><span data-stu-id="27f66-117">a vast collection of powerful libraries, and</span></span> 
* <span data-ttu-id="27f66-118">érett Fejlesztőeszközök.</span><span class="sxs-lookup"><span data-stu-id="27f66-118">mature development tools.</span></span> 

<span data-ttu-id="27f66-119">Python használatban van a machine learning modellezési jellemzően használt munkafolyamat minden egyes szakaszába:</span><span class="sxs-lookup"><span data-stu-id="27f66-119">Python is being used in all phases of a workflow typically used in machine learning modeling:</span></span>

- <span data-ttu-id="27f66-120">adatok betöltési és feldolgozása</span><span class="sxs-lookup"><span data-stu-id="27f66-120">data ingest and processing</span></span> 
- <span data-ttu-id="27f66-121">szolgáltatás létrehozása</span><span class="sxs-lookup"><span data-stu-id="27f66-121">feature construction</span></span>
- <span data-ttu-id="27f66-122">modell betanítási</span><span class="sxs-lookup"><span data-stu-id="27f66-122">model training</span></span> 
- <span data-ttu-id="27f66-123">Modellellenőrzés</span><span class="sxs-lookup"><span data-stu-id="27f66-123">model validation</span></span>
- <span data-ttu-id="27f66-124">központi telepítési modell</span><span class="sxs-lookup"><span data-stu-id="27f66-124">deployment of the models</span></span>

<span data-ttu-id="27f66-125">Azure Machine Learning Studio támogatja a beágyazási Python-parancsfájlok tanulási kísérlet és zökkenőmentesen is közzé őket a Microsoft Azure webszolgáltatásként gépek különböző részre.</span><span class="sxs-lookup"><span data-stu-id="27f66-125">Azure Machine Learning Studio supports embedding Python scripts into various parts of a machine learning experiment and also seamlessly publishing them as web services on Microsoft Azure.</span></span>

[!INCLUDE [machine-learning-free-trial](../../includes/machine-learning-free-trial.md)]


## <a name="design-principles-of-python-scripts-in-machine-learning"></a><span data-ttu-id="27f66-126">Python gépi tanulási parancsfájlok tervezési alapelvei</span><span class="sxs-lookup"><span data-stu-id="27f66-126">Design principles of Python scripts in Machine Learning</span></span>

<span data-ttu-id="27f66-127">Az elsődleges kapcsolódási felületet az Azure Machine Learning Studio Python keresztül van a [Python-parancsfájl végrehajtására] [ execute-python-script] modul 1. ábrán látható.</span><span class="sxs-lookup"><span data-stu-id="27f66-127">The primary interface to Python in Azure Machine Learning Studio is via the [Execute Python Script][execute-python-script] module shown in Figure 1.</span></span>

![image1](./media/machine-learning-execute-python-scripts/execute-machine-learning-python-scripts-module.png)

![image2](./media/machine-learning-execute-python-scripts/embedded-machine-learning-python-script.png)

<span data-ttu-id="27f66-130">1. ábra.</span><span class="sxs-lookup"><span data-stu-id="27f66-130">Figure 1.</span></span> <span data-ttu-id="27f66-131">A **Python-parancsfájl végrehajtására** modul.</span><span class="sxs-lookup"><span data-stu-id="27f66-131">The **Execute Python Script** module.</span></span>

<span data-ttu-id="27f66-132">A [Python-parancsfájl végrehajtására] [ execute-python-script] modul az Azure ML Studio legfeljebb három bemeneti adatokat fogad, és legfeljebb két kimenetek (a következő szakaszban tárgyalt), az R analóg például létrehozza a [R végrehajtása Parancsfájl] [ execute-r-script] modul.</span><span class="sxs-lookup"><span data-stu-id="27f66-132">The [Execute Python Script][execute-python-script] module in Azure ML Studio accepts up to three inputs and produces up to two outputs (discussed in the following section), like its R analogue, the [Execute R Script][execute-r-script] module.</span></span> <span data-ttu-id="27f66-133">A Python kódot hajthatnak végre is meg kell adni a paraméter mezőbe, kifejezetten nevű belépési pont hívott függvény `azureml_main`.</span><span class="sxs-lookup"><span data-stu-id="27f66-133">The Python code to be executed is entered into the parameter box as a specially named entry-point function called `azureml_main`.</span></span> <span data-ttu-id="27f66-134">Az alábbiakban a tervezési alapelvek, ez a modul végrehajtásához használja:</span><span class="sxs-lookup"><span data-stu-id="27f66-134">Here are the key design principles used to implement this module:</span></span>

1. <span data-ttu-id="27f66-135">*A Python felhasználók idiomatikus kell lennie.*</span><span class="sxs-lookup"><span data-stu-id="27f66-135">*Must be idiomatic for Python users.*</span></span> <span data-ttu-id="27f66-136">A Python-felhasználók kódjukat funkciók modulok belül, figyelembe.</span><span class="sxs-lookup"><span data-stu-id="27f66-136">Most Python users factor their code as functions inside modules.</span></span> <span data-ttu-id="27f66-137">Ezért helyezése egy legfelső szintű modul végrehajtható kimutatások számos olyan viszonylag ritkán fordul elő.</span><span class="sxs-lookup"><span data-stu-id="27f66-137">So putting a lot of executable statements in a top-level module is relatively rare.</span></span> <span data-ttu-id="27f66-138">A parancsfájl mezőben emiatt is egy speciális Python függvény figyelésekor utasításokat egy sorozatát vesz igénybe.</span><span class="sxs-lookup"><span data-stu-id="27f66-138">As a result, the script box also takes a specially named Python function as opposed to just a sequence of statements.</span></span> <span data-ttu-id="27f66-139">Az objektumok, a függvény felfedett például olyan szabványos Python könyvtár típusok [Pandas](http://pandas.pydata.org/) adatkeretek és [NumPy](http://www.numpy.org/) tömbök.</span><span class="sxs-lookup"><span data-stu-id="27f66-139">The objects exposed in the function are standard Python library types such as [Pandas](http://pandas.pydata.org/) data frames and [NumPy](http://www.numpy.org/) arrays.</span></span>
2. <span data-ttu-id="27f66-140">*Valósághű helyi között kell lennie, és a felhő végrehajtások.*</span><span class="sxs-lookup"><span data-stu-id="27f66-140">*Must have high-fidelity between local and cloud executions.*</span></span> <span data-ttu-id="27f66-141">A háttérkiszolgálón hajthatók végre a Python-kód alapján [Anaconda](https://store.continuum.io/cshop/anaconda/), a platformok közötti tudományos Python elosztási széles körben használt.</span><span class="sxs-lookup"><span data-stu-id="27f66-141">The backend used to execute the Python code is based on [Anaconda](https://store.continuum.io/cshop/anaconda/), a widely used cross-platform scientific Python distribution.</span></span> <span data-ttu-id="27f66-142">Közel 200 a leggyakrabban használt Python-csomagokat, a mellékelt azt.</span><span class="sxs-lookup"><span data-stu-id="27f66-142">It comes with close to 200 of the most common Python packages.</span></span> <span data-ttu-id="27f66-143">Ezért az adatelemzők debug és a helyi Azure Machine Learning-kompatibilis Anaconda-környezetre kódjukat minősítéséhez.</span><span class="sxs-lookup"><span data-stu-id="27f66-143">Therefore, data scientists can debug and qualify their code on their local Azure Machine Learning-compatible Anaconda environment.</span></span> <span data-ttu-id="27f66-144">Majd használjon például egy meglévő fejlesztőkörnyezet [IPython](http://ipython.org/) notebook vagy [a Python Tools for Visual Studio](http://aka.ms/ptvs), az Azure ML kísérlet részeként futtatható.</span><span class="sxs-lookup"><span data-stu-id="27f66-144">Then use an existing development environment, such as [IPython](http://ipython.org/) notebook or [Python Tools for Visual Studio](http://aka.ms/ptvs), to run it as part of an Azure ML experiment.</span></span> <span data-ttu-id="27f66-145">A `azureml_main` belépési pont, a Python eredeti függvény, ezért x hozhat létre az Azure ML-tartozó kódot és az SDK telepítése nélkül.</span><span class="sxs-lookup"><span data-stu-id="27f66-145">The `azureml_main` entry point is a vanilla Python function and so ****can be authored without Azure ML-specific code or the SDK installed.</span></span>
3. <span data-ttu-id="27f66-146">*A többi Azure Machine Learning modulok zökkenőmentesen összeállítható kell lennie.*</span><span class="sxs-lookup"><span data-stu-id="27f66-146">*Must be seamlessly composable with other Azure Machine Learning modules.*</span></span> <span data-ttu-id="27f66-147">A [Python-parancsfájl végrehajtására] [ execute-python-script] modul fogad el, bemenetekhez és kimenetekhez, szabványos Azure Machine Learning adatkészletek.</span><span class="sxs-lookup"><span data-stu-id="27f66-147">The [Execute Python Script][execute-python-script] module accepts, as inputs and outputs, standard Azure Machine Learning datasets.</span></span> <span data-ttu-id="27f66-148">Az alapul szolgáló keretrendszer átlátható és hatékonyan kulcsösszetevő az Azure ML és Python futtatókörnyezetek.</span><span class="sxs-lookup"><span data-stu-id="27f66-148">The underlying framework transparently and efficiently bridges the Azure ML and Python runtimes.</span></span> <span data-ttu-id="27f66-149">Ezért a Python meglévő Azure ML munkafolyamathoz, beleértve azokat is, hívja az R és SQLite együtt használható.</span><span class="sxs-lookup"><span data-stu-id="27f66-149">So Python can be used in conjunction with existing Azure ML workflows, including those that call into R and SQLite.</span></span> <span data-ttu-id="27f66-150">Eredményeként adatok tudósok munkafolyamatok állítható össze, amelyek:</span><span class="sxs-lookup"><span data-stu-id="27f66-150">A  result, data scientist could compose workflows that:</span></span>
   * <span data-ttu-id="27f66-151">Python és Pandas használja az adatok előzetes feldolgozás és tisztítás</span><span class="sxs-lookup"><span data-stu-id="27f66-151">use Python and Pandas for data pre-processing and cleaning</span></span>
   * <span data-ttu-id="27f66-152">az adatok hírcsatornát, hogy több adatkészletet csatlakoztatása a szolgáltatások SQL átalakítás</span><span class="sxs-lookup"><span data-stu-id="27f66-152">feed the data to a SQL transformation, joining multiple datasets to form features</span></span>
   * <span data-ttu-id="27f66-153">az algoritmusok használata az Azure Machine Learning modellek betanítása</span><span class="sxs-lookup"><span data-stu-id="27f66-153">train models using the algorithms in Azure Machine Learning</span></span> 
   * <span data-ttu-id="27f66-154">értékelje ki és utófeldolgozási az eredményeket R.</span><span class="sxs-lookup"><span data-stu-id="27f66-154">evaluate and post-process the results using R.</span></span>


## <a name="basic-usage-scenarios-in-ml-for-python-scripts"></a><span data-ttu-id="27f66-155">Python parancsfájlok ml alapvető használati forgatókönyvek</span><span class="sxs-lookup"><span data-stu-id="27f66-155">Basic usage scenarios in ML for Python scripts</span></span>

<span data-ttu-id="27f66-156">Ez a szakasz azt megtekintheti, néhány alapvető felhasználási területei a [Python-parancsfájl végrehajtására] [ execute-python-script] modul.</span><span class="sxs-lookup"><span data-stu-id="27f66-156">In this section, we survey some of the basic uses of the [Execute Python Script][execute-python-script] module.</span></span> <span data-ttu-id="27f66-157">A Python modul bemeneti mint Pandas adatkeretek érhetők el.</span><span class="sxs-lookup"><span data-stu-id="27f66-157">Inputs to the Python module are exposed as Pandas data frames.</span></span> <span data-ttu-id="27f66-158">A függvény kell visszaadnia egy Python belül csomagolt egyetlen Pandas adatok keret [feladatütemezési](https://docs.python.org/2/c-api/sequence.html) például egy rekord, lista vagy NumPy tömb.</span><span class="sxs-lookup"><span data-stu-id="27f66-158">The function must return a single Pandas data frame packaged inside of a Python [sequence](https://docs.python.org/2/c-api/sequence.html) such as a tuple, list, or NumPy array.</span></span> <span data-ttu-id="27f66-159">Az első elem az a sorozat majd eredmény abban az esetben a modul az első kimeneti portjára.</span><span class="sxs-lookup"><span data-stu-id="27f66-159">The first element of this sequence is then returned in the first output port of the module.</span></span> <span data-ttu-id="27f66-160">Ez a rendszer a 2. ábrán látható.</span><span class="sxs-lookup"><span data-stu-id="27f66-160">This scheme is shown in Figure 2.</span></span>

![image3](./media/machine-learning-execute-python-scripts/map-of-python-script-inputs-outputs.png)

<span data-ttu-id="27f66-162">2. ábra</span><span class="sxs-lookup"><span data-stu-id="27f66-162">Figure 2.</span></span> <span data-ttu-id="27f66-163">Leképezése bemeneti portok paramétereket és visszatérési érték a kimeneti portra.</span><span class="sxs-lookup"><span data-stu-id="27f66-163">Mapping of input ports to parameters and return value to output port.</span></span>

<span data-ttu-id="27f66-164">Részletesebb szemantikáját hogyan a bemeneti portok paramétereinek beolvasása leképezve a `azureml_main` függvény az 1 láthatók:</span><span class="sxs-lookup"><span data-stu-id="27f66-164">More detailed semantics of how the input ports get mapped to parameters of the `azureml_main` function are shown in Table 1:</span></span>

![image1T](./media/machine-learning-execute-python-scripts/python-script-inputs-mapped-to-parameters.png)

<span data-ttu-id="27f66-166">1. táblázat.</span><span class="sxs-lookup"><span data-stu-id="27f66-166">Table 1.</span></span> <span data-ttu-id="27f66-167">A bemeneti portok függvényparamétereket leképezését.</span><span class="sxs-lookup"><span data-stu-id="27f66-167">Mapping of input ports to function parameters.</span></span>

<span data-ttu-id="27f66-168">A bemeneti portok és függvényparamétereket között lesz pozicionális:</span><span class="sxs-lookup"><span data-stu-id="27f66-168">The mapping between input ports and function parameters is positional:</span></span>

- <span data-ttu-id="27f66-169">Az első csatlakoztatott bemeneti portját a függvény első paramétere van leképezve.</span><span class="sxs-lookup"><span data-stu-id="27f66-169">The first connected input port is mapped to the first parameter of the function.</span></span> 
- <span data-ttu-id="27f66-170">A második bemenet (Ha csatlakozott) függvény második paramétere van leképezve.</span><span class="sxs-lookup"><span data-stu-id="27f66-170">The second input (if connected) is mapped to the second parameter of the function.</span></span>

<span data-ttu-id="27f66-171">Lásd: *adatelemzéshez Python* (O'Reilly, 2012) további információt a Python Pandas és hogyan használható adatok módosítására, hatékonyabb és gazdaságosabb Nyugat McKinney által.</span><span class="sxs-lookup"><span data-stu-id="27f66-171">See *Python for Data Analysis* (O'Reilly, 2012) by W. McKinney for more information on Python Pandas and on how it can be used to manipulate data effectively and efficiently.</span></span> 


## <a name="translation-of-input-and-output-types"></a><span data-ttu-id="27f66-172">Bemeneti és kimeneti típusú fordítás</span><span class="sxs-lookup"><span data-stu-id="27f66-172">Translation of input and output types</span></span> 
<span data-ttu-id="27f66-173">Azure ml bemeneti adatkészletek adatkeretek a Pandas alakulnak.</span><span class="sxs-lookup"><span data-stu-id="27f66-173">Input datasets in Azure ML are converted to data frames in Pandas.</span></span> <span data-ttu-id="27f66-174">Kimeneti adatkeretek vissza Azure ML adatkészletek alakulnak.</span><span class="sxs-lookup"><span data-stu-id="27f66-174">Output data frames are converted back to Azure ML datasets.</span></span> <span data-ttu-id="27f66-175">A következő átalakítás esetén kell végrehajtani:</span><span class="sxs-lookup"><span data-stu-id="27f66-175">The following conversions are performed:</span></span>

1. <span data-ttu-id="27f66-176">Konvertálja a karakterláncot, és a numerikus oszlopok-van és dataset a hiányzó értékeket Pandas "NA" értékek alakulnak.</span><span class="sxs-lookup"><span data-stu-id="27f66-176">String and numeric columns are converted as-is and missing values in a dataset are converted to ‘NA’ values in Pandas.</span></span> <span data-ttu-id="27f66-177">Az azonos átalakítás történik, az vissza módja (Pandas NA értékek a hiányzó értékeket Azure ML alakulnak).</span><span class="sxs-lookup"><span data-stu-id="27f66-177">The same conversion happens on the way back (NA values in Pandas are converted to missing values in Azure ML).</span></span>
2. <span data-ttu-id="27f66-178">Index vektorok Pandas az Azure ml nem támogatottak.</span><span class="sxs-lookup"><span data-stu-id="27f66-178">Index vectors in Pandas are not supported in Azure ML.</span></span> <span data-ttu-id="27f66-179">A Python függvény összes bemeneti adatkeretek mindig tartozik egy 64 bites numerikus index 0 mínusz 1 sorok száma.</span><span class="sxs-lookup"><span data-stu-id="27f66-179">All input data frames in the Python function always have a 64-bit numerical index from 0 to the number of rows minus 1.</span></span> 
3. <span data-ttu-id="27f66-180">Az Azure ML adatkészletek nem lehet ismétlődő oszlopneveket tartalmaz, az oszlopnevek, amelyek nem karakterlánc.</span><span class="sxs-lookup"><span data-stu-id="27f66-180">Azure ML datasets cannot have duplicate column names and column names that are not strings.</span></span> <span data-ttu-id="27f66-181">Ha egy kimeneti adatok keret nem numerikus oszlopot tartalmaz, meghívja-e a keretrendszer `str` meg az oszlopok neveit.</span><span class="sxs-lookup"><span data-stu-id="27f66-181">If an output data frame contains non-numeric columns, the framework calls `str` on the column names.</span></span> <span data-ttu-id="27f66-182">Hasonlóképpen bármely ismétlődő oszlopnevek automatikusan összekeveredése biztosítását, hogy a nevek egyediek.</span><span class="sxs-lookup"><span data-stu-id="27f66-182">Likewise, any duplicate column names are automatically mangled to insure the names are unique.</span></span> <span data-ttu-id="27f66-183">A utótagot (2) a második duplikált, és így tovább ad hozzá az első ismétlődő, (3).</span><span class="sxs-lookup"><span data-stu-id="27f66-183">The suffix (2) is added to the first duplicate, (3) to the second duplicate, and so on.</span></span>


## <a name="operationalizing-python-scripts"></a><span data-ttu-id="27f66-184">Python parancsfájlok végrehajtott</span><span class="sxs-lookup"><span data-stu-id="27f66-184">Operationalizing Python scripts</span></span>

<span data-ttu-id="27f66-185">Bármely [Python-parancsfájl végrehajtására] [ execute-python-script] pontozási kísérletben használt modulok webszolgáltatásként közzétételekor nevezzük.</span><span class="sxs-lookup"><span data-stu-id="27f66-185">Any [Execute Python Script][execute-python-script] modules used in a scoring experiment are called when published as a web service.</span></span> <span data-ttu-id="27f66-186">Például a 3. ábrán látható egy pontozási kísérletet, amely tartalmaz egy Python-kifejezés kiértékelése a kódot.</span><span class="sxs-lookup"><span data-stu-id="27f66-186">For example, Figure 3 shows a scoring experiment that contains the code to evaluate a single Python expression.</span></span> 

![image4](./media/machine-learning-execute-python-scripts/figure3a.png)

![image5](./media/machine-learning-execute-python-scripts/python-script-with-python-pandas.png)

<span data-ttu-id="27f66-189">3. ábra.</span><span class="sxs-lookup"><span data-stu-id="27f66-189">Figure 3.</span></span> <span data-ttu-id="27f66-190">Webszolgáltatás egy Python-kifejezés kiértékelésekor.</span><span class="sxs-lookup"><span data-stu-id="27f66-190">Web service for evaluating a Python expression.</span></span>

<span data-ttu-id="27f66-191">Ez a kísérlet létrehozása webszolgáltatás:</span><span class="sxs-lookup"><span data-stu-id="27f66-191">A web service created from this experiment:</span></span>

- <span data-ttu-id="27f66-192">a Python kifejezés (karakterláncként) bemenetként vesz igénybe</span><span class="sxs-lookup"><span data-stu-id="27f66-192">takes as input a Python expression (as a string)</span></span>
- <span data-ttu-id="27f66-193">elküldi a Python értelmező</span><span class="sxs-lookup"><span data-stu-id="27f66-193">sends it to the Python interpreter</span></span> 
- <span data-ttu-id="27f66-194">egy kifejezés, mind az értékelés eredményét tartalmazó táblázatot ad vissza.</span><span class="sxs-lookup"><span data-stu-id="27f66-194">returns a table containing both the expression and the evaluated result.</span></span>


## <a name="importing-existing-python-script-modules"></a><span data-ttu-id="27f66-195">Meglévő Python-parancsfájl modulok importálása</span><span class="sxs-lookup"><span data-stu-id="27f66-195">Importing existing Python script modules</span></span>

<span data-ttu-id="27f66-196">Egy gyakori használati eset a sok adatszakértőkön hoz meglévő Python parancsfájlok beépítse Azure ML kísérletek.</span><span class="sxs-lookup"><span data-stu-id="27f66-196">A common use-case for many data scientists is to incorporate existing Python scripts into Azure ML experiments.</span></span> <span data-ttu-id="27f66-197">Ahelyett, hogy az összes kód összefűzendő és illeszthetők be egy parancsfájl mezőbe a [Python-parancsfájl végrehajtására] [ execute-python-script] modul elfogadja a harmadik bemeneti portját a Python-modulok tartalmazó zip-fájl.</span><span class="sxs-lookup"><span data-stu-id="27f66-197">Instead of requiring that all code be concatenated and pasted into a single script box, the [Execute Python Script][execute-python-script] module accepts a zip file that contains Python modules at the third input port.</span></span> <span data-ttu-id="27f66-198">A fájlt futásidőben a végrehajtási keretrendszer van unzipped, és a tartalom hozzáadódnak a Python értelmező könyvtár elérési útját.</span><span class="sxs-lookup"><span data-stu-id="27f66-198">The file is unzipped by the execution framework at runtime and the contents are added to the library path of the Python interpreter.</span></span> <span data-ttu-id="27f66-199">A `azureml_main` függvény importálhatja ezeket a modulokat közvetlenül a belépési pont.</span><span class="sxs-lookup"><span data-stu-id="27f66-199">The `azureml_main` entry point function can then import these modules directly.</span></span>

<span data-ttu-id="27f66-200">Tegyük fel fontolja meg a fájlt egy egyszerű "Hello, World" függvényt tartalmazó Hello.py.</span><span class="sxs-lookup"><span data-stu-id="27f66-200">As an example, consider the file Hello.py containing a simple “Hello, World” function.</span></span>

![image6](./media/machine-learning-execute-python-scripts/figure4.png)

<span data-ttu-id="27f66-202">4. ábra.</span><span class="sxs-lookup"><span data-stu-id="27f66-202">Figure 4.</span></span> <span data-ttu-id="27f66-203">Felhasználó által definiált függvény Hello.py fájlban.</span><span class="sxs-lookup"><span data-stu-id="27f66-203">User-defined function in Hello.py file.</span></span>

<span data-ttu-id="27f66-204">A következő létrehozhatunk Hello.zip Hello.py tartalmazó fájlt:</span><span class="sxs-lookup"><span data-stu-id="27f66-204">Next, we create a file Hello.zip that contains Hello.py:</span></span>

![image7](./media/machine-learning-execute-python-scripts/figure5.png)

<span data-ttu-id="27f66-206">5. ábra.</span><span class="sxs-lookup"><span data-stu-id="27f66-206">Figure 5.</span></span> <span data-ttu-id="27f66-207">Felhasználó által definiált Python kódot tartalmazó zip-fájl.</span><span class="sxs-lookup"><span data-stu-id="27f66-207">Zip file containing user-defined Python code.</span></span>

<span data-ttu-id="27f66-208">Töltse fel a zip-fájl adatkészletként Azure Machine Learning Studio.</span><span class="sxs-lookup"><span data-stu-id="27f66-208">Upload the zip file as a dataset into Azure Machine Learning Studio.</span></span> <span data-ttu-id="27f66-209">Ezután létrehozhat és, hogy a Python kódot használja a Hello.zip fájl által a harmadik bemeneti porthoz való csatlakoztatás a kísérlet futtatásához a **Python-parancsfájl végrehajtására** modul, az ábrán látható módon.</span><span class="sxs-lookup"><span data-stu-id="27f66-209">Then create and run an experiment that uses the Python code in the Hello.zip file by attaching it to the third input port of the **Execute Python Script** module, as shown in this figure.</span></span>

![image8](./media/machine-learning-execute-python-scripts/figure6a.png)

![image9](./media/machine-learning-execute-python-scripts/figure6b.png)

<span data-ttu-id="27f66-212">6. ábra.</span><span class="sxs-lookup"><span data-stu-id="27f66-212">Figure 6.</span></span> <span data-ttu-id="27f66-213">Felhasználó által definiált Python kóddal mintakísérletet feltöltött csomagot .zip fájlként.</span><span class="sxs-lookup"><span data-stu-id="27f66-213">Sample experiment with user-defined Python code uploaded as a zip file.</span></span>

<span data-ttu-id="27f66-214">A modul kimenete jeleníti meg, hogy a zip-fájl csomagolatlan megtörtént-e, és hogy a függvény `print_hello` futott.</span><span class="sxs-lookup"><span data-stu-id="27f66-214">The module output shows that the zip file has been unpackaged and that the function `print_hello` has been run.</span></span>
<span data-ttu-id="27f66-215"> 
![image10](./media/machine-learning-execute-python-scripts/figure7.png)</span><span class="sxs-lookup"><span data-stu-id="27f66-215"> 
![image10](./media/machine-learning-execute-python-scripts/figure7.png)</span></span>

<span data-ttu-id="27f66-216">7. ábra.</span><span class="sxs-lookup"><span data-stu-id="27f66-216">Figure 7.</span></span> <span data-ttu-id="27f66-217">Felhasználó által definiált függvény belül használja a [Python-parancsfájl végrehajtására] [ execute-python-script] modul.</span><span class="sxs-lookup"><span data-stu-id="27f66-217">User-defined function in use inside the [Execute Python Script][execute-python-script] module.</span></span>


## <a name="working-with-visualizations"></a><span data-ttu-id="27f66-218">Képi megjelenítés használata</span><span class="sxs-lookup"><span data-stu-id="27f66-218">Working with visualizations</span></span>

<span data-ttu-id="27f66-219">Felvétel létrehozott MatplotLib, amely képes formájában jelenik meg a böngésző által adhatók vissza a [Python-parancsfájl végrehajtására][execute-python-script].</span><span class="sxs-lookup"><span data-stu-id="27f66-219">Plots created using MatplotLib that can be visualized on the browser can be returned by the [Execute Python Script][execute-python-script].</span></span> <span data-ttu-id="27f66-220">De a felvétel a rendszer nem automatikusan átirányítja képek, R. használatakor Ezért a felhasználó explicit módon menteni kell bármely előkészítésére PNG-fájlok Ha vissza az Azure Machine Learning kell állítani.</span><span class="sxs-lookup"><span data-stu-id="27f66-220">But the plots are not automatically redirected to images as they are when using R. So the user must explicitly save any plots to PNG files if they are to be returned back to Azure Machine Learning.</span></span> 

<span data-ttu-id="27f66-221">Hozzon létre képeket MatplotLib, az alábbi eljárást kell végrehajtania:</span><span class="sxs-lookup"><span data-stu-id="27f66-221">To generate images from MatplotLib, you must complete the following procedure:</span></span>

* <span data-ttu-id="27f66-222">a háttérrendszer Váltás az alapértelmezett Qt-alapú leképező "AGG"</span><span class="sxs-lookup"><span data-stu-id="27f66-222">switch the backend to “AGG” from the default Qt-based renderer</span></span> 
* <span data-ttu-id="27f66-223">Hozzon létre egy új. ábra-objektumot</span><span class="sxs-lookup"><span data-stu-id="27f66-223">create a new figure object</span></span> 
* <span data-ttu-id="27f66-224">a tengely első és bele felvételt minden készítése</span><span class="sxs-lookup"><span data-stu-id="27f66-224">get the axis and generate all plots into it</span></span> 
* <span data-ttu-id="27f66-225">az ábra PNG fájlba mentése</span><span class="sxs-lookup"><span data-stu-id="27f66-225">save the figure to a PNG file</span></span> 

<span data-ttu-id="27f66-226">Ezt a folyamatot mutatja be az alábbi 8. ábra, amely Pandas található scatter_matrix funkcióval mátrix pont rajzot hoz létre.</span><span class="sxs-lookup"><span data-stu-id="27f66-226">This process is illustrated in the following Figure 8 that creates a scatter plot matrix using the scatter_matrix function in Pandas.</span></span>

![image1v](./media/machine-learning-execute-python-scripts/figure-v1-8.png)

<span data-ttu-id="27f66-228">8. ábra.</span><span class="sxs-lookup"><span data-stu-id="27f66-228">Figure 8.</span></span> <span data-ttu-id="27f66-229">Kód MatplotLib adatok mentése lemezképbe.</span><span class="sxs-lookup"><span data-stu-id="27f66-229">Code to save MatplotLib figures to images.</span></span>

<span data-ttu-id="27f66-230">9. ábra mutatja, amely a visszaadandó előzőleg bemutatott parancsfájlt használ a kísérlet tevékenységtérkép második kimenő porton keresztül.</span><span class="sxs-lookup"><span data-stu-id="27f66-230">Figure 9 shows an experiment that uses the script shown previously to return plots via the second output port.</span></span>

![image2v](./media/machine-learning-execute-python-scripts/figure-v2-9a.png) 

![image2v](./media/machine-learning-execute-python-scripts/figure-v2-9b.png) 

<span data-ttu-id="27f66-233">9. ábra.</span><span class="sxs-lookup"><span data-stu-id="27f66-233">Figure 9.</span></span> <span data-ttu-id="27f66-234">Python kódból generált előkészítésére megjelenítése.</span><span class="sxs-lookup"><span data-stu-id="27f66-234">Visualizing plots generated from Python code.</span></span>

<span data-ttu-id="27f66-235">Lehetőség több adatok vissza kijelzőként különböző képek, az Azure Machine Learning futásidejű szerzi be az összes képek és fűzi össze azokat a képi megjelenítéshez tartozó.</span><span class="sxs-lookup"><span data-stu-id="27f66-235">It is possible to return multiple figures by saving them into different images, the Azure Machine Learning runtime picks up all images and concatenates them for visualization.</span></span>


## <a name="advanced-examples"></a><span data-ttu-id="27f66-236">Speciális példák</span><span class="sxs-lookup"><span data-stu-id="27f66-236">Advanced examples</span></span>

<span data-ttu-id="27f66-237">Az Azure Machine Learning telepített Anaconda-környezete például NumPy SciPy vagy Scikits további közös csomagot tartalmaz.</span><span class="sxs-lookup"><span data-stu-id="27f66-237">The Anaconda environment installed in Azure Machine Learning contains common packages such as NumPy, SciPy, and Scikits-Learn.</span></span> <span data-ttu-id="27f66-238">Ezeket a csomagokat a machine learning-feldolgozási folyamat különböző adatfeldolgozási feladatok hatékony használható.</span><span class="sxs-lookup"><span data-stu-id="27f66-238">These packages can be effectively used for various data processing tasks in a machine learning pipeline.</span></span> <span data-ttu-id="27f66-239">Tegyük fel parancsfájl és a következő kísérlet használatát mutatják be a Scikits-Ismerkedjen meg az adatkészlet funkció fontos pontszámait számítási ensemble tanulókkal.</span><span class="sxs-lookup"><span data-stu-id="27f66-239">As an example, the following experiment and script illustrate the use of ensemble learners in Scikits-Learn to compute feature importance scores for a dataset.</span></span> <span data-ttu-id="27f66-240">Az eredmények felügyelt szolgáltatás kiválasztása előtt be egy másik ML-modell alatt táplált végrehajtásához használható.</span><span class="sxs-lookup"><span data-stu-id="27f66-240">The scores can be used to perform supervised feature selection before being fed into another ML model.</span></span>

<span data-ttu-id="27f66-241">A Python funkció a fontos pontokat és a szolgáltatások alapján a pontszámok kiszámítására használt itt található:</span><span class="sxs-lookup"><span data-stu-id="27f66-241">Here is the Python function used to compute the importance scores and order the features based on the scores:</span></span>

![image11](./media/machine-learning-execute-python-scripts/figure8.png)

<span data-ttu-id="27f66-243">10. ábra.</span><span class="sxs-lookup"><span data-stu-id="27f66-243">Figure 10.</span></span> <span data-ttu-id="27f66-244">Működik a sorrendet megadó szolgáltatások által pontszámait.</span><span class="sxs-lookup"><span data-stu-id="27f66-244">Function to rank features by scores.</span></span>
<span data-ttu-id="27f66-245"> A következő kísérlet majd kiszámítja, és az Azure Machine Learning "Pima indiai cukorbetegség" adatkészlet a szolgáltatások fontos eredményét adja vissza:</span><span class="sxs-lookup"><span data-stu-id="27f66-245">  The following experiment then computes and returns the importance scores of features in the “Pima Indian Diabetes” dataset in Azure Machine Learning:</span></span>

<span data-ttu-id="27f66-246">![image12](./media/machine-learning-execute-python-scripts/figure9a.png)
![image13](./media/machine-learning-execute-python-scripts/figure9b.png)</span><span class="sxs-lookup"><span data-stu-id="27f66-246">![image12](./media/machine-learning-execute-python-scripts/figure9a.png)
![image13](./media/machine-learning-execute-python-scripts/figure9b.png)</span></span>    

<span data-ttu-id="27f66-247">11. ábra.</span><span class="sxs-lookup"><span data-stu-id="27f66-247">Figure 11.</span></span> <span data-ttu-id="27f66-248">Pima indiai cukorbetegség adatkészlet rank szolgáltatásainak kipróbálásához.</span><span class="sxs-lookup"><span data-stu-id="27f66-248">Experiment to rank features in the Pima Indian Diabetes dataset.</span></span>

## <a name="limitations"></a><span data-ttu-id="27f66-249">Korlátozások</span><span class="sxs-lookup"><span data-stu-id="27f66-249">Limitations</span></span>
<span data-ttu-id="27f66-250">A [Python-parancsfájl végrehajtására] [ execute-python-script] van a következő korlátozások vonatkoznak:</span><span class="sxs-lookup"><span data-stu-id="27f66-250">The [Execute Python Script][execute-python-script] currently has the following limitations:</span></span>

1. <span data-ttu-id="27f66-251">*Elkülönített végrehajtása.*</span><span class="sxs-lookup"><span data-stu-id="27f66-251">*Sandboxed execution.*</span></span> <span data-ttu-id="27f66-252">A Python-futtatókörnyezet jelenleg védőfal mögött, és emiatt nem engedélyezi a hozzáférést a hálózati vagy a helyi fájlrendszer tartósan.</span><span class="sxs-lookup"><span data-stu-id="27f66-252">The Python runtime is currently sandboxed and, as a result, does not allow access to the network or to the local file system in a persistent manner.</span></span> <span data-ttu-id="27f66-253">Összes fájl mentése helyileg elkülönített és törölte a modul befejezését követően.</span><span class="sxs-lookup"><span data-stu-id="27f66-253">All files saved locally are isolated and deleted once the module finishes.</span></span> <span data-ttu-id="27f66-254">A Python-kód nem érhető el a számítógépen az fut, az aktuális könyvtárban és annak alkönyvtáraiban kivétel legtöbb könyvtárak.</span><span class="sxs-lookup"><span data-stu-id="27f66-254">The Python code cannot access most directories on the machine it runs on, the exception being the current directory and its subdirectories.</span></span>
2. <span data-ttu-id="27f66-255">*Kifinomult fejlesztési és a hibaelhárítási támogatás hiánya.*</span><span class="sxs-lookup"><span data-stu-id="27f66-255">*Lack of sophisticated development and debugging support.*</span></span> <span data-ttu-id="27f66-256">A Python modul jelenleg nem támogatja IDE-szolgáltatásokkal, például az intellisense és hibakeresés folyamatát.</span><span class="sxs-lookup"><span data-stu-id="27f66-256">The Python module currently does not support IDE features such as intellisense and debugging.</span></span> <span data-ttu-id="27f66-257">Is ha a modul futásidejű nem sikerül, a Python teljes Veremkivonat érhető el.</span><span class="sxs-lookup"><span data-stu-id="27f66-257">Also, if the module fails at runtime, the full Python stack trace is available.</span></span> <span data-ttu-id="27f66-258">De a modul a kimeneti naplóban lehet megtekinteni.</span><span class="sxs-lookup"><span data-stu-id="27f66-258">But it must be viewed in the output log for the module.</span></span> <span data-ttu-id="27f66-259">Jelenleg javasoljuk, hogy Ön által fejlesztett és egy környezetben, például IPython Python-parancsfájlok hibakeresése és a kód majd importálja a modult.</span><span class="sxs-lookup"><span data-stu-id="27f66-259">We currently recommend that you develop and debug Python scripts in an environment such as IPython and then import the code into the module.</span></span>
3. <span data-ttu-id="27f66-260">*Keret kimeneti egyetlen adatokat.*</span><span class="sxs-lookup"><span data-stu-id="27f66-260">*Single data frame output.*</span></span> <span data-ttu-id="27f66-261">A Python belépési pont csak engedélyezett egyetlen keret kimeneteként adja vissza.</span><span class="sxs-lookup"><span data-stu-id="27f66-261">The Python entry point is only permitted to return a single data frame as output.</span></span> <span data-ttu-id="27f66-262">Nincs jelenleg lehetőség tetszőleges Python objektumok például közvetlenül a betanított modellek térjen vissza az Azure Machine Learning futásidejű.</span><span class="sxs-lookup"><span data-stu-id="27f66-262">It is not currently possible to return arbitrary Python objects such as trained models directly back to the Azure Machine Learning runtime.</span></span> <span data-ttu-id="27f66-263">Például [R-parancsfájl végrehajtása][execute-r-script], amelynek van ugyanez a helyzet, sok esetben egy bájttömbben az objektumok körte és térjen vissza, amely adatok kereten belül lehet.</span><span class="sxs-lookup"><span data-stu-id="27f66-263">Like [Execute R Script][execute-r-script], which has the same limitation, it is possible in many cases to pickle objects into a byte array and then return that inside of a data frame.</span></span>
4. <span data-ttu-id="27f66-264">*Nem tudja telepíteni a Python telepítés testreszabása*.</span><span class="sxs-lookup"><span data-stu-id="27f66-264">*Inability to customize Python installation*.</span></span> <span data-ttu-id="27f66-265">Adja hozzá az egyéni Python-modulok csak úgy jelenleg a zip-fájl a korábban ismertetett mechanizmus révén.</span><span class="sxs-lookup"><span data-stu-id="27f66-265">Currently, the only way to add custom Python modules is via the zip file mechanism described earlier.</span></span> <span data-ttu-id="27f66-266">Ez nem valósítható meg, hogy kis modulok, akkor nagy modulok (különösen a natív DLL-ek) és a modulok nagy számú nehézkes.</span><span class="sxs-lookup"><span data-stu-id="27f66-266">While this is feasible for small modules, it is cumbersome for large modules (especially those with native DLLs) or a large number of modules.</span></span> 

## <a name="conclusions"></a><span data-ttu-id="27f66-267">Következtetéseket</span><span class="sxs-lookup"><span data-stu-id="27f66-267">Conclusions</span></span>
<span data-ttu-id="27f66-268">A [Python-parancsfájl végrehajtására] [ execute-python-script] modul lehetővé teszi, hogy egy meglévő Python kódját beépíteni az Azure Machine Learning és a felhőben üzemeltetett gépi tanulás munkafolyamatok zökkenőmentesen adatok tudósok azok a webes szolgáltatás részeként.</span><span class="sxs-lookup"><span data-stu-id="27f66-268">The [Execute Python Script][execute-python-script] module allows a data scientist to incorporate existing Python code into cloud-hosted machine learning workflows in Azure Machine Learning and to seamlessly operationalize them as part of a web service.</span></span> <span data-ttu-id="27f66-269">A Python-parancsfájl modul természetes együttműködik az Azure Machine Learning más modulok.</span><span class="sxs-lookup"><span data-stu-id="27f66-269">The Python script module interoperates naturally with other modules in Azure Machine Learning.</span></span> <span data-ttu-id="27f66-270">A modul az adatok feltárása feladatok előzetes feldolgozás és a szolgáltatás kivonása, és ezután értékelési számos és az eredmények utófeldolgozás használható.</span><span class="sxs-lookup"><span data-stu-id="27f66-270">The module can be used for a range of tasks from data exploration to pre-processing and feature extraction, and then to evaluation and post-processing of the results.</span></span> <span data-ttu-id="27f66-271">A háttérrendszer futásidejű végrehajtási használt Anaconda, tesztelt és széles körben használt Python elosztási alapul.</span><span class="sxs-lookup"><span data-stu-id="27f66-271">The backend runtime used for execution is based on Anaconda, a well-tested and widely used Python distribution.</span></span> <span data-ttu-id="27f66-272">A háttérrendszer egyszerűen meg a helyi meglévő kódot eszközökhöz kiterjeszti a felhőbe.</span><span class="sxs-lookup"><span data-stu-id="27f66-272">This backend makes it simple for you to on-board existing code assets into the cloud.</span></span>

<span data-ttu-id="27f66-273">Várhatóan új lehetőségeket biztosítanak a [Python-parancsfájl végrehajtására] [ execute-python-script] modul például betanítása, és azok modellek a Python, valamint nagyobb mértékű támogatást biztosítsanak a fejlesztési hozzáadása és az Azure Machine Learning Studióban kód hibakereséséhez.</span><span class="sxs-lookup"><span data-stu-id="27f66-273">We expect to provide additional functionality to the [Execute Python Script][execute-python-script] module such as the ability to train and operationalize models in Python and to add better support for the development and debugging code in Azure Machine Learning Studio.</span></span>

## <a name="next-steps"></a><span data-ttu-id="27f66-274">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="27f66-274">Next steps</span></span>
<span data-ttu-id="27f66-275">További információ: [Python fejlesztői központban](https://azure.microsoft.com/develop/python/).</span><span class="sxs-lookup"><span data-stu-id="27f66-275">For more information, see the [Python Developer Center](https://azure.microsoft.com/develop/python/).</span></span>

<!-- Module References -->
[execute-python-script]: https://msdn.microsoft.com/library/azure/cdb56f95-7f4c-404d-bde7-5bb972e6f232/
[execute-r-script]: https://msdn.microsoft.com/library/azure/30806023-392b-42e0-94d6-6b775a6e0fd5/
