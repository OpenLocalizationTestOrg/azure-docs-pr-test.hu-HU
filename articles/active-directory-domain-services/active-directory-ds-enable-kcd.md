---
title: "Az Azure Active Directory tartományi szolgáltatások: A kerberos által korlátozott delegálás engedélyezése |} Microsoft Docs"
description: "Kerberos által korlátozott delegálás a felügyelt tartományok Azure Active Directory tartományi szolgáltatások engedélyezése"
services: active-directory-ds
documentationcenter: 
author: mahesh-unnikrishnan
manager: stevenpo
editor: curtand
ms.assetid: 938a5fbc-2dd1-4759-bcce-628a6e19ab9d
ms.service: active-directory-ds
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 03/06/2017
ms.author: maheshu
ms.openlocfilehash: d32547c8018dd1f99c992e95a01d2711d460a261
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/06/2017
---
# <a name="configure-kerberos-constrained-delegation-kcd-on-a-managed-domain"></a><span data-ttu-id="ab598-103">Kerberos által korlátozott delegálás (KCD) konfigurálása a felügyelt tartományhoz</span><span class="sxs-lookup"><span data-stu-id="ab598-103">Configure kerberos constrained delegation (KCD) on a managed domain</span></span>
<span data-ttu-id="ab598-104">Számos alkalmazás tooaccess erőforrások hello hello felhasználó környezetében kell.</span><span class="sxs-lookup"><span data-stu-id="ab598-104">Many applications need tooaccess resources in hello context of hello user.</span></span> <span data-ttu-id="ab598-105">Az Active Directory támogatja-e a Kerberos-delegálás, amely lehetővé teszi a használati eset nevű.</span><span class="sxs-lookup"><span data-stu-id="ab598-105">Active Directory supports a mechanism called Kerberos delegation, which enables this use-case.</span></span> <span data-ttu-id="ab598-106">Emellett korlátozhatja delegálás úgy, hogy csak egy adott erőforráshoz elérhető hello hello felhasználó környezetében.</span><span class="sxs-lookup"><span data-stu-id="ab598-106">Further, you can restrict delegation so that only specific resources can be accessed in hello context of hello user.</span></span> <span data-ttu-id="ab598-107">Az Azure AD tartományi szolgáltatások felügyelt tartományok különböznek a hagyományos Active Directory-tartományok, mivel biztonságosabban zárolva miatt.</span><span class="sxs-lookup"><span data-stu-id="ab598-107">Azure AD Domain Services managed domains are different from traditional Active Directory domains since they are more securely locked down.</span></span>

<span data-ttu-id="ab598-108">Ez a cikk bemutatja, hogyan tooconfigure kerberos által korlátozott delegálás az Azure AD tartományi szolgáltatások által felügyelt tartományokhoz.</span><span class="sxs-lookup"><span data-stu-id="ab598-108">This article shows you how tooconfigure kerberos constrained delegation on an Azure AD Domain Services managed domain.</span></span>

## <a name="kerberos-constrained-delegation-kcd"></a><span data-ttu-id="ab598-109">Kerberos által korlátozott delegálás (KCD)</span><span class="sxs-lookup"><span data-stu-id="ab598-109">Kerberos constrained delegation (KCD)</span></span>
<span data-ttu-id="ab598-110">Kerberos-delegálás engedélyezi egy fiók tooimpersonate egy másik biztonsági egyszerű (például egy felhasználó) tooaccess erőforrásokat.</span><span class="sxs-lookup"><span data-stu-id="ab598-110">Kerberos delegation enables an account tooimpersonate another security principal (such as a user) tooaccess resources.</span></span> <span data-ttu-id="ab598-111">Fontolja meg egy webalkalmazást, aki hozzáfér a háttér-webes API-k egy felhasználó hello környezetében.</span><span class="sxs-lookup"><span data-stu-id="ab598-111">Consider a web application that accesses a back-end web API in hello context of a user.</span></span> <span data-ttu-id="ab598-112">Ebben a példában hello (szolgáltatásfiók vagy egy számítógép-vagy számítógépfiók hello környezetében fut) webalkalmazás hello felhasználót megszemélyesítő (webes API) hello erőforráshoz történő hozzáféréskor.</span><span class="sxs-lookup"><span data-stu-id="ab598-112">In this example, hello web application (running in hello context of a service account or a computer/machine account) impersonates hello user when accessing hello resource (back-end web API).</span></span> <span data-ttu-id="ab598-113">Kerberos-delegálás nem biztonságos, mivel nem korlátozza a fiók megszemélyesítése erőforrások hello férhetnek hozzá hello felhasználó környezetében hello hello.</span><span class="sxs-lookup"><span data-stu-id="ab598-113">Kerberos delegation is insecure since it does not restrict hello resources hello impersonating account can access in hello context of hello user.</span></span>

<span data-ttu-id="ab598-114">Kerberos által korlátozott delegálás (KCD) szolgáltatások/erőforrások toowhich hello megadott kiszolgáló műveleteket hajthat végre a felhasználó nevében hello hello korlátozza.</span><span class="sxs-lookup"><span data-stu-id="ab598-114">Kerberos constrained delegation (KCD) restricts hello services/resources toowhich hello specified server can act on hello behalf of a user.</span></span> <span data-ttu-id="ab598-115">Hagyományos Kerberos által korlátozott Delegálás szükséges tartományi rendszergazdai jogosultságokkal tooconfigure egy olyan tartományi fiók egy szolgáltatás, és korlátozza a hello fiók tooa egyetlen tartományon.</span><span class="sxs-lookup"><span data-stu-id="ab598-115">Traditional KCD requires domain administrator privileges tooconfigure a domain account for a service and it restricts hello account tooa single domain.</span></span>

<span data-ttu-id="ab598-116">Hagyományos Kerberos által korlátozott Delegálás is van néhány olyan probléma, társítva.</span><span class="sxs-lookup"><span data-stu-id="ab598-116">Traditional KCD also has a few issues associated with it.</span></span> <span data-ttu-id="ab598-117">A korábbi operációs rendszerekben, ahol a hello tartományi rendszergazda konfigurálta a hello szolgáltatást hello szolgáltatás-rendszergazda kellett nem használható megoldást tooknow, mely előtér-szolgáltatások meghatalmazott toohello erőforrás-szolgáltatások tulajdonosa volt.</span><span class="sxs-lookup"><span data-stu-id="ab598-117">In earlier operating systems where hello domain administrator configured hello service, hello service administrator had no useful way tooknow which front-end services delegated toohello resource services they owned.</span></span> <span data-ttu-id="ab598-118">És bármely előtér-szolgáltatás, amely átadhatja tooa erőforrás-szolgáltatás potenciális támadási felület.</span><span class="sxs-lookup"><span data-stu-id="ab598-118">And any front-end service that could delegate tooa resource service represented a potential attack point.</span></span> <span data-ttu-id="ab598-119">Ha egy kiszolgálót, amely előtér-szolgáltatás tárolt biztonsági szempontból sérült, és a beállított toodelegate tooresource szolgáltatások volt, hello erőforrás-szolgáltatások is utaló jeleket.</span><span class="sxs-lookup"><span data-stu-id="ab598-119">If a server that hosted a front-end service was compromised, and it was configured toodelegate tooresource services, hello resource services could also be compromised.</span></span>

> [!NOTE]
> <span data-ttu-id="ab598-120">Az Azure AD tartományi szolgáltatások által felügyelt tartományokhoz, a nem tartományi rendszergazdai jogosultságokkal rendelkezik.</span><span class="sxs-lookup"><span data-stu-id="ab598-120">On an Azure AD Domain Services managed domain, you do not have domain administrator privileges.</span></span> <span data-ttu-id="ab598-121">Ezért **hagyományos Kerberos által korlátozott Delegálás nem konfigurálható egy felügyelt tartomány**.</span><span class="sxs-lookup"><span data-stu-id="ab598-121">Therefore, **traditional KCD cannot be configured on a managed domain**.</span></span> <span data-ttu-id="ab598-122">Erőforrás-alapú Kerberos által korlátozott Delegálás használata, ebben a cikkben leírtak szerint.</span><span class="sxs-lookup"><span data-stu-id="ab598-122">Use resource-based KCD as described in this article.</span></span> <span data-ttu-id="ab598-123">Ez a módszer használata is biztonságosabb.</span><span class="sxs-lookup"><span data-stu-id="ab598-123">This mechanism is also more secure.</span></span>
>
>

## <a name="resource-based-kerberos-constrained-delegation"></a><span data-ttu-id="ab598-124">Erőforrás-alapú kerberos által korlátozott delegálás</span><span class="sxs-lookup"><span data-stu-id="ab598-124">Resource-based kerberos constrained delegation</span></span>
<span data-ttu-id="ab598-125">A Windows Server 2012 R2 és Windows Server 2012 hello képességét tooconfigure által korlátozott delegálás hello szolgáltatás hatáskörébe tartozik hello tartományi rendszergazda toohello szolgáltatás-rendszergazdát.</span><span class="sxs-lookup"><span data-stu-id="ab598-125">In Windows Server 2012 R2 and Windows Server 2012, hello ability tooconfigure constrained delegation for hello service has been transferred from hello domain administrator toohello service administrator.</span></span> <span data-ttu-id="ab598-126">Ezzel a módszerrel hello háttér-szolgáltatás-rendszergazda engedélyezheti vagy tagadhatja meg előtér-szolgáltatásokat.</span><span class="sxs-lookup"><span data-stu-id="ab598-126">In this way, hello back-end service administrator can allow or deny front-end services.</span></span> <span data-ttu-id="ab598-127">Ez a modell nevezik **erőforrás-alapú kerberos által korlátozott delegálás**.</span><span class="sxs-lookup"><span data-stu-id="ab598-127">This model is known as **resource-based kerberos constrained delegation**.</span></span>

<span data-ttu-id="ab598-128">Erőforrás-alapú Kerberos által korlátozott Delegálás konfigurálva van a PowerShell használatával.</span><span class="sxs-lookup"><span data-stu-id="ab598-128">Resource-based KCD is configured using PowerShell.</span></span> <span data-ttu-id="ab598-129">Set-ADComputer hello vagy a Set-ADUser parancsmag, attól függően, hogy hello fiók megszemélyesítése a számítógépfiókkal vagy egy felhasználói fiók/service fiókot használja.</span><span class="sxs-lookup"><span data-stu-id="ab598-129">You use hello Set-ADComputer or Set-ADUser cmdlets, depending on whether hello impersonating account is a computer account or a user account/service account.</span></span>

### <a name="configure-resource-based-kcd-for-a-computer-account-on-a-managed-domain"></a><span data-ttu-id="ab598-130">Erőforrás-alapú számítógép fiók Kerberos által korlátozott Delegálás konfigurálása a felügyelt tartományhoz</span><span class="sxs-lookup"><span data-stu-id="ab598-130">Configure resource-based KCD for a computer account on a managed domain</span></span>
<span data-ttu-id="ab598-131">Tegyük fel, a webes alkalmazás hello számítógépen futó "contoso100-webapp.contoso100.com".</span><span class="sxs-lookup"><span data-stu-id="ab598-131">Assume you have a web app running on hello computer 'contoso100-webapp.contoso100.com'.</span></span> <span data-ttu-id="ab598-132">Tooaccess hello erőforrás szükséges (a futó webes API "contoso100-api.contoso100.com") a tartományi felhasználók hello környezetében.</span><span class="sxs-lookup"><span data-stu-id="ab598-132">It needs tooaccess hello resource (a web API running on 'contoso100-api.contoso100.com') in hello context of domain users.</span></span> <span data-ttu-id="ab598-133">Itt látható, hogyan állíthat be az erőforrás-alapú ebben a forgatókönyvben a Kerberos által korlátozott Delegálás.</span><span class="sxs-lookup"><span data-stu-id="ab598-133">Here's how you would set up resource-based KCD for this scenario.</span></span>

```
$ImpersonatingAccount = Get-ADComputer -Identity contoso100-webapp.contoso100.com
Set-ADComputer contoso100-api.contoso100.com -PrincipalsAllowedToDelegateToAccount $ImpersonatingAccount
```

### <a name="configure-resource-based-kcd-for-a-user-account-on-a-managed-domain"></a><span data-ttu-id="ab598-134">Erőforrás-alapú felhasználói fiókok Kerberos által korlátozott Delegálás konfigurálása a felügyelt tartományhoz</span><span class="sxs-lookup"><span data-stu-id="ab598-134">Configure resource-based KCD for a user account on a managed domain</span></span>
<span data-ttu-id="ab598-135">Azt feltételezik, a webes alkalmazás futtatásához használt szolgáltatásfiók "appsvc", és szükséges tooaccess hello erőforrás (a webes API futtatásához használt szolgáltatásfiók - "backendsvc") a tartományi felhasználók hello környezetében.</span><span class="sxs-lookup"><span data-stu-id="ab598-135">Assume you have a web app running as a service account 'appsvc' and it needs tooaccess hello resource (a web API running as a service account - 'backendsvc') in hello context of domain users.</span></span> <span data-ttu-id="ab598-136">Itt látható, hogyan állíthat be az erőforrás-alapú ebben a forgatókönyvben a Kerberos által korlátozott Delegálás.</span><span class="sxs-lookup"><span data-stu-id="ab598-136">Here's how you would set up resource-based KCD for this scenario.</span></span>

```
$ImpersonatingAccount = Get-ADUser -Identity appsvc
Set-ADUser backendsvc -PrincipalsAllowedToDelegateToAccount $ImpersonatingAccount
```

## <a name="related-content"></a><span data-ttu-id="ab598-137">Kapcsolódó tartalom</span><span class="sxs-lookup"><span data-stu-id="ab598-137">Related Content</span></span>
* [<span data-ttu-id="ab598-138">Azure AD tartományi szolgáltatások – első lépések útmutató</span><span class="sxs-lookup"><span data-stu-id="ab598-138">Azure AD Domain Services - Getting Started guide</span></span>](active-directory-ds-getting-started.md)
* [<span data-ttu-id="ab598-139">A Kerberos általi korlátozott delegálás áttekintése</span><span class="sxs-lookup"><span data-stu-id="ab598-139">Kerberos Constrained Delegation Overview</span></span>](https://technet.microsoft.com/library/jj553400.aspx)
