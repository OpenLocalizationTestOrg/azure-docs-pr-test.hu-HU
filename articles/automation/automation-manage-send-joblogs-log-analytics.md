---
title: "Azure Automation-feladat adatok tooOMS Naplóelemzési aaaForward |} Microsoft Docs"
description: "Ez a cikk bemutatja, hogyan toosend feladat állapotát és a runbook-feladat az adatfolyamokat tooMicrosoft Operations Management Suite Naplóelemzési toodeliver további betekintést és kezelése."
services: automation
documentationcenter: 
author: MGoedtel
manager: carmonm
editor: tysonn
ms.assetid: c12724c6-01a9-4b55-80ae-d8b7b99bd436
ms.service: automation
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 06/02/2017
ms.author: magoedte
ms.openlocfilehash: e78b6c6677d6502711ce828e2d32b7a91922ae26
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/06/2017
---
# <a name="forward-job-status-and-job-streams-from-automation-toolog-analytics-oms"></a><span data-ttu-id="cb823-103">Feladat állapotát és a feladat adatfolyam továbbítása Automation tooLog szolgáltatás (OMS)</span><span class="sxs-lookup"><span data-stu-id="cb823-103">Forward job status and job streams from Automation tooLog Analytics (OMS)</span></span>
<span data-ttu-id="cb823-104">Automatizálási runbook feladat állapotát és a feladat adatfolyamok tooyour a Microsoft Operations Management Suite (OMS) Naplóelemzési munkaterület küldhet.</span><span class="sxs-lookup"><span data-stu-id="cb823-104">Automation can send runbook job status and job streams tooyour Microsoft Operations Management Suite (OMS) Log Analytics workspace.</span></span>  <span data-ttu-id="cb823-105">Feladat naplózza, és a feladat adatfolyamok láthatók a hello Azure-portálon, vagy a PowerShell használatával, az egyes feladatok, és ez lehetővé teszi tooperform egyszerű vizsgálatokat.</span><span class="sxs-lookup"><span data-stu-id="cb823-105">Job logs and job streams are visible in hello Azure portal, or with PowerShell, for individual jobs and this allows you tooperform simple investigations.</span></span> <span data-ttu-id="cb823-106">Most Log Analytics segítségével:</span><span class="sxs-lookup"><span data-stu-id="cb823-106">Now with Log Analytics you can:</span></span>

* <span data-ttu-id="cb823-107">Az automatizálási feladatok insight letöltése</span><span class="sxs-lookup"><span data-stu-id="cb823-107">Get insight on your Automation jobs</span></span>
* <span data-ttu-id="cb823-108">A runbook-feladat állapota (például felfüggesztett vagy sikertelen) alapuló riasztás vagy e-mail eseményindító</span><span class="sxs-lookup"><span data-stu-id="cb823-108">Trigger an email or alert based on your runbook job status (for example, failed or suspended)</span></span>
* <span data-ttu-id="cb823-109">Speciális lekérdezéseket írhat a feladat adatfolyamok között</span><span class="sxs-lookup"><span data-stu-id="cb823-109">Write advanced queries across your job streams</span></span>
* <span data-ttu-id="cb823-110">Feladatok összefüggéseket Automation-fiókok között</span><span class="sxs-lookup"><span data-stu-id="cb823-110">Correlate jobs across Automation accounts</span></span>
* <span data-ttu-id="cb823-111">A feladatelőzmények megjelenítheti az adott idő alatt</span><span class="sxs-lookup"><span data-stu-id="cb823-111">Visualize your job history over time</span></span>     

## <a name="prerequisites-and-deployment-considerations"></a><span data-ttu-id="cb823-112">Előfeltételek és központi telepítésével kapcsolatos megfontolások</span><span class="sxs-lookup"><span data-stu-id="cb823-112">Prerequisites and deployment considerations</span></span>
<span data-ttu-id="cb823-113">az automatizálási küldése toostart tooLog Analytics naplózza, akkor kell:</span><span class="sxs-lookup"><span data-stu-id="cb823-113">toostart sending your Automation logs tooLog Analytics, you need:</span></span>

1. <span data-ttu-id="cb823-114">hello November 2016 vagy újabb kiadása [Azure PowerShell](https://docs.microsoft.com/powershell/azureps-cmdlets-docs/) (v2.3.0).</span><span class="sxs-lookup"><span data-stu-id="cb823-114">hello November 2016 or later release of [Azure PowerShell](https://docs.microsoft.com/powershell/azureps-cmdlets-docs/) (v2.3.0).</span></span>
2. <span data-ttu-id="cb823-115">A Naplóelemzési munkaterület.</span><span class="sxs-lookup"><span data-stu-id="cb823-115">A Log Analytics workspace.</span></span> <span data-ttu-id="cb823-116">További információkért lásd: [Ismerkedés a Naplóelemzési](../log-analytics/log-analytics-get-started.md).</span><span class="sxs-lookup"><span data-stu-id="cb823-116">For more information, see [Get started with Log Analytics](../log-analytics/log-analytics-get-started.md).</span></span> 
3. <span data-ttu-id="cb823-117">hello ResourceId az Azure Automation-fiókhoz</span><span class="sxs-lookup"><span data-stu-id="cb823-117">hello ResourceId for your Azure Automation account</span></span>

<span data-ttu-id="cb823-118">az Azure Automation-fiók és a Naplóelemzési munkaterület, futtassa a következő PowerShell hello toofind hello ResourceId:</span><span class="sxs-lookup"><span data-stu-id="cb823-118">toofind hello ResourceId for your Azure Automation account and Log Analytics workspace, run hello following PowerShell:</span></span>

```powershell
# Find hello ResourceId for hello Automation Account
Find-AzureRmResource -ResourceType "Microsoft.Automation/automationAccounts"

# Find hello ResourceId for hello Log Analytics workspace
Find-AzureRmResource -ResourceType "Microsoft.OperationalInsights/workspaces"
```

<span data-ttu-id="cb823-119">Ha több Automation-fiókot, vagy a munkaterületek, parancsok, megelőző hello hello kimenete található hello *neve* tooconfigure kell, és másolja a hello értéke *ResourceId*.</span><span class="sxs-lookup"><span data-stu-id="cb823-119">If you have multiple Automation accounts, or workspaces, in hello output of hello preceding commands, find hello *Name* you need tooconfigure and copy hello value for *ResourceId*.</span></span>

<span data-ttu-id="cb823-120">Ha toofind hello kell *neve* az Automation-fiók hello Azure-portálon jelölje ki az Automation-fiók hello **Automation-fiók** panelhez, és válassza **mindenbeállítás**.</span><span class="sxs-lookup"><span data-stu-id="cb823-120">If you need toofind hello *Name* of your Automation account, in hello Azure portal select your Automation account from hello **Automation account** blade and select **All settings**.</span></span>  <span data-ttu-id="cb823-121">A hello **összes beállítás** panelen, a **Fiókbeállítások** kiválasztása **tulajdonságok**.</span><span class="sxs-lookup"><span data-stu-id="cb823-121">From hello **All settings** blade, under **Account Settings** select **Properties**.</span></span>  <span data-ttu-id="cb823-122">A hello **tulajdonságok** panelen, jegyezze fel ezeket az értékeket.</span><span class="sxs-lookup"><span data-stu-id="cb823-122">In hello **Properties** blade, you can note these values.</span></span><br> <span data-ttu-id="cb823-123">![Automation-fiók tulajdonságai](media/automation-manage-send-joblogs-log-analytics/automation-account-properties.png).</span><span class="sxs-lookup"><span data-stu-id="cb823-123">![Automation Account properties](media/automation-manage-send-joblogs-log-analytics/automation-account-properties.png).</span></span>

## <a name="set-up-integration-with-log-analytics"></a><span data-ttu-id="cb823-124">Log Analytics-integráció beállítása</span><span class="sxs-lookup"><span data-stu-id="cb823-124">Set up integration with Log Analytics</span></span>
1. <span data-ttu-id="cb823-125">A számítógépen indítása **Windows PowerShell** a hello **Start** képernyő.</span><span class="sxs-lookup"><span data-stu-id="cb823-125">On your computer, start **Windows PowerShell** from hello **Start** screen.</span></span>  
2. <span data-ttu-id="cb823-126">Másolja és illessze be a következő PowerShell hello és hello hello érték szerkesztése `$workspaceId` és `$automationAccountId`.</span><span class="sxs-lookup"><span data-stu-id="cb823-126">Copy and paste hello following PowerShell, and edit hello value for hello `$workspaceId` and `$automationAccountId`.</span></span>  <span data-ttu-id="cb823-127">A hello `-Environment` paraméter érvényes értékei a *AzureCloud* vagy *AzureUSGovernment* attól függően, hogy hello felhőalapú környezet használata.</span><span class="sxs-lookup"><span data-stu-id="cb823-127">For hello `-Environment` parameter, valid values are *AzureCloud* or *AzureUSGovernment* depending on hello cloud environment you are working in.</span></span>     

```powershell
[cmdletBinding()]
    Param
    (
        [Parameter(Mandatory=$True)]
        [ValidateSet("AzureCloud","AzureUSGovernment")]
        [string]$Environment="AzureCloud"
    )

#Check toosee which cloud environment toosign into.
Switch ($Environment)
   {
       "AzureCloud" {Login-AzureRmAccount}
       "AzureUSGovernment" {Login-AzureRmAccount -EnvironmentName AzureUSGovernment} 
   }

# if you have one Log Analytics workspace you can use hello following command tooget hello resource id of hello workspace
$workspaceId = (Get-AzureRmOperationalInsightsWorkspace).ResourceId

$automationAccountId = "/SUBSCRIPTIONS/ec11ca60-1234-491e-5678-0ea07feae25c/RESOURCEGROUPS/DEMO/PROVIDERS/MICROSOFT.AUTOMATION/ACCOUNTS/DEMO" 

Set-AzureRmDiagnosticSetting -ResourceId $automationAccountId -WorkspaceId $workspaceId -Enabled $true

```

<span data-ttu-id="cb823-128">A parancsfájl futtatása után látni fogja az Log Analytics-rekordok új JobLogs vagy írása JobStreams 10 percen belül.</span><span class="sxs-lookup"><span data-stu-id="cb823-128">After running this script, you will see records in Log Analytics within 10 minutes of new JobLogs or JobStreams being written.</span></span>

<span data-ttu-id="cb823-129">toosee hello naplókat, futtassa a következő lekérdezés a Naplóelemzési naplófájl-keresési hello:`Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION"`</span><span class="sxs-lookup"><span data-stu-id="cb823-129">toosee hello logs, run hello following query in Log Analytics log search: `Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION"`</span></span>

### <a name="verify-configuration"></a><span data-ttu-id="cb823-130">Konfiguráció ellenőrzése</span><span class="sxs-lookup"><span data-stu-id="cb823-130">Verify configuration</span></span>
<span data-ttu-id="cb823-131">az Automation-fiók küldő tooconfirm tooyour Naplóelemzési munkaterület naplózza, ellenőrizze, hogy diagnosztika helyesen van-e beállítva hello Automation-fiókot a következő PowerShell hello használata:</span><span class="sxs-lookup"><span data-stu-id="cb823-131">tooconfirm that your Automation account is sending logs tooyour Log Analytics workspace, check that diagnostics are set correctly on hello Automation account using hello following PowerShell:</span></span>

```powershell
[cmdletBinding()]
    Param
    (
        [Parameter(Mandatory=$True)]
        [ValidateSet("AzureCloud","AzureUSGovernment")]
        [string]$Environment="AzureCloud"
    )

#Check toosee which cloud environment toosign into.
Switch ($Environment)
   {
       "AzureCloud" {Login-AzureRmAccount}
       "AzureUSGovernment" {Login-AzureRmAccount -EnvironmentName AzureUSGovernment} 
   }
# if you have one Log Analytics workspace you can use hello following command tooget hello resource id of hello workspace
$workspaceId = (Get-AzureRmOperationalInsightsWorkspace).ResourceId

$automationAccountId = "/SUBSCRIPTIONS/ec11ca60-1234-491e-5678-0ea07feae25c/RESOURCEGROUPS/DEMO/PROVIDERS/MICROSOFT.AUTOMATION/ACCOUNTS/DEMO" 

Get-AzureRmDiagnosticSetting -ResourceId $automationAccountId
```

<span data-ttu-id="cb823-132">Hello kimenet győződjön meg arról, hogy:</span><span class="sxs-lookup"><span data-stu-id="cb823-132">In hello output ensure that:</span></span>
+ <span data-ttu-id="cb823-133">A *naplók*, a következő hello *engedélyezve* van *igaz*</span><span class="sxs-lookup"><span data-stu-id="cb823-133">Under *Logs*, hello value for *Enabled* is *True*</span></span>
+ <span data-ttu-id="cb823-134">hello értékének *WorkspaceId* toohello ResourceId a Naplóelemzési munkaterület beállítása</span><span class="sxs-lookup"><span data-stu-id="cb823-134">hello value of *WorkspaceId* is set toohello ResourceId of your Log Analytics workspace</span></span>


## <a name="log-analytics-records"></a><span data-ttu-id="cb823-135">Log Analytics-rekordok</span><span class="sxs-lookup"><span data-stu-id="cb823-135">Log Analytics records</span></span>
<span data-ttu-id="cb823-136">Azure Automation diagnosztika kétféle típusú rekordok Naplóelemzési hoz létre, és címkével rendelkeznek, **típus = AzureDiagnostics**.</span><span class="sxs-lookup"><span data-stu-id="cb823-136">Diagnostics from Azure Automation creates two types of records in Log Analytics and are tagged as **Type=AzureDiagnostics**.</span></span>

### <a name="job-logs"></a><span data-ttu-id="cb823-137">Feladatnaplóit</span><span class="sxs-lookup"><span data-stu-id="cb823-137">Job Logs</span></span>
| <span data-ttu-id="cb823-138">Tulajdonság</span><span class="sxs-lookup"><span data-stu-id="cb823-138">Property</span></span> | <span data-ttu-id="cb823-139">Leírás</span><span class="sxs-lookup"><span data-stu-id="cb823-139">Description</span></span> |
| --- | --- |
| <span data-ttu-id="cb823-140">TimeGenerated</span><span class="sxs-lookup"><span data-stu-id="cb823-140">TimeGenerated</span></span> |<span data-ttu-id="cb823-141">Dátum és idő, amikor hello runbook-feladat végrehajtása.</span><span class="sxs-lookup"><span data-stu-id="cb823-141">Date and time when hello runbook job executed.</span></span> |
| <span data-ttu-id="cb823-142">RunbookName_s</span><span class="sxs-lookup"><span data-stu-id="cb823-142">RunbookName_s</span></span> |<span data-ttu-id="cb823-143">hello runbook hello neve.</span><span class="sxs-lookup"><span data-stu-id="cb823-143">hello name of hello runbook.</span></span> |
| <span data-ttu-id="cb823-144">Caller_s</span><span class="sxs-lookup"><span data-stu-id="cb823-144">Caller_s</span></span> |<span data-ttu-id="cb823-145">Kik kezdeményeztek hello műveletet.</span><span class="sxs-lookup"><span data-stu-id="cb823-145">Who initiated hello operation.</span></span>  <span data-ttu-id="cb823-146">Lehetséges értékek: egy e-mail-cím vagy egy ütemezett feladatokat tartalmazó rendszer.</span><span class="sxs-lookup"><span data-stu-id="cb823-146">Possible values are either an email address or system for scheduled jobs.</span></span> |
| <span data-ttu-id="cb823-147">Tenant_g</span><span class="sxs-lookup"><span data-stu-id="cb823-147">Tenant_g</span></span> | <span data-ttu-id="cb823-148">A hívó hello hello bérlői azonosító GUID.</span><span class="sxs-lookup"><span data-stu-id="cb823-148">GUID that identifies hello tenant for hello Caller.</span></span> |
| <span data-ttu-id="cb823-149">JobId_g</span><span class="sxs-lookup"><span data-stu-id="cb823-149">JobId_g</span></span> |<span data-ttu-id="cb823-150">GUID azonosítója, amely hello hello runbook feladatának azonosítója.</span><span class="sxs-lookup"><span data-stu-id="cb823-150">GUID that is hello Id of hello runbook job.</span></span> |
| <span data-ttu-id="cb823-151">ResultType</span><span class="sxs-lookup"><span data-stu-id="cb823-151">ResultType</span></span> |<span data-ttu-id="cb823-152">runbook-feladat hello hello állapota.</span><span class="sxs-lookup"><span data-stu-id="cb823-152">hello status of hello runbook job.</span></span>  <span data-ttu-id="cb823-153">Lehetséges értékek:</span><span class="sxs-lookup"><span data-stu-id="cb823-153">Possible values are:</span></span><br><span data-ttu-id="cb823-154">- Elindítva</span><span class="sxs-lookup"><span data-stu-id="cb823-154">- Started</span></span><br><span data-ttu-id="cb823-155">- Leállítva</span><span class="sxs-lookup"><span data-stu-id="cb823-155">- Stopped</span></span><br><span data-ttu-id="cb823-156">- Felfüggesztve</span><span class="sxs-lookup"><span data-stu-id="cb823-156">- Suspended</span></span><br><span data-ttu-id="cb823-157">- Sikertelen</span><span class="sxs-lookup"><span data-stu-id="cb823-157">- Failed</span></span><br><span data-ttu-id="cb823-158">-Befejeződött</span><span class="sxs-lookup"><span data-stu-id="cb823-158">- Completed</span></span> |
| <span data-ttu-id="cb823-159">Kategória</span><span class="sxs-lookup"><span data-stu-id="cb823-159">Category</span></span> | <span data-ttu-id="cb823-160">Hello típusú adatok besorolása.</span><span class="sxs-lookup"><span data-stu-id="cb823-160">Classification of hello type of data.</span></span>  <span data-ttu-id="cb823-161">Az automatizáláshoz a hello értéke JobLogs.</span><span class="sxs-lookup"><span data-stu-id="cb823-161">For Automation, hello value is JobLogs.</span></span> |
| <span data-ttu-id="cb823-162">OperationName</span><span class="sxs-lookup"><span data-stu-id="cb823-162">OperationName</span></span> | <span data-ttu-id="cb823-163">Megadja az Azure-ban végrehajtott művelet hello típusát.</span><span class="sxs-lookup"><span data-stu-id="cb823-163">Specifies hello type of operation performed in Azure.</span></span>  <span data-ttu-id="cb823-164">Az automatizáláshoz a hello értéke feladat.</span><span class="sxs-lookup"><span data-stu-id="cb823-164">For Automation, hello value is Job.</span></span> |
| <span data-ttu-id="cb823-165">Erőforrás</span><span class="sxs-lookup"><span data-stu-id="cb823-165">Resource</span></span> | <span data-ttu-id="cb823-166">Hello Automation-fiók neve</span><span class="sxs-lookup"><span data-stu-id="cb823-166">Name of hello Automation account</span></span> |
| <span data-ttu-id="cb823-167">SourceSystem</span><span class="sxs-lookup"><span data-stu-id="cb823-167">SourceSystem</span></span> | <span data-ttu-id="cb823-168">A Naplóelemzési hogyan hello adatokat gyűjteni.</span><span class="sxs-lookup"><span data-stu-id="cb823-168">How Log Analytics collected hello data.</span></span> <span data-ttu-id="cb823-169">Mindig *Azure* az Azure diagnostics.</span><span class="sxs-lookup"><span data-stu-id="cb823-169">Always *Azure* for Azure diagnostics.</span></span> |
| <span data-ttu-id="cb823-170">ResultDescription</span><span class="sxs-lookup"><span data-stu-id="cb823-170">ResultDescription</span></span> |<span data-ttu-id="cb823-171">Hello runbook feladat eredménye állapotokat ismerteti.</span><span class="sxs-lookup"><span data-stu-id="cb823-171">Describes hello runbook job result state.</span></span>  <span data-ttu-id="cb823-172">Lehetséges értékek:</span><span class="sxs-lookup"><span data-stu-id="cb823-172">Possible values are:</span></span><br><span data-ttu-id="cb823-173">- A feladat elindult</span><span class="sxs-lookup"><span data-stu-id="cb823-173">- Job is started</span></span><br><span data-ttu-id="cb823-174">- A feladat nem sikerült</span><span class="sxs-lookup"><span data-stu-id="cb823-174">- Job Failed</span></span><br><span data-ttu-id="cb823-175">- A feladat befejeződött</span><span class="sxs-lookup"><span data-stu-id="cb823-175">- Job Completed</span></span> |
| <span data-ttu-id="cb823-176">CorrelationId</span><span class="sxs-lookup"><span data-stu-id="cb823-176">CorrelationId</span></span> |<span data-ttu-id="cb823-177">GUID azonosítója, amely hello hello runbook-feladat korrelációs azonosítója.</span><span class="sxs-lookup"><span data-stu-id="cb823-177">GUID that is hello Correlation Id of hello runbook job.</span></span> |
| <span data-ttu-id="cb823-178">ResourceId</span><span class="sxs-lookup"><span data-stu-id="cb823-178">ResourceId</span></span> |<span data-ttu-id="cb823-179">Hello Azure Automation szolgáltatásbeli fiók erőforrás azonosítóját hello runbook adja meg.</span><span class="sxs-lookup"><span data-stu-id="cb823-179">Specifies hello Azure Automation account resource id of hello runbook.</span></span> |
| <span data-ttu-id="cb823-180">SubscriptionId</span><span class="sxs-lookup"><span data-stu-id="cb823-180">SubscriptionId</span></span> | <span data-ttu-id="cb823-181">hello Azure-előfizetéssel azonosítót (GUID) hello Automation-fiók.</span><span class="sxs-lookup"><span data-stu-id="cb823-181">hello Azure subscription Id (GUID) for hello Automation account.</span></span> |
| <span data-ttu-id="cb823-182">ResourceGroup</span><span class="sxs-lookup"><span data-stu-id="cb823-182">ResourceGroup</span></span> | <span data-ttu-id="cb823-183">Az Automation-fiók hello hello erőforráscsoport nevét.</span><span class="sxs-lookup"><span data-stu-id="cb823-183">Name of hello resource group for hello Automation account.</span></span> |
| <span data-ttu-id="cb823-184">ResourceProvider</span><span class="sxs-lookup"><span data-stu-id="cb823-184">ResourceProvider</span></span> | <span data-ttu-id="cb823-185">MICROSOFT. AUTOMATIZÁLÁS</span><span class="sxs-lookup"><span data-stu-id="cb823-185">MICROSOFT.AUTOMATION</span></span> |
| <span data-ttu-id="cb823-186">ResourceType</span><span class="sxs-lookup"><span data-stu-id="cb823-186">ResourceType</span></span> | <span data-ttu-id="cb823-187">AUTOMATIONACCOUNTS</span><span class="sxs-lookup"><span data-stu-id="cb823-187">AUTOMATIONACCOUNTS</span></span> |


### <a name="job-streams"></a><span data-ttu-id="cb823-188">Feladat adatfolyamok</span><span class="sxs-lookup"><span data-stu-id="cb823-188">Job Streams</span></span>
| <span data-ttu-id="cb823-189">Tulajdonság</span><span class="sxs-lookup"><span data-stu-id="cb823-189">Property</span></span> | <span data-ttu-id="cb823-190">Leírás</span><span class="sxs-lookup"><span data-stu-id="cb823-190">Description</span></span> |
| --- | --- |
| <span data-ttu-id="cb823-191">TimeGenerated</span><span class="sxs-lookup"><span data-stu-id="cb823-191">TimeGenerated</span></span> |<span data-ttu-id="cb823-192">Dátum és idő, amikor hello runbook-feladat végrehajtása.</span><span class="sxs-lookup"><span data-stu-id="cb823-192">Date and time when hello runbook job executed.</span></span> |
| <span data-ttu-id="cb823-193">RunbookName_s</span><span class="sxs-lookup"><span data-stu-id="cb823-193">RunbookName_s</span></span> |<span data-ttu-id="cb823-194">hello runbook hello neve.</span><span class="sxs-lookup"><span data-stu-id="cb823-194">hello name of hello runbook.</span></span> |
| <span data-ttu-id="cb823-195">Caller_s</span><span class="sxs-lookup"><span data-stu-id="cb823-195">Caller_s</span></span> |<span data-ttu-id="cb823-196">Kik kezdeményeztek hello műveletet.</span><span class="sxs-lookup"><span data-stu-id="cb823-196">Who initiated hello operation.</span></span>  <span data-ttu-id="cb823-197">Lehetséges értékek: egy e-mail-cím vagy egy ütemezett feladatokat tartalmazó rendszer.</span><span class="sxs-lookup"><span data-stu-id="cb823-197">Possible values are either an email address or system for scheduled jobs.</span></span> |
| <span data-ttu-id="cb823-198">StreamType_s</span><span class="sxs-lookup"><span data-stu-id="cb823-198">StreamType_s</span></span> |<span data-ttu-id="cb823-199">feladatfolyam hello típusa.</span><span class="sxs-lookup"><span data-stu-id="cb823-199">hello type of job stream.</span></span> <span data-ttu-id="cb823-200">Lehetséges értékek:</span><span class="sxs-lookup"><span data-stu-id="cb823-200">Possible values are:</span></span><br><span data-ttu-id="cb823-201">- Folyamatban</span><span class="sxs-lookup"><span data-stu-id="cb823-201">-Progress</span></span><br><span data-ttu-id="cb823-202">- Kimenet</span><span class="sxs-lookup"><span data-stu-id="cb823-202">- Output</span></span><br><span data-ttu-id="cb823-203">- Figyelmeztetés</span><span class="sxs-lookup"><span data-stu-id="cb823-203">- Warning</span></span><br><span data-ttu-id="cb823-204">- Hiba</span><span class="sxs-lookup"><span data-stu-id="cb823-204">- Error</span></span><br><span data-ttu-id="cb823-205">- Hibakeresés</span><span class="sxs-lookup"><span data-stu-id="cb823-205">- Debug</span></span><br><span data-ttu-id="cb823-206">- Részletes</span><span class="sxs-lookup"><span data-stu-id="cb823-206">- Verbose</span></span> |
| <span data-ttu-id="cb823-207">Tenant_g</span><span class="sxs-lookup"><span data-stu-id="cb823-207">Tenant_g</span></span> | <span data-ttu-id="cb823-208">A hívó hello hello bérlői azonosító GUID.</span><span class="sxs-lookup"><span data-stu-id="cb823-208">GUID that identifies hello tenant for hello Caller.</span></span> |
| <span data-ttu-id="cb823-209">JobId_g</span><span class="sxs-lookup"><span data-stu-id="cb823-209">JobId_g</span></span> |<span data-ttu-id="cb823-210">GUID azonosítója, amely hello hello runbook feladatának azonosítója.</span><span class="sxs-lookup"><span data-stu-id="cb823-210">GUID that is hello Id of hello runbook job.</span></span> |
| <span data-ttu-id="cb823-211">ResultType</span><span class="sxs-lookup"><span data-stu-id="cb823-211">ResultType</span></span> |<span data-ttu-id="cb823-212">runbook-feladat hello hello állapota.</span><span class="sxs-lookup"><span data-stu-id="cb823-212">hello status of hello runbook job.</span></span>  <span data-ttu-id="cb823-213">Lehetséges értékek:</span><span class="sxs-lookup"><span data-stu-id="cb823-213">Possible values are:</span></span><br><span data-ttu-id="cb823-214">-Folyamatban</span><span class="sxs-lookup"><span data-stu-id="cb823-214">- In Progress</span></span> |
| <span data-ttu-id="cb823-215">Kategória</span><span class="sxs-lookup"><span data-stu-id="cb823-215">Category</span></span> | <span data-ttu-id="cb823-216">Hello típusú adatok besorolása.</span><span class="sxs-lookup"><span data-stu-id="cb823-216">Classification of hello type of data.</span></span>  <span data-ttu-id="cb823-217">Az automatizáláshoz a hello értéke JobStreams.</span><span class="sxs-lookup"><span data-stu-id="cb823-217">For Automation, hello value is JobStreams.</span></span> |
| <span data-ttu-id="cb823-218">OperationName</span><span class="sxs-lookup"><span data-stu-id="cb823-218">OperationName</span></span> | <span data-ttu-id="cb823-219">Megadja az Azure-ban végrehajtott művelet hello típusát.</span><span class="sxs-lookup"><span data-stu-id="cb823-219">Specifies hello type of operation performed in Azure.</span></span>  <span data-ttu-id="cb823-220">Az automatizáláshoz a hello értéke feladat.</span><span class="sxs-lookup"><span data-stu-id="cb823-220">For Automation, hello value is Job.</span></span> |
| <span data-ttu-id="cb823-221">Erőforrás</span><span class="sxs-lookup"><span data-stu-id="cb823-221">Resource</span></span> | <span data-ttu-id="cb823-222">Hello Automation-fiók neve</span><span class="sxs-lookup"><span data-stu-id="cb823-222">Name of hello Automation account</span></span> |
| <span data-ttu-id="cb823-223">SourceSystem</span><span class="sxs-lookup"><span data-stu-id="cb823-223">SourceSystem</span></span> | <span data-ttu-id="cb823-224">A Naplóelemzési hogyan hello adatokat gyűjteni.</span><span class="sxs-lookup"><span data-stu-id="cb823-224">How Log Analytics collected hello data.</span></span> <span data-ttu-id="cb823-225">Mindig *Azure* az Azure diagnostics.</span><span class="sxs-lookup"><span data-stu-id="cb823-225">Always *Azure* for Azure diagnostics.</span></span> |
| <span data-ttu-id="cb823-226">ResultDescription</span><span class="sxs-lookup"><span data-stu-id="cb823-226">ResultDescription</span></span> |<span data-ttu-id="cb823-227">Hello kimeneti adatfolyamba hello runbookból tartalmazza.</span><span class="sxs-lookup"><span data-stu-id="cb823-227">Includes hello output stream from hello runbook.</span></span> |
| <span data-ttu-id="cb823-228">CorrelationId</span><span class="sxs-lookup"><span data-stu-id="cb823-228">CorrelationId</span></span> |<span data-ttu-id="cb823-229">GUID azonosítója, amely hello hello runbook-feladat korrelációs azonosítója.</span><span class="sxs-lookup"><span data-stu-id="cb823-229">GUID that is hello Correlation Id of hello runbook job.</span></span> |
| <span data-ttu-id="cb823-230">ResourceId</span><span class="sxs-lookup"><span data-stu-id="cb823-230">ResourceId</span></span> |<span data-ttu-id="cb823-231">Hello Azure Automation szolgáltatásbeli fiók erőforrás azonosítóját hello runbook adja meg.</span><span class="sxs-lookup"><span data-stu-id="cb823-231">Specifies hello Azure Automation account resource id of hello runbook.</span></span> |
| <span data-ttu-id="cb823-232">SubscriptionId</span><span class="sxs-lookup"><span data-stu-id="cb823-232">SubscriptionId</span></span> | <span data-ttu-id="cb823-233">hello Azure-előfizetéssel azonosítót (GUID) hello Automation-fiók.</span><span class="sxs-lookup"><span data-stu-id="cb823-233">hello Azure subscription Id (GUID) for hello Automation account.</span></span> |
| <span data-ttu-id="cb823-234">ResourceGroup</span><span class="sxs-lookup"><span data-stu-id="cb823-234">ResourceGroup</span></span> | <span data-ttu-id="cb823-235">Az Automation-fiók hello hello erőforráscsoport nevét.</span><span class="sxs-lookup"><span data-stu-id="cb823-235">Name of hello resource group for hello Automation account.</span></span> |
| <span data-ttu-id="cb823-236">ResourceProvider</span><span class="sxs-lookup"><span data-stu-id="cb823-236">ResourceProvider</span></span> | <span data-ttu-id="cb823-237">MICROSOFT. AUTOMATIZÁLÁS</span><span class="sxs-lookup"><span data-stu-id="cb823-237">MICROSOFT.AUTOMATION</span></span> |
| <span data-ttu-id="cb823-238">ResourceType</span><span class="sxs-lookup"><span data-stu-id="cb823-238">ResourceType</span></span> | <span data-ttu-id="cb823-239">AUTOMATIONACCOUNTS</span><span class="sxs-lookup"><span data-stu-id="cb823-239">AUTOMATIONACCOUNTS</span></span> |

## <a name="viewing-automation-logs-in-log-analytics"></a><span data-ttu-id="cb823-240">A Naplóelemzési bejelentkezik Automation megtekintése</span><span class="sxs-lookup"><span data-stu-id="cb823-240">Viewing Automation Logs in Log Analytics</span></span>
<span data-ttu-id="cb823-241">Most, hogy használatba vette az Automation feladat naplók tooLog Analytics küldésekor, nézzük meg, mi mindent, ezek a naplók Naplóelemzési belül.</span><span class="sxs-lookup"><span data-stu-id="cb823-241">Now that you have started sending your Automation job logs tooLog Analytics, let’s see what you can do with these logs inside Log Analytics.</span></span>

<span data-ttu-id="cb823-242">toosee hello naplókat, futtassa a következő lekérdezés hello:`Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION"`</span><span class="sxs-lookup"><span data-stu-id="cb823-242">toosee hello logs, run hello following query: `Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION"`</span></span>

### <a name="send-an-email-when-a-runbook-job-fails-or-suspends"></a><span data-ttu-id="cb823-243">E-mailt küld, ha egy runbook-feladat sikertelen lesz, vagy felfüggesztése</span><span class="sxs-lookup"><span data-stu-id="cb823-243">Send an email when a runbook job fails or suspends</span></span>
<span data-ttu-id="cb823-244">Egy felső ügyfelünk kéri esetén a hello képességét toosend szöveg vagy egy e-mailt probléma merül fel a runbook-feladatok.</span><span class="sxs-lookup"><span data-stu-id="cb823-244">One of our top customer asks is for hello ability toosend an email or a text when something goes wrong with a runbook job.</span></span>   

<span data-ttu-id="cb823-245">toocreate riasztást szabály, akkor először hozzon létre a hello runbook napló keresése feladat azt jelzi, hogy hello riasztást kell meghívnia.</span><span class="sxs-lookup"><span data-stu-id="cb823-245">toocreate an alert rule, you start by creating a log search for hello runbook job records that should invoke hello alert.</span></span>  <span data-ttu-id="cb823-246">Kattintson a hello **riasztás** toocreate gombra, és a riasztási szabály hello konfigurálása.</span><span class="sxs-lookup"><span data-stu-id="cb823-246">Click hello **Alert** button toocreate and configure hello alert rule.</span></span>

1. <span data-ttu-id="cb823-247">Hello napló elemzés áttekintése lapon kattintson **naplófájl-keresési**.</span><span class="sxs-lookup"><span data-stu-id="cb823-247">From hello Log Analytics Overview page, click **Log Search**.</span></span>
2. <span data-ttu-id="cb823-248">A riasztás napló keresési lekérdezés létrehozásához írja be a következő keresési lekérdezés mezőbe hello hello: `Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category=JobLogs (ResultType=Failed OR ResultType=Suspended)` szerint is csoportosíthatók által hello RunbookName használatával:`Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category=JobLogs (ResultType=Failed OR ResultType=Suspended) | measure Count() by RunbookName_s`</span><span class="sxs-lookup"><span data-stu-id="cb823-248">Create a log search query for your alert by typing hello following search into hello query field:  `Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category=JobLogs (ResultType=Failed OR ResultType=Suspended)`  You can also group by hello RunbookName by using: `Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category=JobLogs (ResultType=Failed OR ResultType=Suspended) | measure Count() by RunbookName_s`</span></span>   

   <span data-ttu-id="cb823-249">Ha több mint egy automatizálási fiók vagy előfizetés tooyour munkaterületről naplók beállítását követően csoportosíthatók a a riasztások előfizetés és az Automation-fiók.</span><span class="sxs-lookup"><span data-stu-id="cb823-249">If you have set up logs from more than one Automation account or subscription tooyour workspace, you can group your alerts by subscription and Automation account.</span></span>  <span data-ttu-id="cb823-250">Automation-fiók neve JobLogs hello-keresés mezője hello erőforrás származtatható.</span><span class="sxs-lookup"><span data-stu-id="cb823-250">Automation account name can be derived from hello Resource field in hello search of JobLogs.</span></span>  
3. <span data-ttu-id="cb823-251">tooopen hello **riasztási szabály hozzáadása** kattintson **riasztási** hello oldal hello tetején.</span><span class="sxs-lookup"><span data-stu-id="cb823-251">tooopen hello **Add Alert Rule** screen, click **Alert** at hello top of hello page.</span></span> <span data-ttu-id="cb823-252">Hello beállítások tooconfigure hello figyelmeztetéssel kapcsolatos további részletekért lásd: [Naplóelemzési riasztások](../log-analytics/log-analytics-alerts.md#alert-rules).</span><span class="sxs-lookup"><span data-stu-id="cb823-252">For further details on hello options tooconfigure hello alert, see [Alerts in Log Analytics](../log-analytics/log-analytics-alerts.md#alert-rules).</span></span>

### <a name="find-all-jobs-that-have-completed-with-errors"></a><span data-ttu-id="cb823-253">Található összes feladatot, amely hibákkal fejeződött be</span><span class="sxs-lookup"><span data-stu-id="cb823-253">Find all jobs that have completed with errors</span></span>
<span data-ttu-id="cb823-254">Ezenkívül tooalerting hibáiról, megtalálhatja, ha a runbook-feladatok nem okozó hibát tartalmaz.</span><span class="sxs-lookup"><span data-stu-id="cb823-254">In addition tooalerting on failures, you can find when a runbook job has a non-terminating error.</span></span> <span data-ttu-id="cb823-255">Ezekben az esetekben PowerShell egy hibafolyam eredményez, de nem okozó hibák hello nem a feladat toosuspend okozhatják, vagy sikertelen.</span><span class="sxs-lookup"><span data-stu-id="cb823-255">In these cases PowerShell produces an error stream, but hello non-terminating errors do not cause your job toosuspend or fail.</span></span>    

1. <span data-ttu-id="cb823-256">A Naplóelemzési munkaterületet, kattintson **naplófájl-keresési**.</span><span class="sxs-lookup"><span data-stu-id="cb823-256">In your Log Analytics workspace, click **Log Search**.</span></span>
2. <span data-ttu-id="cb823-257">Hello lekérdezés mezőbe, írja be a `Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category=JobStreams StreamType_s=Error | measure count() by JobId_g` majd **keresési**.</span><span class="sxs-lookup"><span data-stu-id="cb823-257">In hello query field, type `Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category=JobStreams StreamType_s=Error | measure count() by JobId_g` and then click **Search**.</span></span>

### <a name="view-job-streams-for-a-job"></a><span data-ttu-id="cb823-258">Nézet feladat adatfolyamok feladat</span><span class="sxs-lookup"><span data-stu-id="cb823-258">View job streams for a job</span></span>
<span data-ttu-id="cb823-259">Ha egy feladat hibakeresés is érdemes lehet toolook hello feladat adatfolyamok be.</span><span class="sxs-lookup"><span data-stu-id="cb823-259">When you are debugging a job, you may also want toolook into hello job streams.</span></span>  <span data-ttu-id="cb823-260">hello következő lekérdezés jeleníti meg a GUID 2ebd22ea-e05e-4eb9 – 9d 76-d73cbd4356e0 egyetlen feladat összes hello adatfolyamot:</span><span class="sxs-lookup"><span data-stu-id="cb823-260">hello following query shows all hello streams for a single job with GUID 2ebd22ea-e05e-4eb9-9d76-d73cbd4356e0:</span></span>   

`Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category=JobStreams JobId_g="2ebd22ea-e05e-4eb9-9d76-d73cbd4356e0" | sort TimeGenerated | select ResultDescription`

### <a name="view-historical-job-status"></a><span data-ttu-id="cb823-261">Korábbi feladat állapotának megtekintése</span><span class="sxs-lookup"><span data-stu-id="cb823-261">View historical job status</span></span>
<span data-ttu-id="cb823-262">Mindemellett érdemes lehet toovisualize a feladatelőzményekben adott idő alatt.</span><span class="sxs-lookup"><span data-stu-id="cb823-262">Finally, you may want toovisualize your job history over time.</span></span>  <span data-ttu-id="cb823-263">A lekérdezés toosearch időbeli használhat hello a feladatok állapotát.</span><span class="sxs-lookup"><span data-stu-id="cb823-263">You can use this query toosearch for hello status of your jobs over time.</span></span>

`Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category=JobLogs NOT(ResultType="started") | measure Count() by ResultType interval 1hour`  
<br> <span data-ttu-id="cb823-264">![OMS korábbi feladat állapota diagram](media/automation-manage-send-joblogs-log-analytics/historical-job-status-chart.png)</span><span class="sxs-lookup"><span data-stu-id="cb823-264">![OMS Historical Job Status Chart](media/automation-manage-send-joblogs-log-analytics/historical-job-status-chart.png)</span></span><br>

## <a name="summary"></a><span data-ttu-id="cb823-265">Összefoglalás</span><span class="sxs-lookup"><span data-stu-id="cb823-265">Summary</span></span>
<span data-ttu-id="cb823-266">Az Automation feladat állapotát és az adatfolyam adatok tooLog Analytics elküldésével az automatizálási feladatok által hello állapotának jobb betekintést kaphat:</span><span class="sxs-lookup"><span data-stu-id="cb823-266">By sending your Automation job status and stream data tooLog Analytics, you can get better insight into hello status of your Automation jobs by:</span></span>
+ <span data-ttu-id="cb823-267">Beállítása riasztások toonotify, ha probléma van a</span><span class="sxs-lookup"><span data-stu-id="cb823-267">Setting up alerts toonotify you when there is an issue</span></span>
+ <span data-ttu-id="cb823-268">Egyéni nézetek és a keresési lekérdezések toovisualize a eredmények, runbook-feladat állapotát, és egyéb kapcsolódó fő mutatók vagy metrikákat.</span><span class="sxs-lookup"><span data-stu-id="cb823-268">Using custom views and search queries toovisualize your runbook results, runbook job status, and other related key indicators or metrics.</span></span>  

<span data-ttu-id="cb823-269">A Naplóelemzési működési áttekinthetősége tooyour automatizálási feladatok biztosít, és segít a cím incidensek gyorsabb.</span><span class="sxs-lookup"><span data-stu-id="cb823-269">Log Analytics provides greater operational visibility tooyour Automation jobs and can help address incidents quicker.</span></span>  

## <a name="next-steps"></a><span data-ttu-id="cb823-270">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="cb823-270">Next steps</span></span>
* <span data-ttu-id="cb823-271">toolearn hogyan tooconstruct különböző keresési lekérdezések és felülvizsgálati hello Automation feladat naplók és a Log Analyticshez kapcsolatos további információkért lásd: [Log Analytics-e jelentkezni a keresések](../log-analytics/log-analytics-log-searches.md)</span><span class="sxs-lookup"><span data-stu-id="cb823-271">toolearn more about how tooconstruct different search queries and review hello Automation job logs with Log Analytics, see [Log searches in Log Analytics](../log-analytics/log-analytics-log-searches.md)</span></span>
* <span data-ttu-id="cb823-272">Hogyan toocreate és lekérése kimenet és a hiba a runbookok, kapcsolatban lásd: toounderstand [Runbook kimenet és üzenetek](automation-runbook-output-and-messages.md)</span><span class="sxs-lookup"><span data-stu-id="cb823-272">toounderstand how toocreate and retrieve output and error messages from runbooks, see [Runbook output and messages](automation-runbook-output-and-messages.md)</span></span>
* <span data-ttu-id="cb823-273">További információk a runbook végrehajtása toomonitor runbook feladatokat, valamint egyéb technikai részleteket lásd: hogyan toolearn [nyomon követheti a runbook-feladatok](automation-runbook-execution.md)</span><span class="sxs-lookup"><span data-stu-id="cb823-273">toolearn more about runbook execution, how toomonitor runbook jobs, and other technical details, see [Track a runbook job](automation-runbook-execution.md)</span></span>
* <span data-ttu-id="cb823-274">További információ az OMS szolgáltatáshoz és a gyűjtemény adatforrások toolearn lásd [gyűjtése Azure storage adatok a Naplóelemzési – áttekintés](../log-analytics/log-analytics-azure-storage.md)</span><span class="sxs-lookup"><span data-stu-id="cb823-274">toolearn more about OMS Log Analytics and data collection sources, see [Collecting Azure storage data in Log Analytics overview](../log-analytics/log-analytics-azure-storage.md)</span></span>
