---
title: Azure Automation runbookjai aaaChild |} Microsoft Docs
description: "Az Azure Automationben runbook indítása másik runbookból és a közöttük információk megosztása hello különböző módszerét ismerteti."
services: automation
documentationcenter: 
author: mgoedtel
manager: jwhit
editor: tysonn
ms.assetid: 919887b9-43e2-4c16-883c-f81807fe37db
ms.service: automation
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 02/02/2017
ms.author: magoedte;bwren
ms.openlocfilehash: d3d06818d344b565d53cc4f4705b41dcfcf9a376
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/06/2017
---
# <a name="child-runbooks-in-azure-automation"></a><span data-ttu-id="c8436-103">Azure Automation runbookjai gyermek</span><span class="sxs-lookup"><span data-stu-id="c8436-103">Child runbooks in Azure Automation</span></span>
<span data-ttu-id="c8436-104">Akkor célszerű az Azure Automation toowrite újrafelhasználható, moduláris runbookok egy más runbookok által használható önálló funkcióval.</span><span class="sxs-lookup"><span data-stu-id="c8436-104">It is a best practice in Azure Automation toowrite reusable, modular runbooks with a discrete function that can be used by other runbooks.</span></span> <span data-ttu-id="c8436-105">A szülő runbook gyakran telefonhívásokhoz egy vagy több gyermekrunbookot szükséges tooperform funkciót.</span><span class="sxs-lookup"><span data-stu-id="c8436-105">A parent runbook will often call one or more child runbooks tooperform required functionality.</span></span> <span data-ttu-id="c8436-106">Két módon toocall gyermekrunbook, és mindegyik rendelkezik-e különböző módszer közötti különbségeket tisztában kell lennie, hogy megállapíthassa, amely a különböző forgatókönyvek esetén ajánlott lesz.</span><span class="sxs-lookup"><span data-stu-id="c8436-106">There are two ways toocall a child runbook, and each has distinct differences that you should understand so that you can determine which will be best for your different scenarios.</span></span>

## <a name="invoking-a-child-runbook-using-inline-execution"></a><span data-ttu-id="c8436-107">Beágyazott Futtatás használatával gyermek runbook meghívása</span><span class="sxs-lookup"><span data-stu-id="c8436-107">Invoking a child runbook using inline execution</span></span>
<span data-ttu-id="c8436-108">tooinvoke beágyazottan indított runbook másik runbookból hello runbook hello nevét használja, és adjon meg értékeket a paraméterek ugyanúgy egy tevékenységet vagy egy parancsmagot használhatja.</span><span class="sxs-lookup"><span data-stu-id="c8436-108">tooinvoke a runbook inline from another runbook, you use hello name of hello runbook and provide values for its parameters exactly like you would use an activity or cmdlet.</span></span>  <span data-ttu-id="c8436-109">Az összes runbook hello azonos Automation-fiók vannak elérhető tooall más toobe az ilyen módon használt.</span><span class="sxs-lookup"><span data-stu-id="c8436-109">All runbooks in hello same Automation account are available tooall others toobe used in this manner.</span></span> <span data-ttu-id="c8436-110">hello szülőrunbook megvárja, hogy hello gyermek runbook toocomplete toohello következő sorra helyezése előtt, és minden kimenetet közvetlenül toohello szülő visszaadja.</span><span class="sxs-lookup"><span data-stu-id="c8436-110">hello parent runbook will wait for hello child runbook toocomplete before moving toohello next line, and any output is returned directly toohello parent.</span></span>

<span data-ttu-id="c8436-111">A beágyazottan indított runbook indításakor, ugyanaz, mint a szülő runbook hello feladat hello fusson.</span><span class="sxs-lookup"><span data-stu-id="c8436-111">When you invoke a runbook inline, it runs in hello same job as hello parent runbook.</span></span> <span data-ttu-id="c8436-112">Nincs hello gyermekrunbook annak feladatelőzményeiben hello feladatelőzmények feltüntetése lesz.</span><span class="sxs-lookup"><span data-stu-id="c8436-112">There will be no indication in hello job history of hello child runbook that it ran.</span></span> <span data-ttu-id="c8436-113">Kivételeket és adatfolyam-hello gyermekrunbook kimenetét hello szülő társítva lesz.</span><span class="sxs-lookup"><span data-stu-id="c8436-113">Any exceptions and any stream output from hello child runbook will be associated with hello parent.</span></span> <span data-ttu-id="c8436-114">Ez kevesebb feladatot eredményez, és megkönnyíti a könnyebb tootrack és tootroubleshoot óta hello gyermekrunbook összes kivételét és adatfolyam-kimenetét bármelyike hello szülő feladatukhoz társított.</span><span class="sxs-lookup"><span data-stu-id="c8436-114">This results in fewer jobs and makes them easier tootrack and tootroubleshoot since any exceptions thrown by hello child runbook and any of its stream output are associated with hello parent job.</span></span>

<span data-ttu-id="c8436-115">Egy runbook közzétételekor runbookok gyermekrunbookoknak már közzé kell tenni.</span><span class="sxs-lookup"><span data-stu-id="c8436-115">When a runbook is published, any child runbooks that it calls must already be published.</span></span> <span data-ttu-id="c8436-116">Ennek oka az Azure Automation runbookok társítást hoz létre, amikor gyermekrunbookkal.</span><span class="sxs-lookup"><span data-stu-id="c8436-116">This is because Azure Automation builds an association with any child runbooks when a runbook is compiled.</span></span> <span data-ttu-id="c8436-117">Ellenkező esetben a szülőrunbook hello megfelelően jelenik-e toopublish, de kivételt hoz létre, amikor elindul.</span><span class="sxs-lookup"><span data-stu-id="c8436-117">If they aren’t, hello parent runbook will appear toopublish properly, but will generate an exception when it’s started.</span></span> <span data-ttu-id="c8436-118">Ez akkor fordul elő, ha újbóli hello szülőrunbook rendelés tooproperly hivatkozás hello gyermek runbookok.</span><span class="sxs-lookup"><span data-stu-id="c8436-118">If this happens, you can republish hello parent runbook in order tooproperly reference hello child runbooks.</span></span> <span data-ttu-id="c8436-119">Ha bármelyik alárendelt runbookokat hello megváltoznak, mert hello társítás fog létre lett hozva, nem kell toorepublish hello szülőrunbook.</span><span class="sxs-lookup"><span data-stu-id="c8436-119">You do not need toorepublish hello parent runbook if any of hello child runbooks are changed because hello association will have already been created.</span></span>

<span data-ttu-id="c8436-120">a gyermekrunbook beágyazottan meghívott hello paraméterek értéke lehet bármely adattípushoz, többek között összetett objektumok, és nincs nincs [JSON-szerializálás](automation-starting-a-runbook.md#runbook-parameters) , amikor elkezdi hello runbook hello Azure felügyeleti portál használatával, vagy a hello Start-AzureRmAutomationRunbook parancsmag.</span><span class="sxs-lookup"><span data-stu-id="c8436-120">hello parameters of a child runbook called inline can be any data type including complex objects, and there is no [JSON serialization](automation-starting-a-runbook.md#runbook-parameters) as there is when you start hello runbook using hello Azure Management Portal or with hello Start-AzureRmAutomationRunbook cmdlet.</span></span>

### <a name="runbook-types"></a><span data-ttu-id="c8436-121">Runbook-típusok</span><span class="sxs-lookup"><span data-stu-id="c8436-121">Runbook types</span></span>
<span data-ttu-id="c8436-122">Milyen típusú hívhatják meg egymással:</span><span class="sxs-lookup"><span data-stu-id="c8436-122">Which types can call each other:</span></span>

* <span data-ttu-id="c8436-123">A [PowerShell runbook](automation-runbook-types.md#powershell-runbooks) és [grafikus forgatókönyvek](automation-runbook-types.md#graphical-runbooks) hívhatják meg minden egyéb beágyazott (mindkettő PowerShell-alapú).</span><span class="sxs-lookup"><span data-stu-id="c8436-123">A [PowerShell runbook](automation-runbook-types.md#powershell-runbooks) and [Graphical runbooks](automation-runbook-types.md#graphical-runbooks) can call each other inline (both are PowerShell based).</span></span>
* <span data-ttu-id="c8436-124">A [PowerShell-munkafolyamati forgatókönyv](automation-runbook-types.md#powershell-workflow-runbooks) és grafikus PowerShell-munkafolyamati forgatókönyvek hívhatják meg minden egyéb beágyazott (mindkettő PowerShell munkafolyamat alapú)</span><span class="sxs-lookup"><span data-stu-id="c8436-124">A [PowerShell Workflow runbook](automation-runbook-types.md#powershell-workflow-runbooks) and Graphical PowerShell Workflow runbooks can call each other inline (both are PowerShell Workflow based)</span></span>
* <span data-ttu-id="c8436-125">PowerShell típusú hello és hello PowerShell munkafolyamat-típusok nem hívható meg egymással beágyazott, és meg kell felelnie a Start-AzureRmAutomationRunbook.</span><span class="sxs-lookup"><span data-stu-id="c8436-125">hello PowerShell types and hello PowerShell Workflow types can’t call each other inline, and must use Start-AzureRmAutomationRunbook.</span></span>

<span data-ttu-id="c8436-126">Ha sorrendben függetlenül attól, hogy közzététele:</span><span class="sxs-lookup"><span data-stu-id="c8436-126">When does publish order matter:</span></span>

* <span data-ttu-id="c8436-127">hello PowerShell munkafolyamatok és a grafikus PowerShell-munkafolyamati forgatókönyvek runbookok csak kérdések sorrendjének közzététele.</span><span class="sxs-lookup"><span data-stu-id="c8436-127">hello publish order of runbooks only matters for PowerShell Workflow and Graphical PowerShell Workflow runbooks.</span></span>

<span data-ttu-id="c8436-128">Meghívja a beágyazott Futtatás használatával grafikus vagy PowerShell-munkafolyamati gyermekrunbook, csak hello runbook hello nevét használja.</span><span class="sxs-lookup"><span data-stu-id="c8436-128">When you call a Graphical or PowerShell Workflow child runbook using inline execution, you just use hello name of hello runbook.</span></span>  <span data-ttu-id="c8436-129">A PowerShell gyermek runbook hívásakor a neve előtt kell *.\\*  , hogy a parancsfájl hello toospecify hello helyi könyvtárban található.</span><span class="sxs-lookup"><span data-stu-id="c8436-129">When you call a PowerShell child runbook, you must preceded its name with *.\\* toospecify that hello script is located in hello local directory.</span></span> 

### <a name="example"></a><span data-ttu-id="c8436-130">Példa</span><span class="sxs-lookup"><span data-stu-id="c8436-130">Example</span></span>
<span data-ttu-id="c8436-131">a következő példa hello hív meg, egy teszt gyermekrunbook, amely három paramétert, egy összetett objektum, egy egész számot és egy logikai érték fogadja.</span><span class="sxs-lookup"><span data-stu-id="c8436-131">hello following example invokes a test child runbook that accepts three parameters, a complex object, an integer, and a boolean.</span></span> <span data-ttu-id="c8436-132">hello gyermekrunbook kimenetét hello tooa változó van hozzárendelve.</span><span class="sxs-lookup"><span data-stu-id="c8436-132">hello output of hello child runbook is assigned tooa variable.</span></span>  <span data-ttu-id="c8436-133">Ebben az esetben hello gyermekrunbook egy PowerShell-munkafolyamati forgatókönyv</span><span class="sxs-lookup"><span data-stu-id="c8436-133">In this case, hello child runbook is a PowerShell Workflow runbook</span></span>

    $vm = Get-AzureRmVM –ResourceGroupName "LabRG" –Name "MyVM"
    $output = PSWF-ChildRunbook –VM $vm –RepeatCount 2 –Restart $true

<span data-ttu-id="c8436-134">Az alábbiakban látható hello ugyanebben a példában egy PowerShell-forgatókönyv használatával hello gyermekhelyként.</span><span class="sxs-lookup"><span data-stu-id="c8436-134">Following is hello same example using a PowerShell runbook as hello child.</span></span>

    $vm = Get-AzureRmVM –ResourceGroupName "LabRG" –Name "MyVM"
    $output = .\PS-ChildRunbook.ps1 –VM $vm –RepeatCount 2 –Restart $true


## <a name="starting-a-child-runbook-using-cmdlet"></a><span data-ttu-id="c8436-135">Parancsmag használatával gyermekrunbook indítása</span><span class="sxs-lookup"><span data-stu-id="c8436-135">Starting a child runbook using cmdlet</span></span>
<span data-ttu-id="c8436-136">Használhatja a hello [Start-AzureRmAutomationRunbook](https://msdn.microsoft.com/library/mt603661.aspx) parancsmag toostart a runbook [toostart runbookkal a Windows PowerShell](automation-starting-a-runbook.md#starting-a-runbook-with-windows-powershell).</span><span class="sxs-lookup"><span data-stu-id="c8436-136">You can use hello [Start-AzureRmAutomationRunbook](https://msdn.microsoft.com/library/mt603661.aspx) cmdlet toostart a runbook as described in [toostart a runbook with Windows PowerShell](automation-starting-a-runbook.md#starting-a-runbook-with-windows-powershell).</span></span> <span data-ttu-id="c8436-137">Ez a parancsmag használati két módja van.</span><span class="sxs-lookup"><span data-stu-id="c8436-137">There are two modes of use for this cmdlet.</span></span>  <span data-ttu-id="c8436-138">Az egyik mód hello parancsmag adja vissza hello feladatazonosító, amint a gyermekrunbook hello hello gyermek feladat jön létre.</span><span class="sxs-lookup"><span data-stu-id="c8436-138">In one mode, hello cmdlet returns hello job id as soon as hello child job is created for hello child runbook.</span></span>  <span data-ttu-id="c8436-139">A más módját, amely engedélyezi a hello megadásával hello **-Várjon, amíg** paraméter, hello parancsmag megvárja hello gyermek feladat befejeződik, és visszatér a hello kimeneti hello gyermek runbook.</span><span class="sxs-lookup"><span data-stu-id="c8436-139">In hello other mode, which you enable by specifying hello **-wait** parameter, hello cmdlet will wait until hello child job finishes and will return hello output from hello child runbook.</span></span>

<span data-ttu-id="c8436-140">a parancsmaggal indított gyermekrunbook hello feladatot a szülőrunbook hello külön feladatot fog futni.</span><span class="sxs-lookup"><span data-stu-id="c8436-140">hello job from a child runbook started with a cmdlet will run in a separate job from hello parent runbook.</span></span> <span data-ttu-id="c8436-141">Ez több feladatot eredményez, mint hello beágyazottan indított runbook meghívása és nehezebb tootrack válnak.</span><span class="sxs-lookup"><span data-stu-id="c8436-141">This results in more jobs than invoking hello runbook inline and makes them more difficult tootrack.</span></span> <span data-ttu-id="c8436-142">hello szülő több gyermekrunbookot aszinkron módon nélkül indíthatják minden toocomplete vár.</span><span class="sxs-lookup"><span data-stu-id="c8436-142">hello parent can start multiple child runbooks asynchronously without waiting for each toocomplete.</span></span> <span data-ttu-id="c8436-143">A párhuzamos végrehajtás hello gyermekrunbookokat hívja, hogy ilyen típusú hello szülőrunbook kellene toouse hello [parallel kulcsszót](automation-powershell-workflow.md#parallel-processing).</span><span class="sxs-lookup"><span data-stu-id="c8436-143">For that same kind of parallel execution calling hello child runbooks inline, hello parent runbook would need toouse hello [parallel keyword](automation-powershell-workflow.md#parallel-processing).</span></span>

<span data-ttu-id="c8436-144">A parancsmaggal indított gyermekrunbook paramétereinek megadott egy kivonattáblát a [Runbook-paraméterek](automation-starting-a-runbook.md#runbook-parameters).</span><span class="sxs-lookup"><span data-stu-id="c8436-144">Parameters for a child runbook started with a cmdlet are provided as a hashtable as described in [Runbook Parameters](automation-starting-a-runbook.md#runbook-parameters).</span></span> <span data-ttu-id="c8436-145">Csak egyszerű adattípusok használhatók.</span><span class="sxs-lookup"><span data-stu-id="c8436-145">Only simple data types can be used.</span></span> <span data-ttu-id="c8436-146">Ha hello runbook rendelkezik összetett adattípusú paraméterrel, majd, beágyazottan kell meghívni.</span><span class="sxs-lookup"><span data-stu-id="c8436-146">If hello runbook has a parameter with a complex data type, then it must be called inline.</span></span>

### <a name="example"></a><span data-ttu-id="c8436-147">Példa</span><span class="sxs-lookup"><span data-stu-id="c8436-147">Example</span></span>
<span data-ttu-id="c8436-148">hello alábbi példa egy gyermek runbook paraméterek és kezdődik majd vár hello Start-AzureRmAutomationRunbook használatával toocomplete-várja meg a paramétert.</span><span class="sxs-lookup"><span data-stu-id="c8436-148">hello following example starts a child runbook with parameters and then waits for it toocomplete using hello Start-AzureRmAutomationRunbook -wait parameter.</span></span> <span data-ttu-id="c8436-149">Ezt követően a hello gyermekrunbook begyűjti a kimenetet.</span><span class="sxs-lookup"><span data-stu-id="c8436-149">Once completed, its output is collected from hello child runbook.</span></span>

    $params = @{"VMName"="MyVM";"RepeatCount"=2;"Restart"=$true} 
    $joboutput = Start-AzureRmAutomationRunbook –AutomationAccountName "MyAutomationAccount" –Name "Test-ChildRunbook" -ResourceGroupName "LabRG" –Parameters $params –wait


## <a name="comparison-of-methods-for-calling-a-child-runbook"></a><span data-ttu-id="c8436-150">A gyermekrunbookok meghívására szolgáló módszerek összehasonlítása</span><span class="sxs-lookup"><span data-stu-id="c8436-150">Comparison of methods for calling a child runbook</span></span>
<span data-ttu-id="c8436-151">hello következő táblázat összefoglalja hello különbségei hello két módszert egy runbook másik runbookból hívja.</span><span class="sxs-lookup"><span data-stu-id="c8436-151">hello following table summarizes hello differences between hello two methods for calling a runbook from another runbook.</span></span>

|  | <span data-ttu-id="c8436-152">Beágyazott</span><span class="sxs-lookup"><span data-stu-id="c8436-152">Inline</span></span> | <span data-ttu-id="c8436-153">Parancsmag</span><span class="sxs-lookup"><span data-stu-id="c8436-153">Cmdlet</span></span> |
|:--- |:--- |:--- |
| <span data-ttu-id="c8436-154">Feladat</span><span class="sxs-lookup"><span data-stu-id="c8436-154">Job</span></span> |<span data-ttu-id="c8436-155">Gyermek runbookokat hello azonos hello szülőként feladat futtatását.</span><span class="sxs-lookup"><span data-stu-id="c8436-155">Child runbooks run in hello same job as hello parent.</span></span> |<span data-ttu-id="c8436-156">Egy külön feladat hello gyermek runbook jön létre.</span><span class="sxs-lookup"><span data-stu-id="c8436-156">A separate job is created for hello child runbook.</span></span> |
| <span data-ttu-id="c8436-157">Végrehajtás</span><span class="sxs-lookup"><span data-stu-id="c8436-157">Execution</span></span> |<span data-ttu-id="c8436-158">A folytatás előtt a szülőrunbook megvárja a hello gyermek runbook toocomplete.</span><span class="sxs-lookup"><span data-stu-id="c8436-158">Parent runbook waits for hello child runbook toocomplete before continuing.</span></span> |<span data-ttu-id="c8436-159">Szülő runbook továbbra is fennáll, a gyermekrunbook indítását követően azonnal *vagy* szülőrunbook megvárja-e a hello gyermek feladat toofinish.</span><span class="sxs-lookup"><span data-stu-id="c8436-159">Parent runbook continues immediately after child runbook is started *or* parent runbook waits for hello child job toofinish.</span></span> |
| <span data-ttu-id="c8436-160">Kimenet</span><span class="sxs-lookup"><span data-stu-id="c8436-160">Output</span></span> |<span data-ttu-id="c8436-161">Szülőrunbook közvetlenül lekérheti kimeneti gyermekrunbook.</span><span class="sxs-lookup"><span data-stu-id="c8436-161">Parent runbook can directly get output from child runbook.</span></span> |<span data-ttu-id="c8436-162">Szülő runbook kell lekérnie a kimenetet gyermek runbook-feladat *vagy* szülőrunbook közvetlenül lekérheti kimeneti gyermekrunbook.</span><span class="sxs-lookup"><span data-stu-id="c8436-162">Parent runbook must retrieve output from child runbook job *or* parent runbook can directly get output from child runbook.</span></span> |
| <span data-ttu-id="c8436-163">Paraméterek</span><span class="sxs-lookup"><span data-stu-id="c8436-163">Parameters</span></span> |<span data-ttu-id="c8436-164">Hello gyermekrunbook paramétereinek értékeit külön kell meghatározni, és bármilyen adattípus használható.</span><span class="sxs-lookup"><span data-stu-id="c8436-164">Values for hello child runbook parameters are specified separately and can use any data type.</span></span> |<span data-ttu-id="c8436-165">Értékek hello gyermekrunbook paraméterei egyesíthetők kell egyetlen kivonattáblába, és csak egyszerű, a tömb, és objektum-adattípust adott használja ki a JSON-szerializálást.</span><span class="sxs-lookup"><span data-stu-id="c8436-165">Values for hello child runbook parameters must be combined into a single hashtable and can only include simple, array, and object data types that leverage JSON serialization.</span></span> |
| <span data-ttu-id="c8436-166">Automation-fiók</span><span class="sxs-lookup"><span data-stu-id="c8436-166">Automation Account</span></span> |<span data-ttu-id="c8436-167">Szülő runbook csak használhatja gyermekrunbook hello azonos automation-fiók.</span><span class="sxs-lookup"><span data-stu-id="c8436-167">Parent runbook can only use child runbook in hello same automation account.</span></span> |<span data-ttu-id="c8436-168">Szülő runbook használhatja a gyermek runbook bármely hello az automation-fiók azonos Azure-előfizetés és még egy másik előfizetést, ha a kapcsolat tooit rendelkezik.</span><span class="sxs-lookup"><span data-stu-id="c8436-168">Parent runbook can use child runbook from any automation account from hello same Azure subscription and even a different subscription if you have a connection tooit.</span></span> |
| <span data-ttu-id="c8436-169">Közzététel</span><span class="sxs-lookup"><span data-stu-id="c8436-169">Publishing</span></span> |<span data-ttu-id="c8436-170">Gyermekrunbook közzé kell tenni, mielőtt a szülőrunbook közzététele.</span><span class="sxs-lookup"><span data-stu-id="c8436-170">Child runbook must be published before parent runbook is published.</span></span> |<span data-ttu-id="c8436-171">Gyermekrunbook közzé kell tenni a szülőrunbook indítása előtt.</span><span class="sxs-lookup"><span data-stu-id="c8436-171">Child runbook must be published any time before parent runbook is started.</span></span> |

## <a name="next-steps"></a><span data-ttu-id="c8436-172">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="c8436-172">Next steps</span></span>
* [<span data-ttu-id="c8436-173">Runbook elindítása az Azure Automationben</span><span class="sxs-lookup"><span data-stu-id="c8436-173">Starting a runbook in Azure Automation</span></span>](automation-starting-a-runbook.md)
* [<span data-ttu-id="c8436-174">Runbook-kimenet és üzenetek az Azure Automationben</span><span class="sxs-lookup"><span data-stu-id="c8436-174">Runbook output and messages in Azure Automation</span></span>](automation-runbook-output-and-messages.md)

