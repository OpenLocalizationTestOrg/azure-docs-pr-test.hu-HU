---
title: Azure Automation runbookjai gyermek |} Microsoft Docs
description: "Az Azure Automationben runbook indítása másik runbookból és a közöttük információk megosztása a különböző módszereket írja le."
services: automation
documentationcenter: 
author: mgoedtel
manager: jwhit
editor: tysonn
ms.assetid: 919887b9-43e2-4c16-883c-f81807fe37db
ms.service: automation
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 02/02/2017
ms.author: magoedte;bwren
ms.openlocfilehash: a605d278dbbda9613b91007ea6a7042403a7a6ff
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 07/11/2017
---
# <a name="child-runbooks-in-azure-automation"></a><span data-ttu-id="8c823-103">Azure Automation runbookjai gyermek</span><span class="sxs-lookup"><span data-stu-id="8c823-103">Child runbooks in Azure Automation</span></span>
<span data-ttu-id="8c823-104">Az Azure Automationben egy más runbookok által használható önálló funkcióval újrafelhasználható, moduláris runbookok írása a legjobb.</span><span class="sxs-lookup"><span data-stu-id="8c823-104">It is a best practice in Azure Automation to write reusable, modular runbooks with a discrete function that can be used by other runbooks.</span></span> <span data-ttu-id="8c823-105">Gyakran a szülő runbook fel fogja hívni egy vagy több gyermek runbook végrehajtani a kért funkciót.</span><span class="sxs-lookup"><span data-stu-id="8c823-105">A parent runbook will often call one or more child runbooks to perform required functionality.</span></span> <span data-ttu-id="8c823-106">A gyermek runbook hívásához két módja van, és mindegyik rendelkezik-e különböző módszer közötti különbségeket tisztában kell lennie, hogy megállapíthassa, amely a különböző forgatókönyvek esetén ajánlott lesz.</span><span class="sxs-lookup"><span data-stu-id="8c823-106">There are two ways to call a child runbook, and each has distinct differences that you should understand so that you can determine which will be best for your different scenarios.</span></span>

## <a name="invoking-a-child-runbook-using-inline-execution"></a><span data-ttu-id="8c823-107">Beágyazott Futtatás használatával gyermek runbook meghívása</span><span class="sxs-lookup"><span data-stu-id="8c823-107">Invoking a child runbook using inline execution</span></span>
<span data-ttu-id="8c823-108">A beágyazottan indított runbook másik runbookból meghívni, a runbook nevét használja, és adjon meg értékeket a paraméterek ugyanúgy egy tevékenységet vagy egy parancsmagot használhatja.</span><span class="sxs-lookup"><span data-stu-id="8c823-108">To invoke a runbook inline from another runbook, you use the name of the runbook and provide values for its parameters exactly like you would use an activity or cmdlet.</span></span>  <span data-ttu-id="8c823-109">Automation-fiók minden forgatókönyve érhetők el minden más ily módon használható.</span><span class="sxs-lookup"><span data-stu-id="8c823-109">All runbooks in the same Automation account are available to all others to be used in this manner.</span></span> <span data-ttu-id="8c823-110">A szülőrunbook megvárja a gyermekrunbook befejeződjön, mielőtt továbblép a következő sorra, és minden kimenetet közvetlenül a szülő visszaadja.</span><span class="sxs-lookup"><span data-stu-id="8c823-110">The parent runbook will wait for the child runbook to complete before moving to the next line, and any output is returned directly to the parent.</span></span>

<span data-ttu-id="8c823-111">A beágyazottan indított runbook meghívásakor ugyanazt a feladatot, mint a szülőrunbook futtatja.</span><span class="sxs-lookup"><span data-stu-id="8c823-111">When you invoke a runbook inline, it runs in the same job as the parent runbook.</span></span> <span data-ttu-id="8c823-112">Nincs a gyermekrunbook annak feladatelőzményeiben a feladatelőzmények feltüntetése lesz.</span><span class="sxs-lookup"><span data-stu-id="8c823-112">There will be no indication in the job history of the child runbook that it ran.</span></span> <span data-ttu-id="8c823-113">Kivételeket és adatfolyam-a gyermekrunbook kimenetét a szülő társítva lesz.</span><span class="sxs-lookup"><span data-stu-id="8c823-113">Any exceptions and any stream output from the child runbook will be associated with the parent.</span></span> <span data-ttu-id="8c823-114">Ez kevesebb feladatot eredményez, és megkönnyíti a nyomon követését és elhárításához, mivel a szülő feladatukhoz társított és az adatfolyam-kimenetét bármelyikét a gyermekrunbook összes kivételét.</span><span class="sxs-lookup"><span data-stu-id="8c823-114">This results in fewer jobs and makes them easier to track and to troubleshoot since any exceptions thrown by the child runbook and any of its stream output are associated with the parent job.</span></span>

<span data-ttu-id="8c823-115">Egy runbook közzétételekor runbookok gyermekrunbookoknak már közzé kell tenni.</span><span class="sxs-lookup"><span data-stu-id="8c823-115">When a runbook is published, any child runbooks that it calls must already be published.</span></span> <span data-ttu-id="8c823-116">Ennek oka az Azure Automation runbookok társítást hoz létre, amikor gyermekrunbookkal.</span><span class="sxs-lookup"><span data-stu-id="8c823-116">This is because Azure Automation builds an association with any child runbooks when a runbook is compiled.</span></span> <span data-ttu-id="8c823-117">Ellenkező esetben a szülőrunbook közzététele sikeres megjelenik, de kivételt hoz létre, amikor elindul.</span><span class="sxs-lookup"><span data-stu-id="8c823-117">If they aren’t, the parent runbook will appear to publish properly, but will generate an exception when it’s started.</span></span> <span data-ttu-id="8c823-118">Ez akkor fordul elő, ha a szülő runbook újbóli ahhoz, hogy a megfelelő hivatkozást a gyermekrunbookokra.</span><span class="sxs-lookup"><span data-stu-id="8c823-118">If this happens, you can republish the parent runbook in order to properly reference the child runbooks.</span></span> <span data-ttu-id="8c823-119">Nem kell a szülő runbook ismételt közzététele, ha a gyermekrunbookokra bármelyikét van módosítani, mert a társítás fog létre lett hozva.</span><span class="sxs-lookup"><span data-stu-id="8c823-119">You do not need to republish the parent runbook if any of the child runbooks are changed because the association will have already been created.</span></span>

<span data-ttu-id="8c823-120">A gyermekrunbook beágyazottan meghívott paraméterei bármilyen adattípusúak, többek között összetett objektumok lehet, és nincs nincs [JSON-szerializálás](automation-starting-a-runbook.md#runbook-parameters) , ha a runbook az Azure felügyeleti portál használatával, vagy a a Start-AzureRmAutomationRunbook parancsmag.</span><span class="sxs-lookup"><span data-stu-id="8c823-120">The parameters of a child runbook called inline can be any data type including complex objects, and there is no [JSON serialization](automation-starting-a-runbook.md#runbook-parameters) as there is when you start the runbook using the Azure Management Portal or with the Start-AzureRmAutomationRunbook cmdlet.</span></span>

### <a name="runbook-types"></a><span data-ttu-id="8c823-121">Runbook-típusok</span><span class="sxs-lookup"><span data-stu-id="8c823-121">Runbook types</span></span>
<span data-ttu-id="8c823-122">Milyen típusú hívhatják meg egymással:</span><span class="sxs-lookup"><span data-stu-id="8c823-122">Which types can call each other:</span></span>

* <span data-ttu-id="8c823-123">A [PowerShell runbook](automation-runbook-types.md#powershell-runbooks) és [grafikus forgatókönyvek](automation-runbook-types.md#graphical-runbooks) hívhatják meg minden egyéb beágyazott (mindkettő PowerShell-alapú).</span><span class="sxs-lookup"><span data-stu-id="8c823-123">A [PowerShell runbook](automation-runbook-types.md#powershell-runbooks) and [Graphical runbooks](automation-runbook-types.md#graphical-runbooks) can call each other inline (both are PowerShell based).</span></span>
* <span data-ttu-id="8c823-124">A [PowerShell-munkafolyamati forgatókönyv](automation-runbook-types.md#powershell-workflow-runbooks) és grafikus PowerShell-munkafolyamati forgatókönyvek hívhatják meg minden egyéb beágyazott (mindkettő PowerShell munkafolyamat alapú)</span><span class="sxs-lookup"><span data-stu-id="8c823-124">A [PowerShell Workflow runbook](automation-runbook-types.md#powershell-workflow-runbooks) and Graphical PowerShell Workflow runbooks can call each other inline (both are PowerShell Workflow based)</span></span>
* <span data-ttu-id="8c823-125">A PowerShell és a PowerShell-munkafolyamati típusainak nem hívható meg egymással beágyazott, és a Start-AzureRmAutomationRunbook.</span><span class="sxs-lookup"><span data-stu-id="8c823-125">The PowerShell types and the PowerShell Workflow types can’t call each other inline, and must use Start-AzureRmAutomationRunbook.</span></span>

<span data-ttu-id="8c823-126">Ha sorrendben függetlenül attól, hogy közzététele:</span><span class="sxs-lookup"><span data-stu-id="8c823-126">When does publish order matter:</span></span>

* <span data-ttu-id="8c823-127">Csak runbookok Közzététel sorrendje számít, a PowerShell munkafolyamatok és a grafikus PowerShell-munkafolyamati forgatókönyvek.</span><span class="sxs-lookup"><span data-stu-id="8c823-127">The publish order of runbooks only matters for PowerShell Workflow and Graphical PowerShell Workflow runbooks.</span></span>

<span data-ttu-id="8c823-128">Meghívja a beágyazott Futtatás használatával grafikus vagy PowerShell-munkafolyamati gyermekrunbook, csak a runbook nevét használja.</span><span class="sxs-lookup"><span data-stu-id="8c823-128">When you call a Graphical or PowerShell Workflow child runbook using inline execution, you just use the name of the runbook.</span></span>  <span data-ttu-id="8c823-129">A PowerShell gyermek runbook hívásakor a neve előtt kell *.\\*  adhatja meg, hogy a parancsfájl a helyi könyvtárban található.</span><span class="sxs-lookup"><span data-stu-id="8c823-129">When you call a PowerShell child runbook, you must preceded its name with *.\\* to specify that the script is located in the local directory.</span></span> 

### <a name="example"></a><span data-ttu-id="8c823-130">Példa</span><span class="sxs-lookup"><span data-stu-id="8c823-130">Example</span></span>
<span data-ttu-id="8c823-131">A következő példa egy teszt gyermekrunbook, amely három paramétert, egy összetett objektum, egy egész számot és egy logikai érték fogad hív meg.</span><span class="sxs-lookup"><span data-stu-id="8c823-131">The following example invokes a test child runbook that accepts three parameters, a complex object, an integer, and a boolean.</span></span> <span data-ttu-id="8c823-132">A gyermek runbook kimeneti hozzá van rendelve egy változót.</span><span class="sxs-lookup"><span data-stu-id="8c823-132">The output of the child runbook is assigned to a variable.</span></span>  <span data-ttu-id="8c823-133">Ebben az esetben a gyermekrunbook egy PowerShell-munkafolyamati forgatókönyv</span><span class="sxs-lookup"><span data-stu-id="8c823-133">In this case, the child runbook is a PowerShell Workflow runbook</span></span>

    $vm = Get-AzureRmVM –ResourceGroupName "LabRG" –Name "MyVM"
    $output = PSWF-ChildRunbook –VM $vm –RepeatCount 2 –Restart $true

<span data-ttu-id="8c823-134">Az alábbiakban az ugyanebben a példában a gyermek egy PowerShell-forgatókönyv használatával.</span><span class="sxs-lookup"><span data-stu-id="8c823-134">Following is the same example using a PowerShell runbook as the child.</span></span>

    $vm = Get-AzureRmVM –ResourceGroupName "LabRG" –Name "MyVM"
    $output = .\PS-ChildRunbook.ps1 –VM $vm –RepeatCount 2 –Restart $true


## <a name="starting-a-child-runbook-using-cmdlet"></a><span data-ttu-id="8c823-135">Parancsmag használatával gyermekrunbook indítása</span><span class="sxs-lookup"><span data-stu-id="8c823-135">Starting a child runbook using cmdlet</span></span>
<span data-ttu-id="8c823-136">Használhatja a [Start-AzureRmAutomationRunbook](https://msdn.microsoft.com/library/mt603661.aspx) runbook indítása, a parancsmag [runbook indítása a Windows PowerShell-lel](automation-starting-a-runbook.md#starting-a-runbook-with-windows-powershell).</span><span class="sxs-lookup"><span data-stu-id="8c823-136">You can use the [Start-AzureRmAutomationRunbook](https://msdn.microsoft.com/library/mt603661.aspx) cmdlet to start a runbook as described in [To start a runbook with Windows PowerShell](automation-starting-a-runbook.md#starting-a-runbook-with-windows-powershell).</span></span> <span data-ttu-id="8c823-137">Ez a parancsmag használati két módja van.</span><span class="sxs-lookup"><span data-stu-id="8c823-137">There are two modes of use for this cmdlet.</span></span>  <span data-ttu-id="8c823-138">Az egyik mód a parancsmag adja vissza a feladatazonosítót, amint a gyermekrunbook a gyermek feladat jön létre.</span><span class="sxs-lookup"><span data-stu-id="8c823-138">In one mode, the cmdlet returns the job id as soon as the child job is created for the child runbook.</span></span>  <span data-ttu-id="8c823-139">A más módban, amely megadásával engedélyezi a **-Várjon, amíg** paraméter, a parancsmag megvárja, amíg a gyermek feladat befejeződik, és a kimeneti visszatér a gyermek runbook.</span><span class="sxs-lookup"><span data-stu-id="8c823-139">In the other mode, which you enable by specifying the **-wait** parameter, the cmdlet will wait until the child job finishes and will return the output from the child runbook.</span></span>

<span data-ttu-id="8c823-140">A parancsmaggal indított gyermekrunbook feladatot a szülő runbook tart egy külön feladat.</span><span class="sxs-lookup"><span data-stu-id="8c823-140">The job from a child runbook started with a cmdlet will run in a separate job from the parent runbook.</span></span> <span data-ttu-id="8c823-141">Ez több feladatot eredményez, mint a runbook soron belüli meghívása, és így nehezebb.</span><span class="sxs-lookup"><span data-stu-id="8c823-141">This results in more jobs than invoking the runbook inline and makes them more difficult to track.</span></span> <span data-ttu-id="8c823-142">A szülő több gyermekrunbookot aszinkron módon nélkül indíthatják befejezéséhez mindegyik esetében megvárná a.</span><span class="sxs-lookup"><span data-stu-id="8c823-142">The parent can start multiple child runbooks asynchronously without waiting for each to complete.</span></span> <span data-ttu-id="8c823-143">Az, hogy azonos típusú párhuzamos futtatáshoz, hívja meg a gyermekrunbookokat, a szülő runbook kell alkalmaznia a [parallel kulcsszót](automation-powershell-workflow.md#parallel-processing).</span><span class="sxs-lookup"><span data-stu-id="8c823-143">For that same kind of parallel execution calling the child runbooks inline, the parent runbook would need to use the [parallel keyword](automation-powershell-workflow.md#parallel-processing).</span></span>

<span data-ttu-id="8c823-144">A parancsmaggal indított gyermekrunbook paramétereinek megadott egy kivonattáblát a [Runbook-paraméterek](automation-starting-a-runbook.md#runbook-parameters).</span><span class="sxs-lookup"><span data-stu-id="8c823-144">Parameters for a child runbook started with a cmdlet are provided as a hashtable as described in [Runbook Parameters](automation-starting-a-runbook.md#runbook-parameters).</span></span> <span data-ttu-id="8c823-145">Csak egyszerű adattípusok használhatók.</span><span class="sxs-lookup"><span data-stu-id="8c823-145">Only simple data types can be used.</span></span> <span data-ttu-id="8c823-146">Ha a runbook rendelkezik összetett adattípusú paraméterrel, majd, beágyazottan kell meghívni.</span><span class="sxs-lookup"><span data-stu-id="8c823-146">If the runbook has a parameter with a complex data type, then it must be called inline.</span></span>

### <a name="example"></a><span data-ttu-id="8c823-147">Példa</span><span class="sxs-lookup"><span data-stu-id="8c823-147">Example</span></span>
<span data-ttu-id="8c823-148">Az alábbi példa paraméterekkel rendelkező gyermekrunbook elindul, és majd megvárja, amíg befejeződik a Start-AzureRmAutomationRunbook használatával – várakozási paraméter.</span><span class="sxs-lookup"><span data-stu-id="8c823-148">The following example starts a child runbook with parameters and then waits for it to complete using the Start-AzureRmAutomationRunbook -wait parameter.</span></span> <span data-ttu-id="8c823-149">Ezt követően a gyermek runbook begyűjti a kimenetet.</span><span class="sxs-lookup"><span data-stu-id="8c823-149">Once completed, its output is collected from the child runbook.</span></span>

    $params = @{"VMName"="MyVM";"RepeatCount"=2;"Restart"=$true} 
    $joboutput = Start-AzureRmAutomationRunbook –AutomationAccountName "MyAutomationAccount" –Name "Test-ChildRunbook" -ResourceGroupName "LabRG" –Parameters $params –wait


## <a name="comparison-of-methods-for-calling-a-child-runbook"></a><span data-ttu-id="8c823-150">A gyermekrunbookok meghívására szolgáló módszerek összehasonlítása</span><span class="sxs-lookup"><span data-stu-id="8c823-150">Comparison of methods for calling a child runbook</span></span>
<span data-ttu-id="8c823-151">A következő táblázat összefoglalja, a két módszer egy runbook másik runbookból hívja.</span><span class="sxs-lookup"><span data-stu-id="8c823-151">The following table summarizes the differences between the two methods for calling a runbook from another runbook.</span></span>

|  | <span data-ttu-id="8c823-152">Beágyazott</span><span class="sxs-lookup"><span data-stu-id="8c823-152">Inline</span></span> | <span data-ttu-id="8c823-153">Parancsmag</span><span class="sxs-lookup"><span data-stu-id="8c823-153">Cmdlet</span></span> |
|:--- |:--- |:--- |
| <span data-ttu-id="8c823-154">Feladat</span><span class="sxs-lookup"><span data-stu-id="8c823-154">Job</span></span> |<span data-ttu-id="8c823-155">Gyermekrunbookok a szülővel azonos feladatban fut.</span><span class="sxs-lookup"><span data-stu-id="8c823-155">Child runbooks run in the same job as the parent.</span></span> |<span data-ttu-id="8c823-156">A gyermekrunbook egy külön feladat jön létre.</span><span class="sxs-lookup"><span data-stu-id="8c823-156">A separate job is created for the child runbook.</span></span> |
| <span data-ttu-id="8c823-157">Végrehajtás</span><span class="sxs-lookup"><span data-stu-id="8c823-157">Execution</span></span> |<span data-ttu-id="8c823-158">Szülőrunbook megvárja a gyermekrunbook befejeződjön, mielőtt továbblépne.</span><span class="sxs-lookup"><span data-stu-id="8c823-158">Parent runbook waits for the child runbook to complete before continuing.</span></span> |<span data-ttu-id="8c823-159">Szülő runbook továbbra is fennáll, a gyermekrunbook indítását követően azonnal *vagy* szülőrunbook megvárja, a gyermek feladat befejeződésére.</span><span class="sxs-lookup"><span data-stu-id="8c823-159">Parent runbook continues immediately after child runbook is started *or* parent runbook waits for the child job to finish.</span></span> |
| <span data-ttu-id="8c823-160">Kimenet</span><span class="sxs-lookup"><span data-stu-id="8c823-160">Output</span></span> |<span data-ttu-id="8c823-161">Szülőrunbook közvetlenül lekérheti kimeneti gyermekrunbook.</span><span class="sxs-lookup"><span data-stu-id="8c823-161">Parent runbook can directly get output from child runbook.</span></span> |<span data-ttu-id="8c823-162">Szülő runbook kell lekérnie a kimenetet gyermek runbook-feladat *vagy* szülőrunbook közvetlenül lekérheti kimeneti gyermekrunbook.</span><span class="sxs-lookup"><span data-stu-id="8c823-162">Parent runbook must retrieve output from child runbook job *or* parent runbook can directly get output from child runbook.</span></span> |
| <span data-ttu-id="8c823-163">Paraméterek</span><span class="sxs-lookup"><span data-stu-id="8c823-163">Parameters</span></span> |<span data-ttu-id="8c823-164">A gyermekrunbook paramétereinek értékeit külön kell meghatározni, és bármilyen adattípus használható.</span><span class="sxs-lookup"><span data-stu-id="8c823-164">Values for the child runbook parameters are specified separately and can use any data type.</span></span> |<span data-ttu-id="8c823-165">Értékek a gyermekrunbook paramétereinek egyesíthetők kell egyetlen kivonattáblába, és csak egyszerű, a tömb és az objektum adattípusok, hogy használja ki a JSON-szerializálást.</span><span class="sxs-lookup"><span data-stu-id="8c823-165">Values for the child runbook parameters must be combined into a single hashtable and can only include simple, array, and object data types that leverage JSON serialization.</span></span> |
| <span data-ttu-id="8c823-166">Automation-fiók</span><span class="sxs-lookup"><span data-stu-id="8c823-166">Automation Account</span></span> |<span data-ttu-id="8c823-167">Szülő runbook használja a gyermek runbook ugyanazt az automation-fiókban.</span><span class="sxs-lookup"><span data-stu-id="8c823-167">Parent runbook can only use child runbook in the same automation account.</span></span> |<span data-ttu-id="8c823-168">Szülő runbook bármely azonos Azure-előfizetést, és még egy másik előfizetésben található automation-fiók a gyermekrunbook is használhat, ha a hozzá való csatlakozást.</span><span class="sxs-lookup"><span data-stu-id="8c823-168">Parent runbook can use child runbook from any automation account from the same Azure subscription and even a different subscription if you have a connection to it.</span></span> |
| <span data-ttu-id="8c823-169">Közzététel</span><span class="sxs-lookup"><span data-stu-id="8c823-169">Publishing</span></span> |<span data-ttu-id="8c823-170">Gyermekrunbook közzé kell tenni, mielőtt a szülőrunbook közzététele.</span><span class="sxs-lookup"><span data-stu-id="8c823-170">Child runbook must be published before parent runbook is published.</span></span> |<span data-ttu-id="8c823-171">Gyermekrunbook közzé kell tenni a szülőrunbook indítása előtt.</span><span class="sxs-lookup"><span data-stu-id="8c823-171">Child runbook must be published any time before parent runbook is started.</span></span> |

## <a name="next-steps"></a><span data-ttu-id="8c823-172">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="8c823-172">Next steps</span></span>
* [<span data-ttu-id="8c823-173">Runbook elindítása az Azure Automationben</span><span class="sxs-lookup"><span data-stu-id="8c823-173">Starting a runbook in Azure Automation</span></span>](automation-starting-a-runbook.md)
* [<span data-ttu-id="8c823-174">Runbook-kimenet és üzenetek az Azure Automationben</span><span class="sxs-lookup"><span data-stu-id="8c823-174">Runbook output and messages in Azure Automation</span></span>](automation-runbook-output-and-messages.md)

