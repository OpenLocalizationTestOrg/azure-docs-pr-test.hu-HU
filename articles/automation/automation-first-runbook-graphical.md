---
title: "Az első Azure Automation grafikus runbookom | Microsoft Azure"
description: "Ez az oktatóanyag bemutatja egy egyszerű grafikus forgatókönyv létrehozását, tesztelését és közzétételét."
services: automation
documentationcenter: 
author: mgoedtel
manager: jwhit
editor: 
keywords: runbook, runbook-sablon, runbook automation, azure runbook
ms.assetid: dcb88f19-ed2b-4372-9724-6625cd287c8a
ms.service: automation
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 05/17/2017
ms.author: magoedte;bwren
ms.openlocfilehash: 9d4b28416376482247127698bec7c99b83308885
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 07/11/2017
---
# <a name="my-first-graphical-runbook"></a><span data-ttu-id="7d5b1-104">Az első grafikus forgatókönyvem</span><span class="sxs-lookup"><span data-stu-id="7d5b1-104">My first graphical runbook</span></span>

> [!div class="op_single_selector"]
> * [<span data-ttu-id="7d5b1-105">Grafikus</span><span class="sxs-lookup"><span data-stu-id="7d5b1-105">Graphical</span></span>](automation-first-runbook-graphical.md)
> * [<span data-ttu-id="7d5b1-106">PowerShell</span><span class="sxs-lookup"><span data-stu-id="7d5b1-106">PowerShell</span></span>](automation-first-runbook-textual-powershell.md)
> * [<span data-ttu-id="7d5b1-107">PowerShell-munkafolyamat</span><span class="sxs-lookup"><span data-stu-id="7d5b1-107">PowerShell Workflow</span></span>](automation-first-runbook-textual.md)
> 
> 

<span data-ttu-id="7d5b1-108">Egy Azure Automation [grafikus forgatókönyv](automation-runbook-types.md#graphical-runbooks) létrehozását bemutató oktatóanyag.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-108">This tutorial walks you through the creation of a [graphical runbook](automation-runbook-types.md#graphical-runbooks) in Azure Automation.</span></span>  <span data-ttu-id="7d5b1-109">Egy egyszerű runbookkal kezdünk, amelyet tesztelünk és közzé teszünk,valamint bemutatjuk az állapotának nyomon követését is.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-109">We start with a simple runbook that tests and publishes while we explain how to track the status of the runbook job.</span></span>  <span data-ttu-id="7d5b1-110">Ezután módosítjuk a runbookot, hogy ténylegesen kezeljen Azure-erőforrásokat, ebben az esetben elindítson egy Azure-beli virtuális gépet.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-110">Then we modify the runbook to actually manage Azure resources, in this case starting an Azure virtual machine.</span></span>  <span data-ttu-id="7d5b1-111">Ezt követen, az oktatóanyag befejezéseként még robusztusabbá tesszük a forgatókönyvet: forgatókönyv-paramétereket és feltételes hivatkozásokat adunk hozzá.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-111">Then we complete the tutorial by making the runbook more robust by adding runbook parameters and conditional links.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="7d5b1-112">Előfeltételek</span><span class="sxs-lookup"><span data-stu-id="7d5b1-112">Prerequisites</span></span>
<span data-ttu-id="7d5b1-113">Az oktatóanyag elvégzéséhez a következőkre lesz szüksége.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-113">To complete this tutorial, you will need the following.</span></span>

* <span data-ttu-id="7d5b1-114">Egy Azure-előfizetés.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-114">Azure subscription.</span></span>  <span data-ttu-id="7d5b1-115">Ha még nem rendelkezik fiókkal, [aktiválhatja MSDN-előfizetői előnyeit](https://azure.microsoft.com/pricing/member-offers/msdn-benefits-details/), illetve <a href="/pricing/free-account/" target="_blank">[regisztrálhat egy ingyenes fiókot](https://azure.microsoft.com/free/).</span><span class="sxs-lookup"><span data-stu-id="7d5b1-115">If you don't have one yet, you can [activate your MSDN subscriber benefits](https://azure.microsoft.com/pricing/member-offers/msdn-benefits-details/) or <a href="/pricing/free-account/" target="_blank">[sign up for a free account](https://azure.microsoft.com/free/).</span></span>
* <span data-ttu-id="7d5b1-116">[Azure Automation-fiók](automation-sec-configure-azure-runas-account.md) a runbook tárolásához és az Azure erőforrásokban való hitelesítéshez.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-116">[Azure Automation account](automation-sec-configure-azure-runas-account.md) to hold the runbook and authenticate to Azure resources.</span></span>  <span data-ttu-id="7d5b1-117">Ennek a fióknak jogosultsággal kell rendelkeznie a virtuális gép elindításához és leállításához.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-117">This account must have permission to start and stop the virtual machine.</span></span>
* <span data-ttu-id="7d5b1-118">Egy Azure virtuális gép.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-118">An Azure virtual machine.</span></span>  <span data-ttu-id="7d5b1-119">Ezt a gépet leállítjuk és elindítjuk, tehát ne legyen éles használatban.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-119">We will stop and start this machine so it should not be production.</span></span>

## <a name="step-1---create-runbook"></a><span data-ttu-id="7d5b1-120">1. lépés – Runbook létrehozása</span><span class="sxs-lookup"><span data-stu-id="7d5b1-120">Step 1 - Create runbook</span></span>
<span data-ttu-id="7d5b1-121">Először egy egyszerű runbookot hozunk létre, amely a *Hello World* szöveget adja vissza.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-121">We start by creating a simple runbook that outputs the text *Hello World*.</span></span>

1. <span data-ttu-id="7d5b1-122">Az Azure Portalon nyissa meg az Automation-fiókját.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-122">In the Azure portal, open your Automation account.</span></span>  
   <span data-ttu-id="7d5b1-123">Az Automation-fiók oldala gyors áttekintést nyújt a fiókban levő erőforrásokról.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-123">The Automation account page gives you a quick view of the resources in this account.</span></span>  <span data-ttu-id="7d5b1-124">Valószínűleg rendelkezik már adategységekkel.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-124">You should already have some Assets.</span></span>  <span data-ttu-id="7d5b1-125">Ezek nagy része az új Automation-fiókhoz automatikusan hozzáadott modul.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-125">Most of those are the modules that are automatically included in a new Automation account.</span></span>  <span data-ttu-id="7d5b1-126">Rendelkeznie kell az [előfeltételek](#prerequisites) között említett hitelesítő adategységgel is.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-126">You should also have the Credential asset that's mentioned in the [prerequisites](#prerequisites).</span></span>
2. <span data-ttu-id="7d5b1-127">Kattintson a **Runbookok** csempére a forgatókönyvek listájának megnyitásához.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-127">Click the **Runbooks** tile to open the list of runbooks.</span></span><br> <span data-ttu-id="7d5b1-128">![Runbookok szabályozása](media/automation-first-runbook-graphical/runbooks-resources-tile.png)</span><span class="sxs-lookup"><span data-stu-id="7d5b1-128">![Runbooks control](media/automation-first-runbook-graphical/runbooks-resources-tile.png)</span></span>
3. <span data-ttu-id="7d5b1-129">Hozzon létre egy új forgatókönyvet a **Forgatókönyv hozzáadása**, majd az **Új forgatókönyv létrehozása** elemre kattintva.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-129">Create a new runbook by clicking on the **Add a runbook** button and then **Create a new runbook**.</span></span>
4. <span data-ttu-id="7d5b1-130">Adja a forgatókönyvnek a *MyFirstRunbook-Graphical* nevet.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-130">Give the runbook the name *MyFirstRunbook-Graphical*.</span></span>
5. <span data-ttu-id="7d5b1-131">Ebben az esetben egy [grafikus forgatókönyvet](automation-graphical-authoring-intro.md) hozunk létre, ezért a **Forgatókönyv típusának** válassza a **Grafikus** lehetőséget.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-131">In this case, we're going to create a [graphical runbook](automation-graphical-authoring-intro.md) so select **Graphical** for **Runbook type**.</span></span><br> <span data-ttu-id="7d5b1-132">![Új runbook](media/automation-first-runbook-graphical/create-new-runbook.png)</span><span class="sxs-lookup"><span data-stu-id="7d5b1-132">![New runbook](media/automation-first-runbook-graphical/create-new-runbook.png)</span></span><br>
6. <span data-ttu-id="7d5b1-133">A forgatókönyv létrehozásához és a grafikus szerkesztő megnyitásához kattintson a **Létrehozás** gombra.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-133">Click **Create** to create the runbook and open the graphical editor.</span></span>

## <a name="step-2---add-activities-to-the-runbook"></a><span data-ttu-id="7d5b1-134">2. lépés – Tevékenységek hozzáadása a forgatókönyvhöz</span><span class="sxs-lookup"><span data-stu-id="7d5b1-134">Step 2 - Add activities to the runbook</span></span>
<span data-ttu-id="7d5b1-135">A szerkesztő bal oldalán levő Könyvtárvezérlés segítségével kiválaszthatja a forgatókönyvhöz hozzáadni kívánt tevékenységeket.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-135">The Library control on the left side of the editor allows you to select activities to add to your runbook.</span></span>  <span data-ttu-id="7d5b1-136">A forgatókönyvhöz hozzáadunk egy **Write-Output** írási-olvasási parancsmagot is, hogy szöveget adjon ki a forgatókönyv.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-136">We're going to add a **Write-Output** cmdlet to output text from the runbook.</span></span>

1. <span data-ttu-id="7d5b1-137">A Könyvtárvezérlésben kattintson a keresési szövegmezőbe, és írja be a **Write-Output** kifejezést.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-137">In the Library control, click in the search textbox and type **Write-Output**.</span></span>  <span data-ttu-id="7d5b1-138">A keresési eredmények megjelennek alul.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-138">The search results will be displayed below.</span></span> <br> <span data-ttu-id="7d5b1-139">![Microsoft.PowerShell.Utility](media/automation-first-runbook-graphical/search-powershell-cmdlet-writeoutput.png)</span><span class="sxs-lookup"><span data-stu-id="7d5b1-139">![Microsoft.PowerShell.Utility](media/automation-first-runbook-graphical/search-powershell-cmdlet-writeoutput.png)</span></span>
2. <span data-ttu-id="7d5b1-140">Görgessen le a lista aljához.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-140">Scroll down to the bottom of the list.</span></span>  <span data-ttu-id="7d5b1-141">Kattintson a **Write-Output** elemre, és válassza a **Hozzáadás a vászonhoz** lehetőséget, vagy kattintson a parancsmag melletti három pontra, és válassza a **Hozzáadás a vászonhoz** lehetőséget.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-141">You can either right-click **Write-Output** and select **Add to canvas** or click the ellipse next to the cmdlet and then select **Add to canvas**.</span></span>
3. <span data-ttu-id="7d5b1-142">A vásznon kattintson a **Write-Output** tevékenységre.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-142">Click the **Write-Output** activity on the canvas.</span></span>  <span data-ttu-id="7d5b1-143">Ez megnyitja a Konfiguráció vezérlőpanelt, amely lehetővé teszi a tevékenység konfigurálását.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-143">This opens the Configuration control blade, which allows you to configure the activity.</span></span>
4. <span data-ttu-id="7d5b1-144">A **Címke** értéke alapértelmezés szerint a parancsmag neve, de módosíthatjuk valami barátságosabbra.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-144">The **Label** defaults to the name of the cmdlet, but we can change it to something more friendly.</span></span> <span data-ttu-id="7d5b1-145">Módosítsa a következőre: *Hello World megjelenítése a kimenetben*.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-145">Change it to *Write Hello World to output*.</span></span>
5. <span data-ttu-id="7d5b1-146">A **Paraméterek** elemre kattintva megadhatja a parancsmag paramétereinek értékét.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-146">Click **Parameters** to provide values for the cmdlet's parameters.</span></span>  
   <span data-ttu-id="7d5b1-147">Bizonyos parancsmagok több paraméterkészlettel rendelkeznek, Önnek pedig ki kell választania, melyiket fogja használni.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-147">Some cmdlets have multiple parameter sets, and you need to select which you one to use.</span></span> <span data-ttu-id="7d5b1-148">Ebben az esetben a **Write-Output** parancsmag csak egy paraméterkészlettel rendelkezik, ezért nem kell választania.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-148">In this case, **Write-Output** has only one parameter set, so you don't need to select one.</span></span> <br> <span data-ttu-id="7d5b1-149">![A Write-Output tulajdonságai](media/automation-first-runbook-graphical/write-output-properties-b.png)</span><span class="sxs-lookup"><span data-stu-id="7d5b1-149">![Write-Output properties](media/automation-first-runbook-graphical/write-output-properties-b.png)</span></span>
6. <span data-ttu-id="7d5b1-150">Jelölje ki az **InputObject** paramétert.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-150">Select the **InputObject** parameter.</span></span>  <span data-ttu-id="7d5b1-151">Ez az a paraméter, ahol megadhatja a kimeneti streambe küldendő szöveget.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-151">This is the parameter where we specify the text to send to the output stream.</span></span>
7. <span data-ttu-id="7d5b1-152">Az **Adatforrások** legördülő menüben válassza a **PowerShell kifejezés** lehetőséget.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-152">In the **Data source** dropdown, select **PowerShell expression**.</span></span>  <span data-ttu-id="7d5b1-153">Az **Adatforrás** legördülő menüben paraméterértékek kitöltésére használt különböző forrásokat talál.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-153">The **Data source** dropdown provides different sources that you use to populate a parameter value.</span></span>  
   <span data-ttu-id="7d5b1-154">Használhatja ilyen források (pl. egy másik tevékenység, egy Automation-adategység vagy egy PowerShell-kifejezés) kimenetét.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-154">You can use output from such sources such as another activity, an Automation asset, or a PowerShell expression.</span></span>  <span data-ttu-id="7d5b1-155">Ebben az esetben egyszerűen a *Hello World* szöveget akarjuk megjeleníteni.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-155">In this case, we just want to output the text *Hello World*.</span></span> <span data-ttu-id="7d5b1-156">Megadhatunk egy karakterláncot egy PowerShell-kifejezéssel is.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-156">We can use a PowerShell expression and specify a string.</span></span>
8. <span data-ttu-id="7d5b1-157">A **Kifejezés** mezőbe írja be a *„Hello World”* kifejezést, majd kattintson az **OK** gombra kétszer a vászonra való visszatéréshez.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-157">In the **Expression** box, type *"Hello World"* and then click **OK** twice to return to the canvas.</span></span><br> <span data-ttu-id="7d5b1-158">![PowerShell-kifejezés](media/automation-first-runbook-graphical/expression-hello-world.png)</span><span class="sxs-lookup"><span data-stu-id="7d5b1-158">![PowerShell Expression](media/automation-first-runbook-graphical/expression-hello-world.png)</span></span>
9. <span data-ttu-id="7d5b1-159">A **Mentés** gombra kattintva mentse el a forgatókönyvet.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-159">Save the runbook by clicking **Save**.</span></span><br> <span data-ttu-id="7d5b1-160">![Runbook mentése](media/automation-first-runbook-graphical/runbook-toolbar-save-revised20165.png)</span><span class="sxs-lookup"><span data-stu-id="7d5b1-160">![Save runbook](media/automation-first-runbook-graphical/runbook-toolbar-save-revised20165.png)</span></span>

## <a name="step-3---test-the-runbook"></a><span data-ttu-id="7d5b1-161">3. lépés – A forgatókönyv tesztelése</span><span class="sxs-lookup"><span data-stu-id="7d5b1-161">Step 3 - Test the runbook</span></span>
<span data-ttu-id="7d5b1-162">Mielőtt közzétesszük a forgatókönyvet, hogy éles üzemben is elérhető legyen, tesztelnünk kell, hogy biztosan jól működik-e.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-162">Before we publish the runbook to make it available in production, we want to test it to make sure that it works properly.</span></span>  <span data-ttu-id="7d5b1-163">Egy forgatókönyv tesztelésekor a **Piszkozat** verziót futtatja, és interaktív módon megtekinti a kimenetét.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-163">When you test a runbook, you run its **Draft** version and view its output interactively.</span></span>

1. <span data-ttu-id="7d5b1-164">Kattintson a **Teszt panelre** a Teszt panel megnyitásához.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-164">Click **Test pane** to open the Test blade.</span></span><br> <span data-ttu-id="7d5b1-165">![Teszt panel](media/automation-first-runbook-graphical/runbook-toolbar-test-revised20165.png)</span><span class="sxs-lookup"><span data-stu-id="7d5b1-165">![Test pane](media/automation-first-runbook-graphical/runbook-toolbar-test-revised20165.png)</span></span>
2. <span data-ttu-id="7d5b1-166">Kattintson az **Indítás** gombra a teszt elindításához.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-166">Click **Start** to start the test.</span></span>  <span data-ttu-id="7d5b1-167">Elvileg ez az egyetlen engedélyezett lehetőség.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-167">This should be the only enabled option.</span></span>
3. <span data-ttu-id="7d5b1-168">Létrejön egy [forgatókönyv-feladat](automation-runbook-execution.md), az állapota pedig megjelenik a panelen.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-168">A [runbook job](automation-runbook-execution.md) is created and its status displayed in the pane.</span></span>  
   <span data-ttu-id="7d5b1-169">A feladat állapota kezdetben *Várólistán*. Ez azt jelöli, hogy egy felhőben lévő runbook-feldolgozó elérhetővé válására vár.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-169">The job status starts as *Queued* indicating that it is waiting for a runbook worker in the cloud to become available.</span></span>  <span data-ttu-id="7d5b1-170">Ezután *Indítás* állapotúra változik, ha egy feldolgozó elvállalja a feladatot, majd *Fut* állapotúra, amikor a forgatókönyv elkezd futni.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-170">It then moves to *Starting* when a worker claims the job, and then *Running* when the runbook actually starts running.</span></span>  
4. <span data-ttu-id="7d5b1-171">Amikor a forgatókönyv feladat befejeződik, megjelenik a kimenete.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-171">When the runbook job completes, its output is displayed.</span></span> <span data-ttu-id="7d5b1-172">A mi esetünkben ez a következő: *Hello World*.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-172">In our case, we should see *Hello World*.</span></span><br> <span data-ttu-id="7d5b1-173">![Hello World](media/automation-first-runbook-graphical/runbook-test-results.png)</span><span class="sxs-lookup"><span data-stu-id="7d5b1-173">![Hello World](media/automation-first-runbook-graphical/runbook-test-results.png)</span></span>
5. <span data-ttu-id="7d5b1-174">A vászonra való visszatéréshez zárja be a Teszt panelt.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-174">Close the Test blade to return to the canvas.</span></span>

## <a name="step-4---publish-and-start-the-runbook"></a><span data-ttu-id="7d5b1-175">4. lépés: Közzététel és a forgatókönyv indítása</span><span class="sxs-lookup"><span data-stu-id="7d5b1-175">Step 4 - Publish and start the runbook</span></span>
<span data-ttu-id="7d5b1-176">A létrehozott runbook még mindig Piszkozat módban van.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-176">The runbook that we created is still in Draft mode.</span></span> <span data-ttu-id="7d5b1-177">Az üzemi környezetben való futtatás előtt közzé kell tennünk.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-177">We need to publish it before we can run it in production.</span></span>  <span data-ttu-id="7d5b1-178">Amikor elérhetővé tesz egy forgatókönyvet, felülírja a Közzétett verziót a Piszkozattal.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-178">When you publish a runbook, you overwrite the existing Published version with the Draft version.</span></span>  <span data-ttu-id="7d5b1-179">Az esetünkben még nincs Közzétett verzió, mivel még csak most hoztuk létre a forgatókönyvet.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-179">In our case, we don't have a Published version yet because we just created the runbook.</span></span>

1. <span data-ttu-id="7d5b1-180">A forgatókönyv közzétételéhez kattintson a **Közzététel** lehetőségre, és ha a rendszer kéri, kattintson az **Igen** gombra.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-180">Click **Publish** to publish the runbook and then **Yes** when prompted.</span></span><br> <span data-ttu-id="7d5b1-181">![Közzététel](media/automation-first-runbook-graphical/runbook-toolbar-publish-revised20166.png)</span><span class="sxs-lookup"><span data-stu-id="7d5b1-181">![Publish](media/automation-first-runbook-graphical/runbook-toolbar-publish-revised20166.png)</span></span>
2. <span data-ttu-id="7d5b1-182">Ha balra görgetve megtekinti a runbookot a **Runbookok** panelen, a **Közzétett** **Szerzői állapot** jelenik meg.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-182">If you scroll left to view the runbook in the **Runbooks** blade, it shows an **Authoring Status** of **Published**.</span></span>
3. <span data-ttu-id="7d5b1-183">Görgessen vissza jobbra a **MyFirstRunbook** panel megtekintéséhez.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-183">Scroll back to the right to view the blade for **MyFirstRunbook**.</span></span>  
   <span data-ttu-id="7d5b1-184">A felül látható lehetőségekkel elindíthatjuk a forgatókönyvet, ütemezhetjük egy későbbi időpontban való indításra, vagy létrehozhatunk egy [webhookot](automation-webhooks.md), amely segítségével elindítható a forgatókönyv egy HTTP-hívással.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-184">The options across the top allow us to start the runbook, schedule it to start at some time in the future, or create a [webhook](automation-webhooks.md) so it can be started through an HTTP call.</span></span>
4. <span data-ttu-id="7d5b1-185">Most csak elindítani szeretnénk a forgatókönyvet, tehát kattintson az **Indítás**, majd az **Igen** gombra, amikor a rendszer erre kéri.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-185">We just want to start the runbook so click **Start** and then **Yes** when prompted.</span></span><br> <span data-ttu-id="7d5b1-186">![Runbook indítása](media/automation-first-runbook-graphical/runbook-controls-start-revised20165.png)</span><span class="sxs-lookup"><span data-stu-id="7d5b1-186">![Start runbook](media/automation-first-runbook-graphical/runbook-controls-start-revised20165.png)</span></span>
5. <span data-ttu-id="7d5b1-187">Megnyílik egy feladatpanel a létrehozott runbook-feladathoz.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-187">A job blade is opened for the runbook job that we created.</span></span>  <span data-ttu-id="7d5b1-188">Ezt a panelt bezárhatjuk, de ebben az esetben nyitva hagyjuk, hogy lássuk a feladat előrehaladását.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-188">We can close this blade, but in this case we leave it open so we can watch the job's progress.</span></span>
6. <span data-ttu-id="7d5b1-189">A feladat állapota a **Feladat összegzése** területen látszik, és megfelel a korábban, a forgatókönyv tesztelésekor látott állapotoknak.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-189">The job status is shown in **Job Summary** and matches the statuses that we saw when we tested the runbook.</span></span><br> <span data-ttu-id="7d5b1-190">![Feladat összegzése](media/automation-first-runbook-graphical/runbook-job-summary.png)</span><span class="sxs-lookup"><span data-stu-id="7d5b1-190">![Job Summary](media/automation-first-runbook-graphical/runbook-job-summary.png)</span></span>
7. <span data-ttu-id="7d5b1-191">Ha a forgatókönyv a *Befejezve* állapotot mutatja, kattintson a **Kimenet** lehetőségre.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-191">Once the runbook status shows *Completed*, click **Output**.</span></span> <span data-ttu-id="7d5b1-192">A **Kimenet** panel megnyílik, és megjelenik a *Hello World* a panelen.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-192">The **Output** blade is opened, and we can see our *Hello World* in the pane.</span></span><br> <span data-ttu-id="7d5b1-193">![Feladat összegzése](media/automation-first-runbook-graphical/runbook-job-output.png)</span><span class="sxs-lookup"><span data-stu-id="7d5b1-193">![Job Summary](media/automation-first-runbook-graphical/runbook-job-output.png)</span></span>  
8. <span data-ttu-id="7d5b1-194">Zárja be a Kimenet panelt.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-194">Close the Output blade.</span></span>
9. <span data-ttu-id="7d5b1-195">A forgatókönyv-feladathoz tartozó Streams panel megnyitásához kattintson **Az összes napló** lehetőségre.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-195">Click **All Logs** to open the Streams blade for the runbook job.</span></span>  <span data-ttu-id="7d5b1-196">A kimeneti streamben csak a *Hello World* eredményt látjuk, de ez megjeleníthet egyéb streameket is egy forgatókönyv feladatból, mint a Részletes vagy a Hiba, ha a forgatókönyv ezekbe ír.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-196">We should only see *Hello World* in the output stream, but this can show other streams for a runbook job such as Verbose and Error if the runbook writes to them.</span></span><br> <span data-ttu-id="7d5b1-197">![Feladat összegzése](media/automation-first-runbook-graphical/runbook-job-AllLogs.png)</span><span class="sxs-lookup"><span data-stu-id="7d5b1-197">![Job Summary](media/automation-first-runbook-graphical/runbook-job-AllLogs.png)</span></span>
10. <span data-ttu-id="7d5b1-198">Zárja be Az összes napló panelt és a Feladat panelt a MyFirstRunbook panelhez való visszatéréshez.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-198">Close the All Logs blade and the Job blade to return to the MyFirstRunbook blade.</span></span>
11. <span data-ttu-id="7d5b1-199">A forgatókönyv Feladatok paneljének megnyitásához kattintson a **Feladatok** lehetőségre.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-199">Click **Jobs** to open the Jobs blade for this runbook.</span></span>  <span data-ttu-id="7d5b1-200">Ez felsorolja az összes, a runbook által létrehozott feladatot.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-200">This lists all the jobs created by this runbook.</span></span> <span data-ttu-id="7d5b1-201">Egy feladat csak egyszer szerepel a listán, mert csak egyszer futtattuk a feladatot.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-201">We should only see one job listed since we only ran the job once.</span></span><br> <span data-ttu-id="7d5b1-202">![Feladatok](media/automation-first-runbook-graphical/runbook-control-jobs.png)</span><span class="sxs-lookup"><span data-stu-id="7d5b1-202">![Jobs](media/automation-first-runbook-graphical/runbook-control-jobs.png)</span></span>
12. <span data-ttu-id="7d5b1-203">Erre a feladatra kattintva megnyithatja ugyanazt a Feladat panelt, amelyet már láttunk a runbook elindításakor.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-203">You can click this job to open the same Job pane that we viewed when we started the runbook.</span></span>  <span data-ttu-id="7d5b1-204">Ez lehetővé teszi, hogy az időben visszamenve megtekintse egy adott forgatókönyvhöz létrehozott összes feladat részleteit.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-204">This allows you to go back in time and view the details of any job that was created for a particular runbook.</span></span>

## <a name="step-5---create-variable-assets"></a><span data-ttu-id="7d5b1-205">5. lépés: Változó adategységek létrehozása</span><span class="sxs-lookup"><span data-stu-id="7d5b1-205">Step 5 - Create variable assets</span></span>
<span data-ttu-id="7d5b1-206">Most már teszteltük és közzétettük a forgatókönyvet, de még nem csinál semmi hasznosat.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-206">We've tested and published our runbook, but so far it doesn't do anything useful.</span></span> <span data-ttu-id="7d5b1-207">Azt szeretnénk, hogy Azure-erőforrásokat kezeljen.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-207">We want to have it manage Azure resources.</span></span>  <span data-ttu-id="7d5b1-208">Mielőtt konfigurálnánk a runbookot a hitelesítésre, létrehozunk egy változót, amely tárolja az előfizetés-azonosítót, és hivatkozunk rá, miután beállítottuk a tevékenységet hitelesítésre alább, a 6. lépésben.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-208">Before we configure the runbook to authenticate, we  create a variable to hold the subscription ID and reference it after we set up the activity to authenticate in step 6 below.</span></span>  <span data-ttu-id="7d5b1-209">Ha hivatkozást szerepeltet az előfizetési környezetben, könnyebben használhat több előfizetést.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-209">Including a reference to the subscription context allows you to easily work between multiple subscriptions.</span></span>  <span data-ttu-id="7d5b1-210">A továbbhaladás előtt másolja ki az előfizetés-azonosítót a navigációs ablaktábla előfizetés-beállításai közül.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-210">Before proceeding, copy your subscription ID from the Subscriptions option off the Navigation pane.</span></span>  

1. <span data-ttu-id="7d5b1-211">Az Automation-fiókok panelen kattintson az **Adategységek** csempére. Ekkor megnyílik az **Adategységek** panel.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-211">In the Automation Accounts blade, click the **Assets** tile and the **Assets** blade is opened.</span></span>
2. <span data-ttu-id="7d5b1-212">Az Adategységek panelen kattintson a **Változók** csempére.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-212">In the Assets blade, click the **Variables** tile.</span></span>
3. <span data-ttu-id="7d5b1-213">A Változók panelen kattintson a **Változó hozzáadása** lehetőségre.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-213">On the Variables blade, click **Add a variable**.</span></span><br><span data-ttu-id="7d5b1-214">![Automation változó](media/automation-first-runbook-graphical/create-new-subscriptionid-variable.png)</span><span class="sxs-lookup"><span data-stu-id="7d5b1-214">![Automation Variable](media/automation-first-runbook-graphical/create-new-subscriptionid-variable.png)</span></span>
4. <span data-ttu-id="7d5b1-215">Az Új változó panelen a **Név** mezőben adja meg a következőt: **AzureSubscriptionId**. Az **Érték** mezőben adja meg az előfizetés-azonosítóját.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-215">In the New variable blade, in the **Name** box, enter **AzureSubscriptionId** and in the **Value** box enter your Subscription ID.</span></span>  <span data-ttu-id="7d5b1-216">A **Típus** maradjon **Karakterlánc**, és tartsa meg a *Titkosítás* alapértelmezett értékét.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-216">Keep *string* for the **Type** and the default value for **Encryption**.</span></span>  
5. <span data-ttu-id="7d5b1-217">A változó létrehozásához kattintson a **Létrehozás** gombra.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-217">Click **Create** to create the variable.</span></span>  

## <a name="step-6---add-authentication-to-manage-azure-resources"></a><span data-ttu-id="7d5b1-218">6. lépés – Hitelesítés hozzáadása az Azure-erőforrások kezeléséhez</span><span class="sxs-lookup"><span data-stu-id="7d5b1-218">Step 6 - Add authentication to manage Azure resources</span></span>
<span data-ttu-id="7d5b1-219">Most, hogy van egy változónk az előfizetés-azonosító tárolására, konfigurálhatjuk a forgatókönyvünket, hogy megtörténjen a hitelesítésük a Futtató hitelesítő adatokkal, amelyek az [előfeltételek](#prerequisites) között szerepelnek.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-219">Now that we have a variable to hold our subscription ID, we can configure our runbook to authenticate with the Run As credentials that are referred to in the [prerequisites](#prerequisites).</span></span>  <span data-ttu-id="7d5b1-220">Ehhez hozzáadjuk az **Asset** Azure-beli Futtató kapcsolatot és az **Add-AzureRMAccount** parancsmagot a vászonhoz.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-220">We do that by adding the Azure Run As connection **Asset** and **Add-AzureRMAccount** cmdlet to the canvas.</span></span>  

1. <span data-ttu-id="7d5b1-221">Kattintson a MyFirstRunbook panel **Szerkesztés** gombjára a grafikus szerkesztő megnyitásához.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-221">Open the graphical editor by clicking **Edit** on the MyFirstRunbook blade.</span></span><br> <span data-ttu-id="7d5b1-222">![Runbook szerkesztése](media/automation-first-runbook-graphical/runbook-controls-edit-revised20165.png)</span><span class="sxs-lookup"><span data-stu-id="7d5b1-222">![Edit runbook](media/automation-first-runbook-graphical/runbook-controls-edit-revised20165.png)</span></span>
2. <span data-ttu-id="7d5b1-223">A **Hello World megjelenítése a kimenetben** elemre nincs többet szükségünk, ezért kattintson rá a jobb gombbal, és válassza a **Törlés** parancsot.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-223">We don't need the **Write Hello World to output** anymore, so right-click it and select **Delete**.</span></span>
3. <span data-ttu-id="7d5b1-224">A Könyvtár vezérlőben bontsa ki a **Kapcsolatok** lehetőséget, és a **Hozzáadás a vászonhoz** lehetőséget választva adja hozzá a vászonhoz az **AzureRunAsConnection** elemet.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-224">In the Library control, expand **Connections** and add **AzureRunAsConnection** to the canvas by selecting **Add to canvas**.</span></span>
4. <span data-ttu-id="7d5b1-225">A vásznon válassza ki az **AzureRunAsConnection** elemet, és a Konfiguráció vezérlőpanelen írja be a **Futtató kapcsolat létesítése** mondatot a **Címke** szövegmezőbe.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-225">On the canvas, select **AzureRunAsConnection** and in the Configuration control pane, type **Get Run As Connection** in the **Label** textbox.</span></span>  <span data-ttu-id="7d5b1-226">Ez a kapcsolat</span><span class="sxs-lookup"><span data-stu-id="7d5b1-226">This is the connection</span></span>
5. <span data-ttu-id="7d5b1-227">A Könyvtár vezérlőben írja be a keresési szövegmezőbe a következőt: **Add-AzureRMAccount**.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-227">In the Library control, type **Add-AzureRmAccount** in the search textbox.</span></span>
6. <span data-ttu-id="7d5b1-228">Adja hozzá a vászonhoz az **Add-AzureRMAccount** elemet.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-228">Add **Add-AzureRmAccount** to the canvas.</span></span><br> <span data-ttu-id="7d5b1-229">![Add-AzureRMAccount](media/automation-first-runbook-graphical/search-powershell-cmdlet-addazurermaccount.png)</span><span class="sxs-lookup"><span data-stu-id="7d5b1-229">![Add-AzureRMAccount](media/automation-first-runbook-graphical/search-powershell-cmdlet-addazurermaccount.png)</span></span>
7. <span data-ttu-id="7d5b1-230">Vigye a kurzort a **Futtató kapcsolat létesítése** fölé, és várja meg, amíg megjelenik az alakzat alján egy kör.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-230">Hover over **Get Run As Connection** until a circle appears on the bottom of the shape.</span></span> <span data-ttu-id="7d5b1-231">Kattintson a körre, és húzza a nyilat az **Add-AzureRmAccount** elemre.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-231">Click the circle and drag the arrow to **Add-AzureRmAccount**.</span></span>  <span data-ttu-id="7d5b1-232">A létrehozott nyíl egy *hivatkozás*.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-232">The arrow that you created is a *link*.</span></span>  <span data-ttu-id="7d5b1-233">A runbook a **Futtató kapcsolat beszerzése** elemmel indul, majd futtatja az **Add-AzureRmAccount** parancsot.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-233">The runbook starts with **Get Run As Connection** and then run **Add-AzureRmAccount**.</span></span><br> <span data-ttu-id="7d5b1-234">![Hivatkozás létrehozása a tevékenységek között](media/automation-first-runbook-graphical/runbook-link-auth-activities.png)</span><span class="sxs-lookup"><span data-stu-id="7d5b1-234">![Create link between activities](media/automation-first-runbook-graphical/runbook-link-auth-activities.png)</span></span>
8. <span data-ttu-id="7d5b1-235">A vásznon válassza ki az **Add-AzureRmAccount** elemet, és a Konfiguráció vezérlőpanelen írja be a **Bejelentkezés az Azure-ba** mondatot a **Címke** szövegmezőbe.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-235">On the canvas, select **Add-AzureRmAccount** and in the Configuration control pane type **Login to Azure** in the **Label** textbox.</span></span>
9. <span data-ttu-id="7d5b1-236">Kattintson a **Paraméterek** elemre, és megjelenik a Tevékenység paramétereinek konfigurálása panel.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-236">Click **Parameters** and the Activity Parameter Configuration blade appears.</span></span>
10. <span data-ttu-id="7d5b1-237">Az **Add-AzureRmAccount** több paraméterkészlettel rendelkezik, ezért ki kell választanunk egyet, mielőtt megadhatnánk a paraméterértékeket.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-237">**Add-AzureRmAccount** has multiple parameter sets, so we need to select one before we can provide parameter values.</span></span>  <span data-ttu-id="7d5b1-238">Kattintson a **Paraméterkészlet** lehetőségre, és válassza a **ServicePrincipalCertificatewithSubscriptionId** paraméterkészletet.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-238">Click **Parameter Set** and then select the **ServicePrincipalCertificatewithSubscriptionId** parameter set.</span></span>
11. <span data-ttu-id="7d5b1-239">Ha kiválasztotta a paraméterkészletet, a paraméterek megjelennek a Tevékenység paramétereinek konfigurálása panelen.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-239">Once you select the parameter set, the parameters are displayed in the Activity Parameter Configuration blade.</span></span>  <span data-ttu-id="7d5b1-240">Kattintson az **APPLICATIONID** elemre.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-240">Click **APPLICATIONID**.</span></span><br> <span data-ttu-id="7d5b1-241">![Azure RM-fiók paramétereinek hozzáadása](media/automation-first-runbook-graphical/add-azurermaccount-params.png)</span><span class="sxs-lookup"><span data-stu-id="7d5b1-241">![Add Azure RM account parameters](media/automation-first-runbook-graphical/add-azurermaccount-params.png)</span></span>
12. <span data-ttu-id="7d5b1-242">A Paraméter értéke panelen válassza a **Tevékenység kimenete** elemet az **Adatforrás** területen, majd válassza a **Futtató kapcsolat létesítése** elemet a listáról. A **Mező elérési útja** szövegmezőbe írja be az **ApplicationId** kifejezést, majd kattintson az **OK** elemre.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-242">In the Parameter Value blade, select **Activity output** for the **Data source** and select **Get Run As Connection** from the list, in the **Field path** textbox type **ApplicationId**, and then click **OK**.</span></span>  <span data-ttu-id="7d5b1-243">A mező elérési útjához tartozó tulajdonság nevét azért adjuk meg, mert a tevékenység egy több tulajdonsággal rendelkező objektumot eredményez.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-243">We are specifying the name of the property for the Field path because the activity outputs an object with multiple properties.</span></span>
13. <span data-ttu-id="7d5b1-244">Kattintson a **CERTIFICATETHUMBPRINT** elemre, és a Paraméter értéke panelen válassza a **Tevékenység kimenete** elemet az **Adatforrás** területen.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-244">Click **CERTIFICATETHUMBPRINT**, and in the Parameter Value blade, select **Activity output** for the **Data source**.</span></span>  <span data-ttu-id="7d5b1-245">Válassza a **Futtató kapcsolat létesítése** elemet a listáról, és a **Mező elérési útja** szövegmezőbe írja be a **CertificateThumbprint** kifejezést, majd kattintson az **OK** gombra.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-245">Select **Get Run As Connection** from the list, in the **Field path** textbox type **CertificateThumbprint**, and then click **OK**.</span></span>
14. <span data-ttu-id="7d5b1-246">Kattintson a **SERVICEPRINCIPAL** elemre, és a Paraméter értéke panelen válassza a **ConstantValue** elemet az **Adatforrás** területen, kattintson a **True** lehetőségre, és kattintson az **OK** gombra.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-246">Click **SERVICEPRINCIPAL**, and in the Parameter Value blade, select **ConstantValue** for the **Data source**, click the option **True**, and then click **OK**.</span></span>
15. <span data-ttu-id="7d5b1-247">Kattintson a **TENANTID** elemre, és a Paraméter értéke panelen válassza a **Tevékenység kimenete** elemet az **Adatforrás** területen.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-247">Click **TENANTID**, and in the Parameter Value blade, select **Activity output** for the **Data source**.</span></span>  <span data-ttu-id="7d5b1-248">Válassza a **Futtató kapcsolat létesítése** elemet a listáról, és a **Mező elérési útja** szövegmezőbe írja be a **TenantId** kifejezést, majd kattintson kétszer az **OK** elemre.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-248">Select **Get Run As Connection** from the list, in the **Field path** textbox type **TenantId**, and then click **OK** twice.</span></span>  
16. <span data-ttu-id="7d5b1-249">A Könyvtár vezérlőben írja be a keresési szövegmezőbe a következőt: **Set-AzureRmContext**.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-249">In the Library control, type **Set-AzureRmContext** in the search textbox.</span></span>
17. <span data-ttu-id="7d5b1-250">Adja hozzá a vászonhoz a **Set-AzureRmContext** elemet.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-250">Add **Set-AzureRmContext** to the canvas.</span></span>
18. <span data-ttu-id="7d5b1-251">A vásznon válassza ki a **Set-AzureRmContext** elemet, és a Konfiguráció vezérlőpanelen írja be az **Előfizetés azonosítójának megadása** mondatot a **Címke** szövegmezőbe.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-251">On the canvas, select **Set-AzureRmContext** and in the Configuration control pane type **Specify Subscription Id** in the **Label** textbox.</span></span>
19. <span data-ttu-id="7d5b1-252">Kattintson a **Paraméterek** elemre, és megjelenik a Tevékenység paramétereinek konfigurálása panel.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-252">Click **Parameters** and the Activity Parameter Configuration blade appears.</span></span>
20. <span data-ttu-id="7d5b1-253">A **Set-AzureRmContext** több paraméterkészlettel rendelkezik, ezért ki kell választanunk egyet, mielőtt megadhatnánk a paraméterértékeket.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-253">**Set-AzureRmContext** has multiple parameter sets, so we need to select one before we can provide parameter values.</span></span>  <span data-ttu-id="7d5b1-254">Kattintson a **Paraméterkészlet** lehetőségre, és válassza a **SubscriptionId** paraméterkészletet.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-254">Click **Parameter Set** and then select the **SubscriptionId** parameter set.</span></span>  
21. <span data-ttu-id="7d5b1-255">Ha kiválasztotta a paraméterkészletet, a paraméterek megjelennek a Tevékenység paramétereinek konfigurálása panelen.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-255">Once you select the parameter set, the parameters are displayed in the Activity Parameter Configuration blade.</span></span>  <span data-ttu-id="7d5b1-256">Kattintson a **SubscriptionID** elemre.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-256">Click **SubscriptionID**</span></span>
22. <span data-ttu-id="7d5b1-257">A Paraméter értéke panelen válassza a **Változó adategység** elemet az **Adatforrás** területen, majd válassza az **AzureSubscriptionId** elemet a listáról, és kattintson kétszer az **OK** gombra.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-257">In the Parameter Value blade, select **Variable Asset** for the **Data source** and select **AzureSubscriptionId** from the list and then click **OK** twice.</span></span>   
23. <span data-ttu-id="7d5b1-258">Vigye a kurzort a **Bejelentkezés az Azure-ba** fölé, és várja meg, amíg megjelenik az alakzat alján egy kör.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-258">Hover over **Login to Azure** until a circle appears on the bottom of the shape.</span></span> <span data-ttu-id="7d5b1-259">Kattintson a körre, és húzza a nyilat az **Előfizetés azonosítójának megadása** elemre.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-259">Click the circle and drag the arrow to **Specify Subscription Id**.</span></span>

<span data-ttu-id="7d5b1-260">A forgatókönyvnek ezen a ponton az alábbi kódhoz kell hasonlítania:</span><span class="sxs-lookup"><span data-stu-id="7d5b1-260">Your runbook should look like the following at this point:</span></span> <br>![Forgatókönyv-hitelesítés konfigurálása](media/automation-first-runbook-graphical/runbook-auth-config.png)

## <a name="step-7---add-activity-to-start-a-virtual-machine"></a><span data-ttu-id="7d5b1-262">7. lépés – Virtuális gépet elindító tevékenység hozzáadása</span><span class="sxs-lookup"><span data-stu-id="7d5b1-262">Step 7 - Add activity to start a virtual machine</span></span>
<span data-ttu-id="7d5b1-263">Most hozzáadunk egy **Start-AzureRmVM** tevékenységet, amellyel egy virtuális gépet indítunk.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-263">Here we add a **Start-AzureRmVM** activity to start a virtual machine.</span></span>  <span data-ttu-id="7d5b1-264">Válassza ki az Azure-előfizetésében lévő bármelyik virtuális gépet, amelynek a nevét ideiglenesen szoftveresen rögzíti a parancsmagba.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-264">You can pick any virtual machine in your Azure subscription, and for now you hardcode that name into the cmdlet.</span></span>

1. <span data-ttu-id="7d5b1-265">A Könyvtár vezérlőben írja be a keresési szövegmezőbe a következőt: **Start-AzureRm**.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-265">In the Library control, type **Start-AzureRm** in the search textbox.</span></span>
2. <span data-ttu-id="7d5b1-266">Adja hozzá a **Start-AzureRmVM** elemet a vászonhoz, és húzza az **Előfizetés azonosítójának megadása** alá.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-266">Add **Start-AzureRmVM** to the canvas and then click and drag it underneath **Specify Subscription Id**.</span></span>
3. <span data-ttu-id="7d5b1-267">Vigye a kurzort a **Előfizetés azonosítójának megadása** fölé, és várja meg, amíg megjelenik az alakzat alján egy kör.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-267">Hover over **Specify Subscription Id** until a circle appears on the bottom of the shape.</span></span>  <span data-ttu-id="7d5b1-268">Kattintson a körre, és húzza a nyilat a **Start-AzureRmVM** elemre.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-268">Click the circle and drag the arrow to **Start-AzureRmVM**.</span></span>
4. <span data-ttu-id="7d5b1-269">Jelölje ki a **Start-AzureRmVM** elemet.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-269">Select **Start-AzureRmVM**.</span></span>  <span data-ttu-id="7d5b1-270">A **Start-AzureRmVM** készleteinek megtekintéséhez kattintson a **Paraméterek**, majd a **Paraméterkészlet** lehetőségre.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-270">Click **Parameters** and then **Parameter Set** to view the sets for **Start-AzureRmVM**.</span></span>  <span data-ttu-id="7d5b1-271">Válassza ki a **ResourceGroupNameParameterSetName** paraméterkészletet.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-271">Select the **ResourceGroupNameParameterSetName** parameter set.</span></span> <span data-ttu-id="7d5b1-272">Figyelje meg, hogy a **ResourceGroupName** és a **Name** mellett felkiáltójel van.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-272">Note that **ResourceGroupName** and **Name** have exclamation points next them.</span></span>  <span data-ttu-id="7d5b1-273">Ez azt jelzi, hogy ezek kötelező paraméterek.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-273">This indicates that they are required parameters.</span></span>  <span data-ttu-id="7d5b1-274">Azt is észreveheti, hogy mindkét helyen szöveges értéket kell megadni.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-274">Also note both expect string values.</span></span>
5. <span data-ttu-id="7d5b1-275">Válassza ki a **Name** paramétert.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-275">Select **Name**.</span></span>  <span data-ttu-id="7d5b1-276">Válassza ki a **PowerShell-kifejezés** elemet az **Adatforrás** területen, majd írja be kettős idézőjelek között a runbookkal elindított virtuális gép nevét.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-276">Select **PowerShell expression** for the **Data source** and type in the name of the virtual machine surrounded with double quotes that we start with this runbook.</span></span>  <span data-ttu-id="7d5b1-277">Kattintson az **OK** gombra.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-277">Click **OK**.</span></span><br><span data-ttu-id="7d5b1-278">![Start-AzureRmVM nevének paraméteres értéke](media/automation-first-runbook-graphical/runbook-startvm-nameparameter.png)</span><span class="sxs-lookup"><span data-stu-id="7d5b1-278">![Start-AzureRmVM Name Parameter Value](media/automation-first-runbook-graphical/runbook-startvm-nameparameter.png)</span></span>
6. <span data-ttu-id="7d5b1-279">Válassza a **ResourceGroupName** elemet.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-279">Select **ResourceGroupName**.</span></span> <span data-ttu-id="7d5b1-280">Használja a **PowerShell-kifejezés** elemet az **Adatforrás** mezőben, majd írja be az erőforráscsoport nevét idézőjelek között.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-280">Use **PowerShell expression** for the **Data source** and type in the name of the resource group surrounded with double quotes.</span></span>  <span data-ttu-id="7d5b1-281">Kattintson az **OK** gombra.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-281">Click **OK**.</span></span><br> <span data-ttu-id="7d5b1-282">![Start-AzureRmVM paraméterek](media/automation-first-runbook-graphical/startazurermvm-params.png)</span><span class="sxs-lookup"><span data-stu-id="7d5b1-282">![Start-AzureRmVM Parameters](media/automation-first-runbook-graphical/startazurermvm-params.png)</span></span>
7. <span data-ttu-id="7d5b1-283">Kattintson a Teszt panelre, hogy tesztelhessük forgatókönyvet.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-283">Click Test pane so that we can test the runbook.</span></span>
8. <span data-ttu-id="7d5b1-284">Kattintson az **Indítás** gombra a teszt elindításához.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-284">Click **Start** to start the test.</span></span>  <span data-ttu-id="7d5b1-285">Ha kész, ellenőrizze, hogy a virtuális gép elindult-e.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-285">Once it completes, check that the virtual machine was started.</span></span>

<span data-ttu-id="7d5b1-286">A forgatókönyvnek ezen a ponton az alábbi kódhoz kell hasonlítania:</span><span class="sxs-lookup"><span data-stu-id="7d5b1-286">Your runbook should look like the following at this point:</span></span> <br>![Forgatókönyv-hitelesítés konfigurálása](media/automation-first-runbook-graphical/runbook-startvm.png)

## <a name="step-8---add-additional-input-parameters-to-the-runbook"></a><span data-ttu-id="7d5b1-288">8. lépés – További bemeneti paraméterek hozzáadása a forgatókönyvhöz</span><span class="sxs-lookup"><span data-stu-id="7d5b1-288">Step 8 - Add additional input parameters to the runbook</span></span>
<span data-ttu-id="7d5b1-289">A runbook jelenleg a **Start-AzureRmVM** parancsmagban meghatározott erőforráscsoport virtuális gépét indítja el.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-289">Our runbook currently starts the virtual machine in the resource group that we specified in the **Start-AzureRmVM** cmdlet.</span></span>  <span data-ttu-id="7d5b1-290">A runbook hasznosabb lenne, ha megadhatnánk, hogy mikor induljon.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-290">Our runbook would be more useful if we could specify both when the runbook is started.</span></span>  <span data-ttu-id="7d5b1-291">Most hozzáadunk bemeneti paramétereket a runbookhoz, amelyek biztosítják ezt a funkciót.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-291">We now add input parameters to the runbook to provide that functionality.</span></span>

1. <span data-ttu-id="7d5b1-292">Kattintson a **MyFirstRunbook** panel **Szerkesztés** gombjára a grafikus szerkesztő megnyitásához.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-292">Open the graphical editor by clicking **Edit** on the **MyFirstRunbook** pane.</span></span>
2. <span data-ttu-id="7d5b1-293">A Forgatókönyv bemeneti paramétere panel megnyitásához kattintson a **Bemenet és kimenet**, majd a **Bemenet hozzáadása** lehetőségre.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-293">Click **Input and output** and then **Add input** to open the Runbook Input Parameter pane.</span></span><br> <span data-ttu-id="7d5b1-294">![Runbook-bemenet és -kimenet](media/automation-first-runbook-graphical/runbook-toolbar-InputandOutput-revised20165.png)</span><span class="sxs-lookup"><span data-stu-id="7d5b1-294">![Runbook Input and Output](media/automation-first-runbook-graphical/runbook-toolbar-InputandOutput-revised20165.png)</span></span>
3. <span data-ttu-id="7d5b1-295">A**Name** paraméterhez adja meg a *VMNAme* értéket.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-295">Specify *VMName* for the **Name**.</span></span>  <span data-ttu-id="7d5b1-296">A **Típus** maradjon *karakterlánc*, de a **Kötelező** értékét módosítsa arra, hogy *Igen*.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-296">Keep *string* for the **Type**, but change **Mandatory** to *Yes*.</span></span>  <span data-ttu-id="7d5b1-297">Kattintson az **OK** gombra.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-297">Click **OK**.</span></span>
4. <span data-ttu-id="7d5b1-298">Hozzon létre egy második kötelező bemeneti paramétert *ResourceGroupName* néven, majd kattintson az **OK** gombra a **Bemenet és kimenet** panelen.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-298">Create a second mandatory input parameter called *ResourceGroupName* and then click **OK** to close the **Input and Output** pane.</span></span><br> <span data-ttu-id="7d5b1-299">![Runbook bemeneti paraméterei](media/automation-first-runbook-graphical/start-azurermvm-params-outputs.png)</span><span class="sxs-lookup"><span data-stu-id="7d5b1-299">![Runbook Input Parameters](media/automation-first-runbook-graphical/start-azurermvm-params-outputs.png)</span></span>
5. <span data-ttu-id="7d5b1-300">Válassza a **Start-AzureRmVM** tevékenységet, majd kattintson a **Paraméterek** elemre.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-300">Select the **Start-AzureRmVM** activity and then click **Parameters**.</span></span>
6. <span data-ttu-id="7d5b1-301">A **Name** paraméter **Adatforrás** elemét módosítsa a **Forgatókönyv-bemenet** beállításra, majd válassza a **VMName** lehetőséget.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-301">Change the **Data source** for **Name** to **Runbook input** and then select **VMName**.</span></span><br>
7. <span data-ttu-id="7d5b1-302">A **ResourceGroupName** paraméternél az **Adatforrás** beállítást módosítsa a **Forgatókönyv-bemenet** értékre, majd válassza a **ResourceGroupName** lehetőséget.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-302">Change the **Data source** for **ResourceGroupName** to **Runbook input** and then select **ResourceGroupName**.</span></span><br> <span data-ttu-id="7d5b1-303">![Start-AzureVM paraméterei](media/automation-first-runbook-graphical/start-azurermvm-params-runbookinput.png)</span><span class="sxs-lookup"><span data-stu-id="7d5b1-303">![Start-AzureVM Parameters](media/automation-first-runbook-graphical/start-azurermvm-params-runbookinput.png)</span></span>
8. <span data-ttu-id="7d5b1-304">Mentse a forgatókönyvet, és nyissa meg a Teszt panelt.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-304">Save the runbook and open the Test pane.</span></span>  <span data-ttu-id="7d5b1-305">Figyelje meg, hogy most már megadhat értékeket a teszt során használt két bemeneti változóhoz.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-305">Note that you can now provide values for the two input variables that you use in the test.</span></span>
9. <span data-ttu-id="7d5b1-306">Zárja be a Teszt panelt.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-306">Close the Test pane.</span></span>
10. <span data-ttu-id="7d5b1-307">A forgatókönyv új verziójának közzétételéhez kattintson a **Közzététel** lehetőségre.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-307">Click **Publish** to publish the new version of the runbook.</span></span>
11. <span data-ttu-id="7d5b1-308">Állítsa le az előző lépésben elindított virtuális gépet.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-308">Stop the virtual machine that you started in the previous step.</span></span>
12. <span data-ttu-id="7d5b1-309">Kattintson az **Indítás** gombra a forgatókönyv elindításához.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-309">Click **Start** to start the runbook.</span></span>  <span data-ttu-id="7d5b1-310">Írja be a **VMName** és a **ResourceGroupName** értéket az elindítani kívánt virtuális géphez.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-310">Type in the **VMName** and **ResourceGroupName** for the virtual machine that you're going to start.</span></span><br> <span data-ttu-id="7d5b1-311">![Runbook indítása](media/automation-first-runbook-graphical/runbook-start-inputparams.png)</span><span class="sxs-lookup"><span data-stu-id="7d5b1-311">![Start Runbook](media/automation-first-runbook-graphical/runbook-start-inputparams.png)</span></span>
13. <span data-ttu-id="7d5b1-312">Ha a forgatókönyv kész, ellenőrizze, hogy a virtuális gép elindult-e.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-312">When the runbook completes, check that the virtual machine was started.</span></span>

## <a name="step-9---create-a-conditional-link"></a><span data-ttu-id="7d5b1-313">9. lépés – Feltételes hivatkozás létrehozása</span><span class="sxs-lookup"><span data-stu-id="7d5b1-313">Step 9 - Create a conditional link</span></span>
<span data-ttu-id="7d5b1-314">Most úgy módosítjuk a runbookot, hogy csak akkor próbálja meg elindítani a virtuális gépet, ha az még nem indult el.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-314">We now modify the runbook so that it only attempts to start the virtual machine if it is not already started.</span></span>  <span data-ttu-id="7d5b1-315">Ennek érdekében hozzáadjuk a **Get-AzureRmVM** parancsmagot a runbookhoz. Ez lekéri a virtuális gép példányszintű állapotát.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-315">You do this by adding a **Get-AzureRmVM** cmdlet to the runbook that gets the instance level status of the virtual machine.</span></span> <span data-ttu-id="7d5b1-316">Ezután adjon hozzá egy **Állapot kérése** nevű PowerShell-munkafolyamati kódmodult egy PowerShell-kódrészlettel, amely meghatározza, hogy a virtuális gép fut-e vagy le van állítva.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-316">Then you add a PowerShell Workflow code module called **Get Status** with a snippet of PowerShell code to determine if the virtual machine state is running or stopped.</span></span>  <span data-ttu-id="7d5b1-317">Az **Állapot lekérése** modulból származó feltételes hivatkozás csak akkor futtatja a **Start-AzureRmVM** tevékenységet, ha a jelenlegi, futó állapot helyett a gép le van állítva.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-317">A conditional link from the **Get Status** module only runs **Start-AzureRmVM** if the current running state is stopped.</span></span>  <span data-ttu-id="7d5b1-318">Végül a PowerShell Write-Output parancsmag használatával megjelenő üzenet tájékoztatja, hogy a virtuális gép sikeresen elindult-e vagy sem.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-318">Finally, we output a message to inform you if the VM was successfully started or not using the PowerShell Write-Output cmdlet.</span></span>

1. <span data-ttu-id="7d5b1-319">Nyissa meg a **MyFirstRunbook** elemet a grafikus szerkesztőben.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-319">Open **MyFirstRunbook** in the graphical editor.</span></span>
2. <span data-ttu-id="7d5b1-320">Távolítsa el az **Előfizetés azonosítójának megadása** és a **Start-AzureRmVM** közötti hivatkozást. Ehhez kattintson rá, majd nyomja le a *Delete* billentyűt.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-320">Remove the link between **Specify Subscription Id** and **Start-AzureRmVM** by clicking on it and then pressing the *Delete* key.</span></span>
3. <span data-ttu-id="7d5b1-321">A Könyvtár vezérlőben írja be a keresési szövegmezőbe a következőt: **Get-AzureRm**.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-321">In the Library control, type **Get-AzureRm** in the search textbox.</span></span>
4. <span data-ttu-id="7d5b1-322">Adja hozzá a vászonhoz a **Get-AzureRmVM** elemet.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-322">Add **Get-AzureRmVM** to the canvas.</span></span>
5. <span data-ttu-id="7d5b1-323">A **Get-AzureRmVM** készleteinek megtekintéséhez válassza a **Get-AzureRmVM**, majd a **Paraméterkészlet** lehetőséget.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-323">Select **Get-AzureRmVM** and then **Parameter Set** to view the sets for **Get-AzureRmVM**.</span></span>  <span data-ttu-id="7d5b1-324">Válassza ki a **GetVirtualMachineInResourceGroupNameParamSet** paraméterkészletet.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-324">Select the **GetVirtualMachineInResourceGroupNameParamSet** parameter set.</span></span>  <span data-ttu-id="7d5b1-325">Figyelje meg, hogy a **ResourceGroupName** és a **Name** mellett felkiáltójel van.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-325">Note that **ResourceGroupName** and **Name** have exclamation points next them.</span></span>  <span data-ttu-id="7d5b1-326">Ez azt jelzi, hogy ezek kötelező paraméterek.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-326">This indicates that they are required parameters.</span></span>  <span data-ttu-id="7d5b1-327">Azt is észreveheti, hogy mindkét helyen szöveges értéket kell megadni.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-327">Also note both expect string values.</span></span>
6. <span data-ttu-id="7d5b1-328">A **Name** paraméterhez tartozó **Adatforrás** elemét módosítsa a **Forgatókönyv bemenet** beállításra, majd válassza a **VMName** lehetőséget.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-328">Under **Data source** for **Name**, select **Runbook input** and then select **VMName**.</span></span>  <span data-ttu-id="7d5b1-329">Kattintson az **OK** gombra.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-329">Click **OK**.</span></span>
7. <span data-ttu-id="7d5b1-330">A **ResourceGroupName** paraméterhez tartozó **Adatforrás** elemét módosítsa a **Forgatókönyv bemenet** beállításra, majd válassza a **ResourceGroupName** lehetőséget.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-330">Under **Data source** for **ResourceGroupName**, select **Runbook input** and then select **ResourceGroupName**.</span></span>  <span data-ttu-id="7d5b1-331">Kattintson az **OK** gombra.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-331">Click **OK**.</span></span>
8. <span data-ttu-id="7d5b1-332">A **Status** paraméterhez tartozó **Adatforrás** elemét módosítsa a **Konstans érték** beállításra, majd kattintson az **Igaz** gombra.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-332">Under **Data source** for **Status**, select **Constant value** and then click  **True**.</span></span>  <span data-ttu-id="7d5b1-333">Kattintson az **OK** gombra.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-333">Click **OK**.</span></span>  
9. <span data-ttu-id="7d5b1-334">Hozzon létre egy hivatkozást az **Előfizetés azonosítójának megadása** és a **Get-AzureRmVM** között.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-334">Create a link from **Specify Subscription Id** to **Get-AzureRmVM**.</span></span>
10. <span data-ttu-id="7d5b1-335">A Könyvtár vezérlőben bontsa ki a **Forgatókönyv vezérlése** lehetőséget, és adja hozzá a vászonhoz az **Code** elemet.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-335">In the library control, expand **Runbook Control** and add **Code** to the canvas.</span></span>  
11. <span data-ttu-id="7d5b1-336">Hozzon létre egy hivatkozást a **Get-AzureRmVM** és a **Code** között.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-336">Create a link from **Get-AzureRmVM** to **Code**.</span></span>  
12. <span data-ttu-id="7d5b1-337">Kattintson a **Code** elemre, majd a Konfiguráció panelen módosítsa a címkét a következőre: **Állapot kérése**.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-337">Click **Code** and in the Configuration pane, change label to **Get Status**.</span></span>
13. <span data-ttu-id="7d5b1-338">Válassza a **Code** paramétert, majd megjelenik a **Kódszerkesztő** panel.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-338">Select **Code** parameter, and the **Code Editor** blade appears.</span></span>  
14. <span data-ttu-id="7d5b1-339">A kódszerkesztőben illessze be az alábbi kódrészletet.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-339">In the code editor, paste the following snippet of code:</span></span>
    
     ```
     $StatusesJson = $ActivityOutput['Get-AzureRmVM'].StatusesText
     $Statuses = ConvertFrom-Json $StatusesJson
     $StatusOut =""
     foreach ($Status in $Statuses){
     if($Status.Code -eq "Powerstate/running"){$StatusOut = "running"}
     elseif ($Status.Code -eq "Powerstate/deallocated") {$StatusOut = "stopped"}
     }
     $StatusOut
     ```
15. <span data-ttu-id="7d5b1-340">Hozzon létre egy hivatkozást az **Állapot kérése** és a **Start-AzureRmVM** között.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-340">Create a link from **Get Status** to **Start-AzureRmVM**.</span></span><br> <span data-ttu-id="7d5b1-341">![Runbook kódmodullal](media/automation-first-runbook-graphical/runbook-startvm-get-status.png)</span><span class="sxs-lookup"><span data-stu-id="7d5b1-341">![Runbook with Code Module](media/automation-first-runbook-graphical/runbook-startvm-get-status.png)</span></span>  
16. <span data-ttu-id="7d5b1-342">Jelölje ki a hivatkozást, majd a Konfiguráció panelen módosítsa a **Feltétel alkalmazása** értékét ara, hogy **Igen**.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-342">Select the link and in the Configuration pane, change **Apply condition** to **Yes**.</span></span>   <span data-ttu-id="7d5b1-343">Figyelje meg, hogy a hivatkozás egy szaggatott vonallá változik, amely azt jelzi, hogy a céltevékenység csak akkor fut, ha a feltétel igazzá válik.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-343">Note the link turns to a dashed line indicating that the target activity only runs if the condition resolves to true.</span></span>  
17. <span data-ttu-id="7d5b1-344">A **Feltételkifejezés** területen írja be a következőt: *$ActivityOutput['Get Status'] -eq "Stopped"*.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-344">For the **Condition expression**, type *$ActivityOutput['Get Status'] -eq "Stopped"*.</span></span>  <span data-ttu-id="7d5b1-345">A **Start-AzureRmVM** most csak akkor fog futni, ha a virtuális gép le van állítva.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-345">**Start-AzureRmVM** now only runs if the virtual machine is stopped.</span></span>
18. <span data-ttu-id="7d5b1-346">A Könyvtár vezérlőben bontsa ki a **Parancsmagok** elemet, és válassza a **Microsoft.PowerShell.Utility** lehetőséget.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-346">In the Library control, expand **Cmdlets** and then **Microsoft.PowerShell.Utility**.</span></span>
19. <span data-ttu-id="7d5b1-347">Adja hozzá a vászonhoz kétszer a következőt: **Write-Output**.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-347">Add **Write-Output** to the canvas twice.</span></span><br> <span data-ttu-id="7d5b1-348">![Runbook Write-Output parancsmaggal](media/automation-first-runbook-graphical/runbook-startazurermvm-complete.png)</span><span class="sxs-lookup"><span data-stu-id="7d5b1-348">![Runbook with Write-Output](media/automation-first-runbook-graphical/runbook-startazurermvm-complete.png)</span></span>
20. <span data-ttu-id="7d5b1-349">Az első **Write-Output** vezérlőn kattintson a **Paraméterek** elemre, és módosítsa a **Címke** értéket a következőre: *Értesítés a virtuális gép indulásáról*.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-349">On the first **Write-Output** control, click **Parameters** and change the **Label** value to *Notify VM Started*.</span></span>
21. <span data-ttu-id="7d5b1-350">Az **InputObject** elemnél módosítsa az **Adatforrás** beállítását a **PowerShell-kifejezés** értékre, és írja be a következő kifejezést:*„$VMName sikeresen elindult.”*.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-350">For **InputObject**, change **Data source** to **PowerShell expression** and type in the expression *"$VMName successfully started."*.</span></span>
22. <span data-ttu-id="7d5b1-351">A második **Write-Output** vezérlőn kattintson a **Paraméterek** elemre, és módosítsa a **Címke** értéket a következőre: *Értesítés a virtuális gép indulásának meghiúsulásáról*</span><span class="sxs-lookup"><span data-stu-id="7d5b1-351">On the second **Write-Output** control, click **Parameters** and change the **Label** value to *Notify VM Start Failed*</span></span>
23. <span data-ttu-id="7d5b1-352">Az **InputObject** elemnél módosítsa az **Adatforrás** beállítását a **PowerShell-kifejezés** értékre, és írja be a következő kifejezést:*„VMName nem tudott elindulni.”*.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-352">For **InputObject**, change **Data source** to **PowerShell expression** and type in the expression *"$VMName could not start."*.</span></span>
24. <span data-ttu-id="7d5b1-353">Hozzon létre egy hivatkozást a **Start-AzureRmVM** és az **Értesítés a virtuális gép indulásáról**, valamint az **Értesítés a virtuális gép indulásának meghiúsulásáról** között.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-353">Create a link from **Start-AzureRmVM** to **Notify VM Started** and **Notify VM Start Failed**.</span></span>
25. <span data-ttu-id="7d5b1-354">Válassza ki az **Értesítés a virtuális gép indulásáról** felé mutató hivatkozást, és módosítsa a **Feltétel alkalmazása** beállítást arra, hogy **Igaz**.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-354">Select the link to **Notify VM Started** and change **Apply condition** to **True**.</span></span>
26. <span data-ttu-id="7d5b1-355">A **Feltételkifejezéshez** írja be a következőt: *$ActivityOutput['Start-AzureRmVM'].IsSuccessStatusCode -eq $true*.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-355">For the **Condition expression**, type *$ActivityOutput['Start-AzureRmVM'].IsSuccessStatusCode -eq $true*.</span></span>  <span data-ttu-id="7d5b1-356">A Write-Output vezérlés most csak akkor fog futni, ha a virtuális gép sikeresen elindult.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-356">This Write-Output control now only runs if the virtual machine is successfully started.</span></span>
27. <span data-ttu-id="7d5b1-357">Válassza ki az **Értesítés a virtuális gép indulásának meghiúsulásáról** felé mutató hivatkozást, és módosítsa a **Feltétel alkalmazása** beállítást arra, hogy **Igaz**.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-357">Select the link to **Notify VM Start Failed** and change **Apply condition** to **True**.</span></span>
28. <span data-ttu-id="7d5b1-358">A **Feltételkifejezéshez** írja be a következőt: *$ActivityOutput['Start-AzureRmVM'].IsSuccessStatusCode -ne $true*.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-358">For the **Condition expression**, type *$ActivityOutput['Start-AzureRmVM'].IsSuccessStatusCode -ne $true*.</span></span>  <span data-ttu-id="7d5b1-359">A Write-Output vezérlés most csak akkor fog futni, ha a virtuális gép sikeresen elindult.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-359">This Write-Output control now only runs if the virtual machine is not successfully started.</span></span>
29. <span data-ttu-id="7d5b1-360">Mentse a forgatókönyvet, és nyissa meg a Teszt panelt.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-360">Save the runbook and open the Test pane.</span></span>
30. <span data-ttu-id="7d5b1-361">Indítsa el a forgatókönyvet úgy, hogy a virtuális gép nem fut, és elvileg el kell indulnia.</span><span class="sxs-lookup"><span data-stu-id="7d5b1-361">Start the runbook with the virtual machine stopped, and it should start.</span></span>

## <a name="next-steps"></a><span data-ttu-id="7d5b1-362">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="7d5b1-362">Next steps</span></span>
* <span data-ttu-id="7d5b1-363">További információk a Grafikus létrehozásról: [Grafikus létrehozás az Azure Automationben](automation-graphical-authoring-intro.md).</span><span class="sxs-lookup"><span data-stu-id="7d5b1-363">To learn more about Graphical Authoring, see [Graphical authoring in Azure Automation](automation-graphical-authoring-intro.md)</span></span>
* <span data-ttu-id="7d5b1-364">A PowerShell-forgatókönyvekkel való ismerkedéshez tekintse meg a következőt: [Az első PowerShell-forgatókönyvem](automation-first-runbook-textual-powershell.md).</span><span class="sxs-lookup"><span data-stu-id="7d5b1-364">To get started with PowerShell runbooks, see [My first PowerShell runbook](automation-first-runbook-textual-powershell.md)</span></span>
* <span data-ttu-id="7d5b1-365">A PowerShell-alapú munkafolyamat-forgatókönyvekkel való ismerkedéshez tekintse meg a következőt: [Az első PowerShell-alapú munkafolyamat-forgatókönyvem](automation-first-runbook-textual.md)</span><span class="sxs-lookup"><span data-stu-id="7d5b1-365">To get started with PowerShell workflow runbooks, see [My first PowerShell workflow runbook](automation-first-runbook-textual.md)</span></span>

