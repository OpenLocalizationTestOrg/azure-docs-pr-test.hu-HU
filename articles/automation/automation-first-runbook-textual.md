---
title: "aaaMy első PowerShell-munkafolyamati forgatókönyv az Azure Automationben |} Microsoft Docs"
description: "Az oktatóanyag bemutatja, hogyan hello létrehozása, tesztelése és a PowerShell munkafolyamat használatával egyszerű szöveges runbook közzététele."
services: automation
documentationcenter: 
author: mgoedtel
manager: jwhit
editor: 
keywords: "powershell-munkafolyamat, powershell-munkafolyamat példák, munkafolyamat powershell"
ms.assetid: 0002d7f7-e2b5-46e3-b5eb-4596b84fd526
ms.service: automation
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 03/26/2017
ms.author: magoedte;bwren
ms.openlocfilehash: b5a34d363ef4865878f3f68119833367b5280f83
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/06/2017
---
# <a name="my-first-powershell-workflow-runbook"></a><span data-ttu-id="4df2a-104">Az első PowerShell-alapú munkafolyamat-forgatókönyvem</span><span class="sxs-lookup"><span data-stu-id="4df2a-104">My first PowerShell Workflow runbook</span></span>

> [!div class="op_single_selector"]
> * [<span data-ttu-id="4df2a-105">Grafikus</span><span class="sxs-lookup"><span data-stu-id="4df2a-105">Graphical</span></span>](automation-first-runbook-graphical.md)
> * [<span data-ttu-id="4df2a-106">PowerShell</span><span class="sxs-lookup"><span data-stu-id="4df2a-106">PowerShell</span></span>](automation-first-runbook-textual-powershell.md)
> * [<span data-ttu-id="4df2a-107">PowerShell-munkafolyamat</span><span class="sxs-lookup"><span data-stu-id="4df2a-107">PowerShell Workflow</span></span>](automation-first-runbook-textual.md)
> 
> 

<span data-ttu-id="4df2a-108">Ez az oktatóanyag bemutatja, hogyan hello létrehozása egy [PowerShell-munkafolyamati forgatókönyv](automation-runbook-types.md#powershell-workflow-runbooks) az Azure Automationben.</span><span class="sxs-lookup"><span data-stu-id="4df2a-108">This tutorial walks you through hello creation of a [PowerShell Workflow runbook](automation-runbook-types.md#powershell-workflow-runbooks) in Azure Automation.</span></span> <span data-ttu-id="4df2a-109">Először egy egyszerű runbookot, tesztelése és közzététele során elmagyarázza, hogyan tootrack hello hello runbook-feladat állapotának.</span><span class="sxs-lookup"><span data-stu-id="4df2a-109">We start with a simple runbook that we test and publish while explaining how tootrack hello status of hello runbook job.</span></span> <span data-ttu-id="4df2a-110">A Microsoft hello runbook módosítsa tooactually kezelése az Azure-erőforrások, ebben az esetben az Azure virtuális gép elindítása.</span><span class="sxs-lookup"><span data-stu-id="4df2a-110">Then we modify hello runbook tooactually manage Azure resources, in this case starting an Azure virtual machine.</span></span> <span data-ttu-id="4df2a-111">Végül biztosítjuk hello robusztusabb runbook runbook paraméterek hozzáadásával.</span><span class="sxs-lookup"><span data-stu-id="4df2a-111">Lastly we make hello runbook more robust by adding runbook parameters.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="4df2a-112">Előfeltételek</span><span class="sxs-lookup"><span data-stu-id="4df2a-112">Prerequisites</span></span>
<span data-ttu-id="4df2a-113">toocomplete ebben az oktatóanyagban szüksége lesz a következő hello:</span><span class="sxs-lookup"><span data-stu-id="4df2a-113">toocomplete this tutorial, you will need hello following:</span></span>

* <span data-ttu-id="4df2a-114">Egy Azure-előfizetés.</span><span class="sxs-lookup"><span data-stu-id="4df2a-114">Azure subscription.</span></span> <span data-ttu-id="4df2a-115">Ha még nem rendelkezik fiókkal, [aktiválhatja MSDN-előfizetői előnyeit](https://azure.microsoft.com/pricing/member-offers/msdn-benefits-details/), illetve <a href="/pricing/free-account/" target="_blank">[regisztrálhat egy ingyenes fiókot](https://azure.microsoft.com/free/).</span><span class="sxs-lookup"><span data-stu-id="4df2a-115">If you don't have one yet, you can [activate your MSDN subscriber benefits](https://azure.microsoft.com/pricing/member-offers/msdn-benefits-details/) or <a href="/pricing/free-account/" target="_blank">[sign up for a free account](https://azure.microsoft.com/free/).</span></span>
* <span data-ttu-id="4df2a-116">[Automation-fiók](automation-sec-configure-azure-runas-account.md) toohold hello runbook és tooAzure erőforrások hitelesítéséhez.</span><span class="sxs-lookup"><span data-stu-id="4df2a-116">[Automation account](automation-sec-configure-azure-runas-account.md) toohold hello runbook and authenticate tooAzure resources.</span></span>  <span data-ttu-id="4df2a-117">Ezt a fiókot kell toostart engedéllyel rendelkezik, és állítsa le a virtuális gép hello.</span><span class="sxs-lookup"><span data-stu-id="4df2a-117">This account must have permission toostart and stop hello virtual machine.</span></span>
* <span data-ttu-id="4df2a-118">Egy Azure virtuális gép.</span><span class="sxs-lookup"><span data-stu-id="4df2a-118">An Azure virtual machine.</span></span> <span data-ttu-id="4df2a-119">Ezt a gépet leállítjuk és elindítjuk, tehát ne olyan virtuális gépet használjon, amely élesben működik.</span><span class="sxs-lookup"><span data-stu-id="4df2a-119">We stop and start this machine so it should not be a production VM.</span></span>

## <a name="step-1---create-new-runbook"></a><span data-ttu-id="4df2a-120">1. lépés – Új forgatókönyv létrehozása</span><span class="sxs-lookup"><span data-stu-id="4df2a-120">Step 1 - Create new runbook</span></span>
<span data-ttu-id="4df2a-121">Hozzon létre egy egyszerű runbookot, amely hello szöveg először foglalkozunk *Hello World*.</span><span class="sxs-lookup"><span data-stu-id="4df2a-121">We'll start by creating a simple runbook that outputs hello text *Hello World*.</span></span>

1. <span data-ttu-id="4df2a-122">Hello Azure-portálon nyissa meg az Automation-fiók.</span><span class="sxs-lookup"><span data-stu-id="4df2a-122">In hello Azure portal, open your Automation account.</span></span>  
   <span data-ttu-id="4df2a-123">hello Automation-fiók lap lehetővé teszi az erőforrások hello áttekintő képet ebben a fiókban.</span><span class="sxs-lookup"><span data-stu-id="4df2a-123">hello Automation account page gives you a quick view of hello resources in this account.</span></span> <span data-ttu-id="4df2a-124">Valószínűleg már rendelkezik adategységekkel.</span><span class="sxs-lookup"><span data-stu-id="4df2a-124">You should already have some assets.</span></span> <span data-ttu-id="4df2a-125">Ezek többsége hello modulok automatikusan új Automation-fiók található.</span><span class="sxs-lookup"><span data-stu-id="4df2a-125">Most of those are hello modules that are automatically included in a new Automation account.</span></span> <span data-ttu-id="4df2a-126">Be kell hello hitelesítőadat-eszköz hello említett [Előfeltételek](#prerequisites).</span><span class="sxs-lookup"><span data-stu-id="4df2a-126">You should also have hello Credential asset that's mentioned in hello [prerequisites](#prerequisites).</span></span>
2. <span data-ttu-id="4df2a-127">Kattintson a hello **Runbookok** csempe tooopen hello forgatókönyvek listája.</span><span class="sxs-lookup"><span data-stu-id="4df2a-127">Click on hello **Runbooks** tile tooopen hello list of runbooks.</span></span><br><br> <span data-ttu-id="4df2a-128">![Runbookok szabályozása](media/automation-first-runbook-textual/runbooks-control-tiles.png)</span><span class="sxs-lookup"><span data-stu-id="4df2a-128">![Runbooks control](media/automation-first-runbook-textual/runbooks-control-tiles.png)</span></span>
3. <span data-ttu-id="4df2a-129">Hozzon létre egy új runbookot hello kattintva **hozzáadása egy runbook** gombra, majd **hozzon létre egy új runbookot**.</span><span class="sxs-lookup"><span data-stu-id="4df2a-129">Create a new runbook by clicking on hello **Add a runbook** button and then **Create a new runbook**.</span></span>
4. <span data-ttu-id="4df2a-130">Hello runbook hello nevezze *MyFirstRunbook-munkafolyamat*.</span><span class="sxs-lookup"><span data-stu-id="4df2a-130">Give hello runbook hello name *MyFirstRunbook-Workflow*.</span></span>
5. <span data-ttu-id="4df2a-131">Ebben az esetben az oktatóanyagban módosítjuk toocreate egy [PowerShell-munkafolyamati forgatókönyv](automation-runbook-types.md#powershell-workflow-runbooks) ezért **Powershell munkafolyamat** a **runbooktípusba**.</span><span class="sxs-lookup"><span data-stu-id="4df2a-131">In this case, we're going toocreate a [PowerShell Workflow runbook](automation-runbook-types.md#powershell-workflow-runbooks) so select **Powershell Workflow** for **Runbook type**.</span></span><br><br> <span data-ttu-id="4df2a-132">![Új runbook](media/automation-first-runbook-textual/new-runbook-properties.png)</span><span class="sxs-lookup"><span data-stu-id="4df2a-132">![New runbook](media/automation-first-runbook-textual/new-runbook-properties.png)</span></span>
6. <span data-ttu-id="4df2a-133">Kattintson a **létrehozása** toocreate hello runbookot és a nyitott hello szöveges szerkesztő.</span><span class="sxs-lookup"><span data-stu-id="4df2a-133">Click **Create** toocreate hello runbook and open hello textual editor.</span></span>

## <a name="step-2---add-code-toohello-runbook"></a><span data-ttu-id="4df2a-134">2. lépés - kód toohello runbook hozzáadása</span><span class="sxs-lookup"><span data-stu-id="4df2a-134">Step 2 - Add code toohello runbook</span></span>
<span data-ttu-id="4df2a-135">Közvetlenül a hello runbookot, akkor vagy típuskód vagy parancsmagok, a runbookokat és az eszközök közül választhat hello könyvtár vezérlő, és azokat hozzáadott bármely kapcsolódó paraméterekkel toohello runbook.</span><span class="sxs-lookup"><span data-stu-id="4df2a-135">You can either type code directly into hello runbook, or you can select cmdlets, runbooks, and assets from hello Library control and have them added toohello runbook with any related parameters.</span></span> <span data-ttu-id="4df2a-136">A forgatókönyv azt követően írja be közvetlenül a hello runbook.</span><span class="sxs-lookup"><span data-stu-id="4df2a-136">For this walkthrough, we'll type directly into hello runbook.</span></span>

1. <span data-ttu-id="4df2a-137">A runbook jelenleg üres csak szükség hello *munkafolyamat* kulcsszót, a runbook, és a rendszer encase hello teljes munkafolyamat hello zárójelek közé foglalt hello nevét.</span><span class="sxs-lookup"><span data-stu-id="4df2a-137">Our runbook is currently empty with only hello required *workflow* keyword, hello name of our runbook, and hello braces that will encase hello entire workflow.</span></span>

   ```
   Workflow MyFirstRunbook-Workflow
   {
   }
   ```
2. <span data-ttu-id="4df2a-138">Írja be a következőt: *Write-Output "Hello World."*</span><span class="sxs-lookup"><span data-stu-id="4df2a-138">Type *Write-Output "Hello World."*</span></span> <span data-ttu-id="4df2a-139">hello kapcsos zárójelek.</span><span class="sxs-lookup"><span data-stu-id="4df2a-139">between hello braces.</span></span>

   ```
   Workflow MyFirstRunbook-Workflow
   {
   Write-Output "Hello World"
   }
   ```
3. <span data-ttu-id="4df2a-140">Hello runbook gombra kattintva mentse **mentése**.</span><span class="sxs-lookup"><span data-stu-id="4df2a-140">Save hello runbook by clicking **Save**.</span></span><br><br> <span data-ttu-id="4df2a-141">![Runbook mentése](media/automation-first-runbook-textual/automation-runbook-edit-controls-save.png)</span><span class="sxs-lookup"><span data-stu-id="4df2a-141">![Save runbook](media/automation-first-runbook-textual/automation-runbook-edit-controls-save.png)</span></span>

## <a name="step-3---test-hello-runbook"></a><span data-ttu-id="4df2a-142">3. lépés – hello runbook tesztelése</span><span class="sxs-lookup"><span data-stu-id="4df2a-142">Step 3 - Test hello runbook</span></span>
<span data-ttu-id="4df2a-143">Ahhoz, hogy hello runbook toomake tehessenek közzé az tootest szeretnénk elérhető éles környezetben, azt toomake meg arról, hogy megfelelően működik-e.</span><span class="sxs-lookup"><span data-stu-id="4df2a-143">Before we publish hello runbook toomake it available in production, we want tootest it toomake sure that it works properly.</span></span> <span data-ttu-id="4df2a-144">Egy forgatókönyv tesztelésekor a **Piszkozat** verziót futtatja, és interaktív módon megtekinti a kimenetét.</span><span class="sxs-lookup"><span data-stu-id="4df2a-144">When you test a runbook, you run its **Draft** version and view its output interactively.</span></span>

1. <span data-ttu-id="4df2a-145">Kattintson a **teszt ablaktábla** tooopen hello teszt ablaktáblán.</span><span class="sxs-lookup"><span data-stu-id="4df2a-145">Click **Test pane** tooopen hello Test pane.</span></span><br><br> <span data-ttu-id="4df2a-146">![Teszt panel](media/automation-first-runbook-textual/automation-runbook-edit-controls-test.png)</span><span class="sxs-lookup"><span data-stu-id="4df2a-146">![Test pane](media/automation-first-runbook-textual/automation-runbook-edit-controls-test.png)</span></span>
2. <span data-ttu-id="4df2a-147">Kattintson a **Start** toostart hello tesztelése.</span><span class="sxs-lookup"><span data-stu-id="4df2a-147">Click **Start** toostart hello test.</span></span> <span data-ttu-id="4df2a-148">Csak az engedélyezett hello lehetőség legyen.</span><span class="sxs-lookup"><span data-stu-id="4df2a-148">This should be hello only enabled option.</span></span>
3. <span data-ttu-id="4df2a-149">Létrejön egy [forgatókönyv-feladat](automation-runbook-execution.md), és megjelenik annak állapota.</span><span class="sxs-lookup"><span data-stu-id="4df2a-149">A [runbook job](automation-runbook-execution.md) is created and its status displayed.</span></span>  
   <span data-ttu-id="4df2a-150">hello feladat állapota elindul *várakozik* azt jelzi, hogy a forgatókönyv-feldolgozók hello felhő toocome érhető el a vár.</span><span class="sxs-lookup"><span data-stu-id="4df2a-150">hello job status will start as *Queued* indicating that it is waiting for a runbook worker in hello cloud toocome available.</span></span> <span data-ttu-id="4df2a-151">Ezután ez az objektum túl*indítása* dolgozó jogcímek hello feladatot, amikor, majd *futtató* amikor hello runbook ténylegesen elindul.</span><span class="sxs-lookup"><span data-stu-id="4df2a-151">It will then move too*Starting* when a worker claims hello job, and then *Running* when hello runbook actually starts running.</span></span>  
4. <span data-ttu-id="4df2a-152">Hello runbook feladat befejeződik, a kimenet jelenik meg.</span><span class="sxs-lookup"><span data-stu-id="4df2a-152">When hello runbook job completes, its output is displayed.</span></span> <span data-ttu-id="4df2a-153">A mi esetünkben ez a következő: *Hello World*.</span><span class="sxs-lookup"><span data-stu-id="4df2a-153">In our case, we should see *Hello World*.</span></span><br><br> <span data-ttu-id="4df2a-154">![Hello World](media/automation-first-runbook-textual/test-output-hello-world.png)</span><span class="sxs-lookup"><span data-stu-id="4df2a-154">![Hello World](media/automation-first-runbook-textual/test-output-hello-world.png)</span></span>
5. <span data-ttu-id="4df2a-155">Zárja be a hello teszt ablaktábla tooreturn toohello vászonra.</span><span class="sxs-lookup"><span data-stu-id="4df2a-155">Close hello Test pane tooreturn toohello canvas.</span></span>

## <a name="step-4---publish-and-start-hello-runbook"></a><span data-ttu-id="4df2a-156">4. lépés: közzététele és hello runbook elindítása</span><span class="sxs-lookup"><span data-stu-id="4df2a-156">Step 4 - Publish and start hello runbook</span></span>
<span data-ttu-id="4df2a-157">hello runbookot, hogy az imént létrehozott még mindig vázlat módban van.</span><span class="sxs-lookup"><span data-stu-id="4df2a-157">hello runbook that we just created is still in Draft mode.</span></span> <span data-ttu-id="4df2a-158">Igazolnia kell, hogy toopublish azt azt futtatása előtt az éles környezetben.</span><span class="sxs-lookup"><span data-stu-id="4df2a-158">We need toopublish it before we can run it in production.</span></span> <span data-ttu-id="4df2a-159">Egy runbook közzétételekor hello meglévő közzétett verzió felülírja a hello vázlatként megjelölt verziót.</span><span class="sxs-lookup"><span data-stu-id="4df2a-159">When you publish a runbook, you overwrite hello existing Published version with hello Draft version.</span></span> <span data-ttu-id="4df2a-160">Ebben az esetben nem tudunk egy közzétett verziója még mivel az imént létrehozott hello runbook.</span><span class="sxs-lookup"><span data-stu-id="4df2a-160">In our case, we don't have a Published version yet because we just created hello runbook.</span></span>

1. <span data-ttu-id="4df2a-161">Kattintson a **közzététel** toopublish hello runbookot, majd **Igen** megjelenésekor.</span><span class="sxs-lookup"><span data-stu-id="4df2a-161">Click **Publish** toopublish hello runbook and then **Yes** when prompted.</span></span><br><br> <span data-ttu-id="4df2a-162">![Közzététel](media/automation-first-runbook-textual/automation-runbook-edit-controls-publish.png)</span><span class="sxs-lookup"><span data-stu-id="4df2a-162">![Publish](media/automation-first-runbook-textual/automation-runbook-edit-controls-publish.png)</span></span>
2. <span data-ttu-id="4df2a-163">Ha bal oldali tooview hello runbook hello **Runbookok** panelen, megjelenik egy **szerzői állapot** a **közzétett**.</span><span class="sxs-lookup"><span data-stu-id="4df2a-163">If you scroll left tooview hello runbook in hello **Runbooks** pane now, it will show an **Authoring Status** of **Published**.</span></span>
3. <span data-ttu-id="4df2a-164">Görgessen hátsó toohello jobb tooview hello ablaktábla **MyFirstRunbook-munkafolyamat**.</span><span class="sxs-lookup"><span data-stu-id="4df2a-164">Scroll back toohello right tooview hello pane for **MyFirstRunbook-Workflow**.</span></span>  
   <span data-ttu-id="4df2a-165">hello hello tetején beállítások lehetővé teszik a számunkra toostart hello runbookot, az ütemezés toostart valamikor a jövőbeli hello, vagy hozzon létre egy [webhook](automation-webhooks.md) indíthatók el, egy HTTP-hívás keresztül.</span><span class="sxs-lookup"><span data-stu-id="4df2a-165">hello options across hello top allow us toostart hello runbook, schedule it toostart at some time in hello future, or create a [webhook](automation-webhooks.md) so it can be started through an HTTP call.</span></span>
4. <span data-ttu-id="4df2a-166">Toostart hello runbook szeretnénk, kattintson a **Start** , majd **Igen** megjelenésekor.</span><span class="sxs-lookup"><span data-stu-id="4df2a-166">We just want toostart hello runbook so click **Start** and then **Yes** when prompted.</span></span><br><br> <span data-ttu-id="4df2a-167">![Runbook indítása](media/automation-first-runbook-textual/automation-runbook-controls-start.png)</span><span class="sxs-lookup"><span data-stu-id="4df2a-167">![Start runbook](media/automation-first-runbook-textual/automation-runbook-controls-start.png)</span></span>
5. <span data-ttu-id="4df2a-168">A feladat panelen, amely az imént létrehozott hello runbook-feladat van megnyitva.</span><span class="sxs-lookup"><span data-stu-id="4df2a-168">A job pane is opened for hello runbook job that we just created.</span></span> <span data-ttu-id="4df2a-169">Azt is zárja be az ezen az ablaktáblán, de ebben az esetben azt kell nyitva hagyja, hogy figyelemmel követheti a hello feladat előrehaladását.</span><span class="sxs-lookup"><span data-stu-id="4df2a-169">We can close this pane, but in this case we'll leave it open so we can watch hello job's progress.</span></span>
6. <span data-ttu-id="4df2a-170">hello feladat állapota látható **feladat összegzése** és egyezések hello imént látott amikor tesztelt hello runbook állapotok.</span><span class="sxs-lookup"><span data-stu-id="4df2a-170">hello job status is shown in **Job Summary** and matches hello statuses that we saw when we tested hello runbook.</span></span><br><br> <span data-ttu-id="4df2a-171">![Feladat összegzése](media/automation-first-runbook-textual/job-pane-status-blade-jobsummary.png)</span><span class="sxs-lookup"><span data-stu-id="4df2a-171">![Job Summary](media/automation-first-runbook-textual/job-pane-status-blade-jobsummary.png)</span></span>
7. <span data-ttu-id="4df2a-172">Egyszer a runbook állapota látható hello *befejezve*, kattintson a **kimeneti**.</span><span class="sxs-lookup"><span data-stu-id="4df2a-172">Once hello runbook status shows *Completed*, click **Output**.</span></span> <span data-ttu-id="4df2a-173">hello Tesztkimenet ablaktáblán már meg van nyitva, és láthatja a *Hello World*.</span><span class="sxs-lookup"><span data-stu-id="4df2a-173">hello Output pane is opened, and we can see our *Hello World*.</span></span><br><br> <span data-ttu-id="4df2a-174">![Feladat összegzése](media/automation-first-runbook-textual/job-pane-status-blade-outputtile.png)</span><span class="sxs-lookup"><span data-stu-id="4df2a-174">![Job Summary](media/automation-first-runbook-textual/job-pane-status-blade-outputtile.png)</span></span>  
8. <span data-ttu-id="4df2a-175">Bezárás hello Tesztkimenet ablaktáblán.</span><span class="sxs-lookup"><span data-stu-id="4df2a-175">Close hello Output pane.</span></span>
9. <span data-ttu-id="4df2a-176">Kattintson a **összes napló** tooopen hello adatfolyamok ablaktábla hello runbook-feladat.</span><span class="sxs-lookup"><span data-stu-id="4df2a-176">Click **All Logs** tooopen hello Streams pane for hello runbook job.</span></span> <span data-ttu-id="4df2a-177">Csak azt kell látnia *Hello World* hello kimeneti adatfolyam, de ez lehet megjelenítése más adatfolyamok, például a Verbose és a hiba a runbook-feladat Ha hello runbook ír toothem.</span><span class="sxs-lookup"><span data-stu-id="4df2a-177">We should only see *Hello World* in hello output stream, but this can show other streams for a runbook job such as Verbose and Error if hello runbook writes toothem.</span></span><br><br> <span data-ttu-id="4df2a-178">![Feladat összegzése](media/automation-first-runbook-textual/job-pane-status-blade-alllogstile.png)</span><span class="sxs-lookup"><span data-stu-id="4df2a-178">![Job Summary](media/automation-first-runbook-textual/job-pane-status-blade-alllogstile.png)</span></span>
10. <span data-ttu-id="4df2a-179">Zárja be és hello adatfolyamok hello feladat panelen tooreturn toohello MyFirstRunbook ablaktábla.</span><span class="sxs-lookup"><span data-stu-id="4df2a-179">Close hello Streams pane and hello Job pane tooreturn toohello MyFirstRunbook pane.</span></span>
11. <span data-ttu-id="4df2a-180">Kattintson a **feladatok** tooopen hello feladatok ablaktábla a runbook.</span><span class="sxs-lookup"><span data-stu-id="4df2a-180">Click **Jobs** tooopen hello Jobs pane for this runbook.</span></span> <span data-ttu-id="4df2a-181">Ez a runbook által létrehozott hello feladatok listája.</span><span class="sxs-lookup"><span data-stu-id="4df2a-181">This lists all of hello jobs created by this runbook.</span></span> <span data-ttu-id="4df2a-182">Csak egy feladat feltüntetve mivel csak miatt hello feladat egyszer kell látható.</span><span class="sxs-lookup"><span data-stu-id="4df2a-182">We should only see one job listed since we only ran hello job once.</span></span><br><br> <span data-ttu-id="4df2a-183">![Feladatok](media/automation-first-runbook-textual/runbook-control-job-tile.png)</span><span class="sxs-lookup"><span data-stu-id="4df2a-183">![Jobs](media/automation-first-runbook-textual/runbook-control-job-tile.png)</span></span>
12. <span data-ttu-id="4df2a-184">Kattintson a feladat tooopen hello azonos, amely azt megtekinteni, amikor a Microsoft hello runbook indítása feladat panelen.</span><span class="sxs-lookup"><span data-stu-id="4df2a-184">You can click on this job tooopen hello same Job pane that we viewed when we started hello runbook.</span></span> <span data-ttu-id="4df2a-185">Ez lehetővé teszi toogo vissza az idő és a nézet számára egy adott runbookhoz létrehozott összes feladat hello részleteit.</span><span class="sxs-lookup"><span data-stu-id="4df2a-185">This allows you toogo back in time and view hello details of any job that was created for a particular runbook.</span></span>

## <a name="step-5---add-authentication-toomanage-azure-resources"></a><span data-ttu-id="4df2a-186">5. lépés - hitelesítési toomanage hozzá Azure-erőforrások</span><span class="sxs-lookup"><span data-stu-id="4df2a-186">Step 5 - Add authentication toomanage Azure resources</span></span>
<span data-ttu-id="4df2a-187">Most már teszteltük és közzétettük a forgatókönyvet, de még nem csinál semmi hasznosat.</span><span class="sxs-lookup"><span data-stu-id="4df2a-187">We've tested and published our runbook, but so far it doesn't do anything useful.</span></span> <span data-ttu-id="4df2a-188">Azt szeretnénk, ha az Azure-erőforrások kezeléséhez toohave.</span><span class="sxs-lookup"><span data-stu-id="4df2a-188">We want toohave it manage Azure resources.</span></span> <span data-ttu-id="4df2a-189">Bár, ha jelenleg nincs hitelesítés tooin hello hello hitelesítő adatok, amelyek használatával említett képes toodo működésbe [Előfeltételek](#prerequisites).</span><span class="sxs-lookup"><span data-stu-id="4df2a-189">It won't be able toodo that though unless we have it authenticate using hello credentials that are referred tooin hello [prerequisites](#prerequisites).</span></span> <span data-ttu-id="4df2a-190">Nézzük meg, a hello **Add-AzureRMAccount** parancsmag.</span><span class="sxs-lookup"><span data-stu-id="4df2a-190">We do that with hello **Add-AzureRMAccount** cmdlet.</span></span>

1. <span data-ttu-id="4df2a-191">Nyissa meg hello szöveges szerkesztő kattintva **szerkesztése** hello MyFirstRunbook-munkafolyamat panelen.</span><span class="sxs-lookup"><span data-stu-id="4df2a-191">Open hello textual editor by clicking **Edit** on hello MyFirstRunbook-Workflow pane.</span></span><br><br> <span data-ttu-id="4df2a-192">![Runbook szerkesztése](media/automation-first-runbook-textual/automation-runbook-controls-edit.png)</span><span class="sxs-lookup"><span data-stu-id="4df2a-192">![Edit runbook](media/automation-first-runbook-textual/automation-runbook-controls-edit.png)</span></span>
2. <span data-ttu-id="4df2a-193">Nem szükséges hello **Write-Output** többé. sor, úgy lépjen tovább, és törölje azt.</span><span class="sxs-lookup"><span data-stu-id="4df2a-193">We don't need hello **Write-Output** line anymore, so go ahead and delete it.</span></span>
3. <span data-ttu-id="4df2a-194">Hello kurzor elhelyezése egy üres sor hello kapcsos zárójelek között.</span><span class="sxs-lookup"><span data-stu-id="4df2a-194">Position hello cursor on a blank line between hello braces.</span></span>
4. <span data-ttu-id="4df2a-195">Írja be vagy másolja be a következő kódot az Automation futtató fiókhoz hello hitelesítés kezelésére hello:</span><span class="sxs-lookup"><span data-stu-id="4df2a-195">Type or copy and paste hello following code that will handle hello authentication with your Automation Run As account:</span></span>

   ```
   $Conn = Get-AutomationConnection -Name AzureRunAsConnection
   Add-AzureRMAccount -ServicePrincipal -Tenant $Conn.TenantID `
   -ApplicationId $Conn.ApplicationID -CertificateThumbprint $Conn.CertificateThumbprint
   ```
5. <span data-ttu-id="4df2a-196">Kattintson a **teszt ablaktábla** , hogy hello runbook tesztelése.</span><span class="sxs-lookup"><span data-stu-id="4df2a-196">Click **Test pane** so that we can test hello runbook.</span></span>
6. <span data-ttu-id="4df2a-197">Kattintson a **Start** toostart hello tesztelése.</span><span class="sxs-lookup"><span data-stu-id="4df2a-197">Click **Start** toostart hello test.</span></span> <span data-ttu-id="4df2a-198">Miután befejeződött, hasonló toohello kimenete a következő, a fiók alapszintű adatainak megjelenítése kell kapnia.</span><span class="sxs-lookup"><span data-stu-id="4df2a-198">Once it completes, you should receive output similar toohello following, displaying basic information from your account.</span></span> <span data-ttu-id="4df2a-199">Ez megerősíti, hogy hello hitelesítő adat érvénytelen.</span><span class="sxs-lookup"><span data-stu-id="4df2a-199">This confirms that hello credential is valid.</span></span><br><br> <span data-ttu-id="4df2a-200">![Hitelesítés](media/automation-first-runbook-textual/runbook-auth-output.png)</span><span class="sxs-lookup"><span data-stu-id="4df2a-200">![Authenticate](media/automation-first-runbook-textual/runbook-auth-output.png)</span></span>

## <a name="step-6---add-code-toostart-a-virtual-machine"></a><span data-ttu-id="4df2a-201">6. lépés - kód toostart a virtuális gépek hozzáadása</span><span class="sxs-lookup"><span data-stu-id="4df2a-201">Step 6 - Add code toostart a virtual machine</span></span>
<span data-ttu-id="4df2a-202">Most, hogy a runbook tooour Azure-előfizetés hitelesíti magát, hogy kezelhetik az erőforrásokat.</span><span class="sxs-lookup"><span data-stu-id="4df2a-202">Now that our runbook is authenticating tooour Azure subscription, we can manage resources.</span></span> <span data-ttu-id="4df2a-203">A parancs toostart egy virtuális gép jelenleg felvenni.</span><span class="sxs-lookup"><span data-stu-id="4df2a-203">We add a command toostart a virtual machine.</span></span> <span data-ttu-id="4df2a-204">Az Azure-előfizetése kiválaszthatja a virtuális gépi, és most azt is, amelyek neve a hello runbook hardcoding.</span><span class="sxs-lookup"><span data-stu-id="4df2a-204">You can pick any virtual machine in your Azure subscription, and for now we will be hardcoding that name in hello runbook.</span></span>

1. <span data-ttu-id="4df2a-205">Után *Add-AzureRmAccount*, típus *Start-AzureRmVM-név (VMName) - ResourceGroupName "NameofResourceGroup"* biztosító hello és hello virtuális gép toostart erőforráscsoport nevét.</span><span class="sxs-lookup"><span data-stu-id="4df2a-205">After *Add-AzureRmAccount*, type *Start-AzureRmVM -Name 'VMName' -ResourceGroupName 'NameofResourceGroup'* providing hello name and Resource Group name of hello virtual machine toostart.</span></span>  

   ```
   workflow MyFirstRunbook-Workflow
   {
   $Conn = Get-AutomationConnection -Name AzureRunAsConnection
   Add-AzureRMAccount -ServicePrincipal -Tenant $Conn.TenantID -ApplicationId $Conn.ApplicationID -CertificateThumbprint $Conn.CertificateThumbprint
   Start-AzureRmVM -Name 'VMName' -ResourceGroupName 'ResourceGroupName'
   }
   ```
2. <span data-ttu-id="4df2a-206">Hello runbook mentéséhez, és kattintson a **teszt ablaktábla** , hogy azt tesztelése.</span><span class="sxs-lookup"><span data-stu-id="4df2a-206">Save hello runbook and then click **Test pane** so that we can test it.</span></span>
3. <span data-ttu-id="4df2a-207">Kattintson a **Start** toostart hello tesztelése.</span><span class="sxs-lookup"><span data-stu-id="4df2a-207">Click **Start** toostart hello test.</span></span> <span data-ttu-id="4df2a-208">Miután befejeződött, ellenőrizze, hogy a virtuális gép hello lett elindítva.</span><span class="sxs-lookup"><span data-stu-id="4df2a-208">Once it completes, check that hello virtual machine was started.</span></span>

## <a name="step-7---add-an-input-parameter-toohello-runbook"></a><span data-ttu-id="4df2a-209">7. lépés – egy bemeneti paraméter toohello runbook hozzáadása</span><span class="sxs-lookup"><span data-stu-id="4df2a-209">Step 7 - Add an input parameter toohello runbook</span></span>
<span data-ttu-id="4df2a-210">A runbook jelenleg kezdődik hello virtuális gépet, hogy a Microsoft hello runbook szoftveresen kötött, de lenne hasznos, ha igazolnia kell megadni hello virtuális gép hello runbook indításakor.</span><span class="sxs-lookup"><span data-stu-id="4df2a-210">Our runbook currently starts hello virtual machine that we hardcoded in hello runbook, but it would be more useful if we could specify hello virtual machine when hello runbook is started.</span></span> <span data-ttu-id="4df2a-211">A Microsoft most hozzáadjuk bemeneti paraméterek toohello runbook tooprovide funkció.</span><span class="sxs-lookup"><span data-stu-id="4df2a-211">We will now add input parameters toohello runbook tooprovide that functionality.</span></span>

1. <span data-ttu-id="4df2a-212">Paraméterek hozzáadása *VMName* és *ResourceGroupName* toohello runbook és ezek a változók használata hello **Start-AzureRmVM** parancsmag az alábbi hello példában látható módon.</span><span class="sxs-lookup"><span data-stu-id="4df2a-212">Add parameters for *VMName* and *ResourceGroupName* toohello runbook and use these variables with hello **Start-AzureRmVM** cmdlet as in hello example below.</span></span>

   ```
   workflow MyFirstRunbook-Workflow
   {
    Param(
     [string]$VMName,
     [string]$ResourceGroupName
    )  
   $Conn = Get-AutomationConnection -Name AzureRunAsConnection
   Add-AzureRMAccount -ServicePrincipal -Tenant $Conn.TenantID -ApplicationId $Conn.ApplicationID -CertificateThumbprint $Conn.CertificateThumbprint
   Start-AzureRmVM -Name $VMName -ResourceGroupName $ResourceGroupName
   }
   ```
2. <span data-ttu-id="4df2a-213">Hello runbook mentéséhez, és hello teszt ablaktábla megnyitása.</span><span class="sxs-lookup"><span data-stu-id="4df2a-213">Save hello runbook and open hello Test pane.</span></span> <span data-ttu-id="4df2a-214">Vegye figyelembe, hogy most biztosítható értékek hello hello tesztben használt két bemeneti változók.</span><span class="sxs-lookup"><span data-stu-id="4df2a-214">Note that you can now provide values for hello two input variables that will be used in hello test.</span></span>
3. <span data-ttu-id="4df2a-215">Bezárás hello teszt ablaktáblán.</span><span class="sxs-lookup"><span data-stu-id="4df2a-215">Close hello Test pane.</span></span>
4. <span data-ttu-id="4df2a-216">Kattintson a **közzététel** toopublish hello új hello forgatókönyv verzióját.</span><span class="sxs-lookup"><span data-stu-id="4df2a-216">Click **Publish** toopublish hello new version of hello runbook.</span></span>
5. <span data-ttu-id="4df2a-217">Állítsa le, amelyet az előző lépésben hello hello virtuális gépet.</span><span class="sxs-lookup"><span data-stu-id="4df2a-217">Stop hello virtual machine that you started in hello previous step.</span></span>
6. <span data-ttu-id="4df2a-218">Kattintson a **Start** toostart hello runbook.</span><span class="sxs-lookup"><span data-stu-id="4df2a-218">Click **Start** toostart hello runbook.</span></span> <span data-ttu-id="4df2a-219">A típushoz hello **VMName** és **ResourceGroupName** hello virtuális géphez, hogy toostart fog.</span><span class="sxs-lookup"><span data-stu-id="4df2a-219">Type in hello **VMName** and **ResourceGroupName** for hello virtual machine that you're going toostart.</span></span><br><br> <span data-ttu-id="4df2a-220">![Runbook indítása](media/automation-first-runbook-textual/automation-pass-params.png)</span><span class="sxs-lookup"><span data-stu-id="4df2a-220">![Start Runbook](media/automation-first-runbook-textual/automation-pass-params.png)</span></span><br>  
7. <span data-ttu-id="4df2a-221">Hello runbook befejezését követően ellenőrizze, hogy a virtuális gép hello elindítása.</span><span class="sxs-lookup"><span data-stu-id="4df2a-221">When hello runbook completes, check that hello virtual machine was started.</span></span>  

## <a name="next-steps"></a><span data-ttu-id="4df2a-222">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="4df2a-222">Next steps</span></span>
* <span data-ttu-id="4df2a-223">Grafikus forgatókönyvek használatába tooget lásd [saját első grafikus forgatókönyv](automation-first-runbook-graphical.md)</span><span class="sxs-lookup"><span data-stu-id="4df2a-223">tooget started with Graphical runbooks, see [My first graphical runbook](automation-first-runbook-graphical.md)</span></span>
* <span data-ttu-id="4df2a-224">a PowerShell-forgatókönyvek, használatába tooget lásd [saját első PowerShell-forgatókönyv](automation-first-runbook-textual-powershell.md)</span><span class="sxs-lookup"><span data-stu-id="4df2a-224">tooget started with PowerShell runbooks, see [My first PowerShell runbook](automation-first-runbook-textual-powershell.md)</span></span>
* <span data-ttu-id="4df2a-225">További információ az runbooktípusokkal, azok előnyeit, és a korlátozásokról toolearn lásd [Azure Automation-runbook típusok](automation-runbook-types.md)</span><span class="sxs-lookup"><span data-stu-id="4df2a-225">toolearn more about runbook types, their advantages and limitations, see [Azure Automation runbook types](automation-runbook-types.md)</span></span>
* <span data-ttu-id="4df2a-226">További információk a PowerShell-parancsprogramok támogatásáról: [PowerShell-parancsprogramok natív támogatása az Azure Automationben](https://azure.microsoft.com/blog/announcing-powershell-script-support-azure-automation-2/)</span><span class="sxs-lookup"><span data-stu-id="4df2a-226">For more information on PowerShell script support feature, see [Native PowerShell script support in Azure Automation](https://azure.microsoft.com/blog/announcing-powershell-script-support-azure-automation-2/)</span></span>
