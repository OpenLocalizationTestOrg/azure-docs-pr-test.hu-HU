---
title: "az Azure Automation-forgatókönyv grafikus kezelése aaaError |} Microsoft Docs"
description: "Ez a cikk ismerteti, hogyan tooimplement hibakezelési grafikus Azure Automation-runbook logikája."
services: automation
documentationcenter: 
author: mgoedtel
manager: jwhit
editor: tysonn
ms.assetid: 
ms.service: automation
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 12/26/2016
ms.author: magoedte
ms.openlocfilehash: b9ff01361d2ebd9c0174b074a7a290b1cc2fd1c8
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/06/2017
---
# <a name="error-handling-in-azure-automation-graphical-runbooks"></a><span data-ttu-id="f2da3-103">Hibakezelés az Azure Automation grafikus runbookokban</span><span class="sxs-lookup"><span data-stu-id="f2da3-103">Error handling in Azure Automation graphical runbooks</span></span>

<span data-ttu-id="f2da3-104">A kulcs runbook tervezési egyszerű tooconsider azonosítja, hogy a runbook előfordulhat, hogy különböző problémákat.</span><span class="sxs-lookup"><span data-stu-id="f2da3-104">A key runbook design principal tooconsider is identifying different issues that a runbook might experience.</span></span> <span data-ttu-id="f2da3-105">Az ilyen helyzetek közé tartoznak a sikeres műveletek, a várt hibaállapotok és a váratlan hibafeltételek.</span><span class="sxs-lookup"><span data-stu-id="f2da3-105">These issues can include success, expected error states, and unexpected error conditions.</span></span>

<span data-ttu-id="f2da3-106">A runbookoknak hibakezelési képességekkel is kell rendelkezniük.</span><span class="sxs-lookup"><span data-stu-id="f2da3-106">Runbooks should include error handling.</span></span> <span data-ttu-id="f2da3-107">toovalidate tevékenység kimeneti hello, vagy hiba lép fel grafikus forgatókönyvek kezeléséhez, használhatja a Windows PowerShell tevékenységeket, feltételes logikához hello kimeneti hivatkozásra hello tevékenység megadása, vagy egy másik módszer alkalmazása.</span><span class="sxs-lookup"><span data-stu-id="f2da3-107">toovalidate hello output of an activity or handle an error with graphical runbooks, you could use a Windows PowerShell code activity, define conditional logic on hello output link of hello activity, or apply another method.</span></span>          

<span data-ttu-id="f2da3-108">Gyakran Ha egy nem okozó hibát, amely runbook-tevékenység fellép, a következő tevékenység feldolgozása hello hiba függetlenül.</span><span class="sxs-lookup"><span data-stu-id="f2da3-108">Often, if there is a non-terminating error that occurs with a runbook activity, any activity that follows is processed regardless of hello error.</span></span> <span data-ttu-id="f2da3-109">hello hiba valószínűleg toogenerate kivételt, de a következő tevékenység hello továbbra is engedélyezett toorun.</span><span class="sxs-lookup"><span data-stu-id="f2da3-109">hello error is likely toogenerate an exception, but hello next activity is still allowed toorun.</span></span> <span data-ttu-id="f2da3-110">Ez az hello módon, hogy PowerShell tervezett toohandle hibák.</span><span class="sxs-lookup"><span data-stu-id="f2da3-110">This is hello way that PowerShell is designed toohandle errors.</span></span>    

<span data-ttu-id="f2da3-111">PowerShell végrehajtása során előforduló hibák hello típusú leáll, vagy nem okozó.</span><span class="sxs-lookup"><span data-stu-id="f2da3-111">hello types of PowerShell errors that can occur during execution are terminating or non-terminating.</span></span> <span data-ttu-id="f2da3-112">hello különbségei lezáró és nem okozó hibák a következők:</span><span class="sxs-lookup"><span data-stu-id="f2da3-112">hello differences between terminating and non-terminating errors are as follows:</span></span>

* <span data-ttu-id="f2da3-113">**Leállítja a hiba**: súlyos hiba, amely teljesen leállítja hello parancsot (vagy parancsfájl végrehajtása) végrehajtása közben.</span><span class="sxs-lookup"><span data-stu-id="f2da3-113">**Terminating error**: A serious error during execution that halts hello command (or script execution) completely.</span></span> <span data-ttu-id="f2da3-114">Ilyenek például a nem létező parancsmagok, a parancsmag futását megakadályozó szintaktikai hibák vagy az egyéb végzetes hibák.</span><span class="sxs-lookup"><span data-stu-id="f2da3-114">Examples include non-existent cmdlets, syntax errors that prevent a cmdlet from running, or other fatal errors.</span></span>

* <span data-ttu-id="f2da3-115">**A nem okozó hibát**: nem súlyos hiba, amely lehetővé teszi a végrehajtását toocontinue annak ellenére, hogy hello hiba.</span><span class="sxs-lookup"><span data-stu-id="f2da3-115">**Non-terminating error**: A non-serious error that allows execution toocontinue despite hello failure.</span></span> <span data-ttu-id="f2da3-116">Ilyenek például a műveleti hibák, például a „fájl nem található” vagy az engedélyekkel kapcsolatos problémák.</span><span class="sxs-lookup"><span data-stu-id="f2da3-116">Examples include operational errors such as file not found errors and permissions problems.</span></span>

<span data-ttu-id="f2da3-117">Azure Automation grafikus forgatókönyvek továbbfejlesztettük a hello funkció tooinclude hibakezelés.</span><span class="sxs-lookup"><span data-stu-id="f2da3-117">Azure Automation graphical runbooks have been improved with hello capability tooinclude error handling.</span></span> <span data-ttu-id="f2da3-118">A kivételeket mostantól nem megszakító hibákká változtathatja, valamint hibahivatkozásokat hozhat létre a tevékenységek között.</span><span class="sxs-lookup"><span data-stu-id="f2da3-118">You can now turn exceptions into non-terminating errors and create error links between activities.</span></span> <span data-ttu-id="f2da3-119">Ez a folyamat lehetővé teszi egy runbook Szerző toocatch hibákat, és felismert vagy váratlan feltételek kezelése.</span><span class="sxs-lookup"><span data-stu-id="f2da3-119">This process allows a runbook author toocatch errors and manage realized or unexpected conditions.</span></span>  

## <a name="when-toouse-error-handling"></a><span data-ttu-id="f2da3-120">Amikor toouse hibakezelés</span><span class="sxs-lookup"><span data-stu-id="f2da3-120">When toouse error handling</span></span>

<span data-ttu-id="f2da3-121">Ha egy kritikus tevékenységet, amely egy hiba vagy kivételt jelez, akkor fontos tooprevent hello következő tevékenység a runbook a feldolgozási és toohandle hello hiba megfelelően.</span><span class="sxs-lookup"><span data-stu-id="f2da3-121">Whenever there is a critical activity that throws an error or exception, it's important tooprevent hello next activity in your runbook from processing and toohandle hello error appropriately.</span></span> <span data-ttu-id="f2da3-122">Ez kritikus fontosságú abban az esetben, ha a runbookok valamilyen üzleti vagy szolgáltatási műveleti folyamatot támogatnak.</span><span class="sxs-lookup"><span data-stu-id="f2da3-122">This is especially critical when your runbooks are supporting a business or service operations process.</span></span>

<span data-ttu-id="f2da3-123">Minden egyes tevékenységhez, amely hibát eredményezhet hello runbook Szerző egy mutató tooany más tevékenység hiba hivatkozást adhat hozzá.</span><span class="sxs-lookup"><span data-stu-id="f2da3-123">For each activity that can produce an error, hello runbook author can add an error link pointing tooany other activity.</span></span>  <span data-ttu-id="f2da3-124">hello céltevékenységre is lehet bármely típusú kód tevékenységek, például egy másik runbook hívja, a parancsmag meghívása, és így tovább.</span><span class="sxs-lookup"><span data-stu-id="f2da3-124">hello destination activity can be of any type, including code activities, invoking a cmdlet, invoking another runbook, and so on.</span></span>

<span data-ttu-id="f2da3-125">Ezenkívül hello céltevékenységre is kimenő hivatkozásokat.</span><span class="sxs-lookup"><span data-stu-id="f2da3-125">In addition, hello destination activity can also have outgoing links.</span></span> <span data-ttu-id="f2da3-126">Ezek lehetnek szokványos hivatkozások vagy hibahivatkozások.</span><span class="sxs-lookup"><span data-stu-id="f2da3-126">These links can be regular links or error links.</span></span> <span data-ttu-id="f2da3-127">Ez azt jelenti, hogy hello runbook Szerző komplex hibakezelő logikai keresésére átrendezésével tooa nélkül is létrehozható tevékenység kód.</span><span class="sxs-lookup"><span data-stu-id="f2da3-127">This means hello runbook author can implement complex error-handling logic without resorting tooa code activity.</span></span> <span data-ttu-id="f2da3-128">hello ajánlott gyakorlat az toocreate közös funkcióinak dedikált hibakezelő runbookokhoz, de nincs kötelező.</span><span class="sxs-lookup"><span data-stu-id="f2da3-128">hello recommended practice is toocreate a dedicated error-handling runbook with common functionality, but it's not mandatory.</span></span> <span data-ttu-id="f2da3-129">Egy PowerShell-kód nem tevékenység a hibakezelő logikai hello csak lehetőséget.</span><span class="sxs-lookup"><span data-stu-id="f2da3-129">Error-handling logic in a PowerShell code activity it isn't hello only option.</span></span>  

<span data-ttu-id="f2da3-130">Például fontolja meg a runbook toostart megpróbál egy virtuális Gépet, és telepíteni az alkalmazást.</span><span class="sxs-lookup"><span data-stu-id="f2da3-130">For example, consider a runbook that tries toostart a VM and install an application on it.</span></span> <span data-ttu-id="f2da3-131">Hello virtuális gép nem indul el megfelelően, ha két műveleteket hajtja végre:</span><span class="sxs-lookup"><span data-stu-id="f2da3-131">If hello VM doesn't start correctly, it performs two actions:</span></span>

1. <span data-ttu-id="f2da3-132">Értesítést küld a problémáról.</span><span class="sxs-lookup"><span data-stu-id="f2da3-132">It sends a notification about this problem.</span></span>
2. <span data-ttu-id="f2da3-133">Elindít egy másik runbookot, amely automatikusan új virtuális gépet helyez üzembe.</span><span class="sxs-lookup"><span data-stu-id="f2da3-133">It starts another runbook that automatically provisions a new VM instead.</span></span>

<span data-ttu-id="f2da3-134">Egy megoldás toohave tooan tevékenység leírók lépés egy mutató HIV hiba van.</span><span class="sxs-lookup"><span data-stu-id="f2da3-134">One solution is toohave an error link pointing tooan activity that handles step one.</span></span> <span data-ttu-id="f2da3-135">Például kapcsolódhat hello **Write-Warning** parancsmag tooan tevékenység lépés két, például a hello **Start-AzureRmAutomationRunbook** parancsmag.</span><span class="sxs-lookup"><span data-stu-id="f2da3-135">For example, you could connect hello **Write-Warning** cmdlet tooan activity for step two, such as hello **Start-AzureRmAutomationRunbook** cmdlet.</span></span>

<span data-ttu-id="f2da3-136">Ez a viselkedés sok runbookok használatban volt is generalize, két tevékenységet tegyen egy külön hiba kezelési runbook és a korábbi javasolt következő hello útmutatást.</span><span class="sxs-lookup"><span data-stu-id="f2da3-136">You could also generalize this behavior for use in many runbooks by putting these two activities in a separate error handling runbook and following hello guidance suggested earlier.</span></span> <span data-ttu-id="f2da3-137">Előtt hívja meg a hibakezelő runbookot, akkor képes hello adatokból hello eredeti runbook egyéni üzenetet létrehozni, és akkor továbbítja, hibakezelés runbook paraméter toohello.</span><span class="sxs-lookup"><span data-stu-id="f2da3-137">Before calling this error-handling runbook, you could construct a custom message from hello data in hello original runbook, and then pass it as a parameter toohello error-handling runbook.</span></span>

## <a name="how-toouse-error-handling"></a><span data-ttu-id="f2da3-138">Hogyan toouse hibakezelés</span><span class="sxs-lookup"><span data-stu-id="f2da3-138">How toouse error handling</span></span>

<span data-ttu-id="f2da3-139">Minden tevékenység rendelkezik a kivételeket nem megszakító hibákká módosító konfigurációval.</span><span class="sxs-lookup"><span data-stu-id="f2da3-139">Each activity has a configuration setting that turns exceptions into non-terminating errors.</span></span> <span data-ttu-id="f2da3-140">Alapértelmezés szerint ez a beállítás le van tiltva.</span><span class="sxs-lookup"><span data-stu-id="f2da3-140">By default, this setting is disabled.</span></span> <span data-ttu-id="f2da3-141">Azt javasoljuk, hogy engedélyezi-e ezt a beállítást, olyan tevékenységeket, ha azt szeretné, hogy toohandle hibák.</span><span class="sxs-lookup"><span data-stu-id="f2da3-141">We recommend that you enable this setting on any activity where you want toohandle errors.</span></span>  

<span data-ttu-id="f2da3-142">Ha engedélyezi ezt a konfigurációt, lezáró mind a nem okozó hibák hello tevékenység nem okozó hibák kezeli, és hiba kapcsolattal rendelkező kezelhető vannak biztosítva.</span><span class="sxs-lookup"><span data-stu-id="f2da3-142">By enabling this configuration, you are assuring that both terminating and non-terminating errors in hello activity are handled as non-terminating errors, and can be handled with an error link.</span></span>  

<span data-ttu-id="f2da3-143">Miután ezt a beállítást, a kezelő hello hiba tevékenység létrehozása.</span><span class="sxs-lookup"><span data-stu-id="f2da3-143">After configuring this setting, you create an activity that handles hello error.</span></span> <span data-ttu-id="f2da3-144">Ha a tevékenység esetleges hibákat, majd hello hivatkozások követi kimenő hiba, és hello rendszeres hivatkozások nem, akkor is, ha hello tevékenység, valamint a rendszeres kimenetet hoz létre.</span><span class="sxs-lookup"><span data-stu-id="f2da3-144">If an activity produces any error, then hello outgoing error links are followed, and hello regular links are not, even if hello activity produces regular output as well.</span></span><br><br> ![Példa egy Automation runbook hibahivatkozásra](media/automation-runbook-graphical-error-handling/error-link-example.png)

<span data-ttu-id="f2da3-146">A következő példa hello, a runbook egy virtuális gép hello számítógép nevét tartalmazó változó kéri le.</span><span class="sxs-lookup"><span data-stu-id="f2da3-146">In hello following example, a runbook retrieves a variable that contains hello computer name of a virtual machine.</span></span> <span data-ttu-id="f2da3-147">A következő tevékenység hello toostart hello virtuális gép majd újrapróbálkozik.</span><span class="sxs-lookup"><span data-stu-id="f2da3-147">It then attempts toostart hello virtual machine with hello next activity.</span></span><br><br> ![Példa egy Automation runbook hibakezelésére](media/automation-runbook-graphical-error-handling/runbook-example-error-handling.png)<br><br>      

<span data-ttu-id="f2da3-149">Hello **Get-AutomationVariable** tevékenység és **Start-AzureRmVm** konfigurált tooconvert kivételek tooerrors vannak.</span><span class="sxs-lookup"><span data-stu-id="f2da3-149">hello **Get-AutomationVariable** activity and **Start-AzureRmVm** are configured tooconvert exceptions tooerrors.</span></span>  <span data-ttu-id="f2da3-150">Ha nincsenek hello kapják meg a változó és kezdő problémák hello virtuális gép, majd a hibák akkor jönnek létre.</span><span class="sxs-lookup"><span data-stu-id="f2da3-150">If there are problems getting hello variable or starting hello VM, then errors are generated.</span></span><br><br> <span data-ttu-id="f2da3-151">![Egy Automation runbook hibakezelési tevékenységének beállításai](media/automation-runbook-graphical-error-handling/activity-blade-convertexception-option.png)</span><span class="sxs-lookup"><span data-stu-id="f2da3-151">![Automation runbook error-handling activity settings](media/automation-runbook-graphical-error-handling/activity-blade-convertexception-option.png)</span></span>

<span data-ttu-id="f2da3-152">A tevékenységek tooa egyetlen haladjanak hiba hivatkozások **hiba felügyeleti** tevékenység (kód tevékenység).</span><span class="sxs-lookup"><span data-stu-id="f2da3-152">Error links flow from these activities tooa single **error management** activity (a code activity).</span></span> <span data-ttu-id="f2da3-153">Ez a tevékenység része hello használó egyszerű PowerShell-kifejezést *Throw* feldolgozás, jelszavat kulcsszó toostop *$Error.Exception.Message* tooget hello hello leíró üzenet aktuális kivétel.</span><span class="sxs-lookup"><span data-stu-id="f2da3-153">This activity is configured with a simple PowerShell expression that uses hello *Throw* keyword toostop processing, along with *$Error.Exception.Message* tooget hello message that describes hello current exception.</span></span><br><br> <span data-ttu-id="f2da3-154">![Példa egy Automation runbook hibakezelési kódra](media/automation-runbook-graphical-error-handling/runbook-example-error-handling-code.png)</span><span class="sxs-lookup"><span data-stu-id="f2da3-154">![Automation runbook error-handling code example](media/automation-runbook-graphical-error-handling/runbook-example-error-handling-code.png)</span></span>


## <a name="next-steps"></a><span data-ttu-id="f2da3-155">Következő lépések</span><span class="sxs-lookup"><span data-stu-id="f2da3-155">Next steps</span></span>

* <span data-ttu-id="f2da3-156">További információ a hivatkozások és a grafikus forgatókönyvek típusú hivatkozás toolearn lásd [grafikus készítése az Azure Automationben](automation-graphical-authoring-intro.md#links-and-workflow).</span><span class="sxs-lookup"><span data-stu-id="f2da3-156">toolearn more about links and link types in graphical runbooks, see [Graphical authoring in Azure Automation](automation-graphical-authoring-intro.md#links-and-workflow).</span></span>

* <span data-ttu-id="f2da3-157">További információk a runbook végrehajtása toomonitor runbook feladatokat, valamint egyéb technikai részleteket lásd: hogyan toolearn [nyomon követheti a runbook-feladatok](automation-runbook-execution.md).</span><span class="sxs-lookup"><span data-stu-id="f2da3-157">toolearn more about runbook execution, how toomonitor runbook jobs, and other technical details, see [Track a runbook job](automation-runbook-execution.md).</span></span>
