# <a name="secure-your-iot-deployment"></a><span data-ttu-id="6a269-101">Az IoT üzemelő példányának védelme</span><span class="sxs-lookup"><span data-stu-id="6a269-101">Secure your IoT deployment</span></span>
<span data-ttu-id="6a269-102">Ez a cikk hello következő szint biztosít hello Azure IoT-alapú az eszközök internetes hálózatát (IoT) infrastruktúra védelmének biztosítása.</span><span class="sxs-lookup"><span data-stu-id="6a269-102">This article provides hello next level of detail for securing hello Azure IoT-based Internet of Things (IoT) infrastructure.</span></span> <span data-ttu-id="6a269-103">Tooimplementation szint konfigurálása és telepítése az egyes összetevők részletes hivatkozik.</span><span class="sxs-lookup"><span data-stu-id="6a269-103">It links tooimplementation level details for configuring and deploying each component.</span></span> <span data-ttu-id="6a269-104">Összehasonlítás és a lehetőségek között a különböző versengő módszer is biztosít.</span><span class="sxs-lookup"><span data-stu-id="6a269-104">It also provides comparisons and choices between various competing methods.</span></span>

<span data-ttu-id="6a269-105">Hello Azure IoT telepítés biztonságossá tétele a következő három biztonsági területek hello osztható:</span><span class="sxs-lookup"><span data-stu-id="6a269-105">Securing hello Azure IoT deployment can be divided into hello following three security areas:</span></span>

* <span data-ttu-id="6a269-106">**Eszközbiztonsági**: biztonságossá tétele hello IoT-eszközök a helyettesítő hello telepítésekor.</span><span class="sxs-lookup"><span data-stu-id="6a269-106">**Device Security**: Securing hello IoT device while it is deployed in hello wild.</span></span>
* <span data-ttu-id="6a269-107">**Kapcsolat biztonsági**: hello IoT-eszközök és az IoT-központ között továbbított összes adat biztosítva a bizalmas és hamisíthatatlan.</span><span class="sxs-lookup"><span data-stu-id="6a269-107">**Connection Security**: Ensuring all data transmitted between hello IoT device and IoT Hub is confidential and tamper-proof.</span></span>
* <span data-ttu-id="6a269-108">**A felhő biztonsági**: azt toosecure adatokat szolgáltató keresztül halad át, és hello felhőben van tárolva.</span><span class="sxs-lookup"><span data-stu-id="6a269-108">**Cloud Security**: Providing a means toosecure data while it moves through, and is stored in hello cloud.</span></span>

![Három biztonsági területek][img-overview]

## <a name="secure-device-provisioning-and-authentication"></a><span data-ttu-id="6a269-110">Kiépítés biztonságos eszköz és a hitelesítés</span><span class="sxs-lookup"><span data-stu-id="6a269-110">Secure device provisioning and authentication</span></span>
<span data-ttu-id="6a269-111">hello Azure IoT Suite az IoT-eszközök a következő két módszer hello biztonságossá tételére:</span><span class="sxs-lookup"><span data-stu-id="6a269-111">hello Azure IoT Suite secures IoT devices by hello following two methods:</span></span>

* <span data-ttu-id="6a269-112">Az egyes eszközök ad meg egy egyedi identitáskulcs (biztonsági jogkivonatokat), amelyekkel hello eszköz toocommunicate a hello IoT-központ által.</span><span class="sxs-lookup"><span data-stu-id="6a269-112">By providing a unique identity key (security tokens) for each device, which can be used by hello device toocommunicate with hello IoT Hub.</span></span>
* <span data-ttu-id="6a269-113">A-eszköz segítségével [X.509 tanúsítvány] [ lnk-x509] és titkos kulcsok azt jelenti, hogy tooauthenticate hello eszköz toohello IoT-központot.</span><span class="sxs-lookup"><span data-stu-id="6a269-113">By using an on-device [X.509 certificate][lnk-x509] and private key as a means tooauthenticate hello device toohello IoT Hub.</span></span> <span data-ttu-id="6a269-114">Ez a hitelesítési módszer biztosítja, hogy hello hello eszközön titkos kulcs nem ismert hello eszköz kívül bármikor, így magasabb szintű biztonságot.</span><span class="sxs-lookup"><span data-stu-id="6a269-114">This authentication method ensures that hello private key on hello device is not known outside hello device at any time, providing a higher level of security.</span></span>

<span data-ttu-id="6a269-115">hello biztonsági token módszer minden hívás hello szimmetrikus kulcs tooeach hívás társításával hello eszköz tooIoT központ által végzett hitelesítést nyújt.</span><span class="sxs-lookup"><span data-stu-id="6a269-115">hello security token method provides authentication for each call made by hello device tooIoT Hub by associating hello symmetric key tooeach call.</span></span> <span data-ttu-id="6a269-116">X.509-alapú hitelesítés lehetővé teszi, hogy az IoT-eszközök hitelesítési hello fizikai rétegben hello TLS kapcsolat létrehozásának részeként.</span><span class="sxs-lookup"><span data-stu-id="6a269-116">X.509-based authentication allows authentication of an IoT device at hello physical layer as part of hello TLS connection establishment.</span></span> <span data-ttu-id="6a269-117">hello biztonsági jogkivonat-alapú módszer hello X.509-hitelesítést, amely egy kevésbé biztonságos minta nélkül használható lesz.</span><span class="sxs-lookup"><span data-stu-id="6a269-117">hello security-token-based method can be used without hello X.509 authentication which is a less secure pattern.</span></span> <span data-ttu-id="6a269-118">hello hello két módszerek közötti választást van elsősorban meghatározni által, hogy mennyire vannak biztonságban hello eszköz hitelesítést kell toobe és biztonságos tárolási hello eszközön rendelkezésre állását (toostore hello titkos kulcs biztonságos).</span><span class="sxs-lookup"><span data-stu-id="6a269-118">hello choice between hello two methods is primarily dictated by how secure hello device authentication needs toobe, and availability of secure storage on hello device (toostore hello private key securely).</span></span>

## <a name="iot-hub-security-tokens"></a><span data-ttu-id="6a269-119">IoT Hub biztonsági tokenek</span><span class="sxs-lookup"><span data-stu-id="6a269-119">IoT Hub security tokens</span></span>
<span data-ttu-id="6a269-120">Az IoT-központ biztonsági jogkivonatokat tooauthenticate eszközöket és szolgáltatásokat tooavoid kulcsok küldése hello hálózati használja.</span><span class="sxs-lookup"><span data-stu-id="6a269-120">IoT Hub uses security tokens tooauthenticate devices and services tooavoid sending keys on hello network.</span></span> <span data-ttu-id="6a269-121">Emellett biztonsági jogkivonatok érvényesség és hatókör korlátozott.</span><span class="sxs-lookup"><span data-stu-id="6a269-121">Additionally, security tokens are limited in time validity and scope.</span></span> <span data-ttu-id="6a269-122">Azure IoT SDK-k automatikusan hoz létre jogkivonatokat anélkül, hogy semmiféle speciális beállítást.</span><span class="sxs-lookup"><span data-stu-id="6a269-122">Azure IoT SDKs automatically generate tokens without requiring any special configuration.</span></span> <span data-ttu-id="6a269-123">Bizonyos esetekben azonban hello felhasználói toogenerate igényelnek, és biztonsági jogkivonatokat közvetlenül használható.</span><span class="sxs-lookup"><span data-stu-id="6a269-123">Some scenarios, however, require hello user toogenerate and use security tokens directly.</span></span> <span data-ttu-id="6a269-124">Ezek közé tartozik a hello hello MQTT, az AMQP vagy a HTTP-felületek közvetlen használatát, vagy hello végrehajtásának hello biztonságijogkivonat-szolgáltatás mintát.</span><span class="sxs-lookup"><span data-stu-id="6a269-124">These include hello direct use of hello MQTT, AMQP, or HTTP surfaces, or hello implementation of hello token service pattern.</span></span>

<span data-ttu-id="6a269-125">További részleteket a hello biztonsági jogkivonatot, és a használati hello szerkezete hello a következő cikkekben található:</span><span class="sxs-lookup"><span data-stu-id="6a269-125">More details on hello structure of hello security token and its usage can be found in hello following articles:</span></span>

* <span data-ttu-id="6a269-126">[Biztonsági jogkivonat szerkezete][lnk-security-tokens]</span><span class="sxs-lookup"><span data-stu-id="6a269-126">[Security token structure][lnk-security-tokens]</span></span>
* <span data-ttu-id="6a269-127">[SAS-tokenje eszközként használatával][lnk-sas-tokens]</span><span class="sxs-lookup"><span data-stu-id="6a269-127">[Using SAS tokens as a device][lnk-sas-tokens]</span></span>

<span data-ttu-id="6a269-128">Minden egyes IoT-központ rendelkezik egy [identitásjegyzékhez] [ lnk-identity-registry] , amely lehet hello szolgáltatás, például egy várólista, amely tartalmazza az üzenetsoroktól felhő eszközre üzenetek és tooallow hozzáférés toohello használt toocreate eszközönkénti erőforrások eszköz felé néző végpontok.</span><span class="sxs-lookup"><span data-stu-id="6a269-128">Each IoT Hub has an [identity registry][lnk-identity-registry] that can be used toocreate per-device resources in hello service, such as a queue that contains in-flight cloud-to-device messages, and tooallow access toohello device-facing endpoints.</span></span> <span data-ttu-id="6a269-129">az IoT-központ identitásjegyzékhez hello eszköz identitások és a biztonsági kulcsok megoldás biztonságos tárolására szolgál.</span><span class="sxs-lookup"><span data-stu-id="6a269-129">hello IoT Hub identity registry provides secure storage of device identities and security keys for a solution.</span></span> <span data-ttu-id="6a269-130">Személy vagy eszköz identitások csoportok is hozzáadhatók tooan engedélyezése, vagy egy tiltólista engedélyezése a teljes felügyeletet gyakorolhat az eszközök elérést.</span><span class="sxs-lookup"><span data-stu-id="6a269-130">Individual or groups of device identities can be added tooan allow list, or a block list, enabling complete control over device access.</span></span> <span data-ttu-id="6a269-131">hello következő cikkekben további részletekkel szolgálnak hello struktúra hello identitásjegyzékhez és a támogatott műveletek.</span><span class="sxs-lookup"><span data-stu-id="6a269-131">hello following articles provide more details on hello structure of hello identity registry and supported operations.</span></span>

<span data-ttu-id="6a269-132">[Az IoT-központ például MQTT AMQP vagy HTTP protokollt támogat][lnk-protocols].</span><span class="sxs-lookup"><span data-stu-id="6a269-132">[IoT Hub supports protocols such as MQTT, AMQP, and HTTP][lnk-protocols].</span></span> <span data-ttu-id="6a269-133">Biztonsági jogkivonatokat a hello IoT eszköz tooIoT Hub másképp egyes ezeket a protokollokat használja:</span><span class="sxs-lookup"><span data-stu-id="6a269-133">Each of these protocols use security tokens from hello IoT device tooIoT Hub differently:</span></span>

* <span data-ttu-id="6a269-134">AMQP: SASL egyszerű és AMQP jogcímalapú biztonsági ({házirendnév}@sas.root. { iothubName} hello esetben az IoT hub-szintű tokenek; {deviceId} eszköz hatókörű jogkivonatok esetén).</span><span class="sxs-lookup"><span data-stu-id="6a269-134">AMQP: SASL PLAIN and AMQP Claims-based security ({policyName}@sas.root.{iothubName} in hello case of IoT hub-level tokens; {deviceId} in case of device-scoped tokens).</span></span>
* <span data-ttu-id="6a269-135">MQTT: {DeviceId} csomagot használ Csatlakozás másként hello {ClientId}, {IoThubhostname} / {deviceId} hello a **felhasználónév** mező és SAS-kód a token hello **jelszó** mező.</span><span class="sxs-lookup"><span data-stu-id="6a269-135">MQTT: CONNECT packet uses {deviceId} as hello {ClientId}, {IoThubhostname}/{deviceId} in hello **Username** field and a SAS token in hello **Password** field.</span></span>
* <span data-ttu-id="6a269-136">HTTP: Érvénytelen lexikális elem hello engedélyezési kérelem fejlécében.</span><span class="sxs-lookup"><span data-stu-id="6a269-136">HTTP: Valid token is in hello authorization request header.</span></span>

<span data-ttu-id="6a269-137">Az IoT-központ identitásjegyzékhez használt tooconfigure eszközönkénti hitelesítő adatokat kell, és hozzáférés-vezérlést.</span><span class="sxs-lookup"><span data-stu-id="6a269-137">IoT Hub identity registry can be used tooconfigure per-device security credentials and access control.</span></span> <span data-ttu-id="6a269-138">Azonban ha egy IoT-megoldás már jelentős befektetési egy [egyéni eszköz identitása beállításjegyzék és/vagy hitelesítési séma][lnk-custom-auth], ezért integrálható az IoT hubbal meglévő infrastruktúra hozzon létre egy jogkivonat-szolgáltatás.</span><span class="sxs-lookup"><span data-stu-id="6a269-138">However, if an IoT solution already has a significant investment in a [custom device identity registry and/or authentication scheme][lnk-custom-auth], it can be integrated into an existing infrastructure with IoT Hub by creating a token service.</span></span>

### <a name="x509-certificate-based-device-authentication"></a><span data-ttu-id="6a269-139">X.509 tanúsítvány alapú eszközhitelesítés</span><span class="sxs-lookup"><span data-stu-id="6a269-139">X.509 certificate-based device authentication</span></span>
<span data-ttu-id="6a269-140">hello használata egy [eszközalapú X.509 tanúsítvány] [ lnk-use-x509] és a társított titkos és nyilvános kulcsból álló kulcspárt lehetővé teszi, hogy a további hitelesítési hello fizikai rétegben.</span><span class="sxs-lookup"><span data-stu-id="6a269-140">hello use of a [device-based X.509 certificate][lnk-use-x509] and its associated private and public key pair allows additional authentication at hello physical layer.</span></span> <span data-ttu-id="6a269-141">hello titkos kulcs lesz biztonságosan tárolva hello eszközt, és nincs felderíthető hello eszköz kívül.</span><span class="sxs-lookup"><span data-stu-id="6a269-141">hello private key is stored securely in hello device and is not discoverable outside hello device.</span></span> <span data-ttu-id="6a269-142">hello X.509 tanúsítvány hello eszköz, eszköz-Azonosítóját, például információ és az egyéb szervezeti adatait tartalmazza.</span><span class="sxs-lookup"><span data-stu-id="6a269-142">hello X.509 certificate contains information about hello device, such as device ID, and other organizational details.</span></span> <span data-ttu-id="6a269-143">Egy hello tanúsítvány aláírása generálja hello titkos kulccsal.</span><span class="sxs-lookup"><span data-stu-id="6a269-143">A signature of hello certificate is generated by using hello private key.</span></span>

<span data-ttu-id="6a269-144">Magas szintű eszköz üzembe helyezési folyamata:</span><span class="sxs-lookup"><span data-stu-id="6a269-144">High-level device provisioning flow:</span></span>

* <span data-ttu-id="6a269-145">Egy azonosító tooa fizikai eszköz társítása – eszközidentitást és/vagy X.509 tanúsítvány társított toohello eszköz eszköz gyártási vagy üzembe helyezés során.</span><span class="sxs-lookup"><span data-stu-id="6a269-145">Associate an identifier tooa physical device – device identity and/or X.509 certificate associated toohello device during device manufacturing or commissioning.</span></span>
* <span data-ttu-id="6a269-146">Hozzon létre egy megfelelő identitás IoT Hub – eszközidentitást és az IoT-központ identitásjegyzékhez hello társított eszközadatokat.</span><span class="sxs-lookup"><span data-stu-id="6a269-146">Create a corresponding identity entry in IoT Hub – device identity and associated device information in hello IoT Hub identity registry.</span></span>
* <span data-ttu-id="6a269-147">Biztonságosan tárolja az IoT-központ identitásjegyzékhez X.509 tanúsítvány ujjlenyomata.</span><span class="sxs-lookup"><span data-stu-id="6a269-147">Securely store X.509 certificate thumbprint in IoT Hub identity registry.</span></span>

### <a name="root-certificate-on-device"></a><span data-ttu-id="6a269-148">Legfelső szintű tanúsítványt az eszközre</span><span class="sxs-lookup"><span data-stu-id="6a269-148">Root certificate on device</span></span>
<span data-ttu-id="6a269-149">Az IoT hubbal biztonságos TLS kapcsolat létrehozásakor hello IoT-eszközök hello eszköz SDK részét képező legfelső szintű tanúsítványt használ az IoT-központ hitelesíti magát.</span><span class="sxs-lookup"><span data-stu-id="6a269-149">While establishing a secure TLS connection with IoT Hub, hello IoT device authenticates IoT Hub using a root certificate which is part of hello device SDK.</span></span> <span data-ttu-id="6a269-150">Hello C ügyfél SDK hello tanúsítvány hello mappában található "\\c\\Tanúsítványos" hello tárház hello gyökere alatt.</span><span class="sxs-lookup"><span data-stu-id="6a269-150">For hello C client SDK hello certificate is located under hello folder "\\c\\certs" under hello root of hello repo.</span></span> <span data-ttu-id="6a269-151">Bár a legfelső szintű tanúsítványok hosszú élettartamú, továbbra is lehetséges, hogy lejáratukig vagy vonható vissza.</span><span class="sxs-lookup"><span data-stu-id="6a269-151">Though these root certificates are long-lived, they still may expire or be revoked.</span></span> <span data-ttu-id="6a269-152">Ha nincs mód frissítésére a hello tanúsítvány hello eszközön hello eszköz nem lehet toosubsequently csatlakoztassa az IoT-központ toohello (vagy bármely más felhőalapú szolgáltatás).</span><span class="sxs-lookup"><span data-stu-id="6a269-152">If there is no way of updating hello certificate on hello device, hello device may not be able toosubsequently connect toohello IoT Hub (or any other cloud service).</span></span> <span data-ttu-id="6a269-153">Azt jelenti, hogy tooupdate hello legfelső szintű tanúsítvánnyal rendelkező hello IoT-eszközök telepítése után fog hatékonyan a kockázat csökkentése érdekében.</span><span class="sxs-lookup"><span data-stu-id="6a269-153">Having a means tooupdate hello root certificate once hello IoT device is deployed will effectively mitigate this risk.</span></span>

## <a name="securing-hello-connection"></a><span data-ttu-id="6a269-154">Hello kapcsolat biztonságossá tétele</span><span class="sxs-lookup"><span data-stu-id="6a269-154">Securing hello connection</span></span>
<span data-ttu-id="6a269-155">Internet kapcsolat hello IoT-eszközök és az IoT-központ között hello Transport Layer Security (TLS) szabvány használatával lett biztonságossá.</span><span class="sxs-lookup"><span data-stu-id="6a269-155">Internet connection between hello IoT device and IoT Hub is secured using hello Transport Layer Security (TLS) standard.</span></span> <span data-ttu-id="6a269-156">Az Azure IoT támogatja [TLS 1.2][lnk-tls12], TLS 1.1 és TLS 1.0, az itt megadott sorrendben.</span><span class="sxs-lookup"><span data-stu-id="6a269-156">Azure IoT supports [TLS 1.2][lnk-tls12], TLS 1.1 and TLS 1.0, in this order.</span></span> <span data-ttu-id="6a269-157">A TLS 1.0 támogatását a csak a visszamenőleges kompatibilitás érdekében.</span><span class="sxs-lookup"><span data-stu-id="6a269-157">Support for TLS 1.0 is provided for backward compatibility only.</span></span> <span data-ttu-id="6a269-158">Mivel a lehető legnagyobb biztonságot nyújt hello toouse TLS 1.2-es ajánlott.</span><span class="sxs-lookup"><span data-stu-id="6a269-158">It is recommended toouse TLS 1.2 since it provides hello most security.</span></span>

<span data-ttu-id="6a269-159">Az Azure IoT Suite titkosító csomag sorrendje a következő hello támogatja.</span><span class="sxs-lookup"><span data-stu-id="6a269-159">Azure IoT Suite supports hello following Cipher Suites, in this order.</span></span>

| <span data-ttu-id="6a269-160">Titkosítási csomagok</span><span class="sxs-lookup"><span data-stu-id="6a269-160">Cipher Suite</span></span> | <span data-ttu-id="6a269-161">Hossza</span><span class="sxs-lookup"><span data-stu-id="6a269-161">Length</span></span> |
| --- | --- |
| <span data-ttu-id="6a269-162">A TLS\_ECDHE\_RSA\_WITH\_AES\_256\_CBC\_SHA384 (0xc028) ECDH secp384r1 (eq.</span><span class="sxs-lookup"><span data-stu-id="6a269-162">TLS\_ECDHE\_RSA\_WITH\_AES\_256\_CBC\_SHA384 (0xc028) ECDH secp384r1 (eq.</span></span> <span data-ttu-id="6a269-163">FS 7680 bits RSA)</span><span class="sxs-lookup"><span data-stu-id="6a269-163">7680 bits RSA) FS</span></span> |<span data-ttu-id="6a269-164">256</span><span class="sxs-lookup"><span data-stu-id="6a269-164">256</span></span> |
| <span data-ttu-id="6a269-165">A TLS\_ECDHE\_RSA\_WITH\_AES\_128\_CBC\_SHA-256 (0xc027) ECDH secp256r1 (eq.</span><span class="sxs-lookup"><span data-stu-id="6a269-165">TLS\_ECDHE\_RSA\_WITH\_AES\_128\_CBC\_SHA256 (0xc027) ECDH secp256r1 (eq.</span></span> <span data-ttu-id="6a269-166">FS 3072 bits RSA)</span><span class="sxs-lookup"><span data-stu-id="6a269-166">3072 bits RSA) FS</span></span> |<span data-ttu-id="6a269-167">128</span><span class="sxs-lookup"><span data-stu-id="6a269-167">128</span></span> |
| <span data-ttu-id="6a269-168">A TLS\_ECDHE\_RSA\_WITH\_AES\_256\_CBC\_SHA (0xc014) ECDH secp384r1 (eq.</span><span class="sxs-lookup"><span data-stu-id="6a269-168">TLS\_ECDHE\_RSA\_WITH\_AES\_256\_CBC\_SHA (0xc014) ECDH secp384r1 (eq.</span></span> <span data-ttu-id="6a269-169">FS 7680 bits RSA)</span><span class="sxs-lookup"><span data-stu-id="6a269-169">7680 bits RSA) FS</span></span> |<span data-ttu-id="6a269-170">256</span><span class="sxs-lookup"><span data-stu-id="6a269-170">256</span></span> |
| <span data-ttu-id="6a269-171">A TLS\_ECDHE\_RSA\_WITH\_AES\_128\_CBC\_SHA (0xc013) ECDH secp256r1 (eq.</span><span class="sxs-lookup"><span data-stu-id="6a269-171">TLS\_ECDHE\_RSA\_WITH\_AES\_128\_CBC\_SHA (0xc013) ECDH secp256r1 (eq.</span></span> <span data-ttu-id="6a269-172">FS 3072 bits RSA)</span><span class="sxs-lookup"><span data-stu-id="6a269-172">3072 bits RSA) FS</span></span> |<span data-ttu-id="6a269-173">128</span><span class="sxs-lookup"><span data-stu-id="6a269-173">128</span></span> |
| <span data-ttu-id="6a269-174">A TLS\_RSA\_WITH\_AES\_256\_GCM\_SHA384 (0x9d)</span><span class="sxs-lookup"><span data-stu-id="6a269-174">TLS\_RSA\_WITH\_AES\_256\_GCM\_SHA384 (0x9d)</span></span> |<span data-ttu-id="6a269-175">256</span><span class="sxs-lookup"><span data-stu-id="6a269-175">256</span></span> |
| <span data-ttu-id="6a269-176">A TLS\_RSA\_WITH\_AES\_128\_GCM\_SHA-256 (0x9c)</span><span class="sxs-lookup"><span data-stu-id="6a269-176">TLS\_RSA\_WITH\_AES\_128\_GCM\_SHA256 (0x9c)</span></span> |<span data-ttu-id="6a269-177">128</span><span class="sxs-lookup"><span data-stu-id="6a269-177">128</span></span> |
| <span data-ttu-id="6a269-178">A TLS\_RSA\_WITH\_AES\_256\_CBC\_SHA-256 (0x3d)</span><span class="sxs-lookup"><span data-stu-id="6a269-178">TLS\_RSA\_WITH\_AES\_256\_CBC\_SHA256 (0x3d)</span></span> |<span data-ttu-id="6a269-179">256</span><span class="sxs-lookup"><span data-stu-id="6a269-179">256</span></span> |
| <span data-ttu-id="6a269-180">A TLS\_RSA\_WITH\_AES\_128\_CBC\_SHA-256 (0x3c)</span><span class="sxs-lookup"><span data-stu-id="6a269-180">TLS\_RSA\_WITH\_AES\_128\_CBC\_SHA256 (0x3c)</span></span> |<span data-ttu-id="6a269-181">128</span><span class="sxs-lookup"><span data-stu-id="6a269-181">128</span></span> |
| <span data-ttu-id="6a269-182">A TLS\_RSA\_WITH\_AES\_256\_CBC\_SHA (0x35 hiba)</span><span class="sxs-lookup"><span data-stu-id="6a269-182">TLS\_RSA\_WITH\_AES\_256\_CBC\_SHA (0x35)</span></span> |<span data-ttu-id="6a269-183">256</span><span class="sxs-lookup"><span data-stu-id="6a269-183">256</span></span> |
| <span data-ttu-id="6a269-184">A TLS\_RSA\_WITH\_AES\_128\_CBC\_SHA (0x2f)</span><span class="sxs-lookup"><span data-stu-id="6a269-184">TLS\_RSA\_WITH\_AES\_128\_CBC\_SHA (0x2f)</span></span> |<span data-ttu-id="6a269-185">128</span><span class="sxs-lookup"><span data-stu-id="6a269-185">128</span></span> |
| <span data-ttu-id="6a269-186">A TLS\_RSA\_WITH\_3DES\_EDE\_CBC\_SHA (0xa)</span><span class="sxs-lookup"><span data-stu-id="6a269-186">TLS\_RSA\_WITH\_3DES\_EDE\_CBC\_SHA (0xa)</span></span> |<span data-ttu-id="6a269-187">112</span><span class="sxs-lookup"><span data-stu-id="6a269-187">112</span></span> |

## <a name="securing-hello-cloud"></a><span data-ttu-id="6a269-188">Hello felhő biztonságossá tétele</span><span class="sxs-lookup"><span data-stu-id="6a269-188">Securing hello cloud</span></span>
<span data-ttu-id="6a269-189">Az Azure IoT-központ lehetővé teszi, hogy a definíciója [hozzáférés-vezérlési házirendeket] [ lnk-protocols] minden egyes biztonsági kulcshoz.</span><span class="sxs-lookup"><span data-stu-id="6a269-189">Azure IoT Hub allows definition of [access control policies][lnk-protocols] for each security key.</span></span> <span data-ttu-id="6a269-190">A következő engedélyek toogrant hozzáférés tooeach az IoT-központok végpontjai készlete hello használ.</span><span class="sxs-lookup"><span data-stu-id="6a269-190">It uses hello following set of permissions toogrant access tooeach of IoT Hub's endpoints.</span></span> <span data-ttu-id="6a269-191">Engedélyek korlátozása hello hozzáférés tooan IoT-központ funkciókon alapulnak.</span><span class="sxs-lookup"><span data-stu-id="6a269-191">Permissions limit hello access tooan IoT Hub based on functionality.</span></span>

* <span data-ttu-id="6a269-192">**RegistryRead**.</span><span class="sxs-lookup"><span data-stu-id="6a269-192">**RegistryRead**.</span></span> <span data-ttu-id="6a269-193">Olvasási hozzáférés toohello identitásjegyzékhez biztosít.</span><span class="sxs-lookup"><span data-stu-id="6a269-193">Grants read access toohello identity registry.</span></span> <span data-ttu-id="6a269-194">További információkért lásd: [identitásjegyzékhez][lnk-identity-registry].</span><span class="sxs-lookup"><span data-stu-id="6a269-194">For more information, see [identity registry][lnk-identity-registry].</span></span>
* <span data-ttu-id="6a269-195">**RegistryReadWrite**.</span><span class="sxs-lookup"><span data-stu-id="6a269-195">**RegistryReadWrite**.</span></span> <span data-ttu-id="6a269-196">Biztosít olvasási és írási hozzáférés toohello identitásjegyzékhez.</span><span class="sxs-lookup"><span data-stu-id="6a269-196">Grants read and write access toohello identity registry.</span></span> <span data-ttu-id="6a269-197">További információkért lásd: [identitásjegyzékhez][lnk-identity-registry].</span><span class="sxs-lookup"><span data-stu-id="6a269-197">For more information, see [identity registry][lnk-identity-registry].</span></span>
* <span data-ttu-id="6a269-198">**ServiceConnect**.</span><span class="sxs-lookup"><span data-stu-id="6a269-198">**ServiceConnect**.</span></span> <span data-ttu-id="6a269-199">A hozzáférési toocloud szolgáltatás irányuló kommunikációt és a végpontok ellenőrzésére.</span><span class="sxs-lookup"><span data-stu-id="6a269-199">Grants access toocloud service-facing communication and monitoring endpoints.</span></span> <span data-ttu-id="6a269-200">Például ad engedélyt tooback-a befejezési felhőalapú szolgáltatások tooreceive eszközről a felhőbe üzeneteket, és a felhő-eszközre küldött üzenetek küldése hello megfelelő kézbesítési visszaigazolások beolvasása.</span><span class="sxs-lookup"><span data-stu-id="6a269-200">For example, it grants permission tooback-end cloud services tooreceive device-to-cloud messages, send cloud-to-device messages, and retrieve hello corresponding delivery acknowledgments.</span></span>
* <span data-ttu-id="6a269-201">**DeviceConnect**.</span><span class="sxs-lookup"><span data-stu-id="6a269-201">**DeviceConnect**.</span></span> <span data-ttu-id="6a269-202">A hozzáférési toodevice felé néző végpontok.</span><span class="sxs-lookup"><span data-stu-id="6a269-202">Grants access toodevice-facing endpoints.</span></span> <span data-ttu-id="6a269-203">Például engedélyt ad toosend eszközről a felhőbe üzeneteket, és felhő-eszközre küldött üzenetek fogadására.</span><span class="sxs-lookup"><span data-stu-id="6a269-203">For example, it grants permission toosend device-to-cloud messages and receive cloud-to-device messages.</span></span> <span data-ttu-id="6a269-204">Ez az engedély eszközöket használják.</span><span class="sxs-lookup"><span data-stu-id="6a269-204">This permission is used by devices.</span></span>

<span data-ttu-id="6a269-205">Nincsenek a két módon tooobtain **DeviceConnect** IoT hubot engedélyeket [biztonsági jogkivonatokat][lnk-sas-tokens]: egy eszköz identitáskulcs, vagy egy megosztott elérési kulcsot.</span><span class="sxs-lookup"><span data-stu-id="6a269-205">There are two ways tooobtain **DeviceConnect** permissions with IoT Hub with [security tokens][lnk-sas-tokens]: using a device identity key, or a shared access key.</span></span> <span data-ttu-id="6a269-206">Ezenkívül fontos toonote eszközökhöz elérhető összes funkciót előtaggal rendelkező végpontokon szándékosan elérhetővé `/devices/{deviceId}`.</span><span class="sxs-lookup"><span data-stu-id="6a269-206">Moreover, it is important toonote that all functionality accessible from devices is exposed by design on endpoints with prefix `/devices/{deviceId}`.</span></span>

<span data-ttu-id="6a269-207">[Szolgáltatás-összetevők csak hozhat létre a biztonsági jogkivonatokat] [ lnk-service-tokens] használatával megosztott hozzáférési házirendek hello megfelelő jogosultságokat.</span><span class="sxs-lookup"><span data-stu-id="6a269-207">[Service components can only generate security tokens][lnk-service-tokens] using shared access policies granting hello appropriate permissions.</span></span>

<span data-ttu-id="6a269-208">Azure IoT Hub és egyéb szolgáltatásokat, amelyek hello megoldás részét képezhetik engedélyezése a felhasználók a hello Azure Active Directory felügyeleti.</span><span class="sxs-lookup"><span data-stu-id="6a269-208">Azure IoT Hub and other services which may be part of hello solution allow management of users using hello Azure Active Directory.</span></span>

<span data-ttu-id="6a269-209">Azure IoT-központ által okozhatnak adatokat képes használni a számos olyan szolgáltatásokat, például Azure Stream Analytics és az Azure blob Storage tárolóban.</span><span class="sxs-lookup"><span data-stu-id="6a269-209">Data ingested by Azure IoT Hub can be consumed by a variety of services such as Azure Stream Analytics and Azure blob storage.</span></span> <span data-ttu-id="6a269-210">Ezek a szolgáltatások felügyeleti hozzá lehessen férni.</span><span class="sxs-lookup"><span data-stu-id="6a269-210">These services allow management access.</span></span> <span data-ttu-id="6a269-211">További tájékoztatást talál a szolgáltatások és a rendelkezésre álló lehetőségeket az alábbi:</span><span class="sxs-lookup"><span data-stu-id="6a269-211">Read more about these services and available options below:</span></span>

* <span data-ttu-id="6a269-212">[Az Azure DocumentDB][lnk-docdb]: egy méretezhető, teljes mértékben indexelt dokumentumadatbázis-szolgáltatás, amely kezeli a metaadatok hello eszközök félig strukturált adatok ellátásához, például az attribútumokat, a konfiguráció és a biztonsági tulajdonságait.</span><span class="sxs-lookup"><span data-stu-id="6a269-212">[Azure DocumentDB][lnk-docdb]: A scalable, fully-indexed database service for semi-structured data that manages metadata for hello devices you provision, such as attributes, configuration, and security properties.</span></span> <span data-ttu-id="6a269-213">A DocumentDB nagy teljesítményű és nagy átviteli feldolgozás, a séma-független indexelő adatokat, és egy részletes SQL-lekérdezési felületet kínál.</span><span class="sxs-lookup"><span data-stu-id="6a269-213">DocumentDB offers high-performance and high-throughput processing, schema-agnostic indexing of data, and a rich SQL query interface.</span></span>
* <span data-ttu-id="6a269-214">[Az Azure Stream Analytics][lnk-asa]: valós idejű streamfeldolgozó hello felhőben, amely lehetővé teszi, hogy toorapidly fejlesztéséhez és központi telepítése egy alacsony költségű analytics megoldás toouncover valós idejű elemzése eszközök, érzékelőket, infrastruktúra, és az alkalmazások.</span><span class="sxs-lookup"><span data-stu-id="6a269-214">[Azure Stream Analytics][lnk-asa]: Real-time stream processing in hello cloud that enables you toorapidly develop and deploy a low-cost analytics solution toouncover real-time insights from devices, sensors, infrastructure, and applications.</span></span> <span data-ttu-id="6a269-215">a teljes körűen felügyelt szolgáltatás hello adatait is méretezhető tooany kötet megőrzése mellett nagy átviteli sebességet, alacsony késéssel és rugalmasság.</span><span class="sxs-lookup"><span data-stu-id="6a269-215">hello data from this fully-managed service can scale tooany volume while still achieving high throughput, low latency, and resiliency.</span></span>
* <span data-ttu-id="6a269-216">[Az Azure App Services][lnk-appservices]: egy felhőalapú platform toobuild hatékony webes és mobilalkalmazások bárhol; toodata hello felhőalapú vagy helyszíni.</span><span class="sxs-lookup"><span data-stu-id="6a269-216">[Azure App Services][lnk-appservices]: A cloud platform toobuild powerful web and mobile apps that connect toodata anywhere; in hello cloud or on-premises.</span></span> <span data-ttu-id="6a269-217">Vonzó alkalmazások készítése iOS, Android és Windows rendszerre.</span><span class="sxs-lookup"><span data-stu-id="6a269-217">Build engaging mobile apps for iOS, Android, and Windows.</span></span> <span data-ttu-id="6a269-218">Integrálható a szoftver szolgáltatott szoftverként (SaaS) és vállalati alkalmazások a felhő alapú szolgáltatások out-of-az-box kapcsolat toodozens és vállalati alkalmazások.</span><span class="sxs-lookup"><span data-stu-id="6a269-218">Integrate with your Software as a Service (SaaS) and enterprise applications with out-of-the-box connectivity toodozens of cloud-based services and enterprise applications.</span></span> <span data-ttu-id="6a269-219">A kedvenc nyelvi és IDE az (.NET, Node.js, PHP, Python vagy Java) toobuild webes alkalmazásokat és API-k minden eddiginél gyorsabban.</span><span class="sxs-lookup"><span data-stu-id="6a269-219">Code in your favorite language and IDE (.NET, Node.js, PHP, Python, or Java) toobuild web apps and APIs faster than ever.</span></span>
* <span data-ttu-id="6a269-220">[A Logic Apps][lnk-logicapps]: hello Logic Apps szolgáltatás az Azure App Service segítségével rendszerintegráció IoT megoldás tooyour meglévő üzleti és munkafolyamat-folyamatok automatizálása.</span><span class="sxs-lookup"><span data-stu-id="6a269-220">[Logic Apps][lnk-logicapps]: hello Logic Apps feature of Azure App Service helps integrate your IoT solution tooyour existing line-of-business systems and automate workflow processes.</span></span> <span data-ttu-id="6a269-221">A Logic Apps lehetővé teszi, hogy a fejlesztők toodesign munkafolyamatok, amelyek egy és majd végrehajtanak bizonyos lépéseket – szabályok és a műveletek, amelyeket az üzleti folyamatok hatékony összekötők toointegrate használhat.</span><span class="sxs-lookup"><span data-stu-id="6a269-221">Logic Apps enables developers toodesign workflows that start from a trigger and then execute a series of steps—rules and actions that use powerful connectors toointegrate with your business processes.</span></span> <span data-ttu-id="6a269-222">A Logic Apps kínál out-of-az-box kapcsolat tooa túlnyomó ökoszisztémájának alkalmazásával az SaaS, a felhő alapú, és a helyszíni alkalmazások.</span><span class="sxs-lookup"><span data-stu-id="6a269-222">Logic Apps offers out-of-the-box connectivity tooa vast ecosystem of SaaS, cloud-based, and on-premises applications.</span></span>
* <span data-ttu-id="6a269-223">[Az Azure blob storage][lnk-blob]: hello adatok, az eszközök küldjön toohello felhő gazdaságos, megbízható felhőalapú tárolása.</span><span class="sxs-lookup"><span data-stu-id="6a269-223">[Azure blob storage][lnk-blob]: Reliable, economical cloud storage for hello data that your devices send toohello cloud.</span></span>

## <a name="conclusion"></a><span data-ttu-id="6a269-224">Összegzés</span><span class="sxs-lookup"><span data-stu-id="6a269-224">Conclusion</span></span>
<span data-ttu-id="6a269-225">Ez a cikk áttekintést nyújt az megvalósítási tervezése és telepítése az IoT-infrastruktúrát használó Azure IoT szintű részleteit.</span><span class="sxs-lookup"><span data-stu-id="6a269-225">This article provides overview of implementation level details for designing and deploying an IoT infrastructure using Azure IoT.</span></span> <span data-ttu-id="6a269-226">Minden biztonságos összetevő toobe konfigurálása van a kulcs védelméhez hello általános IoT-infrastruktúra.</span><span class="sxs-lookup"><span data-stu-id="6a269-226">Configuring each component toobe secure is key in securing hello overall IoT infrastructure.</span></span> <span data-ttu-id="6a269-227">hello tervezési döntések ütköznek azokkal elérhető Azure IoT biztosít bizonyos fokú rugalmasságot és a választott; minden kiválasztott azonban biztonsági hatásai lehetnek.</span><span class="sxs-lookup"><span data-stu-id="6a269-227">hello design choices available in Azure IoT provide some level of flexibility and choice; however, each choice may have security implications.</span></span> <span data-ttu-id="6a269-228">Javasoljuk, hogy ezek mindegyikének lehet értékelni a kockázat/költsége értékelése.</span><span class="sxs-lookup"><span data-stu-id="6a269-228">It is recommended that each of these choices be evaluated through a risk/cost assessment.</span></span>

[img-overview]: media/iot-secure-your-deployment/overview.png

[lnk-security-tokens]: ../articles/iot-hub/iot-hub-devguide-security.md#security-token-structure
[lnk-sas-tokens]: ../articles/iot-hub/iot-hub-devguide-security.md#use-sas-tokens-in-a-device-app
[lnk-identity-registry]: ../articles/iot-hub/iot-hub-devguide-identity-registry.md
[lnk-protocols]: ../articles/iot-hub/iot-hub-devguide-security.md
[lnk-custom-auth]: ../articles/iot-hub/iot-hub-devguide-security.md#custom-device-authentication
[lnk-x509]: http://www.itu.int/rec/T-REC-X.509-201210-I/en
[lnk-use-x509]: ../articles/iot-hub/iot-hub-devguide-security.md
[lnk-tls12]: https://tools.ietf.org/html/rfc5246
[lnk-service-tokens]: ../articles/iot-hub/iot-hub-devguide-security.md#use-security-tokens-from-service-components
[lnk-docdb]: https://azure.microsoft.com/services/documentdb/
[lnk-asa]: https://azure.microsoft.com/services/stream-analytics/
[lnk-appservices]: https://azure.microsoft.com/services/app-service/
[lnk-logicapps]: https://azure.microsoft.com/services/app-service/logic/
[lnk-blob]: https://azure.microsoft.com/services/storage/
